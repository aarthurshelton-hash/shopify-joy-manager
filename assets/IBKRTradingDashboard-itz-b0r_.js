const e='/**\n * IBKR Trading Dashboard\n * \n * Unified dashboard for Interactive Brokers paper/live trading.\n * Integrates En Pensent predictions with IBKR order execution.\n * Now includes 24/7 autonomous trading with real IBKR data.\n */\n\nimport { useState, useEffect, useMemo, useCallback } from \'react\';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \'@/components/ui/card\';\nimport { Button } from \'@/components/ui/button\';\nimport { Input } from \'@/components/ui/input\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Alert, AlertDescription, AlertTitle } from \'@/components/ui/alert\';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \'@/components/ui/select\';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \'@/components/ui/tabs\';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \'@/components/ui/table\';\nimport { Progress } from \'@/components/ui/progress\';\nimport { useIBKRGateway } from \'@/hooks/useIBKRGateway\';\nimport { supabase } from \'@/integrations/supabase/client\';\nimport { \n  Loader2, \n  Wifi, \n  WifiOff, \n  RefreshCw, \n  TrendingUp, \n  TrendingDown,\n  AlertCircle,\n  CheckCircle2,\n  ExternalLink,\n  DollarSign,\n  Target,\n  Activity,\n  Briefcase,\n  ShoppingCart,\n  History,\n  BarChart3,\n  Zap,\n  Bot,\n  Play,\n  Square,\n  Brain,\n  LineChart,\n  Bolt,\n  Clock,\n} from \'lucide-react\';\n\n// Tracked symbols for quick trading\nconst QUICK_SYMBOLS = [\'SPY\', \'QQQ\', \'AAPL\', \'MSFT\', \'NVDA\', \'TSLA\', \'AMD\', \'META\'];\n\ninterface QuoteData {\n  symbol: string;\n  price: number;\n  change: number;\n  changePercent: number;\n}\n\ninterface HfTrade {\n  id: string;\n  symbol: string;\n  direction: string;\n  entry_price: number;\n  shares: number;\n  status: string;\n  pnl?: number;\n  created_at: string;\n  predicted_direction?: string;\n  predicted_confidence?: number;\n  stop_loss?: number;\n  take_profit?: number;\n}\n\nexport function IBKRTradingDashboard() {\n  const {\n    connected,\n    authenticated,\n    paperTrading,\n    accounts,\n    selectedAccount,\n    positions,\n    orders,\n    loading,\n    error,\n    checkConnection,\n    connectToGateway,\n    refreshData,\n    placeOrder,\n    cancelOrder,\n    selectAccount,\n  } = useIBKRGateway();\n\n  const [activeTab, setActiveTab] = useState(\'overview\');\n  const [quotes, setQuotes] = useState<QuoteData[]>([]);\n  const [loadingQuotes, setLoadingQuotes] = useState(false);\n  \n  // High-frequency trading state\n  const [hfTrades, setHfTrades] = useState<HfTrade[]>([]);\n  const [hfStats, setHfStats] = useState({ total: 0, today: 0, pnl: 0 });\n  const [hfConnected, setHfConnected] = useState(false);\n  \n  // Order form state\n  const [orderForm, setOrderForm] = useState({\n    symbol: \'SPY\',\n    side: \'BUY\' as \'BUY\' | \'SELL\',\n    quantity: 1,\n    orderType: \'MKT\' as \'MKT\' | \'LMT\',\n    price: 0,\n  });\n  const [isPlacingOrder, setIsPlacingOrder] = useState(false);\n\n  // Load high-frequency trading data from Supabase with realtime\n  useEffect(() => {\n    const loadHfData = async () => {\n      try {\n        // Check farm_status for high-frequency worker - treat any recent update as running\n        const { data: statusData } = await supabase\n          .from(\'farm_status\')\n          .select(\'*\')\n          .eq(\'farm_name\', \'high-frequency-paper-trader\')\n          .single();\n        \n        if (statusData) {\n          // Consider worker running if status is \'trading\' OR updated in last 2 minutes\n          const lastUpdate = new Date(statusData.updated_at);\n          const twoMinutesAgo = new Date(Date.now() - 2 * 60 * 1000);\n          const isRecentlyActive = lastUpdate > twoMinutesAgo;\n          setHfConnected(statusData.status === \'trading\' || isRecentlyActive);\n        }\n\n        // Load recent trades\n        const { data: trades } = await supabase\n          .from(\'autonomous_trades\')\n          .select(\'*\')\n          .order(\'created_at\', { ascending: false })\n          .limit(50);\n\n        if (trades) {\n          setHfTrades(trades as HfTrade[]);\n          const today = new Date();\n          today.setHours(0, 0, 0, 0);\n          const todayTrades = (trades as HfTrade[]).filter(t => new Date(t.created_at) >= today);\n          const totalPnl = (trades as HfTrade[]).reduce((sum, t) => sum + (t.pnl || 0), 0);\n          setHfStats({\n            total: trades.length,\n            today: todayTrades.length,\n            pnl: totalPnl\n          });\n        }\n      } catch (err) {\n        console.error(\'[HF] Error loading data:\', err);\n      }\n    };\n\n    loadHfData();\n\n    // Subscribe to realtime trades\n    const subscription = supabase\n      .channel(\'hf-trades\')\n      .on(\'postgres_changes\', \n        { event: \'INSERT\', schema: \'public\', table: \'autonomous_trades\' },\n        (payload) => {\n          const newTrade = payload.new as HfTrade;\n          setHfTrades(prev => [newTrade, ...prev].slice(0, 50));\n          const today = new Date();\n          today.setHours(0, 0, 0, 0);\n          const isToday = new Date(newTrade.created_at) >= today;\n          setHfStats(prev => ({\n            total: prev.total + 1,\n            today: isToday ? prev.today + 1 : prev.today,\n            pnl: prev.pnl + (newTrade.pnl || 0)\n          }));\n        }\n      )\n      .subscribe();\n\n    // Also poll farm_status every 5s for worker health\n    const interval = setInterval(loadHfData, 5000);\n    \n    return () => {\n      clearInterval(interval);\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  // Handle gateway settings change - reconnect\n  const handleGatewaySettingsChange = useCallback(() => {\n    checkConnection();\n  }, [checkConnection]);\n\n  // Load quotes for quick symbols\n  useEffect(() => {\n    if (authenticated) {\n      loadQuotes();\n      const interval = setInterval(loadQuotes, 30000); // Refresh every 30s\n      return () => clearInterval(interval);\n    }\n  }, [authenticated]);\n\n  const loadQuotes = async () => {\n    setLoadingQuotes(true);\n    try {\n      const { data, error } = await supabase.functions.invoke(\'stock-data\', {\n        body: { action: \'batch\', symbols: QUICK_SYMBOLS }\n      });\n      \n      if (!error && data?.stocks) {\n        setQuotes(data.stocks.map((s: {symbol: string, latestPrice: number, change: number, changePercent: number}) => ({\n          symbol: s.symbol,\n          price: s.latestPrice,\n          change: s.change,\n          changePercent: s.changePercent,\n        })));\n      }\n    } catch (err) {\n      console.error(\'[IBKR] Quote load error:\', err);\n    } finally {\n      setLoadingQuotes(false);\n    }\n  };\n\n  const handlePlaceOrder = async () => {\n    setIsPlacingOrder(true);\n    await placeOrder({\n      symbol: orderForm.symbol,\n      side: orderForm.side,\n      quantity: orderForm.quantity,\n      orderType: orderForm.orderType,\n      price: orderForm.orderType === \'LMT\' ? orderForm.price : undefined,\n    });\n    setIsPlacingOrder(false);\n  };\n\n  const handleQuickBuy = (symbol: string) => {\n    setOrderForm(prev => ({ ...prev, symbol, side: \'BUY\' }));\n    setActiveTab(\'trade\');\n  };\n\n  // Calculate portfolio stats\n  const portfolioStats = useMemo(() => {\n    const totalValue = positions.reduce((sum, p) => sum + p.marketValue, 0);\n    const totalPnL = positions.reduce((sum, p) => sum + p.unrealizedPnl, 0);\n    const totalRealizedPnL = positions.reduce((sum, p) => sum + p.realizedPnl, 0);\n    \n    return {\n      totalValue,\n      totalPnL,\n      totalRealizedPnL,\n      pnlPercent: selectedAccount?.balance ? (totalPnL / selectedAccount.balance) * 100 : 0,\n    };\n  }, [positions, selectedAccount]);\n\n  // ========== LOADING STATE ==========\n  if (loading) {\n    return (\n      <Card>\n        <CardHeader>\n          <div className="flex items-center justify-between">\n            <CardTitle className="flex items-center gap-2">\n              <Loader2 className="h-5 w-5 animate-spin text-primary" />\n              Connecting to IB Gateway Bridge...\n            </CardTitle>\n          </div>\n          <CardDescription>\n            Checking connection to gateway\n          </CardDescription>\n        </CardHeader>\n        <CardContent className="space-y-4">\n          <Progress value={33} className="h-2" />\n          <p className="text-sm text-muted-foreground">\n            Looking for the Client Portal Gateway...\n          </p>\n          \n          <Alert>\n            <AlertCircle className="h-4 w-4" />\n            <AlertTitle>Connection taking too long?</AlertTitle>\n            <AlertDescription className="space-y-2 mt-2">\n              <p>Your browser may be blocking the connection. Try:</p>\n              <ol className="list-decimal list-inside text-sm space-y-1">\n                <li>Click <strong>Gateway Settings</strong> above to configure your gateway URL</li>\n                <li>If using remotely, enter your machine\'s IP (e.g., https://192.168.1.100:5000)</li>\n                <li>Accept the <strong>self-signed certificate warning</strong> in your browser</li>\n                <li>Login if prompted, then return here</li>\n              </ol>\n            </AlertDescription>\n          </Alert>\n          \n          <Button \n            variant="outline" \n            size="sm"\n            onClick={() => window.open(\'https://localhost:5000\', \'_blank\')}\n          >\n            <ExternalLink className="h-4 w-4 mr-2" />\n            Open Gateway in New Tab\n          </Button>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // ========== NOT CONNECTED STATE ==========\n  if (!connected) {\n    return (\n      <Card className="border-destructive/50">\n        <CardHeader>\n          <div className="flex items-center justify-between">\n            <CardTitle className="flex items-center gap-2 text-destructive">\n              <WifiOff className="h-5 w-5" />\n              IB Gateway Bridge Not Running\n            </CardTitle>\n          </div>\n          <CardDescription>\n            {error || \'Start the IBKR Client Portal Gateway to begin trading.\'}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className="space-y-4">\n          <Alert>\n            <AlertCircle className="h-4 w-4" />\n            <AlertTitle>Quick Setup</AlertTitle>\n            <AlertDescription className="space-y-2">\n              <ol className="list-decimal list-inside space-y-2 mt-2">\n                <li>\n                  Download the <a \n                    href="https://www.interactivebrokers.com/en/trading/ib-api.php" \n                    target="_blank" \n                    rel="noopener" \n                    className="text-primary underline font-medium"\n                  >\n                    IBKR Client Portal Gateway\n                  </a>\n                </li>\n                <li>\n                  Run <code className="bg-muted px-1 rounded text-sm">bin/run.sh</code> (Mac) \n                  or <code className="bg-muted px-1 rounded text-sm">bin/run.bat</code> (Windows)\n                </li>\n                <li>\n                  Login at <strong>https://localhost:5000</strong> with IBKR credentials\n                </li>\n                <li>\n                  <strong>Using remote access?</strong> Click Gateway Settings above and enter your machine\'s IP\n                </li>\n              </ol>\n            </AlertDescription>\n          </Alert>\n          \n          <div className="flex gap-2">\n            <Button onClick={checkConnection} className="flex-1">\n              <RefreshCw className="h-4 w-4 mr-2" />\n              Retry Connection\n            </Button>\n            \n            <Button \n              variant="outline" \n              onClick={() => window.open(\'https://localhost:5000\', \'_blank\')}\n            >\n              <ExternalLink className="h-4 w-4 mr-2" />\n              Open Gateway\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // ========== NOT AUTHENTICATED STATE ==========\n  if (!authenticated) {\n    return (\n      <Card className="border-warning/50">\n        <CardHeader>\n          <CardTitle className="flex items-center gap-2 text-warning">\n            <Wifi className="h-5 w-5" />\n            Gateway Running - Login Required\n          </CardTitle>\n        </CardHeader>\n        <CardContent className="space-y-4">\n          <Alert variant="default">\n            <AlertCircle className="h-4 w-4" />\n            <AlertDescription>\n              Bridge is running but not connected to IB Gateway. \n              Open IB Gateway desktop app, log in, then click "Connect to Gateway".\n            </AlertDescription>\n          </Alert>\n          \n          <div className="flex gap-2">\n            <Button \n              onClick={connectToGateway}\n              className="flex-1"\n            >\n              <Wifi className="h-4 w-4 mr-2" />\n              Connect to Gateway\n            </Button>\n            \n            <Button variant="outline" onClick={checkConnection}>\n              <RefreshCw className="h-4 w-4 mr-2" />\n              Check Status\n            </Button>\n          </div>\n          \n          <p className="text-xs text-muted-foreground">\n            IB Gateway must be running with API enabled (port 4002 for paper trading).\n          </p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // ========== CONNECTED & AUTHENTICATED ==========\n  return (\n    <div className="space-y-6">\n      {/* Account Header */}\n      <Card className="bg-gradient-to-br from-card via-card to-primary/5 border-primary/20">\n        <CardContent className="pt-6">\n          <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">\n            {/* Connection Status & Account Selector */}\n            <div className="flex items-center gap-4">\n              <div className="flex items-center gap-2">\n                <CheckCircle2 className="h-5 w-5 text-primary" />\n                <span className="font-medium">IBKR Connected</span>\n                {paperTrading && (\n                  <Badge variant="outline" className="bg-primary/10 text-primary border-primary">\n                    Paper Trading\n                  </Badge>\n                )}\n              </div>\n              \n              <Select \n                value={selectedAccount?.accountId || \'\'} \n                onValueChange={selectAccount}\n              >\n                <SelectTrigger className="w-48">\n                  <SelectValue placeholder="Select Account" />\n                </SelectTrigger>\n                <SelectContent>\n                  {accounts.map(acc => (\n                    <SelectItem key={acc.accountId} value={acc.accountId}>\n                      {acc.accountId} ({acc.accountType})\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              \n              <Button variant="ghost" size="icon" onClick={refreshData}>\n                <RefreshCw className="h-4 w-4" />\n              </Button>\n            </div>\n\n            {/* Account Balance */}\n            {selectedAccount && (\n              <div className="flex items-center gap-6">\n                <div className="text-right">\n                  <div className="text-sm text-muted-foreground flex items-center gap-1">\n                    <DollarSign className="w-3 h-3" />\n                    Account Balance\n                  </div>\n                  <div className="text-3xl font-mono font-bold">\n                    ${selectedAccount.balance.toLocaleString(\'en-US\', { minimumFractionDigits: 2 })}\n                  </div>\n                </div>\n                <div className="text-right">\n                  <div className="text-sm text-muted-foreground">Buying Power</div>\n                  <div className="text-xl font-mono">\n                    ${selectedAccount.buyingPower.toLocaleString(\'en-US\', { minimumFractionDigits: 2 })}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Portfolio Stats */}\n          {positions.length > 0 && (\n            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t">\n              <div>\n                <div className="text-sm text-muted-foreground">Positions Value</div>\n                <div className="text-xl font-bold">\n                  ${portfolioStats.totalValue.toLocaleString(\'en-US\', { minimumFractionDigits: 2 })}\n                </div>\n              </div>\n              <div>\n                <div className="text-sm text-muted-foreground">Unrealized P&L</div>\n                <div className={`text-xl font-bold ${portfolioStats.totalPnL >= 0 ? \'text-success\' : \'text-destructive\'}`}>\n                  {portfolioStats.totalPnL >= 0 ? \'+\' : \'\'}${portfolioStats.totalPnL.toFixed(2)}\n                </div>\n              </div>\n              <div>\n                <div className="text-sm text-muted-foreground">Realized P&L</div>\n                <div className={`text-xl font-bold ${portfolioStats.totalRealizedPnL >= 0 ? \'text-success\' : \'text-destructive\'}`}>\n                  {portfolioStats.totalRealizedPnL >= 0 ? \'+\' : \'\'}${portfolioStats.totalRealizedPnL.toFixed(2)}\n                </div>\n              </div>\n              <div>\n                <div className="text-sm text-muted-foreground">Open Positions</div>\n                <div className="text-xl font-bold">{positions.length}</div>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Main Tabs - Simplified to only HF Trading */}\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className="grid w-full grid-cols-2 max-w-md">\n          <TabsTrigger value="overview" className="flex items-center gap-1">\n            <BarChart3 className="w-4 h-4" /> Overview\n          </TabsTrigger>\n          <TabsTrigger value="hf-trading" className="flex items-center gap-1">\n            <Bolt className="w-4 h-4" /> HF Trading\n            {hfConnected && (\n              <span className="ml-1 w-2 h-2 bg-success rounded-full animate-pulse" />\n            )}\n          </TabsTrigger>\n        </TabsList>\n\n        {/* ========== OVERVIEW TAB ========== */}\n        <TabsContent value="overview" className="mt-6">\n          <div className="grid md:grid-cols-2 gap-6">\n            {/* Quick Trade Buttons */}\n            <Card>\n              <CardHeader>\n                <CardTitle className="flex items-center gap-2">\n                  <Zap className="w-5 h-5" />\n                  Quick Trade\n                </CardTitle>\n                <CardDescription>\n                  Click a symbol to start a trade\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className="grid grid-cols-4 gap-2">\n                  {quotes.length > 0 ? quotes.map(q => (\n                    <Button\n                      key={q.symbol}\n                      variant="outline"\n                      className="flex flex-col h-auto py-3 hover:border-primary"\n                      onClick={() => handleQuickBuy(q.symbol)}\n                    >\n                      <span className="font-bold">{q.symbol}</span>\n                      <span className="text-sm">${q.price.toFixed(2)}</span>\n                      <span className={`text-xs ${q.changePercent >= 0 ? \'text-success\' : \'text-destructive\'}`}>\n                        {q.changePercent >= 0 ? \'+\' : \'\'}{q.changePercent.toFixed(2)}%\n                      </span>\n                    </Button>\n                  )) : QUICK_SYMBOLS.map(symbol => (\n                    <Button\n                      key={symbol}\n                      variant="outline"\n                      className="py-6"\n                      onClick={() => handleQuickBuy(symbol)}\n                    >\n                      {symbol}\n                    </Button>\n                  ))}\n                </div>\n                {loadingQuotes && (\n                  <div className="text-center text-sm text-muted-foreground mt-2">\n                    Updating quotes...\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Recent Positions */}\n            <Card>\n              <CardHeader>\n                <CardTitle className="flex items-center gap-2">\n                  <Briefcase className="w-5 h-5" />\n                  Current Positions\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {positions.length === 0 ? (\n                  <div className="text-center text-muted-foreground py-8">\n                    <Activity className="w-8 h-8 mx-auto mb-2 opacity-50" />\n                    <p>No open positions</p>\n                    <p className="text-sm">Place a trade to get started</p>\n                  </div>\n                ) : (\n                  <div className="space-y-3">\n                    {positions.slice(0, 5).map(pos => (\n                      <div key={pos.conid} className="flex items-center justify-between p-3 bg-muted/50 rounded-lg">\n                        <div>\n                          <div className="font-medium">{pos.symbol}</div>\n                          <div className="text-sm text-muted-foreground">\n                            {pos.position > 0 ? \'+\' : \'\'}{pos.position} shares @ ${pos.avgCost.toFixed(2)}\n                          </div>\n                        </div>\n                        <div className={`text-right ${pos.unrealizedPnl >= 0 ? \'text-success\' : \'text-destructive\'}`}>\n                          <div className="font-medium">\n                            {pos.unrealizedPnl >= 0 ? \'+\' : \'\'}${pos.unrealizedPnl.toFixed(2)}\n                          </div>\n                          <div className="text-sm">\n                            ${pos.marketValue.toFixed(2)}\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                    {positions.length > 5 && (\n                      <Button \n                        variant="ghost" \n                        className="w-full" \n                        onClick={() => setActiveTab(\'positions\')}\n                      >\n                        View all {positions.length} positions\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        {/* ========== HIGH-FREQUENCY TRADING TAB ========== */}\n        <TabsContent value="hf-trading" className="mt-6">\n          <div className="space-y-6">\n            {/* HF Status Panel */}\n            <Card className={`border-2 ${hfConnected ? \'border-warning bg-warning/5\' : \'border-dashed\'}`}>\n              <CardHeader>\n                <div className="flex items-center justify-between">\n                  <div className="flex items-center gap-3">\n                    <div className={`p-3 rounded-full ${hfConnected ? \'bg-warning/20\' : \'bg-muted\'}`}>\n                      <Bolt className={`w-6 h-6 ${hfConnected ? \'text-warning animate-pulse\' : \'text-muted-foreground\'}`} />\n                    </div>\n                    <div>\n                      <CardTitle className="flex items-center gap-2">\n                        High-Frequency Paper Trading\n                        {hfConnected && (\n                          <Badge className="bg-warning text-warning-foreground">\n                            <Activity className="w-3 h-3 mr-1 animate-pulse" />\n                            LIVE\n                          </Badge>\n                        )}\n                      </CardTitle>\n                      <CardDescription>\n                        Terminal-based worker generating 100+ trades/day for En Pensent training\n                      </CardDescription>\n                    </div>\n                  </div>\n                  \n                  <div className="text-right">\n                    <div className="text-sm text-muted-foreground">Worker Status</div>\n                    <div className={`font-medium ${hfConnected ? \'text-warning\' : \'text-muted-foreground\'}`}>\n                      {hfConnected ? \'RUNNING\' : \'OFFLINE\'}\n                    </div>\n                  </div>\n                </div>\n              </CardHeader>\n              \n              <CardContent>\n                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">\n                  <div className="text-center p-4 bg-muted/50 rounded-lg">\n                    <div className="text-3xl font-bold font-mono">{hfStats.total}</div>\n                    <div className="text-sm text-muted-foreground">Total Trades</div>\n                  </div>\n                  <div className="text-center p-4 bg-muted/50 rounded-lg">\n                    <div className="text-3xl font-bold font-mono">{hfStats.today}</div>\n                    <div className="text-sm text-muted-foreground">Today\'s Trades</div>\n                  </div>\n                  <div className="text-center p-4 bg-muted/50 rounded-lg">\n                    <div className={`text-3xl font-bold font-mono ${hfStats.pnl >= 0 ? \'text-success\' : \'text-destructive\'}`}>\n                      {hfStats.pnl >= 0 ? \'+\' : \'\'}${hfStats.pnl.toFixed(2)}\n                    </div>\n                    <div className="text-sm text-muted-foreground">Total P&L</div>\n                  </div>\n                  <div className="text-center p-4 bg-muted/50 rounded-lg">\n                    <div className="text-3xl font-bold font-mono text-warning">{hfConnected ? \'30s\' : \'N/A\'}</div>\n                    <div className="text-sm text-muted-foreground">Cycle Time</div>\n                  </div>\n                </div>\n                \n                <div className="mt-4 flex items-center gap-2 text-sm text-muted-foreground">\n                  <Clock className="w-4 h-4" />\n                  <span>Auto-refresh every 5 seconds from Supabase</span>\n                  <span className="mx-2">â€¢</span>\n                  <span>11 symbols: AAPL, MSFT, NVDA, TSLA, AMD, META, GOOGL, AMZN, SPY, QQQ, IWM</span>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Live Trade Feed */}\n            <Card>\n              <CardHeader>\n                <CardTitle className="flex items-center gap-2">\n                  <Activity className="w-5 h-5" />\n                  Live Trade Feed\n                  {hfTrades.length > 0 && (\n                    <Badge variant="secondary">{hfTrades.length} recent</Badge>\n                  )}\n                </CardTitle>\n                <CardDescription>\n                  Real-time trades from high-frequency worker (updates every 5s)\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {hfTrades.length === 0 ? (\n                  <div className="text-center text-muted-foreground py-12">\n                    <Bolt className="w-12 h-12 mx-auto mb-4 opacity-50" />\n                    <p className="text-lg">No trades yet</p>\n                    <p className="text-sm">Start the high-frequency worker to see activity</p>\n                    <code className="block mt-4 p-2 bg-muted rounded text-xs">\n                      node farm/workers/high-frequency-paper-trader.mjs\n                    </code>\n                  </div>\n                ) : (\n                  <div className="space-y-2 max-h-[400px] overflow-y-auto">\n                    {hfTrades.map((trade) => (\n                      <div \n                        key={trade.id} \n                        className="flex items-center justify-between p-3 bg-muted/50 rounded-lg"\n                      >\n                        <div className="flex items-center gap-3">\n                          {trade.direction === \'BUY\' ? (\n                            <TrendingUp className="w-4 h-4 text-success" />\n                          ) : (\n                            <TrendingDown className="w-4 h-4 text-destructive" />\n                          )}\n                          <div>\n                            <div className="font-bold">{trade.symbol}</div>\n                            <div className="text-xs text-muted-foreground">\n                              {new Date(trade.created_at).toLocaleTimeString()}\n                            </div>\n                          </div>\n                          <Badge variant={trade.direction === \'BUY\' ? \'default\' : \'destructive\'}>\n                            {trade.direction}\n                          </Badge>\n                          <Badge variant="outline" className="text-xs">\n                            {trade.shares} shares\n                          </Badge>\n                        </div>\n                        <div className="flex items-center gap-4">\n                          <div className="text-right">\n                            <div className="font-mono">${trade.entry_price?.toFixed(2)}</div>\n                            <div className="text-xs text-muted-foreground">Entry</div>\n                          </div>\n                          {trade.predicted_confidence && (\n                            <div className="text-right">\n                              <div className="font-mono">{(trade.predicted_confidence * 100).toFixed(0)}%</div>\n                              <div className="text-xs text-muted-foreground">Conf</div>\n                            </div>\n                          )}\n                          {trade.pnl !== undefined && trade.pnl !== null && (\n                            <div className={`text-right font-mono ${trade.pnl >= 0 ? \'text-success\' : \'text-destructive\'}`}>\n                              <div>{trade.pnl >= 0 ? \'+\' : \'\'}${trade.pnl.toFixed(2)}</div>\n                              <div className="text-xs">P&L</div>\n                            </div>\n                          )}\n                          <Badge \n                            variant="outline" \n                            className={trade.status === \'open\' ? \'bg-success/10 text-success\' : \'bg-muted\'}\n                          >\n                            {trade.status}\n                          </Badge>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Open HF Positions */}\n            {hfTrades.filter(t => t.status === \'open\').length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className="text-lg flex items-center gap-2">\n                    <Briefcase className="w-5 h-5" />\n                    Open HF Positions\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Symbol</TableHead>\n                        <TableHead>Side</TableHead>\n                        <TableHead className="text-right">Shares</TableHead>\n                        <TableHead className="text-right">Entry</TableHead>\n                        <TableHead className="text-right">Stop Loss</TableHead>\n                        <TableHead className="text-right">Take Profit</TableHead>\n                        <TableHead>Status</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {hfTrades.filter(t => t.status === \'open\').map((pos) => (\n                        <TableRow key={pos.id}>\n                          <TableCell className="font-bold">{pos.symbol}</TableCell>\n                          <TableCell>\n                            <Badge variant={pos.direction === \'BUY\' ? \'default\' : \'destructive\'}>\n                              {pos.direction}\n                            </Badge>\n                          </TableCell>\n                          <TableCell className="text-right font-mono">{pos.shares}</TableCell>\n                          <TableCell className="text-right font-mono">${pos.entry_price?.toFixed(2)}</TableCell>\n                          <TableCell className="text-right font-mono text-destructive">\n                            ${pos.stop_loss?.toFixed(2) || \'N/A\'}\n                          </TableCell>\n                          <TableCell className="text-right font-mono text-success">\n                            ${pos.take_profit?.toFixed(2) || \'N/A\'}\n                          </TableCell>\n                          <TableCell>\n                            <Badge variant="outline" className="bg-success/10 text-success border-success/30">\n                              Open\n                            </Badge>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n';export{e as default};
