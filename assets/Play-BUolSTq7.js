import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as L,bF as q,bG as A,b6 as S,ae as P,bH as H,ah as I,bI as G,B as K,bJ as T,bK as _,bL as E,bM as U,bN as W,bO as Y,bP as O,bQ as X,bR as V,bS as F,bT as J,bU as Z,bV as R,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Se,H as Pe,P as He,ca as Ie,b3 as Ge,bs as Ke,be as Te,cb as _e,aP as Ee,cc as Ue,d as We,b2 as Ye,a9 as Oe,cd as Xe,ce as Ve,cf as Fe,al as Je,au as Ze}from"./index-DodN4URN.js";import{L as Re}from"./LiveColorLegend-DbVsTlDy.js";import{T as $e}from"./trending-down-L3jXWcgP.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-Crj6Jdef.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function ut(){const e=["Cgv0AxrPB24U","ntG2odaWmKrgugXbAq","r2fTzsbKCMf3BG","D2fYBG","zfjLCgv0AxrPBW","rhjHDW","sw5ZDwzMAwnPzq","DgfIBgu","rhjHDYbIEsbPBG","ntK0nZyXnuPUEgvJvW","Dg15uKK","zMvU","mty3nty0Cwjbv2fr","wgnmqLK","DMuGCNvSzs4","Aw5ZDwzMAwnPzq","CfHRBMi","mJDHAM5Psee","zsbMAwz0Es1TBW","thryvMW","AfD0yva","qNH4BKC","DgHYzwvMB2XKxW","vgHYzwvMB2XKia","zxLdz1q","rhjHDYbIEsb0Aa","z3vrD3K","s1nwueu","otG2ntq5nK1ov1rbCq","se14r1a","zxHJzxb0Aw9U","Bw92zxmGyxzHAq","BgfIBguU","uMvWzxrPDgLVBG","yxbWBhK","CMvLzM9SzcbYzq","AxnuAhjLzwzVBa","CMv0DxjUicHMDq","AxnjBNn1zMzPyW","vwT2Dwu","u3rHBgvTyxrLiq","BNrFBwf0zxjPyq","ChjVDg90ExbL","C3rHBgvTyxrL","BNqGtwf0zxjPyq","C3bSAxq","EeX1B08","BgruC2C","nZm1ngPxAgjmAa","y29UC29Szq","BwvZC2fNzq","x3j1Bgu","qLPVA3q","mJm0ndy2ofH1v2rHwa","ig1HDgvYAwfSlG","r3feD2W","ntaTtw92zsbsDq","C2HVCNrnzxnZyq","qMzODK0","yMLUza","zK1ZBeu","BKzeEge","Aw5MBW","CMvHC29U","mta1z0jvsM9v","AxntDgfSzw1HDa","kcGOlISPkYKRkq","zhjVyxC","CMvWzxrPDgLVBG","C2vHCMnO","Dg9tDhjPBMC","AxneCMf3","AwvUDe1HDgvYAq","y29UC3rYDwn0BW","mZe1ndu5mdbZt09buxu","yK5lAKK","ie5VigXLz2fSia"];return(ut=function(){return e})()}!function(){const e=ht,t=ut();for(;;)try{if(643948===-parseInt(e(526))/1*(-parseInt(e(510))/2)+-parseInt(e(556))/3*(parseInt(e(551))/4)+-parseInt(e(548))/5+parseInt(e(515))/6+-parseInt(e(540))/7+-parseInt(e(490))/8+parseInt(e(536))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=ht,r={};r.XcLBY=s(491),r[s(559)]=s(555);const a=r,i=e?function(){const e=s;if(n){if(a[e(552)]===a[e(559)])return _0x94ba50[e(533)]()||_0x5a79e5[e(527)+"e"]();{const e=n.apply(t,arguments);return n=null,e}}}:function(){};return e=!1,i}}()(void 0,function(){const e=ht,t={};t.fMslE=e(528)+"+$";const n=t;return dt.toString()[e(531)](e(528)+"+$")[e(532)]().constructor(dt).search(n[e(522)])});dt();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ht(496)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function ht(e,t){e-=490;const n=ut();let s=n[e];if(void 0===ht.vbfHAL){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ht.RNXayJ=r,ht.bqtnKd={},ht.vbfHAL=!0}const a=e+n[0],i=ht.bqtnKd[a];if(i)s=i;else{const e=function(e){this.trFEcW=e,this.IBSEkq=[1,0,0],this.jRiZXl=function(){return"newState"},this.HQMncz="\\w+ *\\(\\) *{\\w+ *",this.VwvrIc="['|\"].+['|\"];? *}"};e.prototype.tuJnSA=function(){const e=new RegExp(this.HQMncz+this.VwvrIc).test(this.jRiZXl.toString())?--this.IBSEkq[1]:--this.IBSEkq[0];return this.UYwimp(e)},e.prototype.UYwimp=function(e){return Boolean(~e)?this.mlysVI(this.trFEcW):e},e.prototype.mlysVI=function(e){for(let t=0,n=this.IBSEkq.length;t<n;t++)this.IBSEkq.push(Math.round(Math.random())),n=this.IBSEkq.length;return e(this.IBSEkq[0])},new e(ht).tuJnSA(),s=ht.RNXayJ(s),ht.bqtnKd[a]=s}return s}function xt(e){const t=ht,n={iXLtR:function(e,t){return e(t)},uZprj:"stalemate",Ukvue:t(564)+t(497)+t(539),agonj:t(554)+t(503)+"l",xLuoO:function(e,t,n){return e(t,n)},KSVPE:function(e,t){return e===t},GqDwl:"tDLOI",vEiAp:"fifty_move"+t(513),nFDxa:t(564)+t(557)+t(553),BKBZl:"unknown",guQwy:t(541)+"!",droaw:t(544)};if(e.isStalemate()){const e={};return e[t(525)]=n.uZprj,e.message="Stalemate!"+t(538)+t(493)+t(494),e.shortMessage=t(502),e}if(e[t(498)+t(543)+"n"]()){if(t(537)===t(520)){const e={};return e[t(525)]=t(505),e[t(512)]=t(502)+t(538)+"moves avai"+t(494),e[t(519)+"ge"]=t(502),e}{const e={};return e[t(525)]=t(561)+t(530),e.message=n[t(501)],e[t(519)+"ge"]=t(562)+t(495),e}}if(e[t(500)+t(534)+"al"]()){const e={};return e.reason=n.agonj,e[t(512)]=t(547)+"sufficient"+t(516),e.shortMessage=t(545)+t(506)+"l",e}const s=e[t(550)]();if(n[t(508)](parseInt,s[t(507)](" ")[4],10)>=100){if(n[t(566)](n[t(517)],n[t(517)])){const e={};return e[t(525)]=n.vEiAp,e[t(512)]=n[t(523)],e.shortMessage=t(518)+"le",e}return n.iXLtR(_0x1696a7,_0x3c6890)[t(512)]}const r={};return r[t(525)]=n.BKBZl,r[t(512)]=n[t(565)],r[t(519)+"ge"]=n[t(529)],r}function pt(e){const t=ht;return{ldTsg:function(e,t){return e(t)}}[t(509)](xt,e)[t(512)]}mt(void 0,function(){const e=ht,t={BxxnG:function(e,t){return e+t},eyCgT:e(499)+"nction() ",LtXVl:function(e){return e()},tmyRI:e(524),itMwz:e(492),AMsWg:e(546),BZokt:function(e,t){return e<t}};let n;try{const s=Function(t[e(560)](t[e(563)]+'{}.constructor("return this")( )',");"));n=t[e(558)](s)}catch(a){n=window}const s=n[e(511)]=n[e(511)]||{},r=["log",e(542),t[e(549)],"error",t.itMwz,t.AMsWg,"trace"];for(let i=0;t[e(514)](i,r.length);i++){const t=mt[e(535)+"r"][e(504)].bind(mt),n=r[i],a=s[n]||t;t.__proto__=mt[e(521)](mt),t.toString=a[e(532)][e(521)](a),s[n]=t}})(),function(){const e=yt,t=bt();for(;;)try{if(201968===-parseInt(e(386))/1+-parseInt(e(372))/2*(-parseInt(e(327))/3)+parseInt(e(427))/4*(parseInt(e(336))/5)+parseInt(e(349))/6*(-parseInt(e(429))/7)+parseInt(e(408))/8*(-parseInt(e(428))/9)+-parseInt(e(352))/10+parseInt(e(363))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[yt(378)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=yt;return ft.toString().search(e(415)+"+$")[e(395)]()[e(399)+"r"](ft)[e(401)](e(415)+"+$")});ft();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();gt(void 0,function(){const e=yt,t={QDXba:function(e,t){return e(t)},JLSDG:function(e,t){return e+t},IeUzX:function(e,t){return e+t},SkAUQ:"return (fu"+e(434),NcIMP:e(411)+e(423)+'rn this")( )',dmPBA:"log",IQaQF:"warn",DfMYG:"error",Hxujb:e(346),ameci:e(398),ONVrV:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t[n(369)](Function,t[n(383)](t[n(430)](t.SkAUQ,t[n(374)]),");"))()}catch(r){s=window}return s}(),s=n[e(389)]=n[e(389)]||{},r=[t[e(351)],t[e(379)],"info",t[e(403)],t[e(348)],e(402),t[e(400)]];for(let a=0;t[e(384)](a,r[e(325)]);a++){const t=gt[e(399)+"r"][e(375)][e(382)](gt),n=r[a],i=s[n]||t;t[e(365)]=gt[e(382)](gt),t.toString=i[e(395)][e(382)](i),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=yt,r={WEcjh:function(e){return e()},ActYj:function(e,t){return e+t},qWoFK:function(e,t){return e-t},WeUVg:function(e,t){return e||t},wMfHB:function(e,t){return e*t},XdjIc:function(e,t){return e-t},pWDid:function(e,t){return e*t},dRRVx:s(420),JuGfX:"move",IaTvG:"sine",pMYpG:function(e,t,n,s,r,a){return e(t,n,s,r,a)},aysTr:"triangle",HhpLJ:s(431),SPnxG:s(368),RBLWF:function(e,t,n,s,r,a){return e(t,n,s,r,a)},hxyod:function(e,t,n){return e(t,n)},OlYVd:function(e,t,n){return e(t,n)},jdCmw:function(e,t,n){return e(t,n)},fQDUM:function(e,t,n){return e(t,n)},YGHwi:s(326),utIdf:function(e,t,n,s,r,a){return e(t,n,s,r,a)},EBuBv:function(e,t,n){return e(t,n)},qFOTh:s(407),pqbOq:function(e,t){return e(t)},tVnWY:function(e,t,n){return e(t,n)},zNrfC:function(e,t,n){return e(t,n)},vpeFo:function(e,t,n){return e(t,n)}},a={};a[s(397)]=null,a[s(345)]=null;const i=r[s(392)](t.useRef,a),o=r[s(391)](t.useCallback,()=>{const e=s;if(!i[e(409)][e(397)])try{const t=new(window[e(419)+"xt"]||window[e(360)+"oContext"]),s=t[e(422)]();s.connect(t.destination),s[e(413)][e(412)]=n;const r={};r[e(397)]=t,r[e(345)]=s,i.current=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;i[e(409)].gainNode&&(i.current[e(345)].gain[e(412)]=n)},[n]);const c=r[s(342)](t.useCallback,(t,n,a=s(432),c=.01,l=.1,u)=>{const d=s;if(!e)return;r[d(424)](o);const{context:m,gainNode:h}=i.current;if(!m||!h)return;const x=m["createOsci"+d(421)](),p=m[d(422)]();x.type=a,x[d(370)][d(331)+"Time"](t,m.currentTime),u&&x[d(370)][d(364)+d(356)+"ueAtTime"](u,r[d(354)](m[d(381)+"e"],n)),p[d(413)][d(331)+d(335)](0,m.currentTime),p[d(413)][d(353)+d(332)+"ime"](1,m.currentTime+c),p[d(413)][d(364)+d(356)+d(329)](.01,r[d(359)](m[d(381)+"e"]+n,l)),p[d(413)][d(353)+d(332)+d(426)](0,m.currentTime+n),x.connect(p),p[d(333)](h),x.start(m[d(381)+"e"]),x[d(341)](m[d(381)+"e"]+n)},[e,o]),l=r[s(425)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(409)];if(r[a(388)](!c,!l))return;const u=r[a(328)](c[a(366)],t),d=c[a(337)+"er"](1,u,c[a(366)]),m=d["getChannel"+a(338)](0);for(let e=0;e<u;e++)m[e]=r[a(334)](r.pWDid(Math.random(),2),1);const h=c[a(337)+a(347)]();h[a(393)]=d;const x=c.createBiquadFilter();x[a(367)]=r[a(414)],x[a(370)][a(412)]=n;const p=c[a(422)]();p[a(413)][a(331)+a(335)](.3,c.currentTime),p.gain[a(364)+a(356)+"ueAtTime"](.01,c[a(381)+"e"]+t),h[a(333)](x),x[a(333)](p),p[a(333)](l),h[a(380)](c[a(381)+"e"]),h[a(341)](c.currentTime+t)},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(390)]:c(800,.08,r[n(361)],.005,.05),r[n(404)](c,400,.06,r[n(362)],.005,.04);break;case r[n(385)]:l(.12,2e3),c(300,.1,n(407),.005,.08),r.pMYpG(c,150,.15,r[n(361)],.01,.1);break;case r[n(330)]:r[n(433)](c,600,.06,n(432),.005,.04),setTimeout(()=>c(700,.06,n(432),.005,.04),80);break;case n(416):c(880,.15,"triangle",.01,.1),r[n(344)](setTimeout,()=>c(1100,.12,n(343),.01,.08),120);break;case"checkmate":c(880,.2,"sine",.01,.15),r[n(396)](setTimeout,()=>c(660,.2,n(432),.01,.15),150),setTimeout(()=>c(440,.3,"sine",.01,.2),300),setTimeout(()=>c(330,.4,n(432),.01,.3),500);break;case n(376):c(523,.12,r.IaTvG,.01,.08),r[n(344)](setTimeout,()=>c(659,.12,n(432),.01,.08),100),r[n(396)](setTimeout,()=>c(784,.2,"sine",.01,.15),200);break;case n(340):r[n(433)](c,440,.15,r[n(362)],.01,.1),setTimeout(()=>c(349,.25,n(343),.01,.2),150);break;case n(377):c(523,.1,n(432),.01,.08),setTimeout(()=>c(659,.1,n(432),.01,.08),100),r.OlYVd(setTimeout,()=>c(784,.1,n(432),.01,.08),200),setTimeout(()=>c(1047,.3,n(432),.01,.25),300);break;case n(405):c(392,.2,"sine",.02,.15),r[n(418)](setTimeout,()=>c(349,.2,n(432),.02,.15),200),setTimeout(()=>c(330,.3,n(432),.02,.25),400),r[n(355)](setTimeout,()=>c(262,.4,n(432),.02,.35),650);break;case r[n(357)]:r[n(406)](c,440,.15,"sine",.01,.1),r.EBuBv(setTimeout,()=>c(440,.15,n(432),.01,.1),180),r.OlYVd(setTimeout,()=>c(523,.2,n(432),.01,.15),360);break;case"illegal":c(200,.1,r[n(417)],.005,.08),c(150,.08,n(339),.005,.06)}},[e,c,l]);r[s(350)](t.useEffect,()=>()=>{const e=yt;i[e(409)][e(397)]&&i[e(409)].context[e(410)]()},[]);const d={};return d[s(371)]=u,d[s(387)]=o,d};function bt(){const e=["y2HLy2S","CuzpvgG","AMrdBxC","qxvKAw9dB250zq","Bg93CgfZCW","BgXHDg9Y","y3jLyxrLr2fPBG","y3rVCIGICMv0Dq","v0vJAMG","ruj1qNy","Aw1L","nJy1mtG4DwP6Dxfg","mJDAvgnpt0y","mtG0mvHcvxvpyG","swvvELG","y2fWDhvYzq","C2LUzq","uKjmv0y","BMn0Aw9UkcKG","BgvUz3rO","zhjHDW","mJm3C2feB2Hb","D01Msei","DwvbDfrPBwu","u1bUEeC","C2v0vMfSDwvbDa","vg9wywX1zuf0va","y29UBMvJDa","wgrQswm","vgLTzq","nwPbsfPYua","y3jLyxrLqNvMzG","rgf0yq","C2f3Dg9VDgG","z2fTzuvUza","C3rVCa","EK5YzKm","DhjPyw5NBgu","AhH5B2q","z2fPBK5Vzgu","zxHJzxb0Aw9U","zxjtB3vYy2u","shH1AMi","mJa4mKzoALbltq","DNbLrM8","zg1qqKe","mtyYmZK1meDQCLjHBW","BgLUzwfYuMfTCa","qwn0wwO","zLfevu0","BfjHBxbuB1zHBa","wuDiD2K","D2fYBG","CvDVrKS","D2vIA2L0qxvKAq","swfuDKC","yxLZvhi","ntiWntq3nwzJANrLvW","zxHWB25LBNrPyq","x19WCM90B19F","C2fTCgXLuMf0zq","DhLWzq","y2fZDgXL","uuryyMe","zNjLCxvLBMn5","CgXHEvnVDw5K","nJq3oe5htMr5Bq","qvbjig5VDcbZDq","tMnjtva","ChjVDg90ExbL","z2fTzvn0yxj0","DMLJDg9YEq","yxbWBhK","svfHuuy","C3rHCNq","y3vYCMvUDfrPBq","yMLUza","sKXtreC","t05wCLy","sgHWteO","mZu3ndq3zNrdD2zm","Aw5PDef1zgLV","v2vvvMC","y29UC29Szq","sNvhzLG","DfzUv1K","ChfIt3e","yNvMzMvY","ChbVCNrLza","Dg9tDhjPBMC","t2XzvMq","y29UDgv4Da","DhjHy2u","y29UC3rYDwn0BW","yw1Ly2K","C2vHCMnO","DgfIBgu","rgznwuC","Ce1zCeC","zgvMzwf0","Dxrjzgy","C3f1yxjL","mJe5ntuYBhjwq1nM","y3vYCMvUDa","y2XVC2u","E30Uy29UC3rYDq","DMfSDwu","z2fPBG","zfjsvNG","kcGOlISPkYKRkq"];return(bt=function(){return e})()}function yt(e,t){e-=325;const n=bt();let s=n[e];if(void 0===yt.oYueib){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};yt.tOZuJC=r,yt.hQlPDR={},yt.oYueib=!0}const a=e+n[0],i=yt.hQlPDR[a];if(i)s=i;else{const e=function(e){this.BBzlMl=e,this.TPhSjZ=[1,0,0],this.rCwtzD=function(){return"newState"},this.gvOrkE="\\w+ *\\(\\) *{\\w+ *",this.kMVDso="['|\"].+['|\"];? *}"};e.prototype.noGwkx=function(){const e=new RegExp(this.gvOrkE+this.kMVDso).test(this.rCwtzD.toString())?--this.TPhSjZ[1]:--this.TPhSjZ[0];return this.JaqESJ(e)},e.prototype.JaqESJ=function(e){return Boolean(~e)?this.kkPYTi(this.BBzlMl):e},e.prototype.kkPYTi=function(e){for(let t=0,n=this.TPhSjZ.length;t<n;t++)this.TPhSjZ.push(Math.round(Math.random())),n=this.TPhSjZ.length;return e(this.TPhSjZ[0])},new e(yt).noGwkx(),s=yt.tOZuJC(s),yt.hQlPDR[a]=s}return s}const wt=Ct;function jt(){const e=["tgfSv0y","otiZntCWvvbXy0fJ","A2fcq1K","DhjHy2u","DgfIBgu","zc1Zzxr0Aw5NCW","mJG5ntu1n2vwrKXMtG","yMLUza","CLDLrMu","Dg9tDhjPBMC","mtjSswvlquC","kcGOlISPkYKRkq","BMfTzq","mte0mJiWoe5HB2P4tW","CK1yvKC","y29UC29Szq","mZy3nJKYmhz0ChHltW","uNzdA3e","BvryAKm","BMn0Aw9UkcKG","vurgs00","mJi0ote4mvres05puG","zxHJzxb0Aw9U","mZa0ntKYALHLthzT","y2HLC3mTC291BG","ndv5Eu1Vr0u","BgvUz3rO","C2vHCMnO","yxbWBhK","ChjVDg90ExbL","CMv0DxjUicHMDq","AgLkugG","mtG2nZaWvNrly1zf","zw5HyMXLza","y29UC3rYDwn0BW","CM4GDgHPCYiPka","E30Uy29UC3rYDq"];return(jt=function(){return e})()}function Ct(e,t){e-=379;const n=jt();let s=n[e];if(void 0===Ct.ueGaFb){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Ct.zusaaj=r,Ct.mwNrPR={},Ct.ueGaFb=!0}const a=e+n[0],i=Ct.mwNrPR[a];if(i)s=i;else{const e=function(e){this.iuUHVL=e,this.HNBDHL=[1,0,0],this.XECoHo=function(){return"newState"},this.LSRYNX="\\w+ *\\(\\) *{\\w+ *",this.GTTqIT="['|\"].+['|\"];? *}"};e.prototype.ZDvlJO=function(){const e=new RegExp(this.LSRYNX+this.GTTqIT).test(this.XECoHo.toString())?--this.HNBDHL[1]:--this.HNBDHL[0];return this.RRianS(e)},e.prototype.RRianS=function(e){return Boolean(~e)?this.ArYovZ(this.iuUHVL):e},e.prototype.ArYovZ=function(e){for(let t=0,n=this.HNBDHL.length;t<n;t++)this.HNBDHL.push(Math.round(Math.random())),n=this.HNBDHL.length;return e(this.HNBDHL[0])},new e(Ct).ZDvlJO(),s=Ct.zusaaj(s),Ct.mwNrPR[a]=s}return s}!function(){const e=Ct,t=jt();for(;;)try{if(482068===-parseInt(e(394))/1+parseInt(e(406))/2+-parseInt(e(414))/3+parseInt(e(379))/4+parseInt(e(388))/5+parseInt(e(403))/6*(-parseInt(e(399))/7)+-parseInt(e(409))/8*(-parseInt(e(381))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Nt=function(){const e={};e[Ct(410)]=function(e,t){return e!==t};const t=e;let n=!0;return function(e,s){const r=n?function(){const n=Ct;if(t[n(410)](n(387),n(395))){if(s){const t=s.apply(e,arguments);return s=null,t}}else{const e=_0x271f6b.constructor[n(385)][n(400)](_0x4b0050),t=_0x39021a[_0x2c61f1],s=_0x1710be[t]||e;e.__proto__=_0x9da29b[n(400)](_0x16a850),e.toString=s.toString[n(400)](s),_0x76a4cb[t]=e}}:function(){};return n=!1,r}}()(void 0,function(){const e=Ct,t={};t[e(407)]=e(404)+"+$";const n=t;return Nt[e(402)]()[e(383)](n.rMXVG)[e(402)]()[e(390)+"r"](Nt)[e(383)](n.rMXVG)});Nt();const kt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Ct(384)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();kt(void 0,function(){const e=Ct,t={QATVJ:function(e,t){return e(t)},ysFXo:function(e,t){return e+t},BsrMr:e(392)+'ctor("retu'+e(391)+" )",ctSgh:function(e){return e()},rWeFe:function(e,t){return e!==t},mTXjC:e(393),UDFKM:"AikTt"};let n;try{const s=t.QATVJ(Function,t.ysFXo(e(386)+e(412),t.BsrMr)+");");n=t.ctSgh(s)}catch(a){n=window}const s=n[e(408)]=n.console||{},r=["log","warn","info","error",e(415),e(397),e(396)];for(let i=0;i<r[e(382)];i++){if(!t[e(401)](t[e(411)],t[e(413)])){const t=_0x36bcdc[e(384)](_0x13b1fb,arguments);return _0x4f4c8e=null,t}{const t=kt[e(390)+"r"][e(385)][e(400)](kt),n=r[i],a=s[n]||t;t.__proto__=kt[e(400)](kt),t[e(402)]=a[e(402)][e(400)](a),s[n]=t}}})();const Mt={};Mt[wt(405)]=wt(380)+wt(398);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(389)]}))}),Mt)),Dt=Lt;!function(){const e=Lt,t=qt();for(;;)try{if(564001===parseInt(e(551))/1+parseInt(e(643))/2*(-parseInt(e(520))/3)+parseInt(e(667))/4+-parseInt(e(635))/5*(-parseInt(e(601))/6)+-parseInt(e(597))/7*(parseInt(e(750))/8)+parseInt(e(671))/9+parseInt(e(661))/10*(-parseInt(e(607))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Lt(507)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Lt,t={};t[e(629)]=e(541)+"+$";const n=t;return Bt[e(727)]()[e(715)](n[e(629)])[e(727)]()[e(639)+"r"](Bt)[e(715)]("(((.+)+)+)+$")});function Lt(e,t){e-=454;const n=qt();let s=n[e];if(void 0===Lt.JdcUZS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Lt.duThjH=r,Lt.okHBQr={},Lt.JdcUZS=!0}const a=e+n[0],i=Lt.okHBQr[a];if(i)s=i;else{const e=function(e){this.NqUgKK=e,this.woAjbq=[1,0,0],this.wEnvrW=function(){return"newState"},this.kWTnrL="\\w+ *\\(\\) *{\\w+ *",this.hfRNTr="['|\"].+['|\"];? *}"};e.prototype.JnhwMP=function(){const e=new RegExp(this.kWTnrL+this.hfRNTr).test(this.wEnvrW.toString())?--this.woAjbq[1]:--this.woAjbq[0];return this.HOKhyo(e)},e.prototype.HOKhyo=function(e){return Boolean(~e)?this.mIyywU(this.NqUgKK):e},e.prototype.mIyywU=function(e){for(let t=0,n=this.woAjbq.length;t<n;t++)this.woAjbq.push(Math.round(Math.random())),n=this.woAjbq.length;return e(this.woAjbq[0])},new e(Lt).JnhwMP(),s=Lt.duThjH(s),Lt.okHBQr[a]=s}return s}function qt(){const e=["ruX5yKe","zYbMB3iGB3bWBW","DhzlExO","Aw4GysbNyw1L","y3jLyxrLzf9HDa","CMvZAwDUr2fTzq","y29TCgXLDgvK","Cg9ZDgDYzxnFyW","AvzquMy","z2TIq3K","zM9YrwfJAa","AM9PBIbNyw1L","DxzQv1u","ihbSyxLPBMCGyq","AgfSBgvUz2uGyW","BIb5B3vYig93BG","y2HLy2TTyxrL","Aw5Zzxj0","BgzKAwe","zgj2veG","Bw92zv91y2K","ven2yvG","C3rHCNrLzf9HDa","BIbPBIb0BYbQBW","ndCXnZmYnwTjDKrytW","yuDur0G","uLj4zLe","BIb0AgLZihzLCG","y29UC3rYDwn0BW","zgvMzwf0","s0TMvK8","igv4CgLYzwqGyW","odb1BKnnAgy","ww91ihDVBIe","rxbOEKu","zxjFAwq","ywjHBMrVBMvK","Avj3Efi","BMzeCM0","DgfIBgu","C3rHDhvZ","q3zMCgi","ugvKueO","Bwf5yMvtAw5NBa","CNbJ","Aw5MBW","C2vSzwn0","D2HPDgvFCgfSzq","CgXHEwvYx2LK","tKrZqNu","mtbOAKHRqwq","Dg9vChbLCKnHCW","y0jAyKq","DwPVCLa","yuHZChK","s3Hgt2K","ody3odG4q1zevwPs","AM9PBKj5q29Kzq","qw9yCu4","CKLK","mJeZnde3mgDHsuLPra","y01PD0q","DgLTzunVBNrYBW","zu1XsLC","zxjYB3i","Bw92zv9Zyw4","CMvZDwX0","yMXHy2S","BMvUDc4UlG","D2HPDgu","BMn0Aw9UkcKG","r2fTzsbHBhjLyq","zwXVx3jHDgLUzW","wwDWvxy","q1DjCwe","CMvTB3zLq2HHBG","re13wha","B3jKzxi","BxjiqKW","AxndAgvJA21HDa","B2zMzxjeCMf3","A1zStuW","sNj0rge","zxDmBe4","C3vJy2vZCW","y3rVCIGICMv0Dq","Du5UrNi","uu1ADvm","ChjVDg90ExbL","A2DvsvC","Dg9ju09tDhjPBG","rhfHwxq","zNjVBq","EK5otMe","Bg9HzcbNyw1L","CNfuzLy","D2HPDgvqywXLDa","Aw5JBhvKzxm","zhKGC3rHCNrLza","AwXSzwDHBa","DhjHy2u","BgvnB3zLCW","x3jLBwfPBMLUzW","DhvYBG","C2vHCMnO","C2LUz2XL","q0ryDxa","CernDMO","BgvUz3rO","ywXS","uMf0Aw5NoIa","v1nRr3K","sM9PBMvKigDHBq","t3v1quK","uw9uB0u","BxLdB2XVCG","Dg9tDhjPBMC","yNvSBgv0xZe","tY1p","AxndAgvJAW","z2fTzv9Pza","q3jxrwC","z2fTzq","x19WCM90B19F","rNvcBLu","y29KztOG","yMXHy2TqBgf5zq","AxnFChvIBgLJ","Awq9zxeU","C3f1yxjL","D2HPDgvFCgXHEq","yMXHy2TFD2LUCW","su5trvju","v2HPDguGD2LUCW","AM9PBIbIEsbJBW","D2HPDgvFD2LUCW","t0jMz1G","CfHVtLO","Bg9N","mZiWtwLSwu13","BwfRzu1VDMu","AgfUz2vZ","D3DLsKK","Axnhyw1Lt3zLCG","y29Kzq","DefuAxO","sw52ywXPzcbVCG","D2LUBMvYswq","AgfSBgvUz2vFyW","wg9Jrve","q2fUBM90igPVAq","y2HHBgXLBMDLxW","sLHdEw4","DxbKyxrL","DwLPtgC","DxnLCL9PzcWGzq","DhrL","z2fTzs0","y2fZDgXL","CgDU","Bw92zq","z2v0qxzHAwXHyG","C3vIC2nYAwjL","Dw50Aw1Lza","ihnLBNqGkg9WCa","q2HHBgXLBMDLia","z2vUzxjHDgvFyW","ChvIBgLJ","CMv0DxjUicHMDq","ChnAteG","z2fTzv9Pzd1LCq","s2fNDxe","DMvYyM9Zzq","rLHYzxO","BwfW","zwqHifDHAxrPBG","yMXHy2TFCgXHEq","ihjHDgLUz3m6","y2HLy2S","Bw92zv9UDw1Izq","r2fTzsbJCMvHDa","y3vYCMvUDf9Mzq","BwvZC2fNzq","ugXLyxnLihnPzW","D2fPDgLUzW","yMXHy2TuAw1LuG","sg52u24","yvbjsfm","Bg9HzeDHBwu","EeLtteK","y2HLC3nFBw92zq","rwPOsMu","r2fTzsbUB3qGzG","yxbWBhK","vfDbC3q","v3jtyKC","A1jzzMq","ChjVBw90Aw9U","CYbcBgfJAY4","yMLUza","yMXHy2TFCgfSzq","C2LVBIK","C2fU","Awn4AKW","zMvU","wM1pC3K","mJGYmZbnBfn2D3m","r3bODeq","zMLUza","s1jRDNy","ENnpzNO","vxPPBwW","vwLqtM4","BMv3","qNLsrM4","Bw92zxmT","vKnzDu0","yMP1sxy","sLHtyNG","E30Uy29UC3rYDq","DgLTzv9JB250CG","BMvS","AMroCMm","ywn0AxzL","zw1HAw5PBMC","Auj5Bee","BeTVDLK","kcGOlISPkYKRkq","AxzWww0","DMLJDg9YEq","zseGww91igfYzq","yMXHy2TqywXLDa","DwDUz0i","y3vYCMvUDezLBG","tNbSrNq","CM4GDgHPCYiPka","EuvArum","mta3ntmYs3bwEevP","zxPvywW","y3jLyxrLigDHBq","zhjHDW","zezswMC","sw1eC1u","t3vIuLe","ChjVzMLSzxm","Bg9FCMf0Aw5N","D2HPDgvFDgLTzq","uuvurKW","C3vIC3rYAw5N","whL4CxC","y3jLyxrLzef0","B2rL","rgj1rKy","AMPtv0S","rhjHDYbVzMzLCG","DxbKyxrLievmtW","BMv3uMf0Aw5N","C3rHCNrLzef0","yMXPDhPFnq","uKrTB2S","y2HHBgXLBMDLqW","D2HPDgvqBgf5zq","CMfWAwrFmtu","DxnLCL9Pza","z0L1Dgy","vvbeqvrf","rMfPBgvKihrVia","B25LBNqGyxv0BW","zwf0zsbHigDHBq","tK1Pru8","swz6vuC","rNLxrNK","yMv2tu4","igDHBwu","EfLnDvK","Bw92zunVDw50","Bw92zv9JB3vUDa","D2LUBMvYx2LK","quXoz0i","tY1plu8","z2fTzvn0yxrL","yuzxA3m","y2HHBM5LBa","nte4mdD3v2zbsxy","y2HLC3nFz2fTzq","zNnjtxq","qMXHy2SGD2LUCW","nNnQrwniBG","ugnSvLK","y2fWDhvYzq","z2fTzvn0yxj0","AxnmB2fKAw5N","BKjIseG","mJK1ntiZog1jAvzOzW","ANPJwe4","yMXHy2TFDgLTzq","y29UC29Szq"];return(qt=function(){return e})()}Bt();const At=function(){const e=Lt,t={};t[e(539)]=e(563);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(539)]!==a(526)){const e=s?function(){if(r){const e=r[a(507)](t,arguments);return r=null,e}}:function(){};return s=!1,e}if(_0x1c7533){const e=_0x5804c6.apply(_0x392545,arguments);return _0x46177c=null,e}}}();At(void 0,function(){const e=Lt,t={Ilblx:function(e,t){return e(t)},tvKyz:function(e,t){return e+t},icxjL:"{}.constru"+e(696)+'rn this")( )',QMZuS:function(e){return e()},aHspy:"warn",ujorP:e(656),zNNNa:"exception",WSkGy:e(711)},n=t[e(698)](function(){const n=e;if(n(611)!==n(583)){let e;try{e=t.Ilblx(Function,t[n(613)](t[n(613)](n(482)+n(681),t[n(517)]),");"))()}catch(s){e=window}return e}_0x8193dd.add(_0x2a2650[n(631)][n(562)](2,4))}),s=n[e(610)]=n.console||{},r=[e(749),t[e(665)],t[e(664)],e(675),t[e(704)],e(650),t[e(722)]];for(let a=0;a<r[e(719)];a++){const t=At[e(639)+"r"][e(699)][e(513)](At),n=r[a],i=s[n]||t;t[e(734)]=At[e(513)](At),t[e(727)]=i[e(727)][e(513)](i),s[n]=t}})();const St={};St[Dt(728)]=60,St[Dt(572)]=300,St[Dt(576)]=900,St[Dt(477)]=0;const Pt=St,Ht=Tt;function It(){const e=["D0Hxt04","C2vSzwn0Aw9U","nZi4mty2ugrpuvf5","ELr3q2y","wxHAz0W","CM4GDgHPCYiPka","BgLNAhq","AxntDxbWB3j0zq","mJb0Cg5jtw4","x19WCM90B19F","E30Uy29UC3rYDq","BgvUz3rO","suXkveK","D0XStK4","C0rfqvO","wvneEvO","y29UC3rYDwn0BW","AgfWDgLJCW","BMn0Aw9UkcKG","we1jwuS","sgfWDgLJigzLzq","CNvYr3C","mZeYotDuDg9Mr3y","EKTjAuK","kcGOlISPkYKRkq","BuzxELm","zwq6","nJqYnJu0sxP4CfHd","yvbNzum","zgjHy2SGzMfPBa","Aw5MBW","mJa0odeWofPdEKLYAG","ChjVDg90ExbL","mKj1rMXWyq","y3rVCIGICMv0Dq","nJu0nZK2zeXnzgre","yMLUza","z2zszhO","AgvHDNK","CMv0DxjUicHMDq","BKDerLy","yxbWBhK","nta1mZeYmLP3shP0uW","vhjUDwu","nJG3nJuWveXUvLbd","DhjHy2u","Dw5KzwzPBMvK","BwvKAxvT","C2vHCMnO","y29UC29Szq","vhLcBgC","DMLICMf0zq","mteZnLHQA0fUrG","wLvQENa","zxjYB3i","Dg9tDhjPBMC","D2fYBG","DwnXA1G","yNHSEwi","CuL2tee"];return(It=function(){return e})()}!function(){const e=Tt,t=It();for(;;)try{if(378674===-parseInt(e(523))/1+-parseInt(e(521))/2*(parseInt(e(490))/3)+-parseInt(e(519))/4+parseInt(e(472))/5+-parseInt(e(515))/6+-parseInt(e(510))/7*(-parseInt(e(480))/8)+-parseInt(e(470))/9*(-parseInt(e(496))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Tt(469)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Tt,t={};t[e(507)]=e(512)+"+$";const n=t;return Gt[e(483)]()[e(476)](e(512)+"+$")[e(483)]()[e(504)+"r"](Gt)[e(476)](n.XMIYK)});Gt();const Kt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Tt(e,t){e-=465;const n=It();let s=n[e];if(void 0===Tt.ECozfl){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tt.oofkHK=r,Tt.QEGtYx={},Tt.ECozfl=!0}const a=e+n[0],i=Tt.QEGtYx[a];if(i)s=i;else{const e=function(e){this.IsKfFC=e,this.wJvUVs=[1,0,0],this.qGBNEb=function(){return"newState"},this.VaxBaH="\\w+ *\\(\\) *{\\w+ *",this.wMstdn="['|\"].+['|\"];? *}"};e.prototype.gJZHmc=function(){const e=new RegExp(this.VaxBaH+this.wMstdn).test(this.qGBNEb.toString())?--this.wJvUVs[1]:--this.wJvUVs[0];return this.kPvFxZ(e)},e.prototype.kPvFxZ=function(e){return Boolean(~e)?this.SPtFlS(this.IsKfFC):e},e.prototype.SPtFlS=function(e){for(let t=0,n=this.wJvUVs.length;t<n;t++)this.wJvUVs.push(Math.round(Math.random())),n=this.wJvUVs.length;return e(this.wJvUVs[0])},new e(Tt).gJZHmc(),s=Tt.oofkHK(s),Tt.QEGtYx[a]=s}return s}Kt(void 0,function(){const e=Tt,t={rurGw:function(e,t){return e+t},YxZgL:e(467)+"nction() ",wHWON:e(498)+e(522)+e(493)+" )",bxlyb:function(e){return e()},mFWzS:e(478),gfRdz:"log",zTwCf:"warn",ILJTI:"error",Trnue:e(473),KmvUW:function(e,t){return e<t}};let n;try{const s=Function(t[e(509)](t[e(492)],t[e(488)])+");");n=t[e(486)](s)}catch(a){if(e(478)===t[e(513)])n=window;else{const t=_0x2f010a[e(504)+"r"].prototype[e(524)](_0x940d16),n=_0x2e5412[_0x4ab303],s=_0x33b3a4[n]||t;t[e(497)]=_0x5de905[e(524)](_0x1044ee),t.toString=s[e(483)][e(524)](s),_0x512357[n]=t}}const s=n[e(477)]=n[e(477)]||{},r=[t[e(465)],t[e(491)],e(518),t[e(500)],"exception","table",t[e(471)]];for(let i=0;t.KmvUW(i,r[e(499)]);i++){const t=Kt.constructor[e(520)][e(524)](Kt),n=r[i],a=s[n]||t;t[e(497)]=Kt[e(524)](Kt),t.toString=a[e(483)][e(524)](a),s[n]=t}})();const _t={};_t[Ht(494)]=10,_t[Ht(475)]=25,_t[Ht(466)]=50,_t.success=[10,50,20],_t[Ht(482)]=[50,30,50,30,50],_t[Ht(489)]=5;const Et=_t,Ut=()=>{const e=Ht,n={nGDFV:function(e,t){return e+t},CftYG:e(498)+e(522)+e(493)+" )",POfWR:function(e){return e()},qIvLA:function(e,t){return e===t},ZUjzp:e(485),zKIiI:e(508)+e(517)+e(514),YSDyZ:e(516),UqSgm:function(e,t){return e!==t},QSrXs:"vibrate",wLlNN:function(e,t,n){return e(t,n)},sDEAZ:function(e,t,n){return e(t,n)}},s=n.UqSgm(typeof navigator,e(474))&&n.QSrXs in navigator,r=t.useCallback((t=e(494))=>{const r=e;if(!s)return!1;try{if(n.qIvLA(n.ZUjzp,n[r(481)])){const e=Et[t];return navigator[r(479)](e)}{const e=_0xa98a36(OkMEri[r(468)]("return (fu"+r(506)+OkMEri.CftYG,");"));_0x5c2ce4=OkMEri.POfWR(e)}}catch(a){return!1}},[s]),a={select:n[e(501)](t.useCallback,()=>r(e(489)),[r]),move:n.sDEAZ(t.useCallback,()=>r(e(494)),[r]),capture:t.useCallback(()=>r(e(475)),[r]),check:t.useCallback(()=>r(e(466)),[r]),victory:t.useCallback(()=>r("success"),[r]),error:t.useCallback(()=>r(e(482)),[r]),castle:n[e(502)](t.useCallback,()=>{const t=e;if(n[t(487)](n[t(503)],n.YSDyZ))return!!s&&navigator[t(479)]([15,40,15]);if(_0x303667){const e=_0x172895[t(469)](_0x434335,arguments);return _0x1f9aa3=null,e}},[s]),gameStart:t.useCallback(()=>!!s&&navigator[e(479)]([10,30,10,30,20]),[s])},i={};return i[e(495)+"d"]=s,i[e(479)]=r,i[e(505)]=a,i},Wt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Yt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Ut();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=Yt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,h,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Yt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,x=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=H(i),j=I&&g&&!y,N=I&&y;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Xt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Vt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Xt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,h=d%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Ft={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Jt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:_,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:T,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Zt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:_,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:T,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===h))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Ft[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(G,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Jt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(K,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Vt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(E,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(U,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(W,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(Y,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(F,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(J,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(Z,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(J,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(R,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx($,{}),re.capture.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx($,{}),re.checkmate.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(x,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Rt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx($e,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(x,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},$t=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(K,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(E,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(K,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=he(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=xe(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[I,G]=t.useState(!1),[T,_]=t.useState(!1);se(p);const E=t.useMemo(()=>p?fe(p):null,[p]),U=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const W=async e=>{if(e&&!v)return void G(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(K,{variant:L?"outline":"default",size:"sm",onClick:()=>U(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(K,{variant:L?"default":"outline",size:"sm",onClick:()=>U(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&h&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",E&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",E]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(K,{onClick:()=>W(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(K,{onClick:()=>W(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?Me(h,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(K,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:I,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),_(!0)},trigger:"download"}),u.jsx(Le,{isOpen:T,onClose:()=>_(!1)})]})},tn=bn;!function(){const e=bn,t=rn();for(;;)try{if(590212===-parseInt(e(128))/1+parseInt(e(159))/2*(-parseInt(e(144))/3)+parseInt(e(149))/4+parseInt(e(194))/5*(-parseInt(e(110))/6)+parseInt(e(171))/7+parseInt(e(192))/8*(-parseInt(e(138))/9)+parseInt(e(120))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[bn(162)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=bn,t={};t[e(142)]="(((.+)+)+)+$";const n=t;return nn[e(136)]().search(e(189)+"+$").toString()[e(173)+"r"](nn)[e(178)](n[e(142)])});nn();const sn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[bn(162)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function rn(){const e=["r28GDg8Gzw5Kia","u2jorxy","rLnqCu4","t2zMzxiGzhjHDW","sg9Tzq","Bg9IyNKGlYbfEa","DgvK","vg9Nz2XLigz1Ba","pvjLC2LNBIWGra","u291BMqGBxv0zq","otbdtK1mCeq","wwzgCMC","rw5K","ChjLDMvUDerLzG","zwvU","uhjLDMLVDxmGBq","C3rLBMvY","AxndB250zw50rq","CgPcEgW","uMvZAwDUigDHBq","mJy0mti3nJbQuuXXtLm","rxnJ","C2HPzNrlzxK","serYAKy","CK1TAKu","vg9Nz2XLl2v4Ca","B3zL","uLzsqwi","odi4odG4zwDgrvDK","CMv0DxjUicHMDq","puXVyMj5lca/pq","yw5KigXLz2vUza","Eg5VvKK","tNvJrgG","AxqGzNvSBhnJCG","DgfYz2v0","Dg9tDhjPBMC","BgvUz3rO","mtGWmtGXofvlu1vIvG","r28GDg8GC3rHCG","y3rVCIGICMv0Dq","yxvSDa","D0fXuvG","CK9Zs04","mtq3yNHzCKfm","CMvTB3zLrxzLBG","ugXHEs9qyxvZzq","we5Tt0S","ihrPBwvSAw5L","mZy4mdm1nML5y1PcBq","DgfIBgu","Eurgyuy","DeXPC3rLBMvY","D2fYBG","zevmweq","BhnJCMvLBIbTBW","Aw1SCNG","zsaOzhvYAw5Nia","A2v5","mtCZodz2EgXPuw0","sgvSCa","DgPPuKq","yxbWBhK","BMqGB24VB2zM","u2HVDYbRzxLIBW","icH5B3vYihr1CG","ywn0Aw9U","rw1WB3y","ywrKrxzLBNrmAq","u291BMqGDw5TDq","zgL0ywjSzq","mJe3nZaXngjgtgPJAq","khnOB3CGywXSkq","y29UC3rYDwn0BW","ChjVDg90ExbL","yMLUza","quvms0q","yxrLCW","C2vHCMnO","Dg9mB3DLCKnHCW","zxjYB3i","vg9Nz2XLihnVDq","DhjHy2u","u3bHy2u","yMDQD3y","ugPiAMG","wuHWyMW","y29UC29Szq","CM4GDgHPCYiPka","kcGOlISPkYKRkq","A2v5zg93BG","AML5rgK","ndbMDgDqwfe","Aw5MBW","mZqYmtaWCfvusMPI","x19WCM90B19F"];return(rn=function(){return e})()}sn(void 0,function(){const e=bn,t={rMmjE:function(e,t){return e!==t},Empov:e(151),FSPqN:function(e,t){return e+t},tjiRD:function(e,t){return e+t},dELXD:e(129)+"nction() ",towqq:"{}.constru"+e(140)+e(188)+" )",PjHjh:function(e){return e()},RVRAb:e(153),imlrx:e(180),SbNEv:"exception",arusg:e(182)},n=t[e(185)](function(){const n=e,s={};s[n(176)]=n(190);const r=s;let a;try{if(t[n(124)]("yDFaF",t[n(167)]))return _0x131c65[n(168)+n(116)](r[n(176)],_0x4f663a),()=>_0x15a933["removeEven"+n(152)]("keydown",_0x3475cc);a=Function(t[n(198)](t[n(161)](t[n(154)],t.towqq),");"))()}catch(i){a=window}return a}),s=n[e(187)]=n[e(187)]||{},r=["log",t[e(127)],e(193),t[e(156)],t[e(197)],e(150),t.arusg];for(let a=0;a<r[e(137)];a++){const t=sn[e(173)+"r"][e(174)][e(175)](sn),n=r[a],i=s[n]||t;t[e(195)]=sn[e(175)](sn),t[e(136)]=i[e(136)][e(175)](i),s[n]=t}})();const an=()=>{const e=bn,t={duration:4e3};o[e(193)]("Shortcuts: M=Mute, R"+e(108)+"=Draw, Esc"+e(130)+e(160),t)},on={};on[tn(158)]="M",on.action=tn(181)+tn(163);const cn={};cn[tn(158)]="R",cn[tn(166)]=tn(119)+tn(157)+"play)";const ln={key:"D"};ln[tn(166)]=tn(199)+tn(165)+"n)";const un={};un[tn(158)]=tn(121),un[tn(166)]="Return to "+tn(105)+tn(134)+tn(114);const dn={};dn[tn(158)]="?",dn[tn(166)]=tn(164)+"ard shortcuts";const mn={};mn.key=tn(183),mn[tn(166)]=tn(146)+tn(148);const hn={};hn[tn(158)]="â†",hn.action=tn(115)+tn(126);const xn={};xn[tn(158)]="â†’",xn.action="Next move";const pn={};pn[tn(158)]=tn(104),pn[tn(166)]=tn(139)+"t";const fn={};fn[tn(158)]=tn(112),fn[tn(166)]=tn(196)+tn(172);const gn={};gn[tn(158)]="F",gn[tn(166)]=tn(107)+tn(155)+"de";const vn={};function bn(e,t){e-=104;const n=rn();let s=n[e];if(void 0===bn.ZsEfUf){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};bn.xaKBiQ=r,bn.oGGjpJ={},bn.ZsEfUf=!0}const a=e+n[0],i=bn.oGGjpJ[a];if(i)s=i;else{const e=function(e){this.RRXjXn=e,this.PdErnT=[1,0,0],this.VylOxi=function(){return"newState"},this.MMOGFX="\\w+ *\\(\\) *{\\w+ *",this.GuedIP="['|\"].+['|\"];? *}"};e.prototype.UVDDTH=function(){const e=new RegExp(this.MMOGFX+this.GuedIP).test(this.VylOxi.toString())?--this.PdErnT[1]:--this.PdErnT[0];return this.DfpCsg(e)},e.prototype.DfpCsg=function(e){return Boolean(~e)?this.LMEGMB(this.RRXjXn):e},e.prototype.LMEGMB=function(e){for(let t=0,n=this.PdErnT.length;t<n;t++)this.PdErnT.push(Math.round(Math.random())),n=this.PdErnT.length;return e(this.PdErnT[0])},new e(bn).UVDDTH(),s=bn.xaKBiQ(s),bn.oGGjpJ[a]=s}return s}vn[tn(158)]="C",vn[tn(166)]="Toggle board coordin"+tn(177);const yn={};yn[tn(158)]="L",yn.action=tn(125)+tn(131);const wn=Cn;!function(){const e=Cn,t=Pn();for(;;)try{if(995306===parseInt(e(285))/1+parseInt(e(208))/2*(parseInt(e(183))/3)+parseInt(e(160))/4*(-parseInt(e(264))/5)+parseInt(e(283))/6*(-parseInt(e(226))/7)+parseInt(e(278))/8*(parseInt(e(271))/9)+parseInt(e(161))/10+-parseInt(e(209))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jn=function(){const e=Cn,t={zdePD:e(241),fYRlh:e(205),coIpf:function(e,t){return e(t)}};let n=!0;return function(e,s){const r={rlMGH:function(e,t){return e(t)},QhYkR:function(e,n){return t[Cn(247)](e,n)}},a=n?function(){const n=Cn;if(s){if(t.zdePD!==t[n(265)]){const t=s[n(206)](e,arguments);return s=null,t}{_0x416aa5[n(212)](_0x2d3f0b);const e=r[n(291)](_0x843944,_0x1b34aa);_0x5b45c7[n(166)](),_0x557a87[n(212)](_0x3d5a83);const t=r[n(192)](_0x3f70ff,_0x56ec27);return _0x273a99[n(166)](),"w"===_0xfc9f3d[n(211)]()?t-e:e-t}}}:function(){};return n=!1,a}}()(void 0,function(){const e=Cn;return jn[e(233)]()[e(181)](e(191)+"+$")[e(233)]()[e(260)+"r"](jn).search(e(191)+"+$")});function Cn(e,t){e-=157;const n=Pn();let s=n[e];if(void 0===Cn.uSaVsM){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Cn.FUFjEa=r,Cn.KfQaSk={},Cn.uSaVsM=!0}const a=e+n[0],i=Cn.KfQaSk[a];if(i)s=i;else{const e=function(e){this.iBFiLl=e,this.XFymst=[1,0,0],this.rfVhRw=function(){return"newState"},this.gZjtSI="\\w+ *\\(\\) *{\\w+ *",this.NcEZkv="['|\"].+['|\"];? *}"};e.prototype.xGHwjn=function(){const e=new RegExp(this.gZjtSI+this.NcEZkv).test(this.rfVhRw.toString())?--this.XFymst[1]:--this.XFymst[0];return this.sOvoVr(e)},e.prototype.sOvoVr=function(e){return Boolean(~e)?this.GDpVHr(this.iBFiLl):e},e.prototype.GDpVHr=function(e){for(let t=0,n=this.XFymst.length;t<n;t++)this.XFymst.push(Math.round(Math.random())),n=this.XFymst.length;return e(this.XFymst[0])},new e(Cn).xGHwjn(),s=Cn.FUFjEa(s),Cn.KfQaSk[a]=s}return s}jn();const Nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Cn(206)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Nn(void 0,function(){const e=Cn,t={CJXHl:function(e,t){return e+t},BAkkM:"return (fu"+e(170),wIvTM:function(e){return e()},lHfOJ:e(202),QngUl:e(272),sEINN:"error"},n=t[e(214)](function(){const n=e;let s;try{s=Function(t[n(217)](t.CJXHl(t.BAkkM,n(179)+n(251)+'rn this")( )'),");"))()}catch(r){s=window}return s}),s=n.console=n[e(284)]||{},r=[t[e(189)],e(299),t.QngUl,t[e(190)],e(174),e(168),e(255)];for(let a=0;a<r.length;a++){const t=Nn[e(260)+"r"][e(290)].bind(Nn),n=r[a],i=s[n]||t;t.__proto__=Nn[e(218)](Nn),t[e(233)]=i.toString[e(218)](i),s[n]=t}})();const kn={p:100,n:320,b:330,r:500,q:900,k:2e4},Mn=kn,zn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Dn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Bn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Ln=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],qn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],An=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Sn(e){switch(e[Cn(257)+"e"]()){case"p":return zn;case"n":return Dn;case"b":return Bn;case"r":return Ln;case"q":return qn;case"k":return An;default:return[]}}function Pn(){const e=["Bw92zxrPBwu","Bg9N","zgvWDgG","zKHiCMq","sxPlrNm","yxbWBhK","y29SB3i","mtbus0rdBM8","ntK2mtmWn1LxrgT3uq","zNjVBq","DhvYBG","Bw92zq","rgT6Bvm","D0L2ve0","rMDUwxa","DxHltNu","q0PysgW","yMLUza","yvH2AM8","zMvU","idqTCgX5ihnLyq","ignHChr1CMvZ","vhL2EM0","y0DVvwe","yw5KBwfZDgvYia","mta5nti5wfH6D21N","u3rVy2TMAxnOia","BwLU","D2fPDfjLywr5","y2fWDhvYzwq","uMvHBcbotLvfia","AgfYza","Dg9tDhjPBMC","vMjHzfi","vwv2uxa","zw5NAw5LlcbNCG","AxntDgfSzw1HDa","FJGWma","zw5NAw5Lug93zq","r1vtwgO","sNjYrxK","CLP5B1a","s3zjBem","BwvZBvy","B1fUqNe","C1Hos3O","y29jCgy","D1PLzM8","Ahvzy3a","CMvK","y3rVCIGICMv0Dq","Bwf4","Bw92zxm","BwvKAxvT","DhjHy2u","tNPzB2W","Dg9mB3DLCKnHCW","zgvZy3jPChrPBW","D2PLBfK","y29UC3rYDwn0BW","tvbfBvO","AxrPB24","B2nJyxnPB25HBa","ntiWnJG1Bhjwtgnl","zLLsBgG","zMXVB3i","qMfZAwmGDgfJDa","swLkyLK","C3rVy2TMAxnO","Avffs2O","mtq3ndu4n2fAALLYtq","Aw5MBW","yM9HCMq","zhLNyMC","wMjHA24","ywnRihrVigHHCG","ufbJsKq","odHcu0Xqt28","q2X1yIbqBgf5zq","zcbTB2rL","ww9zvhm","BM90ihjLywr5la","ndyYt1PzqNno","y29UC29Szq","nJe0nJGXBK1wEfjK","sMH4Ehq","ChjVBw90Aw9U","zLDQEfa","C2fU","ChjVDg90ExbL","CMXnr0G","C2XPy2u","twfZDgvY","C29YDa","AxneCMf3","zuzcrMi","tMDhtLe","y05PA2u","D2fYBG","rM5kqLG","rg5fA3a","BgfIzwW","AwnZigfUzcbTyq","CMvUzxnZ","y21iz0i","ntj4qMvuwxq","mta5odqWndbssvfbquS","yxvhEKm","BgvUz3rO","C3rYzw5NDgG","CMf0Aw5N","Dw5KBW","qvzVtMC","DgfIBgu","ALPLww4","BMn0Aw9UkcKG","DgvYAwfSigf3yq","twfRzxmGCMfUza","C0zysuq","zxHJzxb0Aw9U","CgLXvMO","AenYr3K","igzHBgXPBMCGyG","DvzpzuG","E30Uy29UC3rYDq","zxjYB3i","C2vHCMnO","DhLWzq","mZq4mJKXq3ziswXM","yMvZDe1VDMu","DeTQvM0","zwfZEq","zMLSDgvY","qM5oy2u","BeHMt0O","C0vjtK4","kcGOlISPkYKRkq","uwHzA1i","Axnhyw1Lt3zLCG","qwr2yw5JzwqGzq","C2nVCMu","DMfSDwf0Aw9Ula","DMvYyM9Zzq","AxndAgvJA21HDa","CMfUzg9T","Aw5JBhvKzxm"];return(Pn=function(){return e})()}function Hn(e){const t=Cn,n={hCrGy:function(e,t){return e(t)},huYcp:function(e,t){return e===t},auGzC:function(e,t){return e<t},piqVj:function(e,t){return e!==t},bIrvV:"McFWp",DnEkp:t(215),sZkPO:function(e,t){return e>t},wZefo:function(e,t){return e===t},jZeYn:function(e,t){return e-t}};if(e[t(198)+"e"]())return n[t(249)](e.turn(),"w")?-1/0:1/0;if(e[t(295)]()||e[t(237)+"e"]())return 0;let s=0;const r=e[t(273)]();for(let i=0;n[t(162)](i,8);i++)for(let e=0;e<8;e++){const a=r[i][e];if(a){if(!n[t(175)](n.bIrvV,n[t(301)]))return _0x4dbc8f[t(299)](t(227)+t(282)+" falling b"+t(276)+t(280)),n[t(176)](_0x261109,_0x2b2f22);{const r=Mn[a[t(182)]]||0,o=Sn(a[t(182)]);let c=0;if(n.sZkPO(o[t(163)],0)){c=o[n[t(248)](a[t(207)],"w")?i:n[t(169)](7,i)][e]}const l=r+c;s+="w"===a[t(207)]?l:-l}}}const a=e[t(253)]().length;return s+=n[t(249)](e[t(211)](),"w")?2*a:2*-a,s}function In(e,t,n,s,r){const a=Cn,i={cNike:a(281),cmHgB:function(e,t){return e-t},DkzmS:function(e,t){return e===t},uxKNu:function(e,t){return e!==t},LKhaz:a(288),NzYol:function(e,t){return e<=t},eFBFb:function(e,t,n,s,r,a){return e(t,n,s,r,a)}};if(i[a(213)](t,0)||e[a(193)]()){if(!i[a(216)](i.LKhaz,i.LKhaz))return{score:Hn(e),move:null};if(_0x1a1e73){const e=_0x52a946[a(206)](_0x19bb1b,arguments);return _0x313544=null,e}}const o={};o[a(197)]=!0;const c=e[a(253)](o);if(c[a(294)]((e,t)=>{const n=a;if(i[n(298)]===n(281)){let s=0,r=0;return e[n(230)]&&(s+=Mn[e[n(230)]]||0),t[n(230)]&&(r+=Mn[t[n(230)]]||0),e[n(289)][n(200)]("+")&&(s+=50),t[n(289)].includes("+")&&(r+=50),i[n(159)](r,s)}_0x1724e5=_0x3129df,_0x3a5fc7=_0x1ab45d}),r){let r=-1/0,o=null;for(const u of c){e[a(212)](u);const c=In(e,t-1,n,s,!1);if(e[a(166)](),c[a(195)]>r&&(r=c[a(195)],o=u),n=Math[a(252)](n,c.score),i[a(256)](s,n))break}const l={};return l.score=r,l[a(212)]=o,l}{let r=1/0,o=null;for(const u of c){e[a(212)](u);const c=i[a(296)](In,e,t-1,n,s,!0);if(e[a(166)](),c[a(195)]<r&&(r=c[a(195)],o=u),(s=Math.min(s,c[a(195)]))<=n)break}const l={};return l[a(195)]=r,l[a(212)]=o,l}}function Gn(e){const t=Cn,n={WifDU:function(e,t){return e>t}};n[t(223)]=function(e,t){return e<t};const s=n,r={};r[t(197)]=!0;const a=e.moves(r);if(0===a[t(163)])return null;const i=a[t(187)](e=>e[t(230)]);return s.WifDU(i[t(163)],0)&&s.Tyvzm(Math[t(199)](),.3)?i[Math[t(266)](Math[t(199)]()*i.length)]:a[Math[t(266)](Math.random()*a.length)]}function Kn(e){const t=Cn,n={VbadR:function(e,t){return e(t)},rZyoP:function(e,t){return e===t},AVoNg:function(e,t){return e===t},fHHrd:function(e,t){return e===t},oQnBq:function(e,t){return e>t},sXNKz:function(e,t){return e<t},PPcJD:t(286),MPEmZ:function(e,t){return e*t}},s={verbose:!0},r=e[t(253)](s);if(n[t(242)](r[t(163)],0))return null;let a=null,i=n[t(167)](e.turn(),"w")?-1/0:1/0;for(const o of r){e[t(212)](o);const s=Hn(e);e[t(166)](),n[t(204)](e.turn(),"w")?n[t(245)](s,i)&&(i=s,a=o):t(235)!=t(235)?_0x5319e0>_0x1f6352&&(_0x5e250b=_0x1c223a,_0xf65f80=_0x193254):n[t(246)](s,i)&&(i=s,a=o)}if(n[t(246)](Math[t(199)](),.2)){if(t(240)!==n[t(277)]){const s=r[t(294)]((s,r)=>{const a=t;e.move(s);const i=n[a(234)](Hn,e);e[a(166)](),e[a(212)](r);const o=Hn(e);return e.undo(),"w"===e[a(211)]()?o-i:i-o}),a=s[t(292)](0,Math[t(228)](3,s[t(163)]));return a[Math[t(266)](n[t(261)](Math[t(199)](),a.length))]}if(_0x3da96e){const e=_0x26b74a[t(206)](_0x58f616,arguments);return _0x146f3f=null,e}}return a}function Tn(e){const t=Cn,n={};n[t(224)]=function(e,t){return e===t};return In(e,4,-1/0,1/0,n[t(224)](e.turn(),"w"))[t(212)]}const _n={};_n.id=wn(186),_n[wn(302)]="Beginner",_n.description=wn(172)+"om moves, "+wn(263)+wn(222),_n[wn(165)]=wn(238);const En={};En.id=wn(254),En[wn(302)]=wn(279)+"r",En.description=wn(267)+wn(157)+wn(171)+wn(158),En[wn(165)]="~1400";const Un={};Un.id=wn(232),Un[wn(302)]=wn(293),Un.description=wn(194)+wn(196)+wn(221)+"rch depth",Un.rating="~2000";const Wn={id:"stockfish"};Wn[wn(302)]="Stockfish 16",Wn[wn(258)+"n"]=wn(231)+wn(236)+wn(225)+wn(164),Wn[wn(165)]="~3200",Wn[wn(239)+wn(250)]=!0;const Yn=[_n,En,Un,Wn];function On(e,t){e-=130;const n=Fn();let s=n[e];if(void 0===On.mFEiIo){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};On.hJxvap=r,On.itWvgH={},On.mFEiIo=!0}const a=e+n[0],i=On.itWvgH[a];if(i)s=i;else{const e=function(e){this.tCKoYs=e,this.MKmkWG=[1,0,0],this.elAgbE=function(){return"newState"},this.noOVdD="\\w+ *\\(\\) *{\\w+ *",this.zvGTJF="['|\"].+['|\"];? *}"};e.prototype.eBvhtA=function(){const e=new RegExp(this.noOVdD+this.zvGTJF).test(this.elAgbE.toString())?--this.MKmkWG[1]:--this.MKmkWG[0];return this.ouAXfw(e)},e.prototype.ouAXfw=function(e){return Boolean(~e)?this.FKFlsA(this.tCKoYs):e},e.prototype.FKFlsA=function(e){for(let t=0,n=this.MKmkWG.length;t<n;t++)this.MKmkWG.push(Math.round(Math.random())),n=this.MKmkWG.length;return e(this.MKmkWG[0])},new e(On).eBvhtA(),s=On.hJxvap(s),On.itWvgH[a]=s}return s}!function(){const e=On,t=Fn();for(;;)try{if(189258===-parseInt(e(170))/1*(parseInt(e(182))/2)+-parseInt(e(184))/3*(-parseInt(e(171))/4)+-parseInt(e(135))/5*(parseInt(e(143))/6)+-parseInt(e(154))/7*(-parseInt(e(193))/8)+parseInt(e(209))/9*(parseInt(e(177))/10)+-parseInt(e(155))/11*(parseInt(e(173))/12)+parseInt(e(146))/13*(parseInt(e(210))/14))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Xn=function(){const e=On,t={fbULO:function(e,t){return e!==t}};t[e(185)]=e(134);const n=t;let s=!0;return function(t,r){const a=e,i={fTvLB:function(e,t){return n[On(156)](e,t)},CUbRF:n[a(185)]},o=s?function(){const e=a,n={sJVaT:function(e){return null==e?void 0:e()}};if(r){if(!i[e(183)](e(134),i[e(166)])){const e=r.apply(t,arguments);return r=null,e}n[e(152)](_0x5e3914)}}:function(){};return s=!1,o}}()(void 0,function(){const e=On,t={};t[e(198)]=e(205)+"+$";const n=t;return Xn[e(132)]().search(n[e(198)])[e(132)]()[e(147)+"r"](Xn)[e(192)](e(205)+"+$")});Xn();const Vn=function(){const e=On,t={};t.KCKKv=e(191);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(195)]=n[a(186)];const o=i,c=s?function(){const e=a;if(r){if("NgJyH"!==o.ZoDgE){const n=r[e(197)](t,arguments);return r=null,n}{const e=_0x1bfe7d?function(){if(_0x499eef){const e=_0x5f1c78.apply(_0x4771e7,arguments);return _0x402201=null,e}}:function(){};return _0x191a9a=!1,e}}}:function(){};return s=!1,c}}();function Fn(){const e=["mJruBKn2tvy","C2DywNe","B2jXz2S","B25nB3vZzu1VDG","mtiZnJbqq0rvqMq","E30Uy29UC3rYDq","qKPyuem","Aw5MBW","tvzYtha","odjsqwrAAgG","zLr2tei","mtiZmgzuD0juAW","wKneAe4","s0nls3y","B25uB3vJAe1VDG","CM4GDgHPCYiPka","DKzLveW","uuDxtvm","v0zkEg0","C2vHCMnO","mtiXndy0ogjktM1XEa","ufH2DwC","wM9ez0u","B25nB3vZzurVDW","yxbWBhK","sKjgvfi","zxjYB3i","ChjVDg90ExbL","y2XPzw50wq","DxLev0e","zKzyv1O","y0LTChm","kcGOlISPkYKRkq","ywjZ","Dg91y2HLCW","ru1hq3K","mZqYB0rmvwfL","ode3ndu1ogTxBfLnra","C3rHCNrz","uwjjvMy","AfnNBeK","zMHYvei","y3vYCMvUDa","CMv0DxjUicHMDq","v1fMEK4","Dg9tDhjPBMC","B25uB3vJAfn0yq","Evjpzvy","mtbLCg14wue","q0ruuxG","AvjmtK0","B25nB3vZzvvW","CgH6yvq","t2DmruC","y3vYCMvUDfG","yMLUza","otm5mdK2CxzrAxDS","A2PRq0i","C3rHCNry","mtnZA3LYuNO","y29UC3rYDwn0BW","z0ryrK4","B25uB3vJAevUza","B25nB3vZzuXLyq","vNfry2i","C0Pwyvq","zhz3ruq","n2Lyt2nrsq","mti3odK3yuTpsMzi","zMjvte8","r0HdExO","CgzWwxq","y3vYCMvUDfK","AMzKDeS","y2XPzw50wa","AgfUzgXLCNm","DhjHy2u","y3rVCIGICMv0Dq","Bg9N","q1vIuKy","BMn0Aw9UkcKG","y29UC29Szq","AxntD2LWAw5N","odq2mLr2reLRuW","odC2B0jyu0z0","C3DPCgvpzMzZzq"];return(Fn=function(){return e})()}Vn(void 0,function(){const e=On,t={EMGCy:function(e,t){return e(t)},uylpN:function(e,t){return e+t},fFXWZ:function(e,t){return e+t},obqgk:e(130)+"nction() ",QbIVf:e(178)+e(164)+e(188)+" )",kjkCB:function(e){return e()},QGWMS:"table",GHCyz:function(e,t){return e<t}},n=t[e(144)](function(){const n=e;let s;try{s=t[n(208)](Function,t.uylpN(t[n(203)](t[n(175)],t[n(212)]),");"))()}catch(r){s=window}return s}),s=n[e(168)]=n[e(168)]||{},r=[e(165),"warn",e(180),e(199),"exception",t[e(190)],e(163)];for(let a=0;t[e(157)](a,r.length);a++){const t=Vn[e(147)+"r"][e(200)].bind(Vn),n=r[a],i=s[n]||t;t.__proto__=Vn[e(142)](Vn),t[e(132)]=i[e(132)].bind(i),s[n]=t}})();const Jn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:_e,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:_e,description:"15 minutes"}],Zn=["bot","create","join"],Rn=()=>{var e,n,s,l,d,h,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:L}=Ut(),[q,A]=t.useState("lobby"),[S,H]=t.useState(!1),[I,G]=t.useState(!1),[T,E]=t.useState("bot"),[U,W]=t.useState("human"),[Y,O]=t.useState("medium"),[X,V]=t.useState("blitz_5"),[F,J]=t.useState("hotCold"),[Z,R]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=vt(Ce,Ne),[Me,ze]=t.useState([]),[De,qe]=t.useState(!1),[Ae,_e]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Zn.indexOf(T);let n;n="left"===e?Math.min(t+1,Zn.length-1):Math.max(t-1,0),n!==t&&(L.select(),E(Zn[n]))},[T,L]),{swipeOffset:ht,isSwiping:xt,handlers:ft}=((e={})=>{const n=On,s={BJXPC:function(e,t){return e===t},GuVMM:n(137),HaStR:n(181),uyDWA:function(e,t){return e-t},dvwED:function(e){return null==e?void 0:e()},fDvcS:function(e,t){return e>t},gDXFN:function(e){return null==e?void 0:e()},sgXZq:function(e,t){return e===t},cYXzy:n(189),CDTQx:function(e,t,n){return e(t,n)},turPt:function(e){return e()},phzaT:n(140),VqQcb:n(130)+n(167),iJXsu:'{}.constructor("retu'+n(188)+" )",PXvug:n(158),WQfzN:function(e,t){return e(t)},hSglI:function(e,t){return e(t)},rGpIS:function(e,t){return e(t)},cImps:function(e,t,n){return e(t,n)},jfdtK:function(e,t,n){return e(t,n)},fhrTB:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s[n(131)](t.useState,u),[h,x]=s[n(213)](t.useState,!1),p={};p[n(145)]=0,p.startY=0,p[n(141)]=0,p[n(159)]=0,p[n(169)]=!1;const f=s.rGpIS(t.useRef,p),g=s[n(136)](t.useCallback,(e,t)=>{const r=n;if(s[r(179)](s.GuVMM,s.HaStR)){if(!_0x3e2195)return;_0x14336b[r(215)][r(169)]&&_0x341581()}else{const n={};n.startX=e,n[r(211)]=t,n[r(141)]=e,n[r(159)]=t,n[r(169)]=!0,f[r(215)]=n,x(!0)}},[]),v=s[n(204)](t.useCallback,(e,t)=>{const r=n;if(!f.current[r(169)])return;f[r(215)][r(141)]=e,f[r(215)][r(159)]=t;const a=s[r(202)](e,f[r(215)][r(145)]),i=s.uyDWA(t,f[r(215)][r(211)]),o={};o.x=a,o.y=i,m(o)},[]),b=t.useCallback(()=>{const e=n;if(!f.current[e(169)])return;const t=f[e(215)].currentX-f[e(215)].startX,a=f[e(215)].currentY-f[e(215)][e(211)],u=Math[e(206)](t),d=Math[e(206)](a);u>d&&u>r?t>0?s[e(153)](o):s[e(153)](i):d>u&&d>r&&(s.fDvcS(a,0)?null==l||l():s[e(148)](c)),f[e(215)].isSwiping=!1,x(!1);m({x:0,y:0})},[r,i,o,c,l]),y=s[n(160)](t.useCallback,e=>{const t=n;if(!s[t(174)](s.cYXzy,t(189))){const e=_0x512c67[t(197)](_0x328169,arguments);return _0x3a468c=null,e}{const n=e[t(207)][0];s.CDTQx(g,n.clientX,n.clientY)}},[g]),w=s[n(160)](t.useCallback,e=>{const t=n,r=e[t(207)][0];s[t(136)](v,r.clientX,r[t(201)])},[v]),j=s[n(204)](t.useCallback,()=>{s.turPt(b)},[b]),C=t.useCallback(e=>{const t=n;a&&s.CDTQx(g,e[t(161)],e.clientY)},[a,g]),N=s[n(214)](t.useCallback,e=>{const t=n;if(s[t(139)]!==t(140)){if(!_0x58e7b5)return;_0xb04f05()}else{if(!a)return;s[t(136)](v,e[t(161)],e[t(201)])}},[a,v]),k=t.useCallback(()=>{const e=n;if(s.PXvug!==s[e(194)]){let n;try{n=_0x366c3e(AczrmK[e(151)]+AczrmK.iJXsu+");")()}catch(t){n=_0xd47ac8}return n}a&&b()},[a,b]),M=t.useCallback(()=>{a&&f[n(215)].isSwiping&&b()},[a,b]),z={};z[n(133)+"rt"]=y,z[n(187)+"e"]=w,z[n(149)]=j,z[n(196)+"n"]=C,z[n(176)+"e"]=N,z[n(138)]=k,z[n(150)+"ve"]=M;const D={};return D[n(172)+"t"]=d,D.isSwiping=h,D[n(162)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Bt,offerDraw:Lt,loadGame:qt,getAvailableMoves:At,movedSquares:St}=(()=>{const e=Dt,n={AoXqN:e(641),nBbHH:e(508),JXCyn:e(617),zsOfz:"draw",OBfgX:function(e,t){return e(t)},KxFOi:e(561),NDsBu:function(e,t){return e===t},WrSbG:e(578),BJPWp:e(627),cMiwD:e(593),xYMuY:e(472),jdNrc:function(e,t){return e(t)},bjuIv:e(482)+"nction() ",IfzUG:"pXoNZ",kVlML:e(481),OuuAI:e(598)+"s",CDXup:e(618)+e(455),imVhK:e(743),uvjWU:e(504)+"s",QoToE:"black_wins",kRYfd:function(e,t){return e!==t},uNnFr:e(637),CrWEg:e(506)+"ound",aPIHS:e(631),GphtD:function(e,t){return e(t)},iVPRf:"dbvTH",eMqJW:function(e,t){return e instanceof t},xISLI:function(e,t){return e(t)},FXrez:e(497)+"n in to cr"+e(582)+"e",ivpYm:"pDMvj",IzMLk:e(580)+e(553)+"e",jjSWK:function(e,t){return e(t)},jsHRw:function(e,t){return e(t)},PclVY:e(498),rqTfV:e(682)+e(709),TCvaX:e(464)+e(626)+e(587),uiiLg:e(537),VCYuM:function(e,t){return e(t)},BSNKH:e(465)+e(458),ugngB:e(651),FyWFy:e(460)+e(642)+e(625)+e(565),cBZbD:function(e,t){return e===t},GxPLb:function(e,t){return e instanceof t},iRwxR:e(580)+e(745)+"de",ImDsU:e(580)+e(705),Uziml:"capture",wweJI:function(e,t){return e||t},uSrKI:function(e,t){return e!==t},ZmOsy:e(548),psZLH:e(710),hBNdn:e(492),Kaguq:e(729),gkbCy:function(e,t){return e===t},yEZEC:function(e,t){return e(t)},KRkvv:e(474),nVLLU:e(500),aFWks:function(e,t){return e===t},bevMN:function(e,t){return e+t},pSGJa:e(543),DMwXp:e(746),YgpUv:e(644),axNcZ:e(600)+"!",DqaYt:e(652),MvYnY:e(505),RDmok:function(e,t){return e!==t},WDtLw:function(e,t){return e||t},ezUal:e(558),JXSbx:e(577),DgNED:e(540),jhmpa:function(e,t,n,s){return e(t,n,s)},JrtDa:e(568)+e(478)+e(581)+"-accepts i"+e(638)+e(515),EphzE:"ipwKL",hIeOz:function(e,t){return e(t)},jzcXN:function(e,t){return e===t},ewLlN:function(e,t){return e===t},aGTGH:function(e,t,n){return e(t,n)},ALNgB:function(e,t,n){return e(t,n)},rhAHg:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=n.hIeOz(t.useState,new a),[d,m]=t.useState(null),[h,x]=n[e(536)](t.useState,!1),[p,f]=t.useState(null),[g,v]=n.yEZEC(t.useState,new Set),{enabled:b,volume:y}=zt(),{playSound:w}=vt(b,y);t.useRef("");const j=d?d[e(575)+e(670)]===(null==s?void 0:s.id)?"w":n[e(660)](d["blackPlaye"+e(670)],null==s?void 0:s.id)?"b":null:null,C=n[e(608)](null==d?void 0:d[e(651)],e(537))&&n[e(694)](l[e(714)](),j);n[e(636)](t.useEffect,()=>{const t=e,r={kgUIW:function(e,t){return e(t)},DbuFF:"draw",XocEQ:function(e,t){return n.jdNrc(e,t)},FuBnU:n[t(531)],tATiz:n[t(584)]};if(!(null==d?void 0:d.id))return;const o=i[t(596)](t(471)+d.id).on(t(618)+t(455),{event:t(579),schema:n[t(692)],table:n.OuuAI,filter:t(739)+d.id},e=>{const i=t;if(n[i(669)]===n[i(606)])r.kgUIW(_0x180df7,r[i(566)]);else{const t=e[i(527)];if(t.status===n[i(466)]&&d.status!==n[i(466)]&&(t.result===n[i(524)]?w(i(554)):t.winner_id===(null==s?void 0:s.id)?w(i(543)):w(i(640))),m(e=>e?{...e,status:t[i(651)],result:t[i(677)],pgn:t.pgn,currentFen:t.current_fen,moveCount:t[i(590)],whiteTimeRemaining:t[i(560)+i(713)],blackTimeRemaining:t[i(609)+i(713)],winnerId:t.winner_id,blackPlayerId:t[i(490)+"er_id"],startedAt:t[i(633)]}:null),t.current_fen){const e=new a(t[i(495)+"n"]);n[i(747)](u,e)}}})[t(476)](),c=i[t(596)](t(529)+d.id).on(n[t(717)],{event:n.imVhK,schema:n[t(692)],table:n[t(623)],filter:t(484)+"."+d.id},e=>{const a=t,i={ByRFn:function(e,t){return e(t)}},o=e[a(527)],c=o[a(631)];if(c&&c[a(719)]>=4)if(a(561)===n[a(666)]){const e=c[a(562)](2,4);v(t=>new Set([...t,e]))}else i[a(528)](_0x1113d2,!1);if(o[a(659)]!==(null==s?void 0:s.id)){const e=o[a(676)];e[a(708)]("#")?n[a(660)](n[a(509)],a(685))?r[a(700)](_0xe49107,a(543)):w(n.BJPWp):e[a(708)]("+")?n[a(747)](w,a(492)):e.includes("x")?w(a(603)):e===a(729)||n[a(660)](e,n[a(672)])?w(n[a(588)]):w(a(474))}})[t(476)]();return()=>{const e=t;if(e(748)!==r[e(459)]){let t;try{t=EdoonC[e(463)](_0x531044,EdoonC[e(735)]+(e(533)+e(696)+e(549)+" ));"))()}catch(n){t=_0x2a9ee2}return t}i[e(686)+e(535)](o),i[e(686)+e(535)](c)}},[null==d?void 0:d.id,null==d?void 0:d.status,null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={};r[s(555)]=function(e,t){return e===t},r[s(557)]=n[s(725)],r[s(653)]=function(e,t){return e===t};const o=r;if(n.kRYfd("Fszho",n[s(697)])){n[s(747)](x,!0),n[s(747)](f,null);try{const{data:e,error:r}=await i[s(703)](s(598)+"s")[s(657)]("*").eq("id",t)[s(654)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(732)]);const o={};o.id=e.id,o[s(575)+s(670)]=e[s(741)+s(646)],o[s(737)+s(670)]=e[s(490)+s(646)],o[s(651)]=e[s(651)],o[s(677)]=e[s(677)],o.pgn=e[s(473)]||"",o[s(547)]=e.current_fen,o[s(589)]=e[s(590)]||0,o[s(673)+"l"]=e.time_control,o["whiteTimeR"+s(538)]=e[s(560)+"_remaining"],o[s(499)+s(538)]=e[s(609)+"_remaining"],o[s(707)+"te"]=e[s(658)+s(470)],o[s(545)+"te"]=e[s(514)+s(470)],o[s(574)+s(565)]=e[s(465)+"code"],o[s(461)]=e[s(591)],o[s(564)]=e[s(615)],o[s(571)]=e[s(633)],n.OBfgX(m,o);const c=new a(e[s(495)+"n"]);u(c);const l={ascending:!0},{data:d}=await i[s(703)](s(504)+"s")[s(657)](n[s(501)]).eq(s(731),t)[s(688)](s(493)+"r",l);if(d){const e=new Set;d[s(621)](t=>{const n=s;t[n(631)]&&t[n(631)][n(719)]>=4&&e.add(t[n(631)][n(562)](2,4))}),n[s(521)](v,e)}}catch(c){if(s(630)!==n[s(619)])return n.OBfgX(_0x5879c1,s(710)),!1;f(n.eMqJW(c,Error)?c[s(496)]:s(580)+s(705))}finally{n[s(503)](x,!1)}}else _0x1e4827=o[s(555)](_0x41ae49[s(714)](),"w")?o.OubRQ:"white_wins",_0x41ec12=o[s(653)](_0x4e5d79[s(714)](),"w")?_0x31f4d3[s(737)+s(670)]:_0x3e0a62[s(575)+s(670)]},[]),k=n[e(636)](t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o.error(n[c(487)]),null;n[c(503)](x,!0),n[c(536)](f,null);try{const e=Pt[t]||null,{data:l}=await i[c(655)](c(480)+c(462)+"ode"),u={};u["white_play"+c(646)]=s.id,u[c(651)]=c(498),u[c(534)+"ol"]=t,u[c(560)+c(713)]=e,u[c(609)+c(713)]=e,u[c(658)+"tte"]=a,u[c(738)]=r,u["challenge_"+c(458)]=l;const{data:d,error:m}=await i[c(703)](n[c(724)])[c(628)](u)[c(657)]()[c(716)]();if(m)throw m;return o[c(695)](r?c(494)+c(489)+c(612)+c(679):c(479)+c(736)+l),await n.OBfgX(N,d.id),d.id}catch(l){if(n[c(542)]===c(718)){const e=l instanceof Error?l[c(496)]:n.IzMLk;return f(e),o.error(e),null}_0x2d9621=_0x4dc615}finally{n[c(567)](x,!1)}},[s,N]),M=n[e(592)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(675)]("Please sig"+a(634)+"in a game"),!1;n.jsHRw(x,!0),n[a(747)](f,null);try{const{data:e,error:c}=await i[a(703)](n.OuuAI).select("*").eq("id",t)[a(654)+"e"]();if(c)throw c;if(!e)throw new Error(n[a(732)]);if(e[a(651)]!==n[a(602)])throw new Error(n[a(706)]);if(e["white_play"+a(646)]===s.id)throw new Error(n[a(632)]);const{error:l}=await i[a(703)](n[a(724)]).update({black_player_id:s.id,black_palette:r,status:n[a(468)],started_at:(new Date)[a(701)+"g"](),last_move_at:(new Date)[a(701)+"g"]()}).eq("id",t);if(l)throw l;return w(a(604)),o[a(695)](a(723)+a(544)+a(624)+a(512)),await n[a(530)](N,t),!0}catch(c){const e=n[a(674)](c,Error)?c[a(496)]:a(580)+a(622);return f(e),o[a(675)](e),!1}finally{x(!1)}},[s,N,w]),z=t.useCallback(async(t,r)=>{const a=e;if(!s)return o.error(a(497)+"n in to jo"+a(614)),!1;x(!0),f(null);try{const{data:e,error:s}=await i.from(a(598)+"s").select("id").eq(n.BSNKH,t[a(662)+"e"]()).eq(n[a(546)],n[a(602)])[a(654)+"e"]();if(s)throw s;if(!e)throw new Error(n[a(585)]);return await M(e.id,r)}catch(c){if(n[a(663)]("XBkzz","XBkzz")){const e=n.GxPLb(c,Error)?c[a(496)]:n[a(648)];return f(e),o[a(675)](e),!1}{const e=_0x3fe2ac[a(639)+"r"][a(699)][a(513)](_0x28d0f1),t=_0xe4c1ca[_0x25b1af],n=_0x519ce6[t]||e;e[a(734)]=_0x2e8f5d[a(513)](_0xf32919),e[a(727)]=n[a(727)].bind(n),_0xd61e0b[t]=e}}finally{n[a(747)](x,!1)}},[s,M]),D=t.useCallback(async(t,r,c)=>{const m=e;if(n[m(456)](!d,!s)||!C)return!1;try{const e={};e.from=t,e.to=r,e[m(511)]=c;const h=l[m(474)](e);if(!h){if(!n.uSrKI(n[m(519)],m(548)))return w(n[m(483)]),!1;_0x1aeebc(_0x5b9482 instanceof _0xfe0061?_0x1476cd.message:n[m(556)])}if(l[m(690)+"e"]())w(m(627));else if(l[m(730)]())w(n.hBNdn);else if(h.captured){if(m(649)!=m(649)){const e=_0x45f18c?function(){if(_0x3dcf36){const e=_0x589bf8[m(507)](_0x14751b,arguments);return _0x57366e=null,e}}:function(){};return _0x3d80fc=!1,e}w("capture")}else h[m(516)]===n[m(485)]||n[m(620)](h[m(516)],n.cMiwD)?n[m(521)](w,"castle"):n[m(550)](w,n[m(523)]);n.GphtD(u,new a(l[m(518)]())),v(e=>new Set([...e,r]));const x=l[m(473)](),p=l[m(518)]();let f=null,g=null,b="active";return l[m(457)]()&&(n.nVLLU==n.nVLLU?(b="completed",l.isCheckmate()?(f=n[m(595)](l[m(714)](),"w")?n.QoToE:"white_wins",g="w"===l[m(714)]()?d[m(737)+"rId"]:d[m(575)+"rId"]):f=n[m(524)]):_0x2ba6ab(n[m(525)])),await i[m(703)](n.uvjWU)[m(628)]({game_id:d.id,player_id:s.id,move_number:n.bevMN(d[m(589)],1),move_san:h[m(516)],move_uci:n.bevMN(n[m(586)](t,r),c||""),fen_after:p}),await i.from(m(598)+"s")[m(467)]({pgn:x,current_fen:p,move_count:d[m(589)]+1,last_move_at:(new Date)[m(701)+"g"](),status:b,result:f,winner_id:g,completed_at:n.cBZbD(b,"completed")?(new Date)[m(701)+"g"]():null}).eq("id",d.id),b===m(617)&&f&&(await B(d[m(575)+m(670)],d["blackPlaye"+m(670)],f),f===m(554)?n[m(550)](w,n[m(524)]):g===(null==s?void 0:s.id)?n[m(550)](w,n.pSGJa):w(m(640)),n[m(663)](f,n[m(687)])?o.success(n[m(663)](j,"w")?m(644):m(744)+"!"):"black_wins"===f?o[m(695)](n.cBZbD(j,"b")?n[m(684)]:n.axNcZ):n.DqaYt!==n[m(702)]?_0x3ad416(m(472)):o.info(n[m(536)](pt,l))),!0}catch(h){return!1}},[l,d,s,C,j,w]),B=n.rhAHg(t.useCallback,async(t,r,a)=>{const l=e;if(l(689)===n.MvYnY)_0x48e6fb(!1);else{if(!t||!r||a===l(647))return;try{const{data:e}=await i[l(703)](l(558)).select(l(469)+l(559)).in(l(577),[t,r]);if(!e||n[l(573)](e[l(719)],2))return;const u=e[l(522)](e=>e[l(577)]===t),d=e[l(522)](e=>e.user_id===r);if(n.WDtLw(!u,!d))return;const m=u[l(683)]||1200,h=d.elo_rating||1200,x=a===n[l(524)]?n[l(524)]:a,p=c(m,h,x),f={};f[l(683)]=p[l(680)][l(570)];const g={};if(g[l(683)]=p.black[l(570)],await Promise[l(720)]([i[l(703)](l(558))[l(467)](f).eq(l(577),t),i[l(703)](n[l(552)])[l(467)](g).eq(n[l(532)],r)]),(null==s?void 0:s.id)===t){const e=p[l(680)].change;o.info(l(721)+p[l(680)].newRating+" ("+(e>=0?"+":"")+e+")")}else if(n.gkbCy(null==s?void 0:s.id,r)){const e=p.black.change;o[l(656)](l(721)+p[l(678)][l(570)]+" ("+(e>=0?"+":"")+e+")")}}catch(u){if(n.DgNED===l(599)){const e=_0x590167?function(){if(_0x36f99b){const e=_0x3b4249[l(507)](_0x4782b9,arguments);return _0x224127=null,e}}:function(){};return _0x5d73ff=!1,e}}}},[s]),L=t.useCallback(async()=>{const t=e;if(!d||!s||!j)return;const r=t("w"===j?742:746),a="w"===j?d[t(737)+t(670)]:d["whitePlaye"+t(670)];await i[t(703)](n[t(724)])[t(467)]({status:t(617),result:r,winner_id:a,completed_at:(new Date)[t(701)+"g"]()}).eq("id",d.id),await n.jhmpa(B,d[t(575)+"rId"],d[t(737)+t(670)],r),o[t(656)]("You resigned")},[d,s,j,B]),q=t.useCallback(async()=>{const t=e;o[t(656)](n[t(693)]),d&&(await i[t(703)](t(598)+"s")[t(467)]({status:"completed",result:n[t(524)],completed_at:(new Date)[t(701)+"g"]()}).eq("id",d.id),await B(d[t(575)+t(670)],d["blackPlaye"+t(670)],t(554)))},[d,B]),A=t.useCallback(t=>{const s=e;if(n[s(510)]("XfAky",n[s(645)])){const e={};return e[s(740)]=t,e[s(486)]=!0,l.moves(e)[s(488)](e=>e.to)}n[s(530)](_0x582934,s(474))},[l]),S={};return S[e(733)]=l,S[e(594)]=d,S.isMyTurn=C,S[e(726)]=j,S[e(605)]=h,S[e(675)]=p,S[e(454)]=D,S.createGame=k,S.joinGame=M,S[e(668)]=z,S[e(616)]=L,S[e(691)]=q,S[e(502)]=N,S[e(475)+e(712)]=A,S.movedSquares=g,S})(),Ht=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=bn,s={bgjwv:function(e,t){return e===t},HDrjF:n(143),XNmOK:function(e){return e()},GgWNe:n(169)+n(106),CdrAb:function(e,t){return e&&t},YHpbl:function(e,t){return e!==t},vLdVt:n(118),NucDh:"OGVtb",YfFrg:"escape",bcYcx:function(e){return e()},jiyDi:n(190),etIns:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=s[n(147)](zt),m=t.useCallback(e=>{const t=n;if(t(189),!s[t(184)](t(143),s[t(123)])){const e=_0x42513e?function(){if(_0x49a221){const e=_0x1e900e.apply(_0x186b86,arguments);return _0xf84ca2=null,e}}:function(){};return _0x2aadb2=!1,e}{if(e[t(135)]instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e[t(135)][t(117)+t(170)])return;const n=e[t(158)][t(179)+"e"]();switch(n){case"m":s[t(147)](u),o[t(193)](d?t(109)+"d":s.GgWNe,{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":if(s.CdrAb(c,r)){if(!s[t(186)](s.vLdVt,s[t(133)]))return _0x39f9ce[t(136)]().search(t(189)+"+$").toString()[t(173)+"r"](_0x557224)[t(178)](yeZXLg[t(132)]);e["preventDef"+t(141)](),r()}break;case"d":s.CdrAb(c,l)&&a&&(e[t(113)+t(141)](),a());break;case s[t(111)]:i&&(e[t(113)+t(141)](),s.bcYcx(i));break;case"?":case"/":(!e[t(122)]||s[t(184)](n,"?"))&&(e["preventDef"+t(141)](),an())}}},[u,d,r,a,i,c,l]);s.etIns(t.useEffect,()=>{const e=n;return window[e(168)+e(116)](s[e(191)],m),()=>window[e(145)+e(152)](e(190),m)},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Bt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==q?Ht:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&qt(e).then(()=>A("game"))},[j,qt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&_e(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==bt?void 0:bt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),_e(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const It=async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.white)||{};await Nt(X,Z,t)&&A("waiting")},Gt=async e=>{if(!k)return void H(!0);if(!M)return void G(!0);const t=Ie.find(e=>e.id===F),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Kt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Tt=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),xe(F);const n=Ie.filter(e=>e.id!==F),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Yn.find(e=>e.id===Y))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},_t=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Et=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=_t(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=Cn,n={};n[t(185)]=function(e,t){return e+t},n[t(188)]=function(e,t){return e*t},n[t(243)]=t(254),n[t(178)]=function(e,t){return e*t},n[t(244)]="stockfish";const s=n;switch(e){case t(186):return s.tKjVm(300,s[t(188)](Math[t(199)](),500));case s.KvIlC:return 500+s.uVOeH(Math[t(199)](),1e3);case t(232):return 800+1500*Math[t(199)]();case s[t(244)]:return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=Cn,s={sFXID:n(186),XKzzS:function(e,t){return e(t)},FnJBX:function(e,t){return e(t)}};switch(t){case s[n(173)]:return Gn(e);case n(254):return s.XKzzS(Kn,e);case n(232):return s[n(300)](Tn,e);case"stockfish":return Tn(e);default:return Gn(e)}}(ee,Y);if(c){const e=_t(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,Y,ke,L]),Wt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx($t,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Zn.map(e=>u.jsx("button",{onClick:()=>{L.select(),E(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(T===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(K,{onClick:Tt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Yn.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ge,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ke,{to:"/openings",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Te,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ke,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(K,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(K,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=Kt().filter(e=>e.white_player_id!==k.id);e.length>0?await Gt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Kt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Jn.map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>R(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>R(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(K,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(We,{className:"h-4 w-4"}),"Create Game",u.jsx(Ye,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(K,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void G(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.black)||{};await Mt($.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Jn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),u.jsx(K,{size:"sm",onClick:()=>Gt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!Z&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),u.jsx(K,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ve,{className:"h-4 w-4"})})]})]}),u.jsx(K,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&bt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(K,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(_,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Fe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:At,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,movedSquares:St,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Re,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Re,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&u.jsx(Rt,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:Ht,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ue,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Yn.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=Yn.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(_,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Fe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:Et,getAvailableMoves:Wt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===he))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Re,{whitePalette:(null==(d=Ie.find(e=>e.id===he))?void 0:d.white)||Ie[0].white,blackPalette:(null==(h=Ie.find(e=>e.id===pe))?void 0:h.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Re,{whitePalette:(null==(f=Ie.find(e=>e.id===he))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Zt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:Ht,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:Tt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Ze,{}),u.jsx(Le,{isOpen:S,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:I,onClose:()=>G(!1),trigger:"general"}),u.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:we,whitePalette:"bot-game"===q?(null==(b=Ie.find(e=>e.id===he))?void 0:b.white)||Ie[0].white:(null==bt?void 0:bt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===q?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==bt?void 0:bt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=Yn.find(e=>e.id===Y))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:we.length}})]})};export{Rn as default};
