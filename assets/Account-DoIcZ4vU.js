import{r as e,j as s,b0 as a,bP as t,co as i,cp as r,cq as l,B as n,L as c,aY as o,a3 as d,b as m,s as x,u,cT as h,ar as j,aX as p,a5 as g,a6 as f,ah as v,X as N,d9 as y,b$ as w,O as b,E as _,at as S,W as C,au as P,db as k,bB as T,a as A,H as F,Y as E,U as M,c1 as U,c2 as I,q as D,t as z,v as L,C as q,N as O,ao as R,w as $,af as B,ag as G,aw as V,aF as K,aN as Q,b1 as Y,a7 as W,ci as H,dc as J,aI as X,bC as Z,bD as ee,aK as se,aL as ae,aM as te}from"./index-1k5cZzy0.js";import{f as ie,b as re,d as le,m as ne}from"./visualizationSchemas-B0jKNzfp.js";import{C as ce}from"./circle-alert-D9NCoECY.js";import{G as oe}from"./GracePeriodBanner-PYWI_edr.js";import{C as de}from"./calendar-BGH9_Q6t.js";import{T as me}from"./tag-DCn1Vm0u.js";import{M as xe}from"./message-square-AOUNc0WH.js";import{S as ue}from"./scan-line-BkUqeumV.js";import"./flagContent-DutS32af.js";import"./alert-BVWwCtCD.js";const he=["image/jpeg","image/png","image/webp","image/gif"],je=({userId:u,currentAvatarUrl:h,displayName:j,onAvatarUpdate:p})=>{const[g,f]=e.useState(!1),[v,N]=e.useState(!1),[y,w]=e.useState(null),[b,_]=e.useState(null),S=e.useRef(null),C=(null==j?void 0:j.slice(0,2).toUpperCase())||"U",P=y||h;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(a,{className:"flex items-center gap-2",children:[s.jsx(t,{className:"h-4 w-4 text-muted-foreground"}),"Profile Picture"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(i,{className:"h-20 w-20 border-2 border-border",children:[s.jsx(r,{src:P||void 0,alt:j}),s.jsx(l,{className:"text-lg bg-primary/20 text-primary",children:C})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{ref:S,type:"file",accept:he.join(","),onChange:async e=>{var s,a;const t=null==(s=e.target.files)?void 0:s[0];if(t)if(_(null),he.includes(t.type))if(t.size>2097152)m.error("File too large",{description:"Please upload an image smaller than 2MB"});else{f(!0);try{const e=URL.createObjectURL(t);w(e);const s=await ie(t),i=await re(s);if(!i.safe)return w(null),_(i.reason||"Image does not meet community guidelines"),void m.error("Image not allowed",{description:i.reason||"This image does not meet our community guidelines"});const r=(null==(a=t.name.split(".").pop())?void 0:a.toLowerCase())||"jpg",l=`${u}/avatar.${r}`,{data:n}=await x.storage.from("visualizations").list(u,{search:"avatar"});n&&n.length>0&&await x.storage.from("visualizations").remove(n.map(e=>`${u}/${e.name}`));const{error:c}=await x.storage.from("visualizations").upload(l,t,{cacheControl:"3600",upsert:!0});if(c)throw c;const{data:o}=x.storage.from("visualizations").getPublicUrl(l),d=o.publicUrl,{error:h}=await p(d);if(h)throw h;m.success("Avatar updated successfully")}catch(i){w(null),m.error("Failed to upload avatar",{description:i.message||"Please try again"})}finally{f(!1),S.current&&(S.current.value="")}}else m.error("Invalid file type",{description:"Please upload a JPEG, PNG, WebP, or GIF image"})},className:"hidden","aria-label":"Upload avatar"}),s.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=S.current)?void 0:e.click()},disabled:g||v,className:"gap-2",children:[g?s.jsx(c,{className:"h-4 w-4 animate-spin"}):s.jsx(o,{className:"h-4 w-4"}),g?"Uploading...":"Upload Photo"]}),h&&s.jsxs(n,{variant:"ghost",size:"sm",onClick:async()=>{N(!0);try{const{data:e}=await x.storage.from("visualizations").list(u,{search:"avatar"});e&&e.length>0&&await x.storage.from("visualizations").remove(e.map(e=>`${u}/${e.name}`));const{error:s}=await p(null);if(s)throw s;w(null),m.success("Avatar removed")}catch(e){m.error("Failed to remove avatar",{description:e.message||"Please try again"})}finally{N(!1)}},disabled:g||v,className:"gap-2 text-destructive hover:text-destructive",children:[v?s.jsx(c,{className:"h-4 w-4 animate-spin"}):s.jsx(d,{className:"h-4 w-4"}),"Remove"]})]})]}),b&&s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-destructive/10 border border-destructive/20 text-sm text-destructive",children:[s.jsx(ce,{className:"h-4 w-4 shrink-0"}),s.jsx("span",{children:b})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload a JPEG, PNG, WebP, or GIF image (max 2MB). Images are reviewed to ensure they meet our community guidelines."})]})};const pe=({title:e,value:a,icon:t,description:i})=>s.jsx(g,{className:"bg-card/50 backdrop-blur-sm border-border/50",children:s.jsx(f,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:t}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e}),s.jsx("p",{className:"text-xl font-bold text-foreground",children:a}),i&&s.jsx("p",{className:"text-xs text-muted-foreground",children:i})]})]})})}),ge=e=>`$${(e/100).toFixed(2)}`,fe=()=>{const{data:a,isLoading:t,error:i}=function(){const{user:s}=u(),a=h();return e.useEffect(()=>{if(!(null==s?void 0:s.id))return;const e=x.channel(`user-stats-${s.id}`).on("postgres_changes",{event:"*",schema:"public",table:"saved_visualizations"},()=>{a.invalidateQueries({queryKey:["user-statistics",s.id]})}).on("postgres_changes",{event:"*",schema:"public",table:"visualization_listings"},()=>{a.invalidateQueries({queryKey:["user-statistics",s.id]})}).on("postgres_changes",{event:"*",schema:"public",table:"marketplace_offers"},()=>{a.invalidateQueries({queryKey:["user-statistics",s.id]})}).on("postgres_changes",{event:"*",schema:"public",table:"user_wallets"},()=>{a.invalidateQueries({queryKey:["user-statistics",s.id]})}).on("postgres_changes",{event:"*",schema:"public",table:"vision_scores"},()=>{a.invalidateQueries({queryKey:["user-statistics",s.id]})}).subscribe();return()=>{x.removeChannel(e)}},[null==s?void 0:s.id,a]),j({queryKey:["user-statistics",null==s?void 0:s.id],queryFn:async()=>{if(!(null==s?void 0:s.id))return null;const{data:e,error:a}=await x.rpc("get_user_statistics",{p_user_id:s.id});if(a)throw a;return e},enabled:!!(null==s?void 0:s.id),staleTime:12e4,gcTime:6e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0})}();return t?s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:8}).map((e,a)=>s.jsx(p,{className:"h-24 rounded-lg"},a))})}):i?s.jsx(g,{className:"bg-destructive/10 border-destructive/20",children:s.jsx(f,{className:"p-6 text-center",children:s.jsx("p",{className:"text-destructive",children:"Failed to load statistics"})})}):a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.is_premium&&s.jsxs(v,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white",children:[s.jsx(N,{className:"h-3 w-3 mr-1"}),"Premium Member"]}),a.member_since&&s.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(de,{className:"h-3 w-3"}),"Member for ",y(new Date(a.member_since))]}),a.last_activity&&s.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(w,{className:"h-3 w-3"}),"Active ",y(new Date(a.last_activity),{addSuffix:!0})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-foreground",children:"Your Visions"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(pe,{title:"Total Owned",value:a.total_visions_owned,icon:s.jsx(b,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Created",value:a.total_visions_created,icon:s.jsx(b,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Public",value:a.public_visions,icon:s.jsx(_,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Private",value:a.private_visions,icon:s.jsx(b,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-foreground",children:"Earnings & Wallet"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(pe,{title:"Wallet Balance",value:ge(a.wallet_balance_cents),icon:s.jsx(S,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Total Earned",value:ge(a.total_earned_cents),icon:s.jsx(C,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Total Royalties",value:ge(a.total_royalties_cents),icon:s.jsx(P,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Total Spent",value:ge(a.total_spent_cents),icon:s.jsx(k,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-foreground",children:"Marketplace Activity"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.jsx(pe,{title:"Active Listings",value:a.active_listings,icon:s.jsx(me,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Total Sales",value:a.total_sales,icon:s.jsx(P,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Total Purchases",value:a.total_purchases,icon:s.jsx(k,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Offers Received",value:a.pending_offers_received,icon:s.jsx(xe,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Offers Sent",value:a.pending_offers_sent,icon:s.jsx(xe,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-foreground",children:"Engagement"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(pe,{title:"Total Views",value:a.total_views_received.toLocaleString(),icon:s.jsx(_,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Total Downloads",value:a.total_downloads_received.toLocaleString(),icon:s.jsx(T,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Total Scans",value:a.total_scans_received.toLocaleString(),icon:s.jsx(ue,{className:"h-5 w-5"})}),s.jsx(pe,{title:"Portfolio Score",value:a.portfolio_score.toLocaleString(),icon:s.jsx(C,{className:"h-5 w-5"})})]})]})]}):s.jsx(g,{className:"bg-muted/50",children:s.jsx(f,{className:"p-6 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Sign in to view your statistics"})})})},ve=()=>{A();const{user:t,profile:i,isPremium:r,subscriptionStatus:l,isLoading:o,isCheckingSubscription:d,checkSubscription:h,updateProfile:j,openCheckout:p,openCustomerPortal:y}=u(),[w,b]=e.useState(""),[_,S]=e.useState(!1),[C,P]=e.useState(!1),[k,T]=e.useState(!0),[ie,re]=e.useState(null),[me,xe]=e.useState("idle"),[ue,he]=e.useState(null),[pe,ge]=e.useState(null),[ve,Ne]=e.useState(""),[ye,we]=e.useState(!1),[be,_e]=e.useState(!1),[Se,Ce]=e.useState(!1),[Pe,ke]=e.useState(!1);e.useEffect(()=>{(null==i?void 0:i.display_name)&&b(i.display_name)},[i]),e.useEffect(()=>{t&&Te()},[t]);const Te=async()=>{var e;T(!0);try{const{data:s,error:a}=await x.auth.mfa.listFactors();if(a)throw a;const t=null==(e=s.totp)?void 0:e.find(e=>"verified"===e.status);P(!!t),t&&re(t.id)}catch(s){}finally{T(!1)}},Ae=async()=>{ke(!0);try{r?await y():await p()}catch(e){m.error("Failed to open subscription portal",{description:e.message})}finally{ke(!1)}};if(o)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(F,{}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(c,{className:"h-8 w-8 animate-spin text-primary"})})}),s.jsx(E,{})]});if(!t)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(F,{}),s.jsxs("div",{className:"container mx-auto px-4 py-16",children:[s.jsxs("div",{className:"max-w-md mx-auto text-center space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(M,{className:"h-8 w-8 text-primary"})})}),s.jsx("h1",{className:"text-2xl font-display font-bold",children:"Account Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Sign in to access your account settings."}),s.jsx(n,{onClick:()=>Ce(!0),className:"btn-luxury",children:"Sign In to Continue"})]}),s.jsx(U,{isOpen:Se,onClose:()=>Ce(!1),onAuthRequired:()=>{Ce(!1),_e(!0)},trigger:"general"}),s.jsx(I,{isOpen:be,onClose:()=>_e(!1)})]}),s.jsx(E,{})]});const Fe=(null==l?void 0:l.subscriptionEnd)?new Date(l.subscriptionEnd):null,Ee=Fe&&Fe.getTime()-Date.now()<6048e5;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(F,{}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(oe,{className:"mb-6"}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-display font-bold",children:"Account Settings"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your profile, security, and subscription settings"})]}),s.jsxs(D,{defaultValue:"profile",className:"space-y-6",children:[s.jsxs(z,{className:"grid w-full grid-cols-4",children:[s.jsxs(L,{value:"profile",className:"gap-2",children:[s.jsx(M,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),s.jsxs(L,{value:"stats",className:"gap-2",children:[s.jsx(q,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Stats"})]}),s.jsxs(L,{value:"security",className:"gap-2",children:[s.jsx(O,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Security"})]}),s.jsxs(L,{value:"subscription",className:"gap-2",children:[s.jsx(R,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Subscription"})]})]}),s.jsx($,{value:"stats",children:s.jsxs(g,{children:[s.jsxs(B,{children:[s.jsxs(G,{className:"flex items-center gap-2",children:[s.jsx(q,{className:"h-5 w-5"}),"Your Statistics"]}),s.jsx(V,{children:"Overview of your activity, earnings, and engagement"})]}),s.jsx(f,{children:s.jsx(fe,{})})]})}),s.jsx($,{value:"profile",children:s.jsxs(g,{children:[s.jsxs(B,{children:[s.jsxs(G,{className:"flex items-center gap-2",children:[s.jsx(M,{className:"h-5 w-5"}),"Profile Information"]}),s.jsx(V,{children:"Update your personal information and display name"})]}),s.jsxs(f,{className:"space-y-6",children:[t&&s.jsx(je,{userId:t.id,currentAvatarUrl:(null==i?void 0:i.avatar_url)||null,displayName:w||"User",onAvatarUpdate:async e=>j({avatar_url:e})}),s.jsx(K,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(a,{className:"flex items-center gap-2",children:[s.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),"Email Address"]}),s.jsx(Y,{value:t.email||"",disabled:!0,className:"bg-muted/50"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"displayName",children:"Display Name"}),s.jsx(Y,{id:"displayName",value:w,onChange:e=>b(e.target.value),placeholder:"Enter your display name",maxLength:50}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This is how you'll appear to other users. Names are reviewed to ensure they meet our community guidelines."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(a,{className:"flex items-center gap-2",children:[s.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),"Member Since"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:t.created_at?W(new Date(t.created_at),"MMMM d, yyyy"):"N/A"})]}),s.jsx(K,{}),s.jsxs(n,{onClick:async()=>{var e;if(!w.trim())return void m.error("Display name cannot be empty");const s=le.safeParse(w);if(!s.success)return void m.error("Invalid display name",{description:null==(e=s.error.errors[0])?void 0:e.message});S(!0);const a=await ne(w);if(!a.safe)return m.error("Display name not allowed",{description:a.reason||"This name does not meet our community guidelines"}),void S(!1);const{error:t}=await j({display_name:w.trim()});t?m.error("Failed to update profile",{description:t.message}):m.success("Profile updated successfully"),S(!1)},disabled:_||w===(null==i?void 0:i.display_name),className:"gap-2",children:[_?s.jsx(c,{className:"h-4 w-4 animate-spin"}):s.jsx(H,{className:"h-4 w-4"}),"Save Changes"]})]})]})}),s.jsx($,{value:"security",children:s.jsxs(g,{children:[s.jsxs(B,{children:[s.jsxs(G,{className:"flex items-center gap-2",children:[s.jsx(O,{className:"h-5 w-5"}),"Two-Factor Authentication"]}),s.jsx(V,{children:"Add an extra layer of security to your account"})]}),s.jsx(f,{className:"space-y-6",children:r?k&&"idle"===me?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(c,{className:"h-8 w-8 animate-spin text-primary"})}):"idle"===me?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[C?s.jsx(J,{className:"h-8 w-8 text-green-500"}):s.jsx(O,{className:"h-8 w-8 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:C?"2FA Enabled":"2FA Disabled"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:C?"Your account is protected with TOTP":"Enable 2FA for enhanced security"})]})]}),s.jsx(v,{variant:C?"default":"secondary",className:C?"bg-green-500":"",children:C?"Active":"Inactive"})]}),C?s.jsxs(n,{variant:"destructive",className:"w-full gap-2",onClick:async()=>{if(ie){T(!0);try{const{error:e}=await x.auth.mfa.unenroll({factorId:ie});if(e)throw e;P(!1),re(null),m.success("Two-factor authentication disabled")}catch(e){m.error("Failed to disable 2FA",{description:e.message})}finally{T(!1)}}},disabled:k,children:[s.jsx(X,{className:"h-4 w-4"}),"Disable Two-Factor Authentication"]}):s.jsxs(n,{className:"w-full btn-luxury gap-2",onClick:async()=>{var e,s;T(!0);try{const{data:a,error:t}=await x.auth.mfa.enroll({factorType:"totp",friendlyName:"En Pensent Authenticator"});if(t)throw t;(null==(e=a.totp)?void 0:e.qr_code)&&(null==(s=a.totp)?void 0:s.secret)&&(he(a.totp.qr_code),ge(a.totp.secret),re(a.id),xe("setup"))}catch(a){m.error("Failed to start MFA setup",{description:a.message})}finally{T(!1)}},disabled:k,children:[s.jsx(O,{className:"h-4 w-4"}),"Enable Two-Factor Authentication"]})]}):"setup"===me&&ue?s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Scan this QR code with your authenticator app"}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"p-4 bg-white rounded-lg",children:s.jsx("img",{src:ue,alt:"MFA QR Code",className:"w-48 h-48"})})}),pe&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{className:"text-xs text-muted-foreground",children:"Or enter this code manually:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"flex-1 p-2 bg-muted rounded text-xs font-mono break-all",children:pe}),s.jsx(n,{variant:"outline",size:"icon",onClick:()=>{pe&&(navigator.clipboard.writeText(pe),we(!0),setTimeout(()=>we(!1),2e3))},className:"shrink-0",children:ye?s.jsx(Z,{className:"h-4 w-4 text-green-500"}):s.jsx(ee,{className:"h-4 w-4"})})]})]}),s.jsx(n,{className:"w-full",onClick:()=>xe("verify"),children:"Continue to Verification"})]}):"verify"===me?s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Enter the 6-digit code from your authenticator app"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"verificationCode",children:"Verification Code"}),s.jsx(Y,{id:"verificationCode",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"000000",value:ve,onChange:e=>Ne(e.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-widest font-mono"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(n,{variant:"outline",className:"flex-1",onClick:()=>xe("setup"),children:"Back"}),s.jsx(n,{className:"flex-1 btn-luxury",onClick:async()=>{if(ie&&6===ve.length){T(!0);try{const{data:e,error:s}=await x.auth.mfa.challenge({factorId:ie});if(s)throw s;const{error:a}=await x.auth.mfa.verify({factorId:ie,challengeId:e.id,code:ve});if(a)throw a;P(!0),xe("idle"),Ne(""),he(null),ge(null),m.success("Two-factor authentication enabled!")}catch(e){m.error("Verification failed",{description:e.message})}finally{T(!1)}}},disabled:6!==ve.length||k,children:k?s.jsx(c,{className:"h-4 w-4 animate-spin"}):"Verify & Enable"})]})]}):null:s.jsxs("div",{className:"text-center py-6",children:[s.jsx(O,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Two-factor authentication is an exclusive premium feature that adds an extra layer of security to your account."}),s.jsxs(n,{className:"btn-luxury gap-2",onClick:Ae,children:[s.jsx(N,{className:"h-4 w-4"}),"Upgrade to Premium"]})]})})]})}),s.jsx($,{value:"subscription",children:s.jsxs(g,{children:[s.jsx(B,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(G,{className:"flex items-center gap-2",children:[s.jsx(N,{className:"h-5 w-5 text-primary"}),"Subscription"]}),s.jsx(V,{children:"Manage your Visionary premium subscription"})]}),s.jsx(n,{variant:"ghost",size:"sm",onClick:async()=>{await h(),m.success("Subscription status refreshed")},disabled:d,children:s.jsx(se,{className:"h-4 w-4 "+(d?"animate-spin":"")})})]})}),s.jsxs(f,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),r?s.jsxs(v,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:[s.jsx(ae,{className:"h-3 w-3 mr-1"}),"Active"]}):s.jsxs(v,{variant:"secondary",className:"bg-muted",children:[s.jsx(te,{className:"h-3 w-3 mr-1"}),"Inactive"]})]}),s.jsx(K,{}),r?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(de,{className:"h-4 w-4"}),s.jsx("span",{children:"Renewal Date"})]}),s.jsx("span",{className:"text-sm font-medium",children:Fe?W(Fe,"MMMM d, yyyy"):"N/A"})]}),Ee&&s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[s.jsx(ce,{className:"h-4 w-4 text-amber-500"}),s.jsx("span",{className:"text-sm text-amber-500",children:"Your subscription renews in less than 7 days"})]}),s.jsxs("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/10",children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Your Benefits"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• Unlimited HD downloads"}),s.jsx("li",{children:"• No watermarks on exports"}),s.jsx("li",{children:"• Personal vision gallery"}),s.jsx("li",{children:"• Two-factor authentication"}),s.jsx("li",{children:"• Early access to new features"})]})]}),s.jsxs(n,{variant:"outline",className:"w-full gap-2",onClick:Ae,disabled:Pe,children:[Pe?s.jsx(c,{className:"h-4 w-4 animate-spin"}):s.jsx(R,{className:"h-4 w-4"}),"Manage Subscription"]}),s.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Update payment method, cancel, or view invoices"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/10",children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Premium Benefits"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• Unlimited HD downloads"}),s.jsx("li",{children:"• No watermarks on exports"}),s.jsx("li",{children:"• Personal vision gallery"}),s.jsx("li",{children:"• Two-factor authentication"}),s.jsx("li",{children:"• Early access to new features"})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-3xl font-bold",children:"$7"}),s.jsx("span",{className:"text-muted-foreground",children:"/month"})]}),s.jsxs(n,{className:"w-full btn-luxury gap-2",onClick:Ae,disabled:Pe,children:[Pe?s.jsx(c,{className:"h-4 w-4 animate-spin"}):s.jsx(N,{className:"h-4 w-4"}),"Upgrade to Premium"]}),s.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Cancel anytime. Secure payment via Stripe."})]})]})]})})]})]})}),s.jsx(E,{})]})};export{ve as default};
