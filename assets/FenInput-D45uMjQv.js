const n='import React, { useState, useCallback } from \'react\';\nimport { Button } from \'@/components/ui/button\';\nimport { Input } from \'@/components/ui/input\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { \n  Grid3X3, CheckCircle, XCircle, Sparkles, Loader2, \n  Copy, Puzzle, Crown, Info\n} from \'lucide-react\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { toast } from \'sonner\';\nimport { \n  validateFen, \n  EXAMPLE_FENS, \n  STARTING_FEN,\n  FenValidationResult,\n  getPositionDescription,\n} from \'@/lib/chess/fenUtils\';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \'@/components/ui/tooltip\';\n\ninterface FenInputProps {\n  onFenSubmit: (fen: string, title?: string) => void;\n}\n\nconst FenInput: React.FC<FenInputProps> = ({ onFenSubmit }) => {\n  const [fen, setFen] = useState(\'\');\n  const [validation, setValidation] = useState<FenValidationResult | null>(null);\n  const [isValidating, setIsValidating] = useState(false);\n  const [selectedExample, setSelectedExample] = useState<string | null>(null);\n\n  const handleValidate = useCallback(() => {\n    if (!fen.trim()) {\n      toast.error(\'No FEN to validate\', {\n        description: \'Please enter a FEN string first.\',\n      });\n      return;\n    }\n\n    setIsValidating(true);\n    \n    setTimeout(() => {\n      const result = validateFen(fen.trim());\n      setValidation(result);\n      setIsValidating(false);\n\n      if (result.isValid) {\n        toast.success(\'Valid FEN!\', {\n          description: `${result.pieceCount} pieces, ${result.sideToMove === \'w\' ? \'White\' : \'Black\'} to move`,\n        });\n      } else {\n        toast.error(\'Invalid FEN\', {\n          description: result.error,\n        });\n      }\n    }, 100);\n  }, [fen]);\n\n  const handleSubmit = useCallback(() => {\n    const fenToSubmit = fen.trim() || STARTING_FEN;\n    const result = validateFen(fenToSubmit);\n    \n    if (!result.isValid) {\n      toast.error(\'Invalid FEN\', {\n        description: result.error || \'Please enter a valid FEN string.\',\n      });\n      return;\n    }\n\n    // Find if this matches an example\n    const matchedExample = EXAMPLE_FENS.find(ex => ex.fen === fenToSubmit);\n    const title = matchedExample?.name || getPositionDescription(fenToSubmit);\n    \n    onFenSubmit(fenToSubmit, title);\n  }, [fen, onFenSubmit]);\n\n  const handleLoadExample = useCallback((example: typeof EXAMPLE_FENS[0]) => {\n    setFen(example.fen);\n    setSelectedExample(example.name);\n    setValidation(null);\n    toast.success(`Loaded: ${example.name}`);\n  }, []);\n\n  const handleCopyFen = useCallback(() => {\n    if (fen) {\n      navigator.clipboard.writeText(fen);\n      toast.success(\'FEN copied to clipboard\');\n    }\n  }, [fen]);\n\n  return (\n    <div className="space-y-5">\n      {/* Header */}\n      <div className="flex items-center justify-between">\n        <div className="flex items-center gap-2">\n          <div className="p-2 rounded-lg bg-primary/10 border border-primary/20">\n            <Grid3X3 className="h-5 w-5 text-primary" />\n          </div>\n          <div>\n            <h3 className="font-display text-base font-semibold">Position (FEN)</h3>\n            <p className="text-xs text-muted-foreground">\n              Load a specific board position\n            </p>\n          </div>\n        </div>\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <Button variant="ghost" size="icon" className="h-8 w-8">\n                <Info className="h-4 w-4 text-muted-foreground" />\n              </Button>\n            </TooltipTrigger>\n            <TooltipContent side="left" className="max-w-[280px]">\n              <p className="text-sm font-medium mb-1">What is FEN?</p>\n              <p className="text-xs text-muted-foreground">\n                Forsyth-Edwards Notation describes a single chess position. \n                Use it to visualize specific positions, puzzles, or endgame studies.\n              </p>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      </div>\n\n      {/* Example Positions */}\n      <div className="space-y-2">\n        <p className="text-xs text-muted-foreground font-medium flex items-center gap-1.5">\n          <Puzzle className="h-3.5 w-3.5" />\n          Example Positions\n        </p>\n        <div className="grid grid-cols-2 sm:grid-cols-4 gap-2">\n          {EXAMPLE_FENS.slice(0, 8).map((example) => (\n            <button\n              key={example.name}\n              onClick={() => handleLoadExample(example)}\n              className={`group p-2.5 text-left rounded-lg border transition-all hover:scale-[1.02] ${\n                selectedExample === example.name\n                  ? \'border-primary bg-primary/5 ring-1 ring-primary/30\'\n                  : \'border-border/50 bg-card/50 hover:border-primary/30\'\n              }`}\n            >\n              <p className="text-xs font-medium line-clamp-1 group-hover:text-primary transition-colors">\n                {example.name}\n              </p>\n              <p className="text-[10px] text-muted-foreground mt-0.5 line-clamp-2">\n                {example.description}\n              </p>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* FEN Input */}\n      <div className="space-y-3">\n        <div className="relative">\n          <Input\n            placeholder="Enter FEN string... e.g., rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"\n            value={fen}\n            onChange={(e) => {\n              setFen(e.target.value);\n              setValidation(null);\n              setSelectedExample(null);\n            }}\n            className="font-mono text-xs pr-10 bg-background/50 border-border/50 focus:border-primary/50"\n          />\n          {fen && (\n            <Button\n              variant="ghost"\n              size="icon"\n              className="absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7"\n              onClick={handleCopyFen}\n            >\n              <Copy className="h-3.5 w-3.5 text-muted-foreground" />\n            </Button>\n          )}\n        </div>\n\n        {/* Validation Status */}\n        <AnimatePresence>\n          {validation && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \'auto\' }}\n              exit={{ opacity: 0, height: 0 }}\n              className={`p-3 rounded-lg flex items-start gap-2 ${\n                validation.isValid\n                  ? \'bg-green-500/10 border border-green-500/30\'\n                  : \'bg-destructive/10 border border-destructive/30\'\n              }`}\n            >\n              {validation.isValid ? (\n                <CheckCircle className="h-4 w-4 text-green-500 flex-shrink-0 mt-0.5" />\n              ) : (\n                <XCircle className="h-4 w-4 text-destructive flex-shrink-0 mt-0.5" />\n              )}\n              <div className="flex-1">\n                <p className={`text-sm font-medium ${validation.isValid ? \'text-green-500\' : \'text-destructive\'}`}>\n                  {validation.isValid ? \'Valid FEN\' : \'Invalid FEN\'}\n                </p>\n                {validation.isValid ? (\n                  <div className="flex flex-wrap gap-2 mt-1.5">\n                    <Badge variant="secondary" className="text-xs">\n                      {validation.pieceCount} pieces\n                    </Badge>\n                    <Badge variant="secondary" className="text-xs">\n                      {validation.sideToMove === \'w\' ? \'White\' : \'Black\'} to move\n                    </Badge>\n                    <Badge variant="secondary" className="text-xs">\n                      Move {validation.fullMoveNumber}\n                    </Badge>\n                  </div>\n                ) : (\n                  <p className="text-xs text-muted-foreground mt-1">{validation.error}</p>\n                )}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Selected Example Info */}\n        {selectedExample && !validation && (\n          <div className="p-3 rounded-lg bg-primary/5 border border-primary/20">\n            <p className="text-sm font-display font-semibold">{selectedExample}</p>\n            <p className="text-xs text-muted-foreground mt-1 font-serif">\n              {EXAMPLE_FENS.find(e => e.name === selectedExample)?.description}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Action Buttons */}\n      <div className="flex gap-3">\n        <Button\n          onClick={handleValidate}\n          disabled={!fen.trim() || isValidating}\n          variant="outline"\n          className="gap-2 flex-1"\n          size="lg"\n        >\n          {isValidating ? (\n            <Loader2 className="h-4 w-4 animate-spin" />\n          ) : (\n            <CheckCircle className="h-4 w-4" />\n          )}\n          Validate\n        </Button>\n        <Button\n          onClick={handleSubmit}\n          disabled={!fen.trim()}\n          className="gap-2 flex-[2] btn-luxury py-6 text-base font-medium"\n          size="lg"\n        >\n          <Sparkles className="h-5 w-5" />\n          Visualize Position\n        </Button>\n      </div>\n\n      {/* Hint */}\n      <p className="text-[10px] text-muted-foreground text-center">\n        Tip: Paste a FEN from Chess.com, Lichess, or any chess software\n      </p>\n    </div>\n  );\n};\n\nexport default FenInput;\n';export{n as default};
