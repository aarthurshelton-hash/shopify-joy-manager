const n='/**\n * SignatureComparison - Side-by-side temporal signature diff\n * Highlights differences between two TemporalSignature objects\n */\n\nimport { motion } from "framer-motion";\nimport { cn } from "@/lib/utils";\nimport { ArrowRight, ArrowUp, ArrowDown, Minus, AlertCircle } from "lucide-react";\nimport type { TemporalSignature, QuadrantProfile, TemporalFlow } from "@/lib/pensent-core/types";\nimport { QuadrantRadar } from "./QuadrantRadar";\nimport { TemporalFlowChart } from "./TemporalFlowChart";\nimport { ArchetypeBadge } from "./ArchetypeBadge";\n\nexport interface SignatureComparisonProps {\n  /** First signature (left side) */\n  signatureA: TemporalSignature;\n  /** Second signature (right side) */\n  signatureB: TemporalSignature;\n  /** Labels for each signature */\n  labels?: { a: string; b: string };\n  /** Show detailed breakdown */\n  showDetails?: boolean;\n  /** Enable animations */\n  animated?: boolean;\n  /** Custom class name */\n  className?: string;\n}\n\ninterface DiffResult {\n  key: string;\n  valueA: string | number;\n  valueB: string | number;\n  difference: number | null;\n  direction: \'up\' | \'down\' | \'same\' | \'changed\';\n  significant: boolean;\n}\n\n/**\n * Calculate difference between two values\n */\nconst calculateDiff = (\n  a: number | string, \n  b: number | string\n): { difference: number | null; direction: \'up\' | \'down\' | \'same\' | \'changed\' } => {\n  if (typeof a === \'number\' && typeof b === \'number\') {\n    const diff = b - a;\n    return {\n      difference: Math.round(diff * 100) / 100,\n      direction: diff > 0.01 ? \'up\' : diff < -0.01 ? \'down\' : \'same\'\n    };\n  }\n  return {\n    difference: null,\n    direction: a !== b ? \'changed\' : \'same\'\n  };\n};\n\n/**\n * Compare two quadrant profiles\n */\nconst compareQuadrants = (a: QuadrantProfile, b: QuadrantProfile): DiffResult[] => {\n  const keys: (\'q1\' | \'q2\' | \'q3\' | \'q4\')[] = [\'q1\', \'q2\', \'q3\', \'q4\'];\n  return keys.map(key => {\n    const valA = a[key];\n    const valB = b[key];\n    const { difference, direction } = calculateDiff(valA, valB);\n    return {\n      key: key.toUpperCase(),\n      valueA: Math.round(valA * 100),\n      valueB: Math.round(valB * 100),\n      difference: difference ? Math.round(difference * 100) : 0,\n      direction,\n      significant: Math.abs(difference || 0) > 0.1\n    };\n  });\n};\n\n/**\n * Compare two temporal flows\n */\nconst compareFlows = (a: TemporalFlow, b: TemporalFlow): DiffResult[] => {\n  return [\n    {\n      key: \'Opening\',\n      valueA: Math.round(a.opening * 100),\n      valueB: Math.round(b.opening * 100),\n      ...calculateDiff(a.opening, b.opening),\n      significant: Math.abs(b.opening - a.opening) > 0.1\n    },\n    {\n      key: \'Middle\',\n      valueA: Math.round(a.middle * 100),\n      valueB: Math.round(b.middle * 100),\n      ...calculateDiff(a.middle, b.middle),\n      significant: Math.abs(b.middle - a.middle) > 0.1\n    },\n    {\n      key: \'Ending\',\n      valueA: Math.round(a.ending * 100),\n      valueB: Math.round(b.ending * 100),\n      ...calculateDiff(a.ending, b.ending),\n      significant: Math.abs(b.ending - a.ending) > 0.1\n    },\n    {\n      key: \'Momentum\',\n      valueA: Math.round(a.momentum * 100),\n      valueB: Math.round(b.momentum * 100),\n      ...calculateDiff(a.momentum, b.momentum),\n      significant: Math.abs(b.momentum - a.momentum) > 0.2\n    },\n    {\n      key: \'Trend\',\n      valueA: a.trend,\n      valueB: b.trend,\n      difference: null,\n      direction: a.trend !== b.trend ? \'changed\' : \'same\',\n      significant: a.trend !== b.trend\n    }\n  ];\n};\n\nconst DirectionIcon = ({ direction }: { direction: \'up\' | \'down\' | \'same\' | \'changed\' }) => {\n  switch (direction) {\n    case \'up\':\n      return <ArrowUp className="w-4 h-4 text-green-400" />;\n    case \'down\':\n      return <ArrowDown className="w-4 h-4 text-red-400" />;\n    case \'changed\':\n      return <AlertCircle className="w-4 h-4 text-amber-400" />;\n    default:\n      return <Minus className="w-4 h-4 text-muted-foreground" />;\n  }\n};\n\nconst DiffRow = ({ diff, animated, index }: { diff: DiffResult; animated: boolean; index: number }) => (\n  <motion.div\n    className={cn(\n      "grid grid-cols-4 gap-2 py-2 px-3 rounded-md text-sm",\n      diff.significant ? "bg-amber-500/10 border border-amber-500/20" : "bg-muted/30"\n    )}\n    initial={animated ? { opacity: 0, x: -10 } : {}}\n    animate={{ opacity: 1, x: 0 }}\n    transition={{ delay: index * 0.05 }}\n  >\n    <span className="font-medium text-foreground">{diff.key}</span>\n    <span className="text-muted-foreground text-center">\n      {typeof diff.valueA === \'number\' ? `${diff.valueA}%` : diff.valueA}\n    </span>\n    <span className="flex items-center justify-center gap-1">\n      <DirectionIcon direction={diff.direction} />\n      {diff.difference !== null && diff.difference !== 0 && (\n        <span className={cn(\n          "text-xs",\n          diff.direction === \'up\' ? "text-green-400" : \n          diff.direction === \'down\' ? "text-red-400" : \n          "text-muted-foreground"\n        )}>\n          {diff.difference > 0 ? \'+\' : \'\'}{diff.difference}%\n        </span>\n      )}\n    </span>\n    <span className="text-foreground text-center font-medium">\n      {typeof diff.valueB === \'number\' ? `${diff.valueB}%` : diff.valueB}\n    </span>\n  </motion.div>\n);\n\nexport const SignatureComparison = ({\n  signatureA,\n  signatureB,\n  labels = { a: \'Signature A\', b: \'Signature B\' },\n  showDetails = true,\n  animated = true,\n  className\n}: SignatureComparisonProps) => {\n  const quadrantDiffs = compareQuadrants(signatureA.quadrantProfile, signatureB.quadrantProfile);\n  const flowDiffs = compareFlows(signatureA.temporalFlow, signatureB.temporalFlow);\n  \n  const intensityDiff = calculateDiff(signatureA.intensity, signatureB.intensity);\n  const archetypeChanged = signatureA.archetype !== signatureB.archetype;\n  const fingerprintChanged = signatureA.fingerprint !== signatureB.fingerprint;\n\n  return (\n    <div className={cn("space-y-6", className)}>\n      {/* Header with fingerprints */}\n      <motion.div \n        className="flex items-center justify-between gap-4"\n        initial={animated ? { opacity: 0, y: -10 } : {}}\n        animate={{ opacity: 1, y: 0 }}\n      >\n        <div className="flex-1 text-center">\n          <span className="text-sm text-muted-foreground">{labels.a}</span>\n          <p className="font-mono text-xs text-foreground/80 truncate mt-1">\n            {signatureA.fingerprint.slice(0, 16)}...\n          </p>\n        </div>\n        <ArrowRight className="w-5 h-5 text-muted-foreground flex-shrink-0" />\n        <div className="flex-1 text-center">\n          <span className="text-sm text-muted-foreground">{labels.b}</span>\n          <p className="font-mono text-xs text-foreground/80 truncate mt-1">\n            {signatureB.fingerprint.slice(0, 16)}...\n          </p>\n        </div>\n      </motion.div>\n\n      {/* Fingerprint change indicator */}\n      {fingerprintChanged && (\n        <motion.div\n          className="flex items-center justify-center gap-2 py-2 px-4 bg-amber-500/10 border border-amber-500/30 rounded-md"\n          initial={animated ? { opacity: 0, scale: 0.95 } : {}}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ delay: 0.2 }}\n        >\n          <AlertCircle className="w-4 h-4 text-amber-400" />\n          <span className="text-sm text-amber-400">Fingerprints differ</span>\n        </motion.div>\n      )}\n\n      {/* Archetype comparison */}\n      <motion.div \n        className={cn(\n          "flex items-center justify-between p-4 rounded-lg",\n          archetypeChanged ? "bg-primary/10 border border-primary/30" : "bg-muted/30"\n        )}\n        initial={animated ? { opacity: 0, y: 10 } : {}}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.1 }}\n      >\n        <div className="flex-1">\n          <ArchetypeBadge archetype={signatureA.archetype} size="md" showIcon />\n        </div>\n        <ArrowRight className={cn(\n          "w-5 h-5 mx-4",\n          archetypeChanged ? "text-primary" : "text-muted-foreground"\n        )} />\n        <div className="flex-1 flex justify-end">\n          <ArchetypeBadge archetype={signatureB.archetype} size="md" showIcon />\n        </div>\n      </motion.div>\n\n      {/* Intensity comparison */}\n      <motion.div\n        className="grid grid-cols-3 gap-4 p-4 bg-muted/20 rounded-lg"\n        initial={animated ? { opacity: 0 } : {}}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.2 }}\n      >\n        <div className="text-center">\n          <span className="text-xs text-muted-foreground">Intensity A</span>\n          <p className="text-xl font-bold text-foreground">\n            {Math.round(signatureA.intensity * 100)}%\n          </p>\n        </div>\n        <div className="text-center flex flex-col items-center justify-center">\n          <DirectionIcon direction={intensityDiff.direction} />\n          {intensityDiff.difference !== null && (\n            <span className={cn(\n              "text-sm font-medium",\n              intensityDiff.direction === \'up\' ? "text-green-400" :\n              intensityDiff.direction === \'down\' ? "text-red-400" :\n              "text-muted-foreground"\n            )}>\n              {intensityDiff.difference > 0 ? \'+\' : \'\'}{Math.round(intensityDiff.difference * 100)}%\n            </span>\n          )}\n        </div>\n        <div className="text-center">\n          <span className="text-xs text-muted-foreground">Intensity B</span>\n          <p className="text-xl font-bold text-foreground">\n            {Math.round(signatureB.intensity * 100)}%\n          </p>\n        </div>\n      </motion.div>\n\n      {/* Visual comparison - Quadrants */}\n      <motion.div\n        className="grid grid-cols-2 gap-8"\n        initial={animated ? { opacity: 0 } : {}}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.3 }}\n      >\n        <div className="flex flex-col items-center">\n          <span className="text-xs text-muted-foreground mb-2">{labels.a}</span>\n          <QuadrantRadar \n            data={signatureA.quadrantProfile} \n            size={140}\n            showLabels\n            showValues={false}\n            animated={animated}\n          />\n        </div>\n        <div className="flex flex-col items-center">\n          <span className="text-xs text-muted-foreground mb-2">{labels.b}</span>\n          <QuadrantRadar \n            data={signatureB.quadrantProfile} \n            size={140}\n            showLabels\n            showValues={false}\n            animated={animated}\n          />\n        </div>\n      </motion.div>\n\n      {/* Visual comparison - Temporal Flow */}\n      <motion.div\n        className="grid grid-cols-2 gap-8"\n        initial={animated ? { opacity: 0 } : {}}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.4 }}\n      >\n        <div className="flex flex-col items-center">\n          <TemporalFlowChart\n            data={{\n              opening: signatureA.temporalFlow.opening,\n              midgame: signatureA.temporalFlow.middle,\n              endgame: signatureA.temporalFlow.ending\n            }}\n            height={80}\n            showLabels={false}\n            animated={animated}\n          />\n        </div>\n        <div className="flex flex-col items-center">\n          <TemporalFlowChart\n            data={{\n              opening: signatureB.temporalFlow.opening,\n              midgame: signatureB.temporalFlow.middle,\n              endgame: signatureB.temporalFlow.ending\n            }}\n            height={80}\n            showLabels={false}\n            animated={animated}\n          />\n        </div>\n      </motion.div>\n\n      {/* Detailed differences */}\n      {showDetails && (\n        <div className="space-y-4">\n          {/* Quadrant differences */}\n          <div>\n            <h4 className="text-sm font-medium text-foreground mb-2">Quadrant Profile</h4>\n            <div className="space-y-1">\n              <div className="grid grid-cols-4 gap-2 px-3 text-xs text-muted-foreground">\n                <span>Metric</span>\n                <span className="text-center">{labels.a}</span>\n                <span className="text-center">Change</span>\n                <span className="text-center">{labels.b}</span>\n              </div>\n              {quadrantDiffs.map((diff, i) => (\n                <DiffRow key={diff.key} diff={diff} animated={animated} index={i} />\n              ))}\n            </div>\n          </div>\n\n          {/* Temporal flow differences */}\n          <div>\n            <h4 className="text-sm font-medium text-foreground mb-2">Temporal Flow</h4>\n            <div className="space-y-1">\n              <div className="grid grid-cols-4 gap-2 px-3 text-xs text-muted-foreground">\n                <span>Phase</span>\n                <span className="text-center">{labels.a}</span>\n                <span className="text-center">Change</span>\n                <span className="text-center">{labels.b}</span>\n              </div>\n              {flowDiffs.map((diff, i) => (\n                <DiffRow key={diff.key} diff={diff} animated={animated} index={i + quadrantDiffs.length} />\n              ))}\n            </div>\n          </div>\n\n          {/* Critical moments summary */}\n          <motion.div\n            className="p-4 bg-muted/20 rounded-lg"\n            initial={animated ? { opacity: 0 } : {}}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.5 }}\n          >\n            <h4 className="text-sm font-medium text-foreground mb-2">Critical Moments</h4>\n            <div className="grid grid-cols-2 gap-4 text-sm">\n              <div>\n                <span className="text-muted-foreground">{labels.a}: </span>\n                <span className="text-foreground font-medium">\n                  {signatureA.criticalMoments.length} moments\n                </span>\n              </div>\n              <div>\n                <span className="text-muted-foreground">{labels.b}: </span>\n                <span className="text-foreground font-medium">\n                  {signatureB.criticalMoments.length} moments\n                </span>\n              </div>\n            </div>\n          </motion.div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SignatureComparison;\n';export{n as default};
