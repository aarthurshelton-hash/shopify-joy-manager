import{s as t,ca as n,dG as r,dH as e}from"./index-C3fhkH_G.js";import{v as o,a as i,b as a}from"./visualizationSchemas-Dn-ot8EH.js";import"./flagContent-C9nSnQ-h.js";!function(){const t=w,n=s();for(;;)try{if(301747===-parseInt(t(223))/1+-parseInt(t(196))/2*(parseInt(t(256))/3)+-parseInt(t(274))/4+-parseInt(t(208))/5*(-parseInt(t(214))/6)+parseInt(t(184))/7*(-parseInt(t(303))/8)+-parseInt(t(234))/9+-parseInt(t(224))/10*(-parseInt(t(180))/11))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const c=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[w(290)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}()(void 0,function(){const t=w,n={};n[t(264)]="(((.+)+)+)+$";const r=n;return c[t(212)]().search(r.vfQkG).toString()[t(280)+"r"](c)[t(333)](r[t(264)])});c();const u=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[w(290)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}();function s(){const t=["zxHPC3rPBMDjza","DxbSB2fKigLTyq","ndiZmJe1ufjywero","mtuWEw9ZBLvq","C3vHBgL6yxrPBW","Aw9Uu3rHDgu","DhjHy2u","C3vJy2vZCW","Dhj5ignOyw5NAq","DMLZDwfSAxPHDa","r3PnDhO","DxnLCL9Pza","quvHquS","nde5ndm1mvb2B3PIvW","ywXS","q0LXuhi","DhrLswq","CYbVD25LzcbIEq","vuLMBNm","CM4GDgHPCYiPka","C2f2zsb2Axn1yq","yxLoyw1L","CgPjvMi","zxzLBNq","BgfYihzPC3vHBa","CuDZy2q","yMXHy2S","zMLUza","BM93","wK9ZChC","yM9HCMq","BwvFzgf0yq","yxjPDhK","suHNAwO","ELzfzuW","mtvpDNvbrLm","C2vSzwn0","CM91BMq","ywXPEMf0Aw9UCW","CML0Eq","sfzKEei","y3vZDg9T","C2XPy2u","DMzrA0C","CMvZDwX0","Awrtt20","CMvTB3zL","B3DUzxjeAxnWBa","zw5LC3m","yKX5q1O","C2f2zwrFDMLZDq","rM1Sq3e","CgLLy2vuExbL","ntaWnZmYtMnVCvnX","B250zw50","zgvSzxrL","C3rVCMfNzq","zgf0zq","y29UC29Szq","y29UC3rYDwn0BW","CMvHC29U","vMLZDwfSAxPHDa","ELP6D0u","Aw9Uig5VDcbMBW","sw52ywXPzcb0Aq","Aw5Zzxj0","zunHCMq","A0XXBvm","ihzLCNKGC2LTAq","yxbWBhK","rxjYB3iGAw4Gza","CMv0DxjUicHMDq","AwnHDguGzxHPCW","ChjVzMLSzxm","vu9xCeO","Bg9YCW","AxnjBNrYAw5ZAq","AgvJAZO","zgf0yq","zgLZCgXHEv9Uyq","ugPiz0u","AxneDxbSAwnHDa","nZK5mZG0A1Lbwg9Z","zMLUzeLUzgv4","rMfPBgvKihrVia","zMv0y2GGDMLZDq","Dg9mB3DLCKnHCW","AwqSihvZzxjFAq","AM9PBG","ww91igHHDMuGyq","z2fTzurHDge","zxr0zvnPBwLSyq","C2LUz2XL","y0DHBwu","zxHPC3rPBMDdBW","y3jLyxrLzf9HDa","Bwf0y2HLzfbHBa","y1HpEwq","y29SB3jtAw1PBa","E30Uy29UC3rYDq","y3vZDg9Tq29SBW","CMvWBgfJzq","DxbSAwnHDguGyW","zgvSzxrLihzPCW","yxnJzw5KAw5N","EKXyzg4","vgHPCYbPCYa","suXJy3O","z01kEui","ugD6sLy","zcWGCgDUlcbNyq","yw5VDgHLCIbJBW","C2vHCMnO","rxjYB3iGy2HLyW","Bw92zxm","uwPiuxm","ChjVDg90ExbL","AxnuB29tAw1PBa","Bwf0y2HLzeDHBq","DgXL","D2HPDgu","zxHPC3rPBMDwAq","Dw5K","Aw9UCW","BuXbs1y","B3DUzwrcEun1CG","Aw1Hz2uVCg5N","DgfIBgu","vfP5s2i","BKPJueu","zxr0zuLK","Bw9KzxjU","D2fYBG","A2LUzYbKDxbSAq","zKz4DKW","Aw1Hz2vFCgf0Aa","y2XQsNO","CgLLy2vdB2XVCG","y1bHBgv0Dgu","q1zws0C","DxbSB2fK","zxjYB3i","AxPHDgLVBIaTia","BgLUA2vKugfSzq","mtmZmty3mwrmt0LRBq","vgHPCYb2Axn1yq","Cgf0Ag5HBwu","C3rYAw5NAwz5","n3LwB2DZyq","z2fTzv9KyxrH","CMvUDfvZzxi","BgL6yxrPB24GAq","qvDZz2W","twrguxm","CM9WCMLHDguGyW","Dg90ywXnB3zLCW","C29YDa","uxPRwKW","jsbZAw1PBgfYia","yMLUza","mtC4nZKWqvL5vNDf","BwvZC2fNzq","DwfSAxPHDgLVBG","Bg9JA2vKugLLyW","Bg9N","DhjPBq","ywLUCYbPBMfWCa","Dca4ignVBg9YCW","y2f0zxm6","zNjVBq","vgL0BguGy29UDa","CgDU","nursCgfYva","BKLK","CgfSzxr0zuLK","ueDsu1qXmty","Dg9tDhjPBMC","BMCGyxqGBgvHCW","mJGZmdaYALfguNb1","igzVCIb1BMLXDq","Bg9JywXLq29TCa","r1fLruK","y3rVCIGICMv0Dq","BgXLy3rVCG","tIbKyxrH"];return(s=function(){return t})()}function f(t,n,r){const e=w,o={};o[e(266)]="modern";const i=o;return(t||n[e(207)]||"")[e(201)]()[e(322)](/\s+/g," ")+"::"+(r?JSON[e(183)]({palette:r[e(210)]||i[e(266)],darkMode:r.darkMode||!1,currentMove:r.currentMove===1/0?e(235):r.currentMove,lockedPieces:(r[e(199)+"es"]||[])[e(192)]((t,n)=>(t[e(173)]+"-"+t.pieceType)[e(216)+"are"](n[e(173)]+"-"+n[e(273)]))}):"{}")}function w(t,n){t-=150;const r=s();let e=r[t];if(void 0===w.YgLSbk){var o=function(t){let n="",r="",e=n+o;for(let o,i,a=0,c=0;i=t.charAt(c++);~i&&(o=a%4?64*o+i:i,a++%4)?n+=e.charCodeAt(c+10)-10!=0?String.fromCharCode(255&o>>(-2*a&6)):a:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let o=0,i=n.length;o<i;o++)r+="%"+("00"+n.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(r)};w.aQMfne=o,w.IyLKJD={},w.YgLSbk=!0}const i=t+r[0],a=w.IyLKJD[i];if(a)e=a;else{const t=function(t){this.BJRmia=t,this.QiIWOc=[1,0,0],this.VwBYDI=function(){return"newState"},this.QdATEl="\\w+ *\\(\\) *{\\w+ *",this.cTMUAv="['|\"].+['|\"];? *}"};t.prototype.pUOqzl=function(){const t=new RegExp(this.QdATEl+this.cTMUAv).test(this.VwBYDI.toString())?--this.QiIWOc[1]:--this.QiIWOc[0];return this.oTpLjv(t)},t.prototype.oTpLjv=function(t){return Boolean(~t)?this.evaXRY(this.BJRmia):t},t.prototype.evaXRY=function(t){for(let n=0,r=this.QiIWOc.length;n<r;n++)this.QiIWOc.push(Math.round(Math.random())),r=this.QiIWOc.length;return t(this.QiIWOc[0])},new t(w).pUOqzl(),e=w.aQMfne(e),w.IyLKJD[i]=e}return e}async function l(o,i,a,c){const u=w,s={ZOspw:u(271)+u(259),CIqPr:u(308)+u(331)+u(252),kLqmS:function(t,n,r,e){return t(n,r,e)},AMBWD:function(t,n){return t===n},nJcPE:function(t,n){return t===n},zVEeL:"Another co"+u(219),ILccz:"Exact dupl"+u(293)+"ts",gMJyB:u(167),CVVKG:function(t,n){return t===n},ZBdVx:u(262),bLyCZ:function(t,n){return t!==n},IHgij:function(t,n,r,e,o,i){return t(n,r,e,o,i)}};try{const w=f(i,a,c),{data:l,error:y}=await t.from(s[u(250)])[u(257)](s[u(236)]);if(y){const t={};return t[u(302)+"e"]=!1,t[u(153)+"ar"]=!1,t}for(const n of l||[]){const r=n[u(185)],e=s[u(288)](f,n.pgn||void 0,r,r[u(230)+u(226)]);if(s.AMBWD(w,e)){const r=s[u(165)](n[u(232)],o);let e;if(!r){const{data:r}=await t.from(u(294))[u(257)](u(300)+"me").eq(u(232),n[u(232)])[u(313)]();e=(null==r?void 0:r[u(300)+"me"])||s[u(255)]}const i={isDuplicate:!0};return i[u(153)+"ar"]=!0,i[u(221)]=n.id,i[u(161)+u(186)]=r,i[u(268)+u(242)]=e,i[u(319)+u(253)]=100,i[u(281)]=s[u(328)],i}}const g=(null==c?void 0:c[u(210)])||s[u(329)];let C;if(null==c?void 0:c[u(321)+"rs"])C=c[u(321)+"rs"];else if(s[u(175)](g,s.ZBdVx)){const t=n[u(248)](t=>t.id===u(262));if(t)if(s[u(270)](u(170),u(170))){const t=_0xfca36e[u(248)](t=>t.id===u(262));if(t){const n={};n[u(156)]=t[u(156)],n.black=t[u(247)],_0xbf1780=n}}else{const n={};n[u(156)]=t[u(156)],n[u(247)]=t.black,C=n}}const z=await s[u(254)](r,o,i,a,g,C);if(z[u(153)+"ar"]){const t={isDuplicate:!1};return t[u(153)+"ar"]=!0,t[u(221)]=z[u(157)+u(225)+u(209)],t["ownedByCur"+u(186)]=z[u(161)+u(186)],t[u(268)+u(242)]=z[u(268)+"ayName"],t[u(319)+u(253)]=z[u(319)+u(253)],t[u(281)]=z[u(281)],t[u(315)+u(296)]=z[u(315)+"lors"],t[u(297)+u(174)]=z[u(297)+u(174)],t[u(297)+u(314)]=z[u(297)+u(314)],t["matchedGam"+u(287)]=z[u(154)+"eCard"],t[u(317)+u(166)]=z[u(317)+u(166)],t[u(317)+u(312)+u(260)]=z[u(317)+"etteSimila"+u(260)],t}let D;C&&(D=e(C)||void 0);const B={};return B[u(302)+"e"]=!1,B.isTooSimilar=!1,B[u(179)+u(237)]=D,B[u(319)+u(253)]=z[u(319)+u(253)],B[u(297)+u(174)]=z[u(297)+u(174)],B["isIntrinsi"+u(314)]=z[u(297)+u(314)],B[u(154)+u(287)]=z[u(154)+u(287)],B[u(317)+"etteId"]=z[u(317)+u(166)],B[u(317)+"etteSimila"+u(260)]=z[u(317)+u(312)+"rity"],B}catch(l){const t={isDuplicate:!1};return t[u(153)+"ar"]=!1,t}}async function y(n,r,e,c,u,s){const f=w,y={FXfAk:function(t,n){return t(n)},xjPce:function(t,n,r,e,o){return t(n,r,e,o)},HVdxB:f(310)+f(289)+f(245)+f(178)+f(229)+f(213)+f(203)+f(215)+f(269),TZyKb:f(332)+"llector",UIfns:f(230)+f(159),cljJz:f(162),PjHgE:f(271)+f(259)};try{const w=o(r);if(!w[f(228)])return{data:null,error:new Error(w[f(177)]||f(285)+f(155))};const g=await i(r);if(!g.safe)return{data:null,error:new Error(g[f(281)]||f(206)+f(202)+f(190)+f(275))};const C=y.FXfAk(a,u);if(!C[f(228)])return{data:null,error:new Error(C.error||"Invalid PG"+f(220))};const z=await y.xjPce(l,n,u,e[f(311)],s);if(z[f(302)+"e"]){const t=z[f(161)+f(186)]?f(181)+f(187)+"s already in your gallery":f(181)+f(187)+f(238)+" "+(z[f(268)+f(242)]||f(332)+f(219));return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:z[f(161)+f(186)],ownerDisplayName:z["ownerDispl"+f(242)],colorSimilarity:100}}if(z[f(153)+"ar"]){const t=z[f(161)+f(186)]?y[f(261)]:f(327)+Math[f(258)](z[f(319)+f(253)]||30)+(f(194)+"to a vision by ")+(z[f(268)+f(242)]||y[f(164)]);return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:z[f(161)+"rentUser"],ownerDisplayName:z[f(268)+"ayName"],colorSimilarity:z[f(319)+f(253)],reason:z[f(281)]}}const D={...s};D[f(179)+f(237)]=z[f(179)+"tteId"];const B=D,L=n+"/"+Date[f(249)]()+"-"+r[f(322)](/[^a-z0-9]/gi,"-")[f(307)+"e"]()+".png",{error:x}=await t[f(277)][f(205)](y[f(239)])[f(176)](L,c,{contentType:y[f(172)],upsert:!1});if(x)throw new Error(f(305)+f(222)+"ge: "+x[f(197)]);const{data:v}=t[f(277)][f(205)](f(230)+f(159)).getPublicUrl(L),d={};d.white=e.gameData[f(156)],d[f(247)]=e[f(311)][f(247)],d[f(244)]=e[f(311)][f(244)],d[f(278)]=e.gameData[f(278)],d.result=e[f(311)][f(265)],d.pgn=e[f(311)][f(207)],d[f(150)]=e[f(311)][f(150)],d[f(251)]=e.board,d[f(191)]=e.totalMoves,d[f(230)+f(226)]=B;const A=d,h={};h[f(232)]=n,h.title=r,h.pgn=u||null,h.game_data=A,h[f(171)]=v.publicUrl;const{data:m,error:q}=await t[f(205)](y[f(301)])[f(286)](h)[f(257)]().single();if(q)throw await t[f(277)].from(f(230)+f(159)).remove([L]),new Error(f(305)+f(241)+"lization: "+q.message);const M={};return M.data=m,M.error=null,M}catch(g){const t={};return t[f(299)]=null,t[f(177)]=g,t}}async function g(n){const r=w,e={};e[r(189)]=function(t,n){return t!==n},e[r(243)]=r(193),e[r(330)]=r(271)+"alizations",e[r(283)]=r(232),e[r(151)]=r(316);const o=e;try{if(o.MdFQs(r(193),o.pjIVb))throw new _0x4dd93b("Failed to "+r(306)+r(259)+": "+_0x291189.message);{const e={};e[r(325)]=!1;const{data:i,error:a}=await t[r(205)](o[r(330)]).select("*").eq(o.zZzwE,n).order(o[r(151)],e);if(a)throw new Error("Failed to "+r(306)+r(259)+": "+a[r(197)]);const c={};return c[r(299)]=i||[],c[r(177)]=null,c}}catch(i){const t={};return t[r(299)]=[],t[r(177)]=i,t}}async function C(n,r){const e=w,o={};o[e(160)]=function(t,n){return t+n},o[e(318)]=function(t,n){return t!==n},o[e(188)]=e(231);const i=o;try{const o=new URL(r)[e(182)].split("/"),a=o[e(304)](t=>t==="visualizat"+e(159)),c=o[e(263)](i.mLAKV(a,1))[e(309)]("/");c&&await t[e(277)][e(205)](e(230)+e(159))[e(267)]([c]);const{error:u}=await t[e(205)](e(271)+"alizations")[e(276)]().eq("id",n);if(u)throw new Error(e(305)+e(324)+e(198)+": "+u[e(197)]);const s={};return s[e(177)]=null,s}catch(a){if(i[e(318)](i[e(188)],i[e(188)])){const t={isDuplicate:!1};return t[e(153)+"ar"]=!0,t[e(221)]=_0x48fec8[e(157)+e(225)+e(209)],t[e(161)+e(186)]=_0x3a05b3[e(161)+e(186)],t[e(268)+"ayName"]=_0x4e5d02[e(268)+e(242)],t[e(319)+e(253)]=_0x25a9a9[e(319)+"arity"],t[e(281)]=_0x5f4a8a[e(281)],t["existingCo"+e(296)]=_0xfdf843[e(315)+"lors"],t[e(297)+e(174)]=_0x32f81e[e(297)+"cPalette"],t[e(297)+"cGame"]=_0x37a4a2[e(297)+e(314)],t[e(154)+e(287)]=_0x37f784[e(154)+e(287)],t["matchedPal"+e(166)]=_0x6c3162[e(317)+e(166)],t[e(317)+e(312)+e(260)]=_0x531928[e(317)+e(312)+e(260)],t}{const t={};return t[e(177)]=a,t}}}u(void 0,function(){const t=w,n={zLXdn:function(t,n){return t(n)},AEaAK:function(t,n){return t+n},GQeEI:function(t,n){return t+n},bwlIE:t(292)+"nction() ",SwbXQ:t(320)+t(218)+t(240)+" )",FmlCq:function(t){return t()},uSIIr:t(168),oyJYq:t(177),rPHAE:function(t,n){return t<n},NMFrf:t(246)};let r;try{const e=n[t(326)](Function,n[t(233)](n[t(217)](n.bwlIE,n.SwbXQ),");"));r=n[t(272)](e)}catch(i){r=window}const e=r[t(279)]=r.console||{},o=[t(200),n.uSIIr,"info",n.oyJYq,"exception",t(163),t(227)];for(let a=0;n.rPHAE(a,o.length);a++){if("sAFFQ"===n.NMFrf)return{data:null,error:new _0x3d0723(_0x42529c[t(281)]||"Title cont"+t(202)+"ropriate c"+t(275))};{const n=u[t(280)+"r"][t(152)].bind(u),r=o[a],i=e[r]||n;n.__proto__=u[t(195)](u),n[t(212)]=i[t(212)].bind(i),e[r]=n}}})();export{l as checkDuplicateVisualization,C as deleteVisualization,g as getUserVisualizations,y as saveVisualization};
