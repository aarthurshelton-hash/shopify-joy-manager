import{d6 as e,d7 as t,cp as s,a as n,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as f,C as x,x as h,D as p,B as v,A as g,p as w,t as j,cN as y,bC as b,S as C,a6 as N,P as z,y as M,bG as D,T as B,aq as L,z as _,cU as q,aj as A,aT as S,ca as E,b as G,d8 as W}from"./index-Byyho7FJ.js";!function(){const e=O,t=I();for(;;)try{if(287412===-parseInt(e(629))/1+-parseInt(e(547))/2*(-parseInt(e(586))/3)+-parseInt(e(478))/4*(-parseInt(e(602))/5)+parseInt(e(552))/6*(parseInt(e(503))/7)+-parseInt(e(551))/8+parseInt(e(448))/9+parseInt(e(472))/10*(-parseInt(e(435))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const T=function(){const e=O,t={};t[e(575)]="RMWjb";const s=t;let n=!0;return function(t,r){const a=e,i={};i.nEyxT=s.WpXaY,i[a(477)]="zJzht";const o=i,c=n?function(){const e=a;if(r){if(o[e(417)]!==o.ouUYO){const e=r.apply(t,arguments);return r=null,e}{const t=_0x38f015[e(389)](_0x4abf82,arguments);return _0x1378e1=null,t}}}:function(){};return n=!1,c}}()(void 0,function(){const e=O,t={};t[e(576)]=e(395)+"+$";const s=t;return T[e(464)]()[e(558)](s.VUEeO)[e(464)]().constructor(T).search(s[e(576)])});T();const k=function(){const e=O,t={};t.QdSkO=e(486);const s=t;let n=!0;return function(t,r){const a=e,i={};i[a(603)]=s[a(614)];const o=i,c=n?function(){if("aFWnR"===o[a(603)])_0x31847c=_0x46ca65;else if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return n=!1,c}}();k(void 0,function(){const e=O,t={egLMo:function(e){return e()},otmgO:e(463),VRuCP:e(585),gdnka:e(436),wtSRx:e(400),sxmOQ:e(564),oCMdo:function(e,t){return e<t},emhUn:"GKiMq"};let s;try{const n=Function("return (fu"+e(559)+(e(525)+e(459)+e(570))+" ));");s=t.egLMo(n)}catch(a){s=window}const n=s.console=s.console||{},r=[e(493),t.otmgO,t[e(612)],t[e(386)],t[e(495)],t.sxmOQ,e(454)];for(let i=0;t.oCMdo(i,r[e(528)]);i++){if(e(418)===t.emhUn){const t=_0x1c234f[e(389)](_0x1f8caf,arguments);return _0x59e964=null,t}{const t=k[e(589)+"r"][e(583)][e(593)](k),s=r[i],a=n[s]||t;t.__proto__=k[e(593)](k),t[e(464)]=a[e(464)][e(593)](a),n[s]=t}}})();function I(){const e=["iIbMAwXSpsi","Bg9N","Bw92zxm","D3rtuNG","B25SB2fK","mc45nsK","Dgv4DejHC2vSAq","zgvMyxvSDa","ndaWideWChGGjW","yxPxuMi","yM9YzgvY","n1rjseD3Bq","ru4Guevou0vova","zM9UDhm","tePtseK","BerYrMy","iIb3Awr0Ad0I","swfvyu4","D1v1ufe","sfDbEvO","CNzPvKi","Dg9eyxrHvvjm","sg9Ar0W","zgfYAW","r1flELK","swvQyxO","q2LUEMvSjYWGjW","phjLy3qGEd0I","wwz1wLO","zxzLBNq","ywXS","u0jAt1O","ENnVtNy","E30Uy29UC3rYDq","C096rfe","icdIGkiGia","BgvUz3rO","ntaWideYChGGjW","uLD1u1K","BgLUzvDPzhrO","CxjzD2G","qKnyuK8","ExncCKG","y3jLyxrLt2jQzq","ywHSwNO","r2zkrem","vMfpB24","BgvMDa","wxnfBwi","se1uz24","pZ8/pY4/pY4/pW","tKzcvvK","zMLSBa","yw5VBNLTB3vZ","CgLLy2u","nevryxbJDG","Bg9HzcbtvKC","DLjoC2O","y3jLyxrLrwXLBq","mte3ntuYmg1cAePVvq","mZa4nJGWmK5LzgXwwG","vw5RBM93BG","yxjJ","B254rfy","qLvkAhO","qMXHy2S","C2vHCMnO","BMn0Aw9UkcKG","Aw1Hz2uVC3zNkW","BwzeruW","sePjvhO","mJaWmc9ZDMCIia","DgfIBgu","vgveuK8","i2u3ztvLna","BgLNAhq","zM9UDa","nJaWidi0ChGGjW","CM4GDgHPCYiPka","CgvUC2vUDc5JBW","ndaWideXChGGjW","s3vsDu0","Dg9vChbLCKnHCW","v3byyvK","vLvfzu8","CLvmDha","i2zHzMfMoq","yKHAEeq","BwvHC3vYzvrLEa","AxnmAwDODa","4PMuievoifbftLnf","ChjVDg90ExbL","AgvPz2H0","Aw5MBW","mZC4nZeXz3Lnt29s","y29T","iZC4nZe2yW","y29UC3rYDwn0BW","C2nHBgu","uxrjALa","ywXWAgfIzxrPyW","yMLUza","x19WCM90B19F","phn2zYb4BwXUCW","CMvZDg9Yzq","EhjhyvO","CMv0DxjUicHMDq","tNv0v1m","iIb2Awv3qM94pq","twnfsuK","ndu0mgvZz3jXDW","vurTBem","rMfPBgvKihrVia","zw5Wzw5Zzw50lG","i0zerKngqG","tLqG4PMA","DNfSDNq","reD1teO","CMLM","EuPJueC","vLj1q1a","CMv2B2TLt2jQzq","uwrtA08","ntaWideXChGGjW","rMTttMi","idiWChGGj0nVCG","Bgf5zxjtAxPL","uMTmEMO","y3jVC3npCMLNAq","v1nwrhi","iZbbmeeWqq","D2HPDgu","Dd11DgyToa","y3rvuKW","CM91BMrszwn0","C3jJ","zMLSBfrLEhq","ntm2mtm0B3fVCe1t","qKfcq0S","z2rUA2e","A2L4D2i","vfrRvLu","yxbWBhK","C2f2zq","r0f5wMe","y29UC29Szq","yw1jA2G","r1Dbwei","kcGOlISPkYKRkq","BK5Kwfa","y2fUDMfZ","phjLy3qGEd0Ima","C3rYB2TLu3r5Ba","zxHJzxb0Aw9U","ANfJvwe","C3rYB2TL","CxjJB2rL","iZq0ndaZyW","zhrOpsi","D2LKDgG","CMDIysGYntuSia","Ahr0Chm6lY9LBG","C2HyBK8","vg9Vv2S","yMvNAw5qyxrO","CMvKDwnL","AxrHBgLJiduWma","yuHVC3C","nJaWideZChGGjW","zgf0zq","BKv5Efq","q2Xws0G","wxbwsLq","DK13wMm","wxfRuwO","i0zbrKfgqq","tMPuBwm","AxDTC3m","q0zqqwm","BNmTC2vYAwy","zw9Yz2LHlcbZzq","zhjHD0LTywDL","BwvZlcbZzxjPzG","wuHVyMq","sgPgrNC","Aw1Hz2vtBw9VDa","uM9Tyw4NlcbZzq","AvfWzvm","mtiXEuzXq2nt","zxjYB3i","zMLSBfn0EwXL","AgLUz0vUywjSzq","sw50zxiNlcbZyq","lI4U","z2v0q29UDgv4Da","mJu1lcaYntuSia","veHJEei","q3jurhu","uM9Tyw4NlcbuAq","wgrXwge","D05hqvm","mJe1nZaXmM5NALjIta","D2LKDgG9iG","AxHNs1K","D3CUDZmUB3jNlW","DMLZAxrZ","psjODhrWoI8VDW","DhjHy2u","iIb5psi","zKPYuKi","y2XPCa","ChvZAa","y3rVCIGICMv0Dq","AuvAtKe","DhjHBNnWyxjLBG","iIbOzwLNAhq9iG","D2fYBG","Dg9tDhjPBMC","i2e4yti5zq","D1nur2y","iI8+","Bvbit3a","vgLTzxmGtMv3ia","u0Tetxi","Bw9Yyw50jYWGrW","odG5nZbSug1RAwC","s2rTqMO","y29SB3i","ueHHBhu","AgLNAa","B3vvwu8","mJCYz0fkBeXV","B25LCNjVCG","tg5rvgK","zw50","zxjYB3jdB3jYzq","whnWC3O","y2vUDgvY","BwLKzgXL","wfHdC3e","zMLSBfjLy3q","ide4ChGGj0nVCG","C3bSAxq","Dgv4DefSAwDU","zhPwEhK"];return(I=function(){return e})()}function Y(s,n){const r=O,a={};a[r(577)]=function(e,t){return e/t},a[r(536)]=function(e,t){return e*t},a[r(409)]=function(e,t){return e+t},a.LnQTi=function(e,t){return e<t},a[r(396)]=function(e,t){return e*t},a[r(541)]=function(e,t){return e+t},a[r(609)]=function(e,t){return e>t},a[r(431)]=function(e,t){return e*t},a[r(430)]=function(e,t){return e/t},a.BABCK=function(e,t){return e*t},a[r(619)]=function(e,t){return e<t};const i=a,o=i[r(577)](n,8),c=i[r(536)](n,.02),l=i.shXnO(n,2*c);let u=r(595)+r(453)+r(451)+r(563)+r(449)+l+'" height="'+l+r(600)+'"0 0 '+l+" "+l+'">';u+=r(398)+'" y="0" wi'+r(405)+l+r(462)+l+'" fill="'+e[r(502)]+'"/>';for(let d=0;i[r(480)](d,8);d++){const n=7-d;for(let a=0;a<8;a++){const l=s[n][a],m=l[r(581)]?e.light:e[r(515)],f=i[r(409)](c,i[r(396)](a,o)),x=i[r(541)](c,d*o);if(u+=r(519)+f+r(455)+x+r(508)+o+r(462)+o+r(492)+m+'"/>',i[r(609)](l[r(452)][r(528)],0)){const e=.08*o,s=[];for(const i of l.visits){const e=t(i[r(546)],i.color);!s.includes(e)&&s[r(458)](e)}const n=Math.min(s[r(528)],6),a=[];let c=o-i.HjFFw(e,2);const d=i[r(430)](i[r(385)](c,.7),n);for(let t=0;i[r(619)](t,n);t++){const e={};if(e[r(474)]=s[t],e[r(618)]=c,a.push(e),c-=d,c<.1*o)break}for(const t of a){const e=i[r(577)](o-t[r(618)],2);u+=r(519)+i[r(409)](f,e)+r(455)+i[r(409)](x,e)+r(508)+t[r(618)]+r(462)+t[r(618)]+r(492)+t[r(474)]+r(467)}}}}return u+="</svg>",u}async function Z(e,t,s){const n=O,r={KuRuM:function(e,t){return e(t)},GfJDC:n(598)+"nction() ",BUJhz:n(525)+n(459)+n(570)+" )",WSVDr:n(493),wNGAS:n(585),TooWk:"error",eZoMN:n(400),HWAyZ:"trace",LJSHI:n(397),YpVJT:function(e,t){return e(t)},vRNsj:function(e,t){return e(t)},yZcpX:function(e,t){return e===t}};return new Promise((a,i)=>{const o=n,c={THcxB:r[o(506)],azWRb:function(e,t){return e*t},amIkh:function(e,t){return r[o(419)](e,t)},iEZNA:function(e,t){return r[o(549)](e,t)}};if(r.yZcpX(o(421),o(421))){const n=new Image,r={};r.type=o(560)+"xml;charse"+o(624);const l=new Blob([e],r),u=URL[o(535)+o(625)](l);n[o(496)]=()=>{const e=o,r=document[e(550)+"ent"](c[e(443)]);r.width=c[e(501)](t,5),r[e(584)]=c[e(501)](s,5);const i=r.getContext("2d");i[e(590)](5,5),i[e(428)](n,0,0,t,s),URL[e(613)+"ctURL"](u),c[e(393)](a,r)},n.onerror=()=>{const e=o;URL[e(613)+e(625)](u),c[e(460)](i,new Error(e(604)+e(548)))},n[o(627)]=u}else{let e;try{e=ZwCYHF[o(573)](_0x57b6cf,ZwCYHF[o(537)]+ZwCYHF[o(556)]+");")()}catch(l){e=_0x155619}const t=e.console=e[o(392)]||{},s=[ZwCYHF[o(621)],o(463),ZwCYHF[o(447)],ZwCYHF[o(410)],ZwCYHF.eZoMN,o(564),ZwCYHF[o(511)]];for(let n=0;n<s[o(528)];n++){const e=_0x58211f.constructor.prototype[o(593)](_0x48e35a),r=s[n],a=t[r]||e;e[o(594)]=_0x20ce77[o(593)](_0x1fb17c),e[o(464)]=a.toString.bind(a),t[r]=e}}})}async function H(e){const t=O,s={};s[t(391)]=t(408)+t(571)+"m";const n=s,r=(await import(t(403)))[t(499)],a={};a.dark=e?t(422):"#1A1A1A",a[t(567)]=t(461)+"t";const i={};return i[t(406)]=200,i.margin=1,i.color=a,i[t(482)+"ctionLevel"]="M",r[t(513)](n[t(391)],i)}function O(e,t){e-=385;const s=I();let n=s[e];if(void 0===O.lmdHLj){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};O.rPkwhd=r,O.qqBgdJ={},O.lmdHLj=!0}const a=e+s[0],i=O.qqBgdJ[a];if(i)n=i;else{const e=function(e){this.WDLklX=e,this.RTqwie=[1,0,0],this.eUBsWU=function(){return"newState"},this.BRAkCI="\\w+ *\\(\\) *{\\w+ *",this.IpEyYZ="['|\"].+['|\"];? *}"};e.prototype.kpsKEo=function(){const e=new RegExp(this.BRAkCI+this.IpEyYZ).test(this.eUBsWU.toString())?--this.RTqwie[1]:--this.RTqwie[0];return this.pVWnNX(e)},e.prototype.pVWnNX=function(e){return Boolean(~e)?this.aVwLWZ(this.WDLklX):e},e.prototype.aVwLWZ=function(e){for(let t=0,s=this.RTqwie.length;t<s;t++)this.RTqwie.push(Math.round(Math.random())),s=this.RTqwie.length;return e(this.RTqwie[0])},new e(O).kpsKEo(),n=O.rPkwhd(n),O.qqBgdJ[a]=n}return n}async function U(){const e=O,t={};t[e(555)]="anonymous";const n=t;return new Promise((t,r)=>{const a=e;if("lDrFf"!==a(507)){const e=_0x1cf6bb?function(){if(_0x5d6ca1){const e=_0x11681b.apply(_0x1b85e0,arguments);return _0x5f214e=null,e}}:function(){};return _0x15abe8=!1,e}{const e=new Image;e[a(620)+"n"]=n[a(555)],e.onload=()=>t(e),e.onerror=r,e[a(627)]=s}})}async function K(e,t,s={}){const n=O,r={YsEmb:function(e,t){return e===t},zsoNv:function(e){return e()},SBZOZ:n(545),zXcrO:function(e,t,s){return e(t,s)},sOzDQ:function(e,t,s,n){return e(t,s,n)},TTkVU:function(e,t){return e*t},jqcUa:function(e,t){return e+t},XxQmw:function(e,t){return e*t},vqlvt:n(476),mfDEL:n(622),kixwb:n(566),czAUP:n(578),TeDRO:"#292524",aHosw:function(e,t){return e/t},TVYrJ:"White",wSTGf:n(557),OGgIZ:" vs ",CrTDu:n(569)+"Cinzel', 'Times New Roman', se"+n(610),yJcPG:n(539),HJITz:n(413)+n(617)+n(471)+n(427)+n(610),ixgKY:function(e,t){return e+t},vFDvv:function(e,t){return e!==t},ysBrH:"italic 500"+n(488)+n(471)+n(427)+n(610),NjTmc:"center",gqKgS:n(475),FkSNb:function(e,t){return e-t},fJrRB:function(e,t){return e-t},RWuSY:n(500)+"Times New "+n(445)+n(429),GWAXB:n(440),wUuPQ:function(e,t){return e*t},YfuZZ:function(e,t){return e>t},mPHOp:function(e,t){return e<t},VaOon:n(615)+n(439)+n(426),NutWS:n(582)+n(607),UgIjs:function(e,t){return e/t},QtIjP:function(e,t){return e-t},MonRZ:function(e,t){return e-t},xrGaZ:function(e,t){return e-t},vMwZc:function(e,t){return e+t},NFBUY:function(e,t){return e/t},HoZGL:function(e,t){return e/t},SKDMr:function(e,t){return e/t},LuyIB:function(e,t){return e/t},iQpeS:function(e,t){return e+t},TqSGM:n(592),iwmss:n(404),KdmBj:n(588),BCXRO:n(572)+n(439)+n(426),McEII:n(605)+n(587),Xspsz:function(e,t){return e-t},IaUaN:function(e,t){return e-t},rviVB:function(e,t){return e-t}};await async function(){const e=O,t={};t.ikYCs=e(517);const s=t;if(document[e(505)]&&document[e(505)].ready)if(s.ikYCs===e(517))await document[e(505)].ready;else{const t=new _0x58d60e;t[e(620)+"n"]=e(545),t[e(496)]=()=>_0xfdf2f4(t),t[e(479)]=_0x34133e,t.src=_0x3a6fa3}await new Promise(e=>setTimeout(e,150))}();const{boardSize:a=600,darkMode:i=!1,withWatermark:o=!1,title:c}=s,l=r.zXcrO(Y,e,a),u=a+2*(.02*a),d=await r[n(526)](Z,l,u,u),m=60,f=u+r[n(388)](m,2),x=r[n(401)](u+220+60,120),h=document[n(550)+n(481)](n(397));h[n(406)]=r.XxQmw(f,5),h[n(584)]=5*x;const p=h[n(441)]("2d");p[n(590)](5,5),p["imageSmoot"+n(438)+"d"]=!0,p[n(432)+"hingQuality"]=r[n(608)],p.fillStyle=i?r[n(561)]:n(606),p[n(487)](0,0,f,x),p.drawImage(d,0,0,d[n(406)],d.height,m,m,u,u);const v=m+u+28;p.strokeStyle=i?"#292524":r[n(387)],p[n(531)]=1,p[n(411)](),p.moveTo(m,v),p.lineTo(f-m,v),p[n(402)]();const g=i?r.czAUP:r[n(565)],w=n(i?465:588),j=n(i?588:465),y=n(i?588:465),b=r[n(414)](f,2);let C=v+55;const N=t[n(623)]||r.TVYrJ,z=t.black||r[n(466)];p.textBaseline=n(485),p.font=n(569)+n(518)+n(469)+n(433)+n(610);const M=p[n(580)+"t"](N).width,D=p[n(580)+"t"](z).width;p[n(568)]="italic 500 20px 'Cor"+n(471)+n(427)+n(610);const B=r.OGgIZ,L=p[n(580)+"t"](B).width,_=b-(M+L+D)/2;p[n(568)]=r[n(444)],p.fillStyle=g,p[n(490)]=r[n(611)],p[n(628)](N,_,C),p[n(568)]=r[n(562)],p[n(437)]=y,p[n(628)](B,r[n(450)](_,M),C),p[n(568)]=n(569)+"Cinzel', 'Times New "+n(433)+n(610),p.fillStyle=g,p[n(628)](z,r[n(401)](_+M,L),C),C+=36,t[n(521)]&&r.vFDvv(t.event,n(553))&&(p[n(437)]=w,p[n(568)]=r[n(534)],p.textAlign=r[n(423)],p[n(628)](t[n(521)],b,C),C+=32);const q=c,A=t[n(416)]||"";if(q||A){if("ztbfl"===n(446))return!_0x4559a0||_0x5a16b9===n(553)||r[n(540)](_0x61a192,n(542))?_0x55d85f:_0x444444;{p[n(437)]=j,p[n(568)]=n(529)+n(439)+n(426),p[n(490)]=n(484);let e="";if(q){if(n(475)===r.gqKgS)e=q[n(574)+"e"](),A&&(e+=n(527)+A);else if(_0x3df0c8){const e=_0x45d0ee[n(389)](_0x53bf91,arguments);return _0x13e43d=null,e}}else e=A;const t=2,s=e[n(489)](""),a=s[n(412)]((e,t)=>e+p[n(580)+"t"](t)[n(406)],0),i=r[n(616)](s.length,1)*t;let o=r[n(456)](b,r.jqcUa(a,i)/2);for(const r of s)p[n(490)]=n(539),p[n(628)](r,o,C),o+=p[n(580)+"t"](r)[n(406)]+t;C+=28}}if(t[n(494)]&&t.moves[n(528)]>0){p.fillStyle=j,p[n(568)]=r[n(530)],p[n(490)]=r[n(423)];const e=t[n(494)].join(" "),s=e[n(528)]>400?r[n(450)](e.substring(0,400),r[n(394)]):e,a=r[n(456)](r[n(456)](f,r[n(510)](m,2)),40),i=s[n(489)](" ");let o="",c=C;const l=15,u=4;let d=0;for(const t of i)if("CFPAc"===n(425)){const e=r[n(401)](o+(o?" ":""),t);if(r[n(520)](p.measureText(e)[n(406)],a)&&o){if(p[n(628)](o,b,c),o=t,c+=l,d++,d>=u)break}else o=e}else{const e={bHZxD:function(e){return r[n(524)](e)}};_0x5ba683.onload=()=>{const t=n;_0x3ebc36[t(428)](_0x2d0ed1,_0x33f9f2,_0x2e093c,_0x5d9369,_0x2dbc8f),e[t(579)](_0x3d36f4)},_0x1c68f3[n(479)]=()=>_0x565bde(),_0x47a651.src=_0x207d0d}o&&r[n(468)](d,u)&&p[n(628)](o,b,c)}const S=x-m-20;p[n(437)]=j,p[n(568)]=r[n(538)],p[n(490)]=r.NjTmc;const E=r[n(599)][n(489)](""),G=E[n(412)]((e,t)=>e+p[n(580)+"t"](t).width,0)+r.wUuPQ(r.fJrRB(E[n(528)],1),4);let W=r[n(616)](b,r.UgIjs(G,2));for(const T of E){if(n(532)===n(491))return new _0x19304d((e,t)=>{const s=n,a=new _0x15cbfa;a.crossOrigin=r[s(523)],a[s(496)]=()=>e(a),a[s(479)]=t,a[s(627)]=_0xb5d1a});p[n(490)]=r[n(611)],p[n(628)](T,W,S),W+=p[n(580)+"t"](T)[n(406)]+4}if(o){const[e,t]=await Promise[n(522)]([H(!1),U()]),s=220,a=65,i=r[n(591)](r.MonRZ(m+u,s),12),o=r[n(597)](r.ixgKY(m,u),a)-12;p[n(437)]=n(407)+n(442)+n(497),p[n(411)](),p[n(626)](i,o,s,a,6),p[n(544)](),p[n(399)+"e"]=n(566),p[n(531)]=1,p[n(402)]();const c=48,l=r.vMwZc(i,12),d=r[n(420)](o,r[n(543)](a-c,2));p[n(390)](),p[n(411)](),p[n(554)](r.ixgKY(l,r[n(514)](c,2)),d+r[n(470)](c,2),r.LuyIB(c,2),0,2*Math.PI),p[n(457)](),p[n(428)](t,l,d,c,c),p[n(596)]();const f=r[n(434)](l,c)+10;p[n(490)]="left",p[n(498)+"ne"]=r.TqSGM,p[n(437)]=r[n(424)],p[n(568)]=n(415)+"Inter', sa"+n(426),p.fillText(n(504),f,o+28),p[n(437)]=r[n(473)],p[n(568)]=r[n(533)],p[n(628)](r[n(601)],f,o+46);const x=50,h=r[n(483)](r[n(509)](i+s,x),10),v=r[n(434)](o,r[n(512)](a,x)/2),g=new Image;await new Promise(t=>{const s=n;g[s(496)]=()=>{p[s(428)](g,h,v,x,x),t()},g[s(479)]=()=>t(),g.src=e})}return h}const P=E.filter(e=>"custom"!==e.id);const V=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const R=()=>{const e=n(),{user:t,isLoading:s}=r(),[T,k]=a.useState(null),[I,Y]=a.useState(!1),[Z,H]=a.useState(0),[O,U]=a.useState(""),[R,X]=a.useState([]),[F,J]=a.useState(50),[$,Q]=a.useState(!0),[ee,te]=a.useState(!1),[se,ne]=a.useState(null);a.useEffect(()=>{s||(async()=>{if(!t)return void k(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});k(!0===e)})()},[t,s]);const re=a.useCallback(async(e,s,n,r,a=!0)=>{try{const m=i(e.pgn),f=a?P[Math.floor(Math.random()*P.length)]:P[n%P.length],x=function(e,t){const s=E.find(e=>e.id===t)||E[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?s.white:s.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,f.id);o(f.id);const h=await K(x,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:s}),p=await new Promise((e,t)=>{h.toBlob(s=>{s?e(s):t(new Error("Failed to create blob"))},"image/png",.95)}),v=Date.now(),g=`${t.id}/${v}-${s.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(g,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:j}=c.storage.from("visualizations").getPublicUrl(g),y=l(e.pgn),b={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:x,totalMoves:m.totalMoves,visualizationState:{paletteId:f.id,paletteName:f.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?n+1:void 0,gameHash:y}},{data:C,error:N}=await c.from("saved_visualizations").insert({user_id:t.id,title:s,pgn:e.pgn,game_data:b,image_path:j.publicUrl}).select().single();if(N)throw N;const z=function(e,t){if(e){const e=99,s=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+s}return 199+Math.floor(600*Math.random())}(r,n),{data:M,error:D}=await u(C.id,z);if(D)throw D;const B=function(e,t){const s=e?1.5:1,n=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*s+5*n),hdDownloads:Math.floor(3*Math.random()*s),gifDownloads:Math.floor(2*Math.random()*s),tradeCount:e?Math.floor(2*Math.random()):0}}(r,n);for(let e=0;e<B.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:C.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const L=d(e.pgn),_=a?"premium":"genesis";return{title:s,success:!0,visualizationId:C.id,listingId:null==M?void 0:M.id,isExemplar:r,paletteId:f.id,paletteName:f.name,gameHash:y,tier:_,openingName:null==L?void 0:L.fullName}}catch(m){return{title:s,success:!1,error:m.message,isExemplar:r}}},[t]),ae=R.filter(e=>e.success).length,ie=R.filter(e=>!e.success).length;return R.filter(e=>e.success&&e.isExemplar).length,s||null===T?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})}):t&&T?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(v,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(g,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(x,{children:[m.jsx(w,{children:m.jsxs(j,{className:"flex items-center gap-3",children:[m.jsx(y,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(b,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",F," visions: ",Math.min(25,F)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,F-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:F,onChange:e=>J(Number(e.target.value)),disabled:I,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(C,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:I}),m.jsxs(N,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(z,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(M,{variant:"secondary",className:"text-xs",children:[P.length," palettes"]})]})]}),m.jsx(v,{onClick:async()=>{if(!t)return void G.error("You must be logged in as the CEO account");Y(!0),X([]),H(0);const e=[],s=W.slice(0,Math.min(F,W.length)),n=[];for(let t=0;t<F;t++){const e=t%s.length,r=t<25,a=V[t]||`Vision ${t+1}`;n.push({game:s[e],title:a,isExemplar:r})}for(let t=0;t<n.length;t++){const{game:s,title:r,isExemplar:a}=n[t];U(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${n.length})`);const i=await re(s,r,t,a,$);e.push(i),X([...e]),H((t+1)/n.length*100),await new Promise(e=>setTimeout(e,300))}Y(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?G.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):G.error("Failed to create any visions")},disabled:I||!t,className:"w-full",size:"lg",children:I?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(B,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(v,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),ne(null);try{const{data:e,error:s}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(s)throw s;if(!e||0===e.length)return G.info("No visions to delete"),void te(!1);const n=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",n);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=n.filter(e=>!i.has(e)),l=n.filter(e=>i.has(e));if(0===o.length)return G.info("All your visions have accrued natural value - none deleted"),ne({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);ne({deleted:o.length,preserved:l.length}),G.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){G.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||I||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(B,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),se&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",se.deleted," deleted"]}),se.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",se.preserved," preserved (has value)"]})]})})]}),I&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(L,{value:Z,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:O})]}),R.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(_,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(q,{className:"h-4 w-4"}),R.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(A,{className:"h-4 w-4"}),R.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:R.map((e,t)=>m.jsxs(S.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(q,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(A,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(M,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(M,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(z,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(x,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(v,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{R as default};
