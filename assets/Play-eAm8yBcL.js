import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as B,ai as D,y as q,bF as L,bG as A,b6 as S,ae as P,bH as H,ah as G,bI as I,B as T,bJ as K,bK as U,bL as E,bM as Y,bN as _,bO as W,bP as O,bQ as J,bR as X,bS as V,bT as R,bU as F,bV as Z,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as Be,av as De,aw as qe,c8 as Le,aM as Ae,c9 as Se,H as Pe,P as He,ca as Ge,b3 as Ie,bs as Te,be as Ke,cb as Ue,aP as Ee,cc as Ye,d as _e,b2 as We,a9 as Oe,cd as Je,ce as Xe,cf as Ve,al as Re,au as Fe}from"./index-SRT_aHEt.js";import{L as Ze}from"./LiveColorLegend-BeBO7cYD.js";import{T as $e}from"./trending-down-D_mzkq_U.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-DgCf1xyT.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=mt,t=ht();for(;;)try{if(169645===-parseInt(e(500))/1+parseInt(e(489))/2*(parseInt(e(460))/3)+-parseInt(e(467))/4*(parseInt(e(479))/5)+parseInt(e(444))/6+parseInt(e(471))/7+parseInt(e(447))/8*(-parseInt(e(436))/9)+parseInt(e(437))/10*(parseInt(e(461))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[mt(485)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=mt,t={};t.OiVHg=e(468)+"+$";const n=t;return dt[e(442)]()[e(486)](n[e(451)])[e(442)]()[e(449)+"r"](dt)[e(486)](e(468)+"+$")});dt();const ut=function(){const e={dRmkE:"MCZvr"},t=e;let n=!0;return function(e,s){if("UDYWD"===t[mt(487)]){return _0x14dc95(_0xbe1550).message}{const t=n?function(){if(s){const t=s.apply(e,arguments);return s=null,t}}:function(){};return n=!1,t}}}();function mt(e,t){e-=426;const n=ht();let s=n[e];if(void 0===mt.VoJBov){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};mt.iObopw=r,mt.LXIqJR={},mt.VoJBov=!0}const a=e+n[0],i=mt.LXIqJR[a];if(i)s=i;else{const e=function(e){this.egOSoW=e,this.jchrNY=[1,0,0],this.ywfLBY=function(){return"newState"},this.xzVujH="\\w+ *\\(\\) *{\\w+ *",this.KdoJhP="['|\"].+['|\"];? *}"};e.prototype.pXpSZz=function(){const e=new RegExp(this.xzVujH+this.KdoJhP).test(this.ywfLBY.toString())?--this.jchrNY[1]:--this.jchrNY[0];return this.SbqaIC(e)},e.prototype.SbqaIC=function(e){return Boolean(~e)?this.BcVtLq(this.egOSoW):e},e.prototype.BcVtLq=function(e){for(let t=0,n=this.jchrNY.length;t<n;t++)this.jchrNY.push(Math.round(Math.random())),n=this.jchrNY.length;return e(this.jchrNY[0])},new e(mt).pXpSZz(),s=mt.iObopw(s),mt.LXIqJR[a]=s}return s}function ht(){const e=["zMvU","CM4GDgHPCYiPka","CMvWzxrPDgLVBG","Dg5jwgm","BwvZC2fNzq","ntmXmZnZtwDIqMm","D3PdsK8","rhjHDW","zfjLCgv0AxrPBW","AxnuAhjLzwzVBa","zsbMAwz0Es1TBW","ChjVDg90ExbL","ie5VigXLz2fSia","wu5gBKy","C2HVCNrnzxnZyq","x19WCM90B19F","BNqGtwf0zxjPyq","yMLUza","DMuGCNvSzs4","mteXnMfNA2DJuq","mtbJAhPRBe0","BNrFBwf0zxjPyq","Aw5ZDwzMAwnPzq","u3rHBgvTyxrLiq","zxHJzxb0Aw9U","Dg9tDhjPBMC","D05nC3m","nda1nJy2D0jetvDS","r2fTzsbKCMf3BG","qvb1D2G","nJq4mfnmBgnUyq","Bg9N","y29UC3rYDwn0BW","rePhBue","t2LwsgC","E30Uy29UC3rYDq","y29UC29Szq","Dw5RBM93BG","we9kyvG","vgHYzwvMB2XKia","DgHYzwvMB2XKxW","yKLAuNq","AwvUDe1HDgvYAq","ntu3ne9Trun3tq","mtq2ndyZowrzD3DJsG","zMLMDhLFBw92zq","CgP4tKW","rhjHDYbIEsb0Aa","DhjHy2u","C3rHBgvTyxrL","ndi1mK5eDunuDa","kcGOlISPkYKRkq","AxntDgfSzw1HDa","zhvfrNq","mZq3nZK1EwXuu1zL","C3vMzMLJAwvUDa","BgfIBguU","BMn0Aw9UkcKG","D2HmrKy","zejMtMS","CfDXt0m","ugrkzNm","odu1t3H1DKPb","AePpCMi","AuPUEw8","C3bSAxq","Aw5MBW","DgfIBgu","yxbWBhK","C2vHCMnO","zfjTA0u","BgvUz3rO","mJC0CwzHs1vh","CMvHC29U","y3rVCIGICMv0Dq","sw5ZDwzMAwnPzq","CuPxwMC","zMTnzKu"];return(ht=function(){return e})()}function xt(e){return function(e){const t=mt,n={};n[t(475)]=t(466),n.pWqOC=t(457)+t(497),n[t(463)]=t(464)+"reefold repetition.",n[t(478)]=t(439)+t(438)+"l",n[t(481)]="Draw by in"+t(472)+" material.",n[t(501)]=t(462)+"_rule",n[t(430)]=t(464)+t(427)+t(435),n[t(443)]="50-Move Rule";const s=n;if(e[t(469)+"e"]()){const e={};return e.reason=s[t(475)],e[t(499)]=t(440)+t(429)+"moves avai"+t(473),e[t(431)+"ge"]=t(440),e}if(e[t(426)+t(503)+"n"]()){const e={};return e[t(490)]=s[t(477)],e.message=s[t(463)],e[t(431)+"ge"]=t(456)+"Repetition",e}if(e["isInsuffic"+t(459)+"al"]()){const e={};return e[t(490)]=s.PdJfs,e[t(499)]=s[t(481)],e.shortMessage=t(492)+t(433)+"l",e}const r=e[t(495)]();if(parseInt(r[t(482)](" ")[4],10)>=100){const e={};return e[t(490)]=s[t(501)],e[t(499)]=s[t(430)],e[t(431)+"ge"]=s[t(443)],e}const a={};return a[t(490)]=t(454),a[t(499)]=t(445)+"!",a[t(431)+"ge"]=t(502),a}(e).message}ut(void 0,function(){const e=mt,t={XOJaX:function(e,t){return e!==t},DJGmA:e(458),tnIXc:function(e,t){return e(t)},dBfNk:function(e,t){return e+t},duEFt:"return (fu"+e(474),qJWZg:e(452)+e(491)+e(496)+" )",APuwh:function(e){return e()},hJOrb:e(448),fkMfE:function(e,t){return e<t}},n=t[e(446)](function(){const n=e;let s;try{if(t[n(455)](t[n(450)],t[n(450)])){const e=_0x449caf.apply(_0x60157e,arguments);return _0x3488f8=null,e}s=t[n(498)](Function,t[n(476)](t[n(470)]+t[n(493)],");"))()}catch(r){s=window}return s}),s=n[e(453)]=n[e(453)]||{},r=[t[e(480)],"warn",e(483),"error",e(441),e(484),e(465)];for(let a=0;t[e(494)](a,r[e(488)]);a++){const t=ut.constructor[e(428)][e(434)](ut),n=r[a],i=s[n]||t;t[e(432)]=ut[e(434)](ut),t[e(442)]=i[e(442)][e(434)](i),s[n]=t}})(),function(){const e=gt,t=vt();for(;;)try{if(537706===parseInt(e(570))/1+parseInt(e(577))/2+parseInt(e(561))/3+-parseInt(e(504))/4*(-parseInt(e(539))/5)+-parseInt(e(479))/6+-parseInt(e(470))/7+-parseInt(e(564))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(511)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=gt,t={};t.skYxo=e(531)+"+$";const n=t;return pt.toString()[e(499)](n[e(501)])[e(582)]()[e(505)+"r"](pt)[e(499)](e(531)+"+$")});pt();const ft=function(){const e={FtmPz:function(e,t){return e===t}},t=e;let n=!0;return function(e,s){const r=n?function(){const n=gt;if(t[n(502)]("FVrQX",n(473))){if(_0x40569e){const e=_0x40f585[n(511)](_0x33fdc8,arguments);return _0x181725=null,e}}else if(s){const t=s[n(511)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}();function gt(e,t){e-=470;const n=vt();let s=n[e];if(void 0===gt.IoLKdt){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.PUQlSp=r,gt.KqBFJH={},gt.IoLKdt=!0}const a=e+n[0],i=gt.KqBFJH[a];if(i)s=i;else{const e=function(e){this.ZSKYqv=e,this.XvCMeY=[1,0,0],this.AuHOYS=function(){return"newState"},this.LgkKCL="\\w+ *\\(\\) *{\\w+ *",this.WkuCLj="['|\"].+['|\"];? *}"};e.prototype.yhoTEn=function(){const e=new RegExp(this.LgkKCL+this.WkuCLj).test(this.AuHOYS.toString())?--this.XvCMeY[1]:--this.XvCMeY[0];return this.wCPqBQ(e)},e.prototype.wCPqBQ=function(e){return Boolean(~e)?this.Tczfwu(this.ZSKYqv):e},e.prototype.Tczfwu=function(e){for(let t=0,n=this.XvCMeY.length;t<n;t++)this.XvCMeY.push(Math.round(Math.random())),n=this.XvCMeY.length;return e(this.XvCMeY[0])},new e(gt).yhoTEn(),s=gt.PUQlSp(s),gt.KqBFJH[a]=s}return s}function vt(){const e=["Ew1Nzuy","B3vsshC","y2HLy2TTyxrL","DMfSDwu","nvv5z2HHrq","DMLJDg9YEq","BgXHDg9Y","vLnOwg4","ww91rgO","y3rVCIGICMv0Dq","Cw9wCLa","tKH3Ahe","wxPJu1a","zxHWB25LBNrPyq","AwXSzwDHBa","tNzcALe","EhbWAMy","Eu5ItuW","BgvUz3rO","y3vYCMvUDfrPBq","zurfzKC","Aw5PDef1zgLV","BMn0Aw9UkcKG","y29UC29Szq","C3f1yxjL","y3jLyxrLqMLXDq","mZe0ndyXoeHKCKfTEa","C3rHCNq","y29UBMvJDa","mteZnZu1mJbmu0P2zMi","CMv0DxjUicHMDq","Bg93CgfZCW","DhjPyw5NBgu","y3vYCMvUDa","D2fYBG","mtaWmZe2neTeyNzUuW","z3rhvei","C2fTCgXLuMf0zq","ChbVCNrLza","y25tu3u","Bg9N","E30Uy29UC3rYDq","nZmXntK0whjzwfDY","C2LUzq","CM4GDgHPCYiPka","zhjHDW","z2fPBK5Vzgu","Dg9tDhjPBMC","D2vIA2L0qxvKAq","mZaWnZiXnhHQwM9TAG","Aw5MBW","C2v0vMfSDwvbDa","qLroy1u","zwL4DKC","yNvMzMvY","DhLWzq","Bw92zq","A05twhC","ndGWoteZmK12s2r5Dq","t1PSuKC","vg9wywX1zuf0va","zNjLCxvLBMn5","x19WCM90B19F","t0jjugy","C3rVCa","B1jNs0O","yxfnz2S","Aw1L","zgvMzwf0","thzjAfe","zxHJzxb0Aw9U","CgXHEvnVDw5K","y3jLyxrLr2fPBG","C2f3Dg9VDgG","y2HLy2S","r2XwAeW","DwvbDfrPBwu","y2XVC2u","C2vHCMnO","zxjtB3vYy2u","C2TzEg8","rNrTuhO","qvbjig5VDcbZDq","mZa5ndqXmNLnDuXXBG","y29UC3rYDwn0BW","z2fPBG","BgLUzwfYuMfTCa","rgf0yq","BfjHBxbuB1zHBa","z2v0q2HHBM5LBa","yxbWBhK","zgvZDgLUyxrPBW","rxncDem","y3jLyxrLt3nJAq","yMLUza","ChjVDg90ExbL","sezQEMO","qNvbyu8","DhjHy2u","DgfIBgu","y29UDgv4Da","Bg1HtLG","C2XiChq","uLDsAui","q2PkuKm","u2f5vuy","zxjYB3i","ywrgAwX0zxi","z2HWs3C","tgDqteq","kcGOlISPkYKRkq","vgLTzq","AhvVqwK","q05itgu"];return(vt=function(){return e})()}ft(void 0,function(){const e=gt,t={kTgCG:e(551),LKYTD:function(e,t){return e(t)},lmaNX:function(e,t){return e+t},rQzhS:"return (function() ",rrShI:function(e){return e()},LgPLD:function(e,t){return e||t},BuAaO:e(575),CjJRC:e(569),hpDxG:e(471),slHpt:e(520)},n=function(){const n=e,s={};s[n(524)]=function(e,t){return e+t},s.huoAi="{}.constru"+n(544)+n(579)+" )";const r=s;let a;try{if(n(551)!==t.kTgCG){let e;try{e=_0x333651(r[n(524)](n(565)+n(557),r[n(533)])+");")()}catch(i){e=_0x224f1a}return e}a=t.LKYTD(Function,t[n(522)](t.rQzhS,n(576)+n(544)+n(579)+" )")+");")()}catch(o){a=window}return a}(),s=n.console=n[e(558)]||{},r=[t[e(518)],t[e(525)],t.hpDxG,e(527),e(491),t[e(523)],e(519)];for(let a=0;a<r[e(553)];a++)if(e(490)!=e(490)){if(!_0x1ce8a6)return;t.rrShI(_0x397a34);const{context:n,gainNode:s}=_0x30c646[e(568)];if(t[e(530)](!n,!s))return;const r=n[e(514)+e(541)](),a=n[e(493)]();r[e(476)]=_0x4c6c36,r[e(482)][e(472)+"Time"](_0x188a68,n[e(554)+"e"]),_0x482262&&r[e(482)][e(548)+e(509)+e(497)](_0x5a1b8d,n[e(554)+"e"]+_0xf63e5),a[e(506)][e(472)+e(532)](0,n[e(554)+"e"]),a[e(506)]["linearRampToValueAtT"+e(488)](1,n[e(554)+"e"]+_0x2dab75),a[e(506)][e(548)+e(509)+e(497)](.01,n[e(554)+"e"]+_0x5f0e1a-_0x3800dd),a[e(506)][e(507)+e(481)+"ime"](0,n[e(554)+"e"]+_0x2a1a90),r[e(563)](a),a[e(563)](s),r[e(562)](n[e(554)+"e"]),r[e(485)](n[e(554)+"e"]+_0xfb92f1)}else{const t=ft[e(505)+"r"][e(516)].bind(ft),n=r[a],i=s[n]||t;t[e(483)]=ft[e(515)](ft),t.toString=i[e(582)][e(515)](i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=gt,r={icsWA:s(555),yNbML:"aiRBD",iBYEv:function(e){return e()},EsBtC:function(e,t){return e+t},ymgeF:function(e,t){return e+t},gnXQS:function(e,t){return e||t},eixvG:function(e,t){return e*t},OZlRG:function(e,t){return e<t},RBVSu:function(e,t){return e-t},oRgKJ:s(566),kNSXw:function(e,t){return e+t},ghpKw:s(477),CNHLe:function(e,t,n,s,r,a){return e(t,n,s,r,a)},qoVrP:function(e,t,n,s,r,a){return e(t,n,s,r,a)},cnSSu:s(567),gtGTB:"sine",aqMgk:"castle",NHwhq:function(e,t,n){return e(t,n)},OBIPf:s(495),nBnPO:s(537),ouRHw:function(e,t,n){return e(t,n)},YouDj:function(e,t,n){return e(t,n)},GlVhL:function(e,t,n){return e(t,n)},NvBjQ:"gameEnd",HFjzj:s(540),VShXn:function(e,t,n){return e(t,n)},YzcSP:function(e,t,n){return e(t,n)},SayUF:function(e,t,n){return e(t,n)}},a={};a[s(521)]=null,a[s(581)]=null;const i=t.useRef(a),o=r[s(542)](t.useCallback,()=>{const e=s;if(!i[e(568)][e(521)])try{const t=new(window.AudioContext||window[e(583)+"oContext"]),s=t.createGain();s[e(563)](t[e(512)+"n"]),s[e(506)][e(538)]=n;const r={};r[e(521)]=t,r[e(581)]=s,i[e(568)]=r}catch(t){if(r.icsWA===r[e(552)]){const t=_0x8eba9?function(){if(_0x5f4168){const t=_0x1146d9[e(511)](_0x2ac9e6,arguments);return _0x24b16c=null,t}}:function(){};return _0x46c4b3=!1,t}}},[n]);r[s(547)](t.useEffect,()=>{const e=s;i[e(568)].gainNode&&(i[e(568)][e(581)][e(506)][e(538)]=n)},[n]);const c=t.useCallback((t,n,a=s(578),c=.01,l=.1,d)=>{const u=s;if(!e)return;r.iBYEv(o);const{context:m,gainNode:h}=i[u(568)];if(!m||!h)return;const x=m[u(514)+u(541)](),p=m[u(493)]();x[u(476)]=a,x[u(482)][u(472)+u(532)](t,m.currentTime),d&&x.frequency[u(548)+u(509)+u(497)](d,r[u(513)](m[u(554)+"e"],n)),p[u(506)]["setValueAt"+u(532)](0,m[u(554)+"e"]),p.gain[u(507)+u(481)+"ime"](1,m[u(554)+"e"]+c),p[u(506)][u(548)+u(509)+"ueAtTime"](.01,m[u(554)+"e"]+n-l),p[u(506)][u(507)+u(481)+"ime"](0,m[u(554)+"e"]+n),x[u(563)](p),p.connect(h),x[u(562)](m[u(554)+"e"]),x[u(485)](r[u(535)](m[u(554)+"e"],n))},[e,o]),l=r.ouRHw(t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(568)];if(r.gnXQS(!c,!l))return;const d=r[a(474)](c[a(572)],t),u=c.createBuffer(1,d,c[a(572)]),m=u[a(510)+a(508)](0);for(let e=0;r[a(480)](e,d);e++)m[e]=r.RBVSu(2*Math.random(),1);const h=c["createBuff"+a(500)]();h[a(475)]=u;const x=c[a(560)+a(528)]();x.type=r[a(486)],x[a(482)][a(538)]=n;const p=c[a(493)]();p[a(506)][a(472)+a(532)](.3,c[a(554)+"e"]),p[a(506)][a(548)+a(509)+"ueAtTime"](.01,r[a(535)](c[a(554)+"e"],t)),h.connect(x),x[a(563)](p),p[a(563)](l),h[a(562)](c[a(554)+"e"]),h[a(485)](r[a(478)](c[a(554)+"e"],t))},[e,o]),d=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(529)]:r[n(534)](c,800,.08,n(578),.005,.05),r.qoVrP(c,400,.06,r[n(574)],.005,.04);break;case"capture":l(.12,2e3),c(300,.1,"square",.005,.08),r[n(545)](c,150,.15,r[n(571)],.01,.1);break;case r[n(487)]:r[n(534)](c,600,.06,r[n(571)],.005,.04),r.NHwhq(setTimeout,()=>c(700,.06,n(578),.005,.04),80);break;case r[n(484)]:r.qoVrP(c,880,.15,"triangle",.01,.1),r.NHwhq(setTimeout,()=>c(1100,.12,n(567),.01,.08),120);break;case r.nBnPO:c(880,.2,r.gtGTB,.01,.15),setTimeout(()=>c(660,.2,n(578),.01,.15),150),r[n(536)](setTimeout,()=>c(440,.3,n(578),.01,.2),300),r.YouDj(setTimeout,()=>c(330,.4,n(578),.01,.3),500);break;case"gameStart":r[n(545)](c,523,.12,n(578),.01,.08),r[n(546)](setTimeout,()=>c(659,.12,n(578),.01,.08),100),r.GlVhL(setTimeout,()=>c(784,.2,n(578),.01,.15),200);break;case r[n(550)]:r[n(545)](c,440,.15,r[n(574)],.01,.1),setTimeout(()=>c(349,.25,n(567),.01,.2),150);break;case r[n(517)]:c(523,.1,n(578),.01,.08),r[n(543)](setTimeout,()=>c(659,.1,n(578),.01,.08),100),setTimeout(()=>c(784,.1,n(578),.01,.08),200),setTimeout(()=>c(1047,.3,"sine",.01,.25),300);break;case n(489):r[n(534)](c,392,.2,"sine",.02,.15),setTimeout(()=>c(349,.2,n(578),.02,.15),200),r[n(496)](setTimeout,()=>c(330,.3,n(578),.02,.25),400),setTimeout(()=>c(262,.4,"sine",.02,.35),650);break;case n(580):c(440,.15,n(578),.01,.1),setTimeout(()=>c(440,.15,n(578),.01,.1),180),r[n(543)](setTimeout,()=>c(523,.2,"sine",.01,.15),360);break;case n(549):c(200,.1,n(559),.005,.08),r[n(534)](c,150,.08,n(494),.005,.06)}},[e,c,l]);r[s(526)](t.useEffect,()=>()=>{const e=gt;i.current[e(521)]&&i[e(568)][e(521)][e(498)]()},[]);const u={};return u[s(492)]=d,u[s(556)]=o,u},yt=jt;!function(){const e=jt,t=Nt();for(;;)try{if(861894===-parseInt(e(297))/1*(parseInt(e(303))/2)+parseInt(e(288))/3+-parseInt(e(276))/4*(parseInt(e(291))/5)+-parseInt(e(294))/6+parseInt(e(305))/7+parseInt(e(289))/8*(-parseInt(e(307))/9)+parseInt(e(286))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[jt(296)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=jt,t={};t.JtqPT=e(281)+"+$";const n=t;return wt[e(280)]()[e(283)](n.JtqPT)[e(280)]()[e(298)+"r"](wt).search(e(281)+"+$")});function jt(e,t){e-=271;const n=Nt();let s=n[e];if(void 0===jt.kpwvMS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};jt.xIKmWW=r,jt.eBzhad={},jt.kpwvMS=!0}const a=e+n[0],i=jt.eBzhad[a];if(i)s=i;else{const e=function(e){this.pAGRGb=e,this.pUjUji=[1,0,0],this.vlUAil=function(){return"newState"},this.VrmRKJ="\\w+ *\\(\\) *{\\w+ *",this.aEkENz="['|\"].+['|\"];? *}"};e.prototype.XnYqMd=function(){const e=new RegExp(this.VrmRKJ+this.aEkENz).test(this.vlUAil.toString())?--this.pUjUji[1]:--this.pUjUji[0];return this.izdSif(e)},e.prototype.izdSif=function(e){return Boolean(~e)?this.RsGlos(this.pAGRGb):e},e.prototype.RsGlos=function(e){for(let t=0,n=this.pUjUji.length;t<n;t++)this.pUjUji.push(Math.round(Math.random())),n=this.pUjUji.length;return e(this.pUjUji[0])},new e(jt).XnYqMd(),s=jt.xIKmWW(s),jt.eBzhad[a]=s}return s}wt();const Ct=function(){const e=jt,t={};t[e(284)]=function(e,t){return e!==t},t[e(273)]="IeWVE";const n=t;let s=!0;return function(t,r){const a=e;if(n[a(284)](n[a(273)],"yaEHy")){const e=s?function(){if(r){const e=r[a(296)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x54e029=_0x251228}}();function Nt(){const e=["ChjVDg90ExbL","BgvUz3rO","EuLQz1q","CMv0DxjUicHMDq","ChjTsKK","rxzqrxi","BMn0Aw9UkcKG","y1fXvg8","ndi2ohjmy0f4Dq","x19WCM90B19F","BMfTzq","E30Uy29UC3rYDq","Dg9tDhjPBMC","kcGOlISPkYKRkq","Bg9N","C2vHCMnO","shbNqxq","yMLUza","mtmYmdGWmtbbtxDZA24","zxjYB3i","ndy2odu5ngzRtvP2Bq","mJrVALLgzMe","DhjHy2u","nde3mgTnB2zerq","B0XrzfC","zxHJzxb0Aw9U","nJC2mdKYmePSrMzNAa","werJsue","yxbWBhK","mJGYndK0vhz6DLDm","y29UC3rYDwn0BW","D2fYBG","s1vkrK4","y3rVCIGICMv0Dq","AxfwD1O","nff5yLH1wG","y2HLC3mTC291BG","nJi5nZqWm0jmzuTwqW","zc1Zzxr0Aw5NCW","otK5mtq0AKHcEeLg","Aw5MBW","y29UC29Szq"];return(Nt=function(){return e})()}Ct(void 0,function(){const e=jt,t={};t[e(302)]=function(e,t){return e+t},t[e(300)]=e(271)+e(274),t[e(312)]=e(279)+e(301)+'rn this")( )',t.oLQdW=e(275),t[e(295)]=e(282),t[e(272)]=e(293);const n=t;let s;try{s=Function(n.iqVwZ(n[e(300)]+n[e(312)],");"))()}catch(i){if(n[e(292)]!==e(275)){const t=_0x55ba59?function(){if(_0x49ed04){const t=_0xe8d77d[e(296)](_0x3ad57a,arguments);return _0x5a23a1=null,t}}:function(){};return _0x168dd3=!1,t}s=window}const r=s.console=s[e(309)]||{},a=[n[e(295)],e(299),e(308),e(287),n[e(272)],"table",e(290)];for(let o=0;o<a[e(311)];o++){const t=Ct[e(298)+"r"][e(310)][e(285)](Ct),n=a[o],s=r[n]||t;t[e(277)]=Ct[e(285)](Ct),t[e(280)]=s.toString[e(285)](s),r[n]=t}})();const kt={};kt[yt(278)]=yt(304)+yt(306);const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e.enabled}))}),kt)),zt=qt;!function(){const e=qt,t=Lt();for(;;)try{if(125702===-parseInt(e(319))/1*(-parseInt(e(303))/2)+-parseInt(e(337))/3+-parseInt(e(455))/4*(parseInt(e(311))/5)+-parseInt(e(470))/6+parseInt(e(382))/7*(parseInt(e(534))/8)+-parseInt(e(401))/9*(-parseInt(e(531))/10)+parseInt(e(304))/11*(-parseInt(e(510))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=qt;return Bt.toString()[e(361)]("(((.+)+)+)+$")[e(525)]()[e(297)+"r"](Bt)[e(361)]("(((.+)+)+)+$")});Bt();const Dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(302)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function qt(e,t){e-=293;const n=Lt();let s=n[e];if(void 0===qt.doNxzJ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.GCHiSX=r,qt.JUBbJR={},qt.doNxzJ=!0}const a=e+n[0],i=qt.JUBbJR[a];if(i)s=i;else{const e=function(e){this.gWoybh=e,this.LjiSNh=[1,0,0],this.XkYdWc=function(){return"newState"},this.lCgcNu="\\w+ *\\(\\) *{\\w+ *",this.fVYamM="['|\"].+['|\"];? *}"};e.prototype.mZitDV=function(){const e=new RegExp(this.lCgcNu+this.fVYamM).test(this.XkYdWc.toString())?--this.LjiSNh[1]:--this.LjiSNh[0];return this.rAmkgG(e)},e.prototype.rAmkgG=function(e){return Boolean(~e)?this.cGpSZM(this.gWoybh):e},e.prototype.cGpSZM=function(e){for(let t=0,n=this.LjiSNh.length;t<n;t++)this.LjiSNh.push(Math.round(Math.random())),n=this.LjiSNh.length;return e(this.LjiSNh[0])},new e(qt).mZitDV(),s=qt.GCHiSX(s),qt.JUBbJR[a]=s}return s}function Lt(){const e=["s09vzNa","q3zHDg8","ugXLyxnLihnPzW","BwfRzu1VDMu","AxHbsKq","vvbeqvrf","uw1bve8","mtjmtgLgDg0","AM5pu1q","C3vJy2vZCW","Dg9ju09tDhjPBG","y29Kzq","vKnuseK","wMHOte8","ihnLBNqGkg9WCa","rfLRyMS","C2LVBIK","vKnIDuG","rhjHDYbVzMzLCG","AxnmB2fKAw5N","run6yKW","y3rVCIGICMv0Dq","mti1nZi4mKTet1jMra","CMv0DxjUicHMDq","y29UC29Szq","DgfIBgu","BIb0AgLZihzLCG","lwfJy2vWDhmGAq","y29TCgXLDgvK","yMXPDhPFnq","AwXSzwDHBa","zxHJzxb0Aw9U","Bw92zxm","AM9PBKDHBwu","u1Lgsg8","vMPhsKi","DxnLCL9Pza","tY1p","BIbPBIb0BYbQBW","BMvS","z2fTzq","Bw92zv9UDw1Izq","y3vYCMvUDezLBG","vKTMBwO","zxjYB3i","DuvIteG","uezZq1a","D2HPDgu","zwqHifDHAxrPBG","CgDU","C1jMv28","Cg9ZDgDYzxnFyW","uhLUt2q","CMfWAwrFmtu","DgLTzunVBNrYBW","Dw50Aw1Lza","z3HxzxG","ww91ihjLC2LNBG","D2fPDgLUzW","s2jPB1a","tKf6vfO","B0XIy2G","ndHYsvjewey","tgzIENO","v01Mze4","ywn0AxzL","BgvUz3rO","DxbKyxrL","CKLQAMe","C3rHCNrLzf9HDa","BMv3","BLzfr1e","Awq9zxeU","sMLSBwy","C2fU","DffhENi","C2LUz2XL","Dg9tDhjPBMC","C3rHDhvZ","rxbmqNC","zgvMzwf0","zMvU","EunmC3q","mtC1ote5mgPIrufAvq","AxnFChvIBgLJ","zw5AExq","mtaWndmYDK9pA2zf","DhbfEM0","ChvIBgLJ","r2fTzsbJCMvHDa","v2TqzgG","AgfSBgvUz2uGyW","yMXHy2TuAw1LuG","C3vIC3rYAw5N","DgXswhG","tw92zsbLCNjVCG","BwvZC2fNzq","EgP2t2S","zM9YrwfJAa","DgD4zNi","DxbKyxrLievmtW","zNjVBq","tgDbzem","CM4GDgHPCYiPka","z2fTzs0","Bw92zv91y2K","qMXHy2SGD2LUCW","DxnLCL9PzcWGzq","B25LBNqGyxv0BW","DgLTzv9JB250CG","Bg9FCMf0Aw5N","CgXHEwvYx2LK","BMn0Aw9UkcKG","ww91ihDVBIe","vwLjtNa","yMXHy2TFD2LUCW","AM9PBIbIEsbJBW","yMXHy2TqBgf5zq","tMr0AeG","AxnnEvr1CM4","Aw5Zzxj0","zMDSz2i","BMv3uMf0Aw5N","ywrK","BxLdB2XVCG","rerHuha","CNbJ","yLDmA3y","u2rHBLq","BffXu2m","ELLAtvq","y29UC3rYDwn0BW","rvLls1i","yMXHy2TqywXLDa","uMf0Aw5NoIa","AfLku2C","yxbWBhK","mZjbEMXKEgW","ntq1ndLUuxfUCfq","AxndAgvJA21HDa","su5trvju","BM54vMe","z2v0qxzHAwXHyG","zxjFAwq","A2zOs2C","mJi4mZvcrLv5rw8","AgfUz2vZ","qM9hAxG","B2rL","y2HHBgXLBMDLxW","yMHMBxG","y3vYCMvUDf9Mzq","rNHXu0W","mta0nJv0y2Dbzfy","BurJBMO","BIbPBIb0BYbJCG","Bg9HzcbNyw1L","D2LUBMvYx2LK","Dhv0sNK","qKzuDMO","yMXHy2TFDgLTzq","Aw5JBhvKzxm","A2LIy0i","BhbbtNC","AeHwteK","x3jLBwfPBMLUzW","yMXfq24","sufjr0u","C3rHCNrLzef0","z2fTzvn0yxrL","E30Uy29UC3rYDq","mteYmdi5q2rys0fr","A0T3t2m","DhvYBG","ihbSyxLPBMCGyq","wwHuB1O","zuvtsfK","D2HPDgvFDgLTzq","Aw5MBW","BgDyAKi","ugvYuwK","u0P4z1y","rgfwy20","yujXugG","y3jLyxrLzef0","y2HLC3nFz2fTzq","CMvTB3zLq2HHBG","AxPewgS","y2HHBMDL","DMLJDg9YEq","r0TxzuC","B3jKzxi","z09nz3e","DhrL","sejPt2G","C2vHCMnO","CKLK","BwfW","Axnhyw1Lt3zLCG","ufrLr20","y2HHBgXLBMDLqW","BMvUDc4UlG","B3vUza","z2fTzvn0yxj0","zhPMBxG","D2HPDgvqywXLDa","y2HLy2S","BgvnB3zLCW","D2HPDgvFCgXHEq","B2zMzxjeCMf3","CKnHqNK","yK9mtwK","quLQvNe","zw1HAw5PBMC","zwXVx3jHDgLUzW","sujcBKm","mZvmyw5AwgC","y2HHBM5LBa","zseGww91igfYzq","AxndAgvJAW","zxfSteG","z2fTzv9Pzd1LCq","thD6AhK","sw52ywXPzcbVCG","Bw92zunVDw50","CYbcBgfJAY4","yMXHy2S","y3jLyxrLr2fTzq","yMLUza","C2vSzwn0","uuLlEe0","EgT5C2y","x19WCM90B19F","D2HPDgvFD2LUCW","yxnJzw5KAw5N","ouHks21gtG","ihjHDgLUz3m6","Bw92zwrtCxvHCG","zhjHDW","z2vUzxjHDgvFyW","CMvZDwX0","vKLOqvu","AxLVshm","D2LUBMvYswq","ruzrsNO","B290tK0","yLD0wuy","wujVDxG","yKvmu0y","BurKq2O","shrUyNq","yMXHy2TFCgfSzq","ChjVzMLSzxm","r2fTzsbUB3qGzG","CMvZAwDUr2fTzq","zMTfA3G","q1nitKS","zMLUza","AM5Xz3G","rKXju20","DMXbr0C","AgfZwxO","rMfPBgvKihrVia","sfzUEwe","rwX5z2O","zNbSBNa","sM9PBMvKigDHBq","Bwf5yMvtAw5NBa","wKDSwg8","ywXS","DLn5BfC","y2HLC3nFBw92zq","D2HPDgvFCgfSzq","A0nyAKe","y2fWDhvYzq","zhKGC3rHCNrLza","igv4CgLYzwqGyW","y2fWDhvYzwq","C3vIC2nYAwjL","D2HPDgvqBgf5zq","tLnQv3K","yNvSBgv0xZe"];return(Lt=function(){return e})()}Dt(void 0,function(){const e=qt,t={};t[e(422)]=function(e,t){return e+t},t.Htnbt="log",t[e(573)]="warn",t.tgxfr=e(344),t[e(346)]=e(492),t[e(427)]=e(473),t.tpEzm="trace",t[e(425)]=function(e,t){return e<t};const n=t,s=function(){const t=e;let s;try{s=Function(n[t(422)](t(471)+t(560),t(336)+t(469)+t(551)+" )")+");")()}catch(r){s=window}return s}(),r=s[e(472)]=s[e(472)]||{},a=[n[e(416)],n[e(573)],n[e(547)],n[e(346)],e(479),n[e(427)],n[e(535)]];for(let i=0;n.FLISm(i,a[e(514)]);i++){const t=Dt.constructor.prototype[e(394)](Dt),n=a[i],s=r[n]||t;t[e(398)]=Dt.bind(Dt),t[e(525)]=s[e(525)][e(394)](s),r[n]=t}})();const At={};At[zt(447)]=60,At[zt(477)]=300,At[zt(501)]=900,At[zt(503)]=0;const St=At,Pt=It;!function(){const e=It,t=Tt();for(;;)try{if(931924===parseInt(e(390))/1*(-parseInt(e(357))/2)+-parseInt(e(354))/3+parseInt(e(379))/4+-parseInt(e(356))/5+-parseInt(e(361))/6*(-parseInt(e(387))/7)+parseInt(e(360))/8*(parseInt(e(376))/9)+parseInt(e(377))/10*(parseInt(e(384))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ht=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[It(389)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=It,t={};t[e(396)]="(((.+)+)+)+$";const n=t;return Ht.toString()[e(395)](n[e(396)])[e(366)]()[e(353)+"r"](Ht).search(e(397)+"+$")});Ht();const Gt=function(){const e=It,t={};t[e(412)]=e(385);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=It;if("toUOr"!==n[s(412)])_0x59c667=_0xd96543;else if(t){const n=t[s(389)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}();function It(e,t){e-=353;const n=Tt();let s=n[e];if(void 0===It.EFUUdO){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};It.PGMuhp=r,It.MXLMYp={},It.EFUUdO=!0}const a=e+n[0],i=It.MXLMYp[a];if(i)s=i;else{const e=function(e){this.hDabPv=e,this.rWKAed=[1,0,0],this.DgEJkV=function(){return"newState"},this.wvGgpW="\\w+ *\\(\\) *{\\w+ *",this.wYBXut="['|\"].+['|\"];? *}"};e.prototype.iGIqlI=function(){const e=new RegExp(this.wvGgpW+this.wYBXut).test(this.DgEJkV.toString())?--this.rWKAed[1]:--this.rWKAed[0];return this.uPtumZ(e)},e.prototype.uPtumZ=function(e){return Boolean(~e)?this.WNSzTy(this.hDabPv):e},e.prototype.WNSzTy=function(e){for(let t=0,n=this.rWKAed.length;t<n;t++)this.rWKAed.push(Math.round(Math.random())),n=this.rWKAed.length;return e(this.rWKAed[0])},new e(It).iGIqlI(),s=It.PGMuhp(s),It.MXLMYp[a]=s}return s}function Tt(){const e=["mZm2ndeYogr1zfvSuq","nMXPBhLitq","zwq6","sKTYELy","DhjHy2u","zxjYB3i","Dg9tDhjPBMC","Aw5MBW","C2vSzwn0Aw9U","BgrzAhG","EwP0ANy","C3vJy2vZCW","wNPNt1m","BMDowKy","vMThuw8","x19WCM90B19F","mJDiCwHyAKC","mtbWDu9WChC","E30Uy29UC3rYDq","mtaZntmZmLDmBvjzuG","DgfIBgu","D2fYBG","AgvHDNK","CMv0DxjUicHMDq","mte0nJaXmtLYC0LJDhK","Dg9vt3i","vwTfCgG","mtaZmdu1mtL4C1Derui","uM9Zu3m","yxbWBhK","mtu5nZm1DerwBMLV","BwvKAxvT","yvHpCfa","zgjHy2SGzMfPBa","Ee9Jzha","C2vHCMnO","wNbMAva","kcGOlISPkYKRkq","sgfWDgLJigzLzq","BgLNAhq","CM4GDgHPCYiPka","y29UC29Szq","yMH5Cey","zgnpAMS","DMLICMf0zq","thL2Bwu","yMLUza","zxHJzxb0Aw9U","ELbgBNu","AgfWDgLJCW","ChjVDg90ExbL","AePUthC","C0f6yKO","sNPtqui","y29UC3rYDwn0BW","mZG5otiXnevwzxf4EG","AxntDxbWB3j0zq","ntaYmdq1mef3CxDUBa","mtbMu0TjzNm","ANHjCue","y3rVCIGICMv0Dq"];return(Tt=function(){return e})()}Gt(void 0,function(){const e=It,t={};t.yjtjv=e(383)+"nction() ",t[e(374)]="log",t[e(369)]=e(381),t[e(358)]=e(365),t.dcOjk=e(380),t[e(373)]=function(e,t){return e<t};const n=t;let s;try{s=Function(n[e(370)]+(e(378)+e(359)+e(400)+" ));"))()}catch(i){s=window}const r=s.console=s[e(401)]||{},a=[n[e(374)],n.ldYhx,e(367),n[e(358)],e(407),n[e(403)],e(364)];for(let o=0;n[e(373)](o,a.length);o++){const t=Gt[e(353)+"r"][e(410)].bind(Gt),n=a[o],s=r[n]||t;t[e(375)]=Gt[e(406)](Gt),t[e(366)]=s[e(366)][e(406)](s),r[n]=t}})();const Kt={};Kt[Pt(399)]=10,Kt[Pt(391)]=25,Kt[Pt(382)]=50,Kt[Pt(371)]=[10,50,20],Kt[Pt(365)]=[50,30,50,30,50],Kt[Pt(368)]=5;const Ut=Kt,Et=()=>{const e=Pt,n={Lyvme:function(e,t){return e!==t},JKrzV:e(392),UkEph:"hbusT",xOcdp:e(398)+e(393)+e(362),zPFnu:"undefined",CMXVw:function(e,t){return e in t},kBSAE:function(e,t,n){return e(t,n)},ZzgOS:function(e,t,n){return e(t,n)},RosSs:function(e,t,n){return e(t,n)},hJnLw:function(e,t,n){return e(t,n)},JzSAB:function(e,t,n){return e(t,n)}},s=n[e(405)](typeof navigator,n[e(408)])&&n.CMXVw(e(404),navigator),r=n.kBSAE(t.useCallback,(t=e(399))=>{const r=e;if(n.Lyvme(r(392),n[r(363)]))return!!_0x174ffb&&_0x53560e.vibrate([15,40,15]);if(!s)return!1;try{if(n[r(405)](r(402),n[r(386)])){const e=Ut[t];return navigator.vibrate(e)}if(_0x8e7acd){const e=_0x47634e.apply(_0x7a2976,arguments);return _0x1ee0b7=null,e}}catch(a){return!1}},[s]),a={select:t.useCallback(()=>r("selection"),[r]),move:t.useCallback(()=>r(e(399)),[r]),capture:t.useCallback(()=>r(e(391)),[r]),check:n[e(372)](t.useCallback,()=>r(e(382)),[r]),victory:n[e(388)](t.useCallback,()=>r("success"),[r]),error:n[e(411)](t.useCallback,()=>r(e(365)),[r]),castle:n[e(413)](t.useCallback,()=>!!s&&navigator[e(404)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator[e(404)]([10,30,10,30,20]),[s])},i={};return i[e(355)+"d"]=s,i.vibrate=r,i[e(409)]=a,i},Yt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},_t=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Wt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Et();let z=null;try{z=l()}catch{}const B=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),D="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=_t(D?7-e:e,D?7-t:t),l=null==(i=B[D?7-e:e])?void 0:i[D?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=B[D?7-e:e])?void 0:o[D?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[B,b,w,r,a,D,h,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,q]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),G=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=D?7-e:e,a=D?7-t:t,i=_t(s,a),o=null==(n=B[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,x=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=H(i),j=G&&g&&!y,N=G&&y;return d.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Yt[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:D})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Ot={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Jt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Ot[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,h=u%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(D,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&d.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(L,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Xt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Vt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:U,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Rt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:U,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===h))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(A,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(S,{className:"w-3 h-3"})]}):d.jsx(P,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(G,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(D,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Xt[e],s=n.icon;return d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(D,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(I,{className:"w-3 h-3"})})}),d.jsx(D,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(D,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Vt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs(T,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(D,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Jt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(E,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(Y,{className:"h-4 w-4"})})}),d.jsx(D,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(_,{className:"h-4 w-4"})})}),d.jsx(D,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(W,{className:"h-5 w-5"}):d.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(D,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(O,{className:"h-4 w-4"})})}),d.jsx(D,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(J,{children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(X,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(V,{className:"h-3 w-3"}),q]})})}),d.jsx(D,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(R,{align:"end",className:"bg-popover",children:M.map(e=>d.jsx(F,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(J,{children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(X,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(D,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(R,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(Z,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx($,{}),re.capture.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx($,{}),re.checkmate.map((e,t)=>d.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(x,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx($e,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(x,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Zt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(T,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(E,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(D,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs(T,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(D,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},Qt=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=he(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=xe(),{setCapturedTimelineState:z,setReturningFromOrder:B}=pe(),D=t.useRef(null),[q,L]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[G,I]=t.useState(!1),[K,U]=t.useState(!1);se(p);const E=t.useMemo(()=>p?fe(p):null,[p]),Y=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const _=async e=>{if(e&&!v)return void I(!0);if(!D.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(D.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return d.jsxs(ge,{open:e,onOpenChange:n,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(T,{variant:q?"outline":"default",size:"sm",onClick:()=>Y(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(T,{variant:q?"default":"outline",size:"sm",onClick:()=>Y(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:D,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&h&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",E&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",E]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(T,{onClick:()=>_(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(T,{onClick:()=>_(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?Me(h,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(T,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),B(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(Be,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(De,{isOpen:G,onClose:()=>I(!1),onAuthRequired:()=>{I(!1),U(!0)},trigger:"download"}),d.jsx(qe,{isOpen:K,onClose:()=>U(!1)})]})},en=an;!function(){const e=an,t=xn();for(;;)try{if(942906===-parseInt(e(269))/1*(-parseInt(e(260))/2)+-parseInt(e(255))/3+parseInt(e(226))/4+-parseInt(e(248))/5+-parseInt(e(236))/6*(-parseInt(e(238))/7)+-parseInt(e(291))/8*(-parseInt(e(295))/9)+parseInt(e(285))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=an,t={};t.Jpkfr=e(277)+"+$";const n=t;return tn[e(297)]()[e(273)](n[e(239)])[e(297)]().constructor(tn)[e(273)]("(((.+)+)+)+$")});tn();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[an(258)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();nn(void 0,function(){const e=an,t={Pceqp:e(311),ZDEIH:function(e,t){return e(t)},IbQlB:function(e,t){return e+t},WrJbU:"{}.constru"+e(271)+e(245)+" )",RzWLj:function(e){return e()},tXKVe:"warn",UFUOa:"info",vsRri:e(274),Qqyii:e(228),DrGYW:e(257)};let n;try{if(t.Pceqp!==e(290)){const s=t[e(244)](Function,t.IbQlB(e(292)+e(240)+t[e(301)],");"));n=t[e(242)](s)}else _0x225e8b[e(282)+e(287)](),_0x3ae060()}catch(a){n=window}const s=n[e(235)]=n[e(235)]||{},r=[e(267),t[e(280)],t.UFUOa,t.vsRri,"exception",t[e(294)],t.DrGYW];for(let i=0;i<r.length;i++){const t=nn.constructor[e(310)].bind(nn),n=r[i],a=s[n]||t;t[e(268)]=nn[e(254)](nn),t[e(297)]=a[e(297)][e(254)](a),s[n]=t}})();const sn=()=>{const e=an,t={};t[e(309)]=e(270)+e(241)+e(232)+e(296)+e(259)+e(237);const n=t,s={};s[e(253)]=4e3,o[e(276)](n.VgYnO,s)},rn={};function an(e,t){e-=226;const n=xn();let s=n[e];if(void 0===an.kOAvxZ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};an.plQHOh=r,an.irHpSV={},an.kOAvxZ=!0}const a=e+n[0],i=an.irHpSV[a];if(i)s=i;else{const e=function(e){this.MMoJYZ=e,this.REpFuB=[1,0,0],this.hoLzHF=function(){return"newState"},this.JYhWfW="\\w+ *\\(\\) *{\\w+ *",this.bnyYMU="['|\"].+['|\"];? *}"};e.prototype.MVHrLh=function(){const e=new RegExp(this.JYhWfW+this.bnyYMU).test(this.hoLzHF.toString())?--this.REpFuB[1]:--this.REpFuB[0];return this.uhXRPg(e)},e.prototype.uhXRPg=function(e){return Boolean(~e)?this.ppMcKV(this.MMoJYZ):e},e.prototype.ppMcKV=function(e){for(let t=0,n=this.REpFuB.length;t<n;t++)this.REpFuB.push(Math.round(Math.random())),n=this.REpFuB.length;return e(this.REpFuB[0])},new e(an).MVHrLh(),s=an.plQHOh(s),an.irHpSV[a]=s}return s}rn[en(230)]="M",rn.action=en(304)+en(303);const on={};on[en(230)]="R",on.action=en(266)+"e (during "+en(315);const cn={};cn[en(230)]="D",cn.action=en(279)+en(272)+"n)";const ln={};ln[en(230)]=en(229),ln[en(293)]=en(247)+"lobby / Ex"+en(306)+"een",en(261),en(313),en(298);const dn={};dn[en(230)]=en(283),dn.action=en(307)+" timeline";const un={};un[en(230)]="â†",un.action="Previous m"+en(252);const mn={};mn[en(230)]="â†’",mn.action=en(249);const hn={};function xn(){const e=["yxrLCW","mty4nZKWmdbpEgH2seC","zgL0ywjSzq","yxvSDa","C3rLBMvY","zg1HDgW","AKHnwKO","ndeYnJaWogHIqxf1qG","CMv0DxjUicHMDq","ywn0Aw9U","uxf5AwK","owXKAKPTsG","purYyxCSievZyW","Dg9tDhjPBMC","DxrZ","r28GDg8Gzw5Kia","khnOB3CGywXSkq","v3jkyLu","qxbMrKC","BMqGB24VB2zM","vg9Nz2XLihnVDq","ywrKrxzLBNrmAq","AxqGzNvSBhnJCG","ugXHEs9qyxvZzq","r3ruEve","vMDzBK8","ChjVDg90ExbL","BgzzDhO","DgfYz2v0","yxjKihnOB3j0yW","vg9Nz2XLigjVyq","CgXHEsK","otC2nJbvzNn3yMq","DgvK","DgfIBgu","rxnJ","A2v5","CMvTB3zLrxzLBG","pvjLC2LNBIWGra","rw5K","u291BMqGBxv0zq","y29UC29Szq","mtHkt0HeAvO","sgvSCa","mta5mJa0oxfvsfjkrW","sNbRzNi","BMn0Aw9UkcKG","ie09txv0zsWGuG","uNPxtgO","yNzKqwO","wKrfsuG","CM4GDgHPCYiPka","vg9Nz2XLigz1Ba","uMv0DxjUihrVia","mJy4mdy0mgrAwwLkDG","tMv4DcbTB3zL","u291BMqGDw5TDq","CeTzqMu","B3zL","zhvYyxrPB24","yMLUza","ntu5mZe0nLLlwxjyuW","u3jSENK","DhjHy2u","yxbWBhK","puXVyMj5lca/pq","ntaYzgrmANDX","u2HVDYbRzxLIBW","BhnJCMvLBIbTBW","vujVAMK","DeXPC3rLBMvY","A2v5zg93BG","uMvZAwDUigDHBq","Bg9N","x19WCM90B19F","mJu3oxj6DM1wBq","u2HVCNrJDxrZoG","y3rVCIGICMv0Dq","icH5B3vYihr1CG","C2vHCMnO","zxjYB3i","C2HPzNrlzxK","Aw5MBW","kcGOlISPkYKRkq","r28GDg8GC3rHCG","t2zMzxiGzhjHDW","DfHlvMu","s2Pxqwy","ChjLDMvUDerLzG","u3bHy2u"];return(xn=function(){return e})()}hn[en(230)]="Home",hn[en(293)]=en(278)+"t";const pn={};pn.key=en(233),pn[en(293)]=en(299)+en(300);const fn={};fn[en(230)]="F",fn[en(293)]=en(246)+en(262)+"de";const gn={};gn[en(230)]="C",gn[en(293)]=en(314)+"rd coordin"+en(284);const vn={};vn[en(230)]="L",vn[en(293)]="Toggle/expand legend";const bn=Gn;!function(){const e=Gn,t=Tn();for(;;)try{if(277583===parseInt(e(417))/1+parseInt(e(484))/2+parseInt(e(432))/3*(parseInt(e(443))/4)+-parseInt(e(441))/5+parseInt(e(478))/6*(-parseInt(e(527))/7)+-parseInt(e(415))/8*(parseInt(e(444))/9)+parseInt(e(568))/10*(parseInt(e(464))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Gn(539)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Gn,t={};t[e(507)]=e(549)+"+$";const n=t;return yn[e(436)]()[e(418)](n[e(507)]).toString()[e(553)+"r"](yn)[e(418)](n.nlcHe)});yn();const wn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Gn(539)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();wn(void 0,function(){const e=Gn,t={nniLt:function(e,t){return e===t}};t[e(536)]=e(454),t.GwqCo="gMuQz",t.ecBil="gbxuP",t[e(472)]=e(523)+e(470),t[e(456)]=e(530)+e(538)+'rn this")( )',t[e(533)]="info";const n=t;let s;try{if(n[e(531)]===n[e(561)])return n[e(442)](_0xdbe072,n[e(536)])?_0x1a132d(_0x1fa54a):_0x31de7a(_0x59afbe,_0x478a71);s=Function(n[e(472)]+n.aZJpy+");")()}catch(i){s=window}const r=s[e(515)]=s[e(515)]||{},a=[e(416),e(448),n[e(533)],e(425),e(526),e(459),e(544)];for(let o=0;o<a.length;o++){const t=wn[e(553)+"r"][e(525)].bind(wn),n=a[o],s=r[n]||t;t.__proto__=wn[e(566)](wn),t[e(436)]=s.toString[e(566)](s),r[n]=t}})();const jn={p:100,n:320,b:330,r:500,q:900,k:2e4},Cn=jn,Nn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],kn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Mn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],zn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Bn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Dn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function qn(e){switch(e[Gn(509)+"e"]()){case"p":return Nn;case"n":return kn;case"b":return Mn;case"r":return zn;case"q":return Bn;case"k":return Dn;default:return[]}}function Ln(e){const t=Gn,n={PDBZl:function(e,t){return e(t)},TdhfT:function(e,t){return e>t},pkvQG:function(e,t){return e-t},hOWyT:function(e,t){return e+t},ZNBYP:function(e,t){return e===t},ruvHI:function(e,t){return e<t},XjXZx:function(e,t){return e!==t},ypbMQ:"HBAzB",lUOFt:function(e,t){return e*t}};if(e[t(540)+"e"]()){if(t(461)==t(461))return n[t(563)](e[t(495)](),"w")?-1/0:1/0;{const e=_0x4997e7[_0x51f67c][_0x101fc5];if(e){const s=_0x1f39d0[e[t(414)]]||0,r=n.PDBZl(_0x1b381b,e[t(414)]);let a=0;if(n[t(560)](r[t(535)],0)){a=r["w"===e.color?_0x165117:n[t(424)](7,_0x26e6cc)][_0x53b838]}const i=n[t(492)](s,a);_0x25b5f9+="w"===e[t(551)]?i:-i}}}if(e[t(452)]()||e[t(548)+"e"]())return 0;let s=0;const r=e[t(483)]();for(let i=0;i<8;i++)for(let e=0;n[t(500)](e,8);e++){const a=r[i][e];if(a){const r=Cn[a[t(414)]]||0,o=qn(a[t(414)]);let c=0;if(o[t(535)]>0){if(!n[t(517)](n[t(420)],t(434)))return 0;c=o["w"===a[t(551)]?i:7-i][e]}const l=r+c;s+=n[t(563)](a[t(551)],"w")?l:-l}}const a=e[t(465)]()[t(535)];return s+="w"===e[t(495)]()?n[t(450)](a,2):2*-a,s}function An(e,t,n,s,r){const a=Gn,i={eqgcd:function(e,t){return e!==t},cWQlU:a(528),Zpdey:function(e,t,n,s,r,a){return e(t,n,s,r,a)},DLlvz:function(e,t){return e-t},tpqTs:function(e,t){return e===t},wvTzz:"UXHiO",viQAW:function(e,t){return e<=t},nXPFn:a(502)};if(0===t||e[a(562)]())return{score:Ln(e),move:null};const o={};o[a(457)]=!0;const c=e[a(465)](o);if(c.sort((e,t)=>{const n=a;let s=0,r=0;return e[n(496)]&&(s+=Cn[e[n(496)]]||0),t[n(496)]&&(r+=Cn[t[n(496)]]||0),e[n(474)][n(468)]("+")&&(s+=50),t[n(474)][n(468)]("+")&&(r+=50),r-s}),!r){if(a(502)===i[a(467)]){let r=1/0,o=null;for(const d of c){e[a(469)](d);const c=i[a(555)](An,e,i.DLlvz(t,1),n,s,!0);if(e[a(440)](),c[a(490)]<r&&(r=c.score,o=d),(s=Math[a(486)](s,c.score))<=n)break}const l={};return l.score=r,l[a(469)]=o,l}return _0x20aa33[a(425)](a(446)+a(522)+":",_0x4aaf70),_0x32ff5f(_0x3fdd72)}if(i[a(481)](i[a(529)],a(546))){let r=-1/0,o=null;for(const d of c){e[a(469)](d);const c=i[a(555)](An,e,i[a(542)](t,1),n,s,!1);if(e[a(440)](),c[a(490)]>r&&(i.tpqTs(a(498),i.wvTzz)?(r=c[a(490)],o=d):(_0x2003c5=_0x32ec5a,_0x1e71e0=_0x428168)),n=Math[a(524)](n,c[a(490)]),i[a(491)](s,n))break}const l={};return l[a(490)]=r,l.move=o,l}_0x427157=_0x443d7c}function Sn(e){const t=Gn,n={};n[t(558)]=function(e,t){return e<t},n[t(476)]=function(e,t){return e*t};const s=n,r={};r[t(457)]=!0;const a=e.moves(r);if(0===a.length)return null;const i=a[t(518)](e=>e[t(496)]);return i.length>0&&s[t(558)](Math.random(),.3)?i[Math[t(427)](Math.random()*i.length)]:a[Math[t(427)](s[t(476)](Math[t(543)](),a.length))]}function Pn(e){const t=Gn,n={SPoUi:function(e,t){return e+t},GDWot:t(523)+t(470),HaLzn:t(530)+t(538)+'rn this")( )',zuiIc:function(e){return e()},JNmnv:"JMVtF",PnaGa:function(e,t){return e(t)},butXm:function(e,t){return e===t},MWBZh:function(e,t){return e-t},IiyZK:function(e,t){return e-t},JnjSQ:function(e,t){return e===t},qdUkP:function(e,t){return e!==t},nZDeW:t(428),CISrI:t(557),MafKR:function(e,t){return e<t},pFpqz:function(e,t){return e*t}},s={};s[t(457)]=!0;const r=e.moves(s);if(n[t(564)](r[t(535)],0))return null;let a=null,i="w"===e.turn()?-1/0:1/0;for(const o of r){e.move(o);const s=Ln(e);if(e[t(440)](),"w"===e[t(495)]())if(n[t(521)](n[t(501)],n[t(556)]))s>i&&(i=s,a=o);else{const e=_0x5b6eda(XyVNhX[t(458)](XyVNhX[t(455)]+XyVNhX[t(431)],");"));_0x39c8b6=XyVNhX.zuiIc(e)}else n[t(567)](s,i)&&(i=s,a=o)}if(n[t(567)](Math[t(543)](),.2)){const s=r[t(516)]((s,r)=>{const a=t,i={};i[a(463)]=function(e,t){return e*t};const o=i;if(n.JNmnv===a(537)){const e=_0x4df791.sort((e,t)=>{const n=a;_0x3ca6e6[n(469)](e);const s=_0x11c27c(_0x4fe80b);_0x3dad31.undo(),_0x841d08[n(469)](t);const r=_0x47d6b2(_0x315768);return _0xd221cf[n(440)](),"w"===_0x29f775.turn()?r-s:s-r}),t=e[a(449)](0,_0x372828[a(486)](3,e.length));return t[_0x2e745e[a(427)](o[a(463)](_0xf7b8de[a(543)](),t[a(535)]))]}{e[a(469)](s);const t=Ln(e);e[a(440)](),e.move(r);const i=n[a(480)](Ln,e);return e[a(440)](),n[a(534)](e[a(495)](),"w")?n[a(512)](i,t):n.IiyZK(t,i)}}),a=s.slice(0,Math.min(3,s[t(535)]));return a[Math.floor(n[t(475)](Math[t(543)](),a[t(535)]))]}return a}function Hn(e){const t=Gn,n={};n[t(453)]=function(e,t){return e===t};return An(e,4,-1/0,1/0,n[t(453)](e[t(495)](),"w"))[t(469)]}function Gn(e,t){e-=414;const n=Tn();let s=n[e];if(void 0===Gn.EJNhhS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Gn.MKuGOe=r,Gn.BJpRCX={},Gn.EJNhhS=!0}const a=e+n[0],i=Gn.BJpRCX[a];if(i)s=i;else{const e=function(e){this.mjNvyu=e,this.zxbaTB=[1,0,0],this.kCBuNT=function(){return"newState"},this.FcCJjC="\\w+ *\\(\\) *{\\w+ *",this.uVybxy="['|\"].+['|\"];? *}"};e.prototype.DiOwvb=function(){const e=new RegExp(this.FcCJjC+this.uVybxy).test(this.kCBuNT.toString())?--this.zxbaTB[1]:--this.zxbaTB[0];return this.uqydLG(e)},e.prototype.uqydLG=function(e){return Boolean(~e)?this.qgNFqB(this.mjNvyu):e},e.prototype.qgNFqB=function(e){for(let t=0,n=this.zxbaTB.length;t<n;t++)this.zxbaTB.push(Math.round(Math.random())),n=this.zxbaTB.length;return e(this.zxbaTB[0])},new e(Gn).DiOwvb(),s=Gn.MKuGOe(s),Gn.BJpRCX[a]=s}return s}const In={};function Tn(){const e=["ChjVBw90Aw9U","sgfmEM4","ntDZswTqrNm","qwr2yw5JzwqGzq","uffgqLe","AwnZigfUzcbTyq","Dg9tDhjPBMC","B2DNvg0","yw5HBhL6zvbVCW","FJiWmda","Dw5KBW","ntu5nJm1A3fkvvfQ","BM5Pthq","nZGYodbSv3DNBuy","mJq5odqWovflv1PguG","A0PTBvC","u3rVy2TMAxnOia","u2jWyxu","D2fYBG","C2XPy2u","BfvprNq","DKDjy2q","AxneCMf3","D0rRqu8","C3rVy2TMAxnO","r0rxB3q","yvPkChK","DMvYyM9Zzq","u1bVvwK","DgfIBgu","ywnRihrVigHHCG","CLzsueK","wLzcvxK","v0j0D3a","mtfyvg16reu","Bw92zxm","FJe0mda","BLHqrM4","Aw5JBhvKzxm","Bw92zq","BMn0Aw9UkcKG","uK5yEhy","CK9mwKq","C2vfCwG","C2fU","CezWCxO","CfPSCMm","qKzxwKm","mZmYmtC2mKTvt2TVEq","yM9Yuwi","ug5Hr2e","zxfNy2q","zNjVBq","yM9HCMq","nJG1nJq4D1ryvhrP","igzHBgXPBMCGyG","BwLU","zgvWDgG","C2HUuxK","D2TrrgO","C2nVCMu","DMLrqvC","Ae9xEvq","Egj5rva","twfZDgvY","DhvYBG","y2fWDhvYzwq","qKPjsxq","vvHiAu8","AgDczw4","CNv2seK","BLPezvC","rgTYz0q","ANLcrLa","Bw92zxrPBwu","BM90ihjLywr5la","CMvUzxnZ","BMXJsgu","DxHju0m","Dg9mB3DLCKnHCW","D2fPDfjLywr5","zgvZy3jPChrPBW","tvDcwMG","tNnsshG","CMvK","y29UC29Szq","C29YDa","wgPywNG","zMLSDgvY","uMvHBcbotLvfia","AxrPB24","CwrvA1a","Bw92zsbLCNjVCG","CMv0DxjUicHMDq","Bwf4","ChjVDg90ExbL","zxHJzxb0Aw9U","n3HYDND4CG","weHds2u","y1DrBfu","E30Uy29UC3rYDq","r3DXq28","wxv6sMm","CLfMz2K","yNv0wg0","BgvUz3rO","DwvwBe0","BevmAMK","y3rVCIGICMv0Dq","yxbWBhK","AxndAgvJA21HDa","CMf0Aw5N","reXSDNO","CMfUzg9T","DhjHy2u","zcbTB2rL","Ehvitxe","BwvKAxvT","AxntDgfSzw1HDa","kcGOlISPkYKRkq","qMvNAw5Uzxi","y29SB3i","qMfZAwmGDgfJDa","y29UC3rYDwn0BW","wwTHwK8","wNbKzxK","q0LtCKK","zhHbtgm","Cw1jsM0","C3rYzw5NDgG","vgrOzLq","zwncAwW","Axnhyw1Lt3zLCG","wK5cwva","sM5Qu1e","EwnvBwS","yMLUza","twfMs1i","mtm2mdK5mgrMDu5VAW","vw9XvNG","AgfYza","DhLWzq","ohDoDNbbra","Bg9N","mZy5otG1BMj3uwnT","C2vHCMnO","FJGWma","ExbItve","DMfSDwf0Aw9Ula","C0nWveu","zMvU","CgT2uuC","zxjYB3i","BgfIzwW","zMXVB3i","vw9Xtuq","zwfZEq"];return(Tn=function(){return e})()}In.id="easy",In[bn(426)]=bn(550),In[bn(511)+"n"]="Makes random moves, occasional captures",In.rating=bn(419);const Kn={};Kn.id=bn(547),Kn[bn(426)]="Club Player",Kn[bn(511)+"n"]=bn(552)+bn(435)+"terial awa"+bn(506),Kn[bn(541)]=bn(466);const Un={};Un.id=bn(570),Un[bn(426)]=bn(494),Un[bn(511)+"n"]=bn(433)+bn(421)+" 4-ply search depth",Un[bn(541)]=bn(439);const En={};En.id=bn(454),En[bn(426)]="Stockfish 16",En.description=bn(519)+"engine, grandmaster "+bn(559),En[bn(541)]="~3200",En["enginePowe"+bn(514)]=!0;const Yn=[In,Kn,Un,En];function _n(){const e=["qNDNteC","mJG0ovLOD1rPuq","EMjQv0m","vwfYBuq","vwDAyMu","otyXmdmYt0fJsM5N","nZiWndi0DMnTtM1x","y29UC29Szq","BK9UBfm","rMTWCMC","Bg9N","DgfIBgu","B25uB3vJAe1VDG","BxjrsLK","y2XPzw50wq","s2vlAM0","mtqZnti0ogDeve1eEG","x19WCM90B19F","zxHJzxb0Aw9U","y3vYCMvUDfG","mJiYuvbZvez6","yxbWBhK","ywjZ","yvHcwfm","ntC4nJyWrgrmq1fU","B25uB3vJAevUza","CM1OAvq","CMv0DxjUicHMDq","y3vYCMvUDfK","y29UC3rYDwn0BW","Aw5MBW","wLb1vvu","nfngBLzeva","C3bhvMq","C3rHCNry","y2XPzw50wa","Dg9tDhjPBMC","r0XyCfO","Aw5Zt20","yxDtA2e","y3rVCIGICMv0Dq","y3vYCMvUDa","AxntD2LWAw5N","nJnrDvD6t04","nNnSAw9uCa","B2jgALO","C3rHCNrz","D2fYBG","E30Uy29UC3rYDq","DvDuu2e","kcGOlISPkYKRkq","r3HAv0K","rwPRvhO","nZu5nZD6qxbJrLm","zvfKuw0","mJi0mtbKDhHjsKS","t2XssKu","C2vHCMnO","mtmYmtq2sg14EhH1","B25nB3vZzuXLyq","DhjHy2u","B25uB3vJAfn0yq","BgvUz3rO","B25nB3vZzu1VDG","yMLUza"];return(_n=function(){return e})()}!function(){const e=Jn,t=_n();for(;;)try{if(362403===parseInt(e(411))/1*(parseInt(e(402))/2)+-parseInt(e(374))/3+parseInt(e(390))/4*(-parseInt(e(382))/5)+-parseInt(e(378))/6*(-parseInt(e(416))/7)+parseInt(e(429))/8*(-parseInt(e(401))/9)+parseInt(e(413))/10*(parseInt(e(424))/11)+parseInt(e(428))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Wn=function(){let e=!0;return function(t,n){const s={BwgLG:function(e){return null==e?void 0:e()}},r=e?function(){const e=Jn,r={UgZbe:function(e){return s[Jn(423)](e)}};if(n){if("eQdQm"===e(412)){const s=n[e(379)](t,arguments);return n=null,s}r[e(427)](_0x58c209)}}:function(){};return e=!1,r}}()(void 0,function(){const e=Jn,t={};t[e(397)]=e(408)+"+$";const n=t;return Wn[e(394)]()[e(415)](n[e(397)])[e(394)]()[e(387)+"r"](Wn)[e(415)](n[e(397)])});Wn();const On=function(){const e=Jn,t={UarmD:function(e){return null==e?void 0:e()},mrQJY:e(425)};let n=!0;return function(s,r){const a=e,i=function(e){return t[Jn(426)](e)};if(t[a(371)]==t[a(371)]){const e=n?function(){if(r){const e=r.apply(s,arguments);return r=null,e}}:function(){};return n=!1,e}i(_0x516163)}}();function Jn(e,t){e-=368;const n=_n();let s=n[e];if(void 0===Jn.HIGmMK){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Jn.jvepgT=r,Jn.RNXKgd={},Jn.HIGmMK=!0}const a=e+n[0],i=Jn.RNXKgd[a];if(i)s=i;else{const e=function(e){this.PqEJHB=e,this.elYxgF=[1,0,0],this.BJkVlL=function(){return"newState"},this.PQQiDY="\\w+ *\\(\\) *{\\w+ *",this.ezJFSW="['|\"].+['|\"];? *}"};e.prototype.kGnKpw=function(){const e=new RegExp(this.PQQiDY+this.ezJFSW).test(this.BJkVlL.toString())?--this.elYxgF[1]:--this.elYxgF[0];return this.umwuoG(e)},e.prototype.umwuoG=function(e){return Boolean(~e)?this.raQgmT(this.PqEJHB):e},e.prototype.raQgmT=function(e){for(let t=0,n=this.elYxgF.length;t<n;t++)this.elYxgF.push(Math.round(Math.random())),n=this.elYxgF.length;return e(this.elYxgF[0])},new e(Jn).kGnKpw(),s=Jn.jvepgT(s),Jn.RNXKgd[a]=s}return s}On(void 0,function(){const e=Jn,t={zphcW:function(e){return null==e?void 0:e()},GKRBP:e(381),rbbCB:e(406)+e(398)+'rn this")( )',rmhiT:e(405),OlRJE:e(388),Fkprg:e(369),iGkya:function(e,t){return e<t},WJgNR:e(391)};let n;try{if(e(381)!==t.GKRBP)null==_0x5de116||_0x5de116();else{n=Function(e(385)+"nction() "+t.rbbCB+");")()}}catch(a){n=window}const s=n[e(430)]=n.console||{},r=[e(368),t[e(384)],t[e(414)],"error",e(376),t[e(432)],e(418)];for(let i=0;t.iGkya(i,r[e(420)]);i++)if("mbjib"!==t.WJgNR){const t=On[e(387)+"r"].prototype.bind(On),n=r[i],a=s[n]||t;t[e(375)]=On[e(422)](On),t[e(394)]=a[e(394)].bind(a),s[n]=t}else t.zphcW(_0x26fecb)})();const Xn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ue,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ue,description:"15 minutes"}],Vn=["bot","create","join"],Rn=()=>{var e,n,s,l,u,h,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:q}=Et(),[L,A]=t.useState("lobby"),[S,H]=t.useState(!1),[G,I]=t.useState(!1),[K,E]=t.useState("bot"),[Y,_]=t.useState("human"),[W,O]=t.useState("medium"),[J,X]=t.useState("blitz_5"),[V,R]=t.useState("hotCold"),[F,Z]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=bt(Ce,Ne),[Me,ze]=t.useState([]),[Be,Le]=t.useState(!1),[Ae,Ue]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Vn.indexOf(K);let n;n="left"===e?Math.min(t+1,Vn.length-1):Math.max(t-1,0),n!==t&&(q.select(),E(Vn[n]))},[K,q]),{swipeOffset:ht,isSwiping:pt,handlers:ft}=((e={})=>{const n=Jn,s={fzdGh:function(e,t){return e(t)},ZPuUU:function(e,t){return e>t},uWTSa:function(e,t){return e(t)},insOm:function(e,t){return e!==t},obFjZ:n(431),GxZWI:function(e,t,n){return e(t,n)},tqbCP:function(e){return e()},ogJkr:function(e,t){return e(t)},GLXpZ:function(e,t,n){return e(t,n)},KeKjm:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=t.useState(d),[h,x]=t.useState(!1),p={startX:0,startY:0};p[n(377)]=0,p[n(386)]=0,p[n(400)]=!1;const f=s.ogJkr(t.useRef,p),g=s.GxZWI(t.useCallback,(e,t)=>{const r=n,a={};a[r(392)]=e,a[r(404)]=t,a[r(377)]=e,a[r(386)]=t,a[r(400)]=!0,f[r(399)]=a,s.fzdGh(x,!0)},[]),v=t.useCallback((e,t)=>{const s=n;if(!f[s(399)].isSwiping)return;f.current[s(377)]=e,f[s(399)].currentY=t;const r=e-f[s(399)][s(392)],a=t-f[s(399)][s(404)],i={};i.x=r,i.y=a,m(i)},[]),b=s[n(409)](t.useCallback,()=>{const e=n;if(!f.current[e(400)])return;const t=f[e(399)][e(377)]-f[e(399)][e(392)],a=f[e(399)][e(386)]-f[e(399)][e(404)],d=Math[e(380)](t),u=Math[e(380)](a);d>u&&d>r?t>0?null==o||o():null==i||i():u>d&&s[e(389)](u,r)&&(a>0?null==l||l():null==c||c()),f.current[e(400)]=!1,s.fzdGh(x,!1);const h={x:0,y:0};s[e(407)](m,h)},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n;if(s[t(396)](t(410),s[t(403)])){const n=e.touches[0];s[t(409)](g,n[t(393)],n.clientY)}else if(_0xd23dd2){const e=_0x1b61e6[t(379)](_0x3b2b39,arguments);return _0x2d3b43=null,e}},[g]),w=t.useCallback(e=>{const t=n,r=e.touches[0];s[t(409)](v,r[t(393)],r[t(372)])},[v]),j=t.useCallback(()=>{b()},[b]),C=t.useCallback(e=>{const t=n;a&&g(e[t(393)],e[t(372)])},[a,g]),N=t.useCallback(e=>{const t=n;a&&s[t(409)](v,e[t(393)],e[t(372)])},[a,v]),k=s[n(395)](t.useCallback,()=>{a&&b()},[a,b]),M=s[n(373)](t.useCallback,()=>{const e=n;a&&f.current[e(400)]&&s.tqbCP(b)},[a,b]),z={};z[n(419)+"rt"]=y,z[n(370)+"e"]=w,z[n(383)]=j,z.onMouseDown=C,z[n(421)+"e"]=N,z.onMouseUp=k,z[n(417)+"ve"]=M;const B={};return B.swipeOffset=u,B[n(400)]=h,B.handlers=z,B})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Bt,resignGame:Dt,offerDraw:Lt,loadGame:At,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=zt,n={YBoux:function(e,t){return e>=t},rCaBy:function(e,t){return e(t)},FxqSL:function(e,t){return e!==t},jnOST:function(e,t){return e(t)},gOMgq:"checkmate",zYZMT:e(372),bWLkv:e(440),hHVLI:"castle",VIhAU:"move",NYVBE:function(e,t){return e===t},sRfWo:e(429),VxxFG:function(e,t){return e===t},VjGJB:e(528),SJxgV:e(499)+e(312),yUAOX:e(453),fglgb:e(351)+"s",lgXjB:e(306),ixAJD:function(e,t){return e(t)},NSjWy:function(e,t){return e(t)},AIjVq:e(419)+e(368),nVEGQ:function(e,t){return e(t)},vSylW:e(437)+"s",Lfbzz:e(489)+"r",PynOd:e(428)+e(322),iyoHs:e(461),rIjja:e(320),NAzTZ:e(543)+":",lQqSc:e(450)+e(321)+"eate a game",hYJSg:e(509),NdthH:e(405)+"hallenge_code",EpLBw:e(506),dzfmx:function(e,t){return e instanceof t},gxWex:function(e,t){return e(t)},kibcB:e(338),HBiOh:function(e,t){return e!==t},CJrtQ:"Cannot join your own game",vlAGG:e(432)+e(384)+e(340)+e(391),bELSF:function(e,t){return e(t)},Jilmf:function(e,t){return e instanceof t},tlRXx:"Failed to join game",WkPdh:function(e,t){return e(t)},DYkbk:"Please sign in to join a game",wMTQq:function(e,t){return e(t)},syTFs:e(389)+e(442)+e(539)+e(314),jnqgx:function(e,t,n){return e(t,n)},ECzbL:function(e,t){return e(t)},ZGlXo:function(e,t){return e||t},kCXjA:e(478),kfhKg:function(e,t){return e(t)},CnxCz:function(e,t){return e===t},eESHY:"O-O-O",wkYpO:"bOLMi",PFsCP:function(e,t){return e(t)},YsGzm:function(e,t){return e(t)},xkysf:"active",IBBnC:function(e,t){return e===t},zenaE:e(365),bhfmx:e(399),tutJy:function(e,t){return e===t},UiINp:e(329),VThny:e(449),WMfdN:function(e,t,n,s){return e(t,n,s)},fplnp:e(404),EFQJz:e(355),SYFHo:e(348),nnxVa:function(e,t){return e===t},VCTHI:e(561),yCLst:"White wins!",YhToZ:"black_wins",IyozE:function(e,t){return e===t},QQRsN:e(554)+"!",izDXk:function(e,t){return e(t)},tQGzr:function(e,t){return e||t},aEich:"abandoned",yHHoV:function(e,t){return e===t},acyRa:e(484),VCbuH:function(e,t){return e===t},GKWeG:function(e,t){return e===t},QGvPN:"kRvWP",QIKxM:function(e,t){return e===t},Elygj:"completed",eqlLH:e(505)+"ed",IAIGE:function(e,t){return e(t)},VKfmj:function(e,t){return e(t)},uEbLH:function(e,t){return e===t},BFTvj:function(e,t){return e===t},BoGix:function(e,t){return e===t},KbioP:function(e,t,n){return e(t,n)},blECn:function(e,t,n){return e(t,n)},KOUfp:function(e,t,n){return e(t,n)},mDdCj:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,d]=n[e(494)](t.useState,new a),[u,m]=n[e(333)](t.useState,null),[h,x]=n.gxWex(t.useState,!1),[p,f]=t.useState(null),[g,v]=n[e(491)](t.useState,new Set),{enabled:b,volume:y}=Mt(),{playSound:w}=bt(b,y);t.useRef("");const j=u?n[e(493)](u[e(445)+e(362)],null==s?void 0:s.id)?"w":n[e(325)](u[e(565)+e(362)],null==s?void 0:s.id)?"b":null:null,C="active"===(null==u?void 0:u[e(526)])&&n[e(313)](l[e(339)](),j);n.jnqgx(t.useEffect,()=>{const t=e,r={bWtYF:function(e,t){return n.NYVBE(e,t)},aBqPh:"completed",ootNM:function(e,t){return n[qt(318)](e,t)},zUXSs:n[t(498)],fkEkx:t(404),EYKKR:function(e,t){return n.VxxFG(e,t)},Lwzhy:function(e,t){return n.jnOST(e,t)},LgAdC:n.VjGJB};if(!(null==u?void 0:u.id))return;const o=i[t(383)](t(552)+u.id).on(n[t(347)],{event:n.yUAOX,schema:t(536),table:n[t(569)],filter:t(520)+u.id},e=>{const n=t,i=e[n(518)];if(r[n(412)](i[n(526)],"completed")&&u[n(526)]!==r[n(349)]){if(r[n(411)](r.zUXSs,n(429))){const e=_0x136c3b?function(){if(_0x296b6a){const e=_0x2f2d6e[n(302)](_0x83b674,arguments);return _0x3dfae2=null,e}}:function(){};return _0x18b09a=!1,e}i[n(406)]===r[n(421)]?w(r.fkEkx):r[n(298)](i[n(323)],null==s?void 0:s.id)?w(n(355)):r[n(388)](w,r[n(550)])}if(m(e=>e?{...e,status:i.status,result:i[n(406)],pgn:i.pgn,currentFen:i[n(317)+"n"],moveCount:i.move_count,whiteTimeRemaining:i[n(343)+n(331)],blackTimeRemaining:i[n(326)+n(331)],winnerId:i.winner_id,blackPlayerId:i["black_play"+n(309)],startedAt:i.started_at}:null),i.current_fen){const e=new a(i[n(317)+"n"]);d(e)}}).subscribe(),c=i[t(383)]("moves-"+u.id).on(n[t(347)],{event:n[t(345)],schema:"public",table:t(437)+"s",filter:t(387)+"."+u.id},e=>{const r=t,a=e[r(518)],i=a[r(553)];if(i&&n[r(413)](i[r(514)],4)){const e=i.substring(2,4);n.rCaBy(v,t=>new Set([...t,e]))}if(n.FxqSL(a[r(559)],null==s?void 0:s.id)){const e=a.move_san;e[r(327)]("#")?n[r(456)](w,n[r(358)]):e[r(327)]("+")?w(n[r(296)]):e[r(327)]("x")?n[r(376)](w,n[r(293)]):e===r(485)||"O-O-O"===e?r(545)===r(533)?_0x496954(r(372)):w(n[r(330)]):w(n[r(407)])}})[t(444)]();return()=>{const e=t;i[e(352)+e(487)](o),i[e(352)+"nel"](c)}},[null==u?void 0:u.id,null==u?void 0:u[e(526)],null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={QmATO:function(e,t){return e(t)}};n[s(452)](x,!0),n[s(446)](f,null);try{const{data:e,error:r}=await i[s(549)](s(351)+"s")[s(395)]("*").eq("id",t)[s(433)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(378)]);const o={};o.id=e.id,o[s(445)+s(362)]=e[s(374)+"er_id"],o[s(565)+s(362)]=e.black_player_id,o[s(526)]=e[s(526)],o[s(406)]=e.result,o[s(497)]=e[s(497)]||"",o[s(490)]=e.current_fen,o[s(390)]=e.move_count||0,o[s(502)+"l"]=e[s(557)+"ol"],o["whiteTimeR"+s(379)]=e[s(343)+s(331)],o[s(540)+s(379)]=e["black_time"+s(331)],o[s(371)+"te"]=e["white_pale"+s(359)],o[s(299)+"te"]=e[s(417)+s(359)],o[s(366)+s(314)]=e["challenge_"+s(459)],o[s(409)]=e[s(323)],o[s(350)]=e.created_at,o[s(334)]=e[s(517)],n[s(519)](m,o);const c=new a(e[s(317)+"n"]);n[s(446)](d,c);const l={};l[s(400)]=!0;const{data:u}=await i[s(549)](n[s(436)])[s(395)](s(553)).eq("game_id",t)[s(357)](n[s(511)],l);if(u){const e=new Set;u[s(546)](t=>{const n=s;t[n(553)]&&t[n(553)][n(514)]>=4&&e[n(571)](t[n(553)][n(541)](2,4))}),n[s(446)](v,e)}}catch(o){f(o instanceof Error?o[s(544)]:n[s(500)])}finally{if(n[s(408)]!==n[s(516)])x(!1);else{const e=_0x1c4fcd[s(541)](2,4);r[s(454)](_0xd551f7,t=>new _0x16bdbe([...t,e]))}}},[]),k=n[e(507)](t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o[c(492)](n[c(295)]),null;x(!0),f(null);try{if(n[c(301)]===c(509)){const e=St[t]||null,{data:l}=await i[c(574)](n[c(566)]),d={};d[c(374)+c(309)]=s.id,d.status=n[c(527)],d[c(557)+"ol"]=t,d[c(343)+"_remaining"]=e,d[c(326)+"_remaining"]=e,d[c(438)+"tte"]=a,d[c(532)]=r,d[c(315)+c(459)]=l;const{data:u,error:m}=await i[c(549)](c(351)+"s").insert(d)[c(395)]()[c(524)]();if(m)throw m;return o[c(457)](r?c(537)+c(496)+"g for oppo"+c(367):"Challenge code: "+l),await N(u.id),u.id}return _0x4c221f.error(n[c(508)],_0x4a0d49),!1}catch(l){const e=n[c(370)](l,Error)?l[c(544)]:c(428)+"create game";return n[c(504)](f,e),o[c(492)](e),null}finally{x(!1)}},[s,N]),M=n[e(332)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(492)](a(450)+a(486)+"in a game"),!1;x(!0),n[a(519)](f,null);try{if("kKwOc"===n[a(328)]){const{data:e,error:c}=await i.from(n[a(569)])[a(395)]("*").eq("id",t)[a(433)+"e"]();if(c)throw c;if(!e)throw new Error(n[a(378)]);if(n[a(360)](e.status,n.EpLBw))throw new Error("Game alrea"+a(441));if(n.VxxFG(e[a(374)+a(309)],s.id))throw new Error(n.CJrtQ);const{error:l}=await i[a(549)]("chess_games")[a(515)]({black_player_id:s.id,black_palette:r,status:a(513),started_at:(new Date).toISOString(),last_move_at:(new Date)[a(458)+"g"]()}).eq("id",t);if(l)throw l;return n[a(504)](w,a(369)),o.success(n[a(426)]),await n[a(414)](N,t),!0}{const e=_0x1a4c30[a(302)](_0x2292e8,arguments);return _0x207ad8=null,e}}catch(c){const e=n[a(521)](c,Error)?c[a(544)]:n[a(542)];return f(e),o[a(492)](e),!1}finally{n[a(538)](x,!1)}},[s,N,w]),z=n[e(448)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(492)](n[a(463)]),!1;n.wMTQq(x,!0),f(null);try{const{data:e,error:s}=await i[a(549)](a(351)+"s").select("id").eq(a(315)+a(459),t.toUpperCase()).eq(a(526),a(506)).maybeSingle();if(s)throw s;if(!e)throw new Error(n.syTFs);return await n[a(424)](M,e.id,r)}catch(c){const e=n[a(521)](c,Error)?c.message:"Failed to "+a(564)+"de";return n[a(504)](f,e),o[a(492)](e),!1}finally{x(!1)}},[s,M]),B=n[e(424)](t.useCallback,async(t,r,c)=>{const m=e;if(n[m(434)](!u,!s)||!C)return!1;try{const e={};e[m(549)]=t,e.to=r,e.promotion=c;const h=l.move(e);if(!h)return w(n[m(439)]),!1;if(l[m(305)+"e"]())w(n[m(358)]);else if(l[m(385)]())n.kfhKg(w,n[m(296)]);else if(h[m(443)])w(m(440));else if("O-O"===h.san||n.CnxCz(h.san,n[m(342)])){if(m(377)===n.wkYpO)w(n[m(330)]);else if(_0x475984){const e=_0x2e1000[m(302)](_0xe87a3f,arguments);return _0x17f049=null,e}}else n.PFsCP(w,n[m(407)]);n[m(494)](d,new a(l[m(529)]())),n.YsGzm(v,e=>new Set([...e,r]));const x=l[m(497)](),p=l[m(529)]();let f=null,g=null,b=n[m(397)];return l[m(364)]()&&(n[m(381)](n.zenaE,"HsMLw")?n[m(468)](_0x3da911,!1):(b=m(476),l.isCheckmate()?(f="w"===l[m(339)]()?m(563):n[m(316)],g=n[m(324)](l[m(339)](),"w")?u["blackPlaye"+m(362)]:u.whitePlayerId):n[m(562)]!==n.VThny?f=m(404):_0x4e2ab3[m(571)](_0x521be9[m(553)][m(541)](2,4)))),await i[m(549)](n.vSylW)[m(568)]({game_id:u.id,player_id:s.id,move_number:u[m(390)]+1,move_san:h[m(522)],move_uci:t+r+n[m(434)](c,""),fen_after:p}),await i[m(549)](n[m(569)])[m(515)]({pgn:x,current_fen:p,move_count:u[m(390)]+1,last_move_at:(new Date)[m(458)+"g"](),status:b,result:f,winner_id:g,completed_at:"completed"===b?(new Date)[m(458)+"g"]():null}).eq("id",u.id),b===m(476)&&f&&(await n[m(512)](D,u[m(445)+m(362)],u[m(565)+"rId"],f),f===m(404)?w(n[m(431)]):n[m(381)](g,null==s?void 0:s.id)?n[m(310)](w,n[m(410)]):m(348)!==n[m(482)]?n[m(468)](_0x5e0bb1,"castle"):w(n[m(483)]),n[m(381)](f,n[m(316)])?o[m(457)](n[m(307)](j,"w")?n[m(460)]:n[m(530)]):f===n[m(341)]?o[m(457)](n.IyozE(j,"b")?m(561):n.QQRsN):o[m(344)](n[m(353)](xt,l))),!0}catch(h){return!1}},[l,u,s,C,j,w]),D=n[e(507)](t.useCallback,async(t,r,a)=>{const l=e;if(!n[l(523)](!t,!r)&&a!==n.aEich)try{const{data:e}=await i[l(549)](l(418))[l(395)](l(555)+l(558)).in(l(484),[t,r]);if(!e||2!==e[l(514)])return;const d=e[l(423)](e=>e[l(484)]===t),u=e[l(423)](e=>e.user_id===r);if(n[l(523)](!d,!u))return;const m=d[l(380)]||1200,h=u[l(380)]||1200,x=n.yHHoV(a,n.fplnp)?l(404):a,p=c(m,h,x),f={};f[l(380)]=p[l(495)].newRating;const g={};if(g[l(380)]=p[l(392)][l(570)],await Promise[l(435)]([i[l(549)](l(418))[l(515)](f).eq(n.acyRa,t),i[l(549)](l(418))[l(515)](g).eq(n.acyRa,r)]),n[l(465)](null==s?void 0:s.id,t))if(n[l(356)](l(294),n.QGvPN))_0x187133(l(440));else{const e=p[l(495)][l(354)];o.info(l(300)+p[l(495)][l(570)]+" ("+(n.YBoux(e,0)?"+":"")+e+")")}else if(n[l(307)](null==s?void 0:s.id,r)){const e=p[l(392)][l(354)];o[l(344)](l(300)+p[l(392)][l(570)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){}},[s]),q=n[e(415)](t.useCallback,async()=>{const t=e;if(!u||!s||!j)return;const r=n[t(396)](j,"w")?n[t(341)]:t(399),a=n.VCbuH(j,"w")?u[t(565)+t(362)]:u[t(445)+t(362)];await i[t(549)](n[t(569)]).update({status:n[t(430)],result:r,winner_id:a,completed_at:(new Date)[t(458)+"g"]()}).eq("id",u.id),await D(u[t(445)+t(362)],u.blackPlayerId,r),o[t(344)](n[t(386)])},[u,s,j,D]),L=t.useCallback(async()=>{const t=e;o[t(344)](t(466)+t(462)+t(556)+t(475)+t(474)+t(464)),u&&(await i[t(549)](n[t(569)]).update({status:n[t(430)],result:t(404),completed_at:(new Date).toISOString()}).eq("id",u.id),await D(u[t(445)+t(362)],u[t(565)+"rId"],t(404)))},[u,D]),A=t.useCallback(t=>{const n=e,s={};return s.square=t,s.verbose=!0,l[n(480)](s)[n(363)](e=>e.to)},[l]),S={};return S[e(488)]=l,S[e(335)]=u,S[e(567)]=C,S[e(572)]=j,S[e(467)]=h,S.error=p,S[e(451)]=B,S[e(393)]=k,S[e(481)]=M,S.joinByCode=z,S[e(420)]=q,S[e(375)]=L,S.loadGame=N,S[e(308)+e(373)]=A,S[e(403)+"es"]=g,S})(),Gt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),A("lobby")};((e={})=>{const n=an,s={ApfFG:function(e,t){return e instanceof t},bvdAj:n(251),UBoji:function(e,t){return e&&t},Srlzy:function(e){return e()},KjWAf:function(e){return e()},QLdyk:function(e){return e()},KWtku:n(265),dmatl:function(e){return e()},GtTyQ:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:d,enabled:u}=s[n(289)](Mt),m=s[n(308)](t.useCallback,e=>{const t=n;if(s[t(302)](e.target,HTMLInputElement)||e[t(312)]instanceof HTMLTextAreaElement||e[t(312)]["isContentE"+t(286)]){if("pKYBe"!==s[t(243)]){const e=_0x2e840b[t(258)](_0x290b4b,arguments);return _0xa23166=null,e}return}const m=e[t(230)].toLowerCase();switch(m){case"m":d(),o[t(276)](u?t(234)+"d":t(250)+t(227),{duration:1500,icon:u?"ðŸ”‡":"ðŸ”Š"});break;case"r":s[t(263)](c,r)&&(e[t(282)+t(287)](),s[t(256)](r));break;case"d":s[t(263)](c,l)&&a&&(e["preventDef"+t(287)](),s[t(281)](a));break;case"escape":i&&(e.preventDefault(),s.QLdyk(i));break;case"?":case"/":(!e[t(275)]||"?"===m)&&(e[t(282)+t(287)](),sn())}},[d,u,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(305)+e(288)](s.KWtku,m),()=>window[e(231)+e(264)](e(265),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Dt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==L?Gt:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ue(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,L,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ue(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const It=async()=>{if(!k)return void H(!0);if(!M)return void I(!0);const e=Ge.find(e=>e.id===V),t=(null==e?void 0:e.white)||{};await Nt(J,F,t)&&A("waiting")},Tt=async e=>{if(!k)return void H(!0);if(!M)return void I(!0);const t=Ge.find(e=>e.id===V),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Kt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Ut=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),xe(V);const n=Ge.filter(e=>e.id!==V),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=Yn.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Yt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},_t=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Yt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(xt(ee))),!0;oe(!0);const i=function(e){const t=Gn,n={};n[t(503)]=t(429),n[t(437)]=function(e,t){return e+t},n[t(554)]=function(e,t){return e*t},n[t(479)]=t(547),n[t(513)]=function(e,t){return e+t},n.RNXxv=function(e,t){return e*t};const s=n;switch(e){case s[t(503)]:return s[t(437)](300,s[t(554)](Math.random(),500));case s.borQb:return s[t(513)](500,s[t(471)](Math[t(543)](),1e3));case t(570):return 800+s[t(554)](Math[t(543)](),1500);case t(454):return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=Gn,s={PMmcZ:"medium",wkQDj:function(e,t){return e(t)},ZVBUy:function(e,t){return e(t)}};switch(t){case n(429):return Sn(e);case s.PMmcZ:return s[n(489)](Pn,e);case n(570):return Hn(e);case n(454):return s[n(462)](Hn,e);default:return Sn(e)}}(ee,W);if(c){const e=Yt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(xt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,W,ke,q]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(Pe,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx(Zt,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===L&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Vn.map(e=>d.jsx("button",{onClick:()=>{q.select(),E(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(T,{onClick:Ut,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:Yn.map(e=>d.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ge.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(V===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ie,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Te,{to:"/openings",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(Ke,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Te,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(T,{onClick:()=>I(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(T,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void I(!0);const e=Kt().filter(e=>e.white_player_id!==k.id);e.length>0?await Tt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Kt().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Xn.map(e=>d.jsxs("button",{onClick:()=>X(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ge.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(V===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>Z(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>Z(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(T,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&d.jsx(_e,{className:"h-4 w-4"}),"Create Game",d.jsx(We,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Oe,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(T,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void I(!0);const e=Ge.find(e=>e.id===V),t=(null==e?void 0:e.black)||{};await Bt($.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),Be?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Je(Ae,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Xn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(D,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),d.jsx(T,{size:"sm",onClick:()=>Tt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!F&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),d.jsx(T,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Xe,{className:"h-4 w-4"})})]})]}),d.jsx(T,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(T,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(T,{variant:"outline",size:"sm",onClick:Dt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Ve,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Wt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Ze,{whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Ze,{whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&d.jsx(Ft,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:Gt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Ye,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Yn.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=Yn.find(e=>e.id===W))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Ve,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Wt,{fen:ee.fen(),onMove:_t,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ge.find(e=>e.id===he))?void 0:s.white)||Ge[0].white,blackPalette:(null==(l=Ge.find(e=>e.id===pe))?void 0:l.black)||Ge[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Ze,{whitePalette:(null==(u=Ge.find(e=>e.id===he))?void 0:u.white)||Ge[0].white,blackPalette:(null==(h=Ge.find(e=>e.id===pe))?void 0:h.black)||Ge[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Ze,{whitePalette:(null==(f=Ge.find(e=>e.id===he))?void 0:f.white)||Ge[0].white,blackPalette:(null==(v=Ge.find(e=>e.id===pe))?void 0:v.black)||Ge[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Rt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:Gt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:Ut,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Fe,{}),d.jsx(qe,{isOpen:S,onClose:()=>H(!1)}),d.jsx(De,{isOpen:G,onClose:()=>I(!1),trigger:"general"}),d.jsx(Qt,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?de:we,whitePalette:"bot-game"===L?(null==(b=Ge.find(e=>e.id===he))?void 0:b.white)||Ge[0].white:(null==vt?void 0:vt.whitePalette)||Ge[0].white,blackPalette:"bot-game"===L?(null==(y=Ge.find(e=>e.id===pe))?void 0:y.black)||Ge[0].black:(null==vt?void 0:vt.blackPalette)||Ge[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=Yn.find(e=>e.id===W))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?de.length:we.length}})]})};export{Rn as default};
