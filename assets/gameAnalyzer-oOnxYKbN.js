const e="/**\n * Game Analyzer Module\n * \n * Analyzes individual chess games for fingerprint extraction.\n */\n\nimport { EmotionalMarker } from '../blunderClassifier';\nimport { GameData, GameAnalysis } from './types';\n\n/**\n * Analyze a single game for fingerprint data extraction\n */\nexport function analyzeGame(game: GameData): GameAnalysis {\n  const moveCount = game.moves.length;\n  let blunders = 0;\n  let timePressureMoves = 0;\n  let complexMoves = 0;\n  const aggressiveMoves = 0;\n  let wasLosing = false;\n  let cameBack = false;\n  const emotionalMarkers: EmotionalMarker['type'][] = [];\n  const phaseBlunders = { opening: 0, middlegame: 0, endgame: 0 };\n  \n  const playerMoves = game.moves.filter((_, i) => \n    game.playerColor === 'white' ? i % 2 === 0 : i % 2 === 1\n  );\n  \n  const totalTime = playerMoves.reduce((sum, m) => sum + (m.timeSpent || 30), 0);\n  const averageMoveTime = totalTime / playerMoves.length;\n  \n  playerMoves.forEach((move, idx) => {\n    const evalDrop = (move.evalBefore || 0) - (move.evalAfter || 0);\n    const moveNumber = Math.floor(idx / 2) + 1;\n    const phase = getGamePhase(moveNumber);\n    \n    // Detect blunders\n    if (evalDrop > 1) {\n      blunders++;\n      phaseBlunders[phase]++;\n    }\n    \n    // Time pressure detection\n    if (move.timeSpent && move.timeSpent < averageMoveTime * 0.3) {\n      timePressureMoves++;\n    }\n    \n    // Complexity (long think times)\n    if (move.timeSpent && move.timeSpent > averageMoveTime * 2) {\n      complexMoves++;\n    }\n    \n    // Track if player was losing\n    if ((move.evalBefore || 0) < -2) {\n      wasLosing = true;\n    }\n    \n    // Check for comeback\n    if (wasLosing && (move.evalAfter || 0) > 0) {\n      cameBack = true;\n    }\n  });\n  \n  const won = (game.result === game.playerColor);\n  \n  return {\n    moveCount,\n    blunders,\n    averageMoveTime,\n    timePressureMoves,\n    complexMoves,\n    aggressiveMoves,\n    won,\n    wasLosing,\n    cameBack,\n    phaseBlunders,\n    emotionalMarkers\n  };\n}\n\n/**\n * Determine game phase from move number\n */\nfunction getGamePhase(moveNumber: number): 'opening' | 'middlegame' | 'endgame' {\n  if (moveNumber <= 10) return 'opening';\n  if (moveNumber <= 30) return 'middlegame';\n  return 'endgame';\n}\n";export{e as default};
