import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as M,bE as k,af as z,ag as D,ai as B,y as L,bF as q,bG as A,b6 as S,ae as P,bH as H,ah as I,bI as G,B as W,bJ as K,bK as E,bL as U,bM as T,bN as _,bO as Y,bP as O,bQ as X,bR as R,bS as V,bT as J,bU as Z,bV as F,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as Me,c6 as ke,c7 as ze,an as De,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Se,H as Pe,P as He,ca as Ie,b3 as Ge,bs as We,be as Ke,cb as Ee,aP as Ue,cc as Te,d as _e,b2 as Ye,a9 as Oe,cd as Xe,ce as Re,cf as Ve,al as Je,au as Ze}from"./index-Cjdju9jQ.js";import{L as Fe}from"./LiveColorLegend-Do0fxUv4.js";import{T as Qe}from"./trending-down-B3Yh5O70.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CmehhEK1.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=dt,t=ht();for(;;)try{if(822890===parseInt(e(401))/1*(parseInt(e(373))/2)+parseInt(e(453))/3*(parseInt(e(378))/4)+parseInt(e(424))/5+parseInt(e(395))/6+-parseInt(e(437))/7*(-parseInt(e(445))/8)+-parseInt(e(389))/9+-parseInt(e(452))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){const e={lgOKR:function(e,t){return e!==t},etlIs:"WMCJz",rUmwq:dt(459),bYQfB:function(e,t){return e(t)}};let t=!0;return function(n,s){const r=function(t,n){return e.bYQfB(t,n)},a=t?function(){const t=dt;if(s){if(e.lgOKR(e[t(376)],e[t(405)])){const e=s[t(454)](n,arguments);return s=null,e}return r(_0x3d4071,_0x239730).message}}:function(){};return t=!1,a}}()(void 0,function(){const e=dt;return ut[e(385)]()[e(423)]("(((.+)+)+)+$")[e(385)]().constructor(ut)[e(423)](e(407)+"+$")});function dt(e,t){e-=370;const n=ht();let s=n[e];if(void 0===dt.mGqSWI){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};dt.VpfWAv=r,dt.bfCysg={},dt.mGqSWI=!0}const a=e+n[0],i=dt.bfCysg[a];if(i)s=i;else{const e=function(e){this.KRZaBE=e,this.wRXIvH=[1,0,0],this.vChskT=function(){return"newState"},this.vFTfaZ="\\w+ *\\(\\) *{\\w+ *",this.wKGcwW="['|\"].+['|\"];? *}"};e.prototype.riRwMP=function(){const e=new RegExp(this.vFTfaZ+this.wKGcwW).test(this.vChskT.toString())?--this.wRXIvH[1]:--this.wRXIvH[0];return this.cvTyMq(e)},e.prototype.cvTyMq=function(e){return Boolean(~e)?this.lhBIcy(this.KRZaBE):e},e.prototype.lhBIcy=function(e){for(let t=0,n=this.wRXIvH.length;t<n;t++)this.wRXIvH.push(Math.round(Math.random())),n=this.wRXIvH.length;return e(this.wRXIvH[0])},new e(dt).riRwMP(),s=dt.VpfWAv(s),dt.bfCysg[a]=s}return s}ut();const mt=function(){const e=dt,t={};t[e(404)]=e(391);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(427)]=n[a(404)];const o=i,c=s?function(){const e=a;if(r){if(e(391)===o[e(427)]){const n=r[e(454)](t,arguments);return r=null,n}return _0x199ade[e(388)]()||_0x7dc134[e(410)+"e"]()}}:function(){};return s=!1,c}}();function ht(){const e=["ig1HDgvYAwfSlG","Ew5ureC","zLD6qxe","CLvTD3e","DNbLEhK","kcGOlISPkYKRkq","x19WCM90B19F","zunsq0G","AxntDgfSzw1HDa","AxnjBNn1zMzPyW","rhjHDYbIEsb0Aa","vMHwELq","yNjcu2y","r0fZCu8","sw5ZDwzMAwnPzq","ELPrrum","DgLeEK4","C2HVCNrnzxnZyq","BgfIBguU","tw1nBvG","zMLMDhLFBw92zq","C2vHCMnO","nteXotCYmeHcCwf6BW","zxHJzxb0Aw9U","uMvWzxrPDgLVBG","CNn2t0O","wKHzwvy","r2fTzsbKCMf3BG","BNrFBwf0zxjPyq","swXOrva","C3rHBgvTyxrL","CM4GDgHPCYiPka","Bw92zxmGyxzHAq","zMvU","zLbly1q","mJiXmJK3m0XxrgjnuW","s2fnywi","C3vMzMLJAwvUDa","C0Htv1a","zfjLCgv0AxrPBW","ie5VigXLz2fSia","y3rVCIGICMv0Dq","DhjHy2u","mJrrB05lwvG","C3bZuvy","uwziEfC","zxjYB3i","Cgv0AxrPB24U","AwvUDe1HDgvYAq","sejqww4","mtCZodK1mtbuANrvuwi","mJm3mteXBfDkwuTn","yxbWBhK","ChjVDg90ExbL","ntaTtw92zsbsDq","DgfIBgu","Aw5MBW","EgHWsxK","Aw5ZDwzMAwnPzq","zvvZB1a","EhDSs1O","BwvZC2fNzq","ndG5mtzNz3PdrNu","swfZyKy","C3bSAxq","zxrSsxm","BgvUz3rO","nfvjt3jfBW","rvHcqKm","CMvLzM9SzcbYzq","yvjOu2O","CMvHC29U","BNqGtwf0zxjPyq","wg9zCfK","Dg9tDhjPBMC","DMuGCNvSzs4","y29UC3rYDwn0BW","AxneCMf3","nJi2mZK3m2DLtLz2qq","x3j1Bgu","sKTeCu8","D2fYBG","BMn0Aw9UkcKG","zsbMAwz0Es1TBW","nde1nJKZmK9wyNv3rG","E30Uy29UC3rYDq","y29UC29Szq","yMLUza","A09vs2G","DgHYzwvMB2XKxW","mJfVELbWDMO"];return(ht=function(){return e})()}function xt(e){const t=dt;return function(e){const t=dt,n={PYLfO:t(422)+"_rule",spsQV:t(412)+t(394)+t(386),pmTvn:"cCika",GpTvK:t(432),vpexy:"TfVdo",sHSWP:"eiaSj",VhVzT:t(400)+"repetition",QfHxW:"Draw by in"+t(439)+t(402),brBSf:function(e,t,n){return e(t,n)},KaMab:function(e,t){return e>=t},GAsqO:t(456)+"le",ZHYYV:"unknown"};if(e[t(410)+"e"]()){if(t(451)!==n.pmTvn){const e={};return e[t(382)]=n.GpTvK,e.message="Stalemate!"+t(442)+t(434)+t(420),e.shortMessage="Stalemate!",e}{const e=_0x3d212e[t(387)+"r"][t(455)][t(398)](_0x4a32da),n=_0x224864[_0x37b0c8],s=_0x2c8ad9[n]||e;e[t(408)]=_0xcffab3[t(398)](_0xf58300),e[t(385)]=s[t(385)].bind(s),_0x33d760[n]=e}}if(e["isThreefol"+t(441)+"n"]()){if(n[t(406)]!==n[t(440)]){const e={};return e[t(382)]=n[t(413)],e[t(372)]=t(412)+t(380)+t(449),e[t(419)+"ge"]="Threefold "+t(426),e}{const e={};return e[t(382)]=n.PYLfO,e.message=n[t(446)],e[t(419)+"ge"]=t(456)+"le",e}}if(e[t(411)+t(450)+"al"]()){const e={};return e[t(382)]=t(460)+t(430)+"l",e[t(372)]=n[t(447)],e.shortMessage=t(416)+t(383)+"l",e}const s=e[t(435)](),r=n[t(414)](parseInt,s[t(375)](" ")[4],10);if(n[t(438)](r,100)){const e={};return e[t(382)]=t(422)+t(390),e[t(372)]=t(412)+t(394)+t(386),e[t(419)+"ge"]=n[t(415)],e}const a={};return a[t(382)]=n[t(428)],a[t(372)]=t(429)+"!",a[t(419)+"ge"]="Draw",a}(e)[t(372)]}mt(void 0,function(){const e=dt,t={EXBBC:"return (fu"+e(393),XoYpY:e(396)+e(443)+e(433)+" )",IasbF:function(e,t){return e(t)},eCRCH:function(e,t){return e+t},zZQEC:function(e){return e()},IlhEP:"log",eUsoP:e(458),kOUKh:e(448),MmMmX:e(425),xwlKZ:e(457),Yqzrm:e(444)},n=t[e(417)](function(){const n=e,s={};s[n(403)]=function(e,t){return e+t},s[n(381)]=t[n(379)],s.tiDzN=t[n(384)];const r=s;let a;try{if("fPKcT"!==n(436)){let e;try{e=_0x445669(r[n(403)](r[n(381)],r[n(418)])+");")()}catch(i){e=_0x1c9fd0}return e}a=t[n(374)](Function,t[n(409)](t.EXBBC,t[n(384)])+");")()}catch(o){a=window}return a}),s=n[e(397)]=n[e(397)]||{},r=[t[e(431)],e(392),t[e(370)],t[e(399)],t[e(421)],t[e(371)],t.Yqzrm];for(let a=0;a<r[e(377)];a++){const t=mt[e(387)+"r"][e(455)][e(398)](mt),n=r[a],i=s[n]||t;t[e(408)]=mt[e(398)](mt),t[e(385)]=i[e(385)][e(398)](i),s[n]=t}})(),function(){const e=gt,t=bt();for(;;)try{if(330212===parseInt(e(446))/1+-parseInt(e(423))/2*(-parseInt(e(441))/3)+parseInt(e(371))/4+-parseInt(e(363))/5*(-parseInt(e(450))/6)+-parseInt(e(455))/7*(parseInt(e(372))/8)+-parseInt(e(438))/9*(parseInt(e(449))/10)+-parseInt(e(394))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=gt,t={};t[e(365)]=e(357)+"+$";const n=t;return pt[e(420)]()[e(426)](n[e(365)])[e(420)]()[e(434)+"r"](pt)[e(426)](e(357)+"+$")});pt();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(358)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function gt(e,t){e-=351;const n=bt();let s=n[e];if(void 0===gt.RiPYCa){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.LgdusG=r,gt.SGbhpr={},gt.RiPYCa=!0}const a=e+n[0],i=gt.SGbhpr[a];if(i)s=i;else{const e=function(e){this.UxvPtr=e,this.DfyMiq=[1,0,0],this.MZZyuI=function(){return"newState"},this.IoBHSP="\\w+ *\\(\\) *{\\w+ *",this.kGZSfT="['|\"].+['|\"];? *}"};e.prototype.hEAwQl=function(){const e=new RegExp(this.IoBHSP+this.kGZSfT).test(this.MZZyuI.toString())?--this.DfyMiq[1]:--this.DfyMiq[0];return this.mAKIwW(e)},e.prototype.mAKIwW=function(e){return Boolean(~e)?this.JcUSEK(this.UxvPtr):e},e.prototype.JcUSEK=function(e){for(let t=0,n=this.DfyMiq.length;t<n;t++)this.DfyMiq.push(Math.round(Math.random())),n=this.DfyMiq.length;return e(this.DfyMiq[0])},new e(gt).hEAwQl(),s=gt.LgdusG(s),gt.SGbhpr[a]=s}return s}ft(void 0,function(){const e=gt,t={SVVcA:function(e,t){return e!==t},QXcJD:function(e,t){return e+t},buBxf:'{}.constructor("retu'+e(427)+" )",PDkUZ:function(e){return e()},MyEXc:e(389),mUExv:"warn",pLrwc:e(454),ssZHx:e(405),gBCBS:e(429),oYOxA:e(425),QxbiN:function(e,t){return e<t}},n=t[e(440)](function(){const n=e;if(t.SVVcA(n(366),"kuQVS")){let e;try{e=Function(t[n(377)](n(412)+"nction() "+t[n(462)],");"))()}catch(s){e=window}return e}{const e=_0x4a4a97[n(358)](_0x458844,arguments);return _0x31454a=null,e}}),s=n[e(460)]=n[e(460)]||{},r=[t[e(452)],t.mUExv,t[e(367)],t[e(362)],t.gBCBS,t[e(458)],"trace"];for(let a=0;t[e(384)](a,r[e(411)]);a++){const t=ft[e(434)+"r"][e(382)][e(443)](ft),n=r[a],i=s[n]||t;t[e(364)]=ft.bind(ft),t.toString=i.toString[e(443)](i),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=gt,r={xGHWu:s(451),UjUTS:s(397),Crcev:"zMaFS",JXlYO:function(e){return e()},vrcWM:function(e,t){return e!==t},YXLkW:function(e,t){return e+t},fkVOe:function(e,t){return e-t},oYafw:function(e){return e()},DMHBd:function(e,t){return e||t},aAktX:function(e,t){return e<t},RLTtd:function(e,t){return e-t},lTubr:"move",xoCYb:function(e,t,n,s,r,a){return e(t,n,s,r,a)},KCKEp:s(374),ZDnut:s(383),eRxBo:function(e,t,n){return e(t,n)},CrQiW:s(399),QekVR:function(e,t,n){return e(t,n)},zZchE:s(401),bAUJZ:function(e,t,n,s,r,a){return e(t,n,s,r,a)},UgyKr:function(e,t,n,s,r,a){return e(t,n,s,r,a)},fhoCv:s(408),gjjcs:s(403),jSihW:function(e,t,n){return e(t,n)}},a={};a[s(461)]=null,a[s(381)]=null;const i=t.useRef(a),o=t.useCallback(()=>{const e=s;if(!i[e(432)].context)try{const t=new(window[e(355)+"xt"]||window["webkitAudi"+e(393)]),s=t[e(392)]();s[e(359)](t.destination),s[e(417)][e(386)]=n;const r={};r[e(461)]=t,r[e(381)]=s,i[e(432)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;if(r[e(459)]===r[e(370)]){const t=_0x5a7997?function(){if(_0x16f8e8){const t=_0x3eef18[e(358)](_0x3a84ba,arguments);return _0x2924eb=null,t}}:function(){};return _0x3926d7=!1,t}if(i[e(432)][e(381)])if(r[e(416)]!=r[e(416)]){if(_0x52dbde){const t=_0xa2b01a[e(358)](_0x4862c9,arguments);return _0x2be73a=null,t}}else i[e(432)][e(381)].gain[e(386)]=n},[n]);const c=r.jSihW(t.useCallback,(t,n,a=s(383),c=.01,l=.1,u)=>{const d=s;if(!e)return;r[d(437)](o);const{context:m,gainNode:h}=i[d(432)];if(!m||!h)return;const x=m[d(444)+d(395)](),p=m[d(392)]();x.type=a,x[d(360)][d(442)+d(435)](t,m[d(410)+"e"]),u&&(r[d(385)]("LFkoZ",d(390))?_0x45af56.current[d(381)][d(417)].value=_0x728708:x.frequency[d(396)+d(361)+d(448)](u,r.YXLkW(m[d(410)+"e"],n))),p[d(417)]["setValueAt"+d(435)](0,m[d(410)+"e"]),p[d(417)][d(447)+d(400)+"ime"](1,m[d(410)+"e"]+c),p[d(417)][d(396)+d(361)+d(448)](.01,r[d(373)](r[d(353)](m[d(410)+"e"],n),l)),p[d(417)][d(447)+"ToValueAtTime"](0,m[d(410)+"e"]+n),x[d(359)](p),p[d(359)](h),x[d(424)](m.currentTime),x[d(409)](m.currentTime+n)},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;r[a(380)](o);const{context:c,gainNode:l}=i[a(432)];if(r[a(422)](!c,!l))return;const u=c[a(379)]*t,d=c[a(375)+"er"](1,u,c[a(379)]),m=d[a(407)+a(415)](0);for(let e=0;r[a(404)](e,u);e++)m[e]=r[a(369)](2*Math[a(398)](),1);const h=c[a(375)+"erSource"]();h[a(453)]=d;const x=c[a(368)+a(406)]();x.type="lowpass",x[a(360)][a(386)]=n;const p=c[a(392)]();p[a(417)][a(442)+a(435)](.3,c[a(410)+"e"]),p.gain[a(396)+a(361)+a(448)](.01,c.currentTime+t),h.connect(x),x[a(359)](p),p[a(359)](l),h[a(424)](c[a(410)+"e"]),h[a(409)](c.currentTime+t)},[e,o]),u=r[s(414)](t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(436)]:c(800,.08,"sine",.005,.05),r[n(378)](c,400,.06,"triangle",.005,.04);break;case r[n(351)]:l(.12,2e3),c(300,.1,"square",.005,.08),r[n(378)](c,150,.15,r[n(402)],.01,.1);break;case n(431):r[n(378)](c,600,.06,n(383),.005,.04),r[n(388)](setTimeout,()=>c(700,.06,n(383),.005,.04),80);break;case r[n(428)]:c(880,.15,n(456),.01,.1),r[n(388)](setTimeout,()=>c(1100,.12,"triangle",.01,.08),120);break;case"checkmate":r[n(378)](c,880,.2,r[n(402)],.01,.15),setTimeout(()=>c(660,.2,n(383),.01,.15),150),r[n(414)](setTimeout,()=>c(440,.3,n(383),.01,.2),300),r[n(414)](setTimeout,()=>c(330,.4,"sine",.01,.3),500);break;case n(376):r[n(378)](c,523,.12,n(383),.01,.08),setTimeout(()=>c(659,.12,n(383),.01,.08),100),setTimeout(()=>c(784,.2,"sine",.01,.15),200);break;case r[n(418)]:r[n(391)](c,440,.15,n(456),.01,.1),r[n(388)](setTimeout,()=>c(349,.25,n(456),.01,.2),150);break;case n(387):r[n(354)](c,523,.1,r[n(402)],.01,.08),setTimeout(()=>c(659,.1,"sine",.01,.08),100),r[n(414)](setTimeout,()=>c(784,.1,"sine",.01,.08),200),r.eRxBo(setTimeout,()=>c(1047,.3,n(383),.01,.25),300);break;case r[n(439)]:c(392,.2,"sine",.02,.15),setTimeout(()=>c(349,.2,n(383),.02,.15),200),r[n(414)](setTimeout,()=>c(330,.3,n(383),.02,.25),400),setTimeout(()=>c(262,.4,n(383),.02,.35),650);break;case n(413):c(440,.15,r[n(402)],.01,.1),setTimeout(()=>c(440,.15,n(383),.01,.1),180),setTimeout(()=>c(523,.2,"sine",.01,.15),360);break;case n(419):r.xoCYb(c,200,.1,r[n(352)],.005,.08),c(150,.08,n(421),.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=gt;i[e(432)][e(461)]&&i[e(432)][e(461)][e(445)]()},[]);const d={};return d[s(457)]=u,d[s(433)]=o,d};function bt(){const e=["C2fTCgXLuMf0zq","B1LHzNC","z2fPBK5Vzgu","ChjVDg90ExbL","C2LUzq","uxHIAu4","DNjJv00","DMfSDwu","DMLJDg9YEq","zvj4qM8","Bg9N","tezRB1O","yKfvsLO","y3jLyxrLr2fPBG","B0nVBNrLEhq","nde1ntq5mND3Ahjova","BgXHDg9Y","zxHWB25LBNrPyq","qK5jEMy","CMfUzg9T","y2HLy2S","vg9wywX1zuf0va","z2fTzuvUza","wKrUDxq","C3f1yxjL","yufRDfG","zxjYB3i","ywrgAwX0zxi","z2v0q2HHBM5LBa","zgvMzwf0","C3rVCa","y3vYCMvUDfrPBq","BgvUz3rO","CMv0DxjUicHMDq","zhjHDW","uwvRvLi","rgf0yq","q3jJzxy","z2fPBG","ELPJAeu","AwXSzwDHBa","Dg9tDhjPBMC","C2f3Dg9VDgG","re1iqMq","mte0uwLZA050","C3rHCNq","DgfIBgu","C2vHCMnO","CM4GDgHPCYiPka","q3jrAvC","zxHJzxb0Aw9U","v2vIief1zgLVia","y2fZDgXL","y3vYCMvUDa","Aw5PDef1zgLV","y29UC3rYDwn0BW","vgLTzq","Bfr1yNi","sLHSwu8","mJm0ugPosNfR","zMHVq3y","uerRvvO","mZe0odvhz1v4AgC","C2v0vMfSDwvbDa","yMLUza","y3jLyxrLt3nJAq","y2XVC2u","mZiZndG1vvrvuMHS","BgLUzwfYuMfTCa","DwvbDfrPBwu","mtG3nteWAenfsLP4","ndqZnJy0yMDiB1ze","yKj6DfG","txLfwgm","yNvMzMvY","Aw5MBW","mta5mZe4m0jPDvrYvG","DhjPyw5NBgu","CgXHEvnVDw5K","B1LpEee","EeDiv3u","y29UC29Szq","y29UDgv4Da","yNvcEgy","s0nlrxa","z2PQy3m","wvHmA1C","vwD5s3i","qxvKAw9dB250zq","D2fYBG","kcGOlISPkYKRkq","yxbWBhK","y29UBMvJDa","zNjLCxvLBMn5","BfjHBxbuB1zHBa","C3nAshG","mtbtALP3zxq","x19WCM90B19F","rNvXzwu","BKflsfm","CeXYD2m","y3jLyxrLqMLXDq","uKXuDgq","vwPvvfm","mteYodm2nhPXvgzytG","ofjcCeP5Aa","zMTwt2u","y2fWDhvYzq","y3jLyxrLqNvMzG","z2fTzvn0yxj0","uvHJsKq","Eg9dwwi"];return(bt=function(){return e})()}const yt=Nt;!function(){const e=Nt,t=Ct();for(;;)try{if(599483===parseInt(e(482))/1+-parseInt(e(460))/2+parseInt(e(458))/3+-parseInt(e(485))/4*(-parseInt(e(446))/5)+-parseInt(e(461))/6*(parseInt(e(478))/7)+parseInt(e(445))/8*(parseInt(e(487))/9)+parseInt(e(452))/10*(-parseInt(e(466))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nt(456)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Nt,t={};t[e(467)]=e(481)+"+$";const n=t;return wt[e(450)]()[e(451)](n[e(467)]).toString()[e(465)+"r"](wt)[e(451)]("(((.+)+)+)+$")});wt();const jt=function(){const e=Nt,t={};t[e(459)]=function(e,t){return e!==t},t[e(447)]=e(492),t[e(480)]=e(477);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(459)](a(493),n.HXwZl)){const e=s?function(){const e=a;if(r){if(n[e(459)](n[e(447)],"iTYSe")){const e=_0x231db4?function(){if(_0x40024f){const e=_0x1309dd.apply(_0x26f3db,arguments);return _0x4ee269=null,e}}:function(){};return _0x557ce2=!1,e}{const n=r[e(456)](t,arguments);return r=null,n}}}:function(){};return s=!1,e}_0x3836f3=_0x2050b5}}();function Ct(){const e=["C2vHCMnO","mJbKEM5fEMO","E30Uy29UC3rYDq","yKH5zhO","CMv0DxjUicHMDq","yxbWBhK","tvLOCgy","mJi1oti0ovDoDMP0zW","qurKqwq","mJKXnJb1qxPfs0q","mtu5mezXrfziDq","zw5HyMXLza","vwLJB2C","D2fYBG","y29UC3rYDwn0BW","nJq5nde2oxDyzxviAW","twLjAwO","CM4GDgHPCYiPka","sefjEMm","zxHJzxb0Aw9U","y29UC29Szq","zc1Zzxr0Aw5NCW","zxjYB3i","z0HUr0u","Aw5MBW","zxjTwLK","txvNsvq","mJm2mtfTsM90Cu4","Dvzvvvq","sfH3wMW","kcGOlISPkYKRkq","ody1ntb2B2DVENC","ChjVDg90ExbL","y2HLC3mTC291BG","ohbsyxfeDW","zuTTzNi","ow9zBwLoBq","s2ztr0C","DgfIBgu","DhjHy2u","DgjZDwy","Avrzu2u","sKPxueS","Bg9N","otiXnJiZmK9ds2PVva","mtC0mJuXmev4v0noEa","s21gCNu","BMn0Aw9UkcKG","yMLUza","Dg9tDhjPBMC"];return(Ct=function(){return e})()}function Nt(e,t){e-=444;const n=Ct();let s=n[e];if(void 0===Nt.iMoJtb){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.IMRyno=r,Nt.JyGaSL={},Nt.iMoJtb=!0}const a=e+n[0],i=Nt.JyGaSL[a];if(i)s=i;else{const e=function(e){this.oWnsJK=e,this.oCAiEq=[1,0,0],this.gBoYHN=function(){return"newState"},this.LXAnMI="\\w+ *\\(\\) *{\\w+ *",this.DVQYwq="['|\"].+['|\"];? *}"};e.prototype.tBnkZW=function(){const e=new RegExp(this.LXAnMI+this.DVQYwq).test(this.gBoYHN.toString())?--this.oCAiEq[1]:--this.oCAiEq[0];return this.svuuLH(e)},e.prototype.svuuLH=function(e){return Boolean(~e)?this.Vkmdyi(this.oWnsJK):e},e.prototype.Vkmdyi=function(e){for(let t=0,n=this.oCAiEq.length;t<n;t++)this.oCAiEq.push(Math.round(Math.random())),n=this.oCAiEq.length;return e(this.oCAiEq[0])},new e(Nt).tBnkZW(),s=Nt.IMRyno(s),Nt.JyGaSL[a]=s}return s}jt(void 0,function(){const e=Nt,t={KfSGG:function(e,t){return e+t},HAIzc:function(e,t){return e+t},uVUUT:e(455)+e(448),ermZY:e(453)+'ctor("retu'+e(468)+" )",BrwjE:function(e){return e()},IwUeU:e(444),Uicog:e(473),tbsuf:e(470),gHnGE:e(489),VUBYL:e(490),eKmfr:function(e,t){return e<t},bHydz:function(e,t){return e!==t},Pnyqp:e(457)},n=t.BrwjE(function(){const n=e;let s;try{s=Function(t[n(488)](t[n(469)](t[n(479)],n(453)+'ctor("retu'+n(468)+" )"),");"))()}catch(r){s=window}return s}),s=n.console=n[e(471)]||{},r=[t.IwUeU,e(464),e(475),t[e(463)],t[e(491)],t[e(474)],t.VUBYL];for(let i=0;t[e(486)](i,r.length);i++){if(t[e(454)]("MYhpf",t.Pnyqp)){let n;try{n=_0x5692a7(t.uVUUT+t[e(476)]+");")()}catch(a){n=_0x5eb7c4}return n}{const t=jt[e(465)+"r"][e(483)].bind(jt),n=r[i],a=s[n]||t;t.__proto__=jt[e(449)](jt),t[e(450)]=a.toString[e(449)](a),s[n]=t}}})();const Mt={};Mt.name=yt(484)+yt(472);const kt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[yt(462)]}))}),Mt)),zt=Lt;!function(){const e=Lt,t=qt();for(;;)try{if(709796===parseInt(e(379))/1+-parseInt(e(543))/2+-parseInt(e(533))/3+-parseInt(e(404))/4+-parseInt(e(526))/5+-parseInt(e(525))/6*(parseInt(e(361))/7)+-parseInt(e(562))/8*(-parseInt(e(459))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Lt(480)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Lt,t={};t.JEpkO=e(348)+"+$";const n=t;return Dt[e(351)]()[e(365)](n.JEpkO)[e(351)]()[e(388)+"r"](Dt)[e(365)]("(((.+)+)+)+$")});Dt();const Bt=function(){const e=Lt,t={iVvCC:function(e,t){return e===t}};t[e(333)]=e(611);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(528)]=a(529)+"join by code";const o=i;if(n[a(359)](n[a(333)],a(475))){const e=_0x2c2f08 instanceof _0xbce38e?_0x78a0c9[a(513)]:o.eajDj;return _0x424b57(e),_0x2cb363[a(517)](e),!1}{const e=s?function(){if(r){const e=r[a(480)](t,arguments);return r=null,e}}:function(){};return s=!1,e}}}();function Lt(e,t){e-=331;const n=qt();let s=n[e];if(void 0===Lt.gaiuAA){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Lt.MLiviP=r,Lt.DkGJRA={},Lt.gaiuAA=!0}const a=e+n[0],i=Lt.DkGJRA[a];if(i)s=i;else{const e=function(e){this.vbVpPg=e,this.uTWFzP=[1,0,0],this.bsHoLg=function(){return"newState"},this.lHHesR="\\w+ *\\(\\) *{\\w+ *",this.fPKrNb="['|\"].+['|\"];? *}"};e.prototype.SrdMJB=function(){const e=new RegExp(this.lHHesR+this.fPKrNb).test(this.bsHoLg.toString())?--this.uTWFzP[1]:--this.uTWFzP[0];return this.baSiRy(e)},e.prototype.baSiRy=function(e){return Boolean(~e)?this.lVcabT(this.vbVpPg):e},e.prototype.lVcabT=function(e){for(let t=0,n=this.uTWFzP.length;t<n;t++)this.uTWFzP.push(Math.round(Math.random())),n=this.uTWFzP.length;return e(this.uTWFzP[0])},new e(Lt).SrdMJB(),s=Lt.MLiviP(s),Lt.DkGJRA[a]=s}return s}function qt(){const e=["CLjhALm","Bg9FCMf0Aw5N","r0zLDvO","yMLUza","ihjHDgLUz3m6","D2HPDgvFCgfSzq","yMXHy2S","ywn0AxzL","tvrAuxK","uMf0Aw5NoIa","D2HPDgvFD2LUCW","quX2ru0","Aw5JBhvKzxm","y3jLyxrLzef0","CYbcBgfJAY4","C3f1yxjL","mJm4mtG5nNrRs3zHrq","AgLgvw4","y2fWDhvYzwq","zwf0zsbHigDHBq","uhvMr0O","y1rYthm","CNzKzNy","CxbLwve","BgvUz3rO","Bw92zv9Zyw4","D2LUBMvYswq","yvPHz2C","AgfSBgvUz2uGyW","D2LUBMvYx2LK","C3rHDhvZ","BxLevvO","y29TCgXLDgvK","tu1UCxi","vgnlv0K","q2fUBM90igPVAq","z2fTzvn0yxrL","wK5Jse0","vvjfsNm","D2HPDgvFDgLTzq","B3vUza","AM9PBIbNyw1L","Bw92zunVDw50","D2HPDgvuAw1LuG","uxLPzeG","Dg9vChbLCKnHCW","y3jLyxrLzf9HDa","yMv3rgO","zw1HAw5PBMC","CKLmANC","AM9PBIbIEsbJBW","Chb5vK8","sfb5u3C","x19WCM90B19F","ihbSyxLPBMCGyq","t3fNBuO","z2v0qxzHAwXHyG","y3rVCIGICMv0Dq","y09isfe","y2HLy2S","Awq9zxeU","AM9PBKDHBwu","DgLTzunVBNrYBW","qwDyDeC","r3DnqwK","CLLADLa","Bg9N","quPuEg8","yMXHy2TFCgXHEq","CKLK","ugPguwW","z2fTzv9Pza","tY1p","BLvUwha","r1roz1q","sK9rDu4","CgXHEwvYx2LK","BgvnB3zLCW","E30Uy29UC3rYDq","ww91ihDVBIe","Bg9HzcbNyw1L","qMnRBvy","Bwf5AfK","Aw5Zzxj0","r2fTzsbHBhjLyq","ChvIBgLJ","C2vSzwn0","tgvZtxe","vKjRv1G","kcGOlISPkYKRkq","Aw5MBW","Dg9ju09tDhjPBG","Dg9tDhjPBMC","y29Kzq","y2frzge","Cg9ZDgDYzxnFyW","BMvUDc4UlG","tunitgu","C2fU","zhLvC28","Avz2q0m","DgfIBgu","ote3t3f1D1Hv","B3jKzxi","ywXS","C2LVBIK","C2vHCMnO","DxbKyxrLievmtW","q2HHBgXLBMDLia","s21TEMm","AM9PBKj5q29Kzq","zhjHDW","BwfW","DgLTzv9JB250CG","BIb5B3vYig93BG","z2vUzxjHDgvFyW","vvbeqvrf","CMvZDwX0","rwPfs3O","vwXkqNK","mtmYmde3nNvvuvzLAG","zwXVx3jHDgLUzW","y2fWDhvYzq","x3jLBwfPBMLUzW","rNL0CxK","swHtEKW","DvP6u2y","CMv0DxjUicHMDq","z0TNtKm","y29UC3rYDwn0BW","CgDU","q0fYruO","CMjeDNe","BxLdB2XVCG","zMvU","DMvUzue","AMn0Efq","wuXsyw0","tfPXB3y","r2LKq1e","y29UC29Szq","AxndAgvJAW","BMv3uMf0Aw5N","yxnJzw5KAw5N","ChjVDg90ExbL","mJu5mJi4ohPOvhD2sa","uw1uwLe","zYbMB3iGB3bWBW","sM9PBMvKigDHBq","DMvYyM9Zzq","yKnLrLK","Bw92zv9JB3vUDa","AxnmB2fKAw5N","y2HHBMDL","EvbbtLy","y3vYCMvUDf9Mzq","D1LfDMm","C2LUz2XL","u2XXrNG","DxnLCL9PzcWGzq","zLzRt2e","Bu5MtuO","Aw4GysbNyw1L","u3nizee","igDHBwu","BMv3","Bwf5yMvtAw5NBa","y3vYCMvUDezLBG","zxHJzxb0Aw9U","CMLTr1C","zxjFAwq","y2HLy2TTyxrL","BMvS","sfjHy2S","y3jLyxrLr2fTzq","rhjHDYbVzMzLCG","AgfUz2vZ","DxbKyxrL","yMXHy2TqywXLDa","BLDltwS","BMn0Aw9UkcKG","y2HHBM5LBa","AxndAgvJA21HDa","su5trvju","DhvYBG","D2fPDgLUzW","ALnituu","zseGww91igfYzq","ugn6svK","u0P6y0i","CM4GDgHPCYiPka","B0LOEeu","AxnFChvIBgLJ","yNvMDKW","sLPrqKy","rwzjBuW","zgvMzwf0","ihnLBNqGkg9WCa","yNvSBgv0xZe","uNbnrNi","otL0BwDmuvi","z2fTzvn0yxj0","Bw92zxm","y2fZDgXL","zM9YrwfJAa","Bw92zq","zeXgDu8","B2zMzxjeCMf3","DxnLCL9Pza","zevpu3K","zgz0quK","y29KztOG","uLnyseK","v2HPDguGD2LUCW","y2HLC3nFz2fTzq","AxnnEvr1CM4","qKjsDMy","Dw50Aw1Lza","BIb0AgLZihzLCG","C3vIC3rYAw5N","DenxrhC","yxbWBhK","z0LfuNu","CMfWAwrFmtu","C3vJy2vZCW","DhjHy2u","zMLUza","B2rL","vNvsDMS","tY1plu8","txnHBeS","y2HLC3nFBw92zq","D2HPDgu","y3jLyxrLigDHBq","r2fTzsbJCMvHDa","DhLiy0i","Ew1hyuq","shvqzva","Bw92zv9UDw1Izq","yMXHy2TFD2LUCW","ve9zBwu","CKPKvve","DMLJDg9YEq","qvfwA3i","DxHrCue","Bw92zv91y2K","sfL3wgC","D2fYBG","CeTis3y","Bg9HzeDHBwu","vgPMAve","D2HPDgvqBgf5zq","ChjVBw90Aw9U","zvPXAxu","BwvZC2fNzq","lwfJy2vWDhmGAq","yMXHy2TFDgLTzq","EKHfvLO","zxjYB3i","ChjVzMLSzxm","DhrL","BLbxu08","ugXLyxnLihnPzW","Bfvir2m","igv4CgLYzwqGyW","y2HHBgXLBMDLqW","ndu1odjwCND1sgy","ntu5mdi1nxjOsevArW","zNjVBq","zwfQrgO","rMfPBgvKihrVia","qNfIs3u","D2HPDgvFCgXHEq","y2HHBgXLBMDLxW","nZiZode5AvnjAwTk","yMXHy2TqBgf5zq","t1Pvu0W","BIbPBIb0BYbQBW","z1jQu2q","su5Xtxm","sLHuwwG","Bw92zwrtCxvHCG","CMvTB3zLq2HHBG","AgjfBMC","mtC2ntC2ogH5q2P3Ca","C3rHCNrLzf9HDa","zwqHifDHAxrPBG"];return(qt=function(){return e})()}Bt(void 0,function(){const e=Lt,t={};t[e(334)]=function(e,t){return e+t},t[e(499)]=e(337)+e(603)+'rn this")( )',t[e(454)]=e(349),t[e(495)]=e(517),t[e(340)]=e(484),t.Hznfp=function(e,t){return e<t};const n=t;let s;try{s=Function(n[e(334)](e(386)+e(439),n.TOYme)+");")()}catch(i){s=window}const r=s.console=s[e(399)]||{},a=[e(612),e(506),n[e(454)],n.ymGaD,e(427),"table",n[e(340)]];for(let o=0;n.Hznfp(o,a[e(570)]);o++){const t=Bt[e(388)+"r"].prototype[e(549)](Bt),n=a[o],s=r[n]||t;t[e(599)]=Bt[e(549)](Bt),t[e(351)]=s[e(351)].bind(s),r[n]=t}})();const At={};At[zt(457)]=60,At.blitz_5=300,At[zt(482)]=900,At[zt(476)]=0;const St=At,Pt=Gt;!function(){const e=Gt,t=Kt();for(;;)try{if(598207===parseInt(e(315))/1+-parseInt(e(346))/2+-parseInt(e(312))/3+-parseInt(e(348))/4+parseInt(e(328))/5*(-parseInt(e(330))/6)+-parseInt(e(341))/7+parseInt(e(334))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ht=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Gt(336)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Gt,t={};t[e(339)]="(((.+)+)+)+$";const n=t;return Ht[e(345)]().search(n[e(339)])[e(345)]()[e(340)+"r"](Ht)[e(304)](e(307)+"+$")});Ht();const It=function(){const e=Gt,t={};t.AlmOu=e(338);const n=t;let s=!0;return function(t,r){const a=e;if(a(338)!==n[a(329)]){const e=_0xb9b851?function(){if(_0x567417){const e=_0x454feb[a(336)](_0x3e3ab8,arguments);return _0x535d14=null,e}}:function(){};return _0x41cbba=!1,e}{const e=s?function(){if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return s=!1,e}}}();function Gt(e,t){e-=298;const n=Kt();let s=n[e];if(void 0===Gt.RiufEn){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Gt.cZxEaL=r,Gt.xZGJGk={},Gt.RiufEn=!0}const a=e+n[0],i=Gt.xZGJGk[a];if(i)s=i;else{const e=function(e){this.flkdoY=e,this.vwGNXp=[1,0,0],this.rUigCL=function(){return"newState"},this.rzFoAY="\\w+ *\\(\\) *{\\w+ *",this.UMejXd="['|\"].+['|\"];? *}"};e.prototype.IHWZzI=function(){const e=new RegExp(this.rzFoAY+this.UMejXd).test(this.rUigCL.toString())?--this.vwGNXp[1]:--this.vwGNXp[0];return this.AcaYXX(e)},e.prototype.AcaYXX=function(e){return Boolean(~e)?this.urMRXS(this.flkdoY):e},e.prototype.urMRXS=function(e){for(let t=0,n=this.vwGNXp.length;t<n;t++)this.vwGNXp.push(Math.round(Math.random())),n=this.vwGNXp.length;return e(this.vwGNXp[0])},new e(Gt).IHWZzI(),s=Gt.cZxEaL(s),Gt.xZGJGk[a]=s}return s}It(void 0,function(){const e=Gt,t={qjIys:"Haptic fee"+e(347)+e(313),CoVcQ:"rIOwL",yURqP:function(e,t){return e(t)},GSUVM:e(309)+e(318),UfdPc:function(e){return e()},bZfNA:e(327),HCcwf:"warn",qfPWf:e(298),CIfll:e(317),NyYRd:function(e,t){return e<t}},n=t[e(332)](function(){const n=e;if(t[n(314)]===n(300)){let e;try{e=t[n(342)](Function,t[n(325)]+"{}.constru"+n(331)+'rn this")( ));')()}catch(s){e=window}return e}if(!_0xc722a)return!1;try{const e=_0x58553b[_0x4515aa];return _0x48113f[n(335)](e)}catch(r){return _0x2bb8a8.warn(t[n(343)],r),!1}}),s=n[e(337)]=n[e(337)]||{},r=[t[e(306)],t[e(319)],"info",t.qfPWf,"exception",e(344),t[e(323)]];for(let a=0;t[e(324)](a,r.length);a++){const t=It[e(340)+"r"][e(333)][e(322)](It),n=r[a],i=s[n]||t;t.__proto__=It[e(322)](It),t[e(345)]=i.toString.bind(i),s[n]=t}})();const Wt={};function Kt(){const e=["Dg9tDhjPBMC","mJm1ndeYAMjAvvf1","zgjHy2SGzMfPBa","nJaWmJGWCLPJtxbL","zxjYB3i","AgfWDgLJCW","CKLpD0W","vwjHqLe","AxntDxbWB3j0zq","DhfhA1G","C2vHCMnO","C3vJy2vZCW","yLPMtKe","kcGOlISPkYKRkq","AgvHDNK","CMv0DxjUicHMDq","BwvKAxvT","C2vSzwn0Aw9U","mtu2mZGYmNzPsg92BW","zwq6","q29wy1e","odaXmJK4sLrpwgnh","Dw5KzwzPBMvK","DhjHy2u","BMn0Aw9UkcKG","senJD2y","BgLNAhq","sgfWDgLJigzLzq","yMLUza","q0LMBgW","tNLzuMq","r1nvvK0","zwvHsNi","Bg9N","mtbjrujAAgC","qwXTt3u","mtKWode1nKLRBMD2za","y3rVCIGICMv0Dq","vwzKugm","ChjVDg90ExbL","mteWodqXmtjOD0zKsgO","DMLICMf0zq","yxbWBhK","y29UC29Szq","uMvhqwO","wKzWC0e","y29UC3rYDwn0BW","mte0nduYmvvjs0rosW","EvvsCva","CwPjExm","DgfIBgu"];return(Kt=function(){return e})()}Wt.light=10,Wt.medium=25,Wt[Pt(308)]=50,Wt[Pt(305)]=[10,50,20],Wt.error=[50,30,50,30,50],Wt[Pt(311)]=5;const Et=Wt,Ut=()=>{const e=Pt,n={WWxhB:e(321)+e(347)+"ed:",eeaJr:function(e,t){return e!==t},UbaBQ:e(316),lTDTw:e(335),tqGkX:function(e,t,n){return e(t,n)}},s=n[e(326)](typeof navigator,n[e(301)])&&n.lTDTw in navigator,r=n[e(303)](t.useCallback,(t=e(320))=>{const n=e;if(!s)return!1;try{const e=Et[t];return navigator[n(335)](e)}catch(r){return!1}},[s]),a={select:t.useCallback(()=>r(e(311)),[r]),move:n[e(303)](t.useCallback,()=>r(e(320)),[r]),capture:t.useCallback(()=>r(e(310)),[r]),check:t.useCallback(()=>r("heavy"),[r]),victory:t.useCallback(()=>r(e(305)),[r]),error:n[e(303)](t.useCallback,()=>r(e(298)),[r]),castle:t.useCallback(()=>!!s&&navigator[e(335)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i[e(302)+"d"]=s,i[e(335)]=r,i[e(299)]=a,i},Tt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},_t=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),M=t.useRef(null),{haptics:k}=Ut();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=_t(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?k.capture():k.move();return void(await n(b,c)?(y(null),j([])):k.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return k.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,h,n,s,k]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:M,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=_t(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,x=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=H(i),j=I&&g&&!y,N=I&&y;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Tt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Ot={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:M,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Xt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Ot[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,h=d%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?k[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Rt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:M,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Vt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:E,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Jt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:E,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const k=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=k.find(e=>e.value===h))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Rt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(G,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(W,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Vt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(W,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Xt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(T,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(_,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(W,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(Y,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(W,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(V,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(J,{align:"end",className:"bg-popover",children:k.map(e=>u.jsx(Z,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(W,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(J,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(M,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(x,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Zt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(x,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Ft=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=kt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(W,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(W,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=he(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:M,pieceOpacity:k}=xe(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[I,G]=t.useState(!1),[K,E]=t.useState(!1);se(p);const U=t.useMemo(()=>p?fe(p):null,[p]),T=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const _=async e=>{if(e&&!v)return void G(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(W,{variant:L?"outline":"default",size:"sm",onClick:()=>T(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(W,{variant:L?"default":"outline",size:"sm",onClick:()=>T(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),M&&h&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:k})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",U&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",U]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(W,{onClick:()=>_(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(W,{onClick:()=>_(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(W,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?ke(h,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(Me,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(W,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:M,pieceOpacity:k}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:M,pieceOpacity:k},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:I,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),E(!0)},trigger:"download"}),u.jsx(Le,{isOpen:K,onClose:()=>E(!1)})]})},en=an;!function(){const e=an,t=un();for(;;)try{if(291202===-parseInt(e(190))/1*(parseInt(e(160))/2)+-parseInt(e(153))/3*(-parseInt(e(167))/4)+parseInt(e(227))/5*(-parseInt(e(217))/6)+parseInt(e(196))/7*(-parseInt(e(236))/8)+parseInt(e(212))/9*(-parseInt(e(204))/10)+-parseInt(e(164))/11*(parseInt(e(185))/12)+parseInt(e(178))/13)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[an(198)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=an,t={};t[e(161)]=e(165)+"+$";const n=t;return tn[e(149)]()[e(218)]("(((.+)+)+)+$")[e(149)]()[e(150)+"r"](tn).search(n.twuUE)});tn();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[an(198)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();nn(void 0,function(){const e=an,t={sTMFK:function(e,t){return e(t)},njcsJ:function(e,t){return e+t},mnZSe:function(e,t){return e+t},VSSvJ:e(194)+'ctor("retu'+e(180)+" )",hcdzZ:e(165)+"+$",bRMQQ:"warn",PIpUo:e(234),EDoEF:e(146),sjQhY:e(175),Tncdu:e(208)},n=function(){const n=e;let s;try{s=t[n(226)](Function,t[n(225)](t.mnZSe("return (function() ",t[n(193)]),");"))()}catch(r){s=window}return s}(),s=n.console=n[e(206)]||{},r=[e(221),t.bRMQQ,t[e(195)],t[e(154)],e(201),t[e(223)],e(215)];for(let a=0;a<r[e(155)];a++){if(t.Tncdu!=t.Tncdu)return _0x5928b6[e(149)]()[e(218)](t[e(158)])[e(149)]().constructor(_0x4b2d44)[e(218)](t[e(158)]);{const t=nn[e(150)+"r"][e(224)].bind(nn),n=r[a],i=s[n]||t;t.__proto__=nn[e(213)](nn),t[e(149)]=i[e(149)][e(213)](i),s[n]=t}}})();const sn=()=>{const e=an,t={};t[e(157)]="Shortcuts:"+e(229)+e(205)+e(186)+e(240)+e(181);const n=t,s={};s[e(173)]=4e3,o.info(n.sYyPm,s)};en(222),en(170);const rn={};function an(e,t){e-=146;const n=un();let s=n[e];if(void 0===an.uQtNlE){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};an.esCvzZ=r,an.WInVnL={},an.uQtNlE=!0}const a=e+n[0],i=an.WInVnL[a];if(i)s=i;else{const e=function(e){this.xksXRW=e,this.kyVYuK=[1,0,0],this.Fpkfjo=function(){return"newState"},this.hLpgNY="\\w+ *\\(\\) *{\\w+ *",this.BjGWOp="['|\"].+['|\"];? *}"};e.prototype.QIxVMz=function(){const e=new RegExp(this.hLpgNY+this.BjGWOp).test(this.Fpkfjo.toString())?--this.kyVYuK[1]:--this.kyVYuK[0];return this.pqmGcn(e)},e.prototype.pqmGcn=function(e){return Boolean(~e)?this.HwfwQk(this.xksXRW):e},e.prototype.HwfwQk=function(e){for(let t=0,n=this.kyVYuK.length;t<n;t++)this.kyVYuK.push(Math.round(Math.random())),n=this.kyVYuK.length;return e(this.kyVYuK[0])},new e(an).QIxVMz(),s=an.esCvzZ(s),an.WInVnL[a]=s}return s}rn[en(210)]="R",rn[en(166)]="Resign game (during "+en(151);const on={key:"D"};on[en(166)]=en(239)+" (your turn)";const cn={};cn[en(210)]=en(233),cn.action=en(209)+"lobby / Ex"+en(202)+"een";const ln={};function un(){const e=["yMLUza","y3bQCgG","DhjHy2u","BhnJCMvLBIbTBW","ndm5mZHtENzAv2q","C2vHCMnO","Dg9mB3DLCKnHCW","vg9Nz2XLigz1Ba","Bg9N","vg9Nz2XLihnVDq","C2PrAfK","ChjVDg90ExbL","BMPJC0O","C1rnrKS","mZu1DKzgsMrk","swLcEgK","ie09txv0zsWGuG","khnOB3CGywXSkq","yLnozxu","rw5K","rxnJ","Aw5MBW","u3bHy2u","ohnkA1zeuq","u291BMqGBxv0zq","ywrKrxzLBNrmAq","t2zMzxiGzhjHDW","puXVyMj5lca/pq","zxjYB3i","vgvozwq","qNzYz3C","Dg9tDhjPBMC","y29UC3rYDwn0BW","CgXHEsK","AxndB250zw50rq","ntq3otHqsLvcwNO","rurVruy","BgvUz3rO","A2v5zg93BG","C1L5ug0","AgnKELO","zxnJyxbL","mty4mNfIq1jyzW","DhD1vuu","tMv4DcbTB3zL","C2HPzNrlzxK","nJCXt1rzwKny","kcGOlISPkYKRkq","ywn0Aw9U","nfneuhfQqG","uwnHuum","CMqGy29VCMrPBG","BMqGB24VB2zM","vg9Nz2XLl2v4Ca","yw5KigXLz2vUza","zhvYyxrPB24","DgfYz2v0","DgfIBgu","u291BMqGDw5TDq","C2zwq3m","mJe1odaZnZDNvKPuz0G","ihrPBwvSAw5L","CM4GDgHPCYiPka","sgvSCa","B3zL","C3rLBMvY","DxrZ","mZe5ntzSrfvfB2W","purYyxCSievZyW","ugXHEs9qyxvZzq","vM1Ir2W","zgL0ywjSzq","n3HeC2HjDa","yxrLCW","ChjLDMvUDerLzG","vLntDKO","E30Uy29UC3rYDq","ueLWvw8","mtuYntK1offKzMfWEG","vg9Nz2XLigjVyq","yxbWBhK","u2HVDYbRzxLIBW","r28GDg8Gzw5Kia","zxHJzxb0Aw9U","AxqGzNvSBhnJCG","DgvK","mtiWmJa5mhvozKXbAG","pvjLC2LNBIWGra","y29UC29Szq","yxjKihnOB3j0yW","t3v4zLm","uMv0DxjUihrVia","A2v5","yxvSDa","mZzkvxnywMG"];return(un=function(){return e})()}ln[en(210)]="?",ln.action=en(199)+en(207)+en(184);const dn={};dn[en(210)]=en(235),dn[en(166)]=en(187)+en(179);const mn={key:"â†"};mn[en(166)]="Previous m"+en(182);const hn={};hn[en(210)]="â†’",hn[en(166)]=en(162);const xn={};xn[en(210)]=en(232),xn[en(166)]=en(200)+en(230);const pn={};pn[en(210)]="F",pn[en(166)]=en(220)+en(216)+"de";const fn={};fn[en(210)]="C",fn.action=en(197)+en(169)+en(191);const gn={};gn[en(210)]="L",gn[en(166)]=en(171)+en(172);const vn=Cn;function bn(){const e=["vwzVAue","DhjHy2u","FJmYmda","BgvUz3rO","rM1WtKG","Cfz6zxO","C2XPy2u","Aw5MBW","qMzjBeC","zhzfEha","BMnkqMy","Dg9tDhjPBMC","nJm2mJq1zwLWwuz1","EvHWDuO","E30Uy29UC3rYDq","yxbWBhK","qMvNAw5Uzxi","Bw92zxrPBwu","wuTNrwy","rw1TDMm","C1nyDvm","AfbyCLK","tvDOz0e","DMfSDwf0Aw9Ula","vuL0vgi","zw5NAw5LlcbNCG","Bw92zq","C2jVEfy","CMvUzxnZ","wxL3shG","rwT4uKq","zxvnAwK","C2nVCMu","wgjrvNm","ufDMtuu","BwLU","y29UC29Szq","Dw5KBW","AxrPB24","BgfIzwW","Dg9bsMy","C2fU","BKfpv3K","CMvK","zw5NAw5Lug93zq","FJGWma","zxHJzxb0Aw9U","ChjVDg90ExbL","DgfIBgu","z2nWq1m","y3rVCIGICMv0Dq","idqTCgX5ihnLyq","CMv0DxjUicHMDq","ndm0ndmXofzVEhryyW","C2vpsue","vvfTtfG","vLrWy1e","Bw92zxm","EgnnqK4","ignHChr1CMvZ","DMfmr2W","C29YuhK","EhbuzwC","mtH0AvPnB24","mtiZnZiWCwrYzM1H","CMf0Aw5N","qMfZAwmGDgfJDa","zNjVBq","yw5HBhL6zvbVCW","igzHBgXPBMCGyG","zcbTB2rL","wgLhzNC","y29UC3rYDwn0BW","t1Hgs1G","rMHUreO","BwvKAxvT","y3DAuMu","zMvU","DhLWzq","C29YDa","twfRzxmGCMfUza","zxjYB3i","DgvYAwfSigf3yq","zxjcCuu","Bg9N","wM5bBg4","yMTOzNe","zwfZEq","y0rmALi","Dg9mB3DLCKnHCW","ChjVBw90Aw9U","CxPdugm","DeHYrM0","zgvWDgG","A2vkq3u","BM5iteq","y2fWDhvYzwq","BM90ihjLywr5la","CwjmwMu","otm1nvbqvuvuqG","zhfXsK4","AxrMuuG","yMLUza","BgzmCwe","sur1AgG","wMT5vLO","Aufsqxy","AwnZigfUzcbTyq","kcGOlISPkYKRkq","DhvYBG","Awntq2u","zgvZy3jPChrPBW","y29SB3i","AgfYza","D2fPDfjLywr5","twfZDgvY","B29Jrge","ywnRihrVigHHCG","mtiWnZG5CNzRBNP1","BMn0Aw9UkcKG","ufreDM4","CMfUzg9T","zMXVB3i","sgDHuNO","vvDIs2i","yM9HCMq","rMnzyLK","DMvYyM9Zzq","vNH0sMu","AxneCMf3","u3rVy2TMAxnOia","D3PqsNy","mtiZmZu0nfvntvv1AG","C2vHCMnO","Aw5JBhvKzxm","EuXctKS","sw5xuhy","yw5KBwfZDgvYia","CM4GDgHPCYiPka","AgHZBKm","B2nJyxnPB25HBa","zMLSDgvY","ndeXodK2ywvQEeTV","C3rVy2TMAxnO","zLrVzvK","nZbttKLuzey","t2Lksxa","D2fYBG","x19WCM90B19F","wNjTvvK","B20GBw92zxmSia","C25AtMu","Axnhyw1Lt3zLCG","yMvZDe1VDMu"];return(bn=function(){return e})()}!function(){const e=Cn,t=bn();for(;;)try{if(166688===parseInt(e(366))/1*(-parseInt(e(330))/2)+parseInt(e(385))/3+parseInt(e(245))/4+parseInt(e(279))/5+parseInt(e(331))/6*(parseInt(e(258))/7)+parseInt(e(255))/8+-parseInt(e(320))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Cn(282)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Cn,t={};t[e(272)]=e(375)+"+$";const n=t;return yn[e(278)]()[e(246)]("(((.+)+)+)+$")[e(278)]()[e(339)+"r"](yn)[e(246)](n[e(272)])});yn();const wn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Cn(282)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();wn(void 0,function(){const e=Cn,t={UMtgC:function(e,t){return e(t)},ncJBf:e(319)+e(386),XiGfw:'{}.constructor("return this")( )',ZRDuv:function(e){return e()},sSXuS:"log",OrqAh:e(260),tHrFm:e(274),dvExp:e(348),UQmLX:function(e,t){return e===t},bkhfq:e(257),itfQH:"PRbGV"};let n;try{const s=t.UMtgC(Function,t[e(277)]+t[e(338)]+");");n=t.ZRDuv(s)}catch(a){n=window}const s=n[e(303)]=n[e(303)]||{},r=[t[e(287)],t.OrqAh,t[e(359)],t[e(276)],e(313),"table",e(268)];for(let i=0;i<r[e(270)];i++)if(t[e(322)](t[e(353)],t[e(368)]))_0x479e4d=_0x1a78f6[e(299)],_0x259e9b=_0xdbfc62;else{const t=wn.constructor[e(314)].bind(wn),n=r[i],a=s[n]||t;t[e(261)]=wn[e(369)](wn),t[e(278)]=a[e(278)][e(369)](a),s[n]=t}})();const jn={};function Cn(e,t){e-=235;const n=bn();let s=n[e];if(void 0===Cn.oOpcvZ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Cn.NHKwjg=r,Cn.iDWaGd={},Cn.oOpcvZ=!0}const a=e+n[0],i=Cn.iDWaGd[a];if(i)s=i;else{const e=function(e){this.xOtlSQ=e,this.ZvagvM=[1,0,0],this.JBpoQJ=function(){return"newState"},this.jUzSlo="\\w+ *\\(\\) *{\\w+ *",this.YEYsVK="['|\"].+['|\"];? *}"};e.prototype.XzakOs=function(){const e=new RegExp(this.jUzSlo+this.YEYsVK).test(this.JBpoQJ.toString())?--this.ZvagvM[1]:--this.ZvagvM[0];return this.iFOXxr(e)},e.prototype.iFOXxr=function(e){return Boolean(~e)?this.XrCvCe(this.xOtlSQ):e},e.prototype.XrCvCe=function(e){for(let t=0,n=this.ZvagvM.length;t<n;t++)this.ZvagvM.push(Math.round(Math.random())),n=this.ZvagvM.length;return e(this.ZvagvM[0])},new e(Cn).XzakOs(),s=Cn.NHKwjg(s),Cn.iDWaGd[a]=s}return s}jn.p=100,jn.n=320,jn.b=330,jn.r=500,jn.q=900,jn.k=2e4;const Nn=jn,Mn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],kn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],zn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Dn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Bn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Ln=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function qn(e){switch(e[Cn(356)+"e"]()){case"p":return Mn;case"n":return kn;case"b":return zn;case"r":return Dn;case"q":return Bn;case"k":return Ln;default:return[]}}function An(e){const t=Cn,n={};n[t(252)]=function(e,t){return e===t},n.iARAv=function(e,t){return e>t},n[t(350)]=function(e,t){return e===t},n[t(297)]=function(e,t){return e*t};const s=n;if(e.isCheckmate())return s.hhsnC(e[t(376)](),"w")?-1/0:1/0;if(e[t(242)]()||e.isStalemate())return 0;let r=0;const a=e[t(238)]();for(let o=0;o<8;o++)for(let e=0;e<8;e++){const n=a[o][e];if(n){const a=Nn[n[t(345)]]||0,i=qn(n[t(345)]);let c=0;if(s[t(373)](i[t(270)],0)){c=i[s[t(350)](n[t(379)],"w")?o:7-o][e]}const l=a+c;r+=s[t(350)](n[t(379)],"w")?l:-l}}const i=e[t(324)]().length;return r+="w"===e.turn()?2*i:s[t(297)](-i,2),r}function Sn(e,t,n,s,r){const a=Cn,i={gcpCS:a(243)+a(364)+a(336)+"ack to har"+a(337),mrVEs:function(e,t){return e(t)},hPXrY:function(e,t){return e===t},zBiXa:"VcsJH",XFnQH:function(e,t,n,s,r,a){return e(t,n,s,r,a)},MWhgA:"tApZY",OXFKX:a(249),WRRjz:"FmpNH",PTDvn:function(e,t,n,s,r,a){return e(t,n,s,r,a)}};if(i[a(288)](t,0)||e[a(265)]())return{score:An(e),move:null};const o={verbose:!0},c=e.moves(o);if(c[a(346)]((e,t)=>{const n=a;let s=0,r=0;return e[n(363)]&&(s+=Nn[e[n(363)]]||0),t[n(363)]&&(r+=Nn[t[n(363)]]||0),e[n(308)][n(247)]("+")&&(s+=50),t[n(308)][n(247)]("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const u of c)if("VcsJH"===i.zBiXa){e[a(293)](u);const c=i.XFnQH(Sn,e,t-1,n,s,!1);if(e[a(304)](),c[a(299)]>r&&(r=c[a(299)],o=u),s<=(n=Math.max(n,c[a(299)])))break}else if(_0x200e43){const e=_0x6edc0f[a(282)](_0x496743,arguments);return _0x20d24c=null,e}const l={};return l.score=r,l[a(293)]=o,l}if(i[a(289)]!==i[a(340)]){let r=1/0,o=null;for(const u of c)if(i[a(288)](i.WRRjz,a(271))){e[a(293)](u);const c=i[a(387)](Sn,e,t-1,n,s,!0);if(e[a(304)](),c[a(299)]<r&&(r=c[a(299)],o=u),(s=Math.min(s,c.score))<=n)break}else _0x328e68=_0x2c861b.score,_0x247983=_0x2e8ec8;const l={};return l[a(299)]=r,l[a(293)]=o,l}return _0x4d39df[a(260)](i[a(316)]),i.mrVEs(_0x21701a,_0x19a45c)}function Pn(e){const t=Cn,n={};n[t(296)]=function(e,t){return e<t},n[t(383)]=function(e,t){return e*t};const s=n,r={verbose:!0},a=e[t(324)](r);if(0===a[t(270)])return null;const i=a[t(254)](e=>e[t(363)]);return i[t(270)]>0&&s.YywHx(Math.random(),.3)?i[Math[t(235)](s[t(383)](Math.random(),i[t(270)]))]:a[Math[t(235)](Math[t(388)]()*a.length)]}function Hn(e){const t=Cn,n={FhnDJ:function(e,t){return e(t)},ZbGFa:function(e,t){return e+t},PWfME:t(319)+t(386),seOIA:t(281)+t(317)+'rn this")( )',ZrmUY:t(274),xpTeg:t(348),Emmvc:t(315),qzCPc:t(268),ZnAln:function(e,t){return e===t},icSCe:function(e,t){return e-t},KxnSS:t(307),XbQVs:function(e,t){return e===t},IDuhh:function(e,t){return e!==t},npdQS:function(e,t){return e<t}},s={};s[t(240)]=!0;const r=e.moves(s);if(0===r.length)return null;let a=null,i="w"===e[t(376)]()?-1/0:1/0;for(const c of r){if(t(325)===n.KxnSS){const e=_0x25d817?function(){if(_0x36b4a7){const e=_0x283cdf[t(282)](_0x153cdc,arguments);return _0x33bee2=null,e}}:function(){};return _0x262882=!1,e}{e[t(293)](c);const s=n[t(341)](An,e);if(e[t(304)](),n[t(300)](e.turn(),"w"))if(n[t(371)]("aWjjZ",t(309)))s>i&&(i=s,a=c);else{let e;try{e=RWiuvt[t(341)](_0x13d63b,RWiuvt.ZbGFa(RWiuvt[t(301)]+RWiuvt[t(321)],");"))()}catch(o){e=_0x2b4927}const n=e[t(303)]=e.console||{},s=[t(351),t(260),RWiuvt[t(262)],RWiuvt[t(329)],t(313),RWiuvt[t(286)],RWiuvt[t(358)]];for(let r=0;r<s[t(270)];r++){const e=_0x18328e[t(339)+"r"].prototype[t(369)](_0x33008b),a=s[r],i=n[a]||e;e[t(261)]=_0x594f62[t(369)](_0x365568),e[t(278)]=i[t(278)].bind(i),n[a]=e}}else n.npdQS(s,i)&&(i=s,a=c)}}if(Math[t(388)]()<.2){const s=r[t(346)]((s,r)=>{const a=t;e[a(293)](s);const i=An(e);e.undo(),e.move(r);const o=An(e);return e[a(304)](),n[a(352)](e[a(376)](),"w")?n[a(377)](o,i):n.icSCe(i,o)}),a=s.slice(0,Math[t(302)](3,s[t(270)]));return a[Math[t(235)](Math[t(388)]()*a[t(270)])]}return a}function In(e){const t=Cn;return Sn(e,4,-1/0,1/0,"w"===e.turn())[t(293)]}const Gn={id:"easy"};Gn[vn(306)]=vn(283),Gn.description=vn(347)+vn(263)+vn(253)+vn(326),Gn.rating=vn(312);const Wn={id:"medium"};Wn[vn(306)]="Club Player",Wn[vn(378)+"n"]=vn(333)+vn(374)+vn(349)+vn(295),Wn[vn(332)]="~1400";const Kn={};Kn.id=vn(380),Kn[vn(306)]=vn(382),Kn[vn(378)+"n"]="Advanced e"+vn(290)+vn(318)+"rch depth",Kn[vn(332)]="~2000";const En={};En.id=vn(256),En.label=vn(243)+"16",En.description="Real NNUE "+vn(292)+vn(250)+"strength",En[vn(332)]=vn(269),En[vn(311)+vn(310)]=!0;const Un=[Gn,Wn,Kn,En];!function(){const e=_n,t=On();for(;;)try{if(844213===parseInt(e(323))/1*(-parseInt(e(310))/2)+parseInt(e(335))/3+-parseInt(e(302))/4*(-parseInt(e(294))/5)+-parseInt(e(307))/6*(-parseInt(e(296))/7)+-parseInt(e(312))/8+parseInt(e(278))/9+-parseInt(e(299))/10*(parseInt(e(301))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Tn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[_n(268)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=_n,t={};t[e(306)]=e(261)+"+$";const n=t;return Tn.toString().search(n[e(306)])[e(264)]()[e(322)+"r"](Tn)[e(295)](e(261)+"+$")});function _n(e,t){e-=261;const n=On();let s=n[e];if(void 0===_n.NxQxbs){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};_n.NnJDbB=r,_n.PxQeWS={},_n.NxQxbs=!0}const a=e+n[0],i=_n.PxQeWS[a];if(i)s=i;else{const e=function(e){this.XazXyq=e,this.YlkSUL=[1,0,0],this.CowhHg=function(){return"newState"},this.xiOVJU="\\w+ *\\(\\) *{\\w+ *",this.qvwFnL="['|\"].+['|\"];? *}"};e.prototype.cctMvd=function(){const e=new RegExp(this.xiOVJU+this.qvwFnL).test(this.CowhHg.toString())?--this.YlkSUL[1]:--this.YlkSUL[0];return this.UIjGdM(e)},e.prototype.UIjGdM=function(e){return Boolean(~e)?this.tGyoJW(this.XazXyq):e},e.prototype.tGyoJW=function(e){for(let t=0,n=this.YlkSUL.length;t<n;t++)this.YlkSUL.push(Math.round(Math.random())),n=this.YlkSUL.length;return e(this.YlkSUL[0])},new e(_n).cctMvd(),s=_n.NnJDbB(s),_n.PxQeWS[a]=s}return s}Tn();const Yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[_n(268)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function On(){const e=["mZm1nJGWmeHICvHlDq","r1fcBu0","yNfQuxK","AvH3DuS","CM4GDgHPCYiPka","tgTit2m","ywjZ","u0rAtgy","y3vYCMvUDfG","vfPOs2q","y29UC3rYDwn0BW","mJu2mtryyuvVu0i","De55Bey","C3rHCNry","y3vYCMvUDa","vwrpz3e","y29UC29Szq","E30Uy29UC3rYDq","DKXxrgO","te1jy3i","uengvxe","v0X2r3m","uuz2q0C","odyZmti3ywL5DNDi","kcGOlISPkYKRkq","BMn0Aw9UkcKG","DMXctNC","Dg9tDhjPBMC","yMflv3K","y3vYCMvUDfK","wNjpC2C","yxbWBhK","v1jPvxy","C3rHCNrz","B25uB3vJAfn0yq","yMLUza","y3rVCIGICMv0Dq","AxntD2LWAw5N","C2XUB0q","vuT1zwe","ufnHBge","nJiYotKXn05WEvfOwG","rLfYvwe","rK5WzKm","y2XPzw50wa","ELrKBKi","B25nB3vZzurVDW","zhPPCKu","thrQq0i","Ewn6y28","y2XPzw50wq","DhjHy2u","B25uB3vJAevUza","x19WCM90B19F","y0ngANO","suP3A1m","Dg91y2HLCW","otvkDvvUAMC","C2vHCMnO","mJy2C29nA3rU","uLvPv2O","AgfUzgXLCNm","mtaWndiZnJbdvuPQA1a","Aw5MBW","mtfTD1rYvLy","mZa3mZmYqLrJBe1r","CMv0DxjUicHMDq","BgvUz3rO","CLDyyw4","r2nttgO","odiWodzqyxzwzLG","AerlzgW","ChjVDg90ExbL","ntr3CvL5wuC","BeXrqwu"];return(On=function(){return e})()}Yn(void 0,function(){const e=_n,t={};t[e(277)]=function(e,t){return e!==t},t[e(280)]=e(331),t[e(282)]="PhJFh",t[e(319)]=function(e,t){return e+t},t[e(276)]=e(303)+"nction() ",t[e(292)]="{}.constru"+e(273)+e(316)+" )",t[e(279)]="log",t[e(330)]="warn",t[e(285)]=e(288),t[e(327)]=function(e,t){return e<t};const n=t;let s;try{if(n.PSala(n.FNpfC,n[e(282)])){s=Function(n[e(319)](n[e(276)],n[e(292)])+");")()}else _0x249240>0?null==_0x454e8c||_0x454e8c():null==_0x417f2a||_0x417f2a()}catch(i){s=window}const r=s[e(328)]=s.console||{},a=[n.FQrUa,n[e(330)],e(300),"error","exception","table",n[e(285)]];for(let o=0;n[e(327)](o,a[e(304)]);o++){const t=Yn[e(322)+"r"][e(309)][e(272)](Yn),n=a[o],s=r[n]||t;t[e(290)]=Yn[e(272)](Yn),t[e(264)]=s[e(264)][e(272)](s),r[n]=t}})();const Xn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ee,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ee,description:"15 minutes"}],Rn=["bot","create","join"],Vn=()=>{var e,n,s,l,d,h,f,v,b,y,w;me();const[j]=Se(),{user:M,isPremium:k}=r(),{haptics:L}=Ut(),[q,A]=t.useState("lobby"),[S,H]=t.useState(!1),[I,G]=t.useState(!1),[K,U]=t.useState("bot"),[T,_]=t.useState("human"),[Y,O]=t.useState("medium"),[X,R]=t.useState("blitz_5"),[V,J]=t.useState("hotCold"),[Z,F]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=kt(),{playSound:Me}=vt(Ce,Ne),[ke,ze]=t.useState([]),[De,qe]=t.useState(!1),[Ae,Ee]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Rn.indexOf(K);let n;n="left"===e?Math.min(t+1,Rn.length-1):Math.max(t-1,0),n!==t&&(L.select(),U(Rn[n]))},[K,L]),{swipeOffset:ht,isSwiping:pt,handlers:ft}=((e={})=>{const n=_n,s={PSeBI:function(e,t){return e(t)},bqjQy:function(e,t){return e-t},TZhKd:function(e,t){return e+t},iXwuK:function(e){return e()},WLvGs:"UCgqW",yczco:function(e,t){return e>t},hDKdl:function(e,t){return e>t},WRiUv:function(e){return null==e?void 0:e()},cCFjz:function(e){return null==e?void 0:e()},RUiWj:function(e,t){return e>t},lLQAe:function(e,t){return e>t},GQBmM:"WbEej",LkHOc:function(e,t,n){return e(t,n)},slnoD:function(e,t,n){return e(t,n)},PCFUq:function(e){return null==e?void 0:e()},baKWy:n(324),QFvCG:function(e,t,n){return e(t,n)},rWXan:function(e,t,n){return e(t,n)},vlBNw:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s.PSeBI(t.useState,u),[h,x]=t.useState(!1),p={};p[n(325)]=0,p[n(270)]=0,p[n(320)]=0,p[n(266)]=0,p[n(274)]=!1;const f=t.useRef(p),g=s[n(334)](t.useCallback,(e,t)=>{const r=n,a={};a[r(325)]=e,a[r(270)]=t,a.currentX=e,a[r(266)]=t,a[r(274)]=!0,f[r(326)]=a,s.PSeBI(x,!0)},[]),v=s[n(305)](t.useCallback,(e,t)=>{const r=n;if(!f[r(326)][r(274)])return;f[r(326)].currentX=e,f[r(326)][r(266)]=t;const a=e-f.current.startX,i=s[r(314)](t,f[r(326)][r(270)]),o={};o.x=a,o.y=i,m(o)},[]),b=t.useCallback(()=>{const e=n;if("aFeBj"!==s[e(333)]){if(!f.current[e(274)])return;const t=f.current[e(320)]-f.current[e(325)],n=f[e(326)][e(266)]-f[e(326)].startY,a=Math[e(318)](t),u=Math.abs(n);if(s[e(286)](a,u)&&s[e(286)](a,r))s[e(308)](t,0)?s[e(269)](o):s[e(291)](i);else if(u>a&&s[e(297)](u,r))if(s[e(311)](n,0))null==l||l();else{if(e(284)===s[e(313)]){const e=_0x562812.apply(_0x162636,arguments);return _0x5ee944=null,e}null==c||c()}f[e(326)][e(274)]=!1,s.PSeBI(x,!1);m({x:0,y:0})}else _0xc8217e()},[r,i,o,c,l]),y=s[n(317)](t.useCallback,e=>{const t=n,r=e.touches[0];s.LkHOc(g,r[t(281)],r[t(287)])},[g]),w=t.useCallback(e=>{const t=n,s=e[t(293)][0];v(s[t(281)],s[t(287)])},[v]),j=s[n(263)](t.useCallback,()=>{b()},[b]),C=s.QFvCG(t.useCallback,e=>{const t=n;a&&s[t(275)](g,e[t(281)],e[t(287)])},[a,g]),N=t.useCallback(e=>{a&&v(e[n(281)],e.clientY)},[a,v]),M=s[n(317)](t.useCallback,()=>{a&&s[n(291)](b)},[a,b]),k=t.useCallback(()=>{const e=n,t=function(e){return s[_n(332)](e)};a&&f[e(326)][e(274)]&&(s[e(265)]===e(267)?_0x3a1f4f>0?t(_0x1ffda9):null==_0x974f31||_0x974f31():s[e(332)](b))},[a,b]),z={};z[n(271)+"rt"]=y,z.onTouchMove=w,z[n(289)]=j,z[n(283)+"n"]=C,z.onMouseMove=N,z.onMouseUp=M,z.onMouseLeave=k;const D={};return D.swipeOffset=d,D.isSwiping=h,D[n(298)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:Mt,joinByCode:Dt,resignGame:Bt,offerDraw:qt,loadGame:At,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=zt,n={LZqov:function(e,t){return e!==t},ALvEM:e(578),LesMq:function(e,t){return e===t},tyHcB:e(370),nPWSO:function(e,t){return e(t)},BYlIE:"victory",crBeo:function(e,t){return e(t)},pKHKv:e(455),rvdfv:function(e,t){return e(t)},wYEvc:function(e,t){return e(t)},cOgRu:function(e,t){return e>=t},RpMFr:function(e,t){return e(t)},cOHHQ:e(605),veneA:"O-O",MYwZw:e(488),PczIY:e(464),HRack:e(375),ZNcHM:e(473)+"s",yCBOI:"postgres_c"+e(435),jSHME:e(344),bewDj:function(e,t){return e!==t},oIhxE:e(569),QTHmJ:function(e,t){return e>=t},MVoee:"Please sig"+e(536)+"in a game",VBkWX:e(386)+e(439),rbDvq:function(e){return e()},GidCQ:e(349),dyUso:e(517),bufvL:e(360),mayhY:"trace",zHEVZ:function(e,t){return e<t},OdcAD:e(417),EjEKz:function(e,t){return e(t)},JXTYh:"Game not f"+e(586),ayAEz:function(e,t){return e(t)},hbEng:e(490)+"s",QmTZQ:e(504),HPPGY:e(617),MMnqr:function(e,t){return e instanceof t},SJzcB:e(529)+e(339),GLIDA:e(384),QyidH:function(e,t){return e(t)},HuPeP:e(444),nWKMk:function(e,t){return e(t)},dftAI:function(e,t){return e!==t},TjfiQ:e(567),BqbKu:e(529)+e(492)+"e",yPANV:function(e,t){return e(t)},PjFQl:function(e,t){return e(t)},ykybM:e(553),GFeuZ:e(407)+e(446)+e(600)+e(560),TcKWI:function(e,t){return e instanceof t},uZzSf:"Failed to "+e(596)+"de",OqgmJ:function(e,t){return e(t)},rimGW:function(e,t){return e||t},lUHGc:e(390),rJdUQ:e(573),JZQBF:function(e,t){return e(t)},OZUSL:e(381),Fytqy:function(e,t){return e(t)},eZqiu:function(e,t){return e===t},RSXHI:function(e,t){return e+t},Kmmzc:function(e,t){return e+t},PufGJ:function(e,t){return e===t},cuwlX:function(e,t){return e===t},hiFUn:e(378),mNfMJ:e(465),UREJs:e(338),gIERu:function(e,t){return e===t},YLRam:"black_wins",bCeFY:function(e,t){return e===t},GwMAi:"Black wins!",MsalK:"Move error:",caQda:function(e,t){return e||t},ypegY:function(e,t){return e===t},FXNCh:e(418)+e(547),AQVkr:function(e,t){return e||t},bjnQH:function(e,t,n,s){return e(t,n,s)},myDUZ:"profiles",HPySw:e(529)+e(366)+e(550),tCWDw:function(e,t){return e||t},AJTxo:function(e,t){return e===t},gKgNC:e(556),lXqQL:"You resigned",JngtO:e(395),VyuPw:function(e){return e()},HqNyZ:function(e,t){return e===t},AgXtG:function(e,t,n){return e(t,n)},rRGjS:function(e,t,n){return e(t,n)},gRjSd:function(e,t,n){return e(t,n)},VuRvk:function(e,t,n){return e(t,n)}},{user:s}=n.rbDvq(r),[l,u]=t.useState(new a),[d,m]=n[e(458)](t.useState,null),[h,x]=t.useState(!1),[p,f]=t.useState(null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n.VyuPw(kt),{playSound:w}=vt(b,y);t.useRef("");const j=d?n.HqNyZ(d[e(510)+e(615)],null==s?void 0:s.id)?"w":d["blackPlaye"+e(615)]===(null==s?void 0:s.id)?"b":null:null,C=n[e(409)](null==d?void 0:d.status,e(553))&&n[e(613)](l[e(443)](),j);t.useEffect(()=>{const t=e,r={MCHLe:function(e,t){return n.cOgRu(e,t)},nUnXp:function(e,t){return n[Lt(458)](e,t)},LhWBM:function(e,t){return e!==t},SsHdA:"ppyVO",BDtLm:n[t(604)],fVkOa:function(e,t){return e(t)},EfGYe:n[t(394)],peOZH:function(e,t){return e===t},dEOSy:n.MYwZw,CyNgT:"castle",IUqrw:n[t(447)]};if(!(null==d?void 0:d.id))return;const o=i[t(440)]("game-"+d.id).on(t(354)+"hanges",{event:n[t(432)],schema:t(344),table:n.ZNcHM,filter:t(606)+d.id},e=>{const r=t,i=e[r(424)];if("completed"===i[r(576)]&&n[r(397)](d[r(576)],n.ALvEM)&&(n[r(346)](i[r(376)],n[r(494)])?w(n[r(494)]):i.winner_id===(null==s?void 0:s.id)?n[r(520)](w,n.BYlIE):n.crBeo(w,n[r(507)])),n[r(568)](m,e=>e?{...e,status:i[r(576)],result:i[r(376)],pgn:i[r(389)],currentFen:i[r(414)+"n"],moveCount:i[r(410)],whiteTimeRemaining:i[r(585)+r(382)],blackTimeRemaining:i[r(515)+"_remaining"],winnerId:i[r(575)],blackPlayerId:i["black_play"+r(429)],startedAt:i[r(544)]}:null),i[r(414)+"n"]){const e=new a(i[r(414)+"n"]);n[r(415)](u,e)}}).subscribe(),c=i.channel("moves-"+d.id).on(n.yCBOI,{event:t(442),schema:n[t(445)],table:"chess_moves",filter:"game_id=eq."+d.id},e=>{const n=t,a=e[n(424)],i=a[n(504)];if(i&&i[n(570)]>=4){const e=i[n(478)](2,4);r[n(332)](v,t=>new Set([...t,e]))}if(r.LhWBM(a[n(335)],null==s?void 0:s.id)){const e=a[n(571)];if(e[n(558)]("#"))w(n(430));else if(e[n(558)]("+"))n(597)===r[n(422)]?r[n(332)](w,r.BDtLm):_0x4acf0d=_0x184125;else if(e[n(558)]("x"))r[n(419)](w,n(381));else if(e===r.EfGYe||r.peOZH(e,r[n(468)]))if(n(554)!==n(505))w(r.CyNgT);else{const e=_0x4322c9[n(388)+"r"][n(403)].bind(_0xe78b67),t=_0x2c4cc6[_0x337d9b],s=_0x4fa767[t]||e;e.__proto__=_0x4d3625[n(549)](_0x24fa79),e.toString=s.toString[n(549)](s),_0x1b1832[t]=e}else w(r.IUqrw)}}).subscribe();return()=>{const e=t;i[e(541)+e(431)](o),i.removeChannel(c)}},[null==d?void 0:d.id,null==d?void 0:d[e(576)],null==s?void 0:s.id,w]);const N=n[e(609)](t.useCallback,async t=>{const s=e;if(n.OdcAD!==s(538)){x(!0),n.EjEKz(f,null);try{const{data:e,error:r}=await i[s(527)](s(473)+"s").select("*").eq("id",t)[s(425)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(539)]);const o={};o.id=e.id,o.whitePlayerId=e[s(531)+s(429)],o["blackPlaye"+s(615)]=e[s(614)+s(429)],o.status=e.status,o[s(376)]=e[s(376)],o[s(389)]=e.pgn||"",o[s(426)]=e[s(414)+"n"],o.moveCount=e[s(410)]||0,o[s(608)+"l"]=e[s(372)+"ol"],o[s(589)+s(594)]=e[s(585)+"_remaining"],o.blackTimeRemaining=e["black_time"+s(382)],o.whitePalette=e[s(551)+"tte"],o[s(437)+"te"]=e.black_palette,o[s(524)+s(486)]=e["challenge_"+s(352)],o[s(572)]=e[s(575)],o[s(559)]=e[s(592)],o.startedAt=e.started_at,n[s(520)](m,o);const c=new a(e[s(414)+"n"]);n.ayAEz(u,c);const l={};l[s(402)]=!0;const{data:d}=await i[s(527)](n[s(542)])[s(345)](n[s(405)]).eq(n.HPPGY,t)[s(362)](s(497)+"r",l);if(d){const e=new Set;d[s(463)](t=>{const r=s;if(n[r(593)](r(569),n[r(450)]))return _0xacab04.error(r(521)+"n in to create a game"),null;t[r(504)]&&n.QTHmJ(t[r(504)].length,4)&&e.add(t[r(504)][r(478)](2,4))}),n.EjEKz(v,e)}}catch(r){f(n[s(579)](r,Error)?r[s(513)]:n[s(448)])}finally{if("IhSzL"!==n.GLIDA)return _0x44b3a7[s(517)](n.MVoee),!1;n[s(590)](x,!1)}}else{let e;try{const t=cSQjMN.rvdfv(_0x436498,cSQjMN[s(347)]+(s(337)+s(603)+s(449)+" ));"));e=cSQjMN[s(391)](t)}catch(o){e=_0x1d5666}const t=e[s(399)]=e.console||{},n=[s(612),s(506),cSQjMN[s(398)],cSQjMN[s(358)],s(427),cSQjMN[s(452)],cSQjMN[s(341)]];for(let r=0;cSQjMN[s(516)](r,n.length);r++){const e=_0x100672.constructor[s(403)][s(549)](_0x183b1a),a=n[r],i=t[a]||e;e[s(599)]=_0x37b2dd[s(549)](_0x2abc61),e[s(351)]=i[s(351)][s(549)](i),t[a]=e}}},[]),M=n.AgXtG(t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o[c(517)](c(521)+"n in to cr"+c(565)+"e"),null;x(!0),f(null);try{const e=St[t]||null,{data:l}=await i.rpc(c(374)+"hallenge_c"+c(486)),u={};u[c(531)+c(429)]=s.id,u[c(576)]=n[c(496)],u[c(372)+"ol"]=t,u[c(585)+c(382)]=e,u[c(515)+c(382)]=e,u[c(551)+c(519)]=a,u[c(451)]=r,u["challenge_"+c(352)]=l;const{data:d,error:m}=await i[c(527)]("chess_games")[c(342)](u).select()[c(416)]();if(m)throw m;return o[c(483)](r?c(493)+c(545)+c(406)+c(355):c(367)+c(470)+l),await n[c(438)](N,d.id),d.id}catch(l){if(n[c(469)](n[c(509)],"TMjnd")){const e=l instanceof Error?l.message:n[c(530)];return n.EjEKz(f,e),o[c(517)](e),null}_0x3660c0[c(517)]("Failed to "+c(366)+" ratings:",_0x32703a)}finally{n[c(413)](x,!1)}},[s,N]),k=n[e(546)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(517)]("Please sig"+a(536)+a(421)),!1;n[a(616)](x,!0),f(null);try{const{data:e,error:c}=await i.from(n[a(583)])[a(345)]("*").eq("id",t)[a(425)+"e"]();if(c)throw c;if(!e)throw new Error(n[a(539)]);if(e[a(576)]!==a(444))throw new Error(a(343)+"dy started");if(e[a(531)+a(429)]===s.id)throw new Error(a(581)+a(373)+a(423));const{error:l}=await i[a(527)](n.ZNcHM)[a(436)]({black_player_id:s.id,black_palette:r,status:n.ykybM,started_at:(new Date)[a(350)+"g"](),last_move_at:(new Date)[a(350)+"g"]()}).eq("id",t);if(l)throw l;return w(a(460)),o[a(483)](n[a(548)]),await N(t),!0}catch(c){const e=n[a(579)](c,Error)?c[a(513)]:a(529)+a(587);return f(e),o[a(517)](e),!1}finally{n.RpMFr(x,!1)}},[s,N,w]),z=n.rRGjS(t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(517)](a(521)+a(536)+a(421)),!1;n[a(413)](x,!0),f(null);try{const{data:e,error:s}=await i.from(n[a(583)]).select("id").eq(a(532)+a(352),t[a(591)+"e"]()).eq(a(576),n[a(496)]).maybeSingle();if(s)throw s;if(!e)throw new Error("Invalid or"+a(523)+a(574)+a(486));return await k(e.id,r)}catch(c){const e=n[a(580)](c,Error)?c.message:n[a(385)];return f(e),o[a(517)](e),!1}finally{x(!1)}},[s,k]),D=n[e(546)](t.useCallback,async(t,r,c)=>{const m=e,h={uxQqA:m(348)+"+$",rILjw:function(e,t){return n[m(601)](e,t)},KmVvh:"illegal"};if(n[m(428)](!d,!s)||!C)return!1;try{if(n.dftAI(n[m(522)],"PDAGW")){const e={};e[m(527)]=t,e.to=r,e[m(511)]=c;const x=l[m(464)](e);if(!x)return n[m(397)](n[m(500)],n[m(500)])?_0x49d7fc[m(351)]().search(tWUxXU[m(503)])[m(351)]()[m(388)+"r"](_0x2a7c6c)[m(365)](m(348)+"+$"):(w("illegal"),!1);l[m(441)+"e"]()?w(m(430)):l[m(400)]()?n[m(453)](w,n.cOHHQ):x[m(564)]?w(n[m(535)]):n[m(346)](x[m(357)],m(331))||x.san===m(488)?w(m(462)):n[m(383)](w,m(464)),u(new a(l[m(393)]())),n[m(377)](v,e=>new Set([...e,r]));const p=l.pgn(),f=l.fen();let g=null,b=null,y=n.ykybM;if(l.isGameOver()&&(y=n[m(557)],l[m(441)+"e"]()?(g="w"===l[m(443)]()?m(498):m(556),b=n[m(512)](l.turn(),"w")?d[m(534)+m(615)]:d[m(510)+m(615)]):g=m(370)),await i.from(m(490)+"s")[m(342)]({game_id:d.id,player_id:s.id,move_number:n[m(471)](d.moveCount,1),move_san:x[m(357)],move_uci:n[m(471)](n[m(368)](t,r),c||""),fen_after:f}),await i[m(527)](n[m(583)])[m(436)]({pgn:p,current_fen:f,move_count:d[m(588)]+1,last_move_at:(new Date)[m(350)+"g"](),status:y,result:g,winner_id:b,completed_at:n[m(566)](y,n[m(557)])?(new Date).toISOString():null}).eq("id",d.id),n.cuwlX(y,n.ALvEM)&&g){if(await B(d["whitePlaye"+m(615)],d[m(534)+"rId"],g),"draw"===g)if(n.hiFUn===n[m(563)])n[m(458)](w,m(370));else{const e=new _0x21793f(_0x416bb1[m(414)+"n"]);_0x188c79(e)}else b===(null==s?void 0:s.id)?w(m(501)):w(n[m(507)]);if(g===m(556)){if(!n.eZqiu(m(465),n[m(420)]))return h[m(595)](_0x39f594,h.KmVvh),!1;o[m(483)]("w"===j?n[m(584)]:m(472)+"!")}else n[m(481)](g,n[m(396)])?o.success(n[m(409)](j,"b")?m(338):n[m(610)]):o.info(xt(l))}return!0}_0x24453f(n[m(604)])}catch(x){return!1}},[l,d,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(!n[l(353)](!t,!r)&&!n.ypegY(a,"abandoned"))try{const{data:e}=await i.from(l(518))[l(345)](n.FXNCh).in("user_id",[t,r]);if(!e||2!==e[l(570)])return;const u=e[l(485)](e=>e[l(467)]===t),d=e[l(485)](e=>e[l(467)]===r);if(n[l(502)](!u,!d))return;const m=u[l(380)]||1200,h=d.elo_rating||1200,x=n.eZqiu(a,n.tyHcB)?n[l(494)]:a,p=n.bjnQH(c,m,h,x),f={};f.elo_rating=p[l(491)][l(401)];const g={};if(g.elo_rating=p[l(552)].newRating,await Promise[l(363)]([i.from(n[l(577)])[l(436)](f).eq(l(467),t),i[l(527)](l(518))[l(436)](g).eq(l(467),r)]),(null==s?void 0:s.id)===t){const e=p[l(491)].change;o.info("Rating: "+p.white[l(401)]+" ("+(e>=0?"+":"")+e+")")}else if(n[l(346)](null==s?void 0:s.id,r)){const e=p[l(552)][l(412)];o[l(349)](l(555)+p[l(552)].newRating+" ("+(e>=0?"+":"")+e+")")}}catch(u){}},[s]),L=n[e(537)](t.useCallback,async()=>{const t=e;if(n[t(479)](!d,!s)||!j)return;const r=n[t(613)](j,"w")?n[t(396)]:n[t(387)],a="w"===j?d[t(534)+t(615)]:d["whitePlaye"+t(615)];await i[t(527)]("chess_games")[t(436)]({status:t(578),result:r,winner_id:a,completed_at:(new Date)[t(350)+"g"]()}).eq("id",d.id),await B(d[t(510)+t(615)],d[t(534)+t(615)],r),o[t(349)](n.lXqQL)},[d,s,j,B]),q=t.useCallback(async()=>{const t=e;if(n[t(397)](n.JngtO,"jctxT"))n.Fytqy(_0x45345e,t(370));else{if(o[t(349)](t(434)+t(456)+"onent auto"+t(514)+t(477)+t(364)),!d)return;await i[t(527)](t(473)+"s")[t(436)]({status:n.ALvEM,result:"draw",completed_at:(new Date)[t(350)+"g"]()}).eq("id",d.id),await B(d[t(510)+t(615)],d[t(534)+t(615)],t(370))}},[d,B]),A=n[e(487)](t.useCallback,t=>{const n=e,s={};return s[n(561)]=t,s[n(408)]=!0,l[n(461)](s)[n(371)](e=>e.to)},[l]),S={};return S.game=l,S[e(582)]=d,S[e(474)]=C,S[e(392)]=j,S[e(411)]=h,S.error=p,S.makeMove=D,S[e(433)]=M,S[e(607)]=k,S[e(369)]=z,S.resignGame=L,S[e(466)]=q,S[e(508)]=N,S[e(602)+e(336)]=A,S[e(540)+"es"]=g,S})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=an,s={TeNed:function(e){return e()},FSWPw:function(e,t){return e!==t},VmbGl:n(159),FYAmN:function(e,t){return e===t},QcaQC:n(231),cpjph:n(156),IiBxi:function(e,t,n){return e(t,n)},Bvrgw:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=kt(),m=s[n(228)](t.useCallback,e=>{const t=n;if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e[t(174)][t(152)+t(189)])return;const m=e[t(210)][t(219)+"e"]();switch(m){case"m":u(),o.info(d?t(237)+"d":t(176)+t(203),{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":if(c&&r){if(s.FSWPw(t(177),t(177))){const e=_0x4014cb[t(198)](_0x4e313b,arguments);return _0x543db6=null,e}e[t(192)+"ault"](),r()}break;case"d":c&&l&&a&&(e[t(192)+t(211)](),a());break;case s[t(188)]:i&&(e[t(192)+t(211)](),i());break;case"?":case"/":(!e[t(163)]||s.FYAmN(m,"?"))&&(t(231)===s[t(168)]?(e["preventDef"+t(211)](),sn()):(_0x5971e7["preventDef"+t(211)](),s[t(147)](_0x311ed2)))}},[u,d,r,a,i,c,l]);s[n(148)](t.useEffect,()=>{const e=n;return window[e(238)+e(183)](s[e(214)],m),()=>window.removeEventListener("keydown",m)},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Bt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?qt:void 0,onBackToLobby:"lobby"!==q?It:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!M)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",M.id).single();(null==e?void 0:e.elo_rating)&&Ee(e.elo_rating)})()},[M]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==bt?void 0:bt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&M){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",M.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ee(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,M]);const Gt=async()=>{if(!M)return void H(!0);if(!k)return void G(!0);const e=Ie.find(e=>e.id===V),t=(null==e?void 0:e.white)||{};await Nt(X,Z,t)&&A("waiting")},Wt=async e=>{if(!M)return void H(!0);if(!k)return void G(!0);const t=Ie.find(e=>e.id===V),n=(null==t?void 0:t.black)||{};await Mt(e,n)&&A("game")},Kt=()=>ke.length?ke.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Et=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),xe(V);const n=Ie.filter(e=>e.id!==V),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),Me("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Un.find(e=>e.id===Y))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Tt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},_t=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Tt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return Me("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(Me("checkmate"),L.victory()):ee.isCheck()?(Me("check"),L.check()):r.captured?(Me("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(Me("castle"),L.castle()):(Me("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),Me("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),Me("draw"),o.info(xt(ee))),!0;oe(!0);const i=function(e){const t=Cn,n={};n[t(239)]=t(354),n[t(294)]=function(e,t){return e*t},n[t(372)]=t(342),n[t(298)]=function(e,t){return e+t};const s=n;switch(e){case s.FcYbY:return 300+s[t(294)](Math.random(),500);case s[t(372)]:return s.euMii(500,1e3*Math[t(388)]());case"hard":return s[t(298)](800,s[t(294)](Math.random(),1500));case t(256):return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=Cn,s={lfLqa:"easy",cwZRe:function(e,t){return e(t)},UfoiA:"medium",sorPy:function(e,t){return e(t)},wzPJv:n(380)};switch(t){case s[n(370)]:return s[n(343)](Pn,e);case s[n(267)]:return s[n(328)](Hn,e);case s[n(244)]:return s[n(328)](In,e);case n(256):return s[n(343)](In,e);default:return Pn(e)}}(ee,Y);if(c){const e=Tt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(Me("checkmate"),L.error()):ee.isCheck()?(Me("check"),L.check()):c.captured?(Me("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?Me("castle"):(Me("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),Me("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),Me("draw"),o.info(xt(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,Y,Me,L]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Ft,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Rn.map(e=>u.jsx("button",{onClick:()=>{L.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(W,{onClick:Et,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Un.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(V===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ge,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(We,{to:"/openings",children:u.jsxs(W,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ke,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(We,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!k&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(W,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),M&&k&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(W,{onClick:async()=>{if(!M)return void H(!0);if(!k)return void G(!0);const e=Kt().filter(e=>e.white_player_id!==M.id);e.length>0?await Wt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Gt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Kt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Kt().filter(e=>e.white_player_id!==(null==M?void 0:M.id)).length," opponent",1!==Kt().filter(e=>e.white_player_id!==(null==M?void 0:M.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Xn.map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(V===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Te,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(W,{onClick:Gt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!k,children:[!k&&u.jsx(_e,{className:"h-4 w-4"}),"Create Game",u.jsx(Ye,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Te,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(W,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!M)return void H(!0);if(!k)return void G(!0);const e=Ie.find(e=>e.id===V),t=(null==e?void 0:e.black)||{};await Dt(Q.trim(),t)&&A("game")},disabled:jt||!k,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ke.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ke.map(e=>{var t;const n=e.white_elo||1200,s=M&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==M?void 0:M.id),a=M?Xe(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Xn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),u.jsx(W,{size:"sm",onClick:()=>Wt(e.id),disabled:jt||!k||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!Z&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),u.jsx(W,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Re,{className:"h-4 w-4"})})]})]}),u.jsx(W,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&bt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==M?void 0:M.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(W,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(W,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Ve,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,movedSquares:Ht,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&u.jsx(Zt,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==M?void 0:M.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(W,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(W,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Te,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(W,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Un.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=Un.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{le("loss"),Me("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Ve,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:ee.fen(),onMove:_t,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===he))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:(null==(d=Ie.find(e=>e.id===he))?void 0:d.white)||Ie[0].white,blackPalette:(null==(h=Ie.find(e=>e.id===pe))?void 0:h.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:(null==(f=Ie.find(e=>e.id===he))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Jt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(W,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(W,{variant:"outline",onClick:Et,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(W,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Ze,{}),u.jsx(Le,{isOpen:S,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:I,onClose:()=>G(!1),trigger:"general"}),u.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:we,whitePalette:"bot-game"===q?(null==(b=Ie.find(e=>e.id===he))?void 0:b.white)||Ie[0].white:(null==bt?void 0:bt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===q?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==bt?void 0:bt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=Un.find(e=>e.id===Y))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:we.length}})]})};export{Vn as default};
