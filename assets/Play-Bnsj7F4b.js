import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as w,aZ as y,bC as j,ad as C,aj as N,bD as k,bE as z,af as M,ag as D,ai as B,y as q,bF as L,bG as S,b6 as A,ae as P,bH as H,ah as _,bI as T,B as I,bJ as G,bK as E,bL as U,bM as K,bN as O,bO as W,bP as Y,bQ as Z,bR as V,bS as R,bT as F,bU as X,bV as J,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as we,a5 as ye,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as ze,c7 as Me,an as De,av as Be,aw as qe,c8 as Le,aM as Se,c9 as Ae,H as Pe,P as He,ca as _e,b3 as Te,bs as Ie,be as Ge,cb as Ee,aP as Ue,cc as Ke,d as Oe,b2 as We,a9 as Ye,cd as Ze,ce as Ve,cf as Re,al as Fe,au as Xe}from"./index-f_XxDhCa.js";import{L as Je}from"./LiveColorLegend-BGJ2tY6d.js";import{T as $e}from"./trending-down-D1IWs159.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-D8W17pd0.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=xt,t=dt();for(;;)try{if(312162===parseInt(e(381))/1*(-parseInt(e(429))/2)+parseInt(e(362))/3*(parseInt(e(372))/4)+parseInt(e(365))/5+parseInt(e(409))/6*(parseInt(e(403))/7)+-parseInt(e(392))/8*(parseInt(e(387))/9)+-parseInt(e(379))/10*(parseInt(e(373))/11)+parseInt(e(420))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=xt,t={};t.XmLwB=e(382)+"+$";const n=t;return ut.toString()[e(385)](n[e(378)])[e(428)]().constructor(ut)[e(385)](n.XmLwB)});function dt(){const e=["rhjHDYbIEsb0Aa","r2fTzsbKCMf3BG","Aw5MBW","mtyZmZiXoxj1BxDvza","AxnjBNn1zMzPyW","DhjHy2u","C3rHBgvTyxrL","Bw92zxmGyxzHAq","Dw5RBM93BG","nKHuzg9JEG","yLndrK0","zMvU","CMvLzM9SzcbYzq","DgHYzwvMB2XKxW","zsbMAwz0Es1TBW","zfjLCgv0AxrPBW","yxbWBhK","AxnuAhjLzwzVBa","u0z4Bu0","rgjzB0m","mZKWntaYogLotxfIyW","zxjYB3i","x3j1Bgu","y3rVCIGICMv0Dq","Aw5ZDwzMAwnPzq","AxvQy2m","y29UC29Szq","AuvLDM0","Dg9tDhjPBMC","nte1nJrNt0rjzKe","reDotLG","CMv0DxjUicHMDq","DgfIBgu","C3bSAxq","yMLUza","BMn0Aw9UkcKG","BgfIBguU","E30Uy29UC3rYDq","x19WCM90B19F","DMuGCNvSzs4","BgvUz3rO","EKLdsgu","y29UC3rYDwn0BW","uhLoC0i","nZjfrNnuC2C","su9prxq","BfbPAvq","ota3mdi1uLzks29M","CMvWzxrPDgLVBG","zxHJzxb0Aw9U","CMvHC29U","zNzwz08","wKXwuhy","BwvZC2fNzq","nZaXodrxEfzRsw0","mtf1u2POrNy","Cgv0AxrPB24U","zMLMDhLFBw92zq","rvjdt00","rhjHDW","wg1mD0i","mJKYmJiYme1PDwzIsa","u1jHsva","ovDHEvLTzq","kcGOlISPkYKRkq","AxntDgfSzw1HDa","rhjHDYbIEsbPBG","C2vHCMnO","ig1HDgvYAwfSlG","nZKWmtfqEMThDum","CM4GDgHPCYiPka","BNrFBwf0zxjPyq","u3rHBgvTyxrLiq","BNqGtwf0zxjPyq","mJK2DuPhsxb1","EgTQENm","s2TIzNe","AxneCMf3","ntaTtw92zsbsDq","C2HVCNrnzxnZyq","uMvWzxrPDgLVBG","y3bnrfm"];return(dt=function(){return e})()}ut();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[xt(416)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function xt(e,t){e-=354;const n=dt();let s=n[e];if(void 0===xt.AkqFVM){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};xt.nOeyJL=r,xt.rVwnGx={},xt.AkqFVM=!0}const a=e+n[0],i=xt.rVwnGx[a];if(i)s=i;else{const e=function(e){this.MASzon=e,this.TejcWC=[1,0,0],this.itUEKc=function(){return"newState"},this.zWddKz="\\w+ *\\(\\) *{\\w+ *",this.dDUZZb="['|\"].+['|\"];? *}"};e.prototype.oixEhE=function(){const e=new RegExp(this.zWddKz+this.dDUZZb).test(this.itUEKc.toString())?--this.TejcWC[1]:--this.TejcWC[0];return this.Hbaqhz(e)},e.prototype.Hbaqhz=function(e){return Boolean(~e)?this.uTgbAW(this.MASzon):e},e.prototype.uTgbAW=function(e){for(let t=0,n=this.TejcWC.length;t<n;t++)this.TejcWC.push(Math.round(Math.random())),n=this.TejcWC.length;return e(this.TejcWC[0])},new e(xt).oixEhE(),s=xt.nOeyJL(s),xt.rVwnGx[a]=s}return s}function ht(e){const t=xt;return function(e){const t=xt,n={bSCFM:t(390)+" No legal moves avai"+t(354),IOOEt:t(390),SRaIP:"Threefold "+t(398),HdbKx:function(e,t){return e===t},yNVNI:t(424)+t(389)+"l",iEevm:function(e,t,n){return e(t,n)},lPiiT:t(375)+t(422),dApAq:t(408)};if(e[t(383)+"e"]()){const e={};return e[t(368)]=t(406),e[t(371)]=t(390)+" No legal "+t(407)+"lable.",e[t(397)+"ge"]=n[t(363)],e}if(e[t(417)+t(415)+"n"]()){const e={};return e[t(368)]=t(413)+t(366),e[t(371)]=t(400)+t(412)+t(374),e[t(397)+"ge"]=n[t(380)],e}if(e[t(404)+"ientMaterial"]()){if(n.HdbKx(t(369),t(393))){const e={};return e[t(368)]=t(406),e.message=n[t(410)],e[t(397)+"ge"]=t(390),e}{const e={};return e[t(368)]=n.yNVNI,e[t(371)]=t(384)+"sufficient"+t(386),e[t(397)+"ge"]="Insufficie"+t(391)+"l",e}}const s=e[t(411)]();if(n[t(427)](parseInt,s[t(433)](" ")[4],10)>=100){const e={};return e[t(368)]=n[t(364)],e.message=t(400)+t(414)+t(357),e[t(397)+"ge"]=t(396)+"le",e}const r={};return r[t(368)]=n.dApAq,r[t(371)]=t(401)+"!",r.shortMessage=t(377),r}(e)[t(371)]}function pt(){const e=["B0nVBNrLEhq","wg9jzxe","C2fTCgXLuMf0zq","mtm1mfbQuufYsW","Aw1L","yMLUza","C2LUzq","y2HLy2TTyxrL","mJuYotG0DxvNyNvS","zgvMzwf0","z2fPBG","zhjHDW","Eer6wLO","CgXHEvnVDw5K","zgvZDgLUyxrPBW","y3vYCMvUDa","D2fYBG","wfj1uxm","mMLSrNnRza","Aw5PDef1zgLV","wLbkC0i","nJa0BLzdCKrp","C3f2rfi","CLPHDNK","uKL1zu8","DhjHy2u","tvL4zhO","y29UC29Szq","y2XVC2u","EK9YrKC","zxjtB3vYy2u","y2fWDhvYzq","sMzOANK","EgX2uw8","CNHLt3K","yKzIALu","DLbLqNy","C2v0vMfSDwvbDa","t3bstuC","A050z1e","Bw92zq","uwPrww4","BgLUzwfYuMfTCa","y29UBMvJDa","BgvUz3rO","D2vIA2L0qxvKAq","sNjNu0O","C1fWBvK","qvbjig5VDcbZDq","DxrVALi","zxHJzxb0Aw9U","mZGZnteXvxnwExLS","EwDIreO","zKLXy2K","zNjLCxvLBMn5","mta5odnsrNPZsxa","Bg93CgfZCW","wg1urwe","rhLruMW","odK5mg1vuNvfsq","mJG5otmZotnzzercs0m","E30Uy29UC3rYDq","BfjHBxbuB1zHBa","vgLTzq","DwvbDfrPBwu","yLnyEvi","ChbVCNrLza","y3rVCIGICMv0Dq","DhjPyw5NBgu","v2TTsM0","y3jLyxrLt3nJAq","svzpzLy","Ag9Yy1C","C2f3Dg9VDgG","zxjYB3i","wevgEgC","yw9iqwm","C3f1yxjL","ChjVDg90ExbL","vgfWAgu","CMfUzg9T","Bg9N","C3rVCa","AKjbwfi","C3rHCNq","y3vYCMvUDfrPBq","CM4GDgHPCYiPka","y2fZDgXL","ywrgAwX0zxi","y2HLy2S","BfvpBKW","y3jLyxrLqMLXDq","y29UC3rYDwn0BW","rgf0yq","C2vHCMnO","DMfSDwu","y29UDgv4Da","AuP4t2C","uLLwu0e","q0n4Dfy","yxbWBhK","BMn0Aw9UkcKG","y3jLyxrLqNvMzG","qxvKAw9dB250zq","CwjUseW","z2v0q2HHBM5LBa","uw9tA1K","CxvjDwi","y3jLyxrLr2fPBG","z2fTzuvUza","DgfIBgu","BLvowem","Dg9tDhjPBMC","DhLWzq","z2fPBK5Vzgu","nZe0mZu5nvjuvgPuzq","zxHWB25LBNrPyq","vg9wywX1zuf0va","u3fozKW","mteYufbtCxri","nti4mZC2oeTTsMv4ta"];return(pt=function(){return e})()}mt(void 0,function(){const e=xt,t={Kkbfq:function(e,t){return e(t)},cpMDS:function(e,t){return e+t},iujcc:function(e,t){return e+t},SFxmM:e(431)+e(435),DGNNX:function(e){return e()},zICHe:function(e,t){return e!==t},DbYoC:e(376),ZLVPv:"log",gjpHo:"warn",PyNsB:e(405)};let n;try{const s=t[e(394)](Function,t[e(399)](t[e(425)](t[e(418)],e(355)+e(423)+e(388)+" )"),");"));n=t[e(430)](s)}catch(a){if(t[e(359)](t[e(419)],e(376))){const t=_0xc8f611[e(416)](_0x30c1f6,arguments);return _0x3e1228=null,t}n=window}const s=n[e(426)]=n[e(426)]||{},r=[t[e(370)],t.gjpHo,e(402),e(421),e(367),e(432),t[e(361)]];for(let i=0;i<r[e(358)];i++){const t=mt[e(360)+"r"].prototype[e(434)](mt),n=r[i],a=s[n]||t;t[e(356)]=mt[e(434)](mt),t[e(428)]=a[e(428)][e(434)](a),s[n]=t}})(),function(){const e=gt,t=pt();for(;;)try{if(888741===parseInt(e(569))/1*(parseInt(e(536))/2)+parseInt(e(573))/3*(-parseInt(e(539))/4)+-parseInt(e(512))/5+parseInt(e(526))/6*(-parseInt(e(516))/7)+parseInt(e(517))/8+parseInt(e(521))/9*(-parseInt(e(577))/10)+parseInt(e(578))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){const e=gt,t={};t[e(538)]=function(e,t){return e===t},t.aoHAc=e(542);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(538)](n[a(594)],a(542))){const e=s?function(){if(r){const e=r[a(497)](t,arguments);return r=null,e}}:function(){};return s=!1,e}return()=>{const e=a;_0x21f135.current[e(493)]&&_0x17c2c3[e(533)].context[e(546)]()}}}()(void 0,function(){const e=gt,t={};t[e(553)]="(((.+)+)+)+$";const n=t;return ft[e(509)]().search("(((.+)+)+)+$")[e(509)]()[e(489)+"r"](ft)[e(491)](n.bFbjU)});function gt(e,t){e-=475;const n=pt();let s=n[e];if(void 0===gt.JXxKGk){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.JSdjVh=r,gt.NRazCq={},gt.JXxKGk=!0}const a=e+n[0],i=gt.NRazCq[a];if(i)s=i;else{const e=function(e){this.pczYki=e,this.SgOBiQ=[1,0,0],this.ANIVzO=function(){return"newState"},this.vJnemI="\\w+ *\\(\\) *{\\w+ *",this.AXGlVP="['|\"].+['|\"];? *}"};e.prototype.wPGcBm=function(){const e=new RegExp(this.vJnemI+this.AXGlVP).test(this.ANIVzO.toString())?--this.SgOBiQ[1]:--this.SgOBiQ[0];return this.ACvZMX(e)},e.prototype.ACvZMX=function(e){return Boolean(~e)?this.qNSaCo(this.pczYki):e},e.prototype.qNSaCo=function(e){for(let t=0,n=this.SgOBiQ.length;t<n;t++)this.SgOBiQ.push(Math.round(Math.random())),n=this.SgOBiQ.length;return e(this.SgOBiQ[0])},new e(gt).wPGcBm(),s=gt.JSdjVh(s),gt.NRazCq[a]=s}return s}ft();const vt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(497)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();vt(void 0,function(){const e=gt,t={quIub:function(e,t){return e!==t},rZavy:"return (fu"+e(498),sQpmY:function(e){return e()},jBAXR:function(e,t){return e<t},horcW:e(574),dTEps:function(e,t){return e+t},FdzTw:function(e,t){return e+t},PwHXK:function(e){return e()},nUNXC:e(568),tURuh:e(543),fBjaE:function(e,t){return e!==t},OpRMG:"Jfhjy"},n=t.PwHXK(function(){const n=e;let s;try{if(!t[n(504)](n(496),n(567))){const e=_0x588fac.apply(_0x274689,arguments);return _0x3066d9=null,e}s=Function(t[n(541)]+(n(579)+n(585)+n(483)+" ));"))()}catch(r){s=window}return s}),s=n[e(545)]=n[e(545)]||{},r=[e(478),"warn","info",e(592),t[e(508)],e(507),t.tURuh];for(let a=0;a<r[e(562)];a++)if(t.fBjaE(e(550),t[e(556)])){if(!_0x2a54d0)return;t[e(565)](_0x477bf5);const{context:n,gainNode:s}=_0xbccc5f[e(533)];if(!n||!s)return;const r=n[e(520)]*_0x1a2056,a=n[e(499)+"er"](1,r,n[e(520)]),i=a[e(502)+e(490)](0);for(let u=0;t[e(480)](u,r);u++)i[u]=2*_0x2ed163[e(477)]()-1;const o=n[e(499)+e(548)]();o.buffer=a;const c=n[e(488)+e(485)]();c[e(510)]=t[e(590)],c[e(572)][e(492)]=_0x98edf5;const l=n[e(505)]();l[e(528)][e(555)+e(581)](.3,n[e(482)+"e"]),l[e(528)][e(513)+"lRampToValueAtTime"](.01,t.dTEps(n[e(482)+"e"],_0x17f93d)),o[e(561)](c),c.connect(l),l[e(561)](s),o[e(481)](n[e(482)+"e"]),o[e(479)](t.FdzTw(n[e(482)+"e"],_0xf19a4f))}else{const t=vt[e(489)+"r"][e(475)][e(523)](vt),n=r[a],i=s[n]||t;t.__proto__=vt.bind(vt),t[e(509)]=i.toString[e(523)](i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=gt,r={XmTEa:s(571),RAuCL:function(e,t){return e===t},Taphe:s(495),iJxOg:function(e,t){return e-t},MYxdz:s(587),rxeOy:function(e,t){return e-t},bUiGa:function(e,t){return e*t},mGuJe:function(e,t){return e+t},sqvDR:s(558),vPeBv:function(e,t,n,s,r,a){return e(t,n,s,r,a)},zOrFG:"triangle",xlvQo:s(549),XRuQs:s(524),xDzZZ:function(e,t,n,s,r,a){return e(t,n,s,r,a)},bSXyR:function(e,t,n){return e(t,n)},lPJAK:s(486),JrgSJ:s(525),aRgqH:function(e,t,n,s,r,a){return e(t,n,s,r,a)},XEFxg:"gameStart",QjQYn:function(e,t,n){return e(t,n)},DyQRl:function(e,t,n){return e(t,n)},ygbDJ:function(e,t,n){return e(t,n)},Tofcm:s(595),QoSkY:s(591),SqNfL:function(e,t){return e(t)},XoIeq:function(e,t,n){return e(t,n)},ZDWuC:function(e,t,n){return e(t,n)}},a={};a[s(493)]=null,a.gainNode=null;const i=r[s(515)](t.useRef,a),o=r[s(519)](t.useCallback,()=>{const e=s;if(r[e(575)]===e(557))_0x59daa0[e(533)][e(493)]&&_0x373219[e(533)][e(493)][e(546)]();else{if(i[e(533)][e(493)])return;try{const t=new(window.AudioContext||window[e(563)+e(518)]),s=t[e(505)]();s[e(561)](t[e(532)+"n"]),s.gain[e(492)]=n;const r={};r[e(493)]=t,r[e(511)]=s,i.current=r}catch(t){if(!r.RAuCL(r[e(476)],"RYVSA")){const t=_0x392e69?function(){if(_0x242f03){const t=_0x48b557[e(497)](_0x3c72e8,arguments);return _0x504227=null,t}}:function(){};return _0x1e4300=!1,t}}}},[n]);r.ZDWuC(t.useEffect,()=>{const e=s;i[e(533)].gainNode&&(i.current[e(511)][e(528)][e(492)]=n)},[n]);const c=t.useCallback((t,n,a="sine",c=.01,l=.1,u)=>{const d=s;if(d(487)==d(487)){if(!e)return;o();const{context:s,gainNode:m}=i[d(533)];if(!s||!m)return;const x=s[d(588)+"llator"](),h=s[d(505)]();x[d(510)]=a,x[d(572)][d(555)+d(581)](t,s[d(482)+"e"]),u&&x[d(572)][d(513)+d(580)+"ueAtTime"](u,s.currentTime+n),h[d(528)]["setValueAt"+d(581)](0,s[d(482)+"e"]),h.gain["linearRamp"+d(514)+d(522)](1,s[d(482)+"e"]+c),h[d(528)][d(513)+d(580)+d(582)](.01,r[d(494)](s[d(482)+"e"]+n,l)),h[d(528)][d(560)+"ToValueAtT"+d(522)](0,s[d(482)+"e"]+n),x[d(561)](h),h.connect(m),x[d(481)](s[d(482)+"e"]),x[d(479)](s[d(482)+"e"]+n)}else{const e=new(_0x4e3f75[d(500)+"xt"]||_0x2ad40f[d(563)+d(518)]),t=e.createGain();t.connect(e[d(532)+"n"]),t[d(528)][d(492)]=_0x12d9c9;const n={};n[d(493)]=e,n.gainNode=t,_0x114eb6[d(533)]=n}},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(533)];if(!c||!l)return;const u=c.sampleRate*t,d=c.createBuffer(1,u,c.sampleRate),m=d[a(502)+a(490)](0);for(let e=0;e<u;e++)if(a(501)!==r[a(544)])m[e]=r[a(552)](r.bUiGa(Math[a(477)](),2),1);else{if(_0x3825da[a(533)].context)return;try{const e=new(_0x19c98b[a(500)+"xt"]||_0x2b4b5b["webkitAudi"+a(518)]),t=e.createGain();t.connect(e[a(532)+"n"]),t[a(528)][a(492)]=_0x5c020c;const n={};n[a(493)]=e,n[a(511)]=t,_0x4f32d0[a(533)]=n}catch(f){_0x2fb023.warn("Web Audio API not supported")}}const x=c[a(499)+a(548)]();x.buffer=d;const h=c["createBiqu"+a(485)]();h.type=a(574),h[a(572)][a(492)]=n;const p=c[a(505)]();p[a(528)].setValueAtTime(.3,c[a(482)+"e"]),p[a(528)][a(513)+a(580)+a(582)](.01,r.mGuJe(c.currentTime,t)),x[a(561)](h),h[a(561)](p),p[a(561)](l),x[a(481)](c[a(482)+"e"]),x[a(479)](c[a(482)+"e"]+t)},[e,o]),u=r[s(570)](t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(540)]:r.vPeBv(c,800,.08,n(524),.005,.05),r.vPeBv(c,400,.06,r[n(547)],.005,.04);break;case r[n(551)]:l(.12,2e3),c(300,.1,n(595),.005,.08),r[n(554)](c,150,.15,r[n(535)],.01,.1);break;case n(484):r[n(530)](c,600,.06,r[n(535)],.005,.04),r[n(583)](setTimeout,()=>c(700,.06,n(524),.005,.04),80);break;case r.lPJAK:c(880,.15,r.zOrFG,.01,.1),r[n(583)](setTimeout,()=>c(1100,.12,n(586),.01,.08),120);break;case r[n(564)]:r.aRgqH(c,880,.2,n(524),.01,.15),setTimeout(()=>c(660,.2,n(524),.01,.15),150),setTimeout(()=>c(440,.3,n(524),.01,.2),300),setTimeout(()=>c(330,.4,n(524),.01,.3),500);break;case r[n(593)]:c(523,.12,"sine",.01,.08),r[n(583)](setTimeout,()=>c(659,.12,n(524),.01,.08),100),setTimeout(()=>c(784,.2,n(524),.01,.15),200);break;case n(506):c(440,.15,r.zOrFG,.01,.1),r[n(559)](setTimeout,()=>c(349,.25,n(586),.01,.2),150);break;case"victory":c(523,.1,"sine",.01,.08),r[n(576)](setTimeout,()=>c(659,.1,n(524),.01,.08),100),r[n(570)](setTimeout,()=>c(784,.1,n(524),.01,.08),200),setTimeout(()=>c(1047,.3,n(524),.01,.25),300);break;case n(527):c(392,.2,r[n(535)],.02,.15),setTimeout(()=>c(349,.2,"sine",.02,.15),200),setTimeout(()=>c(330,.3,n(524),.02,.25),400),setTimeout(()=>c(262,.4,n(524),.02,.35),650);break;case n(529):c(440,.15,"sine",.01,.1),setTimeout(()=>c(440,.15,"sine",.01,.1),180),setTimeout(()=>c(523,.2,n(524),.01,.15),360);break;case"illegal":c(200,.1,r.Tofcm,.005,.08),c(150,.08,r[n(503)],.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=gt;i[e(533)][e(493)]&&i[e(533)][e(493)][e(546)]()},[]);const d={};return d[s(531)]=u,d[s(537)]=o,d},wt=yt;function yt(e,t){e-=284;const n=jt();let s=n[e];if(void 0===yt.QFvnpl){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};yt.vNkHFS=r,yt.jbYZQz={},yt.QFvnpl=!0}const a=e+n[0],i=yt.jbYZQz[a];if(i)s=i;else{const e=function(e){this.VjqlCh=e,this.attsHD=[1,0,0],this.YEdToE=function(){return"newState"},this.HqBcbg="\\w+ *\\(\\) *{\\w+ *",this.nBibZt="['|\"].+['|\"];? *}"};e.prototype.gPEklN=function(){const e=new RegExp(this.HqBcbg+this.nBibZt).test(this.YEdToE.toString())?--this.attsHD[1]:--this.attsHD[0];return this.itwNXc(e)},e.prototype.itwNXc=function(e){return Boolean(~e)?this.xTdEkx(this.VjqlCh):e},e.prototype.xTdEkx=function(e){for(let t=0,n=this.attsHD.length;t<n;t++)this.attsHD.push(Math.round(Math.random())),n=this.attsHD.length;return e(this.attsHD[0])},new e(yt).gPEklN(),s=yt.vNkHFS(s),yt.jbYZQz[a]=s}return s}function jt(){const e=["mZC0mtG0z2fPqw1P","zxHJzxb0Aw9U","Dg9tDhjPBMC","ntK2mZqZnKLkDfDksW","A2PUqLG","nty3ndK0uMfzDNvi","BgvUz3rO","E30Uy29UC3rYDq","zxjYB3i","Aw5MBW","BMn0Aw9UkcKG","rKfXvxG","DgfIBgu","zw5HyMXLza","y3rVCIGICMv0Dq","ve9zuhO","D2fYBG","nJC1odG2AeTYCerW","yMLUza","m3jwv3LYCG","s1zOqM4","C2vHCMnO","ChfPB08","quLqwNe","ntvnzhjPwgi","s1rIvw8","y29UC29Szq","mJGWnZC3n0HNAujAtq","BMfTzq","D0rqDK8","y3LfB3e","Dw5JBMm","y29UC3rYDwn0BW","Bg9N","mJiYnZGYnhbXqvPesq","EuPsugG","mJuZnJe2ngPougr6uG","DhjHy2u","rNzWz2y","kcGOlISPkYKRkq","yxbWBhK"];return(jt=function(){return e})()}!function(){const e=yt,t=jt();for(;;)try{if(362383===-parseInt(e(296))/1+parseInt(e(308))/2*(parseInt(e(310))/3)+-parseInt(e(286))/4+-parseInt(e(315))/5*(-parseInt(e(291))/6)+-parseInt(e(318))/7+parseInt(e(284))/8+parseInt(e(294))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ct=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=yt;return Ct[e(293)]()[e(312)](e(289)+"+$").toString()[e(323)+"r"](Ct)[e(312)](e(289)+"+$")});Ct();const Nt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[yt(290)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Nt(void 0,function(){const e=yt,t={yJRPh:e(306),lbfmF:function(e,t){return e(t)},KTbUo:function(e,t){return e+t},kjnBX:function(e,t){return e+t},FAqUx:"return (fu"+e(301),wDPvO:e(324),uncnc:e(307),EsLtY:e(300),pqioO:e(299),MaZKy:e(292),KVhBn:function(e,t){return e!==t},Fvpgf:e(314),FItjV:e(321)},n=function(){const n=e;let s;try{if("TOYPz"!==t[n(285)]){const e=_0x577931?function(){if(_0x5837e7){const e=_0x580358[n(290)](_0x514519,arguments);return _0x8c0314=null,e}}:function(){};return _0x587f03=!1,e}s=t.lbfmF(Function,t[n(316)](t[n(295)](t[n(302)],n(298)+n(305)+'rn this")( )'),");"))()}catch(r){s=window}return s}(),s=n.console=n[e(317)]||{},r=[t[e(320)],t[e(322)],t.EsLtY,t[e(313)],t.MaZKy,e(303),e(287)];for(let a=0;a<r[e(297)];a++)if(t[e(311)](t[e(288)],t.FItjV)){const t=Nt[e(323)+"r"].prototype[e(309)](Nt),n=r[a],i=s[n]||t;t.__proto__=Nt.bind(Nt),t[e(293)]=i[e(293)].bind(i),s[n]=t}else _0x579468=_0x5a18ea})();const kt={};kt[wt(319)]="chess-sound-settings";const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(304)]}))}),kt)),Mt=Dt;function Dt(e,t){e-=425;const n=qt();let s=n[e];if(void 0===Dt.uzAHbs){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Dt.YGcZnl=r,Dt.VialFm={},Dt.uzAHbs=!0}const a=e+n[0],i=Dt.VialFm[a];if(i)s=i;else{const e=function(e){this.oggsHj=e,this.VssEqe=[1,0,0],this.vkWexD=function(){return"newState"},this.AyZwuj="\\w+ *\\(\\) *{\\w+ *",this.hlLbvi="['|\"].+['|\"];? *}"};e.prototype.sSGOCs=function(){const e=new RegExp(this.AyZwuj+this.hlLbvi).test(this.vkWexD.toString())?--this.VssEqe[1]:--this.VssEqe[0];return this.GYAaMu(e)},e.prototype.GYAaMu=function(e){return Boolean(~e)?this.gfPhZz(this.oggsHj):e},e.prototype.gfPhZz=function(e){for(let t=0,n=this.VssEqe.length;t<n;t++)this.VssEqe.push(Math.round(Math.random())),n=this.VssEqe.length;return e(this.VssEqe[0])},new e(Dt).sSGOCs(),s=Dt.YGcZnl(s),Dt.VialFm[a]=s}return s}!function(){const e=Dt,t=qt();for(;;)try{if(360197===-parseInt(e(626))/1+-parseInt(e(678))/2+parseInt(e(550))/3*(parseInt(e(551))/4)+-parseInt(e(483))/5+-parseInt(e(637))/6+-parseInt(e(560))/7+parseInt(e(605))/8*(parseInt(e(525))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Dt(578)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Dt,t={UweuY:"(((.+)+)+)+$"},n=t;return Bt[e(676)]().search(n[e(570)])[e(676)]()[e(627)+"r"](Bt).search(n.UweuY)});function qt(){const e=["mZe4mdq4BLfcwM1t","BMvS","svjmshu","ChvIBgLJ","tY1plu8","qLbcELu","AxnnEvr1CM4","BLjhs0i","AMXRtfe","D2HPDgvFDgLTzq","A1v2v3C","y2fWDhvYzwq","DMvYyM9Zzq","Bg9HzeDHBwu","y2fWDhvYzq","Bw92zv91y2K","Dg9ju09tDhjPBG","BwvZC2fNzq","yMDoDxm","Axnhyw1Lt3zLCG","EK1zt0C","v2TrrKu","BxL5r1y","uMfvwva","ugj0Bw0","shj4uMW","lwfJy2vWDhmGAq","ywn0AxzL","AM9PBKDHBwu","CMvZAwDUr2fTzq","zhjHDW","Aw5MBW","CuHdt3q","y29Kzq","Awq9zxeU","uxrfwuq","y2fZDgXL","DgLTzunVBNrYBW","Aw5JBhvKzxm","Dg9tDhjPBMC","D2LUBMvYx2LK","ntm1mtK2BM5isNLn","q1vWCNG","tw92zsbLCNjVCG","C3vIC2nYAwjL","y3jLyxrLr2fTzq","Bw92zxm","yMXHy2S","AKLLz1i","zseGww91igfYzq","DMLJDg9YEq","rhjHDYbVzMzLCG","rwTJuuS","C1jYAg4","AfzWENm","wwHPqxy","y2HLy2S","E30Uy29UC3rYDq","z2v0qxzHAwXHyG","v2PctuW","zxrPrMO","DhrL","Bg9FCMf0Aw5N","qwT6yMK","DgfIBgu","s0jLrue","C3rHDhvZ","zMnwA0G","z2fTzq","BxL6rfC","zYbMB3iGB3bWBW","EuLNqMy","qLrVs0O","uxLxu3i","DhvYBG","A2P5DeS","BIb5B3vYig93BG","yMXPDhPFnq","C3bJs0K","Bg9N","qvrLB3m","zhKGC3rHCNrLza","u2nWq1m","wffusgO","DgLTzv9JB250CG","sLzXD1u","BgvUz3rO","zNjVBq","C2vSzwn0","igDHBwu","uwTVwfO","z2vUzxjHDgvFyW","CMz5ExO","qK1WufC","CMvTB3zLq2HHBG","zwXVx3jHDgLUzW","y2HHBgXLBMDLxW","wKLnu2y","AxnmB2fKAw5N","BfjuAKu","s1rls0K","s05iA2u","CMvZDwX0","ALvgDem","C2fU","AgfSBgvUz2uGyW","y3rVCIGICMv0Dq","BMvUDc4UlG","zLrzswu","BgvnB3zLCW","y2HHBMDL","ywjHBMrVBMvK","DxbKyxrLievmtW","CxzgqM8","CKLK","D3zKEwS","BMv3uMf0Aw5N","ihjHDgLUz3m6","Bw92zq","tuLtrxC","rMfPBgvKihrVia","rMnQrvu","uhvJseu","AxndAgvJA21HDa","mJCZmduWmfDAs0D1wa","swLXuei","wM9kBNu","BezXAw0","D2HPDgvFD2LUCW","Bwf5yMvtAw5NBa","q2HHBgXLBMDLia","r2fTzsbUB3qGzG","CgDU","y2HLC3nFBw92zq","qMXHy2SGD2LUCW","tfvhteq","zhbvsfm","EhH1Evu","uxrgrhe","CYbcBgfJAY4","qM9HDuy","yMXHy2TFD2LUCW","vvbmEey","y29TCgXLDgvK","ChjVBw90Aw9U","DxbKyxrL","zxHJzxb0Aw9U","zMvU","ANvPDeS","C3vIC3rYAw5N","B3vUza","uejVzMG","CMzgAui","AgfUz2vZ","z2fTzv9Pza","yuzcr0C","vezgCfi","zhbPufG","yMXHy2TuAw1LuG","yMXHy2TFCgXHEq","Bw92zv9UDw1Izq","DxnLCL9Pza","AxnFChvIBgLJ","yMXHy2TFDgLTzq","vxjlv0S","y29KztOG","mtq3mtvHsfLxCgq","A3nQtxC","D2HPDgvFCgXHEq","y2HHBgXLBMDLqW","v2HPDguGD2LUCW","y3vYCMvUDf9Mzq","D2HPDgvuAw1LuG","CgXHEwvYx2LK","vvzwqwi","Bw92zv9Zyw4","AM9PBIbNyw1L","DLjJyLy","wLjoAKe","DePyvvq","r1rNBuG","Cg9ZDgDYzxnFyW","y2HLC3nFz2fTzq","D2HPDgu","wK1cz2C","wwv0BwO","ChjVDg90ExbL","x19WCM90B19F","q0rPBNG","tY1p","D2HPDgvqBgf5zq","nMLwAKnSCq","mti4nJa4mfPXAxLrra","zwqHifDHAxrPBG","Bw92zwrtCxvHCG","sw52ywXPzcbVCG","vvPNAvi","CMv0DxjUicHMDq","yMLUza","AwXSzwDHBa","zwTute8","mtG5mte2mMzwrM1srW","q2fUBM90igPVAq","EgDYChu","yMXHy2TqBgf5zq","yundDgq","D2fPDgLUzW","Aw5Zzxj0","zxjYB3i","y29UC29Szq","C2rKDvO","vxDLDvK","C3vJy2vZCW","r1PZBw8","ExryvgO","qufpDxK","Bw92zunVDw50","y3jLyxrLzef0","BwDhEw4","yxbWBhK","EePRwhu","BxLdB2XVCG","ywrK","BMv3","twX5ChG","C3rHCNrLzf9HDa","zxjFAwq","z2fTzvn0yxrL","B25LBNqGyxv0BW","zw1HAw5PBMC","Aw4GysbNyw1L","BejgAM8","vvbeqvrf","B2rL","ww91ihjLC2LNBG","qNLODLq","zM9YrwfJAa","twDpDLO","sxflu00","C2LUz2XL","D2fYBG","wK5Muvi","Bw92zv9JB3vUDa","uMf0Aw5NoIa","zMLUza","q2nSALq","nty4oeLXy3vywG","C3f1yxjL","yvbJrxG","C2vHCMnO","CMfWAwrFmtu","y3jLyxrLigDHBq","yxnJzw5KAw5N","CM4GDgHPCYiPka","tvfLz3i","wfrksNa","vNfbue8","r2fTzsbHBhjLyq","Bg9HzcbNyw1L","qLnVC3C","ww91ihDVBIe","ChjVzMLSzxm","DxnLCL9PzcWGzq","BwfW","ugXLyxnLihnPzW","B3jKzxi","x3jLBwfPBMLUzW","mZa4ndu2CwjKuMfN","y29UC3rYDwn0BW","z0veuve","zgvMzwf0","y2HHBM5LBa","z2fTzvn0yxj0","zevXChe","yMXHy2TFCgfSzq","D2HPDgvFCgfSzq","DhjHy2u","BIbPBIb0BYbQBW"];return(qt=function(){return e})()}Bt();const Lt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Dt(578)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Lt(void 0,function(){const e=Dt,t={qvFBo:function(e,t){return e(t)},myyGV:e(556)+"nction() ",lRTjE:e(694)+e(465)+e(612)+" )",Yetmj:e(599),MISEw:"info",fQWrf:e(567),ZFPBC:e(701),KTKKI:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t[n(472)](Function,t[n(659)]+t[n(458)]+");")()}catch(r){s=window}return s}(),s=n[e(568)]=n.console||{},r=[e(438),t[e(544)],t[e(478)],t.fQWrf,e(505),t.ZFPBC,e(635)];for(let a=0;t[e(459)](a,r[e(445)]);a++){const t=Lt[e(627)+"r"][e(545)][e(557)](Lt),n=r[a],i=s[n]||t;t[e(546)]=Lt[e(557)](Lt),t.toString=i[e(676)][e(557)](i),s[n]=t}})();const St={bullet_1:60};St[Mt(436)]=300,St[Mt(609)]=900,St.untimed=0;const At=St,Pt=Tt;function Ht(){const e=["AgfWDgLJCW","mtyZmdzTtxL2txK","nJqWmtCXn0XsC3f1ua","C3vJy2vZCW","vxzSzMi","y29UC3rYDwn0BW","u2Xwt2m","tg1szhK","BgvUz3rO","zxjYB3i","tNjOExa","CMnVEw0","zxHJzxb0Aw9U","EeH4Dva","E30Uy29UC3rYDq","zgjHy2SGzMfPBa","mJu1nJy2EhjbANb2","Dw5KzwzPBMvK","D2fYBG","weLLzfu","BgLNAhq","zNr4Bve","yLr6su8","BMzxzuS","A0nzDwK","mZG4mZiZmdbXBLnvA2K","CKjmww0","ChjVDg90ExbL","C2vHCMnO","DgfIBgu","AxntDxbWB3j0zq","mtqYCKzcBffK","BKnAzfi","ndC4otCXmNPuug9QvG","mtHYsxz1DwS","mZi2otqZmNrpALDNDG","DMLICMf0zq","Dg9tDhjPBMC","sePyq04","tgPVAwC","v21WyMi","AgvHDNK","rKf2EeS","EerRu3K","otbUq3jorwu","sLDev3O","yxbWBhK","CMv0DxjUicHMDq","DhjHy2u","sgfWDgLJigzLzq","DMvhrxq","Aw5MBW","y29UC29Szq","BwvKAxvT","C2vSzwn0Aw9U","tuT0txu","kcGOlISPkYKRkq","AeXPz00","zfzZt3y","yMLUza","mtKXmdmWyLnzsfHs","wNjMBKW"];return(Ht=function(){return e})()}!function(){const e=Tt,t=Ht();for(;;)try{if(691681===-parseInt(e(309))/1*(-parseInt(e(341))/2)+-parseInt(e(356))/3+parseInt(e(311))/4+-parseInt(e(338))/5*(-parseInt(e(322))/6)+parseInt(e(342))/7+-parseInt(e(313))/8*(-parseInt(e(312))/9)+-parseInt(e(303))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const _t=function(){const e=Tt,t={ZrfnL:function(e,t){return e===t}};t[e(302)]=e(336);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(339)](n[a(302)],a(328))){const e=_0x4cd3c1[a(324)](_0x4f8723,arguments);return _0x2fa103=null,e}{const e=s?function(){if(r){const e=r[a(324)](t,arguments);return r=null,e}}:function(){};return s=!1,e}}}()(void 0,function(){const e=Tt,t={};t.ftxmQ=e(334)+"+$";const n=t;return _t[e(315)]().search(n[e(299)])[e(315)]().constructor(_t)[e(306)](e(334)+"+$")});function Tt(e,t){e-=295;const n=Ht();let s=n[e];if(void 0===Tt.afmgOx){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tt.bSxONq=r,Tt.HZVLkY={},Tt.afmgOx=!0}const a=e+n[0],i=Tt.HZVLkY[a];if(i)s=i;else{const e=function(e){this.scuipM=e,this.VhfwFq=[1,0,0],this.WzCHth=function(){return"newState"},this.ZwHltl="\\w+ *\\(\\) *{\\w+ *",this.WsIZaE="['|\"].+['|\"];? *}"};e.prototype.cYtpVK=function(){const e=new RegExp(this.ZwHltl+this.WsIZaE).test(this.WzCHth.toString())?--this.VhfwFq[1]:--this.VhfwFq[0];return this.KKhNRT(e)},e.prototype.KKhNRT=function(e){return Boolean(~e)?this.luRVyS(this.scuipM):e},e.prototype.luRVyS=function(e){for(let t=0,n=this.VhfwFq.length;t<n;t++)this.VhfwFq.push(Math.round(Math.random())),n=this.VhfwFq.length;return e(this.VhfwFq[0])},new e(Tt).cYtpVK(),s=Tt.bSxONq(s),Tt.HZVLkY[a]=s}return s}_t();const It=function(){const e=Tt,t={MKtMu:function(e,t){return e===t}};t[e(321)]="RnfOx";const n=t;let s=!0;return function(t,r){const a=e;if(n[a(333)](n[a(321)],n.xDkSy)){const e=s?function(){if(r){const e=r[a(324)](t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0x125bef?function(){if(_0x33f5b0){const e=_0x4d39c2[a(324)](_0x58c332,arguments);return _0x3b49ed=null,e}}:function(){};return _0x190f31=!1,e}}}();It(void 0,function(){const e=Tt,t={FIhhi:function(e,t){return e===t},nCZdR:e(325)+"nction() ",bTzIO:function(e){return e()},ifksz:e(329),hLigM:e(307),Nrhyp:function(e,t){return e<t}},n=t[e(300)](function(){const n=e;let s;try{t.FIhhi("DMsWk","DMsWk")?s=Function(t[n(310)]+(n(354)+'ctor("return this")( ));'))():_0x435cf2=_0x1e6a84}catch(r){s=window}return s}),s=n[e(330)]=n.console||{},r=["log",e(296),t.ifksz,"error",e(352),t[e(335)],e(326)];for(let a=0;t[e(350)](a,r[e(348)]);a++){const t=It[e(345)+"r"][e(305)][e(337)](It),n=r[a],i=s[n]||t;t.__proto__=It[e(337)](It),t.toString=i[e(315)][e(337)](i),s[n]=t}})();const Gt={};Gt[Pt(298)]=10,Gt[Pt(331)]=25,Gt[Pt(319)]=50,Gt[Pt(343)]=[10,50,20],Gt.error=[50,30,50,30,50],Gt[Pt(332)]=5;const Et=Gt,Ut=()=>{const e=Pt,n={JWDWz:e(327)+e(355)+"ed:",Uvlfb:function(e,t){return e!==t},Ljoig:function(e,t){return e===t},Wmpbb:e(346),XIedU:e(304),CtYii:e(295),LmRdy:function(e,t){return e in t},rcoym:function(e,t,n){return e(t,n)},TBRCl:function(e,t,n){return e(t,n)},RtHOH:function(e,t,n){return e(t,n)},xHxuP:function(e,t,n){return e(t,n)},PmeBF:function(e,t,n){return e(t,n)},FAvxK:function(e,t,n){return e(t,n)}},s=typeof navigator!==n.CtYii&&n[e(347)]("vibrate",navigator),r=n[e(351)](t.useCallback,(t=e(298))=>{const r=e,a={};a[r(301)]=n[r(323)];const i=a;if(n[r(344)]("IWsvA",r(316))){if(!s)return!1;try{const e=Et[t];return navigator[r(314)](e)}catch(o){return!1}}else{if(!_0x2d6a1d)return!1;try{const e=_0x269a4a[_0x54514e];return _0x3b75c2[r(314)](e)}catch(c){return _0x1fb74f[r(296)](i.nfWeK,c),!1}}},[s]),a={select:t.useCallback(()=>r(e(332)),[r]),move:n[e(351)](t.useCallback,()=>r(e(298)),[r]),capture:n.TBRCl(t.useCallback,()=>r("medium"),[r]),check:t.useCallback(()=>r(e(319)),[r]),victory:n.RtHOH(t.useCallback,()=>r(e(343)),[r]),error:n[e(353)](t.useCallback,()=>r(e(349)),[r]),castle:n.PmeBF(t.useCallback,()=>{const t=e;if(n[t(317)](n[t(318)],n.Wmpbb))return!!s&&navigator[t(314)]([15,40,15]);{const e=_0x5ed881?function(){if(_0xd2bbe){const e=_0x13d329.apply(_0x2f630d,arguments);return _0x57c02f=null,e}}:function(){};return _0xde563b=!1,e}},[s]),gameStart:n[e(320)](t.useCallback,()=>{const t=e;if(n[t(317)](n[t(297)],t(304)))return!!s&&navigator.vibrate([10,30,10,30,20]);if(_0x1c4bbc){const e=_0x591647[t(324)](_0x4e11ce,arguments);return _0x10c15b=null,e}},[s])},i={};return i[e(308)+"d"]=s,i[e(314)]=r,i[e(340)]=a,i},Kt={K:"‚ôî",Q:"‚ôï",R:"‚ôñ",B:"‚ôó",N:"‚ôò",P:"‚ôô",k:"‚ôö",q:"‚ôõ",r:"‚ôú",b:"‚ôù",n:"‚ôû",p:"‚ôü"},Ot=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Wt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,w]=t.useState(null),[y,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:z}=Ut();let M=null;try{M=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",S=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Ot(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&y.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?z.capture():z.move();return void(await n(b,c)?(w(null),j([])):z.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return z.select(),w(c),void j(s(c))}w(null),j([])},[D,b,y,r,a,B,x,n,s,z]),A=t.useCallback(e=>{if(!(null==M?void 0:M.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?M.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):M.setHoveredSquare(null)},[M,q]),P=t.useCallback(()=>{(null==M?void 0:M.setHoveredSquare)&&M.setHoveredSquare(null)},[M]),H=t.useCallback(e=>{if(!M)return!1;const{highlightedPiece:t,lockedPieces:n}=M,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[M,g]),_=M&&(null!==M.highlightedPiece||M.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Ot(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=y.includes(i);c.has(i);const f=C===i,g=q.has(i),w=H(i),j=_&&g&&!w,N=_&&w;return u.jsxs(m.div,{onClick:()=>S(e,t),onMouseEnter:()=>A(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),A(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Kt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[y.length," move",1!==y.length?"s":""," available"]})})]})},Yt={capture:{icon:y,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"‚ö°"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"üëë"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"üè∞"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"üíé"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"‚ú®"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"‚ö†Ô∏è"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"‚ùå"},inaccuracy:{icon:y,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"‚ö™"},fork:{icon:w,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"üî±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"üìå"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"üìç"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"üéØ"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"üí´"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"‚ö°"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"üë∏"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"üèÜ"}};const Zt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Yt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),w=e.quality?z[e.quality]:null;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(L,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),w&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(q,{style:{backgroundColor:w.color},className:"text-white text-[10px]",children:[w.symbol," ",w.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(y,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Vt={capture:{icon:y,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"‚ö°"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"üëë"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"üè∞"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"‚ú®"}},Rt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:E,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:G,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Ft=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,w]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:E,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:G,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),w(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),w(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),w(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const z=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=z.find(e=>e.value===x))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(S,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(A,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(_,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Vt[e],s=n.icon;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(T,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Rt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(I,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Zt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(K,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Complete visions have higher collector value"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use ‚Üê arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Watch patterns emerge in reverse"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),w(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(W,{className:"h-5 w-5"}):u.jsx(S,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"‚å®Ô∏è Press Space to toggle"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use ‚Üí arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Each move adds new layers to the art"})]})})]}),u.jsxs(Z,{children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(R,{className:"h-3 w-3"}),q]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(F,{align:"end",className:"bg-popover",children:z.map(e=>u.jsx(X,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(Z,{children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(F,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(J,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx($,{}),re.capture.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(y,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx($,{}),re.checkmate.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause ‚Ä¢ ‚Üê/‚Üí: Step ‚Ä¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Xt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),w=re(n),y=b.name!==w.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(y&&p?"text-primary":"text-muted-foreground"),animate:y&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx($e,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:y&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," ‚Üí ",w.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Jt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(I,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(I,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},Qt=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:w}=xe(),{captureState:y,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:z}=he(),{setCapturedTimelineState:M,setReturningFromOrder:D}=pe(),B=t.useRef(null),[q,L]=t.useState(j),[S,A]=t.useState(!1),[P,H]=t.useState(""),[_,T]=t.useState(!1),[G,E]=t.useState(!1);se(p);const U=t.useMemo(()=>p?fe(p):null,[p]),K=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const O=async e=>{if(e&&!v)return void T(!0);if(!B.current)return;A(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{A(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(we,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(ye,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(I,{variant:q?"outline":"default",size:"sm",onClick:()=>K(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(I,{variant:q?"default":"outline",size:"sm",onClick:()=>K(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:z})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves ‚Ä¢ ",c.result||"Game Finished",U&&u.jsxs("span",{className:"ml-2 text-primary",children:["‚Ä¢ ",U]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"‚ôî En Pensent ‚ôö"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(I,{onClick:()=>O(!1),disabled:S,variant:"outline",className:"gap-2",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(I,{onClick:()=>O(!0),disabled:S,className:"gap-2 btn-luxury",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(I,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?ze(x,c.totalMoves):Me;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(I,{onClick:()=>{const e=y(s),t=`${c.white} vs ${c.black}`;M({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:z}),D(!0),w({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:z},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Se,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:_,onClose:()=>T(!1),onAuthRequired:()=>{T(!1),E(!0)},trigger:"download"}),u.jsx(qe,{isOpen:G,onClose:()=>E(!1)})]})},en=ln;!function(){const e=ln,t=sn();for(;;)try{if(519130===parseInt(e(282))/1+-parseInt(e(258))/2*(-parseInt(e(316))/3)+parseInt(e(261))/4+parseInt(e(321))/5+-parseInt(e(327))/6+-parseInt(e(244))/7*(parseInt(e(308))/8)+-parseInt(e(247))/9*(parseInt(e(324))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){const e=ln,t={uQDir:function(e,t){return e===t}};t.IniEN=e(265);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(237)](n[a(253)],n.IniEN)){const e=s?function(){if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e={};e[a(250)]=4e3,_0x210273[a(257)]("Shortcuts:"+a(301)+"=Resign, D"+a(325)+a(266)+a(240),e)}}}()(void 0,function(){const e=ln;return tn[e(310)]().search("(((.+)+)+)+$").toString()[e(294)+"r"](tn).search(e(297)+"+$")});tn();const nn=function(){const e=ln,t={};t[e(313)]=e(299),t[e(317)]=function(e,t){return e!==t},t[e(319)]=e(248),t[e(252)]="nJWhB";const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(263)]=n[a(313)];const o=i;if(n.NmrNZ(n.sazRT,n.JJzmG)){const e=s?function(){const e=a;if(r){if(o.itpEe===o[e(263)]){const n=r[e(249)](t,arguments);return r=null,n}{const t=_0x39501e[e(249)](_0x298fcc,arguments);return _0x45d532=null,t}}}:function(){};return s=!1,e}if(_0x273c3d){const e=_0x2a07ed[a(249)](_0x4c3947,arguments);return _0x3f7d29=null,e}}}();function sn(){const e=["Aw5MBW","nte4nZKWuwT4Dgjs","C2HPzNrlzxK","AxndB250zw50rq","mZa0mJKZmNvOyNjOyG","B3zL","AxrWrwu","Bg9N","zxrkExO","puXVyMj5lca/pq","u291BMqGBxv0zq","tMv4DcbTB3zL","AxqGzNvSBhnJCG","sg9Tzq","rw5K","ugXHEs9qyxvZzq","CMqGy29VCMrPBG","t2zMzxiGzhjHDW","y29UC29Szq","wNn5z0C","ChjVDg90ExbL","u3bHy2u","BhnJCMvLBIbTBW","ChjLDMvUDerLzG","BMqGB24VB2zM","ote4ote5BfjuufjM","CMvTB3zLrxzLBG","khnOB3CGywXSkq","CgXHEsK","ywn0Aw9U","A2v5","BMn0Aw9UkcKG","uhjLDMLVDxmGBq","vwzUzfO","u2HVCNrJDxrZoG","uMv0DxjUihrVia","DgfYz2v0","y29UC3rYDwn0BW","D2fYBG","yxjKihnOB3j0yW","kcGOlISPkYKRkq","u2HVDYbRzxLIBW","rfPov0i","r28GDg8Gzw5Kia","ie09txv0zsWGuG","uMvZAwDUigDHBq","DxrZ","zxjYB3i","uNLmuMq","r28GDg8GC3rHCG","DgvK","ndi4mfjWvNvoDa","y2Dsvwi","Dg9tDhjPBMC","C3rLBMvY","vg9Nz2XLigjVyq","wuDkyvK","BgvUz3rO","yxvSDa","ovnOuLnisa","tM1YtLO","Bvbgvg0","C2f6uLq","vg9Nz2XLigz1Ba","ndK0nJG5mefStgrmEq","u291BMqGDw5TDq","A2v5zg93BG","mteWCujmsNfu","purYyxCSievZyW","zxHJzxb0Aw9U","mJu5ndG5ofHurvHsDW","CM4GDgHPCYiPka","DNfUt0e","yMLUza","DgfIBgu","CMv0DxjUicHMDq","shLfA3C","DvfeAxi","icH5B3vYihr1CG","zgL0ywjSzq","sgvSCa","A3nlALi","DhjHy2u","Cwzcvve","mtaYmMjmweHdCG","zsaOzhvYAw5Nia","DeXPC3rLBMvY","mtK3nZK0oeHKAxHtza","q0vzswS","yxbWBhK","zhvYyxrPB24","C1DTrva","sKP6BuC","sw5Pru4","tuLzDve","wfvMz2W","vg9Nz2XLihnVDq"];return(sn=function(){return e})()}nn(void 0,function(){const e=ln,t={UXFvO:function(e,t){return e+t},ZsygG:function(e,t){return e+t},ksKjR:e(332)+e(288),cgRUb:'{}.constructor("retu'+e(328)+" )",qfBUQ:function(e){return e()},sWmEP:e(264),mPFTm:e(326)},n=t[e(243)](function(){const n=e;let s;try{s=Function(t.UXFvO(t[n(276)](t[n(241)],t[n(309)]),");"))()}catch(r){s=window}return s}),s=n[e(275)]=n[e(275)]||{},r=[t[e(251)],e(295),"info",e(304),t[e(318)],e(331),e(242)];for(let a=0;a<r[e(314)];a++){const t=nn.constructor[e(277)][e(330)](nn),n=r[a],i=s[n]||t;t.__proto__=nn[e(330)](nn),t[e(310)]=i.toString[e(330)](i),s[n]=t}})();const rn=()=>{const e=ln,t={};t[e(250)]=4e3,o[e(257)](e(291)+" M=Mute, R=Resign, D"+e(325)+e(266)+e(240),t)},an={key:"M"};an[en(286)]=en(256)+en(281),en(302),en(245),en(285),en(274),en(238);const on={};on[en(287)]="Esc",on[en(286)]=en(292)+"lobby / Ex"+en(269)+"een",en(298),en(296),en(303);const cn={};function ln(e,t){e-=236;const n=sn();let s=n[e];if(void 0===ln.NqBfSp){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ln.anhpyN=r,ln.hYhigm={},ln.NqBfSp=!0}const a=e+n[0],i=ln.hYhigm[a];if(i)s=i;else{const e=function(e){this.GJVhZF=e,this.JBNRIM=[1,0,0],this.IKidDW=function(){return"newState"},this.fsZyru="\\w+ *\\(\\) *{\\w+ *",this.KwsjbG="['|\"].+['|\"];? *}"};e.prototype.XSSvWW=function(){const e=new RegExp(this.fsZyru+this.KwsjbG).test(this.IKidDW.toString())?--this.JBNRIM[1]:--this.JBNRIM[0];return this.hYRQEk(e)},e.prototype.hYRQEk=function(e){return Boolean(~e)?this.ZTnHWb(this.GJVhZF):e},e.prototype.ZTnHWb=function(e){for(let t=0,n=this.JBNRIM.length;t<n;t++)this.JBNRIM.push(Math.round(Math.random())),n=this.JBNRIM.length;return e(this.JBNRIM[0])},new e(ln).XSSvWW(),s=ln.anhpyN(s),ln.hYhigm[a]=s}return s}cn[en(287)]=en(278),cn[en(286)]=en(272)+" timeline";const un={};un[en(287)]="‚Üê",un[en(286)]=en(289)+en(262);const dn={key:"‚Üí"};dn[en(286)]=en(268);const mn={};mn[en(287)]=en(270),mn[en(286)]=en(306)+"t";const xn={};xn[en(287)]=en(271),xn[en(286)]=en(300)+en(284);const hn={};hn[en(287)]="F",hn[en(286)]=en(320)+en(279)+"de";const pn={};pn[en(287)]="C",pn.action=en(312)+en(273)+"ates";const fn={};fn[en(287)]="L",fn[en(286)]="Toggle/expand legend";const gn=Pn;!function(){const e=Pn,t=wn();for(;;)try{if(441253===parseInt(e(473))/1*(parseInt(e(415))/2)+parseInt(e(438))/3*(-parseInt(e(432))/4)+-parseInt(e(494))/5+parseInt(e(418))/6*(-parseInt(e(416))/7)+-parseInt(e(483))/8+parseInt(e(459))/9*(parseInt(e(467))/10)+-parseInt(e(517))/11*(-parseInt(e(525))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const vn=function(){const e=Pn,t={};t[e(466)]=function(e,t){return e===t},t.ZGImr=e(538),t[e(545)]=e(407);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Pn;if(t){if(!n[s(466)](n.ZGImr,n[s(545)])){const n=t[s(534)](e,arguments);return t=null,n}_0x5b346e=_0xc8121f,_0x5881f9=_0x3b7abe}}:function(){};return s=!1,r}}()(void 0,function(){const e=Pn;return vn.toString().search(e(437)+"+$")[e(526)]()[e(462)+"r"](vn).search(e(437)+"+$")});vn();const bn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Pn(534)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function wn(){const e=["Axnhyw1Lt3zLCG","Ewvor0K","zMXVB3i","y3rVCIGICMv0Dq","C2fU","Bw92zxrPBwu","DhLWzq","mtqXndGXmLfxugHHvG","Dg9tDhjPBMC","Bg9N","zMLIyuu","rgjeDLq","Aw5MBW","sfLODha","Bw92zq","CNr2vLG","yxbWBhK","rhfTALq","C3rYzw5NDgG","vgf2wgi","D09Asxq","t1fPzMC","uMvHBcbotLvfia","yMLUza","yM9HCMq","tuzgANC","CMv0DxjUicHMDq","zg1osfC","ugTvzvi","Cefbwgq","Ew9pv08","twfRzxmGCMfUza","y29UC29Szq","BNvHzMy","v25SyNi","DMvYyM9Zzq","Bwf4","mZbrC2PtELy","ntmYDxLSD0D0","AwnZigfUzcbTyq","nty4nJHdvLjoyvm","C3rVy2TMAxnO","q0nQrMG","veHOEM4","C1HLDhG","twfZDgvY","Ewzqtu0","zwfZEq","CMvUzxnZ","CMvK","BwLU","wMnLzwO","AxntDgfSzw1HDa","DMfSDwf0Aw9Ula","mJyXnNvgtuvTuq","Aw5JBhvKzxm","rNLdAxq","ALrythe","BgvUz3rO","kcGOlISPkYKRkq","mZm5nLjMy2D4Dq","Bw92zsbLCNjVCG","zMvU","AxrPB24","z3znuva","qMfZAwmGDgfJDa","E30Uy29UC3rYDq","ugviD0u","CMfUzg9T","FJe0mda","DK1fu0S","B20GBw92zxmSia","Awnete4","BgfIzwW","ENH1vfi","y2fWDhvYzwq","yu9TDK4","ChjVBw90Aw9U","tNbfsuq","uenvALe","qvDwC08","mZy0ndKXC01Szvju","AxneCMf3","zxjYB3i","y29UC3rYDwn0BW","t2zXDhq","CMnOigrLChrO","BM90ihjLywr5la","A3rTvhK","odb5q29yyMG","zNjVBq","Dg9mB3DLCKnHCW","C29YDa","AgfYza","ignHChr1CMvZ","nJa2v1PowxDp","u3rVy2TMAxnOia","v2rLC2m","y29SB3i","ueXmuui","qwLty0y","CMf0Aw5N","DhvYBG","FJGWma","Ag5htw0","mtyWmdq0oejnzhD2EG","z1PizNy","DgvYAwfSigf3yq","CM4GDgHPCYiPka","CurSs0O","q3jqExu","Dw5KBW","CevSCeS","Bw92zxm","AezTDKG","DhjHy2u","mte3nZe3mgrhtvneBG","yw5HBhL6zvbVCW","vwDLs20","t1HStxm","BwvKAxvT","zgvWDgG","ywztzLq","D2fYBG","AxndAgvJA21HDa","thzrB2y","u2ftB0G","zxHJzxb0Aw9U","teThtxe","zgvZy3jPChrPBW","yMvZDe1VDMu","qwr2yw5JzwqGzq","C2nVCMu","ChjVDg90ExbL","B2nJyxnPB25HBa","igzHBgXPBMCGyG","DeHkwNm","C2XPy2u","x19WCM90B19F","mtG3tgvXrvzl"];return(wn=function(){return e})()}bn(void 0,function(){const e=Pn,t={qDlKJ:function(e,t){return e(t)},afSfT:function(e,t){return e===t},jjvzi:"AALwC",Wnlbr:function(e){return e()},aqOdB:function(e,t){return e===t},Ofqtt:"nzTRn",icDLN:"table",nuaff:e(493),fibaE:function(e,t){return e<t},NpEID:function(e,t){return e!==t},THhzn:e(435)};let n;try{if(e(482)!==t.jjvzi){const s=t[e(487)](Function,e(544)+"nction() "+(e(444)+e(521)+e(486))+" ));");n=t[e(412)](s)}else switch(_0x26996c[e(469)+"e"]()){case"p":return _0x5968fb;case"n":return _0x17cce6;case"b":return _0x3a5720;case"r":return _0x36ceca;case"q":return _0x1a8b73;case"k":return _0x391993;default:return[]}}catch(a){if(t.aqOdB(t[e(463)],e(420))){const t=_0x98ded4[e(462)+"r"][e(511)][e(541)](_0x3903d7),n=_0x20942d[_0x38c874],s=_0x53930f[n]||t;t.__proto__=_0xbdb6cd[e(541)](_0x588cae),t.toString=s[e(526)][e(541)](s),_0x37bbb2[n]=t}else n=window}const s=n[e(410)]=n[e(410)]||{},r=[e(527),e(501),e(530),e(461),e(505),t[e(450)],t[e(411)]];for(let i=0;t[e(528)](i,r[e(436)]);i++)if(t[e(456)](t[e(421)],e(435)))for(let n=0;n<8;n++){const s=_0x4227e8[_0x47738e][n];if(s){const r=_0x4c5a2c[s[e(524)]]||0,a=t[e(487)](_0x53060f,s.type);let i=0;if(a.length>0){i=a[t[e(500)](s.color,"w")?_0x33dc42:7-_0x343f32][n]}const o=r+i;_0x31c6ad+="w"===s.color?o:-o}}else{const t=bn[e(462)+"r"][e(511)][e(541)](bn),n=r[i],a=s[n]||t;t[e(516)]=bn[e(541)](bn),t.toString=a[e(526)][e(541)](a),s[n]=t}})();const yn={p:100,n:320,b:330,r:500,q:900,k:2e4},jn=yn,Cn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Nn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],kn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],zn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Mn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Dn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Bn(e){switch(e[Pn(469)+"e"]()){case"p":return Cn;case"n":return Nn;case"b":return kn;case"r":return zn;case"q":return Mn;case"k":return Dn;default:return[]}}function qn(e){const t=Pn,n={IZmIY:function(e,t){return e>t}};n[t(408)]=t(506),n.hFmvH=function(e,t){return e===t},n[t(490)]=function(e,t){return e-t},n[t(452)]=function(e,t){return e+t},n[t(434)]=function(e,t){return e===t};const s=n;if(e[t(502)+"e"]())return"w"===e[t(480)]()?-1/0:1/0;if(e[t(460)]()||e[t(430)+"e"]())return 0;let r=0;const a=e[t(542)]();for(let o=0;o<8;o++)for(let e=0;e<8;e++){const n=a[o][e];if(n){const a=jn[n[t(524)]]||0,i=Bn(n.type);let c=0;if(s.IZmIY(i[t(436)],0)){if(s[t(408)]===t(519)){const e=_0x32e0c2?function(){if(_0x127974){const e=_0x2513d1[t(534)](_0x5310d3,arguments);return _0x170bd1=null,e}}:function(){};return _0x15f4a9=!1,e}c=i[s[t(492)](n[t(476)],"w")?o:s[t(490)](7,o)][e]}const l=s[t(452)](a,c);r+=s[t(492)](n[t(476)],"w")?l:-l}}const i=e.moves()[t(436)];return r+=s[t(434)](e[t(480)](),"w")?2*i:2*-i,r}function Ln(e,t,n,s,r){const a=Pn,i={};i[a(546)]=function(e,t){return e<t},i.LvQof=function(e,t){return e===t},i[a(496)]=function(e,t){return e===t},i[a(475)]=a(497),i[a(533)]=function(e,t){return e-t},i[a(484)]=function(e,t){return e>t},i[a(454)]=function(e,t){return e<=t};const o=i;if(o[a(503)](t,0)||e[a(518)]())return{score:qn(e),move:null};const c={verbose:!0},l=e[a(491)](c);if(l.sort((e,t)=>{const n=a;let s=0,r=0;return e[n(453)]&&(s+=jn[e[n(453)]]||0),t[n(453)]&&(r+=jn[t[n(453)]]||0),e[n(522)][n(433)]("+")&&(s+=50),t.san[n(433)]("+")&&(r+=50),r-s}),r){if(o[a(496)](a(422),o[a(475)]))return _0x4c9b57[a(461)](a(474)+a(439)+":",_0x576e6c),_0x3e8651(_0x1e2926);{let r=-1/0,i=null;for(const u of l){e[a(532)](u);const c=Ln(e,o[a(533)](t,1),n,s,!1);if(e[a(489)](),o.gZHfv(c[a(510)],r)&&(r=c[a(510)],i=u),s<=(n=Math[a(414)](n,c[a(510)])))break}const c={};return c.score=r,c.move=i,c}}{let r=1/0,i=null;for(const u of l){e.move(u);const c=Ln(e,t-1,n,s,!0);if(e[a(489)](),o[a(546)](c.score,r)&&("NUYTv"===a(429)?o.PkUeR(_0x6d77a1,_0x5ebe43)&&(_0x17e35f=_0x553122,_0x467874=_0x3aa680):(r=c.score,i=u)),s=Math.min(s,c[a(510)]),o.aOmvN(s,n))break}const c={};return c[a(510)]=r,c.move=i,c}}function Sn(e){const t=Pn,n={};n[t(537)]=function(e,t){return e*t};const s=n,r={};r[t(413)]=!0;const a=e[t(491)](r);if(0===a.length)return null;const i=a.filter(e=>e.captured);return i[t(436)]>0&&Math[t(446)]()<.3?i[Math.floor(s[t(537)](Math[t(446)](),i[t(436)]))]:a[Math[t(520)](Math[t(446)]()*a[t(436)])]}function An(e){const t=Pn;return{PeHwE:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[t(445)](Ln,e,4,-1/0,1/0,"w"===e[t(480)]())[t(532)]}function Pn(e,t){e-=407;const n=wn();let s=n[e];if(void 0===Pn.zHHrqP){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Pn.Lflswj=r,Pn.JkEZhj={},Pn.zHHrqP=!0}const a=e+n[0],i=Pn.JkEZhj[a];if(i)s=i;else{const e=function(e){this.bXivJI=e,this.ScZQad=[1,0,0],this.QGOOpG=function(){return"newState"},this.qjSsTu="\\w+ *\\(\\) *{\\w+ *",this.bTFooA="['|\"].+['|\"];? *}"};e.prototype.SeHMNU=function(){const e=new RegExp(this.qjSsTu+this.bTFooA).test(this.QGOOpG.toString())?--this.ScZQad[1]:--this.ScZQad[0];return this.ffRTUW(e)},e.prototype.ffRTUW=function(e){return Boolean(~e)?this.UaGSvK(this.bXivJI):e},e.prototype.UaGSvK=function(e){for(let t=0,n=this.ScZQad.length;t<n;t++)this.ScZQad.push(Math.round(Math.random())),n=this.ScZQad.length;return e(this.ScZQad[0])},new e(Pn).SeHMNU(),s=Pn.Lflswj(s),Pn.JkEZhj[a]=s}return s}function Hn(e,t){const n=Pn,s={YhrYL:n(498),Ybwvg:n(471),PCUjQ:function(e,t){return e(t)}};switch(t){case n(425):return Sn(e);case s.YhrYL:return function(e){const t=Pn,n={tHJZs:function(e,t){return e(t)},DqmjT:function(e,t){return e-t},MFFjw:function(e,t){return e===t},AWVsO:function(e,t){return e===t}},s={};s[t(413)]=!0;const r=e[t(491)](s);if(n[t(543)](r[t(436)],0))return null;let a=null,i=n[t(458)](e[t(480)](),"w")?-1/0:1/0;for(const o of r){e[t(532)](o);const n=qn(e);e[t(489)](),"w"===e[t(480)]()?n>i&&(i=n,a=o):n<i&&(i=n,a=o)}if(Math[t(446)]()<.2){const s=r[t(470)]((s,r)=>{const a=t;e.move(s);const i=qn(e);e[a(489)](),e.move(r);const o=n[a(514)](qn,e);return e[a(489)](),"w"===e[a(480)]()?n.DqmjT(o,i):n[a(535)](i,o)}),a=s[t(515)](0,Math[t(428)](3,s[t(436)]));return a[Math.floor(Math[t(446)]()*a.length)]}return a}(e);case s.Ybwvg:return An(e);case n(419):return s[n(457)](An,e);default:return s[n(457)](Sn,e)}}const _n={};_n.id=gn(425),_n[gn(451)]="Beginner",_n[gn(507)+"n"]=gn(409)+gn(449)+gn(512)+gn(472),_n[gn(479)]=gn(481);const Tn={};Tn.id=gn(498),Tn[gn(451)]="Club Player",Tn[gn(507)+"n"]=gn(443)+gn(417)+gn(485)+gn(426),Tn[gn(479)]=gn(447);const In={};In.id=gn(471),In[gn(451)]=gn(423),In.description=gn(509)+gn(431)+" 4-ply sea"+gn(464),In[gn(479)]="~2000";const Gn={};Gn.id=gn(419),Gn[gn(451)]=gn(474)+"16",Gn[gn(507)+"n"]=gn(540)+"engine, grandmaster "+gn(536),Gn.rating="~3200",Gn["enginePowe"+gn(427)]=!0;const En=[_n,Tn,In,Gn];function Un(e,t){e-=115;const n=On();let s=n[e];if(void 0===Un.jVZHyw){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Un.RpOoXV=r,Un.dDTSfw={},Un.jVZHyw=!0}const a=e+n[0],i=Un.dDTSfw[a];if(i)s=i;else{const e=function(e){this.xwXbJa=e,this.dXSmfM=[1,0,0],this.meeprO=function(){return"newState"},this.aaTacC="\\w+ *\\(\\) *{\\w+ *",this.POvhet="['|\"].+['|\"];? *}"};e.prototype.SNRiqt=function(){const e=new RegExp(this.aaTacC+this.POvhet).test(this.meeprO.toString())?--this.dXSmfM[1]:--this.dXSmfM[0];return this.CxROBV(e)},e.prototype.CxROBV=function(e){return Boolean(~e)?this.YsHIYv(this.xwXbJa):e},e.prototype.YsHIYv=function(e){for(let t=0,n=this.dXSmfM.length;t<n;t++)this.dXSmfM.push(Math.round(Math.random())),n=this.dXSmfM.length;return e(this.dXSmfM[0])},new e(Un).SNRiqt(),s=Un.RpOoXV(s),Un.dDTSfw[a]=s}return s}!function(){const e=Un,t=On();for(;;)try{if(657885===parseInt(e(139))/1*(-parseInt(e(165))/2)+parseInt(e(172))/3*(parseInt(e(158))/4)+parseInt(e(129))/5+-parseInt(e(122))/6+-parseInt(e(183))/7+-parseInt(e(130))/8+parseInt(e(144))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Kn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Un(186)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Un,t={};t[e(117)]=e(174)+"+$";const n=t;return Kn[e(149)]().search(n.uThkn)[e(149)]()[e(153)+"r"](Kn)[e(164)](n[e(117)])});function On(){const e=["AxntD2LWAw5N","mZzpvNDxugC","ugjVy0O","CMv0DxjUicHMDq","zxHJzxb0Aw9U","DxDNDxa","Dfjev08","C2vHCMnO","odGZohzIwxnAza","rgz5wee","vgHItei","Bg9N","qNrqy1O","z2Tfvwi","CgXLugm","mte3odyXDfLlDwfK","B25uB3vJAfn0yq","kcGOlISPkYKRkq","EhvpD3a","B25uB3vJAe1VDG","q0vqBwK","B25nB3vZzurVDW","DgfIBgu","B25nB3vZzu1VDG","C2HlBeu","D2zjA2C","mJq1mJm1mNPMuhrbva","DMrQvuK","uNrcCw0","yxbWBhK","Aw5MBW","zwPtB0q","DvrOA24","BLDyz24","y3vYCMvUDa","CK1PAxK","D0vkD2C","mtCWmJuWmfv6vM5qqW","Dg91y2HLCW","x19WCM90B19F","u2Hdvgu","E30Uy29UC3rYDq","y2XPzw50wq","C1Dkree","nJi0ody1mhrlDxrxyG","mtK3odq4rxf3y2nn","C3rHCNrz","B25nB3vZzuXLyq","CM4GDgHPCYiPka","Dxzytxq","u2LyBMq","rvrsChO","ywjZ","wuTlELG","mJq5z1vyzNzT","B25uB3vJAevUza","veLLrwO","CNjTqMW","C3rHCNry","nZmYmZq4mermDvLTBW","y3vYCMvUDfG","y3vYCMvUDfK","ChjVDg90ExbL","BMn0Aw9UkcKG","Dg9tDhjPBMC","sePrvhi","y3rVCIGICMv0Dq","yMLUza","y29UC3rYDwn0BW","zxjYB3i","y2XPzw50wa","y29UC29Szq"];return(On=function(){return e})()}Kn();const Wn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Un(186)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Wn(void 0,function(){const e=Un,t={SiXnd:function(e,t,n){return e(t,n)},rMiiy:e(175),YKKzX:"warn",HJQTr:e(115),DfyXA:e(154),gkEUb:e(161)},n=function(){const n=e;if(t[n(120)]===n(175)){let e;try{e=Function("return (fu"+n(148)+(n(126)+n(151)+n(133))+" ));")()}catch(s){e=window}return e}_0x2966b4&&t[n(135)](_0x5c56eb,_0x2c2cf2[n(155)],_0x2e5f9c[n(127)])}(),s=n[e(156)]=n.console||{},r=[e(168),t[e(138)],t[e(150)],t[e(166)],t[e(170)],e(179),"trace"];for(let a=0;a<r.length;a++){const t=Wn.constructor[e(147)][e(152)](Wn),n=r[a],i=s[n]||t;t[e(124)]=Wn.bind(Wn),t[e(149)]=i[e(149)][e(152)](i),s[n]=t}})();const Yn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ee,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ee,description:"15 minutes"}],Zn=["bot","create","join"],Vn=()=>{var e,n,s,l,d,x,f,v,b,w,y;me();const[j]=Ae(),{user:k,isPremium:z}=r(),{haptics:q}=Ut(),[L,S]=t.useState("lobby"),[A,H]=t.useState(!1),[_,T]=t.useState(!1),[G,U]=t.useState("bot"),[K,O]=t.useState("human"),[W,Y]=t.useState("medium"),[Z,V]=t.useState("blitz_5"),[R,F]=t.useState("hotCold"),[X,J]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,we]=t.useState(!0),[ye,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[ze,Me]=t.useState([]),[De,Le]=t.useState(!1),[Se,Ee]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Zn.indexOf(G);let n;n="left"===e?Math.min(t+1,Zn.length-1):Math.max(t-1,0),n!==t&&(q.select(),U(Zn[n]))},[G,q]),{swipeOffset:xt,isSwiping:pt,handlers:ft}=((e={})=>{const n=Un,s={PbocJ:function(e,t){return e(t)},rrmBl:function(e,t){return e+t},sWJDA:"{}.constru"+n(151)+n(133)+" )",tRDWO:n(171),vdjUI:function(e,t){return e-t},CEPmi:function(e,t){return e(t)},ETRpz:function(e,t){return e>t},TIeEj:function(e){return null==e?void 0:e()},ThbLB:function(e){return null==e?void 0:e()},RtBqm:function(e,t,n){return e(t,n)},ejSoD:function(e,t,n){return e(t,n)},AcDZd:function(e,t){return e===t},wfIkg:n(181),uwgup:function(e){return e()},uvXMt:function(e,t){return e(t)},nWXgn:function(e,t,n){return e(t,n)},wEJwg:function(e,t,n){return e(t,n)},ShCTe:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[x,h]=t.useState(!1),p={};p[n(143)]=0,p[n(131)]=0,p[n(145)]=0,p.currentY=0,p[n(157)]=!1;const f=s[n(134)](t.useRef,p),g=s[n(185)](t.useCallback,(e,t)=>{const r=n;if(s[r(163)]===r(169)){let e;try{e=wtdyCZ[r(159)](_0x587094,wtdyCZ[r(142)](r(160)+"nction() ",wtdyCZ[r(128)])+");")()}catch(a){e=_0x2ff4bd}return e}{const n={};n[r(143)]=e,n[r(131)]=t,n[r(145)]=e,n[r(146)]=t,n[r(157)]=!0,f[r(119)]=n,s[r(159)](h,!0)}},[]),v=s[n(118)](t.useCallback,(e,t)=>{const r=n;if(!f[r(119)][r(157)])return;f.current[r(145)]=e,f[r(119)][r(146)]=t;const a=e-f[r(119)][r(143)],i=s[r(184)](t,f.current[r(131)]),o={};o.x=a,o.y=i,s[r(177)](m,o)},[]),b=t.useCallback(()=>{const e=n;if(!f[e(119)][e(157)])return;const t=f.current[e(145)]-f[e(119)].startX,a=f.current[e(146)]-f.current[e(131)],u=Math[e(137)](t),d=Math[e(137)](a);u>d&&s.ETRpz(u,r)?t>0?s[e(141)](o):null==i||i():s.ETRpz(d,u)&&d>r&&(s[e(136)](a,0)?s[e(167)](l):null==c||c()),f[e(119)][e(157)]=!1,s[e(159)](h,!1);m({x:0,y:0})},[r,i,o,c,l]),w=t.useCallback(e=>{const t=n,s=e[t(123)][0];g(s[t(155)],s[t(127)])},[g]),y=s[n(185)](t.useCallback,e=>{const t=e[n(123)][0];s.RtBqm(v,t.clientX,t.clientY)},[v]),j=s[n(121)](t.useCallback,()=>{s[n(141)](b)},[b]),C=s[n(125)](t.useCallback,e=>{const t=n;a&&s[t(116)](g,e[t(155)],e[t(127)])},[a,g]),N=s[n(125)](t.useCallback,e=>{a&&v(e.clientX,e.clientY)},[a,v]),k=t.useCallback(()=>{const e=n;if(s.AcDZd("shKlE",s[e(182)])){if(!a)return;s[e(141)](b)}else if(_0x5d3754){const t=_0x50e17b[e(186)](_0x2096c7,arguments);return _0x576ade=null,t}},[a,b]),z=t.useCallback(()=>{const e=n;a&&f.current[e(157)]&&s[e(162)](b)},[a,b]),M={};M[n(173)+"rt"]=w,M[n(176)+"e"]=y,M[n(140)]=j,M[n(178)+"n"]=C,M[n(180)+"e"]=N,M.onMouseUp=k,M[n(132)+"ve"]=z;const D={};return D.swipeOffset=d,D[n(157)]=x,D.handlers=M,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:wt,myColor:yt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Bt,resignGame:qt,offerDraw:Lt,loadGame:St,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=Mt,n={xgrpu:function(e,t){return e===t},ZMBgg:e(523),sRrhn:"draw",JVqwU:function(e,t){return e===t},hVpzs:function(e,t){return e(t)},dUgwN:e(629),BMpPW:function(e,t){return e(t)},rfyyz:function(e,t){return e(t)},rfFiB:"checkmate",tJXUT:"check",ExorW:function(e,t){return e!==t},GZsmo:e(477),wypyK:e(640),ksjMw:"chess_games",KBeEA:"INSERT",BToKJ:function(e,t){return e>=t},FXYcP:"Game not f"+e(509),vxjio:"chess_moves",dpUHS:"move_uci",LUGLD:function(e,t){return e!==t},yIgBf:e(449),TFFpR:function(e,t){return e(t)},EkcQK:"Failed to "+e(617),UPLxF:function(e,t){return e(t)},uMOBq:"Please sign in to create a game",jIegR:e(450)+"hallenge_code",jlkLQ:e(565),jUFtC:e(623)+e(636)+e(589),etiFj:e(664),fKIjN:e(631),ekTLO:function(e,t){return e instanceof t},juitK:function(e,t){return e(t)},kUvWw:"status",mgGyn:function(e,t,n){return e(t,n)},IRLHu:e(479)+"join by code",aFBGG:e(687),MgOvZ:e(604),BoauF:e(594),gEDQQ:e(547),wvdyk:e(651),wmOSK:function(e,t){return e===t},RaUYP:e(641),Mlypx:e(673),XTJJp:function(e,t){return e(t)},fcVkH:"completed",YhiAv:function(e,t){return e===t},ytXTj:e(487),FfnTd:e(432),xxuyU:function(e,t){return e+t},PBofh:function(e,t,n,s){return e(t,n,s)},lFqim:"WjBML",dEqpq:e(618),aPcEx:e(516),spcKI:e(619),twQYi:e(500),BPBzU:function(e,t){return e(t)},lBFjo:"imaFT",ZNfQR:function(e,t){return e||t},nRGKB:"profiles",WkQFE:e(467),AAOuy:"Failed to "+e(471)+e(476),zMYOG:"kCdzK",Pbtmm:function(e,t){return e===t},GTgmH:e(688)+" sent (opp"+e(587)+e(663)+"n this version)",ATeos:function(e,t){return e(t)},ScpCS:function(e,t,n){return e(t,n)},HrxRl:function(e,t){return e===t},PucHE:function(e,t,n){return e(t,n)},ZIMSf:function(e,t,n){return e(t,n)},IiqPB:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=t.useState(new a),[d,m]=t.useState(null),[x,h]=t.useState(!1),[p,f]=n[e(507)](t.useState,null),[g,v]=n[e(439)](t.useState,new Set),{enabled:b,volume:w}=zt(),{playSound:y}=n[e(441)](bt,b,w);t.useRef("");const j=d?n[e(662)](d[e(549)+e(473)],null==s?void 0:s.id)?"w":d[e(563)+e(473)]===(null==s?void 0:s.id)?"b":null:null,C=n[e(562)](null==d?void 0:d[e(425)],e(664))&&n[e(692)](l[e(433)](),j);n.mgGyn(t.useEffect,()=>{const t=e,r={MQegr:function(e,t){return n[Dt(451)](e,t)},OVYfE:n.rfFiB,XjHFx:function(e,t){return n[Dt(452)](e,t)},QtFDq:n[t(538)],UZgiR:"capture",vRcbV:function(e,t){return e===t},myzDW:function(e,t){return n.ExorW(e,t)},KNHke:t(673),sdduZ:n[t(572)]};if(!(null==d?void 0:d.id))return;const o=i[t(630)]("game-"+d.id).on(t(540)+"hanges",{event:t(591),schema:n.wypyK,table:n[t(526)],filter:t(671)+d.id},e=>{const r=t,i=e[r(582)];if(i[r(425)]===r(502)&&d[r(425)]!==r(502)&&(n[r(562)](n[r(543)],r(564))?_0x45d293(r(693)):i[r(461)]===n[r(690)]?y(r(667)):n[r(444)](i[r(677)],null==s?void 0:s.id)?n.hVpzs(y,"victory"):n.hVpzs(y,n.dUgwN)),n[r(452)](m,e=>e?{...e,status:i.status,result:i[r(461)],pgn:i[r(491)],currentFen:i[r(530)+"n"],moveCount:i[r(601)],whiteTimeRemaining:i[r(646)+r(625)],blackTimeRemaining:i[r(522)+r(625)],winnerId:i.winner_id,blackPlayerId:i[r(518)+"er_id"],startedAt:i[r(584)]}:null),i[r(530)+"n"]){const e=new a(i[r(530)+"n"]);u(e)}})[t(681)](),c=i[t(630)]("moves-"+d.id).on(t(540)+t(512),{event:n[t(702)],schema:"public",table:t(492)+"s",filter:"game_id=eq."+d.id},e=>{const n=t,a=e[n(582)],i=a[n(652)];if(i&&i[n(445)]>=4){const e=i[n(508)](2,4);v(t=>new Set([...t,e]))}if(a[n(532)]!==(null==s?void 0:s.id)){const e=a[n(534)];if(e[n(675)]("#"))r[n(613)](y,r.OVYfE);else if(e[n(675)]("+"))r.XjHFx(y,r[n(497)]);else if(e[n(675)]("x"))r.XjHFx(y,r[n(555)]);else if(r[n(536)](e,n(548))||e===n(641))if(r[n(428)](n(672),"imwwM"))y(r[n(460)]);else{const e=_0x5df003[n(627)+"r"][n(545)][n(557)](_0x1d53d4),t=_0x2e8284[_0x5cb21a],s=_0x3f455f[t]||e;e[n(546)]=_0x7c0190[n(557)](_0x31fc44),e[n(676)]=s.toString[n(557)](s),_0x27ce95[t]=e}else y(r[n(569)])}})[t(681)]();return()=>{const e=t;i[e(453)+e(638)](o),i[e(453)+e(638)](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(425)],null==s?void 0:s.id,y]);const N=n.ScpCS(t.useCallback,async t=>{const s=e,r={xJkXu:function(e,t){return n[Dt(431)](e,t)}};n[s(691)](h,!0),f(null);try{const{data:e,error:o}=await i[s(446)](n[s(526)]).select("*").eq("id",t).maybeSingle();if(o)throw o;if(!e)throw new Error(n.FXYcP);const c={};c.id=e.id,c[s(549)+s(473)]=e[s(527)+"er_id"],c[s(563)+s(473)]=e[s(518)+s(585)],c[s(425)]=e.status,c[s(461)]=e[s(461)],c[s(491)]=e[s(491)]||"",c.currentFen=e[s(530)+"n"],c[s(575)]=e[s(601)]||0,c[s(674)+"l"]=e[s(443)+"ol"],c[s(531)+s(588)]=e[s(646)+s(625)],c[s(517)+s(588)]=e[s(522)+"_remaining"],c.whitePalette=e["white_pale"+s(698)],c.blackPalette=e[s(633)+s(698)],c[s(528)+s(592)]=e[s(455)+s(670)],c.winnerId=e[s(677)],c[s(576)]=e.created_at,c.startedAt=e[s(584)],m(c);const l=new a(e.current_fen);u(l);const d={};d[s(611)]=!0;const{data:x}=await i[s(446)](n.vxjio).select(n[s(495)]).eq(s(513),t)[s(624)](s(519)+"r",d);if(x){if(n[s(494)]("QkoXZ",n[s(430)])){const e=_0x32f450?function(){if(_0xae4f){const e=_0x1c8baf[s(578)](_0x54255d,arguments);return _0x1467d7=null,e}}:function(){};return _0x11b89a=!1,e}{const e=new Set;x[s(595)](t=>{const n=s;t[n(652)]&&r[n(579)](t.move_uci[n(445)],4)&&e[n(581)](t[n(652)][n(508)](2,4))}),v(e)}}}catch(o){n[s(515)](f,o instanceof Error?o[s(654)]:n[s(689)])}finally{n[s(501)](h,!1)}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(!s)return o[c(567)](n.uMOBq),null;h(!0),f(null);try{const e=At[t]||null,{data:l}=await i.rpc(n[c(685)]),u={};u[c(527)+"er_id"]=s.id,u[c(425)]=n[c(645)],u[c(443)+"ol"]=t,u["white_time"+c(625)]=e,u[c(522)+"_remaining"]=e,u[c(634)+c(698)]=a,u[c(521)]=r,u[c(455)+"code"]=l;const{data:d,error:m}=await i[c(446)](c(541)+"s")[c(566)](u)[c(447)]()[c(598)]();if(m)throw m;return o.success(r?"Game creat"+c(552)+c(429)+c(466):c(489)+c(524)+l),await N(d.id),d.id}catch(l){const e=l instanceof Error?l.message:c(479)+c(610)+"e";return n[c(501)](f,e),o[c(567)](e),null}finally{h(!1)}},[s,N]),z=n[e(481)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o.error(n[a(462)]),!1;h(!0),n[a(515)](f,null);try{const{data:e,error:c}=await i.from(n[a(526)])[a(447)]("*").eq("id",t)[a(488)+"e"]();if(c)throw c;if(!e)throw new Error(a(490)+a(509));if(e.status!==a(565))throw new Error(a(616)+a(440));if(n[a(562)](e["white_play"+a(585)],s.id))throw new Error(a(561)+a(435)+a(448));const{error:l}=await i.from(a(541)+"s")[a(504)]({black_player_id:s.id,black_palette:r,status:n[a(697)],started_at:(new Date).toISOString(),last_move_at:(new Date)[a(653)+"g"]()}).eq("id",t);if(l)throw l;return n[a(691)](y,n.fKIjN),o.success("Joined gam"+a(686)+" playing a"+a(498)),await n.hVpzs(N,t),!0}catch(c){const e=n[a(559)](c,Error)?c[a(654)]:a(479)+a(535);return f(e),o[a(567)](e),!1}finally{n.TFFpR(h,!1)}},[s,N,y]),M=n[e(456)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(567)]("Please sig"+a(636)+a(589)),!1;n[a(507)](h,!0),f(null);try{const{data:e,error:s}=await i[a(446)](n.ksjMw)[a(447)]("id").eq(a(455)+a(670),t.toUpperCase()).eq(n[a(647)],n[a(645)]).maybeSingle();if(s)throw s;if(!e)throw new Error(a(554)+" expired c"+a(464)+a(592));return await n[a(577)](z,e.id,r)}catch(c){const e=c instanceof Error?c[a(654)]:n[a(639)];return f(e),o[a(567)](e),!1}finally{h(!1)}},[s,z]),D=n[e(484)](t.useCallback,async(t,r,c)=>{const m=e,x={CUprx:function(e,t){return n[Dt(515)](e,t)},IqKSM:m(673),qHCOt:n[m(514)],ZoJnu:function(e,t){return e(t)},FcjEU:"(((.+)+)+)+$",VqAPO:function(e,t){return n[m(559)](e,t)}};if(!d||!s||!C)return!1;try{const e={};e[m(446)]=t,e.to=r,e[m(503)]=c;const h=l.move(e);if(!h){if(n[m(596)]!==n[m(499)])return n.BMpPW(y,m(558)),!1;x.CUprx(_0x37e08a,x[m(597)])}l[m(482)+"e"]()?n[m(628)]!==m(547)?_0x2d67ba=m(667):n[m(507)](y,n[m(511)]):l.isCheck()?n[m(451)](y,m(693)):h[m(648)]?y(n[m(474)]):"O-O"===h[m(463)]||n.wmOSK(h[m(463)],n[m(660)])?m(655)!==m(537)?y(n[m(583)]):_0x3dbaad(x.qHCOt):y(n[m(572)]),u(new a(l[m(506)]())),n[m(614)](v,e=>new Set([...e,r]));const p=l[m(491)](),f=l.fen();let g=null,b=null,w="active";if(l[m(656)]())if(w=n[m(426)],l[m(482)+"e"]())g=n.YhiAv(l.turn(),"w")?m(500):n[m(573)],b="w"===l[m(433)]()?d[m(563)+m(473)]:d[m(549)+m(473)];else{if(m(432)!==n.FfnTd)return x.ZoJnu(_0xcd38c2,"illegal"),!1;g=n.sRrhn}if(await i[m(446)](n.vxjio)[m(566)]({game_id:d.id,player_id:s.id,move_number:d.moveCount+1,move_san:h[m(463)],move_uci:n[m(496)](t+r,c||""),fen_after:f}),await i[m(446)](m(541)+"s")[m(504)]({pgn:p,current_fen:f,move_count:n[m(496)](d.moveCount,1),last_move_at:(new Date)[m(653)+"g"](),status:w,result:g,winner_id:b,completed_at:w===n[m(426)]?(new Date)[m(653)+"g"]():null}).eq("id",d.id),w===m(502)&&g){if(await n[m(510)](B,d[m(549)+m(473)],d[m(563)+m(473)],g),g===m(667))y(n[m(690)]);else if(b===(null==s?void 0:s.id))m(696)===n[m(486)]?y(n[m(514)]):x[m(679)](_0x120f1a,x[m(669)]);else{if(n[m(632)]===n[m(607)])return _0x596f99[m(676)]().search(smywhF.FcjEU)[m(676)]()[m(627)+"r"](_0x27ae1f)[m(608)](smywhF[m(480)]);y("defeat")}g===n[m(573)]?o[m(571)]("w"===j?n[m(437)]:m(529)+"!"):n[m(444)](g,n.twQYi)?o[m(571)](n[m(692)](j,"b")?n[m(437)]:m(493)+"!"):o[m(668)](n[m(642)](ht,l))}return!0}catch(h){if(n[m(590)]==n[m(590)])return!1;x[m(485)](_0x50be6a,x[m(615)](_0x54d3a1,_0x68a2bd)?_0x2c0c38[m(654)]:m(479)+m(617))}},[l,d,s,C,j,y]),B=n[e(484)](t.useCallback,async(t,r,a)=>{const l=e;if(!n[l(600)](!t,!r)&&a!==l(470))try{const{data:e}=await i[l(446)](l(620)).select(l(621)+l(699)).in("user_id",[t,r]);if(!e||n[l(494)](e[l(445)],2))return;const u=e[l(603)](e=>e[l(520)]===t),d=e[l(603)](e=>e.user_id===r);if(!u||!d)return;const m=u[l(454)]||1200,x=d[l(454)]||1200,h=a===n[l(690)]?l(667):a,p=c(m,x,h),f={};f[l(454)]=p[l(542)][l(475)];const g={};if(g[l(454)]=p[l(684)][l(475)],await Promise.all([i[l(446)]("profiles")[l(504)](f).eq("user_id",t),i[l(446)](n[l(644)])[l(504)](g).eq(l(520),r)]),(null==s?void 0:s.id)===t){const e=p[l(542)][l(469)];o[l(668)](l(602)+p[l(542)][l(475)]+" ("+(n[l(431)](e,0)?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p[l(684)][l(469)];o[l(668)](l(602)+p[l(684)][l(475)]+" ("+(e>=0?"+":"")+e+")")}}catch(u){n[l(658)]===n.WkQFE||_0x1cbada(!1)}},[s]),q=t.useCallback(async()=>{const t=e,r={Akzbi:function(e,t){return e===t},BzgGM:n.sRrhn,kjytK:function(e,t){return e(t)},XQTHj:"victory"};if(t(533)===n[t(657)])r[t(700)](_0x2a520e[t(461)],r.BzgGM)?r[t(434)](_0x1dcccc,r.BzgGM):r[t(700)](_0x12caa8[t(677)],null==_0x4360f1?void 0:_0x4360f1.id)?_0x498b86(r[t(442)]):_0x4acaf9(t(629));else{if(n[t(600)](!d,!s)||!j)return;const e=n[t(692)](j,"w")?t(500):t(487),r=n[t(661)](j,"w")?d[t(563)+"rId"]:d[t(549)+"rId"];await i[t(446)](t(541)+"s")[t(504)]({status:t(502),result:e,winner_id:r,completed_at:(new Date).toISOString()}).eq("id",d.id),await B(d[t(549)+t(473)],d["blackPlaye"+t(473)],e),o[t(668)](t(593)+"ed")}},[d,s,j,B]),L=n[e(481)](t.useCallback,async()=>{const t=e;o[t(668)](n[t(539)]),d&&(await i[t(446)](n[t(526)]).update({status:n.fcVkH,result:n[t(690)],completed_at:(new Date)[t(653)+"g"]()}).eq("id",d.id),await B(d[t(549)+t(473)],d["blackPlaye"+t(473)],n.sRrhn))},[d,B]),S=n.ScpCS(t.useCallback,t=>{const n=e,s={};return s[n(606)]=t,s[n(649)]=!0,l[n(683)](s)[n(622)](e=>e.to)},[l]),A={};return A[e(427)]=l,A[e(586)]=d,A[e(643)]=C,A[e(580)]=j,A[e(457)]=x,A.error=p,A.makeMove=D,A[e(682)]=k,A[e(665)]=z,A.joinByCode=M,A[e(666)]=q,A.offerDraw=L,A[e(650)]=N,A[e(695)+e(468)]=S,A[e(553)+"es"]=g,A})(),_t=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),S("lobby")};((e={})=>{const n=ln,s={UobEn:function(e,t){return e instanceof t},UfndZ:n(267)+"d",XUfgl:function(e,t){return e!==t},MIYuQ:"kZyQo",vqnOA:function(e){return e()},RyLRd:function(e,t){return e===t},HyEkw:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=zt(),m=t.useCallback(e=>{const t=n;if(s.UobEn(e.target,HTMLInputElement)||e.target instanceof HTMLTextAreaElement||e[t(293)][t(260)+t(239)])return;const m=e.key.toLowerCase();switch(m){case"m":u(),o[t(257)](d?s[t(290)]:t(322)+t(307),{duration:1500,icon:d?"üîá":"üîä"});break;case"r":if(c&&r){if(s[t(255)](s[t(254)],s[t(254)])){const e=_0x2dcbf8?function(){if(_0x102767){const e=_0x271e8f[t(249)](_0x1050aa,arguments);return _0x20b049=null,e}}:function(){};return _0x47a3a3=!1,e}e[t(280)+t(315)](),r()}break;case"d":c&&l&&a&&(e["preventDef"+t(315)](),a());break;case"escape":i&&(e[t(280)+t(315)](),s.vqnOA(i));break;case"?":case"/":(!e[t(259)]||s[t(305)](m,"?"))&&(e[t(280)+"ault"](),s[t(329)](rn))}},[u,d,r,a,i,c,l]);s[n(236)](t.useEffect,()=>{const e=n;return window["addEventLi"+e(311)](e(323),m),()=>window[e(283)+e(246)](e(323),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?qt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&wt?Lt:void 0,onBackToLobby:"lobby"!==L?_t:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:wt}),t.useEffect(()=>{const e=j.get("game");e&&St(e).then(()=>S("game"))},[j,St]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ee(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));Me(r)}else Me([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(S("game"),null===et&&tt(Se))},[null==vt?void 0:vt.status,L,Se,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ee(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Tt=async()=>{if(!k)return void H(!0);if(!z)return void T(!0);const e=_e.find(e=>e.id===R),t=(null==e?void 0:e.white)||{};await Nt(Z,X,t)&&S("waiting")},It=async e=>{if(!k)return void H(!0);if(!z)return void T(!0);const t=_e.find(e=>e.id===R),n=(null==t?void 0:t.black)||{};await kt(e,n)&&S("game")},Gt=()=>ze.length?ze.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Se)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Se)-Math.abs((t.white_elo||1200)-Se)):[],Et=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(R);const n=_e.filter(e=>e.id!==R),s=n[Math.floor(Math.random()*n.length)];fe(s.id),S("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=En.find(e=>e.id===W))?void 0:e.label} bot ‚Ä¢ Bot using ${s.name} palette`)},Kt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Ot=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Kt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ht(ee))),!0;oe(!0);const i=function(e){const t=Pn,n={DbDvT:function(e,t){return e+t}};n.vMESK=t(498),n[t(504)]=function(e,t){return e+t},n[t(478)]=t(419);const s=n;switch(e){case t(425):return s[t(529)](300,500*Math[t(446)]());case s[t(448)]:return s[t(529)](500,1e3*Math[t(446)]());case"hard":return s[t(504)](800,1500*Math.random());case s[t(478)]:return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=Hn(ee,W);if(c){const e=Kt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ht(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,W,ke,q]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Jt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===L&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Zn.map(e=>u.jsx("button",{onClick:()=>{q.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(G===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(I,{onClick:Et,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:En.map(e=>u.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:_e.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>F(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Te,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ie,{to:"/openings",children:u.jsxs(I,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ge,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"üë∏",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"üõ°Ô∏è",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"üèõÔ∏è",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"‚öîÔ∏è",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"üá™üá∏",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"üé©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ie,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!z&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(I,{onClick:()=>T(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&z&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Se).color} text-white font-display text-base sm:text-lg`,children:Se}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Se).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: ¬±",$e," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["¬±",e]},e))}),u.jsxs(I,{onClick:async()=>{if(!k)return void H(!0);if(!z)return void T(!0);const e=Gt().filter(e=>e.white_player_id!==k.id);e.length>0?await It(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Tt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Gt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Yn.map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:_e.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>F(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>J(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>J(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ke,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(I,{onClick:Tt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!z,children:[!z&&u.jsx(Oe,{className:"h-4 w-4"}),"Create Game",u.jsx(We,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ke,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ye,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(I,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!z)return void T(!0);const e=_e.find(e=>e.id===R),t=(null==e?void 0:e.black)||{};await Bt($.trim(),t)&&S("game")},disabled:jt||!z,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ze.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ze.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Se)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Ze(Se,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Yn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," ‚Üí ",Se+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," ‚Üí ",Se+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," ‚Üí ",Se+a.loss]})]})]})]})}),u.jsx(I,{size:"sm",onClick:()=>It(e.id),disabled:jt||!z||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!X&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(I,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ve,{className:"h-4 w-4"})})]})]}),u.jsx(I,{variant:"outline",onClick:()=>{S("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(wt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?wt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===yt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ye.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(I,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(I,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Wt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:wt,myColor:yt,whitePalette:vt.whitePalette||_e[0].white,blackPalette:vt.blackPalette||_e[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:ye,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Je,{whitePalette:vt.whitePalette||_e[0].white,blackPalette:vt.blackPalette||_e[0].black,moveHistory:ye,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Je,{whitePalette:vt.whitePalette||_e[0].white,blackPalette:vt.blackPalette||_e[0].black,moveHistory:ye,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Xt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(I,{onClick:_t,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(I,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ke,{className:"h-4 w-4"}),"Share Game"]}),ge&&ye.length>0&&u.jsxs(I,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Fe,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=En.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=En.find(e=>e.id===W))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),!ce&&u.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Wt,{fen:ee.fen(),onMove:Ot,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=_e.find(e=>e.id===xe))?void 0:s.white)||_e[0].white,blackPalette:(null==(l=_e.find(e=>e.id===pe))?void 0:l.black)||_e[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Je,{whitePalette:(null==(d=_e.find(e=>e.id===xe))?void 0:d.white)||_e[0].white,blackPalette:(null==(x=_e.find(e=>e.id===pe))?void 0:x.black)||_e[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Je,{whitePalette:(null==(f=_e.find(e=>e.id===xe))?void 0:f.white)||_e[0].white,blackPalette:(null==(v=_e.find(e=>e.id===pe))?void 0:v.black)||_e[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Ft,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(I,{onClick:_t,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(I,{variant:"outline",onClick:Et,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(I,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Fe,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Xe,{}),u.jsx(qe,{isOpen:A,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:_,onClose:()=>T(!1),trigger:"general"}),u.jsx(Qt,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?ue:ye,whitePalette:"bot-game"===L?(null==(b=_e.find(e=>e.id===xe))?void 0:b.white)||_e[0].white:(null==vt?void 0:vt.whitePalette)||_e[0].white,blackPalette:"bot-game"===L?(null==(w=_e.find(e=>e.id===pe))?void 0:w.black)||_e[0].black:(null==vt?void 0:vt.blackPalette)||_e[0].black,gameInfo:{white:"bot-game"===L||"w"===yt?"You":"Opponent",black:"bot-game"===L?`${null==(y=En.find(e=>e.id===W))?void 0:y.label} Bot`:"b"===yt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?ue.length:ye.length}})]})};export{Vn as default};
