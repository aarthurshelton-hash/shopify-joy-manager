const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-1k5cZzy0.js","assets/index-MGWJ9q8p.css"])))=>i.map(i=>d[i]);
import{u as e,cT as s,r as a,cx as i,ar as t,j as r,L as n,a5 as l,af as d,d as c,ag as m,aw as o,I as x,ah as h,q as u,t as j,v as g,cX as p,b$ as N,w as f,a6 as y,B as v,W as b,C as w,bN as k,b as _,cY as P,cZ as A,H as E,Q as T,A as R,Y as C}from"./index-1k5cZzy0.js";import{u as S}from"./useMutation-Cxdp5RMb.js";import{C as q}from"./chart-pie-wx6plXFl.js";import{B as D}from"./briefcase-BZAygRsP.js";function L(){const{user:E,isPremium:T,isLoading:R}=e(),C=s(),[L,V]=a.useState("market_trends"),[B,G]=i.useState(!1),[M,F]=i.useState(!0);i.useEffect(()=>{(async()=>{if(!E)return G(!1),void F(!1);try{const{supabase:e}=await k(async()=>{const{supabase:e}=await import("./index-1k5cZzy0.js").then(e=>e.g6);return{supabase:e}},__vite__mapDeps([0,1])),{data:s}=await e.from("user_roles").select("role").eq("user_id",E.id).eq("role","admin").maybeSingle();G(!!s)}catch{G(!1)}F(!1)})()},[E]);const{data:H,isLoading:I}=t({queryKey:["premium-analytics-history"],queryFn:A,enabled:!!E&&B}),K=S({mutationFn:e=>P(e),onSuccess:e=>{e&&(_.success("Analytics generated successfully!"),C.invalidateQueries({queryKey:["premium-analytics-history"]}))},onError:e=>{_.error("Failed to generate analytics")}});return R||M?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(n,{className:"h-8 w-8 animate-spin text-primary"})}):B?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[r.jsx(x,{className:"h-6 w-6 text-primary"}),"Premium Analytics"]}),r.jsx("p",{className:"text-muted-foreground",children:"Exclusive market data and insights for Visionary members"})]}),r.jsx(h,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Premium Access"})]}),r.jsxs(u,{value:L,onValueChange:e=>V(e),children:[r.jsxs(j,{className:"grid w-full grid-cols-3",children:[r.jsxs(g,{value:"market_trends",className:"gap-2",children:[r.jsx(p,{className:"h-4 w-4"}),"Market Trends"]}),r.jsxs(g,{value:"engagement_insights",className:"gap-2",children:[r.jsx(N,{className:"h-4 w-4"}),"Engagement"]}),r.jsxs(g,{value:"portfolio_analysis",className:"gap-2",children:[r.jsx(q,{className:"h-4 w-4"}),"Portfolio"]})]}),r.jsx(f,{value:"market_trends",className:"mt-6",children:r.jsxs(l,{children:[r.jsxs(d,{children:[r.jsx(m,{children:"Market Trends Report"}),r.jsx(o,{children:"Performance data for palettes, gamecards, and overall market activity"})]}),r.jsx(y,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Palette Performance"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"See which color palettes are driving the most engagement and value"})]}),r.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Gamecard Rankings"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Track legendary game value appreciation and usage trends"})]})]}),r.jsxs(v,{onClick:()=>K.mutate("market_trends"),disabled:K.isPending,className:"w-full gap-2",children:[K.isPending?r.jsx(n,{className:"h-4 w-4 animate-spin"}):r.jsx(b,{className:"h-4 w-4"}),"Generate Market Report"]})]})})]})}),r.jsx(f,{value:"engagement_insights",className:"mt-6",children:r.jsxs(l,{children:[r.jsxs(d,{children:[r.jsx(m,{children:"Engagement Insights"}),r.jsx(o,{children:"Discover top-performing visions and optimal activity times"})]}),r.jsx(y,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Top Visions"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Ranked by total score, views, downloads, and trades"})]}),r.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Activity Patterns"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Best times to list and engage for maximum visibility"})]})]}),r.jsxs(v,{onClick:()=>K.mutate("engagement_insights"),disabled:K.isPending,className:"w-full gap-2",children:[K.isPending?r.jsx(n,{className:"h-4 w-4 animate-spin"}):r.jsx(w,{className:"h-4 w-4"}),"Generate Engagement Report"]})]})})]})}),r.jsx(f,{value:"portfolio_analysis",className:"mt-6",children:r.jsxs(l,{children:[r.jsxs(d,{children:[r.jsx(m,{children:"Portfolio Analysis"}),r.jsx(o,{children:"Detailed breakdown of your vision holdings and earnings"})]}),r.jsx(y,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Holdings Breakdown"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Each vision with score, royalties earned, and estimated value"})]}),r.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Total Portfolio Value"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Combined value of all your digital vision assets"})]})]}),r.jsxs(v,{onClick:()=>K.mutate("portfolio_analysis"),disabled:K.isPending,className:"w-full gap-2",children:[K.isPending?r.jsx(n,{className:"h-4 w-4 animate-spin"}):r.jsx(D,{className:"h-4 w-4"}),"Generate Portfolio Report"]})]})})]})})]}),H&&H.length>0&&r.jsxs(l,{children:[r.jsx(d,{children:r.jsx(m,{className:"text-lg",children:"Recent Reports"})}),r.jsx(y,{children:r.jsx("div",{className:"space-y-2",children:H.map(e=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:["market_trends"===e.analyticsType&&r.jsx(p,{className:"h-4 w-4 text-primary"}),"engagement_insights"===e.analyticsType&&r.jsx(N,{className:"h-4 w-4 text-accent"}),"portfolio_analysis"===e.analyticsType&&r.jsx(q,{className:"h-4 w-4 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium capitalize",children:e.analyticsType.replace("_"," ")}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Generated ",new Date(e.generatedAt).toLocaleDateString()]})]})]}),r.jsxs(h,{variant:"outline",className:"text-xs",children:["Expires ",new Date(e.expiresAt).toLocaleDateString()]})]},e.id))})})]})]}):r.jsx(l,{className:"border-destructive/20 bg-gradient-to-br from-destructive/5 to-muted",children:r.jsxs(d,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10",children:r.jsx(c,{className:"h-8 w-8 text-destructive"})}),r.jsx(m,{className:"text-2xl",children:"Admin Access Required"}),r.jsx(o,{children:"Premium Analytics is restricted to administrators only"})]})})}const V=()=>r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(E,{}),r.jsxs("main",{className:"container mx-auto px-4 py-8",children:[r.jsxs(T,{to:"/",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors mb-6",children:[r.jsx(R,{className:"h-4 w-4"}),"Back to Home"]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r.jsx(x,{className:"h-8 w-8 text-primary"}),"Premium Market Analytics"]}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Exclusive data insights for Visionary members to make informed decisions"})]}),r.jsx(L,{})]}),r.jsx(C,{})]});export{V as default};
