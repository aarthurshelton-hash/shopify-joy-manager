const n="import React, { useMemo, useCallback } from 'react';\nimport { useTimeline } from '@/contexts/TimelineContext';\nimport { SquareData, GameData } from '@/lib/chess/gameSimulator';\nimport InteractiveVisualizationBoard from './InteractiveVisualizationBoard';\nimport InteractiveGameInfoDisplay from './InteractiveGameInfoDisplay';\nimport BoardCoordinateGuide from './BoardCoordinateGuide';\n\ninterface VisionBoardProps {\n  board: SquareData[][];\n  gameData: GameData;\n  totalMoves: number;\n  size: number;\n  darkMode?: boolean;\n  title?: string;\n  showCoordinates?: boolean;\n  showPieces?: boolean;\n  pieceOpacity?: number;\n  pgn?: string;\n}\n\nexport const VisionBoard: React.FC<VisionBoardProps> = ({\n  board,\n  gameData,\n  totalMoves,\n  size,\n  darkMode = false,\n  title,\n  showCoordinates = false,\n  showPieces = false,\n  pieceOpacity = 0.7,\n  pgn,\n}) => {\n  const { currentMove, setCurrentMove } = useTimeline();\n  \n  // Ensure PGN is available - prefer prop, fallback to gameData.pgn\n  const effectivePgnForBoard = useMemo(() => {\n    if (pgn && typeof pgn === 'string' && pgn.trim().length > 0) {\n      return pgn.trim();\n    }\n    if (gameData?.pgn && typeof gameData.pgn === 'string' && gameData.pgn.trim().length > 0) {\n      return gameData.pgn.trim();\n    }\n    return '';\n  }, [pgn, gameData?.pgn]);\n  \n  const filteredBoard = useMemo(() => {\n    if (currentMove >= totalMoves) return board;\n    return board.map(rank =>\n      rank.map(square => ({\n        ...square,\n        visits: square.visits.filter(visit => visit.moveNumber <= currentMove)\n      }))\n    );\n  }, [board, currentMove, totalMoves]);\n\n  // Handle follow piece activation - jump to the move\n  const handleFollowPieceActivated = useCallback((moveNumber: number) => {\n    setCurrentMove(moveNumber);\n  }, [setCurrentMove]);\n\n  const bgColor = darkMode ? '#0A0A0A' : '#FDFCFB';\n  const borderColor = darkMode ? '#292524' : '#e7e5e4';\n  const mutedColor = darkMode ? '#78716c' : '#a8a29e';\n\n  return (\n    <div\n      style={{\n        backgroundColor: bgColor,\n        padding: 24,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        gap: 20,\n        width: 'fit-content',\n        borderRadius: 8,\n        border: `1px solid ${borderColor}`,\n        boxShadow: '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\n      }}\n    >\n      {/* Chess Board - Now Interactive for square hover highlighting */}\n      <div style={{ position: 'relative' }}>\n        {showCoordinates && (\n          <BoardCoordinateGuide size={size} position=\"inside\" />\n        )}\n        <InteractiveVisualizationBoard \n          board={filteredBoard} \n          size={size}\n          showPieces={showPieces}\n          pieceOpacity={pieceOpacity}\n          pgn={effectivePgnForBoard}\n          currentMoveNumber={currentMove}\n          onFollowPieceActivated={handleFollowPieceActivated}\n        />\n      </div>\n\n      {/* Game Info Section - Now Interactive */}\n      <div\n        style={{\n          width: '100%',\n          paddingTop: 16,\n          borderTop: `1px solid ${borderColor}`,\n        }}\n      >\n        <InteractiveGameInfoDisplay \n          gameData={gameData}\n          title={title}\n          darkMode={darkMode} \n        />\n      </div>\n\n      {/* Branding */}\n      <p\n        style={{\n          fontSize: 10,\n          letterSpacing: '0.3em',\n          textTransform: 'uppercase',\n          fontWeight: 500,\n          color: mutedColor,\n          margin: 0,\n          fontFamily: \"'Inter', system-ui, sans-serif\",\n        }}\n      >\n        ♔ En Pensent ♚\n      </p>\n    </div>\n  );\n};\n";export{n as default};
