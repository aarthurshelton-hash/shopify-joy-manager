import{s as t,ca as n,dG as r,dH as e}from"./index-Cjdju9jQ.js";import{v as o,a as i,b as s}from"./visualizationSchemas-DSfmoDAs.js";import"./flagContent-DXke6UC8.js";!function(){const t=z,n=u();for(;;)try{if(184795===parseInt(t(664))/1*(-parseInt(t(675))/2)+-parseInt(t(598))/3+-parseInt(t(638))/4*(-parseInt(t(523))/5)+-parseInt(t(671))/6*(parseInt(t(587))/7)+parseInt(t(581))/8*(-parseInt(t(624))/9)+parseInt(t(525))/10+parseInt(t(566))/11)break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const a=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r.apply(n,arguments);return r=null,t}}:function(){};return t=!1,e}}()(void 0,function(){const t=z,n={};n.OSwlc=t(575)+"+$";const r=n;return a[t(501)]()[t(574)](r[t(514)])[t(501)]()[t(635)+"r"](a)[t(574)](r[t(514)])});a();const c=function(){const t=z,n={};n[t(678)]=function(t,n){return t===n},n[t(590)]=t(653);const r=n;let e=!0;return function(t,n){const o=e?function(){const e=z;if(r[e(678)](r[e(590)],e(588))){const t=_0xcf4e53[e(635)+"r"][e(594)].bind(_0x12fe83),n=_0x369572[_0x2a7d3a],r=_0x5165f3[n]||t;t[e(503)]=_0x252fcf[e(673)](_0x2667cb),t[e(501)]=r[e(501)].bind(r),_0x370bdf[n]=t}else if(n){const r=n[e(562)](t,arguments);return n=null,r}}:function(){};return e=!1,o}}();function u(){const t=["svvIBwm","yMLUza","lNbUzW","mtrKu1j4ENm","Aw5MBW","DgfIBgu","D1H1rem","DxbSB2fKigLTyq","quz0z1m","zMv0y2GGDMLZDq","BgXLy3rVCG","zcWGCgDUlcbNyq","BMCGyxqGBgvHCW","y29Kzq","y3rVCIGICMv0Dq","CgLLy2vuExbL","DerMvfa","ywXPEMf0Aw9UCW","z2fTzv9KyxrH","DhjPBq","sNHftNm","Dg90ywXnB3zLCW","C3bSAxq","uhrvBMW","Dg9tDhjPBMC","BgL6yxrPB24GAq","x19WCM90B19F","C2vSzwn0","DfPwueC","AxneDxbSAwnHDa","zgf0yq","DxbSB2fK","rufzELC","Dw5K","uujbAhK","CgfSzxr0zuLK","Bwf0y2HLzfbHBa","t1n3Bgm","qw5VDgHLCIbJBW","Aw5Zzxj0","E30Uy29UC3rYDq","BgL6yxrPB246ia","Bg9YCW","Dg9mB3DLCKnHCW","tIbKyxrH","ChjVzMLSzxm","mJyWtgr1DLj6","DhrLswq","mZiZotGZmezPCxfJsG","Aw1Hz2vFCgf0Aa","AM9PBG","CM9WCMLHDguGyW","BM93","y29UC29Szq","yMXHy2S","Aw9UCW","vMLZDwfSAxPHDa","D2fYBG","CML0Eq","yw5VDgHLCIbJBW","ywLUCYbPBMfWCa","DMLZDwfSAxPHDa","CM91BMq","y3vYCMvUDe1VDG","y29UDgvUDfr5Ca","BgfYihzPC3vHBa","DgL0Bgu","BKXNDeC","D2HPDgu","AxnuB29tAw1PBa","C3rYAw5NAwz5","ywXPEMf0Aw9UoG","s0D0z2e","ihzLCNKGC2LTAq","BgvUz3rO","y1bHBgv0Dgu","Dhj5ignOyw5NAq","ueDsu1qXmty","DxbZzxj0","vePUr08","AxnjBNrYAw5ZAq","zunHCMq","CMvZDwX0","Bw92zxm","zxHPC3rPBMDdBW","yxbWBhK","sw52ywXPzcb0Aq","rMfPBgvKihrVia","Bg9JywXLq29TCa","mJK3ode3m010uhzHsW","DNHKy1C","vgL0BguGy29UDa","A2LUzYbKDxbSAq","B2DtyLq","CYbVD25LzcbIEq","vgHPCYb2Axn1yq","Dg8Gysb2AxnPBW","C2vHCMnO","kcGOlISPkYKRkq","BwvZC2fNzq","CMv0DxjUicHMDq","rxjYB3iGAw4Gza","B3DUzxjeAxnWBa","Bg9N","nZyZmNfLs2r3sG","B3jKzxi","BKLK","Bwf0y2HLzeDHBq","jsbZAw1PBgfYia","BIbIEsa","mti2nJm3wgjHt2jo","zwHSA1i","C3vHBgL6yxrPBW","wuXfDMG","AwqSihvZzxjFAq","zeXPCvm","C2LUz2XL","ChjVDg90ExbL","yxjPDhK","zxr0zvnPBwLSyq","y2f0zxm6","nti2odu3zhjeCeLK","ywXS","rfn0tfK","rxjYB3iGy2HLyW","z2u6ia","CMvWBgfJzq","ww91igHHDMuGyq","CgLLy2vdB2XVCG","igzVCIb1BMLXDq","zNjVBq","u29uz2K","uvndvNK","zgf0zq","Aw9Uu3rHDgu","yxLoyw1L","zMLUza","z2fTzurHDge","y0DHBwu","D2DNq2O","zw5LC3m","rxHHy3qGzhvWBa","C3rVCMfNzq","r2HcuhG","DxbwqMS","CYbHBhjLywr5ia","zxjYB3i","mJa1mLHqswj1vG","y3vZDg9Tq29SBW","q3fpufO","y29SB3jtAw1PBa","Dca4ignVBg9YCW","Bw9KzxjU","Aw1Hz2uVCg5N","C2XPy2u","vgHPCYbPCYa","CMvUDfvZzxi","CMvHC29U","y29UC3rYDwn0BW","B3DUzwrcEun1CG","C3vJy2vZCW","mtCYyw1SwNDQ","zMLUzeLUzgv4","CgDU","yxjL","wxLmBgi","y3jLyxrLzf9HDa","sw52ywXPzcbqrW","zgvSzxrL","suf4tee","zgLZCgXHEv9Uyq","y3vZDg9T","DxnLCL9Pza","zxzLBNq","zxHPC3rPBMDwAq","C2fMzq","BLbTALy","zxHPC3rPBMDjza","z2v0uhvIBgLJvq","yxnJzw5KAw5N","zxr0zuLK","BwvFzgf0yq","quX2sg0","quzpr3m","wLnMuLC","yM9HCMq","AgvJAZO","mtm1BMjVzKvv","C29YDa","BgLUA2vKugfSzq","B250zw50","vgzbr3G","DhjHy2u","C2f2zwrFDMLZDq","nMXuCvvHqq"];return(u=function(){return t})()}function f(t,n,r){const e=z,o={};o.SoTgi=e(629);const i=o;return(t||n[e(640)]||"")[e(496)]()[e(603)](/\s+/g," ")+"::"+(r?JSON[e(547)]({palette:r[e(512)]||i[e(608)],darkMode:r.darkMode||!1,currentMove:r[e(540)+"e"]===1/0?e(599):r[e(540)+"e"],lockedPieces:(r.lockedPieces||[])[e(665)]((t,n)=>(t[e(605)]+"-"+t[e(492)])[e(565)+e(641)](n.pieceColor+"-"+n.pieceType))}):"{}")}async function C(o,i,s,a){const c=z,u={CqOPZ:function(t,n){return t!==n},ogSbT:"RUwbY"};u[c(485)]=c(670)+"alizations",u[c(646)]=c(591)+c(488)+c(658),u[c(549)]=c(601)+c(569)+c(597),u[c(592)]=c(649),u.QBAhy=c(515)+c(487),u[c(497)]="modern",u[c(620)]=function(t,n){return t===n},u[c(642)]=c(648);const C=u;try{if(C[c(626)](C[c(570)],C[c(570)])){const t=_0x55d894?function(){if(_0x5c6039){const t=_0x16527e[c(562)](_0x5b5cb1,arguments);return _0x4b9af3=null,t}}:function(){};return _0xf62812=!1,t}{const u=f(i,s,a),{data:w,error:y}=await t[c(607)](C.AFtgS).select(C[c(646)]);if(y){const t={};return t[c(506)+"e"]=!1,t[c(546)+"ar"]=!1,t}for(const n of w||[]){const r=n[c(495)];if(u===f(n[c(640)]||void 0,r,r["visualizat"+c(611)])){const r=n[c(649)]===o;let e;if(!r){const{data:r}=await t[c(607)](c(522))[c(504)](c(647)+"me").eq(C[c(592)],n[c(649)])[c(593)]();e=(null==r?void 0:r.display_name)||C[c(511)]}const i={};return i[c(506)+"e"]=!0,i[c(546)+"ar"]=!0,i[c(654)]=n.id,i[c(636)+c(633)]=r,i[c(579)+c(612)]=e,i["colorSimil"+c(595)]=100,i[c(634)]=c(618)+"icate exists",i}}const l=(null==a?void 0:a[c(512)])||C[c(497)];let z;if(null==a?void 0:a[c(625)+"rs"])z=a[c(625)+"rs"];else if(C[c(620)](l,C[c(642)])){const t=n[c(613)](t=>t.id===c(648));if(t){const n={};n[c(545)]=t.white,n.black=t[c(531)],z=n}}const B=await r(o,i,s,l,z);if(B[c(546)+"ar"]){const t={};return t[c(506)+"e"]=!1,t.isTooSimilar=!0,t[c(654)]=B[c(651)+c(589)+c(583)],t[c(636)+c(633)]=B["ownedByCur"+c(633)],t[c(579)+c(612)]=B[c(579)+"ayName"],t[c(627)+c(595)]=B[c(627)+"arity"],t[c(634)]=B[c(634)],t[c(561)+"lors"]=B[c(561)+c(519)],t[c(557)+c(552)]=B["isIntrinsi"+c(552)],t["isIntrinsi"+c(615)]=B["isIntrinsi"+c(615)],t.matchedGameCard=B[c(584)+c(558)],t[c(513)+c(657)]=B[c(513)+c(657)],t[c(513)+c(596)+"rity"]=B[c(513)+c(596)+c(535)],t}let v;z&&(v=e(z)||void 0);const D={};return D[c(506)+"e"]=!1,D.isTooSimilar=!1,D.linkedPaletteId=v,D[c(627)+c(595)]=B[c(627)+"arity"],D["isIntrinsi"+c(552)]=B[c(557)+c(552)],D[c(557)+c(615)]=B[c(557)+c(615)],D[c(584)+"eCard"]=B[c(584)+"eCard"],D.matchedPaletteId=B[c(513)+c(657)],D[c(513)+c(596)+c(535)]=B[c(513)+c(596)+c(535)],D}}catch(w){const t={};return t[c(506)+"e"]=!1,t[c(546)+"ar"]=!1,t}}async function w(n,r,e,a,c,u){const f=z,w={IUbmc:function(t,n){return t(n)},upVBk:f(644)+f(521),wggCj:f(572)+"lization i"+f(622)+"in your gallery",nFMGs:f(630),TfAGx:f(538)+f(532),DStLY:f(670)+f(494)};try{const y=w[f(672)](o,r);if(!y.success)return{data:null,error:new Error(y.error||f(563)+"tle")};const l=await w[f(672)](i,r);if(!l[f(652)]){if("SNHzb"!==f(659))return{data:null,error:new Error(l[f(634)]||f(568)+f(537)+f(528)+f(667))};if(_0x888d82){const t=_0x292b8b[f(562)](_0x1353c0,arguments);return _0x3466b9=null,t}}const z=s(c);if(!z[f(637)])return{data:null,error:new Error(z[f(623)]||w[f(621)])};const B=await C(n,c,e[f(614)],u);if(B[f(506)+"e"]){const t=B.ownedByCurrentUser?w[f(616)]:f(572)+f(502)+f(571)+" "+(B[f(579)+f(612)]||"another co"+f(487));return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:B[f(636)+f(633)],ownerDisplayName:B[f(579)+f(612)],colorSimilarity:100}}if(B[f(546)+"ar"]){const t=B[f(636)+f(633)]?f(604)+f(550)+f(542)+"ization - "+f(553)+f(489)+f(628)+f(606)+f(617):f(632)+Math[f(539)](B[f(627)+"arity"]||30)+(f(585)+f(573)+f(586))+(B[f(579)+f(612)]||f(536)+f(487));return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:B["ownedByCur"+f(633)],ownerDisplayName:B[f(579)+f(612)],colorSimilarity:B[f(627)+"arity"],reason:B[f(634)]}}const v={...u};v[f(666)+f(524)]=B[f(666)+"tteId"];const D=v,g=n+"/"+Date[f(529)]()+"-"+r.replace(/[^a-z0-9]/gi,"-")[f(520)+"e"]()+f(674),x={};x[f(541)+"e"]=w.nFMGs,x[f(555)]=!1;const{error:h}=await t[f(619)][f(607)](f(538)+f(532))[f(508)](g,a,x);if(h)throw new Error("Failed to "+f(484)+f(602)+h.message);const{data:L}=t[f(619)].from(w[f(668)])[f(655)+"rl"](g),d={};d.white=e[f(614)].white,d[f(531)]=e[f(614)][f(531)],d[f(650)]=e[f(614)].event,d[f(610)]=e[f(614)].date,d.result=e[f(614)][f(559)],d[f(640)]=e[f(614)][f(640)],d[f(560)]=e[f(614)][f(560)],d[f(662)]=e[f(662)],d[f(498)]=e.totalMoves,d[f(538)+"ionState"]=D;const q=d,m={};m[f(649)]=n,m[f(543)]=r,m[f(640)]=c||null,m[f(495)]=q,m[f(526)]=L.publicUrl;const{data:M,error:A}=await t.from(w[f(600)])[f(516)](m).select().single();if(A)throw await t.storage[f(607)](f(538)+f(532)).remove([g]),new Error(f(564)+"save visua"+f(518)+A[f(576)]);const H={};return H[f(507)]=M,H[f(623)]=null,H}catch(y){const t={};return t[f(507)]=null,t[f(623)]=y,t}}async function y(n){const r=z,e={};e[r(500)]="saved_visualizations",e[r(509)]=r(643),e[r(661)]="QSCVy";const o=e;try{const e={};e[r(656)]=!1;const{data:i,error:s}=await t[r(607)](o[r(500)]).select("*").eq(r(649),n)[r(582)](o[r(509)],e);if(s)throw new Error(r(564)+r(486)+r(494)+": "+s[r(576)]);const a={};return a[r(507)]=i||[],a[r(623)]=null,a}catch(i){if(r(609)===o[r(661)]){const t={};return t[r(507)]=[],t[r(623)]=i,t}{const t={};return t.error=_0x159aa6,t}}}async function l(n,r){const e=z,o={tZVPG:function(t,n){return t+n}};o[e(493)]=e(538)+e(532);const i=o;try{const o=new URL(r).pathname[e(499)]("/"),s=o[e(639)](t=>t===e(538)+e(532)),a=o[e(631)](i[e(505)](s,1))[e(527)]("/");a&&await t[e(619)].from(i.tDfTP).remove([a]);const{error:c}=await t[e(607)]("saved_visu"+e(494))[e(645)]().eq("id",n);if(c)throw new Error(e(564)+"delete visualization: "+c[e(576)]);const u={};return u[e(623)]=null,u}catch(s){const t={};return t[e(623)]=s,t}}function z(t,n){t-=484;const r=u();let e=r[t];if(void 0===z.QOGlJF){var o=function(t){let n="",r="",e=n+o;for(let o,i,s=0,a=0;i=t.charAt(a++);~i&&(o=s%4?64*o+i:i,s++%4)?n+=e.charCodeAt(a+10)-10!=0?String.fromCharCode(255&o>>(-2*s&6)):s:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let o=0,i=n.length;o<i;o++)r+="%"+("00"+n.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(r)};z.cCMXVm=o,z.ACqHrX={},z.QOGlJF=!0}const i=t+r[0],s=z.ACqHrX[i];if(s)e=s;else{const t=function(t){this.hmYpII=t,this.CVZvKW=[1,0,0],this.nahATJ=function(){return"newState"},this.RBCxIL="\\w+ *\\(\\) *{\\w+ *",this.lWiyfW="['|\"].+['|\"];? *}"};t.prototype.qJBJGP=function(){const t=new RegExp(this.RBCxIL+this.lWiyfW).test(this.nahATJ.toString())?--this.CVZvKW[1]:--this.CVZvKW[0];return this.XOjhaQ(t)},t.prototype.XOjhaQ=function(t){return Boolean(~t)?this.zzymIk(this.hmYpII):t},t.prototype.zzymIk=function(t){for(let n=0,r=this.CVZvKW.length;n<r;n++)this.CVZvKW.push(Math.round(Math.random())),r=this.CVZvKW.length;return t(this.CVZvKW[0])},new t(z).qJBJGP(),e=z.cCMXVm(e),z.ACqHrX[i]=e}return e}c(void 0,function(){const t=z,n={};n[t(556)]=t(517)+t(491)+'rn this")( )',n.YBZAc=t(676),n.vxdcW=t(623),n[t(660)]="exception",n[t(544)]=t(677);const r=n;let e;try{e=Function(t(577)+"nction() "+r[t(556)]+");")()}catch(s){e=window}const o=e.console=e[t(530)]||{},i=[t(580),t(534),r.YBZAc,r[t(567)],r[t(660)],r[t(544)],t(669)];for(let a=0;a<i[t(551)];a++){const n=c[t(635)+"r"].prototype[t(673)](c),r=i[a],e=o[r]||n;n.__proto__=c[t(673)](c),n[t(501)]=e[t(501)][t(673)](e),o[r]=n}})();export{C as checkDuplicateVisualization,l as deleteVisualization,y as getUserVisualizations,w as saveVisualization};
