import{d6 as e,d7 as t,cp as s,a as n,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as f,C as x,x as h,D as p,B as g,A as v,p as w,t as j,cN as y,bC as N,S as b,a6 as z,P as C,y as M,bG as D,T as B,aq as L,z as E,cU as A,aj as q,aT as _,ca as S,b as W,d8 as G}from"./index-C_PxF1MG.js";!function(){const e=U,t=k();for(;;)try{if(739841===-parseInt(e(197))/1*(-parseInt(e(149))/2)+parseInt(e(153))/3*(parseInt(e(333))/4)+-parseInt(e(238))/5*(-parseInt(e(222))/6)+parseInt(e(318))/7*(-parseInt(e(267))/8)+-parseInt(e(226))/9*(parseInt(e(296))/10)+-parseInt(e(265))/11+parseInt(e(168))/12)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const K=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=U,t={};t[e(355)]=e(290)+"+$";const s=t;return K.toString()[e(120)](e(290)+"+$")[e(253)]()[e(190)+"r"](K)[e(120)](s.VmBBx)});K();const P=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[U(136)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function k(){const e=["u1z5wha","q2LUEMvSjYWGjW","z1jTCKu","y2fUDMfZ","pZ8/pY4/pY4/pW","DhjHy2u","mxW0Fdb8m3WY","CMLM","mJa5mdC2otzoAxfZCeu","CM4GDgHPCYiPka","uu1Sr2i","BgLUzvrV","ywXWAgfIzxrPyW","weDXsgS","C2nHBgu","lI4U","B0fNBuG","BgvUz3rO","C3jJ","Cgjnqwi","iZC4nZe2yW","whvAsLq","rLHMDMO","BxvHzMy","sK9yuKq","BwHqALO","A1nVtK4","phjLy3qGEd0I","tuDis2K","zhjHD0LTywDL","y29UC3rYDwn0BW","AgvPz2H0","C3bSAxq","zM9UDa","iIb5psiWiIb3Aq","BwvZlcbZzxjPzG","ihzZia","mtHnuKvOr1G","nJaWideZChGGjW","CM91BMrszwn0","iIbOzwLNAhq9iG","uNDTB3e","sgDjwxK","sxf5Aey","txf4tNm","qM9UyMC","ywXS","wvvdEKK","CMvKDwnL","uhnfsgy","vw5RBM93BG","y29SB3i","mJu1lcaYntuSia","iIbMAwXSpsi","C3rYB2TLu3r5Ba","DhjHBNnWyxjLBG","D2HPDgu","tK10qKe","ndaWideWChGGjW","rMrXDwW","D2fYBG","DvztC0y","mtK4y1PNC1jT","BwLKzgXL","CxjJB2rL","C3rYB2TL","mtHjz3fvA0O","AMD2u3q","y3jLyxrLt2jQzq","BMn0Aw9UkcKG","zw5Wzw5Zzw50lG","BefvrvK","iIb3Awr0Ad0I","z2v0q29UDgv4Da","ChjVDg90ExbL","u2vruwW","Bgf5zxjtAxPL","wM1rDg4","ntG1mdvywfzbvwG","i0zerKngqG","C1LPyNq","i2zHzMfMoq","tgvYBKK","4PMuievoifbftLnf","twnpqLm","AvPxrvq","DhLWzq","ndaWideXChGGjW","BxHVruC","ntaWideXChGGjW","CMv2B2TLt2jQzq","y2vUDgvY","y3rvuKW","Dg9tDhjPBMC","AMzAwfa","iIb5psi","zxHJzxb0Aw9U","zhrOpsi","zfL3swO","Dg9vChbLCKnHCW","zxzLBNq","txfWBhy","Bw92zxm","ntaWideYChGGjW","ELPTswG","mti1mZK4mtn3D3Pfv0K","CuXIrxO","ogzqBLrfDq","yxjJ","tgrWvhq","vMfLAMi","ruf0sKS","i0zbrKfgqq","rw9ku3q","Aw1Hz2uVC3zNkW","wLfxzwq","EMP1u0W","ChvZAa","AgLUz0vUywjSzq","B25SB2fK","qMXHy2S","zhbjy1m","wuzMvMm","ufLoDgy","BvrdD3i","C1r4wKO","AgLUz1f1ywXPDa","vLv4D1a","zw50","B25LCNjVCG","kcGOlISPkYKRkq","zxjYB3i","iZq0ndaZyW","r0LqA3y","BNmTC2vYAwy","idiWChGGj0nVCG","mtiWmdy3mfHqu3Lgva","D01Vugu","weLergm","CNbRDNe","phjLy3qGEd0Ima","s1jYy0C","rMHsAhe","zw9Yz2LHlcbZzq","tLqG4PMA","rgzksLO","s1DdCw4","EMHyCMW","AxrHBgLJiduWma","sw50zxiNlcbZyq","pc9ZDMC+","A2n0wNu","zMLpufG","i2e4yti5zq","zMLSBfrLEhq","yM9YzgvY","CMv0DxjUicHMDq","AKPqBLe","mZaZnZyWmvvmC2jnBG","zgfYAW","zMLSBfn0EwXL","s0fLCMO","C2f2zq","BgLUzvDPzhrO","rMfPBgvKihrVia","D3CUDZmUB3jNlW","rgroy2y","y29UC29Szq","uNnwDwC","nJaWidi0ChGGjW","z0r1Dxe","E30Uy29UC3rYDq","CgvUC2vUDc5JBW","mti3nJe2Du5NBefN","wKjjrLy","DfPLz1C","yNPHzLe","zgf0zq","C25NyKO","Bg9HzcbtvKC","B2vcrKK","zM9UDhm","Aw5JBhvKzxm","Aw1Hz2vtBw9VDa","yw5VBNLTB3vZ","psjODhrWoI8VDW","DMLZAxrZ","BwLWA1O","BwvHC3vYzvrLEa","phn2zYb4BwXUCW","sMr4BKe","AgLNAa","DfDorKq","y29T","yMLUza","vM1cqNG","Aw5MBW","iZfbmueXqq","C2vHCMnO","u1LcBgG","A1LHvhe","Bw9Yyw50jYWGrW","BgLNAhq","iZi5mJuYna","iI8+","Dgv4DefSAwDU","z3LKDMe","BMrTwvq","D2LKDgG","zMLSBfjLy3q","uM9Tyw4NlcbuAq","iJaGmca","CLvMAMK","rNrlC2C","yxbWBhK","CMvHzhK","DgnUDhi","s2TLCwe","DfDstuS","uM9Tyw4NlcbZzq","mJaWmc9ZDMCIia","vgLTzxmGtMv3ia","uxnlvMK","BuPNshm","BgvMDa","Agrhwum","x19WCM90B19F","mJyWmdrrB0H0q3O","yMvNAw5qyxrO","sNbzuvq","C095D2W","mtHAs0L2qxO","shjyvfO","y3rVCIGICMv0Dq","y3jVC3npCMLNAq","Ahr0Chm6lY9LBG","wg9kCeC","mc45nsK"];return(k=function(){return e})()}function U(e,t){e-=119;const s=k();let n=s[e];if(void 0===U.OEOqlA){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};U.GPsWSA=r,U.iaSaga={},U.OEOqlA=!0}const a=e+s[0],i=U.iaSaga[a];if(i)n=i;else{const e=function(e){this.TmaHKv=e,this.fUEpzR=[1,0,0],this.KdUBIP=function(){return"newState"},this.sPhExy="\\w+ *\\(\\) *{\\w+ *",this.GKPHSU="['|\"].+['|\"];? *}"};e.prototype.TtUmjm=function(){const e=new RegExp(this.sPhExy+this.GKPHSU).test(this.KdUBIP.toString())?--this.fUEpzR[1]:--this.fUEpzR[0];return this.ZupZkG(e)},e.prototype.ZupZkG=function(e){return Boolean(~e)?this.aXXZXh(this.TmaHKv):e},e.prototype.aXXZXh=function(e){for(let t=0,s=this.fUEpzR.length;t<s;t++)this.fUEpzR.push(Math.round(Math.random())),s=this.fUEpzR.length;return e(this.fUEpzR[0])},new e(U).TtUmjm(),n=U.GPsWSA(n),U.iaSaga[a]=n}return n}P(void 0,function(){const e=U,t={ndmYT:function(e,t){return e!==t},ZBIFV:function(e,t){return e(t)},uVSsF:function(e,t){return e+t},gDuuq:"log",zjuSL:e(220),Fdqul:e(256),pyMmo:"table",mhPjZ:function(e,t){return e<t}},s=function(){const s=e;if(!t[s(129)](s(227),s(227))){let e;try{e=t[s(334)](Function,t[s(221)](s(316)+s(229)+(s(331)+s(155)+s(169)+" )"),");"))()}catch(n){e=window}return e}_0xa38a7=_0x1a7eb9}(),n=s.console=s[e(327)]||{},r=[t[e(330)],t[e(276)],e(356),e(291),t[e(219)],t.pyMmo,e(165)];for(let a=0;t[e(185)](a,r[e(177)]);a++){const t=P[e(190)+"r"][e(234)].bind(P),s=r[a],i=n[s]||t;t[e(148)]=P[e(354)](P),t[e(253)]=i[e(253)].bind(i),n[s]=t}})();function I(s,n){const r=U,a={};a[r(170)]=function(e,t){return e/t},a[r(254)]=function(e,t){return e+t},a.YFfVc=function(e,t){return e*t},a[r(302)]=function(e,t){return e<t},a[r(121)]=function(e,t){return e-t},a.VUxwP=function(e,t){return e<t},a[r(285)]=function(e,t){return e+t},a.sYibt=function(e,t){return e*t},a[r(203)]=function(e,t){return e>t},a[r(340)]=function(e,t){return e*t},a[r(306)]="uHbcg",a[r(173)]=function(e,t){return e*t};const i=a,o=i[r(170)](n,8),c=.02*n,l=i.jfZXP(n,i[r(282)](c,2));let u=r(349)+r(345)+r(325)+r(142)+'width="'+l+r(200)+l+'" viewBox='+r(133)+l+" "+l+'">';u+=r(300)+r(194)+r(257)+l+r(200)+l+'" fill="'+e[r(315)]+'"/>';for(let d=0;i[r(302)](d,8);d++){const n=i[r(121)](7,d);for(let a=0;i[r(287)](a,8);a++){const l=s[n][a],m=l.isLight?e[r(124)]:e[r(319)],f=i[r(285)](c,a*o),x=c+i[r(240)](d,o);if(u+=r(187)+f+r(255)+x+r(232)+o+r(200)+o+r(213)+m+r(126),i[r(203)](l[r(346)][r(177)],0)){const e=i[r(340)](o,.08),s=[];for(const o of l[r(346)])if(i[r(306)]!=i[r(306)]){if(_0xf62cfc){const e=_0x33de93.apply(_0x1d2a9f,arguments);return _0x1138cc=null,e}}else{const e=t(o.piece,o.color);!s[r(342)](e)&&s[r(277)](e)}const n=Math.min(s[r(177)],6),a=[];let c=o-i[r(173)](e,2);const d=.7*c/n;for(let t=0;t<n;t++){const e={};if(e[r(211)]=s[t],e.layerSize=c,a.push(e),c-=d,c<.1*o)break}for(const t of a){const e=(o-t.layerSize)/2;u+='<rect x="'+(f+e)+'" y="'+(x+e)+r(232)+t[r(236)]+r(200)+t.layerSize+r(213)+t.color+'"/>'}}}}return u+=r(310),u}async function H(e){const t=U,s={};s[t(281)]=t(224),s[t(328)]=t(157)+t(332)+"m",s[t(209)]=t(272),s.OQKDF=t(215)+"t";const n=s;return(await import(n[t(281)])).default.toDataURL(n[t(328)],{width:200,margin:1,color:{dark:e?n[t(209)]:t(119),light:n.OQKDF},errorCorrectionLevel:"M"})}async function T(){const e=U,t={};t[e(182)]=e(344);const n=t;return new Promise((t,r)=>{const a=e,i=new Image;i[a(156)+"n"]=n[a(182)],i[a(279)]=()=>t(i),i[a(289)]=r,i[a(178)]=s})}async function O(e,t,s={}){const n=U,r={ksitp:function(e,t){return e+t},HrXTZ:function(e,t){return e(t)},gljJx:function(e,t,s){return e(t,s)},IHcdu:function(e,t){return e===t},ZQWed:n(179),dYwIj:function(e,t,s){return e(t,s)},McOBS:function(e,t){return e*t},mTCwr:function(e,t){return e+t},gydva:function(e,t){return e*t},EAtJK:n(351),FtKsg:n(239),KRrcG:function(e,t){return e+t},LernI:n(125),QsKVi:"#e7e5e4",YUCzI:n(241),gRmrE:n(180),hdGYC:function(e,t){return e/t},PYNtf:"White",zhXrl:n(223),tWRMK:"600 24px '"+n(161)+n(143)+"Roman', serif",tZegW:function(e,t){return e/t},lAUEY:"italic 500"+n(295)+n(123)+n(303)+n(167),XuZJT:function(e,t){return e+t},bzafQ:function(e,t){return e!==t},SeQQl:n(166),rUfji:"center",fqcwx:n(308)+" 18px 'Cor"+n(123)+n(303)+n(167),MGHKi:function(e,t){return e||t},kYaTq:n(202),XoJpG:n(297),sngbJ:"  â€¢  ",jJPnQ:function(e,t){return e-t},fiOPX:function(e,t){return e>t},DdNcf:n(218)+n(143)+n(132)+n(195),JOXRD:function(e,t){return e-t},MqxNs:function(e,t){return e+t},muaff:function(e,t){return e>t},Kkeqa:function(e,t){return e>=t},JdxnA:function(e,t){return e<t},IdCwb:n(243)+n(304),RFNQV:function(e,t){return e!==t},NMtBA:n(146),EoJSt:function(e,t){return e+t},Rwmoq:function(e){return e()},JpYQT:function(e,t){return e+t},kctZu:"rgba(255, "+n(212)+n(159),kgEPr:function(e,t){return e+t},kSoNN:function(e,t){return e-t},joKdn:function(e,t){return e/t},qLbEz:function(e,t){return e+t},mJgHs:function(e,t){return e+t},mipkZ:n(198)+n(309)+n(294),oAgmH:n(247)+n(309)+n(294),PKrzE:function(e,t){return e-t},mxoEG:function(e,t){return e+t}};await async function(){const e=U;document[e(341)]&&document[e(341)][e(137)]&&await document.fonts[e(137)],await new Promise(e=>setTimeout(e,150))}();const{boardSize:a=600,darkMode:i=!1,withWatermark:o=!1,title:c}=s,l=r[n(258)](I,e,a),u=r.McOBS(a,.02),d=r[n(284)](a,2*u),m=await async function(e,t,s){const n=U,r={tcntr:function(e,t){return e!==t},iZWET:function(e,t){return e(t)},sOywl:n(324)+"load SVG",TnlNR:function(e,t){return e(t)}};return new Promise((a,i)=>{const o=n,c={tWNFD:function(e,t){return e*t},ZmQtn:function(e,t){return r.TnlNR(e,t)}},l=new Image,u={};u[o(246)]=o(274)+"xml;charset=utf-8";const d=new Blob([e],u),m=URL[o(228)+o(252)](d);l[o(279)]=()=>{const e=o,n=document["createElem"+e(288)]("canvas");n[e(130)]=5*t,n[e(191)]=c[e(352)](s,5);const r=n.getContext("2d");r[e(174)](5,5),r[e(189)](l,0,0,t,s),URL[e(250)+e(252)](m),c[e(237)](a,n)},l[o(289)]=()=>{const e=o,t={};t[e(264)]=e(146),t[e(261)]=function(e,t){return e+t};const s=t;r[e(138)](e(270),e(205))?(URL[e(250)+e(252)](m),r[e(245)](i,new Error(r[e(152)]))):(_0x2c7ad1.textAlign=s[e(264)],_0x1a2f00[e(314)](_0x51ce7f,_0x16d9df,_0x50082b),_0x1aa7c2+=s.Mqplv(_0x33c480[e(348)+"t"](_0x3f1db9)[e(130)],_0x2c2a98))},l[o(178)]=m})}(l,d,d),f=60,x=d+r.gydva(f,2),h=r[n(284)](d+220,60)+r[n(244)](f,2),p=document["createElem"+n(288)](n(163));p[n(130)]=5*x,p.height=5*h;const g=p[n(233)]("2d");g[n(174)](5,5),g[n(343)+n(278)+"d"]=!0,g[n(343)+n(286)+"y"]=r[n(271)],g[n(320)]=i?"#0A0A0A":r[n(135)],g[n(131)](0,0,x,h),g.drawImage(m,0,0,m.width,m[n(191)],f,f,d,d);const v=r[n(301)](f+d,28);g.strokeStyle=i?r[n(242)]:r[n(144)],g[n(323)]=1,g[n(150)](),g.moveTo(f,v),g[n(171)](x-f,v),g[n(225)]();const w=i?r[n(207)]:r[n(242)],j=i?n(313):"#78716c",y=i?r[n(162)]:n(313),N=i?"#78716c":n(313),b=r[n(147)](x,2);let z=r[n(301)](v,55);const C=t[n(216)]||r[n(283)],M=t.black||n(280);g.textBaseline=r[n(307)],g[n(193)]=r[n(140)];const D=g.measureText(C)[n(130)],B=g.measureText(M).width;g[n(193)]=n(308)+n(295)+n(123)+"eorgia, se"+n(167);const L=n(196),E=g[n(348)+"t"](L)[n(130)],A=D+E+B,q=b-r[n(335)](A,2);if(g[n(193)]=n(329)+"Cinzel', '"+n(143)+n(141)+n(167),g[n(320)]=w,g.textAlign=n(146),g[n(314)](C,q,z),g[n(193)]=r[n(231)],g[n(320)]=N,g.fillText(L,r[n(181)](q,D),z),g[n(193)]=r[n(140)],g[n(320)]=w,g[n(314)](M,q+D+E,z),z+=36,t[n(260)]&&r[n(336)](t[n(260)],n(210))){const e=r[n(235)][n(192)]("|");let s=0;for(;;){switch(e[s++]){case"0":g[n(127)]=r.rUfji;continue;case"1":g.fillStyle=j;continue;case"2":z+=32;continue;case"3":g[n(314)](t[n(260)],b,z);continue;case"4":g[n(193)]=r.fqcwx;continue}break}}const _=c,S=t[n(337)]||"";if(r[n(188)](_,S))if(n(269)!=n(269)){const e=(_0x43f893-_0x1c982b[n(236)])/2;_0x1e56aa+='<rect x="'+(_0x1308e6+e)+n(255)+r.ksitp(_0x5283a1,e)+n(232)+_0x23cf66[n(236)]+n(200)+_0x5eef26[n(236)]+n(213)+_0x5b222e[n(211)]+n(126)}else{g[n(320)]=y,g[n(193)]=n(263)+n(309)+"ns-serif",g.textAlign=r[n(134)];let e="";_?r.bzafQ(r[n(122)],r[n(158)])?(e=_[n(259)+"e"](),S&&(e+=r[n(338)]+S)):(_0x38a536["revokeObje"+n(252)](_0x5a02f1),r[n(154)](_0x32748d,new _0x43898b(n(324)+n(339)))):e=S;const t=2,s=e[n(192)](""),a=s[n(208)]((e,t)=>e+g[n(348)+"t"](t)[n(130)],0),i=(s[n(177)]-1)*t;let o=r.jJPnQ(b,(a+i)/2);for(const c of s)g.textAlign=n(146),g[n(314)](c,o,z),o+=r[n(284)](g.measureText(c)[n(130)],t);z+=28}if(t[n(262)]&&r[n(312)](t[n(262)][n(177)],0)){g.fillStyle=y,g.font=r[n(326)],g[n(127)]=n(251);const e=t[n(262)].join(" "),s=e[n(177)]>400?e.substring(0,400)+n(175):e,a=r[n(184)](x,120)-40,i=s[n(192)](" ");let o="",c=z;const l=15,u=4;let d=0;for(const t of i){const e=r[n(204)](o+(o?" ":""),t);if(r[n(183)](g[n(348)+"t"](e).width,a)&&o){if(g[n(314)](o,b,c),o=t,c+=l,d++,r[n(139)](d,u))break}else o=e}o&&r[n(350)](d,u)&&g[n(314)](o,b,c)}const W=h-f-20;g[n(320)]=y,g.font=n(249)+n(309)+n(294),g[n(127)]=r[n(134)];const G=r.IdCwb[n(192)]("");let K=b-(G.reduce((e,t)=>e+g.measureText(t)[n(130)],0)+r[n(128)](G[n(177)]-1,4))/2;for(const P of G)if(r.RFNQV("izjWA",n(299)))g.textAlign=r[n(217)],g[n(314)](P,K,W),K+=r[n(273)](g[n(348)+"t"](P)[n(130)],4);else{const e=r.gljJx(_0x4d97bf,_0x11c4c2.piece,_0xaa34e1[n(211)]);!_0x38dfdd[n(342)](e)&&_0x1f4b66.push(e)}if(o){const[e,t]=await Promise[n(206)]([H(!1),r[n(201)](T)]),s=220,a=65,i=r[n(317)](r[n(151)](f,d),s)-12,o=f+d-a-12;g.fillStyle=r[n(311)],g[n(150)](),g[n(199)](i,o,s,a,6),g.fill(),g[n(214)+"e"]="#e7e5e4",g[n(323)]=1,g[n(225)]();const c=48,l=r.ksitp(i,12),u=r.kgEPr(o,r[n(186)](a,c)/2);g[n(322)](),g[n(150)](),g[n(268)](l+r[n(335)](c,2),u+c/2,r.joKdn(c,2),0,2*Math.PI),g.clip(),g.drawImage(t,l,u,c,c),g.restore();const m=r[n(266)](r[n(145)](l,c),10);g[n(127)]=n(146),g.textBaseline=n(172),g[n(320)]=n(292),g[n(193)]=r[n(347)],g[n(314)]("EN PENSENT",m,r.EoJSt(o,28)),g[n(320)]=n(180),g[n(193)]=r[n(176)],g[n(314)](n(230)+n(353),m,r[n(301)](o,46));const x=50,h=r.PKrzE(r[n(181)](i,s),x)-10,p=r[n(248)](o,(a-x)/2),v=new Image;await new Promise(t=>{const s=n,a={};a[s(160)]="anonymous";const i=a;v.onload=()=>{const e=s;if(r.IHcdu(e(179),r[e(275)]))g[e(189)](v,h,p,x,x),t();else{const t=new _0x38646e;t[e(156)+"n"]=i.SVyXp,t[e(279)]=()=>_0x208a54(t),t.onerror=_0x4f0c86,t[e(178)]=_0x27dd67}},v[s(289)]=()=>t(),v[s(178)]=e})}return p}const Z=S.filter(e=>"custom"!==e.id);const Y=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const V=()=>{const e=n(),{user:t,isLoading:s}=r(),[K,P]=a.useState(null),[k,U]=a.useState(!1),[I,H]=a.useState(0),[T,V]=a.useState(""),[J,R]=a.useState([]),[X,F]=a.useState(50),[$,Q]=a.useState(!0),[ee,te]=a.useState(!1),[se,ne]=a.useState(null);a.useEffect(()=>{s||(async()=>{if(!t)return void P(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});P(!0===e)})()},[t,s]);const re=a.useCallback(async(e,s,n,r,a=!0)=>{try{const m=i(e.pgn),f=a?Z[Math.floor(Math.random()*Z.length)]:Z[n%Z.length],x=function(e,t){const s=S.find(e=>e.id===t)||S[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?s.white:s.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,f.id);o(f.id);const h=await O(x,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:s}),p=await new Promise((e,t)=>{h.toBlob(s=>{s?e(s):t(new Error("Failed to create blob"))},"image/png",.95)}),g=Date.now(),v=`${t.id}/${g}-${s.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(v,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:j}=c.storage.from("visualizations").getPublicUrl(v),y=l(e.pgn),N={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:x,totalMoves:m.totalMoves,visualizationState:{paletteId:f.id,paletteName:f.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?n+1:void 0,gameHash:y}},{data:b,error:z}=await c.from("saved_visualizations").insert({user_id:t.id,title:s,pgn:e.pgn,game_data:N,image_path:j.publicUrl}).select().single();if(z)throw z;const C=function(e,t){if(e){const e=99,s=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+s}return 199+Math.floor(600*Math.random())}(r,n),{data:M,error:D}=await u(b.id,C);if(D)throw D;const B=function(e,t){const s=e?1.5:1,n=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*s+5*n),hdDownloads:Math.floor(3*Math.random()*s),gifDownloads:Math.floor(2*Math.random()*s),tradeCount:e?Math.floor(2*Math.random()):0}}(r,n);for(let e=0;e<B.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:b.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const L=d(e.pgn),E=a?"premium":"genesis";return{title:s,success:!0,visualizationId:b.id,listingId:null==M?void 0:M.id,isExemplar:r,paletteId:f.id,paletteName:f.name,gameHash:y,tier:E,openingName:null==L?void 0:L.fullName}}catch(m){return{title:s,success:!1,error:m.message,isExemplar:r}}},[t]),ae=J.filter(e=>e.success).length,ie=J.filter(e=>!e.success).length;return J.filter(e=>e.success&&e.isExemplar).length,s||null===K?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})}):t&&K?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(g,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(v,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(x,{children:[m.jsx(w,{children:m.jsxs(j,{className:"flex items-center gap-3",children:[m.jsx(y,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(N,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",X," visions: ",Math.min(25,X)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,X-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:X,onChange:e=>F(Number(e.target.value)),disabled:k,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(b,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:k}),m.jsxs(z,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(C,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(M,{variant:"secondary",className:"text-xs",children:[Z.length," palettes"]})]})]}),m.jsx(g,{onClick:async()=>{if(!t)return void W.error("You must be logged in as the CEO account");U(!0),R([]),H(0);const e=[],s=G.slice(0,Math.min(X,G.length)),n=[];for(let t=0;t<X;t++){const e=t%s.length,r=t<25,a=Y[t]||`Vision ${t+1}`;n.push({game:s[e],title:a,isExemplar:r})}for(let t=0;t<n.length;t++){const{game:s,title:r,isExemplar:a}=n[t];V(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${n.length})`);const i=await re(s,r,t,a,$);e.push(i),R([...e]),H((t+1)/n.length*100),await new Promise(e=>setTimeout(e,300))}U(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?W.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):W.error("Failed to create any visions")},disabled:k||!t,className:"w-full",size:"lg",children:k?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(B,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(g,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),ne(null);try{const{data:e,error:s}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(s)throw s;if(!e||0===e.length)return W.info("No visions to delete"),void te(!1);const n=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",n);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=n.filter(e=>!i.has(e)),l=n.filter(e=>i.has(e));if(0===o.length)return W.info("All your visions have accrued natural value - none deleted"),ne({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);ne({deleted:o.length,preserved:l.length}),W.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){W.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||k||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(B,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),se&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",se.deleted," deleted"]}),se.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",se.preserved," preserved (has value)"]})]})})]}),k&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(L,{value:I,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:T})]}),J.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(E,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(A,{className:"h-4 w-4"}),J.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(q,{className:"h-4 w-4"}),J.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:J.map((e,t)=>m.jsxs(_.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(A,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(q,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(M,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(M,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(C,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(x,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(g,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{V as default};
