import{d9 as e,a,r as t,j as r,aT as n,s,aH as i}from"./index-CESOpT9D.js";const l=()=>{const{id:l}=e(),o=a(),[d,c]=t.useState(null);return t.useEffect(()=>{(async()=>{var e,a,t;if(l)try{const{data:r,error:n}=await s.from("saved_visualizations").select("pgn, game_data").eq("id",l).maybeSingle();if(n)return void c("Failed to load visualization");if(!r)return void c("Visualization not found");const d=r.pgn||(null==(e=r.game_data)?void 0:e.pgn)||"",u=i(d),m=null==(t=null==(a=r.game_data)?void 0:a.visualizationState)?void 0:t.paletteId,v=new URLSearchParams;m&&v.set("p",m),v.set("src","gallery");const f=v.toString();o(`/g/${u}${f?`?${f}`:""}`,{replace:!0})}catch(r){c("Failed to redirect")}else c("Invalid visualization ID")})()},[l,o]),d?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("h1",{className:"text-xl font-royal font-bold text-foreground",children:d}),r.jsx("button",{onClick:()=>o("/my-vision"),className:"text-primary hover:underline",children:"Return to Gallery"})]})}):r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsx(n.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-2 border-primary border-t-transparent rounded-full"})})};export{l as default};
