const n="/**\n * Architectural & Sacred Geometry Adapter\n * \n * Spatial cognition, building proportions, sacred geometry patterns,\n * urban planning, and the mathematics of beauty in built environments.\n * \n * For Alec Arthur Shelton - The Artist\n * Buildings are frozen music, cities are symphonies in stone.\n */\n\nimport type { DomainAdapter, UniversalSignal, DomainSignature } from '../types';\n\n// SACRED GEOMETRY CONSTANTS\nconst SACRED_GEOMETRY = {\n  goldenRatio: {\n    symbol: 'φ',\n    value: 1.618033988749895,\n    inverse: 0.618033988749895,\n    significance: 'Most irrational number, optimal packing/division',\n    appearances: [\n      'Parthenon facade proportions',\n      'Pyramid of Giza slope angle',\n      'Human body proportions',\n      'DNA helix geometry',\n      'Galaxy spiral arms'\n    ],\n    marketAnalogy: 'Optimal risk/reward ratio in position sizing'\n  },\n  \n  fibonacciSequence: {\n    sequence: [1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377],\n    ratio: 'Converges to φ as n→∞',\n    applications: [\n      'Architecture: Room dimensions',\n      'Music: Timing intervals', \n      'Nature: Petal counts, branching',\n      'Markets: Retracement levels'\n    ]\n  },\n  \n  platonicSolids: {\n    tetrahedron: { faces: 4, element: 'fire', angles: [60, 60, 60] },\n    cube: { faces: 6, element: 'earth', angles: [90, 90, 90] },\n    octahedron: { faces: 8, element: 'air', angles: [60, 60, 60] },\n    dodecahedron: { faces: 12, element: 'ether/universe', angles: [108, 108, 108] },\n    icosahedron: { faces: 20, element: 'water', angles: [60, 60, 60] }\n  },\n  \n  flowerOfLife: {\n    description: 'Overlapping circles creating flower pattern',\n    circles: 19,\n    significance: 'Contains all platonic solids, blueprint of universe',\n    ancientSites: ['Egyptian temples', 'Chinese temples', 'Turkish sites']\n  }\n};\n\n// ARCHITECTURAL PROPORTION SYSTEMS\nconst PROPORTION_SYSTEMS = {\n  // Classical Orders\n  classicalOrders: {\n    doric: {\n      origin: 'Greece, mainland',\n      proportions: 'Column height = 4-6 base diameters',\n      character: 'Masculine, sturdy, gravity',\n      entablatureRatio: '2:1 (architrave:frieze)'\n    },\n    ionic: {\n      origin: 'Greece, Asia Minor', \n      proportions: 'Column height = 8-9 base diameters',\n      character: 'Feminine, elegant, wisdom',\n      volutes: 'Spiral ornament = Fibonacci spiral'\n    },\n    corinthian: {\n      origin: 'Greece, Corinth',\n      proportions: 'Column height = 10 base diameters',\n      character: 'Youthful, ornate, spirituality',\n      capital: 'Acanthus leaves in golden spiral'\n    }\n  },\n  \n  // Vitruvian Principles\n  vitruvius: {\n    firmitas: 'Structural stability',\n    utilitas: 'Functional utility', \n    venustas: 'Beauty delight',\n    humanProportion: 'Building as body, modules as parts'\n  },\n  \n  // Modular Systems\n  leCorbusier: {\n    name: 'Modulor',\n    basis: 'Human scale + golden ratio',\n    series: ['Red series: 183, 113, 70, 43, 27 cm',\n             'Blue series: 226, 140, 86, 53, 33 cm'],\n    application: 'Unité d\\'Habitation, Chandigarh'\n  },\n  \n  japanese: {\n    kenzan: 'Standard tatami mat (91cm × 182cm)',\n    ken: 'Standard bay width (6 shaku = 1.82m)',\n    proportion: '1:2, 2:3, 1:1 ratios',\n    flexibility: 'Standardized yet adaptable'\n  }\n};\n\n// SPATIAL COGNITION PATTERNS\nconst SPATIAL_COGNITION = {\n  prospectRefuge: {\n    theory: 'Jay Appleton - Humans prefer spaces with overview (prospect) and protection (refuge)',\n    application: 'Window seats, alcoves, elevated porches',\n    evolutionary: 'Savanna survival - see threats, hide from them',\n    marketAnalogy: 'Options: upside exposure (prospect) with defined risk (refuge)'\n  },\n  \n  defensibleSpace: {\n    theory: 'Oscar Newman - Territorial control reduces crime',\n    layers: ['private', 'semi_private', 'semi_public', 'public'],\n    application: 'Front porches, shared courtyards',\n    marketAnalogy: 'Clear ownership boundaries in contracts'\n  },\n  \n  wayfinding: {\n    principles: ['Differentiation', 'Visual access', 'Consistency', 'Simplicity'],\n    lynchElements: ['Paths', 'Edges', 'Districts', 'Nodes', 'Landmarks'],\n    application: 'Airport navigation, hospital layouts',\n    marketAnalogy: 'Clear UI/UX, information hierarchy'\n  }\n};\n\n// URBAN PATTERNS\nconst URBAN_PATTERNS = {\n  fractalCities: {\n    description: 'Cities exhibit self-similarity across scales',\n    evidence: 'Street networks, building sizes, population density',\n    powerLaw: 'Zipf\\'s law - city sizes follow power distribution',\n    marketAnalogy: 'Self-similarity in price action across timeframes'\n  },\n  \n  centralPlaceTheory: {\n    theory: 'Walter Christaller - Hierarchical settlement patterns',\n    hexagons: 'Optimal service area geometry',\n    levels: ['Hamlet', 'Village', 'Town', 'City', 'Regional capital'],\n    marketAnalogy: 'Market centers, exchange locations'\n  },\n  \n  spaceSyntax: {\n    description: 'Network analysis of spatial configuration',\n    measure: 'Integration - how connected is a space to all others',\n    correlation: 'High integration = high pedestrian traffic',\n    application: 'Retail location, public safety'\n  }\n};\n\n// BIOPHILIC DESIGN\nconst BIOPHILIC_PATTERNS = {\n  environmentalFeatures: {\n    naturalLight: 'Circadian rhythm regulation',\n    airFlow: 'Thermal comfort, freshness',\n    water: 'Visual/auditory calm',\n    plants: 'Stress reduction, air quality'\n  },\n  \n  naturalShapes: {\n    biomorphicForms: 'Organic shapes vs geometric',\n    materialConnection: 'Natural materials age gracefully',\n    complexityOrder: 'Richness balanced with coherence'\n  },\n  \n  prospectRefuge: {\n    cocoonSpaces: 'Partial enclosure with visibility',\n    secretPlaces: 'Childhood attachment to hiding spots',\n    mystery: 'Partially obscured views entice exploration'\n  }\n};\n\ninterface ArchitecturalEvent {\n  timestamp: number;\n  buildingId: string;\n  goldenRatioAlignment: number; // 0-1 how well building aligns\n  fibonacciDimensions: number[];\n  spatialIntegration: number; // Space syntax measure\n  prospectScore: number; // 0-1 view quality\n  refugeScore: number; // 0-1 enclosure comfort\n  naturalLightScore: number; // 0-1 daylight access\n  biophilicElements: number; // Count of natural features\n  humanScaleRatio: number; // Building height to street width\n  fractalDimension: number; // Complexity of facade\n}\n\nclass ArchitecturalAdapter implements DomainAdapter<ArchitecturalEvent> {\n  domain = 'soul' as const;\n  name = 'Architectural & Sacred Geometry';\n  isActive = false;\n  lastUpdate = 0;\n  \n  private signalBuffer: UniversalSignal[] = [];\n  private readonly BUFFER_SIZE = 1000;\n  \n  async initialize(): Promise<void> {\n    this.isActive = true;\n    this.lastUpdate = Date.now();\n    console.log('[ArchitecturalAdapter] Initialized - Sacred proportions flowing');\n  }\n  \n  processRawData(event: ArchitecturalEvent): UniversalSignal {\n    const { timestamp, goldenRatioAlignment, prospectScore, refugeScore, spatialIntegration } = event;\n    \n    // Frequency encodes human scale (lower = more human)\n    const frequency = 1 - Math.min(event.humanScaleRatio / 10, 1);\n    \n    // Intensity = beauty metric (golden ratio × biophilia × prospect-refuge)\n    const biophilicIntensity = event.biophilicElements / 10;\n    const intensity = goldenRatioAlignment * 0.4 + biophilicIntensity * 0.3 + \n                     (prospectScore + refugeScore) / 2 * 0.3;\n    \n    // Phase encodes spatial integration (connectedness)\n    const phase = spatialIntegration * Math.PI;\n    \n    const harmonics = [\n      goldenRatioAlignment,\n      prospectScore,\n      refugeScore,\n      event.naturalLightScore,\n      biophilicIntensity,\n      event.fractalDimension / 3\n    ];\n    \n    const signal: UniversalSignal = {\n      domain: 'soul',\n      timestamp,\n      intensity,\n      frequency,\n      phase,\n      harmonics,\n      rawData: [goldenRatioAlignment, prospectScore, refugeScore, spatialIntegration, event.fractalDimension]\n    };\n    \n    this.signalBuffer.push(signal);\n    if (this.signalBuffer.length > this.BUFFER_SIZE) {\n      this.signalBuffer.shift();\n    }\n    \n    this.lastUpdate = timestamp;\n    return signal;\n  }\n  \n  extractSignature(signals: UniversalSignal[]): DomainSignature {\n    if (signals.length === 0) {\n      return this.getDefaultSignature();\n    }\n    \n    const recent = signals.slice(-100);\n    \n    const avgGolden = recent.reduce((sum, s) => sum + s.rawData[0], 0) / recent.length;\n    const avgProspect = recent.reduce((sum, s) => sum + s.rawData[1], 0) / recent.length;\n    const avgRefuge = recent.reduce((sum, s) => sum + s.rawData[2], 0) / recent.length;\n    const avgIntegration = recent.reduce((sum, s) => sum + s.rawData[3], 0) / recent.length;\n    const avgFractal = recent.reduce((sum, s) => sum + s.rawData[4], 0) / recent.length;\n    \n    const quadrantProfile = {\n      aggressive: avgProspect > 0.7 ? 0.8 : 0.2, // High prospect = exposure\n      defensive: avgRefuge > 0.7 ? 0.8 : 0.2, // High refuge = protection\n      tactical: avgFractal > 2 ? 0.6 : 0.3, // Complex facades\n      strategic: avgGolden > 0.8 ? 0.8 : 0.2 // Strong proportions\n    };\n    \n    const temporalFlow = {\n      early: avgIntegration < 0.3 ? 0.8 : 0.2, // Isolated spaces\n      mid: avgIntegration >= 0.3 && avgIntegration < 0.7 ? 0.7 : 0.2,\n      late: avgIntegration >= 0.7 ? 0.8 : 0.2 // Well-integrated\n    };\n    \n    return {\n      domain: 'soul',\n      quadrantProfile,\n      temporalFlow,\n      intensity: (avgGolden + avgProspect + avgRefuge) / 3,\n      momentum: avgIntegration > 0.5 ? 1 : -1,\n      volatility: 1 - avgRefuge,\n      dominantFrequency: 1 - Math.min(recent.reduce((s, sig) => s + sig.frequency, 0) / recent.length, 1),\n      harmonicResonance: avgGolden,\n      phaseAlignment: avgIntegration,\n      extractedAt: Date.now()\n    };\n  }\n  \n  private getDefaultSignature(): DomainSignature {\n    return {\n      domain: 'soul',\n      quadrantProfile: { aggressive: 0.25, defensive: 0.25, tactical: 0.25, strategic: 0.25 },\n      temporalFlow: { early: 0.33, mid: 0.34, late: 0.33 },\n      intensity: 0.6,\n      momentum: 0,\n      volatility: 0.4,\n      dominantFrequency: 0.5,\n      harmonicResonance: 0.8,\n      phaseAlignment: 0.5,\n      extractedAt: Date.now()\n    };\n  }\n  \n  // Calculate golden ratio proportions\n  calculateGoldenDimensions(base: number): { width: number; height: number } {\n    const phi = SACRED_GEOMETRY.goldenRatio.value;\n    return {\n      width: base,\n      height: base * phi\n    };\n  }\n  \n  // Assess building using prospect-refuge theory\n  assessProspectRefuge(floor: number, totalFloors: number, windowArea: number, wallArea: number): {\n    prospect: number;\n    refuge: number;\n  } {\n    const prospect = (floor / totalFloors) * (windowArea / (windowArea + wallArea));\n    const refuge = 1 - prospect + 0.2; // Some refuge even at top\n    return { prospect: Math.min(prospect, 1), refuge: Math.min(refuge, 1) };\n  }\n  \n  // Generate Fibonacci room sequence\n  generateFibonacciRooms(count: number): number[] {\n    const seq = SACRED_GEOMETRY.fibonacciSequence.sequence;\n    return seq.slice(0, count).map(n => n * 0.3); // Scale to meters\n  }\n}\n\nexport const architecturalAdapter = new ArchitecturalAdapter();\nexport { SACRED_GEOMETRY, PROPORTION_SYSTEMS, SPATIAL_COGNITION, URBAN_PATTERNS, BIOPHILIC_PATTERNS };\nexport type { ArchitecturalEvent };\n";export{n as default};
