import{u as e,a as s,r as a,b as t,s as r,j as i,H as l,L as c,B as n,A as d,P as o,G as m,d as x,S as h,T as u,e as p,f as j,g as f,h as g,i as b,k as N,l as v,m as w,n as y,o as k}from"./index-DBmMOexX.js";import{C as _}from"./calendar-BmFxhfn9.js";import{C}from"./circle-play-BXt17Dwa.js";const P=()=>{const{user:P,isLoading:S}=e(),$=s(),[z,D]=a.useState([]),[F,L]=a.useState(!0),[U,q]=a.useState(null),[B,E]=a.useState(!1),W=["k","q","r","b","n","p"];a.useEffect(()=>{S||P||($("/"),t.error("Please sign in to view your palettes"))},[P,S,$]),a.useEffect(()=>{P&&A()},[P]);const A=async()=>{L(!0);try{const{data:e,error:s}=await r.from("saved_palettes").select("*").order("created_at",{ascending:!1});if(s)throw s;D((e||[]).map(e=>({...e,white_colors:e.white_colors,black_colors:e.black_colors})))}catch(e){t.error("Failed to load palettes")}finally{L(!1)}};return S?i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(l,{}),i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx(c,{className:"h-8 w-8 animate-spin text-primary"})})]}):i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(l,{}),i.jsx("main",{className:"container mx-auto px-4 py-12",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-8",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>$("/"),children:[i.jsx(d,{className:"h-4 w-4 mr-2"}),"Return"]}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-display font-bold flex items-center gap-3",children:[i.jsx(o,{className:"h-7 w-7 text-primary"}),"My Palettes"]}),i.jsx("p",{className:"text-muted-foreground text-sm mt-1 font-serif",children:"Your saved color palettes"})]})]})}),F?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx(c,{className:"h-8 w-8 animate-spin text-primary"})}):0===z.length?i.jsxs("div",{className:"text-center py-20 space-y-4",children:[i.jsx("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mx-auto",children:i.jsx(o,{className:"h-10 w-10 text-muted-foreground"})}),i.jsx("h2",{className:"text-xl font-display font-semibold",children:"No palettes yet"}),i.jsx("p",{className:"text-muted-foreground font-serif max-w-md mx-auto",children:"Create a custom palette on the home page and save it to see it here."}),i.jsx(n,{onClick:()=>$("/"),className:"mt-4",children:"Create Your First Palette"})]}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:z.map(e=>{return i.jsxs("div",{className:"p-5 rounded-lg border border-border/50 bg-card hover:border-primary/30 transition-all duration-300 group",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-display font-semibold text-lg flex items-center gap-2",children:[e.name,e.is_public?i.jsx(m,{className:"h-4 w-4 text-primary"}):i.jsx(x,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[i.jsx(_,{className:"h-3 w-3"}),(s=e.created_at,new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:e.is_public?"Public":"Private"}),i.jsx(h,{checked:e.is_public,onCheckedChange:()=>(async(e,s)=>{try{const{error:a}=await r.from("saved_palettes").update({is_public:!s}).eq("id",e);if(a)throw a;D(a=>a.map(a=>a.id===e?{...a,is_public:!s}:a)),t.success(s?"Palette is now private":"Palette is now public!")}catch(a){t.error("Failed to update palette visibility")}})(e.id,e.is_public)})]})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-[10px] text-muted-foreground w-10",children:"White"}),i.jsx("div",{className:"flex gap-1",children:W.map(s=>i.jsx("div",{className:"w-7 h-7 rounded-sm shadow-sm ring-1 ring-black/10",style:{backgroundColor:e.white_colors[s]},title:`White ${s.toUpperCase()}`},`w-${s}`))})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-[10px] text-muted-foreground w-10",children:"Black"}),i.jsx("div",{className:"flex gap-1",children:W.map(s=>i.jsx("div",{className:"w-7 h-7 rounded-sm shadow-sm ring-1 ring-black/10",style:{backgroundColor:e.black_colors[s]},title:`Black ${s.toUpperCase()}`},`b-${s}`))})]})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-border/50",children:[i.jsxs(n,{size:"sm",onClick:()=>(e=>{W.forEach(s=>{y("w",s,e.white_colors[s]),y("b",s,e.black_colors[s])}),k("custom"),t.success(`"${e.name}" loaded!`,{description:"Navigate home to use it in your visualization."}),$("/")})(e),className:"flex-1 gap-2",children:[i.jsx(C,{className:"h-4 w-4"}),"Load & Use"]}),i.jsx(n,{size:"sm",variant:"outline",onClick:()=>q(e.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:i.jsx(u,{className:"h-4 w-4"})})]})]},e.id);var s})})]})}),i.jsx(p,{open:!!U,onOpenChange:()=>q(null),children:i.jsxs(j,{children:[i.jsxs(f,{children:[i.jsx(g,{children:"Delete Palette"}),i.jsx(b,{children:"Are you sure you want to delete this palette? This action cannot be undone."})]}),i.jsxs(N,{children:[i.jsx(v,{disabled:B,children:"Cancel"}),i.jsx(w,{onClick:async()=>{if(U){E(!0);try{const{error:e}=await r.from("saved_palettes").delete().eq("id",U);if(e)throw e;D(e=>e.filter(e=>e.id!==U)),t.success("Palette deleted")}catch(e){t.error("Failed to delete palette")}finally{E(!1),q(null)}}},disabled:B,className:"bg-destructive hover:bg-destructive/90",children:B?i.jsx(c,{className:"h-4 w-4 animate-spin"}):"Delete"})]})]})})]})};export{P as default};
