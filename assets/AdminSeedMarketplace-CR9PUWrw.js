import{d6 as e,d7 as t,cp as s,a as n,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as x,C as f,x as h,D as p,B as g,A as v,p as w,t as j,cN as y,bC as b,S as N,a6 as z,P as C,y as M,bG as L,T as q,aq as _,z as D,cU as B,aj as S,aT as G,ca as E,b as A,d8 as W}from"./index-DqGlL_-P.js";!function(){const e=I,t=H();for(;;)try{if(929445===-parseInt(e(371))/1*(parseInt(e(399))/2)+-parseInt(e(366))/3*(parseInt(e(316))/4)+parseInt(e(498))/5+-parseInt(e(501))/6+parseInt(e(359))/7+parseInt(e(328))/8+-parseInt(e(407))/9*(-parseInt(e(290))/10))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const k=function(){const e=I,t={DJZJJ:function(e,t){return e!==t}};t[e(489)]="tMpGy";const s=t;let n=!0;return function(t,r){const a=e,i={};i[a(345)]="left";const o=i,c=n?function(){const e=a;if(r){if(s.DJZJJ(e(280),s[e(489)])){const s=r[e(388)](t,arguments);return r=null,s}_0x1d2923[e(390)]=o[e(345)],_0x4bea7f[e(443)](_0x106d6d,_0x2070d5,_0x371f9b),_0x161d5a+=_0x29f42d[e(309)+"t"](_0x430c9d).width+_0x867a17}}:function(){};return n=!1,c}}()(void 0,function(){const e=I;return k.toString()[e(441)](e(398)+"+$").toString()[e(452)+"r"](k)[e(441)](e(398)+"+$")});k();const P=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[I(388)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function I(e,t){e-=276;const s=H();let n=s[e];if(void 0===I.oejLAe){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};I.pBuLSH=r,I.lkgUXB={},I.oejLAe=!0}const a=e+s[0],i=I.lkgUXB[a];if(i)n=i;else{const e=function(e){this.mGwfqi=e,this.qMhBwb=[1,0,0],this.qMBIjq=function(){return"newState"},this.DxpFMg="\\w+ *\\(\\) *{\\w+ *",this.gKxNNt="['|\"].+['|\"];? *}"};e.prototype.lEWSyb=function(){const e=new RegExp(this.DxpFMg+this.gKxNNt).test(this.qMBIjq.toString())?--this.qMhBwb[1]:--this.qMhBwb[0];return this.CfcYNQ(e)},e.prototype.CfcYNQ=function(e){return Boolean(~e)?this.NGLcPs(this.mGwfqi):e},e.prototype.NGLcPs=function(e){for(let t=0,s=this.qMhBwb.length;t<s;t++)this.qMhBwb.push(Math.round(Math.random())),s=this.qMhBwb.length;return e(this.qMhBwb[0])},new e(I).lEWSyb(),n=I.pBuLSH(n),I.lkgUXB[a]=n}return n}P(void 0,function(){const e=I,t={xDCTM:"zUKmn",mAXJf:function(e,t){return e(t)},NrwgJ:function(e,t){return e+t},skogG:e(291)+"nction() ",FmmeX:e(356),jLOmu:e(414),XmzZF:function(e,t){return e<t}};let s;try{if(t[e(348)]==t[e(348)]){s=t[e(429)](Function,t[e(462)](t.skogG,'{}.constructor("retu'+e(343)+" )")+");")()}else _0x18499a[e(443)](_0x405ead,_0x4cafb7,_0xbd00c8)}catch(a){if("oPlZe"!==e(283)){if(_0x104653){const t=_0x8538d6[e(388)](_0x20c337,arguments);return _0x54588b=null,t}}else s=window}const n=s.console=s[e(353)]||{},r=[t[e(331)],e(490),e(410),e(295),t[e(377)],e(310),e(422)];for(let i=0;t.XmzZF(i,r[e(320)]);i++){const t=P.constructor.prototype.bind(P),s=r[i],a=n[s]||t;t[e(477)]=P[e(439)](P),t[e(301)]=a[e(301)][e(439)](a),n[s]=t}})();async function Z(){const e=I;document[e(355)]&&document[e(355)].ready&&await document.fonts[e(427)],await new Promise(e=>setTimeout(e,150))}function U(s,n){const r=I,a={qdVgW:function(e,t){return e+t},cSmwd:function(e,t){return e-t},EzzHw:function(e,t){return e<t},EBfcy:function(e,t){return e*t},UATPO:function(e,t){return e>t},SdRfP:function(e,t,s){return e(t,s)},VPAqc:function(e,t){return e-t},URyYi:function(e,t){return e*t},hmSkc:r(485)},i=n/8,o=.02*n,c=a.qdVgW(n,2*o);let l=r(300)+r(483)+"ww.w3.org/"+r(375)+r(430)+c+r(289)+c+(r(425)+r(447))+c+" "+c+'">';l+=r(347)+r(393)+r(420)+c+r(289)+c+r(293)+e[r(299)]+r(372);for(let u=0;u<8;u++){const n=a[r(426)](7,u);for(let c=0;a[r(411)](c,8);c++){const d=s[n][c],m=d[r(476)]?e.light:e[r(360)],x=o+a[r(288)](c,i),f=o+u*i;if(l+=r(307)+x+'" y="'+f+r(465)+i+r(289)+i+r(293)+m+r(372),a[r(433)](d.visits[r(320)],0)){const e=a[r(288)](i,.08),s=[];for(const i of d.visits){const e=a[r(338)](t,i[r(502)],i[r(329)]);!s[r(448)](e)&&s.push(e)}const n=Math[r(464)](s[r(320)],6),o=[];let c=a[r(466)](i,a[r(469)](e,2));const u=.7*c/n;for(let t=0;t<n;t++){const e={};if(e.color=s[t],e[r(389)]=c,o.push(e),c-=u,c<a[r(288)](i,.1))break}for(const t of o){const e=(i-t.layerSize)/2;l+=r(307)+(x+e)+'" y="'+(f+e)+r(465)+t[r(389)]+r(289)+t.layerSize+r(293)+t[r(329)]+'"/>'}}}}return l+=a.hmSkc,l}function H(){const e=["mtiXmZq1ndrZELjXB3y","y29SB3i","y29T","rM1TzvG","i2e4yti5zq","EwnAwxq","ALvpqMi","Bg9HzcbtvKC","sur0yuS","y3jVC3npCMLNAq","u2rszLa","vw5RBM93BG","DM1QCxa","sgvqsxK","y2fUDMfZ","CM4GDgHPCYiPka","qMTMENG","svjWuMm","iZfbmueXqq","phjLy3qGEd0Ima","Eerdve0","iZi5mJuYna","rwL4A2y","BgvMDa","shLwAMe","y29UC29Szq","sMjLvwm","zM9UDhm","Bg9N","y3jLyxrLrwXLBq","iIb5psi","mta1mJmYmZn5rgDKBwW","zgfYAW","t2DnCxu","ChjVDg90ExbL","zMLSBa","CMDIysGYntuSia","C3rYB2TLu3r5Ba","ndi2mJe5CNrJuwzf","DhLWzq","EvnfCvC","Dg9eyxrHvvjm","B25SB2fK","otu1mJD1z3bUuvu","iI8+","vgLTzxmGtMv3ia","C2nHBgu","mJaWmc9ZDMCIia","y3rPB25mzxzLBa","AKXpBxu","Bgvnu1q","Dg9vChbLCKnHCW","CunLAwq","C2f2zq","idiWChGGj0nVCG","C3bSAxq","C3jJ","B3bVCeu","zKH6uKO","uhHkuKC","yxbWBhK","Bgf5zxjtAxPL","Dgv4DefSAwDU","ywXS","BgLNAhq","iIb5psiWiIb3Aq","AgLUz0vUywjSzq","uxztCvG","z2v0q29UDgv4Da","CM91BMrszwn0","kcGOlISPkYKRkq","mZHquuLhvgS","C3vIC3rYAw5N","Eg1So2nOyxjZzq","nJaWideZChGGjW","zw50","iZbbmeeWqq","qKP1yNC","tLqG4PMA","mtm3n3nrzNfuvq","iZq0ndaZyW","ndaWideWChGGjW","Aw5MBW","rxP6shC","BwvZlcbZzxjPzG","refKzgW","zxHJzxb0Aw9U","C09Wrwy","B25LCNjVCG","zw9Yz2LHlcbZzq","mc45nsK","y1LnA2K","zhrOpsi","y3rvuKW","DhjHy2u","vhzXsK0","AgvPz2H0","iIb2Awv3qM94pq","y1nTD2q","CMvHzhK","ELjQv1G","BufysMy","D2LKDgG9iG","yw5VBNLTB3vZ","ANfxD1G","vufuue8","CMPeDNu","tezZru4","wvDjq1q","t015rMq","mJu1lcaYntuSia","yMLUza","CKvHzfi","C2vHCMnO","vhLvtLm","zMLSBfrLEhq","BwfYz2LU","rMfPBgvKihrVia","ndaWideXChGGjW","iJaGmca","Aw5JBhvKzxm","u0PrqMS","y0LTtge","lI4U","y29UC3rYDwn0BW","4PMuievoifbftLnf","AxrHBgLJiduWma","uM9Tyw4NlcbuAq","ihzZia","r2PSEeG","i0zbrKfgqq","nJaWidi0ChGGjW","ntaWideXChGGjW","zKP6zha","tNj3z0O","AMH5rLO","BwLU","iIb3Awr0Ad0I","vLbbCwm","Dgv4DejHC2vSAq","s1LVCxC","vvj5wwK","tezXy2i","qwXhC2y","Bw92zvrV","twL4rw4","zhjHD0LTywDL","DhjHBNnWyxjLBG","AxnmAwDODa","x19WCM90B19F","sw50zxiNlcbZyq","i0zerKngqG","icdIGkiGia","zM9UDa","wLLmB0K","psjODhrWoI8VDW","zuPXDu4","pc9ZDMC+","AgvdyLa","ueryvu8","CMvZDg9Yzq","qvPru0C","D2fYBG","ide4ChGGj0nVCG","BNmTC2vYAwy","D2jxEfG","CMLM","CMvKDwnL","yMXHy2S","Bw9Yyw50jYWGrW","odm3nZm1me13yuvAqW","vMDhvKq","qLvQzwG","mZu4nJy2ohjVCNLHuG","CgLLy2u","uwTsv3a","zMLSBfn0EwXL","wvriqM4","yxjJ","sxjSwgO","zw5Wzw5Zzw50lG","ntaWideYChGGjW","Bw92zxm","vgDUswO","ru4Guevou0vova","y3jLyxrLt2jQzq","B1bSwMu","D2LKDgG","yMTeEMK","BgLUzvDPzhrO","zgf0zq","rujMy3K","iIbOzwLNAhq9iG","mZiYnJb6rwDuC0q","CMv0DxjUicHMDq","u2vLvNq","iIbMAwXSpsi","wwPnB08","zxjYB3i","zKPTv08","C3rYB2TL","pZ8/pY4/pY4/pW","yM9YzgvY","phn2zYb4BwXUCW","Dg9tDhjPBMC","CgLZzwG","CM1lyw8","Bg53AK0","rensywu","yKf2sgy","phjLy3qGEd0I","yLruuM0","BwvHC3vYzvrLEa","DgfIBgu","zxzLBNq","Aw1Hz2uVC3zNkW","CeH0zwe","iZC4nZe2yW","yMvNAw5qyxrO","ntjxALLKvgS","uM9Tyw4NlcbZzq","s3bcrLa","qMXHy2S","BgvUz3rO","CNHivLy","y2vUDgvY","EMDrwMO","Aw1Hz2vtBw9VDa","CgvUC2vUDc5JBW","q2LUEMvSjYWGjW","BgLUzvrV"];return(H=function(){return e})()}async function K(e){const t=I,s={};s[t(395)]="qrcode",s[t(318)]=t(346);const n=s,r=(await import(n[t(395)])).default,a={};a[t(360)]=e?t(458):n.KpBFP,a[t(392)]=t(475)+"t";const i={width:200};return i[t(444)]=1,i.color=a,i["errorCorre"+t(376)]="M",r[t(369)]("https://en"+t(325)+"m",i)}async function Y(){const e=I,t={};t[e(432)]=function(e,t){return e+t},t[e(471)]=e(473);const n=t;return new Promise((t,r)=>{const a=e,i={opopE:function(e,t){return n[I(432)](e,t)}};if(a(437)!==n.AlGsf){const e=new Image;e[a(337)+"n"]=a(431),e[a(370)]=()=>t(e),e.onerror=r,e[a(384)]=s}else{const e=(_0x23daeb-_0x5a384a[a(389)])/2;_0x450c7c+=a(307)+(_0x2540fc+e)+a(358)+i[a(385)](_0x470c95,e)+'" width="'+_0x16124e[a(389)]+a(289)+_0x3deb9d[a(389)]+a(293)+_0x3b157b.color+'"/>'}})}async function T(e,t,s={}){const n=I,r={fHzRJ:n(480),LFqcb:"canvas",jhyFZ:function(e,t){return e*t},pHtea:function(e,t){return e(t)},SJQBk:"(((.+)+)+)+$",HePIy:function(e){return e()},SGSmy:function(e,t,s){return e(t,s)},PJzDx:function(e,t){return e+t},ZQZdq:function(e,t){return e*t},MoLbX:function(e,t){return e+t},PDXUO:function(e,t){return e+t},heCbP:function(e,t){return e*t},eJquN:"#fafaf9",jgKWw:n(314),DAddl:n(332),TvqJM:"White",cDQqg:n(319),eanIj:n(456),ycZYt:function(e,t){return e+t},YTHBn:function(e,t){return e/t},GqcrU:n(459)+n(326)+"Times New "+n(317)+n(494),cYMki:n(351),YjMoO:function(e,t){return e+t},KYoqw:"4|3|0|2|1",HXtqd:n(322),razXi:function(e,t){return e/t},BJubw:function(e,t){return e+t},rEadR:function(e,t){return e===t},tzCmw:n(352),zgQZj:function(e,t){return e+t},jUOBb:function(e,t){return e>t},fJmWO:function(e,t){return e*t},PxJRG:"vUDCe",YWICT:n(303),qCeid:"gQlRV",lnwjM:function(e,t){return e>=t},sOpEf:function(e,t){return e!==t},Eixkf:n(428),TyUNS:function(e,t){return e-t},rxHVV:function(e,t){return e-t},ZYLoI:function(e,t){return e-t},VgGVD:function(e,t){return e/t},cImLa:function(e,t){return e(t)},rSiYL:function(e,t){return e-t},LFsEN:function(e,t){return e-t},Bkfzx:n(364)+n(438)+n(418),fJzdp:function(e,t){return e+t},ZgStz:"alphabetic",jeKhG:n(402)+n(478)+n(492),hXFoW:n(281),QkRWp:n(446)+"Inter', sa"+n(492),GjlxH:function(e,t){return e-t},Julxj:function(e,t){return e-t}};await r[n(341)](Z);const{boardSize:a=600,darkMode:i=!1,withWatermark:o=!1,title:c}=s,l=r.SGSmy(U,e,a),u=.02*a,d=r.PJzDx(a,r.ZQZdq(u,2)),m=await async function(e,t,s){const n=I,r={bAvHf:function(e,t){return e(t)},piseh:n(445)+n(335),IrlXj:function(e,t){return e*t}};return new Promise((a,i)=>{const o=n,c={vmjqp:function(e,t){return e*t},ySEqW:function(e,t){return r[I(276)](e,t)}},l=new Image,u={};u[o(367)]=o(312)+o(401)+"t=utf-8";const d=new Blob([e],u),m=URL[o(282)+o(421)](d);l[o(370)]=()=>{const e=o,n=document["createElem"+e(403)](e(342));n[e(284)]=c[e(340)](t,5),n.height=c[e(368)](s,5);const r=n[e(396)]("2d");r[e(374)](5,5),r[e(474)](l,0,0,t,s),URL.revokeObjectURL(m),a(n)},l[o(416)]=()=>{const e=o;URL["revokeObje"+e(421)](m),r[e(306)](i,new Error(r[e(302)]))},l[o(384)]=m})}(l,d,d),x=60,f=d+r.jhyFZ(x,2),h=r.MoLbX(r[n(487)](d,220),60)+r[n(486)](x,2),p=document[n(357)+n(403)]("canvas");p[n(284)]=r.ZQZdq(f,5),p.height=5*h;const g=p[n(396)]("2d");g[n(374)](5,5),g[n(324)+n(394)+"d"]=!0,g[n(324)+"hingQuality"]="high",g[n(504)]=n(i?404:479),g.fillRect(0,0,f,h),g[n(474)](m,0,0,m[n(284)],m.height,x,x,d,d);const v=x+d+28;g[n(365)+"e"]=i?n(349):"#e7e5e4",g[n(286)]=1,g[n(315)](),g[n(472)](x,v),g[n(327)](f-x,v),g.stroke();const w=i?r[n(484)]:n(349),j=i?n(332):r.jgKWw,y=i?n(314):"#a8a29e",b=i?r.jgKWw:r[n(413)],N=f/2;let z=r[n(487)](v,55);const C=t.white||r[n(423)],M=t[n(496)]||r.cDQqg;g[n(467)+"ne"]="middle",g[n(481)]=n(459)+n(326)+n(373)+n(317)+n(494);const L=g[n(309)+"t"](C)[n(284)],q=g[n(309)+"t"](M)[n(284)];g[n(481)]=n(454)+n(382)+"morant', G"+n(417)+n(494);const _=r.eanIj,D=g[n(309)+"t"](_)[n(284)],B=r[n(333)](L,D)+q,S=N-r[n(505)](B,2);if(g[n(481)]=r.GqcrU,g[n(504)]=w,g.textAlign=r[n(419)],g[n(443)](C,S,z),g[n(481)]=n(454)+n(382)+"morant', G"+n(417)+n(494),g[n(504)]=b,g[n(443)](_,S+L,z),g[n(481)]="600 24px '"+n(326)+"Times New "+n(317)+"rif",g[n(504)]=w,g.fillText(M,r[n(294)](S+L,D),z),z+=36,t.event&&"Unknown"!==t.event){const e=r[n(468)][n(383)]("|");let s=0;for(;;){switch(e[s++]){case"0":g[n(390)]=n(322);continue;case"1":z+=32;continue;case"2":g[n(443)](t[n(311)],N,z);continue;case"3":g[n(481)]="italic 500"+n(491)+n(497)+"eorgia, se"+n(494);continue;case"4":g.fillStyle=j;continue}break}}const G=c,E=t[n(287)]||"";if(G||E){g[n(504)]=y,g[n(481)]=n(278)+n(478)+"ns-serif",g[n(390)]=r.HXtqd;let e="";G?(e=G[n(379)+"e"](),E&&(e+=r[n(333)](n(480),E))):e=E;const t=2,s=e[n(383)](""),a=s.reduce((e,t)=>e+g[n(309)+"t"](t)[n(284)],0),i=(s.length-1)*t;let o=N-r.razXi(r[n(405)](a,i),2);for(const c of s)r[n(440)](r.tzCmw,n(354))?(_0x39aedf=_0x2b40e7.toUpperCase(),_0x406bf5&&(_0x4c8cfe+=r[n(386)]+_0x32c48e)):(g[n(390)]=n(351),g.fillText(c,o,z),o+=r[n(323)](g[n(309)+"t"](c)[n(284)],t));z+=28}if(t.moves&&r[n(334)](t[n(279)][n(320)],0)){g[n(504)]=y,g.font=n(409)+n(373)+n(455)+n(412),g[n(390)]=n(322);const e=t[n(279)].join(" "),s=e[n(320)]>400?r[n(333)](e[n(400)](0,400),n(451)):e,a=f-r[n(296)](x,2)-40,i=s.split(" ");let o="",c=z;const l=15,u=4;let d=0;for(const t of i)if(n(336)===r[n(387)])_0x1729b1=_0x2b1f6b;else{const e=o+(o?" ":"")+t;if(g[n(309)+"t"](e)[n(284)]>a&&o)if(r[n(436)]!==r[n(380)]){if(g[n(443)](o,N,c),o=t,c+=l,d++,r[n(304)](d,u))break}else{const e=_0x5c58f7[n(357)+n(403)](r[n(470)]);e[n(284)]=r[n(463)](_0x4ef6d8,_0x4c958),e[n(424)]=_0x2da972*_0x306303;const t=e[n(396)]("2d");t.scale(_0x2d3e6d,_0x5ea471),t[n(474)](_0x46c671,0,0,_0x59e937,_0x5db011),_0x2cdf79["revokeObje"+n(421)](_0x254989),r[n(313)](_0x1ed5f9,e)}else o=e}if(o&&d<u)if(r[n(415)](r.Eixkf,r[n(350)])){const e=_0x444ffc.constructor[n(362)][n(439)](_0x5774a5),t=_0x54409a[_0x2e0b31],s=_0x490548[t]||e;e.__proto__=_0x49d3f3[n(439)](_0x3ae8bf),e[n(301)]=s.toString[n(439)](s),_0x38f08f[t]=e}else g.fillText(o,N,c)}const A=r[n(442)](r[n(321)](h,x),20);g[n(504)]=y,g[n(481)]=n(460)+n(478)+"ns-serif",g[n(390)]="center";const W=(n(453)+n(406)).split(""),k=W[n(495)]((e,t)=>e+g[n(309)+"t"](t)[n(284)],0)+4*r[n(482)](W.length,1);let P=N-r[n(499)](k,2);for(const I of W)g[n(390)]=r[n(419)],g.fillText(I,P,A),P+=g.measureText(I)[n(284)]+4;if(o){if(!r[n(415)](n(292),n(434)))return _0x3daae9[n(301)]()[n(441)](n(398)+"+$")[n(301)]()[n(452)+"r"](_0x388e43)[n(441)](hwnVDx[n(449)]);{const[e,t]=await Promise[n(391)]([r[n(450)](K,!1),r[n(341)](Y)]),s=220,a=65,i=x+d-s-12,o=r.rSiYL(r[n(435)](x+d,a),12);g[n(504)]=r[n(344)],g[n(315)](),g[n(397)](i,o,s,a,6),g[n(363)](),g.strokeStyle="#e7e5e4",g[n(286)]=1,g[n(297)]();const c=48,l=i+12,u=r[n(461)](o,(a-c)/2);g[n(381)](),g[n(315)](),g[n(506)](l+c/2,u+c/2,c/2,0,r[n(463)](Math.PI,2)),g.clip(),g[n(474)](t,l,u,c,c),g[n(488)]();const m=r[n(294)](l,c)+10;g[n(390)]=r.cYMki,g[n(467)+"ne"]=r.ZgStz,g.fillStyle=n(408),g.font=r.jeKhG,g[n(443)](r.hXFoW,m,o+28),g.fillStyle=n(314),g[n(481)]=r[n(503)],g.fillText(n(277)+n(330),m,o+46);const f=50,h=r[n(457)](i+s-f,10),p=r[n(405)](o,r[n(505)](r.Julxj(a,f),2)),v=new Image;await new Promise(t=>{const s=n;v[s(370)]=()=>{g[s(474)](v,h,p,f,f),t()},v[s(416)]=()=>t(),v[s(384)]=e})}}return p}const O=E.filter(e=>"custom"!==e.id);const J=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const V=()=>{const e=n(),{user:t,isLoading:s}=r(),[k,P]=a.useState(null),[I,Z]=a.useState(!1),[U,H]=a.useState(0),[K,Y]=a.useState(""),[V,X]=a.useState([]),[F,$]=a.useState(50),[R,Q]=a.useState(!0),[ee,te]=a.useState(!1),[se,ne]=a.useState(null);a.useEffect(()=>{s||(async()=>{if(!t)return void P(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});P(!0===e)})()},[t,s]);const re=a.useCallback(async(e,s,n,r,a=!0)=>{try{const m=i(e.pgn),x=a?O[Math.floor(Math.random()*O.length)]:O[n%O.length],f=function(e,t){const s=E.find(e=>e.id===t)||E[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?s.white:s.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,x.id);o(x.id);const h=await T(f,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:s}),p=await new Promise((e,t)=>{h.toBlob(s=>{s?e(s):t(new Error("Failed to create blob"))},"image/png",.95)}),g=Date.now(),v=`${t.id}/${g}-${s.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(v,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:j}=c.storage.from("visualizations").getPublicUrl(v),y=l(e.pgn),b={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:f,totalMoves:m.totalMoves,visualizationState:{paletteId:x.id,paletteName:x.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?n+1:void 0,gameHash:y}},{data:N,error:z}=await c.from("saved_visualizations").insert({user_id:t.id,title:s,pgn:e.pgn,game_data:b,image_path:j.publicUrl}).select().single();if(z)throw z;const C=function(e,t){if(e){const e=99,s=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+s}return 199+Math.floor(600*Math.random())}(r,n),{data:M,error:L}=await u(N.id,C);if(L)throw L;const q=function(e,t){const s=e?1.5:1,n=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*s+5*n),hdDownloads:Math.floor(3*Math.random()*s),gifDownloads:Math.floor(2*Math.random()*s),tradeCount:e?Math.floor(2*Math.random()):0}}(r,n);for(let e=0;e<q.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:N.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const _=d(e.pgn),D=a?"premium":"genesis";return{title:s,success:!0,visualizationId:N.id,listingId:null==M?void 0:M.id,isExemplar:r,paletteId:x.id,paletteName:x.name,gameHash:y,tier:D,openingName:null==_?void 0:_.fullName}}catch(m){return{title:s,success:!1,error:m.message,isExemplar:r}}},[t]),ae=V.filter(e=>e.success).length,ie=V.filter(e=>!e.success).length;return V.filter(e=>e.success&&e.isExemplar).length,s||null===k?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(x,{className:"h-8 w-8 animate-spin text-primary"})}):t&&k?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(g,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(v,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(f,{children:[m.jsx(w,{children:m.jsxs(j,{className:"flex items-center gap-3",children:[m.jsx(y,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(b,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",F," visions: ",Math.min(25,F)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,F-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:F,onChange:e=>$(Number(e.target.value)),disabled:I,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(N,{id:"use-official-palettes",checked:R,onCheckedChange:Q,disabled:I}),m.jsxs(z,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(C,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),R&&m.jsxs(M,{variant:"secondary",className:"text-xs",children:[O.length," palettes"]})]})]}),m.jsx(g,{onClick:async()=>{if(!t)return void A.error("You must be logged in as the CEO account");Z(!0),X([]),H(0);const e=[],s=W.slice(0,Math.min(F,W.length)),n=[];for(let t=0;t<F;t++){const e=t%s.length,r=t<25,a=J[t]||`Vision ${t+1}`;n.push({game:s[e],title:a,isExemplar:r})}for(let t=0;t<n.length;t++){const{game:s,title:r,isExemplar:a}=n[t];Y(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${n.length})`);const i=await re(s,r,t,a,R);e.push(i),X([...e]),H((t+1)/n.length*100),await new Promise(e=>setTimeout(e,300))}Z(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?A.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):A.error("Failed to create any visions")},disabled:I||!t,className:"w-full",size:"lg",children:I?m.jsxs(m.Fragment,{children:[m.jsx(x,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(L,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(q,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(g,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),ne(null);try{const{data:e,error:s}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(s)throw s;if(!e||0===e.length)return A.info("No visions to delete"),void te(!1);const n=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",n);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=n.filter(e=>!i.has(e)),l=n.filter(e=>i.has(e));if(0===o.length)return A.info("All your visions have accrued natural value - none deleted"),ne({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);ne({deleted:o.length,preserved:l.length}),A.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){A.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||I||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(x,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(q,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),se&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",se.deleted," deleted"]}),se.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",se.preserved," preserved (has value)"]})]})})]}),I&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(_,{value:U,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:K})]}),V.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(D,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(B,{className:"h-4 w-4"}),V.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(S,{className:"h-4 w-4"}),V.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:V.map((e,t)=>m.jsxs(G.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(B,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(S,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(M,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(M,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(C,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(f,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(g,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{V as default};
