const n="import { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { TrendingUp, TrendingDown, Minus, Trophy, Crown } from 'lucide-react';\nimport { getRatingTier } from '@/lib/chess/eloCalculator';\nimport { useEnPensentPatterns } from '@/hooks/useEnPensentPatterns';\nimport { TemporalSignature } from '@/lib/pensent-core/types/core';\n\ninterface EloChangeAnimationProps {\n  oldRating: number;\n  newRating: number;\n  isWin: boolean;\n  isDraw: boolean;\n  show: boolean;\n  signature?: TemporalSignature | null;\n}\n\nexport const EloChangeAnimation = ({\n  oldRating,\n  newRating,\n  isWin,\n  isDraw,\n  show,\n  signature,\n}: EloChangeAnimationProps) => {\n  const [displayedRating, setDisplayedRating] = useState(oldRating);\n  const [showChange, setShowChange] = useState(false);\n  const [animationComplete, setAnimationComplete] = useState(false);\n  \n  const pattern = useEnPensentPatterns(signature);\n  \n  const change = newRating - oldRating;\n  const oldTier = getRatingTier(oldRating);\n  const newTier = getRatingTier(newRating);\n  const tierChanged = oldTier.name !== newTier.name;\n\n  useEffect(() => {\n    if (!show) {\n      setDisplayedRating(oldRating);\n      setShowChange(false);\n      setAnimationComplete(false);\n      return;\n    }\n\n    // Start showing the change indicator after a brief delay\n    const changeTimer = setTimeout(() => setShowChange(true), 500);\n    \n    // Animate the rating counter\n    const duration = 1500; // ms\n    const steps = 30;\n    const stepDuration = duration / steps;\n    const ratingDiff = newRating - oldRating;\n    let currentStep = 0;\n\n    const interval = setInterval(() => {\n      currentStep++;\n      const progress = currentStep / steps;\n      // Easing function for smooth animation\n      const easeOutCubic = 1 - Math.pow(1 - progress, 3);\n      const currentRating = Math.round(oldRating + ratingDiff * easeOutCubic);\n      setDisplayedRating(currentRating);\n\n      if (currentStep >= steps) {\n        clearInterval(interval);\n        setDisplayedRating(newRating);\n        setAnimationComplete(true);\n      }\n    }, stepDuration);\n\n    return () => {\n      clearTimeout(changeTimer);\n      clearInterval(interval);\n    };\n  }, [show, oldRating, newRating]);\n\n  const getChangeColor = () => {\n    if (change > 0) return 'text-green-500';\n    if (change < 0) return 'text-red-500';\n    return 'text-muted-foreground';\n  };\n\n  const getChangeIcon = () => {\n    if (change > 0) return <TrendingUp className=\"h-6 w-6\" />;\n    if (change < 0) return <TrendingDown className=\"h-6 w-6\" />;\n    return <Minus className=\"h-6 w-6\" />;\n  };\n\n  const getResultIcon = () => {\n    if (isWin) return <Trophy className=\"h-8 w-8 text-yellow-500\" />;\n    if (isDraw) return <Minus className=\"h-8 w-8 text-blue-400\" />;\n    return null;\n  };\n\n  return (\n    <AnimatePresence>\n      {show && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9, y: 20 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.9, y: -20 }}\n          transition={{ duration: 0.4, ease: 'easeOut' }}\n          className=\"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden\"\n          style={{\n            borderColor: signature ? `${pattern.dominantColor}40` : undefined,\n            boxShadow: signature ? `0 0 ${30 * pattern.intensity}px ${pattern.dominantColor}30` : undefined\n          }}\n        >\n          {/* En Pensent background glow */}\n          {signature && (\n            <motion.div\n              className=\"absolute inset-0 pointer-events-none\"\n              style={{\n                background: `radial-gradient(circle at 50% 50%, ${pattern.dominantColor}15, transparent 70%)`\n              }}\n              animate={{\n                opacity: [0.3, 0.6, 0.3],\n                scale: [1, 1.1, 1]\n              }}\n              transition={{ duration: 3, repeat: Infinity }}\n            />\n          )}\n          {/* Result Header */}\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2 }}\n            className=\"flex items-center justify-center gap-3 mb-6\"\n          >\n            {getResultIcon()}\n            <h3 className=\"text-xl font-display font-bold uppercase tracking-wider\">\n              {isWin ? 'Victory!' : isDraw ? 'Draw' : 'Defeat'}\n            </h3>\n          </motion.div>\n\n          {/* Rating Display */}\n          <div className=\"flex items-center justify-center gap-8\">\n            {/* Current/Animated Rating */}\n            <motion.div\n              className=\"text-center\"\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ delay: 0.3 }}\n            >\n              <p className=\"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2\">\n                Rating\n              </p>\n              <motion.div\n                className={`text-5xl font-bold font-display bg-gradient-to-r ${getRatingTier(displayedRating).color} bg-clip-text text-transparent`}\n                key={displayedRating}\n              >\n                {displayedRating}\n              </motion.div>\n              <motion.p\n                className={`text-sm font-display mt-2 uppercase tracking-wider ${\n                  tierChanged && animationComplete ? 'text-primary' : 'text-muted-foreground'\n                }`}\n                animate={tierChanged && animationComplete ? { scale: [1, 1.1, 1] } : {}}\n                transition={{ duration: 0.3 }}\n              >\n                {getRatingTier(displayedRating).name}\n              </motion.p>\n            </motion.div>\n\n            {/* Change Indicator */}\n            <AnimatePresence>\n              {showChange && (\n                <motion.div\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0 }}\n                  transition={{ type: 'spring', stiffness: 300, damping: 25 }}\n                  className={`flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 ${getChangeColor()}`}\n                >\n                  {getChangeIcon()}\n                  <span className=\"text-2xl font-bold font-mono\">\n                    {change > 0 ? '+' : ''}{change}\n                  </span>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n\n          {/* Tier Change Celebration */}\n          <AnimatePresence>\n            {tierChanged && animationComplete && (\n              <motion.div\n                initial={{ opacity: 0, y: 20, scale: 0.8 }}\n                animate={{ opacity: 1, y: 0, scale: 1 }}\n                exit={{ opacity: 0 }}\n                transition={{ delay: 0.5, type: 'spring', stiffness: 200 }}\n                className=\"mt-6 text-center\"\n              >\n                <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30\">\n                  <Crown className=\"h-5 w-5 text-primary\" />\n                  <span className=\"font-display font-bold uppercase tracking-wider text-primary\">\n                    {change > 0 ? 'Rank Up!' : 'Rank Down'}\n                  </span>\n                </div>\n                <p className=\"text-sm text-muted-foreground mt-2 font-serif\">\n                  {oldTier.name} â†’ {newTier.name}\n                </p>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* Particles for wins */}\n          {isWin && animationComplete && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              className=\"absolute inset-0 pointer-events-none overflow-hidden rounded-xl\"\n            >\n              {[...Array(8)].map((_, i) => (\n                <motion.div\n                  key={i}\n                  className=\"absolute w-2 h-2 rounded-full bg-primary/60\"\n                  initial={{\n                    x: '50%',\n                    y: '50%',\n                    scale: 0,\n                  }}\n                  animate={{\n                    x: `${20 + Math.random() * 60}%`,\n                    y: `${10 + Math.random() * 80}%`,\n                    scale: [0, 1, 0],\n                    opacity: [0, 1, 0],\n                  }}\n                  transition={{\n                    duration: 1.5,\n                    delay: 0.8 + i * 0.1,\n                    ease: 'easeOut',\n                  }}\n                />\n              ))}\n            </motion.div>\n          )}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n";export{n as default};
