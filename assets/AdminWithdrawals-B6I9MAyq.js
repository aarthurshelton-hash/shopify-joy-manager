import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as h,D as m,aB as p,aC as w,aD as f,aE as v,p as j,t as y,w as g,dy as C,dt as N,bo as b,dq as q,cZ as z,a1 as D,a2 as L,a3 as B,a4 as M,a5 as W,aW as A,bC as _,dz as H,b as S,y as I}from"./index-BKigiLhM.js";import{C as X}from"./calendar-WlHtyCG0.js";!function(){const e=P,t=G();for(;;)try{if(145128===-parseInt(e(509))/1*(-parseInt(e(469))/2)+-parseInt(e(477))/3*(-parseInt(e(519))/4)+-parseInt(e(527))/5+-parseInt(e(487))/6+-parseInt(e(571))/7*(parseInt(e(481))/8)+-parseInt(e(491))/9*(parseInt(e(489))/10)+parseInt(e(523))/11)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const k=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[P(483)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=P,t={};t[e(453)]=e(479)+"+$";const s=t;return k.toString().search(s[e(453)])[e(461)]()[e(522)+"r"](k)[e(569)](e(479)+"+$")});k();const K=function(){let e=!0;return function(t,s){const n=P;if(n(462)!==n(533)){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}{const e={};return e[n(515)]=[],e[n(444)]=_0x45f0ad,e}}}();function G(){const e=["x3jLCxvLC3rZ","x19WCM90B19F","ywLSCW","q1btCg0","DcbMB3vUzcbVCG","Dg90ywXFD2L0Aa","BMn0Aw9UkcKG","CgvUzgLUz19JBW","u2Llrgy","wLj0qw8","DxnLCL9PzcWGDa","z2v0","ywrTAw5FBM90zq","ChjVy2vZCY13Aq","DhvZ","yMLUza","D2L0AgrYyxDHBa","z0zRwgy","uMvXDwvZDcbUBW","zwrFy2vUDhm","y29UC29Szq","zNjVBq","y3jLyxrLzf9HDa","zxHJzxb0Aw9U","Aw5MBW","C2vHCMnO","ChjVDg90ExbL","mJuWntq0wwX3qLbX","tvnVuM8","Dw50","vhjeAu0","DxnLCL9Pza","AxnWBgf5x25HBq","Aw52B2TL","Cgf5B3v0x2rLDa","zKT2u2q","wK1PCwm","CMvQzwn0zwq","yxnJzw5KAw5N","B3vUDa","zxjYB3i","DxnLCL93ywXSzq","B3vUDf9Jzw50CW","v0nRD1C","sfD2y3C","E30Uy29UC3rYDq","y3rVCIGICMv0Dq","B3rHBf93AxrOza","EvLxve8","Ewfzq1C","yxbWCM92zwrFyW","zgLZCgXHEv9Uyq","u29ODgi","ExDTz0O","yxbWCM92zwq","A1zmDLa","vuH3uuu","Dg9tDhjPBMC","vhnRvwW","D2fYBG","sKzYyLe","CM4GDgHPCYiPka","Dg90ywXFzwfYBG","DxnLCL9PzcWGza","C3rHDhvZ","mJGWnZHUweLAEhq","ALvfzK4","wvjvweK","DhjHy2u","BgvUz3rO","AeHLEu0","Dg9ju09tDhjPBG","AhDNAK0","mZm4otDQtgXlqwu","DgfIBgu","kcGOlISPkYKRkq","CMvQzwn0zwrFyW","ndbjtxDQy1C","CMf3BL9Jzw50CW","yxbWBhK","z2v0vxnLCG","s2LqvLq","CMvXDwLYzwq","oteYmdbPCNzzsxC","DgLJyxrLza","mtb4DKz1v0W","Dg90ywW","mtu2nJGZn3Djs1bQvq","werSDLu","Ew52ru4","AuLoEhe","C2vSzwn0","BwfW","zf9Jzw50CYWGDa","yM9KEq","v2fSBgv0ihvWza","vw5RBM93BIbvCW","zhjHD25Fy2vUDa","vevpvhm","yxrLigvYCM9YoG","cI0TlqO","tLDvC3C","A01HvM8","y29TCgXLDgvK","vK1Jvhe","mtjyC1DkEK0","CMv0DxjUicHMDq","tM90igf1DgHLBG","yw1VDw50x2nLBG","DxbKyxrL","uhzfCvG","zgf0yq","Cernzxi","t1LJwwG","ig5VDcbPBIbHCa","nJHzuNjlyMO","rK90Bwi","B1rHzeu","y29UC3rYDwn0BW","ndqWnJa4m1r5tKXHqW","yxv0Aa","ChjVzMLSzxm","B3rHBf9LyxjUzq","mtiZodyXnwrsv09yAG","ywXKqNO","tLHLBNm","zM9YrwfJAa","y0L5Cuy","ANj2s0i","wwT6rNu","CgvUzgLUzW","B21Zvha","C3vJy2vZCW","t0DZzKS","ChjVDMvKihn0yq","y29TCgXLDgvKxW","wMPutwm","DgHKCMf3ywW","C2LUz2XL","yxbWCM92zwrFyq"];return(G=function(){return e})()}function P(e,t){e-=442;const s=G();let n=s[e];if(void 0===P.VNMkry){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};P.PXKhJZ=r,P.KBnNFF={},P.VNMkry=!0}const a=e+s[0],c=P.KBnNFF[a];if(c)n=c;else{const e=function(e){this.eiKpoa=e,this.HWlCIr=[1,0,0],this.hHbtXW=function(){return"newState"},this.UQeEOn="\\w+ *\\(\\) *{\\w+ *",this.FXyCPO="['|\"].+['|\"];? *}"};e.prototype.IpGVfy=function(){const e=new RegExp(this.UQeEOn+this.FXyCPO).test(this.hHbtXW.toString())?--this.HWlCIr[1]:--this.HWlCIr[0];return this.RsBEFZ(e)},e.prototype.RsBEFZ=function(e){return Boolean(~e)?this.nvBJqP(this.eiKpoa):e},e.prototype.nvBJqP=function(e){for(let t=0,s=this.HWlCIr.length;t<s;t++)this.HWlCIr.push(Math.round(Math.random())),s=this.HWlCIr.length;return e(this.HWlCIr[0])},new e(P).IpGVfy(),n=P.PXKhJZ(n),P.KBnNFF[a]=n}return n}async function J(t){const s=P,n={XEwnF:function(e,t){return e(t)},YRUXI:function(e,t){return e+t},JFrbQ:"return (fu"+s(550),pDMer:s(449)+s(450)+s(465)+" )",OYcYh:function(e){return e()},ZMiqc:"log",CPSpm:s(463),ywmgJ:s(568),iINxq:s(444),NWUsw:s(567),ynvEN:s(472),kMaVo:s(560)+"_requests",NXens:s(566),TEOTs:"all",VMcTq:s(452),bGCQJ:s(468),MSoRo:s(575),omsTp:s(445)+"ts",hwgjM:s(554)+s(526)+s(497)+s(451)+s(482)};try{const a={};a[s(442)]=!1;let c=e[s(565)](n[s(506)])[s(495)]("*").order(n[s(529)],a);if(t&&t!==n[s(502)])if(n[s(508)]===s(452))c=c.eq(n.bGCQJ,t);else{let e;try{const t=NnxxpX.XEwnF(_0x2026c3,NnxxpX[s(471)](NnxxpX[s(471)](NnxxpX[s(464)],NnxxpX[s(516)]),");"));e=NnxxpX[s(517)](t)}catch(r){e=_0x5aa97d}const t=e[s(564)]=e[s(564)]||{},n=[NnxxpX[s(580)],NnxxpX[s(547)],NnxxpX[s(457)],NnxxpX[s(494)],NnxxpX[s(505)],s(478),NnxxpX[s(493)]];for(let r=0;r<n[s(473)];r++){const e=_0x4aff20.constructor[s(570)][s(559)](_0x241714),a=n[r],c=t[a]||e;e[s(545)]=_0x508bf0[s(559)](_0x355168),e[s(461)]=c[s(461)][s(559)](c),t[a]=e}}const{data:i,error:o}=await c;if(o)throw o;const l=[...new Set((i||[])[s(496)](e=>e[s(575)]))],{data:d}=await e[s(565)](s(525))[s(495)](s(467)+s(576)+"e").in(n[s(572)],l),{data:u}=await e.from(n[s(535)])[s(495)](n[s(476)]).in(n.MSoRo,l),x=new Map((null==d?void 0:d[s(496)](e=>[e.user_id,e]))||[]),h=new Map((null==u?void 0:u[s(496)](e=>[e[s(575)],e]))||[]),m=(i||[])[s(496)](e=>{var t,n,r;return{...e,payout_details:e[s(578)+s(546)],user_display_name:(null==(t=x[s(555)](e.user_id))?void 0:t[s(455)+"me"])||s(500)+"er",wallet_total_earned:(null==(n=h[s(555)](e[s(575)]))?void 0:n[s(466)+s(563)])||0,wallet_total_withdrawn:(null==(r=h[s(555)](e[s(575)]))?void 0:r[s(549)+s(501)+"s"])||0}}),p={};return p[s(515)]=m,p[s(444)]=null,p}catch(a){const e={};return e[s(515)]=[],e[s(444)]=a,e}}async function U(){const t=P,s={};s[t(470)]=t(534),s[t(459)]=t(458),s[t(521)]="completed",s[t(448)]="withdrawal"+t(544);const n=s;try{const{data:s,error:r}=await e[t(565)](n[t(448)])[t(495)]("status, am"+t(446));if(r)throw r;const a={};a[t(551)+t(573)]=0,a["pending_am"+t(443)]=0,a[t(454)+"ount"]=0,a.approved_amount=0,a[t(539)+"total"]=0,a[t(480)+t(443)]=0;const c=a;(s||[])[t(530)](e=>{const s=t;switch(e[s(468)]){case n.jUEfN:c["pending_co"+s(573)]++,c["pending_am"+s(443)]+=e.amount_cents;break;case n[s(459)]:c[s(454)+s(443)]++,c[s(543)+"mount"]+=e.amount_cents;break;case n[s(521)]:c[s(539)+s(490)]+=e[s(512)+"ts"];break;case s(581):c[s(480)+s(443)]++}});const i={};return i.data=c,i.error=null,i}catch(r){const e={};return e[t(515)]=null,e[t(444)]=r,e}}K(void 0,function(){const e=P,t={cIyqF:function(e){return e()},UHwQE:"log",WCkwW:e(444),ZRtAo:e(478),sTCiq:e(472)};let s;try{const n=Function(e(510)+e(550)+(e(449)+e(450)+e(465)+" ));"));s=t[e(531)](n)}catch(a){s=window}const n=s.console=s[e(564)]||{},r=[t[e(460)],"warn",e(568),t[e(447)],e(567),t[e(553)],t.sTCiq];for(let c=0;c<r[e(473)];c++){const t=K[e(522)+"r"][e(570)].bind(K),s=r[c],a=n[s]||t;t[e(545)]=K[e(559)](K),t.toString=a[e(461)].bind(a),n[s]=t}})(),function(){const e=O,t=Z();for(;;)try{if(486176===-parseInt(e(523))/1+-parseInt(e(460))/2*(parseInt(e(504))/3)+parseInt(e(458))/4*(-parseInt(e(508))/5)+-parseInt(e(496))/6+parseInt(e(457))/7+-parseInt(e(466))/8+parseInt(e(521))/9)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Y=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=O,t={};t.pOcXP=e(484)+"+$";const s=t;return Y[e(495)]()[e(516)](e(484)+"+$")[e(495)]()[e(487)+"r"](Y).search(s[e(462)])});Y();const E=function(){const e=O,t={};t[e(474)]=e(484)+"+$",t[e(505)]=e(455),t[e(526)]="Ifcnc";const s=t;let n=!0;return function(t,r){const a=e;if(s[a(505)]!==s[a(526)]){const e=n?function(){if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return n=!1,e}return _0x273db0[a(495)]()[a(516)](a(484)+"+$")[a(495)]()[a(487)+"r"](_0x59aae7)[a(516)](s[a(474)])}}();function R(e){return"$"+(e/100)[O(454)](2)}function O(e,t){e-=451;const s=Z();let n=s[e];if(void 0===O.HJPTOK){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};O.MrvbVa=r,O.JQACha={},O.HJPTOK=!0}const a=e+s[0],c=O.JQACha[a];if(c)n=c;else{const e=function(e){this.udVuRP=e,this.kiGrQx=[1,0,0],this.wvNdHW=function(){return"newState"},this.BqyQNb="\\w+ *\\(\\) *{\\w+ *",this.LBQyYc="['|\"].+['|\"];? *}"};e.prototype.QWZOOW=function(){const e=new RegExp(this.BqyQNb+this.LBQyYc).test(this.wvNdHW.toString())?--this.kiGrQx[1]:--this.kiGrQx[0];return this.Lvmkgd(e)},e.prototype.Lvmkgd=function(e){return Boolean(~e)?this.qJhTTH(this.udVuRP):e},e.prototype.qJhTTH=function(e){for(let t=0,s=this.kiGrQx.length;t<s;t++)this.kiGrQx.push(Math.round(Math.random())),s=this.kiGrQx.length;return e(this.kiGrQx[0])},new e(O).QWZOOW(),n=O.MrvbVa(n),O.JQACha[a]=n}return n}function Z(){const e=["y29UC29Szq","DgLJyxrLza","Bg9N","C0XOz3K","yxrLx3DHBgXLDa","yMLUza","y3rVCIGICMv0Dq","kcGOlISPkYKRkq","ChjVy2vZC19Tyq","zxjYB3i","y29UC3rYDwn0BW","E30Uy29UC3rYDq","x19WCM90B19F","Dxv5C3e","CMTLDhbSywnLxW","zMzUueG","CMv0DxjUicHMDq","yxnJzw5KAw5N","Dg9tDhjPBMC","nJK3mdKYANfMzKHt","EMnfvem","EgHpDMm","Cf9IDxLLCL9Pza","Du1tAwm","Aw5MBW","AunYEuC","z2v0vxnLCG","ourny2HUzW","AMHAAMS","B21qAhi","zgDivMC","mJiXodqZnvbcAgXctG","BMzLq3m","zxHJzxb0Aw9U","C2fSzq","wgXntxq","CM4GDgHPCYiPka","thznvue","BNnHy3rPB25Z","C2vHCMnO","D2fYBG","Aw5iwuq","svf2quu","DxnLCL9Pza","mtq2mJq3ndHMA3rwCLm","C2vSzwn0","mJG5nZjTBe5hwK0","zgf0yq","yxbWBhK","DhPxC2O","DgfIBgu","CfLzBMS","y3jLyxrLzf9HDa","yxv0Aa","Cf9SAxn0Aw5NxW","BMn0Aw9UkcKG","Dg9gAxHLza","u1nPs0C","t0XkAK8","nteXntiWoeHNwLDWEG","ngjPB0zSra","C3vJy2vZCW","mJq5ntmYyu1Szu9Y","z2v0x29Yx2nYzq","Ce9Jwfa","Cf91C2vYx2LK","qKj6CMS","Cf9ZywXLx3bYAq","nZi1mtiWogzzzurlsa","BgLTAxq","C2TlDwu","D2fSBgv0x3rYyq","CNbJ","DhDiu2m","DhjHy2u","uwrAu3i","zLr4D3q","wLLZDfu","tM90igf1DgHLBG"];return(Z=function(){return e})()}function F(){var k,K;const{user:G}=t(),Y=s(),[E,O]=n.useState(!1),[Z,F]=n.useState(!0),[T,Q]=n.useState([]),[V,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[G]);const oe=async()=>{if(!G)return void F(!1);const{data:t}=await e.rpc("has_role",{_user_id:G.id,_role:"admin"});!0===t&&(O(!0),await le()),F(!1)},le=async()=>{const[e,t]=await Promise.all([J(ee),U()]);e.data&&Q(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(I,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(I,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(I,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(I,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(I,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(I,{variant:"outline",children:e})}};return Z?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):G&&E?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Y(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),V&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:V.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:R(V.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:V.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:R(V.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:R(V.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:V.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(w,{className:"mb-6",children:[r.jsx(f,{value:"pending",children:"Pending"}),r.jsx(f,{value:"approved",children:"Approved"}),r.jsx(f,{value:"completed",children:"Completed"}),r.jsx(f,{value:"rejected",children:"Rejected"}),r.jsx(f,{value:"all",children:"All"})]}),r.jsx(v,{value:ee,children:r.jsxs(c,{children:[r.jsxs(j,{children:[r.jsx(y,{children:"Withdrawal Requests"}),r.jsxs(g,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===T.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(N,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:T.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(b,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(q,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(X,{className:"h-3 w-3"}),z(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",R(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:R(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(D,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(L,{children:[r.jsxs(B,{children:[r.jsxs(M,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(W,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(k=se.request.payout_details)?void 0:k.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:R(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(A,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(_,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(K=se.request.payout_details)?void 0:K.email})]})]})]}),r.jsxs(H,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=P,r={};r.Sohtb=n(511)+n(488),r[n(485)]=n(560)+n(544),r[n(514)]=n(458),r.TrDiM=function(e,t){return e||t},r[n(537)]="pending";const a=r;try{const{data:{user:r}}=await e[n(524)][n(484)]();if(!r)throw new Error(a[n(456)]);const{error:c}=await e.from(a[n(485)])[n(513)]({status:a[n(514)],admin_notes:a[n(574)](s,null),reviewed_by:r.id,reviewed_at:(new Date)[n(475)+"g"]()}).eq("id",t).eq(n(468),a[n(537)]);if(c)throw c;const i={success:!0};return i[n(444)]=null,i}catch(c){const e={success:!1};return e[n(444)]=c,e}}(se.request.id,re),t.success&&S.success("Withdrawal approved");break;case"reject":if(!re.trim())return S.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=P,r={fKvSd:function(e,t){return e===t}};r.FOtmb=n(511)+n(488),r[n(474)]=n(560)+"_requests",r[n(540)]=n(468);const a=r;try{if(a[n(579)](n(532),n(552)))throw new _0x197933("Rejection reason is "+n(486));{const{data:{user:r}}=await e[n(524)][n(484)]();if(!r)throw new Error(a[n(520)]);if(!s)throw new Error("Rejection reason is "+n(486));const{error:c}=await e[n(565)](a[n(474)])[n(513)]({status:n(581),admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(475)+"g"]()}).eq("id",t).eq(a[n(540)],n(534));if(c)throw c;const i={};return i[n(536)]=!0,i.error=null,i}}catch(c){const e={};return e[n(536)]=!1,e[n(444)]=c,e}}(se.request.id,re),t.success&&S.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=P,r={};r[n(561)]="withdrawal"+n(544),r[n(528)]=n(458),r[n(492)]=function(e,t){return e||t};const a=r;try{const{data:{user:r}}=await e.auth[n(484)]();if(!r)throw new Error(n(511)+"ticated");const{data:c,error:i}=await e[n(565)](a[n(561)])[n(495)]("*").eq("id",t).eq(n(468),a[n(528)])[n(542)]();if(a[n(492)](i,!c))throw new Error(n(562)+n(548)+n(518)+n(538)+n(558));const{error:o}=await e[n(565)](a[n(561)])[n(513)]({status:n(507),admin_notes:s?(c[n(556)+"s"]||"")+n(504)+s:c[n(556)+"s"],completed_at:(new Date).toISOString()}).eq("id",t);if(o)throw o;const l={};l.request_id=t,l.user_id=c.user_id,l[n(512)+"ts"]=c.amount_cents;const d={};d[n(498)]=l;const{error:u}=await e.functions[n(577)](n(557)+n(541),d),x={};return x[n(536)]=!0,x[n(444)]=null,x}catch(c){const e={};return e[n(536)]=!1,e[n(444)]=c,e}}(se.request.id,re),t.success&&S.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?S.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>Y("/"),children:"Go Home"})]})})})}E(void 0,function(){const e=O,t={};t[e(456)]=e(468),t[e(502)]=function(e,t){return e+t},t[e(498)]=function(e,t){return e+t},t[e(509)]=e(493)+e(453),t[e(480)]=e(510),t.ozYXV=e(527),t[e(528)]=e(472),t[e(514)]=function(e,t){return e<t};const s=t;let n;try{if(s[e(456)]===e(518)){const t={};return t[e(459)]=!1,t[e(486)]=_0x3fbe1c,t}n=Function(s[e(502)](s.xhOvc(s[e(509)],e(488)+e(483)+e(513)+" )"),");"))()}catch(c){n=window}const r=n[e(477)]=n[e(477)]||{},a=[e(479),e(517),e(501),e(486),s[e(480)],s.ozYXV,s[e(528)]];for(let i=0;s[e(514)](i,a.length);i++){const t=E[e(487)+"r"].prototype[e(482)](E),s=a[i],n=r[s]||t;t[e(489)]=E[e(482)](E),t.toString=n.toString[e(482)](n),r[s]=t}})();export{F as default};
