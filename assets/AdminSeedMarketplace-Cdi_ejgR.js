import{d6 as e,d7 as t,cp as n,a as s,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as f,C as x,x as h,D as p,B as v,A as g,p as w,t as y,cN as b,bC as j,S as C,a6 as N,P as z,y as D,bG as M,T as L,aq as _,z as B,cU as G,aj as q,aT as E,ca as S,b as A,d8 as P}from"./index-CESOpT9D.js";!function(){const e=I,t=k();for(;;)try{if(377405===-parseInt(e(274))/1+-parseInt(e(351))/2*(-parseInt(e(336))/3)+parseInt(e(367))/4+-parseInt(e(236))/5*(-parseInt(e(359))/6)+-parseInt(e(175))/7+parseInt(e(234))/8+parseInt(e(223))/9*(parseInt(e(404))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const W=function(){const e=I,t={};t[e(264)]=e(293),t.nWwQK=function(e,t){return e-t},t.vtGfL="left",t[e(412)]="sEmUn";const n=t;let s=!0;return function(t,r){const a=e,i={bJwmh:function(e,t){return e+t},IaMlE:n[a(264)],dvIju:function(e,t){return n[a(246)](e,t)},MCHBT:n[a(365)],ibSaq:n[a(412)]},o=s?function(){const e=a;if(r){if(i[e(342)]!==e(222)){const e=r.apply(t,arguments);return r=null,e}{_0xc4100f.fillStyle=_0x4da259,_0x18d1ca.font=e(298)+e(398)+e(370),_0x2c97f2[e(329)]=e(315);let t="";_0x388e45?(t=_0xdd8fa[e(395)+"e"](),_0x3f3d51&&(t+=i.bJwmh(i[e(292)],_0x30302c))):t=_0x256471;const n=2,s=t[e(388)](""),r=s[e(341)]((t,n)=>t+_0x54f6e9[e(360)+"t"](n)[e(357)],0),a=i[e(369)](s[e(301)],1)*n;let o=_0x2f53e0-(r+a)/2;for(const c of s)_0x5de045[e(329)]=i[e(196)],_0xfddd12[e(401)](c,o,_0x2cf5d0),o+=_0x16e3c0[e(360)+"t"](c)[e(357)]+n;_0x261b82+=28}}}:function(){};return s=!1,o}}()(void 0,function(){const e=I;return W[e(178)]()[e(303)](e(220)+"+$")[e(178)]()[e(224)+"r"](W)[e(303)](e(220)+"+$")});W();const O=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[I(400)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function k(){const e=["iIb5psi","y29SB3i","u2rZz1q","D09NAxC","B25LCNjVCG","Bw92zxm","D3bPsw8","CMvZDg9Yzq","Ahr0Chm6lY9LBG","C3bSAxq","Dw9ADfG","AM9PBG","uw1trui","v2HPDgu","E30Uy29UC3rYDq","zw5Wzw5Zzw50lG","Dg9vChbLCKnHCW","BwHqrxC","rKrvCxq","sw50zxiNlcbZyq","Aw5MBW","yxbWBhK","zMLSBfrLEhq","Aw1Hz2vtBw9VDa","D0DOt2K","mZu3odbOwgjzEeG","iZq0ndaZyW","Dg9eyxrHvvjm","yM9YzgvY","Ee9Mq3O","nJaWideZChGGjW","uM9Tyw4NlcbZzq","y3jLyxrLrwXLBq","CNnmugy","zvfQBhu","v0Lnyvm","ChLStee","iZfbmueXqq","nJaWidi0ChGGjW","CgLLy2u","ALDsAKu","uM9Tyw4NlcbuAq","uKDZBMO","psjODhrWoI8VDW","nduWndm2mgLrCKTpEq","svjSzhC","rMDLALe","Dg9tDhjPBMC","yMvNAw5qyxrO","Dfnzweq","z2v0q29UDgv4Da","mJaWmc9ZDMCIia","idiWChGGj0nVCG","CxjJB2rL","tuXesKu","BwLU","y2fUDMfZ","DhLWzq","iI8+","uwTuyLu","CNDwtKO","CMv2B2TLt2jQzq","ide4ChGGj0nVCG","rMfPBgvKihrVia","mJu1lcaYntuSia","tuniqLq","AgLUz1f1ywXPDa","mxWYFdn8nhWW","vgLTzxmGtMv3ia","yMXHy2S","wxfwww4","i0zerKngqG","C2nHBgu","BgvMDa","AxrHBgLJiduWma","y29UC29Szq","mc45nsK","qwvVwvC","zMLSBfn0EwXL","BLjur24","rgfyDNm","zM9UDa","Bgf5zxjtAxPL","ndaWideXChGGjW","zhzqEeK","ru4Guevou0vova","CMvHzhK","CgvUC2vUDc5JBW","phjLy3qGEd0I","kcGOlISPkYKRkq","CMDmDxG","C1HtDKG","mtuZthris0rR","y29UC3rYDwn0BW","AgLNAa","ChjVDg90ExbL","DejNB0e","q2LUEMvSjYWGjW","q2zAy1u","i2e4yti5zq","i2zHzMfMoq","zM9UDhm","iIb2Awv3qM94pq","ntK4otyZmNvtwgTfBa","iJaGmca","nwHstw50tW","zhjHD0LTywDL","zgvMyxvSDa","i2u3ztvLna","AgvPz2H0","vM5oDw4","wxnWAfi","BerAzgu","s1Lztvy","CM4GDgHPCYiPka","BLD3uuS","tw1OsuO","B25SB2fK","veTmB0W","qMXHy2S","iIbOzwLNAhq9iG","v2HMC08","u0fcuwm","i0zbrKfgqq","AxnmAwDODa","vhfTExi","CfDLtgq","BhL6sue","thnirhG","rxrdDvO","iIb5psiWiIb3Aq","tLnuA0W","ihzZia","uLrlCxC","DhjHBNnWyxjLBG","qMj5EhO","Awz3ufi","iIb3Awr0Ad0I","DMPlv0q","ChvZAa","EhjKqMm","thLXteC","yxvuBLK","nti4mZC5AhfOruTj","y3rvuKW","CM91BMrszwn0","vw5RBM93BG","ENb5t2q","ru1JrLa","wufRtNO","ywXVtKy","u25Xuwm","BgLUzvrV","D2LKDgG9iG","DMLZAxrZ","pZ8/pY4/pY4/pW","vvnYs0O","yMLUza","Eg1So2nOyxjZzq","qNbfrfC","Bw9Yyw50jYWGrW","swfnBeu","icdIGkiGia","C1bur3u","re9xyMm","y3jVC3npCMLNAq","AvzPDgi","ntaWideYChGGjW","C2f2zq","q2LmC2K","BgvUz3rO","x19WCM90B19F","C2vHCMnO","D2HPDgu","Bg9HzcbtvKC","zMLSBfjLy3q","v2zcAgK","BurYDuK","C3rYB2TL","BwvZlcbZzxjPzG","ntaWideXChGGjW","C3rYB2TLu3r5Ba","vvnmEMS","y2XPCa","y2vUDgvY","uhLpzfC","D0zyC1e","BgLUzvDPzhrO","iIbMAwXSpsi","yw5VBNLTB3vZ","ywXWAgfIzxrPyW","zxzLBNq","s29yr0i","pc9ZDMC+","tLqG4PMA","ueLZD0i","u1fVzgG","iZi5mJuYna","Dgv4DefSAwDU","y29T","y3rVCIGICMv0Dq","zMLSBa","vhz4v3u","Bg9N","Aw1Hz2uVC3zNkW","mZi5mwDxB1vyCG","uhbSweC","rMvXyxC","tNrvrwq","CffSq2e","CMvKDwnL","Awjtyxe","zhfIzxy","zKLODNG","t29Utw4","A3DfCKy","zxjYB3i","C3vIC3rYAw5N","yLPTufm","C3jJ","mZeWD1nds2Lv","y3jLyxrLt2jQzq","zw9Yz2LHlcbZzq","txzOzMy","CMDIysGYntuSia","yxjJ","D2LKDgG","vKHNwLG","nZGWndHABeHrBw8","BwvHC3vYzvrLEa","Aw5JBhvKzxm","Cwvsrfm","Dgv4DejHC2vSAq","ywHzr1i","DNrhzKW","CMLM","mJiYnJC2ne5irxDhBG","iZbbmeeWqq","zhzjANu","BNmTC2vYAwy","vuTyB3G","ndaWideWChGGjW","rgfkELu","sK1Osw0","Dd11DgyToa","zw50","zxHJzxb0Aw9U","q0LXuwO"];return(k=function(){return e})()}function I(e,t){e-=170;const n=k();let s=n[e];if(void 0===I.AmxRBM){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};I.BRRlTl=r,I.bauQfs={},I.AmxRBM=!0}const a=e+n[0],i=I.bauQfs[a];if(i)s=i;else{const e=function(e){this.HkDmTy=e,this.LPOVbf=[1,0,0],this.VpNDLc=function(){return"newState"},this.QnTnNo="\\w+ *\\(\\) *{\\w+ *",this.ooRqas="['|\"].+['|\"];? *}"};e.prototype.fecUsP=function(){const e=new RegExp(this.QnTnNo+this.ooRqas).test(this.VpNDLc.toString())?--this.LPOVbf[1]:--this.LPOVbf[0];return this.ewanZj(e)},e.prototype.ewanZj=function(e){return Boolean(~e)?this.ORVHRh(this.HkDmTy):e},e.prototype.ORVHRh=function(e){for(let t=0,n=this.LPOVbf.length;t<n;t++)this.LPOVbf.push(Math.round(Math.random())),n=this.LPOVbf.length;return e(this.LPOVbf[0])},new e(I).fecUsP(),s=I.BRRlTl(s),I.bauQfs[a]=s}return s}O(void 0,function(){const e=I,t={};t[e(252)]=function(e,t){return e+t},t[e(294)]="warn",t[e(337)]=e(347),t[e(210)]=e(377),t[e(295)]="table";const n=t,s=function(){const t=e;let s;try{s=Function(n[t(252)]("return (function() ",t(393)+t(331)+t(245)+" )")+");")()}catch(r){s=window}return s}(),r=s[e(206)]=s[e(206)]||{},a=[e(334),n[e(294)],e(399),n[e(337)],n[e(210)],n.DOWbc,"trace"];for(let i=0;i<a[e(301)];i++){const t=O[e(224)+"r"][e(226)][e(288)](O),n=a[i],s=r[n]||t;t[e(302)]=O.bind(O),t.toString=s[e(178)][e(288)](s),r[n]=t}})();async function T(){const e=I;document[e(232)]&&document[e(232)].ready&&await document[e(232)][e(217)],await new Promise(e=>setTimeout(e,150))}async function H(e){const t=I,n={};n[t(391)]=t(387)+t(218)+"m",n[t(396)]=t(254);const s=n;return(await import(t(184)))[t(238)][t(406)](s.QmSEB,{width:200,margin:1,color:{dark:e?s.mhPEw:t(416),light:t(265)+"t"},errorCorrectionLevel:"M"})}async function U(){return new Promise((e,t)=>{const s=I,r=new Image;r.crossOrigin=s(320),r.onload=()=>e(r),r.onerror=t,r[s(350)]=n})}async function Y(n,s,r={}){const a=I,i={iVitb:function(e){return e()},kwErF:function(e,t){return e===t},YsphR:a(339),HgsFc:a(211),rgLux:function(e,t){return e*t},DaJzU:function(e,t){return e+t},QkTbU:function(e,t){return e*t},yuXbR:a(187),USrKJ:function(e,t){return e*t},XWGyH:a(225),YAkNz:a(368),CfZcU:a(202),xrdBc:function(e,t){return e+t},WIMaS:function(e,t){return e+t},ifwPR:a(328),wFXsQ:"#78716c",wGhOi:a(230),PIswB:function(e,t){return e/t},PyOdW:a(392),UGvhE:a(250),jWRjE:"middle",mDruI:a(205)+a(183)+a(291)+a(353)+a(366),MmhIJ:"left",qeRDS:a(417)+a(228)+"Times New "+a(410)+a(366),BGmuF:a(277),UKXox:a(198),RGsnj:"500 12px '"+a(398)+a(370),IRldw:a(315),SABQc:function(e,t){return e*t},Bbyxz:function(e,t){return e-t},rwVNJ:function(e,t){return e/t},LyqLG:function(e,t){return e>t},pylLA:function(e,t){return e+t},mZVEm:"...",PBPaM:function(e,t){return e-t},RWtUq:function(e,t){return e+t},AeoYW:function(e,t){return e!==t},LsHDx:a(378),vjKWD:function(e,t){return e>=t},KYYMV:function(e,t){return e-t},PkOsr:a(311)+a(398)+"ns-serif",bZmPS:"â™” EN PENSE"+a(325),CiLsi:function(e,t){return e-t},ITHfF:function(e){return e()},auTnY:function(e,t){return e+t},jGFcM:function(e,t){return e+t},dvPxI:function(e,t){return e/t},FgejQ:function(e,t){return e-t},itnjF:function(e,t){return e+t},SdsgT:function(e,t){return e/t},tBgoA:a(321),zkDfq:a(409)+a(398)+a(370),YqVYn:function(e,t){return e+t},oOTgD:function(e,t){return e-t},FrqyO:function(e,t){return e-t}};await i.iVitb(T);const{boardSize:o=600,darkMode:c=!1,withWatermark:l=!1,title:u}=r,d=function(n,s){const r=I,a={};a[r(338)]=r(320),a[r(281)]=function(e,t){return e/t},a[r(257)]=function(e,t){return e*t},a[r(323)]=function(e,t){return e*t},a[r(389)]=r(282),a[r(313)]=function(e,t){return e-t},a[r(260)]=function(e,t){return e<t},a[r(256)]=function(e,t){return e+t},a[r(327)]=function(e,t){return e*t},a[r(185)]=function(e,t){return e===t},a[r(343)]=r(385),a[r(374)]=function(e,t){return e!==t},a[r(180)]=function(e,t){return e<t},a.TvxWu=function(e,t){return e-t},a[r(340)]=function(e,t){return e+t},a[r(258)]=r(324);const i=a,o=i[r(281)](s,8),c=i[r(257)](s,.02),l=s+i.KoXGB(c,2);let u="<svg xmlns"+r(174)+"ww.w3.org/"+r(182)+r(284)+l+r(251)+l+(r(233)+r(235))+l+" "+l+'">';u+='<rect x="0'+r(261)+'dth="'+l+'" height="'+l+r(319)+e[r(407)]+r(189);for(let d=0;d<8;d++){if("BSFyp"===i.uoZtX){const e=_0x2c0bb7?function(){if(_0x438b34){const e=_0x4a6297.apply(_0x334ed5,arguments);return _0x7b2384=null,e}}:function(){};return _0x3e958b=!1,e}{const s=i[r(313)](7,d);for(let a=0;i[r(260)](a,8);a++){const l=n[s][a],m=l[r(255)]?e.light:e.dark,f=c+i.KoXGB(a,o),x=i[r(256)](c,i[r(327)](d,o));if(u+=r(219)+f+r(379)+x+r(268)+o+r(251)+o+r(319)+m+r(189),l[r(285)].length>0)if(i.MLDJE("bsTEd",i.dqbev)){const e=new _0x7d9da1;e[r(296)+"n"]=i[r(338)],e[r(248)]=()=>_0x3e794a(e),e.onerror=_0x1bde04,e.src=_0x597631}else{const e=.08*o,n=[];for(const o of l[r(285)]){const e=t(o[r(170)],o[r(380)]);!n[r(361)](e)&&(i[r(374)](r(241),r(241))?(_0x37a689[r(329)]=r(204),_0x1b91de.fillText(_0x5d433d,_0x1a1e53,_0x3198a7),_0x25c185+=_0x7b4584[r(360)+"t"](_0x2ec43a).width+_0x259823):n[r(270)](e))}const s=Math[r(186)](n[r(301)],6),a=[];let c=i.USLzk(o,2*e);const d=.7*c/s;for(let t=0;i[r(260)](t,s);t++){const e={};if(e[r(380)]=n[t],e[r(213)]=c,a.push(e),c-=d,i[r(180)](c,i[r(327)](o,.1)))break}for(const t of a){const e=i.aloNF(i[r(333)](o,t.layerSize),2);u+='<rect x="'+i[r(340)](f,e)+r(379)+(x+e)+r(268)+t[r(213)]+r(251)+t.layerSize+r(319)+t[r(380)]+r(189)}}}}}return u+=i[r(258)],u}(n,o),m=o+2*i[a(221)](o,.02),f=await async function(e,t,n){const s=I,r={cCAYv:function(e,t){return e*t},fIhvx:function(e,t){return e(t)},ahYGR:s(335)+s(289)+s(375),wOgiw:s(249)};return new Promise((a,i)=>{const o=s,c={ehMIw:function(e,t){return r.cCAYv(e,t)},xOfCz:function(e,t){return r[I(344)](e,t)},wdkUF:r[o(364)],BpEDW:function(e,t){return e*t},FDUqt:function(e,t){return e!==t},NSTkL:r[o(382)],VHgZX:"vkknj"},l=new Image,u={};u.type=o(335)+o(289)+"t=utf-8";const d=new Blob([e],u),m=URL[o(352)+"ctURL"](d);l[o(248)]=()=>{const e=o,s=document[e(411)+"ent"](e(187));s.width=5*t,s[e(240)]=c.ehMIw(n,5);const r=s[e(181)]("2d");r.scale(5,5),r.drawImage(l,0,0,t,n),URL[e(192)+e(275)](m),c[e(408)](a,s)},l[o(383)]=()=>{const e=o,t={EMcFP:function(e,t){return c[I(290)](e,t)},eQjlu:function(e,t){return c[I(408)](e,t)}};if(c[e(397)](c[e(262)],c[e(358)]))URL[e(192)+e(275)](m),i(new Error(e(194)+e(305)));else{const n={pYNQx:function(e,t){return e(t)},Mvhff:e(194)+e(305)},s=new _0x11219b,r={};r[e(188)]=c.wdkUF;const a=new _0xf519fa([_0x5c39f4],r),i=_0x23fe85[e(352)+e(275)](a);s[e(248)]=()=>{const n=e,r=_0x380645[n(411)+"ent"](n(187));r[n(357)]=t[n(279)](_0x350490,_0x1e7a19),r[n(240)]=_0xdcf8*_0x18b50d;const a=r[n(181)]("2d");a[n(203)](_0x1f595c,_0x193868),a[n(237)](s,0,0,_0x10a2c7,_0x5452d1),_0x27e4c8[n(192)+n(275)](i),t[n(413)](_0xc880fb,r)},s[e(383)]=()=>{const t=e;_0x2fcd5f["revokeObje"+t(275)](i),n.pYNQx(_0x195c55,new _0x59c767(n[t(354)]))},s[e(350)]=i}},l[o(350)]=m})}(d,m,m),x=60,h=i.DaJzU(m,120),p=m+220+60+i[a(190)](x,2),v=document[a(411)+a(376)](i.yuXbR);v[a(357)]=i[a(221)](h,5),v[a(240)]=i[a(287)](p,5);const g=v[a(181)]("2d");g[a(203)](5,5),g[a(402)+"hingEnabled"]=!0,g[a(402)+a(197)+"y"]=i.XWGyH,g[a(209)]=c?i[a(280)]:i[a(229)],g[a(306)](0,0,h,p),g[a(237)](f,0,0,f[a(357)],f[a(240)],x,x,m,m);const w=i.xrdBc(i[a(414)](x,m),28);g.strokeStyle=c?i[a(267)]:a(239),g[a(318)]=1,g[a(179)](),g.moveTo(x,w),g[a(283)](h-x,w),g.stroke();const y=c?a(231):i.ifwPR,b=c?a(230):i[a(317)],j=c?i[a(317)]:i.wGhOi,C=c?i[a(317)]:i[a(403)],N=i[a(326)](h,2);let z=i[a(373)](w,55);const D=s[a(304)]||i[a(316)],M=s[a(200)]||i.UGvhE;g[a(363)+"ne"]=i[a(171)],g[a(212)]=a(417)+"Cinzel', 'Times New Roman', serif";const L=g[a(360)+"t"](D)[a(357)],_=g[a(360)+"t"](M)[a(357)];g[a(212)]=i[a(308)];const B=a(263),G=g[a(360)+"t"](B)[a(357)],q=N-i.xrdBc(i.xrdBc(L,G),_)/2;if(g.font=a(417)+a(228)+a(199)+a(410)+a(366),g[a(209)]=y,g[a(329)]=i[a(247)],g[a(401)](D,q,z),g[a(212)]=a(205)+" 20px 'Cor"+a(291)+a(353)+"rif",g.fillStyle=C,g[a(401)](B,i[a(271)](q,L),z),g[a(212)]=i[a(362)],g[a(209)]=y,g.fillText(M,q+L+G,z),z+=36,s.event&&s[a(322)]!==i.BGmuF){const e=i[a(371)][a(388)]("|");let t=0;for(;;){switch(e[t++]){case"0":z+=32;continue;case"1":g[a(209)]=b;continue;case"2":g.font="italic 500"+a(193)+a(291)+a(353)+"rif";continue;case"3":g[a(329)]="center";continue;case"4":g.fillText(s[a(322)],N,z);continue}break}}const E=u,S=s.date||"";if(E||S){g[a(209)]=j,g[a(212)]=i[a(173)],g[a(329)]=i[a(176)];let e="";E?(e=E[a(395)+"e"](),S&&(e+=i[a(373)]("  â€¢  ",S))):e=S;const t=2,n=e[a(388)](""),s=n[a(341)]((e,t)=>e+g[a(360)+"t"](t)[a(357)],0),r=i[a(253)](i[a(266)](n[a(301)],1),t);let o=N-i[a(191)](s+r,2);for(const c of n)g[a(329)]=a(204),g.fillText(c,o,z),o+=i[a(373)](g[a(360)+"t"](c)[a(357)],t);z+=28}if(s[a(384)]&&s.moves.length>0){g.fillStyle=j,g[a(212)]=a(372)+a(199)+a(172)+a(310),g[a(329)]="center";const e=s.moves[a(390)](" "),t=i.LyqLG(e[a(301)],400)?i[a(415)](e[a(348)](0,400),i.mZVEm):e,n=i.PBPaM(h-120,40),r=t[a(388)](" ");let o="",c=z;const l=15,u=4;let d=0;for(const s of r){const e=i.RWtUq(o+(o?" ":""),s);if(i[a(272)](g.measureText(e)[a(357)],n)&&o){if(i[a(208)](i[a(259)],"CIqQj")){if(_0xf9be30){const e=_0x41e459.apply(_0x350514,arguments);return _0x48efd8=null,e}}else if(g[a(401)](o,N,c),o=s,c+=l,d++,i[a(269)](d,u))break}else o=e}o&&d<u&&g[a(401)](o,N,c)}const A=i[a(244)](i.PBPaM(p,x),20);g.fillStyle=j,g[a(212)]=i.PkOsr,g[a(329)]=i[a(176)];const P=i[a(349)][a(388)](""),W=P[a(341)]((e,t)=>e+g[a(360)+"t"](t)[a(357)],0),O=i[a(271)](W,i[a(221)](P.length-1,4));let k=i[a(300)](N,i.PIswB(O,2));for(const e of P)g[a(329)]=i[a(247)],g[a(401)](e,k,A),k+=i.xrdBc(g[a(360)+"t"](e).width,4);if(l){const[e,t]=await Promise.all([H(!1),i.ITHfF(U)]),n=220,s=65,r=i.CiLsi(i[a(300)](i[a(273)](x,m),n),12),o=i.KYYMV(x+m-s,12);g[a(209)]=a(355)+a(195)+a(207),g.beginPath(),g[a(276)](r,o,n,s,6),g[a(332)](),g[a(312)+"e"]="#e7e5e4",g[a(318)]=1,g[a(309)]();const c=48,l=i.jGFcM(r,12),u=o+i[a(215)](i[a(177)](s,c),2);g[a(299)](),g[a(179)](),g[a(356)](i.itnjF(l,i[a(381)](c,2)),u+c/2,c/2,0,2*Math.PI),g[a(314)](),g.drawImage(t,l,u,c,c),g[a(386)]();const d=l+c+10;g[a(329)]=a(204),g[a(363)+"ne"]=i[a(227)],g.fillStyle=a(405),g[a(212)]=i.zkDfq,g.fillText(a(216),d,i[a(201)](o,28)),g[a(209)]=i.wFXsQ,g[a(212)]=a(214)+a(398)+a(370),g[a(401)](a(394)+a(330),d,o+46);const f=50,h=i.oOTgD(i.FrqyO(r+n,f),10),p=o+i.rwVNJ(i[a(266)](s,f),2),v=new Image;await new Promise(t=>{const n=a;i[n(346)](i[n(242)],i.HgsFc)?(_0x2d090e.textAlign=n(204),_0x4832d3[n(401)](_0x3f1bbe,_0x10e029,_0x36bd7a),_0x441a24+=_0x413851[n(360)+"t"](_0x1d4bfb)[n(357)]+_0x5e576d):(v[n(248)]=()=>{const e=n;"jIdGp"!==e(278)?(g[e(237)](v,h,p,f,f),i[e(297)](t)):_0x517f7e=_0x2dabff},v[n(383)]=()=>t(),v[n(350)]=e)})}return v}const V=S.filter(e=>"custom"!==e.id);const K=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const Z=()=>{const e=s(),{user:t,isLoading:n}=r(),[W,O]=a.useState(null),[k,I]=a.useState(!1),[T,H]=a.useState(0),[U,Z]=a.useState(""),[R,F]=a.useState([]),[X,J]=a.useState(50),[$,Q]=a.useState(!0),[ee,te]=a.useState(!1),[ne,se]=a.useState(null);a.useEffect(()=>{n||(async()=>{if(!t)return void O(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});O(!0===e)})()},[t,n]);const re=a.useCallback(async(e,n,s,r,a=!0)=>{try{const m=i(e.pgn),f=a?V[Math.floor(Math.random()*V.length)]:V[s%V.length],x=function(e,t){const n=S.find(e=>e.id===t)||S[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?n.white:n.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,f.id);o(f.id);const h=await Y(x,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:n}),p=await new Promise((e,t)=>{h.toBlob(n=>{n?e(n):t(new Error("Failed to create blob"))},"image/png",.95)}),v=Date.now(),g=`${t.id}/${v}-${n.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(g,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:y}=c.storage.from("visualizations").getPublicUrl(g),b=l(e.pgn),j={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:x,totalMoves:m.totalMoves,visualizationState:{paletteId:f.id,paletteName:f.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?s+1:void 0,gameHash:b}},{data:C,error:N}=await c.from("saved_visualizations").insert({user_id:t.id,title:n,pgn:e.pgn,game_data:j,image_path:y.publicUrl}).select().single();if(N)throw N;const z=function(e,t){if(e){const e=99,n=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+n}return 199+Math.floor(600*Math.random())}(r,s),{data:D,error:M}=await u(C.id,z);if(M)throw M;const L=function(e,t){const n=e?1.5:1,s=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*n+5*s),hdDownloads:Math.floor(3*Math.random()*n),gifDownloads:Math.floor(2*Math.random()*n),tradeCount:e?Math.floor(2*Math.random()):0}}(r,s);for(let e=0;e<L.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:C.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const _=d(e.pgn),B=a?"premium":"genesis";return{title:n,success:!0,visualizationId:C.id,listingId:null==D?void 0:D.id,isExemplar:r,paletteId:f.id,paletteName:f.name,gameHash:b,tier:B,openingName:null==_?void 0:_.fullName}}catch(m){return{title:n,success:!1,error:m.message,isExemplar:r}}},[t]),ae=R.filter(e=>e.success).length,ie=R.filter(e=>!e.success).length;return R.filter(e=>e.success&&e.isExemplar).length,n||null===W?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})}):t&&W?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(v,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(g,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(x,{children:[m.jsx(w,{children:m.jsxs(y,{className:"flex items-center gap-3",children:[m.jsx(b,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(j,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",X," visions: ",Math.min(25,X)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,X-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:X,onChange:e=>J(Number(e.target.value)),disabled:k,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(C,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:k}),m.jsxs(N,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(z,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(D,{variant:"secondary",className:"text-xs",children:[V.length," palettes"]})]})]}),m.jsx(v,{onClick:async()=>{if(!t)return void A.error("You must be logged in as the CEO account");I(!0),F([]),H(0);const e=[],n=P.slice(0,Math.min(X,P.length)),s=[];for(let t=0;t<X;t++){const e=t%n.length,r=t<25,a=K[t]||`Vision ${t+1}`;s.push({game:n[e],title:a,isExemplar:r})}for(let t=0;t<s.length;t++){const{game:n,title:r,isExemplar:a}=s[t];Z(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${s.length})`);const i=await re(n,r,t,a,$);e.push(i),F([...e]),H((t+1)/s.length*100),await new Promise(e=>setTimeout(e,300))}I(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?A.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):A.error("Failed to create any visions")},disabled:k||!t,className:"w-full",size:"lg",children:k?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(M,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(L,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(v,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),se(null);try{const{data:e,error:n}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(n)throw n;if(!e||0===e.length)return A.info("No visions to delete"),void te(!1);const s=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",s);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=s.filter(e=>!i.has(e)),l=s.filter(e=>i.has(e));if(0===o.length)return A.info("All your visions have accrued natural value - none deleted"),se({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);se({deleted:o.length,preserved:l.length}),A.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){A.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||k||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(L,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),ne&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",ne.deleted," deleted"]}),ne.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",ne.preserved," preserved (has value)"]})]})})]}),k&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(_,{value:T,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:U})]}),R.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(B,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(G,{className:"h-4 w-4"}),R.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(q,{className:"h-4 w-4"}),R.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:R.map((e,t)=>m.jsxs(E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(G,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(q,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(D,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(D,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(z,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(x,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(v,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{Z as default};
