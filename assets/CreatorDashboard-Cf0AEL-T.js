import{u as e,aq as s,ar as a,j as r,as as t,H as l,Q as i,A as n,x as d,at as o,au as c,av as m,O as x,E as u,q as h,t as j,v as g,C as p,I as v,w as N,a5 as f,af as b,ag as y,W as w,aw as C,a6 as k,ax as R,ay as O,az as _,aA as V,aB as z,aC as $,aD as P,aE as F,aF as T,V as D,B as E,aG as M,Y as A,aH as S,s as Y}from"./index-BRnl98aa.js";import{R as B}from"./RoyaltyCalculator-ChUon_mU.js";import{C as G}from"./circle-alert-MTR9NIje.js";import{C as q}from"./chart-pie-WVDdBMki.js";import{B as H}from"./BarChart-DS3CTGOy.js";const K=()=>{const{user:K,isLoading:L}=e(),J=s(3),I=100*S.valueAppreciationRate,{data:Q,isLoading:W}=a({queryKey:["creator-dashboard-stats",null==K?void 0:K.id],queryFn:async()=>{if(!K)return null;const{data:e}=await Y.from("saved_visualizations").select("id, title").eq("user_id",K.id);if(!e||0===e.length)return{totalRoyaltyCents:0,totalRoyaltyOrders:0,totalPrintRevenue:0,totalPrintOrders:0,totalViews:0,totalDownloads:0,visionCount:0,visions:[]};const s=e.map(e=>e.id),{data:a}=await Y.from("vision_scores").select("*").in("visualization_id",s),r=e.map(e=>{const s=null==a?void 0:a.find(s=>s.visualization_id===e.id);return{id:e.id,title:e.title,royaltyCentsEarned:(null==s?void 0:s.royalty_cents_earned)||0,royaltyOrdersCount:(null==s?void 0:s.royalty_orders_count)||0,printRevenueCents:(null==s?void 0:s.print_revenue_cents)||0,printOrderCount:(null==s?void 0:s.print_order_count)||0,viewCount:(null==s?void 0:s.view_count)||0,downloadCount:((null==s?void 0:s.download_gif_count)||0)+((null==s?void 0:s.download_hd_count)||0),totalScore:(null==s?void 0:s.total_score)||0}});return{...r.reduce((e,s)=>({totalRoyaltyCents:e.totalRoyaltyCents+s.royaltyCentsEarned,totalRoyaltyOrders:e.totalRoyaltyOrders+s.royaltyOrdersCount,totalPrintRevenue:e.totalPrintRevenue+s.printRevenueCents,totalPrintOrders:e.totalPrintOrders+s.printOrderCount,totalViews:e.totalViews+s.viewCount,totalDownloads:e.totalDownloads+s.downloadCount}),{totalRoyaltyCents:0,totalRoyaltyOrders:0,totalPrintRevenue:0,totalPrintOrders:0,totalViews:0,totalDownloads:0}),visionCount:e.length,visions:r.sort((e,s)=>s.royaltyCentsEarned-e.royaltyCentsEarned)}},enabled:!!K,staleTime:6e4});if(!L&&!K)return r.jsx(t,{to:"/",replace:!0});const U=((null==Q?void 0:Q.totalRoyaltyCents)||0)/100,X=((null==Q?void 0:Q.totalPrintRevenue)||0)/100,Z=X-U,ee=(e=>{const s=e/7;return["Jul","Aug","Sep","Oct","Nov","Dec","Jan"].map((e,a)=>({month:e,royalties:Math.floor(s*(.5+Math.random())*(1+.15*a)),orders:Math.floor(10*Math.random()+2)}))})(U),se=.3*U,ae=new Date;return ae.setDate(1),ae.setMonth(ae.getMonth()+1),r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(l,{}),r.jsxs("main",{className:"container mx-auto px-4 py-8",children:[r.jsxs(i,{to:"/my-visions",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-primary mb-6 transition-colors",children:[r.jsx(n,{className:"h-4 w-4"}),"Back to My Visions"]}),r.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl p-8 mb-8 border border-primary/20 bg-gradient-to-br from-primary/10 to-green-500/10",children:[J[0]&&r.jsx("div",{className:"absolute inset-0 opacity-[0.1] bg-cover bg-center dashboard-bg-0",style:{"--bg-image":`url(${J[0]})`}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/70 to-background/90"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-3 rounded-full bg-primary/20",children:r.jsx(o,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Creator Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Track your earnings and portfolio performance"})]})]}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-background/50 border border-border/50",children:[r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[r.jsx(c,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Royalties"})]}),r.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["$",U.toFixed(2)]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lifetime earnings"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-background/50 border border-border/50",children:[r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Orders by Others"})]}),r.jsx("p",{className:"text-3xl font-bold",children:(null==Q?void 0:Q.totalRoyaltyOrders)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Prints sold"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-background/50 border border-border/50",children:[r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Portfolio Size"})]}),r.jsx("p",{className:"text-3xl font-bold",children:(null==Q?void 0:Q.visionCount)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Visions owned"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-background/50 border border-border/50",children:[r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Views"})]}),r.jsx("p",{className:"text-3xl font-bold",children:(null==Q?void 0:Q.totalViews)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all visions"})]})]})]})]}),r.jsxs(h,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(j,{className:"grid w-full grid-cols-3 lg:w-auto lg:inline-grid",children:[r.jsxs(g,{value:"overview",className:"gap-2",children:[r.jsx(p,{className:"h-4 w-4"}),"Overview"]}),r.jsxs(g,{value:"earnings",className:"gap-2",children:[r.jsx(c,{className:"h-4 w-4"}),"Earnings"]}),r.jsxs(g,{value:"calculator",className:"gap-2",children:[r.jsx(v,{className:"h-4 w-4"}),"Calculator"]})]}),r.jsxs(N,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs(f,{className:"lg:col-span-2",children:[r.jsxs(b,{children:[r.jsxs(y,{className:"flex items-center gap-2",children:[r.jsx(w,{className:"h-5 w-5 text-primary"}),"Earnings Trend"]}),r.jsx(C,{children:"Monthly royalty earnings over time"})]}),r.jsx(k,{children:r.jsx("div",{className:"h-[250px]",children:r.jsx(R,{width:"100%",height:"100%",children:r.jsxs(O,{data:ee,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRoyalties",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),r.jsx(_,{strokeDasharray:"3 3",className:"stroke-border/30"}),r.jsx(V,{dataKey:"month",className:"text-xs"}),r.jsx(z,{className:"text-xs",tickFormatter:e=>`$${e}`}),r.jsx($,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:e=>[`$${e.toFixed(2)}`,"Royalties"]}),r.jsx(P,{type:"monotone",dataKey:"royalties",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorRoyalties)"})]})})})})]}),r.jsxs(f,{className:"relative overflow-hidden",children:[J[1]&&r.jsx("div",{className:"absolute inset-0 opacity-[0.08] bg-cover bg-center dashboard-bg-1",style:{"--bg-image":`url(${J[1]})`}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/90 to-background/95"}),r.jsx(b,{className:"relative z-10",children:r.jsxs(y,{className:"flex items-center gap-2",children:[r.jsx(F,{className:"h-5 w-5 text-green-500"}),"Realize Your Value"]})}),r.jsxs(k,{className:"relative z-10 space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/30",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Accrued Vision Value"}),r.jsxs("p",{className:"text-2xl font-bold text-green-500",children:["$",se.toFixed(2)]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Transfer to another member to realize gains"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs font-medium text-primary",children:"How to realize value:"}),r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(c,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Sell"}),r.jsx("span",{className:"text-muted-foreground",children:" — 5% platform fee, you receive 95%"})]})]}),r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(v,{className:"h-4 w-4 text-blue-500 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Trade"}),r.jsx("span",{className:"text-muted-foreground",children:" — 5% fee when credits involved"})]})]}),r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(F,{className:"h-4 w-4 text-green-500 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Gift"}),r.jsx("span",{className:"text-muted-foreground",children:" — No fees, recipient gets full value"})]})]})]}),r.jsx(T,{}),r.jsx("div",{className:"p-3 rounded-lg bg-muted/30 border border-border/50",children:r.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[r.jsx(G,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-muted-foreground",children:[r.jsx("strong",{className:"text-foreground",children:"No automatic payouts."})," Your vision's value grows from print orders. Transfer ownership to convert value to credits."]})]})})]})]})]}),r.jsxs(f,{children:[r.jsxs(b,{children:[r.jsxs(y,{className:"flex items-center gap-2",children:[r.jsx(v,{className:"h-5 w-5 text-primary"}),"Top Performing Visions"]}),r.jsx(C,{children:"Your visions ranked by royalty earnings"})]}),r.jsx(k,{children:(null==Q?void 0:Q.visions)&&Q.visions.length>0?r.jsx("div",{className:"space-y-3",children:Q.visions.slice(0,5).map((e,s)=>r.jsxs(i,{to:`/visualization/${e.id}`,className:"flex items-center gap-4 p-3 rounded-lg bg-background/50 border border-border/50 hover:border-primary/50 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center font-bold text-primary",children:s+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:e.title}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(u,{className:"h-3 w-3"}),e.viewCount," views"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(m,{className:"h-3 w-3"}),e.royaltyOrdersCount," orders"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-bold text-green-500",children:["$",(e.royaltyCentsEarned/100).toFixed(2)]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"earned"})]}),r.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]},e.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(x,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No visions yet"}),r.jsx(E,{asChild:!0,className:"mt-4",children:r.jsx(i,{to:"/",children:"Create Your First Vision"})})]})})]})]}),r.jsxs(N,{value:"earnings",className:"space-y-6",children:[r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs(f,{className:"relative overflow-hidden",children:[J[2]&&r.jsx("div",{className:"absolute inset-0 opacity-[0.08] bg-cover bg-center dashboard-bg-2",style:{"--bg-image":`url(${J[2]})`}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/90 to-background/95"}),r.jsxs(b,{className:"relative z-10",children:[r.jsxs(y,{className:"flex items-center gap-2",children:[r.jsx(q,{className:"h-5 w-5 text-primary"}),"Revenue Breakdown"]}),r.jsx(C,{children:"How print revenue is distributed"})]}),r.jsxs(k,{className:"relative z-10 space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Your Value Appreciation (",I,"%)"]}),r.jsxs("span",{className:"font-bold text-green-500",children:["$",U.toFixed(2)]})]}),r.jsxs("div",{className:"flex h-4 rounded-full overflow-hidden bg-muted/30",children:[r.jsx("div",{className:"bg-green-500 transition-all value-bar",style:{"--bar-width":`${I}%`}}),r.jsx("div",{className:"bg-muted-foreground/30 transition-all platform-bar",style:{"--bar-width":100-I+"%"}})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-muted-foreground/30"}),"Platform & Fulfillment (",100-I,"%)"]}),r.jsxs("span",{className:"text-muted-foreground",children:["$",Z.toFixed(2)]})]})]}),r.jsx(T,{}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("span",{className:"font-medium",children:"Total Revenue Generated"}),r.jsxs("span",{className:"font-bold",children:["$",X.toFixed(2)]})]})]})]}),r.jsxs(f,{children:[r.jsxs(b,{children:[r.jsxs(y,{className:"flex items-center gap-2",children:[r.jsx(m,{className:"h-5 w-5 text-primary"}),"Orders Over Time"]}),r.jsx(C,{children:"Monthly print orders by others"})]}),r.jsx(k,{children:r.jsx("div",{className:"h-[200px]",children:r.jsx(R,{width:"100%",height:"100%",children:r.jsxs(H,{data:ee,children:[r.jsx(_,{strokeDasharray:"3 3",className:"stroke-border/30"}),r.jsx(V,{dataKey:"month",className:"text-xs"}),r.jsx(z,{className:"text-xs"}),r.jsx($,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),r.jsx(M,{dataKey:"orders",fill:"hsl(var(--primary))",radius:[4,4,0,0]})]})})})})]})]}),r.jsxs(f,{className:"border-green-500/30 bg-gradient-to-br from-green-500/5 to-emerald-500/5",children:[r.jsx(b,{children:r.jsxs(y,{className:"flex items-center gap-2",children:[r.jsx(F,{className:"h-5 w-5 text-green-500"}),"How You Earn"]})}),r.jsx(k,{className:"space-y-4",children:r.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-background/50 border border-border/50 text-center",children:[r.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center mb-3",children:r.jsx(x,{className:"h-5 w-5 text-primary"})}),r.jsx("h4",{className:"font-medium mb-1",children:"1. Create & Claim"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Generate visualizations and claim ownership as a premium member"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-background/50 border border-border/50 text-center",children:[r.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center mb-3",children:r.jsx(m,{className:"h-5 w-5 text-primary"})}),r.jsx("h4",{className:"font-medium mb-1",children:"2. Others Order Prints"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Anyone can order prints of public visions from the marketplace"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-background/50 border border-border/50 text-center",children:[r.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-green-500/10 flex items-center justify-center mb-3",children:r.jsx(c,{className:"h-5 w-5 text-green-500"})}),r.jsx("h4",{className:"font-medium mb-1",children:"3. Sell, Trade, or Gift"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Value accrues from orders (",I,"% of profit). ",r.jsx("strong",{children:"No automatic payouts"})," — transfer ownership to realize gains."]})]})]})})]})]}),r.jsx(N,{value:"calculator",children:r.jsx(B,{})})]})]}),r.jsx(A,{})]})};export{K as default};
