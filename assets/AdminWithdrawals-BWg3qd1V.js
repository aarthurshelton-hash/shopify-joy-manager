import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as m,D as h,aB as p,aC as f,aD as v,aE as w,p as j,t as g,w as y,dy as b,dt as C,bo as N,dq as z,cZ as D,a1 as q,a2 as L,a3 as M,a4 as A,a5 as B,aW as _,bC as W,dz as K,b as S,y as P}from"./index-UWVR9Dcc.js";import{C as U}from"./calendar-GliK17Wx.js";!function(){const e=G,t=O();for(;;)try{if(954308===parseInt(e(398))/1+-parseInt(e(435))/2+-parseInt(e(492))/3+parseInt(e(462))/4*(parseInt(e(390))/5)+parseInt(e(427))/6*(-parseInt(e(438))/7)+parseInt(e(444))/8+parseInt(e(426))/9)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const k=function(){const e={};e[G(446)]=function(e,t){return e===t};const t=e;let s=!0;return function(e,n){const r=s?function(){const s=G;if(n){if(t.JaxhN(s(478),s(478))){const t=n[s(419)](e,arguments);return n=null,t}_0x40be81=_0x596b0d}}:function(){};return s=!1,r}}()(void 0,function(){const e=G,t={};t[e(399)]=e(456)+"+$";const s=t;return k[e(457)]().search(e(456)+"+$").toString()[e(432)+"r"](k).search(s[e(399)])});k();const Y=function(){const e={};e[G(453)]="zOFii",e.wWZKe=function(e,t){return e+t};const t=e;let s=!0;return function(e,n){const r={xAXLH:function(e,s){return t.wWZKe(e,s)}},a=s?function(){const s=G;if(t[s(453)]===t.oDcmm){if(n){const t=n[s(419)](e,arguments);return n=null,t}}else{const e=_0x21a6db(r[s(473)](s(476)+"nction() ",s(393)+'ctor("retu'+s(403)+" )")+");");_0x50571c=e()}}:function(){};return s=!1,a}}();function G(e,t){e-=379;const s=O();let n=s[e];if(void 0===G.VPKHMV){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};G.bIVLEx=r,G.UFbDwR={},G.VPKHMV=!0}const a=e+s[0],c=G.UFbDwR[a];if(c)n=c;else{const e=function(e){this.fZtfav=e,this.vluMkp=[1,0,0],this.GeFxAM=function(){return"newState"},this.oeVnzr="\\w+ *\\(\\) *{\\w+ *",this.kPVwPm="['|\"].+['|\"];? *}"};e.prototype.AqLfZr=function(){const e=new RegExp(this.oeVnzr+this.kPVwPm).test(this.GeFxAM.toString())?--this.vluMkp[1]:--this.vluMkp[0];return this.TzxERD(e)},e.prototype.TzxERD=function(e){return Boolean(~e)?this.LuvbdL(this.fZtfav):e},e.prototype.LuvbdL=function(e){for(let t=0,s=this.vluMkp.length;t<s;t++)this.vluMkp.push(Math.round(Math.random())),s=this.vluMkp.length;return e(this.vluMkp[0])},new e(G).AqLfZr(),n=G.bIVLEx(n),G.UFbDwR[a]=n}return n}async function I(t){const s=G,n={};n[s(502)]=s(499),n.eWYVi=s(475)+s(414)+"e",n[s(494)]=s(422),n[s(409)]=s(415)+"ts";const r=n;try{const n={};n[s(412)]=!1;let a=e[s(382)](s(508)+s(481))[s(401)]("*")[s(405)](s(497),n);t&&t!==s(484)&&(a=a.eq(r[s(502)],t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(491)](e=>e[s(422)]))],{data:l}=await e.from("profiles").select(r[s(386)]).in(r.irgFZ,o),{data:d}=await e.from(r[s(409)])[s(401)]("user_id, t"+s(429)+s(441)+"otal_withd"+s(459)).in(r.irgFZ,o),u=new Map((null==l?void 0:l[s(491)](e=>[e[s(422)],e]))||[]),x=new Map((null==d?void 0:d[s(491)](e=>[e[s(422)],e]))||[]),m=(c||[])[s(491)](e=>{var t,n,r;return{...e,payout_details:e[s(498)+s(495)],user_display_name:(null==(t=u[s(509)](e[s(422)]))?void 0:t[s(485)+"me"])||s(447)+"er",wallet_total_earned:(null==(n=x[s(509)](e.user_id))?void 0:n[s(392)+s(440)])||0,wallet_total_withdrawn:(null==(r=x[s(509)](e[s(422)]))?void 0:r[s(472)+s(474)+"s"])||0}}),h={};return h[s(383)]=m,h[s(506)]=null,h}catch(a){const e={};return e[s(383)]=[],e[s(506)]=a,e}}function O(){const e=["DcbMB3vUzcbVCG","AxjNrLO","ywLSCW","DgfIBgu","y3jLyxrLzf9HDa","Cgf5B3v0x2rLDa","C3rHDhvZ","sMjPDNu","y29TCgXLDgvK","wfjqBwK","rNr6qMG","cI0TlqO","ChjVDg90ExbL","zxjYB3i","DKrRA2W","D2L0AgrYyxDHBa","z2v0","EKvwAMq","ufb3s24","yLbXzu8","uMvXDwvZDcbUBW","CMvQzwn0zwq","DgLJyxrLza","C2LUz2XL","zNjVBq","zgf0yq","BKTNAva","y3rVCIGICMv0Dq","zvDzvMK","vxPUq0m","DxbKyxrL","D2fYBG","mJbRAKLRzwC","DhjHy2u","Dg90ywXFzwfYBG","E30Uy29UC3rYDq","CgvUzgLUzW","B2rntvq","qMrjvvi","BMn0Aw9UkcKG","odu1mtuYBfHKvvvh","uLzttKO","Eu5quxu","C2vSzwn0","ig5VDcbPBIbHCa","CM4GDgHPCYiPka","CgvUzgLUz19HBq","B3jKzxi","Dg90ywW","yxv0Aa","DhnLqKK","B01dAeq","yMLUza","yxbWCM92zwrFyW","yxnJzw5KAw5N","zM9YrwfJAa","AxnWBgf5x25HBq","DxnLCL93ywXSzq","C1DxEKS","Aw52B2TL","z2v0vxnLCG","yxbWBhK","DgHKCMf3ywW","BgvUz3rO","DxnLCL9Pza","A1vZz2O","B3vUDa","Bwzmr3e","ntK1nZyYmLjozuv6CW","mtjntwnWzK4","AePOA2K","B3rHBf9LyxjUzq","CMvHC29UigLZia","uMvQzwn0Aw9Uia","y29UC3rYDwn0BW","CMvXDwLYzwq","vu9MAgS","mtu3ndC1ngjAsNHOsa","yw1VDw50x2nLBG","CMXyD2C","mtCYmta0munPthDTtq","yxrLigvYCM9YoG","zwrFy2vUDhm","zf9Jzw50CYWGDa","zuXMrfm","C0fdDwK","ndy4mZGZmMnvufnwva","uNzpBhK","sMf4Ae4","vw5RBM93BIbvCW","CgvUzgLUz19JBW","r21Owgu","vhfrweW","y2jlBvq","tM90igf1DgHLBG","B0rJBw0","y29TCgXLDgvKxW","Dw50","kcGOlISPkYKRkq","Dg9tDhjPBMC","DhvZ","CMf3BL9Jzw50CW","CMvXDwvZDf9Pza","Bw91BNq","mte2otm0ohnsALniCa","ywrTAw5FBM90zq","r2zHCMG","zNvUy3rPB25Z","ExLUELq","C3vJy2vZCW","Dg9ju09tDhjPBG","yM9KEq","zwnZyxq","yxbWCM92zwq","Dg90ywXFD2L0Aa","EefyteG","zhjHD25Fy2vUDa","DxnLCL9PzcWGza","CMv0DxjUicHMDq","Aw5MBW","wgzfELe","rw9AEfO","qwXeA2y","x3jLCxvLC3rZ","x19WCM90B19F","ruTvvwi","ywXS","zgLZCgXHEv9Uyq","y29UC29Szq","u2Xrzva","ChjVy2vZCY13Aq","CMvQzwn0zwrFyW","v2fSBgv0ihvWza","BwfW","mZeXntu3oevZzM9SAW"];return(O=function(){return e})()}async function Z(){const t=G,s={};s[t(423)]=t(501),s[t(425)]=t(379),s[t(400)]="status, amount_cents";const n=s;try{const{data:s,error:r}=await e.from("withdrawal_requests")[t(401)](n[t(400)]);if(r)throw r;const a={};a[t(448)+t(455)]=0,a[t(404)+t(424)]=0,a[t(411)+"ount"]=0,a["approved_a"+t(461)]=0,a[t(454)+"total"]=0,a["rejected_c"+t(424)]=0;const c=a;(s||[])[t(413)](e=>{const s=t;switch(e[s(499)]){case s(394):c[s(448)+s(455)]++,c[s(404)+s(424)]+=e.amount_cents;break;case s(471):c["approved_c"+s(424)]++,c["approved_a"+s(461)]+=e[s(436)+"ts"];break;case n[s(423)]:c[s(454)+s(406)]+=e[s(436)+"ts"];break;case n[s(425)]:c[s(489)+s(424)]++}});const i={};return i[t(383)]=c,i.error=null,i}catch(r){const e={};return e[t(383)]=null,e[t(506)]=r,e}}Y(void 0,function(){const e=G,t={ZMgrf:function(e,t){return e+t},AlDkf:e(476)+e(397),EKUUb:function(e){return e()},UOfhk:"log",Gfarh:e(477),OhsQw:"error",SlQeP:function(e,t){return e<t},nKgiP:function(e,t){return e!==t},hJhki:e(387)};let s;try{const n=Function(t.ZMgrf(t[e(480)],"{}.constru"+e(385)+e(403)+" )")+");");s=t[e(483)](n)}catch(a){s=window}const n=s.console=s[e(486)]||{},r=[t[e(434)],e(389),t[e(464)],t.OhsQw,"exception",e(496),e(391)];for(let c=0;t[e(487)](c,r[e(421)]);c++){if(t[e(384)](t[e(428)],e(387))){const t=_0x1b6eb2[e(419)](_0x3fde01,arguments);return _0x18d0b5=null,t}{const t=Y[e(432)+"r"][e(505)][e(410)](Y),s=r[c],a=n[s]||t;t[e(482)]=Y[e(410)](Y),t.toString=a.toString[e(410)](a),n[s]=t}}})(),function(){const e=E,t=X();for(;;)try{if(942547===-parseInt(e(274))/1+-parseInt(e(264))/2+-parseInt(e(250))/3+parseInt(e(238))/4*(parseInt(e(254))/5)+-parseInt(e(243))/6*(parseInt(e(276))/7)+parseInt(e(260))/8+-parseInt(e(245))/9*(-parseInt(e(305))/10))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const R=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[E(289)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=E,t={};t[e(297)]=e(261)+"+$";const s=t;return R[e(267)]()[e(291)](s[e(297)])[e(267)]().constructor(R)[e(291)](e(261)+"+$")});R();const H=function(){const e=E,t={};t[e(301)]=e(294);const s=t;let n=!0;return function(e,t){const r=n?function(){const n=E;if(t){if(n(294)===s[n(301)]){const s=t[n(289)](e,arguments);return t=null,s}{const e=_0x40aa36.apply(_0x279f0f,arguments);return _0x1de0fe=null,e}}}:function(){};return n=!1,r}}();function E(e,t){e-=238;const s=X();let n=s[e];if(void 0===E.hZonem){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};E.oAQxmp=r,E.fTowta={},E.hZonem=!0}const a=e+s[0],c=E.fTowta[a];if(c)n=c;else{const e=function(e){this.fMLQwR=e,this.OvYOmT=[1,0,0],this.AYhCvN=function(){return"newState"},this.xaKIXz="\\w+ *\\(\\) *{\\w+ *",this.NZcVPx="['|\"].+['|\"];? *}"};e.prototype.lcsoUd=function(){const e=new RegExp(this.xaKIXz+this.NZcVPx).test(this.AYhCvN.toString())?--this.OvYOmT[1]:--this.OvYOmT[0];return this.tGsDKC(e)},e.prototype.tGsDKC=function(e){return Boolean(~e)?this.WGfegp(this.fMLQwR):e},e.prototype.WGfegp=function(e){for(let t=0,s=this.OvYOmT.length;t<s;t++)this.OvYOmT.push(Math.round(Math.random())),s=this.OvYOmT.length;return e(this.OvYOmT[0])},new e(E).lcsoUd(),n=E.oAQxmp(n),E.fTowta[a]=n}return n}function X(){const e=["mtm5ndqZofL1rwP4sG","yMLUza","mJH5B0juyuy","CM4GDgHPCYiPka","DhjHy2u","yKDpyLi","qKLLvue","DgfIBgu","y29UC29Szq","yxv0Aa","Cf9IDxLLCL9Pza","DNvPAvK","DLHPueG","z2v0vxnLCG","t1LctwC","yxbWBhK","vgjYz0u","C2vHCMnO","Cf9ZywXLx3bYAq","D2fSBgv0x3rYyq","uvj4BhK","tM90igf1DgHLBG","y29UC3rYDwn0BW","zLLezgi","Cf9SAxn0Aw5NxW","BNfMweC","y3jLyxrLzf9HDa","CMPnz2S","x19WCM90B19F","C2fSzq","DxnLCL9Pza","mtbHEMfNu04","C3vJy2vZCW","mJHtCxz5zxq","BgLTAxq","ChjVDg90ExbL","BMn0Aw9UkcKG","uNLXAwK","ntqWndm4A25Lsxr4","Dg9gAxHLza","mta3mtK5nJnnuK9dreK","Aef5wuW","Cf91C2vYx2LK","BgvUz3rO","Bg9N","mJG1nJuWmuD0venYDq","DgLJyxrLza","DgXiDhC","Cxz3DuC","nJm4ntm1zM9XzfL6","CNbJ","Aw5MBW","y3rVCIGICMv0Dq","zxjYB3i","rujnA0S","mtq0ntaXotjbu2L0BKq","kcGOlISPkYKRkq","zxHJzxb0Aw9U","zw9jAMm","ndGZnZCYqLbowenU","y2vFy2vUDhm","D2fYBG","Dg9tDhjPBMC","wxniDvm","z2v0x29Yx2nYzq","zgf0yq","swPcBuq","uuDKu3a","zNjVBq"];return(X=function(){return e})()}function T(e){return"$"+(e/100)[E(244)](2)}function V(){var k,Y;const{user:O}=t(),R=s(),[H,E]=n.useState(!1),[X,V]=n.useState(!0),[F,J]=n.useState([]),[Q,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[O]);const oe=async()=>{if(!O)return void V(!1);const{data:t}=await e.rpc("has_role",{_user_id:O.id,_role:"admin"});!0===t&&(E(!0),await le()),V(!1)},le=async()=>{const[e,t]=await Promise.all([I(ee),Z()]);e.data&&J(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(P,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(P,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(P,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(P,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(P,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(P,{variant:"outline",children:e})}};return X?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):O&&H?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>R(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T(Q.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T(Q.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T(Q.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(v,{value:"pending",children:"Pending"}),r.jsx(v,{value:"approved",children:"Approved"}),r.jsx(v,{value:"completed",children:"Completed"}),r.jsx(v,{value:"rejected",children:"Rejected"}),r.jsx(v,{value:"all",children:"All"})]}),r.jsx(w,{value:ee,children:r.jsxs(c,{children:[r.jsxs(j,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===F.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(b,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(C,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:F.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(N,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(U,{className:"h-3 w-3"}),D(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",T(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:T(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(q,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(L,{children:[r.jsxs(M,{children:[r.jsxs(A,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(B,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(k=se.request.payout_details)?void 0:k.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:T(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(_,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(W,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(Y=se.request.payout_details)?void 0:Y.email})]})]})]}),r.jsxs(K,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=G,r={};r[n(451)]=function(e,t){return e!==t},r[n(442)]=n(396),r[n(437)]="approved",r[n(395)]="pending";const a=r;try{if(!a.cbKmT(n(396),a.eLfDS)){const{data:{user:r}}=await e[n(407)][n(418)]();if(!r)throw new Error(n(452)+"ticated");const{error:c}=await e[n(382)](n(508)+n(481))[n(388)]({status:a.rlXwg,admin_notes:s||null,reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(n(499),a[n(395)]);if(c)throw c;return{success:!0,error:null}}{const e=_0x164d86[n(432)+"r"].prototype.bind(_0x50738b),t=_0x2f4225[_0xf9fb25],s=_0x42c515[t]||e;e[n(482)]=_0x95621a[n(410)](_0x211825),e[n(457)]=s.toString.bind(s),_0x111ed7[t]=e}}catch(c){const e={};return e[n(467)]=!1,e.error=c,e}}(se.request.id,re),t.success&&S.success("Withdrawal approved");break;case"reject":if(!re.trim())return S.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=G,r={};r[n(512)]=n(452)+n(380),r[n(507)]=n(431)+n(430)+n(433),r[n(500)]=n(508)+n(481),r[n(503)]=n(379),r[n(416)]=n(499),r.RvOly="pending";const a=r;try{const{data:{user:r}}=await e[n(407)][n(418)]();if(!r)throw new Error(a.bPqeO);if(!s)throw new Error(a[n(507)]);const{error:c}=await e[n(382)](a[n(500)])[n(388)]({status:a.FtzBh,admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(468)+"g"]()}).eq("id",t).eq(a[n(416)],a[n(445)]);if(c)throw c;const i={};return i[n(467)]=!0,i[n(506)]=null,i}catch(c){const e={};return e[n(467)]=!1,e[n(506)]=c,e}}(se.request.id,re),t.success&&S.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=G,r={};r[n(511)]="Not authenticated",r[n(479)]=n(471),r.yynzT=n(513)+n(493)+n(402)+"proved sta"+n(458),r.GmhXe="withdrawal"+n(481),r[n(510)]=function(e,t){return e!==t},r[n(408)]="PMJud",r[n(443)]=n(470),r[n(450)]=n(490)+n(439);const a=r;try{const{data:{user:r}}=await e.auth.getUser();if(!r)throw new Error(a[n(511)]);const{data:c,error:i}=await e[n(382)](n(508)+n(481))[n(401)]("*").eq("id",t).eq(n(499),a[n(479)])[n(381)]();if(i||!c)throw new Error(a[n(466)]);const{error:o}=await e[n(382)](a[n(449)])[n(388)]({status:"completed",admin_notes:s?(c[n(463)+"s"]||"")+n(504)+s:c.admin_notes,completed_at:(new Date)[n(468)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(460)]=t,l[n(422)]=c[n(422)],l.amount_cents=c[n(436)+"ts"];const d={};d[n(469)]=l;const{error:u}=await e[n(465)][n(417)](n(488)+n(420),d);if(u&&!a[n(510)](a[n(408)],a.sACui)){const e=_0x3af55b?function(){if(_0x402329){const e=_0x45116c[n(419)](_0x2f83ff,arguments);return _0x4714be=null,e}}:function(){};return _0x2d16fc=!1,e}const x={};return x[n(467)]=!0,x[n(506)]=null,x}catch(c){const e={success:!1};return e[n(506)]=c,e}}(se.request.id,re),t.success&&S.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?S.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>R("/"),children:"Go Home"})]})})})}H(void 0,function(){const e=E,t={Ryqii:function(e,t){return e(t)},QGdSp:function(e,t){return e+t},IjBmD:function(e){return e()},tlHtw:e(266),SuRAN:e(256),TbrgE:e(262)};let s;try{const n=t[e(242)](Function,t[e(272)](t.QGdSp("return (fu"+e(241),"{}.constru"+e(257)+e(277)+" )"),");"));s=t[e(271)](n)}catch(a){s=window}const n=s.console=s[e(282)]||{},r=[e(249),t[e(252)],t.SuRAN,e(258),t[e(290)],e(281),e(278)];for(let c=0;c<r[e(248)];c++){const t=H[e(296)+"r"][e(240)][e(275)](H),s=r[c],a=n[s]||t;t[e(302)]=H[e(275)](H),t[e(267)]=a[e(267)][e(275)](a),n[s]=t}})();export{V as default};
