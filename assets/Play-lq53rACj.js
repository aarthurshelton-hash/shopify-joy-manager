import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as B,ai as D,y as q,bF as L,bG as A,b6 as S,ae as H,bH as P,ah as I,bI as K,B as T,bJ as G,bK as E,bL as U,bM as O,bN as W,bO as Y,bP as _,bQ as R,bR as F,bS as J,bT as Z,bU as V,bV as X,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as Be,av as De,aw as qe,c8 as Le,aM as Ae,c9 as Se,H as He,P as Pe,ca as Ie,b3 as Ke,bs as Te,be as Ge,cb as Ee,aP as Ue,cc as Oe,d as We,b2 as Ye,a9 as _e,cd as Re,ce as Fe,cf as Je,al as Ze,au as Ve}from"./index-CDYK3n_t.js";import{L as Xe}from"./LiveColorLegend-Dx0nG9aJ.js";import{T as Qe}from"./trending-down-BH0XMLTI.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-htqZYAjH.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=ut,t=ht();for(;;)try{if(434378===-parseInt(e(405))/1+-parseInt(e(417))/2+parseInt(e(395))/3*(parseInt(e(418))/4)+parseInt(e(385))/5*(parseInt(e(389))/6)+parseInt(e(406))/7*(parseInt(e(416))/8)+-parseInt(e(424))/9*(-parseInt(e(393))/10)+parseInt(e(381))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){const e=ut,t={};t.JqcFr=e(439);const n=t;let s=!0;return function(t,r){const a=e;if(n.JqcFr===a(370)){const e=_0xe14494?function(){if(_0x265041){const e=_0x10a2cf[a(434)](_0x2df328,arguments);return _0x5a2851=null,e}}:function(){};return _0x4c04fe=!1,e}{const e=s?function(){if(r){const e=r[a(434)](t,arguments);return r=null,e}}:function(){};return s=!1,e}}}()(void 0,function(){const e=ut;return dt[e(375)]()[e(427)](e(407)+"+$").toString()[e(380)+"r"](dt)[e(427)](e(407)+"+$")});function ut(e,t){e-=369;const n=ht();let s=n[e];if(void 0===ut.wiWaiZ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ut.DwbOlm=r,ut.wLuHRB={},ut.wiWaiZ=!0}const a=e+n[0],i=ut.wLuHRB[a];if(i)s=i;else{const e=function(e){this.RuJlkf=e,this.BqRHKz=[1,0,0],this.BaaNUo=function(){return"newState"},this.YcQWQQ="\\w+ *\\(\\) *{\\w+ *",this.VGXfCA="['|\"].+['|\"];? *}"};e.prototype.SVVPKP=function(){const e=new RegExp(this.YcQWQQ+this.VGXfCA).test(this.BaaNUo.toString())?--this.BqRHKz[1]:--this.BqRHKz[0];return this.MAbuGj(e)},e.prototype.MAbuGj=function(e){return Boolean(~e)?this.CunQgt(this.RuJlkf):e},e.prototype.CunQgt=function(e){for(let t=0,n=this.BqRHKz.length;t<n;t++)this.BqRHKz.push(Math.round(Math.random())),n=this.BqRHKz.length;return e(this.BqRHKz[0])},new e(ut).SVVPKP(),s=ut.DwbOlm(s),ut.wLuHRB[a]=s}return s}dt();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ut(434)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function ht(){const e=["yxbWBhK","Bw92zxmGyxzHAq","qwnXuKK","AxnjBNn1zMzPyW","AxntDgfSzw1HDa","vNPLzhK","D2fYBG","rhLgzwi","rhjHDYbIEsbPBG","wMT6y2S","serADKu","zxjYB3i","x19WCM90B19F","y3rVCIGICMv0Dq","Dg9tDhjPBMC","DKDzCvK","zfjLCgv0AxrPBW","DgHYzwvMB2XKxW","C3vMzMLJAwvUDa","y29UC3rYDwn0BW","mtm0ndaYnZnJvgHhBLG","rhjHDYbIEsb0Aa","zsbMAwz0Es1TBW","AwvUDe1HDgvYAq","mtq4ntvxEe1QDKu","Aw5ZDwzMAwnPzq","BgvUz3rO","CMv0DxjUicHMDq","mtmYBuHtEeHH","t0vbvwq","Ce1rs3K","ChjVDg90ExbL","mZbgzxvQtuK","E30Uy29UC3rYDq","otKYn0XUt1zoza","C2HVCNrnzxnZyq","CMvWzxrPDgLVBG","vuDOtve","sw5ZDwzMAwnPzq","AxneCMf3","BNrFBwf0zxjPyq","u3rHBgvTyxrLiq","uLjkEuC","Bg9N","odi3mdqYrNnhrNfg","mtGZodLVtNLZu2W","kcGOlISPkYKRkq","qvHzvey","CMvHC29U","wuviwKK","ug1Vsxe","uM5bD1m","zMvU","Aw5MBW","y29UC29Szq","mti4ofLnAKPysq","mtu2nteYnMzvA0vnDG","mJq0CLvQthru","DgfIBgu","CM4GDgHPCYiPka","BwvZC2fNzq","x3j1Bgu","yMLUza","mZK1otq2zeDnvg9Y","yxzYuMW","zMLMDhLFBw92zq","C2vHCMnO","rhjHDW","zxHJzxb0Aw9U","Dw5RBM93BG","ie5VigXLz2fSia","r2fTzsbKCMf3BG","BMHTv1u"];return(ht=function(){return e})()}function xt(e){const t=ut,n={};n[t(411)]=t(402),n[t(408)]=t(382)+"reefold repetition.",n.RnAwS=t(369)+t(379)+" material.",n.YEHZI="50-Move Rule",n[t(371)]=t(430);const s=n;if(e[t(438)+"e"]()){const e={};return e[t(409)]="stalemate",e[t(421)]=t(402)+t(431)+t(435)+"lable.",e.shortMessage=s[t(411)],e}if(e["isThreefol"+t(377)+"n"]()){const e={};return e[t(409)]=t(378)+t(397),e[t(421)]=s[t(408)],e[t(396)+"ge"]="Threefold Repetition",e}if(e[t(437)+t(384)+"al"]()){const e={};return e[t(409)]=t(386)+t(401)+"l",e[t(421)]=s[t(412)],e[t(396)+"ge"]=t(399)+"nt Material",e}const r=e[t(413)]();if(parseInt(r.split(" ")[4],10)>=100){const e={};return e[t(409)]=t(426)+t(422),e[t(421)]="Draw by th"+t(383)+"ve rule.",e[t(396)+"ge"]=s[t(410)],e}const a={};return a[t(409)]=s[t(371)],a[t(421)]=t(432)+"!",a[t(396)+"ge"]=t(428),a}function pt(e){return{AcqRI:function(e,t){return e(t)}}[ut(436)](xt,e).message}function ft(e,t){e-=217;const n=yt();let s=n[e];if(void 0===ft.WaMCXw){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ft.IvApYl=r,ft.WLQvYz={},ft.WaMCXw=!0}const a=e+n[0],i=ft.WLQvYz[a];if(i)s=i;else{const e=function(e){this.FSijyp=e,this.XdmSWc=[1,0,0],this.eyVlsH=function(){return"newState"},this.AvUxLD="\\w+ *\\(\\) *{\\w+ *",this.rrBAeb="['|\"].+['|\"];? *}"};e.prototype.FCrqdN=function(){const e=new RegExp(this.AvUxLD+this.rrBAeb).test(this.eyVlsH.toString())?--this.XdmSWc[1]:--this.XdmSWc[0];return this.piVonI(e)},e.prototype.piVonI=function(e){return Boolean(~e)?this.KcVRAE(this.FSijyp):e},e.prototype.KcVRAE=function(e){for(let t=0,n=this.XdmSWc.length;t<n;t++)this.XdmSWc.push(Math.round(Math.random())),n=this.XdmSWc.length;return e(this.XdmSWc[0])},new e(ft).FCrqdN(),s=ft.IvApYl(s),ft.WLQvYz[a]=s}return s}mt(void 0,function(){const e=ut,t={nhmWU:"(((.+)+)+)+$",JLzHi:function(e,t){return e===t},UGhMQ:e(403),OEAUd:function(e,t){return e(t)},tkTYP:e(394)+e(374)+e(420)+" )",FVZzO:function(e){return e()},DyFeb:e(404),vGYqY:e(440),pMQKy:e(414),Hrzoo:e(419)},n=t.FVZzO(function(){const n=e;if(t.JLzHi(n(425),t[n(398)]))return _0x20c6ea.toString()[n(427)](t[n(433)])[n(375)]()[n(380)+"r"](_0x388e2a)[n(427)](t[n(433)]);{let e;try{e=t[n(390)](Function,n(388)+"nction() "+t.tkTYP+");")()}catch(s){e=window}return e}}),s=n[e(415)]=n[e(415)]||{},r=[t[e(441)],t[e(376)],t[e(391)],e(372),e(429),t.Hrzoo,"trace"];for(let a=0;a<r[e(387)];a++){const t=mt[e(380)+"r"][e(392)].bind(mt),n=r[a],i=s[n]||t;t[e(373)]=mt[e(423)](mt),t[e(375)]=i[e(375)].bind(i),s[n]=t}})(),function(){const e=ft,t=yt();for(;;)try{if(986313===-parseInt(e(227))/1+-parseInt(e(255))/2*(parseInt(e(268))/3)+-parseInt(e(275))/4+-parseInt(e(283))/5*(parseInt(e(244))/6)+-parseInt(e(262))/7+-parseInt(e(239))/8+parseInt(e(314))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ft(257)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ft,t={};t[e(325)]=e(296)+"+$";const n=t;return gt[e(246)]()[e(256)](n.AYIDH)[e(246)]()[e(281)+"r"](gt)[e(256)](e(296)+"+$")});gt();const vt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ft(257)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();vt(void 0,function(){const e=ft,t={yztqx:function(e,t){return e(t)},XAyzB:function(e,t){return e+t},dUwAi:e(229)+e(240)+'rn this")( )',Usfal:e(307),wxRrm:e(223),TEAMs:e(253),kqOjU:"trace",uimAg:function(e,t){return e<t}};let n;try{n=t[e(278)](Function,t.XAyzB(e(236)+e(286),t[e(266)])+");")()}catch(a){n=window}const s=n.console=n.console||{},r=[t.Usfal,t[e(285)],e(316),e(277),e(232),t[e(312)],t[e(234)]];for(let i=0;t.uimAg(i,r[e(310)]);i++){const t=vt[e(281)+"r"][e(233)][e(299)](vt),n=r[i],a=s[n]||t;t[e(298)]=vt.bind(vt),t[e(246)]=a[e(246)][e(299)](a),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=ft,r={hGisc:function(e,t){return e||t},SnBKg:function(e){return e()},prbwN:function(e,t){return e*t},eKLSA:function(e,t){return e===t},CjlQH:"xaUZk",ccJTy:function(e,t){return e*t},ZUytF:s(302),GcSjr:function(e,t){return e+t},tvCzS:function(e,t){return e+t},XyUQj:s(304),ncVmt:s(320),BrSFg:"sine",CwggS:"triangle",hXvel:s(267),CFNmQ:function(e,t,n){return e(t,n)},dwgYO:s(323),FynhV:function(e,t,n){return e(t,n)},BZFkX:function(e,t,n,s,r,a){return e(t,n,s,r,a)},RkMEV:function(e,t,n){return e(t,n)},VgtvM:function(e,t,n,s,r,a){return e(t,n,s,r,a)},JOLAS:function(e,t,n){return e(t,n)},RoaDi:"victory",UOTet:function(e,t,n){return e(t,n)},TirEf:function(e,t,n,s,r,a){return e(t,n,s,r,a)},Nzadc:function(e,t,n){return e(t,n)},nTOqQ:"draw",byEVn:s(284),IyMKt:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ASheB:function(e,t){return e(t)}},a={};a[s(260)]=null,a[s(230)]=null;const i=r.ASheB(t.useRef,a),o=t.useCallback(()=>{const e=s;if(!i.current[e(260)])try{const t=new(window[e(289)+"xt"]||window[e(226)+"oContext"]),s=t.createGain();s[e(224)](t.destination),s.gain[e(273)]=n;const r={};r[e(260)]=t,r[e(230)]=s,i.current=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;i.current[e(230)]&&(i.current[e(230)].gain[e(273)]=n)},[n]);const c=t.useCallback((t,n,a="sine",c=.01,l=.1,d)=>{const u=s;if(!e)return;o();const{context:m,gainNode:h}=i[u(305)];if(r[u(318)](!m,!h))return;const x=m[u(254)+u(274)](),p=m[u(276)]();x.type=a,x[u(322)][u(308)+"Time"](t,m[u(265)+"e"]),d&&x[u(322)].exponentialRampToValueAtTime(d,m.currentTime+n),p[u(225)][u(308)+u(249)](0,m[u(265)+"e"]),p.gain[u(297)+u(245)+u(282)](1,m[u(265)+"e"]+c),p[u(225)][u(288)+u(251)+u(263)](.01,m[u(265)+"e"]+n-l),p[u(225)]["linearRamp"+u(245)+u(282)](0,m[u(265)+"e"]+n),x[u(224)](p),p.connect(h),x.start(m.currentTime),x[u(219)](m.currentTime+n)},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;r[a(291)](o);const{context:c,gainNode:l}=i[a(305)];if(r[a(318)](!c,!l))return;const d=r[a(261)](c[a(247)],t),u=c.createBuffer(1,d,c[a(247)]),m=u[a(321)+a(250)](0);for(let e=0;e<d;e++){if(r[a(252)](a(222),r[a(258)])){const e=_0x592a86?function(){if(_0x2c6ecd){const e=_0x3fd515[a(257)](_0x5076ca,arguments);return _0x3a068f=null,e}}:function(){};return _0x1708d5=!1,e}m[e]=r[a(242)](Math[a(235)](),2)-1}const h=c[a(290)+"erSource"]();h[a(311)]=u;const x=c[a(287)+a(272)]();x[a(301)]=r.ZUytF,x[a(322)].value=n;const p=c[a(276)]();p[a(225)][a(308)+"Time"](.3,c.currentTime),p[a(225)][a(288)+a(251)+a(263)](.01,r[a(293)](c.currentTime,t)),h.connect(x),x[a(224)](p),p[a(224)](l),h[a(241)](c[a(265)+"e"]),h[a(219)](r.tvCzS(c.currentTime,t))},[e,o]),d=t.useCallback(t=>{const n=s;if(r[n(228)]!==r.XyUQj)_0x317262[n(305)][n(230)].gain[n(273)]=_0x370f54;else{if(!e)return;switch(t){case r[n(238)]:c(800,.08,r[n(243)],.005,.05),c(400,.06,r[n(271)],.005,.04);break;case"capture":l(.12,2e3),c(300,.1,n(313),.005,.08),c(150,.15,n(279),.01,.1);break;case r[n(280)]:c(600,.06,"sine",.005,.04),r.CFNmQ(setTimeout,()=>c(700,.06,n(279),.005,.04),80);break;case r[n(270)]:c(880,.15,r.CwggS,.01,.1),r.FynhV(setTimeout,()=>c(1100,.12,n(237),.01,.08),120);break;case n(259):r[n(306)](c,880,.2,r[n(243)],.01,.15),r[n(324)](setTimeout,()=>c(660,.2,n(279),.01,.15),150),r[n(264)](setTimeout,()=>c(440,.3,"sine",.01,.2),300),r.RkMEV(setTimeout,()=>c(330,.4,n(279),.01,.3),500);break;case n(303):r[n(217)](c,523,.12,r.BrSFg,.01,.08),setTimeout(()=>c(659,.12,n(279),.01,.08),100),setTimeout(()=>c(784,.2,n(279),.01,.15),200);break;case n(218):c(440,.15,r[n(271)],.01,.1),r[n(326)](setTimeout,()=>c(349,.25,"triangle",.01,.2),150);break;case r[n(309)]:c(523,.1,r[n(243)],.01,.08),setTimeout(()=>c(659,.1,n(279),.01,.08),100),setTimeout(()=>c(784,.1,n(279),.01,.08),200),r[n(292)](setTimeout,()=>c(1047,.3,"sine",.01,.25),300);break;case n(221):r.TirEf(c,392,.2,n(279),.02,.15),r[n(294)](setTimeout,()=>c(349,.2,n(279),.02,.15),200),r.Nzadc(setTimeout,()=>c(330,.3,"sine",.02,.25),400),setTimeout(()=>c(262,.4,n(279),.02,.35),650);break;case r[n(315)]:c(440,.15,r[n(243)],.01,.1),r.Nzadc(setTimeout,()=>c(440,.15,"sine",.01,.1),180),setTimeout(()=>c(523,.2,n(279),.01,.15),360);break;case r[n(248)]:c(200,.1,n(313),.005,.08),r.IyMKt(c,150,.08,"sawtooth",.005,.06)}}},[e,c,l]);t.useEffect(()=>()=>{const e=ft;i.current.context&&i[e(305)][e(260)][e(317)]()},[]);const u={};return u[s(269)]=d,u[s(231)]=o,u};function yt(){const e=["D2fYBG","y29UBMvJDa","z2fPBG","D2vIA2L0qxvKAq","mtuWmdi4oxnUEfD5vq","whLvuwO","E30Uy29UC3rYDq","z2fPBK5Vzgu","Aw5PDef1zgLV","zxHJzxb0Aw9U","ChjVDg90ExbL","A3fpALu","CMfUzg9T","CMv0DxjUicHMDq","DhjPyw5NBgu","BMnwBxq","nJyZmZy1nKLJwwrIuG","y3rVCIGICMv0Dq","C3rHCNq","y2nkvhK","qNjtrMC","mtq2nJe2DNzbBKnK","vg9wywX1zuf0va","Dg9tDhjPBMC","C2fTCgXLuMf0zq","yNLfvM4","vgLTzq","rgf0yq","BfjHBxbuB1zHBa","zuTmu0e","DgfIBgu","y3jLyxrLt3nJAq","mZqWrMrQsMrN","C2vHCMnO","yxbWBhK","q2PSuuG","y2HLy2TTyxrL","y29UDgv4Da","ChjID04","nZi3ntqWmuvOwMzQBq","DwvbDfrPBwu","q0zoBve","y3vYCMvUDfrPBq","zfv3qwK","y2fZDgXL","mtmWnJvSAxzQrM0","CgXHEvnVDw5K","zhDNwu8","q3DNz1m","ywrgAwX0zxi","DMfSDwu","BgXHDg9Y","mJGYmdeWoe9my3HjrG","y3jLyxrLr2fPBG","zxjYB3i","ExP0CxG","C2LUzq","AfH2zwW","y29UC3rYDwn0BW","Aw1L","mJy1BNz6A21Z","AwXSzwDHBa","D3HsCM0","BMn0Aw9UkcKG","y3jLyxrLqMLXDq","zxHWB25LBNrPyq","qxvKAw9dB250zq","y3jLyxrLqNvMzG","u25cs2C","vu9uzxq","r2ntANi","tNPHzgm","BMTps2G","kcGOlISPkYKRkq","BgLUzwfYuMfTCa","x19WCM90B19F","yMLUza","ChbVCNrLza","DhLWzq","Bg93CgfZCW","z2fTzvn0yxj0","svrfB2G","y3vYCMvUDa","qLPgA1G","Bg9N","C2v0vMfSDwvbDa","uM9HrgK","BgvUz3rO","yNvMzMvY","vevbtxm","C3f1yxjL","nJm4nJa3mZnYug10A20","BLrpCve","Aw5MBW","y2XVC2u","AeDPC2m","v2vIief1zgLVia","Bw92zq","z2v0q2HHBM5LBa","zNjLCxvLBMn5","y2HLy2S","rNLUAfy","qvLjreG","sK9mqvm","vMD0DK0","z2fTzuvUza","C3rVCa","qvbjig5VDcbZDq","zgvMzwf0","vu1XEMS"];return(yt=function(){return e})()}const wt=Mt;!function(){const e=Mt,t=Ct();for(;;)try{if(737863===-parseInt(e(528))/1+-parseInt(e(530))/2*(-parseInt(e(517))/3)+parseInt(e(499))/4*(parseInt(e(520))/5)+parseInt(e(504))/6+-parseInt(e(507))/7*(parseInt(e(501))/8)+parseInt(e(518))/9*(-parseInt(e(513))/10)+parseInt(e(535))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Mt(527)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Mt,t={};t[e(500)]=e(521)+"+$";const n=t;return jt[e(523)]()[e(505)](n.mvXUz)[e(523)]()[e(509)+"r"](jt)[e(505)](n[e(500)])});function Ct(){const e=["DhjHy2u","yMLUza","nZeYBvzpsvHI","BxzyvxO","mtmZnLvVENHoyW","sNLOBxO","CM4GDgHPCYiPka","ndy3mtC0ngrWEgrkyq","C2vHCMnO","BMn0Aw9UkcKG","mtu2oenuC0PXzW","v1nsrM0","y29UC3rYDwn0BW","zw5HyMXLza","zc1Zzxr0Aw5NCW","D2fYBG","ndqWBurMAKH3","y3rVCIGICMv0Dq","y29UC29Szq","x19WCM90B19F","mJuZnJqYnuXdzhLoCG","mJGZmZu2uNzQDeTL","A2LxDfi","mtq4nJv3EK5dAwW","kcGOlISPkYKRkq","ChjVDg90ExbL","Dg9tDhjPBMC","y2HLC3mTC291BG","BMfTzq","wwXlCwq","yxbWBhK","ndaXntqYvfvOqu1R","zxHJzxb0Aw9U","mNnPqw93yG","AgvdwM0","zxjYB3i","E30Uy29UC3rYDq","BgvUz3rO","ndq5nJK3nNPLrgTxqG","DgfIBgu"];return(Ct=function(){return e})()}jt();const Nt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Mt(527)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Nt(void 0,function(){const e=Mt,t={YlKqd:function(e,t){return e(t)},heCZm:"return (fu"+e(506),Jyhmz:e(533)+e(514)+e(503)+" )",kiWtR:"info",WSRFm:function(e,t){return e<t}};let n;try{n=t[e(526)](Function,t[e(531)]+t[e(502)]+");")()}catch(a){n=window}const s=n[e(515)]=n.console||{},r=["log",e(512),t[e(519)],e(532),e(529),e(536),e(497)];for(let i=0;t[e(508)](i,r[e(534)]);i++){const t=Nt[e(509)+"r"][e(522)][e(498)](Nt),n=r[i],a=s[n]||t;t[e(516)]=Nt[e(498)](Nt),t[e(523)]=a.toString[e(498)](a),s[n]=t}})();const kt={};function Mt(e,t){e-=497;const n=Ct();let s=n[e];if(void 0===Mt.smaTSB){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Mt.IxRhoH=r,Mt.Qrqlvi={},Mt.smaTSB=!0}const a=e+n[0],i=Mt.Qrqlvi[a];if(i)s=i;else{const e=function(e){this.tWFUZL=e,this.hqjKEa=[1,0,0],this.WUQHJN=function(){return"newState"},this.ZGeOIG="\\w+ *\\(\\) *{\\w+ *",this.EqJPmm="['|\"].+['|\"];? *}"};e.prototype.JzvymL=function(){const e=new RegExp(this.ZGeOIG+this.EqJPmm).test(this.WUQHJN.toString())?--this.hqjKEa[1]:--this.hqjKEa[0];return this.NRTKDO(e)},e.prototype.NRTKDO=function(e){return Boolean(~e)?this.kztqVw(this.tWFUZL):e},e.prototype.kztqVw=function(e){for(let t=0,n=this.hqjKEa.length;t<n;t++)this.hqjKEa.push(Math.round(Math.random())),n=this.hqjKEa.length;return e(this.hqjKEa[0])},new e(Mt).JzvymL(),s=Mt.IxRhoH(s),Mt.Qrqlvi[a]=s}return s}kt[wt(525)]=wt(524)+wt(511);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(510)]}))}),kt)),Bt=Dt;function Dt(e,t){e-=106;const n=At();let s=n[e];if(void 0===Dt.UETLCx){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Dt.hCaOFg=r,Dt.dcTsYf={},Dt.UETLCx=!0}const a=e+n[0],i=Dt.dcTsYf[a];if(i)s=i;else{const e=function(e){this.pUQuOC=e,this.pzwfSK=[1,0,0],this.cBtbqA=function(){return"newState"},this.vkPJaa="\\w+ *\\(\\) *{\\w+ *",this.qxcyfm="['|\"].+['|\"];? *}"};e.prototype.vBfJtz=function(){const e=new RegExp(this.vkPJaa+this.qxcyfm).test(this.cBtbqA.toString())?--this.pzwfSK[1]:--this.pzwfSK[0];return this.abuyhn(e)},e.prototype.abuyhn=function(e){return Boolean(~e)?this.bCEGIN(this.pUQuOC):e},e.prototype.bCEGIN=function(e){for(let t=0,n=this.pzwfSK.length;t<n;t++)this.pzwfSK.push(Math.round(Math.random())),n=this.pzwfSK.length;return e(this.pzwfSK[0])},new e(Dt).vBfJtz(),s=Dt.hCaOFg(s),Dt.dcTsYf[a]=s}return s}!function(){const e=Dt,t=At();for(;;)try{if(647425===parseInt(e(147))/1+parseInt(e(215))/2*(parseInt(e(194))/3)+-parseInt(e(264))/4+parseInt(e(369))/5*(parseInt(e(106))/6)+-parseInt(e(170))/7*(-parseInt(e(252))/8)+parseInt(e(286))/9*(-parseInt(e(160))/10)+parseInt(e(363))/11*(parseInt(e(372))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const qt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Dt(219)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Dt,t={bcykC:"(((.+)+)+)+$"},n=t;return qt[e(320)]()[e(109)](n[e(161)]).toString().constructor(qt)[e(109)](n.bcykC)});qt();const Lt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function At(){const e=["AxnnEvr1CM4","AKn2ue8","sKnVCKW","tMLQzeK","wxfQruG","vvbeqvrf","tw1nwgu","DK1us0m","igDHBwu","ugXLyxnLihnPzW","mtm5ogv4r1jeuW","yLz6EMe","ywXS","Bg9N","CNbJ","BwfW","CMvZAwDUr2fTzq","uMf0Aw5NoIa","yMXHy2TFCgXHEq","sefgwxa","v1DxrNq","r2r0rxe","Cu52D3e","DxbKyxrL","y29UC3rYDwn0BW","C3rHDhvZ","y2HHBgXLBMDLqW","Bwjhr0S","qxLjAeq","B2jpyMC","D2HPDgu","mJGXognOENnpCW","rxbgsLu","yvPiuva","zgvMzwf0","yxbWBhK","AgfSBgvUz2uGyW","zMvU","y29TCgXLDgvK","ChvIBgLJ","qwLNqxO","r2fTzsbUB3qGzG","Bw92zv9UDw1Izq","y2PJBKu","C3vIC3rYAw5N","y3jLyxrLzf9HDa","D2LUBMvYx2LK","zwXVx3jHDgLUzW","C211twi","y3vYCMvUDezLBG","ALLis0e","y2fZDgXL","z2fTzv9Pzd1LCq","Ew1Lswy","yKniEMC","Dw50Aw1Lza","Aw5JBhvKzxm","C3f1yxjL","x3jLBwfPBMLUzW","yMH6zK8","qLL3tMW","zhjHDW","r3LZteu","EejKA28","z0D4EKO","ywn0AxzL","svLmCKC","Bw92zv9Zyw4","oeTMy2DAEq","C2PgB3i","Bw92zxm","r2fTzsbHBhjLyq","r2LJswK","u1PPzKu","yMrZA2S","AM9PBKj5q29Kzq","D2HPDgvFDgLTzq","igv4CgLYzwqGyW","Auj0y2S","y29UC29Szq","mta2ndCYmfDWDvfrta","C2vSzwn0","sM9PBMvKigDHBq","zMf5BKW","BMvS","z2vUzxjHDgvFyW","ywrK","ufvuu3C","CLPyuNG","y29KztOG","yMXHy2TqywXLDa","BIbPBIb0BYbJCG","uw1HvwK","B3vUza","s3PPs1e","Dg9ju09tDhjPBG","q3zfyve","D2HPDgvFD2LUCW","y2HLy2TTyxrL","C3rHCNrLzef0","quTfCKK","CMfWAwrFmtu","mtCZmJvOuu9QtgK","zseGww91igfYzq","quPutei","CMvTB3zLq2HHBG","y2HHBM5LBa","Aw5MBW","Awq9zxeU","C2fU","tMLjsMW","DxnLCL9Pza","EM5KD1y","zNjVBq","DMLJDg9YEq","yMXHy2TqBgf5zq","teLiv3K","ww91ihDVBIe","D2HPDgvFCgfSzq","BIb0AgLZihzLCG","zhKGC3rHCNrLza","yMXHy2S","q2HHBgXLBMDLia","DhjHy2u","BKDXs0O","Cg9ZDgDYzxnFyW","rLLZwhy","z0TxvMi","Bw92zq","Bw92zunVDw50","qLzgzNq","y3vYCMvUDf9Mzq","qNnfAMS","r2fTzsbJCMvHDa","BgvUz3rO","Duj6Cvm","Dg9tDhjPBMC","sNjZEuy","AxndAgvJAW","AM9PBIbIEsbJBW","rwXUD0i","z2fTzvn0yxj0","y2HHBgXLBMDLxW","CKrQDNK","y3rVCIGICMv0Dq","v2HPDguGD2LUCW","zMLUza","BMvUDc4UlG","zLz2Cg8","Bw92zv9JB3vUDa","zYbMB3iGB3bWBW","BMv3","DgLTzv9JB250CG","Bg9FCMf0Aw5N","EwTluw0","CgfdAwS","ihbSyxLPBMCGyq","ExHYr1a","CMvZDwX0","BIbPBIb0BYbQBW","C2PZveu","CM4GDgHPCYiPka","q1rQBgW","CvH6ufu","rKXeA2y","zxPkz2i","wufWse8","Bw92zv91y2K","B2rL","AgfUz2vZ","C3rHCNrLzf9HDa","q01buMG","s09Jrg8","CgDU","vvvsqKi","BwfRzu1VDMu","A3Desee","seTRsMm","y2fWDhvYzq","nZDZqwPoAeK","veXjr1e","AxnmB2fKAw5N","D2HPDgvFCgXHEq","Aw4GysbNyw1L","DgLTzunVBNrYBW","nZvzr1j3y2O","y2fWDhvYzwq","wezQDgC","mta5mda1nM1Vuwv6Da","z2v0qxzHAwXHyG","rLbiExi","BMn0Aw9UkcKG","rMfPBgvKihrVia","CejsCNi","svnLruK","ugj6t3C","tw92zsbLCNjVCG","B2zMzxjeCMf3","y1DKA1K","BwvZC2fNzq","D2HPDgvuAw1LuG","A2P6vNy","z2fTzs0","BMv3uMf0Aw5N","mZK1ntHgCKTkzeG","BLjfBK0","y2HLy2S","C2vHCMnO","zxjYB3i","ELPqzhG","AxndAgvJA21HDa","E30Uy29UC3rYDq","Aw5Zzxj0","ywjHBMrVBMvK","yuDRz1C","r1Pisxm","D2zArem","seXeEvq","yuHrANG","tY1p","ugfXsfC","AMnxq2K","Cvv5Deq","D2HPDgvqBgf5zq","D2fYBG","v0HyDvm","A3v5t2W","zw1HAw5PBMC","yMLUza","vevrwLK","Bw92zwrtCxvHCG","y2HLC3nFz2fTzq","y2HLC3nFBw92zq","Bg9HzcbNyw1L","v2rNv3K","qMXHy2SGD2LUCW","zKvsA24","ChjVBw90Aw9U","rMzwDei","zxjFAwq","z0LYBfq","DxbKyxrLievmtW","ExryEKu","Bwf5yMvtAw5NBa","ihjHDgLUz3m6","mJCXody2D0Httg51","BxLdB2XVCG","DNzZvNu","z2fTzq","ChjVzMLSzxm","Bg9HzeDHBwu","s2nyqvO","v1PHChm","qNrqzKS","y2HHBMDL","AKfdAMS","EhD5zLi","DhHlyMu","ndyXmgjKsevKBG","yMn5A0m","ww91ihjLC2LNBG","AgfSBgvUz2vFyW","sw52ywXPzcbVCG","wuTxyMe","B0DTENi","z3zcqw4","CKLK","tY1plu8","oty0nJyZCMLct212","CMv0DxjUicHMDq","yMXHy2TFDgLTzq","ChjVDg90ExbL","AM9PBKDHBwu","EhDHAee","Bw92zxmT","B25LBNqGyxv0BW","BgvnB3zLCW","yMXHy2TFCgfSzq","C3vJy2vZCW","qNnUr1y","AM9PBIbNyw1L","DhrL"];return(At=function(){return e})()}Lt(void 0,function(){const e=Dt,t={ATymP:function(e,t){return e+t},jYHKA:function(e,t){return e+t},PaqHW:e(113)+e(328)+e(345)+" )",ISeEI:function(e){return e()},QjxbS:e(126),YKWba:e(291),cjcnE:e(110),bVzza:"exception",cHNga:e(307),PUTSw:function(e,t){return e<t}},n=t[e(378)](function(){const n=e;let s;try{s=Function(t.ATymP(t[n(234)](n(171)+n(375),t[n(122)]),");"))()}catch(r){s=window}return s}),s=n[e(263)]=n[e(263)]||{},r=[e(197),t.QjxbS,t[e(165)],t[e(227)],t[e(195)],"table",t.cHNga];for(let a=0;t[e(271)](a,r.length);a++){const t=Lt[e(208)+"r"][e(173)][e(130)](Lt),n=r[a],i=s[n]||t;t.__proto__=Lt[e(130)](Lt),t.toString=i[e(320)][e(130)](i),s[n]=t}})();const St={bullet_1:60,blitz_5:300};St[Bt(285)]=900,St[Bt(239)]=0;const Ht=St,Pt=Kt;!function(){const e=Kt,t=Gt();for(;;)try{if(710915===-parseInt(e(477))/1*(-parseInt(e(509))/2)+parseInt(e(480))/3*(-parseInt(e(520))/4)+-parseInt(e(519))/5*(-parseInt(e(478))/6)+parseInt(e(458))/7+parseInt(e(466))/8*(parseInt(e(514))/9)+-parseInt(e(491))/10+-parseInt(e(516))/11*(parseInt(e(460))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Kt(502)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Kt,t={};t.vNnyN=e(469)+"+$";const n=t;return It[e(483)]()[e(489)](n[e(475)])[e(483)]()[e(479)+"r"](It)[e(489)](e(469)+"+$")});function Kt(e,t){e-=456;const n=Gt();let s=n[e];if(void 0===Kt.vypzoP){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Kt.tCRwJI=r,Kt.iGfFOG={},Kt.vypzoP=!0}const a=e+n[0],i=Kt.iGfFOG[a];if(i)s=i;else{const e=function(e){this.DTyRaI=e,this.wIgTZC=[1,0,0],this.MerQsc=function(){return"newState"},this.aoENXk="\\w+ *\\(\\) *{\\w+ *",this.IHbOVQ="['|\"].+['|\"];? *}"};e.prototype.kSNQGo=function(){const e=new RegExp(this.aoENXk+this.IHbOVQ).test(this.MerQsc.toString())?--this.wIgTZC[1]:--this.wIgTZC[0];return this.mTDvfo(e)},e.prototype.mTDvfo=function(e){return Boolean(~e)?this.hjqfGq(this.DTyRaI):e},e.prototype.hjqfGq=function(e){for(let t=0,n=this.wIgTZC.length;t<n;t++)this.wIgTZC.push(Math.round(Math.random())),n=this.wIgTZC.length;return e(this.wIgTZC[0])},new e(Kt).kSNQGo(),s=Kt.tCRwJI(s),Kt.iGfFOG[a]=s}return s}It();const Tt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Kt(502)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Gt(){const e=["mtm2ntm4nunMwKrwzG","odqZmZiWv1H5EgTN","zgjHy2SGzMfPBa","z1HAu1G","ndCXmtq4m05Ru3fUBq","yuDSwuO","mZi4mJqYmeHlrNvSva","BvHuA0O","y3rVCIGICMv0Dq","zxjYB3i","Aw5MBW","rNvLuLa","mJK1otuYofncC1zvtq","sMvAvue","AgfWDgLJCW","kcGOlISPkYKRkq","u3rUyKO","wKrkB2i","BgLNAhq","DhjHy2u","vfjft1O","DK5UEu4","tvn5Cgi","odC4otv3Duz6Ewe","nK5rCxzSrq","y29UC3rYDwn0BW","nKDWt29Lva","Bg9N","ChjVDg90ExbL","Dg9tDhjPBMC","CM4GDgHPCYiPka","C2vSzwn0Aw9U","EfnZEKK","weHOALq","uNbsyuu","C2vHCMnO","D2fYBG","mZe5otaYmgX2Dw1pBW","uerfCuq","C3vJy2vZCW","BgvUz3rO","EgLqCvO","y3fwtgG","AxntDxbWB3j0zq","CerIALC","y29UC29Szq","AeH3wLy","BwvKAxvT","yxbWBhK","uNbxsKS","CMv0DxjUicHMDq","DgfIBgu","AgvHDNK","BMn0Aw9UkcKG","t3j3yKi","mJHTv0XjvxC","yMLUza","zwq6","s0rpt1O","x19WCM90B19F","oungq0XMDW","E30Uy29UC3rYDq","ndrXC1HXBuy","DMLICMf0zq","Dw5KzwzPBMvK"];return(Gt=function(){return e})()}Tt(void 0,function(){const e=Kt,t={XHhjT:"Haptic fee"+e(456)+"ed:",FueRP:e(471),RpRaE:function(e,t){return e(t)},StnbJ:"return (function() ",pPFJI:e(515)+e(462)+e(484)+" )",pDbjW:"jYoHC",RpWJK:e(490),mBAJZ:e(464),hHwZV:e(463),aGlYJ:"exception",JeZUA:e(473),mXTkJ:function(e,t){return e<t}};let n;try{if(e(471)!==t[e(465)]){const e=_0x518108.apply(_0x43f4e8,arguments);return _0x45585d=null,e}n=t[e(488)](Function,t[e(470)]+t.pPFJI+");")()}catch(a){if("wKdna"===t[e(498)])return _0x5d6780[e(490)](t[e(487)],_0x4f85ba),!1;n=window}const s=n[e(499)]=n.console||{},r=[e(481),t[e(503)],t.mBAJZ,t[e(500)],t[e(459)],e(505),t[e(467)]];for(let i=0;t[e(461)](i,r[e(494)]);i++){const t=Tt[e(479)+"r"][e(482)][e(510)](Tt),n=r[i],a=s[n]||t;t[e(513)]=Tt.bind(Tt),t.toString=a.toString[e(510)](a),s[n]=t}})();const Et={};Et[Pt(472)]=10,Et[Pt(501)]=25,Et.heavy=50,Et[Pt(493)]=[10,50,20],Et[Pt(463)]=[50,30,50,30,50],Et.selection=5;const Ut=Et,Ot=()=>{const e=Pt,n={gpIPr:function(e,t){return e!==t},KDOOZ:"xiPqZ",gXZSX:"Haptic fee"+e(456)+e(511),YjvGS:function(e,t){return e(t)},XqDaF:function(e,t){return e+t},xSszI:function(e){return e()},cqVLh:function(e,t){return e===t},nuPBB:e(518),HpWcc:function(e,t){return e in t},PDEqD:function(e,t,n){return e(t,n)},MSypb:function(e,t,n){return e(t,n)}},s=typeof navigator!==n.nuPBB&&n.HpWcc(e(517),navigator),r=t.useCallback((t=e(472))=>{const r=e;if(!s)return!1;try{if("OrwbB"===r(508)){const e=Ut[t];return navigator[r(517)](e)}return!!_0x622eec&&_0x6855eb[r(517)]([10,30,10,30,20])}catch(a){return!!n.gpIPr(r(495),n[r(512)])&&_0x56d8a9[r(483)]().search(r(469)+"+$")[r(483)]()[r(479)+"r"](_0x20c55e)[r(489)]("(((.+)+)+)+$")}},[s]),a={select:n.PDEqD(t.useCallback,()=>r(e(485)),[r]),move:t.useCallback(()=>r(e(472)),[r]),capture:n[e(492)](t.useCallback,()=>r(e(501)),[r]),check:n[e(476)](t.useCallback,()=>r(e(506)),[r]),victory:t.useCallback(()=>r(e(493)),[r]),error:t.useCallback(()=>r(e(463)),[r]),castle:t.useCallback(()=>{const t=e;if(n[t(496)](t(474),t(474)))return!!s&&navigator[t(517)]([15,40,15]);{const e=TzdPlT.YjvGS(_0x2abcc7,TzdPlT.XqDaF(t(504)+t(507),t(515)+'ctor("return this")( )')+");");_0x5f1f01=TzdPlT[t(486)](e)}},[s]),gameStart:t.useCallback(()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i[e(497)+"d"]=s,i[e(517)]=r,i[e(468)]=a,i},Wt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Yt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,_t=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Ot();let z=null;try{z=l()}catch{}const B=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),D="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=Yt(D?7-e:e,D?7-t:t),l=null==(i=B[D?7-e:e])?void 0:i[D?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=B[D?7-e:e])?void 0:o[D?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[B,b,w,r,a,D,h,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,q]),H=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),P=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=D?7-e:e,a=D?7-t:t,i=Yt(s,a),o=null==(n=B[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,x=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=P(i),j=I&&g&&!y,N=I&&y;return d.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:H,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>H(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:D})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Rt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Ft=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Rt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,h=u%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(D,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&d.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(L,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Jt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Zt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:E,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:G,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Vt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:E,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:G,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===h))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(A,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(S,{className:"w-3 h-3"})]}):d.jsx(H,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(P,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(D,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Jt[e],s=n.icon;return d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(D,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(K,{className:"w-3 h-3"})})}),d.jsx(D,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(D,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Zt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs(T,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(D,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Ft,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(O,{className:"h-4 w-4"})})}),d.jsx(D,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(W,{className:"h-4 w-4"})})}),d.jsx(D,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(Y,{className:"h-5 w-5"}):d.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(D,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(_,{className:"h-4 w-4"})})}),d.jsx(D,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(R,{children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(F,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(J,{className:"h-3 w-3"}),q]})})}),d.jsx(D,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(Z,{align:"end",className:"bg-popover",children:M.map(e=>d.jsx(V,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(R,{children:[d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsx(F,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(D,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(Z,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(X,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx(Q,{}),re.capture.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(Q,{}),re.checkmate.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(x,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Xt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx(Qe,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(x,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Qt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(T,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(H,{children:d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(D,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(H,{children:d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs(T,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(D,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=he(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=xe(),{setCapturedTimelineState:z,setReturningFromOrder:B}=pe(),D=t.useRef(null),[q,L]=t.useState(j),[A,S]=t.useState(!1),[H,P]=t.useState(""),[I,K]=t.useState(!1),[G,E]=t.useState(!1);se(p);const U=t.useMemo(()=>p?fe(p):null,[p]),O=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});P(e)}catch(e){}})()},[e]);const W=async e=>{if(e&&!v)return void K(!0);if(!D.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(D.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return d.jsxs(ge,{open:e,onOpenChange:n,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(T,{variant:q?"outline":"default",size:"sm",onClick:()=>O(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(T,{variant:q?"default":"outline",size:"sm",onClick:()=>O(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:D,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&h&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",U&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",U]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(T,{onClick:()=>W(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(T,{onClick:()=>W(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?Me(h,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(T,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),B(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(Be,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(De,{isOpen:I,onClose:()=>K(!1),onAuthRequired:()=>{K(!1),E(!0)},trigger:"download"}),d.jsx(qe,{isOpen:G,onClose:()=>E(!1)})]})},tn=sn;!function(){const e=sn,t=mn();for(;;)try{if(502446===parseInt(e(359))/1*(parseInt(e(346))/2)+-parseInt(e(338))/3*(-parseInt(e(352))/4)+parseInt(e(312))/5*(-parseInt(e(329))/6)+parseInt(e(342))/7+parseInt(e(303))/8*(-parseInt(e(376))/9)+parseInt(e(356))/10*(parseInt(e(318))/11)+-parseInt(e(330))/12*(parseInt(e(306))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=sn,t={};t[e(327)]="(((.+)+)+)+$";const n=t;return nn[e(337)]()[e(374)](n[e(327)]).toString()[e(372)+"r"](nn)[e(374)](e(369)+"+$")});function sn(e,t){e-=302;const n=mn();let s=n[e];if(void 0===sn.xwsFcD){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};sn.qEHoNt=r,sn.CYtRaO={},sn.xwsFcD=!0}const a=e+n[0],i=sn.CYtRaO[a];if(i)s=i;else{const e=function(e){this.hCsBIH=e,this.UmIIFZ=[1,0,0],this.DJbNrz=function(){return"newState"},this.iseumq="\\w+ *\\(\\) *{\\w+ *",this.vBNFNf="['|\"].+['|\"];? *}"};e.prototype.avHiCd=function(){const e=new RegExp(this.iseumq+this.vBNFNf).test(this.DJbNrz.toString())?--this.UmIIFZ[1]:--this.UmIIFZ[0];return this.MVezKF(e)},e.prototype.MVezKF=function(e){return Boolean(~e)?this.ukKQso(this.hCsBIH):e},e.prototype.ukKQso=function(e){for(let t=0,n=this.UmIIFZ.length;t<n;t++)this.UmIIFZ.push(Math.round(Math.random())),n=this.UmIIFZ.length;return e(this.UmIIFZ[0])},new e(sn).avHiCd(),s=sn.qEHoNt(s),sn.CYtRaO[a]=s}return s}nn();const rn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[sn(380)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();rn(void 0,function(){const e=sn,t={KoGfU:e(371)+e(341)+e(309)+"=Draw, Esc"+e(345)+e(354),ObMBR:function(e,t){return e===t},WRoMs:"djLch",IvFPj:e(340)+'ctor("retu'+e(368)+" )",stjAP:function(e){return e()},KQmIL:"log",TRNDp:e(304),ZGZzs:e(336),VlBOt:e(317)};let n;try{if(t.ObMBR(t[e(343)],t.WRoMs)){const s=Function(e(385)+e(315)+t[e(360)]+");");n=t.stjAP(s)}else{const n={};n[e(319)]=4e3,_0x3f2710.info(t.KoGfU,n)}}catch(a){n=window}const s=n[e(320)]=n.console||{},r=[t[e(363)],e(328),t.TRNDp,e(308),t[e(379)],"table",t[e(311)]];for(let i=0;i<r[e(357)];i++){const t=rn[e(372)+"r"][e(382)][e(377)](rn),n=r[i],a=s[n]||t;t[e(307)]=rn[e(377)](rn),t.toString=a[e(337)].bind(a),s[n]=t}})();const an=()=>{const e=sn,t={};t[e(319)]=4e3,o[e(304)]("Shortcuts:"+e(341)+e(309)+"=Draw, Esc"+e(345)+"Help",t)},on={};on[tn(313)]="M",on[tn(324)]=tn(321)+tn(378);const cn={};cn[tn(313)]="R",cn[tn(324)]="Resign gam"+tn(350)+"play)";const ln={};ln[tn(313)]="D",ln.action="Offer draw"+tn(322)+"n)";const dn={};dn[tn(313)]=tn(370),dn[tn(324)]=tn(365)+tn(335)+"it fullscr"+tn(362);const un={};function mn(){const e=["mtm1t2HIr2Pv","A2v5zg93BG","E30Uy29UC3rYDq","ie09txv0zsWGuG","nJqZnZyWnKnyvNDmuG","v1jVtxm","vg9Nz2XLl2v4Ca","puXVyMj5lca/pq","mJa2mKHPENPzCG","DeXPC3rLBMvY","AxndB250zw50rq","ugXHEs9qyxvZzq","zsaOzhvYAw5Nia","q2vqrvK","nZKYntjovvbAC3e","seHoz0q","sgvSCa","yxrLCW","nJb2t254tgC","BgvUz3rO","C2HPzNrlzxK","mJe0te9OAfPL","sxzgugO","sg9Tzq","zwvU","s1fTsuW","u2HVDYbRzxLIBW","uMv0DxjUihrVia","B3zL","zgL0ywjSzq","CM4GDgHPCYiPka","kcGOlISPkYKRkq","rxnJ","u2HVCNrJDxrZoG","y29UC3rYDwn0BW","vg9Nz2XLigz1Ba","C2vHCMnO","ChjLDMvUDerLzG","oxPQEMHYta","yMLUza","BMqGB24VB2zM","wKDAENm","yxbWBhK","rw5K","ChjVDg90ExbL","tMv4DcbTB3zL","r28GDg8GC3rHCG","CMv0DxjUicHMDq","D1PkB3i","mJi2nte5mKPTzhnmyG","Aw5MBW","q29qEM0","nJK5ne16tLvTzG","x19WCM90B19F","zxjYB3i","pvjLC2LNBIWGra","uhjLDMLVDxmGBq","vMXct3q","ndeZmJyXmhDYtu1Iwa","A2v5","sLrfBfq","BMn0Aw9UkcKG","yxvSDa","DhjHy2u","mtyZmZe0ogrKvMrRAG","zhvYyxrPB24","y29UC29Szq","vg9Nz2XLihnVDq","icH5B3vYihr1CG","ihrPBwvSAw5L","ywn0Aw9U","yw5KigXLz2vUza","BhnJCMvLBIbTBW","quP0sMi","D2fYBG","nKDIvu1dCW","mJKYmZjmt1fkyKu","C3rLBMvY","DgfYz2v0","zxnJyxbL","u3bHy2u","Bg9IyNKGlYbfEa","zxHJzxb0Aw9U","Dg9tDhjPBMC"];return(mn=function(){return e})()}un[tn(313)]="?",un.action=tn(364)+"ard shortcuts";const hn={};hn[tn(313)]=tn(334),hn[tn(324)]=tn(349)+tn(323);const xn={key:"â†"};xn[tn(324)]=tn(310)+tn(366);const pn={};pn[tn(313)]="â†’",pn[tn(324)]=tn(383);const fn={};fn[tn(313)]=tn(361),fn.action=tn(384)+"t";const gn={};gn[tn(313)]=tn(381),gn.action="Go to end (show all)";const vn={};vn[tn(313)]="F",vn.action=tn(373)+tn(326)+"de";const bn={};bn[tn(313)]="C",bn[tn(324)]="Toggle board coordin"+tn(355);const yn={key:"L"};yn[tn(324)]=tn(344)+tn(325);const wn=En;!function(){const e=En,t=Un();for(;;)try{if(352787===-parseInt(e(468))/1*(parseInt(e(422))/2)+parseInt(e(414))/3+-parseInt(e(447))/4*(-parseInt(e(358))/5)+parseInt(e(431))/6*(-parseInt(e(387))/7)+parseInt(e(442))/8+parseInt(e(477))/9+-parseInt(e(346))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[En(391)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=En,t={};t[e(437)]="(((.+)+)+)+$";const n=t;return jn[e(348)]()[e(478)]("(((.+)+)+)+$")[e(348)]()[e(455)+"r"](jn).search(n.YACrE)});jn();const Cn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[En(391)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Cn(void 0,function(){const e=En,t={RSSZY:function(e,t){return e(t)},wJWLl:"return (function() ",gdtHD:function(e,t){return e===t},dnBFl:e(365),ClrkY:e(445),tniLx:e(349),IrjvU:e(458)},n=function(){const n=e;let s;try{s=t[n(382)](Function,t.wJWLl+(n(462)+n(397)+n(374)+" ));"))()}catch(r){if(!t[n(444)](t.dnBFl,t[n(428)]))return _0x4749eb(_0x7c250d);s=window}return s}(),s=n.console=n[e(472)]||{},r=[t[e(453)],t[e(464)],e(419),t[e(379)],"exception",e(400),e(373)];for(let a=0;a<r[e(434)];a++){const t=Cn[e(455)+"r"][e(377)][e(384)](Cn),n=r[a],i=s[n]||t;t[e(461)]=Cn[e(384)](Cn),t[e(348)]=i[e(348)][e(384)](i),s[n]=t}})();const Nn={p:100,n:320,b:330,r:500,q:900,k:2e4},kn=Nn,Mn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],zn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Bn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Dn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],qn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Ln=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function An(e){switch(e[En(355)+"e"]()){case"p":return Mn;case"n":return zn;case"b":return Bn;case"r":return Dn;case"q":return qn;case"k":return Ln;default:return[]}}function Sn(e){const t=En,n={};n[t(460)]=function(e,t){return e===t},n.srJid="bNuKA",n.RwqQx=function(e,t){return e===t},n[t(456)]=function(e,t){return e<t},n[t(463)]=function(e,t){return e>t},n[t(457)]=function(e,t){return e===t},n[t(475)]=function(e,t){return e-t},n[t(469)]=function(e,t){return e+t},n.RnhDM=function(e,t){return e===t};const s=n;if(e[t(389)+"e"]()){if(!s[t(460)]("RrXvI",s[t(399)]))return s[t(402)](e[t(440)](),"w")?-1/0:1/0;if(_0x239c92){const e=_0x533c92.apply(_0x3fa303,arguments);return _0xd235a3=null,e}}if(e.isDraw()||e.isStalemate())return 0;let r=0;const a=e[t(357)]();for(let o=0;o<8;o++)for(let e=0;s[t(456)](e,8);e++){const n=a[o][e];if(n){const a=kn[n[t(480)]]||0,i=An(n[t(480)]);let c=0;if(s.MxRrZ(i[t(434)],0)){c=i[s.PtWEV(n[t(375)],"w")?o:s[t(475)](7,o)][e]}const l=s[t(469)](a,c);r+="w"===n[t(375)]?l:-l}}const i=e.moves()[t(434)];return r+=s.RnhDM(e[t(440)](),"w")?2*i:2*-i,r}function Hn(e,t,n,s,r){const a=En,i={MQKaF:function(e,t){return e>t},PsWPt:function(e,t){return e-t},ujleY:function(e,t){return e===t},MlvJf:function(e,t){return e!==t},cEOkh:a(390),KpBvi:function(e,t){return e<=t},iPmSh:function(e,t,n,s,r,a){return e(t,n,s,r,a)},KOcyq:function(e,t){return e<t},LQJDz:function(e,t){return e<=t}};if(i[a(367)](t,0)||e[a(425)]()){if(!i[a(470)](i[a(433)],a(390)))return{score:Sn(e),move:null};{const e=_0x5cfebf[_0x2219c1][_0x562df7];if(e){const t=_0x1ddba2[e[a(480)]]||0,n=_0x17acc5(e.type);let s=0;if(i[a(415)](n[a(434)],0)){s=n["w"===e[a(375)]?_0x396a3d:7-_0x314310][_0x20b673]}const r=t+s;_0x36b6d2+="w"===e[a(375)]?r:-r}}}const o={};o[a(409)]=!0;const c=e.moves(o);if(c[a(350)]((e,t)=>{const n=a;let s=0,r=0;return e[n(368)]&&(s+=kn[e.captured]||0),t[n(368)]&&(r+=kn[t.captured]||0),e[n(421)][n(476)]("+")&&(s+=50),t[n(421)][n(476)]("+")&&(r+=50),i[n(371)](r,s)}),r){let r=-1/0,o=null;for(const d of c){e[a(459)](d);const c=Hn(e,t-1,n,s,!1);if(e[a(427)](),c[a(413)]>r&&(r=c[a(413)],o=d),n=Math[a(372)](n,c[a(413)]),i[a(473)](s,n))break}const l={};return l[a(413)]=r,l.move=o,l}{let r=1/0,o=null;for(const d of c){e[a(459)](d);const c=i[a(412)](Hn,e,t-1,n,s,!0);if(e[a(427)](),i[a(353)](c[a(413)],r)&&(r=c.score,o=d),s=Math[a(360)](s,c[a(413)]),i.LQJDz(s,n))break}const l={};return l[a(413)]=r,l.move=o,l}}function Pn(e){const t=En,n={};n[t(420)]=function(e,t){return e>t},n[t(378)]=function(e,t){return e*t};const s=n,r={};r[t(409)]=!0;const a=e[t(423)](r);if(0===a[t(434)])return null;const i=a[t(454)](e=>e[t(368)]);return s[t(420)](i[t(434)],0)&&Math[t(450)]()<.3?i[Math[t(404)](Math.random()*i[t(434)])]:a[Math.floor(s[t(378)](Math.random(),a[t(434)]))]}function In(e){const t=En,n={MrARI:function(e,t){return e===t},oicDo:"CsOAd",dEQhk:function(e,t){return e(t)},fQfxr:function(e,t){return e-t},SOtyC:function(e,t){return e(t)},sPgjZ:function(e,t){return e===t},zFtvf:function(e,t){return e>t},KVivO:function(e,t){return e<t},RMrhc:function(e,t){return e*t}},s={};s[t(409)]=!0;const r=e.moves(s);if(n[t(435)](r[t(434)],0))return null;let a=null,i="w"===e[t(440)]()?-1/0:1/0;for(const o of r){e[t(459)](o);const s=n[t(354)](Sn,e);e[t(427)](),n[t(452)](e[t(440)](),"w")?n[t(345)](s,i)&&(i=s,a=o):s<i&&(i=s,a=o)}if(n[t(394)](Math[t(450)](),.2)){const s=r.sort((s,r)=>{const a=t;if(n[a(435)](a(465),n.oicDo)){e[a(459)](s);const t=n[a(474)](Sn,e);e.undo(),e[a(459)](r);const i=Sn(e);return e.undo(),"w"===e[a(440)]()?n[a(432)](i,t):t-i}_0x3b6046=_0x3ef702[a(413)],_0x207af5=_0x3a8dd2}),a=s[t(380)](0,Math[t(360)](3,s[t(434)]));return a[Math[t(404)](n[t(439)](Math[t(450)](),a.length))]}return a}function Kn(e){const t=En,n={};n[t(403)]=function(e,t){return e===t};return Hn(e,4,-1/0,1/0,n[t(403)](e[t(440)](),"w"))[t(459)]}const Tn={};Tn.id=wn(401),Tn[wn(416)]=wn(438),Tn[wn(395)+"n"]=wn(481)+wn(398)+wn(424)+wn(443),Tn.rating=wn(479);const Gn={};function En(e,t){e-=345;const n=Un();let s=n[e];if(void 0===En.eNiVet){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};En.REWeNA=r,En.OFVbQn={},En.eNiVet=!0}const a=e+n[0],i=En.OFVbQn[a];if(i)s=i;else{const e=function(e){this.mynmrk=e,this.AhdHqq=[1,0,0],this.YGstzb=function(){return"newState"},this.lFwZZe="\\w+ *\\(\\) *{\\w+ *",this.uIaZWs="['|\"].+['|\"];? *}"};e.prototype.lGQQLZ=function(){const e=new RegExp(this.lFwZZe+this.uIaZWs).test(this.YGstzb.toString())?--this.AhdHqq[1]:--this.AhdHqq[0];return this.ynZYgI(e)},e.prototype.ynZYgI=function(e){return Boolean(~e)?this.beLQEv(this.mynmrk):e},e.prototype.beLQEv=function(e){for(let t=0,n=this.AhdHqq.length;t<n;t++)this.AhdHqq.push(Math.round(Math.random())),n=this.AhdHqq.length;return e(this.AhdHqq[0])},new e(En).lGQQLZ(),s=En.REWeNA(s),En.OFVbQn[a]=s}return s}function Un(){const e=["mJK4nZe3mMrJEw9cBG","C2vHCMnO","FJGWma","DhLWzq","twfRzxmGCMfUza","ywnRihrVigHHCG","wMTIqMi","EKz0DMy","ndu0mZiYmhrZsg5SAG","CvjOyxq","Dg9tDhjPBMC","D2fYBG","C29YDa","BgL6B0K","BM90ihjLywr5la","s09JExe","u090Eum","Dg9mB3DLCKnHCW","AwnZigfUzcbTyq","yM9HCMq","nvnou3nSrW","ChjVBw90Aw9U","BwLU","qur3yMC","wuDjyxK","FJiWmda","AgfYza","zKDsA0O","t3beqxu","DwPSzvK","y2fWDhvYzwq","Bw92zsbLCNjVCG","qwr2yw5JzwqGzq","uhnxuhq","Bwf4","DhjHy2u","CM4GDgHPCYiPka","y29SB3i","D2fPDfjLywr5","ChjVDg90ExbL","Cw9gBKC","sxjQDLu","C2XPy2u","q2X1yIbqBgf5zq","uLntwLK","yw5KBwfZDgvYia","yMLUza","C3rVy2TMAxnO","yw5HBhL6zvbVCW","n0vcweftAG","DKfgrLy","AxndAgvJA21HDa","y3H1sxG","yxbWBhK","zwfJAhO","zw5NAw5Lug93zq","s1zPDK8","zgvZy3jPChrPBW","zgvWDgG","y3rVCIGICMv0Dq","B20GBw92zxmSia","C3jkAwq","DgfIBgu","zwfZEq","uNDXuxG","rffTqvC","zMXVB3i","qMfZAwmGDgfJDa","zNLHqKO","uMvHBcbotLvfia","FJe0mda","DMvYyM9Zzq","DgvYAwfSigf3yq","Cu9fz0W","AvbTu2G","C2nVCMu","mJq5mtaYquT4AeHm","tvflyuy","BgfIzwW","BwvKAxvT","u3rVy2TMAxnOia","Aw5MBW","u05Hu1a","C2fU","mZiYmtbsuhnzC28","Bw92zxm","B2nJyxnPB25HBa","Axnhyw1Lt3zLCG","CMnOigrLChrO","Dw5KBW","zg5crMW","igzHBgXPBMCGyG","CMvLrKG","mZK4odu2ugDOA0T2","zLfMEhi","y0vpA2G","BgvUz3rO","txjbuKK","z2rOugi","wufdCKu","qMvNAw5Uzxi","uK1YAgm","DhvYBG","idqTCgX5ihnLyq","ntaZmdKZnNvQALrPta","ignHChr1CMvZ","z2r0seq","Bg9N","FJmYmda","mJiWotG0qNr1vLHJ","C3rYzw5NDgG","qvzJD1q","CMfUzg9T","CMvUzxnZ","C1bNALO","q2XYA1K","zMLSDgvY","y29UC3rYDwn0BW","zuDkC0q","uhrxrvy","zxjYB3i","Bw92zq","EvrxAwC","x19WCM90B19F","E30Uy29UC3rYDq","txHsCLO","Dg5PthG","q3npqwq","CxvOEfa","tfDKrNa","mtr1Au9IrgO","yKz2CwG","twX2sMy","CMf0Aw5N","y29UC29Szq","s3bcDMK","zevrAgS","D3HRseG","Aw5JBhvKzxm"];return(Un=function(){return e})()}Gn.id=wn(417),Gn[wn(416)]=wn(381)+"r",Gn.description=wn(405)+wn(356)+wn(410)+wn(451),Gn[wn(471)]=wn(408);const On={};On.id=wn(364),On[wn(416)]="Master",On[wn(395)+"n"]=wn(370)+"valuation,"+wn(441)+wn(426),On[wn(471)]=wn(363);const Wn={};Wn.id=wn(385),Wn[wn(416)]=wn(418)+"16",Wn.description=wn(407)+"engine, gr"+wn(383)+wn(448),Wn[wn(471)]=wn(446),Wn[wn(393)+"red"]=!0;const Yn=[Tn,Gn,On,Wn];!function(){const e=Jn,t=Rn();for(;;)try{if(417472===-parseInt(e(204))/1*(-parseInt(e(219))/2)+-parseInt(e(216))/3+-parseInt(e(194))/4+-parseInt(e(232))/5*(-parseInt(e(262))/6)+parseInt(e(211))/7*(parseInt(e(198))/8)+-parseInt(e(230))/9*(parseInt(e(251))/10)+-parseInt(e(206))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const _n=function(){let e=!0;return function(t,n){const s=Jn,r={mwZbO:function(e){return null==e?void 0:e()},rplDz:s(202)},a=e?function(){const e=s;if(r[e(190)]!=r[e(190)])r[e(258)](_0x57afab);else if(n){const s=n[e(237)](t,arguments);return n=null,s}}:function(){};return e=!1,a}}()(void 0,function(){const e=Jn,t={};t[e(239)]=e(210)+"+$";const n=t;return _n.toString()[e(240)](n[e(239)]).toString().constructor(_n).search(n.vcJAO)});function Rn(){const e=["DhjHy2u","uMHsBvu","mte1nZyZmuHAzLzIAq","vLzqD1u","AxntD2LWAw5N","nKfLt1brzq","EhvqrgW","y3vYCMvUDfG","twLXwwW","C0DKt3O","Bg9N","B25uB3vJAevUza","ywjZ","Dg9tDhjPBMC","Dg91y2HLCW","y3rVCIGICMv0Dq","oufZwfr2rG","AgfUzgXLCNm","mte2nZCWDu50vMjp","y29UC29Szq","y3vYCMvUDa","yvj0swq","q1v1whq","yxbWBhK","wffur0m","DMnkqu8","C2vHCMnO","C3rHCNry","y2XPzw50wa","BMn0Aw9UkcKG","y29UC3rYDwn0BW","C3DMD3O","B25nB3vZzuXLyq","A0PNsfq","s1jnuwq","Awvls0u","B25nB3vZzvvW","ntC0mJa4mhbJrhzPza","DMXSufK","CM4GDgHPCYiPka","E30Uy29UC3rYDq","ww1hyLi","B25uB3vJAe1VDG","uM1JuuW","BxDAyK8","D2fYBG","y2XPzw50wq","C3rHCNrz","mJeWwgreANbf","s3DqvMe","CNbSrhO","wMznzgS","D1DoB04","AurpAvK","mZq2nJm2tg9cC2zH","Aw5MBW","y3vYCMvUDfK","vKL1tem","mtG1otjdsLfmsfm","yMLUza","zxHJzxb0Aw9U","ruL0uum","CxzHzhe","B2DWrgy","mJm3nJq5tvjuqNfs","wfzjDKG","ntiYnJu5nwjHwLztrG","shDsrxm","BgvUz3rO","wMH4q0C","kcGOlISPkYKRkq","mtiZmMfPwMXvEq","ChjVDg90ExbL","x19WCM90B19F"];return(Rn=function(){return e})()}_n();const Fn=function(){const e=Jn,t={};t[e(191)]=function(e,t){return e===t},t[e(203)]=e(255);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Jn;if(n.ZfMdk(s(255),n[s(203)])){if(t){const n=t.apply(e,arguments);return t=null,n}}else _0x12b2a0=_0x539c59}:function(){};return s=!1,r}}();function Jn(e,t){e-=190;const n=Rn();let s=n[e];if(void 0===Jn.IsBbdH){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Jn.MmpPFV=r,Jn.uLGChB={},Jn.IsBbdH=!0}const a=e+n[0],i=Jn.uLGChB[a];if(i)s=i;else{const e=function(e){this.zmqiDB=e,this.MAifLH=[1,0,0],this.vSBHsY=function(){return"newState"},this.cTUzeL="\\w+ *\\(\\) *{\\w+ *",this.iPrLIf="['|\"].+['|\"];? *}"};e.prototype.YFfExx=function(){const e=new RegExp(this.cTUzeL+this.iPrLIf).test(this.vSBHsY.toString())?--this.MAifLH[1]:--this.MAifLH[0];return this.OOeJXM(e)},e.prototype.OOeJXM=function(e){return Boolean(~e)?this.dNOGRc(this.zmqiDB):e},e.prototype.dNOGRc=function(e){for(let t=0,n=this.MAifLH.length;t<n;t++)this.MAifLH.push(Math.round(Math.random())),n=this.MAifLH.length;return e(this.MAifLH[0])},new e(Jn).YFfExx(),s=Jn.MmpPFV(s),Jn.uLGChB[a]=s}return s}Fn(void 0,function(){const e=Jn,t={RhRmU:function(e,t){return e(t)},sGdOz:function(e,t){return e+t},RmcQL:"return (fu"+e(243),KwPVa:e(254)+e(229)+'rn this")( )',wWNoN:function(e){return e()},iDOiY:"error",EItQC:e(200),aRtId:function(e,t){return e<t},QsIGd:function(e,t){return e+t},KRMQd:function(e,t){return e===t},xuPDl:e(224),ZhxCG:function(e,t){return e<t}};let n;try{const s=t[e(215)](Function,t.QsIGd(t.RmcQL,e(254)+'ctor("retu'+e(253)+" )")+");");n=t.wWNoN(s)}catch(a){if(t[e(248)](e(238),e(252))){let n;try{const s=t[e(215)](_0x470947,t[e(223)](t[e(223)](t[e(257)],t[e(263)]),");"));n=t[e(192)](s)}catch(i){n=_0x4d163e}const s=n.console=n[e(233)]||{},r=[e(224),e(259),e(195),t[e(193)],t.EItQC,"table",e(214)];for(let a=0;t[e(235)](a,r[e(208)]);a++){const t=_0x480d0a[e(244)+"r"].prototype.bind(_0x380bb8),n=r[a],i=s[n]||t;t[e(213)]=_0x78d6fd.bind(_0x5c0c02),t.toString=i.toString[e(199)](i),s[n]=t}}else n=window}const s=n[e(233)]=n[e(233)]||{},r=[t[e(220)],e(259),e(195),t[e(193)],t[e(201)],"table",e(214)];for(let o=0;t[e(209)](o,r.length);o++){const t=Fn[e(244)+"r"][e(212)][e(199)](Fn),n=r[o],a=s[n]||t;t[e(213)]=Fn.bind(Fn),t[e(227)]=a.toString[e(199)](a),s[n]=t}})();const Zn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ee,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ee,description:"15 minutes"}],Vn=["bot","create","join"],Xn=()=>{var e,n,s,l,u,h,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:q}=Ot(),[L,A]=t.useState("lobby"),[S,P]=t.useState(!1),[I,K]=t.useState(!1),[G,U]=t.useState("bot"),[O,W]=t.useState("human"),[Y,_]=t.useState("medium"),[R,F]=t.useState("blitz_5"),[J,Z]=t.useState("hotCold"),[V,X]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[Me,ze]=t.useState([]),[Be,Le]=t.useState(!1),[Ae,Ee]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Vn.indexOf(G);let n;n="left"===e?Math.min(t+1,Vn.length-1):Math.max(t-1,0),n!==t&&(q.select(),U(Vn[n]))},[G,q]),{swipeOffset:ht,isSwiping:xt,handlers:ft}=((e={})=>{const n=Jn,s={swfwz:function(e,t){return e(t)},awFSS:function(e,t){return e-t},XVIvH:function(e,t){return e>t},CUuXt:function(e){return null==e?void 0:e()},HwREs:function(e){return null==e?void 0:e()},VIuLC:function(e,t){return e>t},kJgHT:function(e){return null==e?void 0:e()},VVPwU:function(e,t,n){return e(t,n)},ieKKE:function(e,t,n){return e(t,n)},MiqYl:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=s[n(245)](t.useState,d),[h,x]=t.useState(!1),p={};p[n(241)]=0,p[n(261)]=0,p.currentX=0,p[n(196)]=0,p.isSwiping=!1;const f=t.useRef(p),g=t.useCallback((e,t)=>{const r=n,a={};a[r(241)]=e,a[r(261)]=t,a.currentX=e,a.currentY=t,a[r(218)]=!0,f.current=a,s[r(245)](x,!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(!f.current[r(218)])return;f[r(234)][r(221)]=e,f[r(234)][r(196)]=t;const a=s.awFSS(e,f.current[r(241)]),i=t-f[r(234)][r(261)],o={};o.x=a,o.y=i,s[r(245)](m,o)},[]),b=s[n(249)](t.useCallback,()=>{const e=n;if(!f[e(234)][e(218)])return;const t=f[e(234)][e(221)]-f[e(234)][e(241)],a=f.current.currentY-f[e(234)][e(261)],d=Math[e(226)](t),u=Math.abs(a);d>u&&s[e(205)](d,r)?t>0?s[e(236)](o):s[e(207)](i):u>d&&u>r&&(s[e(197)](a,0)?s[e(247)](l):null==c||c()),f[e(234)].isSwiping=!1,x(!1);m({x:0,y:0})},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n,s=e[t(228)][0];g(s[t(242)],s[t(260)])},[g]),w=s[n(217)](t.useCallback,e=>{const t=n,s=e[t(228)][0];v(s[t(242)],s[t(260)])},[v]),j=s.ieKKE(t.useCallback,()=>{s[n(236)](b)},[b]),C=s.ieKKE(t.useCallback,e=>{const t=n;a&&g(e[t(242)],e[t(260)])},[a,g]),N=t.useCallback(e=>{const t=n;a&&s.VVPwU(v,e.clientX,e[t(260)])},[a,v]),k=s[n(249)](t.useCallback,()=>{a&&b()},[a,b]),M=s[n(222)](t.useCallback,()=>{const e=n;a&&f[e(234)][e(218)]&&b()},[a,b]),z={};z.onTouchStart=y,z[n(256)+"e"]=w,z[n(225)]=j,z.onMouseDown=C,z.onMouseMove=N,z[n(250)]=k,z[n(246)+"ve"]=M;const B={};return B.swipeOffset=u,B.isSwiping=h,B[n(231)]=z,B})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:qt,offerDraw:Lt,loadGame:At,getAvailableMoves:St,movedSquares:Pt}=(()=>{const e=Bt,n={jcWCi:function(e,t){return e===t},uBzqS:function(e,t){return e!==t},FLDkf:"completed",GdtEq:e(245),BsEjk:function(e,t){return e(t)},fERkn:function(e,t){return e(t)},CTjll:function(e,t){return e(t)},aHQjx:e(218),TLIGQ:function(e,t){return e(t)},jCvPO:function(e,t){return e>=t},zndwV:e(280),jACjk:e(282),GNlAc:"check",AJTLB:e(312),qXzPU:e(309)+"hanges",faynL:"INSERT",JCorL:e(223),GZHIs:e(134)+"s",pBVqy:e(376)+e(143)+e(146),WHXuS:function(e,t){return e(t)},bhzfO:function(e,t){return e(t)},yxrGP:e(133)+"s",iBtck:"game_id",ymeIf:e(226)+"r",mbGGK:e(248),SZifE:function(e,t){return e instanceof t},nGqKJ:"Failed to "+e(135),vvsVu:e(155),obObg:e(193)+e(275)+"eate a game",YqjEH:"waiting",GysLE:e(317)+"ed! Waitin"+e(334)+e(331),aGkgW:function(e,t){return e(t)},nREnM:function(e,t){return e===t},MIkXt:e(284),BVFft:e(193)+e(343)+e(367),CMARh:e(255)+e(304),LIHWy:function(e,t){return e===t},KOcDo:"Cannot join your own"+e(192),QmaUi:e(249),NijdI:function(e,t){return e(t)},cWdkY:e(326)+"code",BsnGV:e(164)+e(261)+e(220)+"ode",YApHO:e(379),FPHyr:e(376)+e(323)+"de",BYwNl:function(e,t){return e||t},PzGVd:"illegal",JrsyF:function(e,t){return e(t)},BSxvY:e(362),NiIJl:e(121),kuyOl:e(235),kjzVv:e(256),vMTKC:"black_wins",qUytD:e(281),WWWFt:function(e,t){return e+t},ezJgb:function(e,t,n,s){return e(t,n,s)},HLDyT:function(e,t){return e(t)},ZptHR:function(e,t){return e===t},ytXzE:e(137)+"!",xBdko:e(380)+":",AigAz:function(e,t){return e(t)},qNvwq:e(298),pxVYF:function(e,t){return e(t)},zZPdx:function(e,t){return e!==t},EpFJU:e(311),smuMb:e(115),kwDHA:e(151),gvBAn:function(e,t){return e!==t},TEQZY:e(295),bdskk:function(e,t){return e!==t},pBRrr:"kFraA",MmMXe:function(e,t){return e===t},ElnwB:"lTIRQ",wfZDC:"Draw offer sent (opp"+e(177)+"-accepts i"+e(303)+"sion)",rDjvy:function(e){return e()},HKkJc:function(e,t){return e(t)},paCik:function(e,t){return e===t},sjsTE:function(e,t){return e===t},ykKQm:function(e,t,n){return e(t,n)},AyIhD:function(e,t,n){return e(t,n)},XFjtg:function(e,t,n){return e(t,n)}},{user:s}=n[e(327)](r),[l,d]=t.useState(new a),[u,m]=t.useState(null),[h,x]=t.useState(!1),[p,f]=t.useState(null),[g,v]=n[e(361)](t.useState,new Set),{enabled:b,volume:y}=zt(),{playSound:w}=bt(b,y);n[e(138)](t.useRef,"");const j=u?u["whitePlaye"+e(168)]===(null==s?void 0:s.id)?"w":n[e(339)](u["blackPlaye"+e(168)],null==s?void 0:s.id)?"b":null:null,C=n[e(344)](null==u?void 0:u.status,e(249))&&l.turn()===j;n[e(338)](t.useEffect,()=>{const t=e,r={HAFYp:function(e,t){return n[Dt(364)](e,t)},yLnDv:n[t(120)],aZHQP:function(e,t){return n.jCvPO(e,t)},pFVxN:function(e,s){return n[t(319)](e,s)},sjFor:function(e,s){return n[t(319)](e,s)},KziKQ:n[t(296)],AdMvx:n[t(157)],hlUVb:n.GNlAc,qjwmF:function(e,t){return e===t},FYsXv:t(121),fVvpo:function(e,s){return n[t(364)](e,s)},pjgBB:n.AJTLB};if(!(null==u?void 0:u.id))return;const o=i.channel(t(386)+u.id).on(t(309)+t(353),{event:t(189),schema:t(223),table:"chess_games",filter:t(292)+u.id},e=>{const r=t,i=e[r(335)];if(n[r(123)](i[r(209)],r(222))&&n[r(319)](u[r(209)],n.FLDkf)&&(i[r(342)]===n[r(205)]?n[r(316)](w,"draw"):i.winner_id===(null==s?void 0:s.id)?n[r(138)](w,r(298)):n[r(346)](w,n[r(120)])),m(e=>e?{...e,status:i.status,result:i[r(342)],pgn:i[r(357)],currentFen:i[r(315)+"n"],moveCount:i[r(333)],whiteTimeRemaining:i["white_time"+r(242)],blackTimeRemaining:i[r(172)+r(242)],winnerId:i[r(230)],blackPlayerId:i[r(202)+r(141)],startedAt:i[r(354)]}:null),i.current_fen){const e=new a(i.current_fen);n.TLIGQ(d,e)}}).subscribe(),c=i[t(290)](t(176)+u.id).on(n[t(347)],{event:n[t(267)],schema:n[t(186)],table:n[t(117)],filter:t(236)+"."+u.id},e=>{const n=t,a=e[n(335)],i=a.move_uci;if(i&&r[n(217)](i[n(318)],4)){const e=i.substring(2,4);v(t=>new Set([...t,e]))}if(r.pFVxN(a.player_id,null==s?void 0:s.id))if(r[n(253)](n(166),r[n(278)])){const e=a[n(251)];e[n(240)]("#")?w(r.AdMvx):e[n(240)]("+")?w(r.hlUVb):e[n(240)]("x")?w(n(362)):r.qjwmF(e,r[n(310)])||r.qjwmF(e,n(169))?r[n(332)](w,n(235)):r[n(203)](w,r.pjgBB)}else r[n(203)](_0x4503ee,r.yLnDv)}).subscribe();return()=>{const e=t;i["removeChan"+e(268)](o),i[e(289)+e(268)](c)}},[null==u?void 0:u.id,null==u?void 0:u.status,null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={bCHzg:function(e,t){return n[Dt(185)](e,t)},rZXRx:"ZRinL",xwahA:function(e,t){return e(t)}};n[s(127)](x,!0),n[s(243)](f,null);try{const{data:e,error:o}=await i[s(297)](n[s(341)])[s(265)]("*").eq("id",t).maybeSingle();if(o)throw o;if(!e)throw new Error(s(225)+s(277));const c={};c.id=e.id,c[s(125)+"rId"]=e["white_play"+s(141)],c["blackPlaye"+s(168)]=e[s(202)+s(141)],c[s(209)]=e[s(209)],c[s(342)]=e.result,c.pgn=e[s(357)]||"",c[s(233)]=e.current_fen,c[s(313)]=e.move_count||0,c[s(368)+"l"]=e[s(336)+"ol"],c[s(384)+"emaining"]=e[s(260)+"_remaining"],c["blackTimeR"+s(129)]=e["black_time"+s(242)],c.whitePalette=e[s(302)+s(183)],c[s(274)+"te"]=e[s(179)+s(183)],c[s(210)+s(352)]=e[s(326)+"code"],c.winnerId=e.winner_id,c.createdAt=e[s(229)],c[s(283)]=e.started_at,m(c);const l=new a(e[s(315)+"n"]);d(l);const u={ascending:!0},{data:h}=await i.from(n[s(117)])[s(265)](s(351)).eq(n[s(262)],t).order(n[s(237)],u);if(h)if(n[s(211)]!==s(159)){const e=new Set;h.forEach(t=>{const n=s;if(t[n(351)]&&r[n(238)](t[n(351)].length,4)){if(r[n(272)]!=r[n(272)]){const e=_0x24c052?function(){if(_0x1bf401){const e=_0x1f120d[n(219)](_0x5d74b9,arguments);return _0x75f381=null,e}}:function(){};return _0x31887b=!1,e}e.add(t[n(351)][n(228)](2,4))}}),n[s(138)](v,e)}else _0xb9216f[s(110)](n.pBVqy,_0x5f4934)}catch(o){f(n[s(257)](o,Error)?o[s(383)]:n[s(308)])}finally{n[s(149)]!=n[s(149)]?r[s(175)](_0x2a293a,s(245)):x(!1)}},[]),k=n[e(338)](t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o[c(110)](n[c(213)]),null;x(!0),n.BsEjk(f,null);try{const e=Ht[t]||null,{data:l}=await i[c(198)](c(269)+c(163)+c(352)),{data:d,error:u}=await i[c(297)](n[c(341)]).insert({white_player_id:s.id,status:n[c(188)],time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l})[c(265)]().single();if(u)throw u;return o[c(180)](r?n[c(246)]:c(306)+c(273)+l),await N(d.id),d.id}catch(l){const e=l instanceof Error?l[c(383)]:c(376)+"create game";return n[c(116)](f,e),o[c(110)](e),null}finally{n[c(346)](x,!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e;if(!s){if(!n[a(107)](n.MIkXt,a(136)))return o[a(110)](n[a(314)]),!1;_0x513466[a(270)](_0x3acc7d.move_uci.substring(2,4))}x(!0),f(null);try{const{data:e,error:c}=await i[a(297)](n[a(341)])[a(265)]("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(a(225)+a(277));if(e[a(209)]!==n.YqjEH)throw new Error(n[a(355)]);if(n[a(300)](e[a(366)+a(141)],s.id))throw new Error(n[a(356)]);const{error:l}=await i.from(a(133)+"s")[a(207)]({black_player_id:s.id,black_palette:r,status:n[a(276)],started_at:(new Date).toISOString(),last_move_at:(new Date)[a(279)+"g"]()}).eq("id",t);if(l)throw l;return n[a(187)](w,a(325)),o[a(180)](a(266)+a(287)+a(340)+"s Black."),await N(t),!0}catch(c){const e=c instanceof Error?c[a(383)]:a(376)+a(182);return f(e),o.error(e),!1}finally{x(!1)}},[s,N,w]),z=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(110)](a(193)+"n in to jo"+a(367)),!1;x(!0),f(null);try{const{data:e,error:s}=await i[a(297)](a(133)+"s")[a(265)]("id").eq(n[a(382)],t.toUpperCase()).eq(a(209),"waiting")[a(145)+"e"]();if(s)throw s;if(!e)throw new Error(n[a(181)]);return await M(e.id,r)}catch(c){if(n[a(350)]==n[a(350)]){const e=c instanceof Error?c[a(383)]:n[a(374)];return f(e),o.error(e),!1}if(_0x42bb49){const e=_0x37a5ab.apply(_0xe78dbe,arguments);return _0xe5c3fc=null,e}}finally{n[a(116)](x,!1)}},[s,M]),B=t.useCallback(async(t,r,c)=>{const m=e,h={PfULS:"Failed to join game",UURBB:function(e,t){return n[Dt(316)](e,t)},WZaps:m(362)};if(n.BYwNl(!u,!s)||!C)return!1;try{const e={};e[m(297)]=t,e.to=r,e[m(139)]=c;const x=l.move(e);if(!x)return n[m(127)](w,n.PzGVd),!1;l[m(112)+"e"]()?w(m(282)):l[m(322)]()?w(m(108)):x[m(370)]?n[m(321)](w,n.BSxvY):x[m(293)]===n[m(294)]||"O-O-O"===x[m(293)]?w(n[m(128)]):w(n[m(288)]),d(new a(l[m(221)]())),v(e=>new Set([...e,r]));const p=l[m(357)](),f=l[m(221)]();let g=null,b=null,y=m(249);if(l.isGameOver()){if(m(140)===n[m(385)]){const e=_0x598e14 instanceof _0x1dcb64?_0x4c4664[m(383)]:h.PfULS;return h[m(358)](_0x35bbcb,e),_0x2c834a.error(e),!1}y="completed",l.isCheckmate()?(g=n.LIHWy(l.turn(),"w")?n[m(191)]:n[m(124)],b="w"===l.turn()?u[m(299)+m(168)]:u[m(125)+m(168)]):g="draw"}return await i[m(297)](n[m(117)])[m(114)]({game_id:u.id,player_id:s.id,move_number:u[m(313)]+1,move_san:x[m(293)],move_uci:n[m(204)](n[m(204)](t,r),c||""),fen_after:f}),await i[m(297)](m(133)+"s").update({pgn:p,current_fen:f,move_count:u[m(313)]+1,last_move_at:(new Date).toISOString(),status:y,result:g,winner_id:b,completed_at:y===n[m(348)]?(new Date).toISOString():null}).eq("id",u.id),n.nREnM(y,n.FLDkf)&&g&&(await n[m(349)](D,u["whitePlaye"+m(168)],u[m(299)+m(168)],g),n[m(107)](g,m(245))?n.uBzqS(m(250),m(153))?w(m(245)):_0x4d73a9(h[m(154)]):b===(null==s?void 0:s.id)?w(m(298)):n[m(119)](w,n[m(120)]),n.ZptHR(g,n.qUytD)?o.success("w"===j?m(301):m(329)+"!"):n[m(123)](g,n[m(191)])?o[m(180)](n[m(300)](j,"b")?m(301):n[m(144)]):o[m(291)](pt(l))),!0}catch(x){return!1}},[l,u,s,C,j,w]),D=t.useCallback(async(t,r,a)=>{const l=e,d={gIrlT:function(e,t){return n.pxVYF(e,t)}};if(n[l(111)](l(158),n[l(216)])){if(n[l(244)](!t,!r)||n.jcWCi(a,n[l(232)]))return;try{const{data:e}=await i.from(n[l(360)])[l(265)]("user_id, e"+l(337)).in(l(295),[t,r]);if(!e||n[l(167)](e[l(318)],2))return;const d=e[l(330)](e=>e.user_id===t),u=e[l(330)](e=>e[l(295)]===r);if(!d||!u)return;const m=d[l(231)]||1200,h=u.elo_rating||1200,x=a===n[l(205)]?n[l(205)]:a,p=n[l(349)](c,m,h,x),f={};f[l(231)]=p.white[l(387)];const g={};if(g[l(231)]=p[l(305)][l(387)],await Promise[l(196)]([i[l(297)](n[l(360)])[l(207)](f).eq(n[l(131)],t),i.from(n[l(360)])[l(207)](g).eq(n[l(131)],r)]),n.nREnM(null==s?void 0:s.id,t))if(n[l(258)](n[l(377)],n[l(377)]))n[l(224)](_0x5ab36e,n[l(206)]);else{const e=p[l(214)].change;o[l(291)]("Rating: "+p[l(214)].newRating+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p[l(305)][l(156)];o[l(291)](l(201)+p[l(305)][l(387)]+" ("+(n.jCvPO(e,0)?"+":"")+e+")")}}catch(u){}}else d[l(142)](_0x16a8bd,l(298))},[s]),q=n[e(212)](t.useCallback,async()=>{const t=e;if(!u||!s||!j)return;const r="w"===j?n[t(191)]:n[t(124)],a=n[t(190)](j,"w")?u[t(299)+t(168)]:u[t(125)+"rId"];await i[t(297)](t(133)+"s").update({status:t(222),result:r,winner_id:a,completed_at:(new Date)[t(279)+"g"]()}).eq("id",u.id),await D(u["whitePlaye"+t(168)],u[t(299)+t(168)],r),o[t(291)](t(162)+"ed")},[u,s,j,D]),L=t.useCallback(async()=>{const t=e;if("bgwXi"===n[t(324)])_0x339b7e=_0x1533b9;else{if(o[t(291)](n[t(118)]),!u)return;await i.from("chess_games")[t(207)]({status:t(222),result:n.GdtEq,completed_at:(new Date).toISOString()}).eq("id",u.id),await D(u.whitePlayerId,u[t(299)+t(168)],t(245))}},[u,D]),A=n[e(371)](t.useCallback,t=>{const n=e,s={};return s[n(241)]=t,s.verbose=!0,l[n(254)](s)[n(199)](e=>e.to)},[l]),S={};return S[e(150)]=l,S.gameState=u,S[e(184)]=C,S[e(148)]=j,S[e(365)]=h,S.error=p,S[e(359)]=B,S.createGame=k,S[e(174)]=M,S[e(259)]=z,S[e(200)]=q,S[e(381)]=L,S[e(152)]=N,S[e(373)+e(178)]=A,S[e(132)+"es"]=g,S})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),A("lobby")};((e={})=>{const n={JTElT:function(e,t){return e instanceof t},wZJor:"Sound muted",CoPzm:"Sound unmuted",dAAiJ:function(e,t){return e&&t},HHNgD:function(e){return e()},CePEY:function(e,t){return e===t},MvgGw:function(e,t,n){return e(t,n)}},{onResign:s,onOfferDraw:r,onBackToLobby:a,isGameActive:i,isMyTurn:c}=e,{toggleEnabled:l,enabled:d}=zt(),u=t.useCallback(e=>{const t=sn;if(n.JTElT(e[t(332)],HTMLInputElement)||n[t(314)](e[t(332)],HTMLTextAreaElement)||e[t(332)][t(348)+t(367)])return;const u=e.key.toLowerCase();switch(u){case"m":l(),o[t(304)](d?n[t(302)]:n[t(305)],{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":n.dAAiJ(i,s)&&(e[t(375)+"ault"](),s());break;case"d":i&&c&&r&&(e[t(375)+t(316)](),n.HHNgD(r));break;case t(333):a&&(e[t(375)+t(316)](),n[t(353)](a));break;case"?":case"/":(!e[t(358)]||n[t(351)](u,"?"))&&(e[t(375)+"ault"](),an())}},[l,d,s,r,a,i,c]);n.MvgGw(t.useEffect,()=>{const e=sn;return window["addEventLi"+e(331)]("keydown",u),()=>window["removeEven"+e(347)](e(339),u)},[u])})({onResign:"active"===(null==vt?void 0:vt.status)?qt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==L?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ee(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,L,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ee(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Kt=async()=>{if(!k)return void P(!0);if(!M)return void K(!0);const e=Ie.find(e=>e.id===J),t=(null==e?void 0:e.white)||{};await Nt(R,V,t)&&A("waiting")},Tt=async e=>{if(!k)return void P(!0);if(!M)return void K(!0);const t=Ie.find(e=>e.id===J),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Gt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Et=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),xe(J);const n=Ie.filter(e=>e.id!==J),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=Yn.find(e=>e.id===Y))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Ut=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Wt=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Ut(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=En,n={};n[t(467)]="medium",n.YGIay=function(e,t){return e*t},n[t(483)]=t(364),n[t(406)]=function(e,t){return e+t},n[t(388)]=t(385);const s=n;switch(e){case t(401):return 300+500*Math[t(450)]();case s.LWdFp:return 500+s[t(362)](Math[t(450)](),1e3);case s[t(483)]:return s[t(406)](800,s[t(362)](Math.random(),1500));case s[t(388)]:return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=En,s={ADwbg:n(401),uiJLI:n(417),OpDAu:function(e,t){return e(t)},lizoI:n(385),eachz:function(e,t){return e(t)}};switch(t){case s[n(361)]:return Pn(e);case s.uiJLI:return s[n(366)](In,e);case n(364):return s[n(366)](Kn,e);case s[n(351)]:return s[n(392)](Kn,e);default:return Pn(e)}}(ee,Y);if(c){const e=Ut(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,Y,ke,q]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(He,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx(Qt,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===L&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Vn.map(e=>d.jsx("button",{onClick:()=>{q.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(G===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(T,{onClick:Et,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:Yn.map(e=>d.jsxs("button",{onClick:()=>_(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(Pe,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(J===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ke,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Te,{to:"/openings",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(Ge,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Te,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(T,{onClick:()=>K(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(T,{onClick:async()=>{if(!k)return void P(!0);if(!M)return void K(!0);const e=Gt().filter(e=>e.white_player_id!==k.id);e.length>0?await Tt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Kt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Gt().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Zn.map(e=>d.jsxs("button",{onClick:()=>F(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(J===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>X(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>X(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Oe,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(T,{onClick:Kt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&d.jsx(We,{className:"h-4 w-4"}),"Create Game",d.jsx(Ye,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Oe,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(_e,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(T,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void P(!0);if(!M)return void K(!0);const e=Ie.find(e=>e.id===J),t=(null==e?void 0:e.black)||{};await Mt(Q.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),Be?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Re(Ae,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Zn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(H,{children:d.jsxs(z,{children:[d.jsx(B,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(D,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),d.jsx(T,{size:"sm",onClick:()=>Tt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!V&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),d.jsx(T,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Fe,{className:"h-4 w-4"})})]})]}),d.jsx(T,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(T,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(T,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Je,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(_t,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:Pt,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Xe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Xe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&d.jsx(Xt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Oe,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Yn.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=Yn.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Je,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(_t,{fen:ee.fen(),onMove:Wt,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===he))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Xe,{whitePalette:(null==(u=Ie.find(e=>e.id===he))?void 0:u.white)||Ie[0].white,blackPalette:(null==(h=Ie.find(e=>e.id===pe))?void 0:h.black)||Ie[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Xe,{whitePalette:(null==(f=Ie.find(e=>e.id===he))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Vt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:Et,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Ve,{}),d.jsx(qe,{isOpen:S,onClose:()=>P(!1)}),d.jsx(De,{isOpen:I,onClose:()=>K(!1),trigger:"general"}),d.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?de:we,whitePalette:"bot-game"===L?(null==(b=Ie.find(e=>e.id===he))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===L?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=Yn.find(e=>e.id===Y))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?de.length:we.length}})]})};export{Xn as default};
