import{s as t,ca as r,dG as n,dH as e}from"./index-BsQTe2MU.js";import{v as o,a,b as i}from"./visualizationSchemas-CUdzUb80.js";import"./flagContent-CO6aQZbM.js";!function(){const t=C,r=u();for(;;)try{if(929828===parseInt(t(329))/1+parseInt(t(320))/2*(parseInt(t(331))/3)+parseInt(t(346))/4+parseInt(t(189))/5*(parseInt(t(232))/6)+parseInt(t(191))/7*(parseInt(t(375))/8)+parseInt(t(247))/9*(-parseInt(t(302))/10)+parseInt(t(370))/11*(-parseInt(t(260))/12))break;r.push(r.shift())}catch(n){r.push(r.shift())}}();const s=function(){const t=C,r={};r[t(230)]=function(t,r){return t+r},r.GUbVM=function(t,r){return t!==r},r[t(272)]=t(305),r[t(315)]="GqxQX";const n=r;let e=!0;return function(t,r){const o=e?function(){const e=C,o={kheXo:function(t,r){return n.rLyte(t,r)}};if(!n[e(319)](n[e(272)],n[e(315)])){let t;try{t=_0x4a57be(o[e(290)](e(236)+e(301),e(287)+e(194)+e(330)+" )")+");")()}catch(a){t=_0x286082}return t}if(r){const n=r[e(350)](t,arguments);return r=null,n}}:function(){};return e=!1,o}}()(void 0,function(){const t=C;return s.toString()[t(219)](t(273)+"+$")[t(267)]()[t(201)+"r"](s)[t(219)](t(273)+"+$")});s();const c=function(){const t=C,r={};r[t(356)]=function(t,r){return t===r},r[t(353)]="sEZUR",r.ZCTPO=t(203),r.EJhWg=function(t,r){return t===r},r[t(286)]=t(379);const n=r;let e=!0;return function(r,o){const a=t,i={};i[a(348)]="You have a"+a(295)+a(196)+"ization - try changing at leas"+a(244)+" for uniqu"+a(224),i.TQMJZ=a(363)+a(264);const s=i,c=e?function(){const t=a;if(n[t(356)](n.fCawh,n.ZCTPO)){const r=_0x35ff63.find(r=>r.id===t(284));if(r){const n={};n[t(263)]=r[t(263)],n.black=r.black,_0x5b1805=n}}else if(o){if(n.EJhWg(n.HICsc,n[t(286)])){const n=o[t(350)](r,arguments);return o=null,n}{const r=_0x231f62[t(359)+t(316)]?s[t(348)]:"This is "+_0x4d56ac[t(216)](_0x54e074[t(270)+"arity"]||30)+(t(221)+t(233)+t(226))+(_0x1f1dfa[t(192)+"ayName"]||s.TQMJZ);return{data:null,error:new _0x19c38b(r),isTooSimilar:!0,ownedByCurrentUser:_0x3345e0["ownedByCur"+t(316)],ownerDisplayName:_0x5792dd["ownerDispl"+t(285)],colorSimilarity:_0x1dd995[t(270)+"arity"],reason:_0x2ab75e.reason}}}}:function(){};return e=!1,c}}();function u(){const t=["BgfYihzPC3vHBa","C2XPy2u","DMLZDwfSAxPHDa","uuTUyvm","zgfYA01Vzgu","y29UC3rYDwn0BW","Aw4GEw91CIbNyq","sKrwDNy","Dg9mB3DLCKnHCW","ueDXveS","C2vSzwn0","rMfPBgvKihrVia","Aw5Zzxj0","vMLZDwfSAxPHDa","Aw5MBW","whPUCue","AKDfzem","BgXLCNK","s3r4sgK","DxbSB2fKigLTyq","CM91BMq","AgvJAZO","y0DHBwu","C2vHCMnO","Bg9YCW","jsbZAw1PBgfYia","C1Lbzfi","zgf0yq","zw5LC3m","BKLK","BIbIEsa","CMvHC29U","zunHCMq","z2u6ia","CKX5Dgu","C0jywKm","mJCYmJHsDgHtAuC","Dg8Gysb2AxnPBW","BgLUA2vKugfSzq","ywXS","CMv0DxjUicHMDq","D3jtzw0","z2fTzurHDge","CMvWBgfJzq","C3rvrei","rxjYB3iGy2HLyW","DgXL","BgL6yxrPB24GAq","Dca4ignVBg9YCW","vgHPCYbPCYa","CfzKsfe","mte2nZq4u1DRrwX3","tIbKyxrH","AxPHDgLVBIaTia","A1nXvwW","zgLZCgXHEv9Uyq","tM94CKq","y3vYCMvUDe1VDG","igzVCIb1BMLXDq","B250zw50","tfPqrNG","lNbUzW","sw52ywXPzcb0Aq","yxjPDhK","mtqYmti4odrHr2jdCxy","CYbHBhjLywr5ia","Bg9N","D2HPDgu","BgXLy3rVCG","q0DLshO","Dg90ywXnB3zLCW","Dg9tDhjPBMC","yK16yLm","uhP6tfG","y29SB3jtAw1PBa","Bw92zxm","tvv6v3m","kcGOlISPkYKRkq","C3vHBgL6yxrPBW","yMXHy2S","sLbNu00","DNnbAuO","zMLUza","Bwf0y2HLzfbHBa","we5KEvu","DhjPBq","ueDsu1qXmty","rhj6B2e","y3vZDg9T","yxLoyw1L","seLdC2m","E30Uy29UC3rYDq","CM9WCMLHDguGyW","BLD6r3q","A2HLwg8","wKDnCfq","ywLUCYbPBMfWCa","uwv6BwS","zgf0zq","ihzLCNKGC2LTAq","BwvZC2fNzq","ww91igHHDMuGyq","BeDtChK","zxjYB3i","Bwf0y2HLzeDHBq","BMn0Aw9UkcKG","odeWzgnQzvj3","zxr0zvnPBwLSyq","Aw9Uig5VDcbMBW","serrEw0","BgL6yxrPB246ia","y2f0zxm6","DxnLCL9Pza","C3vJy2vZCW","DwfSAxPHDgLVBG","zxzLBNq","Dw5K","z2v0uhvIBgLJvq","zNjVBq","BvLmDMC","CMvUDfvZzxi","zMv0y2GGDMLZDq","Aw9Uu3rHDgu","r1vIvK0","mtHbCeLAuu0","ChvIBgLJvxjS","BgvUz3rO","wu9Prg0","ywXPEMf0Aw9UCW","zgvSzxrLihzPCW","CgLLy2vdB2XVCG","AwqSihvZzxjFAq","z2fTzv9KyxrH","mJaYmtCXEhbJDfno","CM4GDgHPCYiPka","mJeYmtbArMn5rfy","qKjOC0C","DhrLswq","x19WCM90B19F","z0TADfO","zxr0zuLK","zxHPC3rPBMDjza","rxjYB3iGAw4Gza","wLDsBwu","CMvZDwX0","CMvTB3zL","D2fYBG","rxHHy3qGzhvWBa","AxnuB29tAw1PBa","CML0Eq","nJaZotKWmg9vvePJwa","AxneDxbSAwnHDa","DLPVExy","zxHJzxb0Aw9U","yxbWBhK","zxHPC3rPBMDwAq","u3LoAgO","zKnHD2G","y29UC29Szq","vgHPCYb2Axn1yq","wNvQB08","CgLLy2vuExbL","Aw9PDhq","B3DUzwrcEun1CG","C3bSAxq","C2LUz2XL","y29Kzq","yw5VDgHLCIbJBW","yxjL","CYbVD25LzcbIEq","C3rVCMfNzq","zxHPC3rPBMDdBW","yxnWuLK","Bg9JA2vKugLLyW","mtfTEgjNvxK","yM9HCMq","Cu9dsMW","thD1BwG","CgDU","ota0rgfSsu9j","AM9PBG","AKTrzMS","y1bHBgv0Dgu","A3LNtKK","zMLUzeLUzgv4","CgfSzxr0zuLK","Cwj2z00","BM93","Bg9JywXLq29TCa","Dhj5ignOyw5NAq","C3rYAw5NAwz5","yMLUza","ChjVzMLSzxm","ChjVDg90ExbL","CKDiz0u","Aw9UCW","Bw9KzxjU","mta5mhfbDgrOBW","AxnjBNrYAw5ZAq","mJq3nZntv0XNtKS","B3DUzxjeAxnWBa","C2f2zwrFDMLZDq","y3rVCIGICMv0Dq","y3vZDg9Tq29SBW"];return(u=function(){return t})()}function f(t,r,n){const e=C,o={};o[e(283)]=e(188);const a=o;return(t||r[e(374)]||"").trim()[e(239)](/\s+/g," ")+"::"+(n?JSON[e(182)]({palette:n[e(177)]||a.Drzoa,darkMode:n[e(200)]||!1,currentMove:n[e(253)+"e"]===1/0?e(235):n[e(253)+"e"],lockedPieces:(n[e(369)+"es"]||[]).sort((t,r)=>(t[e(326)]+"-"+t[e(357)])[e(180)+"are"](r.pieceColor+"-"+r[e(357)]))}):"{}")}async function l(o,a,i,s){const c=C,u={CGeHz:c(355)+"lization i"+c(261)+c(202)+"llery",ScxDg:function(t,r,n,e){return t(r,n,e)},Uytud:c(193)+c(324),ZGMpT:c(327)+"d, pgn, game_data",XznqA:function(t,r){return t===r},qbvgM:c(252),izazu:c(184),SNSGA:c(188),YOiDm:function(t,r){return t===r},ANEPO:c(284),Bkojw:c(338)+"uplicate c"+c(217)};try{const l=u.ScxDg(f,a,i,s),{data:y,error:C}=await t.from(u.Uytud)[c(206)](u[c(291)]);if(C){const t={};return t[c(347)+"e"]=!1,t.isTooSimilar=!1,t}for(const r of y||[]){const n=r[c(328)],e=f(r.pgn||void 0,n,n[c(198)+c(318)]);if(u[c(211)](l,e)){if(u[c(178)]===c(335)){const t=_0x2c56fa[c(359)+c(316)]?u[c(265)]:"This visua"+c(243)+"s owned by "+(_0x596069[c(192)+c(285)]||"another co"+c(264));return{data:null,error:new _0x5bd8de(t),isDuplicate:!0,ownedByCurrentUser:_0x5d0dd3[c(359)+c(316)],ownerDisplayName:_0x3f5239[c(192)+c(285)],colorSimilarity:100}}{const n=u[c(211)](r[c(308)],o);let e;if(!n)if("OKeFz"!==c(186)){const{data:n}=await t[c(314)](u.izazu)[c(206)](c(251)+"me").eq(c(308),r[c(308)]).single();e=(null==n?void 0:n.display_name)||"Another co"+c(264)}else if(_0x1f36c4){const t=_0x39bd6d[c(350)](_0x208e1f,arguments);return _0x409752=null,t}const a={};return a[c(347)+"e"]=!0,a[c(344)+"ar"]=!0,a[c(337)]=r.id,a[c(359)+c(316)]=n,a["ownerDispl"+c(285)]=e,a[c(270)+c(259)]=100,a.reason=c(343)+"icate exists",a}}}const w=(null==s?void 0:s[c(177)])||u.SNSGA;let z;if(null==s?void 0:s[c(195)+"rs"])z=s.customColors;else if(u[c(323)](w,u.ANEPO)){const t=r[c(278)](t=>t.id===c(284));if(t){const r={};r[c(263)]=t[c(263)],r.black=t.black,z=r}}const g=await n(o,a,i,w,z);if(g[c(344)+"ar"]){const t={};return t[c(347)+"e"]=!1,t[c(344)+"ar"]=!0,t[c(337)]=g[c(351)+c(274)+c(225)],t[c(359)+c(316)]=g[c(359)+"rentUser"],t[c(192)+c(285)]=g[c(192)+"ayName"],t[c(270)+"arity"]=g[c(270)+c(259)],t[c(227)]=g.reason,t[c(367)+c(220)]=g["existingCo"+c(220)],t.isIntrinsicPalette=g[c(190)+c(378)],t["isIntrinsi"+c(218)]=g["isIntrinsi"+c(218)],t[c(300)+c(228)]=g["matchedGam"+c(228)],t["matchedPal"+c(336)]=g[c(279)+"etteId"],t[c(279)+c(303)+"rity"]=g[c(279)+c(303)+c(345)],t}let D;z&&(D=e(z)||void 0);const B={};return B[c(347)+"e"]=!1,B.isTooSimilar=!1,B[c(234)+"tteId"]=D,B["colorSimil"+c(259)]=g["colorSimil"+c(259)],B[c(190)+c(378)]=g[c(190)+"cPalette"],B["isIntrinsi"+c(218)]=g[c(190)+c(218)],B.matchedGameCard=g[c(300)+"eCard"],B[c(279)+c(336)]=g[c(279)+c(336)],B[c(279)+c(303)+c(345)]=g[c(279)+c(303)+c(345)],B}catch(l){const t={};return t[c(347)+"e"]=!1,t[c(344)+"ar"]=!1,t}}async function y(r,n,e,s,c,u){const f=C,y={YAvyc:f(273)+"+$",vsAiJ:function(t,r){return t(r)},eZixq:function(t,r){return t(r)},PGqTK:function(t,r){return t!==r},SyNhj:"eqrri",getyT:f(355)+f(243)+f(261)+"in your ga"+f(213),bMzbS:"visualizat"+f(187),wrSem:"image/png",PzzLX:f(193)+f(324),BBhsG:function(t,r){return t||r},LMxRR:f(372)};try{const C=y[f(277)](o,n);if(!C[f(309)])return{data:null,error:new Error(C[f(299)]||f(258)+f(242))};const w=await y.eZixq(a,n);if(!w.safe){if(!y[f(205)](y.SyNhj,y[f(352)]))return{data:null,error:new Error(w.reason||"Title cont"+f(292)+f(288)+f(255))};{const t={};t.white=_0x151dd2[f(263)],t.black=_0x1e2752.black,_0x6e712=t}}const z=i(c);if(!z[f(309)])return{data:null,error:new Error(z[f(299)]||"Invalid PG"+f(248))};const g=await l(r,c,e[f(238)],u);if(g.isDuplicate){const t=g.ownedByCurrentUser?y.getyT:f(355)+f(243)+f(365)+" "+(g.ownerDisplayName||f(363)+f(264));return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:g[f(359)+f(316)],ownerDisplayName:g[f(192)+f(285)],colorSimilarity:100}}if(g.isTooSimilar){const t=g[f(359)+f(316)]?f(297)+f(295)+f(196)+f(249)+f(181)+"ng at least 8 colors"+f(254)+f(224):f(245)+Math[f(216)](g[f(270)+"arity"]||30)+"% similar "+f(233)+f(226)+(g["ownerDispl"+f(285)]||f(363)+f(264));return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:g[f(359)+f(316)],ownerDisplayName:g[f(192)+f(285)],colorSimilarity:g[f(270)+"arity"],reason:g.reason}}const D={...u};D[f(234)+f(333)]=g[f(234)+f(333)];const B=D,x=r+"/"+Date[f(179)]()+"-"+n.replace(/[^a-z0-9]/gi,"-")[f(204)+"e"]()+f(257),{error:d}=await t.storage[f(314)](y[f(268)]).upload(x,s,{contentType:y[f(237)],upsert:!1});if(d)throw new Error(f(207)+f(215)+f(229)+d.message);const{data:h}=t.storage[f(314)](f(198)+f(187))[f(313)+"rl"](x),v={};v[f(263)]=e.gameData[f(263)],v.black=e.gameData[f(275)],v[f(311)]=e.gameData[f(311)],v[f(294)]=e[f(238)][f(294)],v[f(340)]=e[f(238)][f(340)],v[f(374)]=e.gameData.pgn,v[f(271)]=e.gameData[f(271)],v[f(371)]=e.board,v.totalMoves=e[f(266)],v[f(198)+f(318)]=B;const m=v,{data:L,error:q}=await t[f(314)](y[f(269)])[f(208)]({user_id:r,title:n,pgn:y[f(332)](c,null),game_data:m,image_path:h[f(321)]})[f(206)]()[f(361)]();if(q)throw await t[f(366)][f(314)](y.bMzbS)[f(341)]([x]),new Error(f(207)+"save visua"+f(306)+q[f(296)]);const A={};return A[f(223)]=L,A.error=null,A}catch(w){if(y.LMxRR!==f(372))return _0x52220d[f(267)]()[f(219)](f(273)+"+$")[f(267)]()[f(201)+"r"](_0x34711e)[f(219)](KFLOIZ.YAvyc);{const t={};return t[f(223)]=null,t[f(299)]=w,t}}}function C(t,r){t-=176;const n=u();let e=n[t];if(void 0===C.BStGqR){var o=function(t){let r="",n="",e=r+o;for(let o,a,i=0,s=0;a=t.charAt(s++);~a&&(o=i%4?64*o+a:a,i++%4)?r+=e.charCodeAt(s+10)-10!=0?String.fromCharCode(255&o>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let o=0,a=r.length;o<a;o++)n+="%"+("00"+r.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(n)};C.zXjmXd=o,C.BlDZCG={},C.BStGqR=!0}const a=t+n[0],i=C.BlDZCG[a];if(i)e=i;else{const t=function(t){this.CMNKmo=t,this.zcJykq=[1,0,0],this.IDsBXm=function(){return"newState"},this.pGxKwB="\\w+ *\\(\\) *{\\w+ *",this.hBzFts="['|\"].+['|\"];? *}"};t.prototype.GWRCmA=function(){const t=new RegExp(this.pGxKwB+this.hBzFts).test(this.IDsBXm.toString())?--this.zcJykq[1]:--this.zcJykq[0];return this.eiGfnR(t)},t.prototype.eiGfnR=function(t){return Boolean(~t)?this.vGLWag(this.CMNKmo):t},t.prototype.vGLWag=function(t){for(let r=0,n=this.zcJykq.length;r<n;r++)this.zcJykq.push(Math.round(Math.random())),n=this.zcJykq.length;return t(this.zcJykq[0])},new t(C).GWRCmA(),e=C.zXjmXd(e),C.BlDZCG[a]=e}return e}async function w(r){const n=C,e={};e[n(373)]=n(193)+"alizations";const o=e;try{const e={ascending:!1},{data:a,error:i}=await t[n(314)](o[n(373)])[n(206)]("*").eq(n(308),r).order("created_at",e);if(i)throw new Error(n(207)+n(317)+"alizations: "+i[n(296)]);const s={};return s[n(223)]=a||[],s[n(299)]=null,s}catch(a){const t={};return t[n(223)]=[],t[n(299)]=a,t}}async function z(r,n){const e=C,o={};o[e(358)]=e(188),o[e(298)]=function(t,r){return t===r},o[e(199)]=e(231),o[e(280)]=function(t,r){return t+r};const a=o;try{if(a[e(298)](a[e(199)],"AWFWL")){const t=(_0x3f8fd8||_0x24266f[e(374)]||"")[e(281)]()[e(239)](/\s+/g," ");return t+"::"+(_0x13d36c?_0x654615[e(182)]({palette:_0x3ab3ec.paletteId||a[e(358)],darkMode:_0x5a79f3[e(200)]||!1,currentMove:a[e(298)](_0x46d5a7[e(253)+"e"],_0x3c7806)?e(235):_0x8a8b80[e(253)+"e"],lockedPieces:(_0x2b81f5[e(369)+"es"]||[]).sort((t,r)=>(t[e(326)]+"-"+t.pieceType)["localeComp"+e(364)](r.pieceColor+"-"+r[e(357)]))}):"{}")}{const o=new URL(n).pathname[e(360)]("/"),i=o[e(176)](t=>"visualizations"===t),s=o[e(197)](a[e(280)](i,1))[e(376)]("/");s&&await t[e(366)][e(314)](e(198)+e(187))[e(341)]([s]);const{error:c}=await t[e(314)]("saved_visu"+e(324)).delete().eq("id",r);if(c)throw new Error(e(207)+e(325)+e(310)+": "+c[e(296)]);const u={};return u[e(299)]=null,u}}catch(i){const t={};return t[e(299)]=i,t}}c(void 0,function(){const t=C,r={nWzGt:function(t,r){return t+r}};r[t(222)]="{}.constru"+t(194)+t(330)+" )",r[t(256)]=t(342),r[t(246)]="table",r.yWyzQ="trace";const n=r,e=function(){const r=t;let e;try{e=Function(n[r(289)](r(236)+r(301)+n[r(222)],");"))()}catch(o){e=window}return e}(),o=e[t(354)]=e[t(354)]||{},a=[t(262),n.LZPFx,t(210),"error",t(349),n[t(246)],n.yWyzQ];for(let i=0;i<a[t(322)];i++){const r=c[t(201)+"r"][t(185)][t(183)](c),n=a[i],e=o[n]||r;r[t(334)]=c.bind(c),r[t(267)]=e[t(267)][t(183)](e),o[n]=r}})();export{l as checkDuplicateVisualization,z as deleteVisualization,w as getUserVisualizations,y as saveVisualization};
