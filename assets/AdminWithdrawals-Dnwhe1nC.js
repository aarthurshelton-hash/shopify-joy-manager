import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as o,b7 as i,B as l,A as d,cb as u,cR as x,a8 as h,D as m,aB as p,aC as f,aD as w,aE as v,p as j,t as y,w as g,dy as b,dt as C,bo as N,dq as z,cZ as q,a1 as D,a2 as L,a3 as _,a4 as B,a5 as W,aW as M,bC as A,dz as S,b as H,y as I}from"./index-D4HOopRf.js";import{C as P}from"./calendar-7GaMm3hP.js";!function(){const e=Y,t=U();for(;;)try{if(429639===parseInt(e(357))/1+-parseInt(e(286))/2+-parseInt(e(278))/3+-parseInt(e(354))/4*(parseInt(e(339))/5)+-parseInt(e(351))/6*(-parseInt(e(293))/7)+-parseInt(e(303))/8*(-parseInt(e(249))/9)+-parseInt(e(247))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const J=function(){const e=Y,t={};t[e(316)]=e(290);const s=t;let n=!0;return function(e,t){const r=n?function(){const n=Y;if(t){if("apGez"!==s[n(316)]){const s=t[n(343)](e,arguments);return t=null,s}{const e=_0x88f3d7?function(){if(_0x3a43de){const e=_0x5915ac[n(343)](_0x57b6bf,arguments);return _0x5d680f=null,e}}:function(){};return _0x2bd40e=!1,e}}}:function(){};return n=!1,r}}()(void 0,function(){const e=Y,t={};t[e(338)]="(((.+)+)+)+$";const s=t;return J[e(330)]()[e(264)](e(270)+"+$")[e(330)]()[e(345)+"r"](J).search(s.VHLZR)});J();const G=function(){const e=Y,t={};t[e(336)]=function(e,t){return e!==t},t[e(263)]=e(251);const s=t;let n=!0;return function(e,t){const r=n?function(){const n=Y;if(t){if(s[n(336)](s.DLxbu,n(318))){const s=t.apply(e,arguments);return t=null,s}{const e=_0x24ce19?function(){if(_0x1e2615){const e=_0x1c1d91.apply(_0x2c845e,arguments);return _0x570333=null,e}}:function(){};return _0x1e687e=!1,e}}}:function(){};return n=!1,r}}();async function R(t){const s=Y,n={};n[s(241)]=s(285),n[s(311)]=s(326),n.UPGIN="user_id, d"+s(317)+"e",n[s(332)]=s(322)+"ts",n[s(274)]=s(309)+"otal_earned_cents, t"+s(342)+s(361);const r=n;try{const n={};n[s(277)]=!1;let a=e[s(284)]("withdrawal"+s(350))[s(253)]("*").order(r.oonqZ,n);t&&t!==s(321)&&(a=a.eq(r[s(311)],t));const{data:c,error:o}=await a;if(o)throw o;const i=[...new Set((c||[])[s(258)](e=>e[s(288)]))],{data:l}=await e[s(284)](s(364))[s(253)](r[s(267)]).in("user_id",i),{data:d}=await e[s(284)](r.gLuQt)[s(253)](r[s(274)]).in(s(288),i),u=new Map((null==l?void 0:l[s(258)](e=>[e.user_id,e]))||[]),x=new Map((null==d?void 0:d[s(258)](e=>[e[s(288)],e]))||[]),h=(c||[])[s(258)](e=>{var t,n,r;return{...e,payout_details:e["payout_det"+s(252)],user_display_name:(null==(t=u[s(362)](e[s(288)]))?void 0:t[s(325)+"me"])||"Unknown User",wallet_total_earned:(null==(n=x[s(362)](e.user_id))?void 0:n[s(244)+s(283)])||0,wallet_total_withdrawn:(null==(r=x[s(362)](e[s(288)]))?void 0:r[s(300)+"drawn_cents"])||0}}),m={};return m[s(281)]=h,m[s(346)]=null,m}catch(a){const e={};return e[s(281)]=[],e[s(346)]=a,e}}function U(){const e=["yMLUza","C1Hpwgq","yxnJzw5KAw5N","mJmXnJi3rNbmt2P3","yvHbshy","CgvUzgLUzW","zgf0yq","B3vUDa","zwrFy2vUDhm","zNjVBq","y3jLyxrLzf9HDa","mZy2otu4uNrxvNLU","Cgn1zgC","DxnLCL9Pza","qvnnuNq","q3vvtey","y29TCgXLDgvKxW","y3rVCIGICMv0Dq","mtrIAfbWBfu","Bw91BNq","yxbWCM92zwrFyW","wg1oANC","teXesMy","CgvUzgLUz19HBq","Aw5MBW","Dg90ywXFD2L0Aa","yxPbwgq","ig5VDcbPBIbHCa","ndCYohnNtxPsyW","CMvXDwLYzwq","CMvQzwn0zwrFyW","B3vUDf9Jzw50CW","ChjVy2vZCY13Aq","Def4wvK","DxnLCL9PzcWGDa","uMvQzwn0Aw9Uia","CfDKy2C","v0HVyMW","yxbWCM92zwq","yw1VDw50x2nLBG","zMHby3K","s1LuzhC","AxnWBgf5x25HBq","yvv5vu8","Dg90ywW","ChjVDMvKihn0yq","ywXS","DxnLCL93ywXSzq","yxv0Aa","vfLdyxy","zgLZCgXHEv9Uyq","C3rHDhvZ","DhvZ","DgLJyxrLza","ChjVDg90ExbL","Dg9tDhjPBMC","y29UC29Szq","z0X1uxq","zM9YrwfJAa","Dw50","vNrszNK","D0LIBwm","yxrLigvYCM9YoG","vKHmwLi","ndu0mJbeD2L2ENa","CgvUzgLUz19JBW","CMvQzwn0zwq","B3rHBf93AxrOza","yxbWBhK","Aw52B2TL","y29UC3rYDwn0BW","zxjYB3i","y29TCgXLDgvK","qwflq1O","v2fSBgv0ihvWza","x3jLCxvLC3rZ","nJC3odC0r3bns1Dw","DxbKyxrL","cI0TlqO","otzMs0XYrwS","shL5uxe","CMryq2W","mZaZmdKYA2fxshvf","uu9hzLG","Be5nthO","sKrXtLe","CMf3BL9Jzw50CW","z2v0","qvjxzMO","ChjVzMLSzxm","uhvTAMy","D2L0AgrYyxDHBa","B29UCvO","E30Uy29UC3rYDq","BeDlz0i","Dg90ywXFzwfYBG","C3vJy2vZCW","CM4GDgHPCYiPka","nti3mJGWDffHz2vq","tMrOBuW","nJu3owPmDuPhsW","tM90igf1DgHLBG","D2v2qMu","ywLSCW","C2vSzwn0","zfzPyKG","Dg9ju09tDhjPBG","CMvXDwvZDf9Pza","z2v0vxnLCG","BwfW","zxHJzxb0Aw9U","vMnVsgS","C3rHDhvZlcbHBq","yxbWCM92zwrFyq","reX4yNu","C2vHCMnO","yLf0seK","zNvUy3rPB25Z","vvbhsu4","DgHKCMf3ywW","DLjXtvy","kcGOlISPkYKRkq","x19WCM90B19F","BgvUz3rO","Dw94y0S","wgPXquq"];return(U=function(){return e})()}function Y(e,t){e-=239;const s=U();let n=s[e];if(void 0===Y.ixJnhA){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,o=0;a=e.charAt(o++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Y.gYnEkr=r,Y.Glfror={},Y.ixJnhA=!0}const a=e+s[0],c=Y.Glfror[a];if(c)n=c;else{const e=function(e){this.oouWlw=e,this.SlluuD=[1,0,0],this.UuDFqd=function(){return"newState"},this.nfXSvJ="\\w+ *\\(\\) *{\\w+ *",this.GNloXO="['|\"].+['|\"];? *}"};e.prototype.bqPLBO=function(){const e=new RegExp(this.nfXSvJ+this.GNloXO).test(this.UuDFqd.toString())?--this.SlluuD[1]:--this.SlluuD[0];return this.RlJJuz(e)},e.prototype.RlJJuz=function(e){return Boolean(~e)?this.mNYZLY(this.oouWlw):e},e.prototype.mNYZLY=function(e){for(let t=0,s=this.SlluuD.length;t<s;t++)this.SlluuD.push(Math.round(Math.random())),s=this.SlluuD.length;return e(this.SlluuD[0])},new e(Y).bqPLBO(),n=Y.gYnEkr(n),Y.Glfror[a]=n}return n}async function k(){const t=Y,s={};s[t(243)]="pending",s[t(312)]=t(347),s[t(297)]=t(240)+t(350);const n=s;try{const{data:s,error:r}=await e[t(284)](n[t(297)]).select(t(261)+t(306));if(r)throw r;const a={};a[t(340)+t(334)]=0,a[t(298)+"ount"]=0,a[t(295)+"ount"]=0,a["approved_a"+t(294)]=0,a[t(291)+"total"]=0,a[t(305)+"ount"]=0;const c=a;(s||[])[t(333)](e=>{const s=t;switch(e[s(326)]){case n.lGKgB:c[s(340)+s(334)]++,c.pending_amount+=e[s(314)+"ts"];break;case s(313):c[s(295)+s(282)]++,c[s(262)+s(294)]+=e.amount_cents;break;case n.WHobl:c["completed_"+s(319)]+=e[s(314)+"ts"];break;case"rejected":c["rejected_c"+s(282)]++}});const o={};return o[t(281)]=c,o.error=null,o}catch(r){const e={};return e[t(281)]=null,e[t(346)]=r,e}}function K(){const e=["mJq2mZuZntHhyLHfCey","Aw5MBW","z2v0vxnLCG","C2fSzq","nNnJCMnqwG","y3rVCIGICMv0Dq","y3jLyxrLzf9HDa","CM4GDgHPCYiPka","uuT6zuK","Dg9gAxHLza","y2vFy2vUDhm","zNjVBq","yxv0Aa","z2v0x29Yx2nYzq","mte2mdKXmdrmEgTSzwC","z1zWB0O","BejZwgG","Cf9SAxn0Aw5NxW","nxnTt2v0Da","Cf9IDxLLCL9Pza","wg5cuKe","DhjHy2u","BNnHy3rPB25Z","uhvSENC","tMz2Bvu","tM90igf1DgHLBG","oxPfrw9Wsa","B3jKzxi","Cf91C2vYx2LK","D2fSBgv0x3rYyq","uLjmzLi","zgf0yq","yxnJzw5KAw5N","C2vHCMnO","BgLTAxq","C3vJy2vZCW","yxbWBhK","zxHJzxb0Aw9U","BMn0Aw9UkcKG","odaYqLP2yMnu","C2vSzwn0","nte0odmXA1HYC21R","mZeZnJiXn3D1zgjzuq","mtmZodaXnZbMufnIqNK","Ce1Xv3y","DxnLCL9Pza","yvz0D3y","Dg9tDhjPBMC","x19WCM90B19F","yMLUza","y3fwzMu","zKzOB2O","svvouue","BgvUz3rO","Bg9N","mJK1mZG0mhHZrfL4Dq","ChjVDg90ExbL","DgLJyxrLza","mZu3owPxueTpCG","zxjYB3i","Cf9ZywXLx3bYAq","y29UC3rYDwn0BW","kcGOlISPkYKRkq","CNbJ","y29UC29Szq","D2fYBG"];return(K=function(){return e})()}G(void 0,function(){const e=Y,t={VcoHk:"Pumjf",fhAcy:function(e,t){return e(t)},dVibH:function(e){return e()},NdhmL:"warn",QOGfX:"trace"},s=t[e(254)](function(){const e=Y;let s;try{if(t[e(260)]!==e(239)){const t={};return t[e(245)]=!1,t[e(346)]=_0x1c581d,t}s=t[e(315)](Function,"return (function() "+(e(242)+e(292)+e(246))+" ));")()}catch(n){s=window}return s}),n=s[e(331)]=s[e(331)]||{},r=["log",t[e(248)],e(299),e(346),e(259),"table",t[e(358)]];for(let a=0;a<r[e(272)];a++){const t=G.constructor[e(329)].bind(G),s=r[a],c=n[s]||t;t[e(271)]=G[e(275)](G),t[e(330)]=c.toString[e(275)](c),n[s]=t}})(),function(){const e=Z,t=K();for(;;)try{if(742844===-parseInt(e(143))/1+parseInt(e(141))/2*(-parseInt(e(160))/3)+-parseInt(e(157))/4*(-parseInt(e(120))/5)+parseInt(e(172))/6*(parseInt(e(144))/7)+parseInt(e(116))/8+-parseInt(e(128))/9*(-parseInt(e(145))/10)+-parseInt(e(168))/11)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const O=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[Z(138)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=Z,t={};t[e(117)]=e(164)+"+$";const s=t;return O[e(149)]()[e(135)](s[e(117)])[e(149)]().constructor(O)[e(135)](e(164)+"+$")});O();const X=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[Z(138)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function Z(e,t){e-=116;const s=K();let n=s[e];if(void 0===Z.RnTrrs){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,o=0;a=e.charAt(o++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Z.xrRWnR=r,Z.sbTDCW={},Z.RnTrrs=!0}const a=e+s[0],c=Z.sbTDCW[a];if(c)n=c;else{const e=function(e){this.ROJnBs=e,this.pHlJxH=[1,0,0],this.SCktUG=function(){return"newState"},this.jGLxau="\\w+ *\\(\\) *{\\w+ *",this.WsIzQt="['|\"].+['|\"];? *}"};e.prototype.CWtPYz=function(){const e=new RegExp(this.jGLxau+this.WsIzQt).test(this.SCktUG.toString())?--this.pHlJxH[1]:--this.pHlJxH[0];return this.VvTLAd(e)},e.prototype.VvTLAd=function(e){return Boolean(~e)?this.IfxoMB(this.ROJnBs):e},e.prototype.IfxoMB=function(e){for(let t=0,s=this.pHlJxH.length;t<s;t++)this.pHlJxH.push(Math.round(Math.random())),s=this.pHlJxH.length;return e(this.pHlJxH[0])},new e(Z).CWtPYz(),n=Z.xrRWnR(n),Z.sbTDCW[a]=n}return n}function V(e){const t=Z,s={pMqWv:function(e,t){return e/t}};return"$"+s[t(146)](e,100)[t(177)](2)}function E(){var J,G;const{user:U}=t(),K=s(),[O,X]=n.useState(!1),[Z,E]=n.useState(!0),[T,F]=n.useState([]),[Q,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,oe]=n.useState(!1);n.useEffect(()=>{ie()},[U]);const ie=async()=>{if(!U)return void E(!1);const{data:t}=await e.rpc("has_role",{_user_id:U.id,_role:"admin"});!0===t&&(X(!0),await le()),E(!1)},le=async()=>{const[e,t]=await Promise.all([R(ee),k()]);e.data&&F(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(I,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(I,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(I,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(I,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(I,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(I,{variant:"outline",children:e})}};return Z?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):U&&O?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>K(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(o,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:V(Q.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(o,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:V(Q.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(o,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:V(Q.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(o,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(v,{value:ee,children:r.jsxs(c,{children:[r.jsxs(j,{children:[r.jsx(y,{children:"Withdrawal Requests"}),r.jsxs(g,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(o,{children:0===T.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(b,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(C,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:T.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(N,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(P,{className:"h-3 w-3"}),q(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",V(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:V(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(D,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(L,{children:[r.jsxs(_,{children:[r.jsxs(B,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(W,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(J=se.request.payout_details)?void 0:J.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:V(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(M,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(A,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(G=se.request.payout_details)?void 0:G.email})]})]})]}),r.jsxs(S,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){oe(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=Y,r={};r[n(279)]=n(240)+"_requests",r[n(363)]=n(313),r[n(276)]=function(e,t){return e||t};const a=r;try{if("rdXCl"===n(356)){const{data:{user:r}}=await e[n(323)][n(257)]();if(!r)throw new Error(n(250)+n(328));const{error:c}=await e[n(284)](a[n(279)])[n(352)]({status:a[n(363)],admin_notes:a[n(276)](s,null),reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(n(326),n(280));if(c)throw c;const o={};return o[n(245)]=!0,o[n(346)]=null,o}{const e={};return e[n(245)]=!1,e[n(346)]=_0x140805,e}}catch(c){const e={};return e[n(245)]=!1,e[n(346)]=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal approved");break;case"reject":if(!re.trim())return H.error("Rejection reason is required"),void oe(!1);t=await async function(t,s){const n=Y,r={TYCav:function(e,t){return e!==t}};r[n(296)]="LpzIA",r.pcudg=n(310)+"reason is "+n(304),r.azAXd="withdrawal"+n(350),r[n(359)]=n(341);const a=r;try{if(!a[n(324)](a[n(296)],a[n(296)])){const{data:{user:r}}=await e.auth[n(257)]();if(!r)throw new Error(n(250)+n(328));if(!s)throw new Error(a[n(287)]);const{error:c}=await e[n(284)](a[n(301)])[n(352)]({status:a[n(359)],admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(255)+"g"]()}).eq("id",t).eq(n(326),"pending");if(c)throw c;const o={};return o[n(245)]=!0,o[n(346)]=null,o}_0x1c3386=_0x1e1a1e}catch(c){const e={};return e[n(245)]=!1,e.error=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=Y,r={};r[n(289)]=n(250)+n(328),r[n(355)]=n(240)+n(350),r[n(348)]=n(326),r[n(308)]="approved",r[n(265)]=function(e,t){return e||t},r[n(335)]=function(e,t){return e!==t},r.wdQhF="Request not found or"+n(302)+n(320)+n(327),r[n(273)]="completed",r.vRqMV=n(349)+n(337);const a=r;try{const{data:{user:r}}=await e[n(323)][n(257)]();if(!r)throw new Error(a[n(289)]);const{data:c,error:o}=await e.from(a[n(355)]).select("*").eq("id",t).eq(a[n(348)],a[n(308)]).single();if(a[n(265)](o,!c)){if(a[n(335)](n(360),n(360))){const e={};return e[n(281)]=[],e[n(346)]=_0x262058,e}throw new Error(a.wdQhF)}const{error:i}=await e[n(284)](a[n(355)])[n(352)]({status:a[n(273)],admin_notes:s?(c.admin_notes||"")+n(353)+s:c.admin_notes,completed_at:(new Date).toISOString()}).eq("id",t);if(i)throw i;const l={};l[n(256)]=t,l[n(288)]=c.user_id,l[n(314)+"ts"]=c[n(314)+"ts"];const d={};d.body=l;const{error:u}=await e[n(266)][n(344)](n(307)+n(268),d),x={};return x[n(245)]=!0,x[n(346)]=null,x}catch(c){const e={success:!1};return e.error=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?H.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{oe(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(o,{className:"pt-6 text-center",children:[r.jsx(i,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>K("/"),children:"Go Home"})]})})})}X(void 0,function(){const e=Z,t={};t[e(126)]=e(176),t[e(154)]=function(e,t){return e+t},t[e(148)]=e(156),t[e(118)]=e(167),t[e(122)]=e(169),t.RRLfR="error",t[e(125)]=e(139),t[e(153)]=function(e,t){return e<t};const s=t;let n;try{if(e(176)!==s[e(126)]){const t=_0x55cc14[e(163)+"r"][e(158)][e(151)](_0x4b3da5),s=_0x4ebd76[_0x59cae3],n=_0x57b890[s]||t;t[e(150)]=_0x4154db[e(151)](_0x4dc8a7),t[e(149)]=n[e(149)].bind(n),_0x5881a2[s]=t}else{n=Function(s[e(154)](s[e(154)]("return (fu"+e(140),"{}.constru"+e(173)+e(175)+" )"),");"))()}}catch(c){n=window}const r=n[e(166)]=n.console||{},a=[s[e(148)],s[e(118)],s[e(122)],s[e(132)],s[e(125)],"table",e(123)];for(let o=0;s.fFhoj(o,a[e(155)]);o++){const t=X[e(163)+"r"].prototype.bind(X),s=a[o],n=r[s]||t;t[e(150)]=X.bind(X),t[e(149)]=n[e(149)][e(151)](n),r[s]=t}})();export{E as default};
