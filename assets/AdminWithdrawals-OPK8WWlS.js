import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as h,D as m,aB as p,aC as f,aD as w,aE as j,p as v,t as y,w as g,dy as C,dt as N,bo as b,dq as z,cZ as q,a1 as D,a2 as B,a3 as L,a4 as M,a5 as _,aW as A,bC as H,dz as W,b as I,y as P}from"./index-C3fhkH_G.js";import{C as Z}from"./calendar-q5XJzR5i.js";!function(){const e=K,t=k();for(;;)try{if(374129===-parseInt(e(170))/1+parseInt(e(199))/2*(parseInt(e(138))/3)+-parseInt(e(183))/4+-parseInt(e(133))/5*(parseInt(e(144))/6)+parseInt(e(237))/7*(-parseInt(e(208))/8)+parseInt(e(184))/9+-parseInt(e(114))/10*(-parseInt(e(216))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const U=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[K(194)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=K,t={};t[e(207)]=e(128)+"+$";const s=t;return U[e(123)]()[e(203)](s[e(207)])[e(123)]()[e(217)+"r"](U)[e(203)](s[e(207)])});function k(){const e=["Dw50","Dg90ywW","C2LUz2XL","CM4GDgHPCYiPka","Dg9tDhjPBMC","CgvUzgLUzW","C3rHDhvZlcbHBq","y3rVCIGICMv0Dq","yxbWCM92zwq","kcGOlISPkYKRkq","DcbMB3vUzcbVCG","tuLhEfe","BMn0Aw9UkcKG","DgLJyxrLza","mZbHs3rWELe","y29UC29Szq","DhjHy2u","CMvQzwn0zwq","zxHJzxb0Aw9U","mJe5s0TSrgjM","D2PQweK","t3vfALy","CMvQzwn0zwrFyW","DxvtB04","DxbKyxrL","mZe5nJjkwwXJB08","r250swS","B3vUDf9Jzw50CW","zf9Jzw50CYWGDa","C25dAuG","zhjHD25Fy2vUDa","Bw91BNq","CMvXDwvZDf9Pza","uMvQzwn0Aw9Uia","Cgf5B3v0x2rLDa","yxbWCM92zwrFyW","BeHIvgK","AxnWBgf5x25HBq","vuDmEMW","E30Uy29UC3rYDq","qwLXyMu","turAA2G","C1HZwKW","uLPVqxG","z2v0vxnLCG","CgvUzgLUz19JBW","zxjYB3i","zNvUy3rPB25Z","ig5VDcbPBIbHCa","cI0TlqO","Aw52B2TL","nJe5mZa3y0Pozgrh","ChjVDMvKihn0yq","x3jLCxvLC3rZ","rvH1z3m","yxv0Aa","sLbVu2q","ChjVy2vZCY13Aq","CMf3BL9Jzw50CW","ywLSCW","DxnLCL9PzcWGDa","Dvnfy0q","vuLcqMS","B3vUDa","mJuYmZK2mfzOCKj5DG","ota3mJaWvefcCNHs","ywrTAw5FBM90zq","uhfNzMO","Dfv6Bvq","zgLZCgXHEv9Uyq","CgvUzgLUz19HBq","yM9KEq","DurnCM4","CMv0DxjUicHMDq","zw9pzM0","yxbWBhK","EgLwrKy","yxbWCM92zwrFyq","DxnLCL9Pza","B2fMtu0","mti4mJzfzMz3AxK","Dg9ju09tDhjPBG","Dg90ywXFD2L0Aa","D0PHy1a","C2vHCMnO","z2v0","zM9YrwfJAa","DgfIBgu","yLvKuu4","mte3ndiXnMrYD3bdzq","zgf0yq","vgTfseO","EK1qDuK","yw1VDw50x2nLBG","CMvHC29UigLZia","DxnLCL93ywXSzq","C3rHDhvZ","mtm1nZyZnZzoBgjTqwe","y29UC3rYDwn0BW","ywXS","y3jLyxrLzf9HDa","rffMtee","C3vJy2vZCW","yxnJzw5KAw5N","C2vSzwn0","BLbADK0","B3rHBf93AxrOza","sfPHsxy","y29TCgXLDgvK","ufvXvw4","wwPdqxu","qvbQEuG","zNjVBq","x19WCM90B19F","A2H0Be4","qNn1r3y","EvPPEMW","D2L0AgrYyxDHBa","n2ndC1zhvq","D2fYBG","z0jAr0W","zePZA1u","CMvXDwLYzwq","tM90igf1DgHLBG","BwfW","yMLUza","EKHezei","mtbduMXdrfe","Aw5MBW","B3jKzxi","B3rHBf9LyxjUzq","y29TCgXLDgvKxW"];return(k=function(){return e})()}U();const S=function(){let e=!0;return function(t,s){const n=e?function(){const e=K;if(e(181)!=e(181)){const t=_0x66b19a?function(){if(_0x4c64f2){const t=_0x537330[e(194)](_0x50d7c9,arguments);return _0x3154cd=null,t}}:function(){};return _0x537810=!1,t}if(s){const n=s[e(194)](t,arguments);return s=null,n}}:function(){};return e=!1,n}}();function K(e,t){e-=112;const s=k();let n=s[e];if(void 0===K.HROZwF){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};K.MyZZDy=r,K.waxRxw={},K.HROZwF=!0}const a=e+s[0],c=K.waxRxw[a];if(c)n=c;else{const e=function(e){this.IHOWBn=e,this.NWvWHQ=[1,0,0],this.tCKHAy=function(){return"newState"},this.fdVgwn="\\w+ *\\(\\) *{\\w+ *",this.XYiGfB="['|\"].+['|\"];? *}"};e.prototype.TLxMym=function(){const e=new RegExp(this.fdVgwn+this.XYiGfB).test(this.tCKHAy.toString())?--this.NWvWHQ[1]:--this.NWvWHQ[0];return this.QmvnPH(e)},e.prototype.QmvnPH=function(e){return Boolean(~e)?this.KLHuxl(this.IHOWBn):e},e.prototype.KLHuxl=function(e){for(let t=0,s=this.NWvWHQ.length;t<s;t++)this.NWvWHQ.push(Math.round(Math.random())),s=this.NWvWHQ.length;return e(this.NWvWHQ[0])},new e(K).TLxMym(),n=K.MyZZDy(n),K.waxRxw[a]=n}return n}async function G(t){const s=K,n={};n[s(148)]="EXugs",n[s(187)]=s(236)+s(172),n[s(195)]=s(219),n[s(239)]=function(e,t){return e!==t},n[s(130)]=s(218),n.GntIk=s(215),n[s(159)]=s(179)+s(117)+s(147)+s(225)+s(177),n[s(235)]=s(197);const r=n;try{if(s(173)!==r[s(148)]){const e={};return e[s(209)]=[],e.error=_0x5dbe41,e}{const n={};n[s(222)]=!1;let a=e[s(231)](r[s(187)])[s(223)]("*")[s(116)](r[s(195)],n);t&&r[s(239)](t,r[s(130)])&&(a=a.eq(r[s(145)],t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(243)](e=>e.user_id))],{data:l}=await e[s(231)]("profiles")[s(223)]("user_id, d"+s(156)+"e").in(s(197),o),{data:d}=await e.from(s(214)+"ts")[s(223)](r.Aiqbe).in(r[s(235)],o),u=new Map((null==l?void 0:l.map(e=>[e[s(197)],e]))||[]),x=new Map((null==d?void 0:d[s(243)](e=>[e[s(197)],e]))||[]),h=(c||[])[s(243)](e=>{var t,n,r;return{...e,payout_details:e[s(153)+s(178)],user_display_name:(null==(t=u[s(204)](e[s(197)]))?void 0:t[s(188)+"me"])||"Unknown User",wallet_total_earned:(null==(n=x[s(204)](e[s(197)]))?void 0:n.total_earned_cents)||0,wallet_total_withdrawn:(null==(r=x[s(204)](e[s(197)]))?void 0:r[s(201)+s(149)+"s"])||0}}),m={};return m[s(209)]=h,m[s(165)]=null,m}}catch(a){const e={};return e[s(209)]=[],e[s(165)]=a,e}}async function R(){const t=K,s={};s[t(211)]=function(e,t){return e+t},s.eoOfm=t(224),s[t(229)]="approved",s.OuEjV=t(227),s[t(157)]=t(136),s[t(175)]=function(e,t){return e!==t},s[t(139)]=t(236)+t(172),s.VnvbO=t(125)+t(146);const n=s;try{if(n[t(175)]("RZoAx",t(162))){const e={};return e[t(209)]=null,e[t(165)]=_0x4dee25,e}{const{data:s,error:r}=await e[t(231)](n.wjjXI).select(n.VnvbO);if(r)throw r;const a={};a[t(164)+"unt"]=0,a[t(189)+t(182)]=0,a[t(154)+"ount"]=0,a[t(196)+t(150)]=0,a[t(118)+t(120)]=0,a[t(141)+"ount"]=0;const c=a;(s||[])[t(205)](e=>{const s=t;if(n[s(193)]===s(224))switch(e[s(215)]){case s(124):c[s(164)+s(119)]++,c[s(189)+s(182)]+=e[s(212)+"ts"];break;case n[s(229)]:c["approved_c"+s(182)]++,c["approved_a"+s(150)]+=e[s(212)+"ts"];break;case n[s(140)]:c[s(118)+s(120)]+=e[s(212)+"ts"];break;case n[s(157)]:c[s(141)+s(182)]++}else _0x37d01e=_0x50753f(MQCMBQ[s(211)](MQCMBQ.zMPuI(s(192)+s(131),s(158)+s(126)+s(122)+" )"),");"))()});const i={};return i.data=c,i.error=null,i}}catch(r){const e={};return e[t(209)]=null,e[t(165)]=r,e}}function J(e,t){e-=437;const s=O();let n=s[e];if(void 0===J.ihktNB){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};J.jpJMiS=r,J.sCAXPF={},J.ihktNB=!0}const a=e+s[0],c=J.sCAXPF[a];if(c)n=c;else{const e=function(e){this.IPtnFC=e,this.BZhyzR=[1,0,0],this.FLvSHU=function(){return"newState"},this.jCjQlX="\\w+ *\\(\\) *{\\w+ *",this.uXXwcx="['|\"].+['|\"];? *}"};e.prototype.MLOyFC=function(){const e=new RegExp(this.jCjQlX+this.uXXwcx).test(this.FLvSHU.toString())?--this.BZhyzR[1]:--this.BZhyzR[0];return this.MBpLkj(e)},e.prototype.MBpLkj=function(e){return Boolean(~e)?this.YUZsJp(this.IPtnFC):e},e.prototype.YUZsJp=function(e){for(let t=0,s=this.BZhyzR.length;t<s;t++)this.BZhyzR.push(Math.round(Math.random())),s=this.BZhyzR.length;return e(this.BZhyzR[0])},new e(J).MLOyFC(),n=J.jpJMiS(n),J.sCAXPF[a]=n}return n}S(void 0,function(){const e=K,t={};t.jGlYZ="return (fu"+e(131),t[e(228)]="log",t[e(240)]=e(238),t.APjyH="error";const s=t,n=function(){const t=e;let n;try{n=Function(s.jGlYZ+(t(158)+t(126)+t(122)+" ));"))()}catch(r){n=window}return n}(),r=n.console=n[e(134)]||{},a=[s[e(228)],s[e(240)],e(115),s[e(230)],e(137),e(206),e(135)];for(let c=0;c<a.length;c++){const t=S[e(217)+"r"].prototype[e(112)](S),s=a[c],n=r[s]||t;t[e(232)]=S[e(112)](S),t.toString=n[e(123)][e(112)](n),r[s]=t}})(),function(){const e=J,t=O();for(;;)try{if(976915===parseInt(e(439))/1+parseInt(e(473))/2*(parseInt(e(468))/3)+-parseInt(e(444))/4*(-parseInt(e(449))/5)+-parseInt(e(492))/6+-parseInt(e(511))/7*(-parseInt(e(496))/8)+-parseInt(e(475))/9+-parseInt(e(452))/10*(parseInt(e(440))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const X=function(){const e=J,t={};t[e(463)]=function(e,t){return e===t};const s=t;let n=!0;return function(t,r){const a=e,c={azCQm:function(e,t){return s[J(463)](e,t)},DhILM:a(512)},i=n?function(){const e=a;if(c[e(461)](c.DhILM,"XJxRY")){if(r){const s=r[e(455)](t,arguments);return r=null,s}}else{const t=_0x164ee8[e(497)+"r"][e(502)][e(447)](_0x25b002),s=_0x3d2fb9[_0x4a0b26],n=_0x5a2eaf[s]||t;t.__proto__=_0x1f1f5c[e(447)](_0x434f91),t[e(508)]=n[e(508)][e(447)](n),_0x5d9045[s]=t}}:function(){};return n=!1,i}}()(void 0,function(){const e=J,t={};t[e(479)]=e(472)+"+$";const s=t;return X[e(508)]()[e(462)](s[e(479)]).toString()[e(497)+"r"](X)[e(462)](e(472)+"+$")});X();const Y=function(){const e=J,t={};t[e(493)]=function(e,t){return e===t},t[e(483)]=e(501);const s=t;let n=!0;return function(t,r){const a=e;if(s[a(493)]("OMtkD",s[a(483)])){const e=_0x42b8cd[a(455)](_0x3e1d6e,arguments);return _0xcda769=null,e}{const e=n?function(){if(r){const e=r[a(455)](t,arguments);return r=null,e}}:function(){};return n=!1,e}}}();function O(){const e=["q2DLEe8","m0jPDeDAEq","AK9zrK8","Cf91C2vYx2LK","BNnHy3rPB25Z","kcGOlISPkYKRkq","mJuXnZeXnNHhDLjlAa","zgXYzxi","otm5mZi3m2fMDM5JwG","qvPrr2C","B25jvw8","CNbJ","wMTHBMq","y29UC29Szq","C1viu1O","z2v0vxnLCG","AeT4uKu","zNjVBq","tM90igf1DgHLBG","yxnJzw5KAw5N","B3jKzxi","ALPVq1y","zxHJzxb0Aw9U","yxv0Aa","x19WCM90B19F","mJy4otGZnMT1t3zpCG","q2j6sfm","CMv0DxjUicHMDq","r0njrxO","nJCYExveqLfs","y29UC3rYDwn0BW","Cf9SAxn0Aw5NxW","y3jLyxrLzf9HDa","C2vSzwn0","BwD2C3u","ChjVDg90ExbL","BgvUz3rO","DgfIBgu","Dg9gAxHLza","C3vJy2vZCW","D2fYBG","Dg9tDhjPBMC","thr0y3u","quHvsem","mtC1mJfpuLfxtMO","weP4uLK","ELvgEKq","DxnLCL9Pza","mtuYotG1muPQDeTRAa","mta4owDJvgHfrq","y3rVCIGICMv0Dq","r05pExC","DgLJyxrLza","mtKYohH0vurNtq","Bg9N","zxjYB3i","yMLUza","y2vFy2vUDhm","ota2mhfZy2zrzG","z2v0x29Yx2nYzq","BgLTAxq","mtqXnZmWsxbSshPx","DhjHy2u","CMTLDhbSywnLxW","yxbWBhK","uefyBxC","Chzuvg0","tfveBuW","CM4GDgHPCYiPka","zgf0yq","yxPduw0","C2vHCMnO","BNfXAxa","BMn0Aw9UkcKG","Aw5MBW","zhzoz08"];return(O=function(){return e})()}function E(e){return"$"+(e/100)[J(505)](2)}function F(){var U,k;const{user:S}=t(),J=s(),[X,Y]=n.useState(!1),[O,F]=n.useState(!0),[Q,V]=n.useState([]),[T,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[S]);const oe=async()=>{if(!S)return void F(!1);const{data:t}=await e.rpc("has_role",{_user_id:S.id,_role:"admin"});!0===t&&(Y(!0),await le()),F(!1)},le=async()=>{const[e,t]=await Promise.all([G(ee),R()]);e.data&&V(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(P,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(P,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(P,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(P,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(P,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(P,{variant:"outline",children:e})}};return O?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):S&&X?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>J(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),T&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:E(T.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:E(T.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:E(T.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(j,{value:ee,children:r.jsxs(c,{children:[r.jsxs(v,{children:[r.jsx(y,{children:"Withdrawal Requests"}),r.jsxs(g,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===Q.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(N,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:Q.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(b,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(Z,{className:"h-3 w-3"}),q(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",E(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:E(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(D,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(B,{children:[r.jsxs(L,{children:[r.jsxs(M,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(_,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(U=se.request.payout_details)?void 0:U.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:E(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(A,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(H,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(k=se.request.payout_details)?void 0:k.email})]})]})]}),r.jsxs(W,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=K,r={};r[n(234)]=n(242)+n(132),r[n(210)]=n(236)+n(172),r.khtlN=function(e,t){return e||t},r[n(186)]=n(124);const a=r;try{const{data:{user:r}}=await e[n(174)][n(163)]();if(!r)throw new Error(a[n(234)]);const{error:c}=await e[n(231)](a[n(210)])[n(143)]({status:n(127),admin_notes:a[n(233)](s,null),reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(n(215),a[n(186)]);if(c)throw c;const i={};return i[n(221)]=!0,i.error=null,i}catch(c){const e={};return e[n(221)]=!1,e.error=c,e}}(se.request.id,re),t.success&&I.success("Withdrawal approved");break;case"reject":if(!re.trim())return I.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=K,r={};r[n(202)]="Not authen"+n(132),r.zHDdB=n(152)+n(213)+n(241),r[n(226)]="withdrawal"+n(172),r[n(161)]="rejected",r[n(191)]=n(215);const a=r;try{const{data:{user:r}}=await e[n(174)][n(163)]();if(!r)throw new Error(a[n(202)]);if(!s)throw new Error(a[n(113)]);const{error:c}=await e[n(231)](a.HZaIv)[n(143)]({status:a[n(161)],admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(200)+"g"]()}).eq("id",t).eq(a[n(191)],n(124));if(c)throw c;const i={};return i[n(221)]=!0,i.error=null,i}catch(c){const e={};return e[n(221)]=!1,e.error=c,e}}(se.request.id,re),t.success&&I.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=K,r={};r.DQfLA="withdrawal"+n(172),r.ykJIH=n(215),r[n(142)]=n(127),r[n(155)]=n(227),r[n(160)]="wQqrX",r[n(180)]="Wallet update error:";const a=r;try{const{data:{user:r}}=await e.auth[n(163)]();if(!r)throw new Error(n(242)+"ticated");const{data:c,error:i}=await e.from(a[n(220)])[n(223)]("*").eq("id",t).eq(a.ykJIH,a[n(142)])[n(121)]();if(i||!c)throw new Error("Request no"+n(129)+n(167)+n(171)+"tus");const{error:o}=await e[n(231)](a.DQfLA)[n(143)]({status:a[n(155)],admin_notes:s?(c[n(185)+"s"]||"")+n(168)+s:c[n(185)+"s"],completed_at:(new Date)[n(200)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(151)]=t,l[n(197)]=c[n(197)],l.amount_cents=c[n(212)+"ts"];const d={};d[n(190)]=l;const{error:u}=await e[n(166)][n(169)](n(176)+"thdrawal",d);if(u&&n(198)===a[n(160)]){const e={success:!1};return e[n(165)]=_0x284912,e}const x={};return x[n(221)]=!0,x[n(165)]=null,x}catch(c){const e={};return e[n(221)]=!1,e.error=c,e}}(se.request.id,re),t.success&&I.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?I.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>J("/"),children:"Go Home"})]})})})}Y(void 0,function(){const e=J,t={dGNqK:function(e,t){return e+t},jOYFO:function(e,t){return e+t},CgexO:function(e){return e()},onIUo:e(445),Lttcu:e(507),zUFzD:"error",IapFx:e(453),LUDmL:function(e,t){return e<t}},s=t[e(467)](function(){const s=e;let n;try{if("pvTTm"!==s(457)){const e=_0x436bf7[s(455)](_0x42e4e2,arguments);return _0x276458=null,e}n=Function(t.dGNqK(t[s(469)](s(494)+s(464),"{}.constru"+s(441)+s(459)+" )"),");"))()}catch(r){n=window}return n}),n=s[e(480)]=s[e(480)]||{},r=[t[e(477)],t[e(509)],e(465),t[e(437)],e(489),e(504),t.IapFx];for(let a=0;t[e(458)](a,r[e(503)]);a++){const t=Y.constructor[e(502)][e(447)](Y),s=r[a],c=n[s]||t;t[e(491)]=Y.bind(Y),t[e(508)]=c[e(508)][e(447)](c),n[s]=t}})();export{F as default};
