const n='/**\n * Predictive Analysis Panel\n * \n * Displays deep position analysis with 30-move lookahead,\n * best move recommendations, and future position predictions.\n */\n\nimport React, { useState, useEffect } from \'react\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { Button } from \'@/components/ui/button\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Progress } from \'@/components/ui/progress\';\nimport { ScrollArea } from \'@/components/ui/scroll-area\';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \'@/components/ui/tooltip\';\nimport {\n  Brain,\n  TrendingUp,\n  Eye,\n  Zap,\n  Target,\n  ChevronRight,\n  Loader2,\n  Sparkles,\n  AlertTriangle,\n  Shield,\n  Crown,\n  Crosshair,\n} from \'lucide-react\';\nimport { usePredictiveAnalysis } from \'@/hooks/usePredictiveAnalysis\';\nimport { PositionPotential, MoveRecommendation, TacticalTheme, Vulnerability } from \'@/lib/chess/predictiveAnalysis\';\n\ninterface PredictiveAnalysisPanelProps {\n  fen: string;\n  onMoveClick?: (move: string) => void;\n  compact?: boolean;\n  autoAnalyze?: boolean;\n}\n\nexport const PredictiveAnalysisPanel: React.FC<PredictiveAnalysisPanelProps> = ({\n  fen,\n  onMoveClick,\n  compact = false,\n  autoAnalyze = false,\n}) => {\n  const {\n    isAnalyzing,\n    progress,\n    error,\n    positionPotential,\n    moveRecommendation,\n    analyzePosition,\n    getBestMove,\n    clearResults,\n  } = usePredictiveAnalysis();\n\n  const [showFuturePositions, setShowFuturePositions] = useState(false);\n\n  useEffect(() => {\n    if (autoAnalyze && fen) {\n      analyzePosition(fen, { depth: 18, lookahead: 10 });\n    }\n  }, [fen, autoAnalyze, analyzePosition]);\n\n  const handleAnalyze = async () => {\n    clearResults();\n    await analyzePosition(fen, { depth: 20, lookahead: 15 });\n  };\n\n  const handleGetBestMove = async () => {\n    await getBestMove(fen, 20);\n  };\n\n  if (compact) {\n    return (\n      <div className="p-3 rounded-lg border border-border/50 bg-card/50 space-y-2">\n        <div className="flex items-center justify-between">\n          <div className="flex items-center gap-2">\n            <Brain className="h-4 w-4 text-primary" />\n            <span className="text-sm font-medium">Predictive Engine</span>\n          </div>\n          <Button\n            size="sm"\n            variant="outline"\n            onClick={handleGetBestMove}\n            disabled={isAnalyzing || !fen}\n            className="h-7 text-xs"\n          >\n            {isAnalyzing ? <Loader2 className="h-3 w-3 animate-spin" /> : \'Best Move\'}\n          </Button>\n        </div>\n        \n        {moveRecommendation && (\n          <div className="flex items-center gap-2">\n            <Badge className="bg-primary/10 text-primary">\n              {moveRecommendation.move}\n            </Badge>\n            <span className="text-xs text-muted-foreground">\n              {moveRecommendation.confidence}% confidence\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className="space-y-4">\n      {/* Header */}\n      <div className="flex items-center justify-between">\n        <div className="flex items-center gap-2">\n          <Brain className="h-5 w-5 text-primary" />\n          <h3 className="font-display text-sm uppercase tracking-wider">\n            Predictive Analysis\n          </h3>\n          <Badge variant="outline" className="text-[10px]">\n            30-Move Lookahead\n          </Badge>\n        </div>\n        \n        <div className="flex gap-2">\n          <Button\n            size="sm"\n            variant="outline"\n            onClick={handleGetBestMove}\n            disabled={isAnalyzing || !fen}\n          >\n            {isAnalyzing ? <Loader2 className="h-3 w-3 animate-spin mr-1" /> : <Target className="h-3 w-3 mr-1" />}\n            Best Move\n          </Button>\n          <Button\n            size="sm"\n            onClick={handleAnalyze}\n            disabled={isAnalyzing || !fen}\n            className="bg-primary/90 hover:bg-primary"\n          >\n            {isAnalyzing ? <Loader2 className="h-3 w-3 animate-spin mr-1" /> : <Sparkles className="h-3 w-3 mr-1" />}\n            Deep Analysis\n          </Button>\n        </div>\n      </div>\n\n      {/* Progress */}\n      <AnimatePresence>\n        {isAnalyzing && progress && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \'auto\' }}\n            exit={{ opacity: 0, height: 0 }}\n            className="space-y-2 p-3 rounded-lg bg-primary/5 border border-primary/20"\n          >\n            <div className="flex items-center justify-between text-xs">\n              <span className="text-primary">{progress.stage}</span>\n              <span className="text-muted-foreground">{progress.percent}%</span>\n            </div>\n            <Progress value={progress.percent} className="h-1" />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Error */}\n      {error && (\n        <div className="p-3 rounded-lg bg-destructive/10 border border-destructive/30 flex items-center gap-2">\n          <AlertTriangle className="h-4 w-4 text-destructive" />\n          <span className="text-sm text-destructive">{error}</span>\n        </div>\n      )}\n\n      {/* Best Move Recommendation */}\n      {moveRecommendation && (\n        <MoveRecommendationCard \n          recommendation={moveRecommendation} \n          onMoveClick={onMoveClick}\n        />\n      )}\n\n      {/* Position Potential Analysis */}\n      {positionPotential && (\n        <PositionPotentialCard \n          potential={positionPotential}\n          showFuturePositions={showFuturePositions}\n          onToggleFuture={() => setShowFuturePositions(!showFuturePositions)}\n        />\n      )}\n\n      {/* Empty state */}\n      {!isAnalyzing && !positionPotential && !moveRecommendation && !error && (\n        <div className="p-6 rounded-lg border border-dashed border-border/50 text-center">\n          <Brain className="h-8 w-8 mx-auto text-muted-foreground/50 mb-2" />\n          <p className="text-sm text-muted-foreground">\n            Analyze this position to see 30-move predictions\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Sub-components\n\nconst MoveRecommendationCard: React.FC<{\n  recommendation: MoveRecommendation;\n  onMoveClick?: (move: string) => void;\n}> = ({ recommendation, onMoveClick }) => (\n  <div className="p-4 rounded-lg bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/30">\n    <div className="flex items-start justify-between mb-3">\n      <div>\n        <Badge className="bg-green-500/20 text-green-600 border-green-500/30 mb-2">\n          <Target className="h-3 w-3 mr-1" />\n          Best Move\n        </Badge>\n        <button\n          onClick={() => onMoveClick?.(recommendation.move)}\n          className="text-2xl font-display font-bold text-green-500 hover:text-green-400 transition-colors"\n        >\n          {recommendation.move}\n        </button>\n      </div>\n      <div className="text-right">\n        <div className="text-2xl font-bold text-green-500">\n          {recommendation.confidence}%\n        </div>\n        <div className="text-xs text-muted-foreground">Confidence</div>\n      </div>\n    </div>\n    \n    {/* Evaluation */}\n    <div className="grid grid-cols-2 gap-3 mb-3">\n      <div className="p-2 rounded bg-background/50">\n        <div className="text-xs text-muted-foreground">Evaluation</div>\n        <div className={`font-mono font-bold ${\n          recommendation.evaluation > 0 ? \'text-green-500\' :\n          recommendation.evaluation < 0 ? \'text-red-500\' : \'text-muted-foreground\'\n        }`}>\n          {recommendation.evaluation > 0 ? \'+\' : \'\'}{(recommendation.evaluation / 100).toFixed(2)}\n        </div>\n      </div>\n      <div className="p-2 rounded bg-background/50">\n        <div className="text-xs text-muted-foreground">Improvement</div>\n        <div className={`font-mono font-bold ${\n          recommendation.improvement > 0 ? \'text-green-500\' : \'text-muted-foreground\'\n        }`}>\n          +{(recommendation.improvement / 100).toFixed(2)}\n        </div>\n      </div>\n    </div>\n    \n    {/* Reasoning */}\n    <div className="space-y-1">\n      <div className="text-xs text-muted-foreground">Why this move:</div>\n      <ul className="text-xs space-y-1">\n        {recommendation.reasoning.map((reason, i) => (\n          <li key={i} className="flex items-center gap-1 text-green-600">\n            <ChevronRight className="h-3 w-3" />\n            {reason}\n          </li>\n        ))}\n      </ul>\n    </div>\n    \n    {/* Visual Impact */}\n    <div className="mt-3 pt-3 border-t border-green-500/20">\n      <div className="flex items-center gap-2 text-xs">\n        <Eye className="h-3 w-3 text-green-500" />\n        <span className="text-muted-foreground">Visual impact:</span>\n        <span className="text-green-600">{recommendation.visualImpact}</span>\n      </div>\n    </div>\n  </div>\n);\n\nconst PositionPotentialCard: React.FC<{\n  potential: PositionPotential;\n  showFuturePositions: boolean;\n  onToggleFuture: () => void;\n}> = ({ potential, showFuturePositions, onToggleFuture }) => (\n  <div className="space-y-3">\n    {/* Position Type & Dynamism */}\n    <div className="p-3 rounded-lg border border-border/50 bg-card/50">\n      <div className="flex items-center justify-between mb-2">\n        <Badge variant="outline" className="capitalize">\n          {potential.positionType.replace(\'_\', \' \')}\n        </Badge>\n        <div className="flex items-center gap-2">\n          <Zap className="h-3 w-3 text-amber-500" />\n          <span className="text-xs">Dynamism: {potential.dynamism}%</span>\n        </div>\n      </div>\n      \n      <Progress value={potential.dynamism} className="h-1.5" />\n    </div>\n\n    {/* Tactical Themes */}\n    {potential.tacticalThemes.length > 0 && (\n      <div className="p-3 rounded-lg bg-purple-500/10 border border-purple-500/20">\n        <div className="flex items-center gap-2 mb-2">\n          <Crosshair className="h-4 w-4 text-purple-500" />\n          <span className="text-sm font-medium text-purple-600">Tactical Themes</span>\n        </div>\n        <div className="flex flex-wrap gap-1">\n          {potential.tacticalThemes.map((theme, i) => (\n            <TacticalThemeBadge key={i} theme={theme} />\n          ))}\n        </div>\n      </div>\n    )}\n\n    {/* Vulnerabilities */}\n    {potential.vulnerabilities.length > 0 && (\n      <div className="p-3 rounded-lg bg-red-500/10 border border-red-500/20">\n        <div className="flex items-center gap-2 mb-2">\n          <AlertTriangle className="h-4 w-4 text-red-500" />\n          <span className="text-sm font-medium text-red-600">Vulnerabilities</span>\n        </div>\n        <div className="space-y-1">\n          {potential.vulnerabilities.map((v, i) => (\n            <VulnerabilityItem key={i} vulnerability={v} />\n          ))}\n        </div>\n      </div>\n    )}\n\n    {/* Critical Squares */}\n    <div className="p-3 rounded-lg border border-border/50 bg-card/50">\n      <div className="flex items-center gap-2 mb-2">\n        <Target className="h-4 w-4 text-primary" />\n        <span className="text-sm font-medium">Critical Squares</span>\n      </div>\n      <div className="flex flex-wrap gap-1">\n        {potential.criticalSquares.map((sq, i) => (\n          <Badge key={i} variant="outline" className="font-mono text-xs">\n            {sq}\n          </Badge>\n        ))}\n      </div>\n    </div>\n\n    {/* Principal Variation */}\n    <div className="p-3 rounded-lg border border-primary/30 bg-primary/5">\n      <div className="flex items-center justify-between mb-2">\n        <div className="flex items-center gap-2">\n          <TrendingUp className="h-4 w-4 text-primary" />\n          <span className="text-sm font-medium text-primary">Best Line</span>\n        </div>\n        <Badge className={`${\n          potential.principalVariation.winProbability > 60 ? \'bg-green-500/20 text-green-600\' :\n          potential.principalVariation.winProbability < 40 ? \'bg-red-500/20 text-red-600\' :\n          \'bg-muted text-muted-foreground\'\n        }`}>\n          {potential.principalVariation.winProbability.toFixed(0)}% win\n        </Badge>\n      </div>\n      \n      <div className="flex flex-wrap gap-1 text-xs font-mono">\n        {potential.principalVariation.moves.slice(0, 10).map((move, i) => (\n          <span key={i} className="px-1.5 py-0.5 rounded bg-background/50">\n            {i % 2 === 0 ? `${Math.floor(i/2) + 1}. ` : \'\'}{move}\n          </span>\n        ))}\n        {potential.principalVariation.moves.length > 10 && (\n          <span className="text-muted-foreground">\n            ...+{potential.principalVariation.moves.length - 10} more\n          </span>\n        )}\n      </div>\n      \n      {potential.principalVariation.isMate && (\n        <Badge className="mt-2 bg-red-500/20 text-red-600">\n          <Crown className="h-3 w-3 mr-1" />\n          Mate in {potential.principalVariation.mateIn}\n        </Badge>\n      )}\n    </div>\n\n    {/* Future Positions Toggle */}\n    {potential.futurePositions.length > 0 && (\n      <Button\n        variant="outline"\n        size="sm"\n        onClick={onToggleFuture}\n        className="w-full"\n      >\n        <Eye className="h-3 w-3 mr-2" />\n        {showFuturePositions ? \'Hide\' : \'Show\'} Future Positions ({potential.futurePositions.length})\n      </Button>\n    )}\n\n    {/* Future Positions */}\n    <AnimatePresence>\n      {showFuturePositions && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: \'auto\' }}\n          exit={{ opacity: 0, height: 0 }}\n        >\n          <ScrollArea className="h-48">\n            <div className="space-y-2 pr-4">\n              {potential.futurePositions.map((pos, i) => (\n                <div \n                  key={i}\n                  className="p-2 rounded border border-border/30 bg-card/30"\n                >\n                  <div className="flex items-center justify-between mb-1">\n                    <Badge variant="outline" className="text-[10px]">\n                      Move {pos.moveNumber}\n                    </Badge>\n                    <span className={`text-xs font-mono ${\n                      pos.evaluation > 0 ? \'text-green-500\' :\n                      pos.evaluation < 0 ? \'text-red-500\' : \'\'\n                    }`}>\n                      {pos.evaluation > 0 ? \'+\' : \'\'}{(pos.evaluation / 100).toFixed(1)}\n                    </span>\n                  </div>\n                  <p className="text-xs text-muted-foreground">{pos.description}</p>\n                  <div className="flex items-center gap-2 mt-1 text-[10px]">\n                    <span>Territory: {pos.visualPattern.controlledTerritory}</span>\n                    <span>‚Ä¢</span>\n                    <span className="capitalize">{pos.visualPattern.dominantColor}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </ScrollArea>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  </div>\n);\n\nconst TacticalThemeBadge: React.FC<{ theme: TacticalTheme }> = ({ theme }) => {\n  const icons: Record<string, string> = {\n    fork: \'‚ëÇ\',\n    pin: \'üìå\',\n    skewer: \'üó°Ô∏è\',\n    discovered_attack: \'üí°\',\n    double_attack: \'‚öîÔ∏è\',\n    back_rank: \'‚ôõ\',\n    sacrifice: \'üíé\',\n    promotion: \'üëë\',\n    mating_pattern: \'‚ôö#\',\n    zugzwang: \'üîí\',\n    tactical: \'‚ö°\',\n  };\n\n  return (\n    <TooltipProvider>\n      <Tooltip>\n        <TooltipTrigger>\n          <Badge \n            variant="secondary" \n            className="text-xs cursor-help"\n            style={{ opacity: theme.likelihood / 100 }}\n          >\n            {icons[theme.type] || \'?\'} {theme.type.replace(\'_\', \' \')}\n          </Badge>\n        </TooltipTrigger>\n        <TooltipContent>\n          <p className="max-w-xs text-xs">{theme.description}</p>\n          <p className="text-muted-foreground text-[10px]">\n            {theme.likelihood}% likelihood\n          </p>\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  );\n};\n\nconst VulnerabilityItem: React.FC<{ vulnerability: Vulnerability }> = ({ vulnerability }) => {\n  const severityColors = {\n    low: \'text-yellow-500\',\n    medium: \'text-orange-500\',\n    high: \'text-red-500\',\n    critical: \'text-red-600 font-bold\',\n  };\n\n  return (\n    <div className="flex items-start gap-2 text-xs">\n      <Shield className={`h-3 w-3 mt-0.5 ${severityColors[vulnerability.severity]}`} />\n      <div>\n        <span className={severityColors[vulnerability.severity]}>\n          {vulnerability.side === \'white\' ? \'‚ôî\' : \'‚ôö\'} {vulnerability.type.replace(\'_\', \' \')}\n        </span>\n        <p className="text-muted-foreground">{vulnerability.description}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default PredictiveAnalysisPanel;\n';export{n as default};
