import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as h,D as m,aB as p,aC as f,aD as w,aE as v,p as j,t as g,w as y,dy as C,dt as b,bo as N,dq as z,cZ as q,a1 as L,a2 as B,a3 as D,a4 as _,a5 as A,aW as M,bC as P,dz as W,b as K,y as S}from"./index-CN5tH3TC.js";import{C as I}from"./calendar-TsF61Uvi.js";function Y(e,t){e-=371;const s=Z();let n=s[e];if(void 0===Y.nhdgVE){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Y.VQlXul=r,Y.coraNp={},Y.nhdgVE=!0}const a=e+s[0],c=Y.coraNp[a];if(c)n=c;else{const e=function(e){this.fjOAEK=e,this.QQYBhP=[1,0,0],this.XBbwwo=function(){return"newState"},this.xvNttx="\\w+ *\\(\\) *{\\w+ *",this.hXWmpz="['|\"].+['|\"];? *}"};e.prototype.ILYZgH=function(){const e=new RegExp(this.xvNttx+this.hXWmpz).test(this.XBbwwo.toString())?--this.QQYBhP[1]:--this.QQYBhP[0];return this.PYhoyt(e)},e.prototype.PYhoyt=function(e){return Boolean(~e)?this.LBgVcE(this.fjOAEK):e},e.prototype.LBgVcE=function(e){for(let t=0,s=this.QQYBhP.length;t<s;t++)this.QQYBhP.push(Math.round(Math.random())),s=this.QQYBhP.length;return e(this.QQYBhP[0])},new e(Y).ILYZgH(),n=Y.VQlXul(n),Y.coraNp[a]=n}return n}!function(){const e=Y,t=Z();for(;;)try{if(783995===parseInt(e(458))/1+parseInt(e(497))/2*(parseInt(e(424))/3)+-parseInt(e(420))/4*(-parseInt(e(422))/5)+-parseInt(e(473))/6*(parseInt(e(442))/7)+parseInt(e(404))/8*(-parseInt(e(494))/9)+-parseInt(e(465))/10+parseInt(e(453))/11*(parseInt(e(502))/12))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const H=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=Y,t={ZZiFs:"(((.+)+)+)+$"},s=t;return H.toString()[e(487)](s[e(448)])[e(414)]()[e(445)+"r"](H)[e(487)](s[e(448)])});H();const U=function(){const e=Y,t={};t[e(489)]=function(e,t){return e===t};const s=t;let n=!0;return function(t,r){const a=e;if(s[a(489)]("WQQVl","WQQVl")){const e=n?function(){if(r){const e=r[a(491)](t,arguments);return r=null,e}}:function(){};return n=!1,e}_0x3422cf=_0x36ccba.eq(a(436),_0x20ce14)}}();async function E(t){const s=Y,n={};n.TenZv="withdrawal"+s(423),n[s(398)]=function(e,t){return e!==t},n[s(410)]=s(476)+"ts",n[s(468)]=s(396)+s(482)+"d_cents, t"+s(441)+s(434),n.AMgnb="user_id";const r=n;try{const n={};n[s(460)]=!1;let a=e.from(r[s(418)])[s(480)]("*")[s(484)](s(455),n);t&&r.kTbKQ(t,"all")&&(a=a.eq(s(436),t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[]).map(e=>e[s(409)]))],{data:l}=await e[s(380)](s(403))[s(480)](s(477)+"isplay_name").in(s(409),o),{data:d}=await e[s(380)](r.RSHBc)[s(480)](r.gItSr).in(r[s(457)],o),u=new Map((null==l?void 0:l[s(397)](e=>[e[s(409)],e]))||[]),x=new Map((null==d?void 0:d[s(397)](e=>[e.user_id,e]))||[]),h=(c||[])[s(397)](e=>{var t,n,r;return{...e,payout_details:e[s(454)+s(389)],user_display_name:(null==(t=u[s(474)](e[s(409)]))?void 0:t.display_name)||s(416)+"er",wallet_total_earned:(null==(n=x[s(474)](e[s(409)]))?void 0:n[s(387)+s(399)])||0,wallet_total_withdrawn:(null==(r=x[s(474)](e[s(409)]))?void 0:r[s(447)+s(471)+"s"])||0}}),m={};return m[s(376)]=h,m[s(431)]=null,m}catch(a){const e={data:[]};return e.error=a,e}}function Z(){const e=["Dg9ju09tDhjPBG","wwTiCvq","CMvHC29UigLZia","yxbWBhK","y29TCgXLDgvKxW","Aw5MBW","ourKAwrxBG","y3jque4","BvngwxO","ndi0mZqYBfniwNHf","ywrTAw5FBM90zq","zwPlANu","CMvXDwLYzwq","zNDmyuG","mJy0tKTSu0vS","Bw9kyxi","CgvUzgLUzW","D2L0AgrYyxDHBa","DgLJyxrLza","yxbWCM92zwrFyW","EM5dy1i","zgf0yq","zM9YrwfJAa","qxzNrxG","Cxb6weK","zNjVBq","yxbWCM92zwq","zxHJzxb0Aw9U","cI0TlqO","yxbWCM92zwrFyq","CgvUzgLUz19HBq","Dw50","Dg90ywXFzwfYBG","yM5ctem","ywLSCW","x19WCM90B19F","ChjVDg90ExbL","CM4GDgHPCYiPka","DhjHy2u","wu1hBuS","sKTusva","DxnLCL9PzcWGDa","BwfW","A1rIs1e","zwrFy2vUDhm","yxz2v0q","v2fSBgv0ihvWza","CMv0DxjUicHMDq","ChjVzMLSzxm","nZm0ndGYnfzwAKP3CG","D2fYBG","DhHWrK8","y2LKC2m","C3vJy2vZCW","DxnLCL9Pza","uLniqMm","DgfIBgu","u2fPuue","yw1VDw50x2nLBG","Dg9tDhjPBMC","y3rVCIGICMv0Dq","vw5RBM93BIbvCW","B3vUDa","vgvUwNy","Aw52B2TL","mte2CwH1EgfV","DxbKyxrL","mJu5nJbwvefbrMy","x3jLCxvLC3rZ","m29IzhDuyG","ig5VDcbPBIbHCa","rNHLDhm","Bg9N","Bw91BNq","vwv5thq","y29TCgXLDgvK","zxjYB3i","vKjHvwq","E30Uy29UC3rYDq","CMf3BL9Jzw50CW","CMvXDwvZDf9Pza","C3rHDhvZ","ChjVy2vZCY13Aq","CMvQzwn0zwq","ELHwv1q","yMLUza","B3rHBf93AxrOza","mteYrfHLA0PM","se1Ozfi","ChjVDMvKihn0yq","y29UC3rYDwn0BW","DxnftLm","Dg90ywXFD2L0Aa","wLPPrNm","CgvUzgLUz19JBW","yM9KEq","te5ZugO","zNvUy3rPB25Z","mte2ndKXmxPVz3nmBq","Cgf5B3v0x2rLDa","y3jLyxrLzf9HDa","B3vUDf9Jzw50CW","qu1NBMi","nZe4odeZqM9QDfbR","yxv0Aa","yxnJzw5KAw5N","C3rHDhvZlcbHBq","ugzOyLm","CMvQzwn0zwrFyW","C2LUz2XL","nZi2nJiWmgfvEezXsG","uMvQzwn0Aw9Uia","B2TUsKG","z0L0u3i","Dg90ywW","CLzAzKK","zhjHD25Fy2vUDa","tM90igf1DgHLBG","mZy4ndK2uKzRrLbv","z2v0","y29UC29Szq","DxnLCL93ywXSzq","DxnLCL9PzcWGza","q0frz3K","yxrLigvYCM9YoG","C2vSzwn0","z2v0vxnLCG","B3rHBf9LyxjUzq","rhnrCK4","B3jKzxi","DcbMB3vUzcbVCG","B3vIvee","C2vHCMnO"];return(Z=function(){return e})()}async function k(){const t=Y,s={};s[t(400)]=t(401)+t(479),s.SpCTw=function(e,t){return e===t},s[t(496)]=t(429),s.oubTA=t(478),s[t(503)]=t(371),s[t(462)]=t(381),s[t(407)]=t(430),s[t(470)]=t(438),s.ZhJPL=t(461)+t(456);const n=s;try{const{data:s,error:r}=await e[t(380)](t(372)+t(423))[t(480)](n.ZhJPL);if(r)throw r;const a={};a[t(449)+t(386)]=0,a["pending_am"+t(417)]=0,a[t(374)+t(417)]=0,a[t(384)+t(428)]=0,a[t(492)+"total"]=0,a[t(463)+t(417)]=0;const c=a;(s||[])[t(377)](e=>{const s=t;if(n.SpCTw(n.mSFYz,n[s(486)]))_0x4f1dad.error(n[s(400)],_0x498637);else switch(e[s(436)]){case n.moJar:c[s(449)+"unt"]++,c[s(385)+s(417)]+=e[s(413)+"ts"];break;case n[s(462)]:c["approved_c"+s(417)]++,c[s(384)+s(428)]+=e[s(413)+"ts"];break;case n[s(407)]:c[s(492)+s(469)]+=e[s(413)+"ts"];break;case n[s(470)]:c[s(463)+s(417)]++}});const i={};return i[t(376)]=c,i[t(431)]=null,i}catch(r){const e={};return e[t(376)]=null,e[t(431)]=r,e}}U(void 0,function(){const e=Y,t={LNsPj:function(e,t){return e+t}};t[e(395)]=e(402)+"nction() ",t.vFoTm=function(e,t){return e<t};const s=t,n=function(){const t=e;let n;try{n=Function(s[t(451)](s[t(395)]+(t(433)+t(415)+t(392)+" )"),");"))()}catch(r){n=window}return n}(),r=n.console=n[e(475)]||{},a=[e(427),e(405),e(493),e(431),e(382),e(411),e(393)];for(let c=0;s.vFoTm(c,a.length);c++){const t=U[e(445)+"r"][e(391)].bind(U),s=a[c],n=r[s]||t;t[e(390)]=U[e(440)](U),t.toString=n[e(414)][e(440)](n),r[s]=t}})(),function(){const e=Q,t=G();for(;;)try{if(126725===-parseInt(e(188))/1+parseInt(e(191))/2*(parseInt(e(156))/3)+parseInt(e(148))/4+-parseInt(e(169))/5*(-parseInt(e(176))/6)+parseInt(e(192))/7+parseInt(e(154))/8*(parseInt(e(183))/9)+-parseInt(e(173))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const T=function(){const e=Q,t={RNcgf:function(e,t){return e!==t}};t[e(194)]=e(130);const s=t;let n=!0;return function(e,t){const r=n?function(){const n=Q;if(s[n(161)](s[n(194)],s[n(194)]))return"$"+(_0x279e8f/100)[n(158)](2);if(t){const s=t[n(166)](e,arguments);return t=null,s}}:function(){};return n=!1,r}}()(void 0,function(){const e=Q,t={};t.AMVgY=e(157)+"+$";const s=t;return T.toString()[e(163)](e(157)+"+$").toString()[e(155)+"r"](T)[e(163)](s[e(160)])});T();const V=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[Q(166)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function G(){const e=["s2ruEwS","yxv0Aa","ndq1mg1ABwTovq","Cf9ZywXLx3bYAq","BMn0Aw9UkcKG","C2fSzq","nJmYmZa2mgDMwLjisq","ChjVDg90ExbL","ugjQq04","nteWA0PvC1nq","zxjYB3i","yNb3v3u","Aw5MBW","zgf0yq","Ewvpu1K","z2v0vxnLCG","oxrPwKXjAa","Dg9tDhjPBMC","ChjVy2vZC19Tyq","Cf91C2vYx2LK","DhjHy2u","nde2nJb6CfveELK","yMLUza","x19WCM90B19F","nty4mK13z0jivG","mta4mdeYmuv5BxjPwq","Cf9IDxLLCL9Pza","C2TWB00","vxPgthq","DxnLCL9Pza","DxnrDfO","BujQCuG","re5LuNC","y3rVCIGICMv0Dq","B3vqt0C","DgLJyxrLza","C3vJy2vZCW","tM90igf1DgHLBG","BgvUz3rO","DgfIBgu","CNbJ","v2DkAKO","yxrLx3DHBgXLDa","B3jKzxi","CM4GDgHPCYiPka","y2vFy2vUDhm","D2fYBG","BgLTAxq","EMHirfy","nZGXndGWBuD0v2Xo","yxnJzw5KAw5N","CNrSuMC","EfHbvLe","y3LdEu0","zNjVBq","mtiWnZqZmM5dyxvbAa","y29UC3rYDwn0BW","mJm3y2fAzMz2","kcGOlISPkYKRkq","Dg9gAxHLza","zxHJzxb0Aw9U","qu1wz1K","uK5Jz2y","z2v0x29Yx2nYzq","C2vHCMnO","D2fSBgv0x3rYyq","z1jbyvC","yxbWBhK"];return(G=function(){return e})()}function Q(e,t){e-=130;const s=G();let n=s[e];if(void 0===Q.ZXXTpY){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Q.KXyyiI=r,Q.jCLbDl={},Q.ZXXTpY=!0}const a=e+s[0],c=Q.jCLbDl[a];if(c)n=c;else{const e=function(e){this.npNmPh=e,this.TzLCEm=[1,0,0],this.SMzHck=function(){return"newState"},this.auxObh="\\w+ *\\(\\) *{\\w+ *",this.jCQiwo="['|\"].+['|\"];? *}"};e.prototype.AVpKwU=function(){const e=new RegExp(this.auxObh+this.jCQiwo).test(this.SMzHck.toString())?--this.TzLCEm[1]:--this.TzLCEm[0];return this.MPWfrQ(e)},e.prototype.MPWfrQ=function(e){return Boolean(~e)?this.AzARFt(this.npNmPh):e},e.prototype.AzARFt=function(e){for(let t=0,s=this.TzLCEm.length;t<s;t++)this.TzLCEm.push(Math.round(Math.random())),s=this.TzLCEm.length;return e(this.TzLCEm[0])},new e(Q).AVpKwU(),n=Q.KXyyiI(n),Q.jCLbDl[a]=n}return n}function R(e){const t={};t[Q(197)]=function(e,t){return e/t};return"$"+t.usQtZ(e,100).toFixed(2)}function X(){var H,U;const{user:Z}=t(),T=s(),[V,G]=n.useState(!1),[Q,X]=n.useState(!0),[J,O]=n.useState([]),[F,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[Z]);const oe=async()=>{if(!Z)return void X(!1);const{data:t}=await e.rpc("has_role",{_user_id:Z.id,_role:"admin"});!0===t&&(G(!0),await le()),X(!1)},le=async()=>{const[e,t]=await Promise.all([E(ee),k()]);e.data&&O(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(S,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(S,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(S,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(S,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(S,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(S,{variant:"outline",children:e})}};return Q?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):Z&&V?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>T(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),F&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:R(F.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:R(F.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:R(F.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(v,{value:ee,children:r.jsxs(c,{children:[r.jsxs(j,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===J.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(b,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:J.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(N,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(I,{className:"h-3 w-3"}),q(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",R(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:R(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(L,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(B,{children:[r.jsxs(D,{children:[r.jsxs(_,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(A,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(H=se.request.payout_details)?void 0:H.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:R(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(M,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(P,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(U=se.request.payout_details)?void 0:U.email})]})]})]}),r.jsxs(W,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=Y,r={};r[n(412)]=n(472)+n(373),r.VBaUd=n(372)+n(423),r[n(446)]=n(381),r[n(394)]="status";const a=r;try{const{data:{user:r}}=await e.auth[n(481)]();if(!r)throw new Error(a[n(412)]);const{error:c}=await e[n(380)](a[n(432)]).update({status:a[n(446)],admin_notes:s||null,reviewed_by:r.id,reviewed_at:(new Date)[n(488)+"g"]()}).eq("id",t).eq(a[n(394)],n(371));if(c)throw c;const i={};return i[n(408)]=!0,i[n(431)]=null,i}catch(c){const e={};return e[n(408)]=!1,e.error=c,e}}(se.request.id,re),t.success&&K.success("Withdrawal approved");break;case"reject":if(!re.trim())return K.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=Y,r={};r[n(426)]="(((.+)+)+)+$",r[n(378)]=function(e,t){return e===t},r.HMhdR=n(483),r[n(379)]=n(472)+n(373),r.corTl=n(466)+n(490)+n(500),r[n(375)]="pending";const a=r;try{if(a[n(378)](n(467),a[n(443)]))return _0x2d378b[n(414)]()[n(487)](JVzkwc[n(426)])[n(414)]()[n(445)+"r"](_0x29e035).search(JVzkwc[n(426)]);{const{data:{user:r}}=await e[n(459)][n(481)]();if(!r)throw new Error(a[n(379)]);if(!s)throw new Error(a.corTl);const{error:c}=await e[n(380)]("withdrawal"+n(423)).update({status:n(438),admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(n(436),a[n(375)]);if(c)throw c;const i={};return i[n(408)]=!0,i[n(431)]=null,i}}catch(c){const e={};return e[n(408)]=!1,e[n(431)]=c,e}}(se.request.id,re),t.success&&K.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=Y,r={};r[n(439)]=n(436),r.txpFO="Request no"+n(485)+n(425)+n(444)+"tus",r.ejKju=n(372)+n(423),r[n(495)]=function(e,t){return e===t},r[n(388)]="ujJvQ",r[n(501)]=n(401)+n(479);const a=r;try{const{data:{user:r}}=await e[n(459)].getUser();if(!r)throw new Error("Not authen"+n(373));const{data:c,error:i}=await e[n(380)](n(372)+n(423)).select("*").eq("id",t).eq(a[n(439)],"approved")[n(464)]();if(i||!c)throw new Error(a[n(406)]);const{error:o}=await e[n(380)](a[n(499)])[n(421)]({status:n(430),admin_notes:s?(c.admin_notes||"")+n(383)+s:c[n(498)+"s"],completed_at:(new Date)[n(488)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(435)]=t,l[n(409)]=c[n(409)],l[n(413)+"ts"]=c[n(413)+"ts"];const d={};d[n(450)]=l;const{error:u}=await e[n(452)][n(419)](n(437)+"thdrawal",d);if(u)if(a.crPPN(a[n(388)],a[n(388)]));else if(_0x49e4c4){const e=_0x2eb085[n(491)](_0x4cb7f7,arguments);return _0x49cc87=null,e}const x={};return x[n(408)]=!0,x[n(431)]=null,x}catch(c){const e={};return e[n(408)]=!1,e[n(431)]=c,e}}(se.request.id,re),t.success&&K.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?K.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>T("/"),children:"Go Home"})]})})})}V(void 0,function(){const e=Q,t={ZZcuk:function(e,t){return e===t},UzFLt:e(152),bpwWu:"GcUtK",VwXor:function(e,t){return e(t)},ouPOG:function(e,t){return e+t},rtlRg:function(e,t){return e+t},KdTyk:"{}.constru"+e(132)+e(143)+" )",gRAaW:"log",xXAVQ:e(179),mAnvT:e(177),zhHDV:e(187),WgJjJ:function(e,t){return e<t}},s=function(){const s=e;if(!t.ZZcuk(t[s(195)],t[s(178)])){let e;try{e=t.VwXor(Function,t[s(133)](t[s(150)]("return (fu"+s(171),t[s(167)]),");"))()}catch(n){e=window}return e}{const e=_0x55591e.constructor[s(174)][s(189)](_0x51fe5f),t=_0x29bcdf[_0x22a517],n=_0x4b0f52[t]||e;e[s(190)]=_0x1b2813[s(189)](_0x55a11f),e[s(184)]=n[s(184)][s(189)](n),_0x38cb57[t]=e}}(),n=s.console=s.console||{},r=[t[e(165)],e(145),t[e(151)],t.mAnvT,e(159),e(138),t[e(147)]];for(let a=0;t[e(140)](a,r[e(137)]);a++){const t=V.constructor.prototype[e(189)](V),s=r[a],c=n[s]||t;t.__proto__=V[e(189)](V),t[e(184)]=c[e(184)][e(189)](c),n[s]=t}})();export{X as default};
