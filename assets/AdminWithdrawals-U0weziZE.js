import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as m,D as h,aB as p,aC as f,aD as v,aE as w,p as g,t as j,w as y,dy as C,dt as N,bo as b,dq as q,cZ as z,a1 as D,a2 as L,a3 as B,a4 as M,a5 as A,aW as W,bC as _,dz as I,b as K,y as Y}from"./index-DodN4URN.js";import{C as S}from"./calendar-CwotWr4L.js";!function(){const e=E,t=P();for(;;)try{if(849177===parseInt(e(574))/1*(-parseInt(e(575))/2)+parseInt(e(588))/3+parseInt(e(581))/4+-parseInt(e(495))/5*(-parseInt(e(583))/6)+parseInt(e(576))/7+-parseInt(e(589))/8+-parseInt(e(505))/9*(-parseInt(e(541))/10))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const H=function(){const e={};e[E(507)]="lTjDE";const t=e;let s=!0;return function(e,n){const r=s?function(){const s=E;if(t[s(507)]!==s(601)){const e={};return e[s(559)]=!1,e[s(488)]=_0x344c46,e}if(n){const t=n[s(487)](e,arguments);return n=null,t}}:function(){};return s=!1,r}}()(void 0,function(){const e=E;return H.toString()[e(585)](e(499)+"+$")[e(543)]().constructor(H)[e(585)]("(((.+)+)+)+$")});function P(){const e=["yxnJzw5KAw5N","ChjVDMvKihn0yq","Dg9ju09tDhjPBG","kcGOlISPkYKRkq","DMnLELK","D2L0AgrYyxDHBa","B3jKzxi","r0PbuLm","ENjqA3C","mtHbD0PhExi","yxbWCM92zwq","DMDTAMy","rMDnBhe","DxnLCL9Pza","Aw52B2TL","zM9YrwfJAa","tgvPAwq","zNjVBq","BgvUz3rO","ywLSCW","DgHKCMf3ywW","DxnLCL9PzcWGza","yMLUza","ChjVy2vZCY13Aq","B3rHBf93AxrOza","BMn0Aw9UkcKG","s25TDM4","yM9KEq","CMvQzwn0zwq","E30Uy29UC3rYDq","Eur4s1O","Dg90ywXFzwfYBG","Bw91BNq","DxbKyxrL","r1z6v0W","yxbWCM92zwrFyq","Ag9uuxy","y29UC29Szq","zf9Jzw50CYWGDa","CxLWAxq","Aw5MBW","C2vSzwn0","thH1ExG","B3vUDf9Jzw50CW","yxbWCM92zwrFyW","ndaXnteYmhbqEvnrvW","ywXS","Dg9tDhjPBMC","B3vUDa","zNvUy3rPB25Z","Dg90ywXFD2L0Aa","CMvHC29UigLZia","CMvXDwLYzwq","BMLNsLC","AxnWBgf5x25HBq","zfz4DwW","ChjVzMLSzxm","BwfW","C3rHDhvZ","DxnLCL9PzcWGDa","y29TCgXLDgvKxW","z2v0vxnLCG","t1vHz04","C3vJy2vZCW","C3rHDhvZlcbHBq","zxHJzxb0Aw9U","CgvUzgLUz19HBq","CMvQzwn0zwrFyW","Cgf5B3v0x2rLDa","cI0TlqO","t0XUEuK","B3rHBf9LyxjUzq","ig5VDcbPBIbHCa","C2LUz2XL","yxv0Aa","Bg9N","D2fYBG","CM4GDgHPCYiPka","mwzxqLLIBW","mJKXnde5nMTMDNLgqq","mta5mJu1mdjWuxDnrwi","y3rVCIGICMv0Dq","z2v0","vwrlyuu","yxrLigvYCM9YoG","mZaWnZG3mLvQCeP2zq","y29TCgXLDgvK","nNjKAKnWrG","quroseO","C2vHCMnO","ve5ltNe","uMvXDwvZDcbUBW","mJy5nJiYB29JBKfN","mteZndCZmtj2u0TMuM4","ywrTAw5FBM90zq","Dw50","zhLjEvO","zhjHD25Fy2vUDa","CgvUzgLUzW","AM1QsvG","x3jLCxvLC3rZ","tM90igf1DgHLBG","wwjLDeG","CMvXDwvZDf9Pza","zgf0yq","BfrQreu","Dxbevxy","DcbMB3vUzcbVCG","B3j6BK8","DgLJyxrLza","DgfIBgu","y29UC3rYDwn0BW","yw1VDw50x2nLBG","yxbWBhK","zxjYB3i","zgLZCgXHEv9Uyq","v2fSBgv0ihvWza","vw5RBM93BIbvCW","Dg90ywW","tgLPCw8","t3zICLe","mJu5nte4nuLIEhbyBG"];return(P=function(){return e})()}H();const R=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[E(487)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();async function U(t){const s=E,n={};n[s(482)]=s(501)+s(596),n[s(538)]="created_at",n.zrPkw=function(e,t){return e!==t},n[s(584)]=s(554),n.hoTQv=s(552),n.HcOOi=s(509),n[s(592)]=function(e,t){return e!==t};const r=n;try{const n={};n[s(496)]=!1;let a=e[s(513)](r.orznO)[s(537)]("*")[s(502)](r[s(538)],n);t&&r[s(504)](t,s(542))&&(a=a.eq(r[s(584)],t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(553)](e=>e.user_id))],{data:l}=await e.from(r[s(532)])[s(537)](s(517)+s(550)+"e").in(r.HcOOi,o),{data:d}=await e.from("user_wallets")[s(537)](s(555)+s(567)+s(534)+s(520)+"rawn_cents").in("user_id",o),u=new Map((null==l?void 0:l.map(e=>[e[s(509)],e]))||[]),x=new Map((null==d?void 0:d.map(e=>[e[s(509)],e]))||[]),m=(c||[]).map(e=>{var t,n,r;return{...e,payout_details:e[s(564)+s(515)],user_display_name:(null==(t=u[s(578)](e[s(509)]))?void 0:t[s(489)+"me"])||s(491)+"er",wallet_total_earned:(null==(n=x[s(578)](e[s(509)]))?void 0:n[s(527)+"ed_cents"])||0,wallet_total_withdrawn:(null==(r=x[s(578)](e[s(509)]))?void 0:r[s(546)+s(593)+"s"])||0}}),h={};return h.data=m,h[s(488)]=null,h}catch(a){if(r.dyIyZ(s(500),s(493))){const e={};return e[s(600)]=[],e[s(488)]=a,e}{const e=_0x57189c[s(487)](_0x259083,arguments);return _0x3b7d08=null,e}}}function E(e,t){e-=482;const s=P();let n=s[e];if(void 0===E.ehOlPo){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};E.WWVQMC=r,E.VWdiQf={},E.ehOlPo=!0}const a=e+s[0],c=E.VWdiQf[a];if(c)n=c;else{const e=function(e){this.ouLVoR=e,this.ngJYxK=[1,0,0],this.eCQHZc=function(){return"newState"},this.LAhinq="\\w+ *\\(\\) *{\\w+ *",this.rqeFOB="['|\"].+['|\"];? *}"};e.prototype.RjTrgJ=function(){const e=new RegExp(this.LAhinq+this.rqeFOB).test(this.eCQHZc.toString())?--this.ngJYxK[1]:--this.ngJYxK[0];return this.VgDYTM(e)},e.prototype.VgDYTM=function(e){return Boolean(~e)?this.mVVUkn(this.ouLVoR):e},e.prototype.mVVUkn=function(e){for(let t=0,s=this.ngJYxK.length;t<s;t++)this.ngJYxK.push(Math.round(Math.random())),s=this.ngJYxK.length;return e(this.ngJYxK[0])},new e(E).RjTrgJ(),n=E.WWVQMC(n),E.VWdiQf[a]=n}return n}async function O(){const t=E,s={};s[t(595)]=t(594),s[t(579)]=t(506),s[t(602)]=t(582),s[t(558)]=t(524),s.yTCjw=t(560)+t(539);const n=s;try{const{data:s,error:r}=await e[t(513)]("withdrawal"+t(596))[t(537)](n.yTCjw);if(r)throw r;const a={};a["pending_co"+t(591)]=0,a[t(562)+t(544)]=0,a[t(540)+t(544)]=0,a[t(531)+"mount"]=0,a[t(556)+t(492)]=0,a[t(563)+t(544)]=0;const c=a;(s||[])[t(511)](e=>{const s=t;switch(e[s(554)]){case n[s(595)]:c["pending_co"+s(591)]++,c.pending_amount+=e[s(486)+"ts"];break;case n[s(579)]:c[s(540)+"ount"]++,c[s(531)+s(528)]+=e[s(486)+"ts"];break;case n[s(602)]:c[s(556)+s(492)]+=e.amount_cents;break;case n[s(558)]:c[s(563)+s(544)]++}});const i={};return i[t(600)]=c,i[t(488)]=null,i}catch(r){const e={};return e[t(600)]=null,e[t(488)]=r,e}}R(void 0,function(){const e=E,t={VaegC:function(e,t){return e(t)},GVzWL:e(525)+e(577)+e(573)+" )",OLnyI:function(e){return e()},EpYnM:e(572),qypit:e(536)};let s;try{const n=t.VaegC(Function,"return (fu"+e(521)+t[e(530)]+");");s=t[e(566)](n)}catch(a){s=window}const n=s[e(533)]=s[e(533)]||{},r=[e(571),t.EpYnM,t[e(535)],e(488),e(561),e(484),"trace"];for(let c=0;c<r[e(514)];c++){const t=R[e(485)+"r"].prototype.bind(R),s=r[c],a=n[s]||t;t.__proto__=R[e(518)](R),t[e(543)]=a[e(543)].bind(a),n[s]=t}})(),function(){const e=V,t=J();for(;;)try{if(203526===parseInt(e(201))/1+-parseInt(e(136))/2+parseInt(e(198))/3*(-parseInt(e(139))/4)+parseInt(e(164))/5+parseInt(e(176))/6*(-parseInt(e(188))/7)+parseInt(e(163))/8*(parseInt(e(149))/9)+-parseInt(e(183))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const G=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=V,t={};t[e(200)]=e(141)+"+$";const s=t;return G[e(156)]().search(s[e(200)])[e(156)]()[e(195)+"r"](G)[e(150)]("(((.+)+)+)+$")});G();const k=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[V(143)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function J(){const e=["E30Uy29UC3rYDq","wungv1G","BgLTAxq","y3jLyxrLzf9HDa","Cfjvzu8","oe5ZzvrIvG","mteZnty2mgr0v0vbzG","C2fSzq","Cf9ZywXLx3bYAq","CM4GDgHPCYiPka","tM90igf1DgHLBG","Ag1KCNG","DxnLCL9Pza","Cf9IDxLLCL9Pza","wvrmCuG","BvnRrva","z2v0vxnLCG","C2vSzwn0","ndG0nZrkq0rKz3G","B3jKzxi","yxrLx3DHBgXLDa","BMn0Aw9UkcKG","qungA2q","qM5fELa","yMLUza","mJqYnJuWmeDJshPVyG","BgvUz3rO","Aw5MBW","yxv0Aa","wePAEue","mZvKu21gCxq","y3rVCIGICMv0Dq","z2v0x29Yx2nYzq","C3vJy2vZCW","x19WCM90B19F","vMr2uvi","DgfIBgu","y29UC3rYDwn0BW","zxjYB3i","zNjVBq","oda1ofnswgL2ta","Dg9gAxHLza","AvLoqu8","nJaZodzuD1Pktwq","zvfUugW","CNbJ","D2fSBgv0x3rYyq","zgf0yq","CMTLDhbSywnLxW","EK1Lvhy","mJa0nty4txzYrNnL","y2vFy2vUDhm","DhjHy2u","mtqWCw1It01o","yvbWC1O","kcGOlISPkYKRkq","y29UC29Szq","yxbWBhK","Cf9SAxn0Aw5NxW","ENLTAuS","CMv0DxjUicHMDq","EvHRAxy","D2fYBG","mZu1odeYm0XxvenHAq","C2vHCMnO","BNnHy3rPB25Z","yxnJzw5KAw5N","DgLJyxrLza","t0Hov1y","zxHJzxb0Aw9U","Dg9tDhjPBMC","ChjVDg90ExbL"];return(J=function(){return e})()}function V(e,t){e-=135;const s=J();let n=s[e];if(void 0===V.vQiQeR){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};V.UEdiDE=r,V.BgKpKX={},V.vQiQeR=!0}const a=e+s[0],c=V.BgKpKX[a];if(c)n=c;else{const e=function(e){this.HrFJRu=e,this.nOosAo=[1,0,0],this.jmgQIc=function(){return"newState"},this.CJRaES="\\w+ *\\(\\) *{\\w+ *",this.KteZLP="['|\"].+['|\"];? *}"};e.prototype.oYCfoa=function(){const e=new RegExp(this.CJRaES+this.KteZLP).test(this.jmgQIc.toString())?--this.nOosAo[1]:--this.nOosAo[0];return this.vnMRSM(e)},e.prototype.vnMRSM=function(e){return Boolean(~e)?this.gvZuBu(this.HrFJRu):e},e.prototype.gvZuBu=function(e){for(let t=0,s=this.nOosAo.length;t<s;t++)this.nOosAo.push(Math.round(Math.random())),s=this.nOosAo.length;return e(this.nOosAo[0])},new e(V).oYCfoa(),n=V.UEdiDE(n),V.BgKpKX[a]=n}return n}function Z(e){const t=V,s={luQvR:function(e,t){return e/t}};return"$"+s.luQvR(e,100)[t(199)](2)}function Q(){var H,P;const{user:R}=t(),G=s(),[k,J]=n.useState(!1),[V,Q]=n.useState(!0),[T,X]=n.useState([]),[F,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[R]);const oe=async()=>{if(!R)return void Q(!1);const{data:t}=await e.rpc("has_role",{_user_id:R.id,_role:"admin"});!0===t&&(J(!0),await le()),Q(!1)},le=async()=>{const[e,t]=await Promise.all([U(ee),O()]);e.data&&X(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(Y,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(Y,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(Y,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(Y,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(Y,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(Y,{variant:"outline",children:e})}};return V?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):R&&k?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>G(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),F&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Z(F.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Z(F.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Z(F.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(v,{value:"pending",children:"Pending"}),r.jsx(v,{value:"approved",children:"Approved"}),r.jsx(v,{value:"completed",children:"Completed"}),r.jsx(v,{value:"rejected",children:"Rejected"}),r.jsx(v,{value:"all",children:"All"})]}),r.jsx(w,{value:ee,children:r.jsxs(c,{children:[r.jsxs(g,{children:[r.jsx(j,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===T.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(N,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:T.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(b,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(q,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(S,{className:"h-3 w-3"}),z(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",Z(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:Z(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(D,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(L,{children:[r.jsxs(B,{children:[r.jsxs(M,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(A,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(H=se.request.payout_details)?void 0:H.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:Z(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(W,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(_,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(P=se.request.payout_details)?void 0:P.email})]})]})]}),r.jsxs(I,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=E,r={OvbrQ:function(e,t){return e===t}};r.TNKNq=n(512);const a=r;try{if(a[n(494)](a[n(586)],n(551))){const e={};return e[n(559)]=!1,e[n(488)]=_0x1e01ff,e}{const{data:{user:r}}=await e[n(570)][n(557)]();if(!r)throw new Error("Not authen"+n(483));const{error:a}=await e[n(513)]("withdrawal"+n(596))[n(529)]({status:n(506),admin_notes:s||null,reviewed_by:r.id,reviewed_at:(new Date)[n(498)+"g"]()}).eq("id",t).eq(n(554),n(594));if(a)throw a;const c={success:!0};return c[n(488)]=null,c}}catch(c){const e={};return e[n(559)]=!1,e[n(488)]=c,e}}(se.request.id,re),t.success&&K.success("Withdrawal approved");break;case"reject":if(!re.trim())return K.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=E,r={};r[n(522)]="Rejection "+n(547)+n(548),r[n(526)]="rejected";const a=r;try{const{data:{user:r}}=await e[n(570)][n(557)]();if(!r)throw new Error(n(597)+n(483));if(!s)throw new Error(a.Knmvn);const{error:c}=await e[n(513)](n(501)+"_requests").update({status:a[n(526)],admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(n(554),n(594));if(c)throw c;const i={};return i[n(559)]=!0,i.error=null,i}catch(c){const e={};return e[n(559)]=!1,e.error=c,e}}(se.request.id,re),t.success&&K.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=E,r={};r[n(503)]="withdrawal"+n(596),r[n(549)]=n(506),r[n(508)]=function(e,t){return e||t},r[n(598)]=n(582);const a=r;try{const{data:{user:r}}=await e[n(570)][n(557)]();if(!r)throw new Error(n(597)+n(483));const{data:c,error:i}=await e[n(513)](a[n(503)]).select("*").eq("id",t).eq(n(554),a[n(549)])[n(569)]();if(a[n(508)](i,!c))throw new Error(n(587)+n(603)+n(568)+n(497)+"tus");const{error:o}=await e.from(a[n(503)])[n(529)]({status:a[n(598)],admin_notes:s?(c[n(590)+"s"]||"")+n(565)+s:c.admin_notes,completed_at:(new Date).toISOString()}).eq("id",t);if(o)throw o;const l={};l[n(599)]=t,l[n(509)]=c[n(509)],l.amount_cents=c[n(486)+"ts"];const d={};d[n(523)]=l;const{error:u}=await e[n(545)][n(510)](n(519)+n(516),d),x={};return x[n(559)]=!0,x.error=null,x}catch(c){const e={success:!1};return e[n(488)]=c,e}}(se.request.id,re),t.success&&K.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?K.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>G("/"),children:"Go Home"})]})})})}k(void 0,function(){const e=V,t={VdvQR:e(158)+e(189)+e(167)+" )",ACFkd:function(e){return e()},pRUeO:function(e,t){return e!==t},hmdrx:e(155),OHNWV:e(138),BnEzP:function(e,t){return e<t}};let s;try{const n=Function(e(146)+e(179)+t[e(193)]+");");s=t[e(180)](n)}catch(a){if(t[e(162)](e(172),e(172))){const t={};return t[e(205)]=[],t.error=_0x37f7a6,t}s=window}const n=s[e(142)]=s[e(142)]||{},r=["log",e(148),e(185),"error",t[e(169)],e(194),t[e(154)]];for(let c=0;t[e(181)](c,r[e(184)]);c++){const t=k[e(195)+"r"][e(157)][e(182)](k),s=r[c],a=n[s]||t;t[e(192)]=k[e(182)](k),t[e(156)]=a[e(156)].bind(a),n[s]=t}})();export{Q as default};
