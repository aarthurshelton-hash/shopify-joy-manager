var e,t=Object.defineProperty,n=(e,n,s)=>((e,n,s)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s)(e,"symbol"!=typeof n?n+"":n,s);import{aJ as s,r,eu as a,s as c,j as i,C as o,p as l,t as d,L as u,w as x,x as h,aq as f,B as m,aF as g,v,cR as y,y as j,b8 as p,b9 as w,ba as N,bb as C,bc as b,a8 as B,aB as D,aC as z,aD as P,b4 as M,aE as q,aY as L,bh as A,cb as U,ad as G,eB as K}from"./index-Ddz_gr3U.js";import{A as k,a as I,b as _}from"./alert-Dn_GcreK.js";import{T as Y,a as H,b as S,c as E,d as W,e as J}from"./table-DlcGRIpE.js";import{C as T}from"./circle-alert-C94BfiBC.js";import{W as R}from"./wifi-off-Bu6Mmi24.js";import{W as O}from"./wifi--R1cs_5W.js";import{B as V}from"./briefcase-InLDa_O5.js";import{T as Z}from"./trending-down-CNfnujx6.js";const F=s("Bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),X=s("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),Q=ce;!function(){const e=ce,t=ee();for(;;)try{if(915306===parseInt(e(148))/1+-parseInt(e(125))/2+-parseInt(e(119))/3+-parseInt(e(128))/4+parseInt(e(142))/5+-parseInt(e(146))/6*(-parseInt(e(126))/7)+-parseInt(e(139))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const $=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ce(121)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ce,t={};t[e(135)]=e(132)+"+$";const n=t;return $[e(123)]().search(n.xUNrI)[e(123)]().constructor($).search("(((.+)+)+)+$")});function ee(){const e=["ywXOB3n0oJqWma","DgfIBgu","CM4GDgHPCYiPka","Ahr0CdOVl2XVyW","AwjFz2f0zxDHEq","vvbWvvm","y29UC3rYDwn0BW","mtu4mdC3mKTuuu1XDG","y29UC29Szq","yxbWBhK","BwfuqKC","Dg9tDhjPBMC","C2v0sxrLBq","mJa0otm0rhLpqLvY","odqXneHZwfvxAq","yNjPzgDLvxjS","ody4mJGWEuPtrNP1","E30Uy29UC3rYDq","Dw5KzwzPBMvK","wKjouKi","kcGOlISPkYKRkq","x19WCM90B19F","Dfbet3y","EfvoCKK","BMn0Aw9UkcKG","yMLUza","CMvTB3zLsxrLBq","nZyYmZG4ofvUsNzIqG","z3n5A1u","DvDdCMO","nJyXodiYmgz2B3npBq","y3rVCIGICMv0Dq","z2f0zxDHEuHVCW","BMnMv1y","mZu0qxjRCvPj","zxHJzxb0Aw9U","mtmYmde5mvLYz1PtsG","CgfYC2u","ExvVuxC","D2fYBG","DhjHy2u","ChjVDg90ExbL","vhPNwfO","Bg9N","CMv0DxjUicHMDq"];return(ee=function(){return e})()}$();const te=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ce(121)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();te(void 0,function(){const e=ce,t={gsykU:function(e,t){return e(t)},tPDOv:e(129)+e(143)+e(159)+" )",fHdpc:function(e){return e()},UPpUS:e(155),uWCrj:"info",USQPF:e(147),yuoQw:e(152)};let n;try{const s=t[e(140)](Function,e(156)+e(136)+t[e(134)]+");");n=t.fHdpc(s)}catch(a){n=window}const s=n[e(120)]=n[e(120)]||{},r=[t[e(117)],e(151),t[e(141)],"error",t.USQPF,e(158),t[e(150)]];for(let c=0;c<r.length;c++){const t=te[e(118)+"r"][e(153)][e(137)](te),n=r[c],a=s[n]||t;t[e(133)]=te.bind(te),t[e(123)]=a[e(123)][e(137)](a),s[n]=t}})();const ne=Q(161)+"_bridge_url",se=Q(160)+Q(157)+"0",re={};re[Q(127)]=se,re[Q(144)+"t"]="127.0.0.1",re.gatewayPort=4002,re.clientId=1;const ae=re;function ce(e,t){e-=117;const n=ee();let s=n[e];if(void 0===ce.XIyLUX){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ce.vaCJHe=r,ce.VypDpS={},ce.XIyLUX=!0}const a=e+n[0],c=ce.VypDpS[a];if(c)s=c;else{const e=function(e){this.SNATdo=e,this.YjhAgA=[1,0,0],this.HCZFGl=function(){return"newState"},this.tJpNRJ="\\w+ *\\(\\) *{\\w+ *",this.EtHqDF="['|\"].+['|\"];? *}"};e.prototype.jPBvFE=function(){const e=new RegExp(this.tJpNRJ+this.EtHqDF).test(this.HCZFGl.toString())?--this.YjhAgA[1]:--this.YjhAgA[0];return this.EgTGkI(e)},e.prototype.EgTGkI=function(e){return Boolean(~e)?this.HZMOqZ(this.SNATdo):e},e.prototype.HZMOqZ=function(e){for(let t=0,n=this.YjhAgA.length;t<n;t++)this.YjhAgA.push(Math.round(Math.random())),n=this.YjhAgA.length;return e(this.YjhAgA[0])},new e(ce).jPBvFE(),s=ce.vaCJHe(s),ce.VypDpS[a]=s}return s}function ie(){const e=Q,t={};t[e(131)]=function(e,t){return e===t},t.TzgXZ=e(130);const n=t;if(n[e(131)](typeof window,n[e(154)]))return ae;const s=localStorage.getItem(ne);if(s)try{return{...ae,...JSON[e(149)](s)}}catch{return ae}return ae}function oe(){return{maTBG:function(e){return e()}}[Q(122)](ie).bridgeUrl}const le=ue;!function(){const e=ue,t=me();for(;;)try{if(856660===-parseInt(e(220))/1*(parseInt(e(178))/2)+-parseInt(e(227))/3+-parseInt(e(139))/4*(-parseInt(e(154))/5)+-parseInt(e(203))/6*(-parseInt(e(260))/7)+parseInt(e(148))/8+parseInt(e(248))/9+parseInt(e(147))/10*(parseInt(e(254))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const de=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ue,t={};t[e(140)]="(((.+)+)+)+$";const n=t;return de[e(201)]()[e(165)](n[e(140)])[e(201)]()[e(153)+"r"](de).search("(((.+)+)+)+$")});function ue(e,t){e-=137;const n=me();let s=n[e];if(void 0===ue.fHfbpp){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ue.oKfPdd=r,ue.pDLMnd={},ue.fHfbpp=!0}const a=e+n[0],c=ue.pDLMnd[a];if(c)s=c;else{const e=function(e){this.aHZJic=e,this.UVcEpY=[1,0,0],this.JZVWwd=function(){return"newState"},this.VbMwdP="\\w+ *\\(\\) *{\\w+ *",this.oVvwZU="['|\"].+['|\"];? *}"};e.prototype.bWkOoP=function(){const e=new RegExp(this.VbMwdP+this.oVvwZU).test(this.JZVWwd.toString())?--this.UVcEpY[1]:--this.UVcEpY[0];return this.KfbxeG(e)},e.prototype.KfbxeG=function(e){return Boolean(~e)?this.YPhACQ(this.aHZJic):e},e.prototype.YPhACQ=function(e){for(let t=0,n=this.UVcEpY.length;t<n;t++)this.UVcEpY.push(Math.round(Math.random())),n=this.UVcEpY.length;return e(this.UVcEpY[0])},new e(ue).bWkOoP(),s=ue.oKfPdd(s),ue.pDLMnd[a]=s}return s}de();const xe=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ue(163)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();xe(void 0,function(){const e=ue,t={NCJfK:function(e,t){return e+t},NpFqL:function(e,t){return e+t},artHi:e(251)+e(171)+e(184)+" )",qRqNp:function(e){return e()},sRqYM:e(144),xYvfb:e(151),FCDof:e(199),kHMiC:"table",lkJRo:function(e,t){return e<t}};let n;try{const s=Function(t[e(257)](t[e(243)](e(221)+e(224),t[e(232)]),");"));n=t[e(214)](s)}catch(a){n=window}const s=n[e(200)]=n[e(200)]||{},r=[t[e(197)],e(143),t[e(182)],e(263),t[e(170)],t.kHMiC,e(167)];for(let c=0;t[e(183)](c,r.length);c++){const t=xe[e(153)+"r"][e(249)][e(141)](xe),n=r[c],a=s[n]||t;t[e(250)]=xe[e(141)](xe),t[e(201)]=a.toString[e(141)](a),s[n]=t}})();class he{constructor(){n(this,e,!1)}async checkConnection(){const e=le,t={bRUdP:"PkDNY"};t[e(166)]=function(e,t){return e===t},t[e(222)]=function(e,t){return e===t},t.MeXsn=e(237)+e(240)+e(239)+"ble:";const n=t;try{if("PkDNY"===n[e(186)]){const t=ie(),s={};s[e(196)+"pe"]=e(217)+e(152);const r={};r[e(185)]="GET",r.headers=s;const a=await fetch(oe()+(e(149)+"s"),r);if(!a.ok){const t={};return t[e(234)]=!1,t[e(198)+e(228)]=!1,t.paperTrading=!1,t}const c=await a[e(162)]();return this.connected=n[e(166)](c[e(234)],!0),{connected:!0===c.bridgeRunning,authenticated:n[e(222)](c[e(234)],!0),paperTrading:n[e(222)](t[e(190)+"t"],4002)}}{const t=_0xf2da48[e(153)+"r"][e(249)][e(141)](_0x111151),n=_0x5b1c94[_0x271d65],s=_0x8cd685[n]||t;t.__proto__=_0x455425[e(141)](_0x3d57c2),t[e(201)]=s[e(201)][e(141)](s),_0x3d632c[n]=t}}catch(s){const t={connected:!1};return t[e(198)+e(228)]=!1,t[e(226)+"ng"]=!1,t}}async[(e=le(234),le(157))](){const e=le,t={};t[e(252)]=function(e,t){return e===t},t[e(150)]=e(217)+e(152),t[e(180)]=function(e,t){return e===t};const n=t;try{if(n[e(252)](e(262),e(255))){const t=_0x437afd?function(){if(_0x528070){const t=_0x3a40d1[e(163)](_0x9ac92d,arguments);return _0x2ee7a8=null,t}}:function(){};return _0xba3f31=!1,t}{const t=ie(),s={};s[e(196)+"pe"]=n.MuhZs;const r={};r.host=t.gatewayHost,r[e(202)]=t.gatewayPort,r[e(194)]=t[e(194)];const a=await fetch(oe()+(e(212)+"ct"),{method:e(229),headers:s,body:JSON[e(142)](r)});if(!a.ok)return!1;const c=await a[e(162)]();return this[e(234)]=n[e(180)](c[e(234)],!0),this[e(234)]}}catch(s){return!1}}async disconnect(){const e=le,t={NKRBW:function(e,t,n){return e(t,n)},BxkEA:e(229)};try{await t.NKRBW(fetch,oe()+"/api/disco"+e(242),{method:t[e(195)]}),this.connected=!1}catch{}}async[le(156)+"s"](){const e=le,t={whSea:function(e){return e()},zbdkg:e(237)+"y] Get acc"+e(231)+"r:"};try{const n=await fetch(t[e(206)](oe)+(e(236)+"nts"));if(!n.ok)return[];return(await n[e(162)]()).accounts||[]}catch(n){return[]}}async[le(258)+"ns"](e){const t=le,n={};n[t(230)]=t(237)+"y] Cancel "+t(204)+"r:",n[t(244)]=t(187),n[t(155)]=t(237)+"y] Get positions error:";const s=n;try{if(s[t(244)]==s[t(244)]){const n=await fetch(oe()+(t(225)+"ions?accountId=")+e);if(!n.ok)return[];return(await n.json())[t(216)]||[]}return _0x2e7a1c[t(263)](s.tEQYP,_0x18c402),!1}catch(r){return[]}}async[le(246)](){const e=le,t={};t[e(215)]=function(e,t){return e===t},t[e(173)]=e(218);const n=t;try{const t=await fetch(oe()+"/api/orders");if(!t.ok)return[];return(await t[e(162)]())[e(161)]||[]}catch(s){if(n.QKalW(n[e(173)],n[e(173)]))return[];if(_0x1e7135){const t=_0x1d6975[e(163)](_0x1c0354,arguments);return _0x46ff17=null,t}}}async[le(158)+"ract"](e){const t=le,n={uPHwV:function(e,t){return e(t)},uVxuc:function(e,t){return e+t},isNWY:t(221)+t(224),GhIDS:t(251)+t(171)+'rn this")( )',bTDoV:function(e,t){return e!==t},HnBWP:t(211),MTlfH:t(253),HHZsy:function(e){return e()},RECEj:t(207)};try{if(n[t(256)](n.HnBWP,n[t(138)])){const s=await fetch(n[t(209)](oe)+(t(213)+t(191))+encodeURIComponent(e));if(!s.ok)return[];return(await s.json())[t(146)]||[]}{const e=hOHldr.uPHwV(_0x12a57e,hOHldr.uVxuc(hOHldr.isNWY+hOHldr[t(177)],");"));_0x161293=e()}}catch(s){if(t(247)!==n[t(192)])return[];{const e={};return e[t(234)]=!1,e[t(198)+"ted"]=!1,e.paperTrading=!1,e}}}async[le(264)](e){const t=le,n={vYqfD:function(e){return e()},PlhKH:t(229),afZxr:"[IB Gatewa"+t(245)+"ailed",HSEDu:t(208)};try{const s={};s["Content-Type"]="applicatio"+t(152);const r=await fetch(n[t(238)](oe)+(t(179)+"s"),{method:n[t(181)],headers:s,body:JSON[t(142)](e)});if(!r.ok)return null;const a=await r[t(162)]();return{orderId:a[t(159)]||t(174)+Date[t(241)](),status:a[t(168)]||n.HSEDu}}catch(s){return null}}async cancelOrder(e){const t=le,n={QKNMr:function(e,t,n){return e(t,n)},jMBMm:t(233)};try{return(await n[t(175)](fetch,oe()+"/api/orders/"+e,{method:n[t(210)]})).ok}catch(s){return!1}}async[le(169)](e){const t=le,n={tYKSP:function(e,t){return e!==t},CIdXE:t(176),CXPnc:function(e,t){return e(t)},NlXDq:function(e){return e()}};try{if(n.tYKSP(t(172),n[t(164)])){const s=await n[t(205)](fetch,n.NlXDq(oe)+"/api/quote?conid="+e);if(!s.ok)return null;return await s[t(162)]()}return null}catch{return null}}}const fe=new he;function me(){const e=["C2vHCMnO","uLPuA00","DhjHy2u","C3rHDhvZ","z2v0uxvVDgu","rKneB2y","y3rVCIGICMv0Dq","Ehb1tMO","A2HwDwu","AwiT","uuTotxi","zuLMrvq","r2Hjrfm","mZqYmdmYuhnjDur3","l2fWAs9VCMrLCG","CgTdDKy","ugXOs0G","EfL2zMi","BgTkuM8","CM4GDgHPCYiPka","Bwv0Ag9K","yLjvzfa","EwL4zwy","igvYCM9YoG","BwvZC2fNzq","z2f0zxDHEvbVCG","Ad9ZEw1IB2W9","uKvdrwO","CNjVCJO","y2XPzw50swq","qNHRrue","q29UDgvUDc1uEq","C1jXwu0","yxv0AgvUDgLJyq","zxHJzxb0Aw9U","y29UC29Szq","Dg9tDhjPBMC","Cg9YDa","mte1mdK3ngvwA2zqwq","B3jKzxiGzxjYBW","q1HqBMm","D2Htzwe","q3jwDwK","C3vIBwL0DgvK","seHAC3K","AK1ctw0","tvnnBe0","l2fWAs9JB25Uzq","l2fWAs9ZzwfYyW","CvjXtNa","uuTHBfC","Cg9ZAxrPB25Z","yxbWBgLJyxrPBW","CunRDuG","y29UDhjHy3qGzq","ofvQANPkBW","CMv0DxjUicHMDq","Bg5SCei","Ev0Gq29UBMvJDa","BMn0Aw9UkcKG","l2fWAs9WB3nPDa","CgfWzxjuCMfKAq","nda1otmYnhzwyLLpra","DgvK","ue9tva","Devrwva","B3vUDhmGzxjYBW","yxj0sgK","revmrvrf","y29UBMvJDgvK","zxjZigvYCM9YoG","l2fWAs9Hy2nVDq","w0LcieDHDgv3yq","DLLXzKq","BM90igf2ywLSyq","Ev0GqNjPzgDLia","BM93","BM5Ly3q","tNbgCuW","suzbAeC","Ev0Gt3jKzxiGzG","z2v0t3jKzxjZ","whrXEvy","mte3oteZnvvlChD5za","ChjVDg90ExbL","x19WCM90B19F","E30Uy29UC3rYDq","y2jpvvG","Au9msum","mJuZzwPhBNnL","BMTQvhe","yLreB1y","tKnkzKS","z2v0ug9ZAxrPBW","EMjKA2C","n1rTrwXWCW","Ev0Gu2vHCMnOia","vNnSvKy","zxjYB3i","CgXHy2vpCMrLCG","ywzAEhi","tvrSzKG","ntyXnty4neTiDMzuwa","zujJrey","yMLUza","C3rYAw5NAwz5","D2fYBG","Bg9N","twvyC24","y29UDhjHy3rZ","nda0nJKWAufnyM5k","nZm2mJC1mMTQCvfiAa","l2fWAs9ZDgf0Dq","txvOwNm","Aw5MBW","BI9QC29U","y29UC3rYDwn0BW","nxDADLzKDW","yKnqwxm","z2v0qwnJB3vUDa","y29UBMvJDa","C2vHCMnOq29UDa","B3jKzxjjza","Ev0Gq2fUy2vSia","B3jKzxjZ","ANnVBG","yxbWBhK","q0LKweu"];return(me=function(){return e})()}!function(){const e=ye,t=ve();for(;;)try{if(543113===-parseInt(e(602))/1*(-parseInt(e(645))/2)+parseInt(e(623))/3+parseInt(e(639))/4+-parseInt(e(613))/5+parseInt(e(527))/6*(parseInt(e(505))/7)+parseInt(e(500))/8+-parseInt(e(579))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ge=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ye(567)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ye;return ge[e(578)]()[e(643)]("(((.+)+)+)+$")[e(578)]()[e(540)+"r"](ge).search(e(520)+"+$")});function ve(){const e=["mZu1ntyWmeHtsKPSBa","DgLTzwqGB3v0","Aw9UignOzwnRia","lIbfBNn1CMuGDa","CgXHy2uGB3jKzq","n1HtENnptG","wLnOy3K","C2vSzwn0zwrbyW","ELj6uxK","CgfWzxi","ENrgAu0","Bev4zxG","sfziBfi","zxHJzxb0Aw9U","Bg9Hze9YzgvYCW","E30Uy29UC3rYDq","D21nyMC","y3rPB24","DNbUAe8","ww5ADvG","kcGOlISPkYKRkq","ihrPBwvKig91Da","zMLUzcbJB250CG","u3LTyM9Sie5VDa","Bg9N","svnWEei","zMLYC3qU","ntCWnZaWmLLLu1LNuW","B3rVrfK","DLnVB00","t3jKzxiG","CgfWzxjuCMfKAq","y291BNq","Bg9HzfbVC2L0Aq","sLjHEei","vxbPEum","wvD4vMO","C3rHDhvZ","C2LKzq","EKTxr2K","y29UC3rYDwn0BW","y29UBMvJDgvK","uufKC2K","BMn0Aw9UkcKG","yxLfzxq","BMLUzYbIDxqGBG","ENDVtKO","wgjkzem","D2f5iI4","qNjPzgDLihj1BG","zcbbueKGAxmGzq","zLHIEvm","Aw5JBhvKzxm","BMfIBgvKlG","AhPxwhC","CvDvsKO","zwXSzwq","vgXRswO","vg9Orhe","y3rVCIGICMv0Dq","zezKsfi","y29UBMvJDa","ifnLBgvJDgvK","B2XsA3O","whbXzKG","t3jKzxiGrMfPBa","q291BgqGBM90ia","yxbWBhK","BwvZC2fNzq","B3jKzxjZ","vKjwCKG","y2HLy2TdB25Uzq","CM4GDgHPCYiPka","BgvUz3rO","rwTYCLK","Bg9HzgLUzW","r29Vt04","C2vYDMvYigLZia","Dg9tDhjPBMC","mteZnJuXnJr3r1bbzLK","y29UBMvJDc4Grq","y0vsB0y","s05Zr00","yxrLD2f5","y29UBMvJDdOG","BNn1CMuGsuiGrW","shnlCvi","Dg9mB3DLCKnHCW","uK1YzMK","u3rHCNqGDgHLia","iezVDw5K","AwnRicjdB25Uzq","ywnJB3vUDhm","B3qGy29UBMvJDa","EMvXr0q","AujvAu4","Cg9ZAxrPB25Z","B24UlI4","A3LxBge","C2PPyKq","CxvHBNrPDhK","D2fYBG","mJGWndqYDMTVvKXp","BMvJDgLVBI4","CI4Gq2HLy2SGzW","vKL6sNK","ic0G","yxv0AgvUDgLJyq","zMLUza","BhKGy29UBMvJDa","rwnsCNC","DgvK","t3Hjug8","ndK1nZG4mhfMzhPiDq","C2vSzwn0qwnJBW","EhLxseS","qNjPzgDLig5VDa","Avrmu04","q29UBMvJDgvK","zgvZy3jPChrPBW","rKXJrge","sw1cBhi","CNvUBMLUzYbHBG","mJu3otC4n216zwfuCG","qwzuu1m","DfHLB2q","ENPuqva","q29UBMvJDgLVBG","z2uGC2vYDMvYia","tM8GqwnJB3vUDa","DMDOzvK","Ev0Gq2HLy2TPBG","y2fUy2vSt3jKzq","C2vHCMnOq29UDa","ChjVDg90ExbL","v214BK0","y2fUy2vSBgvKlG","DgL0Bgu","ywnJB3vUDeLK","mta0ntK4ofbIvufsrq","CgXHy2vpCMrLCG","CNvUBMLUzY4","yMLUza","C2vHCMnO","u3vJy2vZC2z1Ba","mNrYzLjpuq","svjWD3u","yuHSDfC","ywnJB3vUDfr5Ca","vMT0Dw0","y3vYCMvUDa","tLvJBe4","z2v0ug9ZAxrPBW","A1rdwfO","y29UC29Szq","EvnXB3e","ELzuqKe","Dw50","yxrLD2f5ignVBG","EwPAsu0","ihj1BM5PBMCUia","zgvZDhj1y3rPDG","y29UBMvJDfrVrW","BK90Bhu","w0LcieDHDgv3yq","Aw9UigvYCM9YoG","zYbJB25Uzwn0Aq","B3jKzxjuExbL","igHHCYbIzwvUia","Bg9JywWGyNjPza","wKrorum","DgfIBgu","t3jKzxiGq2fUyW","zxjYB3i","uLrYEMu","zwn0igfUigfJyW","rwTXA3C","DMfYAwfUDa","CMv0DxjUicHMDq","igzHAwXLzdOG","y2jYvey","AguGyNjPzgDLia","Ev0Gq29UBMvJDa","sgPfr2y","yNrSzgS","yxrLD2f5igLZia","y29UAwq","zwqGDg8GsuiGrW","zuvzwwC","Ev0Gu3rHDhvZoG","CenNqKi","rMfPBgvKihrVia","ALn4C1C","vhrLzhe","EMrdwva","C3LTyM9S"];return(ve=function(){return e})()}function ye(e,t){e-=470;const n=ve();let s=n[e];if(void 0===ye.vaFipM){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ye.hyNRDS=r,ye.tXyrYJ={},ye.vaFipM=!0}const a=e+n[0],c=ye.tXyrYJ[a];if(c)s=c;else{const e=function(e){this.tgljlP=e,this.JRxPya=[1,0,0],this.lLyqnw=function(){return"newState"},this.nXCqJO="\\w+ *\\(\\) *{\\w+ *",this.grIYIg="['|\"].+['|\"];? *}"};e.prototype.OmKNmf=function(){const e=new RegExp(this.nXCqJO+this.grIYIg).test(this.lLyqnw.toString())?--this.JRxPya[1]:--this.JRxPya[0];return this.Oirlru(e)},e.prototype.Oirlru=function(e){return Boolean(~e)?this.ERRUGA(this.tgljlP):e},e.prototype.ERRUGA=function(e){for(let t=0,n=this.JRxPya.length;t<n;t++)this.JRxPya.push(Math.round(Math.random())),n=this.JRxPya.length;return e(this.JRxPya[0])},new e(ye).OmKNmf(),s=ye.hyNRDS(s),ye.tXyrYJ[a]=s}return s}ge();const je=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ye(567)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();je(void 0,function(){const e=ye,t={AfTSS:function(e,t){return e!==t},btldk:function(e,t){return e(t)},ZShcy:function(e,t){return e+t},EcRrw:e(482)+"nction() ",otoDY:e(630),Ekqkw:e(524),olRkz:"info",zwoNJ:e(513),fXbyS:e(475),XpqfH:function(e,t){return e<t}},n=function(){const n=e;if(t[n(624)](n(508),"zRzQy")){const e=_0x4861bc.apply(_0xfdb7c0,arguments);return _0x15309b=null,e}{let e;try{e=t[n(488)](Function,t[n(506)](t[n(610)],'{}.constructor("return this")( )')+");")()}catch(s){"vgheY"===t[n(528)]?e=window:_0x5da6fc(e=>({...e,loading:!1,error:n(495)+"connect. Ensure IB G"+n(489)+n(622)+n(550)+n(553)}))}return e}}(),s=n[e(654)]=n[e(654)]||{},r=[t[e(480)],"warn",t[e(563)],e(477),t[e(546)],t[e(551)],"trace"];for(let a=0;t[e(564)](a,r[e(573)]);a++){const t=je.constructor[e(634)][e(642)](je),n=r[a],c=s[n]||t;t.__proto__=je.bind(je),t[e(578)]=c[e(578)][e(642)](c),s[n]=t}})();const pe=["SPY","QQQ","AAPL","MSFT","NVDA","TSLA","AMD","META"];function we(){const{connected:e,authenticated:t,paperTrading:n,accounts:s,selectedAccount:K,positions:X,orders:Q,loading:$,error:ee,checkConnection:te,connectToGateway:ne,refreshData:se,placeOrder:re,cancelOrder:ae,selectAccount:ce}=function(){var e;const t=ye,n={otBPJ:function(e,t){return e(t)},tSbfw:t(647),nbvZJ:t(594),RTrze:function(e,t){return e(t)},zKWGi:function(e,t){return e(t)},RMrfi:function(e){return e()},HVHlR:function(e,t){return e===t},RTwDm:t(511),FLcDa:function(e,t){return e(t)},NUPom:"xrsKv",hzWXw:function(e,t){return e(t)},rMFnF:t(653),ISpxB:function(e,t){return e(t)},HsKqR:function(e,t){return e!==t},qWUJJ:t(570),HjEGf:function(e,t){return e(t)},OxIPo:function(e,t){return e(t)},woPoa:function(e,t){return e+t},sUBUY:"return (fu"+t(543),ztFiM:t(515)+t(559)+t(572)+" )",xyWHK:t(520)+"+$",eEYYg:t(529),ImBlr:t(518),nOtlu:function(e,t){return e(t)},YWxVj:t(629)+t(562),pCgBB:t(523)+t(590),UEFcy:t(557),YnZuX:t(659),XbJdC:function(e,t){return e(t)},JRaxB:t(661)+"e",WmxnM:function(e,t){return e(t)},hsiKj:function(e,t){return e===t},MIMoq:"rmUeq",ayEet:t(655),dFdHR:t(625),CTwFh:t(664)+"y] Connection error:",UpiyC:function(e,t){return e(t)},QAdsi:function(e){return e()},NUclN:function(e,t,n){return e(t,n)},IRpwu:function(e,t,n){return e(t,n)},ZDNEC:function(e,t,n){return e(t,n)}},s={};s[t(541)]=!1,s["authentica"+t(611)]=!1,s[t(531)+"ng"]=!1,s.accounts=[],s[t(507)+t(532)]=null,s[t(596)]=[],s[t(569)]=[],s[t(575)]=!0,s[t(477)]=null;const[c,i]=n.nOtlu(r.useState,s),o=n[t(535)](r.useRef,null),{toast:l}=n[t(542)](a),d=n.NUclN(r.useCallback,async()=>{const e=t;n.otBPJ(i,e=>({...e,loading:!0,error:null}));const s=setTimeout(()=>{const t=e;i(e=>({...e,connected:!1,authenticated:!1,loading:!1,error:t(627)+t(521)+t(503)+t(485)+"server is "+t(641)}))},8e3);try{if(n.tSbfw!==n.nbvZJ){const t=await fe["checkConne"+e(517)]();return n[e(478)](clearTimeout,s),n[e(539)](i,n=>({...n,connected:t[e(541)],authenticated:t[e(607)+"ted"],paperTrading:t.paperTrading,loading:!1,error:t.connected?t[e(607)+e(611)]?null:e(549)+e(545)+e(593)+e(491)+"ateway. Cl"+e(591)+"ct to Gate"+e(548):e(616)+e(660)+e(589)+e(473)+e(628)+e(526)})),t}_0x4f3935(e=>({...e,selectedAccount:_0xb7b68c}))}catch(r){n[e(539)](clearTimeout,s),i(t=>({...t,connected:!1,authenticated:!1,loading:!1,error:e(495)+e(584)+r[e(568)]}));const t={connected:!1};return t[e(607)+e(611)]=!1,t[e(531)+"ng"]=!1,t}},[]),u=n[t(651)](r.useCallback,async()=>{const e=t;n[e(539)](i,e=>({...e,loading:!0,error:null}));try{const t=await fe[e(561)]();if(t){if(!n.HVHlR(n.RTwDm,e(511))){const t=_0x4ddce3?function(){if(_0x33b8d6){const t=_0x51c119[e(567)](_0x46a870,arguments);return _0x1a6c98=null,t}}:function(){};return _0x15a7e4=!1,t}{const t={};t[e(637)]=e(618),t[e(619)+"n"]=e(644)+e(609)+e(491)+"ateway",n.FLcDa(l,t),await d(),await n[e(588)](x)}}else if(n.NUPom===e(574)){const t=_0xa460e[e(540)+"r"][e(634)][e(642)](_0x191ef6),n=_0x18916a[_0xe98ec8],s=_0x5519cd[n]||t;t.__proto__=_0x25d09f[e(642)](_0x497c87),t.toString=s[e(578)].bind(s),_0x4ae7e3[n]=t}else n[e(554)](i,t=>({...t,loading:!1,error:e(495)+e(580)+e(585)+e(489)+e(622)+e(550)+e(553)}));return t}catch(s){if(n.rMFnF===e(653))return i(t=>({...t,loading:!1,error:"Connection"+e(483)+s.message})),!1;_0x38ca3c[e(507)+e(532)]&&_0x4f8cba["authentica"+e(611)]&&n[e(588)](_0x4b74b)}},[l,d]),x=n[t(646)](r.useCallback,async()=>{const e=t,s={cERoF:function(e,t){return n[ye(525)](e,t)}};if(!n[e(586)](n[e(555)],n[e(555)])){const t=await fe.getAccounts(),s=t[e(608)](t=>t[e(638)].startsWith("DU")||t[e(648)+"e"][e(587)+"e"]()[e(552)](e(509)));return n[e(487)](i,e=>({...e,accounts:t,selectedAccount:s||t[0]||null})),t}{const t={};t[e(637)]=e(565)+"ed",t[e(619)+"n"]="Could not "+e(504)+e(604)+e(658)+e(603),t[e(481)]="destructive",s[e(581)](_0x4ac40f,t)}},[]),h=r.useCallback(async()=>{const e=t,s={zdCYP:function(e,t){return e(t)}};if("VIzJy"===e(605)){if(!c["selectedAc"+e(532)])return[];const t=await fe[e(652)+"ns"](c["selectedAc"+e(532)].accountId);return n[e(620)](i,e=>({...e,positions:t})),t}_0x1c917d[e(650)]&&s[e(498)](_0x3d96a4,_0x1e0b04[e(650)])},[c[t(507)+t(532)]]),f=r.useCallback(async()=>{const e=await fe.getOrders();return i(t=>({...t,orders:e})),e},[]),m=r.useCallback(async()=>{const e=t;c[e(607)+e(611)]&&await Promise.all([n[e(588)](x),n[e(588)](h),f()])},[c[t(607)+t(611)],x,h,f]),g=n[t(474)](r.useCallback,async e=>{const s=t;if(n[s(615)],n[s(510)],n[s(512)](n.eEYYg,n[s(492)])){if(!c[s(507)+s(532)]){if(n[s(621)]===n.ImBlr)return n[s(663)](l,{title:n[s(536)],description:"Please sel"+s(479)+"ount first.",variant:s(661)+"e"}),null;if(_0x315d9b){const e=_0x512644[s(567)](_0x2047c1,arguments);return _0x5513c7=null,e}}const t=await fe[s(633)+"ract"](e.symbol);if(0===t.length){const t={};return t[s(637)]=n[s(494)],t[s(619)+"n"]="Could not "+s(522)+"act for "+e[s(499)],t[s(481)]=s(661)+"e",l(t),null}const a=t[0],i={};i.accountId=c[s(507)+s(532)][s(638)],i[s(490)]=a[s(490)],i[s(499)]=e[s(499)],i[s(538)]=e[s(538)],i[s(600)]=e.quantity,i[s(471)]=e.orderType,i.price=e.price;const o=await fe[s(640)](i);if(o){if(s(617)===s(595))return _0x11b29f[s(578)]()[s(643)](yiWjEr[s(484)]).toString()[s(540)+"r"](_0x50906d).search(yiWjEr[s(484)]);{const t={};t[s(637)]="Order Placed",t.description=e[s(538)]+" "+e.quantity+" "+e[s(499)]+s(606)+o[s(537)],l(t),await f()}}else{if(n.UEFcy===n[s(519)]){let e;try{e=yiWjEr[s(558)](_0x159438,yiWjEr[s(649)](yiWjEr[s(649)]("return (function() ",yiWjEr[s(496)]),");"))()}catch(r){e=_0x40d346}return e}n[s(547)](l,{title:s(565)+"ed",description:s(566)+s(504)+"r. Check gateway con"+s(603),variant:n[s(534)]})}return o}_0x389dee=xukhnL[s(612)](_0x40f641,xukhnL.woPoa(xukhnL.sUBUY,xukhnL[s(510)])+");")()},[c[t(507)+t(532)],l,f]),v=r.useCallback(async e=>{const s=t,r=await fe.cancelOrder(e);if(r){const t={};t[s(637)]=s(476)+s(556),t[s(619)+"n"]=s(530)+e+(s(472)+s(636)),n[s(635)](l,t),await n[s(588)](f)}return r},[l,f]),y=r.useCallback(e=>{const s=t;if(n.hsiKj("KNsGM",s(582))){const t=c[s(592)].find(t=>t[s(638)]===e);if(t)if(n[s(512)]("qkZBm",n.MIMoq)){if(_0x4e3fbb){const e=_0x2d8b05[s(567)](_0x5d8b97,arguments);return _0x221bfa=null,e}}else i(e=>({...e,selectedAccount:t}))}else _0x3b5c7e[s(601)](s(664)+s(486)+s(502)+"timed out"),n[s(539)](_0x2ebf2f,e=>({...e,connected:!1,authenticated:!1,loading:!1,error:s(627)+" timed out"+s(503)+s(485)+s(577)+s(641)}))},[c[t(592)]]);n[t(651)](r.useEffect,()=>{const e=t,s={kyWla:e(599),zzTAP:function(e){return e()},tWCrT:function(e,t,n){return e(t,n)}};if(n[e(586)](e(497),n[e(560)]))return(async()=>{const t=e;if(t(656)!==s[t(598)])(await s[t(626)](d))[t(607)+t(611)]&&(await x(),await h(),await f(),o[t(650)]=s.tWCrT(setInterval,()=>{m()},1e4));else{const e=_0x16a713.accounts[t(608)](e=>e[t(638)]===_0xa1a87f);e&&_0x314e1d(t=>({...t,selectedAccount:e}))}})(),()=>{const t=e;if(n[t(544)]!==n.ayEet){const e=_0x373088?function(){if(_0x189cff){const e=_0x51db32[t(567)](_0x572075,arguments);return _0x26e254=null,e}}:function(){};return _0x4e4e2d=!1,e}o[t(650)]&&clearInterval(o[t(650)])};{const t={};return t[e(637)]=e(523)+" Found",t[e(619)+"n"]="Could not "+e(522)+"act for "+_0x4b65a5.symbol,t[e(481)]=e(661)+"e",_0x114658(t),null}},[]),n[t(646)](r.useEffect,()=>{const e=t,s={vOZGb:n.CTwFh,wmMbg:function(e,t){return n.hzWXw(e,t)}};if(e(576)!=e(576)){_0x443b93(_0x57cdb8),_0x1d0038[e(477)](s.vOZGb,_0x214281),s[e(516)](_0x3e6a72,t=>({...t,connected:!1,authenticated:!1,loading:!1,error:e(495)+"connect: "+_0x4a1d14[e(568)]}));const t={};return t[e(541)]=!1,t[e(607)+e(611)]=!1,t[e(531)+"ng"]=!1,t}c[e(507)+"count"]&&c.authenticated&&h()},[null==(e=c[t(507)+t(532)])?void 0:e[t(638)]]);const j={...c};return j[t(571)+t(517)]=d,j[t(662)+t(583)]=u,j.loadAccounts=x,j[t(533)+"ons"]=h,j[t(514)]=f,j.refreshData=m,j[t(640)]=g,j[t(632)+"r"]=v,j[t(614)+t(657)]=y,j}(),[ie,oe]=r.useState("overview"),[le,de]=r.useState([]),[ue,xe]=r.useState(!1),[he,me]=r.useState([]),[ge,ve]=r.useState({total:0,today:0,pnl:0}),[je,we]=r.useState(!1),[Ne,Ce]=r.useState({symbol:"SPY",side:"BUY",quantity:1,orderType:"MKT",price:0}),[be,Be]=r.useState(!1);r.useEffect(()=>{const e=async()=>{try{const{data:e}=await c.from("farm_status").select("*").eq("farm_name","high-frequency-paper-trader").single();if(e){const t=new Date(e.updated_at),n=t>new Date(Date.now()-12e4);we("trading"===e.status||n)}const{data:t}=await c.from("autonomous_trades").select("*").order("created_at",{ascending:!1}).limit(50);if(t){me(t);const e=new Date;e.setHours(0,0,0,0);const n=t.filter(t=>new Date(t.created_at)>=e),s=t.reduce((e,t)=>e+(t.pnl||0),0);ve({total:t.length,today:n.length,pnl:s})}}catch(e){}};e();const t=c.channel("hf-trades").on("postgres_changes",{event:"INSERT",schema:"public",table:"autonomous_trades"},e=>{const t=e.new;me(e=>[t,...e].slice(0,50));const n=new Date;n.setHours(0,0,0,0);const s=new Date(t.created_at)>=n;ve(e=>({total:e.total+1,today:s?e.today+1:e.today,pnl:e.pnl+(t.pnl||0)}))}).subscribe(),n=setInterval(e,5e3);return()=>{clearInterval(n),t.unsubscribe()}},[]),r.useCallback(()=>{te()},[te]),r.useEffect(()=>{if(t){De();const e=setInterval(De,3e4);return()=>clearInterval(e)}},[t]);const De=async()=>{xe(!0);try{const{data:e,error:t}=await c.functions.invoke("stock-data",{body:{action:"batch",symbols:pe}});!t&&(null==e?void 0:e.stocks)&&de(e.stocks.map(e=>({symbol:e.symbol,price:e.latestPrice,change:e.change,changePercent:e.changePercent})))}catch(e){}finally{xe(!1)}},ze=e=>{Ce(t=>({...t,symbol:e,side:"BUY"})),oe("trade")},Pe=r.useMemo(()=>{const e=X.reduce((e,t)=>e+t.marketValue,0),t=X.reduce((e,t)=>e+t.unrealizedPnl,0);return{totalValue:e,totalPnL:t,totalRealizedPnL:X.reduce((e,t)=>e+t.realizedPnl,0),pnlPercent:(null==K?void 0:K.balance)?t/K.balance*100:0}},[X,K]);return $?i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(u,{className:"h-5 w-5 animate-spin text-primary"}),"Connecting to IB Gateway Bridge..."]})}),i.jsx(x,{children:"Checking connection to gateway"})]}),i.jsxs(h,{className:"space-y-4",children:[i.jsx(f,{value:33,className:"h-2"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Looking for the Client Portal Gateway..."}),i.jsxs(k,{children:[i.jsx(T,{className:"h-4 w-4"}),i.jsx(I,{children:"Connection taking too long?"}),i.jsxs(_,{className:"space-y-2 mt-2",children:[i.jsx("p",{children:"Your browser may be blocking the connection. Try:"}),i.jsxs("ol",{className:"list-decimal list-inside text-sm space-y-1",children:[i.jsxs("li",{children:["Click ",i.jsx("strong",{children:"Gateway Settings"})," above to configure your gateway URL"]}),i.jsx("li",{children:"If using remotely, enter your machine's IP (e.g., https://192.168.1.100:5000)"}),i.jsxs("li",{children:["Accept the ",i.jsx("strong",{children:"self-signed certificate warning"})," in your browser"]}),i.jsx("li",{children:"Login if prompted, then return here"})]})]})]}),i.jsxs(m,{variant:"outline",size:"sm",onClick:()=>window.open("https://localhost:5000","_blank"),children:[i.jsx(g,{className:"h-4 w-4 mr-2"}),"Open Gateway in New Tab"]})]})]}):e?t?i.jsxs("div",{className:"space-y-6",children:[i.jsx(o,{className:"bg-gradient-to-br from-card via-card to-primary/5 border-primary/20",children:i.jsxs(h,{className:"pt-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(y,{className:"h-5 w-5 text-primary"}),i.jsx("span",{className:"font-medium",children:"IBKR Connected"}),n&&i.jsx(j,{variant:"outline",className:"bg-primary/10 text-primary border-primary",children:"Paper Trading"})]}),i.jsxs(p,{value:(null==K?void 0:K.accountId)||"",onValueChange:ce,children:[i.jsx(w,{className:"w-48",children:i.jsx(N,{placeholder:"Select Account"})}),i.jsx(C,{children:s.map(e=>i.jsxs(b,{value:e.accountId,children:[e.accountId," (",e.accountType,")"]},e.accountId))})]}),i.jsx(m,{variant:"ghost",size:"icon",onClick:se,children:i.jsx(v,{className:"h-4 w-4"})})]}),K&&i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(B,{className:"w-3 h-3"}),"Account Balance"]}),i.jsxs("div",{className:"text-3xl font-mono font-bold",children:["$",K.balance.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Buying Power"}),i.jsxs("div",{className:"text-xl font-mono",children:["$",K.buyingPower.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]}),X.length>0&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Positions Value"}),i.jsxs("div",{className:"text-xl font-bold",children:["$",Pe.totalValue.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Unrealized P&L"}),i.jsxs("div",{className:"text-xl font-bold "+(Pe.totalPnL>=0?"text-success":"text-destructive"),children:[Pe.totalPnL>=0?"+":"","$",Pe.totalPnL.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Realized P&L"}),i.jsxs("div",{className:"text-xl font-bold "+(Pe.totalRealizedPnL>=0?"text-success":"text-destructive"),children:[Pe.totalRealizedPnL>=0?"+":"","$",Pe.totalRealizedPnL.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Open Positions"}),i.jsx("div",{className:"text-xl font-bold",children:X.length})]})]})]})}),i.jsxs(D,{value:ie,onValueChange:oe,children:[i.jsxs(z,{className:"grid w-full grid-cols-2 max-w-md",children:[i.jsxs(P,{value:"overview",className:"flex items-center gap-1",children:[i.jsx(M,{className:"w-4 h-4"})," Overview"]}),i.jsxs(P,{value:"hf-trading",className:"flex items-center gap-1",children:[i.jsx(F,{className:"w-4 h-4"})," HF Trading",je&&i.jsx("span",{className:"ml-1 w-2 h-2 bg-success rounded-full animate-pulse"})]})]}),i.jsx(q,{value:"overview",className:"mt-6",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(L,{className:"w-5 h-5"}),"Quick Trade"]}),i.jsx(x,{children:"Click a symbol to start a trade"})]}),i.jsxs(h,{children:[i.jsx("div",{className:"grid grid-cols-4 gap-2",children:le.length>0?le.map(e=>i.jsxs(m,{variant:"outline",className:"flex flex-col h-auto py-3 hover:border-primary",onClick:()=>ze(e.symbol),children:[i.jsx("span",{className:"font-bold",children:e.symbol}),i.jsxs("span",{className:"text-sm",children:["$",e.price.toFixed(2)]}),i.jsxs("span",{className:"text-xs "+(e.changePercent>=0?"text-success":"text-destructive"),children:[e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})]},e.symbol)):pe.map(e=>i.jsx(m,{variant:"outline",className:"py-6",onClick:()=>ze(e),children:e},e))}),ue&&i.jsx("div",{className:"text-center text-sm text-muted-foreground mt-2",children:"Updating quotes..."})]})]}),i.jsxs(o,{children:[i.jsx(l,{children:i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(V,{className:"w-5 h-5"}),"Current Positions"]})}),i.jsx(h,{children:0===X.length?i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No open positions"}),i.jsx("p",{className:"text-sm",children:"Place a trade to get started"})]}):i.jsxs("div",{className:"space-y-3",children:[X.slice(0,5).map(e=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.symbol}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.position>0?"+":"",e.position," shares @ $",e.avgCost.toFixed(2)]})]}),i.jsxs("div",{className:"text-right "+(e.unrealizedPnl>=0?"text-success":"text-destructive"),children:[i.jsxs("div",{className:"font-medium",children:[e.unrealizedPnl>=0?"+":"","$",e.unrealizedPnl.toFixed(2)]}),i.jsxs("div",{className:"text-sm",children:["$",e.marketValue.toFixed(2)]})]})]},e.conid)),X.length>5&&i.jsxs(m,{variant:"ghost",className:"w-full",onClick:()=>oe("positions"),children:["View all ",X.length," positions"]})]})})]})]})}),i.jsx(q,{value:"hf-trading",className:"mt-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(o,{className:"border-2 "+(je?"border-warning bg-warning/5":"border-dashed"),children:[i.jsx(l,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-full "+(je?"bg-warning/20":"bg-muted"),children:i.jsx(F,{className:"w-6 h-6 "+(je?"text-warning animate-pulse":"text-muted-foreground")})}),i.jsxs("div",{children:[i.jsxs(d,{className:"flex items-center gap-2",children:["High-Frequency Paper Trading",je&&i.jsxs(j,{className:"bg-warning text-warning-foreground",children:[i.jsx(A,{className:"w-3 h-3 mr-1 animate-pulse"}),"LIVE"]})]}),i.jsx(x,{children:"Terminal-based worker generating 100+ trades/day for En Pensent training"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Worker Status"}),i.jsx("div",{className:"font-medium "+(je?"text-warning":"text-muted-foreground"),children:je?"RUNNING":"OFFLINE"})]})]})}),i.jsxs(h,{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono",children:ge.total}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Trades"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono",children:ge.today}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Today's Trades"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"text-3xl font-bold font-mono "+(ge.pnl>=0?"text-success":"text-destructive"),children:[ge.pnl>=0?"+":"","$",ge.pnl.toFixed(2)]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total P&L"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono text-warning",children:je?"30s":"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cycle Time"})]})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(U,{className:"w-4 h-4"}),i.jsx("span",{children:"Auto-refresh every 5 seconds from Supabase"}),i.jsx("span",{className:"mx-2",children:"•"}),i.jsx("span",{children:"11 symbols: AAPL, MSFT, NVDA, TSLA, AMD, META, GOOGL, AMZN, SPY, QQQ, IWM"})]})]})]}),i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(A,{className:"w-5 h-5"}),"Live Trade Feed",he.length>0&&i.jsxs(j,{variant:"secondary",children:[he.length," recent"]})]}),i.jsx(x,{children:"Real-time trades from high-frequency worker (updates every 5s)"})]}),i.jsx(h,{children:0===he.length?i.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[i.jsx(F,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"text-lg",children:"No trades yet"}),i.jsx("p",{className:"text-sm",children:"Start the high-frequency worker to see activity"}),i.jsx("code",{className:"block mt-4 p-2 bg-muted rounded text-xs",children:"node farm/workers/high-frequency-paper-trader.mjs"})]}):i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:he.map(e=>{var t;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:["BUY"===e.direction?i.jsx(G,{className:"w-4 h-4 text-success"}):i.jsx(Z,{className:"w-4 h-4 text-destructive"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold",children:e.symbol}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString()})]}),i.jsx(j,{variant:"BUY"===e.direction?"default":"destructive",children:e.direction}),i.jsxs(j,{variant:"outline",className:"text-xs",children:[e.shares," shares"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-mono",children:["$",null==(t=e.entry_price)?void 0:t.toFixed(2)]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Entry"})]}),e.predicted_confidence&&i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-mono",children:[(100*e.predicted_confidence).toFixed(0),"%"]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Conf"})]}),void 0!==e.pnl&&null!==e.pnl&&i.jsxs("div",{className:"text-right font-mono "+(e.pnl>=0?"text-success":"text-destructive"),children:[i.jsxs("div",{children:[e.pnl>=0?"+":"","$",e.pnl.toFixed(2)]}),i.jsx("div",{className:"text-xs",children:"P&L"})]}),i.jsx(j,{variant:"outline",className:"open"===e.status?"bg-success/10 text-success":"bg-muted",children:e.status})]})]},e.id)})})})]}),he.filter(e=>"open"===e.status).length>0&&i.jsxs(o,{children:[i.jsx(l,{children:i.jsxs(d,{className:"text-lg flex items-center gap-2",children:[i.jsx(V,{className:"w-5 h-5"}),"Open HF Positions"]})}),i.jsx(h,{children:i.jsxs(Y,{children:[i.jsx(H,{children:i.jsxs(S,{children:[i.jsx(E,{children:"Symbol"}),i.jsx(E,{children:"Side"}),i.jsx(E,{className:"text-right",children:"Shares"}),i.jsx(E,{className:"text-right",children:"Entry"}),i.jsx(E,{className:"text-right",children:"Stop Loss"}),i.jsx(E,{className:"text-right",children:"Take Profit"}),i.jsx(E,{children:"Status"})]})}),i.jsx(W,{children:he.filter(e=>"open"===e.status).map(e=>{var t,n,s;return i.jsxs(S,{children:[i.jsx(J,{className:"font-bold",children:e.symbol}),i.jsx(J,{children:i.jsx(j,{variant:"BUY"===e.direction?"default":"destructive",children:e.direction})}),i.jsx(J,{className:"text-right font-mono",children:e.shares}),i.jsxs(J,{className:"text-right font-mono",children:["$",null==(t=e.entry_price)?void 0:t.toFixed(2)]}),i.jsxs(J,{className:"text-right font-mono text-destructive",children:["$",(null==(n=e.stop_loss)?void 0:n.toFixed(2))||"N/A"]}),i.jsxs(J,{className:"text-right font-mono text-success",children:["$",(null==(s=e.take_profit)?void 0:s.toFixed(2))||"N/A"]}),i.jsx(J,{children:i.jsx(j,{variant:"outline",className:"bg-success/10 text-success border-success/30",children:"Open"})})]},e.id)})})]})})]})]})})]})]}):i.jsxs(o,{className:"border-warning/50",children:[i.jsx(l,{children:i.jsxs(d,{className:"flex items-center gap-2 text-warning",children:[i.jsx(O,{className:"h-5 w-5"}),"Gateway Running - Login Required"]})}),i.jsxs(h,{className:"space-y-4",children:[i.jsxs(k,{variant:"default",children:[i.jsx(T,{className:"h-4 w-4"}),i.jsx(_,{children:'Bridge is running but not connected to IB Gateway. Open IB Gateway desktop app, log in, then click "Connect to Gateway".'})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(m,{onClick:ne,className:"flex-1",children:[i.jsx(O,{className:"h-4 w-4 mr-2"}),"Connect to Gateway"]}),i.jsxs(m,{variant:"outline",onClick:te,children:[i.jsx(v,{className:"h-4 w-4 mr-2"}),"Check Status"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"IB Gateway must be running with API enabled (port 4002 for paper trading)."})]})]}):i.jsxs(o,{className:"border-destructive/50",children:[i.jsxs(l,{children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(d,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(R,{className:"h-5 w-5"}),"IB Gateway Bridge Not Running"]})}),i.jsx(x,{children:ee||"Start the IBKR Client Portal Gateway to begin trading."})]}),i.jsxs(h,{className:"space-y-4",children:[i.jsxs(k,{children:[i.jsx(T,{className:"h-4 w-4"}),i.jsx(I,{children:"Quick Setup"}),i.jsx(_,{className:"space-y-2",children:i.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[i.jsxs("li",{children:["Download the ",i.jsx("a",{href:"https://www.interactivebrokers.com/en/trading/ib-api.php",target:"_blank",rel:"noopener",className:"text-primary underline font-medium",children:"IBKR Client Portal Gateway"})]}),i.jsxs("li",{children:["Run ",i.jsx("code",{className:"bg-muted px-1 rounded text-sm",children:"bin/run.sh"})," (Mac) or ",i.jsx("code",{className:"bg-muted px-1 rounded text-sm",children:"bin/run.bat"})," (Windows)"]}),i.jsxs("li",{children:["Login at ",i.jsx("strong",{children:"https://localhost:5000"})," with IBKR credentials"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Using remote access?"})," Click Gateway Settings above and enter your machine's IP"]})]})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(m,{onClick:te,className:"flex-1",children:[i.jsx(v,{className:"h-4 w-4 mr-2"}),"Retry Connection"]}),i.jsxs(m,{variant:"outline",onClick:()=>window.open("https://localhost:5000","_blank"),children:[i.jsx(g,{className:"h-4 w-4 mr-2"}),"Open Gateway"]})]})]})]})}const Ne=()=>i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[i.jsx(X,{className:"w-8 h-8 text-primary"}),i.jsxs("h1",{className:"text-4xl font-bold",children:[i.jsx("span",{className:"text-primary",children:"En Pensent™"})," Trading"]})]}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Paper trading powered by Interactive Brokers. Start with simulated funds, graduate to real money when ready."})]}),i.jsx(K,{componentName:"IBKRTradingDashboard",children:i.jsx(we,{})}),i.jsx("p",{className:"text-center text-xs text-muted-foreground mt-8",children:"⚠️ Paper trading uses simulated funds. No real money is at risk. When ready, switch to a live IBKR account for real trading."})]});export{Ne as default};
