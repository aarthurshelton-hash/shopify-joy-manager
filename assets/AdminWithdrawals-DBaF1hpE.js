import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as h,D as m,aB as p,aC as f,aD as w,aE as j,p as v,t as g,w as y,dy as C,du as b,bo as N,dr as D,cZ as q,a1 as z,a2 as B,a3 as L,a4 as _,a5 as M,aW as W,bC as A,dz as K,b as H,y as E}from"./index-UzGFh8Yo.js";import{C as U}from"./calendar-CY-nT0Jr.js";!function(){const e=G,t=I();for(;;)try{if(406915===-parseInt(e(133))/1+-parseInt(e(250))/2*(parseInt(e(161))/3)+-parseInt(e(177))/4*(parseInt(e(144))/5)+-parseInt(e(187))/6*(-parseInt(e(117))/7)+parseInt(e(159))/8*(-parseInt(e(168))/9)+parseInt(e(135))/10+parseInt(e(151))/11)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const k=function(){const e=G,t={};t[e(217)]=function(e,t){return e!==t},t[e(114)]=e(122),t[e(208)]=e(239)+e(222)+e(231),t[e(129)]=e(157)+e(121)+e(216)+e(235)+e(131);const s=t;let n=!0;return function(t,r){const a=e,c={};c[a(146)]=s[a(129)];const i=c;if("seXxn"!==a(113)){const e=n?function(){const e=a;if(r){if(s[e(217)](s.cqgfg,s.cqgfg))throw new _0x267636(i[e(146)]);{const s=r[e(118)](t,arguments);return r=null,s}}}:function(){};return n=!1,e}throw new _0x3ec7db(s.haWMn)}}()(void 0,function(){const e=G,t={};t[e(141)]=e(174)+"+$";const s=t;return k[e(246)]()[e(164)](s.teCdb)[e(246)]()[e(153)+"r"](k)[e(164)](e(174)+"+$")});function I(){const e=["mJm1nZqYtKndsK5p","Cgf5B3v0x2rLDa","odm5ndqWvwfXEhL0","BKfItLy","qMHjvg8","BwfW","yxrLigvYCM9YoG","z2v0","Dgvdzgi","CMv0DxjUicHMDq","C3rHDhvZ","nvzYuNz0yG","DgLJyxrLza","C3njs1G","Dg90ywXFD2L0Aa","yxnJzw5KAw5N","svzptuq","zf9Jzw50CYWGDa","mJy4mty5odHsy09pteu","DeL0yuO","y29UC3rYDwn0BW","DxnLCL9PzcWGDa","BLLHCNO","AfLRuM0","uMvXDwvZDcbUBW","B3jKzxi","mZaWmdC1mLPju2HzEq","zgf0yq","nLjWyun2yq","yxbWCM92zwq","CuXkD2y","C2vHCMnO","CwjYANa","vurIzha","C2vSzwn0","mtHAEenrvu8","CgvUzgLUz19JBW","Ce9sBgq","Dg90ywW","DxbKyxrL","y29TCgXLDgvKxW","kcGOlISPkYKRkq","zNvUy3rPB25Z","AgPZwKq","mJqXmZKZmKnNsgn0uq","vwfHD3K","Dw50","su5jwu4","BLvKy2S","ywrTAw5FBM90zq","C3rHDhvZlcbHBq","tM90igf1DgHLBG","CMvQzwn0zwrFyW","yMXnDxC","mtaXotrxEeHOr0K","x3jLCxvLC3rZ","cI0TlqO","zgLZCgXHEv9Uyq","x19WCM90B19F","B3rHBf9LyxjUzq","y29UC29Szq","t1fUufi","C3vJy2vZCW","EeHQDg8","BMn0Aw9UkcKG","zNjVBq","BwjrDvG","CgvUzgLUz19HBq","yw1VDw50x2nLBG","AxnWBgf5x25HBq","Dg90ywXFzwfYBG","DxnLCL9Pza","tKn6qMy","CM4GDgHPCYiPka","AxPst3a","Agfxtw4","y29TCgXLDgvK","vhzOA1a","ChjVDg90ExbL","yM9KEq","B3rHBf93AxrOza","CezHB1u","Dg9ju09tDhjPBG","ig5VDcbPBIbHCa","ve13suS","DhjHy2u","wuHMwxy","BKPkvvC","zxjYB3i","CMvHC29UigLZia","B3vUDa","Eg1pyKq","Bg9N","tM1xruq","C3fJBwS","CuXgDe8","zM9YrwfJAa","DxnLCL9PzcWGza","CMvXDwLYzwq","Ehf4BgG","vw5RBM93BIbvCW","C2LUz2XL","ChjVDMvKihn0yq","D2L0AgrYyxDHBa","EKHWqLi","zwrFy2vUDhm","uMvQzwn0Aw9Uia","BNPTtLq","CgvUzgLUzW","tvPUzKy","yxbWCM92zwrFyq","y3jLyxrLzf9HDa","Aw5MBW","Dg9tDhjPBMC","rhrtvuW","t05bD3y","Bw91BNq","ntC2ndK0zffzEw10","yxv0Aa","E30Uy29UC3rYDq","r3zYuKK","tu5cEei","Bu9oEKu","y3fNzMC","y3rVCIGICMv0Dq","z2v0vxnLCG","mJeWuKHzDg5g","yxbWBhK","CMvXDwvZDf9Pza","yMLUza","DcbMB3vUzcbVCG","vhDoAge","DgfIBgu","DgHKCMf3ywW","qxnzt20","yxbWCM92zwrFyW","ChjVy2vZCY13Aq","z3D4AMK","ELzABuy","u3zqtfK","DhvZ","ywLSCW"];return(I=function(){return e})()}k();const Y=function(){const e=G,t={};t[e(242)]=e(181),t[e(163)]=e(186),t[e(214)]=function(e,t){return e+t},t[e(112)]=e(110)+e(115)+e(206)+" )";const s=t;let n=!0;return function(e,t){const r={zHpBR:function(e,t){return s[G(214)](e,t)},izROp:s.MNBxB},a=n?function(){const n=G;if(t){if(s[n(242)]!==s.qLJwf){const s=t[n(118)](e,arguments);return t=null,s}{const e=_0x9ec6b4(r[n(237)](n(142)+n(197),r[n(207)])+");");_0x3ab695=e()}}}:function(){};return n=!1,a}}();function G(e,t){e-=110;const s=I();let n=s[e];if(void 0===G.UBGKmA){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};G.bznwFV=r,G.HVnNKe={},G.UBGKmA=!0}const a=e+s[0],c=G.HVnNKe[a];if(c)n=c;else{const e=function(e){this.bLhKkG=e,this.dMhwEX=[1,0,0],this.mpDoUC=function(){return"newState"},this.EIQxQG="\\w+ *\\(\\) *{\\w+ *",this.YAekTd="['|\"].+['|\"];? *}"};e.prototype.TrYFvh=function(){const e=new RegExp(this.EIQxQG+this.YAekTd).test(this.mpDoUC.toString())?--this.dMhwEX[1]:--this.dMhwEX[0];return this.YagHwd(e)},e.prototype.YagHwd=function(e){return Boolean(~e)?this.XsGZQj(this.bLhKkG):e},e.prototype.XsGZQj=function(e){for(let t=0,s=this.dMhwEX.length;t<s;t++)this.dMhwEX.push(Math.round(Math.random())),s=this.dMhwEX.length;return e(this.dMhwEX[0])},new e(G).TrYFvh(),n=G.bznwFV(n),G.HVnNKe[a]=n}return n}async function P(t){const s=G,n={};n.OQnPR=s(244),n[s(170)]=function(e,t){return e!==t},n[s(205)]="all",n[s(220)]="profiles",n.qWkjh=s(204);const r=n;try{const n={};n[s(148)]=!1;let a=e[s(198)](s(236)+s(188))[s(167)]("*")[s(158)](r[s(194)],n);t&&r[s(170)](t,r[s(205)])&&(a=a.eq(s(143),t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(138)](e=>e[s(204)]))],{data:l}=await e.from(r[s(220)])[s(167)](s(230)+s(202)+"e").in(s(204),o),{data:d}=await e.from("user_wallets")[s(167)](s(154)+s(192)+s(150)+s(213)+"rawn_cents").in(r.qWkjh,o),u=new Map((null==l?void 0:l[s(138)](e=>[e[s(204)],e]))||[]),x=new Map((null==d?void 0:d.map(e=>[e.user_id,e]))||[]),h=(c||[])[s(138)](e=>{var t,n,r;return{...e,payout_details:e[s(134)+s(132)],user_display_name:(null==(t=u[s(140)](e.user_id))?void 0:t[s(190)+"me"])||s(233)+"er",wallet_total_earned:(null==(n=x[s(140)](e.user_id))?void 0:n[s(203)+s(238)])||0,wallet_total_withdrawn:(null==(r=x[s(140)](e[s(204)]))?void 0:r[s(147)+"drawn_cents"])||0}}),m={};return m[s(160)]=h,m[s(221)]=null,m}catch(a){const e={};return e[s(160)]=[],e[s(221)]=a,e}}async function Z(){const t=G,s={};s[t(152)]=t(162),s[t(210)]="rejected",s[t(165)]=t(183)+"ount_cents";const n=s;try{const{data:s,error:r}=await e[t(198)](t(236)+t(188))[t(167)](n[t(165)]);if(r)throw r;const a={};a[t(169)+t(179)]=0,a[t(200)+t(223)]=0,a[t(126)+t(223)]=0,a[t(243)+t(249)]=0,a.completed_total=0,a.rejected_count=0;const c=a;(s||[])[t(229)](e=>{const s=t;switch(e[s(143)]){case"pending":c[s(169)+s(179)]++,c["pending_am"+s(223)]+=e.amount_cents;break;case n[s(152)]:c[s(126)+s(223)]++,c[s(243)+s(249)]+=e[s(201)+"ts"];break;case s(209):c[s(173)+s(171)]+=e[s(201)+"ts"];break;case n[s(210)]:c[s(185)+"ount"]++}});const i={};return i[t(160)]=c,i[t(221)]=null,i}catch(r){const e={};return e[t(160)]=null,e[t(221)]=r,e}}Y(void 0,function(){const e=G,t={MtgvN:function(e,t){return e(t)},cmnKT:"return (function() ",NmWED:function(e){return e()},DtSUL:e(225),xqxlh:"warn",HQgUF:e(221),mbQuX:"exception",hjsZD:e(123),IVOMD:function(e,t){return e<t}};let s;try{const n=t.MtgvN(Function,t.cmnKT+(e(110)+e(115)+e(206)+" ));"));s=t[e(226)](n)}catch(a){s=window}const n=s[e(193)]=s.console||{},r=[t[e(247)],t[e(232)],e(245),t.HQgUF,t[e(199)],t[e(176)],e(218)];for(let c=0;t[e(149)](c,r.length);c++){const t=Y.constructor[e(211)].bind(Y),s=r[c],a=n[s]||t;t[e(191)]=Y[e(120)](Y),t[e(246)]=a[e(246)].bind(a),n[s]=t}})(),function(){const e=S,t=J();for(;;)try{if(180213===-parseInt(e(255))/1+parseInt(e(260))/2*(-parseInt(e(275))/3)+parseInt(e(285))/4*(parseInt(e(264))/5)+parseInt(e(259))/6+-parseInt(e(234))/7*(-parseInt(e(262))/8)+-parseInt(e(236))/9*(parseInt(e(250))/10)+parseInt(e(263))/11*(parseInt(e(274))/12))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const X=function(){const e=S,t={};t[e(241)]=function(e,t){return e!==t};const s=t;let n=!0;return function(t,r){const a=e;if(s.TbufF(a(225),"gmkoD")){const e={success:!1};return e.error=_0x555c14,e}{const e=n?function(){if(r){const e=r[a(235)](t,arguments);return r=null,e}}:function(){};return n=!1,e}}}()(void 0,function(){const e=S,t={};t[e(247)]=e(270)+"+$";const s=t;return X[e(266)]()[e(282)](s[e(247)])[e(266)]()[e(267)+"r"](X).search(e(270)+"+$")});function J(){const e=["Cf9IDxLLCL9Pza","mty1mJuWDuDtD0nZ","zNjVBq","z2v0vxnLCG","yxv0Aa","AKfLAeW","mJmZnZG0Cfr5B0rq","CM4GDgHPCYiPka","DeHruem","ExbiA2q","ntC4mJmYswr3Bfzu","mJaXotr5CKLjzwy","yw9iuuW","otq4odbYywDRseG","odaZt1PWtKnt","nJveEw9Ks2i","Aw5MBW","Dg9tDhjPBMC","y29UC3rYDwn0BW","BgvUz3rO","zxHJzxb0Aw9U","kcGOlISPkYKRkq","DgfIBgu","DgLJyxrLza","Cf9SAxn0Aw5NxW","ndqZmdr5EhP5C0u","mtaYtMfjzuri","CMTLDhbSywnLxW","Dg9gAxHLza","txLitLy","zgf0yq","Bg9N","ChjVDg90ExbL","C2vHCMnO","B3jKzxi","vefQA1m","oduZnZzhuezmAhy","s3j6Bfe","yMLUza","ww1Xq0u","zxjYB3i","z21RB0q","wgXsrvy","z2v0x29Yx2nYzq","uvDZuKm","Cf9ZywXLx3bYAq","yxrLx3DHBgXLDa","E30Uy29UC3rYDq","q3P3v2W","twj5BwW","nZDVrvLkAMC","yxbWBhK","oxLXEw96Dq","y2vFy2vUDhm","Bvvqq0i","y29UC29Szq","BMn0Aw9UkcKG","vgj1zKy","Cf91C2vYx2LK","C3vJy2vZCW","C1npt00","x19WCM90B19F","whbOBLa","DMvmyu4","D21gvfq"];return(J=function(){return e})()}X();const R=function(){const e=S,t={mUPCB:function(e,t){return e===t}};t[e(286)]=e(278),t[e(244)]=function(e,t){return e===t},t[e(246)]=e(223);const s=t;let n=!0;return function(t,r){const a=e;if(s[a(244)](s[a(246)],a(248))){const e=_0x3d9df9[a(235)](_0x31f84a,arguments);return _0xc4266e=null,e}{const e=n?function(){const e=a;if(s[e(238)](s[e(286)],e(233))){const t=_0x631f78[e(267)+"r"].prototype[e(287)](_0x2667a6),s=_0x15a998[_0x24129e],n=_0x37f228[s]||t;t[e(245)]=_0x17f0e0[e(287)](_0x2ef628),t[e(266)]=n.toString.bind(n),_0x3140ce[s]=t}else if(r){const s=r[e(235)](t,arguments);return r=null,s}}:function(){};return n=!1,e}}}();function S(e,t){e-=223;const s=J();let n=s[e];if(void 0===S.TWNZnB){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};S.eGnaNM=r,S.ooxFJC={},S.TWNZnB=!0}const a=e+s[0],c=S.ooxFJC[a];if(c)n=c;else{const e=function(e){this.aRWHsb=e,this.wOJdEt=[1,0,0],this.DbtBiG=function(){return"newState"},this.CrKhHh="\\w+ *\\(\\) *{\\w+ *",this.ZpXbKO="['|\"].+['|\"];? *}"};e.prototype.QBjvQD=function(){const e=new RegExp(this.CrKhHh+this.ZpXbKO).test(this.DbtBiG.toString())?--this.wOJdEt[1]:--this.wOJdEt[0];return this.JTYiWv(e)},e.prototype.JTYiWv=function(e){return Boolean(~e)?this.qzdvcD(this.aRWHsb):e},e.prototype.qzdvcD=function(e){for(let t=0,s=this.wOJdEt.length;t<s;t++)this.wOJdEt.push(Math.round(Math.random())),s=this.wOJdEt.length;return e(this.wOJdEt[0])},new e(S).QBjvQD(),n=S.eGnaNM(n),S.ooxFJC[a]=n}return n}function O(e){return"$"+(e/100)[S(277)](2)}function F(){var k,I;const{user:Y}=t(),X=s(),[J,R]=n.useState(!1),[S,F]=n.useState(!0),[Q,T]=n.useState([]),[V,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[Y]);const oe=async()=>{if(!Y)return void F(!1);const{data:t}=await e.rpc("has_role",{_user_id:Y.id,_role:"admin"});!0===t&&(R(!0),await le()),F(!1)},le=async()=>{const[e,t]=await Promise.all([P(ee),Z()]);e.data&&T(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(E,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(E,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(E,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(E,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(E,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(E,{variant:"outline",children:e})}};return S?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):Y&&J?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>X(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),V&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:V.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O(V.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:V.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O(V.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:O(V.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:V.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(j,{value:ee,children:r.jsxs(c,{children:[r.jsxs(v,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===Q.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(b,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:Q.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(N,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(D,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(U,{className:"h-3 w-3"}),q(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",O(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:O(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(z,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(B,{children:[r.jsxs(L,{children:[r.jsxs(_,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(M,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(k=se.request.payout_details)?void 0:k.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:O(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(W,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(A,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(I=se.request.payout_details)?void 0:I.email})]})]})]}),r.jsxs(K,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=G,r={};r.nzmNT=n(184)+"ticated",r[n(219)]="withdrawal"+n(188),r[n(224)]=n(162),r.AsYOm="pending";const a=r;try{const{data:{user:r}}=await e[n(251)][n(116)]();if(!r)throw new Error(a[n(240)]);const{error:c}=await e[n(198)](a[n(219)]).update({status:a[n(224)],admin_notes:s||null,reviewed_by:r.id,reviewed_at:(new Date)[n(215)+"g"]()}).eq("id",t).eq(n(143),a[n(125)]);if(c)throw c;const i={};return i[n(195)]=!0,i[n(221)]=null,i}catch(c){const e={success:!1};return e[n(221)]=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal approved");break;case"reject":if(!re.trim())return H.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=G,r={};r[n(128)]=n(174)+"+$",r[n(180)]=function(e,t){return e===t},r[n(196)]=n(178),r[n(137)]=n(239)+n(222)+n(231),r[n(156)]=n(143),r.qLFtO=n(241);const a=r;try{const{data:{user:r}}=await e[n(251)].getUser();if(!r)throw new Error("Not authen"+n(145));if(!s){if(a[n(180)](a.xHjto,n(178)))throw new Error(a[n(137)]);return _0x1e8ddc[n(246)]()[n(164)](QNBZuJ.gwxji)[n(246)]()[n(153)+"r"](_0xbb3512)[n(164)](n(174)+"+$")}const{error:c}=await e[n(198)](n(236)+n(188))[n(172)]({status:"rejected",admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(215)+"g"]()}).eq("id",t).eq(a[n(156)],a[n(228)]);if(c)throw c;return{success:!0,error:null}}catch(c){const e={};return e[n(195)]=!1,e[n(221)]=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=G,r={};r[n(136)]=n(184)+"ticated",r[n(111)]="status",r[n(155)]=n(162),r[n(166)]=n(127)+n(124),r[n(130)]=n(248),r[n(227)]="Wallet upd"+n(139);const a=r;try{const{data:{user:r}}=await e[n(251)].getUser();if(!r)throw new Error(a[n(136)]);const{data:c,error:i}=await e.from(n(236)+n(188))[n(167)]("*").eq("id",t).eq(a[n(111)],a[n(155)])[n(234)]();if(i||!c)throw new Error(n(157)+"t found or"+n(216)+n(235)+"tus");const{error:o}=await e[n(198)](n(236)+n(188))[n(172)]({status:n(209),admin_notes:s?(c[n(182)+"s"]||"")+n(189)+s:c[n(182)+"s"],completed_at:(new Date)[n(215)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(119)]=t,l[n(204)]=c[n(204)],l.amount_cents=c.amount_cents;const d={};d[n(212)]=l;const{error:u}=await e[n(175)].invoke(a.UDbdp,d);if(u&&a[n(130)]!==a.SvPLY){const e={};return e[n(160)]=null,e[n(221)]=_0x4a1f53,e}const x={};return x[n(195)]=!0,x[n(221)]=null,x}catch(c){const e={};return e[n(195)]=!1,e[n(221)]=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?H.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>X("/"),children:"Go Home"})]})})})}R(void 0,function(){const e=S,t={tHQPC:function(e,t){return e+t},QWsRC:"return (fu"+e(240),DRdiN:e(231)+'ctor("retu'+e(256)+" )",jAehL:function(e){return e()},aoHQL:e(280),ZfgGy:"warn",CzwWl:e(265),TAjkS:e(271)};let s;try{const n=Function(t[e(257)](t[e(228)],t.DRdiN)+");");s=t[e(254)](n)}catch(a){s=window}const n=s[e(239)]=s.console||{},r=[t[e(261)],t.ZfgGy,t[e(232)],e(224),e(269),t[e(284)],"trace"];for(let c=0;c<r[e(268)];c++){const t=R.constructor[e(281)][e(287)](R),s=r[c],a=n[s]||t;t.__proto__=R[e(287)](R),t[e(266)]=a[e(266)].bind(a),n[s]=t}})();export{F as default};
