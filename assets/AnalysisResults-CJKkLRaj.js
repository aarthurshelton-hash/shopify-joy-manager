const e='import { useState } from \'react\';\nimport { Button } from \'@/components/ui/button\';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Separator } from \'@/components/ui/separator\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { ScrollArea } from \'@/components/ui/scroll-area\';\nimport { \n  Save, \n  Download, \n  GitCommit, \n  Users, \n  Calendar, \n  Hash,\n  ExternalLink,\n  ChevronDown,\n  ChevronUp\n} from \'lucide-react\';\nimport { ArchetypeDisplay } from \'./ArchetypeDisplay\';\nimport { CodeMetricsChart } from \'./CodeMetricsChart\';\nimport { RecommendationsPanel } from \'./RecommendationsPanel\';\nimport { ShareReportButton } from \'./ShareReportButton\';\nimport { SignatureVisualization } from \'./SignatureVisualization\';\nimport { CodeAnalysisResult, useCodeAnalysis } from \'@/hooks/useCodeAnalysis\';\nimport { format } from \'date-fns\';\n\ninterface AnalysisResultsProps {\n  result: CodeAnalysisResult;\n  onSave?: () => void;\n}\n\nexport function AnalysisResults({ result, onSave }: AnalysisResultsProps) {\n  const [showCommits, setShowCommits] = useState(false);\n  const { saveAnalysis } = useCodeAnalysis();\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    // Note: This would need the actual user ID in a real implementation\n    // For now, we\'ll show a message that login is required\n    setIsSaving(false);\n    onSave?.();\n  };\n\n  const handleExport = () => {\n    const dataStr = JSON.stringify(result, null, 2);\n    const blob = new Blob([dataStr], { type: \'application/json\' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\'a\');\n    a.href = url;\n    a.download = `${result.repository_name}-analysis.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <div className="space-y-6">\n      {/* Header with repo info */}\n      <Card>\n        <CardHeader>\n          <div className="flex items-center justify-between">\n            <div>\n              <CardTitle className="flex items-center gap-2 text-xl">\n                {result.repository_name}\n                <a \n                  href={result.repository_url} \n                  target="_blank" \n                  rel="noopener noreferrer"\n                  className="text-muted-foreground hover:text-primary"\n                >\n                  <ExternalLink className="h-4 w-4" />\n                </a>\n              </CardTitle>\n              <CardDescription className="mt-1">\n                by {result.owner}\n              </CardDescription>\n            </div>\n            <div className="flex gap-2">\n              <ShareReportButton result={result} />\n              <Button variant="outline" size="sm" onClick={handleExport}>\n                <Download className="h-4 w-4 mr-2" />\n                Export\n              </Button>\n              <Button size="sm" onClick={handleSave} disabled={isSaving}>\n                <Save className="h-4 w-4 mr-2" />\n                Save\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">\n            <div className="flex items-center gap-2">\n              <GitCommit className="h-4 w-4 text-muted-foreground" />\n              <div>\n                <div className="text-sm text-muted-foreground">Total Commits</div>\n                <div className="font-semibold">{result.total_commits}</div>\n              </div>\n            </div>\n            <div className="flex items-center gap-2">\n              <Users className="h-4 w-4 text-muted-foreground" />\n              <div>\n                <div className="text-sm text-muted-foreground">Contributors</div>\n                <div className="font-semibold">{result.total_contributors}</div>\n              </div>\n            </div>\n            <div className="flex items-center gap-2">\n              <Calendar className="h-4 w-4 text-muted-foreground" />\n              <div>\n                <div className="text-sm text-muted-foreground">Analysis Period</div>\n                <div className="font-semibold text-sm">\n                  {result.analysis_period_start && format(new Date(result.analysis_period_start), \'MMM d\')} - {result.analysis_period_end && format(new Date(result.analysis_period_end), \'MMM d, yyyy\')}\n                </div>\n              </div>\n            </div>\n            <div className="flex items-center gap-2">\n              <Hash className="h-4 w-4 text-muted-foreground" />\n              <div>\n                <div className="text-sm text-muted-foreground">Fingerprint</div>\n                <div className="font-mono text-sm truncate max-w-[120px]" title={result.fingerprint}>\n                  {result.fingerprint.slice(0, 12)}...\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* En Pensent Temporal Signature Visualization */}\n      <SignatureVisualization result={result} animated />\n\n      {/* Archetype Display */}\n      <ArchetypeDisplay\n        archetype={result.archetype}\n        predictedOutcome={result.predicted_outcome}\n        outcomeConfidence={result.outcome_confidence}\n        intensity={result.intensity}\n        dominantForce={result.dominant_force}\n        flowDirection={result.flow_direction}\n      />\n\n      {/* Metrics Charts */}\n      <CodeMetricsChart\n        metrics={result.code_metrics}\n        quadrantProfile={result.quadrant_profile}\n        temporalFlow={result.temporal_flow}\n      />\n\n      {/* Recommendations & Critical Moments */}\n      <RecommendationsPanel\n        recommendations={result.recommendations}\n        criticalMoments={result.critical_moments}\n      />\n\n      {/* Commit History (Collapsible) */}\n      <Card>\n        <CardHeader \n          className="cursor-pointer"\n          onClick={() => setShowCommits(!showCommits)}\n        >\n          <div className="flex items-center justify-between">\n            <div>\n              <CardTitle className="text-lg">Commit History</CardTitle>\n              <CardDescription>\n                {result.commits.length} commits analyzed\n              </CardDescription>\n            </div>\n            {showCommits ? (\n              <ChevronUp className="h-5 w-5 text-muted-foreground" />\n            ) : (\n              <ChevronDown className="h-5 w-5 text-muted-foreground" />\n            )}\n          </div>\n        </CardHeader>\n        {showCommits && (\n          <CardContent>\n            <ScrollArea className="h-[400px]">\n              <div className="space-y-3">\n                {result.commits.map((commit, index) => (\n                  <div key={commit.commit_hash} className="border rounded-lg p-3">\n                    <div className="flex items-start justify-between gap-4">\n                      <div className="flex-1 min-w-0">\n                        <p className="font-medium truncate">{commit.commit_message}</p>\n                        <div className="flex items-center gap-2 mt-1 text-sm text-muted-foreground">\n                          <span>{commit.author}</span>\n                          <span>â€¢</span>\n                          <span>{format(new Date(commit.committed_at), \'MMM d, yyyy\')}</span>\n                        </div>\n                      </div>\n                      <div className="flex flex-col items-end gap-1">\n                        <Badge variant="outline" className="capitalize">\n                          {commit.commit_type}\n                        </Badge>\n                        <span className="text-xs text-muted-foreground">\n                          +{commit.additions} -{commit.deletions}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          </CardContent>\n        )}\n      </Card>\n    </div>\n  );\n}\n';export{e as default};
