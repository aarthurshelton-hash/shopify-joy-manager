const e="import React, { useState, useCallback, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { Loader2, Play, CheckCircle, XCircle, AlertTriangle, ArrowLeft, Package, Trash2, Palette, Gem, Sparkles, Crown } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { toast } from 'sonner';\nimport { useAuth } from '@/hooks/useAuth';\nimport { famousGames } from '@/lib/chess/famousGames';\nimport { simulateGame, SquareData } from '@/lib/chess/gameSimulator';\nimport { generatePrintCanvas } from '@/lib/chess/canvasRenderer';\nimport { supabase } from '@/integrations/supabase/client';\nimport { createListing } from '@/lib/marketplace/marketplaceApi';\nimport { Json } from '@/integrations/supabase/types';\nimport { colorPalettes, PaletteId, setActivePalette, getPieceColor } from '@/lib/chess/pieceColors';\nimport { generateGameHash } from '@/lib/visualizations/gameCanonical';\nimport { VisionTier } from '@/lib/marketplace/paletteArtMap';\nimport { detectOpeningFromPgn } from '@/lib/chess/openingDetector';\n\n// Official En Pensent palettes (excluding 'custom')\nconst OFFICIAL_PALETTES = colorPalettes.filter(p => p.id !== 'custom');\n\n// Get a random official palette\nfunction getRandomOfficialPalette(): typeof OFFICIAL_PALETTES[0] {\n  return OFFICIAL_PALETTES[Math.floor(Math.random() * OFFICIAL_PALETTES.length)];\n}\n\n// Apply official palette colors to a simulated board\nfunction applyPaletteToBoard(\n  board: SquareData[][],\n  paletteId: PaletteId\n): SquareData[][] {\n  const palette = colorPalettes.find(p => p.id === paletteId) || colorPalettes[0];\n  \n  return board.map(rank =>\n    rank.map(square => ({\n      ...square,\n      visits: square.visits.map(visit => {\n        // Map 'w'/'b' to palette colors\n        const colorSet = visit.color === 'w' ? palette.white : palette.black;\n        const hexColor = colorSet[visit.piece as keyof typeof colorSet] || '#888888';\n        return {\n          ...visit,\n          hexColor,\n        };\n      }),\n    }))\n  );\n}\n\n// Generate creative titles for non-branded visions\n// First 25 are \"Exemplar\" editions (company development testers)\nconst EXEMPLAR_TITLES = [\n  'Exemplar â„–001 â€¢ Genesis', 'Exemplar â„–002 â€¢ Prototype', 'Exemplar â„–003 â€¢ Blueprint',\n  'Exemplar â„–004 â€¢ Foundation', 'Exemplar â„–005 â€¢ Pioneer', 'Exemplar â„–006 â€¢ Alpha',\n  'Exemplar â„–007 â€¢ Benchmark', 'Exemplar â„–008 â€¢ Catalyst', 'Exemplar â„–009 â€¢ Origin',\n  'Exemplar â„–010 â€¢ Spectrum', 'Exemplar â„–011 â€¢ Prism', 'Exemplar â„–012 â€¢ Vertex',\n  'Exemplar â„–013 â€¢ Meridian', 'Exemplar â„–014 â€¢ Zenith', 'Exemplar â„–015 â€¢ Nexus',\n  'Exemplar â„–016 â€¢ Axiom', 'Exemplar â„–017 â€¢ Epoch', 'Exemplar â„–018 â€¢ Vector',\n  'Exemplar â„–019 â€¢ Cipher', 'Exemplar â„–020 â€¢ Matrix', 'Exemplar â„–021 â€¢ Helix',\n  'Exemplar â„–022 â€¢ Synthesis', 'Exemplar â„–023 â€¢ Thesis', 'Exemplar â„–024 â€¢ Opus',\n  'Exemplar â„–025 â€¢ Finale',\n];\n\n// Second 25 are creative community-style names\nconst CREATIVE_TITLES = [\n  'Sunset Clash', 'Ocean Depths', 'Earth Tones', 'Forest Canopy', 'Copper Age',\n  'Midnight Purple', 'Rustic Charm', 'Steel Gray', 'Olive Grove', 'Slate Dreams',\n  'Berry Burst', 'Sandy Beach', 'Wine Country', 'Mint Fresh', 'Mahogany Dreams',\n  'Arctic Ice', 'Coral Reef', 'Lavender Fields', 'Bronze Medal', 'Neon Nights',\n  'Autumn Leaves', 'Crystal Cave', 'Desert Dusk', 'Emerald City', 'Fire Dance',\n];\n\n// Combine: first 25 Exemplars, then 25 creative titles = 50 total\nconst ALL_TITLES = [...EXEMPLAR_TITLES, ...CREATIVE_TITLES];\n\ninterface SeedResult {\n  title: string;\n  success: boolean;\n  error?: string;\n  visualizationId?: string;\n  listingId?: string;\n  isExemplar?: boolean;\n  paletteId?: string;\n  paletteName?: string;\n  gameHash?: string;\n  tier?: VisionTier;\n  openingName?: string;\n}\n\n// Calculate fungible base scores - Exemplars get slightly higher initial recognition\nfunction calculateInitialScores(isExemplar: boolean, index: number) {\n  const baseMultiplier = isExemplar ? 1.5 : 1.0;\n  // Earlier numbered Exemplars are \"rarer\" - slight score boost\n  const rarityBonus = isExemplar ? Math.max(0, (25 - index) * 0.1) : 0;\n  \n  return {\n    viewCount: Math.floor((Math.random() * 15 + 3) * baseMultiplier + rarityBonus * 5),\n    hdDownloads: Math.floor((Math.random() * 3) * baseMultiplier),\n    gifDownloads: Math.floor((Math.random() * 2) * baseMultiplier),\n    // Exemplars have slight trade history (early adopter activity)\n    tradeCount: isExemplar ? Math.floor(Math.random() * 2) : 0,\n  };\n}\n\n// Calculate price tiers - Exemplars start lower but have growth potential\nfunction calculatePrice(isExemplar: boolean, index: number): number {\n  if (isExemplar) {\n    // Exemplars: $0.99 - $4.99 (humble beginnings, value grows with platform)\n    // Lower numbered = slightly more valuable due to rarity\n    const basePrice = 99; // $0.99\n    const indexBonus = Math.max(0, (25 - index) * 10); // Up to $2.50 bonus for low numbers\n    return basePrice + Math.floor(Math.random() * 300) + indexBonus;\n  } else {\n    // Community visions: $1.99 - $7.99\n    return 199 + Math.floor(Math.random() * 600);\n  }\n}\n\nconst AdminSeedMarketplace: React.FC = () => {\n  const navigate = useNavigate();\n  const { user, isLoading: authLoading } = useAuth();\n  \n  const [isAdmin, setIsAdmin] = useState<boolean | null>(null);\n  const [isSeeding, setIsSeeding] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [currentItem, setCurrentItem] = useState('');\n  const [results, setResults] = useState<SeedResult[]>([]);\n  const [totalCount, setTotalCount] = useState(50);\n  const [useOfficialPalettes, setUseOfficialPalettes] = useState(true);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [deleteStats, setDeleteStats] = useState<{ deleted: number; preserved: number } | null>(null);\n\n  // Check admin status using secure has_role function\n  useEffect(() => {\n    const checkAdmin = async () => {\n      if (!user) {\n        setIsAdmin(false);\n        return;\n      }\n\n      const { data } = await supabase.rpc('has_role', { \n        _user_id: user.id, \n        _role: 'admin' \n      });\n\n      setIsAdmin(data === true);\n    };\n\n    if (!authLoading) {\n      checkAdmin();\n    }\n  }, [user, authLoading]);\n\n  const generateVisualization = useCallback(async (\n    game: typeof famousGames[0],\n    title: string,\n    index: number,\n    isExemplar: boolean,\n    useOfficialPalette: boolean = true\n  ): Promise<SeedResult> => {\n    try {\n      // Simulate the game\n      const simulation = simulateGame(game.pgn);\n      \n      // Select palette - use official palette or random official palette\n      const selectedPalette = useOfficialPalette \n        ? getRandomOfficialPalette()\n        : OFFICIAL_PALETTES[index % OFFICIAL_PALETTES.length];\n      \n      // Apply palette colors to board\n      const coloredBoard = applyPaletteToBoard(simulation.board, selectedPalette.id);\n      \n      // Set active palette for canvas generation\n      setActivePalette(selectedPalette.id);\n      \n      // Generate the print canvas\n      const canvas = await generatePrintCanvas(coloredBoard, simulation.gameData, {\n        boardSize: 600,\n        darkMode: false,\n        withWatermark: false,\n        title: title,\n      });\n      \n      // Convert to blob\n      const blob = await new Promise<Blob>((resolve, reject) => {\n        canvas.toBlob(blob => {\n          if (blob) resolve(blob);\n          else reject(new Error('Failed to create blob'));\n        }, 'image/png', 0.95);\n      });\n      \n      // Upload to storage\n      const timestamp = Date.now();\n      const filename = `${user!.id}/${timestamp}-${title.replace(/[^a-z0-9]/gi, '-').toLowerCase()}.png`;\n      \n      const { error: uploadError } = await supabase.storage\n        .from('visualizations')\n        .upload(filename, blob, {\n          contentType: 'image/png',\n          upsert: false,\n        });\n      \n      if (uploadError) throw uploadError;\n      \n      // Get public URL\n      const { data: urlData } = supabase.storage\n        .from('visualizations')\n        .getPublicUrl(filename);\n      \n      // Generate canonical game hash for URL routing\n      const gameHash = generateGameHash(game.pgn);\n      \n      // Prepare game_data with official palette and canonical info\n      const gameDataJson: Json = {\n        white: simulation.gameData.white,\n        black: simulation.gameData.black,\n        event: simulation.gameData.event,\n        date: simulation.gameData.date,\n        result: simulation.gameData.result,\n        pgn: simulation.gameData.pgn,\n        moves: simulation.gameData.moves,\n        board: coloredBoard as unknown as Json,\n        totalMoves: simulation.totalMoves,\n        visualizationState: {\n          paletteId: selectedPalette.id,\n          paletteName: selectedPalette.name,\n          isOfficialPalette: true,\n          darkMode: false,\n          currentMove: Infinity,\n          isExemplar: isExemplar,\n          exemplarNumber: isExemplar ? index + 1 : undefined,\n          gameHash: gameHash,\n        } as unknown as Json,\n      };\n      \n      // Save to database\n      const { data: vizData, error: dbError } = await supabase\n        .from('saved_visualizations')\n        .insert({\n          user_id: user!.id,\n          title,\n          pgn: game.pgn,\n          game_data: gameDataJson,\n          image_path: urlData.publicUrl,\n        })\n        .select()\n        .single();\n      \n      if (dbError) throw dbError;\n      \n      // Create marketplace listing with calculated price\n      const priceCents = calculatePrice(isExemplar, index);\n      const { data: listingData, error: listingError } = await createListing(vizData.id, priceCents);\n      \n      if (listingError) throw listingError;\n      \n      // Create vision score with fungible initial values\n      const scores = calculateInitialScores(isExemplar, index);\n      \n      // Record interactions to build the score\n      for (let v = 0; v < scores.viewCount; v++) {\n        await supabase.rpc('record_vision_interaction', {\n          p_visualization_id: vizData.id,\n          p_user_id: user!.id,\n          p_interaction_type: 'view',\n        });\n        // Small delay between interactions\n        await new Promise(resolve => setTimeout(resolve, 50));\n      }\n      \n      // Detect opening for display\n      const opening = detectOpeningFromPgn(game.pgn);\n      \n      // Determine tier: uses official game (famousGames) + official palette = Premium\n      // Since we're using famousGames and official palettes, all seeded visions are Premium\n      const tier: VisionTier = useOfficialPalette ? 'premium' : 'genesis';\n      \n      return {\n        title,\n        success: true,\n        visualizationId: vizData.id,\n        listingId: listingData?.id,\n        isExemplar,\n        paletteId: selectedPalette.id,\n        paletteName: selectedPalette.name,\n        gameHash: gameHash,\n        tier,\n        openingName: opening?.fullName,\n      };\n    } catch (error) {\n      console.error('Failed to generate vision:', error);\n      return {\n        title,\n        success: false,\n        error: (error as Error).message,\n        isExemplar,\n      };\n    }\n  }, [user]);\n\n  const handleSeed = async () => {\n    if (!user) {\n      toast.error('You must be logged in as the CEO account');\n      return;\n    }\n    \n    setIsSeeding(true);\n    setResults([]);\n    setProgress(0);\n    \n    const allResults: SeedResult[] = [];\n    const gamesToUse = famousGames.slice(0, Math.min(totalCount, famousGames.length));\n    \n    // Build vision list: first half Exemplars, second half creative\n    const expandedGames: Array<{ game: typeof famousGames[0]; title: string; isExemplar: boolean }> = [];\n    \n    for (let i = 0; i < totalCount; i++) {\n      const gameIndex = i % gamesToUse.length;\n      const isExemplar = i < 25; // First 25 are Exemplars\n      const title = ALL_TITLES[i] || `Vision ${i + 1}`;\n      \n      expandedGames.push({\n        game: gamesToUse[gameIndex],\n        title,\n        isExemplar,\n      });\n    }\n    \n    for (let i = 0; i < expandedGames.length; i++) {\n      const { game, title, isExemplar } = expandedGames[i];\n      const label = isExemplar ? 'ðŸ†' : 'ðŸŽ¨';\n      setCurrentItem(`${label} ${title} (${i + 1}/${expandedGames.length})`);\n      \n      const result = await generateVisualization(game, title, i, isExemplar, useOfficialPalettes);\n      allResults.push(result);\n      setResults([...allResults]);\n      setProgress(((i + 1) / expandedGames.length) * 100);\n      \n      // Small delay to prevent rate limiting\n      await new Promise(resolve => setTimeout(resolve, 300));\n    }\n    \n    setIsSeeding(false);\n    \n    const successCount = allResults.filter(r => r.success).length;\n    const failCount = allResults.filter(r => !r.success).length;\n    const exemplarCount = allResults.filter(r => r.success && r.isExemplar).length;\n    \n    if (successCount > 0) {\n      toast.success(`Created ${successCount} visions`, {\n        description: `${exemplarCount} Exemplars, ${successCount - exemplarCount} Creative${failCount > 0 ? ` (${failCount} failed)` : ''}`,\n      });\n    } else {\n      toast.error('Failed to create any visions');\n    }\n  };\n\n  // Delete admin's test visions (only those without natural value accrual)\n  const handleDeleteTestVisions = async () => {\n    if (!user) return;\n    \n    const confirmed = window.confirm(\n      'This will delete all YOUR visions that have NOT earned royalties from other users\\' print orders.\\n\\n' +\n      'Visions with natural value accrual will be preserved.\\n\\n' +\n      'Are you sure?'\n    );\n    \n    if (!confirmed) return;\n    \n    setIsDeleting(true);\n    setDeleteStats(null);\n    \n    try {\n      // Get all visualizations owned by this admin\n      const { data: myVisions, error: fetchError } = await supabase\n        .from('saved_visualizations')\n        .select('id')\n        .eq('user_id', user.id);\n      \n      if (fetchError) throw fetchError;\n      \n      if (!myVisions || myVisions.length === 0) {\n        toast.info('No visions to delete');\n        setIsDeleting(false);\n        return;\n      }\n      \n      const visionIds = myVisions.map(v => v.id);\n      \n      // Get vision scores to check for natural value (royalties from others)\n      const { data: scores, error: scoresError } = await supabase\n        .from('vision_scores')\n        .select('visualization_id, royalty_cents_earned, royalty_orders_count')\n        .in('visualization_id', visionIds);\n      \n      if (scoresError) throw scoresError;\n      \n      // Identify visions with natural value (royalties earned from other users' orders)\n      const visionsWithValue = new Set(\n        (scores || [])\n          .filter(s => s.royalty_cents_earned > 0 || s.royalty_orders_count > 0)\n          .map(s => s.visualization_id)\n      );\n      \n      // Visions to delete (no natural value accrual)\n      const visionsToDelete = visionIds.filter(id => !visionsWithValue.has(id));\n      const visionsToPreserve = visionIds.filter(id => visionsWithValue.has(id));\n      \n      if (visionsToDelete.length === 0) {\n        toast.info('All your visions have accrued natural value - none deleted');\n        setDeleteStats({ deleted: 0, preserved: visionsToPreserve.length });\n        setIsDeleting(false);\n        return;\n      }\n      \n      // Delete related records first (in order of dependencies)\n      // 1. Delete listings\n      await supabase\n        .from('visualization_listings')\n        .delete()\n        .in('visualization_id', visionsToDelete);\n      \n      // 2. Delete vision scores\n      await supabase\n        .from('vision_scores')\n        .delete()\n        .in('visualization_id', visionsToDelete);\n      \n      // 3. Delete vision interactions\n      await supabase\n        .from('vision_interactions')\n        .delete()\n        .in('visualization_id', visionsToDelete);\n      \n      // 4. Delete visualization transfers\n      await supabase\n        .from('visualization_transfers')\n        .delete()\n        .in('visualization_id', visionsToDelete);\n      \n      // 5. Finally delete the visualizations themselves\n      const { error: deleteError } = await supabase\n        .from('saved_visualizations')\n        .delete()\n        .in('id', visionsToDelete);\n      \n      if (deleteError) throw deleteError;\n      \n      // Also delete stored images from storage\n      for (const viz of myVisions.filter(v => visionsToDelete.includes(v.id))) {\n        // Extract filename from image path if possible\n        // Images are stored as: {user_id}/{timestamp}-{title}.png\n        await supabase.storage\n          .from('visualizations')\n          .remove([`${user.id}/`]); // This will fail silently if path doesn't exist\n      }\n      \n      setDeleteStats({ deleted: visionsToDelete.length, preserved: visionsToPreserve.length });\n      toast.success(`Deleted ${visionsToDelete.length} test visions`, {\n        description: visionsToPreserve.length > 0 \n          ? `${visionsToPreserve.length} visions with natural value preserved`\n          : undefined\n      });\n      \n    } catch (error) {\n      console.error('Failed to delete test visions:', error);\n      toast.error('Failed to delete visions', {\n        description: (error as Error).message\n      });\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const successCount = results.filter(r => r.success).length;\n  const failCount = results.filter(r => !r.success).length;\n  const exemplarSuccessCount = results.filter(r => r.success && r.isExemplar).length;\n\n  // Loading state\n  if (authLoading || isAdmin === null) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  // Not authorized\n  if (!user || !isAdmin) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-8\">\n        <Card className=\"max-w-md\">\n          <CardContent className=\"pt-6 text-center\">\n            <XCircle className=\"h-12 w-12 mx-auto text-destructive mb-4\" />\n            <h2 className=\"text-xl font-bold mb-2\">Access Denied</h2>\n            <p className=\"text-muted-foreground mb-4\">\n              You need admin privileges to access this page.\n            </p>\n            <Button onClick={() => navigate('/')}>Go Home</Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background p-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <Button\n          variant=\"ghost\"\n          onClick={() => navigate('/marketplace')}\n          className=\"mb-6\"\n        >\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Return to Marketplace\n        </Button>\n        \n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-3\">\n              <Package className=\"h-6 w-6 text-primary\" />\n              Seed Marketplace with Visions\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div className=\"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30\">\n              <div className=\"flex items-start gap-3\">\n                <AlertTriangle className=\"h-5 w-5 text-amber-500 mt-0.5\" />\n                <div>\n                  <p className=\"font-medium text-amber-600\">CEO Only</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Generates {totalCount} visions: {Math.min(25, totalCount)} Exemplar editions (numbered testers from our humble beginnings) \n                    + {Math.max(0, totalCount - 25)} creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99.\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center justify-between gap-4\">\n              <div className=\"flex items-center gap-4\">\n                <label className=\"text-sm text-muted-foreground\">Number of visions:</label>\n                <select\n                  value={totalCount}\n                  onChange={(e) => setTotalCount(Number(e.target.value))}\n                  disabled={isSeeding}\n                  className=\"bg-muted border border-border rounded px-3 py-2\"\n                >\n                  <option value={5}>5 (test)</option>\n                  <option value={10}>10</option>\n                  <option value={25}>25</option>\n                  <option value={50}>50</option>\n                </select>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex items-center gap-2\">\n                  <Switch\n                    id=\"use-official-palettes\"\n                    checked={useOfficialPalettes}\n                    onCheckedChange={setUseOfficialPalettes}\n                    disabled={isSeeding}\n                  />\n                  <Label htmlFor=\"use-official-palettes\" className=\"flex items-center gap-2\">\n                    <Palette className=\"h-4 w-4 text-primary\" />\n                    <span className=\"text-sm\">Official Palettes</span>\n                  </Label>\n                </div>\n                {useOfficialPalettes && (\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {OFFICIAL_PALETTES.length} palettes\n                  </Badge>\n                )}\n              </div>\n            </div>\n            \n            <Button\n              onClick={handleSeed}\n              disabled={isSeeding || !user}\n              className=\"w-full\"\n              size=\"lg\"\n            >\n              {isSeeding ? (\n                <>\n                  <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\n                  Generating...\n                </>\n              ) : (\n                <>\n                  <Play className=\"h-5 w-5 mr-2\" />\n                  Start Seeding\n                </>\n              )}\n            </Button>\n\n            {/* Delete Test Visions Section */}\n            <div className=\"border-t border-border pt-6 mt-6\">\n              <div className=\"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4\">\n                <div className=\"flex items-start gap-3\">\n                  <Trash2 className=\"h-5 w-5 text-destructive mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-destructive\">Delete My Test Visions</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Deletes only YOUR visions that have NOT earned royalties from other users' print orders. \n                      Visions with natural value accrual are preserved. Safe for testing cleanup.\n                    </p>\n                  </div>\n                </div>\n              </div>\n              \n              <Button\n                onClick={handleDeleteTestVisions}\n                disabled={isDeleting || isSeeding || !user}\n                variant=\"destructive\"\n                className=\"w-full\"\n                size=\"lg\"\n              >\n                {isDeleting ? (\n                  <>\n                    <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\n                    Deleting Test Visions...\n                  </>\n                ) : (\n                  <>\n                    <Trash2 className=\"h-5 w-5 mr-2\" />\n                    Delete My Test Visions\n                  </>\n                )}\n              </Button>\n              \n              {deleteStats && (\n                <div className=\"mt-4 p-3 rounded-lg bg-muted text-sm\">\n                  <div className=\"flex items-center gap-4\">\n                    <span className=\"text-destructive\">ðŸ—‘ {deleteStats.deleted} deleted</span>\n                    {deleteStats.preserved > 0 && (\n                      <span className=\"text-green-500\">âœ“ {deleteStats.preserved} preserved (has value)</span>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            {isSeeding && (\n              <div className=\"space-y-2\">\n                <Progress value={progress} className=\"h-2\" />\n                <p className=\"text-sm text-muted-foreground text-center\">\n                  {currentItem}\n                </p>\n              </div>\n            )}\n            \n            {results.length > 0 && (\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center gap-4 text-sm flex-wrap\">\n                  <span className=\"flex items-center gap-1 text-green-500\">\n                    <CheckCircle className=\"h-4 w-4\" />\n                    {successCount} successful\n                  </span>\n                  <span className=\"flex items-center gap-1 text-purple-500\">\n                    <Gem className=\"h-4 w-4\" />\n                    {results.filter(r => r.success && r.tier === 'premium').length} Premium\n                  </span>\n                  <span className=\"flex items-center gap-1 text-blue-500\">\n                    <Sparkles className=\"h-4 w-4\" />\n                    {results.filter(r => r.success && r.tier === 'genesis').length} Genesis\n                  </span>\n                  {failCount > 0 && (\n                    <span className=\"flex items-center gap-1 text-red-500\">\n                      <XCircle className=\"h-4 w-4\" />\n                      {failCount} failed\n                    </span>\n                  )}\n                </div>\n                \n                <div className=\"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2\">\n                  {results.map((result, i) => (\n                    <motion.div\n                      key={i}\n                      initial={{ opacity: 0, x: -10 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      className={`text-sm p-2 rounded flex items-center justify-between gap-2 ${\n                        result.success \n                          ? result.tier === 'premium'\n                            ? 'bg-purple-500/10 border border-purple-500/20' \n                            : 'bg-blue-500/10 border border-blue-500/20'\n                          : 'bg-red-500/10 text-red-600'\n                      }`}\n                    >\n                      <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                        {result.success ? (\n                          result.tier === 'premium' ? (\n                            <Gem className=\"h-4 w-4 text-purple-500 flex-shrink-0\" />\n                          ) : (\n                            <Sparkles className=\"h-4 w-4 text-blue-500 flex-shrink-0\" />\n                          )\n                        ) : (\n                          <XCircle className=\"h-4 w-4 text-red-500 flex-shrink-0\" />\n                        )}\n                        <span className=\"truncate\">{result.title}</span>\n                        {result.openingName && (\n                          <Badge variant=\"secondary\" className=\"text-[9px] hidden sm:inline-flex\">\n                            {result.openingName}\n                          </Badge>\n                        )}\n                        {result.error && (\n                          <span className=\"text-xs opacity-70\">({result.error})</span>\n                        )}\n                      </div>\n                      {result.success && (\n                        <div className=\"flex items-center gap-2 flex-shrink-0\">\n                          <Badge \n                            variant=\"outline\" \n                            className={`text-[10px] ${result.tier === 'premium' ? 'border-purple-500/50' : 'border-blue-500/50'}`}\n                          >\n                            <Palette className=\"h-2.5 w-2.5 mr-1\" />\n                            {result.paletteName}\n                          </Badge>\n                          {result.gameHash && (\n                            <a \n                              href={`/g/${result.gameHash}?p=${result.paletteId}`}\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                              className=\"text-[10px] text-primary hover:underline\"\n                            >\n                              View â†’\n                            </a>\n                          )}\n                        </div>\n                      )}\n                    </motion.div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminSeedMarketplace;\n";export{e as default};
