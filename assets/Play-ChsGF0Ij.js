import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as q,bF as L,bG as A,b6 as S,ae as P,bH as K,ah as H,bI as I,B as T,bJ as _,bK as G,bL as E,bM as U,bN as W,bO as O,bP as Y,bQ as X,bR as V,bS as F,bT as R,bU as J,bV as Z,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as qe,c8 as Le,aM as Ae,c9 as Se,H as Pe,P as Ke,ca as He,b3 as Ie,bs as Te,be as _e,cb as Ge,aP as Ee,cc as Ue,d as We,b2 as Oe,a9 as Ye,cd as Xe,ce as Ve,cf as Fe,al as Re,au as Je}from"./index-D6g_YXgr.js";import{L as Ze}from"./LiveColorLegend-DlFWrGAY.js";import{T as Qe}from"./trending-down-DOlw9QR1.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CPuZMzkP.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=ht,t=ut();for(;;)try{if(585435===parseInt(e(195))/1*(parseInt(e(127))/2)+-parseInt(e(125))/3+parseInt(e(174))/4*(parseInt(e(134))/5)+parseInt(e(185))/6+parseInt(e(154))/7*(-parseInt(e(175))/8)+-parseInt(e(158))/9*(-parseInt(e(190))/10)+-parseInt(e(169))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){const e={myKsu:function(e,t){return e===t}},t=e;let n=!0;return function(e,s){const r=ht,a={tTvmb:function(e,n){return t[ht(115)](e,n)},ajHcf:r(120)},i=n?function(){const t=r;if(a[t(163)](a[t(131)],a[t(131)])){if(s){const n=s[t(159)](e,arguments);return s=null,n}}else if(_0x3ab46f){const e=_0x54a05e.apply(_0x432513,arguments);return _0x537201=null,e}}:function(){};return n=!1,i}}()(void 0,function(){const e=ht,t={};t.sZWqv=e(153)+"+$";const n=t;return dt[e(156)]()[e(119)](n.sZWqv)[e(156)]()[e(191)+"r"](dt)[e(119)](e(153)+"+$")});function ut(){const e=["uMvWzxrPDgLVBG","ig1HDgvYAwfSlG","ywPiy2y","CMvWzxrPDgLVBG","Aw5ZDwzMAwnPzq","mJaZnu9Ksxf0yq","DMuGCNvSzs4","AxntDgfSzw1HDa","C2HVCNrnzxnZyq","AxniBMS","wgLMB2y","C3rHBgvTyxrL","ywziqu0","AxnuAhjLzwzVBa","zMvU","x3j1Bgu","C3vMzMLJAwvUDa","CM4GDgHPCYiPka","x19WCM90B19F","BNqGtwf0zxjPyq","zsbMAwz0Es1TBW","A1P0vuW","yMLUza","vez2ww4","kcGOlISPkYKRkq","mZm5oti2m3bivgT6CG","DfPhvhi","Dg9tDhjPBMC","AwvUDe1HDgvYAq","odKZota3ounvEurowa","yxbWBhK","tfrmquS","t1riC00","wejjqMC","Dfr2Bwi","tNDvAem","Cw5vu0y","BgfIBguU","vfnbDuK","z2zXyvu","nduZote2murbv1L6uW","CMvHC29U","ChjVDg90ExbL","AxnjBNn1zMzPyW","C3bSAxq","ntm1nKXvCMTota","oe5AwLLKvq","rhjHDYbIEsbPBG","yLjur2i","DMTRDvK","Bg9N","y29UC29Szq","DgHYzwvMB2XKxW","DhjHy2u","CMvLzM9SzcbYzq","BgvUz3rO","mZm2nZaXnfv5Cuvgrq","y3rVCIGICMv0Dq","BwvZC2fNzq","Cgv0AxrPB24U","zxjYB3i","mtbwzfPNA2i","y29UC3rYDwn0BW","ie5VigXLz2fSia","Deftq1i","CKnhDMq","mtrdrxjjANy","u3rHBgvTyxrLiq","s0fIEfK","zMLMDhLFBw92zq","twDiwxi","rhjHDYbIEsb0Aa","ntaTtw92zsbsDq","BxLlC3u","DwLABxO","Dw5RBM93BG","zxzLvNy","C2vHCMnO","yvb5Ag4","BMn0Aw9UkcKG","r2fTzsbKCMf3BG","rhjHDW","E30Uy29UC3rYDq","mJa1otuXmMXKvfLfAa","sw5ZDwzMAwnPzq","mtaXmtHxEuDfDLK","vgHYzwvMB2XKia"];return(ut=function(){return e})()}dt();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ht(159)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function xt(e){const t=ht,n={};n[t(141)]=t(178),n[t(118)]=t(140),n.OTHsM=t(109)+t(192)+"moves avai"+t(166),n.eLpEp=t(181)+t(132),n[t(116)]=t(128)+t(129),n[t(110)]=t(133)+"nt_material",n.TSAuI=t(176)+t(145)+t(130),n[t(139)]=t(126)+t(148)+"l",n[t(152)]=t(113)+t(149)+t(135),n[t(193)]=t(117),n[t(155)]=t(122)+"!",n[t(112)]=t(123);const s=n;if(e[t(136)+"e"]()){if(t(168)!==s[t(141)]){const e={};return e[t(170)]=s[t(118)],e[t(187)]=s[t(161)],e[t(137)+"ge"]=t(109),e}_0x54c39a=_0x514723}if(e[t(142)+"dRepetition"]()){const e={};return e.reason=s.eLpEp,e[t(187)]=t(113)+t(183)+t(188),e.shortMessage=s[t(116)],e}if(e[t(172)+t(157)+"al"]()){const e={};return e[t(170)]=s.KAbxY,e.message=s[t(167)],e[t(137)+"ge"]=s[t(139)],e}const r=e[t(143)]();if(parseInt(r[t(173)](" ")[4],10)>=100){const e={};return e[t(170)]=t(111)+t(144),e.message=s[t(152)],e[t(137)+"ge"]=t(114)+"le",e}const a={};return a[t(170)]=s.tASCR,a[t(187)]=s[t(155)],a.shortMessage=s.MgHYr,a}function ht(e,t){e-=109;const n=ut();let s=n[e];if(void 0===ht.Xxojmr){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ht.uaTooL=r,ht.euEGcR={},ht.Xxojmr=!0}const a=e+n[0],i=ht.euEGcR[a];if(i)s=i;else{const e=function(e){this.NQFCbc=e,this.cKmXwt=[1,0,0],this.eOEntO=function(){return"newState"},this.WNCdCu="\\w+ *\\(\\) *{\\w+ *",this.fkgYBi="['|\"].+['|\"];? *}"};e.prototype.XUiHVY=function(){const e=new RegExp(this.WNCdCu+this.fkgYBi).test(this.eOEntO.toString())?--this.cKmXwt[1]:--this.cKmXwt[0];return this.rqfuoN(e)},e.prototype.rqfuoN=function(e){return Boolean(~e)?this.peDYKL(this.NQFCbc):e},e.prototype.peDYKL=function(e){for(let t=0,n=this.cKmXwt.length;t<n;t++)this.cKmXwt.push(Math.round(Math.random())),n=this.cKmXwt.length;return e(this.cKmXwt[0])},new e(ht).XUiHVY(),s=ht.uaTooL(s),ht.euEGcR[a]=s}return s}function pt(e){const t=ht;return{isHnk:function(e,t){return e(t)}}[t(138)](xt,e)[t(187)]}function ft(){const e=["y2XVC2u","ywfPywW","AwXSzwDHBa","zeXgsuG","rLrSAu0","C3rVCa","BfjHBxbuB1zHBa","DwvbDfrPBwu","rgf0yq","z2fPBG","rhvguKG","ywj6Cwq","zhjHDW","q29esei","vejPBuy","yNvlAfm","y3jLyxrLqNvMzG","Bw92zq","E30Uy29UC3rYDq","A0TIAha","BLrnvvy","mtu0zMnSuuTh","qu5pvKe","zgvMzwf0","qvbjig5VDcbZDq","y2fWDhvYzq","yNvMzMvY","r1Dqr08","zuHQzNG","Aw5MBW","qMf5qK0","y2HLy2TTyxrL","kcGOlISPkYKRkq","DMfSDwu","y2fZDgXL","uMHNuwC","D2vIA2L0qxvKAq","y3jLyxrLqMLXDq","mtaYmJnoveziD28","zxHWB25LBNrPyq","tM1VwKu","DhjPyw5NBgu","vMDkCNy","C2LUzq","CM4GDgHPCYiPka","Bg93CgfZCW","te9ZsgO","ugTvyLm","B3PcyNu","x19WCM90B19F","D2fYBG","zxjYB3i","BgLUzwfYuMfTCa","BKHstNC","y29UC3rYDwn0BW","mJy5nZbUqNnxveG","tMz5u1K","rhzesKi","AK50sxy","C2v0vMfSDwvbDa","DKLyEKK","zgvZDgLUyxrPBW","ugHPy28","v1rLtxK","wvfysvK","y29UDgv4Da","CMv0DxjUicHMDq","y3rVCIGICMv0Dq","y3jLyxrLt3nJAq","yMLUza","mJaYnJuZyKTYEuj6","Bg9N","ChfmENe","ChbVCNrLza","ntm3ndiWvvzKqwXY","z2fTzuvUza","zxHJzxb0Aw9U","D3fXs3i","qwHereK","z2fPBK5Vzgu","DLzkwhi","uezNwMW","mJy2mtG0mevKzev4tq","zNjLCxvLBMn5","y3jLyxrLr2fPBG","swzNyKq","DMLJDg9YEq","nNztCgjUta","ChjVDg90ExbL","CMfUzg9T","vw1Xsuq","mtGZnZmWz2fjruDp","y29UC29Szq","y29UBMvJDa","y3vYCMvUDfrPBq","BMn0Aw9UkcKG","B0nVBNrLEhq","odb5tM1Zq0e","z09nCwG","Dg9tDhjPBMC","u3rVz0W","BNffuK8","zxjtB3vYy2u","qxvKAw9dB250zq","C2f3Dg9VDgG","vKzPEgO","C2vHCMnO","ntrIANvyzNu","CgXHEvnVDw5K","DhjHy2u","z2v0q2HHBM5LBa","C2fTCgXLuMf0zq","y3vYCMvUDa","BgvUz3rO","mJy2mJuYsejIr21t","C3f1yxjL","ugDkAKu","vgLTzq","Aw5PDef1zgLV","DhLWzq","DgfIBgu","yxbWBhK","mtyWBwXxEwXq","vg9wywX1zuf0va","C3rHCNq","Aw1L","D0fcwKC"];return(ft=function(){return e})()}mt(void 0,function(){const e=ht,t={JZzEp:function(e,t){return e+t}};t[e(165)]=function(e,t){return e+t},t[e(162)]="return (fu"+e(121),t.bRTGb=e(124)+e(186)+e(146)+" )",t.rCGvd=e(189),t[e(160)]=function(e,t){return e<t},t[e(164)]=e(150);const n=t;let s;try{s=Function(n.JZzEp(n[e(165)](n.XBIBg,n[e(177)]),");"))()}catch(i){s=window}const r=s.console=s[e(180)]||{},a=[e(179),"warn","info",n[e(194)],"exception","table",e(182)];for(let o=0;n[e(160)](o,a[e(184)]);o++)if("kZtUL"===n[e(164)]){const t=mt[e(191)+"r"].prototype[e(151)](mt),n=a[o],s=r[n]||t;t.__proto__=mt[e(151)](mt),t.toString=s.toString.bind(s),r[n]=t}else{const t=_0x28adf3[e(191)+"r"][e(171)].bind(_0x1954eb),n=_0x5b3598[_0x36c214],s=_0x6a7b2d[n]||t;t[e(147)]=_0xa8eeb0.bind(_0x5c84df),t[e(156)]=s[e(156)].bind(s),_0xa9e624[n]=t}})(),function(){const e=yt,t=ft();for(;;)try{if(519189===-parseInt(e(227))/1*(-parseInt(e(296))/2)+parseInt(e(263))/3+parseInt(e(311))/4*(parseInt(e(244))/5)+-parseInt(e(276))/6*(-parseInt(e(303))/7)+-parseInt(e(286))/8*(parseInt(e(259))/9)+-parseInt(e(280))/10*(-parseInt(e(210))/11)+-parseInt(e(271))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const gt=function(){const e={jNtIv:function(e,t){return e-t}};e[yt(327)]=function(e,t){return e===t};const t=e;let n=!0;return function(e,s){const r={AhDDI:function(e,t){return e+t},BLReV:function(e,n){return t[yt(247)](e,n)},aSJfI:function(e,n){return t[yt(327)](e,n)}},a=n?function(){const t=yt,n={UmqID:function(e,t){return e||t},vVJXr:function(e,t){return r[yt(267)](e,t)},KCBHx:function(e,t){return r.BLReV(e,t)},dLFIH:function(e,t){return r[yt(267)](e,t)},FTliM:function(e,t){return e+t}};if(s){if(r.aSJfI(t(242),t(242))){const n=s[t(310)](e,arguments);return s=null,n}{if(!_0x54c772)return;_0x447a48();const{context:e,gainNode:s}=_0x1e2fc6.current;if(n[t(279)](!e,!s))return;const r=e[t(257)+"llator"](),a=e[t(273)]();r.type=_0xea0680,r.frequency["setValueAt"+t(306)](_0x4ed656,e[t(283)+"e"]),_0x502787&&r[t(272)][t(228)+t(322)+t(323)](_0x5e9fb1,n.vVJXr(e.currentTime,_0x4a1816)),a[t(325)]["setValueAt"+t(306)](0,e.currentTime),a[t(325)][t(241)+t(312)+t(314)](1,n[t(269)](e[t(283)+"e"],_0x58e5fc)),a[t(325)][t(228)+t(322)+t(323)](.01,n.KCBHx(e[t(283)+"e"]+_0x2813ce,_0x585d86)),a.gain["linearRamp"+t(312)+t(314)](0,n[t(319)](e[t(283)+"e"],_0x31c6ba)),r[t(282)](a),a[t(282)](s),r.start(e.currentTime),r.stop(n[t(320)](e[t(283)+"e"],_0x3c7465))}}}:function(){};return n=!1,a}}()(void 0,function(){const e=yt,t={};t.NfySY=e(221)+"+$";const n=t;return gt[e(288)]()[e(295)](n[e(245)])[e(288)]()[e(243)+"r"](gt).search(e(221)+"+$")});gt();const vt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[yt(310)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();vt(void 0,function(){const e=yt,t={MGTOt:"Web Audio API not su"+e(262),xTAlh:e(237),aaial:e(207)+e(256)+e(233)+" )",mvAgf:function(e){return e()},DuFRH:"warn",pqLzq:e(265),PVKVP:e(309),TBimF:e(298)},n=t.mvAgf(function(){const n=e;if(t.xTAlh!==n(224)){let e;try{e=Function(n(255)+n(284)+t[n(317)]+");")()}catch(s){e=window}return e}_0x29341b[n(239)](t.MGTOt)}),s=n[e(281)]=n[e(281)]||{},r=[e(260),t[e(326)],e(218),e(240),t[e(261)],t.PVKVP,t[e(330)]];for(let a=0;a<r[e(302)];a++){const t=vt.constructor[e(277)].bind(vt),n=r[a],i=s[n]||t;t[e(238)]=vt[e(258)](vt),t.toString=i[e(288)][e(258)](i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=yt,r={vIXzI:"Web Audio "+s(213)+s(262),VgJrv:function(e,t){return e+t},LTmFp:function(e,t){return e+t},nqERO:function(e,t){return e-t},qdWWA:function(e,t){return e+t},QxTSb:function(e,t){return e||t},DvDJB:function(e,t){return e<t},StogL:function(e,t){return e*t},XiPFT:function(e,t){return e+t},WTeMy:s(206),NmoZE:s(214),PkUbS:function(e,t,n){return e(t,n)},wqqKr:function(e,t,n,s,r,a){return e(t,n,s,r,a)},nTMUV:s(232),Phico:function(e,t,n,s,r,a){return e(t,n,s,r,a)},PFgZl:s(230),GWPGO:function(e,t,n){return e(t,n)},wABZG:function(e,t,n){return e(t,n)},kKbhp:"gameStart",buKhS:s(275),Kxoxe:function(e,t,n,s,r,a){return e(t,n,s,r,a)},LOsHj:function(e,t,n){return e(t,n)},VFixj:s(212),CoDHB:function(e,t,n,s,r,a){return e(t,n,s,r,a)},gOMqh:function(e,t,n){return e(t,n)},YQXIY:s(328),PgJjE:function(e,t,n,s,r,a){return e(t,n,s,r,a)},uldHV:s(304),eHjfx:s(211),BayBM:function(e,t,n){return e(t,n)}},a={};a[s(254)]=null,a.gainNode=null;const i=t.useRef(a),o=r[s(236)](t.useCallback,()=>{const e=s;if(!i[e(301)].context)try{const t=new(window[e(292)+"xt"]||window[e(225)+e(285)]),s=t[e(273)]();s[e(282)](t[e(250)+"n"]),s[e(325)].value=n;const r={};r[e(254)]=t,r.gainNode=s,i[e(301)]=r}catch(t){}},[n]);r[s(216)](t.useEffect,()=>{const e=s;i.current[e(268)]&&(i.current[e(268)][e(325)][e(222)]=n)},[n]);const c=t.useCallback((t,n,a=s(232),c=.01,l=.1,d)=>{const u=s;if(!e)return;o();const{context:m,gainNode:x}=i.current;if(!m||!x)return;const h=m.createOscillator(),p=m[u(273)]();h[u(308)]=a,h[u(272)]["setValueAt"+u(306)](t,m.currentTime),d&&h[u(272)].exponentialRampToValueAtTime(d,r[u(231)](m.currentTime,n)),p[u(325)][u(248)+u(306)](0,m.currentTime),p[u(325)]["linearRampToValueAtT"+u(314)](1,r.LTmFp(m.currentTime,c)),p[u(325)][u(228)+u(322)+u(323)](.01,r.nqERO(m[u(283)+"e"]+n,l)),p.gain["linearRamp"+u(312)+u(314)](0,r.qdWWA(m[u(283)+"e"],n)),h[u(282)](p),p[u(282)](x),h[u(313)](m[u(283)+"e"]),h.stop(m[u(283)+"e"]+n)},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(301)];if(r.QxTSb(!c,!l))return;const d=c[a(300)]*t,u=c.createBuffer(1,d,c.sampleRate),m=u[a(299)+a(324)](0);for(let e=0;r[a(246)](e,d);e++)m[e]=r[a(290)](r[a(289)](Math[a(278)](),2),1);const x=c[a(332)+a(291)]();x[a(215)]=u;const h=c[a(226)+"adFilter"]();h[a(308)]=a(234),h[a(272)][a(222)]=n;const p=c[a(273)]();p[a(325)][a(248)+a(306)](.3,c[a(283)+"e"]),p[a(325)][a(228)+"lRampToVal"+a(323)](.01,c[a(283)+"e"]+t),x[a(282)](h),h.connect(p),p[a(282)](l),x[a(313)](c[a(283)+"e"]),x[a(321)](r.XiPFT(c[a(283)+"e"],t))},[e,o]),d=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(252)]:c(800,.08,"sine",.005,.05),c(400,.06,"triangle",.005,.04);break;case r[n(229)]:r[n(236)](l,.12,2e3),c(300,.1,n(304),.005,.08),r[n(266)](c,150,.15,r[n(209)],.01,.1);break;case n(223):r[n(251)](c,600,.06,n(232),.005,.04),setTimeout(()=>c(700,.06,"sine",.005,.04),80);break;case"check":c(880,.15,r[n(270)],.01,.1),r[n(216)](setTimeout,()=>c(1100,.12,n(230),.01,.08),120);break;case n(220):c(880,.2,r[n(209)],.01,.15),r.wABZG(setTimeout,()=>c(660,.2,n(232),.01,.15),150),setTimeout(()=>c(440,.3,n(232),.01,.2),300),setTimeout(()=>c(330,.4,n(232),.01,.3),500);break;case r[n(208)]:c(523,.12,"sine",.01,.08),setTimeout(()=>c(659,.12,n(232),.01,.08),100),setTimeout(()=>c(784,.2,"sine",.01,.15),200);break;case n(264):c(440,.15,r[n(270)],.01,.1),r[n(236)](setTimeout,()=>c(349,.25,n(230),.01,.2),150);break;case r[n(331)]:r.Kxoxe(c,523,.1,r[n(209)],.01,.08),r[n(315)](setTimeout,()=>c(659,.1,n(232),.01,.08),100),r.PkUbS(setTimeout,()=>c(784,.1,n(232),.01,.08),200),r[n(235)](setTimeout,()=>c(1047,.3,n(232),.01,.25),300);break;case r[n(294)]:r[n(329)](c,392,.2,r[n(209)],.02,.15),r[n(315)](setTimeout,()=>c(349,.2,n(232),.02,.15),200),r[n(287)](setTimeout,()=>c(330,.3,n(232),.02,.25),400),setTimeout(()=>c(262,.4,n(232),.02,.35),650);break;case r[n(253)]:r[n(305)](c,440,.15,n(232),.01,.1),setTimeout(()=>c(440,.15,n(232),.01,.1),180),setTimeout(()=>c(523,.2,n(232),.01,.15),360);break;case n(318):r[n(266)](c,200,.1,r.uldHV,.005,.08),r.Phico(c,150,.08,n(293),.005,.06)}},[e,c,l]);r[s(219)](t.useEffect,()=>{const e=s,t={IfgbD:function(e,t,n){return e(t,n)}};if("ANOVA"!==r[e(217)]){const n=t[e(274)](_0x153370,_0x75df14,_0x2c7b44);return _0x2f5186=n,_0x1536a1}return()=>{const t=e;i[t(301)].context&&i[t(301)][t(254)][t(316)]()}},[]);const u={};return u[s(297)]=d,u[s(307)]=o,u};function yt(e,t){e-=206;const n=ft();let s=n[e];if(void 0===yt.gVSEGG){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};yt.vPYIOd=r,yt.dZCAtA={},yt.gVSEGG=!0}const a=e+n[0],i=yt.dZCAtA[a];if(i)s=i;else{const e=function(e){this.txMthF=e,this.kWizKi=[1,0,0],this.xZyIKH=function(){return"newState"},this.cCcnse="\\w+ *\\(\\) *{\\w+ *",this.aOSHUL="['|\"].+['|\"];? *}"};e.prototype.LlfSpA=function(){const e=new RegExp(this.cCcnse+this.aOSHUL).test(this.xZyIKH.toString())?--this.kWizKi[1]:--this.kWizKi[0];return this.Ujvtnr(e)},e.prototype.Ujvtnr=function(e){return Boolean(~e)?this.DRBBIB(this.txMthF):e},e.prototype.DRBBIB=function(e){for(let t=0,n=this.kWizKi.length;t<n;t++)this.kWizKi.push(Math.round(Math.random())),n=this.kWizKi.length;return e(this.kWizKi[0])},new e(yt).LlfSpA(),s=yt.vPYIOd(s),yt.dZCAtA[a]=s}return s}const wt=jt;function jt(e,t){e-=186;const n=kt();let s=n[e];if(void 0===jt.HNyuAl){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};jt.IpLcWN=r,jt.sNwkqA={},jt.HNyuAl=!0}const a=e+n[0],i=jt.sNwkqA[a];if(i)s=i;else{const e=function(e){this.iNsiiJ=e,this.QbSYSQ=[1,0,0],this.dwQWzp=function(){return"newState"},this.tEADuZ="\\w+ *\\(\\) *{\\w+ *",this.KybDit="['|\"].+['|\"];? *}"};e.prototype.cvCWyX=function(){const e=new RegExp(this.tEADuZ+this.KybDit).test(this.dwQWzp.toString())?--this.QbSYSQ[1]:--this.QbSYSQ[0];return this.RNXJMh(e)},e.prototype.RNXJMh=function(e){return Boolean(~e)?this.EXFObv(this.iNsiiJ):e},e.prototype.EXFObv=function(e){for(let t=0,n=this.QbSYSQ.length;t<n;t++)this.QbSYSQ.push(Math.round(Math.random())),n=this.QbSYSQ.length;return e(this.QbSYSQ[0])},new e(jt).cvCWyX(),s=jt.IpLcWN(s),jt.sNwkqA[a]=s}return s}!function(){const e=jt,t=kt();for(;;)try{if(361990===parseInt(e(209))/1*(parseInt(e(217))/2)+parseInt(e(211))/3+-parseInt(e(202))/4*(parseInt(e(188))/5)+parseInt(e(190))/6+-parseInt(e(216))/7+parseInt(e(199))/8+-parseInt(e(204))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ct=function(){const e=jt,t={};t[e(197)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e,i={lSjyT:function(e,t){return n[jt(197)](e,t)},OYsqv:a(215)},o=s?function(){const e=a;if(i[e(198)](i[e(208)],"gPbJQ"))_0x3658a5=_0x1aa139;else if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return s=!1,o}}()(void 0,function(){const e=jt,t={};t[e(191)]=e(206)+"+$";const n=t;return Ct[e(203)]()[e(192)](n[e(191)])[e(203)]()[e(194)+"r"](Ct)[e(192)](n[e(191)])});Ct();const Nt=function(){const e=jt,t={};t[e(224)]=e(222);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(224)]==n[a(224)]){const e=s?function(){if(r){const e=r[a(223)](t,arguments);return r=null,e}}:function(){};return s=!1,e}if(_0x27482b){const e=_0x1a8b4e.apply(_0x337631,arguments);return _0x5a6d49=null,e}}}();function kt(){const e=["C2vHCMnO","y29UC29Szq","y29UC3rYDwn0BW","E30Uy29UC3rYDq","yMLUza","EvzUChe","BfnQEvq","mZa5mde2oeD6uuvPrq","CMv0DxjUicHMDq","wKTWvgO","ngzJEgz2ra","Dg9tDhjPBMC","nJqWoteXnKT6C0DsrW","EwD3rxC","kcGOlISPkYKRkq","DhjHy2u","t1LZCxy","m2fVqxPuva","zxjYB3i","mtm0ntm2mNbAuNHisW","s1nzBeG","BM1hDMS","BgvUz3rO","z1bIsLe","mtyWmJG3neHhze1iCG","mJu0mdaYy0nmEuPR","vLjWsw0","y3rVCIGICMv0Dq","DgfIBgu","y2HLC3mTC291BG","s0Drr04","yxbWBhK","s3zNv3e","x19WCM90B19F","Bg9N","ChjVDg90ExbL","Aw5MBW","mti1odC4nvDkBfDmrW","BMfTzq","mJaZndC1meL5AKLoAq","sxrvtvK"];return(kt=function(){return e})()}Nt(void 0,function(){const e=jt,t={ZKpTj:function(e,t){return e(t)},KSYlH:e(195)+e(219)+'rn this")( )',nmGvk:e(207),VRpIm:e(205)};let n;try{n=t[e(201)](Function,e(200)+"nction() "+t[e(212)]+");")()}catch(a){n=window}const s=n[e(193)]=n.console||{},r=[e(226),"warn",e(187),e(210),"exception",e(220),t[e(213)]];for(let i=0;i<r[e(214)];i++){if(e(205)!==t[e(218)])return _0xce115[e(203)]()[e(192)](e(206)+"+$")[e(203)]()[e(194)+"r"](_0x53427a).search("(((.+)+)+)+$");{const t=Nt[e(194)+"r"][e(186)][e(196)](Nt),n=r[i],a=s[n]||t;t[e(225)]=Nt.bind(Nt),t.toString=a[e(203)][e(196)](a),s[n]=t}}})();const Mt={};Mt[wt(189)]=wt(221)+"d-settings";const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e.enabled}))}),Mt)),Dt=At;!function(){const e=At,t=Lt();for(;;)try{if(510014===-parseInt(e(694))/1+parseInt(e(455))/2*(-parseInt(e(427))/3)+-parseInt(e(464))/4+-parseInt(e(529))/5+parseInt(e(423))/6+-parseInt(e(537))/7+-parseInt(e(615))/8*(-parseInt(e(507))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=At,t={hKzqb:"(((.+)+)+)+$"},n=t;return Bt[e(612)]()[e(514)](n[e(505)]).toString().constructor(Bt)[e(514)](n[e(505)])});Bt();const qt=function(){const e=At,t={};t[e(584)]=function(e,t){return e===t},t.Dbirg=e(540),t[e(690)]="vzfMm";const n=t;let s=!0;return function(e,t){const r=s?function(){const s=At;if(n.BmvXV(n[s(649)],n[s(690)])){const e=_0x53ad52?function(){if(_0x37622e){const e=_0x31b03c[s(454)](_0x57e75a,arguments);return _0x421a08=null,e}}:function(){};return _0xa4c7ab=!1,e}if(t){const n=t.apply(e,arguments);return t=null,n}}:function(){};return s=!1,r}}();function Lt(){const e=["DgLTzunVBNrYBW","CgDU","ogPrBuvXAW","BMvS","uNngwwW","BIbPBIb0BYbQBW","y29TCgXLDgvK","zYbMB3iGB3bWBW","tw92zsbLCNjVCG","zxfqrhe","Bw92zv91y2K","y3jLyxrLr2fTzq","y2HLy2S","sfHzA2O","AxnmB2fKAw5N","swXrtLi","BMv3uMf0Aw5N","tuTuy2K","Bg9HzcbNyw1L","DgfIBgu","Dg9ju09tDhjPBG","yNvSBgv0xZe","B25LBNqGyxv0BW","twHiv0W","CMvTB3zLq2HHBG","DLncCfq","z2fTzvn0yxj0","AgfSBgvUz2uGyW","wNrduNO","BgvnB3zLCW","BgvUz3rO","vKPRuLi","Aw5JBhvKzxm","Dw50Aw1Lza","y29KztOG","CMfWAwrFmtu","rgjPCMC","tY1p","CgXHEwvYx2LK","q1vJq3y","yMXHy2TFCgfSzq","uMLHr2C","uMf0Aw5NoIa","yMXHy2S","yMXHy2TuAw1LuG","BwfRzu1VDMu","BwXTEhK","CM4GDgHPCYiPka","AwXSzwDHBa","zgvMzwf0","y2fWDhvYzq","tLLKBvG","yMXHy2TqBgf5zq","AwLnEwS","DMLJDg9YEq","q2fUBM90igPVAq","DNDKy1i","DxnLCL9PzcWGzq","yMXHy2TFCgXHEq","rK9zr1e","suDUqMS","vNPHyvi","ugXLyxnLihnPzW","AM9PBKj5q29Kzq","BIb0AgLZihzLCG","BwvZC2fNzq","r2PrEe4","BhPorxm","C2rYuui","wgTuv2u","ChjVzMLSzxm","s3f0uKS","C2vSzwn0","s21dy2W","AgfSBgvUz2vFyW","B3vUza","CKrgzuO","y3D6Ewq","C25pELa","y2HHBMDL","z2fTzvn0yxrL","nda5odKXB1P6Derb","CNbJ","C3vIC3rYAw5N","sw52ywXPzcbVCG","zwqHifDHAxrPBG","wMfOzfm","D2fPDgLUzW","rxDivxi","yMXHy2TFD2LUCW","CfPZrKC","v1H3EMi","tuziA1q","Cg9ZDgDYzxnFyW","Ae1KBfC","Bw92zwrtCxvHCG","zK5XCKq","z2fTzq","qKHUr08","DvDuswi","y2HLC3nFBw92zq","zNDHDLK","zhjHDW","rNv1sLG","ChDstg4","AxndAgvJA21HDa","BxLdB2XVCG","y2HLy2TTyxrL","mZC3nJm1ohDJt09wsa","y2HHBM5LBa","Aw4GysbNyw1L","vwnRrwK","m1vcDfDcrW","D2HPDgvFCgXHEq","CKLK","y29Kzq","Aw5Zzxj0","yMXPDhPFnq","CgvyzKC","rhfAswu","s2PtDgy","t2f3svO","vLj1B0m","z2vUzxjHDgvFyW","D2HPDgu","y3jLyxrLigDHBq","AwTQAfi","r2HXthG","BMvUDc4UlG","B25PCLi","zw1ysxm","A2zrCuC","CMvZDwX0","y2fZDgXL","ve96uwm","ww91ihDVBIe","C3vJy2vZCW","r2fTzsbJCMvHDa","DxbKyxrL","yxbWBhK","mta1odyYnNznqKrWAa","C3vIC2nYAwjL","yMXHy2TFDgLTzq","ChjVBw90Aw9U","AM9PBIbIEsbJBW","x19WCM90B19F","D2LUBMvYx2LK","yMLUza","q3PvC3C","ntK0mJu2swnvBwLh","uffMDeO","uhDuBKi","rKnMuKS","CuDODNa","zxjYB3i","y3jLyxrLzf9HDa","yxDcww4","C2LUz2XL","DxnLCL9Pza","zwf0zsbHigDHBq","AuXiwee","sM9PBMvKigDHBq","y3jLyxrLzef0","EMzkBgm","EvHst3a","AuPvzve","y3rVCIGICMv0Dq","BMv3","sfjZCvC","z2fTzs0","y3vYCMvUDf9Mzq","se1csui","r2fTzsbUB3qGzG","E30Uy29UC3rYDq","tgTTrMu","BK5cr3u","y29UC29Szq","tY1plu8","DgLTzv9JB250CG","q2HHBgXLBMDLia","C2fU","zMLUza","DMvYyM9Zzq","D0rwrhe","we1kEeS","t3jlseC","z2fTzv9Pza","zseGww91igfYzq","wvHJzgq","Bg9N","AeT6Cwi","Axnhyw1Lt3zLCG","mtq1nta1mdDZvNDurxC","sKrUD2y","igv4CgLYzwqGyW","Bw92zv9Zyw4","zNjVBq","D2HPDgvFD2LUCW","x3jLBwfPBMLUzW","C2vHCMnO","zvjcufq","y2HHBgXLBMDLxW","rhfYvwi","A09urwi","zxjFAwq","u1njv3e","vMvHB0K","ihnLBNqGkg9WCa","AMjvrfK","BwDRqNK","wKXtyxi","BwfW","y2HHBgXLBMDLqW","vu5frLi","odC4nZm1DxLVA1jS","tgLqyNq","z21usxK","Ee1Zz1K","CMvZAwDUr2fTzq","Dg9vChbLCKnHCW","Awq9zxeU","AxnnEvr1CM4","mZmWodeWowjruhfquq","igDHBwu","DKDusgS","uxHJww8","Bw92zunVDw50","uwTmv20","C3f1yxjL","C3rHDhvZ","B2rL","CMv0DxjUicHMDq","C3rHCNrLzf9HDa","zwTvAhy","qvvVy2W","D3zPvKm","ChvIBgLJ","rMfPBgvKihrVia","v2jxvwu","ALLXAwe","C1vKzue","ChjVDg90ExbL","Bw92zq","y2HLC3nFz2fTzq","B2zMzxjeCMf3","ywjHBMrVBMvK","CwrpzfO","s3jSDwG","rhLir3m","D1f4zhy","D2HPDgvFDgLTzq","vfbhDfa","Bw92zv9JB3vUDa","AvjmEgS","sKnyyvC","y2LQv1u","AgfUz2vZ","zxHJzxb0Aw9U","zwXVx3jHDgLUzW","qMXHy2SGD2LUCW","D2HPDgvqywXLDa","sgDivhG","zMvU","zePiwLe","z2fTzv9Pzd1LCq","su5trvju","B3jKzxi","yMHMELm","D2HPDgvuAw1LuG","qM12wfy","C2LVBIK","D3fKEhe","Bw92zxm","ihjHDgLUz3m6","tu1RyLK","z2v0qxzHAwXHyG","D2HPDgvqBgf5zq","BIbPBIb0BYbJCG","Aw5MBW","Bwf5yMvtAw5NBa","seTmBMK","qLHvtwO","ywXS","zw1HAw5PBMC","DhvYBG","ww91ihjLC2LNBG","sMn3vfO","vvbeqvrf","A05Rywy","zM9YrwfJAa","yxnJzw5KAw5N","s3fhq3u","EwHHB2W","BMn0Aw9UkcKG","Bw92zxmT","AM9PBIbNyw1L","DhrL","Dg9tDhjPBMC"];return(Lt=function(){return e})()}function At(e,t){e-=417;const n=Lt();let s=n[e];if(void 0===At.nXyQPY){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};At.JufSKO=r,At.tnOqoQ={},At.nXyQPY=!0}const a=e+n[0],i=At.tnOqoQ[a];if(i)s=i;else{const e=function(e){this.oZIHTl=e,this.POSgzK=[1,0,0],this.Sqbxth=function(){return"newState"},this.yRuVSg="\\w+ *\\(\\) *{\\w+ *",this.quOCma="['|\"].+['|\"];? *}"};e.prototype.TerVML=function(){const e=new RegExp(this.yRuVSg+this.quOCma).test(this.Sqbxth.toString())?--this.POSgzK[1]:--this.POSgzK[0];return this.dccoKJ(e)},e.prototype.dccoKJ=function(e){return Boolean(~e)?this.asFdFa(this.oZIHTl):e},e.prototype.asFdFa=function(e){for(let t=0,n=this.POSgzK.length;t<n;t++)this.POSgzK.push(Math.round(Math.random())),n=this.POSgzK.length;return e(this.POSgzK[0])},new e(At).TerVML(),s=At.JufSKO(s),At.tnOqoQ[a]=s}return s}qt(void 0,function(){const e=At,t={ZtCRz:function(e,t){return e(t)},dJHZQ:e(488)+e(481)+e(660)+" )",Krluh:function(e){return e()},kfQqG:e(504),lzNEs:"trace",vSBpT:function(e,t){return e<t}};let n;try{const s=t[e(641)](Function,e(546)+e(608)+t[e(578)]+");");n=t[e(562)](s)}catch(a){n=window}const s=n[e(491)]=n[e(491)]||{},r=[t[e(446)],"warn","info",e(469),e(572),e(632),t[e(680)]];for(let i=0;t[e(638)](i,r[e(643)]);i++){const t=qt.constructor[e(556)].bind(qt),n=r[i],a=s[n]||t;t[e(460)]=qt[e(462)](qt),t.toString=a.toString.bind(a),s[n]=t}})();const St={};St[Dt(634)]=60,St[Dt(432)]=300,St[Dt(648)]=900,St[Dt(646)]=0;const Pt=St,Kt=Gt;!function(){const e=Gt,t=Ut();for(;;)try{if(503898===-parseInt(e(515))/1+-parseInt(e(536))/2*(parseInt(e(526))/3)+-parseInt(e(516))/4+-parseInt(e(500))/5+-parseInt(e(512))/6*(-parseInt(e(540))/7)+parseInt(e(546))/8*(-parseInt(e(521))/9)+parseInt(e(490))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ht=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Gt(496)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Gt;return Ht[e(542)]()[e(507)](e(522)+"+$").toString()[e(509)+"r"](Ht)[e(507)](e(522)+"+$")});Ht();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Gt(496)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();It(void 0,function(){const e=Gt,t={VawGm:function(e,t){return e+t},tPJGj:function(e,t){return e+t}};t[e(538)]=e(527)+"nction() ",t[e(495)]="warn",t[e(532)]=e(528),t[e(494)]="exception",t[e(514)]=function(e,t){return e<t};const n=t,s=function(){const t=e;let s;try{s=Function(n[t(541)](n[t(504)](n[t(538)],t(533)+t(530)+t(492)+" )"),");"))()}catch(r){s=window}return s}(),r=s[e(502)]=s[e(502)]||{},a=[e(508),n[e(495)],e(519),n[e(532)],n[e(494)],e(545),e(501)];for(let i=0;n[e(514)](i,a[e(517)]);i++){const t=It[e(509)+"r"][e(511)].bind(It),n=a[i],s=r[n]||t;t[e(518)]=It[e(498)](It),t.toString=s[e(542)][e(498)](s),r[n]=t}})();const Tt={};Tt[Kt(505)]=10,Tt[Kt(525)]=25,Tt.heavy=50,Tt[Kt(544)]=[10,50,20],Tt[Kt(528)]=[50,30,50,30,50],Tt.selection=5;const _t=Tt;function Gt(e,t){e-=490;const n=Ut();let s=n[e];if(void 0===Gt.uyhAxV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Gt.cuZEIi=r,Gt.nKXXxq={},Gt.uyhAxV=!0}const a=e+n[0],i=Gt.nKXXxq[a];if(i)s=i;else{const e=function(e){this.iKBAVG=e,this.NBdUqo=[1,0,0],this.IDfHfC=function(){return"newState"},this.joIEtI="\\w+ *\\(\\) *{\\w+ *",this.muGFQX="['|\"].+['|\"];? *}"};e.prototype.EnJVSn=function(){const e=new RegExp(this.joIEtI+this.muGFQX).test(this.IDfHfC.toString())?--this.NBdUqo[1]:--this.NBdUqo[0];return this.cTRbRi(e)},e.prototype.cTRbRi=function(e){return Boolean(~e)?this.nqjGcM(this.iKBAVG):e},e.prototype.nqjGcM=function(e){for(let t=0,n=this.NBdUqo.length;t<n;t++)this.NBdUqo.push(Math.round(Math.random())),n=this.NBdUqo.length;return e(this.NBdUqo[0])},new e(Gt).EnJVSn(),s=Gt.cuZEIi(s),Gt.nKXXxq[a]=s}return s}const Et=()=>{const e=Kt,n={EodCl:function(e,t){return e!==t},VbDFk:function(e,t){return e!==t},Vrhwo:e(529),esWtk:"undefined",aMhBd:function(e,t){return e in t},PDWab:e(497),cOJHn:function(e,t,n){return e(t,n)},KNbyj:function(e,t,n){return e(t,n)},GuFrK:function(e,t,n){return e(t,n)},deRIZ:function(e,t,n){return e(t,n)}},s=typeof navigator!==n[e(499)]&&n[e(537)](n[e(493)],navigator),r=n[e(531)](t.useCallback,(t=e(505))=>{const r=e;if(!s)return!1;try{if(!n[r(506)](r(520),"mZeuh")){const e=_t[t];return navigator.vibrate(e)}_0x5707a5=_0x336794}catch(a){return!1}},[s]),a={select:t.useCallback(()=>r(e(510)),[r]),move:t.useCallback(()=>r(e(505)),[r]),capture:n.KNbyj(t.useCallback,()=>r(e(525)),[r]),check:t.useCallback(()=>r(e(543)),[r]),victory:n.GuFrK(t.useCallback,()=>r("success"),[r]),error:n[e(513)](t.useCallback,()=>r(e(528)),[r]),castle:n[e(513)](t.useCallback,()=>{const t=e;if(n[t(534)]("VNoQO",n[t(535)]))return!!s&&navigator[t(497)]([15,40,15]);{const e=_0x4d5b53?function(){if(_0x2abbd7){const e=_0x51962f[t(496)](_0x159eb0,arguments);return _0x40d326=null,e}}:function(){};return _0xc272ed=!1,e}},[s]),gameStart:n[e(491)](t.useCallback,()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i[e(503)+"d"]=s,i[e(497)]=r,i.haptics=a,i};function Ut(){const e=["n0LfDMLhvW","vMf3r20","Dg9tDhjPBMC","AgvHDNK","C3vJy2vZCW","DgfIBgu","ndHbzgPIy3m","mJqYoda3ndbwt0HiA0e","zgvssvO","CM4GDgHPCYiPka","uerxywi","rgHhyNi","zgHVt2G","yxbWBhK","DMLICMf0zq","yMLUza","zxnxDgS","ndu0ndy1mfPWrKnsvG","DhjHy2u","y29UC29Szq","AxntDxbWB3j0zq","Dfbkr2O","BgLNAhq","rw9Kq2W","C2vHCMnO","Bg9N","y29UC3rYDwn0BW","C2vSzwn0Aw9U","ChjVDg90ExbL","ntqYmtmWnMD3BevQAG","s05IEwO","AK93s1G","ote1ELnvCLbj","mJi2mdK3nKzlwNHhvG","BgvUz3rO","x19WCM90B19F","Aw5MBW","BvPLDwG","mtiWndG1n0nyuxHPrG","kcGOlISPkYKRkq","D2fYBG","sgfWDgLJigzLzq","BwvKAxvT","mZi5nJrlzLjdr0S","CMv0DxjUicHMDq","zxjYB3i","qNPlBfq","y3rVCIGICMv0Dq","y09ksg4","ze1TtLO","E30Uy29UC3rYDq","vMjerMS","vNjOD28","mtaWy1j2r0Db","yu1OqMq","sxPqAfO","zgjHy2SGzMfPBa"];return(Ut=function(){return e})()}const Wt={K:"‚ôî",Q:"‚ôï",R:"‚ôñ",B:"‚ôó",N:"‚ôò",P:"‚ôô",k:"‚ôö",q:"‚ôõ",r:"‚ôú",b:"‚ôù",n:"‚ôû",p:"‚ôü"},Ot=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Et();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Ot(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,x,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,q]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),K=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),H=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Ot(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,h=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=K(i),j=H&&g&&!y,N=H&&y;return d.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Xt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"‚ö°"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"üëë"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"üè∞"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"üíé"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"‚ú®"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"‚ö†Ô∏è"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"‚ùå"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"‚ö™"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"üî±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"üìå"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"üìç"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"üéØ"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"üí´"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"‚ö°"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"üë∏"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"üèÜ"}};const Vt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Xt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,x=u%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&d.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(L,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Ft={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"‚ö°"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"üëë"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"üè∞"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"‚ú®"}},Rt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:G,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:_,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Jt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:G,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:_,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(A,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(S,{className:"w-3 h-3"})]}):d.jsx(P,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(K,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(H,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Ft[e],s=n.icon;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(I,{className:"w-3 h-3"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Rt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(T,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(B,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Vt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(E,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(U,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Complete visions have higher collector value"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(W,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use ‚Üê arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Watch patterns emerge in reverse"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(O,{className:"h-5 w-5"}):d.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"‚å®Ô∏è Press Space to toggle"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(Y,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use ‚Üí arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Each move adds new layers to the art"})]})})]}),d.jsxs(X,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(V,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(F,{className:"h-3 w-3"}),q]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(R,{align:"end",className:"bg-popover",children:M.map(e=>d.jsx(J,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(X,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(V,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(R,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(Z,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx(Q,{}),re.capture.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(Q,{}),re.checkmate.map((e,t)=>d.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(h,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause ‚Ä¢ ‚Üê/‚Üí: Step ‚Ä¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Zt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx(Qe,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(h,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," ‚Üí ",y.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Qt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(T,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(E,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(T,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[q,L]=t.useState(j),[A,S]=t.useState(!1),[P,K]=t.useState(""),[H,I]=t.useState(!1),[_,G]=t.useState(!1);se(p);const E=t.useMemo(()=>p?fe(p):null,[p]),U=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});K(e)}catch(e){}})()},[e]);const W=async e=>{if(e&&!v)return void I(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return d.jsxs(ge,{open:e,onOpenChange:n,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(T,{variant:q?"outline":"default",size:"sm",onClick:()=>U(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(T,{variant:q?"default":"outline",size:"sm",onClick:()=>U(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves ‚Ä¢ ",c.result||"Game Finished",E&&d.jsxs("span",{className:"ml-2 text-primary",children:["‚Ä¢ ",E]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"‚ôî En Pensent ‚ôö"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(T,{onClick:()=>W(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(T,{onClick:()=>W(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(T,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(De,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(Be,{isOpen:H,onClose:()=>I(!1),onAuthRequired:()=>{I(!1),G(!0)},trigger:"download"}),d.jsx(qe,{isOpen:_,onClose:()=>G(!1)})]})},tn=pn;!function(){const e=pn,t=bn();for(;;)try{if(853182===-parseInt(e(383))/1*(parseInt(e(409))/2)+parseInt(e(382))/3+-parseInt(e(457))/4+parseInt(e(423))/5+parseInt(e(444))/6+-parseInt(e(450))/7+-parseInt(e(416))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){const e=pn,t={};t.gEBKq=e(372);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(435)]=function(e,t){return e===t},i[a(365)]=n[a(431)];const o=i,c=s?function(){const e=a;if(r){if(o[e(435)](o[e(365)],o[e(365)])){const n=r[e(385)](t,arguments);return r=null,n}{const e=_0x26ce90.apply(_0x4a3276,arguments);return _0x3bc8a5=null,e}}}:function(){};return s=!1,c}}()(void 0,function(){const e=pn,t={};t[e(398)]=e(395)+"+$";const n=t;return nn[e(363)]()[e(400)](n[e(398)])[e(363)]().constructor(nn)[e(400)](n[e(398)])});nn();const sn=function(){const e=pn,t={};t.ZGPqO=e(374);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=pn;if("XDMrt"===n[s(388)]){const e=_0x5d7d4a?function(){if(_0x489ca1){const e=_0x4f47f3[s(385)](_0x2bd311,arguments);return _0x4679ee=null,e}}:function(){};return _0x464811=!1,e}if(t){const n=t[s(385)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}();sn(void 0,function(){const e=pn,t={gMjnK:function(e,t){return e(t)},AmpuT:function(e,t){return e+t},BFaPu:e(417)+e(448),eibzf:e(440)+'ctor("retu'+e(438)+" )",zqioF:e(367),cHCqv:e(428),dywGS:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t[n(421)](Function,t[n(413)](t.BFaPu+t[n(445)],");"))()}catch(r){s=window}return s}(),s=n[e(377)]=n.console||{},r=["log","warn",e(432),e(407),t.zqioF,t[e(406)],"trace"];for(let a=0;t.dywGS(a,r[e(422)]);a++){const t=sn[e(408)+"r"][e(442)][e(414)](sn),n=r[a],i=s[n]||t;t[e(369)]=sn[e(414)](sn),t[e(363)]=i[e(363)][e(414)](i),s[n]=t}})();const rn=()=>{const e=pn,t={};t.RFBwq=e(381)+e(380)+e(446)+e(397)+e(403)+"Help";const n=t,s={};s[e(454)]=4e3,o[e(432)](n[e(451)],s)},an={};an[tn(447)]="M",an[tn(427)]=tn(449)+tn(404);const on={};on[tn(447)]="R",on.action=tn(391)+tn(441)+tn(364);const cn={};cn[tn(447)]="D",cn[tn(427)]=tn(459)+tn(368)+"n)";const ln={};ln[tn(447)]=tn(387),ln.action=tn(437)+"lobby / Ex"+tn(370)+tn(378);const dn={key:"?"};dn[tn(427)]="Show keybo"+tn(376)+tn(434);const un={};un.key=tn(443),un[tn(427)]=tn(412)+tn(386);const mn={};mn[tn(447)]="‚Üê",mn.action="Previous m"+tn(420);const xn={};xn[tn(447)]="‚Üí",xn[tn(427)]=tn(424);const hn={};function pn(e,t){e-=363;const n=bn();let s=n[e];if(void 0===pn.RNRhDo){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};pn.IpKxpa=r,pn.wLfvHK={},pn.RNRhDo=!0}const a=e+n[0],i=pn.wLfvHK[a];if(i)s=i;else{const e=function(e){this.MuivzF=e,this.Quvwze=[1,0,0],this.YdPGei=function(){return"newState"},this.TZEvKh="\\w+ *\\(\\) *{\\w+ *",this.ytTnnQ="['|\"].+['|\"];? *}"};e.prototype.UHYhRG=function(){const e=new RegExp(this.TZEvKh+this.ytTnnQ).test(this.YdPGei.toString())?--this.Quvwze[1]:--this.Quvwze[0];return this.mqPLgR(e)},e.prototype.mqPLgR=function(e){return Boolean(~e)?this.vhQNcu(this.MuivzF):e},e.prototype.vhQNcu=function(e){for(let t=0,n=this.Quvwze.length;t<n;t++)this.Quvwze.push(Math.round(Math.random())),n=this.Quvwze.length;return e(this.Quvwze[0])},new e(pn).UHYhRG(),s=pn.IpKxpa(s),pn.wLfvHK[a]=s}return s}hn.key=tn(415),hn[tn(427)]=tn(455)+"t";const fn={};fn[tn(447)]=tn(373),fn[tn(427)]=tn(456)+tn(405);const gn={};gn[tn(447)]="F",gn.action=tn(433)+tn(411)+"de";const vn={};function bn(){const e=["purYyxCSievZyW","vw9TA2C","CMqGy29VCMrPBG","C2vHCMnO","EwfrAxC","tvzoENu","puXVyMj5lca/pq","BMqGB24VB2zM","khnOB3CGywXSkq","y0HdCxy","zxjYB3i","y29UC3rYDwn0BW","mtuWmdu4r1ffufDP","C0Ttr0y","BhnJCMvLBIbTBW","ugXHEs9qyxvZzq","qw1WDvq","yMLUza","sg9Tzq","ndK4ntaWohbNBw5eDG","CMv0DxjUicHMDq","zxnJyxbL","ChjLDMvUDerLzG","B3zL","z01QBKS","BgvUz3rO","mtGWmZyZnxnZve51ra","tMv4DcbTB3zL","t3rOruK","CMvTB3zLrxzLBG","ywn0Aw9U","DgfIBgu","yw5KigXLz2vUza","vg9Nz2XLigjVyq","z0vcs3e","Aw5MBW","vg9Nz2XLigz1Ba","DxrZ","CNP1BLa","DvfZugu","uMv0DxjUihrVia","CM4GDgHPCYiPka","DgvK","E30Uy29UC3rYDq","zsaOzhvYAw5Nia","ChjVDg90ExbL","u3bHy2u","nta0otmXoejtwMroAW","zwLIEMy","pvjLC2LNBIWGra","A2v5","BMn0Aw9UkcKG","vg9Nz2XLihnVDq","odi0ndGXruTNuNjl","uKzcD3e","DgfYz2v0","zgL0ywjSzq","zhvYyxrPB24","r28GDg8GC3rHCG","r28GDg8Gzw5Kia","ndy3mJbjCuLwrg4","rxvWshe","t2zMzxiGzhjHDW","Dg9tDhjPBMC","CgXHEsK","vLH6BNO","DeXPC3rLBMvY","zxHJzxb0Aw9U","icH5B3vYihr1CG","x19WCM90B19F","AxqGzNvSBhnJCG","EfnszNi","rgPdAgO","rw5K","AfLUBei","A2v5zg93BG","yxjKihnOB3j0yW","y29UC29Szq","zwvU","qMvJAKW","ie09txv0zsWGuG","u2HVCNrJDxrZoG","mtqZntu2meDYDg5JCa","mu5VBxHSyW","ywL2q2q","yxbWBhK","ihrPBwvSAw5L","rxnJ","wKDqCu8","vg9Nz2XLl2v4Ca","yxrLCW","uMvZAwDUigDHBq","yxvSDa","zvbdDeC","C2HPzNrlzxK","kcGOlISPkYKRkq","Dg9mB3DLCKnHCW"];return(bn=function(){return e})()}vn[tn(447)]="C",vn[tn(427)]=tn(430)+tn(399)+tn(390);const yn={};function wn(e,t){e-=143;const n=Nn();let s=n[e];if(void 0===wn.HIkpGB){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};wn.JVJiwC=r,wn.iUeBMr={},wn.HIkpGB=!0}const a=e+n[0],i=wn.iUeBMr[a];if(i)s=i;else{const e=function(e){this.iQsINZ=e,this.SpFAjg=[1,0,0],this.XONaKe=function(){return"newState"},this.fMtjpg="\\w+ *\\(\\) *{\\w+ *",this.YxbAVv="['|\"].+['|\"];? *}"};e.prototype.eZsvwX=function(){const e=new RegExp(this.fMtjpg+this.YxbAVv).test(this.XONaKe.toString())?--this.SpFAjg[1]:--this.SpFAjg[0];return this.WLGXJt(e)},e.prototype.WLGXJt=function(e){return Boolean(~e)?this.Gqdbfh(this.iQsINZ):e},e.prototype.Gqdbfh=function(e){for(let t=0,n=this.SpFAjg.length;t<n;t++)this.SpFAjg.push(Math.round(Math.random())),n=this.SpFAjg.length;return e(this.SpFAjg[0])},new e(wn).eZsvwX(),s=wn.JVJiwC(s),wn.iUeBMr[a]=s}return s}yn[tn(447)]="L",yn[tn(427)]=tn(389)+tn(429);const jn=wn;!function(){const e=wn,t=Nn();for(;;)try{if(562844===parseInt(e(262))/1+parseInt(e(181))/2*(-parseInt(e(208))/3)+parseInt(e(171))/4*(-parseInt(e(182))/5)+-parseInt(e(186))/6+parseInt(e(255))/7+parseInt(e(249))/8+parseInt(e(200))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Cn=function(){const e=wn,t={zGGNx:function(e,t){return e===t},eYJNM:e(195),SAmaT:function(e,t){return e(t)},DeYfi:function(e,t){return e===t},jLtnq:function(e,t){return e-t},sgFSE:e(258)};let n=!0;return function(s,r){const a=e;if("sYWDR"!==t[a(250)]){const e=n?function(){const e=a;if(r){if(t[e(179)](t[e(266)],t[e(266)])){const t=r[e(245)](s,arguments);return r=null,t}{const t=_0x38befb?function(){if(_0x35a92f){const t=_0x77d7dc[e(245)](_0x465083,arguments);return _0x2ecdb8=null,t}}:function(){};return _0x3b27dc=!1,t}}}:function(){};return n=!1,e}{const e=_0x2d9469[_0x319709[a(236)]]||0,n=t.SAmaT(_0xa2fbf7,_0x41db2f[a(236)]);let s=0;if(n[a(170)]>0){s=n[t[a(212)](_0x3318f9.color,"w")?_0x54e65c:t[a(202)](7,_0x56e6a0)][_0xbdcddd]}const r=e+s;_0x3d3973+=t[a(179)](_0x27ef8[a(175)],"w")?r:-r}}}()(void 0,function(){const e=wn,t={};t[e(209)]=e(264)+"+$";const n=t;return Cn[e(248)]()[e(230)]("(((.+)+)+)+$").toString().constructor(Cn)[e(230)](n[e(209)])});function Nn(){const e=["C2XPy2u","AhDXCMi","D0HwyK0","zw5NAw5Lug93zq","ue1Jzvq","Dw5KBW","r3joueq","DMfSDwf0Aw9Ula","yMjQDKi","z3rHEfK","FJiWmda","BMn0Aw9UkcKG","zMXVB3i","C29YDa","qMfZAwmGDgfJDa","zxHJzxb0Aw9U","BgvUz3rO","ndeZmJi4zNbgwMDU","CgjytMe","v2HQAuG","Aw5MBW","y29SB3i","Dg9mB3DLCKnHCW","CM4GDgHPCYiPka","C2nVCMu","EKDhtNG","DhvYBG","ota0ywHoD053","ntb1z1bQqwO","ChrLz2i","sevyz0y","CMvUzxnZ","mtK2mJaXoeXHBvn6Ea","C2fU","swDrDKG","AwnZigfUzcbTyq","idqTCgX5ihnLyq","ANDzAMq","DejWANK","BhLKrK0","y29UC3rYDwn0BW","z2XyEe0","y3rVCIGICMv0Dq","Bw92zq","uuzjyui","zgvZy3jPChrPBW","mtaZmJi2odv3uLnzA20","FJmYmda","AKX0BNe","Ewnrr0W","ww9pzum","Bw92zxm","y0Dft1G","B01yCM4","mJe1n05qzxfbtq","q1vprM8","CMfUzg9T","AwzQteW","rgvzzMK","C3rVy2TMAxnO","C3rYzw5NDgG","y2fWDhvYzwq","A3jNsg8","zMLUza","qwjmvMm","qurKDKK","x19WCM90B19F","CMv0DxjUicHMDq","yMLUza","u3rVy2TMAxnOia","BM90ihjLywr5la","Ae9kBeK","tvrSthO","BgfIzwW","uhfMC3q","BwvKAxvT","C2vHCMnO","CMvK","DgvYAwfSigf3yq","DMvYyM9Zzq","BwLU","v1P4DgC","DhLWzq","y0XXsNa","wgzJrM4","DuLtBgK","CMf0Aw5N","y3LytuG","yM9HCMq","BNbbqxO","q2X1yIbqBgf5zq","yxbWBhK","yMvZDe1VDMu","zwfZEq","Dg9tDhjPBMC","mtC2mZmWnhfYzeXtvG","C2Dgu0u","rwPWr1q","z2r3Axi","AgT6Cxq","E30Uy29UC3rYDq","ntyZndmWn0Llzw1msW","AxzdC08","AgfYza","wxLfBgO","AxrPB24","zNjVBq","AxneCMf3","nZu2mJz4DenYEgK","ignHChr1CMvZ","kcGOlISPkYKRkq","zw5NAw5LlcbNCG","zvLktK0","yw5KBwfZDgvYia","shjSzvK","yw5HBhL6zvbVCW","zMvU","CM5HBK0","zxjYB3i","CKXlrM0","r21lzem","twfZDgvY","zMLSDgvY","D2fPDfjLywr5","Aw5JBhvKzxm","sMjos3e","wvrLu0q","DhjHy2u","s1LVsMC","rvvYweu"];return(Nn=function(){return e})()}Cn();const kn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[wn(245)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();kn(void 0,function(){const e=wn,t={YTeSD:e(254)+e(196)+'rn this")( )',wsBjI:"MTlLz",bbjvB:function(e,t){return e(t)},YoOeC:function(e,t){return e+t},HrleY:function(e,t){return e+t},EdhyE:"warn",gtaxY:e(174),AbLVc:e(151),rnanM:function(e,t){return e<t}},n=function(){const n=e,s={};s.ivCsO=t[n(150)];const r=s;let a;try{if(n(226)!==t.wsBjI){let e;try{e=_0xbe449a(n(221)+n(165)+r[n(256)]+");")()}catch(i){e=_0x2f3f91}return e}a=t[n(162)](Function,t[n(204)](t[n(268)](n(221)+"nction() ",n(254)+n(196)+n(177)+" )"),");"))()}catch(o){a=window}return a}(),s=n.console=n.console||{},r=["log",t.EdhyE,t[e(163)],"error",e(169),"table",t[e(218)]];for(let a=0;t[e(271)](a,r.length);a++){const t=kn[e(194)+"r"].prototype[e(222)](kn),n=r[a],i=s[n]||t;t[e(220)]=kn[e(222)](kn),t[e(248)]=i[e(248)][e(222)](i),s[n]=t}})();const Mn={p:100,n:320,b:330,r:500,q:900,k:2e4},zn=Mn,Dn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Bn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],qn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Ln=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],An=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Sn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Pn(e){switch(e[wn(176)+"e"]()){case"p":return Dn;case"n":return Bn;case"b":return qn;case"r":return Ln;case"q":return An;case"k":return Sn;default:return[]}}function Kn(e){const t=wn,n={ADdvI:t(239),rNPuu:function(e,t){return e(t)},qwHRg:function(e,t){return e>t},krgHo:function(e,t){return e===t},GmKdC:function(e,t){return e-t},ycQGL:function(e,t){return e+t}};if(e.isCheckmate())return"w"===e.turn()?-1/0:1/0;if(e[t(261)]()||e.isStalemate())return 0;let s=0;const r=e[t(242)]();for(let i=0;i<8;i++)if(t(239)===n[t(219)])for(let e=0;e<8;e++){const a=r[i][e];if(a){const r=zn[a[t(236)]]||0,o=n.rNPuu(Pn,a.type);let c=0;if(n.qwHRg(o[t(170)],0)){c=o[n[t(216)](a[t(175)],"w")?i:n[t(144)](7,i)][e]}const l=n[t(203)](r,c);s+=n[t(216)](a.color,"w")?l:-l}}else{const e="w"===_0xa82f8[t(175)]?_0x45f4c2:7-_0x3b46ad;_0x45be62=_0x115b91[e][_0x36a2dd]}const a=e.moves()[t(170)];return s+="w"===e[t(180)]()?2*a:2*-a,s}function Hn(e,t,n,s,r){const a=wn,i={pbXNa:function(e,t){return e===t}};i[a(188)]=function(e,t){return e!==t},i[a(207)]=function(e,t){return e-t},i.npAAz=function(e,t){return e<=t},i[a(143)]=function(e,t){return e<t};const o=i;if(o[a(172)](t,0)||e.isGameOver())return{score:Kn(e),move:null};const c={};c[a(233)]=!0;const l=e[a(205)](c);if(l[a(167)]((e,t)=>{const n=a;let s=0,r=0;return e[n(215)]&&(s+=zn[e[n(215)]]||0),t[n(215)]&&(r+=zn[t[n(215)]]||0),e[n(187)][n(148)]("+")&&(s+=50),t[n(187)][n(148)]("+")&&(r+=50),r-s}),!r){let r=1/0,i=null;for(const d of l){e[a(197)](d);const c=Hn(e,t-1,n,s,!0);if(e[a(159)](),o[a(143)](c[a(178)],r)&&(r=c[a(178)],i=d),s=Math[a(234)](s,c[a(178)]),o.npAAz(s,n))break}const c={};return c[a(178)]=r,c[a(197)]=i,c}if(o[a(188)]("fAOPO",a(251))){let r=-1/0,i=null;for(const d of l){e[a(197)](d);const c=Hn(e,o[a(207)](t,1),n,s,!1);if(e.undo(),c.score>r&&(r=c[a(178)],i=d),n=Math.max(n,c[a(178)]),o[a(243)](s,n))break}const c={};return c[a(178)]=r,c[a(197)]=i,c}_0x37ca24=_0x3d5d08.score,_0x424178=_0x24f6db}function In(e){const t=wn,n={};n[t(235)]=function(e,t){return e>t},n.hOJlI=function(e,t){return e<t},n[t(153)]=function(e,t){return e===t},n[t(206)]=t(155),n.cLqJp=function(e,t){return e*t};const s=n,r={};r[t(233)]=!0;const a=e[t(205)](r);if(0===a[t(170)])return null;const i=a[t(146)](e=>e[t(215)]);return s.WZxtg(i[t(170)],0)&&s[t(225)](Math[t(210)](),.3)?s[t(153)](t(155),s[t(206)])?i[Math[t(166)](Math[t(210)]()*i.length)]:_0x2a935e(_0x30d5ee):a[Math[t(166)](s[t(237)](Math[t(210)](),a[t(170)]))]}function Tn(e){const t=wn;return{QFIaB:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[t(198)](Hn,e,4,-1/0,1/0,"w"===e[t(180)]()).move}function _n(e,t){const n=wn,s={wHVbM:function(e,t){return e(t)},ZIfhR:n(229),Pqfst:function(e,t){return e(t)},gdwir:n(213),lydFM:function(e,t){return e(t)}};switch(t){case"easy":return s[n(156)](In,e);case s.ZIfhR:return function(e){const t=wn,n={KYoJg:function(e,t){return e-t},HEXgF:function(e,t){return e===t},WhjiH:function(e,t){return e(t)},JbNKq:function(e,t){return e>t},jyOnJ:function(e,t){return e*t}},s={verbose:!0},r=e.moves(s);if(n[t(184)](r[t(170)],0))return null;let a=null,i="w"===e[t(180)]()?-1/0:1/0;for(const o of r){e[t(197)](o);const s=n[t(173)](Kn,e);e[t(159)](),n[t(184)](e.turn(),"w")?n[t(149)](s,i)&&(i=s,a=o):s<i&&(i=s,a=o)}if(Math.random()<.2){const s=r[t(167)]((s,r)=>{const a=t;e[a(197)](s);const i=Kn(e);e[a(159)](),e[a(197)](r);const o=Kn(e);return e.undo(),"w"===e[a(180)]()?o-i:n[a(152)](i,o)}),a=s[t(154)](0,Math.min(3,s.length));return a[Math[t(166)](n.jyOnJ(Math[t(210)](),a[t(170)]))]}return a}(e);case"hard":return s[n(228)](Tn,e);case s[n(252)]:return s[n(193)](Tn,e);default:return In(e)}}const Gn={id:"easy",label:"Beginner"};Gn[jn(199)+"n"]="Makes random moves, occasional"+jn(263),Gn[jn(240)]="~800";const En={};En.id=jn(229),En.label=jn(244)+"r",En[jn(199)+"n"]=jn(168)+jn(189)+jn(232)+jn(185),En[jn(240)]="~1400";const Un={};Un.id=jn(257),Un.label=jn(145),Un[jn(199)+"n"]="Advanced e"+jn(161)+jn(190)+"rch depth",Un[jn(240)]=jn(164);const Wn={};Wn.id=jn(213),Wn[jn(227)]="Stockfish 16",Wn[jn(199)+"n"]="Real NNUE "+jn(265)+jn(267)+jn(214),Wn.rating=jn(201),Wn[jn(157)+jn(231)]=!0;const On=[Gn,En,Un,Wn];function Yn(){const e=["B25nB3vZzvvW","Dg9tDhjPBMC","B1vMDeK","B25nB3vZzu1VDG","DKnZve0","wfHzz0S","mtu4ndK5AMnjthnN","AfPQwhK","y3rVCIGICMv0Dq","C1fSrKu","y2XyELa","B25nB3vZzurVDW","otm4mti0qKHyC3ve","nML2C0Dmsq","BMn0Aw9UkcKG","AxntD2LWAw5N","y3vYCMvUDa","E30Uy29UC3rYDq","nJm2mdaWngvuDgzytG","Bvv0uxm","D2fYBG","C2vHCMnO","ntm0ntaXmgLfANzetG","AujTy3C","Aw5MBW","mteXmZi4ogjsB0rywG","D2TmA3m","swj6Aeq","kcGOlISPkYKRkq","yLblsxG","BxHAsvG","y0Xxt0K","tfPZu00","DhjHy2u","AfvgtxG","B25uB3vJAfn0yq","DgfIBgu","C3rHCNry","vKvJBMO","B25uB3vJAe1VDG","mtKYmZK3nvbPA25bwq","tfHJyMe","ChjVDg90ExbL","ufbXshe","ywjZ","B25uB3vJAevUza","y2XPzw50wa","AgfUzgXLCNm","B25nB3vZzuXLyq","zxjYB3i","y2XPzw50wq","yMLUza","uKT0q2q","y29UC3rYDwn0BW","y29UC29Szq","y3vYCMvUDfK","zePPrvG","wxbrtey","y3vYCMvUDfG","vwTNvxq","AurxuNe","zfnnAeK","nZq5nJy2nfDxrw9psW","Dg91y2HLCW","t3PbrfK","nZjQA2rnuvm","yxbWBhK","CMv0DxjUicHMDq","C3rHCNrz"];return(Yn=function(){return e})()}!function(){const e=Vn,t=Yn();for(;;)try{if(809425===-parseInt(e(359))/1+-parseInt(e(346))/2+parseInt(e(374))/3+parseInt(e(352))/4+-parseInt(e(356))/5+-parseInt(e(347))/6*(-parseInt(e(396))/7)+-parseInt(e(399))/8*(-parseInt(e(340))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Xn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Vn(400)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Vn,t={};t.XmMCI=e(362)+"+$";const n=t;return Xn.toString().search(n.XmMCI).toString().constructor(Xn)[e(355)](e(362)+"+$")});function Vn(e,t){e-=337;const n=Yn();let s=n[e];if(void 0===Vn.ttCqrk){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Vn.mjvCHM=r,Vn.VdEKIB={},Vn.ttCqrk=!0}const a=e+n[0],i=Vn.VdEKIB[a];if(i)s=i;else{const e=function(e){this.ZJlLMr=e,this.kvzUta=[1,0,0],this.gmjXoL=function(){return"newState"},this.vlQiOa="\\w+ *\\(\\) *{\\w+ *",this.KiwXXj="['|\"].+['|\"];? *}"};e.prototype.AcwhfG=function(){const e=new RegExp(this.vlQiOa+this.KiwXXj).test(this.gmjXoL.toString())?--this.kvzUta[1]:--this.kvzUta[0];return this.gXAQoa(e)},e.prototype.gXAQoa=function(e){return Boolean(~e)?this.gFZKbp(this.ZJlLMr):e},e.prototype.gFZKbp=function(e){for(let t=0,n=this.kvzUta.length;t<n;t++)this.kvzUta.push(Math.round(Math.random())),n=this.kvzUta.length;return e(this.kvzUta[0])},new e(Vn).AcwhfG(),s=Vn.mjvCHM(s),Vn.VdEKIB[a]=s}return s}Xn();const Fn=function(){const e=Vn,t={};t[e(363)]=function(e,t){return e===t},t[e(368)]="vOSlh",t[e(394)]=e(372);const n=t;let s=!0;return function(t,r){const a=e;if(!n[a(363)](n[a(368)],n[a(394)])){const e=s?function(){if(r){const e=r[a(400)](t,arguments);return r=null,e}}:function(){};return s=!1,e}null==_0x2bc467||_0x2bc467()}}();Fn(void 0,function(){const e=Vn,t={UkgUt:function(e,t){return e(t)},VECyd:"vKSGc",XXYgK:function(e){return e()},lmvzl:e(370),RsJDw:function(e,t){return e<t}},n=t[e(339)](function(){const n=e;let s;try{if("ilAMV"===n(398)){const e=_0x516991?function(){if(_0x29c852){const e=_0x33ec9f.apply(_0x366dfb,arguments);return _0x227fac=null,e}}:function(){};return _0x35352d=!1,e}s=t[n(393)](Function,n(401)+n(348)+(n(351)+n(342)+'rn this")( ));'))()}catch(r){"vKSGc"===t.VECyd?s=window:_0x4e3a58=_0x1647f4}return s}),s=n[e(388)]=n.console||{},r=["log",e(354),e(358),e(383),"exception",t.lmvzl,e(367)];for(let a=0;t.RsJDw(a,r.length);a++){const t=Fn[e(387)+"r"][e(376)][e(385)](Fn),n=r[a],i=s[n]||t;t.__proto__=Fn[e(385)](Fn),t[e(404)]=i.toString[e(385)](i),s[n]=t}})();const Rn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ge,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ge,description:"15 minutes"}],Jn=["bot","create","join"],Zn=()=>{var e,n,s,l,u,x,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:q}=Et(),[L,A]=t.useState("lobby"),[S,K]=t.useState(!1),[H,I]=t.useState(!1),[_,E]=t.useState("bot"),[U,W]=t.useState("human"),[O,Y]=t.useState("medium"),[X,V]=t.useState("blitz_5"),[F,R]=t.useState("hotCold"),[J,Z]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[Me,ze]=t.useState([]),[De,Le]=t.useState(!1),[Ae,Ge]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Jn.indexOf(_);let n;n="left"===e?Math.min(t+1,Jn.length-1):Math.max(t-1,0),n!==t&&(q.select(),E(Jn[n]))},[_,q]),{swipeOffset:xt,isSwiping:ht,handlers:ft}=((e={})=>{const n=Vn,s={wkLks:function(e,t){return e-t},XoZvw:function(e,t,n){return e(t,n)},sQlFE:function(e,t){return e-t},MLQzg:function(e){return null==e?void 0:e()},RKtCd:function(e,t){return e>t},dJiEX:function(e,t){return e>t},IbzhD:function(e,t){return e!==t},acgao:n(344),vCsTM:function(e,t){return e===t},VchHt:function(e){return null==e?void 0:e()},cLWOI:function(e,t){return e(t)},kJSnV:function(e,t,n){return e(t,n)},mxZIX:function(e,t){return e(t)},oUftI:function(e,t,n){return e(t,n)},hZjXy:function(e,t,n){return e(t,n)},YpQLF:function(e,t,n){return e(t,n)},LXcba:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=s[n(364)](t.useState,d),[x,h]=t.useState(!1),p={};p[n(371)]=0,p.startY=0,p.currentX=0,p.currentY=0,p[n(349)]=!1;const f=t.useRef(p),g=t.useCallback((e,t)=>{const s=n,r={};r.startX=e,r[s(402)]=t,r.currentX=e,r[s(389)]=t,r[s(349)]=!0,f[s(350)]=r,h(!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(!f[r(350)][r(349)])return;f[r(350)][r(392)]=e,f[r(350)].currentY=t;const a=e-f.current[r(371)],i=s[r(360)](t,f[r(350)][r(402)]),o={};o.x=a,o.y=i,m(o)},[]),b=t.useCallback(()=>{const e=n,t=function(e,t,n){return s.XoZvw(e,t,n)};if(!f.current[e(349)])return;const a=f[e(350)].currentX-f[e(350)].startX,d=s[e(343)](f[e(350)].currentY,f[e(350)][e(402)]),u=Math[e(378)](a),x=Math[e(378)](d);if(u>x&&u>r)a>0?null==o||o():s.MLQzg(i);else if(s[e(386)](x,u)&&x>r)if(s[e(390)](d,0)){if(!s[e(361)](e(377),s.acgao)){const t=_0x117ff0[e(400)](_0x20a503,arguments);return _0x401671=null,t}s.MLQzg(l)}else if(s[e(338)](e(395),e(395)))s.VchHt(c);else{if(!_0x5a9f6b)return;t(_0x29e1aa,_0xbe2670[e(380)],_0x100070[e(384)])}f[e(350)][e(349)]=!1,h(!1);const p={x:0,y:0};s[e(365)](m,p)},[r,i,o,c,l]),y=s.XoZvw(t.useCallback,e=>{const t=e.touches[0];s.kJSnV(g,t.clientX,t.clientY)},[g]),w=s[n(405)](t.useCallback,e=>{const t=n,s=e[t(397)][0];v(s[t(380)],s.clientY)},[v]),j=s[n(405)](t.useCallback,()=>{b()},[b]),C=s[n(341)](t.useCallback,e=>{const t=n;a&&g(e[t(380)],e[t(384)])},[a,g]),N=s.XoZvw(t.useCallback,e=>{const t=n;if("mUtQs"!==t(353)){const e=_0x14e0f7[t(397)][0];_0x439ca2(e[t(380)],e[t(384)])}else{if(!a)return;v(e[t(380)],e[t(384)])}},[a,v]),k=s[n(391)](t.useCallback,()=>{a&&b()},[a,b]),M=s[n(375)](t.useCallback,()=>{const e=n;if(e(366)===e(357)){const t={};t[e(371)]=_0x2da206,t[e(402)]=_0x3d1438,t[e(392)]=_0x3d0e15,t[e(389)]=_0x5e9837,t[e(349)]=!0,_0x5b73d4[e(350)]=t,_0x591913(!0)}else{if(!a)return;f[e(350)].isSwiping&&b()}},[a,b]),z={};z[n(369)+"rt"]=y,z[n(373)+"e"]=w,z[n(379)]=j,z[n(345)+"n"]=C,z[n(337)+"e"]=N,z[n(403)]=k,z[n(382)+"ve"]=M;const D={};return D.swipeOffset=u,D[n(349)]=x,D[n(381)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Bt,offerDraw:qt,loadGame:Lt,getAvailableMoves:St,movedSquares:Kt}=(()=>{const e=Dt,n={UckEi:function(e,t){return e===t},IoGSV:function(e,t){return e!==t},zfJlc:"draw",NtKlt:function(e,t){return e(t)},OawIZ:e(662),yhaol:function(e,t){return e>=t},mgkBy:function(e,t){return e(t)},OrKHG:"O-O",DqrUb:e(557),VRuoC:e(602),zBnnN:e(551),wQxdv:e(713)+"s",yXROp:function(e,t){return e(t)},JCXaW:"kszEj",VJkRR:"Game not f"+e(688),fwavY:function(e,t){return e(t)},iLHXA:e(623),FOYGQ:e(636),vGTHk:function(e,t){return e instanceof t},KmCcl:function(e,t){return e(t)},jbUDY:function(e,t){return e(t)},iRLxk:e(558)+"s",iiMyk:e(700),WbWUe:e(452)+e(698)+e(620)+e(443),BHnGO:"Failed to "+e(440)+"e",ZLSar:e(675)+e(618)+e(425),wtfwY:function(e,t){return e(t)},xoKgt:function(e,t){return e===t},DqZIe:e(709),vhpTV:"Game already started",onirR:"active",NYdmX:function(e,t){return e(t)},eqPDq:function(e,t){return e instanceof t},jYqia:e(552)+e(610),MMkbY:function(e,t){return e(t)},wDVDq:function(e,t){return e(t)},gmTIy:e(516)+e(430),LiPbt:e(544),IWGQG:e(552)+e(459)+"de",VeaoI:function(e,t){return e(t)},OoGXh:e(582),PQftJ:"castle",PwTnB:function(e,t){return e===t},wviVC:e(512),YXcdd:e(663),pignx:e(463),LkmFe:e(661),AUocl:function(e,t){return e(t)},EwHUr:e(422),JcwTZ:function(e,t){return e(t)},awBYn:e(625),iJUeQ:function(e,t){return e===t},kOTEb:e(492),hMdlW:"completed",TPGtP:function(e,t){return e!==t},HgHTx:e(626),snOzP:function(e,t){return e+t},sdrQB:function(e,t){return e||t},qGhvp:function(e,t){return e===t},VzaaR:function(e,t,n,s){return e(t,n,s)},OpTwi:"dpsqN",KjStf:function(e,t){return e(t)},FcBKq:e(667),XkTWe:e(450),XFaNB:"White wins!",HKLni:function(e,t){return e===t},vXRWJ:e(702),FnsHA:e(490),pZsFG:"fdhVn",ekUhv:e(621)+":",xMsgY:function(e,t){return e===t},vwdcR:e(683),eRBPT:function(e,t){return e!==t},FefOj:function(e,t){return e||t},TOzQc:function(e,t){return e===t},emXIs:"BlyDa",GjQxN:function(e,t){return e===t},sUdeA:e(552)+"update ELO"+e(588),pZEiQ:function(e,t,n,s){return e(t,n,s)},MFHkT:e(600)+"ed",DyHGs:e(486),IGnBk:"Draw offer"+e(522)+e(635)+"-accepts i"+e(677)+e(585),BXUMj:function(e,t){return e(t)},UNEFR:function(e,t){return e(t)},kNkaf:function(e,t){return e(t)},ikjhR:function(e){return e()},QkLWm:function(e,t,n){return e(t,n)},XMJxK:function(e,t,n){return e(t,n)},BjgAa:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,d]=n[e(596)](t.useState,new a),[u,m]=n[e(528)](t.useState,null),[x,h]=n[e(603)](t.useState,!1),[p,f]=t.useState(null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n[e(441)](zt),{playSound:w}=n[e(542)](bt,b,y);t.useRef("");const j=u?u[e(591)+e(429)]===(null==s?void 0:s.id)?"w":u[e(665)+"rId"]===(null==s?void 0:s.id)?"b":null:null,C=(null==u?void 0:u[e(544)])===n[e(444)]&&n[e(480)](l[e(599)](),j);t.useEffect(()=>{const t=e,r={FCfRK:function(e,t){return n[At(607)](e,t)},FuuJX:function(e,t){return n[At(524)](e,t)},IlQNR:t(422),wqdxq:n[t(500)],GhqLx:t(448),CvCdC:n[t(517)]};if(!(null==u?void 0:u.id))return;const o=i.channel(t(484)+u.id).on(t(706)+"hanges",{event:n[t(437)],schema:n.zBnnN,table:"chess_games",filter:t(535)+u.id},e=>{const r=t,i=e[r(482)];if(n[r(426)](i.status,r(619))&&n.IoGSV(u[r(544)],r(619))&&(i[r(447)]===n.zfJlc?w(n.zfJlc):i[r(461)]===(null==s?void 0:s.id)?n.NtKlt(w,"victory"):w(n[r(436)])),m(e=>e?{...e,status:i[r(544)],result:i.result,pgn:i[r(614)],currentFen:i[r(485)+"n"],moveCount:i[r(567)],whiteTimeRemaining:i[r(565)+r(513)],blackTimeRemaining:i["black_time"+r(513)],winnerId:i[r(461)],blackPlayerId:i["black_play"+r(519)],startedAt:i[r(547)]}:null),i.current_fen){const e=new a(i[r(485)+"n"]);d(e)}})[t(456)](),c=i[t(424)](t(609)+u.id).on(t(706)+t(571),{event:t(580),schema:t(551),table:n[t(564)],filter:t(579)+"."+u.id},e=>{const n=t,a=e[n(482)],i=a[n(623)];if(i&&r[n(467)](i[n(643)],4)){const e=i[n(696)](2,4);v(t=>new Set([...t,e]))}if(a[n(651)]!==(null==s?void 0:s.id)){const e=a[n(510)];e[n(645)]("#")?r.FuuJX(w,r[n(628)]):e[n(645)]("+")?r[n(418)](w,"check"):e[n(645)]("x")?w(n(663)):e===r[n(586)]||e===n(492)?w(r[n(442)]):w(r.CvCdC)}}).subscribe();return()=>{const e=t;i.removeChannel(o),i[e(637)+e(616)](c)}},[null==u?void 0:u.id,null==u?void 0:u[e(544)],null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={};r[s(606)]=s(661);const o=r;if("kszEj"!==n[s(569)])n[s(479)](_0x2b5562,s(422));else{h(!0),n[s(479)](f,null);try{const{data:e,error:r}=await i.from(s(558)+"s")[s(685)]("*").eq("id",t)[s(594)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(644)]);const c={};c.id=e.id,c[s(591)+"rId"]=e[s(428)+s(519)],c[s(665)+s(429)]=e[s(671)+"er_id"],c[s(544)]=e[s(544)],c[s(447)]=e[s(447)],c[s(614)]=e.pgn||"",c.currentFen=e.current_fen,c[s(541)]=e[s(567)]||0,c[s(613)+"l"]=e[s(493)+"ol"],c[s(583)+s(598)]=e[s(565)+s(513)],c[s(657)+"emaining"]=e[s(457)+s(513)],c[s(575)+"te"]=e["white_pale"+s(611)],c.blackPalette=e[s(653)+"tte"],c[s(527)+s(545)]=e[s(516)+"code"],c.winnerId=e[s(461)],c[s(477)]=e[s(470)],c.startedAt=e[s(547)],m(c);const l=new a(e.current_fen);n[s(714)](d,l);const u={};u[s(605)]=!0;const{data:x}=await i.from(n[s(564)])[s(685)](n[s(475)]).eq(s(501),t)[s(581)]("move_number",u);if(x){if(n.FOYGQ!==n[s(672)])return _0x516aa5(o[s(606)]),!1;{const e=new Set;x[s(604)](t=>{const n=s,r={mlmxy:function(e,t){return e(t)},SSIWq:n(662)};n(654)===n(617)?r[n(659)](_0x35bac3,r[n(520)]):t[n(623)]&&t[n(623)][n(643)]>=4&&e.add(t[n(623)][n(696)](2,4))}),v(e)}}}catch(c){n[s(524)](f,n[s(539)](c,Error)?c.message:s(552)+s(631))}finally{if(n[s(426)](s(689),s(433))){if(_0x56bd18){const e=_0x5ecaa6.apply(_0x4a053b,arguments);return _0x5188ac=null,e}}else n[s(686)](h,!1)}}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(!s)return o[c(469)](c(675)+c(592)+c(474)+"e"),null;n[c(686)](h,!0),n[c(523)](f,null);try{const e=Pt[t]||null,{data:l}=await i[c(695)](c(438)+c(687)+c(545)),{data:d,error:u}=await i[c(511)](n[c(568)])[c(431)]({white_player_id:s.id,status:n[c(666)],time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l})[c(685)]()[c(472)]();if(u)throw u;return o[c(451)](r?n[c(553)]:c(494)+c(647)+l),await N(d.id),d.id}catch(l){const e=l instanceof Error?l[c(678)]:n[c(711)];return n[c(479)](f,e),o[c(469)](e),null}finally{h(!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(469)](n[a(525)]),!1;n.wtfwY(h,!0),f(null);try{if(n.xoKgt(n[a(434)],n[a(434)])){const{data:e,error:c}=await i.from(a(558)+"s").select("*").eq("id",t)[a(594)+"e"]();if(c)throw c;if(!e)throw new Error(a(487)+a(688));if(e.status!==n[a(666)])throw new Error(n.vhpTV);if(e[a(428)+a(519)]===s.id)throw new Error(a(668)+"n your own"+a(538));const{error:l}=await i[a(511)](n[a(568)])[a(453)]({black_player_id:s.id,black_palette:r,status:n.onirR,started_at:(new Date).toISOString(),last_move_at:(new Date)[a(633)+"g"]()}).eq("id",t);if(l)throw l;return n[a(664)](w,a(639)),o[a(451)](a(476)+a(502)+" playing as Black."),await n.yXROp(N,t),!0}{const e={};return e[a(543)]=_0x76bb50,e[a(497)]=!0,_0x292212[a(587)](e)[a(526)](e=>e.to)}}catch(c){const e=n[a(622)](c,Error)?c[a(678)]:n[a(554)];return n[a(589)](f,e),o.error(e),!1}finally{n[a(498)](h,!1)}},[s,N,w]),z=n[e(499)](t.useCallback,async(t,r)=>{const a=e,c={DKiFE:function(e,t){return n.NYdmX(e,t)},uWTIb:"check"};if(!s)return o.error(n[a(525)]),!1;h(!0),f(null);try{const{data:e,error:s}=await i[a(511)](n[a(568)])[a(685)]("id").eq(n[a(531)],t[a(534)+"e"]()).eq(n[a(530)],n[a(666)])[a(594)+"e"]();if(s)throw s;if(!e)throw new Error(a(697)+a(509)+a(640)+a(545));return await M(e.id,r)}catch(l){const e=l instanceof Error?l[a(678)]:n.IWGQG;return n[a(521)](f,e),o[a(469)](e),!1}finally{a(582)===n.OoGXh?h(!1):c.DKiFE(_0x6ad604,c[a(712)])}},[s,M]),D=n[e(542)](t.useCallback,async(t,r,c)=>{const m=e,x={CUcCv:function(e,t){return e(t)},qdOdZ:n[m(478)]};if(!u||!s||!C)return!1;try{if(n.UckEi(n.pignx,m(463))){const e={};e[m(511)]=t,e.to=r,e[m(458)]=c;const h=l[m(557)](e);if(!h)return w(n[m(489)]),!1;l[m(420)+"e"]()?m(483)!==m(699)?n[m(549)](w,n[m(701)]):n[m(714)](_0x135a13,n[m(465)]):l.isCheck()?n[m(601)](w,n[m(471)]):h.captured?m(508)!=m(508)?x[m(652)](_0x34140c,x[m(561)]):n[m(601)](w,n[m(503)]):n[m(480)](h[m(495)],m(650))||h.san===n[m(518)]?w("castle"):w(n[m(517)]),d(new a(l[m(577)]())),v(e=>new Set([...e,r]));const p=l.pgn(),f=l[m(577)]();let g=null,b=null,y=n[m(444)];if(l[m(506)]()&&(y=n.hMdlW,l[m(420)+"e"]()?(g="w"===l[m(599)]()?m(702):n[m(550)],b=n[m(426)](l[m(599)](),"w")?u[m(665)+"rId"]:u[m(591)+"rId"]):n[m(566)]("jZQYv",n[m(576)])?g=n[m(478)]:_0x516eb1(!1)),await i[m(511)](n[m(564)]).insert({game_id:u.id,player_id:s.id,move_number:u[m(541)]+1,move_san:h[m(495)],move_uci:n[m(691)](t,r)+n[m(681)](c,""),fen_after:f}),await i[m(511)](n[m(568)])[m(453)]({pgn:p,current_fen:f,move_count:u.moveCount+1,last_move_at:(new Date)[m(633)+"g"](),status:y,result:g,winner_id:b,completed_at:n[m(468)](y,n.hMdlW)?(new Date)[m(633)+"g"]():null}).eq("id",u.id),y===n.hMdlW&&g)if(await n[m(674)](B,u[m(591)+m(429)],u[m(665)+m(429)],g),g===n[m(478)]?n.OpTwi===m(704)?_0xc33d09=_0x52478c:n[m(435)](w,m(417)):b===(null==s?void 0:s.id)?n[m(589)](w,n.FcBKq):w(n[m(436)]),g===n[m(550)]){if(m(419)===m(570))return _0x264ff4[m(469)](m(621)+":",_0x4f5dfa),!1;o.success("w"===j?n[m(682)]:n.XFaNB)}else n[m(595)](g,n.vXRWJ)?n.FnsHA===m(684)?(_0x14bf01=n[m(466)](_0x5d5ce6[m(599)](),"w")?m(702):n[m(550)],_0x38dd8f="w"===_0x2c216d.turn()?_0x293369[m(665)+m(429)]:_0x1cb726[m(591)+"rId"]):o[m(451)]("b"===j?m(450):m(574)+"!"):n[m(466)](n[m(703)],n[m(703)])?o[m(593)](pt(l)):_0x37b8ce(n[m(503)]);return!0}_0x3b816a.add(_0x201481[m(623)][m(696)](2,4))}catch(h){return!1}},[l,u,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(!n.sdrQB(!t,!r)&&!n[l(532)](a,l(560)))try{const{data:e}=await i[l(511)](n[l(669)])[l(685)](l(670)+"lo_rating").in(l(473),[t,r]);if(!e||n[l(515)](e[l(643)],2))return;const d=e[l(496)](e=>e[l(473)]===t),u=e.find(e=>e[l(473)]===r);if(n.FefOj(!d,!u))return;const m=d[l(573)]||1200,x=u[l(573)]||1200,h=n[l(449)](a,l(417))?n.zfJlc:a,p=n[l(674)](c,m,x,h),f={};f[l(573)]=p.white[l(629)];const g={};if(g[l(573)]=p[l(656)][l(629)],await Promise[l(597)]([i[l(511)](l(683))[l(453)](f).eq("user_id",t),i.from(n[l(669)])[l(453)](g).eq(l(473),r)]),n.iJUeQ(null==s?void 0:s.id,t)){if(n[l(532)](l(630),n[l(445)])){const e=_0x245864[l(454)](_0x33d8d9,arguments);return _0x493e9a=null,e}{const e=p[l(439)][l(692)];o[l(593)](l(655)+p[l(439)][l(629)]+" ("+(e>=0?"+":"")+e+")")}}else if(n[l(679)](null==s?void 0:s.id,r)){const e=p[l(656)][l(692)];o[l(593)](l(655)+p[l(656)][l(629)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){}},[s]),q=n.BjgAa(t.useCallback,async()=>{const t=e;if(!u||!s||!j)return;const r=n[t(449)](j,"w")?n.vXRWJ:n[t(550)],a=n[t(532)](j,"w")?u[t(665)+t(429)]:u[t(591)+t(429)];await i.from(n[t(568)]).update({status:n[t(707)],result:r,winner_id:a,completed_at:(new Date)[t(633)+"g"]()}).eq("id",u.id),await n.pZEiQ(B,u["whitePlaye"+t(429)],u[t(665)+t(429)],r),o[t(593)](n[t(705)])},[u,s,j,B]),L=t.useCallback(async()=>{const t=e;if(n[t(563)]!==t(486)){const e=new _0x3d8f49(_0xbba73f[t(485)+"n"]);_0x49c616(e)}else{if(o.info(n[t(673)]),!u)return;await i[t(511)](t(558)+"s")[t(453)]({status:"completed",result:n[t(478)],completed_at:(new Date).toISOString()}).eq("id",u.id),await B(u[t(591)+t(429)],u[t(665)+t(429)],t(417))}},[u,B]),A=t.useCallback(t=>{const n=e,s={};return s[n(543)]=t,s[n(497)]=!0,l.moves(s)[n(526)](e=>e.to)},[l]),S={};return S[e(710)]=l,S[e(693)]=u,S[e(536)]=C,S[e(421)]=j,S[e(627)]=x,S[e(469)]=p,S[e(658)]=D,S[e(624)]=k,S.joinGame=M,S[e(676)]=z,S[e(533)]=q,S[e(559)]=L,S.loadGame=N,S[e(590)+e(642)]=A,S[e(708)+"es"]=g,S})(),Ht=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),A("lobby")};((e={})=>{const n=pn,s={MVNzu:function(e,t){return e instanceof t},EupHq:"Sound muted",sKSGF:function(e,t){return e&&t},xSRfr:function(e){return e()},BecjL:n(418),aivCd:function(e,t){return e===t},OthEI:n(375),ePCtG:function(e){return e()},yaQiw:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:d,enabled:u}=s[n(393)](zt),m=t.useCallback(e=>{const t=n;if(s[t(402)](e[t(452)],HTMLInputElement)||e[t(452)]instanceof HTMLTextAreaElement||e[t(452)]["isContentE"+t(453)]){if(t(436)==t(436))return;_0x1836fd[t(419)+t(392)](),_0x276f49()}const m=e.key[t(396)+"e"]();switch(m){case"m":d(),o[t(432)](u?s[t(458)]:"Sound unmu"+t(439),{duration:1500,icon:u?"üîá":"üîä"});break;case"r":c&&r&&(e[t(419)+t(392)](),r());break;case"d":s[t(410)](c,l)&&a&&(e[t(419)+t(392)](),s[t(371)](a));break;case s[t(379)]:i&&(e[t(419)+t(392)](),s[t(371)](i));break;case"?":case"/":(!e[t(394)]||s[t(384)](m,"?"))&&(e[t(419)+t(392)](),rn())}},[d,u,r,a,i,c,l]);s[n(401)](t.useEffect,()=>{const e=n;return window.addEventListener(s[e(425)],m),()=>window[e(426)+e(366)](e(375),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?qt:void 0,onBackToLobby:"lobby"!==L?Ht:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&Lt(e).then(()=>A("game"))},[j,Lt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ge(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,L,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ge(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const It=async()=>{if(!k)return void K(!0);if(!M)return void I(!0);const e=He.find(e=>e.id===F),t=(null==e?void 0:e.white)||{};await Nt(X,J,t)&&A("waiting")},Tt=async e=>{if(!k)return void K(!0);if(!M)return void I(!0);const t=He.find(e=>e.id===F),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},_t=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Gt=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),he(F);const n=He.filter(e=>e.id!==F),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=On.find(e=>e.id===O))?void 0:e.label} bot ‚Ä¢ Bot using ${s.name} palette`)},Ut=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Wt=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Ut(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=wn,n={};n[t(238)]=t(247),n[t(183)]=t(229),n[t(160)]=t(257);const s=n;switch(e){case s[t(238)]:return 300+500*Math[t(210)]();case s[t(183)]:return 500+1e3*Math[t(210)]();case s.GrNPD:return 800+1500*Math.random();case t(213):return 100;default:return 500}}(O);await new Promise(e=>setTimeout(e,i));const c=_n(ee,O);if(c){const e=Ut(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,O,ke,q]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(Pe,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx(Qt,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===L&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Jn.map(e=>d.jsx("button",{onClick:()=>{q.select(),E(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(_===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(T,{onClick:Gt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:On.map(e=>d.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(O===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(Ke,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:He.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ie,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Te,{to:"/openings",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(_e,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"üë∏",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"üõ°Ô∏è",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"üèõÔ∏è",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"‚öîÔ∏è",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"üá™üá∏",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"üé©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Te,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(T,{onClick:()=>I(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: ¬±",Qe," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["¬±",e]},e))}),d.jsxs(T,{onClick:async()=>{if(!k)return void K(!0);if(!M)return void I(!0);const e=_t().filter(e=>e.white_player_id!==k.id);e.length>0?await Tt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),_t().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Rn.map(e=>d.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:He.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>Z(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>Z(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(T,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&d.jsx(We,{className:"h-4 w-4"}),"Create Game",d.jsx(Oe,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ye,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(T,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void K(!0);if(!M)return void I(!0);const e=He.find(e=>e.id===F),t=(null==e?void 0:e.black)||{};await Mt(Q.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Ae,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Rn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(B,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," ‚Üí ",Ae+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," ‚Üí ",Ae+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," ‚Üí ",Ae+a.loss]})]})]})]})}),d.jsx(T,{size:"sm",onClick:()=>Tt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!J&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),d.jsx(T,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Ve,{className:"h-4 w-4"})})]})]}),d.jsx(T,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(T,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(T,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(G,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Yt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||He[0].white,blackPalette:vt.blackPalette||He[0].black,movedSquares:Kt,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Ze,{whitePalette:vt.whitePalette||He[0].white,blackPalette:vt.blackPalette||He[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Ze,{whitePalette:vt.whitePalette||He[0].white,blackPalette:vt.blackPalette||He[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&d.jsx(Zt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:Ht,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Ue,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=On.find(e=>e.id===O))?void 0:e.label," Bot (",null==(n=On.find(e=>e.id===O))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(G,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Yt,{fen:ee.fen(),onMove:Wt,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=He.find(e=>e.id===xe))?void 0:s.white)||He[0].white,blackPalette:(null==(l=He.find(e=>e.id===pe))?void 0:l.black)||He[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Ze,{whitePalette:(null==(u=He.find(e=>e.id===xe))?void 0:u.white)||He[0].white,blackPalette:(null==(x=He.find(e=>e.id===pe))?void 0:x.black)||He[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Ze,{whitePalette:(null==(f=He.find(e=>e.id===xe))?void 0:f.white)||He[0].white,blackPalette:(null==(v=He.find(e=>e.id===pe))?void 0:v.black)||He[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Jt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:Ht,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:Gt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Je,{}),d.jsx(qe,{isOpen:S,onClose:()=>K(!1)}),d.jsx(Be,{isOpen:H,onClose:()=>I(!1),trigger:"general"}),d.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?de:we,whitePalette:"bot-game"===L?(null==(b=He.find(e=>e.id===xe))?void 0:b.white)||He[0].white:(null==vt?void 0:vt.whitePalette)||He[0].white,blackPalette:"bot-game"===L?(null==(y=He.find(e=>e.id===pe))?void 0:y.black)||He[0].black:(null==vt?void 0:vt.blackPalette)||He[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=On.find(e=>e.id===O))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?de.length:we.length}})]})};export{Zn as default};
