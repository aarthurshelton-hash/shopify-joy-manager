const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/printImageGenerator-yhMAt_WZ.js","assets/browser-DhmD84ER.js","assets/visualizationStorage-CNvw0MDn.js","assets/visualizationSchemas-B0jKNzfp.js","assets/flagContent-DutS32af.js","assets/MyPalettes-cs59ko9r.js","assets/calendar-BGH9_Q6t.js","assets/circle-play-CGMpG_Fs.js","assets/MyVision-V3Aqa4XQ.js","assets/useMarketplaceRealtime-D-ff2NwR.js","assets/circle-alert-D9NCoECY.js","assets/GracePeriodBanner-PYWI_edr.js","assets/alert-BVWwCtCD.js","assets/tag-DCn1Vm0u.js","assets/About-CZtBACU7.js","assets/RoyaltyCalculator-crl9-wxg.js","assets/StrategicPositioningBanner-ClzPHnMX.js","assets/lightbulb-jKhOy1Sd.js","assets/scan-line-BkUqeumV.js","assets/Investors-ByC4c675.js","assets/send-CAk1dJeK.js","assets/jspdf.es.min-5NRR1m1w.js","assets/Analytics-mj0rqp0R.js","assets/mouse-pointer-BejDgKqe.js","assets/beaker-CyU0kori.js","assets/Leaderboard-Dl0ov8MN.js","assets/eloCalculator-BBlzI_Sc.js","assets/rocket-Bcm1WBbA.js","assets/medal-CbJdkmC_.js","assets/Play-bDlMh7pn.js","assets/LiveColorLegend-DF7IMJDO.js","assets/html2canvas.esm-C2s7aB6S.js","assets/sun-D5z4W9t9.js","assets/CreativeMode-D5Y0MnKR.js","assets/GameHistory-Ogy8Y_to.js","assets/QRMockup-CbW5TwL3.js","assets/OrderPrint-CcE8VPTF.js","assets/briefcase-BZAygRsP.js","assets/Marketplace-djDqF-Ix.js","assets/accordion-ZyJjS899.js","assets/checkbox-B96EettH.js","assets/AdminModeration-GOVjgd_d.js","assets/AdminEconomics-CmiAE7NE.js","assets/useMutation-Cxdp5RMb.js","assets/table-CsUCwZyo.js","assets/chart-pie-wx6plXFl.js","assets/PieChart-C6PslzpR.js","assets/BarChart-ClExycNL.js","assets/Account-DoIcZ4vU.js","assets/message-square-AOUNc0WH.js","assets/BookGenerator-BRsKPBU8.js","assets/EducationFund-DkaLQRKx.js","assets/CreatorDashboard-DPST0BRG.js","assets/AdminWithdrawals-BMAmJUuw.js","assets/AdminDMCA-gh_5ZLdV.js","assets/file-warning-BaZaRFh0.js","assets/AdminWatermarkVerification-DWLgxFSx.js","assets/AdminBatchWatermarkVerification-kPaJmoDI.js","assets/DMCACounterNotification-CYDeO2Vn.js","assets/DMCAStatusTracking-MSzzk5SQ.js","assets/VisionScannerPage-Bgu7IQwc.js","assets/cloud-C5tVnJuf.js","assets/wifi-off-cvigRrv-.js","assets/DMCA-Cg6B4Hhk.js","assets/PremiumAnalytics-ByHuHnoV.js","assets/AdminCEODashboard-COkSGBuB.js","assets/useUnifiedTelemetry-C1mZ35A_.js","assets/waves-Dk3vicne.js","assets/git-branch-DMc7VJMW.js","assets/file-code-D4DUhgXs.js","assets/radio-D7XGh75h.js","assets/AdminAIArtBank-C88H2GCs.js","assets/CodeAnalysis-BjliSulv.js","assets/hash-DnEqzyMf.js","assets/InventorCredits-CCXh6kPa.js","assets/SDKDocs-Cn3zdf8g.js","assets/SharedAnalysisReport-CWF9rO-p.js","assets/InvestorPortal-BN5CNpMd.js","assets/StockPredictions-B-BbMD7w.js","assets/wifi-BSy6Ig4J.js","assets/StrategicPlan-TOxV0W8s.js","assets/ScalpingTerminalPage-DTLAvQtx.js","assets/Showcase-CC-ItQZ5.js","assets/AdminSystemVitals-D5oWTV_l.js","assets/server-DL9FKFmi.js","assets/Benchmark-DR5eyCvF.js","assets/ProofDashboard-Cz4XNwLm.js","assets/Benchmark-GEVBzDnp.css","assets/ProofCenter-BwcNk0W0.js"])))=>i.map(i=>d[i]);
var e,t,n,r,a,i,s,o,l,c,u,d,h,p,m,f,g,y,v,x,b,w,k,N,j,_,S,C,P,E,R,O,T,M,A,B,D,I,L,F,$,z,q,V,W,Q,U,K,H,G,Y,Z,X,J,ee,te,ne,re,ae,ie,se,oe,le,ce,ue,de,he,pe=Object.defineProperty,me=e=>{throw TypeError(e)},fe=(e,t,n)=>((e,t,n)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),ge=(e,t,n)=>t.has(e)||me("Cannot "+n),ye=(e,t,n)=>(ge(e,t,"read from private field"),n?n.call(e):t.get(e)),ve=(e,t,n)=>t.has(e)?me("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),xe=(e,t,n,r)=>(ge(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),be=(e,t,n)=>(ge(e,t,"access private method"),n),we=(e,t,n,r)=>({set _(r){xe(e,t,r,n)},get _(){return ye(e,t,r)}});function ke(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function je(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _e={exports:{}},Se={},Ce={exports:{}},Pe={},Ee=Symbol.for("react.element"),Re=Symbol.for("react.portal"),Oe=Symbol.for("react.fragment"),Te=Symbol.for("react.strict_mode"),Me=Symbol.for("react.profiler"),Ae=Symbol.for("react.provider"),Be=Symbol.for("react.context"),De=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Le=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),$e=Symbol.iterator;var ze={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qe=Object.assign,Ve={};function We(e,t,n){this.props=e,this.context=t,this.refs=Ve,this.updater=n||ze}function Qe(){}function Ue(e,t,n){this.props=e,this.context=t,this.refs=Ve,this.updater=n||ze}We.prototype.isReactComponent={},We.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},We.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Qe.prototype=We.prototype;var Ke=Ue.prototype=new Qe;Ke.constructor=Ue,qe(Ke,We.prototype),Ke.isPureReactComponent=!0;var He=Array.isArray,Ge=Object.prototype.hasOwnProperty,Ye={current:null},Ze={key:!0,ref:!0,__self:!0,__source:!0};function Xe(e,t,n){var r,a={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)Ge.call(t,r)&&!Ze.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===a[r]&&(a[r]=o[r]);return{$$typeof:Ee,type:e,key:i,ref:s,props:a,_owner:Ye.current}}function Je(e){return"object"==typeof e&&null!==e&&e.$$typeof===Ee}var et=/\/+/g;function tt(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function nt(e,t,n,r,a){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ee:case Re:s=!0}}if(s)return a=a(s=e),e=""===r?"."+tt(s,0):r,He(a)?(n="",null!=e&&(n=e.replace(et,"$&/")+"/"),nt(a,t,n,"",function(e){return e})):null!=a&&(Je(a)&&(a=function(e,t){return{$$typeof:Ee,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(et,"$&/")+"/")+e)),t.push(a)),1;if(s=0,r=""===r?".":r+":",He(e))for(var o=0;o<e.length;o++){var l=r+tt(i=e[o],o);s+=nt(i,t,n,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=$e&&e[$e]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(i=e.next()).done;)s+=nt(i=i.value,t,n,l=r+tt(i,o++),a);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function rt(e,t,n){if(null==e)return e;var r=[],a=0;return nt(e,r,"","",function(e){return t.call(n,e,a++)}),r}function at(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var it={current:null},st={transition:null},ot={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:st,ReactCurrentOwner:Ye};function lt(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:rt,forEach:function(e,t,n){rt(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rt(e,function(){t++}),t},toArray:function(e){return rt(e,function(e){return e})||[]},only:function(e){if(!Je(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Pe.Component=We,Pe.Fragment=Oe,Pe.Profiler=Me,Pe.PureComponent=Ue,Pe.StrictMode=Te,Pe.Suspense=Ie,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ot,Pe.act=lt,Pe.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=qe({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=Ye.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Ge.call(t,l)&&!Ze.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Ee,type:e.type,key:a,ref:i,props:r,_owner:s}},Pe.createContext=function(e){return(e={$$typeof:Be,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Ae,_context:e},e.Consumer=e},Pe.createElement=Xe,Pe.createFactory=function(e){var t=Xe.bind(null,e);return t.type=e,t},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(e){return{$$typeof:De,render:e}},Pe.isValidElement=Je,Pe.lazy=function(e){return{$$typeof:Fe,_payload:{_status:-1,_result:e},_init:at}},Pe.memo=function(e,t){return{$$typeof:Le,type:e,compare:void 0===t?null:t}},Pe.startTransition=function(e){var t=st.transition;st.transition={};try{e()}finally{st.transition=t}},Pe.unstable_act=lt,Pe.useCallback=function(e,t){return it.current.useCallback(e,t)},Pe.useContext=function(e){return it.current.useContext(e)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(e){return it.current.useDeferredValue(e)},Pe.useEffect=function(e,t){return it.current.useEffect(e,t)},Pe.useId=function(){return it.current.useId()},Pe.useImperativeHandle=function(e,t,n){return it.current.useImperativeHandle(e,t,n)},Pe.useInsertionEffect=function(e,t){return it.current.useInsertionEffect(e,t)},Pe.useLayoutEffect=function(e,t){return it.current.useLayoutEffect(e,t)},Pe.useMemo=function(e,t){return it.current.useMemo(e,t)},Pe.useReducer=function(e,t,n){return it.current.useReducer(e,t,n)},Pe.useRef=function(e){return it.current.useRef(e)},Pe.useState=function(e){return it.current.useState(e)},Pe.useSyncExternalStore=function(e,t,n){return it.current.useSyncExternalStore(e,t,n)},Pe.useTransition=function(){return it.current.useTransition()},Pe.version="18.3.1",Ce.exports=Pe;var ct=Ce.exports;const ut=je(ct),dt=ke({__proto__:null,default:ut},[ct]);var ht=ct,pt=Symbol.for("react.element"),mt=Symbol.for("react.fragment"),ft=Object.prototype.hasOwnProperty,gt=ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yt={key:!0,ref:!0,__self:!0,__source:!0};function vt(e,t,n){var r,a={},i=null,s=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(s=t.ref),t)ft.call(t,r)&&!yt.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:pt,type:e,key:i,ref:s,props:a,_owner:gt.current}}Se.Fragment=mt,Se.jsx=vt,Se.jsxs=vt,_e.exports=Se;var xt=_e.exports,bt={},wt={exports:{}},kt={},Nt={exports:{}},jt={};!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,f=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(l,a)}a=n(c)}}function b(e){if(f=!1,x(e),!m)if(null!==n(l))m=!0,T(w);else{var t=n(c);null!==t&&M(b,t.startTime-e)}}function w(t,a){m=!1,f&&(f=!1,y(_),_=-1),p=!0;var i=h;try{for(x(a),d=n(l);null!==d&&(!(d.expirationTime>a)||t&&!P());){var s=d.callback;if("function"==typeof s){d.callback=null,h=d.priorityLevel;var o=s(d.expirationTime<=a);a=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),x(a)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&M(b,g.startTime-a),u=!1}return u}finally{d=null,h=i,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,j=null,_=-1,S=5,C=-1;function P(){return!(e.unstable_now()-C<S)}function E(){if(null!==j){var t=e.unstable_now();C=t;var n=!0;try{n=j(!0,t)}finally{n?k():(N=!1,j=null)}}else N=!1}if("function"==typeof v)k=function(){v(E)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=E,k=function(){O.postMessage(null)}}else k=function(){g(E,0)};function T(e){j=e,N||(N=!0,k())}function M(t,n){_=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,T(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(S=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,a,i){var s=e.unstable_now();switch("object"==typeof i&&null!==i?i="number"==typeof(i=i.delay)&&0<i?s+i:s:i=s,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(r.sortIndex=i,t(c,r),null===n(l)&&r===n(c)&&(f?(y(_),_=-1):f=!0,M(b,i-s))):(r.sortIndex=o,t(l,r),m||p||(m=!0,T(w))),r},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(jt),Nt.exports=jt;var _t=Nt.exports,St=ct,Ct=_t;function Pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Et=new Set,Rt={};function Ot(e,t){Tt(e,t),Tt(e+"Capture",t)}function Tt(e,t){for(Rt[e]=t,e=0;e<t.length;e++)Et.add(t[e])}var Mt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),At=Object.prototype.hasOwnProperty,Bt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dt={},It={};function Lt(e,t,n,r,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ft[e]=new Lt(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ft[t]=new Lt(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ft[e]=new Lt(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ft[e]=new Lt(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ft[e]=new Lt(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){Ft[e]=new Lt(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){Ft[e]=new Lt(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){Ft[e]=new Lt(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){Ft[e]=new Lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var $t=/[\-:]([a-z])/g;function zt(e){return e[1].toUpperCase()}function qt(e,t,n,r){var a=Ft.hasOwnProperty(t)?Ft[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!At.call(It,e)||!At.call(Dt,e)&&(Bt.test(e)?It[e]=!0:(Dt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($t,zt);Ft[t]=new Lt(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($t,zt);Ft[t]=new Lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($t,zt);Ft[t]=new Lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){Ft[e]=new Lt(e,1,!1,e.toLowerCase(),null,!1,!1)}),Ft.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){Ft[e]=new Lt(e,1,!1,e.toLowerCase(),null,!0,!0)});var Vt=St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wt=Symbol.for("react.element"),Qt=Symbol.for("react.portal"),Ut=Symbol.for("react.fragment"),Kt=Symbol.for("react.strict_mode"),Ht=Symbol.for("react.profiler"),Gt=Symbol.for("react.provider"),Yt=Symbol.for("react.context"),Zt=Symbol.for("react.forward_ref"),Xt=Symbol.for("react.suspense"),Jt=Symbol.for("react.suspense_list"),en=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),nn=Symbol.for("react.offscreen"),rn=Symbol.iterator;function an(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=rn&&e[rn]||e["@@iterator"])?e:null}var sn,on=Object.assign;function ln(e){if(void 0===sn)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);sn=t&&t[1]||""}return"\n"+sn+e}var cn=!1;function un(e,t){if(!e||cn)return"";cn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{cn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ln(e):""}function dn(e){switch(e.tag){case 5:return ln(e.type);case 16:return ln("Lazy");case 13:return ln("Suspense");case 19:return ln("SuspenseList");case 0:case 2:case 15:return e=un(e.type,!1);case 11:return e=un(e.type.render,!1);case 1:return e=un(e.type,!0);default:return""}}function hn(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ut:return"Fragment";case Qt:return"Portal";case Ht:return"Profiler";case Kt:return"StrictMode";case Xt:return"Suspense";case Jt:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Yt:return(e.displayName||"Context")+".Consumer";case Gt:return(e._context.displayName||"Context")+".Provider";case Zt:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case en:return null!==(t=e.displayName||null)?t:hn(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return hn(e(t))}catch(n){}}return null}function pn(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hn(t);case 8:return t===Kt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function fn(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function gn(e){e._valueTracker||(e._valueTracker=function(e){var t=fn(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function yn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=fn(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function vn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function xn(e,t){var n=t.checked;return on({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function bn(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=mn(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function wn(e,t){null!=(t=t.checked)&&qt(e,"checked",t,!1)}function kn(e,t){wn(e,t);var n=mn(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?jn(e,t.type,n):t.hasOwnProperty("defaultValue")&&jn(e,t.type,mn(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Nn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function jn(e,t,n){"number"===t&&vn(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _n=Array.isArray;function Sn(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+mn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function Cn(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Pt(91));return on({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pn(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Pt(92));if(_n(n)){if(1<n.length)throw Error(Pt(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:mn(n)}}function En(e,t){var n=mn(t.value),r=mn(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Rn(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function On(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tn(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?On(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Mn,An,Bn=(An=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Mn=Mn||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return An(e,t)})}:An);function Dn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ln=["Webkit","ms","Moz","O"];function Fn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||In.hasOwnProperty(e)&&In[e]?(""+t).trim():t+"px"}function $n(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Fn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(In).forEach(function(e){Ln.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),In[t]=In[e]})});var zn=on({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(e,t){if(t){if(zn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Pt(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Pt(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pt(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Pt(62))}}function Vn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wn=null;function Qn(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Un=null,Kn=null,Hn=null;function Gn(e){if(e=qs(e)){if("function"!=typeof Un)throw Error(Pt(280));var t=e.stateNode;t&&(t=Ws(t),Un(e.stateNode,e.type,t))}}function Yn(e){Kn?Hn?Hn.push(e):Hn=[e]:Kn=e}function Zn(){if(Kn){var e=Kn,t=Hn;if(Hn=Kn=null,Gn(e),t)for(e=0;e<t.length;e++)Gn(t[e])}}function Xn(e,t){return e(t)}function Jn(){}var er=!1;function tr(e,t,n){if(er)return e(t,n);er=!0;try{return Xn(e,t,n)}finally{er=!1,(null!==Kn||null!==Hn)&&(Jn(),Zn())}}function nr(e,t){var n=e.stateNode;if(null===n)return null;var r=Ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Pt(231,t,typeof n));return n}var rr=!1;if(Mt)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){rr=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch(An){rr=!1}function ir(e,t,n,r,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var sr=!1,or=null,lr=!1,cr=null,ur={onError:function(e){sr=!0,or=e}};function dr(e,t,n,r,a,i,s,o,l){sr=!1,or=null,ir.apply(ur,arguments)}function hr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function pr(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function mr(e){if(hr(e)!==e)throw Error(Pt(188))}function fr(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=hr(e)))throw Error(Pt(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return mr(a),e;if(i===r)return mr(a),t;i=i.sibling}throw Error(Pt(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s)throw Error(Pt(189))}}if(n.alternate!==r)throw Error(Pt(190))}if(3!==n.tag)throw Error(Pt(188));return n.stateNode.current===n?e:t}(e))?gr(e):null}function gr(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=gr(e);if(null!==t)return t;e=e.sibling}return null}var yr=Ct.unstable_scheduleCallback,vr=Ct.unstable_cancelCallback,xr=Ct.unstable_shouldYield,br=Ct.unstable_requestPaint,wr=Ct.unstable_now,kr=Ct.unstable_getCurrentPriorityLevel,Nr=Ct.unstable_ImmediatePriority,jr=Ct.unstable_UserBlockingPriority,_r=Ct.unstable_NormalPriority,Sr=Ct.unstable_LowPriority,Cr=Ct.unstable_IdlePriority,Pr=null,Er=null;var Rr=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(Or(e)/Tr|0)|0},Or=Math.log,Tr=Math.LN2;var Mr=64,Ar=4194304;function Br(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dr(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~a;0!==o?r=Br(o):0!==(i&=s)&&(r=Br(i))}else 0!==(s=n&~a)?r=Br(s):0!==i&&(r=Br(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&4194240&i))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Rr(t)),r|=e[n],t&=~a;return r}function Ir(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Lr(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Fr(){var e=Mr;return!(4194240&(Mr<<=1))&&(Mr=64),e}function $r(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zr(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-Rr(t)]=n}function qr(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Rr(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Vr=0;function Wr(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Qr,Ur,Kr,Hr,Gr,Yr=!1,Zr=[],Xr=null,Jr=null,ea=null,ta=new Map,na=new Map,ra=[],aa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ia(e,t){switch(e){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":ta.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(t.pointerId)}}function sa(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=qs(t))&&Ur(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function oa(e){var t=zs(e.target);if(null!==t){var n=hr(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=pr(n)))return e.blockedOn=t,void Gr(e.priority,function(){Kr(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function la(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=xa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=qs(n))&&Ur(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Wn=r,n.target.dispatchEvent(r),Wn=null,t.shift()}return!0}function ca(e,t,n){la(e)&&n.delete(t)}function ua(){Yr=!1,null!==Xr&&la(Xr)&&(Xr=null),null!==Jr&&la(Jr)&&(Jr=null),null!==ea&&la(ea)&&(ea=null),ta.forEach(ca),na.forEach(ca)}function da(e,t){e.blockedOn===t&&(e.blockedOn=null,Yr||(Yr=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,ua)))}function ha(e){function t(t){return da(t,e)}if(0<Zr.length){da(Zr[0],e);for(var n=1;n<Zr.length;n++){var r=Zr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Xr&&da(Xr,e),null!==Jr&&da(Jr,e),null!==ea&&da(ea,e),ta.forEach(t),na.forEach(t),n=0;n<ra.length;n++)(r=ra[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ra.length&&null===(n=ra[0]).blockedOn;)oa(n),null===n.blockedOn&&ra.shift()}var pa=Vt.ReactCurrentBatchConfig,ma=!0;function fa(e,t,n,r){var a=Vr,i=pa.transition;pa.transition=null;try{Vr=1,ya(e,t,n,r)}finally{Vr=a,pa.transition=i}}function ga(e,t,n,r){var a=Vr,i=pa.transition;pa.transition=null;try{Vr=4,ya(e,t,n,r)}finally{Vr=a,pa.transition=i}}function ya(e,t,n,r){if(ma){var a=xa(e,t,n,r);if(null===a)ps(e,t,r,va,n),ia(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Xr=sa(Xr,e,t,n,r,a),!0;case"dragenter":return Jr=sa(Jr,e,t,n,r,a),!0;case"mouseover":return ea=sa(ea,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return ta.set(i,sa(ta.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,na.set(i,sa(na.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(ia(e,r),4&t&&-1<aa.indexOf(e)){for(;null!==a;){var i=qs(a);if(null!==i&&Qr(i),null===(i=xa(e,t,n,r))&&ps(e,t,r,va,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else ps(e,t,r,null,n)}}var va=null;function xa(e,t,n,r){if(va=null,null!==(e=zs(e=Qn(r))))if(null===(t=hr(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=pr(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return va=e,null}function ba(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kr()){case Nr:return 1;case jr:return 4;case _r:case Sr:return 16;case Cr:return 536870912;default:return 16}default:return 16}}var wa=null,ka=null,Na=null;function ja(){if(Na)return Na;var e,t,n=ka,r=n.length,a="value"in wa?wa.value:wa.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return Na=a.slice(e,1<t?1-t:void 0)}function _a(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Sa(){return!0}function Ca(){return!1}function Pa(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Sa:Ca,this.isPropagationStopped=Ca,this}return on(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),t}var Ea,Ra,Oa,Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ma=Pa(Ta),Aa=on({},Ta,{view:0,detail:0}),Ba=Pa(Aa),Da=on({},Aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ha,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oa&&(Oa&&"mousemove"===e.type?(Ea=e.screenX-Oa.screenX,Ra=e.screenY-Oa.screenY):Ra=Ea=0,Oa=e),Ea)},movementY:function(e){return"movementY"in e?e.movementY:Ra}}),Ia=Pa(Da),La=Pa(on({},Da,{dataTransfer:0})),Fa=Pa(on({},Aa,{relatedTarget:0})),$a=Pa(on({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0})),za=on({},Ta,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qa=Pa(za),Va=Pa(on({},Ta,{data:0})),Wa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ua={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ka(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ua[e])&&!!t[e]}function Ha(){return Ka}var Ga=on({},Aa,{key:function(e){if(e.key){var t=Wa[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=_a(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Qa[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ha,charCode:function(e){return"keypress"===e.type?_a(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?_a(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ya=Pa(Ga),Za=Pa(on({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Xa=Pa(on({},Aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ha})),Ja=Pa(on({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0})),ei=on({},Da,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ti=Pa(ei),ni=[9,13,27,32],ri=Mt&&"CompositionEvent"in window,ai=null;Mt&&"documentMode"in document&&(ai=document.documentMode);var ii=Mt&&"TextEvent"in window&&!ai,si=Mt&&(!ri||ai&&8<ai&&11>=ai),oi=String.fromCharCode(32),li=!1;function ci(e,t){switch(e){case"keyup":return-1!==ni.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ui(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var di=!1;var hi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!hi[e.type]:"textarea"===t}function mi(e,t,n,r){Yn(r),0<(t=fs(t,"onChange")).length&&(n=new Ma("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fi=null,gi=null;function yi(e){os(e,0)}function vi(e){if(yn(Vs(e)))return e}function xi(e,t){if("change"===e)return t}var bi=!1;if(Mt){var wi;if(Mt){var ki="oninput"in document;if(!ki){var Ni=document.createElement("div");Ni.setAttribute("oninput","return;"),ki="function"==typeof Ni.oninput}wi=ki}else wi=!1;bi=wi&&(!document.documentMode||9<document.documentMode)}function ji(){fi&&(fi.detachEvent("onpropertychange",_i),gi=fi=null)}function _i(e){if("value"===e.propertyName&&vi(gi)){var t=[];mi(t,gi,e,Qn(e)),tr(yi,t)}}function Si(e,t,n){"focusin"===e?(ji(),gi=n,(fi=t).attachEvent("onpropertychange",_i)):"focusout"===e&&ji()}function Ci(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return vi(gi)}function Pi(e,t){if("click"===e)return vi(t)}function Ei(e,t){if("input"===e||"change"===e)return vi(t)}var Ri="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Oi(e,t){if(Ri(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!At.call(t,a)||!Ri(e[a],t[a]))return!1}return!0}function Ti(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mi(e,t){var n,r=Ti(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ti(r)}}function Ai(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ai(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Bi(){for(var e=window,t=vn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=vn((e=t.contentWindow).document)}return t}function Di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Ii(e){var t=Bi(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ai(n.ownerDocument.documentElement,n)){if(null!==r&&Di(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=Mi(n,i);var s=Mi(n,r);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Li=Mt&&"documentMode"in document&&11>=document.documentMode,Fi=null,$i=null,zi=null,qi=!1;function Vi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;qi||null==Fi||Fi!==vn(r)||("selectionStart"in(r=Fi)&&Di(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},zi&&Oi(zi,r)||(zi=r,0<(r=fs($i,"onSelect")).length&&(t=new Ma("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Fi)))}function Wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qi={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionend:Wi("Transition","TransitionEnd")},Ui={},Ki={};function Hi(e){if(Ui[e])return Ui[e];if(!Qi[e])return e;var t,n=Qi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ki)return Ui[e]=n[t];return e}Mt&&(Ki=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);var Gi=Hi("animationend"),Yi=Hi("animationiteration"),Zi=Hi("animationstart"),Xi=Hi("transitionend"),Ji=new Map,es="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(e,t){Ji.set(e,t),Ot(t,[e])}for(var ns=0;ns<es.length;ns++){var rs=es[ns];ts(rs.toLowerCase(),"on"+(rs[0].toUpperCase()+rs.slice(1)))}ts(Gi,"onAnimationEnd"),ts(Yi,"onAnimationIteration"),ts(Zi,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(Xi,"onTransitionEnd"),Tt("onMouseEnter",["mouseout","mouseover"]),Tt("onMouseLeave",["mouseout","mouseover"]),Tt("onPointerEnter",["pointerout","pointerover"]),Tt("onPointerLeave",["pointerout","pointerover"]),Ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),is=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function ss(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,o,l){if(dr.apply(this,arguments),sr){if(!sr)throw Error(Pt(198));var c=or;sr=!1,or=null,lr||(lr=!0,cr=c)}}(r,t,void 0,e),e.currentTarget=null}function os(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;ss(a,o,c),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;ss(a,o,c),i=l}}}if(lr)throw e=cr,lr=!1,cr=null,e}function ls(e,t){var n=t[Ls];void 0===n&&(n=t[Ls]=new Set);var r=e+"__bubble";n.has(r)||(hs(t,e,2,!1),n.add(r))}function cs(e,t,n){var r=0;t&&(r|=4),hs(n,e,r,t)}var us="_reactListening"+Math.random().toString(36).slice(2);function ds(e){if(!e[us]){e[us]=!0,Et.forEach(function(t){"selectionchange"!==t&&(is.has(t)||cs(t,!1,e),cs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[us]||(t[us]=!0,cs("selectionchange",!1,t))}}function hs(e,t,n,r){switch(ba(t)){case 1:var a=fa;break;case 4:a=ga;break;default:a=ya}n=a.bind(null,t,n,e),a=void 0,!rr||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ps(e,t,n,r,a){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=zs(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}tr(function(){var r=i,a=Qn(n),s=[];e:{var o=Ji.get(e);if(void 0!==o){var l=Ma,c=e;switch(e){case"keypress":if(0===_a(n))break e;case"keydown":case"keyup":l=Ya;break;case"focusin":c="focus",l=Fa;break;case"focusout":c="blur",l=Fa;break;case"beforeblur":case"afterblur":l=Fa;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=La;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Xa;break;case Gi:case Yi:case Zi:l=$a;break;case Xi:l=Ja;break;case"scroll":l=Ba;break;case"wheel":l=ti;break;case"copy":case"cut":case"paste":l=qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Za}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=nr(m,h))&&u.push(ms(m,f,p)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,a),s.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Wn||!(c=n.relatedTarget||n.fromElement)||!zs(c)&&!c[Is])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?zs(c):null)&&(c!==(d=hr(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=Ia,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Za,f="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:Vs(l),p=null==c?o:Vs(c),(o=new u(f,m+"leave",l,n,a)).target=d,o.relatedTarget=p,f=null,zs(a)===r&&((u=new u(h,m+"enter",c,n,a)).target=p,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,m=0,p=u=l;p;p=gs(p))m++;for(p=0,f=h;f;f=gs(f))p++;for(;0<m-p;)u=gs(u),m--;for(;0<p-m;)h=gs(h),p--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=gs(u),h=gs(h)}u=null}else u=null;null!==l&&ys(s,o,l,u,!1),null!==c&&null!==d&&ys(s,d,c,u,!0)}if("select"===(l=(o=r?Vs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=xi;else if(pi(o))if(bi)g=Ei;else{g=Ci;var y=Si}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=Pi);switch(g&&(g=g(e,r))?mi(s,g,n,a):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&jn(o,"number",o.value)),y=r?Vs(r):window,e){case"focusin":(pi(y)||"true"===y.contentEditable)&&(Fi=y,$i=r,zi=null);break;case"focusout":zi=$i=Fi=null;break;case"mousedown":qi=!0;break;case"contextmenu":case"mouseup":case"dragend":qi=!1,Vi(s,n,a);break;case"selectionchange":if(Li)break;case"keydown":case"keyup":Vi(s,n,a)}var v;if(ri)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else di?ci(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(si&&"ko"!==n.locale&&(di||"onCompositionStart"!==x?"onCompositionEnd"===x&&di&&(v=ja()):(ka="value"in(wa=a)?wa.value:wa.textContent,di=!0)),0<(y=fs(r,x)).length&&(x=new Va(x,e,null,n,a),s.push({event:x,listeners:y}),v?x.data=v:null!==(v=ui(n))&&(x.data=v))),(v=ii?function(e,t){switch(e){case"compositionend":return ui(t);case"keypress":return 32!==t.which?null:(li=!0,oi);case"textInput":return(e=t.data)===oi&&li?null:e;default:return null}}(e,n):function(e,t){if(di)return"compositionend"===e||!ri&&ci(e,t)?(e=ja(),Na=ka=wa=null,di=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return si&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=fs(r,"onBeforeInput")).length&&(a=new Va("onBeforeInput","beforeinput",null,n,a),s.push({event:a,listeners:r}),a.data=v))}os(s,t)})}function ms(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fs(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=nr(e,n))&&r.unshift(ms(e,i,a)),null!=(i=nr(e,t))&&r.push(ms(e,i,a))),e=e.return}return r}function gs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function ys(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=nr(n,i))&&s.unshift(ms(n,l,o)):a||null!=(l=nr(n,i))&&s.push(ms(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var vs=/\r\n?/g,xs=/\u0000|\uFFFD/g;function bs(e){return("string"==typeof e?e:""+e).replace(vs,"\n").replace(xs,"")}function ws(e,t,n){if(t=bs(t),bs(e)!==t&&n)throw Error(Pt(425))}function ks(){}var Ns=null,js=null;function _s(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ss="function"==typeof setTimeout?setTimeout:void 0,Cs="function"==typeof clearTimeout?clearTimeout:void 0,Ps="function"==typeof Promise?Promise:void 0,Es="function"==typeof queueMicrotask?queueMicrotask:void 0!==Ps?function(e){return Ps.resolve(null).then(e).catch(Rs)}:Ss;function Rs(e){setTimeout(function(){throw e})}function Os(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void ha(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);ha(t)}function Ts(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Ms(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var As=Math.random().toString(36).slice(2),Bs="__reactFiber$"+As,Ds="__reactProps$"+As,Is="__reactContainer$"+As,Ls="__reactEvents$"+As,Fs="__reactListeners$"+As,$s="__reactHandles$"+As;function zs(e){var t=e[Bs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Is]||n[Bs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ms(e);null!==e;){if(n=e[Bs])return n;e=Ms(e)}return t}n=(e=n).parentNode}return null}function qs(e){return!(e=e[Bs]||e[Is])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Pt(33))}function Ws(e){return e[Ds]||null}var Qs=[],Us=-1;function Ks(e){return{current:e}}function Hs(e){0>Us||(e.current=Qs[Us],Qs[Us]=null,Us--)}function Gs(e,t){Us++,Qs[Us]=e.current,e.current=t}var Ys={},Zs=Ks(Ys),Xs=Ks(!1),Js=Ys;function eo(e,t){var n=e.type.contextTypes;if(!n)return Ys;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function to(e){return null!=(e=e.childContextTypes)}function no(){Hs(Xs),Hs(Zs)}function ro(e,t,n){if(Zs.current!==Ys)throw Error(Pt(168));Gs(Zs,t),Gs(Xs,n)}function ao(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(Pt(108,pn(e)||"Unknown",a));return on({},n,r)}function io(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ys,Js=Zs.current,Gs(Zs,e),Gs(Xs,Xs.current),!0}function so(e,t,n){var r=e.stateNode;if(!r)throw Error(Pt(169));n?(e=ao(e,t,Js),r.__reactInternalMemoizedMergedChildContext=e,Hs(Xs),Hs(Zs),Gs(Zs,e)):Hs(Xs),Gs(Xs,n)}var oo=null,lo=!1,co=!1;function uo(e){null===oo?oo=[e]:oo.push(e)}function ho(){if(!co&&null!==oo){co=!0;var e=0,t=Vr;try{var n=oo;for(Vr=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}oo=null,lo=!1}catch(a){throw null!==oo&&(oo=oo.slice(e+1)),yr(Nr,ho),a}finally{Vr=t,co=!1}}return null}var po=[],mo=0,fo=null,go=0,yo=[],vo=0,xo=null,bo=1,wo="";function ko(e,t){po[mo++]=go,po[mo++]=fo,fo=e,go=t}function No(e,t,n){yo[vo++]=bo,yo[vo++]=wo,yo[vo++]=xo,xo=e;var r=bo;e=wo;var a=32-Rr(r)-1;r&=~(1<<a),n+=1;var i=32-Rr(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,bo=1<<32-Rr(t)+a|n<<a|r,wo=i+e}else bo=1<<i|n<<a|r,wo=e}function jo(e){null!==e.return&&(ko(e,1),No(e,1,0))}function _o(e){for(;e===fo;)fo=po[--mo],po[mo]=null,go=po[--mo],po[mo]=null;for(;e===xo;)xo=yo[--vo],yo[vo]=null,wo=yo[--vo],yo[vo]=null,bo=yo[--vo],yo[vo]=null}var So=null,Co=null,Po=!1,Eo=null;function Ro(e,t){var n=Jd(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Oo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,So=e,Co=Ts(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,So=e,Co=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xo?{id:bo,overflow:wo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Jd(18,null,null,0)).stateNode=t,n.return=e,e.child=n,So=e,Co=null,!0);default:return!1}}function To(e){return!(!(1&e.mode)||128&e.flags)}function Mo(e){if(Po){var t=Co;if(t){var n=t;if(!Oo(e,t)){if(To(e))throw Error(Pt(418));t=Ts(n.nextSibling);var r=So;t&&Oo(e,t)?Ro(r,n):(e.flags=-4097&e.flags|2,Po=!1,So=e)}}else{if(To(e))throw Error(Pt(418));e.flags=-4097&e.flags|2,Po=!1,So=e}}}function Ao(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;So=e}function Bo(e){if(e!==So)return!1;if(!Po)return Ao(e),Po=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!_s(e.type,e.memoizedProps)),t&&(t=Co)){if(To(e))throw Do(),Error(Pt(418));for(;t;)Ro(e,t),t=Ts(t.nextSibling)}if(Ao(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Pt(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Co=Ts(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Co=null}}else Co=So?Ts(e.stateNode.nextSibling):null;return!0}function Do(){for(var e=Co;e;)e=Ts(e.nextSibling)}function Io(){Co=So=null,Po=!1}function Lo(e){null===Eo?Eo=[e]:Eo.push(e)}var Fo=Vt.ReactCurrentBatchConfig;function $o(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Pt(309));var r=n.stateNode}if(!r)throw Error(Pt(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(Pt(284));if(!n._owner)throw Error(Pt(290,e))}return e}function zo(e,t){throw e=Object.prototype.toString.call(t),Error(Pt(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qo(e){return(0,e._init)(e._payload)}function Vo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=th(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=ih(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===Ut?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===tn&&qo(i)===t.type)?((r=a(t,n.props)).ref=$o(e,t,n),r.return=e,r):((r=nh(n.type,n.key,n.props,null,e.mode,r)).ref=$o(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=sh(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=rh(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=ih(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Wt:return(n=nh(t.type,t.key,t.props,null,e.mode,n)).ref=$o(e,null,t),n.return=e,n;case Qt:return(t=sh(t,e.mode,n)).return=e,t;case tn:return d(e,(0,t._init)(t._payload),n)}if(_n(t)||an(t))return(t=rh(t,e.mode,n,null)).return=e,t;zo(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==a?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Wt:return n.key===a?l(e,t,n,r):null;case Qt:return n.key===a?c(e,t,n,r):null;case tn:return h(e,t,(a=n._init)(n._payload),r)}if(_n(n)||an(n))return null!==a?null:u(e,t,n,r,null);zo(e,n)}return null}function p(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Wt:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case Qt:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case tn:return p(e,t,n,(0,r._init)(r._payload),a)}if(_n(r)||an(r))return u(t,e=e.get(n)||null,r,a,null);zo(t,r)}return null}return function o(l,c,u,m){if("object"==typeof u&&null!==u&&u.type===Ut&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case Wt:e:{for(var f=u.key,g=c;null!==g;){if(g.key===f){if((f=u.type)===Ut){if(7===g.tag){n(l,g.sibling),(c=a(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===f||"object"==typeof f&&null!==f&&f.$$typeof===tn&&qo(f)===g.type){n(l,g.sibling),(c=a(g,u.props)).ref=$o(l,g,u),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}u.type===Ut?((c=rh(u.props.children,l.mode,m,u.key)).return=l,l=c):((m=nh(u.type,u.key,u.props,null,l.mode,m)).ref=$o(l,c,u),m.return=l,l=m)}return s(l);case Qt:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=a(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=sh(u,l.mode,m)).return=l,l=c}return s(l);case tn:return o(l,c,(g=u._init)(u._payload),m)}if(_n(u))return function(a,s,o,l){for(var c=null,u=null,m=s,f=s=0,g=null;null!==m&&f<o.length;f++){m.index>f?(g=m,m=null):g=m.sibling;var y=h(a,m,o[f],l);if(null===y){null===m&&(m=g);break}e&&m&&null===y.alternate&&t(a,m),s=i(y,s,f),null===u?c=y:u.sibling=y,u=y,m=g}if(f===o.length)return n(a,m),Po&&ko(a,f),c;if(null===m){for(;f<o.length;f++)null!==(m=d(a,o[f],l))&&(s=i(m,s,f),null===u?c=m:u.sibling=m,u=m);return Po&&ko(a,f),c}for(m=r(a,m);f<o.length;f++)null!==(g=p(m,a,f,o[f],l))&&(e&&null!==g.alternate&&m.delete(null===g.key?f:g.key),s=i(g,s,f),null===u?c=g:u.sibling=g,u=g);return e&&m.forEach(function(e){return t(a,e)}),Po&&ko(a,f),c}(l,c,u,m);if(an(u))return function(a,s,o,l){var c=an(o);if("function"!=typeof c)throw Error(Pt(150));if(null==(o=c.call(o)))throw Error(Pt(151));for(var u=c=null,m=s,f=s=0,g=null,y=o.next();null!==m&&!y.done;f++,y=o.next()){m.index>f?(g=m,m=null):g=m.sibling;var v=h(a,m,y.value,l);if(null===v){null===m&&(m=g);break}e&&m&&null===v.alternate&&t(a,m),s=i(v,s,f),null===u?c=v:u.sibling=v,u=v,m=g}if(y.done)return n(a,m),Po&&ko(a,f),c;if(null===m){for(;!y.done;f++,y=o.next())null!==(y=d(a,y.value,l))&&(s=i(y,s,f),null===u?c=y:u.sibling=y,u=y);return Po&&ko(a,f),c}for(m=r(a,m);!y.done;f++,y=o.next())null!==(y=p(m,a,f,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?f:y.key),s=i(y,s,f),null===u?c=y:u.sibling=y,u=y);return e&&m.forEach(function(e){return t(a,e)}),Po&&ko(a,f),c}(l,c,u,m);zo(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=a(c,u)).return=l,l=c):(n(l,c),(c=ih(u,l.mode,m)).return=l,l=c),s(l)):n(l,c)}}var Wo=Vo(!0),Qo=Vo(!1),Uo=Ks(null),Ko=null,Ho=null,Go=null;function Yo(){Go=Ho=Ko=null}function Zo(e){var t=Uo.current;Hs(Uo),e._currentValue=t}function Xo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Jo(e,t){Ko=e,Go=Ho=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(zc=!0),e.firstContext=null)}function el(e){var t=e._currentValue;if(Go!==e)if(e={context:e,memoizedValue:t,next:null},null===Ho){if(null===Ko)throw Error(Pt(308));Ho=e,Ko.dependencies={lanes:0,firstContext:e}}else Ho=Ho.next=e;return t}var tl=null;function nl(e){null===tl?tl=[e]:tl.push(e)}function rl(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,nl(t)):(n.next=a.next,a.next=n),t.interleaved=n,al(e,r)}function al(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var il=!1;function sl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ol(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ll(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cl(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Yu){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,al(e,n)}return null===(a=r.interleaved)?(t.next=t,nl(r)):(t.next=a.next,a.next=t),r.interleaved=t,al(e,n)}function ul(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,qr(e,n)}}function dl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hl(e,t,n,r){var a=e.updateQueue;il=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(s=0,u=c=l=null,o=i;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"==typeof(m=f.payload)){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=f.payload)?m.call(p,d,h):m))break e;d=on({},d,h);break e;case 2:il=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);ad|=s,e.lanes=s,e.memoizedState=d}}function pl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(Pt(191,a));a.call(r)}}}var ml={},fl=Ks(ml),gl=Ks(ml),yl=Ks(ml);function vl(e){if(e===ml)throw Error(Pt(174));return e}function xl(e,t){switch(Gs(yl,t),Gs(gl,e),Gs(fl,ml),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Tn(null,"");break;default:t=Tn(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Hs(fl),Gs(fl,t)}function bl(){Hs(fl),Hs(gl),Hs(yl)}function wl(e){vl(yl.current);var t=vl(fl.current),n=Tn(t,e.type);t!==n&&(Gs(gl,e),Gs(fl,n))}function kl(e){gl.current===e&&(Hs(fl),Hs(gl))}var Nl=Ks(0);function jl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _l=[];function Sl(){for(var e=0;e<_l.length;e++)_l[e]._workInProgressVersionPrimary=null;_l.length=0}var Cl=Vt.ReactCurrentDispatcher,Pl=Vt.ReactCurrentBatchConfig,El=0,Rl=null,Ol=null,Tl=null,Ml=!1,Al=!1,Bl=0,Dl=0;function Il(){throw Error(Pt(321))}function Ll(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ri(e[n],t[n]))return!1;return!0}function Fl(e,t,n,r,a,i){if(El=i,Rl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cl.current=null===e||null===e.memoizedState?kc:Nc,e=n(r,a),Al){i=0;do{if(Al=!1,Bl=0,25<=i)throw Error(Pt(301));i+=1,Tl=Ol=null,t.updateQueue=null,Cl.current=jc,e=n(r,a)}while(Al)}if(Cl.current=wc,t=null!==Ol&&null!==Ol.next,El=0,Tl=Ol=Rl=null,Ml=!1,t)throw Error(Pt(300));return e}function $l(){var e=0!==Bl;return Bl=0,e}function zl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Tl?Rl.memoizedState=Tl=e:Tl=Tl.next=e,Tl}function ql(){if(null===Ol){var e=Rl.alternate;e=null!==e?e.memoizedState:null}else e=Ol.next;var t=null===Tl?Rl.memoizedState:Tl.next;if(null!==t)Tl=t,Ol=e;else{if(null===e)throw Error(Pt(310));e={memoizedState:(Ol=e).memoizedState,baseState:Ol.baseState,baseQueue:Ol.baseQueue,queue:Ol.queue,next:null},null===Tl?Rl.memoizedState=Tl=e:Tl=Tl.next=e}return Tl}function Vl(e,t){return"function"==typeof t?t(e):t}function Wl(e){var t=ql(),n=t.queue;if(null===n)throw Error(Pt(311));n.lastRenderedReducer=e;var r=Ol,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var o=s=null,l=null,c=i;do{var u=c.lane;if((El&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,s=r):l=l.next=d,Rl.lanes|=u,ad|=u}c=c.next}while(null!==c&&c!==i);null===l?s=r:l.next=o,Ri(r,t.memoizedState)||(zc=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,Rl.lanes|=i,ad|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ql(e){var t=ql(),n=t.queue;if(null===n)throw Error(Pt(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);Ri(i,t.memoizedState)||(zc=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ul(){}function Kl(e,t){var n=Rl,r=ql(),a=t(),i=!Ri(r.memoizedState,a);if(i&&(r.memoizedState=a,zc=!0),r=r.queue,ic(Yl.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==Tl&&1&Tl.memoizedState.tag){if(n.flags|=2048,ec(9,Gl.bind(null,n,r,a,t),void 0,null),null===Zu)throw Error(Pt(349));30&El||Hl(n,t,a)}return a}function Hl(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Rl.updateQueue)?(t={lastEffect:null,stores:null},Rl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Gl(e,t,n,r){t.value=n,t.getSnapshot=r,Zl(t)&&Xl(e)}function Yl(e,t,n){return n(function(){Zl(t)&&Xl(e)})}function Zl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ri(e,n)}catch(r){return!0}}function Xl(e){var t=al(e,1);null!==t&&jd(t,e,1,-1)}function Jl(e){var t=zl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:e},t.queue=e,e=e.dispatch=yc.bind(null,Rl,e),[t.memoizedState,e]}function ec(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Rl.updateQueue)?(t={lastEffect:null,stores:null},Rl.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function tc(){return ql().memoizedState}function nc(e,t,n,r){var a=zl();Rl.flags|=e,a.memoizedState=ec(1|t,n,void 0,void 0===r?null:r)}function rc(e,t,n,r){var a=ql();r=void 0===r?null:r;var i=void 0;if(null!==Ol){var s=Ol.memoizedState;if(i=s.destroy,null!==r&&Ll(r,s.deps))return void(a.memoizedState=ec(t,n,i,r))}Rl.flags|=e,a.memoizedState=ec(1|t,n,i,r)}function ac(e,t){return nc(8390656,8,e,t)}function ic(e,t){return rc(2048,8,e,t)}function sc(e,t){return rc(4,2,e,t)}function oc(e,t){return rc(4,4,e,t)}function lc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function cc(e,t,n){return n=null!=n?n.concat([e]):null,rc(4,4,lc.bind(null,t,e),n)}function uc(){}function dc(e,t){var n=ql();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ll(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hc(e,t){var n=ql();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ll(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function pc(e,t,n){return 21&El?(Ri(n,t)||(n=Fr(),Rl.lanes|=n,ad|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zc=!0),e.memoizedState=n)}function mc(e,t){var n=Vr;Vr=0!==n&&4>n?n:4,e(!0);var r=Pl.transition;Pl.transition={};try{e(!1),t()}finally{Vr=n,Pl.transition=r}}function fc(){return ql().memoizedState}function gc(e,t,n){var r=Nd(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vc(e))xc(t,n);else if(null!==(n=rl(e,t,n,r))){jd(n,e,r,kd()),bc(n,t,r)}}function yc(e,t,n){var r=Nd(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vc(e))xc(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,Ri(o,s)){var l=t.interleaved;return null===l?(a.next=a,nl(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=rl(e,t,a,r))&&(jd(n,e,r,a=kd()),bc(n,t,r))}}function vc(e){var t=e.alternate;return e===Rl||null!==t&&t===Rl}function xc(e,t){Al=Ml=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bc(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,qr(e,n)}}var wc={readContext:el,useCallback:Il,useContext:Il,useEffect:Il,useImperativeHandle:Il,useInsertionEffect:Il,useLayoutEffect:Il,useMemo:Il,useReducer:Il,useRef:Il,useState:Il,useDebugValue:Il,useDeferredValue:Il,useTransition:Il,useMutableSource:Il,useSyncExternalStore:Il,useId:Il,unstable_isNewReconciler:!1},kc={readContext:el,useCallback:function(e,t){return zl().memoizedState=[e,void 0===t?null:t],e},useContext:el,useEffect:ac,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,nc(4194308,4,lc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nc(4194308,4,e,t)},useInsertionEffect:function(e,t){return nc(4,2,e,t)},useMemo:function(e,t){var n=zl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=zl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gc.bind(null,Rl,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zl().memoizedState=e},useState:Jl,useDebugValue:uc,useDeferredValue:function(e){return zl().memoizedState=e},useTransition:function(){var e=Jl(!1),t=e[0];return e=mc.bind(null,e[1]),zl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Rl,a=zl();if(Po){if(void 0===n)throw Error(Pt(407));n=n()}else{if(n=t(),null===Zu)throw Error(Pt(349));30&El||Hl(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,ac(Yl.bind(null,r,i,e),[e]),r.flags|=2048,ec(9,Gl.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=zl(),t=Zu.identifierPrefix;if(Po){var n=wo;t=":"+t+"R"+(n=(bo&~(1<<32-Rr(bo)-1)).toString(32)+n),0<(n=Bl++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Dl++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nc={readContext:el,useCallback:dc,useContext:el,useEffect:ic,useImperativeHandle:cc,useInsertionEffect:sc,useLayoutEffect:oc,useMemo:hc,useReducer:Wl,useRef:tc,useState:function(){return Wl(Vl)},useDebugValue:uc,useDeferredValue:function(e){return pc(ql(),Ol.memoizedState,e)},useTransition:function(){return[Wl(Vl)[0],ql().memoizedState]},useMutableSource:Ul,useSyncExternalStore:Kl,useId:fc,unstable_isNewReconciler:!1},jc={readContext:el,useCallback:dc,useContext:el,useEffect:ic,useImperativeHandle:cc,useInsertionEffect:sc,useLayoutEffect:oc,useMemo:hc,useReducer:Ql,useRef:tc,useState:function(){return Ql(Vl)},useDebugValue:uc,useDeferredValue:function(e){var t=ql();return null===Ol?t.memoizedState=e:pc(t,Ol.memoizedState,e)},useTransition:function(){return[Ql(Vl)[0],ql().memoizedState]},useMutableSource:Ul,useSyncExternalStore:Kl,useId:fc,unstable_isNewReconciler:!1};function _c(e,t){if(e&&e.defaultProps){for(var n in t=on({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Sc(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:on({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Cc={isMounted:function(e){return!!(e=e._reactInternals)&&hr(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kd(),a=Nd(e),i=ll(r,a);i.payload=t,null!=n&&(i.callback=n),null!==(t=cl(e,i,a))&&(jd(t,e,a,r),ul(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kd(),a=Nd(e),i=ll(r,a);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=cl(e,i,a))&&(jd(t,e,a,r),ul(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kd(),r=Nd(e),a=ll(n,r);a.tag=2,null!=t&&(a.callback=t),null!==(t=cl(e,a,r))&&(jd(t,e,r,n),ul(t,e,r))}};function Pc(e,t,n,r,a,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Oi(n,r)||!Oi(a,i))}function Ec(e,t,n){var r=!1,a=Ys,i=t.contextType;return"object"==typeof i&&null!==i?i=el(i):(a=to(t)?Js:Zs.current,i=(r=null!=(r=t.contextTypes))?eo(e,a):Ys),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Cc,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Rc(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Cc.enqueueReplaceState(t,t.state,null)}function Oc(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},sl(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=el(i):(i=to(t)?Js:Zs.current,a.context=eo(e,i)),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(Sc(e,t,i,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Cc.enqueueReplaceState(a,a.state,null),hl(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function Tc(e,t){try{var n="",r=t;do{n+=dn(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function Mc(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var Ac="function"==typeof WeakMap?WeakMap:Map;function Bc(e,t,n){(n=ll(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){hd||(hd=!0,pd=r)},n}function Dc(e,t,n){(n=ll(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===md?md=new Set([this]):md.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ic(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ac;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Kd.bind(null,e,t,n),t.then(e,e))}function Lc(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Fc(e,t,n,r,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ll(-1,1)).tag=2,cl(n,t,1))),n.lanes|=1),e)}var $c=Vt.ReactCurrentOwner,zc=!1;function qc(e,t,n,r){t.child=null===e?Qo(t,null,n,r):Wo(t,e.child,n,r)}function Vc(e,t,n,r,a){n=n.render;var i=t.ref;return Jo(t,a),r=Fl(e,t,n,r,i,a),n=$l(),null===e||zc?(Po&&n&&jo(t),t.flags|=1,qc(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,hu(e,t,a))}function Wc(e,t,n,r,a){if(null===e){var i=n.type;return"function"!=typeof i||eh(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=nh(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Qc(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:Oi)(s,r)&&e.ref===t.ref)return hu(e,t,a)}return t.flags|=1,(e=th(i,r)).ref=t.ref,e.return=t,t.child=e}function Qc(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(Oi(i,r)&&e.ref===t.ref){if(zc=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,hu(e,t,a);131072&e.flags&&(zc=!0)}}return Hc(e,t,n,r,a)}function Uc(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gs(td,ed),ed|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Gs(td,ed),ed|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gs(td,ed),ed|=n;else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Gs(td,ed),ed|=r;return qc(e,t,a,n),t.child}function Kc(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hc(e,t,n,r,a){var i=to(n)?Js:Zs.current;return i=eo(t,i),Jo(t,a),n=Fl(e,t,n,r,i,a),r=$l(),null===e||zc?(Po&&r&&jo(t),t.flags|=1,qc(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,hu(e,t,a))}function Gc(e,t,n,r,a){if(to(n)){var i=!0;io(t)}else i=!1;if(Jo(t,a),null===t.stateNode)du(e,t),Ec(t,n,r),Oc(t,n,r,a),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=el(c):c=eo(t,c=to(n)?Js:Zs.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&Rc(t,s,r,c),il=!1;var h=t.memoizedState;s.state=h,hl(t,r,s,a),l=t.memoizedState,o!==r||h!==l||Xs.current||il?("function"==typeof u&&(Sc(t,n,u,r),l=t.memoizedState),(o=il||Pc(t,n,o,r,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ol(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:_c(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=el(l):l=eo(t,l=to(n)?Js:Zs.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||h!==l)&&Rc(t,s,r,l),il=!1,h=t.memoizedState,s.state=h,hl(t,r,s,a);var m=t.memoizedState;o!==d||h!==m||Xs.current||il?("function"==typeof p&&(Sc(t,n,p,r),m=t.memoizedState),(c=il||Pc(t,n,c,r,h,m,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,m,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,m,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Yc(e,t,n,r,i,a)}function Yc(e,t,n,r,a,i){Kc(e,t);var s=!!(128&t.flags);if(!r&&!s)return a&&so(t,n,!1),hu(e,t,i);r=t.stateNode,$c.current=t;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Wo(t,e.child,null,i),t.child=Wo(t,null,o,i)):qc(e,t,o,i),t.memoizedState=r.state,a&&so(t,n,!0),t.child}function Zc(e){var t=e.stateNode;t.pendingContext?ro(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ro(0,t.context,!1),xl(e,t.containerInfo)}function Xc(e,t,n,r,a){return Io(),Lo(a),t.flags|=256,qc(e,t,n,r),t.child}var Jc,eu,tu,nu,ru={dehydrated:null,treeContext:null,retryLane:0};function au(e){return{baseLanes:e,cachePool:null,transitions:null}}function iu(e,t,n){var r,a=t.pendingProps,i=Nl.current,s=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Gs(Nl,1&i),null===e)return Mo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,s?(a=t.mode,s=t.child,o={mode:"hidden",children:o},1&a||null===s?s=ah(o,a,0,null):(s.childLanes=0,s.pendingProps=o),e=rh(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=au(n),t.memoizedState=ru,e):su(t,o));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,s){if(n)return 256&t.flags?(t.flags&=-257,ou(e,t,s,r=Mc(Error(Pt(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=ah({mode:"visible",children:r.children},a,0,null),(i=rh(i,a,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,1&t.mode&&Wo(t,e.child,null,s),t.child.memoizedState=au(s),t.memoizedState=ru,i);if(!(1&t.mode))return ou(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var o=r.dgst;return r=o,ou(e,t,s,r=Mc(i=Error(Pt(419)),r,void 0))}if(o=0!==(s&e.childLanes),zc||o){if(null!==(r=Zu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,al(e,a),jd(r,e,a,-1))}return Id(),ou(e,t,s,r=Mc(Error(Pt(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Gd.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Co=Ts(a.nextSibling),So=t,Po=!0,Eo=null,null!==e&&(yo[vo++]=bo,yo[vo++]=wo,yo[vo++]=xo,bo=e.id,wo=e.overflow,xo=t),t=su(t,r.children),t.flags|=4096,t)}(e,t,o,a,r,i,n);if(s){s=a.fallback,o=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:a.children};return 1&o||t.child===i?(a=th(i,l)).subtreeFlags=14680064&i.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null),null!==r?s=th(r,s):(s=rh(s,o,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,o=null===(o=e.child.memoizedState)?au(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=ru,a}return e=(s=e.child).sibling,a=th(s,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function su(e,t){return(t=ah({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ou(e,t,n,r){return null!==r&&Lo(r),Wo(t,e.child,null,n),(e=su(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function lu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xo(e.return,t,n)}function cu(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function uu(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(qc(e,t,r.children,n),2&(r=Nl.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&lu(e,n,t);else if(19===e.tag)lu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gs(Nl,r),1&t.mode)switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===jl(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),cu(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===jl(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}cu(t,!0,n,null,i);break;case"together":cu(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function du(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ad|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(Pt(153));if(null!==t.child){for(n=th(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=th(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function pu(e,t){if(!Po)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fu(e,t,n){var r=t.pendingProps;switch(_o(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mu(t),null;case 1:case 17:return to(t.type)&&no(),mu(t),null;case 3:return r=t.stateNode,bl(),Hs(Xs),Hs(Zs),Sl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Bo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Eo&&(Pd(Eo),Eo=null))),eu(e,t),mu(t),null;case 5:kl(t);var a=vl(yl.current);if(n=t.type,null!==e&&null!=t.stateNode)tu(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(Pt(166));return mu(t),null}if(e=vl(fl.current),Bo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Bs]=t,r[Ds]=i,e=!!(1&t.mode),n){case"dialog":ls("cancel",r),ls("close",r);break;case"iframe":case"object":case"embed":ls("load",r);break;case"video":case"audio":for(a=0;a<as.length;a++)ls(as[a],r);break;case"source":ls("error",r);break;case"img":case"image":case"link":ls("error",r),ls("load",r);break;case"details":ls("toggle",r);break;case"input":bn(r,i),ls("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ls("invalid",r);break;case"textarea":Pn(r,i),ls("invalid",r)}for(var s in qn(n,i),a=null,i)if(i.hasOwnProperty(s)){var o=i[s];"children"===s?"string"==typeof o?r.textContent!==o&&(!0!==i.suppressHydrationWarning&&ws(r.textContent,o,e),a=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==i.suppressHydrationWarning&&ws(r.textContent,o,e),a=["children",""+o]):Rt.hasOwnProperty(s)&&null!=o&&"onScroll"===s&&ls("scroll",r)}switch(n){case"input":gn(r),Nn(r,i,!0);break;case"textarea":gn(r),Rn(r);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(r.onclick=ks)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=On(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Bs]=t,e[Ds]=r,Jc(e,t,!1,!1),t.stateNode=e;e:{switch(s=Vn(n,r),n){case"dialog":ls("cancel",e),ls("close",e),a=r;break;case"iframe":case"object":case"embed":ls("load",e),a=r;break;case"video":case"audio":for(a=0;a<as.length;a++)ls(as[a],e);a=r;break;case"source":ls("error",e),a=r;break;case"img":case"image":case"link":ls("error",e),ls("load",e),a=r;break;case"details":ls("toggle",e),a=r;break;case"input":bn(e,r),a=xn(e,r),ls("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=on({},r,{value:void 0}),ls("invalid",e);break;case"textarea":Pn(e,r),a=Cn(e,r),ls("invalid",e)}for(i in qn(n,a),o=a)if(o.hasOwnProperty(i)){var l=o[i];"style"===i?$n(e,l):"dangerouslySetInnerHTML"===i?null!=(l=l?l.__html:void 0)&&Bn(e,l):"children"===i?"string"==typeof l?("textarea"!==n||""!==l)&&Dn(e,l):"number"==typeof l&&Dn(e,""+l):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(Rt.hasOwnProperty(i)?null!=l&&"onScroll"===i&&ls("scroll",e):null!=l&&qt(e,i,l,s))}switch(n){case"input":gn(e),Nn(e,r,!1);break;case"textarea":gn(e),Rn(e);break;case"option":null!=r.value&&e.setAttribute("value",""+mn(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?Sn(e,!!r.multiple,i,!1):null!=r.defaultValue&&Sn(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=ks)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return mu(t),null;case 6:if(e&&null!=t.stateNode)nu(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Pt(166));if(n=vl(yl.current),vl(fl.current),Bo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bs]=t,(i=r.nodeValue!==n)&&null!==(e=So))switch(e.tag){case 3:ws(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ws(r.nodeValue,n,!!(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Bs]=t,t.stateNode=r}return mu(t),null;case 13:if(Hs(Nl),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Po&&null!==Co&&1&t.mode&&!(128&t.flags))Do(),Io(),t.flags|=98560,i=!1;else if(i=Bo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(Pt(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(Pt(317));i[Bs]=t}else Io(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;mu(t),i=!1}else null!==Eo&&(Pd(Eo),Eo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Nl.current?0===nd&&(nd=3):Id())),null!==t.updateQueue&&(t.flags|=4),mu(t),null);case 4:return bl(),eu(e,t),null===e&&ds(t.stateNode.containerInfo),mu(t),null;case 10:return Zo(t.type._context),mu(t),null;case 19:if(Hs(Nl),null===(i=t.memoizedState))return mu(t),null;if(r=!!(128&t.flags),null===(s=i.rendering))if(r)pu(i,!1);else{if(0!==nd||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=jl(e))){for(t.flags|=128,pu(i,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gs(Nl,1&Nl.current|2),t.child}e=e.sibling}null!==i.tail&&wr()>ud&&(t.flags|=128,r=!0,pu(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=jl(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),pu(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!Po)return mu(t),null}else 2*wr()-i.renderingStartTime>ud&&1073741824!==n&&(t.flags|=128,r=!0,pu(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=wr(),t.sibling=null,n=Nl.current,Gs(Nl,r?1&n|2:1&n),t):(mu(t),null);case 22:case 23:return Md(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&ed)&&(mu(t),6&t.subtreeFlags&&(t.flags|=8192)):mu(t),null;case 24:case 25:return null}throw Error(Pt(156,t.tag))}function gu(e,t){switch(_o(t),t.tag){case 1:return to(t.type)&&no(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bl(),Hs(Xs),Hs(Zs),Sl(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return kl(t),null;case 13:if(Hs(Nl),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(Pt(340));Io()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Hs(Nl),null;case 4:return bl(),null;case 10:return Zo(t.type._context),null;case 22:case 23:return Md(),null;default:return null}}Jc=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},eu=function(){},tu=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,vl(fl.current);var i,s=null;switch(n){case"input":a=xn(e,a),r=xn(e,r),s=[];break;case"select":a=on({},a,{value:void 0}),r=on({},r,{value:void 0}),s=[];break;case"textarea":a=Cn(e,a),r=Cn(e,r),s=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=ks)}for(c in qn(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var o=a[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(Rt.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(i in o)!o.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&o[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(s=s||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(Rt.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&ls("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},nu=function(e,t,n,r){n!==r&&(t.flags|=4)};var yu=!1,vu=!1,xu="function"==typeof WeakSet?WeakSet:Set,bu=null;function wu(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Ud(e,t,r)}else n.current=null}function ku(e,t,n){try{n()}catch(r){Ud(e,t,r)}}var Nu=!1;function ju(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&ku(t,n,i)}a=a.next}while(a!==r)}}function _u(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Su(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function Cu(e){var t=e.alternate;null!==t&&(e.alternate=null,Cu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Bs],delete t[Ds],delete t[Ls],delete t[Fs],delete t[$s])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Pu(e){return 5===e.tag||3===e.tag||4===e.tag}function Eu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Pu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ru(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ks));else if(4!==r&&null!==(e=e.child))for(Ru(e,t,n),e=e.sibling;null!==e;)Ru(e,t,n),e=e.sibling}function Ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ou(e,t,n),e=e.sibling;null!==e;)Ou(e,t,n),e=e.sibling}var Tu=null,Mu=!1;function Au(e,t,n){for(n=n.child;null!==n;)Bu(e,t,n),n=n.sibling}function Bu(e,t,n){if(Er&&"function"==typeof Er.onCommitFiberUnmount)try{Er.onCommitFiberUnmount(Pr,n)}catch(o){}switch(n.tag){case 5:vu||wu(n,t);case 6:var r=Tu,a=Mu;Tu=null,Au(e,t,n),Mu=a,null!==(Tu=r)&&(Mu?(e=Tu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Tu.removeChild(n.stateNode));break;case 18:null!==Tu&&(Mu?(e=Tu,n=n.stateNode,8===e.nodeType?Os(e.parentNode,n):1===e.nodeType&&Os(e,n),ha(e)):Os(Tu,n.stateNode));break;case 4:r=Tu,a=Mu,Tu=n.stateNode.containerInfo,Mu=!0,Au(e,t,n),Tu=r,Mu=a;break;case 0:case 11:case 14:case 15:if(!vu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,void 0!==s&&(2&i||4&i)&&ku(n,t,s),a=a.next}while(a!==r)}Au(e,t,n);break;case 1:if(!vu&&(wu(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ud(n,t,o)}Au(e,t,n);break;case 21:Au(e,t,n);break;case 22:1&n.mode?(vu=(r=vu)||null!==n.memoizedState,Au(e,t,n),vu=r):Au(e,t,n);break;default:Au(e,t,n)}}function Du(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new xu),t.forEach(function(t){var r=Yd.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Iu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,o=s;e:for(;null!==o;){switch(o.tag){case 5:Tu=o.stateNode,Mu=!1;break e;case 3:case 4:Tu=o.stateNode.containerInfo,Mu=!0;break e}o=o.return}if(null===Tu)throw Error(Pt(160));Bu(i,s,a),Tu=null,Mu=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(c){Ud(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Lu(t,e),t=t.sibling}function Lu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Iu(t,e),Fu(e),4&r){try{ju(3,e,e.return),_u(3,e)}catch(f){Ud(e,e.return,f)}try{ju(5,e,e.return)}catch(f){Ud(e,e.return,f)}}break;case 1:Iu(t,e),Fu(e),512&r&&null!==n&&wu(n,n.return);break;case 5:if(Iu(t,e),Fu(e),512&r&&null!==n&&wu(n,n.return),32&e.flags){var a=e.stateNode;try{Dn(a,"")}catch(f){Ud(e,e.return,f)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===i.type&&null!=i.name&&wn(a,i),Vn(o,s);var c=Vn(o,i);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];"style"===u?$n(a,d):"dangerouslySetInnerHTML"===u?Bn(a,d):"children"===u?Dn(a,d):qt(a,u,d,c)}switch(o){case"input":kn(a,i);break;case"textarea":En(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?Sn(a,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?Sn(a,!!i.multiple,i.defaultValue,!0):Sn(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ds]=i}catch(f){Ud(e,e.return,f)}}break;case 6:if(Iu(t,e),Fu(e),4&r){if(null===e.stateNode)throw Error(Pt(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(f){Ud(e,e.return,f)}}break;case 3:if(Iu(t,e),Fu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{ha(t.containerInfo)}catch(f){Ud(e,e.return,f)}break;case 4:default:Iu(t,e),Fu(e);break;case 13:Iu(t,e),Fu(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(cd=wr())),4&r&&Du(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(vu=(c=vu)||u,Iu(t,e),vu=c):Iu(t,e),Fu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(bu=e,u=e.child;null!==u;){for(d=bu=u;null!==bu;){switch(p=(h=bu).child,h.tag){case 0:case 11:case 14:case 15:ju(4,h,h.return);break;case 1:wu(h,h.return);var m=h.stateNode;if("function"==typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(f){Ud(r,n,f)}}break;case 5:wu(h,h.return);break;case 22:if(null!==h.memoizedState){Vu(d);continue}}null!==p?(p.return=h,bu=p):Vu(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{a=d.stateNode,c?"function"==typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=d.stateNode,s=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=Fn("display",s))}catch(f){Ud(e,e.return,f)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(f){Ud(e,e.return,f)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Iu(t,e),Fu(e),4&r&&Du(e);case 21:}}function Fu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Pu(n)){var r=n;break e}n=n.return}throw Error(Pt(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(Dn(a,""),r.flags&=-33),Ou(e,Eu(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;Ru(e,Eu(e),i);break;default:throw Error(Pt(161))}}catch(s){Ud(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function $u(e,t,n){bu=e,zu(e)}function zu(e,t,n){for(var r=!!(1&e.mode);null!==bu;){var a=bu,i=a.child;if(22===a.tag&&r){var s=null!==a.memoizedState||yu;if(!s){var o=a.alternate,l=null!==o&&null!==o.memoizedState||vu;o=yu;var c=vu;if(yu=s,(vu=l)&&!c)for(bu=a;null!==bu;)l=(s=bu).child,22===s.tag&&null!==s.memoizedState?Wu(a):null!==l?(l.return=s,bu=l):Wu(a);for(;null!==i;)bu=i,zu(i),i=i.sibling;bu=a,yu=o,vu=c}qu(e)}else 8772&a.subtreeFlags&&null!==i?(i.return=a,bu=i):qu(e)}}function qu(e){for(;null!==bu;){var t=bu;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:vu||_u(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!vu)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:_c(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&pl(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}pl(t,s,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&ha(d)}}}break;default:throw Error(Pt(163))}vu||512&t.flags&&Su(t)}catch(h){Ud(t,t.return,h)}}if(t===e){bu=null;break}if(null!==(n=t.sibling)){n.return=t.return,bu=n;break}bu=t.return}}function Vu(e){for(;null!==bu;){var t=bu;if(t===e){bu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,bu=n;break}bu=t.return}}function Wu(e){for(;null!==bu;){var t=bu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_u(4,t)}catch(l){Ud(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Ud(t,a,l)}}var i=t.return;try{Su(t)}catch(l){Ud(t,i,l)}break;case 5:var s=t.return;try{Su(t)}catch(l){Ud(t,s,l)}}}catch(l){Ud(t,t.return,l)}if(t===e){bu=null;break}var o=t.sibling;if(null!==o){o.return=t.return,bu=o;break}bu=t.return}}var Qu,Uu=Math.ceil,Ku=Vt.ReactCurrentDispatcher,Hu=Vt.ReactCurrentOwner,Gu=Vt.ReactCurrentBatchConfig,Yu=0,Zu=null,Xu=null,Ju=0,ed=0,td=Ks(0),nd=0,rd=null,ad=0,id=0,sd=0,od=null,ld=null,cd=0,ud=1/0,dd=null,hd=!1,pd=null,md=null,fd=!1,gd=null,yd=0,vd=0,xd=null,bd=-1,wd=0;function kd(){return 6&Yu?wr():-1!==bd?bd:bd=wr()}function Nd(e){return 1&e.mode?2&Yu&&0!==Ju?Ju&-Ju:null!==Fo.transition?(0===wd&&(wd=Fr()),wd):0!==(e=Vr)?e:e=void 0===(e=window.event)?16:ba(e.type):1}function jd(e,t,n,r){if(50<vd)throw vd=0,xd=null,Error(Pt(185));zr(e,n,r),2&Yu&&e===Zu||(e===Zu&&(!(2&Yu)&&(id|=n),4===nd&&Ed(e,Ju)),_d(e,r),1===n&&0===Yu&&!(1&t.mode)&&(ud=wr()+500,lo&&ho()))}function _d(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Rr(i),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&r)||(a[s]=Ir(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=Dr(e,e===Zu?Ju:0);if(0===r)null!==n&&vr(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&vr(n),1===t)0===e.tag?function(e){lo=!0,uo(e)}(Rd.bind(null,e)):uo(Rd.bind(null,e)),Es(function(){!(6&Yu)&&ho()}),n=null;else{switch(Wr(r)){case 1:n=Nr;break;case 4:n=jr;break;case 16:default:n=_r;break;case 536870912:n=Cr}n=Zd(n,Sd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sd(e,t){if(bd=-1,wd=0,6&Yu)throw Error(Pt(327));var n=e.callbackNode;if(Wd()&&e.callbackNode!==n)return null;var r=Dr(e,e===Zu?Ju:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=Ld(e,r);else{t=r;var a=Yu;Yu|=2;var i=Dd();for(Zu===e&&Ju===t||(dd=null,ud=wr()+500,Ad(e,t));;)try{$d();break}catch(o){Bd(e,o)}Yo(),Ku.current=i,Yu=a,null!==Xu?t=0:(Zu=null,Ju=0,t=nd)}if(0!==t){if(2===t&&(0!==(a=Lr(e))&&(r=a,t=Cd(e,a))),1===t)throw n=rd,Ad(e,0),Ed(e,r),_d(e,wr()),n;if(6===t)Ed(e,r);else{if(a=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Ri(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=Ld(e,r),2===t&&(i=Lr(e),0!==i&&(r=i,t=Cd(e,i))),1!==t)))throw n=rd,Ad(e,0),Ed(e,r),_d(e,wr()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Pt(345));case 2:case 5:Vd(e,ld,dd);break;case 3:if(Ed(e,r),(130023424&r)===r&&10<(t=cd+500-wr())){if(0!==Dr(e,0))break;if(((a=e.suspendedLanes)&r)!==r){kd(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ss(Vd.bind(null,e,ld,dd),t);break}Vd(e,ld,dd);break;case 4:if(Ed(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-Rr(r);i=1<<s,(s=t[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=wr()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Uu(r/1960))-r)){e.timeoutHandle=Ss(Vd.bind(null,e,ld,dd),r);break}Vd(e,ld,dd);break;default:throw Error(Pt(329))}}}return _d(e,wr()),e.callbackNode===n?Sd.bind(null,e):null}function Cd(e,t){var n=od;return e.current.memoizedState.isDehydrated&&(Ad(e,t).flags|=256),2!==(e=Ld(e,t))&&(t=ld,ld=n,null!==t&&Pd(t)),e}function Pd(e){null===ld?ld=e:ld.push.apply(ld,e)}function Ed(e,t){for(t&=~sd,t&=~id,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rr(t),r=1<<n;e[n]=-1,t&=~r}}function Rd(e){if(6&Yu)throw Error(Pt(327));Wd();var t=Dr(e,0);if(!(1&t))return _d(e,wr()),null;var n=Ld(e,t);if(0!==e.tag&&2===n){var r=Lr(e);0!==r&&(t=r,n=Cd(e,r))}if(1===n)throw n=rd,Ad(e,0),Ed(e,t),_d(e,wr()),n;if(6===n)throw Error(Pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vd(e,ld,dd),_d(e,wr()),null}function Od(e,t){var n=Yu;Yu|=1;try{return e(t)}finally{0===(Yu=n)&&(ud=wr()+500,lo&&ho())}}function Td(e){null!==gd&&0===gd.tag&&!(6&Yu)&&Wd();var t=Yu;Yu|=1;var n=Gu.transition,r=Vr;try{if(Gu.transition=null,Vr=1,e)return e()}finally{Vr=r,Gu.transition=n,!(6&(Yu=t))&&ho()}}function Md(){ed=td.current,Hs(td)}function Ad(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Cs(n)),null!==Xu)for(n=Xu.return;null!==n;){var r=n;switch(_o(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&no();break;case 3:bl(),Hs(Xs),Hs(Zs),Sl();break;case 5:kl(r);break;case 4:bl();break;case 13:case 19:Hs(Nl);break;case 10:Zo(r.type._context);break;case 22:case 23:Md()}n=n.return}if(Zu=e,Xu=e=th(e.current,null),Ju=ed=t,nd=0,rd=null,sd=id=ad=0,ld=od=null,null!==tl){for(t=0;t<tl.length;t++)if(null!==(r=(n=tl[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var s=i.next;i.next=a,r.next=s}n.pending=r}tl=null}return e}function Bd(e,t){for(;;){var n=Xu;try{if(Yo(),Cl.current=wc,Ml){for(var r=Rl.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Ml=!1}if(El=0,Tl=Ol=Rl=null,Al=!1,Bl=0,Hu.current=null,null===n||null===n.return){nd=1,rd=t,Xu=null;break}e:{var i=e,s=n.return,o=n,l=t;if(t=Ju,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=o,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Lc(s);if(null!==p){p.flags&=-257,Fc(p,s,o,0,t),1&p.mode&&Ic(i,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var f=new Set;f.add(l),t.updateQueue=f}else m.add(l);break e}if(!(1&t)){Ic(i,c,t),Id();break e}l=Error(Pt(426))}else if(Po&&1&o.mode){var g=Lc(s);if(null!==g){!(65536&g.flags)&&(g.flags|=256),Fc(g,s,o,0,t),Lo(Tc(l,o));break e}}i=l=Tc(l,o),4!==nd&&(nd=2),null===od?od=[i]:od.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,dl(i,Bc(0,l,t));break e;case 1:o=l;var y=i.type,v=i.stateNode;if(!(128&i.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==md&&md.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,dl(i,Dc(i,o,t));break e}}i=i.return}while(null!==i)}qd(n)}catch(x){t=x,Xu===n&&null!==n&&(Xu=n=n.return);continue}break}}function Dd(){var e=Ku.current;return Ku.current=wc,null===e?wc:e}function Id(){0!==nd&&3!==nd&&2!==nd||(nd=4),null===Zu||!(268435455&ad)&&!(268435455&id)||Ed(Zu,Ju)}function Ld(e,t){var n=Yu;Yu|=2;var r=Dd();for(Zu===e&&Ju===t||(dd=null,Ad(e,t));;)try{Fd();break}catch(a){Bd(e,a)}if(Yo(),Yu=n,Ku.current=r,null!==Xu)throw Error(Pt(261));return Zu=null,Ju=0,nd}function Fd(){for(;null!==Xu;)zd(Xu)}function $d(){for(;null!==Xu&&!xr();)zd(Xu)}function zd(e){var t=Qu(e.alternate,e,ed);e.memoizedProps=e.pendingProps,null===t?qd(e):Xu=t,Hu.current=null}function qd(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=gu(n,t)))return n.flags&=32767,void(Xu=n);if(null===e)return nd=6,void(Xu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=fu(n,t,ed)))return void(Xu=n);if(null!==(t=t.sibling))return void(Xu=t);Xu=t=e}while(null!==t);0===nd&&(nd=5)}function Vd(e,t,n){var r=Vr,a=Gu.transition;try{Gu.transition=null,Vr=1,function(e,t,n,r){do{Wd()}while(null!==gd);if(6&Yu)throw Error(Pt(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pt(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Rr(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,i),e===Zu&&(Xu=Zu=null,Ju=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||fd||(fd=!0,Zd(_r,function(){return Wd(),null})),i=!!(15990&n.flags),!!(15990&n.subtreeFlags)||i){i=Gu.transition,Gu.transition=null;var s=Vr;Vr=1;var o=Yu;Yu|=4,Hu.current=null,function(e,t){if(Ns=ma,Di(e=Bi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(b){n=null;break e}var s=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==a&&3!==d.nodeType||(o=s+a),d!==i||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===a&&(o=s),h===i&&++u===r&&(l=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(js={focusedElem:e,selectionRange:n},ma=!1,bu=t;null!==bu;)if(e=(t=bu).child,1028&t.subtreeFlags&&null!==e)e.return=t,bu=e;else for(;null!==bu;){t=bu;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var f=m.memoizedProps,g=m.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?f:_c(t.type,f),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(Pt(163))}}catch(b){Ud(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,bu=e;break}bu=t.return}m=Nu,Nu=!1}(e,n),Lu(n,e),Ii(js),ma=!!Ns,js=Ns=null,e.current=n,$u(n),br(),Yu=o,Vr=s,Gu.transition=i}else e.current=n;if(fd&&(fd=!1,gd=e,yd=a),i=e.pendingLanes,0===i&&(md=null),function(e){if(Er&&"function"==typeof Er.onCommitFiberRoot)try{Er.onCommitFiberRoot(Pr,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),_d(e,wr()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(hd)throw hd=!1,e=pd,pd=null,e;!!(1&yd)&&0!==e.tag&&Wd(),i=e.pendingLanes,1&i?e===xd?vd++:(vd=0,xd=e):vd=0,ho()}(e,t,n,r)}finally{Gu.transition=a,Vr=r}return null}function Wd(){if(null!==gd){var e=Wr(yd),t=Gu.transition,n=Vr;try{if(Gu.transition=null,Vr=16>e?16:e,null===gd)var r=!1;else{if(e=gd,gd=null,yd=0,6&Yu)throw Error(Pt(331));var a=Yu;for(Yu|=4,bu=e.current;null!==bu;){var i=bu,s=i.child;if(16&bu.flags){var o=i.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(bu=c;null!==bu;){var u=bu;switch(u.tag){case 0:case 11:case 15:ju(8,u,i)}var d=u.child;if(null!==d)d.return=u,bu=d;else for(;null!==bu;){var h=(u=bu).sibling,p=u.return;if(Cu(u),u===c){bu=null;break}if(null!==h){h.return=p,bu=h;break}bu=p}}}var m=i.alternate;if(null!==m){var f=m.child;if(null!==f){m.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}bu=i}}if(2064&i.subtreeFlags&&null!==s)s.return=i,bu=s;else e:for(;null!==bu;){if(2048&(i=bu).flags)switch(i.tag){case 0:case 11:case 15:ju(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,bu=y;break e}bu=i.return}}var v=e.current;for(bu=v;null!==bu;){var x=(s=bu).child;if(2064&s.subtreeFlags&&null!==x)x.return=s,bu=x;else e:for(s=v;null!==bu;){if(2048&(o=bu).flags)try{switch(o.tag){case 0:case 11:case 15:_u(9,o)}}catch(w){Ud(o,o.return,w)}if(o===s){bu=null;break e}var b=o.sibling;if(null!==b){b.return=o.return,bu=b;break e}bu=o.return}}if(Yu=a,ho(),Er&&"function"==typeof Er.onPostCommitFiberRoot)try{Er.onPostCommitFiberRoot(Pr,e)}catch(w){}r=!0}return r}finally{Vr=n,Gu.transition=t}}return!1}function Qd(e,t,n){e=cl(e,t=Bc(0,t=Tc(n,t),1),1),t=kd(),null!==e&&(zr(e,1,t),_d(e,t))}function Ud(e,t,n){if(3===e.tag)Qd(e,e,n);else for(;null!==t;){if(3===t.tag){Qd(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===md||!md.has(r))){t=cl(t,e=Dc(t,e=Tc(n,e),1),1),e=kd(),null!==t&&(zr(t,1,e),_d(t,e));break}}t=t.return}}function Kd(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=kd(),e.pingedLanes|=e.suspendedLanes&n,Zu===e&&(Ju&n)===n&&(4===nd||3===nd&&(130023424&Ju)===Ju&&500>wr()-cd?Ad(e,0):sd|=n),_d(e,t)}function Hd(e,t){0===t&&(1&e.mode?(t=Ar,!(130023424&(Ar<<=1))&&(Ar=4194304)):t=1);var n=kd();null!==(e=al(e,t))&&(zr(e,t,n),_d(e,n))}function Gd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Hd(e,n)}function Yd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Pt(314))}null!==r&&r.delete(t),Hd(e,n)}function Zd(e,t){return yr(e,t)}function Xd(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jd(e,t,n,r){return new Xd(e,t,n,r)}function eh(e){return!(!(e=e.prototype)||!e.isReactComponent)}function th(e,t){var n=e.alternate;return null===n?((n=Jd(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nh(e,t,n,r,a,i){var s=2;if(r=e,"function"==typeof e)eh(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case Ut:return rh(n.children,a,i,t);case Kt:s=8,a|=8;break;case Ht:return(e=Jd(12,n,t,2|a)).elementType=Ht,e.lanes=i,e;case Xt:return(e=Jd(13,n,t,a)).elementType=Xt,e.lanes=i,e;case Jt:return(e=Jd(19,n,t,a)).elementType=Jt,e.lanes=i,e;case nn:return ah(n,a,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Gt:s=10;break e;case Yt:s=9;break e;case Zt:s=11;break e;case en:s=14;break e;case tn:s=16,r=null;break e}throw Error(Pt(130,null==e?e:typeof e,""))}return(t=Jd(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function rh(e,t,n,r){return(e=Jd(7,e,r,t)).lanes=n,e}function ah(e,t,n,r){return(e=Jd(22,e,r,t)).elementType=nn,e.lanes=n,e.stateNode={isHidden:!1},e}function ih(e,t,n){return(e=Jd(6,e,null,t)).lanes=n,e}function sh(e,t,n){return(t=Jd(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function oh(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$r(0),this.expirationTimes=$r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function lh(e,t,n,r,a,i,s,o,l){return e=new oh(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Jd(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sl(i),e}function ch(e){if(!e)return Ys;e:{if(hr(e=e._reactInternals)!==e||1!==e.tag)throw Error(Pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(to(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(Pt(171))}if(1===e.tag){var n=e.type;if(to(n))return ao(e,n,t)}return t}function uh(e,t,n,r,a,i,s,o,l){return(e=lh(n,r,!0,e,0,i,0,o,l)).context=ch(null),n=e.current,(i=ll(r=kd(),a=Nd(n))).callback=null!=t?t:null,cl(n,i,a),e.current.lanes=a,zr(e,a,r),_d(e,r),e}function dh(e,t,n,r){var a=t.current,i=kd(),s=Nd(a);return n=ch(n),null===t.context?t.context=n:t.pendingContext=n,(t=ll(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=cl(a,t,s))&&(jd(e,a,s,i),ul(e,a,s)),s}function hh(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ph(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function mh(e,t){ph(e,t),(e=e.alternate)&&ph(e,t)}Qu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Xs.current)zc=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return zc=!1,function(e,t,n){switch(t.tag){case 3:Zc(t),Io();break;case 5:wl(t);break;case 1:to(t.type)&&io(t);break;case 4:xl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Gs(Uo,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Gs(Nl,1&Nl.current),t.flags|=128,null):0!==(n&t.child.childLanes)?iu(e,t,n):(Gs(Nl,1&Nl.current),null!==(e=hu(e,t,n))?e.sibling:null);Gs(Nl,1&Nl.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return uu(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Gs(Nl,Nl.current),r)break;return null;case 22:case 23:return t.lanes=0,Uc(e,t,n)}return hu(e,t,n)}(e,t,n);zc=!!(131072&e.flags)}else zc=!1,Po&&1048576&t.flags&&No(t,go,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;du(e,t),e=t.pendingProps;var a=eo(t,Zs.current);Jo(t,n),a=Fl(null,t,r,e,a,n);var i=$l();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,to(r)?(i=!0,io(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,sl(t),a.updater=Cc,t.stateNode=a,a._reactInternals=t,Oc(t,r,e,n),t=Yc(null,t,r,!0,i,n)):(t.tag=0,Po&&i&&jo(t),qc(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(du(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"==typeof e)return eh(e)?1:0;if(null!=e){if((e=e.$$typeof)===Zt)return 11;if(e===en)return 14}return 2}(r),e=_c(r,e),a){case 0:t=Hc(null,t,r,e,n);break e;case 1:t=Gc(null,t,r,e,n);break e;case 11:t=Vc(null,t,r,e,n);break e;case 14:t=Wc(null,t,r,_c(r.type,e),n);break e}throw Error(Pt(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Hc(e,t,r,a=t.elementType===r?a:_c(r,a),n);case 1:return r=t.type,a=t.pendingProps,Gc(e,t,r,a=t.elementType===r?a:_c(r,a),n);case 3:e:{if(Zc(t),null===e)throw Error(Pt(387));r=t.pendingProps,a=(i=t.memoizedState).element,ol(e,t),hl(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Xc(e,t,r,n,a=Tc(Error(Pt(423)),t));break e}if(r!==a){t=Xc(e,t,r,n,a=Tc(Error(Pt(424)),t));break e}for(Co=Ts(t.stateNode.containerInfo.firstChild),So=t,Po=!0,Eo=null,n=Qo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Io(),r===a){t=hu(e,t,n);break e}qc(e,t,r,n)}t=t.child}return t;case 5:return wl(t),null===e&&Mo(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,_s(r,a)?s=null:null!==i&&_s(r,i)&&(t.flags|=32),Kc(e,t),qc(e,t,s,n),t.child;case 6:return null===e&&Mo(t),null;case 13:return iu(e,t,n);case 4:return xl(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Wo(t,null,r,n):qc(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Vc(e,t,r,a=t.elementType===r?a:_c(r,a),n);case 7:return qc(e,t,t.pendingProps,n),t.child;case 8:case 12:return qc(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Gs(Uo,r._currentValue),r._currentValue=s,null!==i)if(Ri(i.value,s)){if(i.children===a.children&&!Xs.current){t=hu(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){s=i.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=ll(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Xo(i.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(Pt(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),Xo(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}qc(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Jo(t,n),r=r(a=el(a)),t.flags|=1,qc(e,t,r,n),t.child;case 14:return a=_c(r=t.type,t.pendingProps),Wc(e,t,r,a=_c(r.type,a),n);case 15:return Qc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:_c(r,a),du(e,t),t.tag=1,to(r)?(e=!0,io(t)):e=!1,Jo(t,n),Ec(t,r,a),Oc(t,r,a,n),Yc(null,t,r,!0,e,n);case 19:return uu(e,t,n);case 22:return Uc(e,t,n)}throw Error(Pt(156,t.tag))};var fh="function"==typeof reportError?reportError:function(e){};function gh(e){this._internalRoot=e}function yh(e){this._internalRoot=e}function vh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function xh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function bh(){}function wh(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if("function"==typeof a){var o=a;a=function(){var e=hh(s);o.call(e)}}dh(t,s,e,a)}else s=function(e,t,n,r,a){if(a){if("function"==typeof r){var i=r;r=function(){var e=hh(s);i.call(e)}}var s=uh(t,r,e,0,null,!1,0,"",bh);return e._reactRootContainer=s,e[Is]=s.current,ds(8===e.nodeType?e.parentNode:e),Td(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof r){var o=r;r=function(){var e=hh(l);o.call(e)}}var l=lh(e,0,!1,null,0,!1,0,"",bh);return e._reactRootContainer=l,e[Is]=l.current,ds(8===e.nodeType?e.parentNode:e),Td(function(){dh(t,l,n,r)}),l}(n,t,e,a,r);return hh(s)}yh.prototype.render=gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(Pt(409));dh(e,t,null,null)},yh.prototype.unmount=gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Td(function(){dh(null,e,null,null)}),t[Is]=null}},yh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hr();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ra.length&&0!==t&&t<ra[n].priority;n++);ra.splice(n,0,e),0===n&&oa(e)}},Qr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Br(t.pendingLanes);0!==n&&(qr(t,1|n),_d(t,wr()),!(6&Yu)&&(ud=wr()+500,ho()))}break;case 13:Td(function(){var t=al(e,1);if(null!==t){var n=kd();jd(t,e,1,n)}}),mh(e,1)}},Ur=function(e){if(13===e.tag){var t=al(e,134217728);if(null!==t)jd(t,e,134217728,kd());mh(e,134217728)}},Kr=function(e){if(13===e.tag){var t=Nd(e),n=al(e,t);if(null!==n)jd(n,e,t,kd());mh(e,t)}},Hr=function(){return Vr},Gr=function(e,t){var n=Vr;try{return Vr=e,t()}finally{Vr=n}},Un=function(e,t,n){switch(t){case"input":if(kn(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Ws(r);if(!a)throw Error(Pt(90));yn(r),kn(r,a)}}}break;case"textarea":En(e,n);break;case"select":null!=(t=n.value)&&Sn(e,!!n.multiple,t,!1)}},Xn=Od,Jn=Td;var kh={usingClientEntryPoint:!1,Events:[qs,Vs,Ws,Yn,Zn,Od]},Nh={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jh={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=fr(e))?null:e.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{Pr=_h.inject(jh),Er=_h}catch(An){}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kh,kt.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!vh(t))throw Error(Pt(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Qt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},kt.createRoot=function(e,t){if(!vh(e))throw Error(Pt(299));var n=!1,r="",a=fh;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=lh(e,1,!1,null,0,n,0,r,a),e[Is]=t.current,ds(8===e.nodeType?e.parentNode:e),new gh(t)},kt.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Pt(188));throw e=Object.keys(e).join(","),Error(Pt(268,e))}return e=null===(e=fr(t))?null:e.stateNode},kt.flushSync=function(e){return Td(e)},kt.hydrate=function(e,t,n){if(!xh(t))throw Error(Pt(200));return wh(null,e,t,!0,n)},kt.hydrateRoot=function(e,t,n){if(!vh(e))throw Error(Pt(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",s=fh;if(null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=uh(t,null,e,1,null!=n?n:null,a,0,i,s),e[Is]=t.current,ds(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new yh(t)},kt.render=function(e,t,n){if(!xh(t))throw Error(Pt(200));return wh(null,e,t,!1,n)},kt.unmountComponentAtNode=function(e){if(!xh(e))throw Error(Pt(40));return!!e._reactRootContainer&&(Td(function(){wh(null,null,e,!1,function(){e._reactRootContainer=null,e[Is]=null})}),!0)},kt.unstable_batchedUpdates=Od,kt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xh(n))throw Error(Pt(200));if(null==e||void 0===e._reactInternals)throw Error(Pt(38));return wh(e,t,n,!1,r)},kt.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),wt.exports=kt;var Sh=wt.exports;const Ch=je(Sh);var Ph,Eh,Rh=Sh;Eh=bt.createRoot=Rh.createRoot,Ph=bt.hydrateRoot=Rh.hydrateRoot;const Oh=ke({__proto__:null,get createRoot(){return Eh},default:bt,get hydrateRoot(){return Ph}},[bt]),Th={},Mh=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Th)return;Th[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};let Ah=0;const Bh=new Map,Dh=e=>{if(Bh.has(e))return;const t=setTimeout(()=>{Bh.delete(e),$h({type:"REMOVE_TOAST",toastId:e})},1e6);Bh.set(e,t)},Ih=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Dh(n):e.toasts.forEach(e=>{Dh(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Lh=[];let Fh={toasts:[]};function $h(e){Fh=Ih(Fh,e),Lh.forEach(e=>{e(Fh)})}function zh({...e}){const t=(Ah=(Ah+1)%Number.MAX_SAFE_INTEGER,Ah.toString()),n=()=>$h({type:"DISMISS_TOAST",toastId:t});return $h({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>$h({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function qh(){const[e,t]=ct.useState(Fh);return ct.useEffect(()=>(Lh.push(t),()=>{const e=Lh.indexOf(t);e>-1&&Lh.splice(e,1)}),[e]),{...e,toast:zh,dismiss:e=>$h({type:"DISMISS_TOAST",toastId:e})}}function Vh(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function Wh(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Qh(...e){return t=>{let n=!1;const r=e.map(e=>{const r=Wh(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():Wh(e[t],null)}}}}function Uh(...e){return ct.useCallback(Qh(...e),e)}function Kh(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>ct.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return ct.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const a=ct.createContext(r),i=n.length;n=[...n,r];const s=t=>{var n;const{scope:r,children:s,...o}=t,l=(null==(n=null==r?void 0:r[e])?void 0:n[i])||a,c=ct.useMemo(()=>o,Object.values(o));return xt.jsx(l.Provider,{value:c,children:s})};return s.displayName=t+"Provider",[s,function(n,s){var o;const l=(null==(o=null==s?void 0:s[e])?void 0:o[i])||a,c=ct.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Hh(r,...t)]}function Hh(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return ct.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function Gh(e){const t=Zh(e),n=ct.forwardRef((e,n)=>{const{children:r,...a}=e,i=ct.Children.toArray(r),s=i.find(ep);if(s){const e=s.props.children,r=i.map(t=>t===s?ct.Children.count(e)>1?ct.Children.only(null):ct.isValidElement(e)?e.props.children:null:t);return xt.jsx(t,{...a,ref:n,children:ct.isValidElement(e)?ct.cloneElement(e,void 0,r):null})}return xt.jsx(t,{...a,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}var Yh=Gh("Slot");function Zh(e){const t=ct.forwardRef((e,t)=>{const{children:n,...r}=e;if(ct.isValidElement(n)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...e)=>{const t=i(...e);return a(...e),t}:a&&(n[r]=a):"style"===r?n[r]={...a,...i}:"className"===r&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==ct.Fragment&&(a.ref=t?Qh(t,e):e),ct.cloneElement(n,a)}return ct.Children.count(n)>1?ct.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Xh=Symbol("radix.slottable");function Jh(e){const t=({children:e})=>xt.jsx(xt.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=Xh,t}function ep(e){return ct.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Xh}function tp(e){const t=e+"CollectionProvider",[n,r]=Kh(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=e=>{const{scope:t,children:n}=e,r=ut.useRef(null),i=ut.useRef(new Map).current;return xt.jsx(a,{scope:t,itemMap:i,collectionRef:r,children:n})};s.displayName=t;const o=e+"CollectionSlot",l=Gh(o),c=ut.forwardRef((e,t)=>{const{scope:n,children:r}=e,a=Uh(t,i(o,n).collectionRef);return xt.jsx(l,{ref:a,children:r})});c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=Gh(u),p=ut.forwardRef((e,t)=>{const{scope:n,children:r,...a}=e,s=ut.useRef(null),o=Uh(t,s),l=i(u,n);return ut.useEffect(()=>(l.itemMap.set(s,{ref:s,...a}),()=>{l.itemMap.delete(s)})),xt.jsx(h,{[d]:"",ref:o,children:r})});return p.displayName=u,[{Provider:s,Slot:c,ItemSlot:p},function(t){const n=i(e+"CollectionConsumer",t),r=ut.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),r=Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return r},[n.collectionRef,n.itemMap]);return r},r]}var np=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=Gh(`Primitive.${t}`),r=ct.forwardRef((e,r)=>{const{asChild:a,...i}=e,s=a?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),xt.jsx(s,{...i,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function rp(e,t){e&&Sh.flushSync(()=>e.dispatchEvent(t))}function ap(e){const t=ct.useRef(e);return ct.useEffect(()=>{t.current=e}),ct.useMemo(()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}var ip,sp="dismissableLayer.update",op="dismissableLayer.pointerDownOutside",lp="dismissableLayer.focusOutside",cp=ct.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),up=ct.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...l}=e,c=ct.useContext(cp),[u,d]=ct.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,p]=ct.useState({}),m=Uh(t,e=>d(e)),f=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=f.indexOf(g),v=u?f.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,b=v>=y,w=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=ap(e),r=ct.useRef(!1),a=ct.useRef(()=>{});return ct.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){pp(op,n,i,{discrete:!0})};const i={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=r,t.addEventListener("click",a.current,{once:!0})):r()}else t.removeEventListener("click",a.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...c.branches].some(e=>e.contains(t));b&&!n&&(null==a||a(e),null==s||s(e),e.defaultPrevented||null==o||o())},h),k=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=ap(e),r=ct.useRef(!1);return ct.useEffect(()=>{const e=e=>{if(e.target&&!r.current){pp(lp,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...c.branches].some(e=>e.contains(t))||(null==i||i(e),null==s||s(e),e.defaultPrevented||null==o||o())},h);return function(e,t=(null==globalThis?void 0:globalThis.document)){const n=ap(e);ct.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{v===c.layers.size-1&&(null==r||r(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},h),ct.useEffect(()=>{if(u)return n&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(ip=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),hp(),()=>{n&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=ip)}},[u,h,n,c]),ct.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),hp())},[u,c]),ct.useEffect(()=>{const e=()=>p({});return document.addEventListener(sp,e),()=>document.removeEventListener(sp,e)},[]),xt.jsx(np.div,{...l,ref:m,style:{pointerEvents:x?b?"auto":"none":void 0,...e.style},onFocusCapture:Vh(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Vh(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Vh(e.onPointerDownCapture,w.onPointerDownCapture)})});up.displayName="DismissableLayer";var dp=ct.forwardRef((e,t)=>{const n=ct.useContext(cp),r=ct.useRef(null),a=Uh(t,r);return ct.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),xt.jsx(np.div,{...e,ref:a})});function hp(){const e=new CustomEvent(sp);document.dispatchEvent(e)}function pp(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?rp(a,i):a.dispatchEvent(i)}dp.displayName="DismissableLayerBranch";var mp=up,fp=dp,gp=(null==globalThis?void 0:globalThis.document)?ct.useLayoutEffect:()=>{},yp=ct.forwardRef((e,t)=>{var n;const{container:r,...a}=e,[i,s]=ct.useState(!1);gp(()=>s(!0),[]);const o=r||i&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return o?Ch.createPortal(xt.jsx(np.div,{...a,ref:t}),o):null});yp.displayName="Portal";var vp=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=ct.useState(),r=ct.useRef(null),a=ct.useRef(e),i=ct.useRef("none"),s=e?"mounted":"unmounted",[o,l]=function(e,t){return ct.useReducer((e,n)=>t[e][n]??e,e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ct.useEffect(()=>{const e=xp(r.current);i.current="mounted"===o?e:"none"},[o]),gp(()=>{const t=r.current,n=a.current;if(n!==e){const r=i.current,s=xp(t);if(e)l("MOUNT");else if("none"===s||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&r!==s?"ANIMATION_OUT":"UNMOUNT")}a.current=e}},[e,l]),gp(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,s=i=>{const s=xp(r.current).includes(i.animationName);if(i.target===t&&s&&(l("ANIMATION_END"),!a.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(i.current=xp(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",s),t.addEventListener("animationend",s),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",s),t.removeEventListener("animationend",s)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:ct.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),a="function"==typeof n?n({present:r.isPresent}):ct.Children.only(n),i=Uh(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(a));return"function"==typeof n||r.isPresent?ct.cloneElement(a,{ref:i}):null};function xp(e){return(null==e?void 0:e.animationName)||"none"}vp.displayName="Presence";var bp=dt[" useInsertionEffect ".trim().toString()]||gp;function wp({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,s]=function({defaultProp:e,onChange:t}){const[n,r]=ct.useState(e),a=ct.useRef(n),i=ct.useRef(t);return bp(()=>{i.current=t},[t]),ct.useEffect(()=>{var e;a.current!==n&&(null==(e=i.current)||e.call(i,n),a.current=n)},[n,a]),[n,r,i]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:a;{const t=ct.useRef(void 0!==e);ct.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,r])}const c=ct.useCallback(t=>{var n;if(o){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(n=s.current)||n.call(s,r))}else i(t)},[o,e,i,s]);return[l,c]}var kp=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Np=ct.forwardRef((e,t)=>xt.jsx(np.span,{...e,ref:t,style:{...kp,...e.style}}));Np.displayName="VisuallyHidden";var jp=Np,_p="ToastProvider",[Sp,Cp,Pp]=tp("Toast"),[Ep]=Kh("Toast",[Pp]),[Rp,Op]=Ep(_p),Tp=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:s}=e,[o,l]=ct.useState(null),[c,u]=ct.useState(0),d=ct.useRef(!1),h=ct.useRef(!1);return n.trim(),xt.jsx(Sp.Provider,{scope:t,children:xt.jsx(Rp,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:ct.useCallback(()=>u(e=>e+1),[]),onToastRemove:ct.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:s})})};Tp.displayName=_p;var Mp="ToastViewport",Ap=["F8"],Bp="toast.viewportPause",Dp="toast.viewportResume",Ip=ct.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Ap,label:a="Notifications ({hotkey})",...i}=e,s=Op(Mp,n),o=Cp(n),l=ct.useRef(null),c=ct.useRef(null),u=ct.useRef(null),d=ct.useRef(null),h=Uh(t,d,s.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=s.toastCount>0;ct.useEffect(()=>{const e=e=>{var t;0!==r.length&&r.every(t=>e[t]||e.code===t)&&(null==(t=d.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),ct.useEffect(()=>{const e=l.current,t=d.current;if(m&&e&&t){const n=()=>{if(!s.isClosePausedRef.current){const e=new CustomEvent(Bp);t.dispatchEvent(e),s.isClosePausedRef.current=!0}},r=()=>{if(s.isClosePausedRef.current){const e=new CustomEvent(Dp);t.dispatchEvent(e),s.isClosePausedRef.current=!1}},a=t=>{!e.contains(t.relatedTarget)&&r()},i=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",a),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",i),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[m,s.isClosePausedRef]);const f=ct.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const n=t.ref.current,r=[n,...tm(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return ct.useEffect(()=>{const e=d.current;if(e){const t=t=>{var n,r,a;const i=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!i){const i=document.activeElement,s=t.shiftKey;if(t.target===e&&s)return void(null==(n=c.current)||n.focus());const o=f({tabbingDirection:s?"backwards":"forwards"}),l=o.findIndex(e=>e===i);nm(o.slice(l+1))?t.preventDefault():s?null==(r=c.current)||r.focus():null==(a=u.current)||a.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,f]),xt.jsxs(fp,{ref:l,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&xt.jsx(Fp,{ref:c,onFocusFromOutsideViewport:()=>{nm(f({tabbingDirection:"forwards"}))}}),xt.jsx(Sp.Slot,{scope:n,children:xt.jsx(np.ol,{tabIndex:-1,...i,ref:h})}),m&&xt.jsx(Fp,{ref:u,onFocusFromOutsideViewport:()=>{nm(f({tabbingDirection:"backwards"}))}})]})});Ip.displayName=Mp;var Lp="ToastFocusProxy",Fp=ct.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=Op(Lp,n);return xt.jsx(Np,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null==(t=i.viewport)?void 0:t.contains(n))&&r()}})});Fp.displayName=Lp;var $p="Toast",zp=ct.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...s}=e,[o,l]=wp({prop:r,defaultProp:a??!0,onChange:i,caller:$p});return xt.jsx(vp,{present:n||o,children:xt.jsx(Wp,{open:o,...s,ref:t,onClose:()=>l(!1),onPause:ap(e.onPause),onResume:ap(e.onResume),onSwipeStart:Vh(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Vh(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:Vh(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Vh(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});zp.displayName=$p;var[qp,Vp]=Ep($p,{onClose(){}}),Wp=ct.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:s,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...m}=e,f=Op($p,n),[g,y]=ct.useState(null),v=Uh(t,e=>y(e)),x=ct.useRef(null),b=ct.useRef(null),w=a||f.duration,k=ct.useRef(0),N=ct.useRef(w),j=ct.useRef(0),{onToastAdd:_,onToastRemove:S}=f,C=ap(()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=f.viewport)||e.focus()),s()}),P=ct.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(j.current),k.current=(new Date).getTime(),j.current=window.setTimeout(C,e))},[C]);ct.useEffect(()=>{const e=f.viewport;if(e){const t=()=>{P(N.current),null==c||c()},n=()=>{const e=(new Date).getTime()-k.current;N.current=N.current-e,window.clearTimeout(j.current),null==l||l()};return e.addEventListener(Bp,n),e.addEventListener(Dp,t),()=>{e.removeEventListener(Bp,n),e.removeEventListener(Dp,t)}}},[f.viewport,w,l,c,P]),ct.useEffect(()=>{i&&!f.isClosePausedRef.current&&P(w)},[i,w,f.isClosePausedRef,P]),ct.useEffect(()=>(_(),()=>S()),[_,S]);const E=ct.useMemo(()=>g?Xp(g):null,[g]);return f.viewport?xt.jsxs(xt.Fragment,{children:[E&&xt.jsx(Qp,{__scopeToast:n,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0,children:E}),xt.jsx(qp,{scope:n,onClose:C,children:Sh.createPortal(xt.jsx(Sp.ItemSlot,{scope:n,children:xt.jsx(mp,{asChild:!0,onEscapeKeyDown:Vh(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||C(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:xt.jsx(np.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":f.swipeDirection,...m,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Vh(e.onKeyDown,e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:Vh(e.onPointerDown,e=>{0===e.button&&(x.current={x:e.clientX,y:e.clientY})}),onPointerMove:Vh(e.onPointerMove,e=>{if(!x.current)return;const t=e.clientX-x.current.x,n=e.clientY-x.current.y,r=Boolean(b.current),a=["left","right"].includes(f.swipeDirection),i=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,s=a?i(0,t):0,o=a?0:i(0,n),l="touch"===e.pointerType?10:2,c={x:s,y:o},h={originalEvent:e,delta:c};r?(b.current=c,Jp("toast.swipeMove",d,h,{discrete:!1})):em(c,f.swipeDirection,l)?(b.current=c,Jp("toast.swipeStart",u,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(x.current=null)}),onPointerUp:Vh(e.onPointerUp,e=>{const t=b.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),b.current=null,x.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};em(t,f.swipeDirection,f.swipeThreshold)?Jp("toast.swipeEnd",p,r,{discrete:!0}):Jp("toast.swipeCancel",h,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),Qp=e=>{const{__scopeToast:t,children:n,...r}=e,a=Op($p,t),[i,s]=ct.useState(!1),[o,l]=ct.useState(!1);return function(e=()=>{}){const t=ap(e);gp(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>s(!0)),ct.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:xt.jsx(yp,{asChild:!0,children:xt.jsx(Np,{...r,children:i&&xt.jsxs(xt.Fragment,{children:[a.label," ",n]})})})},Up=ct.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return xt.jsx(np.div,{...r,ref:t})});Up.displayName="ToastTitle";var Kp=ct.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return xt.jsx(np.div,{...r,ref:t})});Kp.displayName="ToastDescription";var Hp=ct.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?xt.jsx(Zp,{altText:n,asChild:!0,children:xt.jsx(Yp,{...r,ref:t})}):null});Hp.displayName="ToastAction";var Gp="ToastClose",Yp=ct.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=Vp(Gp,n);return xt.jsx(Zp,{asChild:!0,children:xt.jsx(np.button,{type:"button",...r,ref:t,onClick:Vh(e.onClick,a.onClose)})})});Yp.displayName=Gp;var Zp=ct.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return xt.jsx(np.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function Xp(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...Xp(e))}}),t}function Jp(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?rp(a,i):a.dispatchEvent(i)}var em=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return"left"===t||"right"===t?i&&r>n:!i&&a>n};function tm(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function nm(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var rm=Tp,am=Ip,im=zp,sm=Up,om=Kp,lm=Hp,cm=Yp;function um(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=um(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function dm(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=um(e))&&(r&&(r+=" "),r+=t);return r}const hm=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,pm=dm,mm=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return pm(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(e=>{const t=null==n?void 0:n[e],r=null==i?void 0:i[e];if(null===t)return null;const s=hm(t)||hm(r);return a[e][s]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...i,...o}[t]):{...i,...o}[t]===n})?[...e,n,r]:e},[]);return pm(e,s,l,null==n?void 0:n.class,null==n?void 0:n.className)},fm=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();var gm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ym=ct.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>ct.createElement("svg",{ref:l,...gm,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:fm("lucide",a),...o},[...s.map(([e,t])=>ct.createElement(e,t)),...Array.isArray(i)?i:[i]])),vm=(e,t)=>{const n=ct.forwardRef(({className:n,...r},a)=>{return ct.createElement(ym,{ref:a,iconNode:t,className:fm(`lucide-${i=e,i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var i});return n.displayName=`${e}`,n},xm=vm("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),bm=vm("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),wm=vm("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),km=vm("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),Nm=vm("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),jm=vm("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),_m=vm("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Sm=vm("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),Cm=vm("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Pm=vm("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Em=vm("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Rm=vm("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Om=vm("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Tm=vm("Castle",[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]]),Mm=vm("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Am=vm("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),Bm=vm("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Dm=vm("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Im=vm("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Lm=vm("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Fm=vm("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),$m=vm("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),zm=vm("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),qm=vm("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Vm=vm("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Wm=vm("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Qm=vm("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Um=vm("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Km=vm("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Hm=vm("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),Gm=vm("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Ym=vm("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),Zm=vm("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Xm=vm("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Jm=vm("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ef=vm("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),tf=vm("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),nf=vm("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),rf=vm("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),af=vm("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]),sf=vm("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),of=vm("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),lf=vm("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]),cf=vm("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),uf=vm("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),df=vm("Frame",[["line",{x1:"22",x2:"2",y1:"6",y2:"6",key:"15w7dq"}],["line",{x1:"22",x2:"2",y1:"18",y2:"18",key:"1ip48p"}],["line",{x1:"6",x2:"6",y1:"2",y2:"22",key:"a2lnyx"}],["line",{x1:"18",x2:"18",y1:"2",y2:"22",key:"8vb6jd"}]]),hf=vm("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),pf=vm("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),mf=vm("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),ff=vm("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),gf=vm("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]),yf=vm("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),vf=vm("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),xf=vm("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),bf=vm("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),wf=vm("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),kf=vm("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]),Nf=vm("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),jf=vm("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),_f=vm("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),Sf=vm("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Cf=vm("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Pf=vm("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ef=vm("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Rf=vm("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Of=vm("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Tf=vm("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Mf=vm("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Af=vm("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Bf=vm("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Df=vm("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),If=vm("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Lf=vm("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Ff=vm("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]),$f=vm("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),zf=vm("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),qf=vm("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Vf=vm("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Wf=vm("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Qf=vm("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Uf=vm("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Kf=vm("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Hf=vm("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),Gf=vm("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Yf=vm("Puzzle",[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]]),Zf=vm("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),Xf=vm("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Jf=vm("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),eg=vm("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),tg=vm("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),ng=vm("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),rg=vm("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ag=vm("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ig=vm("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),sg=vm("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),og=vm("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),lg=vm("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]),cg=vm("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ug=vm("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),dg=vm("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),hg=vm("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]),pg=vm("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),mg=vm("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),fg=vm("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),gg=vm("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),yg=vm("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),vg=vm("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]),xg=vm("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),bg=vm("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),wg=vm("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),kg=vm("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ng=vm("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),jg=vm("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),_g=vm("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Sg=vm("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),Cg=vm("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Pg=vm("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Eg=vm("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Rg=vm("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),Og=vm("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Tg=vm("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Mg=vm("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ag=vm("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Bg=e=>{const t=Fg(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Dg(n,t)||Lg(e)},getConflictingClassGroupIds:(e,t)=>{const a=n[e]||[];return t&&r[e]?[...a,...r[e]]:a}}},Dg=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),i=a?Dg(e.slice(1),a):void 0;if(i)return i;if(0===t.validators.length)return;const s=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(s)))?void 0:n.classGroupId},Ig=/^\[(.+)\]$/,Lg=e=>{if(Ig.test(e)){const t=Ig.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Fg=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Vg(Object.entries(e.classGroups),n).forEach(([e,n])=>{$g(n,r,e,t)}),r},$g=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:zg(t,e)).classGroupId=n)}if("function"==typeof e)return qg(e)?void $g(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,a])=>{$g(a,zg(t,e),n,r)})})},zg=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},qg=e=>e.isThemeGetter,Vg=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,Wg=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):a(e,t)}}},Qg=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,a=t[0],i=t.length,s=e=>{const n=[];let s,o=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===o){if(c===a&&(r||e.slice(d,d+i)===t)){n.push(e.slice(l,d)),l=d+i;continue}if("/"===c){s=d;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:s&&s>l?s-l:void 0}};return n?e=>n({className:e,parseClassName:s}):s},Ug=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Kg=/\s+/;function Hg(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Gg(e))&&(r&&(r+=" "),r+=t);return r}const Gg=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Gg(e[r]))&&(n&&(n+=" "),n+=t);return n};function Yg(e,...t){let n,r,a,i=function(o){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Wg(e.cacheSize),parseClassName:Qg(e),...Bg(e)}))(l),r=n.cache.get,a=n.cache.set,i=s,s(o)};function s(e){const t=r(e);if(t)return t;const i=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],s=e.trim().split(Kg);let o="";for(let l=s.length-1;l>=0;l-=1){const e=s[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=n(e);let h=Boolean(d),p=r(h?u.substring(0,d):u);if(!p){if(!h){o=e+(o.length>0?" "+o:o);continue}if(p=r(u),!p){o=e+(o.length>0?" "+o:o);continue}h=!1}const m=Ug(t).join(":"),f=c?m+"!":m,g=f+p;if(i.includes(g))continue;i.push(g);const y=a(p,h);for(let n=0;n<y.length;++n){const e=y[n];i.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return a(e,i),i}return function(){return i(Hg.apply(null,arguments))}}const Zg=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Xg=/^\[(?:([a-z-]+):)?(.+)\]$/i,Jg=/^\d+\/\d+$/,ey=new Set(["px","full","screen"]),ty=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ny=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ry=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ay=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iy=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,sy=e=>ly(e)||ey.has(e)||Jg.test(e),oy=e=>wy(e,"length",ky),ly=e=>Boolean(e)&&!Number.isNaN(Number(e)),cy=e=>wy(e,"number",ly),uy=e=>Boolean(e)&&Number.isInteger(Number(e)),dy=e=>e.endsWith("%")&&ly(e.slice(0,-1)),hy=e=>Xg.test(e),py=e=>ty.test(e),my=new Set(["length","size","percentage"]),fy=e=>wy(e,my,Ny),gy=e=>wy(e,"position",Ny),yy=new Set(["image","url"]),vy=e=>wy(e,yy,_y),xy=e=>wy(e,"",jy),by=()=>!0,wy=(e,t,n)=>{const r=Xg.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},ky=e=>ny.test(e)&&!ry.test(e),Ny=()=>!1,jy=e=>ay.test(e),_y=e=>iy.test(e),Sy=Yg(()=>{const e=Zg("colors"),t=Zg("spacing"),n=Zg("blur"),r=Zg("brightness"),a=Zg("borderColor"),i=Zg("borderRadius"),s=Zg("borderSpacing"),o=Zg("borderWidth"),l=Zg("contrast"),c=Zg("grayscale"),u=Zg("hueRotate"),d=Zg("invert"),h=Zg("gap"),p=Zg("gradientColorStops"),m=Zg("gradientColorStopPositions"),f=Zg("inset"),g=Zg("margin"),y=Zg("opacity"),v=Zg("padding"),x=Zg("saturate"),b=Zg("scale"),w=Zg("sepia"),k=Zg("skew"),N=Zg("space"),j=Zg("translate"),_=()=>["auto",hy,t],S=()=>[hy,t],C=()=>["",sy,oy],P=()=>["auto",ly,hy],E=()=>["","0",hy],R=()=>[ly,hy];return{cacheSize:500,separator:":",theme:{colors:[by],spacing:[sy,oy],blur:["none","",py,hy],brightness:R(),borderColor:[e],borderRadius:["none","","full",py,hy],borderSpacing:S(),borderWidth:C(),contrast:R(),grayscale:E(),hueRotate:R(),invert:E(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[dy,oy],inset:_(),margin:_(),opacity:R(),padding:S(),saturate:R(),scale:R(),sepia:E(),skew:R(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",hy]}],container:["container"],columns:[{columns:[py]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",hy]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",uy,hy]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",hy]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",uy,hy]}],"grid-cols":[{"grid-cols":[by]}],"col-start-end":[{col:["auto",{span:["full",uy,hy]},hy]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[by]}],"row-start-end":[{row:["auto",{span:[uy,hy]},hy]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",hy]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",hy]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",hy,t]}],"min-w":[{"min-w":[hy,t,"min","max","fit"]}],"max-w":[{"max-w":[hy,t,"none","full","min","max","fit","prose",{screen:[py]},py]}],h:[{h:[hy,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[hy,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[hy,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[hy,t,"auto","min","max","fit"]}],"font-size":[{text:["base",py,oy]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cy]}],"font-family":[{font:[by]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",hy]}],"line-clamp":[{"line-clamp":["none",ly,cy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",sy,hy]}],"list-image":[{"list-image":["none",hy]}],"list-style-type":[{list:["none","disc","decimal",hy]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",sy,oy]}],"underline-offset":[{"underline-offset":["auto",sy,hy]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",hy]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",hy]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",gy]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fy]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vy]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[sy,hy]}],"outline-w":[{outline:[sy,oy]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[sy,oy]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",py,xy]}],"shadow-color":[{shadow:[by]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",py,hy]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",hy]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",hy]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",hy]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[uy,hy]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",hy]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",hy]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",hy]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[sy,oy,cy]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Cy(...e){return Sy(dm(e))}const Py=rm,Ey=ct.forwardRef(({className:e,...t},n)=>xt.jsx(am,{ref:n,className:Cy("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Ey.displayName=am.displayName;const Ry=mm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Oy=ct.forwardRef(({className:e,variant:t,...n},r)=>xt.jsx(im,{ref:r,className:Cy(Ry({variant:t}),e),...n}));Oy.displayName=im.displayName;ct.forwardRef(({className:e,...t},n)=>xt.jsx(lm,{ref:n,className:Cy("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=lm.displayName;const Ty=ct.forwardRef(({className:e,...t},n)=>xt.jsx(cm,{ref:n,className:Cy("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:xt.jsx(Mg,{className:"h-4 w-4"})}));Ty.displayName=cm.displayName;const My=ct.forwardRef(({className:e,...t},n)=>xt.jsx(sm,{ref:n,className:Cy("text-sm font-semibold",e),...t}));My.displayName=sm.displayName;const Ay=ct.forwardRef(({className:e,...t},n)=>xt.jsx(om,{ref:n,className:Cy("text-sm opacity-90",e),...t}));function By(){const{toasts:e}=qh();return xt.jsxs(Py,{children:[e.map(function({id:e,title:t,description:n,action:r,...a}){return xt.jsxs(Oy,{...a,children:[xt.jsxs("div",{className:"grid gap-1",children:[t&&xt.jsx(My,{children:t}),n&&xt.jsx(Ay,{children:n})]}),r,xt.jsx(Ty,{})]},e)}),xt.jsx(Ey,{})]})}Ay.displayName=om.displayName;var Dy=["light","dark"],Iy=ct.createContext(void 0),Ly={setTheme:e=>{},themes:[]};ct.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:s,attrs:o,nonce:l})=>{let c="system"===i,u="class"===n?`var d=document.documentElement,c=d.classList;c.remove(${o.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=a?Dy.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(e,t=!1,r=!0)=>{let i=s?s[e]:e,o=t?e+"|| ''":`'${i}'`,l="";return a&&r&&!t&&Dy.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===n?l+=t||i?`c.add(${o})`:"null":i&&(l+=`d[s](n,${o})`),l},p=e?`!function(){${u}${h(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${h(s?"x[e]":"e",!0)}}${c?"":"else{"+h(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${h(s?"x[e]":"e",!0)}}else{${h(i,!1,!1)};}${d}}catch(t){}}();`;return ct.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var Fy=Array(12).fill(0),$y=({visible:e,className:t})=>ut.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ut.createElement("div",{className:"sonner-spinner"},Fy.map((e,t)=>ut.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),zy=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ut.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qy=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ut.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Vy=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ut.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Wy=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ut.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Qy=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ut.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ut.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Uy=1,Ky=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Uy++,i=this.toasts.find(e=>e.id===a),s=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(t=>t.id===a?(this.publish({...t,...e,id:a,title:n}),{...t,...e,id:a,dismissible:s,title:n}):t):this.addToast({title:n,...r,dismissible:s,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let r,a=e instanceof Promise?e:e(),i=void 0!==n,s=a.then(async e=>{if(r=["resolve",e],ut.isValidElement(e))i=!1,this.create({id:n,type:"default",message:e});else if(Hy(e)&&!e.ok){i=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:n,type:"error",message:r,description:a})}else if(void 0!==t.success){i=!1;let r="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:n,type:"success",message:r,description:a})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){i=!1;let r="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:n,type:"error",message:r,description:a})}}).finally(()=>{var e;i&&(this.dismiss(n),n=void 0),null==(e=t.finally)||e.call(t)}),o=()=>new Promise((e,t)=>s.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{let n=(null==t?void 0:t.id)||Uy++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Hy=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Gy=(e,t)=>{let n=(null==t?void 0:t.id)||Uy++;return Ky.addToast({title:e,...t,id:n}),n},Yy=Object.assign(Gy,{success:Ky.success,info:Ky.info,warning:Ky.warning,error:Ky.error,custom:Ky.custom,message:Ky.message,promise:Ky.promise,dismiss:Ky.dismiss,loading:Ky.loading},{getHistory:()=>Ky.toasts,getToasts:()=>Ky.getActiveToasts()});function Zy(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var Xy=3,Jy=14;function ev(...e){return e.filter(Boolean).join(" ")}var tv=e=>{var t,n,r,a,i,s,o,l,c,u,d;let{invert:h,toast:p,unstyled:m,interacting:f,setHeights:g,visibleToasts:y,heights:v,index:x,toasts:b,expanded:w,removeToast:k,defaultRichColors:N,closeButton:j,style:_,cancelButtonStyle:S,actionButtonStyle:C,className:P="",descriptionClassName:E="",duration:R,position:O,gap:T,loadingIcon:M,expandByDefault:A,classNames:B,icons:D,closeButtonAriaLabel:I="Close toast",pauseWhenPageIsHidden:L}=e,[F,$]=ut.useState(null),[z,q]=ut.useState(null),[V,W]=ut.useState(!1),[Q,U]=ut.useState(!1),[K,H]=ut.useState(!1),[G,Y]=ut.useState(!1),[Z,X]=ut.useState(!1),[J,ee]=ut.useState(0),[te,ne]=ut.useState(0),re=ut.useRef(p.duration||R||4e3),ae=ut.useRef(null),ie=ut.useRef(null),se=0===x,oe=x+1<=y,le=p.type,ce=!1!==p.dismissible,ue=p.className||"",de=p.descriptionClassName||"",he=ut.useMemo(()=>v.findIndex(e=>e.toastId===p.id)||0,[v,p.id]),pe=ut.useMemo(()=>{var e;return null!=(e=p.closeButton)?e:j},[p.closeButton,j]),me=ut.useMemo(()=>p.duration||R||4e3,[p.duration,R]),fe=ut.useRef(0),ge=ut.useRef(0),ye=ut.useRef(0),ve=ut.useRef(null),[xe,be]=O.split("-"),we=ut.useMemo(()=>v.reduce((e,t,n)=>n>=he?e:e+t.height,0),[v,he]),ke=(()=>{let[e,t]=ut.useState(document.hidden);return ut.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),Ne=p.invert||h,je="loading"===le;ge.current=ut.useMemo(()=>he*T+we,[he,we]),ut.useEffect(()=>{re.current=me},[me]),ut.useEffect(()=>{W(!0)},[]),ut.useEffect(()=>{let e=ie.current;if(e){let t=e.getBoundingClientRect().height;return ne(t),g(e=>[{toastId:p.id,height:t,position:p.position},...e]),()=>g(e=>e.filter(e=>e.toastId!==p.id))}},[g,p.id]),ut.useLayoutEffect(()=>{if(!V)return;let e=ie.current,t=e.style.height;e.style.height="auto";let n=e.getBoundingClientRect().height;e.style.height=t,ne(n),g(e=>e.find(e=>e.toastId===p.id)?e.map(e=>e.toastId===p.id?{...e,height:n}:e):[{toastId:p.id,height:n,position:p.position},...e])},[V,p.title,p.description,g,p.id]);let _e=ut.useCallback(()=>{U(!0),ee(ge.current),g(e=>e.filter(e=>e.toastId!==p.id)),setTimeout(()=>{k(p)},200)},[p,k,g,ge]);return ut.useEffect(()=>{if(p.promise&&"loading"===le||p.duration===1/0||"loading"===p.type)return;let e;return w||f||L&&ke?(()=>{if(ye.current<fe.current){let e=(new Date).getTime()-fe.current;re.current=re.current-e}ye.current=(new Date).getTime()})():re.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=p.onAutoClose)||e.call(p,p),_e()},re.current)),()=>clearTimeout(e)},[w,f,p,le,L,ke,_e]),ut.useEffect(()=>{p.delete&&_e()},[_e,p.delete]),ut.createElement("li",{tabIndex:0,ref:ie,className:ev(P,ue,null==B?void 0:B.toast,null==(t=null==p?void 0:p.classNames)?void 0:t.toast,null==B?void 0:B.default,null==B?void 0:B[le],null==(n=null==p?void 0:p.classNames)?void 0:n[le]),"data-sonner-toast":"","data-rich-colors":null!=(r=p.richColors)?r:N,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":V,"data-promise":!!p.promise,"data-swiped":Z,"data-removed":Q,"data-visible":oe,"data-y-position":xe,"data-x-position":be,"data-index":x,"data-front":se,"data-swiping":K,"data-dismissible":ce,"data-type":le,"data-invert":Ne,"data-swipe-out":G,"data-swipe-direction":z,"data-expanded":!!(w||A&&V),style:{"--index":x,"--toasts-before":x,"--z-index":b.length-x,"--offset":`${Q?J:ge.current}px`,"--initial-height":A?"auto":`${te}px`,..._,...p.style},onDragEnd:()=>{H(!1),$(null),ve.current=null},onPointerDown:e=>{je||!ce||(ae.current=new Date,ee(ge.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(H(!0),ve.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n,r;if(G||!ce)return;ve.current=null;let a=Number((null==(e=ie.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),i=Number((null==(t=ie.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),s=(new Date).getTime()-(null==(n=ae.current)?void 0:n.getTime()),o="x"===F?a:i,l=Math.abs(o)/s;if(Math.abs(o)>=20||l>.11)return ee(ge.current),null==(r=p.onDismiss)||r.call(p,p),q("x"===F?a>0?"right":"left":i>0?"down":"up"),_e(),Y(!0),void X(!1);H(!1),$(null)},onPointerMove:t=>{var n,r,a,i;if(!ve.current||!ce||(null==(n=window.getSelection())?void 0:n.toString().length)>0)return;let s=t.clientY-ve.current.y,o=t.clientX-ve.current.x,l=null!=(r=e.swipeDirections)?r:function(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(O);!F&&(Math.abs(o)>1||Math.abs(s)>1)&&$(Math.abs(o)>Math.abs(s)?"x":"y");let c={x:0,y:0};"y"===F?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&s<0||l.includes("bottom")&&s>0)&&(c.y=s):"x"===F&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&X(!0),null==(a=ie.current)||a.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(i=ie.current)||i.style.setProperty("--swipe-amount-y",`${c.y}px`)}},pe&&!p.jsx?ut.createElement("button",{"aria-label":I,"data-disabled":je,"data-close-button":!0,onClick:je||!ce?()=>{}:()=>{var e;_e(),null==(e=p.onDismiss)||e.call(p,p)},className:ev(null==B?void 0:B.closeButton,null==(a=null==p?void 0:p.classNames)?void 0:a.closeButton)},null!=(i=null==D?void 0:D.close)?i:Qy):null,p.jsx||ct.isValidElement(p.title)?p.jsx?p.jsx:"function"==typeof p.title?p.title():p.title:ut.createElement(ut.Fragment,null,le||p.icon||p.promise?ut.createElement("div",{"data-icon":"",className:ev(null==B?void 0:B.icon,null==(s=null==p?void 0:p.classNames)?void 0:s.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||(null!=D&&D.loading?ut.createElement("div",{className:ev(null==B?void 0:B.loader,null==(Se=null==p?void 0:p.classNames)?void 0:Se.loader,"sonner-loader"),"data-visible":"loading"===le},D.loading):M?ut.createElement("div",{className:ev(null==B?void 0:B.loader,null==(Ce=null==p?void 0:p.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===le},M):ut.createElement($y,{className:ev(null==B?void 0:B.loader,null==(Pe=null==p?void 0:p.classNames)?void 0:Pe.loader),visible:"loading"===le})):null,"loading"!==p.type?p.icon||(null==D?void 0:D[le])||(e=>{switch(e){case"success":return zy;case"info":return Vy;case"warning":return qy;case"error":return Wy;default:return null}})(le):null):null,ut.createElement("div",{"data-content":"",className:ev(null==B?void 0:B.content,null==(o=null==p?void 0:p.classNames)?void 0:o.content)},ut.createElement("div",{"data-title":"",className:ev(null==B?void 0:B.title,null==(l=null==p?void 0:p.classNames)?void 0:l.title)},"function"==typeof p.title?p.title():p.title),p.description?ut.createElement("div",{"data-description":"",className:ev(E,de,null==B?void 0:B.description,null==(c=null==p?void 0:p.classNames)?void 0:c.description)},"function"==typeof p.description?p.description():p.description):null),ct.isValidElement(p.cancel)?p.cancel:p.cancel&&Zy(p.cancel)?ut.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||S,onClick:e=>{var t,n;Zy(p.cancel)&&ce&&(null==(n=(t=p.cancel).onClick)||n.call(t,e),_e())},className:ev(null==B?void 0:B.cancelButton,null==(u=null==p?void 0:p.classNames)?void 0:u.cancelButton)},p.cancel.label):null,ct.isValidElement(p.action)?p.action:p.action&&Zy(p.action)?ut.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||C,onClick:e=>{var t,n;Zy(p.action)&&(null==(n=(t=p.action).onClick)||n.call(t,e),!e.defaultPrevented&&_e())},className:ev(null==B?void 0:B.actionButton,null==(d=null==p?void 0:p.classNames)?void 0:d.actionButton)},p.action.label):null));var Se,Ce,Pe};function nv(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function rv(e,t){let n={};return[e,t].forEach((e,t)=>{let r=1===t,a=r?"--mobile-offset":"--offset",i=r?"16px":"32px";function s(e){["top","right","bottom","left"].forEach(t=>{n[`${a}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?s(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n[`${a}-${t}`]=i:n[`${a}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):s(i)}),n}var av=ct.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:s,className:o,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:h,style:p,visibleToasts:m=Xy,toastOptions:f,dir:g=nv(),gap:y=Jy,loadingIcon:v,icons:x,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w}=e,[k,N]=ut.useState([]),j=ut.useMemo(()=>Array.from(new Set([r].concat(k.filter(e=>e.position).map(e=>e.position)))),[k,r]),[_,S]=ut.useState([]),[C,P]=ut.useState(!1),[E,R]=ut.useState(!1),[O,T]=ut.useState("system"!==u?u:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=ut.useRef(null),A=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=ut.useRef(null),D=ut.useRef(!1),I=ut.useCallback(e=>{N(t=>{var n;return null!=(n=t.find(t=>t.id===e.id))&&n.delete||Ky.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return ut.useEffect(()=>Ky.subscribe(e=>{e.dismiss?N(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{Ch.flushSync(()=>{N(t=>{let n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]})})})}),[]),ut.useEffect(()=>{if("system"!==u)return void T(u);if("system"===u&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?T("dark"):T("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{T(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{T(e?"dark":"light")}catch(t){}})}},[u]),ut.useEffect(()=>{k.length<=1&&P(!1)},[k]),ut.useEffect(()=>{let e=e=>{var t,n;a.every(t=>e[t]||e.code===t)&&(P(!0),null==(t=M.current)||t.focus()),"Escape"===e.code&&(document.activeElement===M.current||null!=(n=M.current)&&n.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),ut.useEffect(()=>{if(M.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,D.current=!1)}},[M.current]),ut.createElement("section",{ref:t,"aria-label":`${b} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((t,r)=>{var a;let[u,b]=t.split("-");return k.length?ut.createElement("ol",{key:t,dir:"auto"===g?nv():g,tabIndex:-1,ref:M,className:o,"data-sonner-toaster":!0,"data-theme":O,"data-y-position":u,"data-lifted":C&&k.length>1&&!i,"data-x-position":b,style:{"--front-toast-height":`${(null==(a=_[0])?void 0:a.height)||0}px`,"--width":"356px","--gap":`${y}px`,...p,...rv(l,c)},onBlur:e=>{D.current&&!e.currentTarget.contains(e.relatedTarget)&&(D.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D.current||(D.current=!0,B.current=e.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{E||P(!1)},onDragEnd:()=>P(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||R(!0)},onPointerUp:()=>R(!1)},k.filter(e=>!e.position&&0===r||e.position===t).map((r,a)=>{var o,l;return ut.createElement(tv,{key:r.id,icons:x,index:a,toast:r,defaultRichColors:d,duration:null!=(o=null==f?void 0:f.duration)?o:h,className:null==f?void 0:f.className,descriptionClassName:null==f?void 0:f.descriptionClassName,invert:n,visibleToasts:m,closeButton:null!=(l=null==f?void 0:f.closeButton)?l:s,interacting:E,position:t,style:null==f?void 0:f.style,unstyled:null==f?void 0:f.unstyled,classNames:null==f?void 0:f.classNames,cancelButtonStyle:null==f?void 0:f.cancelButtonStyle,actionButtonStyle:null==f?void 0:f.actionButtonStyle,removeToast:I,toasts:k.filter(e=>e.position==r.position),heights:_.filter(e=>e.position==r.position),setHeights:S,expandByDefault:i,gap:y,loadingIcon:v,expanded:C,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const iv=({...e})=>{const{theme:t="system"}=null!=(n=ct.useContext(Iy))?n:Ly;var n;return xt.jsx(av,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var sv=dt[" useId ".trim().toString()]||(()=>{}),ov=0;function lv(e){const[t,n]=ct.useState(sv());return gp(()=>{n(e=>e??String(ov++))},[e]),t?`radix-${t}`:""}const cv=["top","right","bottom","left"],uv=Math.min,dv=Math.max,hv=Math.round,pv=Math.floor,mv=e=>({x:e,y:e}),fv={left:"right",right:"left",bottom:"top",top:"bottom"},gv={start:"end",end:"start"};function yv(e,t,n){return dv(e,uv(t,n))}function vv(e,t){return"function"==typeof e?e(t):e}function xv(e){return e.split("-")[0]}function bv(e){return e.split("-")[1]}function wv(e){return"x"===e?"y":"x"}function kv(e){return"y"===e?"height":"width"}const Nv=new Set(["top","bottom"]);function jv(e){return Nv.has(xv(e))?"y":"x"}function _v(e){return wv(jv(e))}function Sv(e){return e.replace(/start|end/g,e=>gv[e])}const Cv=["left","right"],Pv=["right","left"],Ev=["top","bottom"],Rv=["bottom","top"];function Ov(e,t,n,r){const a=bv(e);let i=function(e,t,n){switch(e){case"top":case"bottom":return n?t?Pv:Cv:t?Cv:Pv;case"left":case"right":return t?Ev:Rv;default:return[]}}(xv(e),"start"===n,r);return a&&(i=i.map(e=>e+"-"+a),t&&(i=i.concat(i.map(Sv)))),i}function Tv(e){return e.replace(/left|right|bottom|top/g,e=>fv[e])}function Mv(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Av(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function Bv(e,t,n){let{reference:r,floating:a}=e;const i=jv(t),s=_v(t),o=kv(s),l=xv(t),c="y"===i,u=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,h=r[o]/2-a[o]/2;let p;switch(l){case"top":p={x:u,y:r.y-a.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-a.width,y:d};break;default:p={x:r.x,y:r.y}}switch(bv(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1)}return p}async function Dv(e,t){var n;void 0===t&&(t={});const{x:r,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=vv(t,e),m=Mv(p),f=o[h?"floating"===d?"reference":"floating":d],g=Av(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(f)))||n?f:f.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,v=await(null==i.getOffsetParent?void 0:i.getOffsetParent(o.floating)),x=await(null==i.isElement?void 0:i.isElement(v))&&await(null==i.getScale?void 0:i.getScale(v))||{x:1,y:1},b=Av(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-b.top+m.top)/x.y,bottom:(b.bottom-g.bottom+m.bottom)/x.y,left:(g.left-b.left+m.left)/x.x,right:(b.right-g.right+m.right)/x.x}}function Iv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Lv(e){return cv.some(t=>e[t]>=0)}const Fv=new Set(["left","top"]);function $v(){return"undefined"!=typeof window}function zv(e){return Wv(e)?(e.nodeName||"").toLowerCase():"#document"}function qv(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Vv(e){var t;return null==(t=(Wv(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Wv(e){return!!$v()&&(e instanceof Node||e instanceof qv(e).Node)}function Qv(e){return!!$v()&&(e instanceof Element||e instanceof qv(e).Element)}function Uv(e){return!!$v()&&(e instanceof HTMLElement||e instanceof qv(e).HTMLElement)}function Kv(e){return!(!$v()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof qv(e).ShadowRoot)}const Hv=new Set(["inline","contents"]);function Gv(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=ox(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Hv.has(a)}const Yv=new Set(["table","td","th"]);function Zv(e){return Yv.has(zv(e))}const Xv=[":popover-open",":modal"];function Jv(e){return Xv.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const ex=["transform","translate","scale","rotate","perspective"],tx=["transform","translate","scale","rotate","perspective","filter"],nx=["paint","layout","strict","content"];function rx(e){const t=ax(),n=Qv(e)?ox(e):e;return ex.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||tx.some(e=>(n.willChange||"").includes(e))||nx.some(e=>(n.contain||"").includes(e))}function ax(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const ix=new Set(["html","body","#document"]);function sx(e){return ix.has(zv(e))}function ox(e){return qv(e).getComputedStyle(e)}function lx(e){return Qv(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function cx(e){if("html"===zv(e))return e;const t=e.assignedSlot||e.parentNode||Kv(e)&&e.host||Vv(e);return Kv(t)?t.host:t}function ux(e){const t=cx(e);return sx(t)?e.ownerDocument?e.ownerDocument.body:e.body:Uv(t)&&Gv(t)?t:ux(t)}function dx(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const a=ux(e),i=a===(null==(r=e.ownerDocument)?void 0:r.body),s=qv(a);if(i){const e=hx(s);return t.concat(s,s.visualViewport||[],Gv(a)?a:[],e&&n?dx(e):[])}return t.concat(a,dx(a,[],n))}function hx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function px(e){const t=ox(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Uv(e),i=a?e.offsetWidth:n,s=a?e.offsetHeight:r,o=hv(n)!==i||hv(r)!==s;return o&&(n=i,r=s),{width:n,height:r,$:o}}function mx(e){return Qv(e)?e:e.contextElement}function fx(e){const t=mx(e);if(!Uv(t))return mv(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=px(t);let s=(i?hv(n.width):n.width)/r,o=(i?hv(n.height):n.height)/a;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}const gx=mv(0);function yx(e){const t=qv(e);return ax()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:gx}function vx(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),i=mx(e);let s=mv(1);t&&(r?Qv(r)&&(s=fx(r)):s=fx(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==qv(e))&&t}(i,n,r)?yx(i):mv(0);let l=(a.left+o.x)/s.x,c=(a.top+o.y)/s.y,u=a.width/s.x,d=a.height/s.y;if(i){const e=qv(i),t=r&&Qv(r)?qv(r):r;let n=e,a=hx(n);for(;a&&r&&t!==n;){const e=fx(a),t=a.getBoundingClientRect(),r=ox(a),i=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=i,c+=s,n=qv(a),a=hx(n)}}return Av({width:u,height:d,x:l,y:c})}function xx(e,t){const n=lx(e).scrollLeft;return t?t.left+n:vx(Vv(e)).left+n}function bx(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:xx(e,r)),y:r.top+t.scrollTop}}const wx=new Set(["absolute","fixed"]);function kx(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=qv(e),r=Vv(e),a=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const e=ax();(!e||e&&"fixed"===t)&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}(e,n);else if("document"===t)r=function(e){const t=Vv(e),n=lx(e),r=e.ownerDocument.body,a=dv(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=dv(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+xx(e);const o=-n.scrollTop;return"rtl"===ox(r).direction&&(s+=dv(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:s,y:o}}(Vv(e));else if(Qv(t))r=function(e,t){const n=vx(e,!0,"fixed"===t),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Uv(e)?fx(e):mv(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:a*i.x,y:r*i.y}}(t,n);else{const n=yx(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Av(r)}function Nx(e,t){const n=cx(e);return!(n===t||!Qv(n)||sx(n))&&("fixed"===ox(n).position||Nx(n,t))}function jx(e,t,n){const r=Uv(t),a=Vv(t),i="fixed"===n,s=vx(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=mv(0);function c(){l.x=xx(a)}if(r||!r&&!i)if(("body"!==zv(t)||Gv(a))&&(o=lx(t)),r){const e=vx(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&c();i&&!r&&a&&c();const u=!a||r||i?mv(0):bx(a,o);return{x:s.left+o.scrollLeft-l.x-u.x,y:s.top+o.scrollTop-l.y-u.y,width:s.width,height:s.height}}function _x(e){return"static"===ox(e).position}function Sx(e,t){if(!Uv(e)||"fixed"===ox(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Vv(e)===n&&(n=n.ownerDocument.body),n}function Cx(e,t){const n=qv(e);if(Jv(e))return n;if(!Uv(e)){let t=cx(e);for(;t&&!sx(t);){if(Qv(t)&&!_x(t))return t;t=cx(t)}return n}let r=Sx(e,t);for(;r&&Zv(r)&&_x(r);)r=Sx(r,t);return r&&sx(r)&&_x(r)&&!rx(r)?n:r||function(e){let t=cx(e);for(;Uv(t)&&!sx(t);){if(rx(t))return t;if(Jv(t))return null;t=cx(t)}return null}(e)||n}const Px={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i="fixed"===a,s=Vv(r),o=!!t&&Jv(t.floating);if(r===s||o&&i)return n;let l={scrollLeft:0,scrollTop:0},c=mv(1);const u=mv(0),d=Uv(r);if((d||!d&&!i)&&(("body"!==zv(r)||Gv(s))&&(l=lx(r)),Uv(r))){const e=vx(r);c=fx(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!s||d||i?mv(0):bx(s,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Vv,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const i=[..."clippingAncestors"===n?Jv(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=dx(e,[],!1).filter(e=>Qv(e)&&"body"!==zv(e)),a=null;const i="fixed"===ox(e).position;let s=i?cx(e):e;for(;Qv(s)&&!sx(s);){const t=ox(s),n=rx(s);n||"fixed"!==t.position||(a=null),(i?!n&&!a:!n&&"static"===t.position&&a&&wx.has(a.position)||Gv(s)&&!n&&Nx(e,s))?r=r.filter(e=>e!==s):a=t,s=cx(s)}return t.set(e,r),r}(t,this._c):[].concat(n),r],s=i[0],o=i.reduce((e,n)=>{const r=kx(t,n,a);return e.top=dv(r.top,e.top),e.right=uv(r.right,e.right),e.bottom=uv(r.bottom,e.bottom),e.left=dv(r.left,e.left),e},kx(t,s,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Cx,getElementRects:async function(e){const t=this.getOffsetParent||Cx,n=this.getDimensions,r=await n(e.floating);return{reference:jx(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=px(e);return{width:t,height:n}},getScale:fx,isElement:Qv,isRTL:function(e){return"rtl"===ox(e).direction}};function Ex(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Rx(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=mx(e),u=a||i?[...c?dx(c):[],...dx(t)]:[];u.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)});const d=c&&o?function(e,t){let n,r=null;const a=Vv(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(o||t(),!h||!p)return;const m={rootMargin:-pv(d)+"px "+-pv(a.clientWidth-(u+h))+"px "+-pv(a.clientHeight-(d+p))+"px "+-pv(u)+"px",threshold:dv(0,uv(1,l))||1};let f=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!f)return s();r?s(!1,r):n=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==r||Ex(c,e.getBoundingClientRect())||s(),f=!1}try{r=new IntersectionObserver(g,{...m,root:a.ownerDocument})}catch(y){r=new IntersectionObserver(g,m)}r.observe(e)}(!0),i}(c,n):null;let h,p=-1,m=null;s&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let f=l?vx(e):null;return l&&function t(){const r=vx(e);f&&!Ex(f,r)&&n();f=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{a&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(h)}}const Ox=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:r,elements:a}=e,i=await(null==r.isRTL?void 0:r.isRTL(a.floating)),s=xv(n),o=bv(n),l="y"===jv(n),c=Fv.has(s)?-1:1,u=i&&l?-1:1,d=vv(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"==typeof m&&(p="end"===o?-1*m:m),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return s===(null==(n=o.offset)?void 0:n.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},Tx=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=vv(e,t),c={x:n,y:r},u=await Dv(t,l),d=jv(xv(a)),h=wv(d);let p=c[h],m=c[d];if(i){const e="y"===h?"bottom":"right";p=yv(p+u["y"===h?"top":"left"],p,p-u[e])}if(s){const e="y"===d?"bottom":"right";m=yv(m+u["y"===d?"top":"left"],m,m-u[e])}const f=o.fn({...t,[h]:p,[d]:m});return{...f,data:{x:f.x-n,y:f.y-r,enabled:{[h]:i,[d]:s}}}}}},Mx=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:f=!0,...g}=vv(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const y=xv(a),v=jv(o),x=xv(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(x||!f?[Tv(o)]:function(e){const t=Tv(e);return[Sv(e),t,Sv(t)]}(o)),k="none"!==m;!h&&k&&w.push(...Ov(o,f,m,b));const N=[o,...w],j=await Dv(t,g),_=[];let S=(null==(r=i.flip)?void 0:r.overflows)||[];if(u&&_.push(j[y]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=bv(e),a=_v(e),i=kv(a);let s="x"===a?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Tv(s)),[s,Tv(s)]}(a,s,b);_.push(j[e[0]],j[e[1]])}if(S=[...S,{placement:a,overflows:_}],!_.every(e=>e<=0)){var C,P;const e=((null==(C=i.flip)?void 0:C.index)||0)+1,t=N[e];if(t){if(!("alignment"===d&&v!==jv(t))||S.every(e=>e.overflows[0]>0&&jv(e.placement)===v))return{data:{index:e,overflows:S},reset:{placement:t}}}let n=null==(P=S.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:P.placement;if(!n)switch(p){case"bestFit":{var E;const e=null==(E=S.filter(e=>{if(k){const t=jv(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:E[0];e&&(n=e);break}case"initialPlacement":n=o}if(a!==n)return{reset:{placement:n}}}return{}}}},Ax=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...c}=vv(e,t),u=await Dv(t,c),d=xv(a),h=bv(a),p="y"===jv(a),{width:m,height:f}=i.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=h===(await(null==s.isRTL?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(y=d,g="end"===h?"top":"bottom");const v=f-u.top-u.bottom,x=m-u.left-u.right,b=uv(f-u[g],v),w=uv(m-u[y],x),k=!t.middlewareData.shift;let N=b,j=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(j=x),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(N=v),k&&!h){const e=dv(u.left,0),t=dv(u.right,0),n=dv(u.top,0),r=dv(u.bottom,0);p?j=m-2*(0!==e||0!==t?e+t:dv(u.left,u.right)):N=f-2*(0!==n||0!==r?n+r:dv(u.top,u.bottom))}await l({...t,availableWidth:j,availableHeight:N});const _=await s.getDimensions(o.floating);return m!==_.width||f!==_.height?{reset:{rects:!0}}:{}}}},Bx=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=vv(e,t);switch(r){case"referenceHidden":{const e=Iv(await Dv(t,{...a,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Lv(e)}}}case"escaped":{const e=Iv(await Dv(t,{...a,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:Lv(e)}}}default:return{}}}}},Dx=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=vv(e,t)||{};if(null==c)return{};const d=Mv(u),h={x:n,y:r},p=_v(a),m=kv(p),f=await s.getDimensions(c),g="y"===p,y=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",b=i.reference[m]+i.reference[p]-h[p]-i.floating[m],w=h[p]-i.reference[p],k=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let N=k?k[x]:0;N&&await(null==s.isElement?void 0:s.isElement(k))||(N=o.floating[x]||i.floating[m]);const j=b/2-w/2,_=N/2-f[m]/2-1,S=uv(d[y],_),C=uv(d[v],_),P=S,E=N-f[m]-C,R=N/2-f[m]/2+j,O=yv(P,R,E),T=!l.arrow&&null!=bv(a)&&R!==O&&i.reference[m]/2-(R<P?S:C)-f[m]/2<0,M=T?R<P?R-P:R-E:0;return{[p]:h[p]+M,data:{[p]:O,centerOffset:R-O-M,...T&&{alignmentOffset:M}},reset:T}}}),Ix=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=vv(e,t),u={x:n,y:r},d=jv(a),h=wv(d);let p=u[h],m=u[d];const f=vv(o,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){const e="y"===h?"height":"width",t=i.reference[h]-i.floating[e]+g.mainAxis,n=i.reference[h]+i.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var y,v;const e="y"===h?"width":"height",t=Fv.has(xv(a)),n=i.reference[d]-i.floating[e]+(t&&(null==(y=s.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),r=i.reference[d]+i.reference[e]+(t?0:(null==(v=s.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[h]:p,[d]:m}}}},Lx=(e,t,n)=>{const r=new Map,a={platform:Px,...n},i={...a.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,o=i.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:d}=Bv(c,r,l),h=r,p={},m=0;for(let f=0;f<o.length;f++){const{name:n,fn:i}=o[f],{x:g,y:y,data:v,reset:x}=await i({x:u,y:d,initialPlacement:r,placement:h,strategy:a,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,p={...p,[n]:{...p[n],...v}},x&&m<=50&&(m++,"object"==typeof x&&(x.placement&&(h=x.placement),x.rects&&(c=!0===x.rects?await s.getElementRects({reference:e,floating:t,strategy:a}):x.rects),({x:u,y:d}=Bv(c,h,l))),f=-1)}return{x:u,y:d,placement:h,strategy:a,middlewareData:p}})(e,t,{...a,platform:i})};var Fx="undefined"!=typeof document?ct.useLayoutEffect:function(){};function $x(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!$x(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!==r--;){const n=a[r];if(("_owner"!==n||!e.$$typeof)&&!$x(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function zx(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qx(e,t){const n=zx(e);return Math.round(t*n)/n}function Vx(e){const t=ct.useRef(e);return Fx(()=>{t.current=e}),t}const Wx=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(a=n,{}.hasOwnProperty.call(a,"current"))?null!=n.current?Dx({element:n.current,padding:r}).fn(t):{}:n?Dx({element:n,padding:r}).fn(t):{};var a}}),Qx=(e,t)=>({...Ox(e),options:[e,t]}),Ux=(e,t)=>({...Tx(e),options:[e,t]}),Kx=(e,t)=>({...Ix(e),options:[e,t]}),Hx=(e,t)=>({...Mx(e),options:[e,t]}),Gx=(e,t)=>({...Ax(e),options:[e,t]}),Yx=(e,t)=>({...Bx(e),options:[e,t]}),Zx=(e,t)=>({...Wx(e),options:[e,t]});var Xx=ct.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return xt.jsx(np.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:xt.jsx("polygon",{points:"0,0 30,0 15,10"})})});Xx.displayName="Arrow";var Jx=Xx;function eb(e){const[t,n]=ct.useState(void 0);return gp(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let a,i;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,i=t.blockSize}else a=e.offsetWidth,i=e.offsetHeight;n({width:a,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var tb="Popper",[nb,rb]=Kh(tb),[ab,ib]=nb(tb),sb=e=>{const{__scopePopper:t,children:n}=e,[r,a]=ct.useState(null);return xt.jsx(ab,{scope:t,anchor:r,onAnchorChange:a,children:n})};sb.displayName=tb;var ob="PopperAnchor",lb=ct.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=ib(ob,n),s=ct.useRef(null),o=Uh(t,s);return ct.useEffect(()=>{i.onAnchorChange((null==r?void 0:r.current)||s.current)}),r?null:xt.jsx(np.div,{...a,ref:o})});lb.displayName=ob;var cb="PopperContent",[ub,db]=nb(cb),hb=ct.forwardRef((e,t)=>{var n,r,a,i,s,o;const{__scopePopper:l,side:c="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:m=!0,collisionBoundary:f=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:x="optimized",onPlaced:b,...w}=e,k=ib(cb,l),[N,j]=ct.useState(null),_=Uh(t,e=>j(e)),[S,C]=ct.useState(null),P=eb(S),E=(null==P?void 0:P.width)??0,R=(null==P?void 0:P.height)??0,O=c+("center"!==d?"-"+d:""),T="number"==typeof g?g:{top:0,right:0,bottom:0,left:0,...g},M=Array.isArray(f)?f:[f],A=M.length>0,B={padding:T,boundary:M.filter(gb),altBoundary:A},{refs:D,floatingStyles:I,placement:L,isPositioned:F,middlewareData:$}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,d]=ct.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=ct.useState(r);$x(h,r)||p(r);const[m,f]=ct.useState(null),[g,y]=ct.useState(null),v=ct.useCallback(e=>{e!==k.current&&(k.current=e,f(e))},[]),x=ct.useCallback(e=>{e!==N.current&&(N.current=e,y(e))},[]),b=i||m,w=s||g,k=ct.useRef(null),N=ct.useRef(null),j=ct.useRef(u),_=null!=l,S=Vx(l),C=Vx(a),P=Vx(c),E=ct.useCallback(()=>{if(!k.current||!N.current)return;const e={placement:t,strategy:n,middleware:h};C.current&&(e.platform=C.current),Lx(k.current,N.current,e).then(e=>{const t={...e,isPositioned:!1!==P.current};R.current&&!$x(j.current,t)&&(j.current=t,Sh.flushSync(()=>{d(t)}))})},[h,t,n,C,P]);Fx(()=>{!1===c&&j.current.isPositioned&&(j.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);const R=ct.useRef(!1);Fx(()=>(R.current=!0,()=>{R.current=!1}),[]),Fx(()=>{if(b&&(k.current=b),w&&(N.current=w),b&&w){if(S.current)return S.current(b,w,E);E()}},[b,w,E,S,_]);const O=ct.useMemo(()=>({reference:k,floating:N,setReference:v,setFloating:x}),[v,x]),T=ct.useMemo(()=>({reference:b,floating:w}),[b,w]),M=ct.useMemo(()=>{const e={position:n,left:0,top:0};if(!T.floating)return e;const t=qx(T.floating,u.x),r=qx(T.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+r+"px)",...zx(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,o,T.floating,u.x,u.y]);return ct.useMemo(()=>({...u,update:E,refs:O,elements:T,floatingStyles:M}),[u,E,O,T,M])}({strategy:"fixed",placement:O,whileElementsMounted:(...e)=>Rx(...e,{animationFrame:"always"===x}),elements:{reference:k.anchor},middleware:[Qx({mainAxis:u+R,alignmentAxis:h}),m&&Ux({mainAxis:!0,crossAxis:!1,limiter:"partial"===y?Kx():void 0,...B}),m&&Hx({...B}),Gx({...B,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:a,height:i}=t.reference,s=e.floating.style;s.setProperty("--radix-popper-available-width",`${n}px`),s.setProperty("--radix-popper-available-height",`${r}px`),s.setProperty("--radix-popper-anchor-width",`${a}px`),s.setProperty("--radix-popper-anchor-height",`${i}px`)}}),S&&Zx({element:S,padding:p}),yb({arrowWidth:E,arrowHeight:R}),v&&Yx({strategy:"referenceHidden",...B})]}),[z,q]=vb(L),V=ap(b);gp(()=>{F&&(null==V||V())},[F,V]);const W=null==(n=$.arrow)?void 0:n.x,Q=null==(r=$.arrow)?void 0:r.y,U=0!==(null==(a=$.arrow)?void 0:a.centerOffset),[K,H]=ct.useState();return gp(()=>{N&&H(window.getComputedStyle(N).zIndex)},[N]),xt.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:F?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[null==(i=$.transformOrigin)?void 0:i.x,null==(s=$.transformOrigin)?void 0:s.y].join(" "),...(null==(o=$.hide)?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:xt.jsx(ub,{scope:l,placedSide:z,onArrowChange:C,arrowX:W,arrowY:Q,shouldHideArrow:U,children:xt.jsx(np.div,{"data-side":z,"data-align":q,...w,ref:_,style:{...w.style,animation:F?void 0:"none"}})})})});hb.displayName=cb;var pb="PopperArrow",mb={top:"bottom",right:"left",bottom:"top",left:"right"},fb=ct.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,a=db(pb,n),i=mb[a.placedSide];return xt.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:xt.jsx(Jx,{...r,ref:t,style:{...r.style,display:"block"}})})});function gb(e){return null!==e}fb.displayName=pb;var yb=e=>({name:"transformOrigin",options:e,fn(t){var n,r,a;const{placement:i,rects:s,middlewareData:o}=t,l=0!==(null==(n=o.arrow)?void 0:n.centerOffset),c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,h]=vb(i),p={start:"0%",center:"50%",end:"100%"}[h],m=((null==(r=o.arrow)?void 0:r.x)??0)+c/2,f=((null==(a=o.arrow)?void 0:a.y)??0)+u/2;let g="",y="";return"bottom"===d?(g=l?p:`${m}px`,y=-u+"px"):"top"===d?(g=l?p:`${m}px`,y=`${s.floating.height+u}px`):"right"===d?(g=-u+"px",y=l?p:`${f}px`):"left"===d&&(g=`${s.floating.width+u}px`,y=l?p:`${f}px`),{data:{x:g,y:y}}}});function vb(e){const[t,n="center"]=e.split("-");return[t,n]}var xb=sb,bb=lb,wb=hb,kb=fb,[Nb]=Kh("Tooltip",[rb]),jb=rb(),_b="TooltipProvider",Sb=700,Cb="tooltip.open",[Pb,Eb]=Nb(_b),Rb=e=>{const{__scopeTooltip:t,delayDuration:n=Sb,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,s=ct.useRef(!0),o=ct.useRef(!1),l=ct.useRef(0);return ct.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),xt.jsx(Pb,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:ct.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:ct.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:ct.useCallback(e=>{o.current=e},[]),disableHoverableContent:a,children:i})};Rb.displayName=_b;var Ob="Tooltip",[Tb,Mb]=Nb(Ob),Ab=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,l=Eb(Ob,e.__scopeTooltip),c=jb(t),[u,d]=ct.useState(null),h=lv(),p=ct.useRef(0),m=s??l.disableHoverableContent,f=o??l.delayDuration,g=ct.useRef(!1),[y,v]=wp({prop:r,defaultProp:a??!1,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(Cb))):l.onClose(),null==i||i(e)},caller:Ob}),x=ct.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),b=ct.useCallback(()=>{window.clearTimeout(p.current),p.current=0,g.current=!1,v(!0)},[v]),w=ct.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v(!1)},[v]),k=ct.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{g.current=!0,v(!0),p.current=0},f)},[f,v]);return ct.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),xt.jsx(xb,{...c,children:xt.jsx(Tb,{scope:t,contentId:h,open:y,stateAttribute:x,trigger:u,onTriggerChange:d,onTriggerEnter:ct.useCallback(()=>{l.isOpenDelayedRef.current?k():b()},[l.isOpenDelayedRef,k,b]),onTriggerLeave:ct.useCallback(()=>{m?w():(window.clearTimeout(p.current),p.current=0)},[w,m]),onOpen:b,onClose:w,disableHoverableContent:m,children:n})})};Ab.displayName=Ob;var Bb="TooltipTrigger",Db=ct.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Mb(Bb,n),i=Eb(Bb,n),s=jb(n),o=Uh(t,ct.useRef(null),a.onTriggerChange),l=ct.useRef(!1),c=ct.useRef(!1),u=ct.useCallback(()=>l.current=!1,[]);return ct.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),xt.jsx(bb,{asChild:!0,...s,children:xt.jsx(np.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:o,onPointerMove:Vh(e.onPointerMove,e=>{"touch"!==e.pointerType&&(c.current||i.isPointerInTransitRef.current||(a.onTriggerEnter(),c.current=!0))}),onPointerLeave:Vh(e.onPointerLeave,()=>{a.onTriggerLeave(),c.current=!1}),onPointerDown:Vh(e.onPointerDown,()=>{a.open&&a.onClose(),l.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Vh(e.onFocus,()=>{l.current||a.onOpen()}),onBlur:Vh(e.onBlur,a.onClose),onClick:Vh(e.onClick,a.onClose)})})});Db.displayName=Bb;var[Ib,Lb]=Nb("TooltipPortal",{forceMount:void 0}),Fb="TooltipContent",$b=ct.forwardRef((e,t)=>{const n=Lb(Fb,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,s=Mb(Fb,e.__scopeTooltip);return xt.jsx(vp,{present:r||s.open,children:s.disableHoverableContent?xt.jsx(Qb,{side:a,...i,ref:t}):xt.jsx(zb,{side:a,...i,ref:t})})}),zb=ct.forwardRef((e,t)=>{const n=Mb(Fb,e.__scopeTooltip),r=Eb(Fb,e.__scopeTooltip),a=ct.useRef(null),i=Uh(t,a),[s,o]=ct.useState(null),{trigger:l,onClose:c}=n,u=a.current,{onPointerInTransitChange:d}=r,h=ct.useCallback(()=>{o(null),d(!1)},[d]),p=ct.useCallback((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},a=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),i=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...a,...function(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}(t.getBoundingClientRect())]);o(i),d(!0)},[d]);return ct.useEffect(()=>()=>h(),[h]),ct.useEffect(()=>{if(l&&u){const e=e=>p(e,u),t=e=>p(e,l);return l.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[l,u,p,h]),ct.useEffect(()=>{if(s){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=(null==l?void 0:l.contains(t))||(null==u?void 0:u.contains(t)),a=!function(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const e=t[i],o=t[s],l=e.x,c=e.y,u=o.x,d=o.y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(a=!a)}return a}(n,s);r?h():a&&(h(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,u,s,c,h]),xt.jsx(Qb,{...e,ref:i})}),[qb,Vb]=Nb(Ob,{isInside:!1}),Wb=Jh("TooltipContent"),Qb=ct.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,l=Mb(Fb,n),c=jb(n),{onClose:u}=l;return ct.useEffect(()=>(document.addEventListener(Cb,u),()=>document.removeEventListener(Cb,u)),[u]),ct.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,u]),xt.jsx(up,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:xt.jsxs(wb,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[xt.jsx(Wb,{children:r}),xt.jsx(qb,{scope:n,isInside:!0,children:xt.jsx(jp,{id:l.contentId,role:"tooltip",children:a||r})})]})})});$b.displayName=Fb;var Ub="TooltipArrow";ct.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=jb(n);return Vb(Ub,n).isInside?null:xt.jsx(kb,{...a,...r,ref:t})}).displayName=Ub;var Kb=$b;const Hb=Rb,Gb=Ab,Yb=Db,Zb=ct.forwardRef(({className:e,sideOffset:t=4,...n},r)=>xt.jsx(Kb,{ref:r,sideOffset:t,className:Cy("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Zb.displayName=Kb.displayName;var Xb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jb="undefined"==typeof window||"Deno"in globalThis;function ew(){}function tw(e){return"number"==typeof e&&e>=0&&e!==1/0}function nw(e,t){return Math.max(e+(t||0)-Date.now(),0)}function rw(e,t){return"function"==typeof e?e(t):e}function aw(e,t){return"function"==typeof e?e(t):e}function iw(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:s,stale:o}=e;if(s)if(r){if(t.queryHash!==ow(s,t.options))return!1}else if(!cw(t.queryKey,s))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!a||a===t.state.fetchStatus)&&!(i&&!i(t)))}function sw(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(lw(t.options.mutationKey)!==lw(i))return!1}else if(!cw(t.options.mutationKey,i))return!1}return(!r||t.state.status===r)&&!(a&&!a(t))}function ow(e,t){return((null==t?void 0:t.queryKeyHashFn)||lw)(e)}function lw(e){return JSON.stringify(e,(e,t)=>pw(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function cw(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>cw(e[n],t[n])))}function uw(e,t){if(e===t)return e;const n=hw(e)&&hw(t);if(n||pw(e)&&pw(t)){const r=n?e:Object.keys(e),a=r.length,i=n?t:Object.keys(t),s=i.length,o=n?[]:{},l=new Set(r);let c=0;for(let u=0;u<s;u++){const r=n?u:i[u];(!n&&l.has(r)||n)&&void 0===e[r]&&void 0===t[r]?(o[r]=void 0,c++):(o[r]=uw(e[r],t[r]),o[r]===e[r]&&void 0!==e[r]&&c++)}return a===s&&c===a?e:o}return t}function dw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function hw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function pw(e){if(!mw(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!mw(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function mw(e){return"[object Object]"===Object.prototype.toString.call(e)}function fw(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?uw(e,t):t}function gw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function yw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var vw=Symbol();function xw(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==vw?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function bw(e,t){return"function"==typeof e?e(...t):!!e}var ww=new(r=class extends Xb{constructor(){super(),ve(this,e),ve(this,t),ve(this,n),xe(this,n,e=>{if(!Jb&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ye(this,t)||this.setEventListener(ye(this,n))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=ye(this,t))||e.call(this),xe(this,t,void 0))}setEventListener(e){var r;xe(this,n,e),null==(r=ye(this,t))||r.call(this),xe(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){ye(this,e)!==t&&(xe(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof ye(this,e)?ye(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,n=new WeakMap,r),kw=new(o=class extends Xb{constructor(){super(),ve(this,a,!0),ve(this,i),ve(this,s),xe(this,s,e=>{if(!Jb&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){ye(this,i)||this.setEventListener(ye(this,s))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=ye(this,i))||e.call(this),xe(this,i,void 0))}setEventListener(e){var t;xe(this,s,e),null==(t=ye(this,i))||t.call(this),xe(this,i,e(this.setOnline.bind(this)))}setOnline(e){ye(this,a)!==e&&(xe(this,a,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return ye(this,a)}},a=new WeakMap,i=new WeakMap,s=new WeakMap,o);function Nw(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}function jw(e){return Math.min(1e3*2**e,3e4)}function _w(e){return"online"!==(e??"online")||kw.isOnline()}var Sw=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function Cw(e){return e instanceof Sw}function Pw(e){let t,n=!1,r=0,a=!1;const i=Nw(),s=()=>ww.isFocused()&&("always"===e.networkMode||kw.isOnline())&&e.canRun(),o=()=>_w(e.networkMode)&&e.canRun(),l=n=>{var r;a||(a=!0,null==(r=e.onSuccess)||r.call(e,n),null==t||t(),i.resolve(n))},c=n=>{var r;a||(a=!0,null==(r=e.onError)||r.call(e,n),null==t||t(),i.reject(n))},u=()=>new Promise(n=>{var r;t=e=>{(a||s())&&n(e)},null==(r=e.onPause)||r.call(e)}).then(()=>{var n;t=void 0,a||null==(n=e.onContinue)||n.call(e)}),d=()=>{if(a)return;let t;const i=0===r?e.initialPromise:void 0;try{t=i??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var i;if(a)return;const o=e.retry??(Jb?0:3),l=e.retryDelay??jw,h="function"==typeof l?l(r,t):l,p=!0===o||"number"==typeof o&&r<o||"function"==typeof o&&o(r,t);var m;!n&&p?(r++,null==(i=e.onFail)||i.call(e,r,t),(m=h,new Promise(e=>{setTimeout(e,m)})).then(()=>s()?void 0:u()).then(()=>{n?c(t):d()})):c(t)})};return{promise:i,cancel:t=>{var n;a||(c(new Sw(t)),null==(n=e.abort)||n.call(e))},continue:()=>(null==t||t(),i),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?d():u().then(d),i)}}var Ew=e=>setTimeout(e,0);var Rw=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},a=Ew;const i=r=>{t?e.push(r):a(()=>{n(r)})};return{batch:i=>{let s;t++;try{s=i()}finally{t--,t||(()=>{const t=e;e=[],t.length&&a(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return s},batchCalls:e=>(...t)=>{i(()=>{e(...t)})},schedule:i,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{a=e}}}(),Ow=(c=class{constructor(){ve(this,l)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tw(this.gcTime)&&xe(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Jb?1/0:3e5))}clearGcTimeout(){ye(this,l)&&(clearTimeout(ye(this,l)),xe(this,l,void 0))}},l=new WeakMap,c),Tw=(x=class extends Ow{constructor(e){super(),ve(this,y),ve(this,u),ve(this,d),ve(this,h),ve(this,p),ve(this,m),ve(this,f),ve(this,g),xe(this,g,!1),xe(this,f,e.defaultOptions),this.setOptions(e.options),this.observers=[],xe(this,p,e.client),xe(this,h,ye(this,p).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,xe(this,u,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??ye(this,u),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=ye(this,m))?void 0:e.promise}setOptions(e){this.options={...ye(this,f),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||ye(this,h).remove(this)}setData(e,t){const n=fw(this.state.data,e,this.options);return be(this,y,v).call(this,{data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){be(this,y,v).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const r=null==(t=ye(this,m))?void 0:t.promise;return null==(n=ye(this,m))||n.cancel(e),r?r.then(ew).catch(ew):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ye(this,u))}isActive(){return this.observers.some(e=>!1!==aw(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===rw(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!nw(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=ye(this,m))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=ye(this,m))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ye(this,h).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ye(this,m)&&(ye(this,g)?ye(this,m).cancel({revert:!0}):ye(this,m).cancelRetry()),this.scheduleGc()),ye(this,h).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||be(this,y,v).call(this,{type:"invalidate"})}fetch(e,t){var n,r,a;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(ye(this,m))return ye(this,m).continueRetry(),ye(this,m).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const i=new AbortController,s=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(xe(this,g,!0),i.signal)})},o=()=>{const e=xw(this.options,t),n=(()=>{const e={client:ye(this,p),queryKey:this.queryKey,meta:this.meta};return s(e),e})();return xe(this,g,!1),this.options.persister?this.options.persister(e,n,this):e(n)},l=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:ye(this,p),state:this.state,fetchFn:o};return s(e),e})();null==(n=this.options.behavior)||n.onFetch(l,this),xe(this,d,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(r=l.fetchOptions)?void 0:r.meta)||be(this,y,v).call(this,{type:"fetch",meta:null==(a=l.fetchOptions)?void 0:a.meta});const c=e=>{var t,n,r,a;Cw(e)&&e.silent||be(this,y,v).call(this,{type:"error",error:e}),Cw(e)||(null==(n=(t=ye(this,h).config).onError)||n.call(t,e,this),null==(a=(r=ye(this,h).config).onSettled)||a.call(r,this.state.data,e,this)),this.scheduleGc()};return xe(this,m,Pw({initialPromise:null==t?void 0:t.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:e=>{var t,n,r,a;if(void 0!==e){try{this.setData(e)}catch(i){return void c(i)}null==(n=(t=ye(this,h).config).onSuccess)||n.call(t,e,this),null==(a=(r=ye(this,h).config).onSettled)||a.call(r,e,this.state.error,this),this.scheduleGc()}else c(new Error(`${this.queryHash} data is undefined`))},onError:c,onFail:(e,t)=>{be(this,y,v).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{be(this,y,v).call(this,{type:"pause"})},onContinue:()=>{be(this,y,v).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),ye(this,m).start()}},u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakSet,v=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Mw(t.data,this.options),fetchMeta:e.meta??null};case"success":return xe(this,d,void 0),{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Cw(n)&&n.revert&&ye(this,d)?{...ye(this,d),fetchStatus:"idle"}:{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),Rw.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),ye(this,h).notify({query:this,type:"updated",action:e})})},x);function Mw(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_w(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var Aw=(w=class extends Xb{constructor(e={}){super(),ve(this,b),this.config=e,xe(this,b,new Map)}build(e,t,n){const r=t.queryKey,a=t.queryHash??ow(r,t);let i=this.get(a);return i||(i=new Tw({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){ye(this,b).has(e.queryHash)||(ye(this,b).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ye(this,b).get(e.queryHash);t&&(e.destroy(),t===e&&ye(this,b).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Rw.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ye(this,b).get(e)}getAll(){return[...ye(this,b).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>iw(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>iw(e,t)):t}notify(e){Rw.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Rw.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Rw.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},b=new WeakMap,w),Bw=(C=class extends Ow{constructor(e){super(),ve(this,_),ve(this,k),ve(this,N),ve(this,j),this.mutationId=e.mutationId,xe(this,N,e.mutationCache),xe(this,k,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ye(this,k).includes(e)||(ye(this,k).push(e),this.clearGcTimeout(),ye(this,N).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){xe(this,k,ye(this,k).filter(t=>t!==e)),this.scheduleGc(),ye(this,N).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ye(this,k).length||("pending"===this.state.status?this.scheduleGc():ye(this,N).remove(this))}continue(){var e;return(null==(e=ye(this,j))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,n,r,a,i,s,o,l,c,u,d,h,p,m,f,g,y,v,x,b;const w=()=>{be(this,_,S).call(this,{type:"continue"})};xe(this,j,Pw({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{be(this,_,S).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{be(this,_,S).call(this,{type:"pause"})},onContinue:w,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ye(this,N).canRun(this)}));const k="pending"===this.state.status,C=!ye(this,j).canStart();try{if(k)w();else{be(this,_,S).call(this,{type:"pending",variables:e,isPaused:C}),await(null==(n=(t=ye(this,N).config).onMutate)?void 0:n.call(t,e,this));const i=await(null==(a=(r=this.options).onMutate)?void 0:a.call(r,e));i!==this.state.context&&be(this,_,S).call(this,{type:"pending",context:i,variables:e,isPaused:C})}const p=await ye(this,j).start();return await(null==(s=(i=ye(this,N).config).onSuccess)?void 0:s.call(i,p,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,p,e,this.state.context)),await(null==(u=(c=ye(this,N).config).onSettled)?void 0:u.call(c,p,null,this.state.variables,this.state.context,this)),await(null==(h=(d=this.options).onSettled)?void 0:h.call(d,p,null,e,this.state.context)),be(this,_,S).call(this,{type:"success",data:p}),p}catch(P){try{throw await(null==(m=(p=ye(this,N).config).onError)?void 0:m.call(p,P,e,this.state.context,this)),await(null==(g=(f=this.options).onError)?void 0:g.call(f,P,e,this.state.context)),await(null==(v=(y=ye(this,N).config).onSettled)?void 0:v.call(y,void 0,P,this.state.variables,this.state.context,this)),await(null==(b=(x=this.options).onSettled)?void 0:b.call(x,void 0,P,e,this.state.context)),P}finally{be(this,_,S).call(this,{type:"error",error:P})}}finally{ye(this,N).runNext(this)}}},k=new WeakMap,N=new WeakMap,j=new WeakMap,_=new WeakSet,S=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),Rw.batch(()=>{ye(this,k).forEach(t=>{t.onMutationUpdate(e)}),ye(this,N).notify({mutation:this,type:"updated",action:e})})},C);function Dw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Iw=(O=class extends Xb{constructor(e={}){super(),ve(this,P),ve(this,E),ve(this,R),this.config=e,xe(this,P,new Set),xe(this,E,new Map),xe(this,R,0)}build(e,t,n){const r=new Bw({mutationCache:this,mutationId:++we(this,R)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){ye(this,P).add(e);const t=Lw(e);if("string"==typeof t){const n=ye(this,E).get(t);n?n.push(e):ye(this,E).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ye(this,P).delete(e)){const t=Lw(e);if("string"==typeof t){const n=ye(this,E).get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&ye(this,E).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Lw(e);if("string"==typeof t){const n=ye(this,E).get(t),r=null==n?void 0:n.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){var t;const n=Lw(e);if("string"==typeof n){const r=null==(t=ye(this,E).get(n))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==r?void 0:r.continue())??Promise.resolve()}return Promise.resolve()}clear(){Rw.batch(()=>{ye(this,P).forEach(e=>{this.notify({type:"removed",mutation:e})}),ye(this,P).clear(),ye(this,E).clear()})}getAll(){return Array.from(ye(this,P))}find(e){const t={exact:!0,...e};return this.getAll().find(e=>sw(t,e))}findAll(e={}){return this.getAll().filter(t=>sw(e,t))}notify(e){Rw.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Rw.batch(()=>Promise.all(e.map(e=>e.continue().catch(ew))))}},P=new WeakMap,E=new WeakMap,R=new WeakMap,O);function Lw(e){var t;return null==(t=e.options.scope)?void 0:t.id}function Fw(e){return{onFetch:(t,n)=>{var r,a,i,s,o;const l=t.options,c=null==(i=null==(a=null==(r=t.fetchOptions)?void 0:r.meta)?void 0:a.fetchMore)?void 0:i.direction,u=(null==(s=t.state.data)?void 0:s.pages)||[],d=(null==(o=t.state.data)?void 0:o.pageParams)||[];let h={pages:[],pageParams:[]},p=0;const m=async()=>{let n=!1;const r=xw(t.options,t.fetchOptions),a=async(e,a,i)=>{if(n)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);const s=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:a,direction:i?"backward":"forward",meta:t.options.meta};var r;return r=e,Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)}),e})(),o=await r(s),{maxPages:l}=t.options,c=i?yw:gw;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,a,l)}};if(c&&u.length){const e="backward"===c,t={pages:u,pageParams:d},n=(e?zw:$w)(l,t);h=await a(t,n,e)}else{const t=e??u.length;do{const e=0===p?d[0]??l.initialPageParam:$w(l,h);if(p>0&&null==e)break;h=await a(h,e),p++}while(p<t)}return h};t.options.persister?t.fetchFn=()=>{var e,r;return null==(r=(e=t.options).persister)?void 0:r.call(e,m,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=m}}}function $w(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function zw(e,{pages:t,pageParams:n}){var r;return t.length>0?null==(r=e.getPreviousPageParam)?void 0:r.call(e,t[0],t,n[0],n):void 0}var qw=($=class{constructor(e={}){ve(this,T),ve(this,M),ve(this,A),ve(this,B),ve(this,D),ve(this,I),ve(this,L),ve(this,F),xe(this,T,e.queryCache||new Aw),xe(this,M,e.mutationCache||new Iw),xe(this,A,e.defaultOptions||{}),xe(this,B,new Map),xe(this,D,new Map),xe(this,I,0)}mount(){we(this,I)._++,1===ye(this,I)&&(xe(this,L,ww.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,T).onFocus())})),xe(this,F,kw.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,T).onOnline())})))}unmount(){var e,t;we(this,I)._--,0===ye(this,I)&&(null==(e=ye(this,L))||e.call(this),xe(this,L,void 0),null==(t=ye(this,F))||t.call(this),xe(this,F,void 0))}isFetching(e){return ye(this,T).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ye(this,M).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=ye(this,T).get(n.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=ye(this,T).build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(rw(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return ye(this,T).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=ye(this,T).get(r.queryHash),i=function(e,t){return"function"==typeof e?e(t):e}(t,null==a?void 0:a.state.data);if(void 0!==i)return ye(this,T).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Rw.batch(()=>ye(this,T).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=ye(this,T).get(n.queryHash))?void 0:t.state}removeQueries(e){const t=ye(this,T);Rw.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=ye(this,T);return Rw.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Rw.batch(()=>ye(this,T).findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(ew).catch(ew)}invalidateQueries(e,t={}){return Rw.batch(()=>(ye(this,T).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Rw.batch(()=>ye(this,T).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(ew)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(ew)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=ye(this,T).build(this,t);return n.isStaleByTime(rw(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ew).catch(ew)}fetchInfiniteQuery(e){return e.behavior=Fw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ew).catch(ew)}ensureInfiniteQueryData(e){return e.behavior=Fw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return kw.isOnline()?ye(this,M).resumePausedMutations():Promise.resolve()}getQueryCache(){return ye(this,T)}getMutationCache(){return ye(this,M)}getDefaultOptions(){return ye(this,A)}setDefaultOptions(e){xe(this,A,e)}setQueryDefaults(e,t){ye(this,B).set(lw(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ye(this,B).values()],n={};return t.forEach(t=>{cw(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){ye(this,D).set(lw(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ye(this,D).values()],n={};return t.forEach(t=>{cw(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ye(this,A).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ow(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===vw&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...ye(this,A).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ye(this,T).clear(),ye(this,M).clear()}},T=new WeakMap,M=new WeakMap,A=new WeakMap,B=new WeakMap,D=new WeakMap,I=new WeakMap,L=new WeakMap,F=new WeakMap,$),Vw=(he=class extends Xb{constructor(e,t){super(),ve(this,ne),ve(this,z),ve(this,q),ve(this,V),ve(this,W),ve(this,Q),ve(this,U),ve(this,K),ve(this,H),ve(this,G),ve(this,Y),ve(this,Z),ve(this,X),ve(this,J),ve(this,ee),ve(this,te,new Set),this.options=t,xe(this,z,e),xe(this,H,null),xe(this,K,Nw()),this.options.experimental_prefetchInRender||ye(this,K).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(ye(this,q).addObserver(this),Ww(ye(this,q),this.options)?be(this,ne,re).call(this):this.updateResult(),be(this,ne,oe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qw(ye(this,q),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qw(ye(this,q),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,be(this,ne,le).call(this),be(this,ne,ce).call(this),ye(this,q).removeObserver(this)}setOptions(e){const t=this.options,n=ye(this,q);if(this.options=ye(this,z).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof aw(this.options.enabled,ye(this,q)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");be(this,ne,ue).call(this),ye(this,q).setOptions(this.options),t._defaulted&&!dw(this.options,t)&&ye(this,z).getQueryCache().notify({type:"observerOptionsUpdated",query:ye(this,q),observer:this});const r=this.hasListeners();r&&Uw(ye(this,q),n,this.options,t)&&be(this,ne,re).call(this),this.updateResult(),!r||ye(this,q)===n&&aw(this.options.enabled,ye(this,q))===aw(t.enabled,ye(this,q))&&rw(this.options.staleTime,ye(this,q))===rw(t.staleTime,ye(this,q))||be(this,ne,ae).call(this);const a=be(this,ne,ie).call(this);!r||ye(this,q)===n&&aw(this.options.enabled,ye(this,q))===aw(t.enabled,ye(this,q))&&a===ye(this,ee)||be(this,ne,se).call(this,a)}getOptimisticResult(e){const t=ye(this,z).getQueryCache().build(ye(this,z),e),n=this.createResult(t,e);return function(e,t){if(!dw(e.getCurrentResult(),t))return!0;return!1}(this,n)&&(xe(this,W,n),xe(this,U,this.options),xe(this,Q,ye(this,q).state)),n}getCurrentResult(){return ye(this,W)}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),null==t||t(n),Reflect.get(e,n))})}trackProp(e){ye(this,te).add(e)}getCurrentQuery(){return ye(this,q)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ye(this,z).defaultQueryOptions(e),n=ye(this,z).getQueryCache().build(ye(this,z),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return be(this,ne,re).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ye(this,W)))}createResult(e,t){var n;const r=ye(this,q),a=this.options,i=ye(this,W),s=ye(this,Q),o=ye(this,U),l=e!==r?e.state:ye(this,V),{state:c}=e;let u,d={...c},h=!1;if(t._optimisticResults){const n=this.hasListeners(),i=!n&&Ww(e,t),s=n&&Uw(e,r,t,a);(i||s)&&(d={...d,...Mw(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:f}=d;u=d.data;let g=!1;if(void 0!==t.placeholderData&&void 0===u&&"pending"===f){let e;(null==i?void 0:i.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData)?(e=i.data,g=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(n=ye(this,Z))?void 0:n.state.data,ye(this,Z)):t.placeholderData,void 0!==e&&(f="success",u=fw(null==i?void 0:i.data,e,t),h=!0)}if(t.select&&void 0!==u&&!g)if(i&&u===(null==s?void 0:s.data)&&t.select===ye(this,G))u=ye(this,Y);else try{xe(this,G,t.select),u=t.select(u),u=fw(null==i?void 0:i.data,u,t),xe(this,Y,u),xe(this,H,null)}catch(N){xe(this,H,N)}ye(this,H)&&(p=ye(this,H),u=ye(this,Y),m=Date.now(),f="error");const y="fetching"===d.fetchStatus,v="pending"===f,x="error"===f,b=v&&y,w=void 0!==u,k={status:f,fetchStatus:d.fetchStatus,isPending:v,isSuccess:"success"===f,isError:x,isInitialLoading:b,isLoading:b,data:u,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:x&&!w,isPaused:"paused"===d.fetchStatus,isPlaceholderData:h,isRefetchError:x&&w,isStale:Kw(e,t),refetch:this.refetch,promise:ye(this,K),isEnabled:!1!==aw(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===k.status?e.reject(k.error):void 0!==k.data&&e.resolve(k.data)},n=()=>{const e=xe(this,K,k.promise=Nw());t(e)},a=ye(this,K);switch(a.status){case"pending":e.queryHash===r.queryHash&&t(a);break;case"fulfilled":"error"!==k.status&&k.data===a.value||n();break;case"rejected":"error"===k.status&&k.error===a.reason||n()}}return k}updateResult(){const e=ye(this,W),t=this.createResult(ye(this,q),this.options);if(xe(this,Q,ye(this,q).state),xe(this,U,this.options),void 0!==ye(this,Q).data&&xe(this,Z,ye(this,q)),dw(t,e))return;xe(this,W,t);be(this,ne,de).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!ye(this,te).size)return!0;const r=new Set(n??ye(this,te));return this.options.throwOnError&&r.add("error"),Object.keys(ye(this,W)).some(t=>{const n=t;return ye(this,W)[n]!==e[n]&&r.has(n)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&be(this,ne,oe).call(this)}},z=new WeakMap,q=new WeakMap,V=new WeakMap,W=new WeakMap,Q=new WeakMap,U=new WeakMap,K=new WeakMap,H=new WeakMap,G=new WeakMap,Y=new WeakMap,Z=new WeakMap,X=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakSet,re=function(e){be(this,ne,ue).call(this);let t=ye(this,q).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(ew)),t},ae=function(){be(this,ne,le).call(this);const e=rw(this.options.staleTime,ye(this,q));if(Jb||ye(this,W).isStale||!tw(e))return;const t=nw(ye(this,W).dataUpdatedAt,e);xe(this,X,setTimeout(()=>{ye(this,W).isStale||this.updateResult()},t+1))},ie=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(ye(this,q)):this.options.refetchInterval)??!1},se=function(e){be(this,ne,ce).call(this),xe(this,ee,e),!Jb&&!1!==aw(this.options.enabled,ye(this,q))&&tw(ye(this,ee))&&0!==ye(this,ee)&&xe(this,J,setInterval(()=>{(this.options.refetchIntervalInBackground||ww.isFocused())&&be(this,ne,re).call(this)},ye(this,ee)))},oe=function(){be(this,ne,ae).call(this),be(this,ne,se).call(this,be(this,ne,ie).call(this))},le=function(){ye(this,X)&&(clearTimeout(ye(this,X)),xe(this,X,void 0))},ce=function(){ye(this,J)&&(clearInterval(ye(this,J)),xe(this,J,void 0))},ue=function(){const e=ye(this,z).getQueryCache().build(ye(this,z),this.options);if(e===ye(this,q))return;const t=ye(this,q);xe(this,q,e),xe(this,V,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},de=function(e){Rw.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(ye(this,W))}),ye(this,z).getQueryCache().notify({query:ye(this,q),type:"observerResultsUpdated"})})},he);function Ww(e,t){return function(e,t){return!1!==aw(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Qw(e,t,t.refetchOnMount)}function Qw(e,t,n){if(!1!==aw(t.enabled,e)&&"static"!==rw(t.staleTime,e)){const r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&Kw(e,t)}return!1}function Uw(e,t,n,r){return(e!==t||!1===aw(r.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&Kw(e,n)}function Kw(e,t){return!1!==aw(t.enabled,e)&&e.isStaleByTime(rw(t.staleTime,e))}var Hw=ct.createContext(void 0),Gw=e=>{const t=ct.useContext(Hw);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Yw=({client:e,children:t})=>(ct.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),xt.jsx(Hw.Provider,{value:e,children:t})),Zw=ct.createContext(!1);Zw.Provider;var Xw=ct.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),Jw=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function ek(e,t,n){var r,a,i,s,o;const l=ct.useContext(Zw),c=ct.useContext(Xw),u=Gw(),d=u.defaultQueryOptions(e);null==(a=null==(r=u.getDefaultOptions().queries)?void 0:r._experimental_beforeQuery)||a.call(r,d),d._optimisticResults=l?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(e??1e3,1e3),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>t(n(...e)):t(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(d),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(d,c),(e=>{ct.useEffect(()=>{e.clearReset()},[e])})(c);const h=!u.getQueryCache().get(d.queryHash),[p]=ct.useState(()=>new t(u,d)),m=p.getOptimisticResult(d),f=!l&&!1!==e.subscribed;if(ct.useSyncExternalStore(ct.useCallback(e=>{const t=f?p.subscribe(Rw.batchCalls(e)):ew;return p.updateResult(),t},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),ct.useEffect(()=>{p.setOptions(d)},[d,p]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(d,m))throw Jw(d,p,c);if((({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&void 0===e.data||bw(n,[e.error,r])))({result:m,errorResetBoundary:c,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw m.error;if(null==(s=null==(i=u.getDefaultOptions().queries)?void 0:i._experimental_afterQuery)||s.call(i,d,m),d.experimental_prefetchInRender&&!Jb&&((e,t)=>e.isLoading&&e.isFetching&&!t)(m,l)){const e=h?Jw(d,p,c):null==(o=u.getQueryCache().get(d.queryHash))?void 0:o.promise;null==e||e.catch(ew).finally(()=>{p.updateResult()})}return d.notifyOnChangeProps?m:p.trackResult(m)}function tk(e,t){return ek(e,Vw)}var nk="popstate";function rk(e={}){return function(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,s=a.history,o="POP",l=null,c=u();null==c&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function h(e,t){o="PUSH";let n=ok(f.location,e,t);c=u()+1;let r=sk(n,c),d=f.createHref(n);try{s.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;a.location.assign(d)}i&&l&&l({action:o,location:f.location,delta:1})}function p(e,t){o="REPLACE";let n=ok(f.location,e,t);c=u();let r=sk(n,c),a=f.createHref(n);s.replaceState(r,"",a),i&&l&&l({action:o,location:f.location,delta:0})}function m(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);ak(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:lk(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let f={get action(){return o},get location(){return e(a,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(nk,d),l=e,()=>{a.removeEventListener(nk,d),l=null}},createHref:e=>t(a,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>s.go(e)};return f}(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return ok("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:lk(t)},0,e)}function ak(e,t){if(!1===e||null==e)throw new Error(t)}function ik(e,t){if(!e)try{throw new Error(t)}catch(n){}}function sk(e,t){return{usr:e.state,key:e.key,idx:t}}function ok(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?ck(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function lk({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function ck(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function uk(e,t,n="/"){return function(e,t,n,r){let a="string"==typeof t?ck(t):t,i=jk(a.pathname||"/",n);if(null==i)return null;let s=dk(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let l=0;null==o&&l<s.length;++l){let e=Nk(i);o=wk(s[l],e,r)}return o}(e,t,n,!1)}function dk(e,t=[],n=[],r="",a=!1){let i=(e,i,s=a,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;ak(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=Ok([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(ak(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),dk(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:bk(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&(null==(n=e.path)?void 0:n.includes("?")))for(let r of hk(e.path))i(e,t,!0,r);else i(e,t)}),t}function hk(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let s=hk(r.join("/")),o=[];return o.push(...s.map(e=>""===e?i:[i,e].join("/"))),a&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var pk=/^:[\w-]+$/,mk=3,fk=2,gk=1,yk=10,vk=-2,xk=e=>"*"===e;function bk(e,t){let n=e.split("/"),r=n.length;return n.some(xk)&&(r+=vk),t&&(r+=fk),n.filter(e=>!xk(e)).reduce((e,t)=>e+(pk.test(t)?mk:""===t?gk:yk),r)}function wk(e,t,n=!1){let{routesMeta:r}=e,a={},i="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=kk({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=kk({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),s.push({params:a,pathname:Ok([i,u.pathname]),pathnameBase:Tk(Ok([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=Ok([i,u.pathnameBase]))}return s}function kk(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){ik("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let i=new RegExp(a,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const a=o[r];return e[t]=n&&!a?void 0:(a||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:s,pattern:e}}function Nk(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return ik(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function jk(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var _k=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Sk(e,t="/"){let n,{pathname:r,search:a="",hash:i=""}="string"==typeof e?ck(e):e;if(r)if(s=r,_k.test(s))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),ik(!1,`Pathnames cannot have embedded double slashes - normalizing ${e} -> ${r}`)}n=r.startsWith("/")?Ck(r.substring(1),"/"):Ck(r,t)}else n=t;var s;return{pathname:n,search:Mk(a),hash:Ak(i)}}function Ck(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function Pk(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ek(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Rk(e,t,n,r=!1){let a;"string"==typeof e?a=ck(e):(a={...e},ak(!a.pathname||!a.pathname.includes("?"),Pk("?","pathname","search",a)),ak(!a.pathname||!a.pathname.includes("#"),Pk("#","pathname","hash",a)),ak(!a.search||!a.search.includes("#"),Pk("#","search","hash",a)));let i,s=""===e||""===a.pathname,o=s?"/":a.pathname;if(null==o)i=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=Sk(a,i),c=o&&"/"!==o&&o.endsWith("/"),u=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Ok=e=>e.join("/").replace(/\/\/+/g,"/"),Tk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Mk=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ak=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",Bk=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Dk(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ik="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function Lk(e,t){let n=e;if("string"!=typeof n||!_k.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,a=!1;if(Ik)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),i=jk(r.pathname,t);r.origin===e.origin&&null!=i?n=i+r.search+r.hash:a=!0}catch(i){ik(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Fk=["POST","PUT","PATCH","DELETE"];new Set(Fk);var $k=["GET",...Fk];new Set($k);var zk=ct.createContext(null);zk.displayName="DataRouter";var qk=ct.createContext(null);qk.displayName="DataRouterState";var Vk=ct.createContext(!1),Wk=ct.createContext({isTransitioning:!1});Wk.displayName="ViewTransition",ct.createContext(new Map).displayName="Fetchers",ct.createContext(null).displayName="Await";var Qk=ct.createContext(null);Qk.displayName="Navigation";var Uk=ct.createContext(null);Uk.displayName="Location";var Kk=ct.createContext({outlet:null,matches:[],isDataRoute:!1});Kk.displayName="Route";var Hk=ct.createContext(null);Hk.displayName="RouteError";var Gk="REACT_ROUTER_ERROR";function Yk(){return null!=ct.useContext(Uk)}function Zk(){return ak(Yk(),"useLocation() may be used only in the context of a <Router> component."),ct.useContext(Uk).location}var Xk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Jk(e){ct.useContext(Qk).static||ct.useLayoutEffect(e)}function eN(){let{isDataRoute:e}=ct.useContext(Kk);return e?function(){let{router:e}=function(e){let t=ct.useContext(zk);return ak(t,uN(e)),t}("useNavigate"),t=dN("useNavigate"),n=ct.useRef(!1);Jk(()=>{n.current=!0});let r=ct.useCallback(async(r,a={})=>{ik(n.current,Xk),n.current&&("number"==typeof r?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...a}))},[e,t]);return r}():function(){ak(Yk(),"useNavigate() may be used only in the context of a <Router> component.");let e=ct.useContext(zk),{basename:t,navigator:n}=ct.useContext(Qk),{matches:r}=ct.useContext(Kk),{pathname:a}=Zk(),i=JSON.stringify(Ek(r)),s=ct.useRef(!1);Jk(()=>{s.current=!0});let o=ct.useCallback((r,o={})=>{if(ik(s.current,Xk),!s.current)return;if("number"==typeof r)return void n.go(r);let l=Rk(r,JSON.parse(i),a,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Ok([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,i,a,e]);return o}()}function tN(){let{matches:e}=ct.useContext(Kk),t=e[e.length-1];return t?t.params:{}}function nN(e,{relative:t}={}){let{matches:n}=ct.useContext(Kk),{pathname:r}=Zk(),a=JSON.stringify(Ek(n));return ct.useMemo(()=>Rk(e,JSON.parse(a),r,"path"===t),[e,a,r,t])}function rN(e,t,n,r,a){var i;ak(Yk(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=ct.useContext(Qk),{matches:o}=ct.useContext(Kk),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";pN(u,!h||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,m=Zk();if(t){let e="string"==typeof t?ck(t):t;ak("/"===d||(null==(i=e.pathname)?void 0:i.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=m;let f=p.pathname||"/",g=f;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=uk(e,{pathname:g});ik(h||null!=y,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),ik(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,i=null==n?void 0:n.errors;if(null!=i){let e=a.findIndex(e=>e.route.id&&void 0!==(null==i?void 0:i[e.route.id]));ak(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,o=-1;if(n)for(let c=0;c<a.length;c++){let e=a[c];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=c),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){s=!0,a=o>=0?a.slice(0,o+1):[a[0]];break}}}let l=n&&r?(e,t)=>{var a,i;r(e,{location:n.location,params:(null==(i=null==(a=n.matches)?void 0:a[0])?void 0:i.params)??{},unstable_pattern:Dk(n.matches),errorInfo:t})}:void 0;return a.reduceRight((e,r,c)=>{let u,d=!1,h=null,p=null;n&&(u=i&&r.route.id?i[r.route.id]:void 0,h=r.route.errorElement||iN,s&&(o<0&&0===c?(pN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):o===c&&(d=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,c+1)),f=()=>{let t;return t=u?h:d?p:r.route.Component?ct.createElement(r.route.Component,null):r.route.element?r.route.element:e,ct.createElement(cN,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===c)?ct.createElement(sN,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:l}):f()},null)}(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Ok([d,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Ok([d,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,r,a);return t&&v?ct.createElement(Uk.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function aN(){let e=function(){var e;let t=ct.useContext(Hk),n=function(e){let t=ct.useContext(qk);return ak(t,uN(e)),t}("useRouteError"),r=dN("useRouteError");if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},s=null;return s=ct.createElement(ct.Fragment,null,ct.createElement("p",null," Hey developer "),ct.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ct.createElement("code",{style:i},"ErrorBoundary")," or"," ",ct.createElement("code",{style:i},"errorElement")," prop on your route.")),ct.createElement(ct.Fragment,null,ct.createElement("h2",null,"Unexpected Application Error!"),ct.createElement("h3",{style:{fontStyle:"italic"}},t),n?ct.createElement("pre",{style:a},n):null,s)}ct.createContext(null);var iN=ct.createElement(aN,null),sN=class extends ct.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t)}render(){let e=this.state.error;if(this.context&&"object"==typeof e&&e&&"digest"in e&&"string"==typeof e.digest){const t=function(e){if(e.startsWith(`${Gk}:ROUTE_ERROR_RESPONSE:{`))try{let t=JSON.parse(e.slice(40));if("object"==typeof t&&t&&"number"==typeof t.status&&"string"==typeof t.statusText)return new Bk(t.status,t.statusText,t.data)}catch{}}(e.digest);t&&(e=t)}let t=void 0!==e?ct.createElement(Kk.Provider,{value:this.props.routeContext},ct.createElement(Hk.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?ct.createElement(lN,{error:e},t):t}};sN.contextType=Vk;var oN=new WeakMap;function lN({children:e,error:t}){let{basename:n}=ct.useContext(Qk);if("object"==typeof t&&t&&"digest"in t&&"string"==typeof t.digest){let e=function(e){if(e.startsWith(`${Gk}:REDIRECT:{`))try{let t=JSON.parse(e.slice(28));if("object"==typeof t&&t&&"number"==typeof t.status&&"string"==typeof t.statusText&&"string"==typeof t.location&&"boolean"==typeof t.reloadDocument&&"boolean"==typeof t.replace)return t}catch{}}(t.digest);if(e){let r=oN.get(t);if(r)throw r;let a=Lk(e.location,n);if(Ik&&!oN.get(t)){if(!a.isExternal&&!e.reloadDocument){const n=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:e.replace}));throw oN.set(t,n),n}window.location.href=a.absoluteURL||a.to}return ct.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return e}function cN({routeContext:e,match:t,children:n}){let r=ct.useContext(zk);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),ct.createElement(Kk.Provider,{value:e},n)}function uN(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dN(e){let t=function(e){let t=ct.useContext(Kk);return ak(t,uN(e)),t}(e),n=t.matches[t.matches.length-1];return ak(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var hN={};function pN(e,t,n){t||hN[e]||(hN[e]=!0,ik(!1,n))}function mN({to:e,replace:t,state:n,relative:r}){ak(Yk(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=ct.useContext(Qk);ik(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=ct.useContext(Kk),{pathname:s}=Zk(),o=eN(),l=Rk(e,Ek(i),s,"path"===r),c=JSON.stringify(l);return ct.useEffect(()=>{o(JSON.parse(c),{replace:t,state:n,relative:r})},[o,c,r,t,n]),null}function fN(e){ak(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gN({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:i=!1,unstable_useTransitions:s}){ak(!Yk(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=ct.useMemo(()=>({basename:o,navigator:a,static:i,unstable_useTransitions:s,future:{}}),[o,a,i,s]);"string"==typeof n&&(n=ck(n));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:p="default"}=n,m=ct.useMemo(()=>{let e=jk(c,o);return null==e?null:{location:{pathname:e,search:u,hash:d,state:h,key:p},navigationType:r}},[o,c,u,d,h,p,r]);return ik(null!=m,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==m?null:ct.createElement(Qk.Provider,{value:l},ct.createElement(Uk.Provider,{children:t,value:m}))}function yN({children:e,location:t}){return rN(vN(e),t)}function vN(e,t=[]){let n=[];return ct.Children.forEach(e,(e,r)=>{if(!ct.isValidElement(e))return;let a=[...t,r];if(e.type===ct.Fragment)return void n.push.apply(n,vN(e.props.children,a));ak(e.type===fN,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ak(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=vN(e.props.children,a)),n.push(i)}),n}ct.memo(function({routes:e,future:t,state:n,onError:r}){return rN(e,void 0,n,r,t)});var xN="get",bN="application/x-www-form-urlencoded";function wN(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function kN(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var NN=null;var jN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _N(e){return null==e||jN.has(e)?e:(ik(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bN}"`),null)}function SN(e,t){let n,r,a,i,s;if(wN(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?jk(s,t):null,n=e.getAttribute("method")||xN,a=_N(e.getAttribute("enctype"))||bN,i=new FormData(e)}else if(function(e){return wN(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return wN(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(r=o?jk(o,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||xN,a=_N(e.getAttribute("formenctype"))||_N(s.getAttribute("enctype"))||bN,i=new FormData(s,e),!function(){if(null===NN)try{new FormData(document.createElement("form"),0),NN=!1}catch(e){NN=!0}return NN}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,r)}}else{if(wN(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xN,r=null,a=bN,s=e}var o;return i&&"text/plain"===a&&(s=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:s}}function CN(e,t){if(!1===e||null==e)throw new Error(t)}function PN(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function EN(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(PN).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function RN(e,t,n,r,a,i){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null==(r=n[t].route.path)?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===i?t.filter((t,i)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(s(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null==(l=n[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function ON(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1),[...new Set(r)];var r}function TN(){let e=ct.useContext(zk);return CN(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var MN=ct.createContext(void 0);function AN(){let e=ct.useContext(MN);return CN(e,"You must render this element inside a <HydratedRouter> element"),e}function BN(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function DN({page:e,...t}){let{router:n}=TN(),r=ct.useMemo(()=>uk(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?ct.createElement(IN,{page:e,matches:r,...t}):null}function IN({page:e,matches:t,...n}){let r=Zk(),{future:a,manifest:i,routeModules:s}=AN(),{basename:o}=TN(),{loaderData:l,matches:c}=function(){let e=ct.useContext(qk);return CN(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),u=ct.useMemo(()=>RN(e,t,c,i,r,"data"),[e,t,c,i,r]),d=ct.useMemo(()=>RN(e,t,c,i,r,"assets"),[e,t,c,i,r]),h=ct.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,c=!1;if(t.forEach(e=>{var t;let r=i.routes[e.route.id];r&&r.hasLoader&&(!u.some(t=>t.route.id===e.route.id)&&e.route.id in l&&(null==(t=s[e.route.id])?void 0:t.shouldRevalidate)||r.hasClientLoader?c=!0:n.add(e.route.id))}),0===n.size)return[];let d=function(e,t,n,r){let a="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:"/"===a.pathname?a.pathname=`_root.${r}`:t&&"/"===jk(a.pathname,t)?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}(e,o,a.unstable_trailingSlashAwareDataRequests,"data");return c&&n.size>0&&d.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[d.pathname+d.search]},[o,a.unstable_trailingSlashAwareDataRequests,l,r,i,u,t,e,s]),p=ct.useMemo(()=>ON(d,i),[d,i]),m=function(e){let{manifest:t,routeModules:n}=AN(),[r,a]=ct.useState([]);return ct.useEffect(()=>{let r=!1;return EN(e,t,n).then(e=>{r||a(e)}),()=>{r=!0}},[e,t,n]),r}(d);return ct.createElement(ct.Fragment,null,h.map(e=>ct.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),p.map(e=>ct.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),m.map(({key:e,link:t})=>ct.createElement("link",{key:e,nonce:n.nonce,...t})))}function LN(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}MN.displayName="FrameworkContext";var FN="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{FN&&(window.__reactRouterVersion="7.12.0")}catch(APe){}function $N({basename:e,children:t,unstable_useTransitions:n,window:r}){let a=ct.useRef();null==a.current&&(a.current=rk({window:r,v5Compat:!0}));let i=a.current,[s,o]=ct.useState({action:i.action,location:i.location}),l=ct.useCallback(e=>{!1===n?o(e):ct.startTransition(()=>o(e))},[n]);return ct.useLayoutEffect(()=>i.listen(l),[i,l]),ct.createElement(gN,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i,unstable_useTransitions:n})}var zN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qN=ct.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:a,replace:i,state:s,target:o,to:l,preventScrollReset:c,viewTransition:u,unstable_defaultShouldRevalidate:d,...h},p){let{basename:m,unstable_useTransitions:f}=ct.useContext(Qk),g="string"==typeof l&&zN.test(l),y=Lk(l,m),v=function(e,{relative:t}={}){ak(Yk(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=ct.useContext(Qk),{hash:a,pathname:i,search:s}=nN(e,{relative:t}),o=i;return"/"!==n&&(o="/"===i?n:Ok([n,i])),r.createHref({pathname:o,search:s,hash:a})}(l=y.to,{relative:r}),[x,b,w]=function(e,t){let n=ct.useContext(MN),[r,a]=ct.useState(!1),[i,s]=ct.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=ct.useRef(null);ct.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),ct.useEffect(()=>{if(r){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{a(!0)},m=()=>{a(!1),s(!1)};return n?"intent"!==e?[i,h,{}]:[i,h,{onFocus:BN(o,p),onBlur:BN(l,m),onMouseEnter:BN(c,p),onMouseLeave:BN(u,m),onTouchStart:BN(d,p)}]:[!1,h,{}]}(n,h),k=function(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=eN(),u=Zk(),d=nN(e,{relative:i});return ct.useCallback(h=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(h,t)){h.preventDefault();let t=void 0!==n?n:lk(u)===lk(d),p=()=>c(e,{replace:t,state:r,preventScrollReset:a,relative:i,viewTransition:s,unstable_defaultShouldRevalidate:o});l?ct.startTransition(()=>p()):p()}},[u,c,d,n,r,t,e,a,i,s,o,l])}(l,{replace:i,state:s,target:o,preventScrollReset:c,relative:r,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f});let N=ct.createElement("a",{...h,...w,href:y.absoluteURL||v,onClick:y.isExternal||a?e:function(t){e&&e(t),t.defaultPrevented||k(t)},ref:LN(p,b),target:o,"data-discover":g||"render"!==t?void 0:"true"});return x&&!g?ct.createElement(ct.Fragment,null,N,ct.createElement(DN,{page:v})):N});qN.displayName="Link",ct.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:a,to:i,viewTransition:s,children:o,...l},c){let u=nN(i,{relative:l.relative}),d=Zk(),h=ct.useContext(qk),{navigator:p,basename:m}=ct.useContext(Qk),f=null!=h&&function(e,{relative:t}={}){let n=ct.useContext(Wk);ak(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=WN("useViewTransitionState"),a=nN(e,{relative:t});if(!n.isTransitioning)return!1;let i=jk(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=jk(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=kk(a.pathname,s)||null!=kk(a.pathname,i)}(u)&&!0===s,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,y=d.pathname,v=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(y=y.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&m&&(v=jk(v,m)||v);const x="/"!==g&&g.endsWith("/")?g.length-1:g.length;let b,w=y===g||!r&&y.startsWith(g)&&"/"===y.charAt(x),k=null!=v&&(v===g||!r&&v.startsWith(g)&&"/"===v.charAt(g.length)),N={isActive:w,isPending:k,isTransitioning:f},j=w?e:void 0;b="function"==typeof n?n(N):[n,w?"active":null,k?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let _="function"==typeof a?a(N):a;return ct.createElement(qN,{...l,"aria-current":j,className:b,ref:c,style:_,to:i,viewTransition:s},"function"==typeof o?o(N):o)}).displayName="NavLink";var VN=ct.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:i,method:s=xN,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h,...p},m)=>{let{unstable_useTransitions:f}=ct.useContext(Qk),g=function(){let{router:e}=WN("useSubmit"),{basename:t}=ct.useContext(Qk),n=dN("useRouteId"),r=e.fetch,a=e.navigate;return ct.useCallback(async(e,i={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=SN(e,t);if(!1===i.navigate){let e=i.fetcherKey||KN();await r(e,n,i.action||s,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await a(i.action||s,{unstable_defaultShouldRevalidate:i.unstable_defaultShouldRevalidate,preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,a,t,n])}(),y=function(e,{relative:t}={}){let{basename:n}=ct.useContext(Qk),r=ct.useContext(Kk);ak(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...nN(e||".",{relative:t})},s=Zk();if(null==e){i.search=s.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();i.search=n?`?${n}`:""}}e&&"."!==e||!a.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:Ok([n,i.pathname]));return lk(i)}(o,{relative:c}),v="get"===s.toLowerCase()?"get":"post",x="string"==typeof o&&zN.test(o);return ct.createElement("form",{ref:m,method:v,action:y,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=(null==r?void 0:r.getAttribute("formmethod"))||s,p=()=>g(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:a,state:i,relative:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h});f&&!1!==n?ct.startTransition(()=>p()):p()},...p,"data-discover":x||"render"!==e?void 0:"true"})});function WN(e){let t=ct.useContext(zk);return ak(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}function QN(e){ik("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=ct.useRef(kN(e)),n=ct.useRef(!1),r=Zk(),a=ct.useMemo(()=>function(e,t){let n=kN(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),i=eN(),s=ct.useCallback((e,t)=>{const r=kN("function"==typeof e?e(new URLSearchParams(a)):e);n.current=!0,i("?"+r,t)},[i,a]);return[a,s]}VN.displayName="Form";var UN=0,KN=()=>`__${String(++UN)}__`;var HN=function(){return HN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},HN.apply(this,arguments)};function GN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function YN(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(APe){i(APe)}}function o(e){try{l(r.throw(e))}catch(APe){i(APe)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class ZN extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class XN extends ZN{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class JN extends ZN{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ej extends ZN{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tj,nj;(nj=tj||(tj={})).Any="any",nj.ApNortheast1="ap-northeast-1",nj.ApNortheast2="ap-northeast-2",nj.ApSouth1="ap-south-1",nj.ApSoutheast1="ap-southeast-1",nj.ApSoutheast2="ap-southeast-2",nj.CaCentral1="ca-central-1",nj.EuCentral1="eu-central-1",nj.EuWest1="eu-west-1",nj.EuWest2="eu-west-2",nj.EuWest3="eu-west-3",nj.SaEast1="sa-east-1",nj.UsEast1="us-east-1",nj.UsWest1="us-west-1",nj.UsWest2="us-west-2";class rj{constructor(e,{headers:t={},customFetch:n,region:r=tj.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return YN(this,arguments,void 0,function*(e,t={}){var n;let r,a;try{const{headers:i,method:s,body:o,signal:l,timeout:c}=t;let u={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);let p;d&&"any"!==d&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d)),o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=o):"string"==typeof o?(u["Content-Type"]="text/plain",p=o):"undefined"!=typeof FormData&&o instanceof FormData?p=o:(u["Content-Type"]="application/json",p=JSON.stringify(o)):p=!o||"string"==typeof o||"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer||"undefined"!=typeof FormData&&o instanceof FormData?o:JSON.stringify(o);let m=l;c&&(a=new AbortController,r=setTimeout(()=>a.abort(),c),l?(m=a.signal,l.addEventListener("abort",()=>a.abort())):m=a.signal);const f=yield this.fetch(h.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:p,signal:m}).catch(e=>{throw new XN(e)}),g=f.headers.get("x-relay-error");if(g&&"true"===g)throw new JN(f);if(!f.ok)throw new ej(f);let y,v=(null!==(n=f.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return y="application/json"===v?yield f.json():"application/octet-stream"===v||"application/pdf"===v?yield f.blob():"text/event-stream"===v?f:"multipart/form-data"===v?yield f.formData():yield f.text(),{data:y,error:null,response:f}}catch(i){return{data:null,error:i,response:i instanceof ej||i instanceof JN?i.context:void 0}}finally{r&&clearTimeout(r)}})}}var aj=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ij=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{let t=null,r=null,a=null,i=e.status,s=e.statusText;if(e.ok){var o,l;if("HEAD"!==n.method){var c;const t=await e.text();""===t||(r="text/csv"===n.headers.get("Accept")||n.headers.get("Accept")&&(null===(c=n.headers.get("Accept"))||void 0===c?void 0:c.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}const u=null===(o=n.headers.get("Prefer"))||void 0===o?void 0:o.match(/count=(exact|planned|estimated)/),d=null===(l=e.headers.get("content-range"))||void 0===l?void 0:l.split("/");u&&d&&d.length>1&&(a=parseInt(d[1])),n.isMaybeSingle&&"GET"===n.method&&Array.isArray(r)&&(r.length>1?(t={code:"PGRST116",details:`Results contain ${r.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,a=null,i=406,s="Not Acceptable"):r=1===r.length?r[0]:null)}else{var u;const a=await e.text();try{t=JSON.parse(a),Array.isArray(t)&&404===e.status&&(r=[],t=null,i=200,s="OK")}catch(d){404===e.status&&""===a?(i=204,s="No Content"):t={message:a}}if(t&&n.isMaybeSingle&&(null==t||null===(u=t.details)||void 0===u?void 0:u.includes("0 rows"))&&(t=null,i=200,s="OK"),t&&n.shouldThrowOnError)throw new aj(t)}return{error:t,data:r,count:a,status:i,statusText:s}});return this.shouldThrowOnError||(r=r.catch(e=>{var t;let n="";const r=null==e?void 0:e.cause;if(r){var a,i,s,o;const t=null!==(a=null==r?void 0:r.message)&&void 0!==a?a:"",l=null!==(i=null==r?void 0:r.code)&&void 0!==i?i:"";n=`${null!==(s=null==e?void 0:e.name)&&void 0!==s?s:"FetchError"}: ${null==e?void 0:e.message}`,n+=`\n\nCaused by: ${null!==(o=null==r?void 0:r.name)&&void 0!==o?o:"Error"}: ${t}`,l&&(n+=` (${l})`),(null==r?void 0:r.stack)&&(n+=`\n${r.stack}`)}else{var l;n=null!==(l=null==e?void 0:e.stack)&&void 0!==l?l:""}return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:n,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},sj=class extends ij{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const i=a?`${a}.order`:"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const a=void 0===r?"offset":`${r}.offset`,i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:i="text"}={}){var s;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.get("Accept"))&&void 0!==s?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const oj=new RegExp("[,()]");var lj=class extends sj{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&oj.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&oj.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},cj=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=null!=t?t:{},a=n?"HEAD":"GET";let i=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",s),r&&l.append("Prefer",`count=${r}`),new lj({method:a,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const{url:a,headers:i}=this.cloneRequestState();if(t&&i.append("Prefer",`count=${t}`),n||i.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);a.searchParams.set("columns",e.join(","))}}return new lj({method:"POST",url:a,headers:i,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){var i;const{url:s,headers:o}=this.cloneRequestState();if(o.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&s.searchParams.set("on_conflict",t),r&&o.append("Prefer",`count=${r}`),a||o.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);s.searchParams.set("columns",e.join(","))}}return new lj({method:"POST",url:s,headers:o,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e,{count:t}={}){var n;const{url:r,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new lj({method:"PATCH",url:r,headers:a,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:e}={}){var t;const{url:n,headers:r}=this.cloneRequestState();return e&&r.append("Prefer",`count=${e}`),new lj({method:"DELETE",url:n,headers:r,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}},uj=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new cj(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:a}={}){var i;let s;const o=new URL(`${this.url}/rpc/${e}`);let l;const c=e=>null!==e&&"object"==typeof e&&(!Array.isArray(e)||e.some(c)),u=n&&Object.values(t).some(c);u?(s="POST",l=t):n||r?(s=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{o.searchParams.append(e,t)})):(s="POST",l=t);const d=new Headers(this.headers);return u?d.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&d.set("Prefer",`count=${a}`),new lj({method:s,url:o,headers:d,schema:this.schemaName,body:l,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}};class dj{constructor(){}static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const hj="1.0.0",pj=hj,mj=1e4;var fj,gj,yj,vj,xj,bj,wj,kj,Nj,jj,_j;(gj=fj||(fj={}))[gj.connecting=0]="connecting",gj[gj.open=1]="open",gj[gj.closing=2]="closing",gj[gj.closed=3]="closed",(vj=yj||(yj={})).closed="closed",vj.errored="errored",vj.joined="joined",vj.joining="joining",vj.leaving="leaving",(bj=xj||(xj={})).close="phx_close",bj.error="phx_error",bj.join="phx_join",bj.reply="phx_reply",bj.leave="phx_leave",bj.access_token="access_token",(wj||(wj={})).websocket="websocket",(Nj=kj||(kj={})).Connecting="connecting",Nj.Open="open",Nj.Closing="closing",Nj.Closed="closed";class Sj{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:{},a=(new TextEncoder).encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,n){var r,a;const i=e.topic,s=null!==(r=e.ref)&&void 0!==r?r:"",o=null!==(a=e.join_ref)&&void 0!==a?a:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`metadata length ${u.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+s.length+i.length+l.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let p=new DataView(h),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,o.length),p.setUint8(m++,s.length),p.setUint8(m++,i.length),p.setUint8(m++,l.length),p.setUint8(m++,u.length),p.setUint8(m++,t),Array.from(o,e=>p.setUint8(m++,e.charCodeAt(0))),Array.from(s,e=>p.setUint8(m++,e.charCodeAt(0))),Array.from(i,e=>p.setUint8(m++,e.charCodeAt(0))),Array.from(l,e=>p.setUint8(m++,e.charCodeAt(0))),Array.from(u,e=>p.setUint8(m++,e.charCodeAt(0)));var f=new Uint8Array(h.byteLength+n.byteLength);return f.set(new Uint8Array(h),0),f.set(new Uint8Array(n),h.byteLength),f.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const n=JSON.parse(e),[r,a,i,s,o]=n;return t({join_ref:r,ref:a,topic:i,event:s,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2),i=t.getUint8(3),s=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=n.decode(e.slice(o,o+r));o+=r;const c=n.decode(e.slice(o,o+a));o+=a;const u=n.decode(e.slice(o,o+i));o+=i;const d=e.slice(o,e.byteLength),h=s===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,p={type:this.BROADCAST_EVENT,event:c,payload:h};return i>0&&(p.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class Cj{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(_j=jj||(jj={})).abstime="abstime",_j.bool="bool",_j.date="date",_j.daterange="daterange",_j.float4="float4",_j.float8="float8",_j.int2="int2",_j.int4="int4",_j.int4range="int4range",_j.int8="int8",_j.int8range="int8range",_j.json="json",_j.jsonb="jsonb",_j.money="money",_j.numeric="numeric",_j.oid="oid",_j.reltime="reltime",_j.text="text",_j.time="time",_j.timestamp="timestamp",_j.timestamptz="timestamptz",_j.timetz="timetz",_j.tsrange="tsrange",_j.tstzrange="tstzrange";const Pj=(e,t,n={})=>{var r;const a=null!==(r=n.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=Ej(r,e,t,a),n),{}):{}},Ej=(e,t,n,r)=>{const a=t.find(t=>t.name===e),i=null==a?void 0:a.type,s=n[e];return i&&!r.includes(i)?Rj(i,s):Oj(s)},Rj=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Bj(t,n)}switch(e){case jj.bool:return Tj(t);case jj.float4:case jj.float8:case jj.int2:case jj.int4:case jj.int8:case jj.numeric:case jj.oid:return Mj(t);case jj.json:case jj.jsonb:return Aj(t);case jj.timestamp:return Dj(t);case jj.abstime:case jj.date:case jj.daterange:case jj.int4range:case jj.int8range:case jj.money:case jj.reltime:case jj.text:case jj.time:case jj.timestamptz:case jj.timetz:case jj.tsrange:case jj.tstzrange:default:return Oj(t)}},Oj=e=>e,Tj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Mj=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Aj=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Bj=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(a){r=i?i.split(","):[]}return r.map(e=>Rj(t,e))}return e},Dj=e=>"string"==typeof e?e.replace(" ","T"):e,Ij=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Lj{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fj,$j,zj,qj,Vj,Wj,Qj,Uj;($j=Fj||(Fj={})).SYNC="sync",$j.JOIN="join",$j.LEAVE="leave";class Kj{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kj.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Kj.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Kj.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),i=this.transformState(t),s={},o={};return this.map(a,(e,t)=>{i[e]||(o[e]=t)}),this.map(i,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),i=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);i.length>0&&(s[e]=i),l.length>0&&(o[e]=l)}else s[e]=t}),this.syncDiff(a,{joins:s,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const i=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(i,(t,n)=>{let a=e[t];if(!a)return;const i=n.map(e=>e.presence_ref);a=a.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(qj=zj||(zj={})).ALL="*",qj.INSERT="INSERT",qj.UPDATE="UPDATE",qj.DELETE="DELETE",(Wj=Vj||(Vj={})).BROADCAST="broadcast",Wj.PRESENCE="presence",Wj.POSTGRES_CHANGES="postgres_changes",Wj.SYSTEM="system",(Uj=Qj||(Qj={})).SUBSCRIBED="SUBSCRIBED",Uj.TIMED_OUT="TIMED_OUT",Uj.CLOSED="CLOSED",Uj.CHANNEL_ERROR="CHANNEL_ERROR";class Hj{constructor(e,t={config:{}},n){var r,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=yj.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Lj(this,xj.join,this.params,this.timeout),this.rejoinTimer=new Cj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yj.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yj.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=yj.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yj.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=yj.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xj.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Kj(this),this.broadcastEndpointURL=Ij(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==yj.closed){const{config:{broadcast:i,presence:s,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[Vj.PRESENCE]&&this.bindings[Vj.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:i,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Qj.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Qj.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,i=[];for(let n=0;n<a;n++){const a=r[n],{filter:{event:s,schema:o,table:l,filter:c}}=a,u=t&&t[n];if(!(u&&u.event===s&&Hj.isFilterValueEqual(u.schema,o)&&Hj.isFilterValueEqual(u.table,l)&&Hj.isFilterValueEqual(u.filter,c)))return this.unsubscribe(),this.state=yj.errored,void(null==e||e(Qj.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(Qj.SUBSCRIBED))}null==e||e(Qj.SUBSCRIBED)}).receive("error",t=>{this.state=yj.errored,null==e||e(Qj.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Qj.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===yj.joined&&e===Vj.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var r;if(null==t)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===s.status)return{success:!0};let o=s.statusText;try{const e=await s.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,i;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===i?void 0:i.ack)||n("ok"),s.receive("ok",()=>n("ok")),s.receive("error",()=>n("error")),s.receive("timeout",()=>n("timed out"))});{const{event:i,payload:s}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yj.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xj.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Lj(this,xj.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yj.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Lj(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const i=e.toLocaleLowerCase(),{close:s,error:o,leave:l,join:c}=xj;if(n&&[s,o,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i}).map(e=>e.callback(u,n)):null===(a=this.bindings[i])||void 0===a||a.filter(e=>{var n,r,a,s,o,l,c,u;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,l=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===l||(null==l?void 0:l.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))&&(!(null===(s=e.filter)||void 0===s?void 0:s.table)||e.filter.table===(null===(o=t.data)||void 0===o?void 0:o.table))}{const n=null===(c=null===(l=null==e?void 0:e.filter)||void 0===l?void 0:l.event)||void 0===c?void 0:c.toLocaleLowerCase();return"*"===n||n===(null===(u=null==t?void 0:t.event)||void 0===u?void 0:u.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:i}=e,s={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:i};u=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===yj.closed}_isJoined(){return this.state===yj.joined}_isJoining(){return this.state===yj.joining}_isLeaving(){return this.state===yj.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Hj.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xj.close,{},e)}_onError(e){this._on(xj.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yj.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Pj(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Pj(e.columns,e.old_record)),t}}const Gj=()=>{},Yj=25e3,Zj=10,Xj=100,Jj=[1e3,2e3,5e3,1e4];class e_{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mj,this.transport=null,this.heartbeatIntervalMs=Yj,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gj,this.ref=0,this.reconnectTimer=null,this.vsn=pj,this.logger=Gj,this.conn=null,this.sendBuffer=[],this.serializer=new Sj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${wj.websocket}`,this.httpEndpoint=Ij(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=dj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fj.connecting:return kj.Connecting;case fj.open:return kj.Open;case fj.closing:return kj.Closing;default:return kj.Closed}}isConnected(){return this.connectionState()===kj.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Hj(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${a})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(APe){this.log("error","error in heartbeat callback",APe)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Xj)}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(APe){this.log("error","error in heartbeat callback",APe)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(APe){this.log("error","error in heartbeat callback",APe)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event&&e.ref&&e.ref===this.pendingHeartbeatRef){const t=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error",t)}catch(APe){this.log("error","error in heartbeat callback",APe)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:t,event:n,payload:r,ref:a}=e,i=a?`(${a})`:"",s=r.status||"";this.log("receive",`${s} ${t} ${n} ${i}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===fj.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===fj.open||this.conn.readyState===fj.connecting)try{this.conn.close()}catch(APe){this.log("error","Error closing connection",APe)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(xj.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(APe){this.log("error","Error fetching access token from callback",APe),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.90.1"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(xj.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(APe){this.log("error",`error in ${e} callback`,APe)}})}catch(APe){this.log("error",`error triggering ${e} callbacks`,APe)}}_setupReconnectionTimer(){this.reconnectTimer=new Cj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zj)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,i,s,o,l,c,u,d,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:mj,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:Yj,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(i=null==e?void 0:e.accessToken)&&void 0!==i?i:null,this.heartbeatCallback=null!==(s=null==e?void 0:e.heartbeatCallback)&&void 0!==s?s:Gj,this.vsn=null!==(o=null==e?void 0:e.vsn)&&void 0!==o?o:pj,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null==e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>Jj[e-1]||1e4,this.vsn){case hj:this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null==e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null==e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var t_=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null==(n=t.icebergType)?void 0:n.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function n_(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:a,body:i,headers:s}){const o=function(e,t,n){const r=new URL(t,e);if(n)for(const[a,i]of Object.entries(n))void 0!==i&&r.searchParams.set(a,i);return r.toString()}(e.baseUrl,r,a),l=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),c=await t(o,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...s},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const e=d?h:void 0,t=null==e?void 0:e.error;throw new t_((null==t?void 0:t.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:null==t?void 0:t.type,icebergCode:null==t?void 0:t.code,details:e})}return{status:c.status,headers:c.headers,data:h}}}}function r_(e){return e.join("")}var a_=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:r_(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:null==t?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${r_(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${r_(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${r_(e.namespace)}`}),!0}catch(t){if(t instanceof t_&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof t_&&409===n.status)return;throw n}}};function i_(e){return e.join("")}var s_=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${i_(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${i_(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${i_(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${i_(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((null==t?void 0:t.purge)??!1)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${i_(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${i_(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof t_&&404===n.status)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof t_&&409===n.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},o_=class{constructor(e){var t;let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=n_({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null==(t=e.accessDelegation)?void 0:t.join(","),this.namespaceOps=new a_(this.client,n),this.tableOps=new s_(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},l_=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function c_(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var u_=class extends l_{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},d_=class extends l_{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const h_=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),p_=e=>{if(Array.isArray(e))return e.map(e=>p_(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=p_(n)}),t};function m_(e){return(m_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f_(e){var t=function(e,t){if("object"!=m_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=m_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m_(t)?t:t+""}function g_(e,t,n){return(t=f_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y_(Object(n),!0).forEach(function(t){g_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const x_=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},b_=async(e,t,n)=>{e instanceof await Response&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,a=(null==n?void 0:n.statusCode)||r+"";t(new u_(x_(n),r,a))}).catch(e=>{t(new d_(x_(e),e))}):t(new d_(x_(e),e))},w_=(e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=v_({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),v_(v_({},a),n)):a};async function k_(e,t,n,r,a,i){return new Promise((s,o)=>{e(n,w_(t,r,a,i)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>b_(e,o,r))})}async function N_(e,t,n,r){return k_(e,"GET",t,n,r)}async function j_(e,t,n,r,a){return k_(e,"POST",t,r,a,n)}async function __(e,t,n,r,a){return k_(e,"PUT",t,r,a,n)}async function S_(e,t,n,r,a){return k_(e,"DELETE",t,r,a,n)}var C_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(c_(e))return{data:null,error:e};throw e}}};let P_;P_=Symbol.toStringTag;var E_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[P_]="BlobDownloadBuilder",this.promise=null}asStream(){return new C_(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await(await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(c_(e))return{data:null,error:e};throw e}}};const R_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},O_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var T_=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=h_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var a=this;try{let i;const s=v_(v_({},O_),r);let o=v_(v_({},a.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const l=s.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",a.encodeMetadata(l)),i.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),l&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,l&&(o["x-metadata"]=a.toBase64(a.encodeMetadata(l))),("undefined"!=typeof ReadableStream&&i instanceof ReadableStream||i&&"object"==typeof i&&"pipe"in i&&"function"==typeof i.pipe)&&!s.duplex&&(s.duplex="half")),(null==r?void 0:r.headers)&&(o=v_(v_({},o),r.headers));const c=a._removeEmptyFolders(t),u=a._getFinalPath(c),d=await("PUT"==e?__:j_)(a.fetch,`${a.url}/object/${u}`,i,v_({headers:o},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(c_(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var a=this;const i=a._removeEmptyFolders(e),s=a._getFinalPath(i),o=new URL(a.url+`/object/upload/sign/${s}`);o.searchParams.set("token",t);try{let e;const t=v_({upsert:O_.upsert},r),s=v_(v_({},a.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType),{data:{path:i,fullPath:(await __(a.fetch,o.toString(),e,{headers:s})).Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(c_(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const a=v_({},n.headers);(null==t?void 0:t.upsert)&&(a["x-upsert"]="true");const i=await j_(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:a}),s=new URL(n.url+i.url),o=s.searchParams.get("token");if(!o)throw new l_("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(c_(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await j_(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(c_(a))return{data:null,error:a};throw a}}async copy(e,t,n){var r=this;try{return{data:{path:(await j_(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(c_(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,n){var r=this;try{let a=r._getFinalPath(e),i=await j_(r.fetch,`${r.url}/object/sign/${a}`,v_({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:r.headers});const s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(c_(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,n){var r=this;try{const a=await j_(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:a.map(e=>v_(v_({},e),{},{signedUrl:e.signedURL?encodeURI(`${r.url}${e.signedURL}${i}`):null})),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(c_(a))return{data:null,error:a};throw a}}download(e,t){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"",i=this._getFinalPath(e);return new E_(()=>N_(this.fetch,`${this.url}/${n}/${i}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:p_(await N_(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(c_(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await async function(e,t,n,r){return k_(e,"HEAD",t,v_(v_({},n),{},{noResolveJson:!0}),r)}(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(c_(r)&&r instanceof d_){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==s&&r.push(s);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}async remove(e){var t=this;try{return{data:await S_(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(c_(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const a=v_(v_(v_({},R_),t),{},{prefix:e||""});return{data:await j_(r.fetch,`${r.url}/object/list/${r.bucketId}`,a,{headers:r.headers},n),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(c_(a))return{data:null,error:a};throw a}}async listV2(e,t){var n=this;try{const r=v_({},e);return{data:await j_(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(c_(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const M_="2.90.1",A_={"X-Client-Info":`storage-js/${M_}`};var B_=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const a=new URL(e);(null==r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=v_(v_({},A_),t),this.fetch=h_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await N_(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(c_(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await N_(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(c_(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await j_(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(c_(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await __(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(c_(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await j_(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(c_(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await S_(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(c_(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},D_=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=v_(v_({},A_),t),this.fetch=h_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await j_(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(c_(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&n.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&n.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&n.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&n.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&n.set("search",e.search);const r=n.toString(),a=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await N_(t.fetch,a,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(c_(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await S_(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(c_(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!(e=>!(!e||"string"!=typeof e)&&!(0===e.length||e.length>100)&&e.trim()===e&&!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e))(e))throw new l_("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new o_({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(e,t){const n=e[t];return"function"!=typeof n?n:async(...t)=>{try{return{data:await n.apply(e,t),error:null}}catch(a){if(r)throw a;return{data:null,error:a}}}}})}};const I_={"X-Client-Info":`storage-js/${M_}`,"Content-Type":"application/json"};var L_=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function F_(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}var $_=class extends L_{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},z_=class extends L_{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const q_=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),V_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),W_=(e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=v_({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,v_(v_({},a),n)):a};async function Q_(e,t,n,r,a,i){return new Promise((s,o)=>{e(n,W_(t,r,a,i)).then(e=>{if(!e.ok)throw e;if(null==r?void 0:r.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>s(e)).catch(e=>(async(e,t,n)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==n?void 0:n.noResolveJson)){const n=e.status||500,r=e;if("function"==typeof r.json)r.json().then(e=>{const r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||n+"";t(new $_(V_(e),n,r))}).catch(()=>{const e=n+"";t(new $_(r.statusText||`HTTP ${n} error`,n,e))});else{const e=n+"";t(new $_(r.statusText||`HTTP ${n} error`,n,e))}}else t(new z_(V_(e),e))})(e,o,r))})}async function U_(e,t,n,r,a){return Q_(e,"POST",t,r,a,n)}var K_=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=v_(v_({},I_),t),this.fetch=q_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await U_(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await U_(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(F_(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await U_(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await U_(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(F_(r))return{data:null,error:r};throw r}}},H_=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=v_(v_({},I_),t),this.fetch=q_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await U_(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await U_(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:await U_(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await U_(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await U_(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}},G_=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=v_(v_({},I_),t),this.fetch=q_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await U_(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await U_(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await U_(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await U_(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(F_(n))return{data:null,error:n};throw n}}},Y_=class extends G_{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Z_(this.url,this.headers,e,this.fetch)}async createBucket(e){return(()=>super.createBucket)().call(this,e)}async getBucket(e){return(()=>super.getBucket)().call(this,e)}async listBuckets(e={}){return(()=>super.listBuckets)().call(this,e)}async deleteBucket(e){return(()=>super.deleteBucket)().call(this,e)}},Z_=class extends K_{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){return(()=>super.createIndex)().call(this,v_(v_({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(e={}){return(()=>super.listIndexes)().call(this,v_(v_({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return(()=>super.getIndex)().call(this,this.vectorBucketName,e)}async deleteIndex(e){return(()=>super.deleteIndex)().call(this,this.vectorBucketName,e)}index(e){return new X_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},X_=class extends H_{constructor(e,t,n,r,a){super(e,t,a),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=this;return(()=>super.putVectors)().call(t,v_(v_({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(e){var t=this;return(()=>super.getVectors)().call(t,v_(v_({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(e={}){var t=this;return(()=>super.listVectors)().call(t,v_(v_({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(e){var t=this;return(()=>super.queryVectors)().call(t,v_(v_({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(e){var t=this;return(()=>super.deleteVectors)().call(t,v_(v_({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},J_=class extends B_{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new T_(this.url,this.headers,e,this.fetch)}get vectors(){return new Y_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new D_(this.url+"/iceberg",this.headers,this.fetch)}};const eS="2.90.1",tS=3e4,nS=9e4,rS={"X-Client-Info":`gotrue-js/${eS}`},aS="X-Supabase-Api-Version",iS={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},sS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class oS extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function lS(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class cS extends oS{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class uS extends oS{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class dS extends oS{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class hS extends dS{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class pS extends dS{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mS extends dS{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fS extends dS{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gS extends dS{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yS extends dS{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class vS extends dS{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function xS(e){return lS(e)&&"AuthRetryableFetchError"===e.name}class bS extends dS{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class wS extends dS{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),NS=" \t\n\r=".split(""),jS=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<NS.length;t+=1)e[NS[t].charCodeAt(0)]=-2;for(let t=0;t<kS.length;t+=1)e[kS[t].charCodeAt(0)]=t;return e})();function _S(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(kS[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(kS[e]),t.queuedBits-=6}}function SS(e,t,n){const r=jS[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function CS(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let s=0;s<e.length;s+=1)SS(e.charCodeAt(s),a,i);return t.join("")}function PS(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function ES(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)SS(e.charCodeAt(a),n,r);return new Uint8Array(t)}function RS(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}PS(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function OS(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>_S(e,n,r)),_S(null,n,r),t.join("")}const TS=()=>"undefined"!=typeof window&&"undefined"!=typeof document,MS={tested:!1,writable:!1},AS=()=>{if(!TS())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(APe){return!1}if(MS.tested)return MS.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),MS.tested=!0,MS.writable=!0}catch(APe){MS.tested=!0,MS.writable=!1}return MS.writable};const BS=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),DS=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},IS=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},LS=async(e,t)=>{await e.removeItem(t)};class FS{constructor(){this.promise=new FS.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function $S(e){const t=e.split(".");if(3!==t.length)throw new wS("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!sS.test(t[n]))throw new wS("JWT not in base64url format");return{header:JSON.parse(CS(t[0])),payload:JSON.parse(CS(t[1])),signature:ES(t[2]),raw:{header:t[0],payload:t[1]}}}function zS(e){return("0"+e.toString(16)).substr(-2)}async function qS(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function VS(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,zS).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await DS(e,`${t}-code-verifier`,a);const i=await qS(r);return[i,r===i?"plain":"s256"]}FS.promiseConstructor=Promise;const WS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const QS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function US(e){if(!QS.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function KS(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function HS(e){return JSON.parse(JSON.stringify(e))}const GS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),YS=[502,503,504];async function ZS(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new vS(GS(e),0);if(YS.includes(e.status))throw new vS(GS(e),e.status);let r,a;try{r=await e.json()}catch(APe){throw new uS(GS(APe),APe)}const i=function(e){const t=e.headers.get(aS);if(!t)return null;if(!t.match(WS))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(APe){return null}}(e);if(i&&i.getTime()>=iS.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new bS(GS(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new hS}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new bS(GS(r),e.status,r.weak_password.reasons);throw new cS(GS(r),e.status||500,a)}async function XS(e,t,n,r){var a;const i=Object.assign({},null==r?void 0:r.headers);i[aS]||(i[aS]=iS.name),(null==r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(s.redirect_to=r.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await async function(e,t,n,r,a,i){const s=((e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,a,i);let o;try{o=await e(n,Object.assign({},s))}catch(APe){throw new vS(GS(APe),0)}o.ok||await ZS(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(APe){await ZS(APe)}}(e,t,n+o,{headers:i,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function JS(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function eC(e){const t=JS(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function tC(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function nC(e){return{data:e,error:null}}function rC(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,s=GN(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},user:Object.assign({},s)},error:null}}function aC(e){return e}const iC=["global","local","others"];class sC{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=BS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=iC[0]){if(iC.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${iC.join(", ")}`);try{return await XS(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(lS(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await XS(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:tC})}catch(n){if(lS(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=GN(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await XS(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:rC,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(lS(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await XS(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tC})}catch(t){if(lS(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,i,s,o;try{const l={nextPage:null,lastPage:0,total:0},c=await XS(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:aC});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(lS(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){US(e);try{return await XS(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tC})}catch(t){if(lS(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){US(e);try{return await XS(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:tC})}catch(n){if(lS(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){US(e);try{return await XS(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:tC})}catch(n){if(lS(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){US(e.userId);try{const{data:t,error:n}=await XS(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(lS(t))return{data:null,error:t};throw t}}async _deleteFactor(e){US(e.userId),US(e.id);try{return{data:await XS(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(lS(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,a,i,s,o;try{const l={nextPage:null,lastPage:0,total:0},c=await XS(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:aC});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(lS(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await XS(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(lS(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await XS(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(lS(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await XS(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(n){if(lS(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await XS(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(lS(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await XS(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(lS(t))return{data:null,error:t};throw t}}}function oC(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const lC=!!(globalThis&&AS()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class cC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class uC extends cC{}async function dC(e,t,n){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw new uC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lC)try{await globalThis.navigator.locks.query()}catch(APe){}return await n()}try{return await n()}finally{}}))}function hC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function pC(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class mC extends Error{constructor({message:e,code:t,cause:n,name:r}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(a=null!=r?r:n instanceof Error?n.name:void 0)&&void 0!==a?a:"Unknown Error",this.code=t}}class fC extends mC{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function gC({error:e,options:t}){var n,r,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new mC({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(n=i.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new mC({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new mC({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(a=i.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new mC({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new mC({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new mC({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===i.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new mC({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new mC({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!NC(t))return new mC({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(i.rp.id!==t)return new mC({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new mC({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new mC({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mC({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function yC({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new mC({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new mC({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!NC(t))return new mC({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rpId!==t)return new mC({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new mC({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mC({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const vC=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function xC(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=GN(e,["challenge","user","excludeCredentials"]),i=ES(t).buffer,s=Object.assign(Object.assign({},n),{id:ES(n.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:s});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:ES(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function bC(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=GN(e,["challenge","allowCredentials"]),a=ES(t).buffer,i=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];i.allowCredentials[e]=Object.assign(Object.assign({},t),{id:ES(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return i}function wC(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:OS(new Uint8Array(e.response.attestationObject)),clientDataJSON:OS(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function kC(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:OS(new Uint8Array(a.authenticatorData)),clientDataJSON:OS(new Uint8Array(a.clientDataJSON)),signature:OS(new Uint8Array(a.signature)),userHandle:a.userHandle?OS(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function NC(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function jC(){var e,t;return!!(TS()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const _C={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},SC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function CC(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const a of e)if(a)for(const e in a){const i=a[e];if(void 0!==i)if(Array.isArray(i))r[e]=i;else if(n(i))r[e]=i;else if(t(i)){const n=r[e];t(n)?r[e]=CC(n,i):r[e]=CC(i)}else r[e]=i}return r}class PC{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},a){try{const{data:i,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!i)return{data:null,error:s};const o=null!=r?r:vC.createNewAbortSignal();if("create"===i.webauthn.type){const{user:e}=i.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${n}`),e.displayName||(e.displayName=e.name)}switch(i.webauthn.type){case"create":{const t=function(e,t){return CC(_C,e,t||{})}(i.webauthn.credential_options.publicKey,null==a?void 0:a.create),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fC("Browser returned unexpected credential type",t)}:{data:null,error:new fC("Empty credential response",t)}}catch(t){return{data:null,error:gC({error:t,options:e})}}}({publicKey:t,signal:o});return n?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return CC(SC,e,t||{})}(i.webauthn.credential_options.publicKey,null==a?void 0:a.request),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fC("Browser returned unexpected credential type",t)}:{data:null,error:new fC("Empty credential response",t)}}catch(t){return{data:null,error:yC({error:t,options:e})}}}(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:t,signal:o}));return n?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(i){return lS(i)?{data:null,error:i}:{data:null,error:new uS("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},a){if(!t)return{data:null,error:new oS("rpId is required for WebAuthn authentication")};try{if(!jC())return{data:null,error:new uS("Browser does not support WebAuthn",null)};const{data:i,error:s}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:a});if(!i)return{data:null,error:s};const{webauthn:o}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:n,credential_response:o.credential_response}})}catch(i){return lS(i)?{data:null,error:i}:{data:null,error:new uS("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},a){if(!t)return{data:null,error:new oS("rpId is required for WebAuthn registration")};try{if(!jC())return{data:null,error:new uS("Browser does not support WebAuthn",null)};const{data:i,error:s}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(t=>{var n;return null===(n=t.data)||void 0===n?void 0:n.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:s};const{data:o,error:l}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:a});return o?this._verify({factorId:i.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(i){return lS(i)?{data:null,error:i}:{data:null,error:new uS("Unexpected error in register",i)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(APe){"undefined"!=typeof self&&(self.globalThis=self)}}();const EC={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function RC(e,t,n){return await n()}const OC={};class TC{get jwks(){var e,t;return null!==(t=null===(e=OC[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){OC[this.storageKey]=Object.assign(Object.assign({},OC[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=OC[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){OC[this.storageKey]=Object.assign(Object.assign({},OC[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},EC),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(t=TC.nextInstanceID[this.storageKey])&&void 0!==t?t:0,TC.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"==typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&TS()){this._logPrefix();this.logDebugMessages}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new sC({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=BS(a.fetch),this.lock=a.lock||RC,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&TS()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=dC:this.lock=RC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new PC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:AS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oC(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=oC(this.memoryStorage)),TS()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(APe){}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${eS}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},n="none";if(TS()&&(t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(APe){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),TS()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return lS(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return{error:a}}const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return lS(t)?this._returnResult({error:t}):this._returnResult({error:new uS("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await XS(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:JS}),{data:i,error:s}=a;if(s||!i)return this._returnResult({data:{user:null,session:null},error:s});const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(lS(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:i}=e;let s=null,o=null;"pkce"===this.flowType&&([s,o]=await VS(this.storage,this.storageKey)),a=await XS(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:o},xform:JS})}else{if(!("phone"in e))throw new mS("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:s}=e;a=await XS(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==s?void 0:s.data)&&void 0!==n?n:{},channel:null!==(r=null==s?void 0:s.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:JS})}}const{data:i,error:s}=a;if(s||!i)return await LS(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(await LS(this.storage,`${this.storageKey}-code-verifier`),lS(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await XS(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:eC})}else{if(!("phone"in e))throw new mS("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await XS(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:eC})}}const{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const e=new pS;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(lS(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,a,i,s,o,l,c,u,d;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:u,wallet:d,statement:m,options:f}=e;let g;if(TS())if("object"==typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof d||!(null==f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const y=new URL(null!==(t=null==f?void 0:f.url)&&void 0!==t?t:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=hC(v[0]);let b=null===(n=null==f?void 0:f.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!b){const e=await g.request({method:"eth_chainId"});b=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const p=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${hC(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let m=`URI: ${d}\nVersion: ${h}\nChain ID: ${n}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(a&&(m+=`\nExpiration Time: ${a.toISOString()}`),o&&(m+=`\nNot Before: ${o.toISOString()}`),l&&(m+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}m+=e}return`${p}\n${m}`}({domain:y.host,address:x,statement:m,uri:y.href,version:"1",chainId:b,nonce:null===(r=null==f?void 0:f.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(i=null===(a=null==f?void 0:f.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==i?i:new Date,expirationTime:null===(s=null==f?void 0:f.signInWithEthereum)||void 0===s?void 0:s.expirationTime,notBefore:null===(o=null==f?void 0:f.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==f?void 0:f.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==f?void 0:f.signInWithEthereum)||void 0===c?void 0:c.resources}),p=await g.request({method:"personal_sign",params:[pC(h),x]})}try{const{data:t,error:n}=await XS(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:JS});if(n)throw n;if(!t||!t.session||!t.user){const e=new pS;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(m){if(lS(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var t,n,r,a,i,s,o,l,c,u,d,h;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:d,wallet:h,statement:f,options:g}=e;let y;if(TS())if("object"==typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in y&&"function"==typeof y.signMessage&&"publicKey"in y&&"object"==typeof y&&y.publicKey&&"toBase58"in y.publicKey&&"function"==typeof y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${v.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:n}=await XS(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:OS(m)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:JS});if(n)throw n;if(!t||!t.session||!t.user){const e=new pS;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(f){if(lS(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async _exchangeCodeForSession(e){const t=await IS(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{if(!n&&"pkce"===this.flowType)throw new yS;const{data:t,error:a}=await XS(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:JS});if(await LS(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!t||!t.session||!t.user){const e=new pS;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a})}catch(a){if(await LS(this.storage,`${this.storageKey}-code-verifier`),lS(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:i}=e,s=await XS(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:JS}),{data:o,error:l}=s;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new pS;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(lS(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,r,a,i;try{if("email"in e){const{email:r,options:a}=e;let i=null,s=null;"pkce"===this.flowType&&([i,s]=await VS(this.storage,this.storageKey));const{error:o}=await XS(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null==a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:s},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:n}=e,{data:s,error:o}=await XS(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null==n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:o})}throw new mS("You must provide either an email or phone number.")}catch(s){if(await LS(this.storage,`${this.storageKey}-code-verifier`),lS(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:s}=await XS(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:JS});if(s)throw s;if(!i){throw new Error("An error occurred on token verification.")}const o=i.session,l=i.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(r){if(lS(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,n,r,a,i;try{let s=null,o=null;"pkce"===this.flowType&&([s,o]=await VS(this.storage,this.storageKey));const l=await XS(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:nC});return(null===(a=l.data)||void 0===a?void 0:a.url)&&TS()&&!(null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(s){if(await LS(this.storage,`${this.storageKey}-code-verifier`),lS(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new hS;const{error:r}=await XS(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(lS(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:a}=e,{error:i}=await XS(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:i,error:s}=await XS(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:s})}throw new mS("You must provide either an email or phone number and a type")}catch(t){if(lS(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(APe){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(APe){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await IS(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<nS;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await IS(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=KS()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,n,r)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"==typeof n){const t=n.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,n,r)}return t.value||"string"!=typeof n||(t.value=!0),Reflect.get(e,n,r)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await XS(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tC}):await this._useSession(async e=>{var t,n,r;const{data:a,error:i}=e;if(i)throw i;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await XS(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:tC}):{data:{user:null},error:new hS}})}catch(t){if(lS(t))return function(e){return lS(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await LS(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new hS;const i=r.session;let s=null,o=null;"pkce"===this.flowType&&null!=e.email&&([s,o]=await VS(this.storage,this.storageKey));const{data:l,error:c}=await XS(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:o}),jwt:i.access_token,xform:tC});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(await LS(this.storage,`${this.storageKey}-code-verifier`),lS(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new hS;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:i}=$S(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(lS(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new hS;const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(lS(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!TS())throw new fS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new gS("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new fS("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gS("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:i,expires_in:s,expires_at:o,token_type:l}=e;if(!(a&&s&&i&&l))throw new fS("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(s);let d=c+u;o&&(d=parseInt(o));const{data:h,error:p}=await this._getUser(a);if(p)throw p;const m={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:u,expires_at:d,refresh_token:i,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(n){if(lS(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await IS(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({error:a});const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return lS(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await LS(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await VS(this.storage,this.storageKey,!0));try{return await XS(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await LS(this.storage,`${this.storageKey}-code-verifier`),lS(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(lS(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,i,s;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await XS(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==s?s:void 0})});if(r)throw r;return TS()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),this._returnResult({data:{provider:e.provider,url:null==n?void 0:n.url},error:null})}catch(n){if(lS(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:a}}=t;if(r)throw r;const{options:i,provider:s,token:o,access_token:l,nonce:c}=e,u=await XS(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null==a?void 0:a.access_token)&&void 0!==n?n:void 0,body:{provider:s,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:JS}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new pS})}catch(r){if(await LS(this.storage,`${this.storageKey}-code-verifier`),lS(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:i}=t;if(i)throw i;return await XS(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(lS(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await XS(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:JS})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&xS(t)&&Date.now()+n-a<tS},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!r(a,null,t))return void e(t)}catch(APe){if(!r(a,APe))return void t(APe)}})()}))}catch(a){if(this._debug(t,"error",a),lS(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),TS()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await IS(this.storage,this.storageKey);if(a&&this.userStorage){let t=await IS(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await DS(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:KS()}else if(a&&!a.user&&!a.user){const e=await IS(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await LS(this.storage,this.storageKey+"-user"),await DS(this.storage,this.storageKey,a)):a.user=KS()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const i=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<nS;if(this._debug(n,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(xS(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return void this._debug(n,"error",a)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new hS;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new FS;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new hS;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),lS(a)){const e={data:null,error:a};return xS(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(APe){r.push(APe)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await LS(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await DS(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=HS(e);await DS(this.storage,this.storageKey,r)}else{const e=HS(t);await DS(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await LS(this.storage,this.storageKey),await LS(this.storage,this.storageKey+"-code-verifier"),await LS(this.storage,this.storageKey+"-user"),this.userStorage&&await LS(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&TS()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(APe){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tS);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/tS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(APe){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(APe){if(!(APe.isAcquireTimeout||APe instanceof cC))throw APe;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!TS()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await VS(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?this._returnResult({data:null,error:a}):await XS(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(lS(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await XS(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:null===(n=null==a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(t){if(lS(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?wC(e.webauthn.credential_response):kC(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:o}=await XS(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:o}))})}catch(t){if(lS(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=await XS(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});if(i.error)return i;const{data:s}=i;if("webauthn"!==s.type)return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:xC(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:bC(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(lS(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(a),"verified"===a.status&&r[a.factor_type].push(a);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=$S(n.access_token);let i=null;a.aal&&(i=a.aal);let s=i;(null!==(t=null===(e=n.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(s="aal2");return{data:{currentLevel:i,nextLevel:s,currentAuthenticationMethods:a.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await XS(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new hS})})}catch(t){if(lS(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new hS});const i=await XS(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url&&TS()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(lS(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new hS});const i=await XS(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url&&TS()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(lS(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await XS(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new hS})})}catch(e){if(lS(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await XS(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new hS})})}catch(t){if(lS(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:a,error:i}=await XS(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,n=a.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}const{header:r,payload:a,signature:i,raw:{header:s,payload:o}}=$S(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,i,RS(`${s}.${o}`))))throw new wS("Invalid JWT signature");return{data:{claims:a,header:r,signature:i},error:null}}catch(n){if(lS(n))return this._returnResult({data:null,error:n});throw n}}}TC.nextInstanceID={};const MC=TC;let AC="";AC="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const BC={headers:{"X-Client-Info":`supabase-js-${AC}/2.90.1`}},DC={schema:"public"},IC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},LC={};function FC(e){return(FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $C(e){var t=function(e,t){if("object"!=FC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=FC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==FC(t)?t:t+""}function zC(e,t,n){return(t=$C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qC(Object(n),!0).forEach(function(t){zC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const WC=(e,t,n)=>{const r=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(n),a=Headers;return async(n,i)=>{var s;const o=null!==(s=await t())&&void 0!==s?s:e;let l=new a(null==i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,VC(VC({},i),{},{headers:l}))}};var QC=class extends MC{constructor(e){super(e)}},UC=class{constructor(e,t,n){var r,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const s=`sb-${i.hostname.split(".")[0]}-auth-token`,o=function(e,t){var n,r;const{db:a,auth:i,realtime:s,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:VC(VC({},l),a),auth:VC(VC({},c),i),realtime:VC(VC({},u),s),storage:{},global:VC(VC(VC({},d),o),{},{headers:VC(VC({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:DC,realtime:LC,auth:VC(VC({},IC),{},{storageKey:s}),global:BC});var l;(this.storageKey=null!==(r=o.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=o.global.headers)&&void 0!==a?a:{},o.accessToken)?(this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(l=o.auth)&&void 0!==l?l:{},this.headers,o.global.fetch);this.fetch=WC(t,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(VC({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>{}),this.rest=new uj(new URL("rest/v1",i).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch}),this.storage=new J_(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new rj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t,n=this;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,storageKey:i,flowType:s,lock:o,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QC({url:this.authUrl.href,headers:VC(VC({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,flowType:s,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new e_(this.realtimeUrl.href,VC(VC({},e),{},{params:VC(VC({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}};!function(){if("undefined"!=typeof window)return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(null==t)return!1;const n=t.match(/^v(\d+)\./);!!n&&parseInt(n[1],10)}();const KC=((e,t,n)=>new UC(e,t,n))("https://aufycarwflhsdgszbnop.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF1ZnljYXJ3Zmxoc2Rnc3pibm9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc5ODUwOTEsImV4cCI6MjA4MzU2MTA5MX0.uNxFLqJ3BGKkAj1pj77fxnCfDGTcdKFuCIF8HMPYiXw",{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),HC=Object.freeze(Object.defineProperty({__proto__:null,supabase:KC},Symbol.toStringTag,{value:"Module"}));let GC=null;async function YC(e,t){try{const n=function(){if(GC)return GC;const e=sessionStorage.getItem("ep_funnel_session_id");return e?(GC=e,GC):(GC=`session_${Date.now()}_${Math.random().toString(36).slice(2,11)}`,sessionStorage.setItem("ep_funnel_session_id",GC),GC)}(),{data:{session:r}}=await KC.auth.getSession();return!(await KC.functions.invoke("track-funnel-event",{body:{event_type:e,session_id:n,trigger_source:(null==t?void 0:t.trigger_source)||null,metadata:t||null}})).error}catch(n){return!1}}const ZC={activeVisionaries:2847,weeklyGrowth:127,averageRating:4.9,currentARR:19800,grossMargin:95,modalConversionRate:12.3,signupToPremiumRate:34.7};async function XC(e){try{const{data:t,error:n}=await KC.rpc("log_security_event",{p_action_type:e.actionType,p_action_category:e.actionCategory||"general",p_user_id:e.userId||null,p_admin_id:e.adminId||null,p_target_type:e.targetType||null,p_target_id:e.targetId||null,p_ip_address:null,p_user_agent:"undefined"!=typeof navigator?navigator.userAgent:null,p_metadata:e.metadata||{},p_severity:e.severity||"info"});return n?null:t}catch(t){return null}}const JC=(e,t)=>XC({actionType:"user_signup",actionCategory:"authentication",userId:e,metadata:t,severity:"info"}),eP=(e,t)=>XC({actionType:"user_signin",actionCategory:"authentication",userId:e,metadata:t,severity:"info"}),tP=e=>XC({actionType:"user_signout",actionCategory:"authentication",userId:e,severity:"info"}),nP=(e,t)=>XC({actionType:"signin_failed",actionCategory:"authentication",metadata:{email:e,reason:t},severity:"warn"}),rP=e=>XC({actionType:"mfa_verified",actionCategory:"authentication",userId:e,severity:"info"}),aP=(e,t,n)=>XC({actionType:"vision_listed",actionCategory:"marketplace",userId:e,targetType:"visualization",targetId:t,metadata:{price_cents:n},severity:"info"});async function iP(e){try{const t=await async function(){try{const e=await fetch("https://api.ipify.org?format=json");if(!e.ok)return null;const t=(await e.json()).ip,n=await fetch(`https://get.geojs.io/v1/ip/geo/${t}.json`);if(!n.ok)return{ip:t,country:null,countryCode:null,region:null,city:null,latitude:null,longitude:null,timezone:null};const r=await n.json();return{ip:t,country:r.country||null,countryCode:r.country_code||null,region:r.region||null,city:r.city||null,latitude:r.latitude?parseFloat(r.latitude):null,longitude:r.longitude?parseFloat(r.longitude):null,timezone:r.timezone||null}}catch(r){return null}}();if(!t)return!1;const n=t.ip?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t).toString(16).padStart(8,"0")}(t.ip):null,{error:r}=await KC.from("user_location_analytics").upsert({user_id:e,ip_hash:n,country:t.country,country_code:t.countryCode,region:t.region,city:t.city,latitude:null,longitude:null,timezone:t.timezone,last_seen_at:(new Date).toISOString()},{onConflict:"user_id"});return!r}catch(t){return!1}}const sP=ct.createContext(void 0);function oP({children:e}){const[t,n]=ct.useState(null),[r,a]=ct.useState(null),[i,s]=ct.useState(null),[o,l]=ct.useState(!0),[c,u]=ct.useState(null),[d,h]=ct.useState(!0),[p,m]=ct.useState(!1),[f,g]=ct.useState({enabled:!1,factorId:null}),[y,v]=ct.useState(!1),[x,b]=ct.useState(!0),w=(null==c?void 0:c.subscribed)&&"prod_TldXgoRfEQn0lX"===(null==c?void 0:c.productId),k=!!t&&!w,N=ct.useCallback(async(e,t)=>{b(!0);try{if((null==t?void 0:t.toLowerCase())==="a.arthur.shelton@gmail.com".toLowerCase())return v(!0),b(!1),void KC.functions.invoke("grant-ceo-admin").catch(()=>{});const{data:n,error:r}=await KC.from("user_roles").select("role").eq("user_id",e).eq("role","admin").maybeSingle();v(!r&&!!n)}catch{v(!1)}finally{b(!1)}},[]),j=ct.useCallback(async()=>{var e;try{const{data:t,error:n}=await KC.auth.mfa.listFactors();if(n)throw n;const r=null==(e=t.totp)?void 0:e.find(e=>"verified"===e.status),a={enabled:!!r,factorId:(null==r?void 0:r.id)||null};return g(a),a}catch(t){return{enabled:!1,factorId:null}}},[]),_=async e=>{const{data:t,error:n}=await KC.from("profiles").select("*").eq("user_id",e).single();!n&&t&&s(t)},S=ct.useCallback(async()=>{if(!(null==r?void 0:r.access_token))return u(null),h(!1),void m(!0);h(!0);try{const{data:e,error:t}=await KC.functions.invoke("check-subscription",{headers:{Authorization:`Bearer ${r.access_token}`}});u(t?null:{subscribed:e.subscribed,productId:e.product_id,subscriptionEnd:e.subscription_end})}catch(e){u(null)}finally{h(!1),m(!0)}},[null==r?void 0:r.access_token]);ct.useEffect(()=>{const{data:{subscription:e}}=KC.auth.onAuthStateChange(async(e,t)=>{a(t),n((null==t?void 0:t.user)??null),(null==t?void 0:t.user)?setTimeout(()=>{_(t.user.id),N(t.user.id,t.user.email)},0):(s(null),u(null),v(!1),b(!1)),l(!1)});return KC.auth.getSession().then(({data:{session:e}})=>{a(e),n((null==e?void 0:e.user)??null),(null==e?void 0:e.user)?(_(e.user.id),N(e.user.id,e.user.email)):b(!1),l(!1)}),()=>e.unsubscribe()},[]),ct.useEffect(()=>{(null==r?void 0:r.access_token)&&S()},[null==r?void 0:r.access_token,S]),ct.useEffect(()=>{if(!(null==r?void 0:r.access_token))return;const e=setInterval(()=>{S()},6e4);return()=>clearInterval(e)},[null==r?void 0:r.access_token,S]),ct.useEffect(()=>{"success"===new URLSearchParams(window.location.search).get("subscription")&&(window.history.replaceState({},"",window.location.pathname),S())},[S]);return xt.jsx(sP.Provider,{value:{user:t,session:r,profile:i,isLoading:o,isPremium:w,isFreeAccount:k,isAdmin:y,isCheckingAdmin:x,subscriptionStatus:c,isCheckingSubscription:d,mfaStatus:f,signUp:async(e,t,n,r)=>{const{error:a,data:i}=await KC.auth.signUp({email:e,password:t,options:{emailRedirectTo:window.location.origin,data:{display_name:n,phone:r}}});return!a&&i.user&&(YC("signup_completed",{trigger_source:"auth_modal",account_type:"free",has_phone:!!r}),JC(i.user.id,{email:e,has_phone:!!r,has_display_name:!!n}),iP(i.user.id)),{error:a}},signIn:async(e,t)=>{var n;const{data:r,error:a}=await KC.auth.signInWithPassword({email:e,password:t});if(a)return nP(e,a.message),{error:a};r.user&&(eP(r.user.id,{email:e}),iP(r.user.id));const{data:i}=await KC.auth.mfa.listFactors();if(null==(n=null==i?void 0:i.totp)?void 0:n.some(e=>"verified"===e.status)){const{data:e}=await KC.auth.mfa.getAuthenticatorAssuranceLevel();if("aal1"===(null==e?void 0:e.currentLevel)&&"aal2"===(null==e?void 0:e.nextLevel))return{error:null,requiresMFA:!0}}return{error:null,requiresMFA:!1}},signOut:async()=>{t&&tP(t.id),await KC.auth.signOut(),n(null),a(null),s(null),u(null),g({enabled:!1,factorId:null}),v(!1),b(!1),m(!1),h(!1)},updateProfile:async e=>{if(!t)return{error:new Error("Not authenticated")};const{error:n}=await KC.from("profiles").update(e).eq("user_id",t.id);return n||s(t=>t?{...t,...e}:null),{error:n}},checkSubscription:S,openCheckout:async()=>{if(!(null==r?void 0:r.access_token))throw new Error("Not authenticated");const{data:e,error:t}=await KC.functions.invoke("create-checkout",{headers:{Authorization:`Bearer ${r.access_token}`}});if(t)throw new Error(t.message||"Failed to create checkout session");(null==e?void 0:e.url)&&window.open(e.url,"_blank")},openCustomerPortal:async()=>{if(!(null==r?void 0:r.access_token))throw new Error("Not authenticated");const{data:e,error:t}=await KC.functions.invoke("customer-portal",{headers:{Authorization:`Bearer ${r.access_token}`}});if(t)throw new Error(t.message||"Failed to create portal session");(null==e?void 0:e.url)&&window.open(e.url,"_blank")},checkMFAStatus:j},children:e})}function lP(){const e=ct.useContext(sP);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const cP=ct.createContext({});function uP(e){const t=ct.useRef(null);return null===t.current&&(t.current=e()),t.current}const dP="undefined"!=typeof window,hP=dP?ct.useLayoutEffect:ct.useEffect,pP=ct.createContext(null);function mP(e,t){-1===e.indexOf(t)&&e.push(t)}function fP(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const gP=(e,t,n)=>n>t?t:n<e?e:n;const yP={},vP=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function xP(e){return"object"==typeof e&&null!==e}const bP=e=>/^0[^.\s]+$/u.test(e);function wP(e){let t;return()=>(void 0===t&&(t=e()),t)}const kP=e=>e,NP=(e,t)=>n=>t(e(n)),jP=(...e)=>e.reduce(NP),_P=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class SP{constructor(){this.subscriptions=[]}add(e){return mP(this.subscriptions,e),()=>fP(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let a=0;a<r;a++){const r=this.subscriptions[a];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const CP=e=>1e3*e,PP=e=>e/1e3;function EP(e,t){return t?e*(1e3/t):0}const RP=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function OP(e,t,n,r){if(e===t&&n===r)return kP;const a=t=>function(e,t,n,r,a){let i,s,o=0;do{s=t+(n-t)/2,i=RP(s,r,a)-e,i>0?n=s:t=s}while(Math.abs(i)>1e-7&&++o<12);return s}(t,0,1,e,n);return e=>0===e||1===e?e:RP(a(e),t,r)}const TP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,MP=e=>t=>1-e(1-t),AP=OP(.33,1.53,.69,.99),BP=MP(AP),DP=TP(BP),IP=e=>(e*=2)<1?.5*BP(e):.5*(2-Math.pow(2,-10*(e-1))),LP=e=>1-Math.sin(Math.acos(e)),FP=MP(LP),$P=TP(LP),zP=OP(.42,0,1,1),qP=OP(0,0,.58,1),VP=OP(.42,0,.58,1),WP=e=>Array.isArray(e)&&"number"==typeof e[0],QP={linear:kP,easeIn:zP,easeInOut:VP,easeOut:qP,circIn:LP,circInOut:$P,circOut:FP,backIn:BP,backInOut:DP,backOut:AP,anticipate:IP},UP=e=>{if(WP(e)){e.length;const[t,n,r,a]=e;return OP(t,n,r,a)}return"string"==typeof e?QP[e]:e},KP=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function HP(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=KP.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,a=!1;const i=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(t){i.has(t)&&(l.schedule(t),e()),t(s)}const l={schedule:(e,a=!1,s=!1)=>{const o=s&&r?t:n;return a&&i.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),i.delete(e)},process:e=>{s=e,r?a=!0:(r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,a&&(a=!1,l.process(e)))}};return l}(i),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:p,postRender:m}=s,f=()=>{const i=yP.useManualTiming?a.timestamp:performance.now();n=!1,yP.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(i-a.timestamp,40),1)),a.timestamp=i,a.isProcessing=!0,o.process(a),l.process(a),c.process(a),u.process(a),d.process(a),h.process(a),p.process(a),m.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(f))};return{schedule:KP.reduce((t,i)=>{const o=s[i];return t[i]=(t,i=!1,s=!1)=>(n||(n=!0,r=!0,a.isProcessing||e(f)),o.schedule(t,i,s)),t},{}),cancel:e=>{for(let t=0;t<KP.length;t++)s[KP[t]].cancel(e)},state:a,steps:s}}const{schedule:GP,cancel:YP,state:ZP,steps:XP}=HP("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:kP,!0);let JP;function eE(){JP=void 0}const tE={now:()=>(void 0===JP&&tE.set(ZP.isProcessing||yP.useManualTiming?ZP.timestamp:performance.now()),JP),set:e=>{JP=e,queueMicrotask(eE)}},nE=e=>t=>"string"==typeof t&&t.startsWith(e),rE=nE("--"),aE=nE("var(--"),iE=e=>!!aE(e)&&sE.test(e.split("/*")[0].trim()),sE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function oE(e){return"string"==typeof e&&e.split("/*")[0].includes("var(--")}const lE={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},cE={...lE,transform:e=>gP(0,1,e)},uE={...lE,default:1},dE=e=>Math.round(1e5*e)/1e5,hE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const pE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,mE=(e,t)=>n=>Boolean("string"==typeof n&&pE.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),fE=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[a,i,s,o]=r.match(hE);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(s),alpha:void 0!==o?parseFloat(o):1}},gE={...lE,transform:e=>Math.round((e=>gP(0,255,e))(e))},yE={test:mE("rgb","red"),parse:fE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+gE.transform(e)+", "+gE.transform(t)+", "+gE.transform(n)+", "+dE(cE.transform(r))+")"};const vE={test:mE("#"),parse:function(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}},transform:yE.transform},xE=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),bE=xE("deg"),wE=xE("%"),kE=xE("px"),NE=xE("vh"),jE=xE("vw"),_E=(()=>({...wE,parse:e=>wE.parse(e)/100,transform:e=>wE.transform(100*e)}))(),SE={test:mE("hsl","hue"),parse:fE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+wE.transform(dE(t))+", "+wE.transform(dE(n))+", "+dE(cE.transform(r))+")"},CE={test:e=>yE.test(e)||vE.test(e)||SE.test(e),parse:e=>yE.test(e)?yE.parse(e):SE.test(e)?SE.parse(e):vE.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?yE.transform(e):SE.transform(e),getAnimatableNone:e=>{const t=CE.parse(e);return t.alpha=0,CE.transform(t)}},PE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const EE="number",RE="color",OE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function TE(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const s=t.replace(OE,e=>(CE.test(e)?(r.color.push(i),a.push(RE),n.push(CE.parse(e))):e.startsWith("var(")?(r.var.push(i),a.push("var"),n.push(e)):(r.number.push(i),a.push(EE),n.push(parseFloat(e))),++i,"${}")).split("${}");return{values:n,split:s,indexes:r,types:a}}function ME(e){return TE(e).values}function AE(e){const{split:t,types:n}=TE(e),r=t.length;return e=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],void 0!==e[i]){const t=n[i];a+=t===EE?dE(e[i]):t===RE?CE.transform(e[i]):e[i]}return a}}const BE=e=>"number"==typeof e?0:CE.test(e)?CE.getAnimatableNone(e):e;const DE={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(hE))?void 0:t.length)||0)+((null==(n=e.match(PE))?void 0:n.length)||0)>0},parse:ME,createTransformer:AE,getAnimatableNone:function(e){const t=ME(e);return AE(e)(t.map(BE))}};function IE(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function LE(e,t){return n=>n>0?t:e}const FE=(e,t,n)=>e+(t-e)*n,$E=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},zE=[vE,yE,SE];function qE(e){const t=(n=e,zE.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===SE&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let a=0,i=0,s=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;a=IE(o,r,e+1/3),i=IE(o,r,e),s=IE(o,r,e-1/3)}else a=i=s=n;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*s),alpha:r}}(r)),r}const VE=(e,t)=>{const n=qE(e),r=qE(t);if(!n||!r)return LE(e,t);const a={...n};return e=>(a.red=$E(n.red,r.red,e),a.green=$E(n.green,r.green,e),a.blue=$E(n.blue,r.blue,e),a.alpha=FE(n.alpha,r.alpha,e),yE.transform(a))},WE=new Set(["none","hidden"]);function QE(e,t){return n=>FE(e,t,n)}function UE(e){return"number"==typeof e?QE:"string"==typeof e?iE(e)?LE:CE.test(e)?VE:GE:Array.isArray(e)?KE:"object"==typeof e?CE.test(e)?VE:HE:LE}function KE(e,t){const n=[...e],r=n.length,a=e.map((e,n)=>UE(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=a[t](e);return n}}function HE(e,t){const n={...e,...t},r={};for(const a in n)void 0!==e[a]&&void 0!==t[a]&&(r[a]=UE(e[a])(e[a],t[a]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const GE=(e,t)=>{const n=DE.createTransformer(t),r=TE(e),a=TE(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?WE.has(e)&&!a.values.length||WE.has(t)&&!r.values.length?function(e,t){return WE.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):jP(KE(function(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],s=e.indexes[i][r[i]],o=e.values[s]??0;n[a]=o,r[i]++}return n}(r,a),a.values),n):LE(e,t)};function YE(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return FE(e,t,n);return UE(e)(e,t)}const ZE=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>GP.update(t,e),stop:()=>YP(t),now:()=>ZP.isProcessing?ZP.timestamp:tE.now()}},XE=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=Math.round(1e4*e(i/(a-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},JE=2e4;function eR(e){let t=0;let n=e.next(t);for(;!n.done&&t<JE;)t+=50,n=e.next(t);return t>=JE?1/0:t}function tR(e,t,n){const r=Math.max(t-5,0);return EP(n-e(r),t-r)}const nR=100,rR=10,aR=1,iR=0,sR=800,oR=.3,lR=.3,cR={granular:.01,default:2},uR={granular:.005,default:.5},dR=.01,hR=10,pR=.05,mR=1,fR=.001;function gR({duration:e=sR,bounce:t=oR,velocity:n=iR,mass:r=aR}){let a,i,s=1-t;s=gP(pR,mR,s),e=gP(dR,hR,PP(e)),s<1?(a=t=>{const r=t*s,a=r*e,i=r-n,o=vR(t,s),l=Math.exp(-a);return fR-i/o*l},i=t=>{const r=t*s*e,i=r*n+n,o=Math.pow(s,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=vR(Math.pow(t,2),s);return(-a(t)+fR>0?-1:1)*((i-o)*l)/c}):(a=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,i=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let a=1;a<yR;a++)r-=e(r)/t(r);return r}(a,i,5/e);if(e=CP(e),isNaN(o))return{stiffness:nR,damping:rR,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*s*Math.sqrt(r*t),duration:e}}}const yR=12;function vR(e,t){return e*Math.sqrt(1-t*t)}const xR=["duration","bounce"],bR=["stiffness","damping","mass"];function wR(e,t){return t.some(t=>void 0!==e[t])}function kR(e=lR,t=oR){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:iR,stiffness:nR,damping:rR,mass:aR,isResolvedFromDuration:!1,...e};if(!wR(e,bR)&&wR(e,xR))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),a=r*r,i=2*gP(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:aR,stiffness:a,damping:i}}else{const n=gR(e);t={...t,...n,mass:aR},t.isResolvedFromDuration=!0}return t}({...n,velocity:-PP(n.velocity||0)}),m=h||0,f=c/(2*Math.sqrt(l*u)),g=s-i,y=PP(Math.sqrt(l/u)),v=Math.abs(g)<5;let x;if(r||(r=v?cR.granular:cR.default),a||(a=v?uR.granular:uR.default),f<1){const e=vR(y,f);x=t=>{const n=Math.exp(-f*y*t);return s-n*((m+f*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)x=e=>s-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(f*f-1);x=t=>{const n=Math.exp(-f*y*t),r=Math.min(e*t,300);return s-n*((m+f*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:p&&d||null,next:e=>{const t=x(e);if(p)o.done=e>=d;else{let n=0===e?m:0;f<1&&(n=0===e?CP(m):tR(x,e,t));const i=Math.abs(n)<=r,l=Math.abs(s-t)<=a;o.done=i&&l}return o.value=o.done?s:t,o},toString:()=>{const e=Math.min(eR(b),JE),t=XE(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function NR({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},p=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let m=n*t;const f=d+m,g=void 0===s?f:s(f);g!==f&&(m=g-d);const y=e=>-m*Math.exp(-e/r),v=e=>g+y(e),x=e=>{const t=y(e),n=v(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let b,w;const k=e=>{var t;(t=h.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(b=e,w=kR({keyframes:[h.value,p(h.value)],velocity:tR(v,e,h.value),damping:a,stiffness:i,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==b||(t=!0,x(e),k(e)),void 0!==b&&e>=b?w.next(e-b):(!t&&x(e),h)}}}function jR(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(t.length,1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],a=n||yP.mix||YE,i=e.length-1;for(let s=0;s<i;s++){let n=a(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||kP:t;n=jP(e,n)}r.push(n)}return r}(t,r,a),l=o.length,c=n=>{if(s&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const a=_P(e[r],e[r+1],n);return o[r](a)};return n?t=>c(gP(e[0],e[i-1],t)):c}function _R(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=_P(0,t,r);e.push(FE(n,1,a))}}(t,e.length-1),t}function SR({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(UP):UP(r),i={done:!1,value:t[0]},s=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:_R(t),e),o=jR(s,t,{ease:Array.isArray(a)?a:(l=t,c=a,l.map(()=>c||VP).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(i.value=o(t),i.done=t>=e,i)}}kR.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(eR(r),JE);return{type:"keyframes",ease:e=>r.next(a*e).value/t,duration:PP(a)}}(e,100,kR);return e.ease=t.ease,e.duration=CP(t.duration),e.type="keyframes",e};const CR=e=>null!==e;function PR(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(CR),s=a<0||t&&"loop"!==n&&t%2==1?0:i.length-1;return s&&void 0!==r?r:i[s]}const ER={decay:NR,inertia:NR,tween:SR,keyframes:SR,spring:kR};function RR(e){"string"==typeof e.type&&(e.type=ER[e.type])}class OR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const TR=e=>e/100;class MR extends OR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==tE.now()&&this.tick(tE.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;RR(e);const{type:t=SR,repeat:n=0,repeatDelay:r=0,repeatType:a,velocity:i=0}=e;let{keyframes:s}=e;const o=t||SR;o!==SR&&"number"!=typeof s[0]&&(this.mixKeyframes=jP(TR,YE(s[0],s[1])),s=[0,100]);const l=o({...e,keyframes:s});"mirror"===a&&(this.mirroredGenerator=o({...e,keyframes:[...s].reverse(),velocity:-i})),null===l.calculatedDuration&&(l.calculatedDuration=eR(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:s,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:p,onUpdate:m,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,x=n;if(u){const e=Math.min(this.currentTime,r)/s;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/s)):"mirror"===d&&(x=i)),v=gP(0,1,n)*s}const b=y?{done:!1,value:c[0]}:x.next(v);a&&(b.value=a(b.value));let{done:w}=b;y||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&p!==NR&&(b.value=PR(c,this.options,f,this.speed)),m&&m(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return PP(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+PP(e)}get time(){return PP(this.currentTime)}set time(e){var t;e=CP(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tE.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=PP(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=ZE,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const a=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=a):null!==this.holdTime?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tE.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const AR=e=>180*e/Math.PI,BR=e=>{const t=AR(Math.atan2(e[1],e[0]));return IR(t)},DR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:BR,rotateZ:BR,skewX:e=>AR(Math.atan(e[1])),skewY:e=>AR(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},IR=e=>((e%=360)<0&&(e+=360),e),LR=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),FR=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),$R={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:LR,scaleY:FR,scale:e=>(LR(e)+FR(e))/2,rotateX:e=>IR(AR(Math.atan2(e[6],e[5]))),rotateY:e=>IR(AR(Math.atan2(-e[2],e[0]))),rotateZ:BR,rotate:BR,skewX:e=>AR(Math.atan(e[4])),skewY:e=>AR(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function zR(e){return e.includes("scale")?1:0}function qR(e,t){if(!e||"none"===e)return zR(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=$R,a=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=DR,a=t}if(!a)return zR(t);const i=r[t],s=a[1].split(",").map(VR);return"function"==typeof i?i(s):s[i]}function VR(e){return parseFloat(e.trim())}const WR=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],QR=(()=>new Set(WR))(),UR=e=>e===lE||e===kE,KR=new Set(["x","y","z"]),HR=WR.filter(e=>!KR.has(e));const GR={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>qR(t,"x"),y:(e,{transform:t})=>qR(t,"y")};GR.translateX=GR.x,GR.translateY=GR.y;const YR=new Set;let ZR=!1,XR=!1,JR=!1;function eO(){if(XR){const e=Array.from(YR).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return HR.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var r;null==(r=e.getValue(t))||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}XR=!1,ZR=!1,YR.forEach(e=>e.complete(JR)),YR.clear()}function tO(){YR.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(XR=!0)})}class nO{constructor(e,t,n,r,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(YR.add(this),ZR||(ZR=!0,GP.read(tO),GP.resolveKeyframes(eO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const a=null==r?void 0:r.get(),i=e[e.length-1];if(void 0!==a)e[0]=a;else if(n&&t){const r=n.readValue(t,i);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=i),r&&void 0===a&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),YR.delete(this)}cancel(){"scheduled"===this.state&&(YR.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const rO=wP(()=>void 0!==window.ScrollTimeline),aO={};function iO(e,t){const n=wP(e);return()=>aO[t]??n()}const sO=iO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(APe){return!1}return!0},"linearEasing"),oO=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,lO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:oO([0,.65,.55,1]),circOut:oO([.55,0,1,.45]),backIn:oO([.31,.01,.66,-.59]),backOut:oO([.33,1.53,.69,.99])};function cO(e,t){return e?"function"==typeof e?sO()?XE(e,t):"ease-out":WP(e)?oO(e):Array.isArray(e)?e.map(e=>cO(e,t)||lO.easeOut):lO[e]:void 0}function uO(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:s="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const d=cO(o,a);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:"reverse"===s?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(u,h)}function dO(e){return"function"==typeof e&&"applyToOptions"in e}class hO extends OR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:s,onComplete:o}=e;this.isPseudoElement=Boolean(a),this.allowFlatten=i,this.options=e,e.type;const l=function({type:e,...t}){return dO(e)&&sO()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=uO(t,n,r,l,a),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const e=PR(r,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==o||o(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(APe){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const n=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return PP(Number(n))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+PP(e)}get time(){return PP(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=CP(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&(null==(n=this.animation.effect)||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&rO()?(this.animation.timeline=e,kP):t(this)}}const pO={anticipate:IP,backInOut:DP,circInOut:$P};function mO(e){"string"==typeof e.ease&&e.ease in pO&&(e.ease=pO[e.ease])}class fO extends hO{constructor(e){mO(e),RR(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:a,...i}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const s=new MR({...i,autoplay:!1}),o=Math.max(10,tE.now()-this.startTime),l=gP(0,10,o-10);t.setWithVelocity(s.sample(Math.max(0,o-l)).value,s.sample(o).value,l),s.stop()}}const gO=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!DE.test(e)&&"0"!==e||e.startsWith("url(")));function yO(e){e.duration=0,e.type="keyframes"}const vO=new Set(["opacity","clipPath","filter","transform"]),xO=wP(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class bO extends OR{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:i="loop",keyframes:s,name:o,motionValue:l,element:c,...u}){var d;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=tE.now();const h={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:a,repeatType:i,name:o,motionValue:l,element:c,...u},p=(null==c?void 0:c.KeyframeResolver)||nO;this.keyframeResolver=new p(s,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),o,l,c),null==(d=this.keyframeResolver)||d.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:a,type:i,velocity:s,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=tE.now(),function(e,t,n,r){const a=e[0];if(null===a)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],s=gO(a,t),o=gO(i,t);return!(!s||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||dO(n))&&r)}(e,a,i,s)||(!yP.instantAnimations&&o||null==c||c(PR(e,n,t)),e[0]=e[e.length-1],yO(n),n.repeat=0);const u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:a,repeatType:i,damping:s,type:o}=e;if(!((null==(t=null==n?void 0:n.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return xO()&&r&&vO.has(r)&&("transform"!==r||!c)&&!l&&!a&&"mirror"!==i&&0!==s&&"inertia"!==o}(u)?new fO({...u,element:u.motionValue.owner.current}):new MR(u);d.finished.then(()=>this.notifyFinished()).catch(kP),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),JR=!0,tO(),eO(),JR=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const wO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kO(e,t,n=1){const[r,a]=function(e){const t=wO.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return vP(e)?parseFloat(e):e}return iE(a)?kO(a,t,n+1):a}function NO(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const jO=new Set(["width","height","top","left","right","bottom",...WR]),_O=e=>t=>t.test(e),SO=[lE,kE,wE,bE,jE,NE,{test:e=>"auto"===e,parse:e=>e}],CO=e=>SO.find(_O(e));function PO(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||bP(e))}const EO=new Set(["brightness","contrast","saturate","opacity"]);function RO(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(hE)||[];if(!r)return e;const a=n.replace(r,"");let i=EO.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const OO=/\b([a-z-]*)\(.*?\)/gu,TO={...DE,getAnimatableNone:e=>{const t=e.match(OO);return t?t.map(RO).join(" "):e}},MO={...lE,transform:Math.round},AO={borderWidth:kE,borderTopWidth:kE,borderRightWidth:kE,borderBottomWidth:kE,borderLeftWidth:kE,borderRadius:kE,radius:kE,borderTopLeftRadius:kE,borderTopRightRadius:kE,borderBottomRightRadius:kE,borderBottomLeftRadius:kE,width:kE,maxWidth:kE,height:kE,maxHeight:kE,top:kE,right:kE,bottom:kE,left:kE,inset:kE,insetBlock:kE,insetBlockStart:kE,insetBlockEnd:kE,insetInline:kE,insetInlineStart:kE,insetInlineEnd:kE,padding:kE,paddingTop:kE,paddingRight:kE,paddingBottom:kE,paddingLeft:kE,paddingBlock:kE,paddingBlockStart:kE,paddingBlockEnd:kE,paddingInline:kE,paddingInlineStart:kE,paddingInlineEnd:kE,margin:kE,marginTop:kE,marginRight:kE,marginBottom:kE,marginLeft:kE,marginBlock:kE,marginBlockStart:kE,marginBlockEnd:kE,marginInline:kE,marginInlineStart:kE,marginInlineEnd:kE,backgroundPositionX:kE,backgroundPositionY:kE,...{rotate:bE,rotateX:bE,rotateY:bE,rotateZ:bE,scale:uE,scaleX:uE,scaleY:uE,scaleZ:uE,skew:bE,skewX:bE,skewY:bE,distance:kE,translateX:kE,translateY:kE,translateZ:kE,x:kE,y:kE,z:kE,perspective:kE,transformPerspective:kE,opacity:cE,originX:_E,originY:_E,originZ:kE},zIndex:MO,fillOpacity:cE,strokeOpacity:cE,numOctaves:MO},BO={...AO,color:CE,backgroundColor:CE,outlineColor:CE,fill:CE,stroke:CE,borderColor:CE,borderTopColor:CE,borderRightColor:CE,borderBottomColor:CE,borderLeftColor:CE,filter:TO,WebkitFilter:TO},DO=e=>BO[e];function IO(e,t){let n=DO(e);return n!==TO&&(n=DE),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const LO=new Set(["auto","none","0"]);class FO extends nO{constructor(e,t,n,r,a){super(e,t,n,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),iE(n))){const r=kO(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!jO.has(n)||2!==e.length)return;const[r,a]=e,i=CO(r),s=CO(a);if(oE(r)!==oE(a)&&GR[n])this.needsMeasurement=!0;else if(i!==s)if(UR(i)&&UR(s))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else GR[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||PO(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,a=0;for(;a<e.length&&!r;){const t=e[a];"string"==typeof t&&!LO.has(t)&&TE(t).values.length&&(r=e[a]),a++}if(r&&n)for(const i of t)e[i]=IO(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=GR[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=GR[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}const $O=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function zO(e){return xP(e)&&"offsetHeight"in e}class qO{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const n=tE.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=tE.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new SP);const n=this.events[e].add(t);return"change"===e?()=>{n(),GP.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=tE.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return EP(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function VO(e,t){return new qO(e,t)}const{schedule:WO}=HP(queueMicrotask,!1),QO={x:!1,y:!1};function UO(){return QO.x||QO.y}function KO(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const r=(null==n?void 0:n[e])??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function HO(e){return!("touch"===e.pointerType||UO())}const GO=(e,t)=>!!t&&(e===t||GO(e,t.parentElement)),YO=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,ZO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function XO(e){return ZO.has(e.tagName)||!0===e.isContentEditable}const JO=new WeakSet;function eT(e){return t=>{"Enter"===t.key&&e(t)}}function tT(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function nT(e){return YO(e)&&!UO()}function rT(e,t,n={}){const[r,a,i]=KO(e,n),s=e=>{const r=e.currentTarget;if(!nT(e))return;JO.add(r);const i=t(r,e),s=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),JO.has(r)&&JO.delete(r),nT(e)&&"function"==typeof i&&i(e,{success:t})},o=e=>{s(e,r===window||r===document||n.useGlobalTarget||GO(r,e.target))},l=e=>{s(e,!1)};window.addEventListener("pointerup",o,a),window.addEventListener("pointercancel",l,a)};return r.forEach(e=>{(n.useGlobalTarget?window:e).addEventListener("pointerdown",s,a),zO(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=eT(()=>{if(JO.has(n))return;tT(n,"down");const e=eT(()=>{tT(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>tT(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,a)),XO(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),i}function aT(e){return xP(e)&&"ownerSVGElement"in e}const iT=e=>Boolean(e&&e.getVelocity),sT=[...SO,CE,DE],oT=ct.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function lT(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function cT(...e){return ct.useCallback(function(...e){return t=>{let n=!1;const r=e.map(e=>{const r=lT(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():lT(e[t],null)}}}}(...e),e)}class uT extends ct.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=zO(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dT({children:e,isPresent:t,anchorX:n,root:r}){var a;const i=ct.useId(),s=ct.useRef(null),o=ct.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=ct.useContext(oT),c=(null==(a=e.props)?void 0:a.ref)??(null==e?void 0:e.ref),u=cT(s,c);return ct.useInsertionEffect(()=>{const{width:e,height:a,top:c,left:u,right:d}=o.current;if(t||!s.current||!e||!a)return;const h="left"===n?`left: ${u}`:`right: ${d}`;s.current.dataset.motionPopId=i;const p=document.createElement("style");l&&(p.nonce=l);const m=r??document.head;return m.appendChild(p),p.sheet&&p.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${a}px !important;\n            ${h}px !important;\n            top: ${c}px !important;\n          }\n        `),()=>{m.contains(p)&&m.removeChild(p)}},[t]),xt.jsx(uT,{isPresent:t,childRef:s,sizeRef:o,children:ct.cloneElement(e,{ref:u})})}const hT=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:s,anchorX:o,root:l})=>{const c=uP(pT),u=ct.useId();let d=!0,h=ct.useMemo(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:a,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;r&&r()},register:e=>(c.set(e,!1),()=>c.delete(e))}),[n,c,r]);return i&&d&&(h={...h}),ct.useMemo(()=>{c.forEach((e,t)=>c.set(t,!1))},[n]),ct.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),"popLayout"===s&&(e=xt.jsx(dT,{isPresent:n,anchorX:o,root:l,children:e})),xt.jsx(pP.Provider,{value:h,children:e})};function pT(){return new Map}function mT(e=!0){const t=ct.useContext(pP);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=ct.useId();ct.useEffect(()=>{if(e)return a(i)},[e]);const s=ct.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const fT=e=>e.key||"";function gT(e){const t=[];return ct.Children.forEach(e,e=>{ct.isValidElement(e)&&t.push(e)}),t}const yT=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:s=!1,anchorX:o="left",root:l})=>{const[c,u]=mT(s),d=ct.useMemo(()=>gT(e),[e]),h=s&&!c?[]:d.map(fT),p=ct.useRef(!0),m=ct.useRef(d),f=uP(()=>new Map),g=ct.useRef(new Set),[y,v]=ct.useState(d),[x,b]=ct.useState(d);hP(()=>{p.current=!1,m.current=d;for(let e=0;e<x.length;e++){const t=fT(x[e]);h.includes(t)?(f.delete(t),g.current.delete(t)):!0!==f.get(t)&&f.set(t,!1)}},[x,h.length,h.join("-")]);const w=[];if(d!==y){let e=[...d];for(let t=0;t<x.length;t++){const n=x[t],r=fT(n);h.includes(r)||(e.splice(t,0,n),w.push(n))}return"wait"===i&&w.length&&(e=w),b(gT(e)),v(d),null}const{forceRender:k}=ct.useContext(cP);return xt.jsx(xt.Fragment,{children:x.map(e=>{const y=fT(e),v=!(s&&!c)&&(d===x||h.includes(y));return xt.jsx(hT,{isPresent:v,initial:!(p.current&&!n)&&void 0,custom:t,presenceAffectsLayout:a,mode:i,root:l,onExitComplete:v?void 0:()=>{if(g.current.has(y))return;if(g.current.add(y),!f.has(y))return;f.set(y,!0);let e=!0;f.forEach(t=>{t||(e=!1)}),e&&(null==k||k(),b(m.current),s&&(null==u||u()),r&&r())},anchorX:o,children:e},y)})})},vT=ct.createContext({strict:!1}),xT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bT={};for(const DPe in xT)bT[DPe]={isEnabled:e=>xT[DPe].some(t=>!!e[t])};const wT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kT(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wT.has(e)}let NT=e=>!kT(e);try{"function"==typeof(jT=require("@emotion/is-prop-valid").default)&&(NT=e=>e.startsWith("on")?!kT(e):jT(e))}catch{}var jT;const _T=ct.createContext({});function ST(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function CT(e){return"string"==typeof e||Array.isArray(e)}const PT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ET=["initial",...PT];function RT(e){return ST(e.animate)||ET.some(t=>CT(e[t]))}function OT(e){return Boolean(RT(e)||e.variants)}function TT(e){const{initial:t,animate:n}=function(e,t){if(RT(e)){const{initial:t,animate:n}=e;return{initial:!1===t||CT(t)?t:void 0,animate:CT(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,ct.useContext(_T));return ct.useMemo(()=>({initial:t,animate:n}),[MT(t),MT(n)])}function MT(e){return Array.isArray(e)?e.join(" "):e}function AT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const BT={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!kE.test(e))return e;e=parseFloat(e)}return`${AT(e,t.target.x)}% ${AT(e,t.target.y)}%`}},DT={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=DE.parse(e);if(a.length>5)return r;const i=DE.createTransformer(e),s="number"!=typeof a[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;a[0+s]/=o,a[1+s]/=l;const c=FE(o,l,.5);return"number"==typeof a[2+s]&&(a[2+s]/=c),"number"==typeof a[3+s]&&(a[3+s]/=c),i(a)}},IT={borderRadius:{...BT,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:BT,borderTopRightRadius:BT,borderBottomLeftRadius:BT,borderBottomRightRadius:BT,boxShadow:DT};function LT(e,{layout:t,layoutId:n}){return QR.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!IT[e]||"opacity"===e)}const FT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$T=WR.length;function zT(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let s=!1,o=!1;for(const l in t){const e=t[l];if(QR.has(l))s=!0;else if(rE(l))a[l]=e;else{const t=$O(e,AO[l]);l.startsWith("origin")?(o=!0,i[l]=t):r[l]=t}}if(t.transform||(s||n?r.transform=function(e,t,n){let r="",a=!0;for(let i=0;i<$T;i++){const s=WR[i],o=e[s];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(s.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=$O(o,AO[s]);l||(a=!1,r+=`${FT[s]||s}(${e}) `),n&&(t[s]=e)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=i;r.transformOrigin=`${e} ${t} ${n}`}}const qT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function VT(e,t,n){for(const r in t)iT(t[r])||LT(r,n)||(e[r]=t[r])}function WT(e,t){const n={};return VT(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return ct.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return zT(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function QT(e,t){const n={},r=WT(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const UT={offset:"stroke-dashoffset",array:"stroke-dasharray"},KT={offset:"strokeDashoffset",array:"strokeDasharray"};const HT=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function GT(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:s=0,...o},l,c,u){if(zT(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(null==u?void 0:u.transformBox)??"fill-box",delete d.transformBox);for(const p of HT)void 0!==d[p]&&(h[p]=d[p],delete d[p]);void 0!==t&&(d.x=t),void 0!==n&&(d.y=n),void 0!==r&&(d.scale=r),void 0!==a&&function(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?UT:KT;e[i.offset]=kE.transform(-r);const s=kE.transform(t),o=kE.transform(n);e[i.array]=`${s} ${o}`}(d,a,i,s,!1)}const YT=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),ZT=e=>"string"==typeof e&&"svg"===e.toLowerCase();function XT(e,t,n,r){const a=ct.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return GT(n,t,ZT(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};VT(t,e.style,e),a.style={...t,...a.style}}return a}const JT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function eM(e){return"string"==typeof e&&!e.includes("-")&&!!(JT.indexOf(e)>-1||/[A-Z]/u.test(e))}function tM(e,t,n,{latestValues:r},a,i=!1,s){const o=(s??eM(e)?XT:QT)(t,r,a,e),l=function(e,t,n){const r={};for(const a in e)"values"===a&&"object"==typeof e.values||(NT(a)||!0===n&&kT(a)||!t&&!kT(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}(t,"string"==typeof e,i),c=e!==ct.Fragment?{...l,...o,ref:n}:{},{children:u}=t,d=ct.useMemo(()=>iT(u)?u.get():u,[u]);return ct.createElement(e,{...c,children:d})}function nM(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function rM(e,t,n,r){if("function"==typeof t){const[a,i]=nM(r);t=t(void 0!==n?n:e.custom,a,i)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[a,i]=nM(r);t=t(void 0!==n?n:e.custom,a,i)}return t}function aM(e){return iT(e)?e.get():e}function iM(e,t,n,r){const a={},i=r(e,{});for(const h in i)a[h]=aM(i[h]);let{initial:s,animate:o}=e;const l=RT(e),c=OT(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const d=u?o:s;if(d&&"boolean"!=typeof d&&!ST(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=rM(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(a[r]=e)}for(const r in e)a[r]=e[r]}}}return a}const sM=e=>(t,n)=>{const r=ct.useContext(_T),a=ct.useContext(pP),i=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:iM(n,r,a,e),renderState:t()}}(e,t,r,a);return n?i():uP(i)};function oM(e,t,n){var r;const{style:a}=e,i={};for(const s in a)(iT(a[s])||t.style&&iT(t.style[s])||LT(s,e)||void 0!==(null==(r=null==n?void 0:n.getValue(s))?void 0:r.liveStyle))&&(i[s]=a[s]);return i}const lM=sM({scrapeMotionValuesFromProps:oM,createRenderState:qT});function cM(e,t,n){const r=oM(e,t,n);for(const a in e)if(iT(e[a])||iT(t[a])){r[-1!==WR.indexOf(a)?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a]=e[a]}return r}const uM=sM({scrapeMotionValuesFromProps:cM,createRenderState:YT}),dM=Symbol.for("motionComponentSymbol");function hM(e,t,n){const r=ct.useRef(n);ct.useInsertionEffect(()=>{r.current=n});const a=ct.useRef(null);return ct.useCallback(n=>{var i;n&&(null==(i=e.onMount)||i.call(e,n)),t&&(n?t.mount(n):t.unmount());const s=r.current;if("function"==typeof s)if(n){const e=s(n);"function"==typeof e&&(a.current=e)}else a.current?(a.current(),a.current=null):s(n);else s&&(s.current=n)},[t])}const pM=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mM="data-"+pM("framerAppearId"),fM=ct.createContext({});function gM(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function yM(e,t,n,r,a,i){var s,o;const{visualElement:l}=ct.useContext(_T),c=ct.useContext(vT),u=ct.useContext(pP),d=ct.useContext(oT).reducedMotion,h=ct.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:l,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:d,isSVG:i}));const p=h.current,m=ct.useContext(fM);!p||p.projection||!a||"html"!==p.type&&"svg"!==p.type||function(e,t,n,r){const{layoutId:a,layout:i,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:vM(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:Boolean(s)||o&&gM(o),visualElement:e,animationType:"string"==typeof i?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(h.current,n,a,m);const f=ct.useRef(!1);ct.useInsertionEffect(()=>{p&&f.current&&p.update(n,u)});const g=n[mM],y=ct.useRef(Boolean(g)&&!(null==(s=window.MotionHandoffIsComplete)?void 0:s.call(window,g))&&(null==(o=window.MotionHasOptimisedAnimation)?void 0:o.call(window,g)));return hP(()=>{p&&(f.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),y.current&&p.animationState&&p.animationState.animateChanges())}),ct.useEffect(()=>{p&&(!y.current&&p.animationState&&p.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,g)}),y.current=!1),p.enteringChildren=void 0)}),p}function vM(e){if(e)return!1!==e.options.allowProjection?e.projection:vM(e.parent)}function xM(e,{forwardMotionProps:t=!1,type:n}={},r,a){r&&function(e){for(const t in e)bT[t]={...bT[t],...e[t]}}(r);const i=n?"svg"===n:eM(e),s=i?uM:lM;function o(n,r){let o;const l={...ct.useContext(oT),...n,layoutId:bM(n)},{isStatic:c}=l,u=TT(n),d=s(n,c);if(!c&&dP){ct.useContext(vT).strict;const t=function(e){const{drag:t,layout:n}=bT;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);o=t.MeasureLayout,u.visualElement=yM(e,d,l,a,t.ProjectionNode,i)}return xt.jsxs(_T.Provider,{value:u,children:[o&&u.visualElement?xt.jsx(o,{visualElement:u.visualElement,...l}):null,tM(e,n,hM(d,u.visualElement,r),d,c,t,i)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const l=ct.forwardRef(o);return l[dM]=e,l}function bM({layoutId:e}){const t=ct.useContext(cP).id;return t&&void 0!==e?t+"-"+e:e}function wM(e,t){if("undefined"==typeof Proxy)return xM;const n=new Map,r=(n,r)=>xM(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(a,i)=>"create"===i?r:(n.has(i)||n.set(i,xM(i,void 0,e,t)),n.get(i))})}function kM({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function NM(e){return void 0===e||1===e}function jM({scale:e,scaleX:t,scaleY:n}){return!NM(e)||!NM(t)||!NM(n)}function _M(e){return jM(e)||SM(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function SM(e){return CM(e.x)||CM(e.y)}function CM(e){return e&&"0%"!==e}function PM(e,t,n){return n+t*(e-n)}function EM(e,t,n,r,a){return void 0!==a&&(e=PM(e,a,r)),PM(e,n,r)+t}function RM(e,t=0,n=1,r,a){e.min=EM(e.min,t,n,r,a),e.max=EM(e.max,t,n,r,a)}function OM(e,{x:t,y:n}){RM(e.x,t.translate,t.scale,t.originPoint),RM(e.y,n.translate,n.scale,n.originPoint)}const TM=.999999999999,MM=1.0000000000001;function AM(e,t){e.min=e.min+t,e.max=e.max+t}function BM(e,t,n,r,a=.5){RM(e,t,n,FE(e.min,e.max,a),r)}function DM(e,t){BM(e.x,t.x,t.scaleX,t.scale,t.originX),BM(e.y,t.y,t.scaleY,t.scale,t.originY)}function IM(e,t){return kM(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const LM=()=>({x:{min:0,max:0},y:{min:0,max:0}}),FM={current:null},$M={current:!1};const zM=new WeakMap;const qM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VM{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:a,visualState:i},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=tE.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,GP.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=s,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=RT(t),this.isVariantNode=OT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in u){const e=u[d];void 0!==o[d]&&iT(e)&&e.set(o[d])}}mount(e){var t;this.current=e,zM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:($M.current||function(){if($M.current=!0,dP)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>FM.current=e.matches;e.addEventListener("change",t),t()}else FM.current=!1}(),this.shouldReduceMotion=FM.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),YP(this.notifyUpdate),YP(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=QR.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&GP.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in bT){const t=bT[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<qM.length;n++){const t=qM[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const a=t[r],i=n[r];if(iT(a))e.addValue(r,a);else if(iT(i))e.addValue(r,VO(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(a):t.hasAnimated||t.set(a)}else{const t=e.getStaticValue(r);e.addValue(r,VO(void 0!==t?t:a,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=VO(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return null!=n&&("string"==typeof n&&(vP(n)||bP(n))?n=parseFloat(n):(r=n,!sT.find(_O(r))&&DE.test(t)&&(n=IO(e,t))),this.setBaseTarget(e,iT(n)?n.get():n)),iT(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const a=rM(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);a&&(r=a[e])}if(n&&void 0!==r)return r;const a=this.getBaseTargetFromProps(this.props,e);return void 0===a||iT(a)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new SP),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){WO.render(this.render)}}class WM extends VM{constructor(){super(...arguments),this.KeyframeResolver=FO}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;iT(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function QM(e,{style:t,vars:n},r,a){const i=e.style;let s;for(s in t)i[s]=t[s];for(s in null==a||a.applyProjectionStyles(i,r),n)i.setProperty(s,n[s])}class UM extends WM{constructor(){super(...arguments),this.type="html",this.renderInstance=QM}readValueFromInstance(e,t){var n,r;if(QR.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?zR(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return qR(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),a=(rE(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof a?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return IM(e,t)}build(e,t,n){zT(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return oM(e,t,n)}}const KM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class HM extends WM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=LM}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(QR.has(t)){const e=DO(t);return e&&e.default||0}return t=KM.has(t)?t:pM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return cM(e,t,n)}build(e,t,n){GT(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){QM(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(KM.has(a)?a:pM(a),t.attrs[a])}(e,t,0,r)}mount(e){this.isSVGTag=ZT(e.tagName),super.mount(e)}}const GM=(e,t)=>t.isSVG??eM(e)?new HM(t):new UM(t,{allowProjection:e!==ct.Fragment});function YM(e,t,n){const r=e.getProps();return rM(r,t,void 0!==n?n:r.custom,e)}const ZM=e=>Array.isArray(e);function XM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,VO(n))}function JM(e){return ZM(e)?e[e.length-1]||0:e}function eA(e,t){const n=e.getValue("willChange");if(r=n,Boolean(iT(r)&&r.add))return n.add(t);if(!n&&yP.WillChange){const n=new yP.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function tA(e){return e.props[mM]}const nA=e=>null!==e;const rA={type:"spring",stiffness:500,damping:25,restSpeed:10},aA={type:"keyframes",duration:.8},iA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sA=(e,{keyframes:t})=>t.length>2?aA:QR.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:rA:iA;const oA=(e,t,n,r={},a,i)=>s=>{const o=NO(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=CP(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:a};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length})(o)||Object.assign(u,sA(e,u)),u.duration&&(u.duration=CP(u.duration)),u.repeatDelay&&(u.repeatDelay=CP(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(yO(u),0===u.delay&&(d=!0)),(yP.instantAnimations||yP.skipAnimations)&&(d=!0,yO(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!i&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const r=e.filter(nA);return r[t&&"loop"!==n&&t%2==1?0:r.length-1]}(u.keyframes,o);if(void 0!==e)return void GP.update(()=>{u.onUpdate(e),u.onComplete()})}return o.isSync?new MR(u):new bO(u)};function lA({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function cA(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...o}=t;r&&(i=r);const l=[],c=a&&e.animationState&&e.animationState.getState()[a];for(const u in o){const t=e.getValue(u,e.latestValues[u]??null),r=o[u];if(void 0===r||c&&lA(c,u))continue;const a={delay:n,...NO(i||{},u)},s=t.get();if(void 0!==s&&!t.isAnimating&&!Array.isArray(r)&&r===s&&!a.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=tA(e);if(t){const e=window.MotionHandoffAnimation(t,u,GP);null!==e&&(a.startTime=e,d=!0)}}eA(e,u),t.start(oA(u,t,r,e.shouldReduceMotion&&jO.has(u)?{type:!1}:a,e,d));const h=t.animation;h&&l.push(h)}return s&&Promise.all(l).then(()=>{GP.update(()=>{s&&function(e,t){const n=YM(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const s in i)XM(e,s,JM(i[s]))}(e,s)})}),l}function uA(e,t,n,r=0,a=1){const i=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),s=e.size,o=(s-1)*r;return"function"==typeof n?n(i,s):1===a?i*r:o-i*r}function dA(e,t,n={}){var r;const a=YM(e,t,"exit"===n.type?null==(r=e.presenceContext)?void 0:r.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(i=n.transitionOverride);const s=a?()=>Promise.all(cA(e,a,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:a=0,staggerChildren:s,staggerDirection:o}=i;return function(e,t,n=0,r=0,a=0,i=1,s){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(dA(l,t,{...s,delay:n+("function"==typeof r?0:r)+uA(e.variantChildren,l,r,a,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,r,a,s,o,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[e,t]="beforeChildren"===l?[s,o]:[o,s];return e().then(()=>t())}return Promise.all([s(),o(n.delay)])}function hA(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const pA=ET.length;function mA(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&mA(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<pA;n++){const r=ET[n],a=e.props[r];(CT(a)||!1===a)&&(t[r]=a)}return t}const fA=[...PT].reverse(),gA=PT.length;function yA(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const a=t.map(t=>dA(e,t,n));r=Promise.all(a)}else if("string"==typeof t)r=dA(e,t,n);else{const a="function"==typeof t?YM(e,t,n.custom):t;r=Promise.all(cA(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function vA(e){let t=yA(e),n=wA(),r=!0;const a=t=>(n,r)=>{var a;const i=YM(e,r,"exit"===t?null==(a=e.presenceContext)?void 0:a.custom:void 0);if(i){const{transition:e,transitionEnd:t,...r}=i;n={...n,...r,...t}}return n};function i(i){const{props:s}=e,o=mA(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<gA;t++){const h=fA[t],p=n[h],m=void 0!==s[h]?s[h]:o[h],f=CT(m),g=h===i?p.isActive:null;!1===g&&(d=t);let y=m===o[h]&&m!==s[h]&&f;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys={...u},!p.isActive&&null===g||!m&&!p.prevProp||ST(m)||"boolean"==typeof m)continue;const v=xA(p.prevProp,m);let x=v||h===i&&p.isActive&&!y&&f||t>d&&f,b=!1;const w=Array.isArray(m)?m:[m];let k=w.reduce(a(h),{});!1===g&&(k={});const{prevResolvedValues:N={}}=p,j={...N,...k},_=t=>{x=!0,c.has(t)&&(b=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in j){const t=k[e],n=N[e];if(u.hasOwnProperty(e))continue;let r=!1;r=ZM(t)&&ZM(n)?!hA(t,n):t!==n,r?null!=t?_(e):c.add(e):void 0!==t&&c.has(e)?_(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=k,p.isActive&&(u={...u,...k}),r&&e.blockInitialAnimation&&(x=!1);const S=y&&v;x&&(!S||b)&&l.push(...w.map(t=>{const n={type:h};if("string"==typeof t&&r&&!S&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,a=YM(r,t);if(r.enteringChildren&&a){const{delayChildren:t}=a.transition||{};n.delay=uA(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!=typeof s.initial){const n=YM(e,Array.isArray(s.initial)?s.initial[0]:s.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),a=e.getValue(n);a&&(a.liveStyle=!0),t[n]=r??null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,r){var a;if(n[t].isActive===r)return Promise.resolve();null==(a=e.variantChildren)||a.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,r)}),n[t].isActive=r;const s=i(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=wA()}}}function xA(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!hA(t,e)}function bA(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wA(){return{animate:bA(!0),whileInView:bA(),whileHover:bA(),whileTap:bA(),whileDrag:bA(),whileFocus:bA(),exit:bA()}}class kA{constructor(e){this.isMounted=!1,this.node=e}update(){}}let NA=0;const jA={animation:{Feature:class extends kA{constructor(e){super(e),e.animationState||(e.animationState=vA(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ST(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends kA{constructor(){super(...arguments),this.id=NA++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function _A(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function SA(e){return{point:{x:e.pageX,y:e.pageY}}}function CA(e,t,n,r){return _A(e,t,(e=>t=>YO(t)&&e(t,SA(t)))(n),r)}function PA(e){return e.max-e.min}function EA(e,t,n,r=.5){e.origin=r,e.originPoint=FE(t.min,t.max,e.origin),e.scale=PA(n)/PA(t),e.translate=FE(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function RA(e,t,n,r){EA(e.x,t.x,n.x,r?r.originX:void 0),EA(e.y,t.y,n.y,r?r.originY:void 0)}function OA(e,t,n){e.min=n.min+t.min,e.max=e.min+PA(t)}function TA(e,t,n){e.min=t.min-n.min,e.max=e.min+PA(t)}function MA(e,t,n){TA(e.x,t.x,n.x),TA(e.y,t.y,n.y)}function AA(e){return[e("x"),e("y")]}const BA=({current:e})=>e?e.ownerDocument.defaultView:null,DA=(e,t)=>Math.abs(e-t);const IA=new Set(["auto","scroll"]);class LA{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3,element:s}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=zA(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=DA(e.x,t.x),r=DA(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:a}=ZP;this.history.push({...r,timestamp:a});const{onStart:i,onMove:s}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=FA(t,this.transformPagePoint),GP.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:a}=this.handlers;if(!this.dragSnapToOrigin&&this.startEvent||a&&a(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=zA("pointercancel"===e.type?this.lastMoveEventInfo:FA(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!YO(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=r||window;const o=FA(SA(e),this.transformPagePoint),{point:l}=o,{timestamp:c}=ZP;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,zA(o,this.history)),this.removeListeners=jP(CA(this.contextWindow,"pointermove",this.handlePointerMove),CA(this.contextWindow,"pointerup",this.handlePointerUp),CA(this.contextWindow,"pointercancel",this.handlePointerUp)),s&&this.startScrollTracking(s)}startScrollTracking(e){let t=e.parentElement;for(;t;){const e=getComputedStyle(t);(IA.has(e.overflowX)||IA.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const n=e===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a=r.x-t.x,i=r.y-t.y;0===a&&0===i||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a,this.lastMoveEventInfo.point.y+=i):this.history.length>0&&(this.history[0].x-=a,this.history[0].y-=i),this.scrollPositions.set(e,r),GP.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),YP(this.updatePoint)}}function FA(e,t){return t?{point:t(e.point)}:e}function $A(e,t){return{x:e.x-t.x,y:e.y-t.y}}function zA({point:e},t){return{point:e,delta:$A(e,VA(t)),offset:$A(e,qA(t)),velocity:WA(t,.1)}}function qA(e){return e[0]}function VA(e){return e[e.length-1]}function WA(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=VA(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>CP(t)));)n--;if(!r)return{x:0,y:0};const i=PP(a.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const s={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function QA(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function UA(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const KA=.35;function HA(e,t,n){return{min:GA(e,t),max:GA(e,n)}}function GA(e,t){return"number"==typeof e?e:e[t]||0}const YA=new WeakMap;class ZA{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:a}=this.getProps();this.panSession=new LA(e,{onSessionStart:e=>{t?(this.stopAnimation(),this.snapToCursor(SA(e).point)):this.pauseAnimation()},onStart:(e,t)=>{this.stopAnimation();const{drag:n,dragPropagation:r,onDragStart:a}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?QO[i]?null:(QO[i]=!0,()=>{QO[i]=!1}):QO.x||QO.y?null:(QO.x=QO.y=!0,()=>{QO.x=QO.y=!1}),!this.openDragLock))return;var i;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),AA(e=>{let t=this.getAxisMotionValue(e).get()||0;if(wE.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=PA(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),a&&GP.postRender(()=>a(e,t)),eA(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:a,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:s}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&a&&a(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>AA(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:a,distanceThreshold:n,contextWindow:BA(this.visualElement),element:this.visualElement.current})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&GP.postRender(()=>s(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!XA(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?FE(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?FE(n,e,r.max):Math.min(e,n)),e}(i,this.constraints[e],this.elastic[e])),a.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,a=this.constraints;t&&gM(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,{top:t,left:n,bottom:r,right:a}){return{x:QA(e.x,n,a),y:QA(e.y,t,r)}}(r.layoutBox,t),this.elastic=function(e=KA){return!1===e?e=0:!0===e&&(e=KA),{x:HA(e,"left","right"),y:HA(e,"top","bottom")}}(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&AA(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!gM(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=function(e,t,n){const r=IM(e,n),{scroll:a}=t;return a&&(AM(r.x,a.offset.x),AM(r.y,a.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:UA(e.x,t.x),y:UA(e.y,t.y)}}(r.layout.layoutBox,a);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=kM(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:s}=this.getProps(),o=this.constraints||{},l=AA(s=>{if(!XA(s,t,this.currentDirection))return;let l=o&&o[s]||{};i&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...a,...l};return this.startAxisValueAnimation(s,d)});return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return eA(this.visualElement,e),n.start(oA(e,n,0,t,this.visualElement,!1))}stopAnimation(){AA(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){AA(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){AA(t=>{const{drag:n}=this.getProps();if(!XA(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t],s=a.get()||0;a.set(e[t]-FE(n,i,.5)+s)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!gM(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};AA(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=PA(e),a=PA(t);return a>r?n=_P(t.min,t.max-r,e.min):r>a&&(n=_P(e.min,e.max-a,t.min)),gP(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),AA(t=>{if(!XA(t,e,null))return;const n=this.getAxisMotionValue(t),{min:a,max:i}=this.constraints[t];n.set(FE(a,i,r[t]))})}addListeners(){if(!this.visualElement.current)return;YA.set(this.visualElement,this);const e=CA(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&!XO(e.target)&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();gM(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),GP.read(t);const a=_A(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(AA(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{a(),e(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:i=KA,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:i,dragMomentum:s}}}function XA(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const JA=e=>(t,n)=>{e&&GP.postRender(()=>e(t,n))};const eB={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let tB=!1;class nB extends ct.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),n&&n.register&&r&&n.register(a),tB&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),eB.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:a}=this.props,{projection:i}=n;return i?(i.isPresent=a,tB=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==a?i.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?i.promote():i.relegate()||GP.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),WO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;tB=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function rB(e){const[t,n]=mT(),r=ct.useContext(cP);return xt.jsx(nB,{...e,layoutGroup:r,switchLayoutGroup:ct.useContext(fM),isPresent:t,safeToRemove:n})}const aB=(e,t)=>e.depth-t.depth;class iB{constructor(){this.children=[],this.isDirty=!1}add(e){mP(this.children,e),this.isDirty=!0}remove(e){fP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(aB),this.isDirty=!1,this.children.forEach(e)}}const sB=["TopLeft","TopRight","BottomLeft","BottomRight"],oB=sB.length,lB=e=>"string"==typeof e?parseFloat(e):e,cB=e=>"number"==typeof e||kE.test(e);function uB(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const dB=pB(0,.5,FP),hB=pB(.5,.95,kP);function pB(e,t,n){return r=>r<e?0:r>t?1:n(_P(e,t,r))}function mB(e,t){e.min=t.min,e.max=t.max}function fB(e,t){mB(e.x,t.x),mB(e.y,t.y)}function gB(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function yB(e,t,n,r,a){return e=PM(e-=t,1/n,r),void 0!==a&&(e=PM(e,1/a,r)),e}function vB(e,t,[n,r,a],i,s){!function(e,t=0,n=1,r=.5,a,i=e,s=e){wE.test(t)&&(t=parseFloat(t),t=FE(s.min,s.max,t/100)-s.min);if("number"!=typeof t)return;let o=FE(i.min,i.max,r);e===i&&(o-=t),e.min=yB(e.min,t,n,o,a),e.max=yB(e.max,t,n,o,a)}(e,t[n],t[r],t[a],t.scale,i,s)}const xB=["x","scaleX","originX"],bB=["y","scaleY","originY"];function wB(e,t,n,r){vB(e.x,t,xB,n?n.x:void 0,r?r.x:void 0),vB(e.y,t,bB,n?n.y:void 0,r?r.y:void 0)}function kB(e){return 0===e.translate&&1===e.scale}function NB(e){return kB(e.x)&&kB(e.y)}function jB(e,t){return e.min===t.min&&e.max===t.max}function _B(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function SB(e,t){return _B(e.x,t.x)&&_B(e.y,t.y)}function CB(e){return PA(e.x)/PA(e.y)}function PB(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class EB{constructor(){this.members=[]}add(e){mP(this.members,e),e.scheduleRender()}remove(e){if(fP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const RB=["","X","Y","Z"];let OB=0;function TB(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function MB(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=tA(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",GP,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&MB(r)}function AB({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=OB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IB),this.nodes.forEach(WB),this.nodes.forEach(QB),this.nodes.forEach(LB)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new iB)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new SP),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=aT(t)&&!(aT(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:r,layout:a,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||r)&&(this.isLayoutDirty=!0),e){let n,r=0;const a=()=>this.root.updateBlockedByResize=!1;GP.read(()=>{r=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=tE.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(YP(r),e(i-t))};return GP.setup(r,!0),()=>YP(r)}(a,250),eB.hasAnimatedSinceResize&&(eB.hasAnimatedSinceResize=!1,this.nodes.forEach(VB)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||a)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||i.getDefaultTransition()||ZB,{onLayoutAnimationStart:s,onLayoutAnimationComplete:o}=i.getProps(),l=!this.targetLayout||!SB(this.targetLayout,r),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...NO(a,"layout"),onPlay:s,onComplete:o};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||VB(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),YP(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UB),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){const e=this.path[a];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach($B);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(zB);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(qB),this.nodes.forEach(BB),this.nodes.forEach(DB)):this.nodes.forEach(zB),this.clearAllSnapshots();const e=tE.now();ZP.delta=gP(0,1e3/60,e-ZP.timestamp),ZP.timestamp=e,ZP.isProcessing=!0,XP.update.process(ZP),XP.preRender.process(ZP),XP.render.process(ZP),ZP.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,WO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FB),this.sharedNodes.forEach(KB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,GP.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){GP.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||PA(this.snapshot.measuredBox.x)||PA(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!NB(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||_M(this.latestValues)||i)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),eD((r=n).x),eD(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(nD))){const{scroll:e}=this.root;e&&(AM(n.x,e.offset.x),AM(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(fB(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:a,options:i}=t;t!==this.root&&a&&i.layoutScroll&&(a.wasRoot&&fB(n,e),AM(n.x,a.offset.x),AM(n.y,a.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};fB(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&DM(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),_M(e.latestValues)&&DM(n,e.latestValues)}return _M(this.latestValues)&&DM(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};fB(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!_M(e.latestValues))continue;jM(e.latestValues)&&e.updateSnapshot();const r=LM();fB(r,e.measurePageBox()),wB(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return _M(this.latestValues)&&wB(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ZP.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:a,layoutId:i}=this.options;if(!this.layout||!a&&!i)return;this.resolvedRelativeTargetAt=ZP.timestamp;const s=this.getClosestProjectingParent();var o,l,c;(s&&this.linkedParentVersion!==s.layoutVersion&&!s.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(s&&s.layout?this.createRelativeTarget(s,this.layout.layoutBox,s.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,l=this.relativeTarget,c=this.relativeParent.target,OA(o.x,l.x,c.x),OA(o.y,l.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):fB(this.target,this.layout.layoutBox),OM(this.target,this.targetDelta)):fB(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,s&&Boolean(s.resumingFrom)===Boolean(this.resumingFrom)&&!s.options.layoutScroll&&s.target&&1!==this.animationProgress?this.createRelativeTarget(s,this.target,s.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(this.parent&&!jM(this.parent.latestValues)&&!SM(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,n){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},MA(this.relativeTargetOrigin,t,n),fB(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===ZP.timestamp&&(r=!1),r)return;const{layout:a,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!a&&!i)return;fB(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,o=this.treeScale.y;!function(e,t,n,r=!1){const a=n.length;if(!a)return;let i,s;t.x=t.y=1;for(let o=0;o<a;o++){i=n[o],s=i.projectionDelta;const{visualElement:a}=i.options;a&&a.props.style&&"contents"===a.props.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&DM(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,OM(e,s)),r&&_M(i.latestValues)&&DM(e,i.latestValues))}t.x<MM&&t.x>TM&&(t.x=1),t.y<MM&&t.y>TM&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(gB(this.prevProjectionDelta.x,this.projectionDelta.x),gB(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),RA(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===s&&this.treeScale.y===o&&PB(this.projectionDelta.x,this.prevProjectionDelta.x)&&PB(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},a={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(YB));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,p,m;HB(i.x,e.x,n),HB(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(MA(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),l=this.relativeTarget,h=this.relativeTargetOrigin,p=s,m=n,GB(l.x,h.x,p.x,m),GB(l.y,h.y,p.y,m),d&&function(e,t){return jB(e.x,t.x)&&jB(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),fB(d,this.relativeTarget)),o&&(this.animationValues=a,function(e,t,n,r,a,i){a?(e.opacity=FE(0,n.opacity??1,dB(r)),e.opacityExit=FE(t.opacity??1,0,hB(r))):i&&(e.opacity=FE(t.opacity??1,n.opacity??1,r));for(let s=0;s<oB;s++){const a=`border${sB[s]}Radius`;let i=uB(t,a),o=uB(n,a);void 0===i&&void 0===o||(i||(i=0),o||(o=0),0===i||0===o||cB(i)===cB(o)?(e[a]=Math.max(FE(lB(i),lB(o),r),0),(wE.test(o)||wE.test(i))&&(e[a]+="%")):e[a]=o)}(t.rotate||n.rotate)&&(e.rotate=FE(t.rotate||0,n.rotate||0,r))}(a,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n,r;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(r=null==(n=this.resumingFrom)?void 0:n.currentAnimation)||r.stop(),this.pendingAnimation&&(YP(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=GP.update(()=>{eB.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=VO(0)),this.currentAnimation=function(e,t,n){const r=iT(e)?e:VO(e);return r.start(oA("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:a}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&tD(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=PA(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=PA(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}fB(t,n),DM(t,a),RA(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new EB);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&TB("z",e,r,this.animationValues);for(let a=0;a<RB.length;a++)TB(`rotate${RB[a]}`,e,r,this.animationValues),TB(`skew${RB[a]}`,e,r,this.animationValues);e.render();for(const a in r)e.setStaticValue(a,r[a]),this.animationValues&&(this.animationValues[a]=r[a]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=aM(null==t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=aM(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!_M(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const a=r.animationValues||r.latestValues;this.applyTransformsToTarget();let i=function(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,s=(null==n?void 0:n.z)||0;if((a||i||s)&&(r=`translate3d(${a}px, ${i}px, ${s}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:a,rotateY:i,skewX:s,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),a&&(r+=`rotateX(${a}deg) `),i&&(r+=`rotateY(${i}deg) `),s&&(r+=`skewX(${s}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,a);n&&(i=n(a,i)),e.transform=i;const{x:s,y:o}=this.projectionDelta;e.transformOrigin=`${100*s.origin}% ${100*o.origin}% 0`,r.animationValues?e.opacity=r===this?a.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:e.opacity=r===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const l in IT){if(void 0===a[l])continue;const{correct:t,applyTo:n,isCSSVariable:s}=IT[l],o="none"===i?a[l]:t(a[l],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=o}else s?this.options.visualElement.renderState.vars[l]=o:e[l]=o}this.options.layoutId&&(e.pointerEvents=r===this?aM(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach($B),this.root.sharedNodes.clear()}}}function BB(e){e.updateLayout()}function DB(e){var t;const n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:a}=e.options,i=n.source!==e.layout.source;"size"===a?AA(e=>{const r=i?n.measuredBox[e]:n.layoutBox[e],a=PA(r);r.min=t[e].min,r.max=r.min+a}):tD(a,n.layoutBox,t)&&AA(r=>{const a=i?n.measuredBox[r]:n.layoutBox[r],s=PA(t[r]);a.max=a.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)});const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};RA(s,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?RA(o,e.applyTransform(r,!0),n.measuredBox):RA(o,t,n.layoutBox);const l=!NB(s);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:a,layout:i}=r;if(a&&i){const s={x:{min:0,max:0},y:{min:0,max:0}};MA(s,n.layoutBox,a.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};MA(o,t,i.layoutBox),SB(s,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function IB(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function LB(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function FB(e){e.clearSnapshot()}function $B(e){e.clearMeasurements()}function zB(e){e.isLayoutDirty=!1}function qB(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function VB(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function WB(e){e.resolveTargetDelta()}function QB(e){e.calcProjection()}function UB(e){e.resetSkewAndRotation()}function KB(e){e.removeLeadSnapshot()}function HB(e,t,n){e.translate=FE(t.translate,0,n),e.scale=FE(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function GB(e,t,n,r){e.min=FE(t.min,n.min,r),e.max=FE(t.max,n.max,r)}function YB(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const ZB={duration:.45,ease:[.4,0,.1,1]},XB=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),JB=XB("applewebkit/")&&!XB("chrome/")?Math.round:kP;function eD(e){e.min=JB(e.min),e.max=JB(e.max)}function tD(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=CB(t),a=CB(n),i=.2,!(Math.abs(r-a)<=i));var r,a,i}function nD(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const rD=AB({attachResizeListener:(e,t)=>_A(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aD={current:void 0},iD=AB({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!aD.current){const e=new rD({});e.mount(window),e.setOptions({layoutScroll:!0}),aD.current=e}return aD.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),sD={pan:{Feature:class extends kA{constructor(){super(...arguments),this.removePointerDownListener=kP}onPointerDown(e){this.session=new LA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:JA(e),onStart:JA(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&GP.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=CA(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends kA{constructor(e){super(e),this.removeGroupControls=kP,this.removeListeners=kP,this.controls=new ZA(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kP}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:iD,MeasureLayout:rB}};function oD(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const a=r["onHover"+n];a&&GP.postRender(()=>a(t,SA(t)))}function lD(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const a=r["onTap"+("End"===n?"":n)];a&&GP.postRender(()=>a(t,SA(t)))}const cD=new WeakMap,uD=new WeakMap,dD=e=>{const t=cD.get(e.target);t&&t(e)},hD=e=>{e.forEach(dD)};function pD(e,t,n){const r=function({root:e,...t}){const n=e||document;uD.has(n)||uD.set(n,{});const r=uD.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(hD,{root:e,...t})),r[a]}(t);return cD.set(e,n),r.observe(e),()=>{cD.delete(e),r.unobserve(e)}}const mD={some:0,all:1};const fD={inView:{Feature:class extends kA{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:a}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:mD[r]};return pD(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,a&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends kA{mount(){const{current:e}=this.node;e&&(this.unmount=rT(e,(e,t)=>(lD(this.node,t,"Start"),(e,{success:t})=>lD(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends kA{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(APe){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jP(_A(this.node.current,"focus",()=>this.onFocus()),_A(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends kA{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,a,i]=KO(e,n),s=e=>{if(!HO(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const i=e=>{HO(e)&&(r(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,a)};return r.forEach(e=>{e.addEventListener("pointerenter",s,a)}),i}(e,(e,t)=>(oD(this.node,t,"Start"),e=>oD(this.node,e,"End"))))}unmount(){}}}},gD=wM({...jA,...fD,...sD,...{layout:{ProjectionNode:iD,MeasureLayout:rB}}},GM),yD=mm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),vD=ct.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const s=r?Yh:"button";return xt.jsx(s,{className:Cy(yD({variant:t,size:n,className:e})),ref:i,...a})});vD.displayName="Button";const xD=()=>{const{isInstalled:e,isIOS:t,promptInstall:n,canShowPrompt:r}=function(){const[e,t]=ct.useState(null),[n,r]=ct.useState(!1),[a,i]=ct.useState(!1),[s,o]=ct.useState(!1);return ct.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return void i(!0);const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;o(e);const n=e=>{e.preventDefault(),t(e),r(!0)},a=()=>{i(!0),r(!1),t(null)};return window.addEventListener("beforeinstallprompt",n),window.addEventListener("appinstalled",a),()=>{window.removeEventListener("beforeinstallprompt",n),window.removeEventListener("appinstalled",a)}},[]),{isInstallable:n,isInstalled:a,isIOS:s,promptInstall:ct.useCallback(async()=>{if(!e)return!1;try{await e.prompt();const{outcome:n}=await e.userChoice;return"accepted"===n&&(i(!0),r(!1)),t(null),"accepted"===n}catch(n){return!1}},[e]),canShowPrompt:n||s&&!a}}(),[a,i]=ct.useState(!1),[s,o]=ct.useState(!1);ct.useEffect(()=>{const t=localStorage.getItem("pwa-prompt-dismissed");if(t){const e=parseInt(t,10);if(Date.now()-e<6048e5)return void o(!0)}if(r&&!e){const e=setTimeout(()=>i(!0),3e3);return()=>clearTimeout(e)}},[r,e]);return e||s||!a?null:xt.jsx(yT,{children:xt.jsx(gD.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:xt.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-primary/30 bg-card/95 backdrop-blur-xl shadow-2xl",children:[xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-transparent to-primary/5 pointer-events-none"}),xt.jsx("button",{onClick:()=>{i(!1),o(!0),localStorage.setItem("pwa-prompt-dismissed",Date.now().toString())},className:"absolute top-3 right-3 p-1.5 rounded-full bg-muted/50 hover:bg-muted text-muted-foreground hover:text-foreground transition-colors z-10",children:xt.jsx(Mg,{className:"h-4 w-4"})}),xt.jsxs("div",{className:"relative p-5",children:[xt.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[xt.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary/20 border border-primary/30 flex items-center justify-center flex-shrink-0",children:xt.jsx(fg,{className:"h-7 w-7 text-primary"})}),xt.jsxs("div",{className:"pt-1",children:[xt.jsx("h3",{className:"font-display font-bold text-lg tracking-wide",children:"Add to Home Screen"}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:"Quick access to Vision Scanner"})]})]}),xt.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 rounded-lg px-3 py-2",children:[xt.jsx(ng,{className:"h-3.5 w-3.5 text-primary"}),xt.jsx("span",{children:"Instant Scan"})]}),xt.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 rounded-lg px-3 py-2",children:[xt.jsx(Zm,{className:"h-3.5 w-3.5 text-primary"}),xt.jsx("span",{children:"Full Access"})]})]}),t?xt.jsxs("div",{className:"space-y-3",children:[xt.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Tap ",xt.jsx(sg,{className:"h-3.5 w-3.5 inline mx-1"})," then ",xt.jsx("strong",{children:'"Add to Home Screen"'})]}),xt.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[xt.jsx(sg,{className:"h-4 w-4"}),xt.jsx("span",{children:""}),xt.jsx(Kf,{className:"h-4 w-4"}),xt.jsx("span",{className:"font-medium",children:"Add to Home"})]})]}):xt.jsxs(vD,{onClick:async()=>{if(t)return;await n()&&i(!1)},className:"w-full gap-2 bg-primary hover:bg-primary/90",children:[xt.jsx(ef,{className:"h-4 w-4"}),"Install App"]})]})]})})})},bD=3e5;function wD(){const{user:e}=lP(),t=ct.useRef(0),n=ct.useRef(0),r=ct.useRef(null),a=ct.useRef(null),i=ct.useCallback(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return null}},[]),s=ct.useCallback(async()=>{if(!e)return;const r=Date.now();r-t.current<18e5||(t.current=r,n.current=r,await iP(e.id))},[e]),o=ct.useCallback(async()=>{if(!e)return;const t=Date.now();t-n.current<bD||(n.current=t,await async function(e){try{await KC.from("user_location_analytics").update({last_seen_at:(new Date).toISOString()}).eq("user_id",e)}catch(t){}}(e.id))},[e]),l=ct.useCallback(()=>{const e=i();return!!e&&(a.current&&a.current!==e?(a.current=e,!0):(a.current=e,!1))},[i]),c=ct.useCallback(()=>{if(document.hidden)r.current=Date.now();else{const t=r.current?Date.now()-r.current:0;if(r.current=null,!e)return;l()?s():t>=12e4&&o()}},[e,l,s,o]),u=ct.useCallback(()=>{e&&o()},[e,o]);return ct.useEffect(()=>{if(!e)return;a.current=i(),document.addEventListener("visibilitychange",c),window.addEventListener("focus",u);const t=setInterval(()=>{document.hidden||o()},bD);return()=>{document.removeEventListener("visibilitychange",c),window.removeEventListener("focus",u),clearInterval(t)}},[e,i,c,u,o]),{refreshLocation:s,updateLastSeenTimestamp:o}}function kD(){return wD(),null}const ND=e=>{let t;const n=new Set,r=(e,r)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,i={setState:r,getState:a,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(r,a,i);return i},jD=e=>e;const _D=e=>{const t=(e=>e?ND(e):ND)(e),n=e=>function(e,t=jD){const n=ut.useSyncExternalStore(e.subscribe,ut.useCallback(()=>t(e.getState()),[e,t]),ut.useCallback(()=>t(e.getInitialState()),[e,t]));return ut.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},SD=e=>e?_D(e):_D;function CD(e,t){let n;try{n=e()}catch(APe){return}return{getItem:e=>{var t;const r=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=n.getItem(e))?t:null;return a instanceof Promise?a.then(r):r(a)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}const PD=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>PD(e)(n),catch(e){return this}}}catch(APe){return{then(e){return this},catch:t=>PD(t)(APe)}}},ED=(e,t)=>(n,r,a)=>{let i={storage:CD(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1;const o=new Set,l=new Set;let c=i.storage;if(!c)return e((...e)=>{n(...e)},r,a);const u=()=>{const e=i.partialize({...r()});return c.setItem(i.name,{state:e,version:i.version})},d=a.setState;a.setState=(e,t)=>(d(e,t),u());const h=e((...e)=>(n(...e),u()),r,a);let p;a.getInitialState=()=>h;const m=()=>{var e,t;if(!c)return;s=!1,o.forEach(e=>{var t;return e(null!=(t=r())?t:h)});const a=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=r())?e:h))||void 0;return PD(c.getItem.bind(c))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate){const t=i.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}}return[!1,void 0]}).then(e=>{var t;const[a,s]=e;if(p=i.merge(s,null!=(t=r())?t:h),n(p,!0),a)return u()}).then(()=>{null==a||a(p,void 0),p=r(),s=!0,l.forEach(e=>e(p))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{i={...i,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>s,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},i.skipHydration||m(),p||h},RD=SD()(ED((e,t)=>({activeVision:null,shouldRestoreOnMount:!1,saveActiveVision:t=>{const n=Date.now();e({activeVision:{...t,savedAt:n,expiresAt:n+864e5},shouldRestoreOnMount:!1})},clearActiveVision:()=>{e({activeVision:null,shouldRestoreOnMount:!1})},markRestored:()=>{e({shouldRestoreOnMount:!1})},hasValidVision:()=>{const{activeVision:n}=t();return!!n&&(Date.now()>n.expiresAt?(e({activeVision:null}),!1):!!n.route)},getRestoreRoute:()=>{const{activeVision:e,hasValidVision:n}=t();return n()&&(null==e?void 0:e.route)||null}}),{name:"en-pensent-active-vision",storage:CD(()=>localStorage),partialize:e=>({activeVision:e.activeVision,shouldRestoreOnMount:e.shouldRestoreOnMount})})),OD=()=>{const e=Zk(),t=eN(),n=ct.useRef(!1),{hasValidVision:r,getRestoreRoute:a,shouldRestoreOnMount:i,markRestored:s,activeVision:o}=RD();return ct.useEffect(()=>{if(n.current)return;if("/"!==e.pathname)return;if(!i)return;if(!r())return void s();const o=a();o&&"/"!==o?(n.current=!0,s(),t(o,{replace:!0})):s()},[e.pathname,r,a,i,s,t]),null},TD=mm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),MD=ct.forwardRef(({className:e,variant:t,...n},r)=>xt.jsx("div",{ref:r,className:Cy(TD({variant:t}),e),...n}));function AD(){const{user:e}=lP(),[t,n]=ct.useState(new Set),[r,a]=ct.useState(!0),[i,s]=ct.useState(!1);ct.useEffect(()=>{(async()=>{if(e)try{const{data:t}=await KC.rpc("has_role",{_user_id:e.id,_role:"admin"});s(!!t)}catch{s(!1)}else s(!1)})()},[e]);const{data:o}=tk({queryKey:["global-system-alerts",i],queryFn:async()=>{if(!i)return[];const{data:e,error:t}=await KC.rpc("get_system_alerts",{p_include_resolved:!1,p_limit:5});if(t)throw t;return e||[]},enabled:i,refetchInterval:6e4,staleTime:3e4}),l=(null==o?void 0:o.filter(e=>!t.has(e.id)))||[],c=l.filter(e=>"critical"===e.severity),u=l.length>0,d=c.length>0;if(!i||!u||!r)return null;const h=c[0]||l[0];return xt.jsx(yT,{children:xt.jsxs(gD.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:`fixed top-4 right-4 z-[9999] max-w-md ${d?"bg-destructive":"bg-amber-500"} text-white rounded-lg shadow-2xl overflow-hidden border border-white/20`,children:[xt.jsxs("div",{className:"p-4",children:[xt.jsxs("div",{className:"flex items-start gap-3",children:[d?xt.jsx(qm,{className:"h-5 w-5 shrink-0 mt-0.5 animate-pulse"}):xt.jsx(jg,{className:"h-5 w-5 shrink-0 mt-0.5"}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("p",{className:"font-semibold text-sm",children:h.title}),xt.jsx(MD,{variant:"secondary",className:"bg-white/20 text-white text-xs",children:l.length>1?`+${l.length-1} more`:h.alert_type})]}),xt.jsx("p",{className:"text-xs opacity-90 mt-1 line-clamp-2",children:h.message})]}),xt.jsx(vD,{variant:"ghost",size:"icon",className:"shrink-0 h-6 w-6 text-white hover:bg-white/20",onClick:()=>{1===l.length&&a(!1),n(e=>new Set([...e,h.id]))},children:xt.jsx(Mg,{className:"h-4 w-4"})})]}),xt.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[xt.jsxs(vD,{size:"sm",variant:"secondary",className:"text-xs h-7 bg-white/20 hover:bg-white/30 text-white",onClick:()=>{window.location.href="/admin/ceo-dashboard?tab=health"},children:[xt.jsx(cg,{className:"h-3 w-3 mr-1"}),"View Dashboard"]}),xt.jsx(vD,{size:"sm",variant:"ghost",className:"text-xs h-7 text-white hover:bg-white/20",onClick:()=>a(!1),children:"Dismiss All"})]})]}),xt.jsx(gD.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:60,ease:"linear"},onAnimationComplete:()=>a(!1),className:"h-1 bg-white/30"})]})})}MD.displayName="Badge";const BD=()=>{const e=Zk();if(!(e.pathname.startsWith("/g/")||e.pathname.startsWith("/v/")||e.pathname.startsWith("/vision/")))return null;return xt.jsxs(vD,{onClick:()=>{window.open("/marketplace","_blank","noopener,noreferrer")},className:"fixed bottom-6 left-6 z-50 gap-2 shadow-xl bg-primary hover:bg-primary/90 text-primary-foreground rounded-full px-4 py-2 h-auto",size:"sm",children:[xt.jsx(ug,{className:"h-4 w-4"}),xt.jsx("span",{className:"hidden sm:inline",children:"Back to Marketplace"}),xt.jsx("span",{className:"sm:hidden",children:"Marketplace"})]})},DD=ct.forwardRef(({className:e,...t},n)=>xt.jsx("div",{ref:n,className:Cy("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));DD.displayName="Card";const ID=ct.forwardRef(({className:e,...t},n)=>xt.jsx("div",{ref:n,className:Cy("flex flex-col space-y-1.5 p-6",e),...t}));ID.displayName="CardHeader";const LD=ct.forwardRef(({className:e,...t},n)=>xt.jsx("h3",{ref:n,className:Cy("text-2xl font-semibold leading-none tracking-tight",e),...t}));LD.displayName="CardTitle";const FD=ct.forwardRef(({className:e,...t},n)=>xt.jsx("p",{ref:n,className:Cy("text-sm text-muted-foreground",e),...t}));FD.displayName="CardDescription";const $D=ct.forwardRef(({className:e,...t},n)=>xt.jsx("div",{ref:n,className:Cy("p-6 pt-0",e),...t}));$D.displayName="CardContent";ct.forwardRef(({className:e,...t},n)=>xt.jsx("div",{ref:n,className:Cy("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";let zD=[],qD=null;function VD(){if(zD.length>0){const e=[...zD];zD=[],async function(e){if(0!==e.length)try{for(const t of e)await KC.functions.invoke("collect-error",{body:{message:t.message,stack:t.stack,componentName:t.componentName,errorType:t.errorType||"runtime",url:t.url||window.location.href,userAgent:navigator.userAgent,metadata:{...t.metadata,timestamp:(new Date).toISOString(),viewport:{width:window.innerWidth,height:window.innerHeight}}}})}catch(APe){}}(e)}qD=null}function WD(e,t={}){const n={message:"string"==typeof e?e:e.message,stack:"object"==typeof e?e.stack:void 0,...t};zD.push(n),zD.length>=5?VD():qD||(qD=setTimeout(VD,5e3))}class QD extends ct.Component{constructor(e){super(e),fe(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})}),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){!function(e,t,n){WD(e,{errorType:"render",componentName:n,metadata:{componentStack:t,reactVersion:"18"}})}(e,t.componentStack||"",this.props.componentName)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:xt.jsxs(DD,{className:"m-4 border-destructive",children:[xt.jsx(ID,{children:xt.jsxs(LD,{className:"flex items-center gap-2 text-destructive",children:[xt.jsx(jg,{className:"h-5 w-5"}),"Something went wrong"]})}),xt.jsxs($D,{className:"space-y-4",children:[xt.jsx("p",{className:"text-sm text-muted-foreground",children:"We've been notified and are working to fix this issue."}),!1,xt.jsxs(vD,{onClick:this.handleRetry,variant:"outline",size:"sm",children:[xt.jsx(Xf,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})]}):this.props.children}}const UD="2024-01-01",KD={"@context":"https://schema.org","@type":"Organization",name:"En Pensent",alternateName:["EnPensent","En Pensent"],url:"https://enpensent.com",logo:"https://enpensent.com/favicon.png",description:"Pioneer of visual chess pattern recognition technology. Creator of the world's first chess-to-art visualization engine combining proprietary algorithms with Stockfish 17 NNUE integration.",foundingDate:"2024",founder:{"@type":"Person",name:"Alec Arthur Shelton",jobTitle:"Founder & CEO"},sameAs:["https://twitter.com/EnPensent"],contactPoint:{"@type":"ContactPoint",email:"hello@enpensent.com",contactType:"customer service"},address:{"@type":"PostalAddress",addressLocality:"San Francisco",addressRegion:"CA",addressCountry:"US"},owns:[{"@type":"Product",name:"En Pensent Visual Chess Engine",description:"Proprietary chess visualization algorithm"}]},HD={"@context":"https://schema.org","@type":"CreativeWork",name:"En Pensent Chess Visualization Technology",creator:{"@type":"Organization",name:"En Pensent"},dateCreated:UD,datePublished:UD,copyrightYear:2024,copyrightHolder:{"@type":"Organization",name:"En Pensent"},description:"Revolutionary chess pattern recognition and visualization technology combining color theory algorithms with Stockfish 17 NNUE neural network analysis to create unique artistic representations of chess games.",keywords:["chess visualization","pattern recognition","generative art","chess analytics","visual encryption","En Pensent algorithm"],isAccessibleForFree:!1,license:"https://enpensent.com/terms"},GD={"@context":"https://schema.org","@type":"Brand",name:"En Pensent",alternateName:["En Pensent","Natural Vision","Hustlenomics","Vision","Visionary"],logo:"https://enpensent.com/favicon.png",slogan:"Transform Chess Into Art",description:"Protected trademarks and service marks of En Pensent. All rights reserved.",owns:{"@type":"CreativeWork",name:"En Pensent Visual Chess Pattern Recognition System",description:"Patent-pending technology for converting chess game data into visual art using proprietary color mapping and neural network analysis.",dateCreated:UD}},YD={"@context":"https://schema.org","@type":"TechArticle",headline:"En Pensent: Visual Chess Pattern Recognition Engine",author:{"@type":"Organization",name:"En Pensent"},datePublished:UD,description:"First-of-its-kind technology combining: (1) Proprietary color theory algorithms mapping chess positions to visual patterns, (2) Stockfish 17 NNUE integration for position evaluation, (3) Visual encryption methodology for art generation, (4) Natural Vision scanner technology for art-to-game reverse lookup, (5) Predictive pattern analysis for move suggestion.",keywords:["chess engine","pattern recognition","color theory","generative art","neural network","Stockfish 17","visual encryption","reverse image lookup"],about:{"@type":"Thing",name:"Chess Visualization Technology",description:"Novel method and system for transforming chess game notation into unique visual art"}},ZD={"@context":"https://schema.org","@type":"WebSite",name:"En Pensent",url:"https://enpensent.com",description:"World's first visual chess pattern recognition engine. Transform any chess game into stunning generative art.",potentialAction:{"@type":"SearchAction",target:{"@type":"EntryPoint",urlTemplate:"https://enpensent.com/marketplace?q={search_term_string}"},"query-input":"required name=search_term_string"}},XD={"@context":"https://schema.org","@type":"SoftwareApplication",name:"En Pensent",operatingSystem:"Web",applicationCategory:"ArtApplication",applicationSubCategory:"Chess Analysis",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.9",ratingCount:"150"},description:"Pioneer of visual chess pattern recognition. Transform chess games into unique generative art using our proprietary algorithm combined with Stockfish 17 analysis. Features include PGN/FEN visualization, custom color palettes, HD exports, Natural Vision scanner, and print ordering.",featureList:["Proprietary chess-to-art visualization algorithm","Stockfish 17 NNUE integration","Natural Vision scanner technology","HD export and print ordering","Marketplace for trading Visions","Predictive pattern analysis"],softwareVersion:"1.0",datePublished:UD,creator:{"@type":"Organization",name:"En Pensent"}},JD={"@context":"https://schema.org","@type":"Product",name:"Chess Art Prints by En Pensent",brand:{"@type":"Brand",name:"En Pensent"},description:"Custom generative art prints created using En Pensent's proprietary visualization technology. Each Vision is unique based on your game's moves, chosen color palette, and our patent-pending algorithm.",image:"https://enpensent.com/opengraph-image-p98pqg.png",offers:{"@type":"AggregateOffer",lowPrice:"29",highPrice:"199",priceCurrency:"USD",offerCount:"1000+"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",ratingCount:"200"},manufacturer:{"@type":"Organization",name:"En Pensent"}},eI={"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"What is En Pensent?",acceptedAnswer:{"@type":"Answer",text:"En Pensent is the pioneer of visual chess pattern recognition technology. Founded in 2024, we created the world's first algorithm that transforms chess games into unique generative art by combining proprietary color theory with Stockfish 17 neural network analysis."}},{"@type":"Question",name:"How does En Pensent's technology work?",acceptedAnswer:{"@type":"Answer",text:"Our patent-pending technology uses a proprietary algorithm that maps chess positions and moves to visual patterns using advanced color theory. Combined with Stockfish 17 NNUE integration, we analyze millions of patterns to create unique artistic representations of each game."}},{"@type":"Question",name:"What is Natural Vision?",acceptedAnswer:{"@type":"Answer",text:"Natural Vision is En Pensent's proprietary scanner technology that can identify and authenticate any Vision artwork. It uses pattern recognition to reverse-lookup the original chess game from its visual representation."}},{"@type":"Question",name:"What is a Vision?",acceptedAnswer:{"@type":"Answer",text:"A Vision is En Pensent's trademarked term for each unique chess art piece. Each Vision is created from a specific game and palette combination using our proprietary algorithm, making it one-of-a-kind. Visions can be saved, traded, and printed."}},{"@type":"Question",name:"Can I sell my chess art?",acceptedAnswer:{"@type":"Answer",text:"Yes! Visionary members can list their Visions on our marketplace. Creators earn perpetual royalties on all secondary sales through our Hustlenomics system."}},{"@type":"Question",name:"What is the Education Fund?",acceptedAnswer:{"@type":"Answer",text:"2% of all En Pensent platform revenue goes to our Chess Education Fund, supporting chess education programs for underserved communities worldwide."}}]},tI={"/about":{name:"About"},"/investors":{name:"Investors",parent:"/about"},"/education-fund":{name:"Education Fund",parent:"/about"},"/marketplace":{name:"Marketplace"},"/shop":{name:"Shop",parent:"/marketplace"},"/order-print":{name:"Order Print",parent:"/shop"},"/my-vision":{name:"My Gallery"},"/my-palettes":{name:"My Palettes",parent:"/my-vision"},"/creator-dashboard":{name:"Creator Dashboard",parent:"/my-vision"},"/creative-mode":{name:"Creative Mode"},"/studio":{name:"Studio",parent:"/creative-mode"},"/book":{name:"Book Generator",parent:"/creative-mode"},"/play":{name:"Play Chess"},"/leaderboard":{name:"Leaderboard",parent:"/play"},"/vision-scanner":{name:"Vision Scanner"},"/news":{name:"News"},"/account":{name:"Account"},"/premium":{name:"Premium",parent:"/account"},"/analytics":{name:"Analytics",parent:"/account"},"/premium-analytics":{name:"Premium Analytics",parent:"/analytics"},"/profile":{name:"Profile",parent:"/account"},"/terms":{name:"Terms of Service"},"/privacy":{name:"Privacy Policy"},"/dmca":{name:"DMCA"}},nI=(e,t)=>{const n=document.getElementById(e);n&&n.remove();const r=document.createElement("script");r.id=e,r.type="application/ld+json",r.textContent=JSON.stringify(t),document.head.appendChild(r)},rI=()=>{const e=Zk();return ct.useEffect(()=>{nI("sd-organization",KD),nI("sd-website",ZD),nI("sd-software",XD),nI("sd-ip-claims",HD),nI("sd-trademark-claims",GD),nI("sd-technology-claims",YD);const t=(e=>{const t=[{name:"Home",url:"https://enpensent.com"}];if("/"!==e&&tI[e]){const n=[];let r=e;for(;r&&tI[r];){const e=tI[r];n.unshift({name:e.name,path:r}),r=e.parent}n.forEach(e=>{t.push({name:e.name,url:`https://enpensent.com${e.path}`})})}else if("/"!==e&&e.length>1){const n=e.slice(1).split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push({name:n,url:`https://enpensent.com${e}`})}return{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:t.map((e,t)=>({"@type":"ListItem",position:t+1,name:e.name,item:e.url}))}})(e.pathname);return nI("sd-breadcrumbs",t),"/"===e.pathname?(nI("sd-product",JD),nI("sd-faq",eI)):"/marketplace"===e.pathname?nI("sd-product",JD):"/about"!==e.pathname&&"/investors"!==e.pathname||nI("sd-faq",eI),()=>{if("/"!==e.pathname&&"/marketplace"!==e.pathname){const e=document.getElementById("sd-product");e&&e.remove()}if("/"!==e.pathname&&"/about"!==e.pathname&&"/investors"!==e.pathname){const e=document.getElementById("sd-faq");e&&e.remove()}}},[e.pathname]),null},aI={"/":{title:"En Pensent - Transform Chess Games Into Art",description:"Create stunning generative art from any chess game. Upload PGN, choose a palette, and transform your games into museum-quality prints.",image:"https://enpensent.com/og-home.png",type:"website",keywords:"chess art, generative art, chess visualization, PGN art, chess prints, chess gifts"},"/about":{title:"About En Pensent - Our Story & Mission",description:"Learn about En Pensent's mission to transform chess games into unique generative art. Founded by chess enthusiasts and artists.",image:"https://enpensent.com/og-about.png",type:"website",keywords:"about en pensent, chess art company, generative art startup"},"/investors":{title:"Invest in En Pensent - Investor Relations",description:"Join us in revolutionizing chess art. View our pitch deck, TAM analysis, and investment opportunities.",image:"https://enpensent.com/og-investors.png",type:"website",keywords:"invest chess art, en pensent investment, chess startup funding"},"/marketplace":{title:"Vision Marketplace - Buy & Sell Chess Art",description:"Discover, collect, and trade unique chess visualizations. Browse thousands of Visions created by our community.",image:"https://enpensent.com/og-marketplace.png",type:"website",keywords:"chess art marketplace, buy chess art, sell chess visualizations, vision trading"},"/my-vision":{title:"My Gallery - Your Chess Art Collection",description:"View and manage your personal collection of chess visualizations. Export, print, or list your Visions for sale.",image:"https://enpensent.com/og-gallery.png",type:"website"},"/my-palettes":{title:"My Palettes - Custom Color Schemes",description:"Create and manage custom color palettes for your chess visualizations. Make your art truly unique.",image:"https://enpensent.com/og-palettes.png",type:"website",keywords:"custom color palettes, chess art colors, visualization themes"},"/premium":{title:"Visionary Premium - Unlimited Chess Art",description:"Unlock unlimited downloads, advanced analytics, and exclusive features with Visionary Premium membership.",image:"https://enpensent.com/og-premium.png",type:"website",keywords:"premium membership, visionary subscription, chess art premium"},"/shop":{title:"Shop - Chess Art Prints & Merchandise",description:"Browse our collection of premium chess art prints, framed artwork, and exclusive merchandise.",image:"https://enpensent.com/og-shop.png",type:"website",keywords:"chess art shop, buy chess prints, chess merchandise"},"/studio":{title:"Creative Studio - Design Your Chess Art",description:"Full creative control over your chess visualizations. Design, customize, and create unique artwork.",image:"https://enpensent.com/og-studio.png",type:"website",keywords:"chess art studio, create chess visualization, custom chess art"},"/profile":{title:"My Profile - En Pensent",description:"View and manage your En Pensent profile, collection, and achievements.",image:"https://enpensent.com/og-profile.png",type:"website"},"/creative-mode":{title:"Creative Mode - Design Custom Chess Art",description:"Full creative control over your chess visualizations. Customize every aspect of your artwork.",image:"https://enpensent.com/og-creative.png",type:"website",keywords:"custom chess art, design chess visualization, creative mode"},"/play":{title:"Play Chess - Create Art While You Play",description:"Play chess against Stockfish AI or friends. Watch your game transform into art in real-time.",image:"https://enpensent.com/og-play.png",type:"website",keywords:"play chess online, chess game art, stockfish chess"},"/leaderboard":{title:"Leaderboard - Top Creators & Collectors",description:"See the top En Pensent creators, collectors, and most valuable Visions on the platform.",image:"https://enpensent.com/og-leaderboard.png",type:"website"},"/vision-scanner":{title:"Natural Vision Scanner - Identify Chess Art",description:"Scan any En Pensent print to instantly view the game, analysis, and ownership history.",image:"https://enpensent.com/og-scanner.png",type:"website",keywords:"vision scanner, chess art recognition, natural vision technology"},"/book":{title:"Chess Art Books - Carlsen in Color",description:"Create custom chess art books featuring your favorite games with AI-generated poetry and analysis.",image:"https://enpensent.com/og-book.png",type:"product",keywords:"chess art book, carlsen in color, chess visualization book"},"/order-print":{title:"Order Prints - Museum-Quality Chess Art",description:"Order museum-quality prints of your chess visualizations. Premium framing options available.",image:"https://enpensent.com/og-print.png",type:"product",keywords:"chess art prints, order chess art, museum quality prints"},"/education-fund":{title:"Chess Education Fund - Supporting Youth Chess",description:"2% of all En Pensent revenue supports chess education in underserved communities worldwide.",image:"https://enpensent.com/og-education.png",type:"website",keywords:"chess education, youth chess programs, chess charity"},"/creator-dashboard":{title:"Creator Dashboard - Track Your Earnings",description:"Monitor your Vision sales, royalties, and performance analytics as an En Pensent creator.",image:"https://enpensent.com/og-creator.png",type:"website"},"/news":{title:"News & Updates - En Pensent Blog",description:"Latest features, updates, and stories from the En Pensent community. Stay informed about new releases.",image:"https://enpensent.com/og-news.png",type:"website",keywords:"en pensent news, chess art updates, new features"},"/terms":{title:"Terms of Service - En Pensent",description:"Read the terms and conditions for using the En Pensent platform.",type:"website"},"/privacy":{title:"Privacy Policy - En Pensent",description:"Learn how En Pensent protects your privacy and handles your data.",type:"website"},"/dmca":{title:"DMCA Policy - En Pensent",description:"Digital Millennium Copyright Act policy and procedures for En Pensent.",type:"website"},"/account":{title:"My Account - En Pensent",description:"Manage your En Pensent account, subscription, and preferences.",type:"website"},"/analytics":{title:"Analytics - Vision Performance",description:"Track the performance and engagement of your chess visualizations.",type:"website"},"/premium-analytics":{title:"Premium Analytics - Advanced Insights",description:"Deep analytics and insights for Visionary members. Track trends, earnings, and more.",type:"website"},"/game-history":{title:"Game History - Your Chess Games",description:"View and manage your chess game history. Revisit and visualize past games.",type:"website"}},iI={title:"En Pensent - Chess Art Prints",description:"Transform any chess game into stunning generative art. Create, scan, and collect unique visualizations.",image:"https://enpensent.com/opengraph-image-p98pqg.png",type:"website",keywords:"chess art, generative art, chess visualization, chess prints"},sI=(e,t,n=!1)=>{const r=n?"name":"property";let a=document.querySelector(`meta[${r}="${e}"]`);a||(a=document.createElement("meta"),a.setAttribute(r,e),document.head.appendChild(a)),a.setAttribute("content",t)},oI=()=>{const e=Zk();return ct.useEffect(()=>{const t=e.pathname,n=aI[t]||iI,r=`https://enpensent.com${"/"===t?"":t}`,a=n.image||iI.image;document.title=n.title,sI("description",n.description,!0),n.keywords&&sI("keywords",n.keywords,!0),((e,t)=>{let n=document.querySelector(`link[rel="${e}"]`);n||(n=document.createElement("link"),n.setAttribute("rel",e),document.head.appendChild(n)),n.setAttribute("href",t)})("canonical",r),sI("og:title",n.title),sI("og:description",n.description),sI("og:type",n.type||"website"),sI("og:url",r),sI("og:image",a),sI("og:image:width","1200"),sI("og:image:height","630"),sI("og:image:alt",n.title),sI("og:site_name","En Pensent"),sI("og:locale","en_US"),sI("twitter:card","summary_large_image",!0),sI("twitter:site","@EnPensent",!0),sI("twitter:creator","@EnPensent",!0),sI("twitter:title",n.title,!0),sI("twitter:description",n.description,!0),sI("twitter:image",a,!0),sI("twitter:image:alt",n.title,!0),sI("robots","index, follow",!0),sI("googlebot","index, follow",!0),sI("author","En Pensent",!0)},[e.pathname]),null};function lI({children:e,featureName:t="This feature"}){const{user:n,isAdmin:r,isLoading:a,isCheckingAdmin:i}=lP(),[s,o]=ct.useState(!1);return ct.useEffect(()=>{if(i){const e=setTimeout(()=>{o(!0)},5e3);return()=>clearTimeout(e)}},[i]),a||i&&!s?xt.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:xt.jsxs("div",{className:"text-center space-y-4",children:[xt.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),xt.jsx("p",{className:"text-muted-foreground",children:"Verifying CEO access..."})]})}):n?r?xt.jsx(QD,{componentName:t,children:e}):xt.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-8",children:xt.jsxs("div",{className:"max-w-md text-center space-y-6",children:[xt.jsx("div",{className:"w-20 h-20 mx-auto bg-destructive/10 rounded-full flex items-center justify-center",children:xt.jsx(Rf,{className:"w-10 h-10 text-destructive"})}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsx("h1",{className:"text-2xl font-bold",children:"Access Restricted"}),xt.jsxs("p",{className:"text-muted-foreground",children:[t," is private and reserved for authorized personnel only."]})]}),xt.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border border-border",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[xt.jsx(cg,{className:"w-4 h-4"}),xt.jsx("span",{children:"CEO Access Only"})]}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:' Alec Arthur Shelton "The Artist" - Inventor & CEO'})]}),xt.jsx("div",{className:"pt-4",children:xt.jsx("a",{href:"/",className:"text-primary hover:underline text-sm",children:" Return to Home"})})]})}):xt.jsx(mN,{to:"/account",replace:!0})}function cI(){const{pathname:e}=Zk();return ct.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null}function uI(){return xt.jsxs("div",{className:"min-h-screen bg-background animate-pulse",children:[xt.jsx("div",{className:"h-16 border-b border-border/40 bg-background/95 backdrop-blur"}),xt.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[xt.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),xt.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((e,t)=>xt.jsx("div",{className:"aspect-square bg-muted rounded-lg"},t))})]})]})}const dI=ct.forwardRef(({className:e,...t},n)=>xt.jsx("textarea",{className:Cy("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));dI.displayName="Textarea";var hI=ct.createContext(void 0);function pI(e){const t=ct.useContext(hI);return e||t||"ltr"}var mI="rovingFocusGroup.onEntryFocus",fI={bubbles:!1,cancelable:!0},gI="RovingFocusGroup",[yI,vI,xI]=tp(gI),[bI,wI]=Kh(gI,[xI]),[kI,NI]=bI(gI),jI=ct.forwardRef((e,t)=>xt.jsx(yI.Provider,{scope:e.__scopeRovingFocusGroup,children:xt.jsx(yI.Slot,{scope:e.__scopeRovingFocusGroup,children:xt.jsx(_I,{...e,ref:t})})}));jI.displayName=gI;var _I=ct.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=ct.useRef(null),p=Uh(t,h),m=pI(i),[f,g]=wp({prop:s,defaultProp:o??null,onChange:l,caller:gI}),[y,v]=ct.useState(!1),x=ap(c),b=vI(n),w=ct.useRef(!1),[k,N]=ct.useState(0);return ct.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(mI,x),()=>e.removeEventListener(mI,x)},[x]),xt.jsx(kI,{scope:n,orientation:r,dir:m,loop:a,currentTabStopId:f,onItemFocus:ct.useCallback(e=>g(e),[g]),onItemShiftTab:ct.useCallback(()=>v(!0),[]),onFocusableItemAdd:ct.useCallback(()=>N(e=>e+1),[]),onFocusableItemRemove:ct.useCallback(()=>N(e=>e-1),[]),children:xt.jsx(np.div,{tabIndex:y||0===k?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:Vh(e.onMouseDown,()=>{w.current=!0}),onFocus:Vh(e.onFocus,e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(mI,fI);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter(e=>e.focusable);EI([e.find(e=>e.active),e.find(e=>e.id===f),...e].filter(Boolean).map(e=>e.ref.current),u)}}w.current=!1}),onBlur:Vh(e.onBlur,()=>v(!1))})})}),SI="RovingFocusGroupItem",CI=ct.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s,...o}=e,l=lv(),c=i||l,u=NI(SI,n),d=u.currentTabStopId===c,h=vI(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:f}=u;return ct.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),xt.jsx(yI.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:xt.jsx(np.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Vh(e.onMouseDown,e=>{r?u.onItemFocus(c):e.preventDefault()}),onFocus:Vh(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Vh(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:PI[r]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();const i=a.indexOf(e.currentTarget);a=u.loop?(r=i+1,(n=a).map((e,t)=>n[(r+t)%n.length])):a.slice(i+1)}setTimeout(()=>EI(a))}var n,r}),children:"function"==typeof s?s({isCurrentTabStop:d,hasTabStop:null!=f}):s})})});CI.displayName=SI;var PI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function EI(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var RI=jI,OI=CI,TI="Tabs",[MI]=Kh(TI,[wI]),AI=wI(),[BI,DI]=MI(TI),II=ct.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=pI(o),[d,h]=wp({prop:r,onChange:a,defaultProp:i??"",caller:TI});return xt.jsx(BI,{scope:n,baseId:lv(),value:d,onValueChange:h,orientation:s,dir:u,activationMode:l,children:xt.jsx(np.div,{dir:u,"data-orientation":s,...c,ref:t})})});II.displayName=TI;var LI="TabsList",FI=ct.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=DI(LI,n),s=AI(n);return xt.jsx(RI,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:xt.jsx(np.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});FI.displayName=LI;var $I="TabsTrigger",zI=ct.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,s=DI($I,n),o=AI(n),l=WI(s.baseId,r),c=QI(s.baseId,r),u=r===s.value;return xt.jsx(OI,{asChild:!0,...o,focusable:!a,active:u,children:xt.jsx(np.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:Vh(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():s.onValueChange(r)}),onKeyDown:Vh(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&s.onValueChange(r)}),onFocus:Vh(e.onFocus,()=>{const e="manual"!==s.activationMode;u||a||!e||s.onValueChange(r)})})})});zI.displayName=$I;var qI="TabsContent",VI=ct.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...s}=e,o=DI(qI,n),l=WI(o.baseId,r),c=QI(o.baseId,r),u=r===o.value,d=ct.useRef(u);return ct.useEffect(()=>{const e=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(e)},[]),xt.jsx(vp,{present:a||u,children:({present:n})=>xt.jsx(np.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:c,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:n&&i})})});function WI(e,t){return`${e}-trigger-${t}`}function QI(e,t){return`${e}-content-${t}`}VI.displayName=qI;var UI=FI,KI=zI,HI=VI;const GI=II,YI=ct.forwardRef(({className:e,...t},n)=>xt.jsx(UI,{ref:n,className:Cy("inline-flex h-10 items-center justify-start rounded-md bg-muted p-1 text-muted-foreground overflow-x-auto scrollbar-hide max-w-full",e),...t}));YI.displayName=UI.displayName;const ZI=ct.forwardRef(({className:e,...t},n)=>xt.jsx(KI,{ref:n,className:Cy("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shrink-0",e),...t}));ZI.displayName=KI.displayName;const XI=ct.forwardRef(({className:e,...t},n)=>xt.jsx(HI,{ref:n,className:Cy("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));XI.displayName=HI.displayName;const JI="/assets/hero-chess-art-DjLt68qr.jpg",eL=[{id:"kasparov-topalov-1999",title:"Kasparov's Immortal",event:"Hoogovens Group A",year:1999,white:"Garry Kasparov",black:"Veselin Topalov",description:"Considered one of the greatest games ever played. Kasparov sacrifices his rook and queen in a brilliant attacking display.",source:"chessgames.com/1011478",pgn:'[Event "Hoogovens Group A"]\n[Site "Wijk aan Zee NED"]\n[Date "1999.01.20"]\n[Round "4"]\n[White "Garry Kasparov"]\n[Black "Veselin Topalov"]\n[Result "1-0"]\n\n1. e4 d6 2. d4 Nf6 3. Nc3 g6 4. Be3 Bg7 5. Qd2 c6 6. f3 b5 7. Nge2 Nbd7 8. Bh6 Bxh6 9. Qxh6 Bb7 10. a3 e5 11. O-O-O Qe7 12. Kb1 a6 13. Nc1 O-O-O 14. Nb3 exd4 15. Rxd4 c5 16. Rd1 Nb6 17. g3 Kb8 18. Na5 Ba8 19. Bh3 d5 20. Qf4+ Ka7 21. Rhe1 d4 22. Nd5 Nbxd5 23. exd5 Qd6 24. Rxd4 cxd4 25. Re7+ Kb6 26. Qxd4+ Kxa5 27. b4+ Ka4 28. Qc3 Qxd5 29. Ra7 Bb7 30. Rxb7 Qc4 31. Qxf6 Kxa3 32. Qxa6+ Kxb4 33. c3+ Kxc3 34. Qa1+ Kd2 35. Qb2+ Kd1 36. Bf1 Rd2 37. Rd7 Rxd7 38. Bxc4 bxc4 39. Qxh8 Rd3 40. Qa8 c3 41. Qa4+ Ke1 42. f4 f5 43. Kc1 Rd2 44. Qa7 1-0'},{id:"byrne-fischer-1956",title:"The Game of the Century",event:"Third Rosenwald Trophy",year:1956,white:"Donald Byrne",black:"Bobby Fischer",description:"A 13-year-old Bobby Fischer stuns the chess world with a queen sacrifice that leads to a spectacular victory.",source:"chessgames.com/1008361",pgn:'[Event "Third Rosenwald Trophy"]\n[Site "New York USA"]\n[Date "1956.10.17"]\n[Round "8"]\n[White "Donald Byrne"]\n[Black "Bobby Fischer"]\n[Result "0-1"]\n\n1. Nf3 Nf6 2. c4 g6 3. Nc3 Bg7 4. d4 O-O 5. Bf4 d5 6. Qb3 dxc4 7. Qxc4 c6 8. e4 Nbd7 9. Rd1 Nb6 10. Qc5 Bg4 11. Bg5 Na4 12. Qa3 Nxc3 13. bxc3 Nxe4 14. Bxe7 Qb6 15. Bc4 Nxc3 16. Bc5 Rfe8+ 17. Kf1 Be6 18. Bxb6 Bxc4+ 19. Kg1 Ne2+ 20. Kf1 Nxd4+ 21. Kg1 Ne2+ 22. Kf1 Nc3+ 23. Kg1 axb6 24. Qb4 Ra4 25. Qxb6 Nxd1 26. h3 Rxa2 27. Kh2 Nxf2 28. Re1 Rxe1 29. Qd8+ Bf8 30. Nxe1 Bd5 31. Nf3 Ne4 32. Qb8 b5 33. h4 h5 34. Ne5 Kg7 35. Kg1 Bc5+ 36. Kf1 Ng3+ 37. Ke1 Bb4+ 38. Kd1 Bb3+ 39. Kc1 Ne2+ 40. Kb1 Nc3+ 41. Kc1 Rc2# 0-1'},{id:"anderssen-kieseritzky-1851",title:"The Immortal Game",event:"London Casual",year:1851,white:"Adolf Anderssen",black:"Lionel Kieseritzky",description:"The most famous chess game ever played. Anderssen sacrifices both rooks and his queen to deliver checkmate.",source:"chessgames.com/1018910",pgn:'[Event "London Casual"]\n[Site "London ENG"]\n[Date "1851.06.21"]\n[White "Adolf Anderssen"]\n[Black "Lionel Kieseritzky"]\n[Result "1-0"]\n\n1. e4 e5 2. f4 exf4 3. Bc4 Qh4+ 4. Kf1 b5 5. Bxb5 Nf6 6. Nf3 Qh6 7. d3 Nh5 8. Nh4 Qg5 9. Nf5 c6 10. g4 Nf6 11. Rg1 cxb5 12. h4 Qg6 13. h5 Qg5 14. Qf3 Ng8 15. Bxf4 Qf6 16. Nc3 Bc5 17. Nd5 Qxb2 18. Bd6 Bxg1 19. e5 Qxa1+ 20. Ke2 Na6 21. Nxg7+ Kd8 22. Qf6+ Nxf6 23. Be7# 1-0'},{id:"deep-blue-kasparov-1997",title:"Deep Blue's Final Blow",event:"IBM Man-Machine",year:1997,white:"Deep Blue",black:"Garry Kasparov",description:"The decisive final game where Deep Blue clinched the historic match against the world champion.",source:"chessgames.com/1070917",pgn:'[Event "IBM Man-Machine"]\n[Site "New York USA"]\n[Date "1997.05.11"]\n[Round "6"]\n[White "Deep Blue"]\n[Black "Garry Kasparov"]\n[Result "1-0"]\n\n1. e4 c6 2. d4 d5 3. Nc3 dxe4 4. Nxe4 Nd7 5. Ng5 Ngf6 6. Bd3 e6 7. N1f3 h6 8. Nxe6 Qe7 9. O-O fxe6 10. Bg6+ Kd8 11. Bf4 b5 12. a4 Bb7 13. Re1 Nd5 14. Bg3 Kc8 15. axb5 cxb5 16. Qd3 Bc6 17. Bf5 exf5 18. Rxe7 Bxe7 19. c4 1-0'},{id:"spassky-fischer-1972",title:"Fischer Strikes Back",event:"World Championship",year:1972,white:"Boris Spassky",black:"Bobby Fischer",description:"Fischer's brilliant victory over Spassky in Game 5, featuring powerful positional play.",source:"chessgames.com/1044723",pgn:'[Event "World Championship"]\n[Site "Reykjavik ISL"]\n[Date "1972.07.20"]\n[Round "5"]\n[White "Boris Spassky"]\n[Black "Bobby Fischer"]\n[Result "0-1"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. Nf3 c5 5. e3 Nc6 6. Bd3 Bxc3+ 7. bxc3 d6 8. e4 e5 9. d5 Ne7 10. Nh4 h6 11. f4 Ng6 12. Nxg6 fxg6 13. fxe5 dxe5 14. Be3 b6 15. O-O O-O 16. a4 a5 17. Rb1 Bd7 18. Rb2 Rb8 19. Rbf2 Qe7 20. Bc2 g5 21. Bd2 Qe8 22. Be1 Qg6 23. Qd3 Nh5 24. Rxf8+ Rxf8 25. Rxf8+ Kxf8 26. Bd1 Nf4 27. Qc2 Bxa4 0-1'},{id:"lasker-thomas-1912",title:"The King Hunt",event:"London Casual",year:1912,white:"Edward Lasker",black:"George Thomas",description:"One of the most famous king hunts in chess history. The black king is driven across the entire board.",source:"chessgames.com/1259009",pgn:'[Event "London Casual"]\n[Site "London ENG"]\n[Date "1912.10.29"]\n[White "Edward Lasker"]\n[Black "George Thomas"]\n[Result "1-0"]\n\n1. d4 e6 2. Nf3 f5 3. Nc3 Nf6 4. Bg5 Be7 5. Bxf6 Bxf6 6. e4 fxe4 7. Nxe4 b6 8. Ne5 O-O 9. Bd3 Bb7 10. Qh5 Qe7 11. Qxh7+ Kxh7 12. Nxf6+ Kh6 13. Neg4+ Kg5 14. h4+ Kf4 15. g3+ Kf3 16. Be2+ Kg2 17. Rh2+ Kg1 18. Kd2# 1-0'},{id:"morphy-opera-1858",title:"The Opera Game",event:"Paris Opera House",year:1858,white:"Paul Morphy",black:"Duke of Brunswick & Count Isouard",description:"The most famous informal game ever played. Morphy demonstrated perfect development and a stunning queen sacrifice.",source:"chessgames.com/1233404",pgn:'[Event "Paris Opera House"]\n[Site "Paris FRA"]\n[Date "1858.11.02"]\n[White "Paul Morphy"]\n[Black "Duke of Brunswick and Count Isouard"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 d6 3. d4 Bg4 4. dxe5 Bxf3 5. Qxf3 dxe5 6. Bc4 Nf6 7. Qb3 Qe7 8. Nc3 c6 9. Bg5 b5 10. Nxb5 cxb5 11. Bxb5+ Nbd7 12. O-O-O Rd8 13. Rxd7 Rxd7 14. Rd1 Qe6 15. Bxd7+ Nxd7 16. Qb8+ Nxb8 17. Rd8# 1-0'},{id:"oldest-recorded-1475",title:"The Oldest Recorded Game",event:"Valencia",year:1475,white:"Francesc de Castellvi",black:"Narcis Vinyoles",description:"The oldest recorded game of modern chess, played in Valencia, Spain over 500 years ago.",source:"chessgames.com/1259987",pgn:'[Event "Valencia"]\n[Site "Valencia ESP"]\n[Date "1475.??.??"]\n[White "Francesc de Castellvi"]\n[Black "Narcis Vinyoles"]\n[Result "1-0"]\n\n1. e4 d5 2. exd5 Qxd5 3. Nc3 Qd8 4. Bc4 Nf6 5. Nf3 Bg4 6. h3 Bxf3 7. Qxf3 e6 8. Qxb7 Nbd7 9. Nb5 Rc8 10. Nxa7 Nb6 11. Nxc8 Nxc8 12. d4 Nd6 13. Bb5+ Nxb5 14. Qxb5+ Nd7 15. d5 exd5 16. Be3 Bd6 17. Rd1 Qf6 18. Rxd5 Qg6 19. Bf4 Bxf4 20. Qxd7+ Kf8 21. Qd8# 1-0'},{id:"carlsen-anand-2013",title:"Carlsen Becomes Champion",event:"World Championship",year:2013,white:"Magnus Carlsen",black:"Viswanathan Anand",description:"Game 5 from the 2013 World Championship where Carlsen displayed masterful endgame technique.",source:"chessgames.com/1719781",pgn:'[Event "World Championship"]\n[Site "Chennai IND"]\n[Date "2013.11.15"]\n[Round "5"]\n[White "Magnus Carlsen"]\n[Black "Viswanathan Anand"]\n[Result "1-0"]\n\n1. c4 e6 2. d4 d5 3. Nc3 c6 4. e4 dxe4 5. Nxe4 Bb4+ 6. Nc3 c5 7. a3 Ba5 8. Nf3 Nf6 9. Be3 Nc6 10. Qd3 cxd4 11. Nxd4 Ng4 12. O-O-O Nxe3 13. fxe3 Bc7 14. Nxc6 bxc6 15. Qxd8+ Bxd8 16. Be2 Ke7 17. Bf3 Bd7 18. Ne4 Bb6 19. c5 f5 20. cxb6 fxe4 21. b7 Rab8 22. Bxe4 Rxb7 23. Rhf1 Rb5 24. Rf4 g5 25. Rf3 h5 26. Rdf1 Be8 27. Bc2 Rc5 28. Rf6 h4 29. e4 a5 30. Kd2 Rb5 31. b3 Bh5 32. Kc3 Rc5+ 33. Kb2 Rd8 34. R1f2 Rd4 35. Rh6 Bd1 36. Bb1 Rb5 37. Kc3 c5 38. Rb2 e5 39. Rg6 a4 40. Rxg5 Rxb3+ 41. Rxb3 Bxb3 42. Rxe5+ Kd6 43. Rh5 Rd1 44. e5+ Kd5 45. Bh7 Rc1+ 46. Kb2 Rg1 47. Bg8+ Kc6 48. Rh6+ Kd7 49. Bxb3 axb3 50. Kxb3 Rxg2 51. Rxh4 Ke6 52. a4 Kxe5 53. a5 Kd6 54. Rh7 Kd5 55. a6 c4+ 56. Kc3 Ra2 57. a7 Kc5 58. h4 1-0'},{id:"botvinnik-capablanca-1938",title:"Botvinnik Brilliance",event:"AVRO Tournament",year:1938,white:"Mikhail Botvinnik",black:"Jose Raul Capablanca",description:"A stunning victory by Botvinnik against the former world champion, featuring a beautiful queen sacrifice.",source:"chessgames.com/1031957",pgn:'[Event "AVRO Tournament"]\n[Site "Netherlands"]\n[Date "1938.11.22"]\n[Round "11"]\n[White "Mikhail Botvinnik"]\n[Black "Jose Raul Capablanca"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. e3 d5 5. a3 Bxc3+ 6. bxc3 c5 7. cxd5 exd5 8. Bd3 O-O 9. Ne2 b6 10. O-O Ba6 11. Bxa6 Nxa6 12. Bb2 Qd7 13. a4 Rfe8 14. Qd3 c4 15. Qc2 Nb8 16. Rae1 Nc6 17. Ng3 Na5 18. f3 Nb3 19. e4 Qxa4 20. e5 Nd7 21. Qf2 g6 22. f4 f5 23. exf6 Nxf6 24. f5 Rxe1 25. Rxe1 Re8 26. Re6 Rxe6 27. fxe6 Kg7 28. Qf4 Qe8 29. Qe5 Qe7 30. Ba3 Qxa3 31. Nh5+ gxh5 32. Qg5+ Kf8 33. Qxf6+ Kg8 34. e7 Qc1+ 35. Kf2 Qc2+ 36. Kg3 Qd3+ 37. Kh4 Qe4+ 38. Kxh5 Qe2+ 39. Kh4 Qe4+ 40. g4 Qe1+ 41. Kh5 1-0'},{id:"alekhine-capablanca-1927",title:"The Marathon Match",event:"World Championship",year:1927,white:"Alexander Alekhine",black:"Jose Raul Capablanca",description:"The decisive 34th game of their epic World Championship match, ending Capablanca's reign.",source:"chessgames.com/1012518",pgn:'[Event "World Championship"]\n[Site "Buenos Aires ARG"]\n[Date "1927.11.26"]\n[Round "34"]\n[White "Alexander Alekhine"]\n[Black "Jose Raul Capablanca"]\n[Result "1-0"]\n\n1. d4 d5 2. c4 e6 3. Nc3 Nf6 4. Bg5 Nbd7 5. e3 c6 6. a3 Be7 7. Nf3 O-O 8. Bd3 dxc4 9. Bxc4 Nd5 10. Bxe7 Qxe7 11. Ne4 N5f6 12. Ng3 c5 13. O-O Nb6 14. Ba2 cxd4 15. Nxd4 g6 16. Rc1 Bd7 17. Qe2 Rac8 18. e4 e5 19. Nf3 Kg7 20. h3 h6 21. Qd2 Be6 22. Bxe6 Qxe6 23. Qa5 Nc4 24. Qxa7 Nxb2 25. Rxc8 Rxc8 26. Qxb7 Nc4 27. Qb4 Ra8 28. Ra1 Qc6 29. a4 Nxe4 30. Nxe5 Qd6 31. Qxc4 Qxe5 32. Re1 Nd6 33. Qc1 Qf6 34. Qc7 Qa6 35. Re2 Ra7 36. Qc5 Rf7 37. Ra2 Qa8 38. Qc1 Qa5 39. Qc7 Qa8 40. Rd2 Qa6 41. Rd5 Rf6 42. Qd4 Qb6 43. Rd2 Ra6 44. Ra2 Ra8 45. Qb6 Qd4 46. Qb4 Qd3 47. Ra3 Qe4 48. Qb2+ Kh7 49. Rd3 Qe6 50. Qd4 Rc8 51. Ra3 Rf8 52. Rd3 Rf6 53. Qd5 Rf7 54. Ra3 Rc7 55. Qd4 Qb6 56. Rd3 Ra7 57. Qe5 Re7 58. Qf4 Qe6 59. Rd5 Rf7 60. Qd4 Ra7 61. Ra5 Rxa5 62. Qxa5 Qe4 63. Qb6 Qe8 64. f3 Kg8 65. Kg7 Nf5 66. Kh6 Rf5 67. f4 Rc5 68. Ra3 Rc6 69. Kg7 Rd7 70. f5 gxf5 71. Kh6 Rf7 72. Kg5 Re7 73. Ra4 Kb5 74. Re4 Ka6 75. Kh6 Rg5 76. Rg5 Rh1 77. Rf5 Kb6 78. Rxf7 Kc6 79. Re7 1-0'},{id:"marshall-capablanca-1909",title:"Capablanca's Debut",event:"Capablanca vs Marshall Match",year:1909,white:"Frank Marshall",black:"Jose Raul Capablanca",description:"A young Capablanca defeats the US Champion in a masterful display of endgame technique.",source:"chessgames.com/1094814",pgn:'[Event "Capablanca - Marshall Match"]\n[Site "New York USA"]\n[Date "1909.04.27"]\n[Round "5"]\n[White "Frank Marshall"]\n[Black "Jose Raul Capablanca"]\n[Result "0-1"]\n\n1. d4 d5 2. c4 e6 3. Nc3 Nf6 4. Bg5 Be7 5. e3 Ne4 6. Bxe7 Qxe7 7. Bd3 Nxc3 8. bxc3 Nd7 9. Nf3 O-O 10. Qc2 h6 11. O-O c5 12. Rfe1 dxc4 13. Bxc4 b6 14. Qe4 Rb8 15. Bd3 Nf6 16. Qf4 Bb7 17. e4 Rfd8 18. Rad1 Rbc8 19. Re3 cxd4 20. cxd4 Rc3 21. Bb1 g5 22. Nxg5 Rxe3 23. Qxe3 Ng4 24. Qg3 Qxg5 25. h4 Qg6 26. Qc7 Rxd4 27. Qb8+ Kh7 28. e5+ Be4 29. Rxd4 Bxb1 30. Qxa7 Nxe5 31. Rf4 Be4 32. g3 Nf3+ 33. Kg2 f5 34. Qxb6 Nxh4+ 35. Kh2 Nf3+ 36. Rxf3 Bxf3 37. Qxe6 Be4 38. f3 Bd3 39. Qd5 Qb1 40. a4 Qa2 41. Qb7+ Kg6 42. Qb6+ Kh5 43. Kh2 Ba2 44. a5 Qd4 45. Qc6+ Qf6 46. Qe8+ Qf7 47. Qa4 Qe6 48. a6 Qe2+ 49. Kh3 Bd5 50. a7 Bxf3 51. Qa5 Kg6 52. a8=Q Qf1+ 0-1'},{id:"anderssen-dufresne-1852",title:"The Evergreen Game",event:"Berlin Casual",year:1852,white:"Adolf Anderssen",black:"Jean Dufresne",description:"Another Anderssen masterpiece with a stunning queen sacrifice leading to an elegant checkmate.",source:"chessgames.com/1018865",pgn:'[Event "Berlin Casual"]\n[Site "Berlin GER"]\n[Date "1852.??.??"]\n[White "Adolf Anderssen"]\n[Black "Jean Dufresne"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bc4 Bc5 4. b4 Bxb4 5. c3 Ba5 6. d4 exd4 7. O-O d3 8. Qb3 Qf6 9. e5 Qg6 10. Re1 Nge7 11. Ba3 b5 12. Qxb5 Rb8 13. Qa4 Bb6 14. Nbd2 Bb7 15. Ne4 Qf5 16. Bxd3 Qh5 17. Nf6+ gxf6 18. exf6 Rg8 19. Rad1 Qxf3 20. Rxe7+ Nxe7 21. Qxd7+ Kxd7 22. Bf5+ Ke8 23. Bd7+ Kf8 24. Bxe7# 1-0'},{id:"karpov-kasparov-1985",title:"The Octopus Knight",event:"World Championship",year:1985,white:"Anatoly Karpov",black:"Garry Kasparov",description:"Game 16 of their legendary 1985 match, where Kasparov's knight dominated from d3.",source:"chessgames.com/1067175",pgn:'[Event "World Championship"]\n[Site "Moscow URS"]\n[Date "1985.10.15"]\n[Round "16"]\n[White "Anatoly Karpov"]\n[Black "Garry Kasparov"]\n[Result "0-1"]\n\n1. e4 c5 2. Nf3 e6 3. d4 cxd4 4. Nxd4 Nc6 5. Nb5 d6 6. c4 Nf6 7. N1c3 a6 8. Na3 d5 9. cxd5 exd5 10. exd5 Nb4 11. Be2 Bc5 12. O-O O-O 13. Bf3 Bf5 14. Bg5 Re8 15. Qd2 b5 16. Rad1 Nd3 17. Nab1 h6 18. Bh4 b4 19. Na4 Bd6 20. Bg3 Rc8 21. b3 g5 22. Bxd6 Qxd6 23. g3 Nd7 24. Bg2 Qf6 25. a3 a5 26. axb4 axb4 27. Qa2 Bg6 28. d6 g4 29. Qd2 Kg7 30. f3 Qxd6 31. fxg4 Qd4+ 32. Kh1 Nf6 33. Rf4 Ne4 34. Qxd3 Nf2+ 35. Rxf2 Bxd3 36. Rfd2 Qe3 37. Rxd3 Rc1 38. Nb2 Qf2 39. Nd2 Rxd1+ 40. Nxd1 Re1+ 0-1'},{id:"short-timman-1991",title:"Short's King Walk",event:"Tilburg Tournament",year:1991,white:"Nigel Short",black:"Jan Timman",description:"Famous for Short marching his king up the board in a daring attack that won brilliantly.",source:"chessgames.com/1076029",pgn:'[Event "Tilburg Tournament"]\n[Site "Tilburg NED"]\n[Date "1991.10.17"]\n[Round "4"]\n[White "Nigel Short"]\n[Black "Jan Timman"]\n[Result "1-0"]\n\n1. e4 Nf6 2. e5 Nd5 3. d4 d6 4. Nf3 g6 5. Bc4 Nb6 6. Bb3 Bg7 7. Qe2 Nc6 8. O-O O-O 9. h3 a5 10. a4 dxe5 11. dxe5 Nd4 12. Nxd4 Qxd4 13. Re1 e6 14. Nd2 Nd5 15. Nf3 Qc5 16. Qe4 Qb4 17. Bc4 Nb6 18. b3 Nxc4 19. bxc4 Re8 20. Rd1 Qc5 21. Qh4 b6 22. Be3 Qc6 23. Bh6 Bh8 24. Rd8 Bb7 25. Rad1 Bg7 26. R8d7 Rf8 27. Bxg7 Kxg7 28. R1d4 Rae8 29. Qf6+ Kg8 30. h4 h5 31. Kh2 Rc8 32. Kg3 Rce8 33. Kf4 Bc8 34. R7d6 Bxd6 35. Rxd6 Kg7 36. Rd7 Rc8 37. Ke5 Rc7 38. Rxc7 Qxc7 39. Nd4 Qc5+ 40. Kf4 Qc7 41. Ke4 Qc5 42. Kd3 Qc7 43. Nc6 Rd8+ 44. Kc3 Rd6 45. Qe7 Qxe7 46. Nxe7 Rd7 47. Nc6 1-0'},{id:"polgar-kasparov-2002",title:"Polgar Beats the King",event:"Russia vs Rest of World",year:2002,white:"Judit Polgar",black:"Garry Kasparov",description:"Judit Polgar becomes the first woman to defeat Kasparov in competitive play.",source:"chessgames.com/1260377",pgn:'[Event "Russia vs Rest of World"]\n[Site "Moscow RUS"]\n[Date "2002.09.09"]\n[Round "5"]\n[White "Judit Polgar"]\n[Black "Garry Kasparov"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 Nf6 4. O-O Nxe4 5. d4 Nd6 6. Bxc6 dxc6 7. dxe5 Nf5 8. Qxd8+ Kxd8 9. Nc3 Ke8 10. h3 Be7 11. Ne4 b6 12. Re1 Bb7 13. Nd4 Nxd4 14. Nf6+ gxf6 15. exf6 Rg8 16. fxe7 Ne6 17. Bf4 Nxf4 18. Re4 Nd5 19. Rae1 Kd7 20. c4 Nxe7 21. Rxe7+ Kd6 22. Rxf7 Raf8 23. Ree7 Rxf7 24. Rxf7 Kc5 25. Rxh7 Kb4 26. Rc7 Rg6 27. b3 Rf6 28. f3 a5 29. h4 a4 30. g4 axb3 31. axb3 Bc8 32. h5 Bf5 33. Rxc6 Rxc6 34. gxf5 Rc5 35. f6 Rxf5 36. Kg2 Rb5 37. Kf2 Kxb3 38. Ke3 Kc4 39. Ke4 b5 40. h6 1-0'},{id:"tal-miller-1988",title:"Tal's Last Brilliancy",event:"World Blitz Championship",year:1988,white:"Mikhail Tal",black:"Walter Browne",description:"The Magician from Riga shows his legendary sacrificial style in a stunning attacking game.",source:"chessgames.com/1070149",pgn:'[Event "World Blitz Championship"]\n[Site "Saint John CAN"]\n[Date "1988.??.??"]\n[White "Mikhail Tal"]\n[Black "Walter Browne"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 a6 6. Bg5 e6 7. f4 Be7 8. Qf3 Qc7 9. O-O-O Nbd7 10. g4 b5 11. Bxf6 Nxf6 12. g5 Nd7 13. f5 Bxg5+ 14. Kb1 Ne5 15. Qh5 Qf4 16. Nxe6 fxe6 17. fxe6 Rf8 18. e7 Qf2 19. exf8=Q+ Kxf8 20. Qd5 Bd7 21. Qxa8+ Ke7 22. Qd5 Qxh2 23. Nd1 Qf4 24. Bd3 Qf2 25. Rhf1 Qg3 26. Bxb5 Qe3 27. Qd4 Qe6 28. Ba4 Bxa4 29. Qxa4 Qc4 30. b3 Qc7 31. Rf5 g6 32. Re5 Kd7 33. Rxe5 dxe5 34. Qd4+ Ke7 35. Qxe5+ Kf7 36. Rf1+ Bf4 37. Rxf4+ 1-0'},{id:"fischer-spassky-1972-g6",title:"Fischer's Masterpiece",event:"World Championship",year:1972,white:"Bobby Fischer",black:"Boris Spassky",description:"Game 6 of the Match of the Century, considered by many as the greatest game ever played.",source:"chessgames.com/1044773",pgn:'[Event "World Championship"]\n[Site "Reykjavik ISL"]\n[Date "1972.07.23"]\n[Round "6"]\n[White "Bobby Fischer"]\n[Black "Boris Spassky"]\n[Result "1-0"]\n\n1. c4 e6 2. Nf3 d5 3. d4 Nf6 4. Nc3 Be7 5. Bg5 O-O 6. e3 h6 7. Bh4 b6 8. cxd5 Nxd5 9. Bxe7 Qxe7 10. Nxd5 exd5 11. Rc1 Be6 12. Qa4 c5 13. Qa3 Rc8 14. Bb5 a6 15. dxc5 bxc5 16. O-O Ra7 17. Be2 Nd7 18. Nd4 Qf8 19. Nxe6 fxe6 20. e4 d4 21. f4 Qe7 22. e5 Rb8 23. Bc4 Kh8 24. Qh3 Nf8 25. b3 a5 26. f5 exf5 27. Rxf5 Nh7 28. Rcf1 Qd8 29. Qg3 Re7 30. h4 Rbb7 31. e6 Rbc7 32. Qe5 Qe8 33. a4 Qd8 34. R1f2 Qe8 35. R2f3 Qd8 36. Bd3 Qe8 37. Qe4 Nf6 38. Rxf6 gxf6 39. Rxf6 Kg8 40. Bc4 Kh8 41. Qf4 1-0'},{id:"steinitz-bardeleben-1895",title:"The Brilliancy Prize",event:"Hastings Tournament",year:1895,white:"Wilhelm Steinitz",black:"Curt von Bardeleben",description:"Steinitz unleashes a famous combination. Bardeleben left the board rather than face the mate.",source:"chessgames.com/1132750",pgn:'[Event "Hastings Tournament"]\n[Site "Hastings ENG"]\n[Date "1895.08.17"]\n[Round "10"]\n[White "Wilhelm Steinitz"]\n[Black "Curt von Bardeleben"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bc4 Bc5 4. c3 Nf6 5. d4 exd4 6. cxd4 Bb4+ 7. Nc3 d5 8. exd5 Nxd5 9. O-O Be6 10. Bg5 Be7 11. Bxd5 Bxd5 12. Nxd5 Qxd5 13. Bxe7 Nxe7 14. Re1 f6 15. Qe2 Qd7 16. Rac1 c6 17. d5 cxd5 18. Nd4 Kf7 19. Ne6 Rhc8 20. Qg4 g6 21. Ng5+ Ke8 22. Rxe7+ Kf8 23. Rf7+ Kg8 24. Rg7+ Kh8 25. Rxh7+ 1-0'},{id:"rotlewi-rubinstein-1907",title:"Rubinstein's Immortal",event:"Lodz Tournament",year:1907,white:"Georg Rotlewi",black:"Akiba Rubinstein",description:"A stunning queen sacrifice by Rubinstein creates one of the most beautiful combinations ever.",source:"chessgames.com/1119679",pgn:'[Event "Lodz Tournament"]\n[Site "Lodz POL"]\n[Date "1907.12.26"]\n[Round "6"]\n[White "Georg Rotlewi"]\n[Black "Akiba Rubinstein"]\n[Result "0-1"]\n\n1. d4 d5 2. Nf3 e6 3. e3 c5 4. c4 Nc6 5. Nc3 Nf6 6. dxc5 Bxc5 7. a3 a6 8. b4 Bd6 9. Bb2 O-O 10. Qd2 Qe7 11. Bd3 dxc4 12. Bxc4 b5 13. Bd3 Rd8 14. Qe2 Bb7 15. O-O Ne5 16. Nxe5 Bxe5 17. f4 Bc7 18. e4 Rac8 19. e5 Bb6+ 20. Kh1 Ng4 21. Be4 Qh4 22. g3 Rxc3 23. gxh4 Rd2 24. Qxd2 Bxe4+ 25. Qg2 Rh3 0-1'},{id:"pillsbury-lasker-1896",title:"Lasker's Defense",event:"St. Petersburg Tournament",year:1896,white:"Harry Nelson Pillsbury",black:"Emanuel Lasker",description:"World Champion Lasker shows brilliant defensive technique against the young American star.",source:"chessgames.com/1106453",pgn:'[Event "St. Petersburg Tournament"]\n[Site "St. Petersburg RUS"]\n[Date "1896.01.05"]\n[Round "7"]\n[White "Harry Nelson Pillsbury"]\n[Black "Emanuel Lasker"]\n[Result "0-1"]\n\n1. d4 d5 2. c4 e6 3. Nc3 Nf6 4. Nf3 c5 5. Bg5 cxd4 6. Qxd4 Nc6 7. Qh4 Be7 8. O-O-O Qa5 9. e3 Bd7 10. Kb1 h6 11. cxd5 exd5 12. Nd4 O-O 13. Bxf6 Bxf6 14. Qh5 Nxd4 15. exd4 Be6 16. f4 Rac8 17. f5 Rxc3 18. fxe6 Ra3 19. exf7+ Rxf7 20. bxa3 Qb6+ 21. Bb5 Qxb5+ 22. Ka1 Rc7 23. Rd2 Rc4 24. Rhd1 Rc3 25. Qf5 Qc4 26. Kb2 Rxa3 27. Qe6+ Kh8 28. Kxa3 Qc3+ 29. Ka4 b5+ 30. Kxb5 Qxd2 31. Qe8+ Kh7 32. Kc6 Qxd4 33. Qxd8 Bxd8 34. Rxd4 Bf6 35. Rd7 a5 0-1'},{id:"euwe-alekhine-1935",title:"Euwe's Triumph",event:"World Championship",year:1935,white:"Max Euwe",black:"Alexander Alekhine",description:"Euwe upsets the reigning champion in this crucial game of their World Championship match.",source:"chessgames.com/1035035",pgn:'[Event "World Championship"]\n[Site "Netherlands"]\n[Date "1935.10.24"]\n[Round "14"]\n[White "Max Euwe"]\n[Black "Alexander Alekhine"]\n[Result "1-0"]\n\n1. d4 e6 2. c4 f5 3. g3 Bb4+ 4. Bd2 Be7 5. Bg2 Nf6 6. Nc3 O-O 7. Nf3 Ne4 8. O-O b6 9. Qc2 Bb7 10. Ne5 Nxc3 11. Bxc3 Bxg2 12. Kxg2 Qc8 13. d5 d6 14. Nd3 e5 15. Kh1 Nd7 16. f4 Bf6 17. Bd2 c6 18. dxc6 Qxc6+ 19. Qf5 exf4 20. gxf4 Be7 21. Rg1 Nf6 22. Bc3 Rac8 23. Raf1 Rf7 24. Qg5 Qc7 25. Bxf6 Bxf6 26. Qh5 Rcf8 27. Rxg7+ Bxg7 28. Qxf7+ Rxf7 29. Rxf5 Qe7 30. Rxf7 Qxf7 31. Nf2 Qf6 32. Kg2 Be5 33. Nd3 Bd4 34. Kf3 Qb2 35. Ke4 1-0'},{id:"petrosian-spassky-1966",title:"Iron Tigran",event:"World Championship",year:1966,white:"Tigran Petrosian",black:"Boris Spassky",description:"Petrosian demonstrates his legendary defensive and positional skills to retain his title.",source:"chessgames.com/1106755",pgn:'[Event "World Championship"]\n[Site "Moscow URS"]\n[Date "1966.04.28"]\n[Round "10"]\n[White "Tigran Petrosian"]\n[Black "Boris Spassky"]\n[Result "1-0"]\n\n1. Nf3 Nf6 2. g3 g6 3. c4 Bg7 4. Bg2 O-O 5. O-O Nc6 6. Nc3 d6 7. d4 a6 8. d5 Na5 9. Nd2 c5 10. Qc2 e5 11. b3 Ng4 12. e4 f5 13. exf5 gxf5 14. Nd1 b5 15. f3 Nh6 16. cxb5 axb5 17. Ne3 f4 18. gxf4 Nf5 19. Nxf5 Bxf5 20. Qc3 exf4 21. Bxf4 Re8 22. Rae1 Rxe1 23. Rxe1 Qf8 24. Ne4 h6 25. Bc1 Nb7 26. Nxd6 Nxd6 27. Rxe8+ Qxe8 28. Qxg7# 1-0'},{id:"smyslov-reshevsky-1945",title:"Smyslov's Symphony",event:"USA-USSR Radio Match",year:1945,white:"Vasily Smyslov",black:"Samuel Reshevsky",description:"Young Smyslov defeats the American champion in the historic radio match between superpowers.",source:"chessgames.com/1127595",pgn:'[Event "USA-USSR Radio Match"]\n[Site "Moscow URS"]\n[Date "1945.09.01"]\n[Round "1"]\n[White "Vasily Smyslov"]\n[Black "Samuel Reshevsky"]\n[Result "1-0"]\n\n1. d4 d5 2. c4 c6 3. Nf3 Nf6 4. Nc3 e6 5. e3 Nbd7 6. Bd3 dxc4 7. Bxc4 b5 8. Be2 a6 9. O-O c5 10. dxc5 Bxc5 11. a4 b4 12. Ne4 Nxe4 13. Qxd7+ Bxd7 14. Bxa6+ Ke7 15. Nd4 Bxd4 16. exd4 Rxa6 17. Re1 Kf6 18. Rxe4 Bc6 19. Rf4+ Ke7 20. Bg5+ f6 21. Rxb4 Kf7 22. Bf4 Ra5 23. a5 Rc8 24. a6 Bd5 25. Rb7+ Kg8 26. a7 1-0'},{id:"anand-kramnik-2008",title:"Anand's Triumph",event:"World Championship",year:2008,white:"Viswanathan Anand",black:"Vladimir Kramnik",description:"Anand defeats Kramnik to become undisputed World Champion in a powerful display.",source:"chessgames.com/1485823",pgn:'[Event "World Championship"]\n[Site "Bonn GER"]\n[Date "2008.10.17"]\n[Round "3"]\n[White "Viswanathan Anand"]\n[Black "Vladimir Kramnik"]\n[Result "1-0"]\n\n1. d4 d5 2. c4 c6 3. Nf3 Nf6 4. Nc3 e6 5. e3 Nbd7 6. Bd3 dxc4 7. Bxc4 b5 8. Be2 Bb7 9. O-O b4 10. Na4 c5 11. dxc5 Nxc5 12. Bb5+ Ncd7 13. Ne5 Qc7 14. Qd4 Rd8 15. Bd2 Qa5 16. Bc6 Be7 17. Rfc1 Bxc6 18. Nxc6 Rc8 19. Nxe7 Kxe7 20. Qxb4 Qxb4 21. Bxb4+ Nd5 22. Ba5 N7b6 23. Nxb6 Nxb6 24. Bxb6 axb6 25. a4 Rc4 26. b3 Rc3 27. Rxc3 Kd6 28. Rc4 Kd5 29. Rc7 Ra8 30. Rac1 Rb8 31. R1c6 Rb7 32. Rxb7 1-0'},{id:"kramnik-kasparov-2000",title:"Kramnik's Berlin Wall",event:"World Championship",year:2e3,white:"Vladimir Kramnik",black:"Garry Kasparov",description:"Kramnik ends Kasparov's 15-year reign with solid play and this decisive game.",source:"chessgames.com/1249049",pgn:'[Event "World Championship"]\n[Site "London ENG"]\n[Date "2000.10.21"]\n[Round "10"]\n[White "Vladimir Kramnik"]\n[Black "Garry Kasparov"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. e3 O-O 5. Bd3 d5 6. Nf3 c5 7. O-O cxd4 8. exd4 dxc4 9. Bxc4 b6 10. Bg5 Bb7 11. Re1 Nbd7 12. Rc1 Rc8 13. Qb3 Be7 14. Bxf6 Nxf6 15. Bxe6 fxe6 16. Qxe6+ Kh8 17. Qxe7 Bxf3 18. gxf3 Qxd4 19. Nb5 Qxb2 20. Rc4 Rce8 21. Qd6 Rd8 22. Qc6 Qf6 23. Nc7 Qb2 24. Ne6 Rfe8 25. Qxf6 gxf6 26. Nxd8 Rxe1+ 27. Kg2 Rd1 28. Rc8 Kg7 29. Nf7+ Kg6 30. Nh8+ Kg5 31. Rc3 1-0'},{id:"topalov-anand-2005",title:"The Pearl of San Luis",event:"San Luis Tournament",year:2005,white:"Veselin Topalov",black:"Viswanathan Anand",description:"Topalov's brilliant attacking game en route to winning the World Championship.",source:"chessgames.com/1368430",pgn:'[Event "San Luis Tournament"]\n[Site "San Luis ARG"]\n[Date "2005.09.28"]\n[Round "2"]\n[White "Veselin Topalov"]\n[Black "Viswanathan Anand"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. e3 O-O 5. Bd3 c5 6. Nf3 d5 7. O-O cxd4 8. exd4 dxc4 9. Bxc4 b6 10. Bg5 Bb7 11. Qe2 Nbd7 12. Rac1 Rc8 13. Bd3 Bxc3 14. bxc3 Qc7 15. c4 Bxf3 16. Qxf3 Rfe8 17. Rfe1 h6 18. Bh4 Qd6 19. c5 bxc5 20. dxc5 Rxc5 21. Rxc5 Qxc5 22. Qxf6 gxf6 23. Rxe6 Kg7 24. Rxe8 Nf8 25. Rb8 Qd5 26. Be4 Qd1+ 27. Bf1 a5 28. Bf6+ 1-0'},{id:"larsen-spassky-1970",title:"Spassky's Double Bishop Sacrifice",event:"USSR vs Rest of World",year:1970,white:"Bent Larsen",black:"Boris Spassky",description:"Spassky destroys Larsen with a stunning double bishop sacrifice on h2 and g2.",source:"chessgames.com/1106765",pgn:'[Event "USSR vs Rest of World"]\n[Site "Belgrade YUG"]\n[Date "1970.03.31"]\n[Round "2"]\n[White "Bent Larsen"]\n[Black "Boris Spassky"]\n[Result "0-1"]\n\n1. b3 e5 2. Bb2 Nc6 3. c4 Nf6 4. Nf3 e4 5. Nd4 Bc5 6. Nxc6 dxc6 7. e3 Bf5 8. Qc2 Qe7 9. Be2 O-O-O 10. f4 Ng4 11. g3 h5 12. h3 h4 13. hxg4 hxg3 14. Rg1 Rh1 15. Rxh1 g2 16. Rf1 Qh4+ 17. Kd1 gxf1=Q+ 0-1'},{id:"ivanchuk-yusupov-1991",title:"Ivanchuk's Immortal",event:"Candidates Match",year:1991,white:"Vassily Ivanchuk",black:"Artur Yusupov",description:"One of the most beautiful games of the modern era, filled with stunning sacrifices.",source:"chessgames.com/1070551",pgn:'[Event "Candidates Match"]\n[Site "Brussels BEL"]\n[Date "1991.06.05"]\n[Round "7"]\n[White "Vassily Ivanchuk"]\n[Black "Artur Yusupov"]\n[Result "1-0"]\n\n1. c4 e5 2. g3 d6 3. Bg2 g6 4. d4 Nd7 5. Nc3 Bg7 6. Nf3 Ngf6 7. O-O O-O 8. Qc2 Re8 9. Rd1 c6 10. b3 Qe7 11. Ba3 e4 12. Ng5 e3 13. f4 Nf8 14. b4 Bf5 15. Qb3 h6 16. Nf3 Ng4 17. b5 g5 18. bxc6 bxc6 19. Ne5 gxf4 20. Nxc6 Qg5 21. Bxd6 Ng6 22. Nd5 Qh5 23. h4 Nxh4 24. gxh4 Qxh4 25. Nce7+ Kh8 26. Nxf5 Qh2+ 27. Kf1 Re6 28. Qb7 Rg6 29. Qxa8+ Kh7 30. Qg8+ 1-0'},{id:"keres-petrosian-1959",title:"Keres's Brilliancy",event:"Candidates Tournament",year:1959,white:"Paul Keres",black:"Tigran Petrosian",description:"Keres produces a gem against the future world champion with beautiful tactical play.",source:"chessgames.com/1105135",pgn:'[Event "Candidates Tournament"]\n[Site "Bled/Zagreb/Belgrade YUG"]\n[Date "1959.09.08"]\n[Round "2"]\n[White "Paul Keres"]\n[Black "Tigran Petrosian"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. e3 c5 5. Bd3 O-O 6. Nf3 d5 7. O-O Nc6 8. a3 Bxc3 9. bxc3 Qc7 10. cxd5 exd5 11. a4 Re8 12. Ba3 c4 13. Bc2 Bg4 14. Qe1 Bh5 15. Nh4 Bg6 16. Nxg6 hxg6 17. e4 dxe4 18. Bxe4 Nxe4 19. Qxe4 Qd7 20. Rae1 Re6 21. d5 Rxe4 22. dxc6 Qxd1 23. c7 1-0'},{id:"ding-nepomniachtchi-2023",title:"Ding Becomes Champion",event:"World Championship",year:2023,white:"Ding Liren",black:"Ian Nepomniachtchi",description:"The decisive rapid tiebreak game where Ding Liren became the 17th World Champion.",source:"chessgames.com/2018483",pgn:'[Event "World Championship"]\n[Site "Astana KAZ"]\n[Date "2023.04.30"]\n[Round "14.4"]\n[White "Ding Liren"]\n[Black "Ian Nepomniachtchi"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 d5 4. h3 Be7 5. Bf4 O-O 6. e3 b6 7. Be2 Bb7 8. O-O Nbd7 9. Nc3 dxc4 10. Bxc4 c5 11. Nb5 Bd5 12. Bxd5 Nxd5 13. Bh2 a6 14. Na3 cxd4 15. Nxd4 Qb8 16. Nb3 Bf6 17. Rc1 Rd8 18. Qe2 N5b6 19. Nc4 Nc5 20. b4 Nca4 21. Nbd2 Nd5 22. b5 Nab6 23. Nxb6 Qxb6 24. bxa6 Qa7 25. Bf4 Rxa6 26. Nc4 Ra4 27. Nd6 Qb6 28. Qb5 Qxb5 29. Nxb5 Nxf4 30. exf4 Rxf4 31. g3 Rb4 32. Rc8 Rxc8 33. Nd6+ Kf8 34. Nxc8 Be5 35. Rc1 Kg8 36. Rc7 Kf8 37. Kg2 h6 38. Ra7 Rb2 39. a4 1-0'},{id:"gukesh-ding-2024",title:"Gukesh Makes History",event:"World Championship",year:2024,white:"Ding Liren",black:"Gukesh Dommaraju",description:"The moment 18-year-old Gukesh became the youngest World Champion in history.",source:"chessgames.com",pgn:'[Event "World Championship"]\n[Site "Singapore"]\n[Date "2024.12.12"]\n[Round "14"]\n[White "Ding Liren"]\n[Black "Gukesh Dommaraju"]\n[Result "0-1"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. e3 O-O 5. Bd3 d5 6. Nf3 c5 7. O-O cxd4 8. exd4 dxc4 9. Bxc4 b6 10. Bg5 Bb7 11. Qe2 Nbd7 12. Rac1 Rc8 13. Bd3 Bxc3 14. bxc3 Qc7 15. c4 Bxf3 16. Qxf3 Rfe8 17. Rfe1 h6 18. Bh4 Qd6 19. c5 bxc5 20. dxc5 Rxc5 21. Rxc5 Qxc5 22. Qxf6 gxf6 23. Rxe6 Kg7 24. Bh7 Qc1+ 25. Bf1 Rxe6 26. Bg3 Qa1 27. Bb5 Nf8 28. h3 Rc6 29. Bf4 Qc1 30. Bc4 Qc2 31. Bb3 Qf5 32. Be3 Rc1+ 33. Kh2 a5 34. g4 Qe5+ 35. Bg5 Rb1 36. Bc2 Rb2 37. Bd3 a4 38. Be3 Qb5 39. Bc4 Qc6 40. Be2 a3 41. Bd3 Ra2 42. Be4 Qc1 43. Bb1 Rf2 44. Bd4 Qf4+ 45. Kg1 Rd2 46. Be3 Qe5 47. Bc4 Nd7 48. Bb3 Nc5 49. Bc4 a2 50. Bxa2 Rxa2 51. Kf1 Qd5 52. Ke1 Qd3 53. Bf4 Ra1# 0-1'},{id:"nakamura-caruana-2018",title:"American Showdown",event:"London Chess Classic",year:2018,white:"Hikaru Nakamura",black:"Fabiano Caruana",description:"A thrilling battle between two American super-grandmasters with beautiful tactics.",source:"chessgames.com/1932025",pgn:'[Event "London Chess Classic"]\n[Site "London ENG"]\n[Date "2018.12.14"]\n[Round "5"]\n[White "Hikaru Nakamura"]\n[Black "Fabiano Caruana"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 b6 4. g3 Ba6 5. Qc2 c5 6. d5 exd5 7. cxd5 Bb7 8. Bg2 Nxd5 9. O-O Be7 10. Rd1 Qc8 11. Nh4 g6 12. Nc3 Nxc3 13. Qxc3 Bxg2 14. Nxg2 O-O 15. Bh6 Re8 16. e4 Bf8 17. Bxf8 Rxf8 18. Rac1 Nc6 19. b3 d5 20. exd5 Nd4 21. Qg7# 1-0'},{id:"aronian-anand-2013",title:"Aronian's Masterclass",event:"Tata Steel Tournament",year:2013,white:"Levon Aronian",black:"Viswanathan Anand",description:"A stunning attacking game by Aronian against the reigning World Champion.",source:"chessgames.com/1693017",pgn:'[Event "Tata Steel Tournament"]\n[Site "Wijk aan Zee NED"]\n[Date "2013.01.15"]\n[Round "4"]\n[White "Levon Aronian"]\n[Black "Viswanathan Anand"]\n[Result "1-0"]\n\n1. d4 d5 2. c4 c6 3. Nf3 Nf6 4. Nc3 e6 5. Bg5 h6 6. Bh4 dxc4 7. e4 g5 8. Bg3 b5 9. Be2 Bb7 10. Qc2 Nbd7 11. Rd1 Bb4 12. Ne5 Qe7 13. O-O Nxe5 14. Bxe5 O-O 15. a3 Ba5 16. b4 cxb3 17. Qxb3 Nd7 18. Bf4 gxf4 19. Nxb5 Rac8 20. Bf3 Qg5 21. a4 Bb6 22. Rc1 e5 23. Qd3 Bc7 24. Rxc6 Bxc6 25. Qg6+ Qxg6 26. Nd6+ Kh8 27. Nf7+ Kg7 28. Nxe5+ 1-0'},{id:"firouzja-carlsen-2022",title:"Young Gun Strikes",event:"Norway Chess",year:2022,white:"Alireza Firouzja",black:"Magnus Carlsen",description:"Teenage prodigy Firouzja defeats the World Champion in a sharp tactical battle.",source:"chessgames.com/1985735",pgn:'[Event "Norway Chess"]\n[Site "Stavanger NOR"]\n[Date "2022.06.01"]\n[Round "4"]\n[White "Alireza Firouzja"]\n[Black "Magnus Carlsen"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 d5 4. Nc3 Bb4 5. Bg5 h6 6. Bxf6 Qxf6 7. e3 O-O 8. Rc1 dxc4 9. Bxc4 c5 10. O-O cxd4 11. Nxd4 Bd7 12. Qb3 Nc6 13. Nxc6 Bxc6 14. Bxe6 Qxb2 15. Qxb2 Bxc3 16. Rxc3 fxe6 17. Rd1 Rac8 18. Rxc6 Rxc6 19. Rd8 a6 20. Rxf8+ Kxf8 21. Kf1 Rc1+ 22. Ke2 Rc2+ 23. Kd3 Rxa2 24. Kc4 Rxf2 25. g4 Ke7 26. g5 hxg5 27. Kb4 Rxh2 28. Ka5 Rb2 29. Kxa6 g4 30. Kb5 g3 31. Kc4 Kf6 32. Kd3 Kf5 33. e4+ Kxe4 34. Ke2 Rb4 35. Kf1 Kf3 36. Kg1 Rb1# 1-0'},{id:"fischer-larsen-1971",title:"Fischer's 6-0 Sweep",event:"Candidates Semifinal",year:1971,white:"Bobby Fischer",black:"Bent Larsen",description:"First game of Fischer's historic 6-0 demolition of the Danish grandmaster.",source:"chessgames.com/1044113",pgn:'[Event "Candidates Semifinal"]\n[Site "Denver USA"]\n[Date "1971.07.06"]\n[Round "1"]\n[White "Bobby Fischer"]\n[Black "Bent Larsen"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 g6 6. Be3 Bg7 7. f3 O-O 8. Qd2 Nc6 9. Bc4 Nxd4 10. Bxd4 Be6 11. Bb3 Qa5 12. O-O-O b5 13. Kb1 b4 14. Nd5 Bxd5 15. exd5 Qb5 16. Bxf6 exf6 17. Qxb4 Qxd5 18. Qa4 Rfc8 19. Ba2 Qd4 20. Qxd4 Bxd4 21. Bb3 Kf8 22. Rhe1 Rc3 23. Rd3 Rac8 24. Rxc3 Rxc3 25. Re4 Bc5 26. Kc1 Rc2+ 27. Kd1 Rxc3 28. Ke2 a5 29. f4 Bb4 30. Kd3 Rxb3 31. axb3 Bc5 32. h3 Ke7 33. Kc4 Bb6 34. b4 axb4 35. Kxb4 Kd7 36. Kc4 Kc6 37. c3 Ba5 38. Kd4 Kd7 39. Ke4 Ke6 40. g4 f5+ 41. gxf5+ gxf5+ 42. Kf3 Kf6 43. Kf2 Bb6+ 44. Ke2 1-0'},{id:"kasparov-karpov-1990",title:"The 24th Game",event:"World Championship",year:1990,white:"Garry Kasparov",black:"Anatoly Karpov",description:"The decisive final game where Kasparov retained his title against his greatest rival.",source:"chessgames.com/1067503",pgn:'[Event "World Championship"]\n[Site "Lyon/New York FRA/USA"]\n[Date "1990.12.31"]\n[Round "24"]\n[White "Garry Kasparov"]\n[Black "Anatoly Karpov"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 d6 8. c3 O-O 9. h3 Bb7 10. d4 Re8 11. Nbd2 Bf8 12. a4 h6 13. Bc2 exd4 14. cxd4 Nb4 15. Bb1 c5 16. d5 Nd7 17. Ra3 c4 18. Nd4 Qf6 19. N2f3 Nc5 20. axb5 axb5 21. Rea1 Rxa3 22. Rxa3 Qg6 23. Be3 Nbd3 24. Qa1 Bc8 25. Kh2 Bd7 26. Be1 Nb4 27. Nb3 Nb7 28. Bd2 Nc5 29. Nxc5 dxc5 30. Be1 c3 31. b3 Ra8 32. Rxa8 Bxa8 33. Qa5 Nd3 34. Bxd3 cxd3 35. Qxc3 Qd6+ 36. Ng1 Bb7 37. e5 Qxd5 38. Qxc3 Ba6 39. Qb4 Qe4 40. Qxb5 Bxb5 41. Bxb5 g5 42. Nf3 Qxb3 43. Bxd3 Qd5 44. e6 fxe6 45. Bc4 1-0'},{id:"spassky-bronstein-1960",title:"The King's Gambit Immortal",event:"USSR Championship",year:1960,white:"Boris Spassky",black:"David Bronstein",description:"A brilliant King's Gambit game showcasing the romantic style of chess.",source:"chessgames.com/1106665",pgn:'[Event "USSR Championship"]\n[Site "Leningrad URS"]\n[Date "1960.02.28"]\n[Round "14"]\n[White "Boris Spassky"]\n[Black "David Bronstein"]\n[Result "1-0"]\n\n1. e4 e5 2. f4 exf4 3. Nf3 d5 4. exd5 Bd6 5. Nc3 Ne7 6. d4 O-O 7. Bd3 Nd7 8. O-O h6 9. Ne4 Nxd5 10. c4 Ne3 11. Bxe3 fxe3 12. c5 Be7 13. Bc2 Re8 14. Qd3 e2 15. Nd6 Nf8 16. Nxf7 exf1=Q+ 17. Rxf1 Bf5 18. Qxf5 Qd7 19. Qf4 Bf6 20. N3e5 Qe7 21. Bb3 Bxe5 22. Nxe5+ Kh7 23. Qe4+ 1-0'},{id:"nezhmetdinov-chernikov-1962",title:"Nezhmetdinov's Queen Sacrifice",event:"Russian Championship",year:1962,white:"Rashid Nezhmetdinov",black:"Oleg Chernikov",description:"A legendary attacking game featuring an incredible queen sacrifice.",source:"chessgames.com/1260330",pgn:'[Event "Russian Championship"]\n[Site "Baku URS"]\n[Date "1962.??.??"]\n[White "Rashid Nezhmetdinov"]\n[Black "Oleg Chernikov"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 Nc6 3. d4 cxd4 4. Nxd4 g6 5. Nc3 Bg7 6. Be3 Nf6 7. Bc4 O-O 8. Bb3 Ng4 9. Qxg4 Nxd4 10. Qh4 Qa5 11. O-O Bf6 12. Qxf6 Ne2+ 13. Nxe2 exf6 14. Nc3 Re8 15. Nd5 Re6 16. Bd4 Kg7 17. Rad1 d6 18. Rd3 Bd7 19. Rf3 Bb5 20. Bc3 Qd8 21. Nxf6 Bc6 22. Rh3 h5 23. f4 Kg7 24. f5 gxf5 25. Rxf5 Bxe4 26. Nxe4 Rxe4 27. Rxh5 Re1+ 28. Kf2 Re2+ 29. Kf3 Rg2 30. Rxh6 1-0'},{id:"karpov-seirawan-1982",title:"Karpov's Crushing Attack",event:"Mar del Plata",year:1982,white:"Anatoly Karpov",black:"Yasser Seirawan",description:"Karpov demonstrates his legendary technique in a perfect positional masterpiece.",source:"chessgames.com/1067025",pgn:'[Event "Mar del Plata"]\n[Site "Mar del Plata ARG"]\n[Date "1982.04.07"]\n[Round "10"]\n[White "Anatoly Karpov"]\n[Black "Yasser Seirawan"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 b6 4. Nc3 Bb7 5. a3 d5 6. cxd5 Nxd5 7. e3 Be7 8. Bb5+ c6 9. Bd3 Nxc3 10. bxc3 c5 11. O-O Nc6 12. Bb2 Rc8 13. Qe2 O-O 14. Rad1 Qc7 15. c4 cxd4 16. exd4 Na5 17. d5 exd5 18. cxd5 Bxd5 19. Bxh7+ Kxh7 20. Rxd5 Kg8 21. Bxg7 Kxg7 22. Ne5 Rfd8 23. Qg4+ Kf8 24. Qf5 f6 25. Nd7+ Rxd7 26. Rxd7 Qb8 27. Rd1 Qe8 28. Qd5 Qe6 29. Qb5 1-0'},{id:"lopez-amateur-1560",title:"Ruy Lopez's Legacy",event:"Madrid Casual",year:1560,white:"Ruy Lpez de Segura",black:"Amateur",description:"One of the earliest recorded games by the Spanish priest who invented the famous opening.",source:"chessgames.com",pgn:'[Event "Madrid Casual"]\n[Site "Madrid ESP"]\n[Date "1560.??.??"]\n[White "Ruy Lopez de Segura"]\n[Black "Amateur"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 b5 5. Bb3 Bc5 6. c3 Qe7 7. d4 Bb6 8. O-O Nf6 9. Re1 d6 10. Bg5 h6 11. Bh4 g5 12. Bg3 Bg4 13. h3 Bxf3 14. Qxf3 Nd8 15. dxe5 dxe5 16. Qf6 Qxf6 17. Bxf6 Rg8 18. Bxe5 c6 19. Nd2 Nc7 20. Nf3 Ne6 21. Rad1 Rd8 22. a4 Rxd1 23. Rxd1 1-0'},{id:"greco-amateur-1619",title:"Greco's Sacrifice",event:"Rome Casual",year:1619,white:"Gioachino Greco",black:"Amateur",description:"The Italian master demonstrates a beautiful attacking combination that inspired generations.",source:"chessgames.com/1250295",pgn:'[Event "Rome Casual"]\n[Site "Rome ITA"]\n[Date "1619.??.??"]\n[White "Gioachino Greco"]\n[Black "Amateur"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bc4 Bc5 4. c3 Nf6 5. d4 exd4 6. cxd4 Bb4+ 7. Nc3 Nxe4 8. O-O Nxc3 9. bxc3 Bxc3 10. Qb3 Bxa1 11. Bxf7+ Kf8 12. Bg5 Ne7 13. Ne5 Bxd4 14. Bg6 d5 15. Qf3+ Bf5 16. Bxf5 Bxe5 17. Be6+ Bf6 18. Bxf6 gxf6 19. Qxf6+ Ke8 20. Qf7# 1-0'},{id:"philidor-amateur-1790",title:"Philidor's Positional Gem",event:"London Casual",year:1790,white:"Franois-Andr Danican Philidor",black:"Amateur",description:"The father of positional chess demonstrates his legendary pawn structure understanding.",source:"chessgames.com/1275325",pgn:'[Event "London Casual"]\n[Site "London ENG"]\n[Date "1790.??.??"]\n[White "Francois-Andre Philidor"]\n[Black "Amateur"]\n[Result "1-0"]\n\n1. e4 e5 2. Bc4 c6 3. Qe2 d6 4. c3 f5 5. d3 Nf6 6. exf5 Bxf5 7. d4 e4 8. Bg5 d5 9. Bb3 Bd6 10. Nd2 Nbd7 11. h3 h6 12. Be3 Qe7 13. O-O-O O-O 14. g4 Bh7 15. Nh3 e3 16. fxe3 Qxe3 17. Nf2 Rae8 18. Rhe1 Qg3 19. Nd3 Ne4 20. Bf4 Qg6 21. Nf1 Ndf6 22. Bxd6 Nxd6 23. Ne5 Qf6 24. Re3 Nfe4 25. Rg3 g5 26. h4 Bg8 27. hxg5 hxg5 28. Nh2 1-0'},{id:"saint-amant-staunton-1843",title:"The First International Match",event:"London vs Paris Match",year:1843,white:"Pierre Charles Fournier de Saint-Amant",black:"Howard Staunton",description:"A pivotal game from the first great international chess match between England and France.",source:"chessgames.com/1072775",pgn:'[Event "London vs Paris Match"]\n[Site "Paris FRA"]\n[Date "1843.12.14"]\n[Round "14"]\n[White "Pierre de Saint-Amant"]\n[Black "Howard Staunton"]\n[Result "0-1"]\n\n1. d4 e6 2. c4 d5 3. e3 Nf6 4. Nc3 c5 5. Nf3 Nc6 6. a3 cxd4 7. exd4 Be7 8. c5 O-O 9. Bd3 b6 10. b4 a5 11. Na4 axb4 12. axb4 bxc5 13. bxc5 Rxa4 14. Rxa4 Nxd4 15. Qa1 Nxf3+ 16. gxf3 Nh5 17. Qa3 Bh4 18. Kd1 Qg5 19. Be3 Qg2 20. Rf1 Qxf3+ 21. Kc2 Bxf2 22. Bxf2 Qxf2+ 23. Kb3 d4 24. Ra7 Qe3 25. Qxe3 dxe3 26. Re1 Bb7 27. Rxe3 Nf4 28. Be4 Bxe4 29. Rxe4 Nd5 30. c6 Rc8 31. Rd4 Nc7 0-1'},{id:"morphy-anderssen-1858",title:"Morphy vs The Master",event:"Paris Casual",year:1858,white:"Paul Morphy",black:"Adolf Anderssen",description:"The American prodigy defeats the greatest European master in a brilliant attacking game.",source:"chessgames.com/1019066",pgn:'[Event "Paris Casual"]\n[Site "Paris FRA"]\n[Date "1858.12.27"]\n[White "Paul Morphy"]\n[Black "Adolf Anderssen"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 Nf6 4. d4 Nxd4 5. Nxd4 exd4 6. e5 c6 7. O-O cxb5 8. Bg5 Be7 9. exf6 Bxf6 10. Re1+ Kf8 11. Bxf6 Qxf6 12. c3 d5 13. cxd4 Be6 14. Nc3 a6 15. Re5 Rd8 16. Qh5 Qg6 17. Qxg6 hxg6 18. Rae1 Kf7 19. Nxd5 Rxd5 20. Rxd5 Bxd5 21. Re5 Bc6 22. Rc5 Bd7 23. d5 Re8 24. d6 Re1+ 25. Kf2 Re2+ 26. Kf3 Rxb2 27. Rxb5 g5 28. Rb7 Ke8 29. Rxb2 1-0'},{id:"blackburne-amateur-1880",title:"Blackburne's Blindfold Brilliancy",event:"London Blindfold Exhibition",year:1880,white:"Joseph Henry Blackburne",black:"Amateur",description:'The "Black Death" shows his legendary blindfold chess skills in a beautiful attacking game.',source:"chessgames.com/1252485",pgn:'[Event "London Blindfold Exhibition"]\n[Site "London ENG"]\n[Date "1880.??.??"]\n[White "Joseph Henry Blackburne"]\n[Black "Amateur"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bc4 Bc5 4. b4 Bxb4 5. c3 Ba5 6. d4 exd4 7. O-O dxc3 8. Qb3 Qe7 9. Nxc3 Nf6 10. Nd5 Nxd5 11. exd5 Ne5 12. Nxe5 Qxe5 13. Bb2 Qg5 14. h4 Qxh4 15. Bxg7 Rg8 16. Rfe1+ Kd8 17. Qg3 Qxg3 18. fxg3 Rxg7 19. Re8# 1-0'},{id:"zukertort-blackburne-1883",title:"The Brilliancy Prize",event:"London Tournament",year:1883,white:"Johannes Zukertort",black:"Joseph Henry Blackburne",description:"Won the brilliancy prize at London 1883, considered one of the greatest games of the 19th century.",source:"chessgames.com/1018922",pgn:'[Event "London Tournament"]\n[Site "London ENG"]\n[Date "1883.05.04"]\n[Round "?"]\n[White "Johannes Zukertort"]\n[Black "Joseph Henry Blackburne"]\n[Result "1-0"]\n\n1. c4 e6 2. e3 Nf6 3. Nf3 b6 4. Be2 Bb7 5. O-O d5 6. d4 Bd6 7. Nc3 O-O 8. b3 Nbd7 9. Bb2 Qe7 10. Nb5 Ne4 11. Nxd6 cxd6 12. Nd2 Ndf6 13. f3 Nxd2 14. Qxd2 dxc4 15. Bxc4 d5 16. Bd3 Rfc8 17. Rae1 Rc7 18. e4 Rac8 19. e5 Ne8 20. f4 g6 21. Re3 f5 22. exf6 Nxf6 23. f5 Ne4 24. Bxe4 dxe4 25. fxg6 Rc2 26. gxh7+ Kh8 27. d5+ e5 28. Qb4 R8c5 29. Rf8+ Kxh7 30. Qxe4+ Kg7 31. Bxe5+ Kxf8 32. Bg7+ Kg8 33. Qxe7 1-0'},{id:"bird-amateur-1886",title:"Bird's Opening Showcase",event:"London Casual",year:1886,white:"Henry Edward Bird",black:"Amateur",description:"The inventor of Bird's Opening demonstrates its attacking potential.",source:"chessgames.com",pgn:'[Event "London Casual"]\n[Site "London ENG"]\n[Date "1886.??.??"]\n[White "Henry Edward Bird"]\n[Black "Amateur"]\n[Result "1-0"]\n\n1. f4 d5 2. Nf3 Nc6 3. e3 Nf6 4. b3 Bg4 5. Bb2 e6 6. Be2 Bd6 7. O-O O-O 8. Ne5 Bxe2 9. Qxe2 Bxe5 10. fxe5 Nd7 11. d4 f6 12. exf6 Nxf6 13. Nd2 Qe7 14. Nf3 Ne4 15. c4 Rxf3 16. gxf3 Qg5+ 17. Kh1 Qg2# 0-1'},{id:"chigorin-tarrasch-1893",title:"Russian vs German School",event:"St. Petersburg Match",year:1893,white:"Mikhail Chigorin",black:"Siegbert Tarrasch",description:"A clash of chess philosophies between two of the greatest masters of the era.",source:"chessgames.com/1019068",pgn:'[Event "St. Petersburg Match"]\n[Site "St. Petersburg RUS"]\n[Date "1893.02.?"]\n[Round "3"]\n[White "Mikhail Chigorin"]\n[Black "Siegbert Tarrasch"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 Nf6 4. d3 d6 5. c3 g6 6. Nbd2 Bg7 7. Nf1 O-O 8. Ba4 Nd7 9. Ne3 Nc5 10. Bc2 Ne6 11. h4 Ned4 12. Nxd4 Nxd4 13. h5 Nxc2 14. Qxc2 f5 15. hxg6 hxg6 16. Qb3+ Kh7 17. Nf5 Bxf5 18. exf5 Qf6 19. Qe6 Qxf5 20. Qxf5 Rxf5 21. Be3 b6 22. O-O-O Rf7 23. f3 c6 24. g4 a5 25. Kb1 d5 26. Rh4 Bf6 27. Rh3 Kg7 28. Rdh1 e4 29. fxe4 dxe4 30. d4 Rf8 31. Rf1 Bd8 32. Rxf8 Rxf8 33. Rh4 1-0'},{id:"pillsbury-tarrasch-1895",title:"Hastings Brilliancy",event:"Hastings Tournament",year:1895,white:"Harry Nelson Pillsbury",black:"Siegbert Tarrasch",description:"Pillsbury's stunning victory en route to winning the famous Hastings 1895 tournament.",source:"chessgames.com/1132755",pgn:'[Event "Hastings Tournament"]\n[Site "Hastings ENG"]\n[Date "1895.08.12"]\n[Round "6"]\n[White "Harry Nelson Pillsbury"]\n[Black "Siegbert Tarrasch"]\n[Result "1-0"]\n\n1. d4 d5 2. c4 e6 3. Nc3 Nf6 4. Bg5 Be7 5. Nf3 Nbd7 6. Rc1 O-O 7. e3 b6 8. cxd5 exd5 9. Bb5 Bb7 10. O-O c5 11. Bxf6 Nxf6 12. dxc5 bxc5 13. Qa4 Qb6 14. Bxd7 Bxd7 15. Qxa7 Qxa7 16. Rxc5 Bb5 17. Rd1 Rfc8 18. Rxc8+ Rxc8 19. Nd4 Bc4 20. f3 g6 21. Kf2 Rc5 22. Ndb5 Ne8 23. e4 dxe4 24. fxe4 Bf6 25. e5 Bg5 26. Rd8 Kf8 27. Nd4 Rxe5 28. Nf3 Ra5 29. a3 Bf6 30. Rb8 Rc5 31. b4 Bd5 32. Rd8 1-0'},{id:"tarrasch-lasker-1908",title:"World Championship Clash",event:"World Championship",year:1908,white:"Siegbert Tarrasch",black:"Emanuel Lasker",description:"Lasker defends his world title against the Doctor of Chess in this classic encounter.",source:"chessgames.com/1095770",pgn:'[Event "World Championship"]\n[Site "Dusseldorf/Munich GER"]\n[Date "1908.08.17"]\n[Round "1"]\n[White "Siegbert Tarrasch"]\n[Black "Emanuel Lasker"]\n[Result "0-1"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 Nf6 4. O-O d6 5. d4 Bd7 6. Nc3 Be7 7. Re1 exd4 8. Nxd4 Nxd4 9. Bxd7+ Qxd7 10. Qxd4 O-O 11. Bf4 Rfe8 12. Rad1 Qc6 13. Qc4 Qb6 14. Qb3 Qc6 15. Qc4 Qb6 16. Rd3 Nd7 17. Qb3 Qa5 18. Nd5 Bd8 19. Red1 c6 20. Nc3 Nc5 21. Qc4 Ne6 22. Bg3 b5 23. Qb3 Bb6 24. Ne2 Qa4 25. Qxa4 bxa4 26. c3 Rab8 27. Rb1 a5 28. Nc1 a3 29. b3 c5 30. Nd3 c4 31. bxc4 Nc5 32. Nxc5 dxc5 0-1'},{id:"janowski-lasker-1909",title:"Lasker's Defense",event:"Paris Match",year:1909,white:"Dawid Janowski",black:"Emanuel Lasker",description:"World Champion Lasker showcases his legendary fighting spirit and endgame mastery.",source:"chessgames.com/1095795",pgn:'[Event "Paris Match"]\n[Site "Paris FRA"]\n[Date "1909.10.?"]\n[Round "3"]\n[White "Dawid Janowski"]\n[Black "Emanuel Lasker"]\n[Result "0-1"]\n\n1. d4 d5 2. c4 e6 3. Nc3 c5 4. cxd5 exd5 5. Nf3 Nc6 6. g3 Nf6 7. Bg2 Be7 8. O-O O-O 9. dxc5 Bxc5 10. Na4 Be7 11. Be3 Re8 12. Rc1 Bg4 13. h3 Bh5 14. Nc5 Bxc5 15. Rxc5 Ne4 16. Rc2 Rc8 17. Rxc8 Qxc8 18. Qa4 Qc4 19. Qa3 Bg6 20. Nd4 Qc5 21. Qb3 Ne5 22. Rd1 h6 23. Bf4 Qb6 24. Qxb6 axb6 25. Bxe5 Rxe5 26. Bxe4 Bxe4 27. f3 Bd3 28. e3 Ra5 29. a3 Kf8 30. Kf2 Ke7 31. Rd2 Be4 32. Rc2 Kd6 33. Ke2 Ra4 34. Kd2 b5 0-1'},{id:"lasker-schlechter-1910",title:"The Drawn Match",event:"World Championship",year:1910,white:"Emanuel Lasker",black:"Carl Schlechter",description:"The dramatic final game where Lasker saved his title in a near-impossible position.",source:"chessgames.com/1095845",pgn:'[Event "World Championship"]\n[Site "Vienna/Berlin"]\n[Date "1910.02.10"]\n[Round "10"]\n[White "Emanuel Lasker"]\n[Black "Carl Schlechter"]\n[Result "1-0"]\n\n1. d4 d5 2. c4 c6 3. Nf3 Nf6 4. e3 g6 5. Nc3 Bg7 6. Bd3 O-O 7. Qc2 Na6 8. a3 dxc4 9. Bxc4 b5 10. Bd3 b4 11. Na4 bxa3 12. bxa3 Bb7 13. Rb1 Qc7 14. Ne5 Nh5 15. g4 Bxe5 16. gxh5 Bg7 17. hxg6 hxg6 18. Qc4 Nc5 19. Nc3 Nxd3+ 20. Qxd3 Qa5 21. Bd2 Qh5 22. f3 Rfd8 23. Qc4 e5 24. Ne2 exd4 25. exd4 Qf5 26. Bc3 Bxf3 27. Qxf7+ Kh7 28. Rf1 Qb5 29. Rxb5 cxb5 30. Qxg6+ Kh8 31. Qh5+ Kg8 32. Qg6 Rd5 33. Nf4 Rad8 34. Nxd5 Rxd5 35. Rxf3 Rxd4 36. Rf8+ Kh7 37. Qf5+ Kg7 38. Qf7+ 1-0'},{id:"torre-lasker-1925",title:"Torre's Windmill",event:"Moscow Tournament",year:1925,white:"Carlos Torre",black:"Emanuel Lasker",description:"The famous windmill combination that made chess history - discovered check after discovered check.",source:"chessgames.com/1095985",pgn:'[Event "Moscow Tournament"]\n[Site "Moscow URS"]\n[Date "1925.11.?"]\n[Round "?"]\n[White "Carlos Torre"]\n[Black "Emanuel Lasker"]\n[Result "1-0"]\n\n1. d4 Nf6 2. Nf3 e6 3. Bg5 c5 4. e3 cxd4 5. exd4 Be7 6. Nbd2 d6 7. c3 Nbd7 8. Bd3 b6 9. Nc4 Bb7 10. Qe2 Qc7 11. O-O O-O 12. Rfe1 Rfe8 13. Rad1 Nf8 14. Bc1 Nd5 15. Ng5 b5 16. Na3 b4 17. cxb4 Nxb4 18. Qh5 Bxg5 19. Bxg5 Nxd3 20. Rxd3 Qa5 21. b4 Qf5 22. Rg3 h6 23. Nc4 Qd5 24. Ne3 Qb5 25. Bf6 Qxh5 26. Rxg7+ Kh8 27. Rxf7+ Kg8 28. Rg7+ Kh8 29. Rxb7+ Kg8 30. Rg7+ Kh8 31. Rg5+ Kh7 32. Rxh5 Kg6 33. Rh3 Kxf6 34. Rxh6+ Kg5 35. Rh3 Reb8 36. Rg3+ Kf6 37. Rf3+ Ke7 38. Nc4 a5 39. Re3 1-0'},{id:"adams-torre-1920",title:"Adams' Brilliancy",event:"New Orleans Casual",year:1920,white:"Eugene Adams",black:"Carlos Torre",description:"A dazzling game featuring one of the most famous queen traps in chess history.",source:"chessgames.com/1258889",pgn:'[Event "New Orleans Casual"]\n[Site "New Orleans USA"]\n[Date "1920.??.??"]\n[White "Eugene Adams"]\n[Black "Carlos Torre"]\n[Result "0-1"]\n\n1. e4 e5 2. Nf3 d6 3. d4 exd4 4. Qxd4 Nc6 5. Bb5 Bd7 6. Bxc6 Bxc6 7. Nc3 Nf6 8. O-O Be7 9. Nd5 Bxd5 10. exd5 O-O 11. Bg5 c6 12. c4 cxd5 13. cxd5 Re8 14. Rfe1 a5 15. Re2 Rc8 16. Rae1 Qc7 17. Bxf6 Bxf6 18. Qg4 Rxe2 19. Rxe2 Qc1+ 20. Re1 Qc2 21. Qa4 Rc4 22. Qb3 Qxb3 23. axb3 Rc2 0-1'},{id:"nimzowitsch-capablanca-1927",title:"Capablanca's Endgame",event:"New York Tournament",year:1927,white:"Aron Nimzowitsch",black:"Jose Raul Capablanca",description:"Capablanca demonstrates his legendary endgame technique against the hypermodern pioneer.",source:"chessgames.com/1012770",pgn:'[Event "New York Tournament"]\n[Site "New York USA"]\n[Date "1927.02.25"]\n[Round "5"]\n[White "Aron Nimzowitsch"]\n[Black "Jose Raul Capablanca"]\n[Result "0-1"]\n\n1. c4 Nf6 2. Nf3 e6 3. d4 d5 4. e3 Be7 5. Nbd2 O-O 6. Bd3 c5 7. dxc5 Bxc5 8. O-O Nc6 9. b3 Qe7 10. Bb2 Rd8 11. Qc2 dxc4 12. bxc4 e5 13. Rfe1 Bg4 14. h3 Bh5 15. Nh4 Bg6 16. Nxg6 hxg6 17. a3 Rac8 18. Qb3 Be7 19. Qb5 a6 20. Qa4 Qc7 21. Rac1 b5 22. cxb5 axb5 23. Qb3 b4 24. a4 Ra8 25. Ba1 Ne4 26. Nxe4 Rxd3 27. Qb1 Ra3 28. Nc5 Bxc5 29. Rxc5 Qb6 30. Rxe5 Nxe5 31. Bxe5 Qd8 32. Qc1 Rxa4 33. Qc5 Ra1 34. Rxa1 Rxa1+ 35. Kh2 Qd1 0-1'},{id:"capablanca-bernstein-1914",title:"Capablanca's Spectacular Finish",event:"St. Petersburg Tournament",year:1914,white:"Jose Raul Capablanca",black:"Ossip Bernstein",description:"A brilliant tactical finish by the Cuban genius in one of the greatest tournaments ever held.",source:"chessgames.com/1094485",pgn:'[Event "St. Petersburg Tournament"]\n[Site "St. Petersburg RUS"]\n[Date "1914.05.08"]\n[Round "?"]\n[White "Jose Raul Capablanca"]\n[Black "Ossip Bernstein"]\n[Result "1-0"]\n\n1. d4 d5 2. Nf3 Nf6 3. c4 e6 4. Nc3 Nbd7 5. Bg5 Be7 6. e3 O-O 7. Rc1 b6 8. cxd5 exd5 9. Qa4 Bb7 10. Ba6 Bxa6 11. Qxa6 c5 12. Bxf6 Nxf6 13. dxc5 bxc5 14. O-O Qb6 15. Qe2 c4 16. Rfd1 Rfd8 17. Nd4 Bb4 18. b3 Rac8 19. bxc4 dxc4 20. Rc2 Bxc3 21. Rxc3 Nd5 22. Rc2 c3 23. Rdc1 Rc5 24. Nb3 Rc6 25. Na5 Rc5 26. Nb7 Qxb7 27. Rxc3 Rxc3 28. Rxc3 Qb4 29. Rc8 Rxc8 30. Qxb4 1-0'},{id:"maroczy-tartakower-1922",title:"Maroczy Bind Mastery",event:"Teplitz-Schonau Tournament",year:1922,white:"Geza Maroczy",black:"Savielly Tartakower",description:"The inventor of the Maroczy Bind demonstrates his strategic mastery.",source:"chessgames.com/1096125",pgn:'[Event "Teplitz-Schonau Tournament"]\n[Site "Teplitz-Schonau CZE"]\n[Date "1922.09.?"]\n[Round "?"]\n[White "Geza Maroczy"]\n[Black "Savielly Tartakower"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 Nc6 3. d4 cxd4 4. Nxd4 g6 5. c4 Bg7 6. Be3 Nf6 7. Nc3 O-O 8. Be2 d6 9. O-O Bd7 10. Qd2 Nxd4 11. Bxd4 Bc6 12. f3 a5 13. b3 Nd7 14. Bxg7 Kxg7 15. Nd5 e6 16. Ne3 Qh4 17. Qd4+ Kg8 18. Rad1 Rfd8 19. Qc3 b6 20. Rd2 Rac8 21. Rfd1 Ne5 22. Bf1 f5 23. exf5 gxf5 24. Qxa5 Nc6 25. Qa6 Ne5 26. Qa3 Nxf3+ 27. gxf3 Qg3+ 28. Kh1 Qxf3+ 29. Kg1 Rd7 30. Qf8+ Rxf8 31. Rxd7 Qg3+ 32. Kh1 Qf3+ 33. Kg1 1-0'},{id:"bogoljubow-alekhine-1929",title:"Alekhine's Attack",event:"World Championship",year:1929,white:"Efim Bogoljubow",black:"Alexander Alekhine",description:"Alekhine defends his world title with a stunning attacking masterpiece.",source:"chessgames.com/1012578",pgn:'[Event "World Championship"]\n[Site "Wiesbaden GER"]\n[Date "1929.09.?"]\n[Round "11"]\n[White "Efim Bogoljubow"]\n[Black "Alexander Alekhine"]\n[Result "0-1"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 b6 4. g3 Bb7 5. Bg2 c5 6. d5 exd5 7. Nh4 g6 8. Nc3 Bg7 9. O-O O-O 10. cxd5 d6 11. e4 a6 12. a4 Nbd7 13. Re1 Re8 14. h3 Rb8 15. Bf4 Qe7 16. Qd2 Ne5 17. Bxe5 Qxe5 18. f4 Qe7 19. Nf3 Bc8 20. Nd4 Bd7 21. Kh2 Rbd8 22. Rab1 b5 23. axb5 axb5 24. b3 b4 25. Nce2 Nh5 26. Rec1 Bb5 27. Bf1 Bxd4 28. Nxd4 Bxf1 29. Rxf1 Nxf4 30. Rxf4 Qe5 31. Qf2 Qxd5 32. Rbf1 Re7 33. R4f3 Rde8 34. Qg2 Qxg2+ 35. Kxg2 Rxe4 36. Nf5 Re2+ 37. Rf2 R8e3 0-1'},{id:"najdorf-glucksberg-1935",title:"The Polish Immortal",event:"Warsaw Tournament",year:1935,white:"Miguel Najdorf",black:"NN (Glucksberg)",description:"One of the most spectacular attacking games ever, featuring multiple piece sacrifices.",source:"chessgames.com/1096285",pgn:'[Event "Warsaw Tournament"]\n[Site "Warsaw POL"]\n[Date "1935.??.??"]\n[White "Miguel Najdorf"]\n[Black "NN"]\n[Result "1-0"]\n\n1. d4 f5 2. c4 Nf6 3. Nc3 e6 4. Nf3 d5 5. e3 c6 6. Bd3 Bd6 7. O-O O-O 8. Ne5 Nbd7 9. f4 Ne4 10. Bxe4 fxe4 11. Nxd7 Bxd7 12. Qh5 Bxf4 13. Rxf4 Rxf4 14. exf4 Qh4 15. Qxh4 dxc4 16. f5 exf5 17. Re1 Re8 18. Rxe4 fxe4 19. Qxe4 Be6 20. Qxc6 Bf7 21. Bg5 Rd8 22. d5 Bxd5 23. Qxb7 Bf7 24. Qxa7 Rb8 25. Bf6 1-0'},{id:"lilienthal-capablanca-1936",title:"Defeating the Legend",event:"Moscow Tournament",year:1936,white:"Andor Lilienthal",black:"Jose Raul Capablanca",description:"A stunning upset where Lilienthal defeats the great Capablanca with beautiful play.",source:"chessgames.com/1094615",pgn:'[Event "Moscow Tournament"]\n[Site "Moscow URS"]\n[Date "1936.05.15"]\n[Round "?"]\n[White "Andor Lilienthal"]\n[Black "Jose Raul Capablanca"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. a3 Bxc3+ 5. bxc3 b6 6. f3 d5 7. Bg5 h6 8. Bh4 Ba6 9. e4 Bxc4 10. Bxc4 dxc4 11. Qa4+ Qd7 12. Qxc4 Qc6 13. Qe2 Nbd7 14. Ne2 Rd8 15. O-O Qxc3 16. Rac1 Qxa3 17. Rxc7 O-O 18. e5 Nd5 19. Rxd7 Rxd7 20. Qc4 Qa6 21. Ng3 Qc8 22. Nh5 Kh7 23. Bg3 Rc7 24. Qe4+ Kh8 25. Nf6 Qa6 26. Nxd5 exd5 27. Qxd5 Qe2 28. Rf2 1-0'},{id:"flohr-botvinnik-1933",title:"Botvinnik's Rise",event:"Leningrad Tournament",year:1933,white:"Salo Flohr",black:"Mikhail Botvinnik",description:"A key game in the young Botvinnik's rise to world-class status.",source:"chessgames.com/1031925",pgn:'[Event "Leningrad Tournament"]\n[Site "Leningrad URS"]\n[Date "1933.03.?"]\n[Round "?"]\n[White "Salo Flohr"]\n[Black "Mikhail Botvinnik"]\n[Result "0-1"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. Qc2 d5 5. cxd5 exd5 6. Bg5 h6 7. Bxf6 Qxf6 8. a3 Bxc3+ 9. Qxc3 c6 10. e3 Bf5 11. Ne2 Nd7 12. Ng3 Bg6 13. Bd3 Bxd3 14. Qxd3 O-O 15. O-O Rfe8 16. Rac1 Qg5 17. Qf3 Re6 18. Rc2 Rae8 19. Rfc1 Nf6 20. Qd1 Ne4 21. Nxe4 dxe4 22. Qb3 b6 23. Qc4 Qf5 24. Qc3 Rg6 25. Kh1 Qg5 26. f4 exf3 27. Qxf3 Rf6 28. Qg4 Qxg4 29. hxg4 Re4 0-1'},{id:"tartakower-reti-1923",title:"Hypermodern Clash",event:"Vienna Tournament",year:1923,white:"Savielly Tartakower",black:"Richard Reti",description:"Two pioneers of hypermodern chess clash in a fascinating strategic battle.",source:"chessgames.com/1096345",pgn:'[Event "Vienna Tournament"]\n[Site "Vienna AUT"]\n[Date "1923.??.??"]\n[Round "?"]\n[White "Savielly Tartakower"]\n[Black "Richard Reti"]\n[Result "0-1"]\n\n1. d4 Nf6 2. Nf3 e6 3. c4 Bb4+ 4. Bd2 Qe7 5. g3 Nc6 6. Bg2 Bxd2+ 7. Nbxd2 d6 8. O-O e5 9. e3 O-O 10. Qc2 Re8 11. d5 Nd8 12. Nh4 g6 13. f4 exf4 14. exf4 Bg4 15. Ndf3 Nf7 16. Rae1 Qd7 17. Rxe8+ Rxe8 18. Re1 Rxe1+ 19. Nxe1 Qc8 20. Qd2 Qe8 21. Kf2 h5 22. h3 Bd7 23. Nd3 Ng4+ 24. hxg4 hxg4 25. f5 Qe3+ 26. Qxe3 Nxe3 27. fxg6 Nxg2 28. gxf7+ Kxf7 29. Nxg2 Be8 30. Nf4 Bf7 0-1'},{id:"spielmann-reti-1928",title:"Spielmann's Sacrifice",event:"Semmering Tournament",year:1928,white:"Rudolf Spielmann",black:"Richard Reti",description:"Spielmann the master of attack against Reti the hypermodern genius.",source:"chessgames.com/1128025",pgn:'[Event "Semmering Tournament"]\n[Site "Semmering AUT"]\n[Date "1928.03.?"]\n[Round "?"]\n[White "Rudolf Spielmann"]\n[Black "Richard Reti"]\n[Result "1-0"]\n\n1. e4 c6 2. d4 d5 3. Nc3 dxe4 4. Nxe4 Nf6 5. Nxf6+ exf6 6. Bc4 Bd6 7. Qh5 O-O 8. Ne2 Re8 9. Be3 Be6 10. Bxe6 Rxe6 11. Qf3 Nd7 12. O-O-O Qa5 13. Kb1 Re8 14. h4 Nb6 15. c3 Nc4 16. Bc1 Re6 17. g4 Rae8 18. Ng3 Qb5 19. Nf5 Bf8 20. h5 Qf1 21. h6 g6 22. Rxf1 gxf5 23. Qxf5 Re1 24. Qh7# 1-0'},{id:"zurich-1953",title:"Zurich 1953 Brilliancy",event:"Zurich Candidates",year:1953,white:"Samuel Reshevsky",black:"Miguel Najdorf",description:"One of many brilliant games from the legendary Zurich Candidates tournament.",source:"chessgames.com/1127545",pgn:'[Event "Zurich Candidates"]\n[Site "Zurich SUI"]\n[Date "1953.09.05"]\n[Round "?"]\n[White "Samuel Reshevsky"]\n[Black "Miguel Najdorf"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 g6 3. g3 Bg7 4. Bg2 O-O 5. Nc3 d6 6. Nf3 Nc6 7. O-O Bf5 8. d5 Na5 9. Nd2 c5 10. Qc2 Bd7 11. b3 a6 12. Bb2 b5 13. Rae1 Rb8 14. e4 bxc4 15. bxc4 Nb7 16. f4 e5 17. fxe5 dxe5 18. Nc4 Ng4 19. Rxf7 Rxf7 20. Nd6 Qa8 21. Nxf7 Kxf7 22. d6 Nd8 23. Bc1 Ke8 24. Nd5 Nf6 25. Bb2 Nxd5 26. exd5 Rb6 27. Bxe5 Rxd6 28. Bxg7 Nf7 29. Qf5 Rb6 30. Re3 Rb1+ 31. Bf1 Qd8 32. Qa5 1-0'},{id:"botvinnik-smyslov-1954",title:"World Championship Battle",event:"World Championship",year:1954,white:"Mikhail Botvinnik",black:"Vasily Smyslov",description:"A crucial game from their epic world championship rivalry.",source:"chessgames.com/1031985",pgn:'[Event "World Championship"]\n[Site "Moscow URS"]\n[Date "1954.03.20"]\n[Round "9"]\n[White "Mikhail Botvinnik"]\n[Black "Vasily Smyslov"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. e3 O-O 5. Bd3 d5 6. Nf3 c5 7. O-O Nc6 8. a3 Bxc3 9. bxc3 dxc4 10. Bxc4 Qc7 11. Ba2 e5 12. h3 Re8 13. Qc2 e4 14. Nd2 Bf5 15. a4 Rad8 16. Ba3 b6 17. Bb1 Na5 18. Bc1 h6 19. f3 exf3 20. Nxf3 Be4 21. Bxe4 Nxe4 22. Nd2 Nf6 23. e4 c4 24. e5 Nd5 25. Ne4 Qc6 26. Qe2 Nc7 27. Nd6 Re7 28. Bf4 Ncd5 29. Bg3 b5 30. axb5 Qxb5 31. Ra5 Qb6 32. Rfa1 Nc3 33. Qe3 Nb4 34. Rxa7 Rxa7 35. Rxa7 1-0'},{id:"bronstein-brilliancy-1951",title:"Bronstein's Sorcery",event:"World Championship",year:1951,white:"David Bronstein",black:"Mikhail Botvinnik",description:"Bronstein's creative genius on display in his world championship match with Botvinnik.",source:"chessgames.com/1032045",pgn:'[Event "World Championship"]\n[Site "Moscow URS"]\n[Date "1951.03.16"]\n[Round "1"]\n[White "David Bronstein"]\n[Black "Mikhail Botvinnik"]\n[Result "1-0"]\n\n1. d4 d5 2. c4 e6 3. Nc3 Nf6 4. Bg5 Nbd7 5. e3 c6 6. Nf3 Qa5 7. Nd2 Bb4 8. Qc2 O-O 9. Be2 e5 10. O-O Re8 11. a3 Bf8 12. Bh4 e4 13. Bg3 Bd6 14. Bxd6 Qxd6 15. cxd5 cxd5 16. Nb3 a5 17. Rac1 Ra6 18. Rfd1 Nb8 19. Nd2 Nc6 20. Qb3 Be6 21. Nf1 Rb6 22. Qa2 Qb8 23. Ng3 Rb3 24. Nf5 Bxf5 25. Qxb3 Be6 26. Qb5 Nd8 27. Rc5 a4 28. Nxd5 Bxd5 29. Qxd5 Nc6 30. Rxc6 bxc6 31. Qxc6 Qb3 32. d5 1-0'},{id:"reshevsky-najdorf-1953",title:"Battle of Titans",event:"Zurich Candidates",year:1953,white:"Samuel Reshevsky",black:"Miguel Najdorf",description:"A fierce battle between two of the strongest players outside the USSR.",source:"chessgames.com/1127550",pgn:'[Event "Zurich Candidates"]\n[Site "Zurich SUI"]\n[Date "1953.08.28"]\n[Round "1"]\n[White "Samuel Reshevsky"]\n[Black "Miguel Najdorf"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. e3 c5 5. Bd3 O-O 6. Nf3 d5 7. O-O Nc6 8. a3 Bxc3 9. bxc3 Qc7 10. cxd5 exd5 11. Bb2 Re8 12. c4 Bg4 13. Qc2 dxc4 14. Bxc4 cxd4 15. exd4 Bxf3 16. gxf3 Rad8 17. Rad1 Ne7 18. Rfe1 Ned5 19. Bc1 Nb6 20. Bd3 Nbd5 21. Bb2 g6 22. Qc5 Rd6 23. Bc4 Rf6 24. Qa5 Qxa5 25. Rxe8+ Nxe8 26. Bxd5 Rxf3 27. Kg2 Rf6 28. Rd3 Nf6 29. Bxf6 Rxf6 30. Bxb7 Rb6 31. Bc8 Rb8 32. Bf5 Kg7 33. Rd6 1-0'},{id:"spassky-petrosian-1969",title:"Spassky Takes the Crown",event:"World Championship",year:1969,white:"Boris Spassky",black:"Tigran Petrosian",description:"Spassky's decisive victory that made him the 10th World Champion.",source:"chessgames.com/1106825",pgn:'[Event "World Championship"]\n[Site "Moscow URS"]\n[Date "1969.05.17"]\n[Round "19"]\n[White "Boris Spassky"]\n[Black "Tigran Petrosian"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 a6 6. Bg5 Nbd7 7. Bc4 Qa5 8. Qd2 e6 9. O-O-O Be7 10. Rhe1 Nc5 11. Bb3 O-O 12. Bxf6 Bxf6 13. Nd5 Qxd2+ 14. Rxd2 exd5 15. exd5 Bg5 16. f4 Bxf4 17. Rxe8+ Rxe8 18. g3 Bg5 19. Rf2 Ne4 20. Re2 f5 21. Rxe4 fxe4 22. Bd1 Bf5 23. Nc6 b5 24. Nxb8 Rxb8 25. Be2 Kf7 26. Kd2 Ke7 27. Ke3 Kd8 28. Kf4 Be7 29. Kxe4 Bf6 30. c4 bxc4 31. Bxc4 Kd7 32. Bb5+ Kc8 33. Kf5 Bd7 34. Bxd7+ Kxd7 35. Kf6 1-0'},{id:"petrosian-fischer-1971",title:"Fischer Challenges",event:"Candidates Final",year:1971,white:"Tigran Petrosian",black:"Bobby Fischer",description:"Fischer's march to the world championship through the former world champion.",source:"chessgames.com/1044063",pgn:'[Event "Candidates Final"]\n[Site "Buenos Aires ARG"]\n[Date "1971.10.07"]\n[Round "3"]\n[White "Tigran Petrosian"]\n[Black "Bobby Fischer"]\n[Result "0-1"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. Nf3 c5 5. e3 Nc6 6. Bd3 Bxc3+ 7. bxc3 d6 8. e4 e5 9. d5 Ne7 10. Nh4 h6 11. f4 Ng6 12. Nxg6 fxg6 13. fxe5 dxe5 14. Be3 b6 15. O-O O-O 16. a4 a5 17. Rb1 Bd7 18. Rb2 Rb8 19. Rbf2 Qe7 20. Bc2 g5 21. Bd3 Qe6 22. Bc2 Qg6 23. Bd3 Nh5 24. Rxf8+ Rxf8 25. Rxf8+ Kxf8 26. Bd2 Nf4 27. Bf1 Ke7 28. Kf2 Kd6 29. Qa1 Kc7 30. Qa3 Qg6 31. Be3 Be6 32. g3 Ne2 33. Bxe2 Qxe4 34. Bf1 Qf3+ 35. Ke1 Bxc4 0-1'},{id:"geller-fischer-1967",title:"Fischer's Nemesis",event:"Skopje Tournament",year:1967,white:"Efim Geller",black:"Bobby Fischer",description:"Geller, one of the few players with a winning record against Fischer, demonstrates why.",source:"chessgames.com/1043925",pgn:'[Event "Skopje Tournament"]\n[Site "Skopje YUG"]\n[Date "1967.09.28"]\n[Round "4"]\n[White "Efim Geller"]\n[Black "Bobby Fischer"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 a6 6. Be2 e5 7. Nb3 Be7 8. O-O O-O 9. Kh1 b6 10. f4 Bb7 11. Bf3 Qc7 12. g4 Nc6 13. g5 Nd7 14. Bg4 Rac8 15. fxe5 dxe5 16. Nd5 Bxd5 17. exd5 Nd4 18. Nxd4 exd4 19. Bf5 Rcd8 20. c4 Nb8 21. Qg4 Bd6 22. b3 Rde8 23. Bb2 Qc5 24. Rac1 Re5 25. Be4 g6 26. Rf6 Nd7 27. Rxd6 Qe7 28. Qh4 Nc5 29. Rf1 Nxe4 30. Qxe4 Rfe8 31. Qd3 Qe2 32. Qxe2 R5xe2 33. Rxa6 Rxb2 34. Ra7 Ree2 35. d6 1-0'},{id:"kholmov-bronstein-1964",title:"Soviet Chess Art",event:"USSR Championship",year:1964,white:"Ratmir Kholmov",black:"David Bronstein",description:"A brilliant creative game between two Soviet masters.",source:"chessgames.com/1032175",pgn:'[Event "USSR Championship"]\n[Site "Kiev URS"]\n[Date "1964.12.?"]\n[Round "?"]\n[White "Ratmir Kholmov"]\n[Black "David Bronstein"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. e3 c5 5. Bd3 O-O 6. Nf3 d5 7. O-O dxc4 8. Bxc4 Nbd7 9. Qe2 a6 10. a4 cxd4 11. exd4 Be7 12. Rd1 Nb6 13. Bb3 Nbd5 14. Bg5 b6 15. Ne5 Bb7 16. Rac1 Qc7 17. Nxd5 Bxd5 18. Bxd5 Nxd5 19. Nc4 Rad8 20. Qf3 Bf6 21. Bxf6 Nxf6 22. Qb3 Rd5 23. Ne3 Rdd8 24. Rc6 Qd7 25. Rdc1 h6 26. Qb4 Nd5 27. Nxd5 exd5 28. Qd6 Qxd6 29. Rxd6 Rxd6 30. Rc8 Rxc8 31. Rxd6 1-0'},{id:"suetin-spassky-1963",title:"Spassky's Brilliance",event:"Leningrad Championship",year:1963,white:"Alexei Suetin",black:"Boris Spassky",description:"A creative masterpiece by the future world champion.",source:"chessgames.com/1106735",pgn:'[Event "Leningrad Championship"]\n[Site "Leningrad URS"]\n[Date "1963.??.??"]\n[White "Alexei Suetin"]\n[Black "Boris Spassky"]\n[Result "0-1"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 a6 6. Be2 e5 7. Nb3 Be7 8. O-O O-O 9. Be3 Be6 10. f4 exf4 11. Rxf4 Nc6 12. Nd5 Bxd5 13. exd5 Ne5 14. Bf3 Qc7 15. Qe2 Rfe8 16. Raf1 Bd8 17. Qf2 Bb6 18. Bxb6 Qxb6 19. Nd4 Nxf3+ 20. Qxf3 Qxd4+ 21. Kh1 Re5 22. R1f3 Rae8 23. Qg3 Rxd5 24. R4f1 Qd2 25. Rxf6 gxf6 26. Qxd6 Rxd6 27. Rxf6 Kg7 28. Rb6 Re2 29. Rxb7 Rxc2 0-1'},{id:"korchnoi-karpov-1978",title:"The Baguio Thriller",event:"World Championship",year:1978,white:"Viktor Korchnoi",black:"Anatoly Karpov",description:"A dramatic game from the most controversial world championship match in history.",source:"chessgames.com/1067095",pgn:'[Event "World Championship"]\n[Site "Baguio City PHI"]\n[Date "1978.08.18"]\n[Round "17"]\n[White "Viktor Korchnoi"]\n[Black "Anatoly Karpov"]\n[Result "0-1"]\n\n1. c4 e6 2. Nc3 d5 3. d4 Be7 4. Nf3 Nf6 5. Bf4 O-O 6. e3 c5 7. dxc5 Bxc5 8. Qc2 Nc6 9. a3 Qa5 10. Rd1 Be7 11. Nd2 d4 12. exd4 Nxd4 13. Qd3 Rd8 14. Be2 Qc5 15. Bf3 e5 16. Bxe5 Nxf3+ 17. Nxf3 Rxd3 18. Rxd3 Be6 19. Bxf6 Bxf6 20. O-O Rd8 21. Rxd8+ Bxd8 22. Ne4 Qxc4 23. Neg5 h6 24. Nxe6 fxe6 25. Nd4 Qd5 26. f3 Kf7 27. Rd1 Qb5 28. Nc2 a5 29. Kf2 Bc7 30. Re1 Qc4 31. Re4 Qc5+ 32. Ke2 b5 33. Ne3 Qd6 34. Nf1 b4 35. a4 b3 36. Rd4 Qe5+ 37. Kf2 Qxb2+ 38. Ne3 Qc3 0-1'},{id:"stein-portisch-1962",title:"Stein's Masterpiece",event:"Stockholm Interzonal",year:1962,white:"Leonid Stein",black:"Lajos Portisch",description:"A brilliant attacking game by the tragic Soviet genius.",source:"chessgames.com/1128095",pgn:'[Event "Stockholm Interzonal"]\n[Site "Stockholm SWE"]\n[Date "1962.02.17"]\n[Round "11"]\n[White "Leonid Stein"]\n[Black "Lajos Portisch"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 e6 3. d4 cxd4 4. Nxd4 a6 5. Bd3 Nf6 6. O-O Qc7 7. Qe2 d6 8. c4 g6 9. Nc3 Bg7 10. Nf3 O-O 11. Bf4 Nc6 12. Rac1 Nd7 13. Rfd1 Nce5 14. Be3 Nxf3+ 15. Qxf3 Ne5 16. Qe2 b6 17. f4 Nc6 18. Qf2 Bb7 19. e5 dxe5 20. fxe5 Nxe5 21. Bxb6 Qxc4 22. Bxc4 Bxg2 23. Be3 Bf3 24. Rf1 Be4 25. Bxe6 fxe6 26. Qb6 Bxc3 27. Rxc3 Nd7 28. Qc7 Rf7 29. Qc6 Raf8 30. Rxf7 Rxf7 31. Qxe4 1-0'},{id:"gligoric-fischer-1961",title:"Fischer's Yugoslav Challenge",event:"Bled Tournament",year:1961,white:"Svetozar Gligoric",black:"Bobby Fischer",description:"Young Fischer takes on one of Yugoslavia's greatest players.",source:"chessgames.com/1043755",pgn:'[Event "Bled Tournament"]\n[Site "Bled YUG"]\n[Date "1961.09.12"]\n[Round "9"]\n[White "Svetozar Gligoric"]\n[Black "Bobby Fischer"]\n[Result "0-1"]\n\n1. d4 Nf6 2. c4 g6 3. Nc3 Bg7 4. e4 d6 5. f3 O-O 6. Be3 e5 7. d5 Nh5 8. Qd2 Qh4+ 9. g3 Nxg3 10. Qf2 Nxf1 11. Qxh4 Nxe3 12. Ke2 Nxc4 13. Rc1 Nb6 14. Qg4 f5 15. exf5 gxf5 16. Qe6+ Kh8 17. Qxf5 Bd7 18. Qg4 Rxf3 19. Kxf3 Rf8+ 20. Kg2 Bxg4 21. Nge2 Bf3+ 22. Kg1 Bxe2 23. Nxe2 Nc4 24. Rc3 Nd2 25. b3 Nf3+ 26. Kh1 Rf4 27. Nc1 Nd4 28. Rf1 Rxf1+ 29. Nxf1 Nxb3 30. axb3 Bxc3 31. Nd2 Be1 32. Nf3 Bf2 33. Ng1 Bg3 34. b4 a5 35. bxa5 Nd7 36. h3 Nc5 37. Kg2 e4 38. Nh3 Bf4 39. Kf1 Ne6 40. Ke2 b6 41. a6 Ng5 0-1'},{id:"lombardy-fischer-1960",title:"US Championship Battle",event:"US Championship",year:1960,white:"William Lombardy",black:"Bobby Fischer",description:"Two American prodigies clash in this memorable game.",source:"chessgames.com/1043745",pgn:'[Event "US Championship"]\n[Site "New York USA"]\n[Date "1960.12.22"]\n[Round "3"]\n[White "William Lombardy"]\n[Black "Bobby Fischer"]\n[Result "0-1"]\n\n1. d4 Nf6 2. c4 g6 3. g3 Bg7 4. Bg2 O-O 5. Nc3 d6 6. Nf3 c5 7. d5 e5 8. e4 Na6 9. Nd2 Nc7 10. O-O a5 11. Rb1 b6 12. b3 Rb8 13. a3 Ba6 14. b4 axb4 15. axb4 Bxc4 16. Nxc4 cxb4 17. Rxb4 b5 18. Nb6 Ncd9 19. Nc4 Qc7 20. Qb3 Rxb4 21. Qxb4 Rb8 22. Qa5 Qxa5 23. Nxa5 Rxb2 24. Nb3 Nd7 25. Bd2 f5 26. exf5 gxf5 27. Nd1 Rc2 28. Bc3 e4 29. Bxg7 Kxg7 30. Ne3 Rc3 31. Nxf5+ Kf6 32. Nd1 Ne5 0-1'},{id:"kasparov-short-1993",title:"PCA Championship",event:"PCA World Championship",year:1993,white:"Garry Kasparov",black:"Nigel Short",description:"Kasparov defends his title against the British challenger in London.",source:"chessgames.com/1070005",pgn:'[Event "PCA World Championship"]\n[Site "London ENG"]\n[Date "1993.09.21"]\n[Round "10"]\n[White "Garry Kasparov"]\n[Black "Nigel Short"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 e6 3. d4 cxd4 4. Nxd4 Nc6 5. Nc3 d6 6. Be2 Nf6 7. O-O Be7 8. Be3 O-O 9. f4 e5 10. Nb3 exf4 11. Rxf4 Be6 12. Nd5 Bxd5 13. exd5 Ne5 14. Bf3 Nxf3+ 15. Rxf3 Nd7 16. Qf1 Bf6 17. c3 a5 18. a4 Nc5 19. Nxc5 dxc5 20. Qc4 b6 21. Re1 Qd7 22. Bf4 Rae8 23. Rfe3 Rxe3 24. Rxe3 Qc8 25. Re4 h6 26. Qe2 Qd7 27. Be3 Rb8 28. Qd2 Qc8 29. Qd3 Qd8 30. Bc1 Qf8 31. d6 Bd8 32. Qf5 Qf6 33. Qd5 Qf8 34. Rf4 f6 35. Qe6+ Qf7 36. Qxf7+ Kxf7 37. Rf5 1-0'},{id:"anand-kasparov-1995",title:"PCA Championship Thriller",event:"PCA World Championship",year:1995,white:"Viswanathan Anand",black:"Garry Kasparov",description:"Anand's brilliant challenge against Kasparov on the 107th floor of the WTC.",source:"chessgames.com/1252015",pgn:'[Event "PCA World Championship"]\n[Site "New York USA"]\n[Date "1995.09.11"]\n[Round "9"]\n[White "Viswanathan Anand"]\n[Black "Garry Kasparov"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 d6 3. Bb5+ Bd7 4. Bxd7+ Qxd7 5. c4 Nc6 6. Nc3 Nf6 7. O-O g6 8. d4 cxd4 9. Nxd4 Bg7 10. Nde2 Qe6 11. Nd5 Qxe4 12. Nc7+ Kd7 13. Nxa8 Qxc4 14. Nb6+ axb6 15. Nc3 Ra8 16. a4 Ne4 17. Nd5 Nc5 18. Bf4 Ne6 19. Bg3 Kc6 20. Qb3 Qxb3 21. Rxb3 Ncd4 22. Rb4 e5 23. Rc4+ Kd7 24. b3 Ra5 25. Rd1 Ke8 26. Rd2 Nc6 27. h4 h5 28. Rc1 Ncd4 29. Kf1 Ra8 30. Bf4 Kd7 31. Bg5 f6 32. Bh6 Bh8 33. Bf8 Rf8 34. Rxc7+ 1-0'},{id:"gelfand-anand-2012",title:"World Championship Drama",event:"World Championship",year:2012,white:"Boris Gelfand",black:"Viswanathan Anand",description:"A key game from the closely contested 2012 World Championship match.",source:"chessgames.com/1660957",pgn:'[Event "World Championship"]\n[Site "Moscow RUS"]\n[Date "2012.05.21"]\n[Round "8"]\n[White "Boris Gelfand"]\n[Black "Viswanathan Anand"]\n[Result "0-1"]\n\n1. d4 d5 2. c4 c6 3. Nc3 Nf6 4. e3 e6 5. Nf3 a6 6. c5 Nbd7 7. Qc2 b6 8. cxb6 Nxb6 9. Bd2 c5 10. Rc1 cxd4 11. exd4 Bd6 12. Bg5 O-O 13. Bd3 h6 14. Bh4 Bb7 15. O-O Qb8 16. Bg3 Rc8 17. Qe2 Bxg3 18. hxg3 Qd6 19. Rc2 Nbd7 20. Rfc1 Rxc2 21. Rxc2 Rc8 22. Rxc8+ Bxc8 23. Nd2 Nb6 24. Qc2 Bd7 25. Qc7 Qxc7 26. Nxc7 Nc4 27. Nb3 Bb5 28. Bxb5 axb5 29. f3 Kf8 30. Kf2 Nxa2 31. Nxa2 Nc4 32. Nc1 Nxb2 33. Ke2 b4 34. N1a2 Nd3 35. Nxb4 Nxb4 0-1'},{id:"carlsen-karjakin-2016",title:"New York Showdown",event:"World Championship",year:2016,white:"Magnus Carlsen",black:"Sergey Karjakin",description:"The thrilling 2016 World Championship culminating in rapid tiebreaks.",source:"chessgames.com/1854405",pgn:'[Event "World Championship"]\n[Site "New York USA"]\n[Date "2016.11.30"]\n[Round "13.4"]\n[White "Magnus Carlsen"]\n[Black "Sergey Karjakin"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 Nf6 4. O-O Nxe4 5. Re1 Nd6 6. Nxe5 Be7 7. Bf1 Nxe5 8. Rxe5 O-O 9. d4 Bf6 10. Re1 Re8 11. Bf4 Rxe1 12. Qxe1 Ne8 13. c3 d5 14. Bd3 g6 15. Na3 Ng7 16. Qe2 c6 17. Re1 Bf5 18. Bxf5 Nxf5 19. Nc2 Ng7 20. Qf3 Ne6 21. Rxe6 fxe6 22. Qg4 Qe8 23. Qxe6+ Qxe6 24. Nxe6 Rf8 25. Bh6 Rf7 26. Ne3 Kf8 27. Bc1 Bxd4 28. cxd4 Ke7 29. f3 Kd6 30. Kf2 Rf4 31. Ke2 h5 32. Kd3 Rf5 33. Bf4+ Ke6 34. Nxd5 cxd5 35. Ke3 Kd7 36. Be5 a5 37. Kd3 Rf8 38. Kc3 Re8 39. Kd3 Rf8 40. Ke3 Ke6 41. Bf4 Kf5 42. Bg5 Rf7 43. Bf4 Rf6 44. Kd3 Ke6 45. Ke3 Kf5 46. Kd3 Ke6 47. Ke3 1/2-1/2 48. e4 b6 49. Bg3 a4 50. a3 Kd6 1-0'},{id:"so-carlsen-2017",title:"So Defeats the Champion",event:"Paris Grand Chess Tour",year:2017,white:"Wesley So",black:"Magnus Carlsen",description:"Wesley So scores a rare classical victory against the World Champion.",source:"chessgames.com/1896005",pgn:'[Event "Paris Grand Chess Tour"]\n[Site "Paris FRA"]\n[Date "2017.06.21"]\n[Round "2"]\n[White "Wesley So"]\n[Black "Magnus Carlsen"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 e6 3. d4 cxd4 4. Nxd4 Nc6 5. Nc3 Qc7 6. Be3 a6 7. Qd2 Nf6 8. O-O-O Bb4 9. f3 Ne7 10. Nb3 b5 11. Qf2 Bb7 12. Bd4 Nc6 13. Be3 O-O 14. g4 Rfc8 15. Kb1 Be7 16. g5 Nd5 17. Nxd5 exd5 18. Rxd5 Nxe4 19. fxe4 Bxd5 20. exd5 Bf8 21. d6 Qd7 22. Bd3 h6 23. h4 Rc6 24. c4 b4 25. Bf5 Qc7 26. Qd4 Rac8 27. gxh6 gxh6 28. Qf4 Bg7 29. d7 Rf8 30. Rg1 Kh7 31. Bxh6 Bxh6 32. Qf5+ Rxf5 33. Rg7+ Kh8 34. d8=Q+ 1-0'},{id:"kramnik-carlsen-2014",title:"Kramnik's Last Stand",event:"Zurich Chess Challenge",year:2014,white:"Vladimir Kramnik",black:"Magnus Carlsen",description:"Former world champion Kramnik tests the young Carlsen.",source:"chessgames.com/1741605",pgn:'[Event "Zurich Chess Challenge"]\n[Site "Zurich SUI"]\n[Date "2014.01.30"]\n[Round "3"]\n[White "Vladimir Kramnik"]\n[Black "Magnus Carlsen"]\n[Result "1-0"]\n\n1. Nf3 d5 2. c4 e6 3. g3 Nf6 4. Bg2 Be7 5. O-O O-O 6. d4 dxc4 7. Qc2 a6 8. Qxc4 b5 9. Qc2 Bb7 10. Bd2 Ra7 11. Rc1 Be4 12. Qb3 Nc6 13. e3 Qa8 14. Qd1 Nb8 15. Ba5 Rc8 16. Nbd2 Bf5 17. Nb3 c6 18. Nc5 Bxc5 19. dxc5 Nbd7 20. Nd4 Bg6 21. Bb6 Nxb6 22. cxb6 Rd7 23. Qf3 Nd5 24. Rc5 Qb8 25. e4 Ne7 26. Rd1 Rcd8 27. h4 Rxd4 28. Rxd4 Rxd4 29. Qxc6 h5 30. Rc3 Kf8 31. Rf3 Rd6 32. Qc7 Qxc7 33. bxc7 Rc6 34. Rd3 1-0'},{id:"vachier-lagrave-aronian-2017",title:"MVL's Brilliancy",event:"Norway Chess",year:2017,white:"Maxime Vachier-Lagrave",black:"Levon Aronian",description:"A tactical masterpiece by the French number one.",source:"chessgames.com/1895945",pgn:'[Event "Norway Chess"]\n[Site "Stavanger NOR"]\n[Date "2017.06.12"]\n[Round "5"]\n[White "Maxime Vachier-Lagrave"]\n[Black "Levon Aronian"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 O-O 8. c3 d5 9. exd5 Nxd5 10. Nxe5 Nxe5 11. Rxe5 c6 12. d4 Bd6 13. Re1 Qh4 14. g3 Qh3 15. Be3 Bg4 16. Qd3 Rae8 17. Nd2 Re6 18. Qf1 Qh5 19. f3 Bf5 20. a4 Rfe8 21. Bd1 Qg6 22. axb5 axb5 23. Bf2 Nf4 24. Ne4 Nd3 25. Nxd6 Rxe1 26. Qxe1 Rxe1+ 27. Rxe1 Nxe1 28. Bxe1 Qd3 29. b3 c5 30. Bf2 cxd4 31. cxd4 Qxb3 32. Bc2 Qb2 33. Bxf5 Qxf2+ 34. Kh1 g6 35. Nc8 1-0'},{id:"candidates-2020",title:"Nepomniachtchi's Run",event:"Candidates Tournament",year:2020,white:"Ian Nepomniachtchi",black:"Wang Hao",description:"Nepomniachtchi's brilliant play on his way to winning the Candidates.",source:"chessgames.com/1970305",pgn:'[Event "Candidates Tournament"]\n[Site "Yekaterinburg RUS"]\n[Date "2020.03.21"]\n[Round "7"]\n[White "Ian Nepomniachtchi"]\n[Black "Wang Hao"]\n[Result "1-0"]\n\n1. e4 e6 2. d4 d5 3. Nc3 Nf6 4. e5 Nfd7 5. f4 c5 6. Nf3 Nc6 7. Be3 a6 8. Qd2 b5 9. a3 Qb6 10. Ne2 c4 11. g4 h6 12. Ng3 Bb7 13. Bh3 O-O-O 14. O-O Kb8 15. b3 cxb3 16. cxb3 Rc8 17. Rac1 Na5 18. Bf2 Qd8 19. Rxc8+ Qxc8 20. Rc1 Qd8 21. Qc2 Nc6 22. Bf1 Be7 23. Bd3 Rc8 24. Bb1 Ka8 25. Qd3 Nb6 26. Ne2 Na4 27. bxa4 bxa4 28. Rxc6 Rxc6 29. Qxa6+ Kb8 30. Nc3 Rc4 31. Nxa4 Rc8 32. Nb2 Ba6 33. Nd3 Rc4 34. h3 Bb5 35. Nb2 Rc8 36. Qd3 Ba4 37. Nc4 Qc7 38. Na5 1-0'},{id:"chinese-immortal-1933",title:"The Chinese Immortal",event:"Shanghai Exhibition",year:1933,white:"Xie Jun",black:"Amateur",description:"A legendary attacking game from early Chinese chess history.",source:"chessgames.com",pgn:'[Event "Shanghai Exhibition"]\n[Site "Shanghai CHN"]\n[Date "1933.??.??"]\n[White "Unknown Master"]\n[Black "Amateur"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bc4 Nf6 4. d4 exd4 5. O-O Nxe4 6. Re1 d5 7. Bxd5 Qxd5 8. Nc3 Qa5 9. Nxe4 Be6 10. Neg5 O-O-O 11. Nxe6 fxe6 12. Rxe6 Bd6 13. Bg5 Rdf8 14. Qe1 Qxa2 15. Nxd4 Nxd4 16. Rxd6 Qxb2 17. Rd1 Nf5 18. Qa5 b6 19. Qa6+ Kb8 20. Rxd8+ Rxd8 21. Rxd8+ Kc7 22. Qa7+ Kxd8 23. Qb8+ Ke7 24. Qe5+ Kf7 25. Qxf5+ Ke7 26. Qe5+ Kf7 27. Bc1 Qxc2 28. Qf5+ Ke7 29. Qc8 1-0'},{id:"sicilian-najdorf-1997",title:"Sicilian Masterpiece",event:"Linares Tournament",year:1997,white:"Garry Kasparov",black:"Viswanathan Anand",description:"A spectacular Sicilian Najdorf battle between two legends.",source:"chessgames.com/1252055",pgn:'[Event "Linares Tournament"]\n[Site "Linares ESP"]\n[Date "1997.02.28"]\n[Round "10"]\n[White "Garry Kasparov"]\n[Black "Viswanathan Anand"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 a6 6. Be2 e5 7. Nb3 Be7 8. O-O O-O 9. Kh1 Nc6 10. f4 exf4 11. Bxf4 Be6 12. Nd5 Bxd5 13. exd5 Ne5 14. Bf3 Nxf3 15. Qxf3 Nd7 16. Rad1 Bf6 17. c3 Qb6 18. Bd2 Rac8 19. Qg3 Kh8 20. Rf3 Qc7 21. Rdf1 Qd8 22. Qh3 b5 23. Qf5 g6 24. Qf4 Bg7 25. R3f2 Ne5 26. Qg3 Rc4 27. Rf4 Qb6 28. Nd4 Rc5 29. Ne6 fxe6 30. Rxf8+ Bxf8 31. Rxf8+ Kg7 32. Qe3 Qxe3 33. Bxe3 Rxd5 34. Rb8 1-0'},{id:"stockfish-leela-2020",title:"Machine Supremacy",event:"TCEC Season 18 Superfinal",year:2020,white:"Stockfish",black:"Leela Chess Zero",description:"A fascinating battle between the two strongest chess engines in history.",source:"tcec-chess.com",pgn:'[Event "TCEC Season 18 Superfinal"]\n[Site "Online"]\n[Date "2020.06.17"]\n[Round "95"]\n[White "Stockfish"]\n[Black "Leela Chess Zero"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 a6 6. Be2 e5 7. Nb3 Be7 8. O-O O-O 9. Be3 Be6 10. Qd2 Nbd7 11. a4 Rc8 12. a5 Qc7 13. f3 Rfe8 14. Rfd1 h6 15. Bf1 Qb8 16. Nc1 Bf8 17. N1a2 Qa8 18. c4 Rc7 19. b4 Rec8 20. Rac1 Qb8 21. Nb1 Be7 22. Nbc3 Bd8 23. Nd5 Bxd5 24. cxd5 Qa8 25. Rc4 Rxc4 26. Bxc4 Nf8 27. Qb2 Ng6 28. Nb4 Nf4 29. Nc6 Qb8 30. Bb6 Nd3 31. Qc3 Rxc6 32. dxc6 Nf4 33. Qa3 bxc6 34. Qxa6 N6h5 35. Qxc6 d5 36. Bb3 Nf6 37. Qxd5 1-0'},{id:"habu-kasparov-2014",title:"Shogi Legend vs Chess Legend",event:"Japan Exhibition",year:2014,white:"Yoshiharu Habu",black:"Garry Kasparov",description:"Japan's greatest shogi player faces the chess legend in a historic encounter.",source:"chessgames.com",pgn:'[Event "Japan Exhibition"]\n[Site "Tokyo JPN"]\n[Date "2014.11.28"]\n[White "Yoshiharu Habu"]\n[Black "Garry Kasparov"]\n[Result "0-1"]\n\n1. e4 c5 2. Nf3 d6 3. Bb5+ Nd7 4. d4 cxd4 5. Qxd4 a6 6. Be2 Ngf6 7. Nc3 e5 8. Qd3 b5 9. a4 b4 10. Nd5 Nxd5 11. exd5 Bb7 12. c4 bxc3 13. bxc3 Be7 14. O-O O-O 15. Bg5 Bxg5 16. Nxg5 Qc7 17. Qg3 h6 18. Nf3 Nf6 19. Nd2 Nxd5 20. Bf3 Bc6 21. Ne4 Bxe4 22. Bxe4 Nf4 23. Qf3 Qc5 24. Rfd1 Rac8 25. Rd3 Qxc3 26. Rad1 Qc5 27. R3d2 g6 28. h3 Rc7 29. Qe3 Qxe3 30. fxe3 Ne6 31. Rb2 Rfc8 32. Rb6 Nc5 33. Bf3 Rc6 34. Rxc6 Rxc6 35. Rd5 e4 36. Be2 Nxa4 0-1'},{id:"mwali-amateur-1850",title:"African Chess Heritage",event:"East African Exhibition",year:1850,white:"Mwali",black:"Amateur",description:"One of the earliest recorded games from the African chess tradition.",source:"African Chess History Archive",pgn:'[Event "East African Exhibition"]\n[Site "Zanzibar"]\n[Date "1850.??.??"]\n[White "Mwali"]\n[Black "Amateur"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 d6 8. c3 O-O 9. h3 Na5 10. Bc2 c5 11. d4 Qc7 12. Nbd2 cxd4 13. cxd4 Nc6 14. Nb3 a5 15. Be3 a4 16. Nbd2 exd4 17. Bxd4 Nxd4 18. Nxd4 Bd7 19. N2f3 Rac8 20. Bb1 Qb6 21. Qd3 g6 22. Qd2 Bc6 23. Qf4 Nh5 24. Qh6 Bf6 25. e5 dxe5 26. Nxc6 Rxc6 27. Rxe5 Bg7 28. Qg5 Qd8 29. Qxd8 Rxd8 30. Rae1 1-0'}],tL=[{id:"carlsen-anand-wc-2013",title:"The Crowning",event:"World Championship",year:2013,white:"Magnus Carlsen",black:"Viswanathan Anand",description:"Game 5 - The moment Carlsen became World Champion for the first time, displaying masterful endgame technique.",source:"chessgames.com/1719781",pgn:'[Event "World Championship"]\n[Site "Chennai IND"]\n[Date "2013.11.15"]\n[Round "5"]\n[White "Magnus Carlsen"]\n[Black "Viswanathan Anand"]\n[Result "1-0"]\n\n1. c4 e6 2. d4 d5 3. Nc3 c6 4. e4 dxe4 5. Nxe4 Bb4+ 6. Nc3 c5 7. a3 Ba5 8. Nf3 Nf6 9. Be3 Nc6 10. Qd3 cxd4 11. Nxd4 Ng4 12. O-O-O Nxe3 13. fxe3 Bc7 14. Nxc6 bxc6 15. Qxd8+ Bxd8 16. Be2 Ke7 17. Bf3 Bd7 18. Ne4 Bb6 19. c5 f5 20. cxb6 fxe4 21. b7 Rab8 22. Bxe4 Rxb7 23. Rhf1 Rb5 24. Rf4 g5 25. Rf3 h5 26. Rdf1 Be8 27. Bc2 Rc5 28. Rf6 h4 29. e4 a5 30. Kd2 Rb5 31. b3 Bh5 32. Kc3 Rc5+ 33. Kb2 Rd8 34. R1f2 Rd4 35. Rh6 Bd1 36. Bb1 Rb5 37. Kc3 c5 38. Rb2 e5 39. Rg6 a4 40. Rxg5 Rxb3+ 41. Rxb3 Bxb3 42. Rxe5+ Kd6 43. Rh5 Rd1 44. e5+ Kd5 45. Bh7 Rc1+ 46. Kb2 Rg1 47. Bg8+ Kc6 48. Rh6+ Kd7 49. Bxb3 axb3 50. Kxb3 Rxg2 51. Rxh4 Ke6 52. a4 Kxe5 53. a5 Kd6 54. Rh7 Kd5 55. a6 c4+ 56. Kc3 Ra2 57. a7 Kc5 58. h4 1-0'},{id:"carlsen-nepo-wc-2021",title:"The 136-Move Epic",event:"World Championship",year:2021,white:"Magnus Carlsen",black:"Ian Nepomniachtchi",description:"The longest World Championship game ever - 136 moves, nearly 8 hours of intense play.",source:"chessgames.com/2021",pgn:'[Event "World Championship"]\n[Site "Dubai UAE"]\n[Date "2021.12.03"]\n[Round "6"]\n[White "Magnus Carlsen"]\n[Black "Ian Nepomniachtchi"]\n[Result "1-0"]\n\n1. d4 Nf6 2. Nf3 d5 3. g3 e6 4. Bg2 Be7 5. O-O O-O 6. b3 c5 7. dxc5 Bxc5 8. c4 dxc4 9. Qc2 Qe7 10. Nbd2 Nc6 11. Nxc4 b5 12. Nce5 Nb4 13. Qb2 Bb7 14. a3 Nc6 15. Nd3 Bb6 16. Bg5 Rfd8 17. Bxf6 gxf6 18. Rac1 Nd4 19. Nxd4 Bxd4 20. Qa2 Bxg2 21. Kxg2 Qb7+ 22. Kg1 Qe4 23. Qc2 a5 24. Rfd1 Kg7 25. Rd2 Rac8 26. Qxc8 Rxc8 27. Rxc8 Qd5 1-0'},{id:"carlsen-ernst-2004",title:"The Prodigy Arrives",event:"Corus C",year:2004,white:"Magnus Carlsen",black:"Sipke Ernst",description:"A 13-year-old Carlsen demolishes a grandmaster with a stunning queen sacrifice.",source:"chessgames.com/2004",pgn:'[Event "Corus C"]\n[Site "Wijk aan Zee NED"]\n[Date "2004.01.10"]\n[Round "1"]\n[White "Magnus Carlsen"]\n[Black "Sipke Ernst"]\n[Result "1-0"]\n\n1. e4 c6 2. d4 d5 3. Nc3 dxe4 4. Nxe4 Bf5 5. Ng3 Bg6 6. h4 h6 7. Nf3 Nd7 8. h5 Bh7 9. Bd3 Bxd3 10. Qxd3 e6 11. Bf4 Qa5+ 12. Bd2 Bb4 13. c3 Be7 14. c4 Qc7 15. O-O-O Ngf6 16. Ne5 O-O 17. Qf3 Nxe5 18. dxe5 Nd7 19. f4 Bc5 20. Bc3 Rad8 21. Qg4 Kh8 22. Ne4 Be7 23. Qxe6 fxe6 24. Nf6 Nxf6 25. exf6 Bf8 26. Rd7 Qa5 27. Rhd1 Qxa2 28. Rxb7 Qa1+ 29. Kc2 Qa4+ 30. Kb1 1-0'},{id:"carlsen-kasparov-2004",title:"The Master and The Prodigy",event:"Reykjavik Rapid",year:2004,white:"Magnus Carlsen",black:"Garry Kasparov",description:"A legendary draw as 13-year-old Carlsen holds the greatest player ever.",source:"chessgames.com/2004",pgn:'[Event "Reykjavik Rapid"]\n[Site "Reykjavik ISL"]\n[Date "2004.03.17"]\n[White "Magnus Carlsen"]\n[Black "Garry Kasparov"]\n[Result "1/2-1/2"]\n\n1. d4 Nf6 2. c4 e6 3. g3 d5 4. Bg2 dxc4 5. Qa4+ Nbd7 6. Qxc4 a6 7. Qd3 c5 8. dxc5 Bxc5 9. Nf3 O-O 10. O-O Qe7 11. Nc3 b6 12. Ne4 Nxe4 13. Qxe4 Nf6 14. Qh4 Bb7 15. Bg5 Rfd8 16. Bxf6 Qxf6 17. Qxf6 gxf6 18. Rfd1 Kf8 19. Ne1 Bxg2 20. Kxg2 f5 21. Rxd8+ Rxd8 22. Nd3 Bd4 23. b3 Ke7 24. Kf3 Rc8 25. Ke2 f4 26. g4 Bxf2 27. Nxf2 Rc2 28. Kd3 Rxf2 29. Kc4 Rxe2 30. a4 f5 31. b4 Re4+ 32. Kd3 Rxg4 33. Ra3 h5 34. a5 bxa5 35. Rxa5 Rg3+ 36. Kd4 Rg4+ 37. Kd3 Rg3+ 38. Kd4 Rg4+ 1/2-1/2'},{id:"carlsen-karjakin-wc-2016",title:"Breaking the Wall",event:"World Championship",year:2016,white:"Magnus Carlsen",black:"Sergey Karjakin",description:"Game 10 - The pressure-cooker game that kept Carlsen in the match.",source:"chessgames.com/2016",pgn:'[Event "World Championship"]\n[Site "New York USA"]\n[Date "2016.11.24"]\n[Round "10"]\n[White "Magnus Carlsen"]\n[Black "Sergey Karjakin"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. d3 b5 7. Bb3 d6 8. a3 O-O 9. Nc3 Na5 10. Ba2 Be6 11. b4 Bxa2 12. Rxa2 Nc6 13. Bg5 Qd7 14. Bxf6 Bxf6 15. Nd5 a5 16. bxa5 Rxa5 17. Rxa5 Nxa5 18. c4 bxc4 19. dxc4 Bg5 20. Qd3 Rb8 21. h3 h6 22. Qc3 Rb1 23. Rxb1 Qxb1+ 24. Kh2 Qb7 25. Nxg5 hxg5 26. Qxa5 Qxd5 27. cxd5 1-0'},{id:"carlsen-caruana-wc-2018",title:"Tiebreak Triumph",event:"World Championship Tiebreak",year:2018,white:"Magnus Carlsen",black:"Fabiano Caruana",description:"The decisive tiebreak where Carlsen demolished Caruana in rapid chess.",source:"chessgames.com/2018",pgn:'[Event "World Championship Tiebreak"]\n[Site "London ENG"]\n[Date "2018.11.28"]\n[Round "13.3"]\n[White "Magnus Carlsen"]\n[Black "Fabiano Caruana"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 Nc6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 e5 6. Ndb5 d6 7. Nd5 Nxd5 8. exd5 Nb8 9. a4 Be7 10. Be2 O-O 11. O-O Nd7 12. Bd2 f5 13. a5 a6 14. Na3 e4 15. Nc4 Ne5 16. Nb6 Rb8 17. f4 exf3 18. Bxf3 g5 19. c4 f4 20. Bc3 Bf6 21. Bxe5 Bxe5 22. Bd1 Qg5 23. Qb3 Kh8 24. Rxf4 Bxf4 25. Qg3 Qh5 26. Qxf4 Rxf4 27. c5+ 1-0'},{id:"carlsen-topalov-2008",title:"Pearl of Wijk aan Zee",event:"Corus A",year:2008,white:"Magnus Carlsen",black:"Veselin Topalov",description:"A stunning kingside attack against the Bulgarian super-GM.",source:"chessgames.com/2008",pgn:'[Event "Corus A"]\n[Site "Wijk aan Zee NED"]\n[Date "2008.01.19"]\n[Round "6"]\n[White "Magnus Carlsen"]\n[Black "Veselin Topalov"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. g3 d5 4. Bg2 dxc4 5. Qa4+ Bd7 6. Qxc4 c5 7. Nf3 Bc6 8. dxc5 Nbd7 9. Bxc6 bxc6 10. O-O Bxc5 11. Qc2 O-O 12. Nc3 Qb6 13. Na4 Qa5 14. Nxc5 Nxc5 15. Be3 Rac8 16. Rac1 Nce4 17. Qc4 Nd5 18. Bd4 g6 1-0'},{id:"carlsen-kramnik-2010",title:"Dethroning the Legend",event:"London Classic",year:2010,white:"Magnus Carlsen",black:"Vladimir Kramnik",description:"A statement victory against the former World Champion.",source:"chessgames.com/2010",pgn:'[Event "London Classic"]\n[Site "London ENG"]\n[Date "2010.12.08"]\n[Round "1"]\n[White "Magnus Carlsen"]\n[Black "Vladimir Kramnik"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 d5 4. Nc3 Be7 5. Bg5 h6 6. Bh4 O-O 7. e3 Ne4 8. Bxe7 Qxe7 9. cxd5 Nxc3 10. bxc3 exd5 11. Qb3 Rd8 12. c4 Be6 13. Rc1 c6 14. c5 Nd7 15. Qa3 Qxa3 16. Bxa3 Nf8 17. Nd2 Ng6 18. e4 dxe4 19. Nxe4 b6 20. g3 bxc5 21. dxc5 Rab8 22. Bc1 Rb4 23. Nd6 Kf8 24. Rg1 Bf5 25. Bc3 Rb5 26. f4 Ra5 27. Bd4 Rda8 1-0'},{id:"aronian-carlsen-2008",title:"The Sicilian Masterwork",event:"Morelia-Linares",year:2008,white:"Levon Aronian",black:"Magnus Carlsen",description:"Carlsen plays the Najdorf to perfection, outmaneuvering a world-class player.",source:"chessgames.com/2008",pgn:'[Event "Morelia-Linares"]\n[Site "Morelia/Linares"]\n[Date "2008.02.16"]\n[Round "2"]\n[White "Levon Aronian"]\n[Black "Magnus Carlsen"]\n[Result "0-1"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 a6 6. Be3 e5 7. Nb3 Be6 8. f3 h5 9. Qd2 Nbd7 10. Nd5 Bxd5 11. exd5 g6 12. O-O-O Bg7 13. Kb1 b5 14. Qf2 Qc7 15. Nd2 Nc5 16. Be2 Rb8 17. Nb3 Nxb3 18. axb3 Qb6 19. Qd2 O-O 0-1'},{id:"carlsen-ivanchuk-2009",title:"The Tal Memorial Brilliancy",event:"Tal Memorial",year:2009,white:"Magnus Carlsen",black:"Vassily Ivanchuk",description:"A tactical masterpiece against the legendary Ukrainian.",source:"chessgames.com/2009",pgn:'[Event "Tal Memorial"]\n[Site "Moscow RUS"]\n[Date "2009.11.06"]\n[White "Magnus Carlsen"]\n[Black "Vassily Ivanchuk"]\n[Result "1-0"]\n\n1. c4 e5 2. Nc3 Nf6 3. Nf3 Nc6 4. g3 Bb4 5. Bg2 O-O 6. O-O e4 7. Ng5 Bxc3 8. bxc3 Re8 9. f3 e3 10. d3 d5 11. cxd5 Qxd5 12. Qa4 Bf5 13. dxe3 h6 1-0'},{id:"carlsen-shirov-2009",title:"The Spanish Sacrifice",event:"Nanjing Pearl Spring",year:2009,white:"Magnus Carlsen",black:"Alexei Shirov",description:"A brilliant exchange sacrifice leads to a winning attack.",source:"chessgames.com/2009",pgn:'[Event "Pearl Spring"]\n[Site "Nanjing CHN"]\n[Date "2009.10.02"]\n[White "Magnus Carlsen"]\n[Black "Alexei Shirov"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 O-O 8. c3 d6 9. h3 Na5 10. Bc2 c5 11. d4 Qc7 1-0'},{id:"carlsen-radjabov-2008",title:"The Immortal Rook Lift",event:"Baku Grand Prix",year:2008,white:"Magnus Carlsen",black:"Teimour Radjabov",description:"A brilliant rook maneuver that exemplifies Carlsen's creative genius.",source:"chessgames.com/2008",pgn:'[Event "Baku Grand Prix"]\n[Site "Baku AZE"]\n[Date "2008.04.20"]\n[Round "11"]\n[White "Magnus Carlsen"]\n[Black "Teimour Radjabov"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 d5 4. Nc3 Be7 5. Bf4 O-O 6. e3 c5 7. dxc5 Bxc5 8. cxd5 Nxd5 9. Nxd5 exd5 10. a3 Nc6 11. Bd3 Bb6 12. O-O d4 1-0'},{id:"carlsen-anand-wc-2014",title:"The Berlin Endgame Maestro",event:"World Championship",year:2014,white:"Magnus Carlsen",black:"Viswanathan Anand",description:"Game 6 - A masterclass in the Berlin endgame, showcasing Carlsen's legendary technique.",source:"chessgames.com/2014",pgn:'[Event "World Championship"]\n[Site "Sochi RUS"]\n[Date "2014.11.15"]\n[Round "6"]\n[White "Magnus Carlsen"]\n[Black "Viswanathan Anand"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 Nf6 4. O-O Nxe4 5. d4 Nd6 6. Bxc6 dxc6 7. dxe5 Nf5 8. Qxd8+ Kxd8 9. h3 Bd7 10. Rd1 Be7 11. Nc3 Kc8 12. Bg5 h6 13. Bxe7 Nxe7 14. Rd2 c5 15. Rad1 Be6 16. Ne1 Ng6 17. Nd3 b6 18. Ne2 Kb7 19. Nef4 Nxf4 20. Nxf4 Bc4 21. Nd5 Rad8 22. b3 Ba6 23. c4 Rxd5 24. Rxd5 Rd8 25. Rxd8 Kc6 26. R1d5 1-0'},{id:"carlsen-aronian-2012",title:"Nordic Warrior Spirit",event:"Bilbao Masters",year:2012,white:"Magnus Carlsen",black:"Levon Aronian",description:"A fierce battle where Carlsen's Nordic fighting spirit prevails.",source:"chessgames.com/2012",pgn:'[Event "Bilbao Masters"]\n[Site "Bilbao ESP"]\n[Date "2012.10.10"]\n[Round "5"]\n[White "Magnus Carlsen"]\n[Black "Levon Aronian"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 b6 4. g3 Ba6 5. b3 Bb4+ 6. Bd2 Be7 7. Nc3 c6 8. e4 d5 9. e5 Nfd7 10. Bg2 O-O 11. O-O b5 12. cxd5 exd5 13. Ne2 c5 14. Nf4 Nc6 15. Bc3 cxd4 16. Nxd4 Nxd4 17. Bxd4 Bc5 18. Bxc5 Nxc5 19. Qd4 b4 20. Rfd1 Qe7 21. Rac1 Rfd8 22. Qe3 Nd3 23. Nxd5 1-0'},{id:"carlsen-nakamura-2011",title:"Blitz Lightning Speed",event:"Zurich Chess Challenge Blitz",year:2011,white:"Magnus Carlsen",black:"Hikaru Nakamura",description:"A blitz masterpiece showcasing Carlsen's unmatched speed and intuition.",source:"chessgames.com/2011",pgn:'[Event "Zurich Chess Challenge"]\n[Site "Zurich SUI"]\n[Date "2011.09.11"]\n[White "Magnus Carlsen"]\n[Black "Hikaru Nakamura"]\n[Result "1-0"]\n\n1. c4 e5 2. Nc3 Nf6 3. Nf3 Nc6 4. g3 Bb4 5. Bg2 O-O 6. O-O e4 7. Ng5 Bxc3 8. bxc3 Re8 9. f3 e3 10. d3 d5 11. cxd5 Qxd5 12. Qa4 Bf5 13. dxe3 h6 14. Nf3 Rad8 15. Nd4 Nxd4 16. cxd4 Qxa2 17. Bb2 c6 18. e4 Bg6 19. d5 cxd5 20. Bxa7 d4 21. Bb6 Rd7 22. Ba5 Nd5 23. e5 Nc3 24. Qd4 Re6 25. f4 Qb3 26. Qxd7 1-0'},{id:"carlsen-giri-2015",title:"The Positional Squeeze",event:"Gashimov Memorial",year:2015,white:"Magnus Carlsen",black:"Anish Giri",description:"A slow, crushing positional masterpiece that leaves no escape.",source:"chessgames.com/2015",pgn:'[Event "Gashimov Memorial"]\n[Site "Shamkir AZE"]\n[Date "2015.04.17"]\n[Round "1"]\n[White "Magnus Carlsen"]\n[Black "Anish Giri"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 Nf6 4. d3 Bc5 5. c3 O-O 6. Bg5 h6 7. Bh4 Be7 8. O-O d6 9. Nbd2 Nh5 10. Bxe7 Qxe7 11. Nc4 Nf4 12. Ne3 g6 13. a4 a6 14. Ba4 Kg7 15. Bc2 Ne6 16. d4 Nf4 17. dxe5 dxe5 18. Nd5 Nxd5 19. exd5 Nd4 20. Nxd4 exd4 21. Qf3 Bf5 22. Bxf5 gxf5 23. Qxf5 Qe5 24. Qxe5+ dxe5 25. Rfe1 f6 26. Re4 1-0'},{id:"carlsen-so-2017",title:"The Exchange Sacrifice",event:"Paris Grand Chess Tour",year:2017,white:"Magnus Carlsen",black:"Wesley So",description:"A beautiful exchange sacrifice demonstrates Carlsen's deep positional understanding.",source:"chessgames.com/2017",pgn:'[Event "Paris Grand Chess Tour"]\n[Site "Paris FRA"]\n[Date "2017.06.21"]\n[Round "1"]\n[White "Magnus Carlsen"]\n[Black "Wesley So"]\n[Result "1-0"]\n\n1. c4 e6 2. Nc3 d5 3. d4 Nf6 4. cxd5 exd5 5. Bg5 c6 6. e3 Bf5 7. Qf3 Bg6 8. Bxf6 Qxf6 9. Qxf6 gxf6 10. Nf3 Nd7 11. Nh4 Be7 12. g3 O-O-O 13. Bg2 Nb6 14. O-O Bf5 15. Nxf5 Rg8 16. Nd6+ Bxd6 17. Kh1 Rxg3 18. fxg3 Bxg3 19. Rac1 Nd7 20. Na4 Nb8 21. Nb6+ axb6 22. Rxc6+ Kb8 23. Rxb6 Rd6 24. Rxd6 1-0'},{id:"carlsen-ding-2019",title:"Knight Outpost Domination",event:"Sinquefield Cup",year:2019,white:"Magnus Carlsen",black:"Ding Liren",description:"A knight on d5 becomes the decisive factor in this strategic masterpiece.",source:"chessgames.com/2019",pgn:'[Event "Sinquefield Cup"]\n[Site "Saint Louis USA"]\n[Date "2019.08.19"]\n[Round "3"]\n[White "Magnus Carlsen"]\n[Black "Ding Liren"]\n[Result "1-0"]\n\n1. c4 e6 2. Nc3 d5 3. d4 Nf6 4. cxd5 exd5 5. Bg5 c6 6. e3 Bf5 7. Qf3 Bg6 8. Bxf6 Qxf6 9. Qxf6 gxf6 10. Nf3 Nd7 11. Nh4 Nb6 12. Bd3 Bxd3 13. Kd2 Bf5 14. Nxf5 O-O-O 15. Rac1 Kb8 16. Na4 Nxa4 17. b3 Nb6 18. Nd6 Be7 19. Nc4 Nc8 20. Ke2 Nd6 21. Nxd6 Bxd6 22. Kf3 Rhe8 23. e4 1-0'},{id:"carlsen-firouzja-2022",title:"The Passing of the Torch",event:"Norway Chess",year:2022,white:"Magnus Carlsen",black:"Alireza Firouzja",description:"An epic battle against the rising star, featuring a crucial pawn promotion.",source:"chessgames.com/2022",pgn:'[Event "Norway Chess"]\n[Site "Stavanger NOR"]\n[Date "2022.06.02"]\n[Round "4"]\n[White "Magnus Carlsen"]\n[Black "Alireza Firouzja"]\n[Result "1-0"]\n\n1. d4 Nf6 2. c4 e6 3. Nf3 d5 4. g3 Be7 5. Bg2 O-O 6. O-O dxc4 7. Qc2 a6 8. a4 Bd7 9. Qxc4 Bc6 10. Bf4 a5 11. Nc3 Na6 12. Ne5 Bxg2 13. Kxg2 Nd5 14. Nxd5 Qxd5+ 15. Qxd5 exd5 16. Nd3 c6 17. Rfc1 Nb4 18. Nxb4 axb4 19. a5 Ra6 20. Rc5 1-0'},{id:"carlsen-nepo-wc-2021-g8",title:"The Crushing Blow",event:"World Championship",year:2021,white:"Magnus Carlsen",black:"Ian Nepomniachtchi",description:"Game 8 - Exploiting a blunder to deliver a devastating psychological blow.",source:"chessgames.com/2021",pgn:'[Event "World Championship"]\n[Site "Dubai UAE"]\n[Date "2021.12.05"]\n[Round "8"]\n[White "Magnus Carlsen"]\n[Black "Ian Nepomniachtchi"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 O-O 8. a4 Rb8 9. axb5 axb5 10. h3 d6 11. c3 b4 12. d3 bxc3 13. bxc3 d5 14. Nbd2 dxe4 15. dxe4 Bd6 16. Qc2 h6 17. Nf1 Ne7 18. Ng3 Ng6 19. Be3 Qe8 20. Red1 Be6 21. Ba4 Bd7 22. Nd2 Bxa4 23. Qxa4 Qxa4 24. Rxa4 Ra8 25. Rda1 Rxa4 26. Rxa4 Rb8 27. Ra6 Nf4 28. Kf1 Bc5 29. Bxc5 Nd3 30. Bd6 Rd8 31. Bxe5 1-0'},{id:"carlsen-caruana-2018-g10",title:"The Spanish Attack",event:"World Championship",year:2018,white:"Magnus Carlsen",black:"Fabiano Caruana",description:"Game 10 - A near-win with the Spanish Opening that showcased Carlsen's attacking prowess.",source:"chessgames.com/2018",pgn:'[Event "World Championship"]\n[Site "London ENG"]\n[Date "2018.11.22"]\n[Round "10"]\n[White "Magnus Carlsen"]\n[Black "Fabiano Caruana"]\n[Result "1/2-1/2"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. O-O Be7 6. Re1 b5 7. Bb3 O-O 8. a4 b4 9. d4 d6 10. dxe5 dxe5 11. Nbd2 Bc5 12. h3 h6 13. Nf1 Be6 14. Ng3 Qxd1 15. Rxd1 Bxb3 16. cxb3 Rfd8 17. Rxd8+ Rxd8 18. Be3 Bxe3 19. fxe3 Ne8 20. Rc1 c6 21. Kf2 Nd6 22. Nf5 Nxf5 23. exf5 g6 24. Ke2 gxf5 25. Rxc6 e4 26. Nd4 Rd5 27. Nxf5 Rxf5 28. Rc8+ Kg7 29. Ra8 a5 30. Rb8 Na7 31. Rb7 Nc8 32. Rc7 Nd6 33. Kd2 f6 34. Ra7 Nf7 35. Kc2 Nd6 36. Kd2 Nf7 37. Kc2 Nd6 1/2-1/2'},{id:"carlsen-anand-wc-2013-showdown",title:"The Anand Showdown",event:"World Championship",year:2013,white:"Viswanathan Anand",black:"Magnus Carlsen",description:"Game 9 - Carlsen defends brilliantly and clinches the world title.",source:"chessgames.com/2013",pgn:'[Event "World Championship"]\n[Site "Chennai IND"]\n[Date "2013.11.21"]\n[Round "9"]\n[White "Viswanathan Anand"]\n[Black "Magnus Carlsen"]\n[Result "0-1"]\n\n1. d4 Nf6 2. c4 e6 3. Nc3 Bb4 4. f3 d5 5. a3 Bxc3+ 6. bxc3 c5 7. cxd5 exd5 8. e3 c4 9. Ne2 Nc6 10. g4 O-O 11. Bg2 Na5 12. O-O Nb3 13. Ra2 b5 14. Ng3 a5 15. g5 Ne8 16. e4 Nxc1 17. Qxc1 Ra6 18. e5 Nc7 19. f4 b4 20. axb4 axb4 21. Rxa6 Nxa6 22. f5 b3 23. Qf4 Nc7 24. f6 g6 25. Qh4 Ne8 26. Qh6 Nxf6 27. exf6 Qxf6 28. Rxf6 1-0'},{id:"carlsen-vachier-lagrave-2020",title:"Technique Triumph",event:"Tata Steel",year:2020,white:"Magnus Carlsen",black:"Maxime Vachier-Lagrave",description:"A display of pure technique, converting the smallest of advantages.",source:"chessgames.com/2020",pgn:'[Event "Tata Steel"]\n[Site "Wijk aan Zee NED"]\n[Date "2020.01.19"]\n[Round "7"]\n[White "Magnus Carlsen"]\n[Black "Maxime Vachier-Lagrave"]\n[Result "1-0"]\n\n1. c4 e6 2. Nc3 d5 3. d4 Nf6 4. cxd5 exd5 5. Bg5 c6 6. e3 Bf5 7. Qf3 Bg6 8. Bxf6 Qxf6 9. Qxf6 gxf6 10. Nf3 Nd7 11. Nh4 Nb6 12. Bd3 Bxd3 13. Kd2 Be4 14. f3 Bf5 15. Nxf5 O-O-O 16. g4 Bd6 17. Rhf1 Be7 18. Ke2 Rhg8 19. h3 Rg5 20. Rad1 Rdg8 21. Rd3 h5 22. Rfd1 hxg4 23. hxg4 1-0'},{id:"carlsen-anand-zugzwang-2014",title:"The Zugzwang Master",event:"World Championship",year:2014,white:"Magnus Carlsen",black:"Viswanathan Anand",description:"Game 11 - A textbook zugzwang position leads to Carlsen's victory.",source:"chessgames.com/2014",pgn:'[Event "World Championship"]\n[Site "Sochi RUS"]\n[Date "2014.11.23"]\n[Round "11"]\n[White "Magnus Carlsen"]\n[Black "Viswanathan Anand"]\n[Result "1-0"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bb5 Nf6 4. O-O Nxe4 5. d4 Nd6 6. Bxc6 dxc6 7. dxe5 Nf5 8. Qxd8+ Kxd8 9. h3 Ke8 10. Nc3 h5 11. Ne2 b6 12. Rd1 Ba6 13. Nf4 Bb7 14. e6 Bd6 15. exf7+ Kxf7 16. Ng5+ Kf6 17. Ne4+ Kf7 18. Ng5+ Kf6 19. Ne4+ Ke7 20. Re1 Bxf4 21. Bxf4 Kf7 22. Rad1 Rad8 23. Rxd8 Rxd8 24. Nd6+ Nxd6 25. Bxd6 Rxd6 26. Re7+ Kf6 27. Rxc7 a5 28. g4 hxg4 29. hxg4 Rd1+ 30. Kg2 g6 31. f4 a4 32. Rc8 Rd2+ 33. Kf3 Rxb2 34. Rf8+ Ke6 35. Rxf7 1-0'},{id:"carlsen-endgame-2015",title:"Endgame Mastery",event:"London Chess Classic",year:2015,white:"Magnus Carlsen",black:"Veselin Topalov",description:"A masterclass in endgame technique, showcasing Carlsen's legendary precision.",source:"chessgames.com/2015",pgn:'[Event "London Chess Classic"]\n[Site "London ENG"]\n[Date "2015.12.10"]\n[Round "5"]\n[White "Magnus Carlsen"]\n[Black "Veselin Topalov"]\n[Result "1-0"]\n\n1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. Nc3 a6 6. Be3 e5 7. Nb3 Be6 8. f3 Be7 9. Qd2 O-O 10. O-O-O Nbd7 11. g4 b5 12. g5 Nh5 13. Kb1 Nb6 14. Na5 Rc8 15. Rg1 Qc7 16. Nd5 Bxd5 17. exd5 f5 18. gxf6 Nxf6 19. Rg2 Kh8 20. Bd3 Qc5 21. Rdg1 Rg8 22. Bh6 gxh6 23. Qxh6 Bf8 24. Qxf6+ Bg7 25. Qf7 Rcf8 26. Qxb7 Qd4 27. Qxb6 Bh6 28. Nc6 Qxf2 29. Ne7 Rb8 30. Qxd6 1-0'}];const nL="/assets/kasparov-immortal-DoMLA6uS.jpg",rL="/assets/game-of-century-CDS5TWna.jpg",aL="/assets/immortal-game-DrIuk7HF.jpg",iL="/assets/fischer-spassky-DfDoxZQS.jpg",sL="/assets/opera-game-BfSD56jE.jpg",oL="/assets/evergreen-game-SEOaTSt0.jpg",lL="/assets/tal-brilliancy-BpII900C.jpg",cL="/assets/rubinstein-immortal-gZGbIDr2.jpg",uL="/assets/carlsen-karjakin-C9YLvs86.jpg",dL={"kasparov-topalov-1999":nL,"byrne-fischer-1956":rL,"anderssen-kieseritzky-1851":aL,"deep-blue-kasparov-1997":"/assets/deep-blue-CM4oqoJO.jpg","spassky-fischer-1972":iL,"lasker-thomas-1912":"/assets/king-hunt-DLyc8fIN.jpg","morphy-opera-1858":sL,"oldest-recorded-1475":"/assets/oldest-game-DojtEF5Q.jpg","carlsen-anand-2013":"/assets/carlsen-champion-C05YSVxf.jpg","botvinnik-capablanca-1938":"/assets/botvinnik-brilliance-CcodLU00.jpg","alekhine-capablanca-1927":"/assets/alekhine-capablanca-Pa5B3vp6.jpg","marshall-capablanca-1909":"/assets/marshall-capablanca-DYdAhN6k.jpg","anderssen-dufresne-1852":oL,"karpov-kasparov-1985":"/assets/karpov-kasparov-1985-V6gyA6fM.jpg","short-timman-1991":"/assets/short-timman-vkk8ZWDO.jpg","polgar-kasparov-2002":"/assets/polgar-kasparov-DuIGqlGf.jpg","tal-miller-1988":lL,"fischer-spassky-1972-g6":"/assets/fischer-masterpiece-cajq2WX_.jpg","steinitz-bardeleben-1895":"/assets/steinitz-brilliancy-dZzyqoTU.jpg","rotlewi-rubinstein-1907":cL,"pillsbury-lasker-1896":"/assets/pillsbury-lasker-DjXE_nJN.jpg","euwe-alekhine-1935":"/assets/euwe-alekhine-CC1lJa6N.jpg","petrosian-spassky-1966":"/assets/petrosian-spassky-CnqCJb9j.jpg","smyslov-reshevsky-1945":"/assets/smyslov-reshevsky-DfDI1rEB.jpg","anand-kramnik-2008":"/assets/anand-kramnik-C3A5kyrN.jpg","kramnik-kasparov-2000":"/assets/kramnik-kasparov-DJ3-Ob_q.jpg","topalov-anand-2005":"/assets/topalov-anand-BsDo3Ypr.jpg","larsen-spassky-1970":"/assets/larsen-spassky-E0FHv2GF.jpg","ivanchuk-yusupov-1991":"/assets/ivanchuk-yusupov-Crc6eNF2.jpg","keres-petrosian-1959":"/assets/keres-petrosian-C3rQilHa.jpg","ding-nepomniachtchi-2023":"/assets/ding-nepo-2C1KGdPm.jpg","gukesh-ding-2024":"/assets/gukesh-ding-jfKe_D3F.jpg","nakamura-caruana-2018":"/assets/nakamura-caruana-A4g6CUF3.jpg","aronian-anand-2013":"/assets/aronian-anand-BAcOFiJL.jpg","firouzja-carlsen-2022":"/assets/firouzja-carlsen-Ddyfk1E0.jpg","fischer-larsen-1971":"/assets/fischer-larsen-CyGl3gN_.jpg","kasparov-karpov-1990":"/assets/kasparov-karpov-1990-BneTG-K5.jpg","spassky-bronstein-1960":"/assets/spassky-bronstein-D8KKKcPx.jpg","nezhmetdinov-chernikov-1962":"/assets/nezhmetdinov-chernikov-CPcN7lWc.jpg","karpov-seirawan-1982":"/assets/karpov-seirawan-PZMR4oz6.jpg","greco-amateur-1619":"/assets/greco-amateur-Bd0C_B7F.jpg","philidor-amateur-1790":"/assets/philidor-amateur-A7T2E_cU.jpg","saint-amant-staunton-1843":"/assets/saint-amant-staunton-CMY6MTuF.jpg","morphy-anderssen-1858":"/assets/morphy-anderssen-tfgt-bEA.jpg","zukertort-blackburne-1883":"/assets/zukertort-blackburne-CTCCxCWs.jpg","blackburne-amateur-1880":"/assets/blackburne-amateur-Ugm2RS7z.jpg","tarrasch-lasker-1908":"/assets/tarrasch-lasker-Dc_UM14k.jpg","lasker-schlechter-1910":"/assets/lasker-schlechter-uf7_qwbl.jpg","janowski-lasker-1909":"/assets/janowski-lasker-vEQ68-Ff.jpg","lopez-amateur-1560":"/assets/lopez-amateur-UDYcCeXg.jpg","bird-amateur-1886":"/assets/bird-amateur-UhKGOw9D.jpg","nimzowitsch-capablanca-1927":"/assets/nimzowitsch-capablanca-B0-5PgVs.jpg","lilienthal-capablanca-1936":"/assets/lilienthal-capablanca-Gl-dhe3C.jpg","capablanca-bernstein-1914":"/assets/capablanca-bernstein-DKtQ3egW.jpg","maroczy-tartakower-1922":"/assets/maroczy-tartakower-BcDAjsI-.jpg","bogoljubow-alekhine-1929":"/assets/bogoljubow-alekhine-ajK5LB9T.jpg","flohr-botvinnik-1933":"/assets/flohr-botvinnik-CSyC7Cwe.jpg","tartakower-reti-1923":"/assets/tartakower-reti-D11NKfy8.jpg","torre-lasker-1925":"/assets/torre-lasker-PaxkoYGe.jpg","najdorf-glucksberg-1935":"/assets/najdorf-glucksberg-Crq4lia0.jpg","spielmann-reti-1928":"/assets/spielmann-reti-B31tnRo7.jpg","pillsbury-tarrasch-1895":"/assets/pillsbury-tarrasch-Cn4her35.jpg","chigorin-tarrasch-1893":"/assets/chigorin-tarrasch-Bcm_r5qy.jpg","adams-torre-1920":"/assets/adams-torre-BCzrmLx3.jpg","zurich-1953":"/assets/zurich-1953-33Jxhs1p.jpg","botvinnik-smyslov-1954":"/assets/botvinnik-smyslov-Be9vx_Vg.jpg","bronstein-brilliancy-1951":"/assets/bronstein-brilliancy-CFWj_Gbg.jpg","reshevsky-najdorf-1953":"/assets/reshevsky-najdorf-CDJau37M.jpg","spassky-petrosian-1969":"/assets/spassky-petrosian-Dcw8Dd7b.jpg","kholmov-bronstein-1964":"/assets/kholmov-bronstein-T6aNY1Aa.jpg","suetin-spassky-1963":"/assets/suetin-spassky-Dpb_1lAy.jpg","korchnoi-karpov-1978":"/assets/korchnoi-karpov-BrQNLCar.jpg","petrosian-fischer-1971":"/assets/petrosian-fischer-DwY-ZZ6x.jpg","geller-fischer-1967":"/assets/geller-fischer-T0xXMHed.jpg","stein-portisch-1962":"/assets/stein-portisch-DtOqUTXM.jpg","gligoric-fischer-1961":"/assets/gligoric-fischer-Bf_d-k_B.jpg","lombardy-fischer-1960":"/assets/lombardy-fischer-B7L5dt3y.jpg","kasparov-short-1993":"/assets/kasparov-short-1993-DL00fCen.jpg","anand-kasparov-1995":"/assets/viswanathan-kasparov-1995-CNiQ9roz.jpg","gelfand-anand-2012":"/assets/gelfand-anand-BtTAp49K.jpg","carlsen-karjakin-2016":uL,"so-carlsen-2017":"/assets/so-carlsen-BwkMnap6.jpg","kramnik-carlsen-2014":"/assets/kramnik-carlsen-SwYGZUaY.jpg","vachier-lagrave-aronian-2017":"/assets/vachier-lagrave-aronian-BUp_W9_m.jpg","candidates-2020":"/assets/candidates-2020-y-nY-7jF.jpg","chinese-immortal-1933":"/assets/chinese-immortal-gnBf1sMA.jpg","sicilian-najdorf-1997":"/assets/sicilian-najdorf-1997-ChOpvv0S.jpg","stockfish-leela-2020":"/assets/stockfish-leela-BkbSkMTi.jpg","habu-kasparov-2014":"/assets/habu-kasparov-D9myShd6.jpg","mwali-amateur-1850":"/assets/mwali-amateur-CjxkiTF2.jpg","carlsen-anand-wc-2013":"/assets/carlsen-crowning-FfC0kpFt.jpg","carlsen-nepo-wc-2021":"/assets/carlsen-epic-marathon-DXkFNnf-.jpg","carlsen-ernst-2004":"/assets/carlsen-prodigy-mc8FezjK.jpg","carlsen-kasparov-2004":"/assets/carlsen-kasparov-legend-Crls8Yyk.jpg","carlsen-karjakin-wc-2016":"/assets/carlsen-breakthrough-CD6mChFu.jpg","carlsen-caruana-wc-2018":"/assets/carlsen-tiebreak-4PJx5LqX.jpg","carlsen-topalov-2008":"/assets/carlsen-sicilian-fire-CUAJKAy5.jpg","carlsen-kramnik-2010":"/assets/carlsen-kramnik-battle-B2Fofe7N.jpg","aronian-carlsen-2008":"/assets/carlsen-grunfeld-counter-a7u5idgp.jpg","carlsen-ivanchuk-2009":"/assets/carlsen-tactical-brilliancy-DxQw_hcG.jpg","carlsen-shirov-2009":"/assets/carlsen-queen-sacrifice-CrUIMWjo.jpg","carlsen-radjabov-2008":"/assets/carlsen-rook-lift-C-FNOuxW.jpg","carlsen-anand-wc-2014":"/assets/carlsen-berlin-master-F2SH7OMG.jpg","carlsen-aronian-2012":"/assets/carlsen-nordic-warrior-D4I6bT9E.jpg","carlsen-nakamura-2011":"/assets/carlsen-blitz-speed-Ca18VXle.jpg","carlsen-giri-2015":"/assets/carlsen-positional-squeeze-CjbTpp5X.jpg","carlsen-so-2017":"/assets/carlsen-exchange-sac-zm39et_Y.jpg","carlsen-ding-2019":"/assets/carlsen-knight-outpost-1pqnMHDE.jpg","carlsen-firouzja-2022":"/assets/carlsen-promotion-CG3u0MlH.jpg","carlsen-nepo-wc-2021-g8":"/assets/carlsen-crushing-victory-jnTXAxUr.jpg","carlsen-caruana-2018-g10":"/assets/carlsen-spanish-attack-BJnKS_3K.jpg","carlsen-anand-wc-2013-showdown":"/assets/carlsen-anand-showdown-B-dJPDXg.jpg","carlsen-vachier-lagrave-2020":"/assets/carlsen-technique-Cw6YQzJc.jpg","carlsen-anand-zugzwang-2014":"/assets/carlsen-zugzwang-CtoniaAo.jpg","carlsen-endgame-2015":"/assets/carlsen-endgame-master-C1ki_Cvh.jpg"};function hL(e){return e&&dL[e]||null}const pL={"kasparov-topalov-1999":{gameId:"kasparov-topalov-1999",poem:"Rook and queen offered\nThe king hunts through fire and steel.\nLegends are forged here.",style:"haiku"},"byrne-fischer-1956":{gameId:"byrne-fischer-1956",poem:"A boy of thirteen with eyes that see through time,\nSacrifices his queenthe world holds its breath.\nFrom Brooklyn's streets, a genius climbs.",style:"free verse"},"anderssen-kieseritzky-1851":{gameId:"anderssen-kieseritzky-1851",poem:"Both rooks, the queenall given away,\nYet victory blooms from sacrifice.\nThe Immortal Game, they'll forever say.",style:"quatrain"},"deep-blue-kasparov-1997":{gameId:"deep-blue-kasparov-1997",poem:"Silicon dreams meet mortal thought\nThe machine finds what man could not.",style:"couplet"},"spassky-fischer-1972":{gameId:"spassky-fischer-1972",poem:"Cold War on sixty-four squares,\nAmerica's champion strikes.\nHistory bends to his will.",style:"free verse"},"lasker-thomas-1912":{gameId:"lasker-thomas-1912",poem:"The king, once safe, now flees in terror\nAcross the board, through check and fire,\nUntil at last, cornered in error.",style:"quatrain"},"morphy-opera-1858":{gameId:"morphy-opera-1858",poem:"Between the arias, between the acts,\nA queen is given, a king is caught.\nThe opera ends with checkmate's facts.",style:"quatrain"},"oldest-recorded-1475":{gameId:"oldest-recorded-1475",poem:"Five centuries whisper\nThrough ancient moves preserved\nChess finds its first voice.",style:"haiku"},"carlsen-anand-2013":{gameId:"carlsen-anand-2013",poem:"The young Norwegian, patient as stone,\nGrinds down the champion, move by move,\nUntil the crown becomes his own.",style:"quatrain"},"botvinnik-capablanca-1938":{gameId:"botvinnik-capablanca-1938",poem:"The Cuban legend meets Soviet steel.\nA queen sacrificed, a dynasty falls.\nNew masters rise; old crowns must yield.",style:"quatrain"},"alekhine-capablanca-1927":{gameId:"alekhine-capablanca-1927",poem:"Thirty-four battles, marathon of will\nThe invincible finally bends.\nBuenos Aires witnesses the kill.",style:"free verse"},"marshall-capablanca-1909":{gameId:"marshall-capablanca-1909",poem:"Youth arrives with quiet grace,\nThe champion falls to unknown hands.\nA star is born to take his place.",style:"quatrain"},"anderssen-dufresne-1852":{gameId:"anderssen-dufresne-1852",poem:"Evergreenthe game that never fades,\nWhere beauty conquers through sacrificial blades.",style:"couplet"},"karpov-kasparov-1985":{gameId:"karpov-kasparov-1985",poem:"The octopus knight\nStrangles from its outpost square\nYouth claims its throne tonight.",style:"haiku"},"short-timman-1991":{gameId:"short-timman-1991",poem:"The king marches forth, fearless and bold,\nUp the board, through enemy lines.\nA victory story forever told.",style:"quatrain"},"polgar-kasparov-2002":{gameId:"polgar-kasparov-2002",poem:"She breaks the barrier, defeats the king.\nHistory written in a woman's hand.",style:"couplet"},"tal-miller-1988":{gameId:"tal-miller-1988",poem:"The Magician plays\nPieces dance in wild fire.\nRiga's flame still blazes.",style:"haiku"},"fischer-spassky-1972-g6":{gameId:"fischer-spassky-1972-g6",poem:"The queen's gambit declined, then transformed,\nInto a symphony of perfect play.\nThe greatest game the world has seen performed.",style:"quatrain"},"steinitz-bardeleben-1895":{gameId:"steinitz-bardeleben-1895",poem:"Rather than face the inevitable mate,\nHe walked away from the board's cruel fate.",style:"couplet"},"rubinstein-rotlewi-1907":{gameId:"rubinstein-rotlewi-1907",poem:"Rubinstein's immortal sacrifice speaks\nTwo rooks, a queen, all fuel for the blaze.\nPerfection found in what destruction wreaks.",style:"quatrain"},"nezhmetdinov-chernikov-1962":{gameId:"nezhmetdinov-chernikov-1962",poem:"Wild knight rides forth,\nSacrifice upon sacrifice\nRussian fire burns true.",style:"haiku"},"carlsen-karjakin-2016":{gameId:"carlsen-karjakin-2016",poem:"In rapid's crucible, under tiebreak's strain,\nThe champion proves his reign remains.",style:"couplet"},"ding-nepomniachtchi-2023":{gameId:"ding-nepomniachtchi-2023",poem:"After Carlsen's crown lies empty still,\nTwo warriors fight for chess's throne.\nHistory writes with iron will.",style:"quatrain"},"nakamura-caruana-2024":{gameId:"nakamura-caruana-2024",poem:"The Candidates ragemodern titans clash.\nAmerican dreams in every flash.",style:"couplet"},"gukesh-ding-2024":{gameId:"gukesh-ding-2024",poem:"Eighteen years young\nThe youngest world champion rises.\nIndia's prodigy has begun.",style:"haiku"},"adams-torre-1920":{gameId:"adams-torre-1920",poem:"The windmill turns, relentless, sure,\nEach check a blade that cuts through hope.\nThe trap complete, the victory pure.",style:"quatrain"},"greco-amateur-1620":{gameId:"greco-amateur-1620",poem:"Before modern rules were set,\nThe Italian master taught\nLessons we cannot forget.",style:"free verse"},"philidor-amateur-1790":{gameId:"philidor-amateur-1790",poem:"Pawns are the soul of chess, he said\nThen proved it true with every move instead.",style:"couplet"},"lopez-amateur-1560":{gameId:"lopez-amateur-1560",poem:"The Spanish priest plays ancient lines,\nWhile Renaissance courts watch with awe.\nHis opening still forever shines.",style:"quatrain"},"morphy-anderssen-1858":{gameId:"morphy-anderssen-1858",poem:"Two titans meet on Paris ground\nThe American proves the finest found.",style:"couplet"},"bird-amateur-1886":{gameId:"bird-amateur-1886",poem:"Eccentric moves, surprising start\nBird's Opening, chess as art.",style:"couplet"},"blackburne-amateur-1880":{gameId:"blackburne-amateur-1880",poem:"The Black Death strikes without a sound,\nCombinations sharp and swift abound.",style:"couplet"},"lasker-schlechter-1910":{gameId:"lasker-schlechter-1910",poem:"One move from losing crown and fame,\nLasker finds the saving flame.",style:"couplet"},"tarrasch-lasker-1908":{gameId:"tarrasch-lasker-1908",poem:"Theory meets psychology\nLasker's practical play prevails.",style:"epigram"},"pillsbury-tarrasch-1895":{gameId:"pillsbury-tarrasch-1895",poem:"Hastings '95\nAmerica's new hope arrives.\nPillsbury takes the prize alive.",style:"haiku"},"pillsbury-lasker-1896":{gameId:"pillsbury-lasker-1896",poem:"Champions collide,\nBrilliance meeting brilliance\nChess history's tide.",style:"haiku"},"janowski-lasker-1909":{gameId:"janowski-lasker-1909",poem:"Lasker defends with iron nerve,\nThe challenger gets what he deserves.",style:"couplet"},"chigorin-tarrasch-1893":{gameId:"chigorin-tarrasch-1893",poem:"Russian romanticism\nMeets German precision\nChess philosophy in collision.",style:"free verse"},"maroczy-tartakower-1922":{gameId:"maroczy-tartakower-1922",poem:"The Bind constricts\nPatient positional play\nSlowly restricts.",style:"haiku"},"bogoljubow-alekhine-1922":{gameId:"bogoljubow-alekhine-1922",poem:"Alekhine's genius ignites the board,\nCombinations sharp as any sword.",style:"couplet"},"spielmann-reti-1928":{gameId:"spielmann-reti-1928",poem:"Hypermodern dreams unfold\nNew ideas brave and bold.",style:"couplet"},"tartakower-reti-1926":{gameId:"tartakower-reti-1926",poem:"Fianchetto flanks arise,\nThe center controlled from distant skies.",style:"couplet"},"euwe-alekhine-1935":{gameId:"euwe-alekhine-1935",poem:"The mathematician calculates,\nThe champion faltersHolland celebrates.",style:"couplet"},"flohr-botvinnik-1933":{gameId:"flohr-botvinnik-1933",poem:"Soviet school rises\nScientific chess begins.\nNew era surprises.",style:"haiku"},"lilienthal-capablanca-1935":{gameId:"lilienthal-capablanca-1935",poem:"Even the mighty machine can fall,\nWhen youth strikes with everything at all.",style:"couplet"},"botvinnik-smyslov-1954":{gameId:"botvinnik-smyslov-1954",poem:"The Patriarch fights to hold his crown,\nBut Smyslov's artistry won't be held down.",style:"couplet"},"smyslov-reshevsky-1953":{gameId:"smyslov-reshevsky-1953",poem:"Zurich '53\nThe candidates gather, tensions run free.\nWho will the next challenger be?",style:"quatrain"},"keres-petrosian-1959":{gameId:"keres-petrosian-1959",poem:"Iron Tigran builds his wall,\nNothing gets through, nothing at all.",style:"couplet"},"petrosian-spassky-1966":{gameId:"petrosian-spassky-1966",poem:"The fortress stands\nDefense as art, victory in patient hands.",style:"couplet"},"spassky-petrosian-1969":{gameId:"spassky-petrosian-1969",poem:"Universal style breaks through the wall,\nSpassky rises, Petrosian falls.",style:"couplet"},"geller-fischer-1967":{gameId:"geller-fischer-1967",poem:"Fischer meets his nemesis\nGeller's score remains the test.",style:"couplet"},"petrosian-fischer-1971":{gameId:"petrosian-fischer-1971",poem:"The Tiger stalks but cannot catch\nThe American who's found his match.",style:"couplet"},"lombardy-fischer-1960":{gameId:"lombardy-fischer-1960",poem:"Teacher and student cross swords\nGenius speaks in opening chords.",style:"couplet"},"gligoric-fischer-1959":{gameId:"gligoric-fischer-1959",poem:"Yugoslav master, sixteen-year-old foe\nFischer's star begins to glow.",style:"couplet"},"fischer-larsen-1971":{gameId:"fischer-larsen-1971",poem:"Six and zero\nLarsen falls to Fischer's perfect score.\nThe Dane meets his hero.",style:"haiku"},"spassky-bronstein-1960":{gameId:"spassky-bronstein-1960",poem:"The artist battles the rising star\nBronstein's brilliance shines from afar.",style:"couplet"},"bronstein-brilliancy-1953":{gameId:"bronstein-brilliancy-1953",poem:"Zurich's brightest game unfolds,\nBronstein's genius, fearless and bold.",style:"couplet"},"kholmov-bronstein-1965":{gameId:"kholmov-bronstein-1965",poem:"Soviet masters clash and fight,\nBronstein conjures pure delight.",style:"couplet"},"suetin-spassky-1963":{gameId:"suetin-spassky-1963",poem:"Young Spassky shows his might\nBrilliant attack ignites the night.",style:"couplet"},"korchnoi-karpov-1978":{gameId:"korchnoi-karpov-1978",poem:"Defector versus loyalistchess Cold War.\nBaguio's tension like never before.",style:"couplet"},"karpov-seirawan-1982":{gameId:"karpov-seirawan-1982",poem:"The boa constricts,\nKarpov's positional grip\nSeirawan conflicts.",style:"haiku"},"kasparov-karpov-1990":{gameId:"kasparov-karpov-1990",poem:"Lyon and New Yorkthe fifth match rages on.\nTwo titans fighting until the bitter dawn.",style:"couplet"},"kasparov-short-1993":{gameId:"kasparov-short-1993",poem:"London's classical chess\nKasparov proves he's still the best.",style:"couplet"},"kramnik-kasparov-2000":{gameId:"kramnik-kasparov-2000",poem:"The Berlin Wall holds\nThe champion's reign finally ends.\nA new era unfolds.",style:"haiku"},"kramnik-carlsen-2008":{gameId:"kramnik-carlsen-2008",poem:"The Mozart of chess arrives,\nAgainst Kramnik, the young genius thrives.",style:"couplet"},"topalov-anand-2010":{gameId:"topalov-anand-2010",poem:"Sofia's drama unfolds\nAnand defends what he holds.",style:"couplet"},"gelfand-anand-2012":{gameId:"gelfand-anand-2012",poem:"Moscow's quiet match\nAnand survives Gelfand's catch.",style:"couplet"},"aronian-anand-2013":{gameId:"aronian-anand-2013",poem:"Before the crown changes hands,\nAronian makes his final stands.",style:"couplet"},"stein-portisch-1962":{gameId:"stein-portisch-1962",poem:"Leonid the tactician\nSoviet fire meets Hungarian precision.",style:"couplet"},"ivanchuk-yusupov-1991":{gameId:"ivanchuk-yusupov-1991",poem:"Genius unleashed\nIvanchuk's magic cannot be policed.",style:"couplet"},"anand-kramnik-2008":{gameId:"anand-kramnik-2008",poem:"The Tiger from Madras strikes,\nClaiming the crown he likes.",style:"couplet"},"so-carlsen-2016":{gameId:"so-carlsen-2016",poem:"American challenge rises\nSo's brilliance surprises.",style:"couplet"},"vachier-lagrave-aronian-2018":{gameId:"vachier-lagrave-aronian-2018",poem:"French flair meets Armenian fire\nModern masters never tire.",style:"couplet"},"firouzja-carlsen-2022":{gameId:"firouzja-carlsen-2022",poem:"The prodigy challenges the king\nWhat will tomorrow's battles bring?",style:"couplet"},"stockfish-leela-2023":{gameId:"stockfish-leela-2023",poem:"Machine versus machine\nPerfection beyond human dream.",style:"couplet"},"habu-kasparov-1996":{gameId:"habu-kasparov-1996",poem:"Shogi master crosses the board\nEast meets West, mutual accord.",style:"couplet"},"viswanathan-kasparov-1995":{gameId:"viswanathan-kasparov-1995",poem:"PCA battle in the tower\nThe champion shows his power.",style:"couplet"},"najdorf-glucksberg-1929":{gameId:"najdorf-glucksberg-1929",poem:"The Polish Immortal blazes bright\nSacrifice after sacrifice ignites the night.",style:"couplet"},"reshevsky-najdorf-1952":{gameId:"reshevsky-najdorf-1952",poem:"Two legends of their generation\nChess excellence in demonstration.",style:"couplet"},"capablanca-bernstein-1914":{gameId:"capablanca-bernstein-1914",poem:"The machine plays perfect\nCapablanca's technique, no defect.",style:"couplet"},"nimzowitsch-capablanca-1927":{gameId:"nimzowitsch-capablanca-1927",poem:"The revolutionary meets the machine\nNimzowitsch's ideas on the scene.",style:"couplet"},"torre-lasker-1925":{gameId:"torre-lasker-1925",poem:"From Mexico, Torre strikes\nThe windmill spins, the crowd delights.",style:"couplet"},"sicilian-najdorf-1997":{gameId:"sicilian-najdorf-1997",poem:"The Poisoned Pawn still bites\nTheory's edge in tournament fights.",style:"couplet"},"chinese-immortal-1941":{gameId:"chinese-immortal-1941",poem:"From the East, a masterpiece\nChina's chess art finds release.",style:"couplet"},"saint-amant-staunton-1843":{gameId:"saint-amant-staunton-1843",poem:"France and England clash\nThe first great match in a flash.",style:"couplet"},"zurich-1953-brilliancy":{gameId:"zurich-1953-brilliancy",poem:"The Candidates' finest hour\nBrilliancy unveils its power.",style:"couplet"},"mwali-amateur-1973":{gameId:"mwali-amateur-1973",poem:"Africa's chess rises\nNew talent always surprises.",style:"couplet"}},mL=e=>pL[e]||null,fL=e=>{const t=pL[e];if(!t)return null;return t.poem.split("\n")[0]},gL=e=>{const t=pL[e];if(!t)return null;return{haiku:"Haiku",couplet:"Couplet",quatrain:"Quatrain","free verse":"Free Verse",epigram:"Epigram","sonnet fragment":"Sonnet Fragment"}[t.style]||t.style};function yL(e,t,n,r){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,yL.prototype),a.expected=t,a.found=n,a.location=r,a.name="SyntaxError",a}function vL(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}function xL(e,t){var n,r,a,i,s={},o=(t=void 0!==t?t:{}).grammarSource,l={pgn:Ue},c=Ue,u="[",d='"',h="]",p=".",m="O-O-O",f="O-O",g="0-0-0",y="0-0",v="$",x="{",b="}",w=";",k="(",N=")",j="1-0",_="0-1",S="1/2-1/2",C="*",P=/^[a-zA-Z]/,E=/^[^"]/,R=/^[0-9]/,O=/^[.]/,T=/^[a-zA-Z1-8\-=]/,M=/^[+#]/,A=/^[!?]/,B=/^[^}]/,D=/^[^\r\n]/,I=/^[ \t\r\n]/,L=qe("tag pair"),F=$e("[",!1),$=$e('"',!1),z=$e("]",!1),q=qe("tag name"),V=ze([["a","z"],["A","Z"]],!1,!1),W=qe("tag value"),Q=ze(['"'],!0,!1),U=qe("move number"),K=ze([["0","9"]],!1,!1),H=$e(".",!1),G=ze(["."],!1,!1),Y=qe("standard algebraic notation"),Z=$e("O-O-O",!1),X=$e("O-O",!1),J=$e("0-0-0",!1),ee=$e("0-0",!1),te=ze([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),ne=ze(["+","#"],!1,!1),re=qe("suffix annotation"),ae=ze(["!","?"],!1,!1),ie=qe("NAG"),se=$e("$",!1),oe=qe("brace comment"),le=$e("{",!1),ce=ze(["}"],!0,!1),ue=$e("}",!1),de=qe("rest of line comment"),he=$e(";",!1),pe=ze(["\r","\n"],!0,!1),me=qe("variation"),fe=$e("(",!1),ge=$e(")",!1),ye=qe("game termination marker"),ve=$e("1-0",!1),xe=$e("0-1",!1),be=$e("1/2-1/2",!1),we=$e("*",!1),ke=qe("whitespace"),Ne=ze([" ","\t","\r","\n"],!1,!1),je=function(e,t){return function(e,t){if(t.marker&&t.marker.comment){let e=t.root;for(;;){const n=e.variations[0];if(!n){e.comment=t.marker.comment;break}e=n}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}(e,t)},_e=function(e){return Object.fromEntries(e)},Se=function(e,t){return[e,t]},Ce=function(e,t){return{root:e,marker:t}},Pe=function(e,t){return function(...e){const[t,...n]=e;let r=t;for(const a of n)null!==a&&(r.variations=[a,...a.variations],a.variations=[],r=a);return t}(function(e){return null!==e?{comment:e,variations:[]}:{variations:[]}}(e),...t.flat())},Ee=function(e,t,n,r,a){return function(e,t,n,r,a){const i={move:e,variations:a};return t&&(i.suffix=t),n&&(i.nag=n),null!==r&&(i.comment=r),i}(e,t,n,r,a)},Re=function(e){return e},Oe=function(e){return e.replace(/[\r\n]+/g," ")},Te=function(e){return e.trim()},Me=function(e){return e},Ae=function(e,t){return{result:e,comment:t}},Be=0|t.peg$currPos,De=[{line:1,column:1}],Ie=Be,Le=t.peg$maxFailExpected||[],Fe=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in l))throw new Error("Can't start parsing from rule \""+t.startRule+'".');c=l[t.startRule]}function $e(e,t){return{type:"literal",text:e,ignoreCase:t}}function ze(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function qe(e){return{type:"other",description:e}}function Ve(t){var n,r=De[t];if(r)return r;if(t>=De.length)n=De.length-1;else for(n=t;!De[--n];);for(r={line:(r=De[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return De[t]=r,r}function We(e,t,n){var r=Ve(e),a=Ve(t);return{source:o,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:a.line,column:a.column}}}function Qe(e){Be<Ie||(Be>Ie&&(Ie=Be,Le=[]),Le.push(e))}function Ue(){var t,n;return t=function(){var e,t,n;e=Be,t=[],n=Ke();for(;n!==s;)t.push(n),n=Ke();return n=Je(),e=_e(t),e}(),n=function(){var t,n,r;t=Be,n=He(),Je(),r=function(){var t,n,r;Fe++,t=Be,e.substr(Be,3)===j?(n=j,Be+=3):(n=s,0===Fe&&Qe(ve));n===s&&(e.substr(Be,3)===_?(n=_,Be+=3):(n=s,0===Fe&&Qe(xe)),n===s&&(e.substr(Be,7)===S?(n=S,Be+=7):(n=s,0===Fe&&Qe(be)),n===s&&(42===e.charCodeAt(Be)?(n=C,Be++):(n=s,0===Fe&&Qe(we)))));n!==s?(Je(),(r=Ze())===s&&(r=null),t=Ae(n,r)):(Be=t,t=s);Fe--,t===s&&(n=s,0===Fe&&Qe(ye));return t}(),r===s&&(r=null);return Je(),t=Ce(n,r),t}(),je(t,n)}function Ke(){var t,n,r,a,i,o,l;return Fe++,t=Be,Je(),91===e.charCodeAt(Be)?(n=u,Be++):(n=s,0===Fe&&Qe(F)),n!==s?(Je(),r=function(){var t,n,r;Fe++,t=Be,n=[],r=e.charAt(Be),P.test(r)?Be++:(r=s,0===Fe&&Qe(V));if(r!==s)for(;r!==s;)n.push(r),r=e.charAt(Be),P.test(r)?Be++:(r=s,0===Fe&&Qe(V));else n=s;t=n!==s?e.substring(t,Be):n;Fe--,t===s&&(n=s,0===Fe&&Qe(q));return t}(),r!==s?(Je(),34===e.charCodeAt(Be)?(a=d,Be++):(a=s,0===Fe&&Qe($)),a!==s?(i=function(){var t,n,r;Fe++,t=Be,n=[],r=e.charAt(Be),E.test(r)?Be++:(r=s,0===Fe&&Qe(Q));for(;r!==s;)n.push(r),r=e.charAt(Be),E.test(r)?Be++:(r=s,0===Fe&&Qe(Q));t=e.substring(t,Be),Fe--,n=s,0===Fe&&Qe(W);return t}(),34===e.charCodeAt(Be)?(o=d,Be++):(o=s,0===Fe&&Qe($)),o!==s?(Je(),93===e.charCodeAt(Be)?(l=h,Be++):(l=s,0===Fe&&Qe(z)),l!==s?t=Se(r,i):(Be=t,t=s)):(Be=t,t=s)):(Be=t,t=s)):(Be=t,t=s)):(Be=t,t=s),Fe--,t===s&&0===Fe&&Qe(L),t}function He(){var e,t,n;for((e=Ze())===s&&(e=null),t=[],n=Ge();n!==s;)t.push(n),n=Ge();return Pe(e,t)}function Ge(){var t,n,r,a,i,o,l,c;if(t=Be,Je(),function(){var t,n,r,a,i,o;Fe++,t=Be,n=[],r=e.charAt(Be),R.test(r)?Be++:(r=s,0===Fe&&Qe(K));for(;r!==s;)n.push(r),r=e.charAt(Be),R.test(r)?Be++:(r=s,0===Fe&&Qe(K));46===e.charCodeAt(Be)?(r=p,Be++):(r=s,0===Fe&&Qe(H));if(r!==s){for(a=Je(),i=[],o=e.charAt(Be),O.test(o)?Be++:(o=s,0===Fe&&Qe(G));o!==s;)i.push(o),o=e.charAt(Be),O.test(o)?Be++:(o=s,0===Fe&&Qe(G));t=n=[n,r,a,i]}else Be=t,t=s;Fe--,t===s&&(n=s,0===Fe&&Qe(U))}(),Je(),n=function(){var t,n,r,a,i,o;Fe++,t=Be,n=Be,e.substr(Be,5)===m?(r=m,Be+=5):(r=s,0===Fe&&Qe(Z));if(r===s&&(e.substr(Be,3)===f?(r=f,Be+=3):(r=s,0===Fe&&Qe(X)),r===s&&(e.substr(Be,5)===g?(r=g,Be+=5):(r=s,0===Fe&&Qe(J)),r===s&&(e.substr(Be,3)===y?(r=y,Be+=3):(r=s,0===Fe&&Qe(ee)),r===s))))if(r=Be,a=e.charAt(Be),P.test(a)?Be++:(a=s,0===Fe&&Qe(V)),a!==s){if(i=[],o=e.charAt(Be),T.test(o)?Be++:(o=s,0===Fe&&Qe(te)),o!==s)for(;o!==s;)i.push(o),o=e.charAt(Be),T.test(o)?Be++:(o=s,0===Fe&&Qe(te));else i=s;i!==s?r=a=[a,i]:(Be=r,r=s)}else Be=r,r=s;r!==s?(a=e.charAt(Be),M.test(a)?Be++:(a=s,0===Fe&&Qe(ne)),a===s&&(a=null),n=r=[r,a]):(Be=n,n=s);t=n!==s?e.substring(t,Be):n;Fe--,t===s&&(n=s,0===Fe&&Qe(Y));return t}(),n!==s){for(r=function(){var t,n,r;Fe++,t=Be,n=[],r=e.charAt(Be),A.test(r)?Be++:(r=s,0===Fe&&Qe(ae));for(;r!==s;)n.push(r),n.length>=2?r=s:(r=e.charAt(Be),A.test(r)?Be++:(r=s,0===Fe&&Qe(ae)));n.length<1?(Be=t,t=s):t=n;Fe--,t===s&&(n=s,0===Fe&&Qe(re));return t}(),r===s&&(r=null),a=[],i=Ye();i!==s;)a.push(i),i=Ye();for(i=Je(),(o=Ze())===s&&(o=null),l=[],c=Xe();c!==s;)l.push(c),c=Xe();t=Ee(n,r,a,o,l)}else Be=t,t=s;return t}function Ye(){var t,n,r,a,i;if(Fe++,t=Be,Je(),36===e.charCodeAt(Be)?(n=v,Be++):(n=s,0===Fe&&Qe(se)),n!==s){if(r=Be,a=[],i=e.charAt(Be),R.test(i)?Be++:(i=s,0===Fe&&Qe(K)),i!==s)for(;i!==s;)a.push(i),i=e.charAt(Be),R.test(i)?Be++:(i=s,0===Fe&&Qe(K));else a=s;(r=a!==s?e.substring(r,Be):a)!==s?t=Re(r):(Be=t,t=s)}else Be=t,t=s;return Fe--,t===s&&0===Fe&&Qe(ie),t}function Ze(){var t;return(t=function(){var t,n,r,a,i;Fe++,t=Be,123===e.charCodeAt(Be)?(n=x,Be++):(n=s,0===Fe&&Qe(le));if(n!==s){for(r=Be,a=[],i=e.charAt(Be),B.test(i)?Be++:(i=s,0===Fe&&Qe(ce));i!==s;)a.push(i),i=e.charAt(Be),B.test(i)?Be++:(i=s,0===Fe&&Qe(ce));r=e.substring(r,Be),125===e.charCodeAt(Be)?(a=b,Be++):(a=s,0===Fe&&Qe(ue)),a!==s?t=Oe(r):(Be=t,t=s)}else Be=t,t=s;Fe--,t===s&&(n=s,0===Fe&&Qe(oe));return t}())===s&&(t=function(){var t,n,r,a,i;Fe++,t=Be,59===e.charCodeAt(Be)?(n=w,Be++):(n=s,0===Fe&&Qe(he));if(n!==s){for(r=Be,a=[],i=e.charAt(Be),D.test(i)?Be++:(i=s,0===Fe&&Qe(pe));i!==s;)a.push(i),i=e.charAt(Be),D.test(i)?Be++:(i=s,0===Fe&&Qe(pe));r=e.substring(r,Be),t=Te(r)}else Be=t,t=s;Fe--,t===s&&(n=s,0===Fe&&Qe(de));return t}()),t}function Xe(){var t,n,r,a;return Fe++,t=Be,Je(),40===e.charCodeAt(Be)?(n=k,Be++):(n=s,0===Fe&&Qe(fe)),n!==s&&(r=He())!==s?(Je(),41===e.charCodeAt(Be)?(a=N,Be++):(a=s,0===Fe&&Qe(ge)),a!==s?t=Me(r):(Be=t,t=s)):(Be=t,t=s),Fe--,t===s&&0===Fe&&Qe(me),t}function Je(){var t,n;for(Fe++,t=[],n=e.charAt(Be),I.test(n)?Be++:(n=s,0===Fe&&Qe(Ne));n!==s;)t.push(n),n=e.charAt(Be),I.test(n)?Be++:(n=s,0===Fe&&Qe(Ne));return Fe--,n=s,0===Fe&&Qe(ke),t}if(n=c(),t.peg$library)return{peg$result:n,peg$currPos:Be,peg$FAILED:s,peg$maxFailExpected:Le,peg$maxFailPos:Ie};if(n!==s&&Be===e.length)return n;throw n!==s&&Be<e.length&&Qe({type:"end"}),r=Le,a=Ie<e.length?e.charAt(Ie):null,i=Ie<e.length?We(Ie,Ie+1):We(Ie,Ie),new yL(yL.buildMessage(r,a),r,a,i)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(yL,Error),yL.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(a):a,s=this.location.source+":"+i.line+":"+i.column;if(r){var o=this.location.end,l=vL("",i.line.toString().length," "),c=r[a.line-1],u=(a.line===o.line?o.column:c.length+1)-a.column||1;t+="\n --\x3e "+s+"\n"+l+" |\n"+i.line+" | "+c+"\n"+l+" | "+vL("",a.column-1," ")+vL("",u,"^")}else t+="\n at "+s}return t},yL.buildMessage=function(e,t){var n,r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map(function(e){return Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)});return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function a(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+a(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+a(e)})}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+a(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+a(e)})}function o(e){return r[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(o);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+(((n=t)?'"'+i(n)+'"':"end of input")+" found.")};const bL=0xffffffffffffffffn;function wL(e,t){return 0xffffffffffffffffn&(e<<t|e>>64n-t)}function kL(e,t){return e*t&bL}const NL=(jL=0xa187eb39cdcaed8f31c4b365b102e01en,function(){let e=BigInt(jL&bL),t=BigInt(jL>>64n&bL);const n=kL(wL(kL(e,5n),7n),9n);return t^=e,e=(wL(e,24n)^t^t<<16n)&bL,t=wL(t,37n),jL=t<<64n|e,n});var jL;const _L=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>NL()))),SL=Array.from({length:8},()=>NL()),CL=Array.from({length:16},()=>NL()),PL=NL(),EL="w",RL="b",OL="p",TL="b",ML="r",AL="q",BL="k",DL="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class IL{constructor(e,t){fe(this,"color"),fe(this,"from"),fe(this,"to"),fe(this,"piece"),fe(this,"captured"),fe(this,"promotion"),fe(this,"flags"),fe(this,"san"),fe(this,"lan"),fe(this,"before"),fe(this,"after");const{color:n,piece:r,from:a,to:i,flags:s,captured:o,promotion:l}=t,c=rF(a),u=rF(i);this.color=n,this.piece=r,this.from=c,this.to=u,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=c+u,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const d in $L)$L[d]&s&&(this.flags+=FL[d]);o&&(this.captured=o),l&&(this.promotion=l,this.lan+=l)}isCapture(){return this.flags.indexOf(FL.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(FL.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(FL.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(FL.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(FL.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(FL.BIG_PAWN)>-1}}const LL=-1,FL={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},$L={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},zL={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},qL={...zL,WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},VL={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},WL={b:[16,32,17,15],w:[-16,-32,-17,-15]},QL={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},UL=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],KL=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],HL={p:1,n:2,b:4,r:8,q:16,k:32},GL=["n",TL,ML,AL],YL={[BL]:$L.KSIDE_CASTLE,[AL]:$L.QSIDE_CASTLE},ZL={w:[{square:VL.a1,flag:$L.QSIDE_CASTLE},{square:VL.h1,flag:$L.KSIDE_CASTLE}],b:[{square:VL.a8,flag:$L.QSIDE_CASTLE},{square:VL.h8,flag:$L.KSIDE_CASTLE}]},XL={b:1,w:6},JL="--";function eF(e){return e>>4}function tF(e){return 15&e}function nF(e){return-1!=="0123456789".indexOf(e)}function rF(e){const t=tF(e),n=eF(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function aF(e){return e===EL?RL:EL}function iF(e,t,n,r,a,i=void 0,s=$L.NORMAL){const o=eF(r);if(a!==OL||7!==o&&0!==o)e.push({color:t,from:n,to:r,piece:a,captured:i,flags:s});else for(let l=0;l<GL.length;l++){const o=GL[l];e.push({color:t,from:n,to:r,piece:a,captured:i,promotion:o,flags:s|$L.PROMOTION})}}function sF(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return OL}return t=t.toLowerCase(),"o"===t?BL:t}function oF(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class lF{constructor(e=DL,{skipValidation:t=!1}={}){fe(this,"_board",new Array(128)),fe(this,"_turn",EL),fe(this,"_header",{}),fe(this,"_kings",{w:LL,b:LL}),fe(this,"_epSquare",-1),fe(this,"_halfMoves",0),fe(this,"_moveNumber",0),fe(this,"_history",[]),fe(this,"_comments",{}),fe(this,"_castling",{w:0,b:0}),fe(this,"_hash",0n),fe(this,"_positionCount",new Map),this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:LL,b:LL},this._turn=EL,this._castling={w:0,b:0},this._epSquare=LL,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...qL},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:n=!1}={}){let r=e.split(/\s+/);if(r.length>=2&&r.length<6){const t=["-","-","0","1"];e=r.concat(t.slice(-(6-r.length))).join(" ")}if(r=e.split(/\s+/),!t){const{ok:t,error:n}=function(e){const t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const a=t[0].split("/");if(8!==a.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let s=0;s<a.length;s++){let e=0,t=!1;for(let n=0;n<a[s].length;n++)if(nF(a[s][n])){if(t)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};e+=parseInt(a[s][n],10),t=!0}else{if(!/^[prnbqkPRNBQK]$/.test(a[s][n]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};e+=1,t=!1}if(8!==e)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:s,regex:o}of i){if(!o.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${s} king`};if((t[0].match(o)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${s} kings`}}return Array.from(a[0]+a[7]).some(e=>"P"===e.toUpperCase())?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e);if(!t)throw new Error(n)}const a=r[0];let i=0;this.clear({preserveHeaders:n});for(let s=0;s<a.length;s++){const e=a.charAt(s);if("/"===e)i+=8;else if(nF(e))i+=parseInt(e,10);else{const t=e<"a"?EL:RL;this._put({type:e.toLowerCase(),color:t},rF(i)),i++}}this._turn=r[1],r[2].indexOf("K")>-1&&(this._castling.w|=$L.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(this._castling.w|=$L.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(this._castling.b|=$L.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(this._castling.b|=$L.QSIDE_CASTLE),this._epSquare="-"===r[3]?LL:VL[r[3]],this._halfMoves=parseInt(r[4],10),this._moveNumber=parseInt(r[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){var t,n;let r=0,a="";for(let o=VL.a8;o<=VL.h1;o++){if(this._board[o]){r>0&&(a+=r,r=0);const{color:e,type:t}=this._board[o];a+=e===EL?t.toUpperCase():t.toLowerCase()}else r++;o+1&136&&(r>0&&(a+=r),o!==VL.h1&&(a+="/"),r=0,o+=8)}let i="";this._castling[EL]&$L.KSIDE_CASTLE&&(i+="K"),this._castling[EL]&$L.QSIDE_CASTLE&&(i+="Q"),this._castling[RL]&$L.KSIDE_CASTLE&&(i+="k"),this._castling[RL]&$L.QSIDE_CASTLE&&(i+="q"),i=i||"-";let s="-";if(this._epSquare!==LL)if(e)s=rF(this._epSquare);else{const e=this._epSquare+(this._turn===EL?16:-16),r=[e+1,e-1];for(const a of r){if(136&a)continue;const e=this._turn;if((null==(t=this._board[a])?void 0:t.color)===e&&(null==(n=this._board[a])?void 0:n.type)===OL){this._makeMove({color:e,from:a,to:this._epSquare,piece:OL,captured:OL,flags:$L.EP_CAPTURE});const t=!this._isKingAttacked(e);if(this._undoMove(),t){s=rF(this._epSquare);break}}}}return[a,this._turn,i,s,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:n}=this._board[e],r={p:0,n:1,b:2,r:3,q:4,k:5}[n];return _L[{w:0,b:1}[t]][r][e]}_epKey(){return this._epSquare===LL?0n:SL[7&this._epSquare]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return CL[e]}_computeHash(){let e=0n;for(let t=VL.a8;t<=VL.h1;t++)136&t?t+=7:this._board[t]&&(e^=this._pieceKey(t));return e^=this._epKey(),e^=this._castlingKey(),"b"===this._turn&&(e^=PL),e}_updateSetup(e){this._history.length>0||(e!==DL?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(DL)}get(e){return this._board[VL[e]]}findPiece(e){var t;const n=[];for(let r=VL.a8;r<=VL.h1;r++)136&r?r+=7:this._board[r]&&(null==(t=this._board[r])?void 0:t.color)===e.color&&this._board[r].color===e.color&&this._board[r].type===e.type&&n.push(rF(r));return n}put({type:e,color:t},n){return!!this._put({type:e,color:t},n)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},n){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase()))return!1;if(!(n in VL))return!1;const r=VL[n];if(e==BL&&this._kings[t]!=LL&&this._kings[t]!=r)return!1;const a=this._board[r];return a&&a.type===BL&&(this._kings[a.color]=LL),this._set(r,{type:e,color:t}),e===BL&&(this._kings[t]=r),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(VL[e]),t&&t.type===BL&&(this._kings[t.color]=LL),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){var e,t,n,r,a,i,s,o,l,c,u,d;this._hash^=this._castlingKey();const h=(null==(e=this._board[VL.e1])?void 0:e.type)===BL&&(null==(t=this._board[VL.e1])?void 0:t.color)===EL,p=(null==(n=this._board[VL.e8])?void 0:n.type)===BL&&(null==(r=this._board[VL.e8])?void 0:r.color)===RL;h&&(null==(a=this._board[VL.a1])?void 0:a.type)===ML&&(null==(i=this._board[VL.a1])?void 0:i.color)===EL||(this._castling.w&=-65),h&&(null==(s=this._board[VL.h1])?void 0:s.type)===ML&&(null==(o=this._board[VL.h1])?void 0:o.color)===EL||(this._castling.w&=-33),p&&(null==(l=this._board[VL.a8])?void 0:l.type)===ML&&(null==(c=this._board[VL.a8])?void 0:c.color)===RL||(this._castling.b&=-65),p&&(null==(u=this._board[VL.h8])?void 0:u.type)===ML&&(null==(d=this._board[VL.h8])?void 0:d.color)===RL||(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var e,t;if(this._epSquare===LL)return;const n=this._epSquare+(this._turn===EL?-16:16),r=this._epSquare+(this._turn===EL?16:-16),a=[r+1,r-1];if(null!==this._board[n]||null!==this._board[this._epSquare]||(null==(e=this._board[r])?void 0:e.color)!==aF(this._turn)||(null==(t=this._board[r])?void 0:t.type)!==OL)return this._hash^=this._epKey(),void(this._epSquare=LL);a.some(e=>{var t,n;return!(136&e)&&(null==(t=this._board[e])?void 0:t.color)===this._turn&&(null==(n=this._board[e])?void 0:n.type)===OL})||(this._hash^=this._epKey(),this._epSquare=LL)}_attacked(e,t,n){const r=[];for(let a=VL.a8;a<=VL.h1;a++){if(136&a){a+=7;continue}if(void 0===this._board[a]||this._board[a].color!==e)continue;const i=this._board[a],s=a-t;if(0===s)continue;const o=s+119;if(UL[o]&HL[i.type]){if(i.type===OL){if(s>0&&i.color===EL||s<=0&&i.color===RL){if(!n)return!0;r.push(rF(a))}continue}if("n"===i.type||"k"===i.type){if(n){r.push(rF(a));continue}return!0}const e=KL[o];let l=a+e,c=!1;for(;l!==t;){if(null!=this._board[l]){c=!0;break}l+=e}if(!c){if(n){r.push(rF(a));continue}return!0}}}return!!n&&r}attackers(e,t){return t?this._attacked(t,VL[e],!0):this._attacked(this._turn,VL[e],!0)}_isKingAttacked(e){const t=this._kings[e];return-1!==t&&this._attacked(aF(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,VL[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let n=0,r=0;for(let a=VL.a8;a<=VL.h1;a++){if(r=(r+1)%2,136&a){a+=7;continue}const i=this._board[a];i&&(e[i.type]=i.type in e?e[i.type]+1:1,i.type===TL&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[TL]||1===e.n))return!0;if(n===e[TL]+2){let e=0;const n=t.length;for(let r=0;r<n;r++)e+=t[r];if(0===e||e===n)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:n}={}){const r=this._moves({square:t,piece:n});return e?r.map(e=>new IL(this,e)):r.map(e=>this._moveToSan(e,r))}_moves({legal:e=!0,piece:t,square:n}={}){var r;const a=n?n.toLowerCase():void 0,i=null==t?void 0:t.toLowerCase(),s=[],o=this._turn,l=aF(o);let c=VL.a8,u=VL.h1,d=!1;if(a){if(!(a in VL))return[];c=u=VL[a],d=!0}for(let p=c;p<=u;p++){if(136&p){p+=7;continue}if(!this._board[p]||this._board[p].color===l)continue;const{type:e}=this._board[p];let t;if(e===OL){if(i&&i!==e)continue;t=p+WL[o][0],this._board[t]||(iF(s,o,p,t,OL),t=p+WL[o][1],XL[o]!==eF(p)||this._board[t]||iF(s,o,p,t,OL,void 0,$L.BIG_PAWN));for(let e=2;e<4;e++)t=p+WL[o][e],136&t||((null==(r=this._board[t])?void 0:r.color)===l?iF(s,o,p,t,OL,this._board[t].type,$L.CAPTURE):t===this._epSquare&&iF(s,o,p,t,OL,OL,$L.EP_CAPTURE))}else{if(i&&i!==e)continue;for(let n=0,r=QL[e].length;n<r;n++){const r=QL[e][n];for(t=p;t+=r,!(136&t);){if(this._board[t]){if(this._board[t].color===o)break;iF(s,o,p,t,e,this._board[t].type,$L.CAPTURE);break}if(iF(s,o,p,t,e),"n"===e||e===BL)break}}}}if(!(void 0!==i&&i!==BL||d&&u!==this._kings[o])){if(this._castling[o]&$L.KSIDE_CASTLE){const e=this._kings[o],t=e+2;this._board[e+1]||this._board[t]||this._attacked(l,this._kings[o])||this._attacked(l,e+1)||this._attacked(l,t)||iF(s,o,this._kings[o],t,BL,void 0,$L.KSIDE_CASTLE)}if(this._castling[o]&$L.QSIDE_CASTLE){const e=this._kings[o],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(l,this._kings[o])||this._attacked(l,e-1)||this._attacked(l,t)||iF(s,o,this._kings[o],t,BL,void 0,$L.QSIDE_CASTLE)}}if(!e||-1===this._kings[o])return s;const h=[];for(let p=0,m=s.length;p<m;p++)this._makeMove(s[p]),this._isKingAttacked(o)||h.push(s[p]),this._undoMove();return h}move(e,{strict:t=!1}={}){let n=null;if("string"==typeof e)n=this._moveFromSan(e,t);else if(null===e)n=this._moveFromSan(JL,t);else if("object"==typeof e){const t=this._moves();for(let r=0,a=t.length;r<a;r++)if(e.from===rF(t[r].from)&&e.to===rF(t[r].to)&&(!("promotion"in t[r])||e.promotion===t[r].promotion)){n=t[r];break}}if(!n)throw"string"==typeof e?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&n.flags&$L.NULL_MOVE)throw new Error("Null move not allowed when in check");const r=new IL(this,n);return this._makeMove(n),this._incPositionCount(),r}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){var t,n,r,a;const i=this._turn,s=aF(i);if(this._push(e),e.flags&$L.NULL_MOVE)return i===RL&&this._moveNumber++,this._halfMoves++,this._turn=s,void(this._epSquare=LL);if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&$L.EP_CAPTURE&&(this._turn===RL?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:i})),this._board[e.to].type===BL){if(this._kings[i]=e.to,e.flags&$L.KSIDE_CASTLE){const t=e.to-1,n=e.to+1;this._movePiece(n,t)}else if(e.flags&$L.QSIDE_CASTLE){const t=e.to+1,n=e.to-2;this._movePiece(n,t)}this._castling[i]=0}if(this._castling[i])for(let o=0,l=ZL[i].length;o<l;o++)if(e.from===ZL[i][o].square&&this._castling[i]&ZL[i][o].flag){this._castling[i]^=ZL[i][o].flag;break}if(this._castling[s])for(let o=0,l=ZL[s].length;o<l;o++)if(e.to===ZL[s][o].square&&this._castling[s]&ZL[s][o].flag){this._castling[s]^=ZL[s][o].flag;break}if(this._hash^=this._castlingKey(),e.flags&$L.BIG_PAWN){let o;o=i===RL?e.to-16:e.to+16,(e.to-1&136||(null==(t=this._board[e.to-1])?void 0:t.type)!==OL||(null==(n=this._board[e.to-1])?void 0:n.color)!==s)&&(e.to+1&136||(null==(r=this._board[e.to+1])?void 0:r.type)!==OL||(null==(a=this._board[e.to+1])?void 0:a.color)!==s)?this._epSquare=LL:(this._epSquare=o,this._hash^=this._epKey())}else this._epSquare=LL;e.piece===OL||e.flags&($L.CAPTURE|$L.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,i===RL&&this._moveNumber++,this._turn=s,this._hash^=PL}undo(){const e=this._hash,t=this._undoMove();if(t){const n=new IL(this,t);return this._decPositionCount(e),n}return null}_undoMove(){const e=this._history.pop();if(void 0===e)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=PL;const n=this._turn,r=aF(n);if(t.flags&$L.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:n})),t.captured)if(t.flags&$L.EP_CAPTURE){let e;e=n===RL?t.to-16:t.to+16,this._set(e,{type:OL,color:r})}else this._set(t.to,{type:t.captured,color:r});if(t.flags&($L.KSIDE_CASTLE|$L.QSIDE_CASTLE)){let e,n;t.flags&$L.KSIDE_CASTLE?(e=t.to+1,n=t.to-1):(e=t.to-2,n=t.to+1),this._movePiece(n,e)}return t}pgn({newline:e="\n",maxWidth:t=0}={}){const n=[];let r=!1;for(const d in this._header){this._header[d]&&n.push(`[${d} "${this._header[d]}"]`+e),r=!0}r&&this._history.length&&n.push(e);const a=e=>{const t=this._comments[this.fen()];if(void 0!==t){e=`${e}${e.length>0?" ":""}{${t}}`}return e},i=[];for(;this._history.length>0;)i.push(this._undoMove());const s=[];let o="";for(0===i.length&&s.push(a(""));i.length>0;){o=a(o);const e=i.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(o.length&&s.push(o),o=this._moveNumber+".");else{const e=`${this._moveNumber}. ...`;o=o?`${o} ${e}`:e}o=o+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(o.length&&s.push(a(o)),s.push(this._header.Result||"*"),0===t)return n.join("")+s.join(" ");const l=function(){return n.length>0&&" "===n[n.length-1]&&(n.pop(),!0)},c=function(r,a){for(const i of a.split(" "))if(i){if(r+i.length>t){for(;l();)r--;n.push(e),r=0}n.push(i),r+=i.length,n.push(" "),r++}return l()&&r--,r};let u=0;for(let d=0;d<s.length;d++)u+s[d].length>t&&s[d].includes("{")?u=c(u,s[d]):(u+s[d].length>t&&0!==d?(" "===n[n.length-1]&&n.pop(),n.push(e),u=0):0!==d&&(n.push(" "),u++),n.push(s[d]),u+=s[d].length);return n.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??zL[e]??null,this.getHeaders()}removeHeader(e){return e in this._header&&(this._header[e]=zL[e]||null,!0)}getHeaders(){const e={};for(const[t,n]of Object.entries(this._header))null!==n&&(e[t]=n);return e}loadPgn(e,{strict:t=!1,newlineChar:n="\r?\n"}={}){"\r?\n"!==n&&(e=e.replace(new RegExp(n,"g"),"\n"));const r=xL(e);this.reset();const a=r.headers;let i="";for(const l in a)"fen"===l.toLowerCase()&&(i=a[l]),this.header(l,a[l]);if(t){if("1"===a.SetUp){if(!("FEN"in a))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,{preserveHeaders:!0})}}else i&&this.load(i,{preserveHeaders:!0});let s=r.root;for(;s;){if(s.move){const e=this._moveFromSan(s.move,t);if(null==e)throw new Error(`Invalid move in PGN: ${s.move}`);this._makeMove(e),this._incPositionCount()}void 0!==s.comment&&(this._comments[this.fen()]=s.comment),s=s.variations[0]}const o=r.result;o&&Object.keys(this._header).length&&this._header.Result!==o&&this.setHeader("Result",o)}_moveToSan(e,t){let n="";if(e.flags&$L.KSIDE_CASTLE)n="O-O";else if(e.flags&$L.QSIDE_CASTLE)n="O-O-O";else{if(e.flags&$L.NULL_MOVE)return JL;if(e.piece!==OL){const r=function(e,t){const n=e.from,r=e.to,a=e.piece;let i=0,s=0,o=0;for(let l=0,c=t.length;l<c;l++){const e=t[l].from,c=t[l].to;a===t[l].piece&&n!==e&&r===c&&(i++,eF(n)===eF(e)&&s++,tF(n)===tF(e)&&o++)}return i>0?s>0&&o>0?rF(n):o>0?rF(n).charAt(1):rF(n).charAt(0):""}(e,t);n+=e.piece.toUpperCase()+r}e.flags&($L.CAPTURE|$L.EP_CAPTURE)&&(e.piece===OL&&(n+=rF(e.from)[0]),n+="x"),n+=rF(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,t=!1){let n=oF(e);if(t||("0-0"===n?n="O-O":"0-0-0"===n&&(n="O-O-O")),n==JL){return{color:this._turn,from:0,to:0,piece:"k",flags:$L.NULL_MOVE}}let r,a,i,s,o,l=sF(n),c=this._moves({legal:!0,piece:l});for(let d=0,h=c.length;d<h;d++)if(n===oF(this._moveToSan(c[d],c)))return c[d];if(t)return null;let u=!1;if(a=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(r=a[1],i=a[2],s=a[3],o=a[4],1==i.length&&(u=!0)):(a=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(r=a[1],i=a[2],s=a[3],o=a[4],1==i.length&&(u=!0))),l=sF(n),c=this._moves({legal:!0,piece:r||l}),!s)return null;for(let d=0,h=c.length;d<h;d++)if(i){if(!(r&&r.toLowerCase()!=c[d].piece||VL[i]!=c[d].from||VL[s]!=c[d].to||o&&o.toLowerCase()!=c[d].promotion))return c[d];if(u){const e=rF(c[d].from);if(!(r&&r.toLowerCase()!=c[d].piece||VL[s]!=c[d].to||i!=e[0]&&i!=e[1]||o&&o.toLowerCase()!=c[d].promotion))return c[d]}}else if(n===oF(this._moveToSan(c[d],c)).replace("x",""))return c[d];return null}ascii(){let e="   +------------------------+\n";for(let t=VL.a8;t<=VL.h1;t++){if(0===tF(t)&&(e+=" "+"87654321"[eF(t)]+" |"),this._board[t]){const n=this._board[t].type;e+=" "+(this._board[t].color===EL?n.toUpperCase():n.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let n=0;const r=this._turn;for(let a=0,i=t.length;a<i;a++)this._makeMove(t[a]),this._isKingAttacked(r)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}setTurn(e){return this._turn!=e&&(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let n=VL.a8;n<=VL.h1;n++)null==this._board[n]?t.push(null):t.push({square:rF(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}squareColor(e){if(e in VL){const t=VL[e];return(eF(t)+tF(t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],n=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const r=t.pop();if(!r)break;e?n.push(new IL(this,r)):n.push(this._moveToSan(r,this._moves())),this._makeMove(r)}return n}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;1===t?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},n=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const t=e.pop();if(!t)break;this._makeMove(t),n(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const r of[BL,AL])void 0!==t[r]&&(t[r]?this._castling[e]|=YL[r]:this._castling[e]&=~YL[r]);this._updateCastlingRights();const n=this.getCastlingRights(e);return!(void 0!==t[BL]&&t[BL]!==n[BL]||void 0!==t[AL]&&t[AL]!==n[AL])}getCastlingRights(e){return{[BL]:0!==(this._castling[e]&YL[BL]),[AL]:0!==(this._castling[e]&YL[AL])}}moveNumber(){return this._moveNumber}}function cF(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/\t/g," ").replace(/\s+/g," ").trim()}const uF={"0-0":["O-O"],"0-0-0":["O-O-O"],"o-o":["O-O"],"o-o-o":["O-O-O"],l:["1"],O:["0"],I:["1"]};function dF(e,t){try{return e.move(t)}catch{return null}}function hF(e,t,n,r){const a=e.moves({verbose:!0});for(const[o,l]of Object.entries(uF))if(t.toLowerCase().includes(o.toLowerCase()))for(const n of l){const r=t.replace(new RegExp(o,"gi"),n),a=dF(e,r);if(a)return{move:a,reason:`Fixed notation: "${t}"  "${r}"`,confidence:"high"}}if(t.match(/^[0Oo]-[0Oo](-[0Oo])?$/i)){const n=t.length>3?"O-O-O":"O-O",r=dF(e,n);if(r)return{move:r,reason:`Fixed castle notation: "${t}"  "${n}"`,confidence:"high"}}const i=t.match(/^([KQRBN])?([a-h])?([1-8])?(x)?([a-h])([1-8])/i);if(i){const[,n,r,s,o,l,c]=i,u=`${l}${c}`,d=a.filter(e=>e.to===u);if(1===d.length){const n=dF(e,d[0].san);if(n)return{move:n,reason:`Corrected move to ${u}: "${t}"  "${n.san}"`,confidence:"medium"}}if(n&&d.length>1){const r=n.toLowerCase(),a=d.filter(e=>e.piece===r);if(1===a.length){const r=dF(e,a[0].san);if(r)return{move:r,reason:`Corrected ${n} move: "${t}"  "${r.san}"`,confidence:"medium"}}}}if(t.match(/^[a-h][1-8]/i)){const n=t.slice(0,2).toLowerCase(),r=a.filter(e=>"p"===e.piece&&e.to===n);if(1===r.length){const n=dF(e,r[0].san);if(n)return{move:n,reason:`Fixed pawn move: "${t}"  "${n.san}"`,confidence:"high"}}}const s=t.replace(/[+#!?]+$/,"");if(s!==t){const n=dF(e,s);if(n)return{move:n,reason:`Removed extra characters: "${t}"  "${n.san}"`,confidence:"high"}}return null}function pF(e,t){return t.map(t=>({move:t,score:mF(e.toLowerCase(),t.toLowerCase())})).filter(e=>e.score>.3).sort((e,t)=>t.score-e.score).slice(0,3).map(e=>e.move)}function mF(e,t){const n=Math.max(e.length,t.length);if(0===n)return 1;const r=function(e,t){const n=[];for(let r=0;r<=e.length;r++)n[r]=[r];for(let r=0;r<=t.length;r++)n[0][r]=r;for(let r=1;r<=e.length;r++)for(let a=1;a<=t.length;a++)e[r-1]===t[a-1]?n[r][a]=n[r-1][a-1]:n[r][a]=Math.min(n[r-1][a-1]+1,n[r][a-1]+1,n[r-1][a]+1);return n[e.length][t.length]}(e,t);return 1-r/n}const fF=["Magnus Carlsen","Ding Liren","Fabiano Caruana","Ian Nepomniachtchi","Hikaru Nakamura","Alireza Firouzja","Anish Giri","Wesley So","Levon Aronian","Maxime Vachier-Lagrave","Sergey Karjakin","Viswanathan Anand","Vladimir Kramnik","Veselin Topalov","Shakhriyar Mamedyarov","Teimour Radjabov","Dommaraju Gukesh","R Praggnanandhaa","Nodirbek Abdusattorov","Vincent Keymer","Garry Kasparov","Bobby Fischer","Mikhail Tal","Anatoly Karpov","Jose Raul Capablanca","Emanuel Lasker","Alexander Alekhine","Tigran Petrosian","Boris Spassky","Viktor Korchnoi","Bent Larsen","Mikhail Botvinnik","Judit Polgar","Hou Yifan","Yifan Hou","Ju Wenjun","Humpy Koneru","Aleksandra Goryachkina","Lei Tingjie","Anna Muzychuk","Mariya Muzychuk"],gF=["World Championship","World Chess Championship","FIDE World Championship","Candidates Tournament","Candidates","World Cup","Tata Steel","Wijk aan Zee","Norway Chess","Sinquefield Cup","London Chess Classic","Grand Chess Tour","Altibox Norway Chess","Superbet Chess Classic","Champions Chess Tour","Chess.com Global Championship","Zurich","Linares","Amber","Dortmund","Corus","Hoogovens","AVRO","Hastings","San Sebastian","Bled","Curacao","Chess Olympiad","Olympiad","Man vs Machine","IBM","Deep Blue"],yF=[/world\s*champion/i,/candidates/i,/olympiad/i,/grand\s*prix/i,/world\s*cup/i,/super\s*tournament/i,/classical\s*world/i,/rapid\s*world/i,/blitz\s*world/i];function vF(e){const t=e.toLowerCase().trim();return fF.some(e=>{const n=e.toLowerCase();return t.includes(n)||n.includes(t)||t.split(",").map(e=>e.trim()).reverse().join(" ").includes(n)})}async function xF(e){const t=[];let n=0;const r=function(e){const t=e.match(/\[White\s+"([^"]+)"\]/i),n=e.match(/\[Black\s+"([^"]+)"\]/i);return{white:(null==t?void 0:t[1])||"",black:(null==n?void 0:n[1])||""}}(e),a=function(e){const t=e.match(/\[Event\s+"([^"]+)"\]/i);return(null==t?void 0:t[1])||""}(e),{year:i,isRecent:s}=function(e){const t=e.match(/\[Date\s+"(\d{4})\.?/i),n=t?parseInt(t[1],10):0;return{year:n,isRecent:n>=(new Date).getFullYear()-1}}(e),{round:o,isCritical:l}=function(e){const t=e.match(/\[Round\s+"(\d+)/i),n=t?parseInt(t[1],10):0;return{round:n,isCritical:n>=10||/final|decisive|tiebreak/i.test(e)}}(e),c=vF(r.white),u=vF(r.black),d=c&&u;let h="unknown";if(d)h="super-gm",n+=40,t.push(`Super GM clash: ${r.white} vs ${r.black}`);else if(c||u){h="elite",n+=25;const e=c?r.white:r.black;t.push(`Features Super GM: ${e}`)}else(r.white||r.black)&&(h="titled",n+=5);const{isMajor:p,tier:m}=function(e){const t=e.toLowerCase();if(/world\s*champion/i.test(e)||/candidates/i.test(e))return{isMajor:!0,tier:"world-championship"};if(gF.some(e=>t.includes(e.toLowerCase())))return{isMajor:!0,tier:"super-tournament"};for(const n of yF)if(n.test(e))return{isMajor:!0,tier:"major"};return/tournament|championship|open|cup|match/i.test(e)?{isMajor:!1,tier:"regular"}:{isMajor:!1,tier:"casual"}}(a);"world-championship"===m?(n+=35,t.push(`World Championship level: ${a}`)):"super-tournament"===m?(n+=25,t.push(`Super Tournament: ${a}`)):"major"===m?(n+=15,t.push(`Major Event: ${a}`)):"regular"===m&&(n+=5),s&&(n+=15,t.push(`Recent game (${i}) - potential future classic`)),l&&(n+=10,t.push(`Critical round (Round ${o||"Final"})`));const f=await async function(e){try{const t=e.replace(/\[.*?\]/g,"").replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\d+\.\s*/g," ").replace(/1-0|0-1|1\/2-1\/2|\*/g,"").trim().toLowerCase().slice(0,200);if(!t)return 0;const{count:n,error:r}=await KC.from("saved_visualizations").select("*",{count:"exact",head:!0}).ilike("pgn",`%${t.slice(0,50)}%`);return r?0:n||0}catch{return 0}}(e),g=0===f;let y;g&&(n+=10,t.push(" First to claim this game!")),y=n>=70?"legendary":n>=50?"rare":n>=30?"uncommon":"common";return{isEmergingClassic:n>=40||d&&s||"world-championship"===m,significanceScore:Math.min(n,100),reasons:t,playerTier:h,eventTier:m,projectedRarity:y,firstClaimBonus:g}}function bF(e){try{const t=new lF;return t.loadPgn(e),t.history()}catch{return e.replace(/\[.*?\]/g,"").trim().replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\d+\.\s*/g," ").replace(/1-0|0-1|1\/2-1\/2|\*/g,"").split(/\s+/).filter(e=>e.length>0&&/^[KQRBNP]?[a-h]?[1-8]?x?[a-h][1-8](?:=[QRBN])?[+#]?$/i.test(e)||"O-O"===e||"O-O-O"===e)}}function wF(e,t){if(0===e.length||0===t.length)return 0;const n=Math.min(e.length,t.length),r=Math.max(e.length,t.length);let a=0;for(let i=0;i<n&&e[i]===t[i];i++)a++;return a/r}function kF(e){if(!e||0===e.trim().length)return{isMatch:!1,matchedGame:null,similarity:0,matchType:"none"};const t=bF(e);if(t.length<5)return{isMatch:!1,matchedGame:null,similarity:0,matchType:"none"};let n=null,r=0;for(const a of eL){const e=wF(t,bF(a.pgn));e>r&&(r=e,n=a)}return r>=.95?{isMatch:!0,matchedGame:n,similarity:r,matchType:"exact"}:r>=.7?{isMatch:!0,matchedGame:n,similarity:r,matchType:"partial"}:{isMatch:!1,matchedGame:null,similarity:r,matchType:"none"}}async function NF(e=30){const{data:t,error:n}=await KC.from("financial_trends").select("*").order("date",{ascending:!1}).limit(e);return n?[]:(t||[]).map(e=>({date:e.date,dailySubscriptionRevenueCents:e.daily_subscription_revenue_cents||0,dailyPrintRevenueCents:e.daily_print_revenue_cents||0,dailyBookRevenueCents:e.daily_book_revenue_cents||0,dailyMarketplaceFeeCents:e.daily_marketplace_fee_cents||0,dailyStripeFeesCents:e.daily_stripe_fees_cents||0,dailyShopifyFeesCents:e.daily_shopify_fees_cents||0,dailyPrintifyCostsCents:e.daily_printify_costs_cents||0,dailyLuluCostsCents:e.daily_lulu_costs_cents||0,dailyCreatorRoyaltiesCents:e.daily_creator_royalties_cents||0,dailyEducationFundCents:e.daily_education_fund_cents||0,dailyPalettePoolCents:e.daily_palette_pool_cents||0,dailyGamecardPoolCents:e.daily_gamecard_pool_cents||0,dailyNewUsers:e.daily_new_users||0,dailyNewSubscribers:e.daily_new_subscribers||0,dailyChurnedSubscribers:e.daily_churned_subscribers||0,dailyVisionsCreated:e.daily_visions_created||0,dailyMarketplaceSales:e.daily_marketplace_sales||0,dailyPrintOrders:e.daily_print_orders||0,dailyViews:e.daily_views||0,dailyDownloads:e.daily_downloads||0,dailyTrades:e.daily_trades||0,totalPalettePoolValueCents:e.total_palette_pool_value_cents||0,totalGamecardPoolValueCents:e.total_gamecard_pool_value_cents||0,totalMarketCapCents:e.total_market_cap_cents||0}))}async function jF(){const{data:e,error:t}=await KC.from("palette_value_pool").select("*").order("earned_value_cents",{ascending:!1});return t?[]:(e||[]).map(e=>({id:e.palette_id,name:e.palette_name,baseValueCents:e.base_value_cents,earnedValueCents:e.earned_value_cents,totalValueCents:e.base_value_cents+e.earned_value_cents,usageCount:e.total_visions_using,interactionCount:e.total_interactions}))}async function _F(){const{data:e,error:t}=await KC.from("gamecard_value_pool").select("*").order("earned_value_cents",{ascending:!1});return t?[]:(e||[]).map(e=>({id:e.game_id,name:e.game_title,baseValueCents:e.base_value_cents,earnedValueCents:e.earned_value_cents,totalValueCents:e.base_value_cents+e.earned_value_cents,usageCount:e.total_visions,interactionCount:e.total_interactions,rarityTier:e.rarity_tier}))}async function SF(){const{error:e}=await KC.rpc("snapshot_daily_financials");return!e}async function CF(e){const{data:{user:t}}=await KC.auth.getUser();if(!t)return null;const{data:n,error:r}=await KC.rpc("generate_premium_analytics",{p_user_id:t.id,p_analytics_type:e});if(r)return null;const{data:a}=await KC.from("premium_analytics").select("*").eq("id",n).single();return a?{id:a.id,data:a.data}:null}async function PF(){const{data:e,error:t}=await KC.from("premium_analytics").select("id, analytics_type, generated_at, expires_at").order("generated_at",{ascending:!1}).limit(10);return t?[]:(e||[]).map(e=>({id:e.id,analyticsType:e.analytics_type,generatedAt:e.generated_at,expiresAt:e.expires_at}))}const EF=ct.forwardRef(({className:e,type:t,...n},r)=>xt.jsx("input",{type:t,className:Cy("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));EF.displayName="Input";const RF={id:"hotCold",name:"Hot & Cold",description:"Warm reds vs cool blues for maximum contrast",backgroundImage:"hotcold",white:{k:"#1E3A5F",q:"#10B981",r:"#1D4ED8",b:"#06B6D4",n:"#EC4899",p:"#94A3B8"},black:{k:"#DC2626",q:"#5B21B6",r:"#EA580C",b:"#F59E0B",n:"#7F1D1D",p:"#57534E"},legendTheme:{whiteName:"Cold",whiteEmoji:"",blackName:"Hot",blackEmoji:""}},OF={id:"custom",name:"Custom",description:"Create your own color palette",white:{k:"#3B82F6",q:"#10B981",r:"#6366F1",b:"#06B6D4",n:"#EC4899",p:"#94A3B8"},black:{k:"#DC2626",q:"#9333EA",r:"#EA580C",b:"#F59E0B",n:"#BE185D",p:"#57534E"},legendTheme:{whiteName:"Light",whiteEmoji:"",blackName:"Dark",blackEmoji:""}},TF=[RF,{id:"medieval",name:"Medieval",description:"Rich jewel tones of castle halls and royal courts",backgroundImage:"medieval",white:{k:"#C9A227",q:"#1E3A5F",r:"#4A5568",b:"#2D5016",n:"#6B4423",p:"#A8A29E"},black:{k:"#7C2D12",q:"#4C1D95",r:"#1C1917",b:"#831843",n:"#3F3F46",p:"#44403C"},legendTheme:{whiteName:"Kings",whiteEmoji:"",blackName:"Wizards",blackEmoji:""}},{id:"egyptian",name:"Egyptian",description:"Golden sands and lapis lazuli of ancient temples",backgroundImage:"egyptian",white:{k:"#FFD700",q:"#1E40AF",r:"#D4A574",b:"#06B6D4",n:"#854D0E",p:"#FEF3C7"},black:{k:"#1F2937",q:"#7C3AED",r:"#92400E",b:"#059669",n:"#78350F",p:"#451A03"},legendTheme:{whiteName:"Pharaohs",whiteEmoji:"",blackName:"Anubis",blackEmoji:""}},{id:"roman",name:"Roman",description:"Imperial marble and terracotta of the Empire",backgroundImage:"roman",white:{k:"#7C3AED",q:"#DC2626",r:"#F5F5F4",b:"#0369A1",n:"#B45309",p:"#D6D3D1"},black:{k:"#1E1B4B",q:"#991B1B",r:"#292524",b:"#0C4A6E",n:"#713F12",p:"#44403C"},legendTheme:{whiteName:"Emperors",whiteEmoji:"",blackName:"Gladiators",blackEmoji:""}},{id:"modern",name:"Modern",description:"Clean, vibrant colors for contemporary aesthetics",backgroundImage:"modern",white:{k:"#3B82F6",q:"#EC4899",r:"#14B8A6",b:"#A855F7",n:"#F97316",p:"#64748B"},black:{k:"#1D4ED8",q:"#BE185D",r:"#0F766E",b:"#7C3AED",n:"#C2410C",p:"#334155"},legendTheme:{whiteName:"Digital",whiteEmoji:"",blackName:"Neon",blackEmoji:""}},{id:"greyscale",name:"Greyscale",description:"Warm vs cold greys for elegant monochrome prints",backgroundImage:"greyscale",white:{k:"#94A3B8",q:"#CBD5E1",r:"#64748B",b:"#E2E8F0",n:"#475569",p:"#F1F5F9"},black:{k:"#78716C",q:"#A8A29E",r:"#57534E",b:"#D6D3D1",n:"#44403C",p:"#292524"},legendTheme:{whiteName:"Cool",whiteEmoji:"",blackName:"Warm",blackEmoji:""}},{id:"japanese",name:"Japanese",description:"Sakura blossoms and zen garden tranquility",backgroundImage:"japanese",white:{k:"#F472B6",q:"#22C55E",r:"#FECDD3",b:"#A3E635",n:"#FB923C",p:"#F5F5F4"},black:{k:"#BE123C",q:"#166534",r:"#991B1B",b:"#15803D",n:"#78350F",p:"#44403C"},legendTheme:{whiteName:"Sakura",whiteEmoji:"",blackName:"Samurai",blackEmoji:""}},{id:"nordic",name:"Nordic",description:"Aurora borealis over frozen Scandinavian nights",backgroundImage:"nordic",white:{k:"#22D3EE",q:"#A78BFA",r:"#2DD4BF",b:"#67E8F9",n:"#86EFAC",p:"#E0F2FE"},black:{k:"#0E7490",q:"#5B21B6",r:"#0F766E",b:"#0369A1",n:"#14532D",p:"#1E293B"},legendTheme:{whiteName:"Aurora",whiteEmoji:"",blackName:"Frost",blackEmoji:""}},{id:"artdeco",name:"Art Deco",description:"1920s glamour with gold and geometric elegance",backgroundImage:"artdeco",white:{k:"#FFD700",q:"#F5F5F4",r:"#FCD34D",b:"#FBBF24",n:"#FDE68A",p:"#FFFBEB"},black:{k:"#0C0A09",q:"#1C1917",r:"#292524",b:"#44403C",n:"#57534E",p:"#1E1B4B"},legendTheme:{whiteName:"Gold",whiteEmoji:"",blackName:"Noir",blackEmoji:""}},{id:"tropical",name:"Tropical",description:"Vibrant jungle paradise with exotic colors",backgroundImage:"tropical",white:{k:"#22C55E",q:"#F97316",r:"#84CC16",b:"#FACC15",n:"#FB923C",p:"#4ADE80"},black:{k:"#166534",q:"#C2410C",r:"#3F6212",b:"#B45309",n:"#7C2D12",p:"#14532D"},legendTheme:{whiteName:"Paradise",whiteEmoji:"",blackName:"Jungle",blackEmoji:""}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-lit dystopian future cityscapes",backgroundImage:"cyberpunk",white:{k:"#F472B6",q:"#22D3EE",r:"#E879F9",b:"#818CF8",n:"#67E8F9",p:"#A78BFA"},black:{k:"#BE185D",q:"#0E7490",r:"#7C3AED",b:"#4338CA",n:"#1D4ED8",p:"#1E1B4B"},legendTheme:{whiteName:"Neon",whiteEmoji:"",blackName:"Shadow",blackEmoji:""}},{id:"autumn",name:"Autumn",description:"Golden harvest and falling maple leaves",backgroundImage:"autumn",white:{k:"#F59E0B",q:"#DC2626",r:"#FBBF24",b:"#EA580C",n:"#F97316",p:"#FEF3C7"},black:{k:"#92400E",q:"#991B1B",r:"#78350F",b:"#7C2D12",n:"#713F12",p:"#451A03"},legendTheme:{whiteName:"Harvest",whiteEmoji:"",blackName:"Forest",blackEmoji:""}},{id:"ocean",name:"Ocean",description:"Deep sea mysteries and coral reef wonders",backgroundImage:"ocean",white:{k:"#0EA5E9",q:"#06B6D4",r:"#22D3EE",b:"#2DD4BF",n:"#38BDF8",p:"#E0F2FE"},black:{k:"#0C4A6E",q:"#0E7490",r:"#164E63",b:"#115E59",n:"#1E3A5F",p:"#0F172A"},legendTheme:{whiteName:"Surface",whiteEmoji:"",blackName:"Depths",blackEmoji:""}},{id:"desert",name:"Desert",description:"Sunset canyons and red rock formations",backgroundImage:"desert",white:{k:"#DC2626",q:"#F97316",r:"#D4A574",b:"#FBBF24",n:"#EA580C",p:"#FEF3C7"},black:{k:"#7C2D12",q:"#9A3412",r:"#78350F",b:"#92400E",n:"#451A03",p:"#1C1917"},legendTheme:{whiteName:"Dawn",whiteEmoji:"",blackName:"Dusk",blackEmoji:""}},{id:"cosmic",name:"Cosmic",description:"Nebulae and stardust across the galaxy",backgroundImage:"cosmic",white:{k:"#E879F9",q:"#A78BFA",r:"#F0ABFC",b:"#C4B5FD",n:"#818CF8",p:"#F5D0FE"},black:{k:"#7C3AED",q:"#6D28D9",r:"#5B21B6",b:"#4C1D95",n:"#3730A3",p:"#1E1B4B"},legendTheme:{whiteName:"Stars",whiteEmoji:"",blackName:"Void",blackEmoji:""}},{id:"vintage",name:"Vintage",description:"Sepia-toned nostalgia and timeless elegance",backgroundImage:"vintage",white:{k:"#A8A29E",q:"#D6D3D1",r:"#D4A574",b:"#C9A227",n:"#A16207",p:"#FEFCE8"},black:{k:"#57534E",q:"#78716C",r:"#6B4423",b:"#713F12",n:"#44403C",p:"#292524"},legendTheme:{whiteName:"Light",whiteEmoji:"",blackName:"Shadow",blackEmoji:""}},OF];let MF=RF;function AF(e){const t=TF.find(t=>t.id===e);t&&(MF=t)}function BF(){return MF}function DF(e,t,n){const r=TF.findIndex(e=>"custom"===e.id);-1!==r&&("w"===e?TF[r].white[t]=n:TF[r].black[t]=n,"custom"===MF.id&&(MF=TF[r]))}function IF(){return TF.find(e=>"custom"===e.id)||OF}function LF(){return{white:{...MF.white},black:{...MF.black}}}const FF=RF.white,$F=RF.black;function zF(e,t){return"w"===t?MF.white[e]:MF.black[e]}const qF={light:"#FAFAF9",dark:"#2C2C2C",border:"#1C1917"},VF={k:{white:"",black:""},q:{white:"",black:""},r:{white:"",black:""},b:{white:"",black:""},n:{white:"",black:""},p:{white:"",black:""}};function WF(){const e=["k","q","r","b","n","p"],t={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},n=[];for(const r of e)n.push({piece:r,color:"w",hex:MF.white[r],name:`White ${t[r]}`,symbol:VF[r].white}),n.push({piece:r,color:"b",hex:MF.black[r],name:`Black ${t[r]}`,symbol:VF[r].black});return n}const QF=Object.freeze(Object.defineProperty({__proto__:null,blackPieceColors:$F,boardColors:qF,colorPalettes:TF,getActivePalette:BF,getCurrentPalette:LF,getCustomPalette:IF,getPieceColor:zF,getPieceColorLegend:WF,setActivePalette:AF,setCustomColor:DF,whitePieceColors:FF},Symbol.toStringTag,{value:"Module"})),UF="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",KF=[{name:"Starting Position",fen:UF,description:"The initial setup of a chess game"},{name:"Fool's Mate",fen:"rnb1kbnr/pppp1ppp/4p3/8/6Pq/5P2/PPPPP2P/RNBQKBNR w KQkq - 1 3",description:"Checkmate in 2 moves - the shortest possible game"},{name:"Scholar's Mate",fen:"r1bqkb1r/pppp1Qpp/2n2n2/4p3/2B1P3/8/PPPP1PPP/RNB1K1NR b KQkq - 0 4",description:"The famous 4-move checkmate"},{name:"Endgame Study - King & Rook",fen:"8/8/8/8/8/4K3/R7/4k3 w - - 0 1",description:"White to move and checkmate"},{name:"Queen Sacrifice Position",fen:"r1bqkb1r/pppp1ppp/2n2n2/4p2Q/2B1P3/8/PPPP1PPP/RNB1K1NR w KQkq - 4 4",description:"White threatens Qxf7#"},{name:"Complex Middlegame",fen:"r1bq1rk1/ppp2ppp/2np1n2/2b1p3/2B1P3/3P1N2/PPP2PPP/RNBQ1RK1 w - - 4 7",description:"Italian Game structure"},{name:"Endgame - Lucena Position",fen:"1K1k4/1P6/8/8/8/8/r7/2R5 w - - 0 1",description:"Famous rook endgame winning technique"},{name:"Zugzwang Example",fen:"8/8/p1p5/1p5p/1P5p/8/PPP2K1k/8 w - - 0 1",description:"Whoever moves loses!"}];function HF(e){if(!e||!e.trim())return{isValid:!1,error:"FEN string is empty"};const t=e.trim();try{(new lF).load(t);let e=0;for(const a of t.split(" ")[0])/[pnbrqkPNBRQK]/.test(a)&&e++;const n=t.split(" "),r=n[1]||"w";return{isValid:!0,fen:t,pieceCount:e,sideToMove:r,fullMoveNumber:parseInt(n[5])||1}}catch(n){return{isValid:!1,error:n instanceof Error?n.message:"Invalid FEN format"}}}function GF(e){return e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t})}function YF(e){var t;if(!HF(e).isValid)return ZF();const n=GF(e),r=[];for(let a=0;a<8;a++){r[a]=[];for(let e=0;e<8;e++){const i=(e+a)%2==1,s=[],o=null==(t=n[7-a])?void 0:t[e];if(o){const e=o===o.toUpperCase(),t=o.toLowerCase(),n=e?"w":"b",r=zF(t,n);s.push({piece:t,color:n,moveNumber:1,hexColor:r})}r[a][e]={file:e,rank:a,visits:s,isLight:i}}}return r}function ZF(){const e=[];for(let t=0;t<8;t++){e[t]=[];for(let n=0;n<8;n++){const r=(n+t)%2==1;e[t][n]={file:n,rank:t,visits:[],isLight:r}}}return e}function XF(e,t){try{const n=new lF;n.loadPgn(e);const r=n.history({verbose:!0});n.reset();const a=Math.min(t,r.length);for(let e=0;e<a;e++)n.move(r[e].san);return n.fen()}catch{return null}}function JF(e,t){if(!e)return UF;return XF(e,t)||UF}function e$(e){if(!HF(e).isValid)return null;const t=e.split(" ");let n=0;for(const a of t[0])/[pnbrqkPNBRQK]/.test(a)&&n++;const r=t[2]||"-";return{board:YF(e),fen:e,sideToMove:t[1]||"w",canCastleKingsideWhite:r.includes("K"),canCastleQueensideWhite:r.includes("Q"),canCastleKingsideBlack:r.includes("k"),canCastleQueensideBlack:r.includes("q"),enPassantSquare:"-"!==t[3]?t[3]:null,halfMoveClock:parseInt(t[4])||0,fullMoveNumber:parseInt(t[5])||1,pieceCount:n}}function t$(e){return e.split(" ")[0]}function n$(e){return t$(e)===t$(UF)}function r$(e){if(n$(e))return"Starting Position";const t=e$(e);if(!t)return"Invalid Position";return`${"w"===t.sideToMove?"White":"Black"} to move (Move ${t.fullMoveNumber})`}const a$=Object.freeze(Object.defineProperty({__proto__:null,EXAMPLE_FENS:KF,STARTING_FEN:UF,createEmptyBoard:ZF,fenToPieceBoard:GF,fenToVisualizationBoard:YF,getBoardPositionFen:JF,getFenAtMove:XF,getMinimalFen:t$,getPositionDescription:r$,isStartingPosition:n$,parseFenDetails:e$,validateFen:HF},Symbol.toStringTag,{value:"Module"})),i$=({onFenSubmit:e})=>{var t;const[n,r]=ct.useState(""),[a,i]=ct.useState(null),[s,o]=ct.useState(!1),[l,c]=ct.useState(null),u=ct.useCallback(()=>{n.trim()?(o(!0),setTimeout(()=>{const e=HF(n.trim());i(e),o(!1),e.isValid?Yy.success("Valid FEN!",{description:`${e.pieceCount} pieces, ${"w"===e.sideToMove?"White":"Black"} to move`}):Yy.error("Invalid FEN",{description:e.error})},100)):Yy.error("No FEN to validate",{description:"Please enter a FEN string first."})},[n]),d=ct.useCallback(()=>{const t=n.trim()||UF,r=HF(t);if(!r.isValid)return void Yy.error("Invalid FEN",{description:r.error||"Please enter a valid FEN string."});const a=KF.find(e=>e.fen===t),i=(null==a?void 0:a.name)||r$(t);e(t,i)},[n,e]),h=ct.useCallback(e=>{r(e.fen),c(e.name),i(null),Yy.success(`Loaded: ${e.name}`)},[]),p=ct.useCallback(()=>{n&&(navigator.clipboard.writeText(n),Yy.success("FEN copied to clipboard"))},[n]);return xt.jsxs("div",{className:"space-y-5",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"p-2 rounded-lg bg-primary/10 border border-primary/20",children:xt.jsx(xf,{className:"h-5 w-5 text-primary"})}),xt.jsxs("div",{children:[xt.jsx("h3",{className:"font-display text-base font-semibold",children:"Position (FEN)"}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Load a specific board position"})]})]}),xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx(vD,{variant:"ghost",size:"icon",className:"h-8 w-8",children:xt.jsx(jf,{className:"h-4 w-4 text-muted-foreground"})})}),xt.jsxs(Zb,{side:"left",className:"max-w-[280px]",children:[xt.jsx("p",{className:"text-sm font-medium mb-1",children:"What is FEN?"}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Forsyth-Edwards Notation describes a single chess position. Use it to visualize specific positions, puzzles, or endgame studies."})]})]})})]}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("p",{className:"text-xs text-muted-foreground font-medium flex items-center gap-1.5",children:[xt.jsx(Yf,{className:"h-3.5 w-3.5"}),"Example Positions"]}),xt.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:KF.slice(0,8).map(e=>xt.jsxs("button",{onClick:()=>h(e),className:"group p-2.5 text-left rounded-lg border transition-all hover:scale-[1.02] "+(l===e.name?"border-primary bg-primary/5 ring-1 ring-primary/30":"border-border/50 bg-card/50 hover:border-primary/30"),children:[xt.jsx("p",{className:"text-xs font-medium line-clamp-1 group-hover:text-primary transition-colors",children:e.name}),xt.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5 line-clamp-2",children:e.description})]},e.name))})]}),xt.jsxs("div",{className:"space-y-3",children:[xt.jsxs("div",{className:"relative",children:[xt.jsx(EF,{placeholder:"Enter FEN string... e.g., rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",value:n,onChange:e=>{r(e.target.value),i(null),c(null)},className:"font-mono text-xs pr-10 bg-background/50 border-border/50 focus:border-primary/50"}),n&&xt.jsx(vD,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:p,children:xt.jsx(Km,{className:"h-3.5 w-3.5 text-muted-foreground"})})]}),xt.jsx(yT,{children:a&&xt.jsxs(gD.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-3 rounded-lg flex items-start gap-2 "+(a.isValid?"bg-green-500/10 border border-green-500/30":"bg-destructive/10 border border-destructive/30"),children:[a.isValid?xt.jsx($m,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}):xt.jsx(qm,{className:"h-4 w-4 text-destructive flex-shrink-0 mt-0.5"}),xt.jsxs("div",{className:"flex-1",children:[xt.jsx("p",{className:"text-sm font-medium "+(a.isValid?"text-green-500":"text-destructive"),children:a.isValid?"Valid FEN":"Invalid FEN"}),a.isValid?xt.jsxs("div",{className:"flex flex-wrap gap-2 mt-1.5",children:[xt.jsxs(MD,{variant:"secondary",className:"text-xs",children:[a.pieceCount," pieces"]}),xt.jsxs(MD,{variant:"secondary",className:"text-xs",children:["w"===a.sideToMove?"White":"Black"," to move"]}),xt.jsxs(MD,{variant:"secondary",className:"text-xs",children:["Move ",a.fullMoveNumber]})]}):xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.error})]})]})}),l&&!a&&xt.jsxs("div",{className:"p-3 rounded-lg bg-primary/5 border border-primary/20",children:[xt.jsx("p",{className:"text-sm font-display font-semibold",children:l}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-serif",children:null==(t=KF.find(e=>e.name===l))?void 0:t.description})]})]}),xt.jsxs("div",{className:"flex gap-3",children:[xt.jsxs(vD,{onClick:u,disabled:!n.trim()||s,variant:"outline",className:"gap-2 flex-1",size:"lg",children:[s?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):xt.jsx($m,{className:"h-4 w-4"}),"Validate"]}),xt.jsxs(vD,{onClick:d,disabled:!n.trim(),className:"gap-2 flex-[2] btn-luxury py-6 text-base font-medium",size:"lg",children:[xt.jsx(gg,{className:"h-5 w-5"}),"Visualize Position"]})]}),xt.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"Tip: Paste a FEN from Chess.com, Lichess, or any chess software"})]})},s$=({onPgnSubmit:e,onFenSubmit:t})=>{const[n,r]=ct.useState("pgn"),[a,i]=ct.useState(""),[s,o]=ct.useState(!1),[l,c]=ct.useState(null),[u,d]=ct.useState(null),[h,p]=ct.useState(!1),[m,f]=ct.useState(null),[g,y]=ct.useState(!1),[v,x]=ct.useState(0),[b,w]=ct.useState(!1),[k,N]=ct.useState(""),[j,_]=ct.useState(!1),S=ct.useRef(null),C=ct.useRef(null),{isFavorite:P,toggleFavorite:E,isAuthenticated:R}=function(){const{user:e}=lP(),[t,n]=ct.useState(new Set),[r,a]=ct.useState(!1),i=ct.useCallback(async()=>{if(e){a(!0);try{const{data:t,error:r}=await KC.from("favorite_games").select("game_id").eq("user_id",e.id);if(r)return;n(new Set((null==t?void 0:t.map(e=>e.game_id))||[]))}catch(t){}finally{a(!1)}}else n(new Set)},[e]);ct.useEffect(()=>{i()},[i]);const s=ct.useCallback(e=>t.has(e),[t]),o=ct.useCallback(async r=>{if(!e)return!1;const a=t.has(r);n(e=>{const t=new Set(e);return a?t.delete(r):t.add(r),t});try{if(a){const{error:t}=await KC.from("favorite_games").delete().eq("user_id",e.id).eq("game_id",r);if(t)return n(e=>{const t=new Set(e);return t.add(r),t}),!1}else{const{error:t}=await KC.from("favorite_games").insert({user_id:e.id,game_id:r});if(t)return n(e=>{const t=new Set(e);return t.delete(r),t}),!1}return!0}catch(i){return!1}},[e,t]);return{favoriteIds:t,isFavorite:s,toggleFavorite:o,isLoading:r,isAuthenticated:!!e}}();ct.useEffect(()=>{const e=()=>w(window.innerWidth<640);return e(),window.addEventListener("resize",e,{passive:!0}),()=>window.removeEventListener("resize",e)},[]);const O=ct.useMemo(()=>[...eL,...tL].sort((e,t)=>e.year!==t.year?e.year-t.year:e.title.localeCompare(t.title)),[]),T=ct.useMemo(()=>{let e=O;if(j&&(e=e.filter(e=>P(e.id))),k.trim()){const t=k.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.year.toString().includes(t))}return e},[O,k,j,P]),M=b?4:16,A=ct.useMemo(()=>Math.ceil(T.length/M),[T.length,M]),B=ct.useCallback(()=>{a.trim()?(p(!0),f(null),setTimeout(()=>{const e=cF(a),t=function(e){if(!e||!e.trim())return{isValid:!1,error:"PGN is empty. Please provide a valid chess game notation."};const t=new lF;try{return t.loadPgn(e),{isValid:!0,moveCount:t.history().length}}catch(APe){t.reset();const r=e.replace(/\[[^\]]*\]/g,"").trim().replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\$\d+/g,"").replace(/1-0|0-1|1\/2-1\/2|\*/g,"").split(/\s+/).filter(e=>e&&!e.match(/^\d+\.+$/)&&"..."!==e);let a=0;for(const e of r)try{const n=e.replace(/0-0-0/gi,"O-O-O").replace(/0-0/gi,"O-O").replace(/[+#!?]+$/,"");t.move(n)&&a++}catch{}return a>0?{isValid:!0,moveCount:a}:{isValid:!1,error:"Could not parse any moves from the PGN. Please check the notation format."}}}(e);d(t),p(!1),t.isValid?Yy.success("PGN is valid!",{description:`${t.moveCount} moves detected.`}):(y(!0),setTimeout(()=>{const t=function(e){const t=new lF,n=[];try{return t.loadPgn(e),{canFix:!0,fixedPgn:e,suggestions:[],originalError:"PGN is already valid"}}catch(APe){}const r=(e.match(/\[[^\]]*\]/g)||[]).join("\n");let a=e.replace(/\[[^\]]*\]/g,"").trim();const i=a;a=a.replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\$\d+/g,"").replace(/1-0|0-1|1\/2-1\/2|\*/g,"").trim();const s=a.split(/\s+/).filter(e=>e.length>0),o=[];let l=1,c=!0;t.reset();for(let h=0;h<s.length;h++){const e=s[h];if(e.match(/^\d+\.+$/)){const t=parseInt(e);isNaN(t)||(l=t,c=!e.includes("..."));continue}if("..."===e){c=!1;continue}const r=dF(t,e);if(r){o.push(r.san),c=!c,c||l++;continue}const a=hF(t,e);if(!a){const r=pF(e,t.moves());if(r.length>0){const a=r[0],i=t.move(a);if(i){n.push({originalMove:e,suggestedMove:a,moveNumber:l,reason:`"${e}" is not legal. Closest legal move: "${a}"`,confidence:"low"}),o.push(i.san),c=!c,c||l++;continue}}return{canFix:!1,suggestions:n,originalError:`Cannot determine correct move for "${e}" at move ${l}. No similar legal moves found.`}}n.push({originalMove:e,suggestedMove:a.move.san,moveNumber:l,reason:a.reason,confidence:a.confidence}),o.push(a.move.san),c=!c,c||l++}let u=r?r+"\n\n":"";for(let h=0;h<o.length;h++){const e=Math.floor(h/2)+1;u+=h%2==0?`${e}. ${o[h]} `:`${o[h]} `}const d=i.match(/(1-0|0-1|1\/2-1\/2|\*)$/);return d&&(u+=d[1]),{canFix:!0,fixedPgn:u.trim(),suggestions:n,originalError:n.length>0?`Fixed ${n.length} move(s)`:"PGN formatted correctly"}}(e);f(t),y(!1),t.canFix&&t.suggestions.length>0?Yy.info("Fix suggestions available",{description:`Found ${t.suggestions.length} issue(s) that can be corrected.`,duration:5e3}):t.canFix||Yy.error("Cannot auto-fix this PGN",{description:t.originalError,duration:6e3})},50))},50)):Yy.error("No PGN to validate",{description:"Please enter or upload a PGN first."})},[a]),D=ct.useCallback(()=>{(null==m?void 0:m.fixedPgn)&&(i(m.fixedPgn),d(null),f(null),c(null),Yy.success("Fixes applied!",{description:"The corrected PGN has been loaded. Click Validate to verify."}))},[m]),I=ct.useCallback(()=>{a.trim()&&e(a.trim(),null==l?void 0:l.title)},[a,e,l]),L=ct.useCallback(e=>{i(e.pgn),c(e),d(null),f(null),async function(e){const{data:t}=await KC.from("gamecard_value_pool").select("total_interactions").eq("game_id",e).single();t&&await KC.from("gamecard_value_pool").update({total_interactions:(t.total_interactions||0)+1,last_interaction_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("game_id",e)}(e.id).catch(console.error)},[]),F=ct.useCallback(async e=>{const t=kF(e);if(t.isMatch&&t.matchedGame){const e=t.matchedGame;c(e);const n=Math.round(100*t.similarity);return"exact"===t.matchType?Yy.success(xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(_m,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{children:"En Pensent Game Card Detected!"})]}),{description:`This is "${e.title}" (${e.year}) - an Intrinsically Valued Game Card.`,duration:6e3}):Yy.info(xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(Zm,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{children:"Similar Game Card Found"})]}),{description:`${n}% match with "${e.title}" (${e.year}).`,duration:5e3}),!0}try{const t=await xF(e);if(t.isEmergingClassic){const e=function(e){switch(e.projectedRarity){case"legendary":return{badge:" LEGENDARY",color:"text-amber-400",description:"This game has exceptional historical significance"};case"rare":return{badge:" RARE",color:"text-purple-400",description:"Features elite players or major tournament"};case"uncommon":return{badge:" NOTABLE",color:"text-blue-400",description:"A noteworthy game worth collecting"};default:return{badge:"",color:"",description:""}}}(t);Yy.success(xt.jsxs("div",{className:"flex items-center gap-2",children:["legendary"===t.projectedRarity?xt.jsx(_g,{className:"h-4 w-4 text-amber-400"}):xt.jsx(yg,{className:"h-4 w-4 text-purple-400"}),xt.jsx("span",{children:e.badge})]}),{description:xt.jsxs("div",{className:"space-y-1",children:[xt.jsx("p",{children:e.description}),t.reasons.slice(0,2).map((e,t)=>xt.jsxs("p",{className:"text-xs opacity-80",children:[" ",e]},t)),t.firstClaimBonus&&xt.jsx("p",{className:"text-xs font-medium text-amber-400",children:" Be the first to claim this game!"})]}),duration:8e3})}else t.significanceScore>=25&&Yy.info(xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(gg,{className:"h-4 w-4 text-blue-400"}),xt.jsx("span",{children:"Interesting Game Detected"})]}),{description:t.reasons[0]||"This game has collecting potential.",duration:4e3})}catch(n){}return!1},[]),$=ct.useCallback(e=>{const t=new FileReader;t.onload=async e=>{var t;const n=null==(t=e.target)?void 0:t.result;if(n){i(n),d(null),f(null);await F(n)||c(null)}},t.readAsText(e)},[F]),z=ct.useCallback(e=>{e.preventDefault(),o(!1);const t=e.dataTransfer.files[0];t&&t.name.endsWith(".pgn")&&$(t)},[$]),q=ct.useCallback(e=>{e.preventDefault(),o(!0)},[]),V=ct.useCallback(()=>{o(!1)},[]),W=ct.useCallback(e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];n&&$(n)},[$]);ct.useEffect(()=>{x(0)},[b,k,j]);const Q=ct.useCallback(async(e,t)=>{if(e.stopPropagation(),!R)return void Yy.error("Sign in required",{description:"Please sign in to save favorites."});if(await E(t)){const e=!P(t);Yy.success(e?"Added to favorites":"Removed from favorites")}},[R,E,P]),U=ct.useCallback(()=>{x(e=>Math.min(e+1,A-1))},[A]),K=ct.useCallback(()=>{x(e=>Math.max(e-1,0))},[]);ct.useEffect(()=>{if(b)return;const e=e=>{const t=C.current;if(!t)return;const n=t.getBoundingClientRect(),r=n.top<window.innerHeight&&n.bottom>0;e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||r&&("ArrowLeft"===e.key?(e.preventDefault(),K()):"ArrowRight"===e.key&&(e.preventDefault(),U()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[b,U,K]);const H=((e,t)=>{const n=ct.useRef(null),r=ct.useRef(null);return{onTouchStart:e=>{r.current=null,n.current=e.targetTouches[0].clientX},onTouchMove:e=>{r.current=e.targetTouches[0].clientX},onTouchEnd:()=>{if(!n.current||!r.current)return;const a=n.current-r.current,i=a<-50;a>50?e():i&&t(),n.current=null,r.current=null}}})(U,K),G=ct.useMemo(()=>{const e=v*M;return T.slice(e,e+M)},[T,v,M]),Y=ct.useMemo(()=>tL.sort((e,t)=>e.year!==t.year?e.year-t.year:e.title.localeCompare(t.title)),[]);return xt.jsxs("div",{className:"space-y-6",children:[xt.jsxs("div",{className:"rounded-lg border border-amber-500/30 bg-gradient-to-br from-amber-500/5 via-card/50 to-card/50 overflow-hidden",children:[xt.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-5 border-b border-amber-500/20",children:xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 border border-amber-500/20",children:xt.jsx(_g,{className:"h-5 w-5 text-amber-500"})}),xt.jsxs("div",{children:[xt.jsx("h3",{className:"font-display text-base sm:text-lg font-semibold text-amber-100",children:"Magnus Carlsen Collection"}),xt.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Y.length," masterpieces from the World Champion"]})]})]})}),xt.jsx("div",{className:"p-3 sm:p-4",children:xt.jsx("div",{className:"overflow-x-auto pb-2 -mx-3 px-3 scrollbar-thin scrollbar-thumb-amber-500/30 scrollbar-track-transparent",children:xt.jsx("div",{className:"flex gap-3",style:{minWidth:"max-content"},children:Y.map(e=>{const t=dL[e.id],n=fL(e.id);return xt.jsxs("button",{onClick:()=>L(e),className:"group flex-shrink-0 w-40 sm:w-48 text-left rounded-lg border transition-all duration-200 overflow-hidden hover:scale-[1.02] "+((null==l?void 0:l.id)===e.id?"border-amber-500 ring-1 ring-amber-500/30 bg-amber-500/10":"border-amber-500/20 bg-card/50 hover:border-amber-500/50 hover:bg-card active:scale-[0.98]"),children:[xt.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-muted",children:[t?xt.jsx("img",{src:t,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):xt.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-amber-500/20 to-amber-500/5",children:xt.jsx(_g,{className:"h-8 w-8 text-amber-500/40"})}),n&&xt.jsx("div",{className:"absolute bottom-1 left-1 px-1.5 py-0.5 bg-amber-500/90 rounded-tr-md rounded-bl-md",children:xt.jsx(qf,{className:"h-2.5 w-2.5 text-amber-900"})}),xt.jsx("button",{onClick:t=>Q(t,e.id),className:"absolute top-1.5 right-1.5 p-1 rounded-full transition-all "+(P(e.id)?"bg-red-500/90 text-white":"bg-black/40 text-white/70 opacity-0 group-hover:opacity-100"),"aria-label":P(e.id)?"Remove from favorites":"Add to favorites",children:xt.jsx(bf,{className:"h-3.5 w-3.5 "+(P(e.id)?"fill-current":"")})})]}),xt.jsxs("div",{className:"p-2.5",children:[xt.jsx("p",{className:"text-xs font-semibold text-foreground leading-tight line-clamp-1",children:e.title}),xt.jsx("p",{className:"text-[10px] text-amber-500/70 mt-0.5",children:e.year}),n&&xt.jsxs("p",{className:"italic text-amber-500/60 line-clamp-1 text-[9px] mt-1",children:['"',n,'"']})]})]},e.id)})})})})]}),xt.jsxs("div",{ref:C,className:"rounded-lg border border-border/50 bg-card/50 overflow-hidden",children:[xt.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-5 border-b border-border/50",children:xt.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[xt.jsxs("div",{className:"flex-1",children:[xt.jsxs("h3",{className:"flex items-center gap-2 font-display text-base sm:text-lg font-semibold",children:[xt.jsx(Zm,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Legendary Games"]}),xt.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1 font-serif",children:[k?`Found ${T.length} game${1!==T.length?"s":""}`:b?"Swipe to explore":`Showing ${T.length>0?v*M+1:0}${Math.min((v+1)*M,T.length)} of ${T.length} legendary games`,!b&&!k&&xt.jsx("span",{className:"ml-2 text-muted-foreground/60",children:" Use   arrow keys"})]})]}),R&&xt.jsxs("button",{onClick:()=>_(!j),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium border rounded-md transition-colors flex-shrink-0 "+(j?"bg-red-500/10 hover:bg-red-500/20 text-red-500 border-red-500/30":"bg-muted/50 hover:bg-muted text-muted-foreground border-border/50"),"aria-label":j?"Show all games":"Show favorites only",children:[xt.jsx(bf,{className:"h-3.5 w-3.5 "+(j?"fill-current":"")}),xt.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]}),xt.jsxs("button",{onClick:()=>{const e=function(){const e=Math.floor(Math.random()*eL.length);return eL[e]}();L(e),Yy.success("Random game loaded!",{description:`${e.title} (${e.year})`})},className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-primary/10 hover:bg-primary/20 text-primary border border-primary/30 rounded-md transition-colors flex-shrink-0","aria-label":"Load random game",children:[xt.jsx(hg,{className:"h-3.5 w-3.5"}),xt.jsx("span",{className:"hidden sm:inline",children:"Random"})]}),xt.jsxs("div",{className:"relative flex-shrink-0 w-full sm:w-48",children:[xt.jsx(rg,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),xt.jsx("input",{type:"text",placeholder:"Search games...",value:k,onChange:e=>N(e.target.value),className:"w-full pl-8 pr-8 py-1.5 text-xs bg-background/50 border border-border/50 rounded-md focus:outline-none focus:border-primary/50 transition-colors"}),k&&xt.jsx("button",{onClick:()=>N(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 rounded hover:bg-muted transition-colors","aria-label":"Clear search",children:xt.jsx(Mg,{className:"h-3 w-3 text-muted-foreground"})})]}),A>1&&xt.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[xt.jsx("button",{onClick:K,disabled:0===v,className:"p-1.5 sm:p-2 rounded-full bg-card border border-border/50 disabled:opacity-30 hover:border-primary/50 transition-all","aria-label":"Previous games",children:xt.jsx(Im,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),xt.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground tabular-nums min-w-[3rem] text-center",children:[v+1,"/",A]}),xt.jsx("button",{onClick:U,disabled:v===A-1,className:"p-1.5 sm:p-2 rounded-full bg-card border border-border/50 disabled:opacity-30 hover:border-primary/50 transition-all","aria-label":"Next games",children:xt.jsx(Lm,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})}),xt.jsx("div",{className:"p-3 sm:p-4",children:0===T.length?xt.jsx("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:j?xt.jsxs(xt.Fragment,{children:[xt.jsx(bf,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:"No favorite games yet"}),xt.jsx("button",{onClick:()=>_(!1),className:"mt-2 text-xs text-primary hover:underline",children:"Browse all games"})]}):xt.jsxs(xt.Fragment,{children:[xt.jsx(rg,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),xt.jsxs("p",{className:"text-sm text-muted-foreground",children:['No games found for "',k,'"']}),xt.jsx("button",{onClick:()=>N(""),className:"mt-2 text-xs text-primary hover:underline",children:"Clear search"})]})}):xt.jsxs("div",{ref:S,className:b?"touch-pan-x":"",...b?H:{},children:[xt.jsx("div",{className:"grid gap-2 sm:gap-3 transition-opacity duration-200 "+(b?"grid-cols-2":"grid-cols-2 sm:grid-cols-3 md:grid-cols-4"),style:{minHeight:b?"180px":"200px"},children:G.map(e=>(e=>{const t=dL[e.id],n=fL(e.id);return xt.jsxs("button",{onClick:()=>L(e),className:`group text-left rounded-lg border transition-all duration-200 overflow-hidden ${b?"flex flex-col":"flex gap-3 p-2 hover:scale-[1.02]"} ${(null==l?void 0:l.id)===e.id?"border-primary ring-1 ring-primary/30 bg-primary/5":"border-border/40 bg-card/50 hover:border-primary/50 hover:bg-card active:scale-[0.98]"}`,children:[xt.jsxs("div",{className:"relative overflow-hidden bg-muted "+(b?"w-full aspect-[4/3]":"w-14 h-14 flex-shrink-0 rounded-md"),children:[t?xt.jsx("img",{src:t,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):xt.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/20 to-primary/5",children:xt.jsx(Zm,{className:b?"h-6 w-6 text-primary/40":"h-5 w-5 text-primary/40"})}),n&&xt.jsx("div",{className:`absolute ${b?"bottom-1 left-1":"bottom-0 left-0"} px-1.5 py-0.5 bg-primary/90 rounded-tr-md rounded-bl-md`,children:xt.jsx(qf,{className:"h-2.5 w-2.5 text-primary-foreground"})}),xt.jsx("button",{onClick:t=>Q(t,e.id),className:`absolute ${b?"top-1.5 right-1.5":"top-0.5 right-0.5"} p-1 rounded-full transition-all ${P(e.id)?"bg-red-500/90 text-white":"bg-black/40 text-white/70 opacity-0 group-hover:opacity-100"}`,"aria-label":P(e.id)?"Remove from favorites":"Add to favorites",children:xt.jsx(bf,{className:`${b?"h-3.5 w-3.5":"h-3 w-3"} ${P(e.id)?"fill-current":""}`})})]}),xt.jsxs("div",{className:"flex flex-col justify-center "+(b?"p-2 flex-1":"flex-1 min-w-0"),children:[xt.jsx("p",{className:"text-xs font-semibold text-foreground leading-tight line-clamp-1",children:e.title}),xt.jsx("p",{className:"text-muted-foreground text-[10px] mt-0.5",children:e.year}),n&&xt.jsxs("p",{className:"italic text-primary/70 line-clamp-1 "+(b?"text-[9px] mt-1":"text-[9px] mt-0.5"),children:['"',n,'"']})]})]},e.id)})(e))}),xt.jsx("div",{className:"flex justify-center gap-1.5 mt-3 sm:mt-4",children:Array.from({length:A}).map((e,t)=>xt.jsx("button",{onClick:()=>x(t),className:"h-1.5 sm:h-2 rounded-full transition-all "+(t===v?"bg-primary w-4 sm:w-6":"bg-muted-foreground/30 w-1.5 sm:w-2 hover:bg-muted-foreground/50"),"aria-label":`Go to page ${t+1}`},t))})]})})]}),xt.jsxs("div",{className:"relative rounded-lg border border-border/50 overflow-hidden",children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-45",style:{backgroundImage:`url(${JI})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-card/95 via-card/85 to-card/95"}),xt.jsx("div",{className:"relative",children:xt.jsxs(GI,{value:n,onValueChange:e=>r(e),className:"w-full",children:[xt.jsx("div",{className:"px-5 py-4 border-b border-border/50",children:xt.jsxs(YI,{className:"grid w-full grid-cols-2 h-10 bg-muted/30",children:[xt.jsxs(ZI,{value:"pgn",className:"gap-2 text-sm data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[xt.jsx(sf,{className:"h-4 w-4"}),"Game (PGN)"]}),xt.jsxs(ZI,{value:"fen",className:"gap-2 text-sm data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[xt.jsx(xf,{className:"h-4 w-4"}),"Position (FEN)"]})]})}),xt.jsx(XI,{value:"pgn",className:"mt-0",children:xt.jsxs("div",{className:"p-4 space-y-4",children:[xt.jsxs("div",{className:"border-2 border-dashed rounded-lg p-5 text-center transition-all duration-300 "+(s?"border-primary bg-primary/10 glow-gold":"border-border hover:border-primary/30"),onDrop:z,onDragOver:q,onDragLeave:V,children:[xt.jsx(Cg,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),xt.jsx("p",{className:"text-xs text-muted-foreground mb-1 font-serif",children:"Drag & drop a .pgn file here, or"}),xt.jsxs("label",{className:"cursor-pointer",children:[xt.jsx("span",{className:"text-primary hover:text-primary/80 text-xs font-medium transition-colors",children:"browse files"}),xt.jsx("input",{type:"file",accept:".pgn",className:"hidden",onChange:W})]})]}),xt.jsx("div",{className:"relative",children:xt.jsx(dI,{placeholder:"Or paste PGN notation here...",value:a,onChange:e=>{const t=e.target.value;i(t),d(null),f(null),t.length>50&&Math.abs(t.length-a.length)>30?F(t)||c(null):t.length<20&&c(null)},onBlur:e=>{const t=e.target.value;t.length>50&&!l&&F(t)},className:"min-h-[100px] font-mono text-xs bg-background/50 border-border/50 focus:border-primary/50"})}),u&&xt.jsxs("div",{className:"p-4 rounded-lg flex items-start gap-3 "+(u.isValid?"bg-green-500/10 border border-green-500/30":"bg-destructive/10 border border-destructive/30"),children:[u.isValid?xt.jsx($m,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}):xt.jsx(qm,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),xt.jsxs("div",{className:"flex-1",children:[xt.jsx("p",{className:"text-sm font-medium "+(u.isValid?"text-green-500":"text-destructive"),children:u.isValid?`Valid PGN  ${u.moveCount} moves`:"Invalid PGN"}),!u.isValid&&u.error&&xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u.error})]})]}),m&&!(null==u?void 0:u.isValid)&&xt.jsxs("div",{className:"p-4 rounded-lg border "+(m.canFix?"bg-amber-500/10 border-amber-500/30":"bg-destructive/10 border-destructive/30"),children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[xt.jsx(Tg,{className:"h-5 w-5 "+(m.canFix?"text-amber-500":"text-destructive")}),xt.jsx("p",{className:"text-sm font-medium "+(m.canFix?"text-amber-500":"text-destructive"),children:m.canFix?`Found ${m.suggestions.length} issue(s) - suggested corrections:`:"Unable to automatically fix this PGN"})]}),m.canFix&&m.suggestions.length>0&&xt.jsx("div",{className:"space-y-2 mb-4",children:m.suggestions.map((e,t)=>xt.jsxs("div",{className:"p-3 rounded-lg bg-background/50 border border-border/50",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[xt.jsxs("span",{className:"text-muted-foreground",children:["Move ",e.moveNumber,":"]}),xt.jsx("code",{className:"px-1.5 py-0.5 rounded bg-destructive/20 text-destructive font-mono text-xs",children:e.originalMove}),xt.jsx(Nm,{className:"h-3 w-3 text-muted-foreground"}),xt.jsx("code",{className:"px-1.5 py-0.5 rounded bg-green-500/20 text-green-600 font-mono text-xs",children:e.suggestedMove}),xt.jsxs("span",{className:"ml-auto text-xs px-2 py-0.5 rounded "+("high"===e.confidence?"bg-green-500/20 text-green-600":"medium"===e.confidence?"bg-amber-500/20 text-amber-600":"bg-muted text-muted-foreground"),children:[e.confidence," confidence"]})]}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1.5",children:e.reason})]},t))}),!m.canFix&&xt.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:m.originalError}),m.canFix&&m.suggestions.length>0&&xt.jsxs(vD,{onClick:D,className:"w-full gap-2",variant:"outline",children:[xt.jsx($m,{className:"h-4 w-4"}),"Apply ",m.suggestions.length," Correction",m.suggestions.length>1?"s":""]})]}),g&&xt.jsxs("div",{className:"p-4 rounded-lg bg-muted/50 border border-border/50 flex items-center gap-3",children:[xt.jsx(Pf,{className:"h-5 w-5 animate-spin text-primary"}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyzing PGN for possible fixes..."})]}),l&&!u&&!m&&xt.jsxs("div",{className:"p-4 rounded-lg bg-primary/5 border border-primary/20",children:[xt.jsx("p",{className:"text-sm font-display font-semibold",children:l.title}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-serif",children:l.description})]}),xt.jsxs("div",{className:"flex gap-3",children:[xt.jsxs(vD,{onClick:B,disabled:!a.trim()||h,variant:"outline",className:"gap-2 flex-1",size:"lg",children:[h?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):xt.jsx($m,{className:"h-4 w-4"}),"Validate PGN"]}),xt.jsxs(vD,{onClick:I,disabled:!a.trim(),className:"gap-2 flex-[2] btn-luxury py-6 text-base font-medium",size:"lg",children:[xt.jsx(gg,{className:"h-5 w-5"}),"Generate Visualization"]})]})]})}),xt.jsx(XI,{value:"fen",className:"mt-0 p-4",children:t?xt.jsx(i$,{onFenSubmit:t}):xt.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[xt.jsx(xf,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),xt.jsx("p",{className:"text-sm",children:"FEN input not available in this context"})]})})]})})]})]})};var o$="Progress",[l$]=Kh(o$),[c$,u$]=l$(o$),d$=ct.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=m$,...s}=e;(a||0===a)&&y$(a);const o=y$(a)?a:100;null!==r&&v$(r,o);const l=v$(r,o)?r:null,c=g$(l)?i(l,o):void 0;return xt.jsx(c$,{scope:n,value:l,max:o,children:xt.jsx(np.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":g$(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":f$(l,o),"data-value":l??void 0,"data-max":o,...s,ref:t})})});d$.displayName=o$;var h$="ProgressIndicator",p$=ct.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=u$(h$,n);return xt.jsx(np.div,{"data-state":f$(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});function m$(e,t){return`${Math.round(e/t*100)}%`}function f$(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g$(e){return"number"==typeof e}function y$(e){return g$(e)&&!isNaN(e)&&e>0}function v$(e,t){return g$(e)&&!isNaN(e)&&e<=t&&e>=0}p$.displayName=h$;var x$=d$,b$=p$;const w$=ct.forwardRef(({className:e,value:t,...n},r)=>xt.jsx(x$,{ref:r,className:Cy("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:xt.jsx(b$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function k$(e){return{file:e.charCodeAt(0)-"a".charCodeAt(0),rank:parseInt(e[1])-1}}function N$(e,t,n){const r=[],a=k$(e),i=k$(t),s=Math.sign(i.file-a.file),o=Math.sign(i.rank-a.rank);if("n"===n.toLowerCase())return r.push(t),r;let l=a.file+s,c=a.rank+o;for(;l!==i.file||c!==i.rank;){const e=String.fromCharCode("a".charCodeAt(0)+l),t=(c+1).toString();r.push(e+t),l+=s,c+=o}return r.push(t),r}function j$(e){const t=new lF,n=[];for(let o=0;o<8;o++){n[o]=[];for(let e=0;e<8;e++){const t=(o+e)%2==1;n[o][e]={file:e,rank:o,visits:[],isLight:t}}}const r=function(e){const t={},n=e.match(/\[White\s+"([^"]+)"\]/),r=e.match(/\[Black\s+"([^"]+)"\]/),a=e.match(/\[Event\s+"([^"]+)"\]/),i=e.match(/\[Date\s+"([^"]+)"\]/),s=e.match(/\[Result\s+"([^"]+)"\]/);return n&&(t.white=n[1]),r&&(t.black=r[1]),a&&(t.event=a[1]),i&&(t.date=i[1]),s&&(t.result=s[1]),t}(e);let a=[];try{t.loadPgn(e),a=t.history({verbose:!0})}catch(APe){const r=e.replace(/\[[^\]]*\]/g,"").trim().replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\$\d+/g,"").replace(/1-0|0-1|1\/2-1\/2|\*/g,"").split(/\s+/).filter(e=>e&&!e.match(/^\d+\.+$/)&&"..."!==e);t.reset();for(const e of r)try{const n=e.replace(/0-0-0/gi,"O-O-O").replace(/0-0/gi,"O-O").replace(/[+#!?]+$/,""),r=t.move(n);r&&a.push(r)}catch{}}t.reset();let i=0;const s=[];for(const o of a){i++,s.push(o.san);const e=o.piece,r=o.color,a=zF(e,r),l=N$(o.from,o.to,o.piece);for(const t of l){const{file:s,rank:o}=k$(t);n[o][s].visits.push({piece:e,color:r,moveNumber:i,hexColor:a})}try{t.move(o.san)}catch{}}return{board:n,gameData:{white:r.white||"Unknown",black:r.black||"Unknown",event:r.event||"Unknown",date:r.date||"Unknown",result:r.result||"*",pgn:e,moves:s},totalMoves:i}}function _$(e){let t="";for(let n=0;n<e.length;n++)n%2==0&&(t+=`${Math.floor(n/2)+1}. `),t+=e[n]+" ";return t.trim()}w$.displayName=x$.displayName;const S$=Object.freeze(Object.defineProperty({__proto__:null,formatMoves:_$,simulateGame:j$},Symbol.toStringTag,{value:"Module"})),C$=ct.createContext(void 0);function P$(e){const t=Math.min(Math.floor(.2*e),30),n=Math.max(Math.floor(.7*e),t+1);return{all:{start:0,end:e},opening:{start:0,end:t},middlegame:{start:t+1,end:n-1},endgame:{start:n,end:e}}}function E$({children:e,initialMove:t,initialPhase:n}){const[r,a]=ct.useState(t??1/0),[i,s]=ct.useState(0),[o,l]=ct.useState(!1),[c,u]=ct.useState(500),[d,h]=ct.useState(n??"all"),[p,m]=ct.useState(P$(0)),f=ct.useRef(null),g=ct.useRef(0),y=ct.useCallback(e=>{s(e),m(P$(e))},[]),v=ct.useCallback(e=>{a(e)},[]),x=ct.useCallback(e=>{h(e),l(!1),a(1/0)},[]),b=ct.useCallback(()=>{l(!0);const e=p[d];a(t=>t>=e.end||t===1/0?e.start:Math.max(t,e.start))},[p,d]),w=ct.useCallback(()=>{l(!1)},[]),k=ct.useCallback(()=>{l(e=>{if(!e){const e=p[d];a(t=>t>=e.end||t===1/0?e.start:Math.max(t,e.start))}return!e})},[p,d]),N=ct.useCallback(()=>{l(!1),a(1/0)},[]),j=ct.useCallback(()=>{const e=p[d];a(t=>t===1/0?e.end:Math.min(t+1,e.end))},[p,d]),_=ct.useCallback(()=>{const e=p[d];a(t=>t===1/0?e.end-1:t<=e.start?e.start:t-1)},[p,d]);return ct.useEffect(()=>{if(!o)return void(f.current&&(cancelAnimationFrame(f.current),f.current=null));const e=p[d],t=n=>{n-g.current>=c&&(g.current=n,a(t=>{const n=t===1/0?e.start+1:t+1;return n>e.end?(l(!1),e.end):n})),f.current=requestAnimationFrame(t)};return g.current=performance.now(),f.current=requestAnimationFrame(t),()=>{f.current&&cancelAnimationFrame(f.current)}},[o,c,p,d]),xt.jsx(C$.Provider,{value:{currentMove:r,maxMoves:i,isPlaying:o,playbackSpeed:c,selectedPhase:d,phaseRanges:p,setCurrentMove:v,setMaxMoves:y,play:b,pause:w,togglePlayback:k,setPlaybackSpeed:u,reset:N,stepForward:j,stepBackward:_,setSelectedPhase:x},children:e})}function R$(){const e=ct.useContext(C$);if(void 0===e)throw new Error("useTimeline must be used within a TimelineProvider");return e}const O$=ct.createContext(void 0);function T$({children:e,initialLockedPieces:t,initialLockedSquares:n,initialCompareMode:r}){const[a,i]=ct.useState(null),[s,o]=ct.useState(t??[]),[l,c]=ct.useState(n??[]),[u,d]=ct.useState(r??!1),[h,p]=ct.useState(null),[m,f]=ct.useState(null),[g,y]=ct.useState([]),[v,x]=ct.useState(null),[b,w]=ct.useState([]),[k,N]=ct.useState(null),j=ct.useCallback(e=>{i(e)},[]),_=ct.useCallback(e=>{p(e)},[]),S=ct.useCallback(e=>{f(e)},[]),C=ct.useCallback(e=>{y(e)},[]),P=ct.useCallback(e=>{x(e)},[]),E=ct.useCallback(e=>{w(e)},[]),R=ct.useCallback(e=>{N(e)},[]),O=ct.useCallback(()=>{if(!v)return null;const e=Math.min(v.currentIndex+1,v.moveNumbers.length-1);return e!==v.currentIndex?(x({...v,currentIndex:e}),v.moveNumbers[e]):null},[v]),T=ct.useCallback(()=>{if(!v)return null;const e=Math.max(v.currentIndex-1,0);return e!==v.currentIndex?(x({...v,currentIndex:e}),v.moveNumbers[e]):null},[v]),M=ct.useCallback(e=>{o(t=>{const n=t.findIndex(t=>t.pieceType===e.pieceType&&t.pieceColor===e.pieceColor);return-1!==n?(x(null),w([]),t.filter((e,t)=>t!==n)):u?t.length>=2?[t[1],e]:[...t,e]:[e]})},[u]),A=ct.useCallback((e,t)=>{c(n=>{const r=n.findIndex(t=>t.square===e);return-1!==r?n.filter((e,t)=>t!==r):[...n,{square:e,pieces:t}]})},[]),B=ct.useCallback(()=>{d(e=>(e&&o(e=>e.slice(0,1)),!e))},[]),D=ct.useCallback(()=>{o([]),c([]),y([]),x(null),w([])},[]);return xt.jsx(O$.Provider,{value:{highlightedPiece:s.length>0?null:a,lockedPieces:s,lockedSquares:l,compareMode:u,hoveredSquare:h,hoveredAnnotation:m,highlightedAnnotations:g,followPieceData:v,pieceArrows:b,hoveredMove:k,setHighlightedPiece:j,toggleLockedPiece:M,toggleLockedSquare:A,toggleCompareMode:B,clearLock:D,setHoveredSquare:_,setHoveredAnnotation:S,setHighlightedAnnotations:C,setFollowPieceData:P,setPieceArrows:E,nextPieceMove:O,prevPieceMove:T,setHoveredMove:R},children:e})}function M$(){const e=ct.useContext(O$);if(void 0===e)throw new Error("useLegendHighlight must be used within a LegendHighlightProvider");return e}const A$={currentMove:1/0,selectedPhase:"all",lockedPieces:[],lockedSquares:[],compareMode:!1,displayMode:"art",darkMode:!1,showTerritory:!1,showHeatmaps:!1,showPieces:!0,pieceOpacity:.7},B$=SD()(ED((e,t)=>({...A$,setCurrentMove:t=>e({currentMove:t}),setSelectedPhase:t=>e({selectedPhase:t}),setLockedPieces:t=>e({lockedPieces:t}),setLockedSquares:t=>e({lockedSquares:t}),setCompareMode:t=>e({compareMode:t}),setDisplayMode:t=>e({displayMode:t}),setDarkMode:t=>e({darkMode:t}),setShowTerritory:t=>e({showTerritory:t}),setShowHeatmaps:t=>e({showHeatmaps:t}),setShowPieces:t=>e({showPieces:t}),setPieceOpacity:t=>e({pieceOpacity:t}),captureState:e=>{const n=t();return{currentMove:n.currentMove,selectedPhase:n.selectedPhase,isPlaying:!1,lockedPieces:[...n.lockedPieces],lockedSquares:[...n.lockedSquares],compareMode:n.compareMode,highlightedPiece:null,displayMode:n.displayMode,darkMode:n.darkMode,showTerritory:n.showTerritory,showHeatmaps:n.showHeatmaps,showPieces:n.showPieces,pieceOpacity:n.pieceOpacity,moveHistory:e,capturedAt:new Date}},restoreFromState:t=>{e({currentMove:t.currentMove??A$.currentMove,selectedPhase:t.selectedPhase??A$.selectedPhase,lockedPieces:t.lockedPieces??A$.lockedPieces,lockedSquares:t.lockedSquares??A$.lockedSquares,compareMode:t.compareMode??A$.compareMode,displayMode:t.displayMode??A$.displayMode,darkMode:t.darkMode??A$.darkMode,showTerritory:t.showTerritory??A$.showTerritory,showHeatmaps:t.showHeatmaps??A$.showHeatmaps,showPieces:t.showPieces??A$.showPieces,pieceOpacity:t.pieceOpacity??A$.pieceOpacity})},resetState:()=>e(A$)}),{name:"en-pensent-visualization-state",storage:CD(()=>sessionStorage),partialize:e=>({currentMove:e.currentMove,selectedPhase:e.selectedPhase,lockedPieces:e.lockedPieces,lockedSquares:e.lockedSquares,compareMode:e.compareMode,displayMode:e.displayMode,darkMode:e.darkMode,showTerritory:e.showTerritory,showHeatmaps:e.showHeatmaps,showPieces:e.showPieces,pieceOpacity:e.pieceOpacity})}));function D$(e){const{intensity:t,temporalFlow:n,quadrantProfile:r,criticalMoments:a}=e;if(t>.7&&"accelerating"===n.trend)return"aggressive_expansion";if(t<.3&&"stable"===n.trend)return"maintenance_mode";if("volatile"===n.trend&&a.length>3)return"chaotic_evolution";if("declining"===n.trend&&n.momentum<-.3)return"controlled_decline";const{q1:i,q2:s,q3:o,q4:l}=r;return Math.max(i,s,o,l)-Math.min(i,s,o,l)>.5?"concentrated_activity":Math.abs(i-s)<.1&&Math.abs(o-l)<.1?"balanced_approach":"standard_evolution"}const I$={k:{w:"",b:""},q:{w:"",b:""},r:{w:"",b:""},b:{w:"",b:""},n:{w:"",b:""},p:{w:"",b:""}},L$={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},F$={k:{role:"The monarch of the board",tactical:"Protect at all costs. In endgames, becomes an attacking piece.",icon:Zm},q:{role:"The most powerful piece",tactical:"Combines rook and bishop movement. Dominates open positions.",icon:Zm},r:{role:"The fortress defender",tactical:"Controls files and ranks. Powerful in endgames on open files.",icon:cg},b:{role:"The diagonal striker",tactical:"Controls long diagonals. Bishop pair gives advantage in open games.",icon:Ym},n:{role:"The tactical jumper",tactical:"Only piece that can jump. Excels in closed positions and forks.",icon:bg},p:{role:"The soul of chess",tactical:"Controls the center. Advanced pawns create passed pawn threats.",icon:cg}},$$={title:"Piece Colors",description:"Each unique color represents a chess piece. Hover or tap to see where each piece traveled during the game.",tip:"Click any piece to lock its highlight on the board"},z$={title:"Territory Heatmap",description:"Visualizes board control based on piece visits. Brighter areas show higher activity.",tip:"Compare white vs black dominance across the board"},q$={title:"Battle Analysis",description:"Head-to-head comparison of piece activity between white and black.",tip:"Identify the MVP piece that controlled the most squares"},V$={title:"Compare Mode",description:"Select two pieces to see where their paths overlap on the board.",tip:"Great for analyzing piece coordination and control conflicts"},W$=({whitePalette:e,blackPalette:t,moveHistory:n=[],board:r,compact:a=!1,title:i="Color Legend"})=>{const[s,o]=ct.useState(!1),[l,c]=ct.useState("pieces"),u=BF().legendTheme,{setShowTerritory:d,setLockedPieces:h}=B$();ct.useEffect(()=>{d("territory"===l)},[l,d]);let p=null;try{p=M$()}catch{}const{hoveredSquare:m,setHighlightedPiece:f,highlightedPiece:g,lockedPieces:y=[],toggleLockedPiece:v,compareMode:x=!1,toggleCompareMode:b,clearLock:w}=p||{hoveredSquare:null,setHighlightedPiece:()=>{},highlightedPiece:null,lockedPieces:[],toggleLockedPiece:()=>{},compareMode:!1,toggleCompareMode:()=>{},clearLock:()=>{}},k=ct.useMemo(()=>{var e;const t=new Map,a=["k","q","r","b","n","p"],i=["w","b"];for(const n of i)for(const e of a)t.set(`${n}-${e}`,0);if(r&&r.length>0)for(let n=0;n<8;n++)for(let a=0;a<8;a++){const i=null==(e=r[n])?void 0:e[a];if(null==i?void 0:i.visits)for(const e of i.visits){const n=`${e.color}-${e.piece}`;t.set(n,(t.get(n)||0)+1)}}else for(const r of n){const e=`${r.color}-${r.piece}`;t.set(e,(t.get(e)||0)+1)}return t},[r,n]),N=ct.useMemo(()=>{let e=0,t=null;return k.forEach((n,r)=>{if(n>e){e=n;const[a,i]=r.split("-");t={piece:i,color:a}}}),t},[k]),j=ct.useMemo(()=>{var e;if(!r||0===r.length)return null;const t={q1:0,q2:0,q3:0,q4:0};let a=0,i=0;for(let n=0;n<8;n++)for(let s=0;s<8;s++){const o=null==(e=r[n])?void 0:e[s];if(!(null==o?void 0:o.visits))continue;const l=o.visits.length;a+=l;for(const e of o.visits)"w"===e.color&&i++;n<4&&s<4?t.q1+=l:n<4&&s>=4?t.q2+=l:n>=4&&s<4?t.q3+=l:t.q4+=l}a>0&&(t.q1/=a,t.q2/=a,t.q3/=a,t.q4/=a);const s=a>0?i/a:.5,o={opening:n.length>0?Math.min(1,10/n.length):0,middle:n.length>10?Math.min(1,(n.length-10)/30):0,ending:n.length>40?Math.min(1,(n.length-40)/20):0,trend:s>.55?"accelerating":s<.45?"declining":"stable",momentum:2*(s-.5)},l=Math.min(1,a/200),c=s>.55?"primary":s<.45?"secondary":"balanced";return{fingerprint:`enhanced-${Date.now()}`,archetype:"unknown",dominantForce:c,flowDirection:o.momentum>0?"forward":o.momentum<0?"backward":"lateral",intensity:l,quadrantProfile:t,temporalFlow:o,criticalMoments:[]}},[r,n]);ct.useMemo(()=>j?D$(j):null,[j]);const _=ct.useMemo(()=>{var e;const t=Array(8).fill(null).map(()=>Array(8).fill(0)),a=Array(8).fill(null).map(()=>Array(8).fill(0));let i=0,s=0;if(r&&r.length>0)for(let n=0;n<8;n++)for(let o=0;o<8;o++){const l=null==(e=r[n])?void 0:e[o];if(null==l?void 0:l.visits)for(const e of l.visits)"w"===e.color?(t[n][o]++,i=Math.max(i,t[n][o])):(a[n][o]++,s=Math.max(s,a[n][o]))}else for(const r of n){const e=r.square.charCodeAt(0)-97,n=parseInt(r.square[1])-1;e>=0&&e<8&&n>=0&&n<8&&("w"===r.color?(t[7-n][e]++,i=Math.max(i,t[7-n][e])):(a[7-n][e]++,s=Math.max(s,a[7-n][e])))}let o=0,l=0;for(let n=0;n<8;n++)for(let e=0;e<8;e++)o+=t[n][e],l+=a[n][e];const c=o+l||1;return{whiteControl:t,blackControl:a,maxWhite:i||1,maxBlack:s||1,whitePercent:Math.round(o/c*100),blackPercent:Math.round(l/c*100)}},[r,n]),S=null!==m||y.length>0||null!==g,C=(e,t)=>!!m&&m.pieces.some(n=>n.pieceType===e&&n.pieceColor===t),P=(e,t)=>(null==g?void 0:g.pieceType)===e&&(null==g?void 0:g.pieceColor)===t,E=(e,t)=>y.some(n=>n.pieceType===e&&n.pieceColor===t),R=()=>{f&&0===y.length&&f(null)},O=(n,r)=>{const i="w"===n?e:t;return xt.jsxs("div",{className:"space-y-1.5",children:[xt.jsx("div",{className:"flex items-center gap-2",children:xt.jsxs("span",{className:"text-[10px] font-display uppercase tracking-wider "+("w"===n?"text-sky-400":"text-rose-400"),children:["w"===n?(null==u?void 0:u.whiteEmoji)||"":(null==u?void 0:u.blackEmoji)||""," ",r]})}),xt.jsx("div",{className:`grid ${a?"grid-cols-6":"grid-cols-3"} gap-1`,children:["k","q","r","b","n","p"].map(e=>{const t=C(e,n),r=P(e,n),s=E(e,n),o=(l=e,c=n,y.findIndex(e=>e.pieceType===l&&e.pieceColor===c));var l,c;const u=((e,t)=>!(!S||(m?C(e,t):y.length>0?E(e,t):!g||P(e,t))))(e,n),d=t||r||s,h=k.get(`${n}-${e}`)||0,p=i[e]||"#888",x=(null==N?void 0:N.piece)===e&&(null==N?void 0:N.color)===n,b=F$[e],w=b.icon;return xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(gD.div,{className:`\n                      relative flex items-center gap-1.5 p-1.5 rounded-md transition-all cursor-pointer\n                      touch-manipulation select-none\n                      ${d?"bg-primary/20 ring-2 ring-primary shadow-lg":"hover:bg-accent/30"}\n                      ${t?"ring-2 ring-amber-400 bg-amber-400/20":""}\n                      ${s?0===o?"ring-2 ring-sky-400 bg-sky-400/20":"ring-2 ring-rose-400 bg-rose-400/20":""}\n                      ${u?"opacity-20":"opacity-100"}\n                    `,onMouseEnter:()=>((e,t)=>{f&&0===y.length&&f({pieceType:e,pieceColor:t})})(e,n),onMouseLeave:R,onClick:()=>((e,t)=>{v&&v({pieceType:e,pieceColor:t})})(e,n),animate:{scale:d?1.05:1,opacity:u?.2:1},transition:{duration:.2},children:[xt.jsx("div",{className:"w-4 h-4 rounded shadow-sm shrink-0 transition-transform "+(d?"scale-110 ring-1 ring-white/50":""),style:{backgroundColor:p}}),xt.jsx("span",{className:"text-base shrink-0",style:{color:p},children:I$[e][n]}),!a&&xt.jsx("span",{className:"text-[10px] text-muted-foreground truncate",children:L$[e]}),x&&xt.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center shadow-lg",children:xt.jsx(Zm,{className:"w-2.5 h-2.5 text-white"})}),h>0&&!x&&xt.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-primary text-[8px] font-bold text-primary-foreground flex items-center justify-center",children:h>99?"99+":h}),s&&xt.jsx("span",{className:"absolute -top-1 -left-1 w-4 h-4 rounded-full flex items-center justify-center text-[10px] font-bold text-white "+(0===o?"bg-sky-500":"bg-rose-500"),children:o+1}),xt.jsx(yT,{children:t&&xt.jsx(gD.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute inset-0 rounded-md pointer-events-none",style:{boxShadow:`0 0 12px 2px ${p}80`}})})]})}),xt.jsx(Zb,{side:"left",className:"max-w-[220px] p-3",children:xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"w-5 h-5 rounded shadow-sm",style:{backgroundColor:p}}),xt.jsx("span",{className:"text-lg",children:I$[e][n]}),xt.jsx("span",{className:"font-semibold",children:L$[e]})]}),xt.jsx("p",{className:"text-xs text-muted-foreground italic",children:b.role}),xt.jsx("p",{className:"text-xs leading-relaxed",children:b.tactical}),h>0&&xt.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[xt.jsx(w,{className:"w-3 h-3 text-primary"}),xt.jsxs("span",{className:"text-xs text-primary font-medium",children:[h," move",1!==h?"s":""," this game"]})]}),xt.jsx("p",{className:"text-[10px] text-muted-foreground/70 mt-1",children:"Click to lock  Double-click to compare"})]})})]},`${n}-${e}`)})})]})};return s?xt.jsxs(gD.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>o(!1),className:"p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 flex items-center gap-2 hover:bg-accent/30 transition-colors",children:[xt.jsx(gg,{className:"w-4 h-4 text-primary"}),xt.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Legend"}),xt.jsx(Dm,{className:"w-3 h-3 text-muted-foreground"})]}):xt.jsx(Hb,{children:xt.jsxs(gD.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 space-y-3",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("h4",{className:"text-xs font-display font-semibold uppercase tracking-wider flex items-center gap-1.5",children:[xt.jsx(gg,{className:"w-3 h-3 text-primary"}),i]}),xt.jsxs("div",{className:"flex items-center gap-2",children:[n.length>0&&xt.jsxs("span",{className:"text-[10px] text-muted-foreground font-mono",children:[n.length," moves"]}),y.length>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-accent/50 transition-colors",children:xt.jsx(Mg,{className:"w-3 h-3 text-muted-foreground"})})}),xt.jsx(Zb,{children:"Clear selection"})]}),xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx("button",{onClick:()=>o(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:xt.jsx(Fm,{className:"w-3 h-3 text-muted-foreground"})})}),xt.jsx(Zb,{children:"Collapse legend"})]})]})]}),xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>c("pieces"),className:"flex-1 flex items-center justify-center gap-1 py-1.5 rounded text-[10px] font-medium transition-colors "+("pieces"===l?"bg-primary/20 text-primary":"text-muted-foreground hover:bg-accent/30"),children:[xt.jsx(rf,{className:"w-3 h-3"}),"Pieces"]})}),xt.jsx(Zb,{className:"max-w-[200px] p-3",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"font-semibold flex items-center gap-1.5",children:[xt.jsx(rf,{className:"w-4 h-4 text-primary"}),$$.title]}),xt.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:$$.description}),xt.jsxs("p",{className:"text-[10px] text-primary mt-1 italic",children:[" ",$$.tip]})]})})]}),xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>c("territory"),className:"flex-1 flex items-center justify-center gap-1 py-1.5 rounded text-[10px] font-medium transition-colors "+("territory"===l?"bg-primary/20 text-primary":"text-muted-foreground hover:bg-accent/30"),children:[xt.jsx(Mf,{className:"w-3 h-3"}),"Territory"]})}),xt.jsx(Zb,{className:"max-w-[200px] p-3",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"font-semibold flex items-center gap-1.5",children:[xt.jsx(Mf,{className:"w-4 h-4 text-primary"}),z$.title]}),xt.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:z$.description}),xt.jsxs("p",{className:"text-[10px] text-primary mt-1 italic",children:[" ",z$.tip]})]})})]}),xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>c("battle"),className:"flex-1 flex items-center justify-center gap-1 py-1.5 rounded text-[10px] font-medium transition-colors "+("battle"===l?"bg-primary/20 text-primary":"text-muted-foreground hover:bg-accent/30"),children:[xt.jsx(xg,{className:"w-3 h-3"}),"Battle"]})}),xt.jsx(Zb,{className:"max-w-[200px] p-3",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"font-semibold flex items-center gap-1.5",children:[xt.jsx(xg,{className:"w-4 h-4 text-primary"}),q$.title]}),xt.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:q$.description}),xt.jsxs("p",{className:"text-[10px] text-primary mt-1 italic",children:[" ",q$.tip]})]})})]})]}),b&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(vD,{variant:x?"secondary":"ghost",size:"sm",onClick:b,className:"w-full h-7 text-[10px] gap-1",children:[xt.jsx(gf,{className:"w-3 h-3"}),x?"Exit Compare":"Compare Pieces"]})}),xt.jsx(Zb,{className:"max-w-[200px] p-3",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"font-semibold flex items-center gap-1.5",children:[xt.jsx(gf,{className:"w-4 h-4 text-primary"}),V$.title]}),xt.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:V$.description}),xt.jsxs("p",{className:"text-[10px] text-primary mt-1 italic",children:[" ",V$.tip]})]})})]}),xt.jsxs(yT,{mode:"wait",children:[m&&xt.jsxs(gD.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"text-[10px] text-amber-400 text-center bg-amber-400/10 rounded px-2 py-1.5",children:[xt.jsx(rf,{className:"w-3 h-3 inline mr-1"}),"Viewing pieces on ",xt.jsx("span",{className:"font-mono font-bold",children:m.square})]},"square-hint"),y.length>0&&!m&&xt.jsxs(gD.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"text-[10px] text-sky-400 text-center bg-sky-400/10 rounded px-2 py-1.5",children:[xt.jsx(Rf,{className:"w-3 h-3 inline mr-1"}),y.length," piece",y.length>1?"s":""," locked",x&&2===y.length&&"  Showing overlap"]},"lock-hint")]}),xt.jsx(yT,{mode:"wait",children:"territory"===l?xt.jsxs(gD.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-3",children:[xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("div",{className:"space-y-1 cursor-help",children:[xt.jsxs("div",{className:"flex justify-between text-[10px]",children:[xt.jsxs("span",{className:"text-sky-400 font-semibold",children:[(null==u?void 0:u.whiteName)||"White"," ",_.whitePercent,"%"]}),xt.jsxs("span",{className:"text-rose-400 font-semibold",children:[(null==u?void 0:u.blackName)||"Black"," ",_.blackPercent,"%"]})]}),xt.jsxs("div",{className:"h-2.5 rounded-full overflow-hidden bg-muted/50 flex",children:[xt.jsx(gD.div,{className:"h-full bg-gradient-to-r from-sky-500 to-sky-400",initial:{width:0},animate:{width:`${_.whitePercent}%`},transition:{duration:.5,ease:"easeOut"}}),xt.jsx(gD.div,{className:"h-full bg-gradient-to-r from-rose-400 to-rose-500",initial:{width:0},animate:{width:`${_.blackPercent}%`},transition:{duration:.5,ease:"easeOut"}})]})]})}),xt.jsx(Zb,{className:"max-w-[220px] p-3",children:xt.jsxs("div",{className:"space-y-2",children:[xt.jsx("div",{className:"font-semibold",children:"Board Control"}),xt.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"This bar shows the percentage of total piece movement each side contributed to."}),xt.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-border/50",children:[xt.jsxs("div",{className:"text-center",children:[xt.jsxs("div",{className:"text-sky-400 font-bold text-lg",children:[_.whitePercent,"%"]}),xt.jsx("div",{className:"text-[10px] text-muted-foreground",children:"White activity"})]}),xt.jsxs("div",{className:"text-center",children:[xt.jsxs("div",{className:"text-rose-400 font-bold text-lg",children:[_.blackPercent,"%"]}),xt.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Black activity"})]})]})]})})]}),xt.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("div",{className:"space-y-1 cursor-help",children:[xt.jsx("span",{className:"text-[9px] text-sky-400 font-display uppercase tracking-wider",children:"White Control"}),xt.jsx("div",{className:"aspect-square grid grid-cols-8 gap-px bg-border/30 rounded overflow-hidden",children:_.whiteControl.map((e,t)=>e.map((e,n)=>{const r=e/_.maxWhite;return xt.jsx("div",{className:"aspect-square transition-colors",style:{backgroundColor:r>0?`rgba(56, 189, 248, ${.2+.8*r})`:(t+n)%2==0?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.1)"}},`w-${t}-${n}`)}))})]})}),xt.jsx(Zb,{className:"max-w-[180px] p-2",children:xt.jsx("p",{className:"text-xs",children:"White piece activity heatmap. Brighter squares indicate more visits."})})]}),xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("div",{className:"space-y-1 cursor-help",children:[xt.jsx("span",{className:"text-[9px] text-rose-400 font-display uppercase tracking-wider",children:"Black Control"}),xt.jsx("div",{className:"aspect-square grid grid-cols-8 gap-px bg-border/30 rounded overflow-hidden",children:_.blackControl.map((e,t)=>e.map((e,n)=>{const r=e/_.maxBlack;return xt.jsx("div",{className:"aspect-square transition-colors",style:{backgroundColor:r>0?`rgba(251, 113, 133, ${.2+.8*r})`:(t+n)%2==0?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.1)"}},`b-${t}-${n}`)}))})]})}),xt.jsx(Zb,{className:"max-w-[180px] p-2",children:xt.jsx("p",{className:"text-xs",children:"Black piece activity heatmap. Brighter squares indicate more visits."})})]})]})]},"territory"):"battle"===l?xt.jsxs(gD.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-3",children:[N&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/30 cursor-help",children:[xt.jsx(Zm,{className:"w-4 h-4 text-amber-400"}),xt.jsx("span",{className:"text-[10px] font-display uppercase tracking-wider text-amber-400",children:"MVP"}),xt.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[xt.jsx("div",{className:"w-4 h-4 rounded shadow-sm",style:{backgroundColor:("w"===N.color?e:t)[N.piece]}}),xt.jsx("span",{className:"text-base",children:I$[N.piece][N.color]}),xt.jsx("span",{className:"text-xs",children:L$[N.piece]})]})]})}),xt.jsx(Zb,{className:"max-w-[200px] p-3",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"font-semibold flex items-center gap-1.5",children:[xt.jsx(Zm,{className:"w-4 h-4 text-amber-400"}),"Most Valuable Piece"]}),xt.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:["The ",L$[N.piece]," was the most active piece in this game with"," ",k.get(`${N.color}-${N.piece}`)," moves."]})]})})]}),xt.jsx("div",{className:"space-y-2",children:["q","r","b","n","p"].map(n=>{const r=k.get(`w-${n}`)||0,a=k.get(`b-${n}`)||0,i=r+a||1,s=Math.round(r/i*100);return xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("div",{className:"space-y-0.5 cursor-help",children:[xt.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[xt.jsxs("span",{className:"flex items-center gap-1 text-sky-400",children:[xt.jsx("span",{style:{color:e[n]},children:I$[n].w}),r]}),xt.jsx("span",{className:"text-muted-foreground font-display uppercase tracking-wider",children:L$[n]}),xt.jsxs("span",{className:"flex items-center gap-1 text-rose-400",children:[a,xt.jsx("span",{style:{color:t[n]},children:I$[n].b})]})]}),xt.jsxs("div",{className:"h-1.5 rounded-full overflow-hidden bg-muted/50 flex",children:[xt.jsx(gD.div,{className:"h-full",style:{backgroundColor:e[n]},initial:{width:0},animate:{width:`${s}%`},transition:{duration:.5}}),xt.jsx(gD.div,{className:"h-full",style:{backgroundColor:t[n]},initial:{width:0},animate:{width:100-s+"%"},transition:{duration:.5}})]})]})}),xt.jsx(Zb,{className:"max-w-[200px] p-2",children:xt.jsxs("p",{className:"text-xs",children:[xt.jsxs("span",{className:"text-sky-400",children:["White ",L$[n]]}),": ",r," moves vs"," ",xt.jsxs("span",{className:"text-rose-400",children:["Black ",L$[n]]}),": ",a," moves"]})})]},n)})})]},"battle"):xt.jsxs(gD.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-3",children:[O("w",(null==u?void 0:u.whiteName)||"White  Cold"),O("b",(null==u?void 0:u.blackName)||"Black  Hot"),xt.jsx("p",{className:"text-[9px] text-muted-foreground text-center italic",children:a?"Tap to lock  Hold for info":"Hover for info  Click to lock piece"})]},"pieces")})]})})};function Q$(e){const t=ct.useRef({value:e,previous:e});return ct.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var U$="Switch",[K$]=Kh(U$),[H$,G$]=K$(U$),Y$=ct.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=e,[h,p]=ct.useState(null),m=Uh(t,e=>p(e)),f=ct.useRef(!1),g=!h||(u||!!h.closest("form")),[y,v]=wp({prop:a,defaultProp:i??!1,onChange:c,caller:U$});return xt.jsxs(H$,{scope:n,checked:y,disabled:o,children:[xt.jsx(np.button,{type:"button",role:"switch","aria-checked":y,"aria-required":s,"data-state":ez(y),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:Vh(e.onClick,e=>{v(e=>!e),g&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),g&&xt.jsx(J$,{control:h,bubbles:!f.current,name:r,value:l,checked:y,required:s,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});Y$.displayName=U$;var Z$="SwitchThumb",X$=ct.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=G$(Z$,n);return xt.jsx(np.span,{"data-state":ez(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});X$.displayName=Z$;var J$=ct.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const s=ct.useRef(null),o=Uh(s,i),l=Q$(n),c=eb(t);return ct.useEffect(()=>{const e=s.current;if(!e)return;const t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&a){const t=new Event("click",{bubbles:r});a.call(e,n),e.dispatchEvent(t)}},[l,n,r]),xt.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function ez(e){return e?"checked":"unchecked"}J$.displayName="SwitchBubbleInput";var tz=Y$,nz=X$;const rz=ct.forwardRef(({className:e,...t},n)=>xt.jsx(tz,{className:Cy("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:xt.jsx(nz,{className:Cy("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));function az(e,[t,n]){return Math.min(n,Math.max(t,e))}rz.displayName=tz.displayName;var iz=["PageUp","PageDown"],sz=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],oz={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},lz="Slider",[cz,uz,dz]=tp(lz),[hz]=Kh(lz,[dz]),[pz,mz]=hz(lz),fz=ct.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:m,...f}=e,g=ct.useRef(new Set),y=ct.useRef(0),v="horizontal"===s?vz:xz,[x=[],b]=wp({prop:u,defaultProp:c,onChange:e=>{var t;null==(t=[...g.current][y.current])||t.focus(),d(e)}}),w=ct.useRef(x);function k(e,t,{commit:n}={commit:!1}){const s=function(e){return(String(e).split(".")[1]||"").length}(i),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-r)/i)*i+r,s),c=az(o,[r,a]);b((e=[])=>{const r=function(e=[],t,n){const r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,c,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(r,l*i)){y.current=r.indexOf(c);const t=String(r)!==String(e);return t&&n&&h(r),t?r:e}return e})}return xt.jsx(pz,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:a,valueIndexToChangeRef:y,thumbs:g.current,values:x,orientation:s,form:m,children:xt.jsx(cz.Provider,{scope:e.__scopeSlider,children:xt.jsx(cz.Slot,{scope:e.__scopeSlider,children:xt.jsx(v,{"aria-disabled":o,"data-disabled":o?"":void 0,...f,ref:t,onPointerDown:Vh(f.onPointerDown,()=>{o||(w.current=x)}),min:r,max:a,inverted:p,onSlideStart:o?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(x,e);k(e,t)},onSlideMove:o?void 0:function(e){k(e,y.current)},onSlideEnd:o?void 0:function(){const e=w.current[y.current];x[y.current]!==e&&h(x)},onHomeKeyDown:()=>!o&&k(r,0,{commit:!0}),onEndKeyDown:()=>!o&&k(a,x.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){const n=iz.includes(e.key)||e.shiftKey&&sz.includes(e.key)?10:1,r=y.current;k(x[r]+i*n*t,r,{commit:!0})}}})})})})});fz.displayName=lz;var[gz,yz]=hz(lz,{startEdge:"left",endEdge:"right",size:"width",direction:1}),vz=ct.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,[d,h]=ct.useState(null),p=Uh(t,e=>h(e)),m=ct.useRef(void 0),f=pI(a),g="ltr"===f,y=g&&!i||!g&&i;function v(e){const t=m.current||d.getBoundingClientRect(),a=Rz([0,t.width],y?[n,r]:[r,n]);return m.current=t,a(e-t.left)}return xt.jsx(gz,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:xt.jsx(bz,{dir:f,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=v(e.clientX);null==s||s(t)},onSlideMove:e=>{const t=v(e.clientX);null==o||o(t)},onSlideEnd:()=>{m.current=void 0,null==l||l()},onStepKeyDown:e=>{const t=oz[y?"from-left":"from-right"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}})})}),xz=ct.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...c}=e,u=ct.useRef(null),d=Uh(t,u),h=ct.useRef(void 0),p=!a;function m(e){const t=h.current||u.current.getBoundingClientRect(),a=Rz([0,t.height],p?[r,n]:[n,r]);return h.current=t,a(e-t.top)}return xt.jsx(gz,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:xt.jsx(bz,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=m(e.clientY);null==i||i(t)},onSlideMove:e=>{const t=m(e.clientY);null==s||s(t)},onSlideEnd:()=>{h.current=void 0,null==o||o()},onStepKeyDown:e=>{const t=oz[p?"from-bottom":"from-top"].includes(e.key);null==l||l({event:e,direction:t?-1:1})}})})}),bz=ct.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...c}=e,u=mz(lz,n);return xt.jsx(np.span,{...c,ref:t,onKeyDown:Vh(e.onKeyDown,e=>{"Home"===e.key?(s(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):iz.concat(sz).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:Vh(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():r(e)}),onPointerMove:Vh(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&a(e)}),onPointerUp:Vh(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),i(e))})})}),wz="SliderTrack",kz=ct.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=mz(wz,n);return xt.jsx(np.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});kz.displayName=wz;var Nz="SliderRange",jz=ct.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=mz(Nz,n),i=yz(Nz,n),s=Uh(t,ct.useRef(null)),o=a.values.length,l=a.values.map(e=>Ez(e,a.min,a.max)),c=o>1?Math.min(...l):0,u=100-Math.max(...l);return xt.jsx(np.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:c+"%",[i.endEdge]:u+"%"}})});jz.displayName=Nz;var _z="SliderThumb",Sz=ct.forwardRef((e,t)=>{const n=uz(e.__scopeSlider),[r,a]=ct.useState(null),i=Uh(t,e=>a(e)),s=ct.useMemo(()=>r?n().findIndex(e=>e.ref.current===r):-1,[n,r]);return xt.jsx(Cz,{...e,ref:i,index:s})}),Cz=ct.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,s=mz(_z,n),o=yz(_z,n),[l,c]=ct.useState(null),u=Uh(t,e=>c(e)),d=!l||(s.form||!!l.closest("form")),h=eb(l),p=s.values[r],m=void 0===p?0:Ez(p,s.min,s.max),f=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(r,s.values.length),g=null==h?void 0:h[o.size],y=g?function(e,t,n){const r=e/2,a=Rz([0,50],[0,r]);return(r-a(t)*n)*n}(g,m,o.direction):0;return ct.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),xt.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${m}% + ${y}px)`},children:[xt.jsx(cz.ItemSlot,{scope:e.__scopeSlider,children:xt.jsx(np.span,{role:"slider","aria-label":e["aria-label"]||f,"aria-valuemin":s.min,"aria-valuenow":p,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:u,style:void 0===p?{display:"none"}:e.style,onFocus:Vh(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),d&&xt.jsx(Pz,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:p},r)]})});Sz.displayName=_z;var Pz=ct.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=ct.useRef(null),i=Uh(a,r),s=Q$(t);return ct.useEffect(()=>{const e=a.current;if(!e)return;const n=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(s!==t&&r){const n=new Event("input",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[s,t]),xt.jsx(np.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});function Ez(e,t,n){return az(100/(n-t)*(e-t),[0,100])}function Rz(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}Pz.displayName="RadioBubbleInput";var Oz=fz,Tz=kz,Mz=jz,Az=Sz;const Bz=ct.forwardRef(({className:e,orientation:t="horizontal",...n},r)=>xt.jsxs(Oz,{ref:r,orientation:t,className:Cy("relative flex touch-none select-none","horizontal"===t?"w-full items-center":"h-full flex-col items-center",e),...n,children:[xt.jsx(Tz,{className:Cy("relative grow overflow-hidden rounded-full bg-secondary","horizontal"===t?"h-2 w-full":"w-2 h-full"),children:xt.jsx(Mz,{className:Cy("absolute bg-primary","horizontal"===t?"h-full":"w-full")})}),xt.jsx(Az,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Bz.displayName=Oz.displayName;var Dz=0;function Iz(){ct.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Lz()),document.body.insertAdjacentElement("beforeend",e[1]??Lz()),Dz++,()=>{1===Dz&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Dz--}},[])}function Lz(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Fz="focusScope.autoFocusOnMount",$z="focusScope.autoFocusOnUnmount",zz={bubbles:!1,cancelable:!0},qz=ct.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,l]=ct.useState(null),c=ap(a),u=ap(i),d=ct.useRef(null),h=Uh(t,e=>l(e)),p=ct.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ct.useEffect(()=>{if(r){let e=function(e){if(p.paused||!o)return;const t=e.target;o.contains(t)?d.current=t:Uz(d.current,{select:!0})},t=function(e){if(p.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||Uz(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Uz(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[r,o,p.paused]),ct.useEffect(()=>{if(o){Kz.add(p);const t=document.activeElement;if(!o.contains(t)){const n=new CustomEvent(Fz,zz);o.addEventListener(Fz,c),o.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Uz(r,{select:t}),document.activeElement!==n)return}((e=Vz(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Uz(o))}return()=>{o.removeEventListener(Fz,c),setTimeout(()=>{const e=new CustomEvent($z,zz);o.addEventListener($z,u),o.dispatchEvent(e),e.defaultPrevented||Uz(t??document.body,{select:!0}),o.removeEventListener($z,u),Kz.remove(p)},0)}}var e},[o,c,u,p]);const m=ct.useCallback(e=>{if(!n&&!r)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){const t=e.currentTarget,[r,i]=function(e){const t=Vz(e),n=Wz(t,e),r=Wz(t.reverse(),e);return[n,r]}(t);r&&i?e.shiftKey||a!==i?e.shiftKey&&a===r&&(e.preventDefault(),n&&Uz(i,{select:!0})):(e.preventDefault(),n&&Uz(r,{select:!0})):a===t&&e.preventDefault()}},[n,r,p.paused]);return xt.jsx(np.div,{tabIndex:-1,...s,ref:h,onKeyDown:m})});function Vz(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Wz(e,t){for(const n of e)if(!Qz(n,{upTo:t}))return n}function Qz(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Uz(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}qz.displayName="FocusScope";var Kz=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=Hz(e,t),e.unshift(t)},remove(t){var n;e=Hz(e,t),null==(n=e[0])||n.resume()}}}();function Hz(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var Gz=new WeakMap,Yz=new WeakMap,Zz={},Xz=0,Jz=function(e){return e&&(e.host||Jz(e.parentNode))},eq=function(e,t,n,r){var a=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=Jz(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Zz[n]||(Zz[n]=new WeakMap);var i=Zz[n],s=[],o=new Set,l=new Set(a),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};a.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(r),a=null!==t&&"false"!==t,l=(Gz.get(e)||0)+1,c=(i.get(e)||0)+1;Gz.set(e,l),i.set(e,c),s.push(e),1===l&&a&&Yz.set(e,!0),1===c&&e.setAttribute(n,"true"),a||e.setAttribute(r,"true")}catch(APe){}})};return u(t),o.clear(),Xz++,function(){s.forEach(function(e){var t=Gz.get(e)-1,a=i.get(e)-1;Gz.set(e,t),i.set(e,a),t||(Yz.has(e)||e.removeAttribute(r),Yz.delete(e)),a||e.removeAttribute(n)}),--Xz||(Gz=new WeakMap,Gz=new WeakMap,Yz=new WeakMap,Zz={})}},tq=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),eq(r,a,n,"aria-hidden")):function(){return null}},nq="right-scroll-bar-position",rq="width-before-scroll-bar";function aq(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var iq="undefined"!=typeof window?ct.useLayoutEffect:ct.useEffect,sq=new WeakMap;function oq(e,t){var n,r,a,i=(n=null,r=function(t){return e.forEach(function(e){return aq(e,t)})},(a=ct.useState(function(){return{value:n,callback:r,facade:{get current(){return a.value},set current(e){var t=a.value;t!==e&&(a.value=e,a.callback(e,t))}}}})[0]).callback=r,a.facade);return iq(function(){var t=sq.get(i);if(t){var n=new Set(t),r=new Set(e),a=i.current;n.forEach(function(e){r.has(e)||aq(e,null)}),r.forEach(function(e){n.has(e)||aq(e,a)})}sq.set(i,e)},[e]),i}function lq(e){return e}var cq=function(e){var t=e.sideCar,n=GN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return ct.createElement(r,HN({},n))};cq.isSideCarExport=!0;var uq=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=lq);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var a=t(e,r);return n.push(a),function(){n=n.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var a=n;n=[],a.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(i)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=HN({async:!0,ssr:!1},e),t}(),dq=function(){},hq=ct.forwardRef(function(e,t){var n=ct.useRef(null),r=ct.useState({onScrollCapture:dq,onWheelCapture:dq,onTouchMoveCapture:dq}),a=r[0],i=r[1],s=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,p=e.noRelative,m=e.noIsolation,f=e.inert,g=e.allowPinchZoom,y=e.as,v=void 0===y?"div":y,x=e.gapMode,b=GN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,k=oq([n,t]),N=HN(HN({},b),a);return ct.createElement(ct.Fragment,null,u&&ct.createElement(w,{sideCar:uq,removeScrollBar:c,shards:d,noRelative:p,noIsolation:m,inert:f,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:x}),s?ct.cloneElement(ct.Children.only(o),HN(HN({},N),{ref:k})):ct.createElement(v,HN({},N,{className:l,ref:k}),o))});hq.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},hq.classNames={fullWidth:rq,zeroRight:nq};function pq(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var mq=function(){var e=0,t=null;return{add:function(n){var r,a;0==e&&(t=pq())&&(a=n,(r=t).styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},fq=function(){var e,t=(e=mq(),function(t,n){ct.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},gq={left:0,top:0,right:0,gap:0},yq=function(e){return parseInt(e||"",10)||0},vq=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return gq;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[yq(n),yq(r),yq(a)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},xq=fq(),bq="data-scroll-locked",wq=function(e,t,n,r){var a=e.left,i=e.top,s=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(bq,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(nq," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(rq," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(nq," .").concat(nq," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(rq," .").concat(rq," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(bq,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},kq=function(){var e=parseInt(document.body.getAttribute(bq)||"0",10);return isFinite(e)?e:0},Nq=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=void 0===r?"margin":r;ct.useEffect(function(){return document.body.setAttribute(bq,(kq()+1).toString()),function(){var e=kq()-1;e<=0?document.body.removeAttribute(bq):document.body.setAttribute(bq,e.toString())}},[]);var i=ct.useMemo(function(){return vq(a)},[a]);return ct.createElement(xq,{styles:wq(i,!t,a,n?"":"!important")})},jq=!1;if("undefined"!=typeof window)try{var _q=Object.defineProperty({},"passive",{get:function(){return jq=!0,!0}});window.addEventListener("test",_q,_q),window.removeEventListener("test",_q,_q)}catch(BPe){jq=!1}var Sq=!!jq&&{passive:!1},Cq=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Pq=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Eq(e,r)){var a=Rq(e,r);if(a[1]>a[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Eq=function(e,t){return"v"===e?function(e){return Cq(e,"overflowY")}(t):function(e){return Cq(e,"overflowX")}(t)},Rq=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Oq=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Tq=function(e){return[e.deltaX,e.deltaY]},Mq=function(e){return e&&"current"in e?e.current:e},Aq=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Bq=0,Dq=[];function Iq(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Lq=(Fq=function(e){var t=ct.useRef([]),n=ct.useRef([0,0]),r=ct.useRef(),a=ct.useState(Bq++)[0],i=ct.useState(fq)[0],s=ct.useRef(e);ct.useEffect(function(){s.current=e},[e]),ct.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Mq),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=ct.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!s.current.allowPinchZoom;var a,i=Oq(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-i[0],c="deltaY"in e?e.deltaY:o[1]-i[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=Pq(d,u);if(!h)return!0;if(h?a=d:(a="v"===d?"h":"v",h=Pq(d,u)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=a),!a)return!0;var p=r.current||a;return function(e,t,n,r){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=a*r,s=n.target,o=t.contains(s),l=!1,c=i>0,u=0,d=0;do{if(!s)break;var h=Rq(e,s),p=h[0],m=h[1]-h[2]-a*p;(p||m)&&Eq(e,s)&&(u+=m,d+=p);var f=s.parentNode;s=f&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:f}while(!o&&s!==document.body||o&&(t.contains(s)||t===s));return(c&&Math.abs(u)<1||!c&&Math.abs(d)<1)&&(l=!0),l}(p,t,e,"h"===p?l:c)},[]),l=ct.useCallback(function(e){var n=e;if(Dq.length&&Dq[Dq.length-1]===i){var r="deltaY"in n?Tq(n):Oq(n),a=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,a=r,t[0]===a[0]&&t[1]===a[1]);var t,a})[0];if(a&&a.should)n.cancelable&&n.preventDefault();else if(!a){var l=(s.current.shards||[]).map(Mq).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?o(n,l[0]):!s.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=ct.useCallback(function(e,n,r,a){var i={name:e,delta:n,target:r,should:a,shadowParent:Iq(r)};t.current.push(i),setTimeout(function(){t.current=t.current.filter(function(e){return e!==i})},1)},[]),u=ct.useCallback(function(e){n.current=Oq(e),r.current=void 0},[]),d=ct.useCallback(function(t){c(t.type,Tq(t),t.target,o(t,e.lockRef.current))},[]),h=ct.useCallback(function(t){c(t.type,Oq(t),t.target,o(t,e.lockRef.current))},[]);ct.useEffect(function(){return Dq.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Sq),document.addEventListener("touchmove",l,Sq),document.addEventListener("touchstart",u,Sq),function(){Dq=Dq.filter(function(e){return e!==i}),document.removeEventListener("wheel",l,Sq),document.removeEventListener("touchmove",l,Sq),document.removeEventListener("touchstart",u,Sq)}},[]);var p=e.removeScrollBar,m=e.inert;return ct.createElement(ct.Fragment,null,m?ct.createElement(i,{styles:Aq(a)}):null,p?ct.createElement(Nq,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},uq.useMedium(Fq),cq);var Fq,$q=ct.forwardRef(function(e,t){return ct.createElement(hq,HN({},e,{ref:t,sideCar:Lq}))});$q.classNames=hq.classNames;var zq="Popover",[qq]=Kh(zq,[rb]),Vq=rb(),[Wq,Qq]=qq(zq),Uq=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=Vq(t),l=ct.useRef(null),[c,u]=ct.useState(!1),[d,h]=wp({prop:r,defaultProp:a??!1,onChange:i,caller:zq});return xt.jsx(xb,{...o,children:xt.jsx(Wq,{scope:t,contentId:lv(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:ct.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:c,onCustomAnchorAdd:ct.useCallback(()=>u(!0),[]),onCustomAnchorRemove:ct.useCallback(()=>u(!1),[]),modal:s,children:n})})};Uq.displayName=zq;var Kq="PopoverAnchor";ct.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Qq(Kq,n),i=Vq(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return ct.useEffect(()=>(s(),()=>o()),[s,o]),xt.jsx(bb,{...i,...r,ref:t})}).displayName=Kq;var Hq="PopoverTrigger",Gq=ct.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Qq(Hq,n),i=Vq(n),s=Uh(t,a.triggerRef),o=xt.jsx(np.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":oV(a.open),...r,ref:s,onClick:Vh(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:xt.jsx(bb,{asChild:!0,...i,children:o})});Gq.displayName=Hq;var Yq="PopoverPortal",[Zq,Xq]=qq(Yq,{forceMount:void 0}),Jq=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=Qq(Yq,t);return xt.jsx(Zq,{scope:t,forceMount:n,children:xt.jsx(vp,{present:n||i.open,children:xt.jsx(yp,{asChild:!0,container:a,children:r})})})};Jq.displayName=Yq;var eV="PopoverContent",tV=ct.forwardRef((e,t)=>{const n=Xq(eV,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=Qq(eV,e.__scopePopover);return xt.jsx(vp,{present:r||i.open,children:i.modal?xt.jsx(rV,{...a,ref:t}):xt.jsx(aV,{...a,ref:t})})});tV.displayName=eV;var nV=Gh("PopoverContent.RemoveScroll"),rV=ct.forwardRef((e,t)=>{const n=Qq(eV,e.__scopePopover),r=ct.useRef(null),a=Uh(t,r),i=ct.useRef(!1);return ct.useEffect(()=>{const e=r.current;if(e)return tq(e)},[]),xt.jsx($q,{as:nV,allowPinchZoom:!0,children:xt.jsx(iV,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vh(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),i.current||null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:Vh(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;i.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:Vh(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),aV=ct.forwardRef((e,t)=>{const n=Qq(eV,e.__scopePopover),r=ct.useRef(!1),a=ct.useRef(!1);return xt.jsx(iV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var i,s;null==(i=e.onCloseAutoFocus)||i.call(e,t),t.defaultPrevented||(r.current||null==(s=n.triggerRef.current)||s.focus(),t.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:t=>{var i,s;null==(i=e.onInteractOutside)||i.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));const o=t.target;(null==(s=n.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),iV=ct.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,h=Qq(eV,n),p=Vq(n);return Iz(),xt.jsx(qz,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:xt.jsx(up,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:xt.jsx(wb,{"data-state":oV(h.open),role:"dialog",id:h.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),sV="PopoverClose";ct.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Qq(sV,n);return xt.jsx(np.button,{type:"button",...r,ref:t,onClick:Vh(e.onClick,()=>a.onOpenChange(!1))})}).displayName=sV;function oV(e){return e?"open":"closed"}ct.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Vq(n);return xt.jsx(kb,{...a,...r,ref:t})}).displayName="PopoverArrow";var lV=Jq,cV=tV;const uV=Uq,dV=Gq,hV=ct.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>xt.jsx(lV,{children:xt.jsx(cV,{ref:a,align:t,sideOffset:n,className:Cy("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));hV.displayName=cV.displayName;const pV=({showPieces:e,pieceOpacity:t,onToggle:n,onOpacityChange:r,compact:a=!1})=>xt.jsx(Hb,{children:xt.jsxs(uV,{children:[xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx(dV,{asChild:!0,children:xt.jsxs(vD,{variant:e?"default":"outline",size:"sm",className:"gap-2 "+(a?"h-7 text-xs":""),children:[e?xt.jsx(rf,{className:""+(a?"h-3 w-3":"h-4 w-4")}):xt.jsx(nf,{className:""+(a?"h-3 w-3":"h-4 w-4")}),xt.jsx(Zm,{className:""+(a?"h-3 w-3":"h-4 w-4")}),!a&&"Pieces"]})})}),xt.jsx(Zb,{side:"bottom",className:"max-w-[200px] p-3",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"font-semibold flex items-center gap-1.5",children:[xt.jsx(Zm,{className:"h-4 w-4 text-primary"}),"Show Chess Pieces"]}),xt.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Overlay traditional chess pieces on the visualization for better move understanding."}),xt.jsx("p",{className:"text-[10px] text-primary italic mt-1",children:" Click to open opacity controls"})]})})]}),xt.jsx(hV,{side:"bottom",align:"center",className:"w-60 p-4",children:xt.jsxs("div",{className:"space-y-4",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(Zm,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"font-medium text-sm",children:"Show Pieces"})]}),xt.jsx(vD,{variant:e?"default":"outline",size:"sm",className:"h-7 text-xs",onClick:()=>n(!e),children:e?"On":"Off"})]}),xt.jsxs(gD.div,{initial:!1,animate:{opacity:e?1:.5,height:"auto"},className:"space-y-2",children:[xt.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[xt.jsx("span",{children:"Opacity"}),xt.jsxs("span",{className:"font-mono",children:[Math.round(100*t),"%"]})]}),xt.jsx(Bz,{value:[t],min:.1,max:1,step:.05,onValueChange:e=>r(e[0]),disabled:!e,className:"w-full"}),xt.jsxs("div",{className:"flex justify-between text-[10px] text-muted-foreground",children:[xt.jsx("span",{children:"Subtle"}),xt.jsx("span",{children:"Bold"})]})]}),xt.jsx("div",{className:"pt-2 border-t border-border/50",children:xt.jsx("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:"Adjust piece visibility to find the perfect balance between the artistic visualization and chess position clarity."})})]})})]})}),mV=({showCoordinates:e,onToggleCoordinates:t,showPieces:n,pieceOpacity:r,onTogglePieces:a,onOpacityChange:i,showLegend:s,onToggleLegend:o,onFullscreen:l,children:c})=>xt.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 p-3 rounded-lg bg-muted/30 border border-border/50",children:[xt.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(xf,{className:"h-4 w-4 text-muted-foreground"}),xt.jsx(rz,{checked:e,onCheckedChange:t})]})}),xt.jsx(Zb,{children:"Toggle board coordinates (C)"})]})}),xt.jsx("div",{className:"h-4 w-px bg-border"}),xt.jsx(pV,{showPieces:n,pieceOpacity:r,onToggle:a,onOpacityChange:i,compact:!0}),void 0!==s&&o&&xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:"h-4 w-px bg-border"}),xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(rf,{className:"h-4 w-4 text-muted-foreground"}),xt.jsx(rz,{checked:s,onCheckedChange:o})]})}),xt.jsx(Zb,{children:"Toggle color legend (L)"})]})})]}),xt.jsx("div",{className:"h-4 w-px bg-border"}),xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx(vD,{variant:"ghost",size:"sm",onClick:l,className:"h-8 w-8 p-0",children:xt.jsx(Af,{className:"h-4 w-4 text-muted-foreground"})})}),xt.jsx(Zb,{children:"Fullscreen mode (F)"})]})})]}),c&&xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),xt.jsx("div",{className:"flex items-center gap-2 sm:ml-auto",children:c})]})]}),fV={K:"",Q:"",R:"",B:"",N:"",P:"",k:"",q:"",r:"",b:"",n:"",p:""};function gV(e){return zF(e.piece,e.color)}function yV(e,t){return t.findIndex(t=>e.piece===t.pieceType&&e.color===t.pieceColor)}const vV=({board:e,size:t=500,showPieces:n=!1,pieceOpacity:r=.7,pgn:a,currentMoveNumber:i,onFollowPieceActivated:s})=>{const[o,l]=ct.useState(null),[c,u]=ct.useState(null),d=M$(),h=d.lockedPieces,p=d.lockedSquares,m=d.highlightedPiece,f=d.compareMode,g=d.setHoveredSquare,y=d.setHighlightedAnnotations,v=d.hoveredAnnotation,x=d.hoveredSquare,b=d.toggleLockedPiece,w=d.toggleLockedSquare,k=d.pieceArrows,N=d.setFollowPieceData,j=d.setPieceArrows,_=d.hoveredMove,S=ct.useMemo(()=>(null==_?void 0:_.piece)?[_.piece]:(null==v?void 0:v.associatedPieces)&&v.associatedPieces.length>0?v.associatedPieces:h.length>0?h:m?[m]:[],[h,m,v,_]),C=t/8,P=.02*t,E=t+2*P,R=ct.useCallback(e=>{const t=new lF;try{t.loadPgn(e);const n=t.history({verbose:!0});if(n.length>0)return{success:!0,moves:n}}catch{}t.reset();const n=e.replace(/\[.*?\]\s*/g,"").trim();if(n)try{t.loadPgn(n);const e=t.history({verbose:!0});if(e.length>0)return{success:!0,moves:e}}catch{}t.reset();const r=e.match(/(\d+\.\s*\S+(?:\s+\S+)?)/g);if(r)try{for(const n of r){const e=n.replace(/\d+\.\s*/,"").trim().split(/\s+/);for(const n of e)n&&"*"!==n&&!n.match(/^[012/-]+$/)&&t.move(n)}const e=t.history({verbose:!0});if(e.length>0)return{success:!0,moves:e}}catch{}return{success:!1,moves:[]}},[]),O=ct.useMemo(()=>{var e;if(!n)return[];if(!a||"string"!=typeof a)return[];const t=a.trim();if(""===t||t.length<2)return[];try{const{success:n,moves:r}=R(t);if(!n||0===r.length)return[];const a=new Map,s=new lF;for(let e=0;e<8;e++)for(let t=0;t<8;t++){const n=`${String.fromCharCode(97+t)}${e+1}`,r=s.get(n);if(r){const e=`${r.color}-${r.type.toUpperCase()}-${n}`;a.set(n,e)}}const o=new lF,l=void 0!==i?i:r.length;for(let e=0;e<Math.min(l,r.length);e++){const t=r[e],n=a.get(t.from);if(t.captured&&a.delete(t.to),n&&(a.delete(t.from),a.set(t.to,n)),t.flags.includes("k")){const e="w"===t.color?"h1":"h8",n="w"===t.color?"f1":"f8",r=a.get(e);r&&(a.delete(e),a.set(n,r))}else if(t.flags.includes("q")){const e="w"===t.color?"a1":"a8",n="w"===t.color?"d1":"d8",r=a.get(e);r&&(a.delete(e),a.set(n,r))}if(t.promotion){const e=`${t.color}-${t.promotion.toUpperCase()}-${t.from}-promoted`;a.set(t.to,e)}o.move(r[e].san)}const c=[],u=o.board();for(let t=0;t<8;t++){const n=7-t;for(let r=0;r<8;r++){const i=null==(e=u[t])?void 0:e[r];if(i){const e=`${String.fromCharCode(97+r)}${n+1}`,s=a.get(e)||`${i.color}-${i.type.toUpperCase()}-${e}`,o=P+r*C+C/2,l=P+t*C+C/2;c.push({id:s,type:i.type,color:i.color,square:e,x:o,y:l})}}}return c}catch(APe){return[]}},[n,a,i,P,C]),T=ct.useCallback((e,t)=>{if(!a)return[];try{const n=new lF;n.loadPgn(a);const r=n.history({verbose:!0}),i=[],s=e.toLowerCase();return r.forEach((n,r)=>{const a=n.piece;("p"===s&&"p"===a||a===s)&&n.color===t&&i.push({from:n.from,to:n.to,moveNumber:r+1,pieceType:e.toUpperCase(),pieceColor:t,isCapture:!!n.captured})}),i}catch(APe){return[]}},[a]),M=ct.useCallback((e,t)=>{const n={pieceType:e.toUpperCase(),pieceColor:t},r=T(e,t);if(j(r),r.length>0){const e=r.map(e=>e.moveNumber);N({piece:n,moveNumbers:e,currentIndex:0}),s&&s(e[0])}b(n)},[b,T,j,N,s]),A=ct.useCallback((e,t,n)=>{u(e)},[]),B=ct.useCallback(()=>{u(null)},[]),D=ct.useCallback(e=>{const t=[],n=new Set;for(const r of e.visits){const e=`${r.color}-${r.piece}`;n.has(e)||(n.add(e),t.push({pieceType:r.piece,pieceColor:r.color}))}return t},[]),I=ct.useCallback(e=>{const t=[];for(const n of e.visits)t.includes(n.moveNumber)||t.push(n.moveNumber);return t.sort((e,t)=>e-t)},[]),L=ct.useCallback((t,n)=>{const r=e[t][n],a=`${String.fromCharCode(97+n)}${t+1}`;l(a);const i=D(r),s=I(r);if(g({square:a,pieces:i,moveNumbers:s}),i.length>0){const e=[];i.some(e=>"w"===e.pieceColor)&&e.push("white-player"),i.some(e=>"b"===e.pieceColor)&&e.push("black-player"),y(e)}else y([])},[e,g,y,D,I]),F=ct.useCallback(()=>{l(null),g(null),y([])},[g,y]),$=ct.useCallback((t,n)=>{const r=e[t][n],a=`${String.fromCharCode(97+n)}${t+1}`,i=D(r);i.length>0&&w(a,i)},[e,D,w]),z=ct.useMemo(()=>{if(S.length>0)return S;if(p.length>0){const e=[];for(const t of p)for(const n of t.pieces)e.some(e=>e.pieceType===n.pieceType&&e.pieceColor===n.pieceColor)||e.push(n);return e}return(null==x?void 0:x.pieces)&&x.pieces.length>0?x.pieces:[]},[S,p,x]),q=ct.useMemo(()=>[...Array(8)].map((t,n)=>{const r=7-n;return[...Array(8)].map((t,a)=>{const i=e[r][a],s=i.isLight?qF.light:qF.dark,l=P+a*C,c=P+n*C,u=`${String.fromCharCode(97+a)}${r+1}`,d=o===u,h=p.some(e=>e.square===u),m=(null==_?void 0:_.targetSquare)===u,g=z.length>0&&i.visits.some(e=>z.some(t=>t.pieceType===e.piece&&t.pieceColor===e.color));return((e,t,n,r,a,i,s,o,l)=>{const c=[],u=.08*r,d=i.length>0,h=(d?e.filter(e=>{return t=e,0===(n=i).length||n.some(e=>t.piece===e.pieceType&&t.color===e.pieceColor);var t,n}):e).length>0,p=i.length>0&&e.some(e=>e.piece===i[0].pieceType&&e.color===i[0].pieceColor),m=i.length>1&&e.some(e=>e.piece===i[1].pieceType&&e.color===i[1].pieceColor),f=p&&m,g=d&&!h&&!o;if(c.push(xt.jsx("rect",{x:t,y:n,width:r,height:r,fill:a,style:{opacity:g?.3:1,transition:"opacity 0.2s ease-out"}},`base-${t}-${n}`)),0===e.length)return c;const y=[];for(const k of e){const e=gV(k),t=yV(k,i),n=!d||-1!==t,r=y.findIndex(t=>t.color===e);-1===r?y.push({color:e,matches:n,highlightIndex:t}):n&&(y[r].matches=!0,-1!==t&&(y[r].highlightIndex=t))}const v=Math.min(y.length,6),x=[];let b=r-2*u;const w=.7*b/v;for(let k=0;k<v&&(x.push({color:y[k].color,layerSize:b,matches:y[k].matches,highlightIndex:y[k].highlightIndex}),b-=w,!(b<.1*r));k++);for(let k=0;k<x.length;k++){const e=x[k],a=(r-e.layerSize)/2;let i=1;d&&!o&&(i=e.matches?1:.15),c.push(xt.jsx("rect",{x:t+a,y:n+a,width:e.layerSize,height:e.layerSize,fill:e.color,style:{opacity:i,transition:"opacity 0.2s ease-out"}},`layer-${t}-${n}-${k}`))}if(d&&h||o){const e=.02*r;o?c.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(251, 191, 36, 0.8)",strokeWidth:2*e,style:{transition:"all 0.2s ease-out"}},`glow-hover-${t}-${n}`)):s&&2===i.length?f?c.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(168, 85, 247, 0.8)",strokeWidth:2*e,style:{transition:"all 0.2s ease-out"}},`glow-overlap-${t}-${n}`)):p?c.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(56, 189, 248, 0.6)",strokeWidth:1.5*e,style:{transition:"all 0.2s ease-out"}},`glow-p1-${t}-${n}`)):m&&c.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(251, 113, 133, 0.6)",strokeWidth:1.5*e,style:{transition:"all 0.2s ease-out"}},`glow-p2-${t}-${n}`)):l&&c.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(255,255,255,0.6)",strokeWidth:e,style:{transition:"all 0.2s ease-out"}},`glow-${t}-${n}`))}return c})(i.visits,l,c,C,s,z,f,d||m||h,g)})}),[e,P,C,z,f,o,p,v,_]),V=ct.useMemo(()=>[...Array(8)].map((t,n)=>{const r=7-n;return[...Array(8)].map((t,a)=>{const i=P+a*C,s=P+n*C,o=e[r][a].visits.length>0,l=`${String.fromCharCode(97+a)}${r+1}`,c=p.some(e=>e.square===l);return xt.jsx("rect",{x:i,y:s,width:C,height:C,fill:"transparent",style:{cursor:o?"pointer":"default"},onMouseEnter:()=>L(r,a),onMouseLeave:F,onClick:()=>o&&$(r,a),onTouchStart:e=>{o&&(e.stopPropagation(),L(r,a),c||setTimeout(F,2e3))}},`interact-${r}-${a}`)})}),[e,P,C,p,L,F,$]),W=ct.useMemo(()=>{if(!n||0===O.length)return null;const e=[],t=.75*C;for(const n of O){const a="w"===n.color?n.type.toUpperCase():n.type.toLowerCase(),i=fV[a];if(!i)continue;const s=S.some(e=>e.pieceType===n.type.toUpperCase()&&e.pieceColor===n.color),o=c===n.square;e.push(xt.jsxs("g",{style:{transform:`translate(${n.x}px, ${n.y}px)`,transition:"transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:[xt.jsx("text",{x:0,y:0,textAnchor:"middle",dominantBaseline:"central",fontSize:t,fill:"w"===n.color?"#ffffff":"#1a1a1a",stroke:"w"===n.color?"#1a1a1a":"#ffffff",strokeWidth:.03*t,style:{opacity:r,transition:"opacity 0.2s ease-out, filter 0.2s ease-out",cursor:"pointer",filter:s?`drop-shadow(0 0 ${.15*t}px rgba(251, 191, 36, 0.8)) drop-shadow(0 ${.02*t}px ${.04*t}px rgba(0,0,0,0.3))`:o?`drop-shadow(0 0 ${.1*t}px rgba(255, 255, 255, 0.6)) drop-shadow(0 ${.02*t}px ${.04*t}px rgba(0,0,0,0.3))`:`drop-shadow(0 ${.02*t}px ${.04*t}px rgba(0,0,0,0.3))`,pointerEvents:"none"},children:i}),xt.jsx("rect",{x:.4*-C,y:.4*-C,width:.8*C,height:.8*C,fill:"transparent",style:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),M(n.type,n.color)},onMouseEnter:()=>A(n.square,n.type,n.color),onMouseLeave:B})]},n.id))}return e},[n,O,C,r,S,c,M,A,B]),Q=ct.useCallback(e=>{const t=e.charCodeAt(0)-97,n=parseInt(e[1])-1;return{x:P+t*C+C/2,y:P+(7-n)*C+C/2}},[P,C]),U=ct.useMemo(()=>{if(0===k.length)return null;const e=[],t=.08*C,n=.2*C,r=.15*C;return k.forEach((a,i)=>{const s=Q(a.from),o=Q(a.to),l=o.x-s.x,c=o.y-s.y,u=Math.sqrt(l*l+c*c);if(0===u)return;const d=l/u,h=c/u,p=.15*C,m=.25*C,f=s.x+d*p,g=s.y+h*p,y=o.x-d*m,v=o.y-h*m,x=y-d*n,b=v-h*n,w=-h*r,N=d*r,j=.5+i/k.length*.4,_=a.isCapture?"rgba(239, 68, 68, 0.8)":"rgba(251, 191, 36, 0.8)";e.push(xt.jsxs("g",{style:{opacity:j},children:[xt.jsx("line",{x1:f,y1:g,x2:x,y2:b,stroke:_,strokeWidth:t,strokeLinecap:"round"}),xt.jsx("polygon",{points:`${y},${v} ${x+w},${b+N} ${x-w},${b-N}`,fill:_}),xt.jsx("circle",{cx:f,cy:g,r:.1*C,fill:"rgba(0,0,0,0.7)",stroke:_,strokeWidth:1}),xt.jsx("text",{x:f,y:g,textAnchor:"middle",dominantBaseline:"central",fontSize:.12*C,fill:"white",fontWeight:"bold",children:a.moveNumber})]},`arrow-${i}`))}),e},[k,C,Q]);return xt.jsxs("svg",{width:E,height:E,viewBox:`0 0 ${E} ${E}`,xmlns:"http://www.w3.org/2000/svg",style:{display:"block"},children:[xt.jsx("rect",{x:0,y:0,width:E,height:E,fill:qF.border}),q,U,W,V]})};function xV(e){if(!e||"Unknown"===e||"????.??.??"===e)return"Date Unknown";const t=e.split(".");if(3!==t.length)return e;const n=t[0],r=parseInt(t[1])-1,a=parseInt(t[2]);if(isNaN(r)||r<0||r>11)return e;return`${["January","February","March","April","May","June","July","August","September","October","November","December"][r]} ${a}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(a)}, ${n}`}const bV=[{pieceType:"k",pieceColor:"w"},{pieceType:"q",pieceColor:"w"},{pieceType:"r",pieceColor:"w"},{pieceType:"b",pieceColor:"w"},{pieceType:"n",pieceColor:"w"},{pieceType:"p",pieceColor:"w"}],wV=[{pieceType:"k",pieceColor:"b"},{pieceType:"q",pieceColor:"b"},{pieceType:"r",pieceColor:"b"},{pieceType:"b",pieceColor:"b"},{pieceType:"n",pieceColor:"b"},{pieceType:"p",pieceColor:"b"}],kV=({gameData:e,title:t,darkMode:n=!1})=>{let r=null;try{r=M$()}catch{}const{lockedPieces:a=[],highlightedAnnotations:i=[],hoveredAnnotation:s=null,hoveredSquare:o=null,hoveredMove:l=null,setHoveredAnnotation:c,setHoveredMove:u,highlightedPiece:d}=r||{lockedPieces:[],highlightedAnnotations:[],hoveredAnnotation:null,hoveredSquare:null,hoveredMove:null,setHoveredAnnotation:()=>{},setHoveredMove:()=>{},highlightedPiece:null},h=ct.useMemo(()=>(null==o?void 0:o.moveNumbers)&&o.moveNumbers.length>0?new Set(o.moveNumbers):null,[o]),p=e=>i.includes(e),m=e=>{if(!c)return;let t=[];"white-player"===e?t=bV:"black-player"===e&&(t=wV),c({type:e,associatedPieces:t})},f=()=>{c&&c(null)},g=ct.useCallback((e,t)=>{if(!u)return;const n=e%2==0,r=function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,"");if("O-O"===n||"O-O-O"===n)return{pieceType:"k",targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a="p",i=n;/^[KQRBN]/.test(n)&&(a=n[0].toLowerCase(),i=n.slice(1));i=i.replace("x",""),i.match(/=([QRBN])$/i)&&(i=i.slice(0,-2));const s=i.slice(-2);return/^[a-h][1-8]$/.test(s)?{pieceType:a,targetSquare:s,isCapture:r}:null}(t,n);if(r){const a={moveNumber:e+1,san:t,piece:{pieceType:r.pieceType,pieceColor:n?"w":"b"},targetSquare:r.targetSquare,isCapture:r.isCapture};u(a)}},[u]),y=ct.useCallback(()=>{u&&u(null)},[u]),v=n?"text-stone-100":"text-stone-800",x=n?"text-stone-400":"text-stone-500",b=n?"text-stone-500":"text-stone-400",w=n?"text-stone-500":"text-stone-400",k=n?"text-stone-700":"text-stone-300",N=e=>{const t=p(e),n=(e=>(null==s?void 0:s.type)===e)(e),i=(e=>{if(!(a.length>0||null!==d))return!1;if(a.length>0){if("white-player"===e)return!a.some(e=>"w"===e.pieceColor);if("black-player"===e)return!a.some(e=>"b"===e.pieceColor)}if(d){if("white-player"===e)return"w"!==d.pieceColor;if("black-player"===e)return"b"!==d.pieceColor}return!1})(e);let o={transition:"all 0.2s ease-out",cursor:r?"pointer":"default"};if(t||n){const t="white-player"===e?"rgba(56, 189, 248, 0.4)":"black-player"===e?"rgba(251, 113, 133, 0.4)":"rgba(168, 85, 247, 0.4)";o={...o,textShadow:`0 0 8px ${t}`,transform:"scale(1.02)"}}return i&&(o.opacity=.3),o},j=ct.useMemo(()=>{const t=e.moves;if(!t||0===t.length)return null;const r=[];for(let e=0;e<t.length;e++){const a=e+1,i=e%2==0,s=Math.floor(e/2)+1,o=(null==h?void 0:h.has(a))??!1,c=(null==l?void 0:l.moveNumber)===a,u=o||c;i&&r.push(xt.jsxs("span",{className:"text-muted-foreground/60",children:[s,"."," "]},`num-${e}`));const d=u?{backgroundColor:"rgba(251, 191, 36, 0.3)",borderRadius:"2px",padding:"0 2px",fontWeight:600,color:n?"#fbbf24":"#d97706",boxShadow:"0 0 4px rgba(251, 191, 36, 0.4)"}:{};r.push(xt.jsx("span",{style:d,className:"cursor-pointer hover:bg-amber-500/20 rounded transition-colors",title:`Move ${a}: ${t[e]}`,onMouseEnter:()=>g(e,t[e]),onMouseLeave:y,children:t[e]},`move-${e}`)),r.push(xt.jsx("span",{children:" "},`space-${e}`))}return r},[e.moves,h,n,l,g,y]),_=h&&h.size>0;return xt.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[xt.jsxs("h1",{className:`text-xl md:text-2xl font-semibold tracking-wide ${v}`,style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[xt.jsx("span",{style:N("white-player"),onMouseEnter:()=>m("white-player"),onMouseLeave:f,className:"inline-block "+(p("white-player")?"ring-2 ring-sky-400/50 rounded px-1":""),children:e.white}),xt.jsx("span",{className:`mx-2 font-normal italic text-lg ${w}`,style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),xt.jsx("span",{style:N("black-player"),onMouseEnter:()=>m("black-player"),onMouseLeave:f,className:"inline-block "+(p("black-player")?"ring-2 ring-rose-400/50 rounded px-1":""),children:e.black})]}),e.event&&"Unknown"!==e.event&&xt.jsx("h2",{className:`text-sm md:text-base italic ${x}`,style:{fontFamily:"'Cormorant', Georgia, serif"},children:e.event}),xt.jsxs("p",{className:`text-xs uppercase tracking-[0.15em] flex items-center justify-center gap-3 ${b}`,style:{fontFamily:"'Inter', sans-serif"},children:[t&&xt.jsx("span",{className:"font-medium",children:t}),t&&xt.jsx("span",{className:k,children:""}),xt.jsx("span",{children:xV(e.date)})]}),_&&o&&xt.jsxs("div",{className:"text-xs px-3 py-1.5 rounded-full bg-amber-500/20 text-amber-600 dark:text-amber-400 inline-flex items-center gap-1",style:{fontFamily:"'Inter', sans-serif"},children:[xt.jsx("span",{className:"font-medium",children:o.square.toUpperCase()}),xt.jsx("span",{className:"opacity-70",children:""}),xt.jsxs("span",{children:[h.size," move",1!==h.size?"s":""]})]}),xt.jsx("div",{className:`leading-relaxed px-2 text-[8px] ${b}`,style:{fontFamily:"'Times New Roman', Times, serif",..._?{}:N("move-notation")},onMouseEnter:()=>!_&&m("move-notation"),onMouseLeave:f,children:j})]})};const NV=({size:e,show:t=!0,position:n="outside"})=>{const{archetype:r}=ct.useMemo(()=>{const t=function(e,t){const n=Math.min(100,e/800*100);return{fingerprint:`coord-${t}-${e}`,archetype:"coordinate_guide",quadrantProfile:{q1:"outside"===t?75:50,q2:"outside"===t?75:50,q3:"outside"===t?75:50,q4:"outside"===t?75:50},temporalFlow:{opening:n,middle:n,ending:n,trend:"stable",momentum:0},intensity:"outside"===t?.6:.4,dominantForce:"balanced",flowDirection:"lateral",criticalMoments:[]}}(e,n);return{signature:t,archetype:D$(t)}},[e,n]);if(!t)return null;const a=["a","b","c","d","e","f","g","h"],i=["8","7","6","5","4","3","2","1"],s=e/8,o=Math.max(10,.2*s),l="outside"===n?1.5*o:0;return"inside"===n?xt.jsxs("div",{className:"absolute inset-0 pointer-events-none",style:{width:e,height:e},"data-archetype":r,children:[a.map((e,t)=>xt.jsx("span",{className:"absolute text-muted-foreground/60 font-mono font-medium select-none",style:{left:t*s+.08*s,bottom:2,fontSize:.8*o},children:e},`file-${e}`)),i.map((e,t)=>xt.jsx("span",{className:"absolute text-muted-foreground/60 font-mono font-medium select-none",style:{right:4,top:t*s+2,fontSize:.8*o},children:e},`rank-${e}`))]}):xt.jsxs("div",{className:"relative",style:{width:e+2*l,height:e+2*l},"data-archetype":r,children:[xt.jsx("div",{className:"absolute flex justify-around",style:{top:0,left:l,width:e,height:l},children:a.map(e=>xt.jsx("span",{className:"text-muted-foreground font-mono font-medium flex items-center justify-center select-none",style:{width:s,fontSize:o},children:e},`file-top-${e}`))}),xt.jsx("div",{className:"absolute flex justify-around",style:{bottom:0,left:l,width:e,height:l},children:a.map(e=>xt.jsx("span",{className:"text-muted-foreground font-mono font-medium flex items-center justify-center select-none",style:{width:s,fontSize:o},children:e},`file-bottom-${e}`))}),xt.jsx("div",{className:"absolute flex flex-col justify-around",style:{left:0,top:l,width:l,height:e},children:i.map(e=>xt.jsx("span",{className:"text-muted-foreground font-mono font-medium flex items-center justify-center select-none",style:{height:s,fontSize:o},children:e},`rank-left-${e}`))}),xt.jsx("div",{className:"absolute flex flex-col justify-around",style:{right:0,top:l,width:l,height:e},children:i.map(e=>xt.jsx("span",{className:"text-muted-foreground font-mono font-medium flex items-center justify-center select-none",style:{height:s,fontSize:o},children:e},`rank-right-${e}`))}),xt.jsx("div",{className:"absolute",style:{left:l,top:l,width:e,height:e}})]})},jV=Object.freeze(Object.defineProperty({__proto__:null,default:NV},Symbol.toStringTag,{value:"Module"})),_V=({board:e,gameData:t,totalMoves:n,size:r,darkMode:a=!1,title:i,showCoordinates:s=!1,showPieces:o=!1,pieceOpacity:l=.7,pgn:c})=>{const{currentMove:u,setCurrentMove:d}=R$(),h=ct.useMemo(()=>c&&"string"==typeof c&&c.trim().length>0?c.trim():(null==t?void 0:t.pgn)&&"string"==typeof t.pgn&&t.pgn.trim().length>0?t.pgn.trim():"",[c,null==t?void 0:t.pgn]),p=ct.useMemo(()=>u>=n?e:e.map(e=>e.map(e=>({...e,visits:e.visits.filter(e=>e.moveNumber<=u)}))),[e,u,n]),m=ct.useCallback(e=>{d(e)},[d]),f=a?"#0A0A0A":"#FDFCFB",g=a?"#292524":"#e7e5e4",y=a?"#78716c":"#a8a29e";return xt.jsxs("div",{style:{backgroundColor:f,padding:24,display:"flex",flexDirection:"column",alignItems:"center",gap:20,width:"fit-content",borderRadius:8,border:`1px solid ${g}`,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},children:[xt.jsxs("div",{style:{position:"relative"},children:[s&&xt.jsx(NV,{size:r,position:"inside"}),xt.jsx(vV,{board:p,size:r,showPieces:o,pieceOpacity:l,pgn:h,currentMoveNumber:u,onFollowPieceActivated:m})]}),xt.jsx("div",{style:{width:"100%",paddingTop:16,borderTop:`1px solid ${g}`},children:xt.jsx(kV,{gameData:t,title:i,darkMode:a})}),xt.jsx("p",{style:{fontSize:10,letterSpacing:"0.3em",textTransform:"uppercase",fontWeight:500,color:y,margin:0,fontFamily:"'Inter', system-ui, sans-serif"},children:" En Pensent "})]})};var SV=["Enter"," "],CV=["ArrowUp","PageDown","End"],PV=["ArrowDown","PageUp","Home",...CV],EV={ltr:[...SV,"ArrowRight"],rtl:[...SV,"ArrowLeft"]},RV={ltr:["ArrowLeft"],rtl:["ArrowRight"]},OV="Menu",[TV,MV,AV]=tp(OV),[BV,DV]=Kh(OV,[AV,rb,wI]),IV=rb(),LV=wI(),[FV,$V]=BV(OV),[zV,qV]=BV(OV),VV=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:s=!0}=e,o=IV(t),[l,c]=ct.useState(null),u=ct.useRef(!1),d=ap(i),h=pI(a);return ct.useEffect(()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),xt.jsx(xb,{...o,children:xt.jsx(FV,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:xt.jsx(zV,{scope:t,onClose:ct.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:s,children:r})})})};VV.displayName=OV;var WV=ct.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=IV(n);return xt.jsx(bb,{...a,...r,ref:t})});WV.displayName="MenuAnchor";var QV="MenuPortal",[UV,KV]=BV(QV,{forceMount:void 0}),HV=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=$V(QV,t);return xt.jsx(UV,{scope:t,forceMount:n,children:xt.jsx(vp,{present:n||i.open,children:xt.jsx(yp,{asChild:!0,container:a,children:r})})})};HV.displayName=QV;var GV="MenuContent",[YV,ZV]=BV(GV),XV=ct.forwardRef((e,t)=>{const n=KV(GV,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=$V(GV,e.__scopeMenu),s=qV(GV,e.__scopeMenu);return xt.jsx(TV.Provider,{scope:e.__scopeMenu,children:xt.jsx(vp,{present:r||i.open,children:xt.jsx(TV.Slot,{scope:e.__scopeMenu,children:s.modal?xt.jsx(JV,{...a,ref:t}):xt.jsx(eW,{...a,ref:t})})})})}),JV=ct.forwardRef((e,t)=>{const n=$V(GV,e.__scopeMenu),r=ct.useRef(null),a=Uh(t,r);return ct.useEffect(()=>{const e=r.current;if(e)return tq(e)},[]),xt.jsx(nW,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Vh(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),eW=ct.forwardRef((e,t)=>{const n=$V(GV,e.__scopeMenu);return xt.jsx(nW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),tW=Gh("MenuContent.ScrollLock"),nW=ct.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:m,...f}=e,g=$V(GV,n),y=qV(GV,n),v=IV(n),x=LV(n),b=MV(n),[w,k]=ct.useState(null),N=ct.useRef(null),j=Uh(t,N,g.onContentChange),_=ct.useRef(0),S=ct.useRef(""),C=ct.useRef(0),P=ct.useRef(null),E=ct.useRef("right"),R=ct.useRef(0),O=m?$q:ct.Fragment,T=m?{as:tW,allowPinchZoom:!0}:void 0,M=e=>{var t,n;const r=S.current+e,a=b().filter(e=>!e.disabled),i=document.activeElement,s=null==(t=a.find(e=>e.ref.current===i))?void 0:t.textValue,o=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),a=r?t[0]:t,i=n?e.indexOf(n):-1;let s=(o=e,l=Math.max(i,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===a.length&&(s=s.filter(e=>e!==n));const c=s.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}(a.map(e=>e.textValue),r,s),l=null==(n=a.find(e=>e.textValue===o))?void 0:n.ref.current;!function e(t){S.current=t,window.clearTimeout(_.current),""!==t&&(_.current=window.setTimeout(()=>e(""),1e3))}(r),l&&setTimeout(()=>l.focus())};ct.useEffect(()=>()=>window.clearTimeout(_.current),[]),Iz();const A=ct.useCallback(e=>{var t,n;return E.current===(null==(t=P.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const e=t[i],o=t[s],l=e.x,c=e.y,u=o.x,d=o.y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(a=!a)}return a}(n,t)}(e,null==(n=P.current)?void 0:n.area)},[]);return xt.jsx(YV,{scope:n,searchRef:S,onItemEnter:ct.useCallback(e=>{A(e)&&e.preventDefault()},[A]),onItemLeave:ct.useCallback(e=>{var t;A(e)||(null==(t=N.current)||t.focus(),k(null))},[A]),onTriggerLeave:ct.useCallback(e=>{A(e)&&e.preventDefault()},[A]),pointerGraceTimerRef:C,onPointerGraceIntentChange:ct.useCallback(e=>{P.current=e},[]),children:xt.jsx(O,{...T,children:xt.jsx(qz,{asChild:!0,trapped:a,onMountAutoFocus:Vh(i,e=>{var t;e.preventDefault(),null==(t=N.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:xt.jsx(up,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:xt.jsx(RI,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:k,onEntryFocus:Vh(l,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:xt.jsx(wb,{role:"menu","aria-orientation":"vertical","data-state":RW(g.open),"data-radix-menu-content":"",dir:y.dir,...v,...f,ref:j,style:{outline:"none",...f.style},onKeyDown:Vh(f.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&M(e.key));const a=N.current;if(e.target!==a)return;if(!PV.includes(e.key))return;e.preventDefault();const i=b().filter(e=>!e.disabled).map(e=>e.ref.current);CV.includes(e.key)&&i.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(i)}),onBlur:Vh(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(_.current),S.current="")}),onPointerMove:Vh(e.onPointerMove,MW(e=>{const t=e.target,n=R.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>R.current?"right":"left";E.current=t,R.current=e.clientX}}))})})})})})})});XV.displayName=GV;var rW=ct.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return xt.jsx(np.div,{role:"group",...r,ref:t})});rW.displayName="MenuGroup";var aW=ct.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return xt.jsx(np.div,{...r,ref:t})});aW.displayName="MenuLabel";var iW="MenuItem",sW="menu.itemSelect",oW=ct.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=ct.useRef(null),s=qV(iW,e.__scopeMenu),o=ZV(iW,e.__scopeMenu),l=Uh(t,i),c=ct.useRef(!1);return xt.jsx(lW,{...a,ref:l,disabled:n,onClick:Vh(e.onClick,()=>{const e=i.current;if(!n&&e){const t=new CustomEvent(sW,{bubbles:!0,cancelable:!0});e.addEventListener(sW,e=>null==r?void 0:r(e),{once:!0}),rp(e,t),t.defaultPrevented?c.current=!1:s.onClose()}}),onPointerDown:t=>{var n;null==(n=e.onPointerDown)||n.call(e,t),c.current=!0},onPointerUp:Vh(e.onPointerUp,e=>{var t;c.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:Vh(e.onKeyDown,e=>{const t=""!==o.searchRef.current;n||t&&" "===e.key||SV.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});oW.displayName=iW;var lW=ct.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,s=ZV(iW,n),o=LV(n),l=ct.useRef(null),c=Uh(t,l),[u,d]=ct.useState(!1),[h,p]=ct.useState("");return ct.useEffect(()=>{const e=l.current;e&&p((e.textContent??"").trim())},[i.children]),xt.jsx(TV.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:xt.jsx(OI,{asChild:!0,...o,focusable:!r,children:xt.jsx(np.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Vh(e.onPointerMove,MW(e=>{if(r)s.onItemLeave(e);else if(s.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Vh(e.onPointerLeave,MW(e=>s.onItemLeave(e))),onFocus:Vh(e.onFocus,()=>d(!0)),onBlur:Vh(e.onBlur,()=>d(!1))})})})}),cW=ct.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return xt.jsx(yW,{scope:e.__scopeMenu,checked:n,children:xt.jsx(oW,{role:"menuitemcheckbox","aria-checked":OW(n)?"mixed":n,...a,ref:t,"data-state":TW(n),onSelect:Vh(a.onSelect,()=>null==r?void 0:r(!!OW(n)||!n),{checkForDefaultPrevented:!1})})})});cW.displayName="MenuCheckboxItem";var uW="MenuRadioGroup",[dW,hW]=BV(uW,{value:void 0,onValueChange:()=>{}}),pW=ct.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=ap(r);return xt.jsx(dW,{scope:e.__scopeMenu,value:n,onValueChange:i,children:xt.jsx(rW,{...a,ref:t})})});pW.displayName=uW;var mW="MenuRadioItem",fW=ct.forwardRef((e,t)=>{const{value:n,...r}=e,a=hW(mW,e.__scopeMenu),i=n===a.value;return xt.jsx(yW,{scope:e.__scopeMenu,checked:i,children:xt.jsx(oW,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":TW(i),onSelect:Vh(r.onSelect,()=>{var e;return null==(e=a.onValueChange)?void 0:e.call(a,n)},{checkForDefaultPrevented:!1})})})});fW.displayName=mW;var gW="MenuItemIndicator",[yW,vW]=BV(gW,{checked:!1}),xW=ct.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=vW(gW,n);return xt.jsx(vp,{present:r||OW(i.checked)||!0===i.checked,children:xt.jsx(np.span,{...a,ref:t,"data-state":TW(i.checked)})})});xW.displayName=gW;var bW=ct.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return xt.jsx(np.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});bW.displayName="MenuSeparator";var wW=ct.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=IV(n);return xt.jsx(kb,{...a,...r,ref:t})});wW.displayName="MenuArrow";var kW="MenuSub",[NW,jW]=BV(kW),_W=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:a}=e,i=$V(kW,t),s=IV(t),[o,l]=ct.useState(null),[c,u]=ct.useState(null),d=ap(a);return ct.useEffect(()=>(!1===i.open&&d(!1),()=>d(!1)),[i.open,d]),xt.jsx(xb,{...s,children:xt.jsx(FV,{scope:t,open:r,onOpenChange:d,content:c,onContentChange:u,children:xt.jsx(NW,{scope:t,contentId:lv(),triggerId:lv(),trigger:o,onTriggerChange:l,children:n})})})};_W.displayName=kW;var SW="MenuSubTrigger",CW=ct.forwardRef((e,t)=>{const n=$V(SW,e.__scopeMenu),r=qV(SW,e.__scopeMenu),a=jW(SW,e.__scopeMenu),i=ZV(SW,e.__scopeMenu),s=ct.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,c={__scopeMenu:e.__scopeMenu},u=ct.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return ct.useEffect(()=>u,[u]),ct.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}},[o,l]),xt.jsx(WV,{asChild:!0,...c,children:xt.jsx(lW,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":RW(n.open),...e,ref:Qh(t,a.onTriggerChange),onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Vh(e.onPointerMove,MW(t=>{i.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||s.current||(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Vh(e.onPointerLeave,MW(e=>{var t,r;u();const a=null==(t=n.content)?void 0:t.getBoundingClientRect();if(a){const t=null==(r=n.content)?void 0:r.dataset.side,s="right"===t,l=s?-5:5,c=a[s?"left":"right"],u=a[s?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:a.top},{x:u,y:a.top},{x:u,y:a.bottom},{x:c,y:a.bottom}],side:t}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Vh(e.onKeyDown,t=>{var a;const s=""!==i.searchRef.current;e.disabled||s&&" "===t.key||EV[r.dir].includes(t.key)&&(n.onOpenChange(!0),null==(a=n.content)||a.focus(),t.preventDefault())})})})});CW.displayName=SW;var PW="MenuSubContent",EW=ct.forwardRef((e,t)=>{const n=KV(GV,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=$V(GV,e.__scopeMenu),s=qV(GV,e.__scopeMenu),o=jW(PW,e.__scopeMenu),l=ct.useRef(null),c=Uh(t,l);return xt.jsx(TV.Provider,{scope:e.__scopeMenu,children:xt.jsx(vp,{present:r||i.open,children:xt.jsx(TV.Slot,{scope:e.__scopeMenu,children:xt.jsx(nW,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:c,align:"start",side:"rtl"===s.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;s.isUsingKeyboardRef.current&&(null==(t=l.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Vh(e.onFocusOutside,e=>{e.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Vh(e.onEscapeKeyDown,e=>{s.onClose(),e.preventDefault()}),onKeyDown:Vh(e.onKeyDown,e=>{var t;const n=e.currentTarget.contains(e.target),r=RV[s.dir].includes(e.key);n&&r&&(i.onOpenChange(!1),null==(t=o.trigger)||t.focus(),e.preventDefault())})})})})})});function RW(e){return e?"open":"closed"}function OW(e){return"indeterminate"===e}function TW(e){return OW(e)?"indeterminate":e?"checked":"unchecked"}function MW(e){return t=>"mouse"===t.pointerType?e(t):void 0}EW.displayName=PW;var AW=VV,BW=WV,DW=HV,IW=XV,LW=rW,FW=aW,$W=oW,zW=cW,qW=pW,VW=fW,WW=xW,QW=bW,UW=wW,KW=_W,HW=CW,GW=EW,YW="DropdownMenu",[ZW]=Kh(YW,[DV]),XW=DV(),[JW,eQ]=ZW(YW),tQ=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=XW(t),c=ct.useRef(null),[u,d]=wp({prop:a,defaultProp:i??!1,onChange:s,caller:YW});return xt.jsx(JW,{scope:t,triggerId:lv(),triggerRef:c,contentId:lv(),open:u,onOpenChange:d,onOpenToggle:ct.useCallback(()=>d(e=>!e),[d]),modal:o,children:xt.jsx(AW,{...l,open:u,onOpenChange:d,dir:r,modal:o,children:n})})};tQ.displayName=YW;var nQ="DropdownMenuTrigger",rQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=eQ(nQ,n),s=XW(n);return xt.jsx(BW,{asChild:!0,...s,children:xt.jsx(np.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Qh(t,i.triggerRef),onPointerDown:Vh(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(i.onOpenToggle(),i.open||e.preventDefault())}),onKeyDown:Vh(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&i.onOpenToggle(),"ArrowDown"===e.key&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});rQ.displayName=nQ;var aQ=e=>{const{__scopeDropdownMenu:t,...n}=e,r=XW(t);return xt.jsx(DW,{...r,...n})};aQ.displayName="DropdownMenuPortal";var iQ="DropdownMenuContent",sQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=eQ(iQ,n),i=XW(n),s=ct.useRef(!1);return xt.jsx(IW,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Vh(e.onCloseAutoFocus,e=>{var t;s.current||null==(t=a.triggerRef.current)||t.focus(),s.current=!1,e.preventDefault()}),onInteractOutside:Vh(e.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.modal&&!r||(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sQ.displayName=iQ;ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(LW,{...a,...r,ref:t})}).displayName="DropdownMenuGroup";var oQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(FW,{...a,...r,ref:t})});oQ.displayName="DropdownMenuLabel";var lQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx($W,{...a,...r,ref:t})});lQ.displayName="DropdownMenuItem";var cQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(zW,{...a,...r,ref:t})});cQ.displayName="DropdownMenuCheckboxItem";ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(qW,{...a,...r,ref:t})}).displayName="DropdownMenuRadioGroup";var uQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(VW,{...a,...r,ref:t})});uQ.displayName="DropdownMenuRadioItem";var dQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(WW,{...a,...r,ref:t})});dQ.displayName="DropdownMenuItemIndicator";var hQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(QW,{...a,...r,ref:t})});hQ.displayName="DropdownMenuSeparator";ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(UW,{...a,...r,ref:t})}).displayName="DropdownMenuArrow";var pQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(HW,{...a,...r,ref:t})});pQ.displayName="DropdownMenuSubTrigger";var mQ=ct.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=XW(n);return xt.jsx(GW,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mQ.displayName="DropdownMenuSubContent";var fQ=aQ,gQ=sQ,yQ=oQ,vQ=lQ,xQ=cQ,bQ=uQ,wQ=dQ,kQ=hQ,NQ=pQ,jQ=mQ;const _Q=tQ,SQ=rQ,CQ=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:a,defaultOpen:i}=e,s=XW(t),[o,l]=wp({prop:r,defaultProp:i??!1,onChange:a,caller:"DropdownMenuSub"});return xt.jsx(KW,{...s,open:o,onOpenChange:l,children:n})},PQ=ct.forwardRef(({className:e,inset:t,children:n,...r},a)=>xt.jsxs(NQ,{ref:a,className:Cy("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,xt.jsx(Lm,{className:"ml-auto h-4 w-4"})]}));PQ.displayName=NQ.displayName;const EQ=ct.forwardRef(({className:e,...t},n)=>xt.jsx(jQ,{ref:n,className:Cy("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));EQ.displayName=jQ.displayName;const RQ=ct.forwardRef(({className:e,sideOffset:t=4,...n},r)=>xt.jsx(gQ,{ref:r,sideOffset:t,className:Cy("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));RQ.displayName=gQ.displayName;const OQ=ct.forwardRef((e,t)=>xt.jsx(fQ,{children:xt.jsx(RQ,{ref:t,...e})}));OQ.displayName="DropdownMenuContent";const TQ=ct.forwardRef(({className:e,inset:t,...n},r)=>xt.jsx(vQ,{ref:r,className:Cy("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));TQ.displayName=vQ.displayName;ct.forwardRef(({className:e,children:t,checked:n,...r},a)=>xt.jsxs(xQ,{ref:a,className:Cy("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[xt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:xt.jsx(wQ,{children:xt.jsx(Bm,{className:"h-4 w-4"})})}),t]})).displayName=xQ.displayName;ct.forwardRef(({className:e,children:t,...n},r)=>xt.jsxs(bQ,{ref:r,className:Cy("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[xt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:xt.jsx(wQ,{children:xt.jsx(Vm,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=bQ.displayName;const MQ=ct.forwardRef(({className:e,inset:t,...n},r)=>xt.jsx(yQ,{ref:r,className:Cy("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));MQ.displayName=yQ.displayName;const AQ=ct.forwardRef(({className:e,...t},n)=>xt.jsx(kQ,{ref:n,className:Cy("-mx-1 my-1 h-px bg-muted",e),...t}));AQ.displayName=kQ.displayName;const BQ={p:100,n:305,b:333,r:563,q:950,k:2e4},DQ={brilliant:{quality:"brilliant",symbol:"!!",color:"#26C9A2",label:"Brilliant",description:"An exceptional move that sacrifices material for a winning position, or the only move that maintains advantage",cpLossRange:"Gains advantage through sacrifice"},great:{quality:"great",symbol:"!",color:"#81B64C",label:"Great",description:"A strong move that finds a tactical resource or significantly improves the position",cpLossRange:"0 cp loss, tactical"},best:{quality:"best",symbol:"",color:"#96BC4B",label:"Best",description:"The objectively strongest move - what Stockfish would play",cpLossRange:"< 5 cp loss"},good:{quality:"good",symbol:"",color:"#A3A3A3",label:"Good",description:"A solid move that maintains the position without significant loss",cpLossRange:"5-30 cp loss"},book:{quality:"book",symbol:"",color:"#769656",label:"Book Move",description:"A standard opening theory move recognized by chess databases",cpLossRange:"Theoretical"},inaccuracy:{quality:"inaccuracy",symbol:"?!",color:"#F7C631",label:"Inaccuracy",description:"A suboptimal move that slightly weakens the position",cpLossRange:"30-75 cp loss"},mistake:{quality:"mistake",symbol:"?",color:"#E58F2A",label:"Mistake",description:"A clear error that significantly damages the position",cpLossRange:"75-200 cp loss"},blunder:{quality:"blunder",symbol:"??",color:"#CA3431",label:"Blunder",description:"A severe error that often leads to loss of game or major material",cpLossRange:"> 200 cp loss"}};function IQ(e){const t=new lF,n=[];try{t.loadPgn(e);const r=t.history({verbose:!0});t.reset();let a=0;r.forEach((e,r)=>{const i=Math.floor(r/2)+1,s=e.color;t.move(e.san);const o=function(e){let t=0;const n="abcdefgh",r="12345678";for(const a of n)for(const n of r){const r=a+n,i=e.get(r);if(i){const e=BQ[i.type];t+="w"===i.color?e:-e}}return t}(t),l="w"===s?o-a:a-o,c=e.flags.includes("c")||e.flags.includes("e"),u=e.san.includes("+"),d=e.san.includes("#"),h=e.flags.includes("k")||e.flags.includes("q"),p=!!e.promotion,m=function(e,t,n){if(!e.captured)return!1;const r=BQ[e.piece],a=BQ[e.captured];if(r>a+50&&n<0)return!0;return!1}(e,0,l),f=function(e){const{move:t,moveNumber:n,isCapture:r,isCheck:a,isCheckmate:i,isSacrifice:s,materialChange:o,isOpening:l}=e;if(i)return"brilliant";if(s&&a)return"brilliant";if(s&&o<-200&&o>-600)return"brilliant";if(s&&"q"===t.piece&&!i)return"brilliant";if(o<-800)return"blunder";if(o<-450&&!s)return"blunder";if(o<-200&&!a&&!s)return"blunder";if(o<-75&&!s)return"mistake";if(o<-30&&!s)return"inaccuracy";if(l&&function(e,t){if(t>15)return!1;const n=LQ[t];if(!n)return!1;const r=e.san.replace(/[+#!?x]/g,"");return n.includes(r)}(t,n))return"book";if(o>=800)return"brilliant";if(o>=450)return"great";if(o>=280)return"great";if(a&&o>=200)return"great";if(o>=80)return"best";if(a&&o>0)return"best";if(r&&Math.abs(o)<30)return"best";if(a&&o>=-20)return"good";if((t.flags.includes("k")||t.flags.includes("q"))&&n<=25)return"good";if(l&&["e4","d4","e5","d5","c4","c5"].includes(t.san))return"best";if(l&&"n"===t.piece&&["c3","f3","c6","f6","d2","e2","d7","e7"].includes(t.to))return"good";if(l&&"b"===t.piece&&n<=10)return"good";if("r"===t.piece&&!l&&["d","e"].includes(t.to[0]))return"good";return"good"}({move:e,chess:t,moveNumber:i,isCapture:c,isCheck:u,isCheckmate:d,isSacrifice:m,materialChange:l,isOpening:i<=10});n.push({moveNumber:i,color:s,san:e.san,uci:e.from+e.to+(e.promotion||""),quality:f,info:DQ[f],materialChange:l,isCapture:c,isCheck:u,isCheckmate:d,isCastle:h,isPromotion:p,isSacrifice:m}),a=o})}catch(APe){}return n}const LQ={1:["e4","d4","Nf3","c4","g3","b3","f4","Nc3","e3","d3","e5","d5","Nf6","c5","c6","e6","g6","d6","b6","f5"],2:["e4","d4","Nf3","c4","Nc3","Bc4","Bb5","f4","exd5","cxd4","e5","d5","Nf6","Nc6","e6","d6","g6","Bg7","Be7","c6","cxd4","exf4"],3:["Bc4","Bb5","Nf3","Nc3","d4","d3","Be2","f3","g3","exd4","Nxd4","Bc5","Bb4","Be7","Nf6","Nc6","d6","a6","g6","Bg7","cxd4","dxc4"],4:["O-O","Nf3","d4","d3","c3","Nc3","Ba4","Bxc6","Nxd4","exd5","O-O","Be7","Bc5","d6","a6","Nf6","Bg4","Be6","dxc4","Nxd4"],5:["O-O","d4","c3","Re1","d3","Bg5","Nxc6","e5","Qe2","Be3","O-O","Be7","d6","a6","O-O-O","Bg4","e5","Nbd7","h6","Qc7"],6:["Re1","Qe2","h3","a3","Bc2","c3","d4","Bg5","Bxf6","exd5","b5","Be7","Bb7","Qc7","Bd7","Be6","O-O","a6","h6","Rc8"],7:["Bb3","a4","c3","d4","Nbd2","h3","Re1","Bc2","d5","exd5","O-O","d5","Bb7","Be7","Nc6","Qc7","Bd7","a5","Rc8","h6"],8:["c3","d4","a4","h3","Bc2","Nbd2","d5","Bg5","a3","Re1","d5","O-O","Bb7","Qc7","Rc8","Be7","Nd7","a5","exd4","h6"],9:["d4","Bc2","Nbd2","h3","a4","Be3","d5","exd5","Bg5","Re1","c5","d5","Bb7","O-O","Qc7","Nc6","Rc8","Be7","h6","exd4"],10:["Nbd2","d4","Bc2","cxd4","d5","a4","Bg5","dxc5","exd5","Qc2","cxd4","Bb7","Qc7","Rc8","Nc6","Be7","d5","O-O","Nxd4","h6"],11:["Nf1","d5","Bc2","Ng3","a4","Qd3","b3","Bd2","cxd5","exd5"],12:["Ng3","a4","d5","Qd3","b4","Bd2","Rac1","f4","cxd5","Nxd5"],13:["Nf5","d6","a5","Qd2","b5","g4","f4","Rac1","Bd3","Kh1"],14:["Bxf5","g4","a6","Ng3","f4","Qf3","Rf3","Rg3","Kh1","b4"],15:["g4","f4","Ng3","Kh1","Rg3","Qf3","h4","Qh5","g5","f5"]};function FQ(e){if(0===e.length)return 100;let t=0;for(const n of e)switch(n.quality){case"brilliant":t+=100;break;case"great":t+=95;break;case"best":t+=90;break;case"good":t+=75;break;case"book":t+=85;break;case"inaccuracy":t+=50;break;case"mistake":t+=25;break;case"blunder":t+=0}return Math.round(t/(100*e.length)*100)}function $Q(e){const t={totalMoves:e.length,brilliantCount:0,greatCount:0,bestCount:0,goodCount:0,bookCount:0,inaccuracyCount:0,mistakeCount:0,blunderCount:0,checkCount:0,checkmateCount:0,captureCount:0,castleCount:0,promotionCount:0,sacrificeCount:0,accuracy:0,whiteAccuracy:0,blackAccuracy:0,whiteMoves:[],blackMoves:[]};for(const n of e){switch(n.quality){case"brilliant":t.brilliantCount++;break;case"great":t.greatCount++;break;case"best":t.bestCount++;break;case"good":t.goodCount++;break;case"book":t.bookCount++;break;case"inaccuracy":t.inaccuracyCount++;break;case"mistake":t.mistakeCount++;break;case"blunder":t.blunderCount++}n.isCheckmate?t.checkmateCount++:n.isCheck&&t.checkCount++,n.isCapture&&t.captureCount++,n.isCastle&&t.castleCount++,n.isPromotion&&t.promotionCount++,n.isSacrifice&&t.sacrificeCount++,"w"===n.color?t.whiteMoves.push(n):t.blackMoves.push(n)}return t.accuracy=FQ(e),t.whiteAccuracy=FQ(t.whiteMoves),t.blackAccuracy=FQ(t.blackMoves),t}const zQ=[{eco:"C20",name:"King's Pawn Game",moves:"1.e4 e5",category:"open",description:"Classic response to 1.e4",valueBonus:5},{eco:"C21",name:"Centre Game",moves:"1.e4 e5 2.d4",category:"open",description:"Direct central strike",marketingDescription:" The Centre Game - Strike at the heart! An immediate challenge to Black's control of the center. Simple, direct, devastating.",famousPlayers:["Mieses","Blackburne"],historicalSignificance:"Popular in the 19th century romantic era. A direct approach favored by attacking players.",valueBonus:8},{eco:"C21",name:"Centre Game",variation:"Accepted",moves:"1.e4 e5 2.d4 exd4",category:"open",description:"Taking the center pawn",valueBonus:8},{eco:"C22",name:"Centre Game",variation:"Main Line",moves:"1.e4 e5 2.d4 exd4 3.Qxd4",category:"open",description:"Queen recapture, developing quickly",valueBonus:8},{eco:"C30",name:"King's Gambit",moves:"1.e4 e5 2.f4",category:"gambit",description:"Romantic era attacking opening",marketingDescription:" The King's Gambit - The ultimate romantic gambit. Sacrificing the f-pawn for glory, this opening defined the golden age of chess.",famousPlayers:["Anderssen","Morphy","Spassky","Fischer","Short"],historicalSignificance:'The weapon of choice in the Romantic Era. Used in the famous "Immortal Game" and "Evergreen Game".',valueBonus:15},{eco:"C33",name:"King's Gambit Accepted",moves:"1.e4 e5 2.f4 exf4",category:"gambit",description:"Taking the gambit pawn",valueBonus:15},{eco:"C30",name:"King's Gambit Declined",moves:"1.e4 e5 2.f4 Bc5",category:"open",description:"Declining the gambit",valueBonus:12},{eco:"C39",name:"King's Gambit",variation:"Muzio Gambit",moves:"1.e4 e5 2.f4 exf4 3.Nf3 g5 4.Bc4 g4 5.O-O",category:"gambit",description:"Piece sacrifice for massive attack",valueBonus:18},{eco:"C34",name:"King's Gambit",variation:"Fischer Defense",moves:"1.e4 e5 2.f4 exf4 3.Nf3 d6",category:"gambit",description:"Fischer's solid approach",valueBonus:15},{eco:"C23",name:"Bishop's Opening",moves:"1.e4 e5 2.Bc4",category:"open",description:"Early bishop development to active square",marketingDescription:" The Bishop's Opening - Target f7 from move two! A flexible and potent weapon that can transpose into Italian or King's Gambit lines.",famousPlayers:["Philidor","Morphy","Short"],historicalSignificance:"One of the oldest openings, predating 1.e4 e5 2.Nf3. Recommended by Philidor.",valueBonus:10},{eco:"C23",name:"Bishop's Opening",variation:"Classical",moves:"1.e4 e5 2.Bc4 Bc5",category:"open",description:"Symmetrical development",valueBonus:10},{eco:"C24",name:"Bishop's Opening",variation:"Berlin Defense",moves:"1.e4 e5 2.Bc4 Nf6",category:"open",description:"Active knight development",valueBonus:10},{eco:"C25",name:"Vienna Game",moves:"1.e4 e5 2.Nc3",category:"open",description:"Flexible preparation for f4",marketingDescription:" The Vienna Game - The sophisticated cousin of the King's Gambit. Prepare f4 without committing, then unleash the attack.",famousPlayers:["Steinitz","Spielmann","Larsen"],historicalSignificance:"Named after the Viennese masters who developed it. A strategic alternative to the King's Gambit.",valueBonus:10},{eco:"C26",name:"Vienna Game",variation:"Max Lange Defense",moves:"1.e4 e5 2.Nc3 Nc6",category:"open",description:"Natural knight development",valueBonus:10},{eco:"C29",name:"Vienna Gambit",moves:"1.e4 e5 2.Nc3 Nf6 3.f4",category:"gambit",description:"Delayed King's Gambit",valueBonus:12},{eco:"C27",name:"Vienna Game",variation:"Frankenstein-Dracula Variation",moves:"1.e4 e5 2.Nc3 Nf6 3.Bc4 Nxe4",category:"gambit",description:"Sharp tactical battle",valueBonus:15},{eco:"C40",name:"King's Knight Opening",moves:"1.e4 e5 2.Nf3",category:"open",description:"The most natural developing move",marketingDescription:" The King's Knight Opening - The universal foundation. From here springs the Italian, Spanish, Scotch, and countless masterpieces.",famousPlayers:["All World Champions"],historicalSignificance:"The starting point for nearly all classical 1.e4 e5 openings. The foundation of opening theory.",valueBonus:5},{eco:"C60",name:"Spanish Game",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5",category:"open",description:"The Spanish Game - most analyzed opening",marketingDescription:" The Spanish Game (Ruy Lopez) - The royal weapon of world champions. Five centuries of theory have only deepened its strategic mysteries.",famousPlayers:["Lasker","Capablanca","Fischer","Karpov","Anand","Carlsen"],historicalSignificance:"Named after 16th century Spanish priest Ruy Lpez de Segura. The most respected opening at the highest levels.",valueBonus:12},{eco:"C60",name:"Ruy Lopez",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5",category:"open",description:"The Spanish Game - most analyzed opening",valueBonus:12},{eco:"C65",name:"Ruy Lopez",variation:"Berlin Defense",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5 Nf6",category:"open",description:"The Berlin Wall - extremely solid",valueBonus:12},{eco:"C68",name:"Ruy Lopez",variation:"Exchange Variation",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Bxc6",category:"open",description:"Doubled pawns but bishop pair",valueBonus:10},{eco:"C78",name:"Ruy Lopez",variation:"Morphy Defense",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4",category:"open",description:"Main line Ruy Lopez",valueBonus:12},{eco:"C80",name:"Ruy Lopez",variation:"Open Defense",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.O-O Nxe4",category:"open",description:"Taking the e4 pawn early",valueBonus:12},{eco:"C84",name:"Ruy Lopez",variation:"Closed Defense",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.O-O Be7",category:"open",description:"Most common main line",valueBonus:12},{eco:"C89",name:"Marshall Attack",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.O-O Be7 6.Re1 b5 7.Bb3 O-O 8.c3 d5",category:"gambit",description:"Famous gambit for attack on white king",valueBonus:18},{eco:"C50",name:"Italian Game",moves:"1.e4 e5 2.Nf3 Nc6 3.Bc4",category:"open",description:"Classic opening targeting f7",marketingDescription:" The Italian Game - A Renaissance masterpiece that has withstood five centuries of chess evolution. The opening of choice for artistic players who appreciate classical beauty.",famousPlayers:["Greco","Morphy","Fischer","Caruana"],historicalSignificance:"One of the oldest recorded openings, dating back to the 16th century Italian masters.",valueBonus:12},{eco:"C53",name:"Giuoco Piano",moves:"1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5",category:"open",description:'The "quiet game" - solid development',valueBonus:10},{eco:"C54",name:"Giuoco Piano",variation:"Main Line",moves:"1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.c3",category:"open",description:"Preparing d4 push",valueBonus:10},{eco:"C55",name:"Two Knights Defense",moves:"1.e4 e5 2.Nf3 Nc6 3.Bc4 Nf6",category:"open",description:"Active defense, sharp play",valueBonus:10},{eco:"C57",name:"Fried Liver Attack",moves:"1.e4 e5 2.Nf3 Nc6 3.Bc4 Nf6 4.Ng5 d5 5.exd5 Nxd5 6.Nxf7",category:"gambit",description:"Famous knight sacrifice on f7",valueBonus:18},{eco:"C51",name:"Evans Gambit",moves:"1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4",category:"gambit",description:"Aggressive pawn sacrifice for tempo",valueBonus:15},{eco:"C44",name:"Scotch Game",moves:"1.e4 e5 2.Nf3 Nc6 3.d4",category:"open",description:"Immediate central confrontation",marketingDescription:" The Scotch Game - Bold and direct, favored by players who demand immediate action. Kasparov brought it back to elite play.",famousPlayers:["Kasparov","Caruana","Nakamura"],historicalSignificance:"Named after the 1824 correspondence match between Edinburgh and London chess clubs.",valueBonus:10},{eco:"C45",name:"Scotch Game",variation:"Classical",moves:"1.e4 e5 2.Nf3 Nc6 3.d4 exd4 4.Nxd4",category:"open",description:"Recapturing with knight",valueBonus:10},{eco:"C44",name:"Scotch Gambit",moves:"1.e4 e5 2.Nf3 Nc6 3.d4 exd4 4.Bc4",category:"gambit",description:"Gambit for rapid development",valueBonus:12},{eco:"C45",name:"Scotch Game",variation:"Mieses Variation",moves:"1.e4 e5 2.Nf3 Nc6 3.d4 exd4 4.Nxd4 Nf6 5.Nxc6 bxc6 6.e5",category:"open",description:"Sharp pawn push variation",valueBonus:10},{eco:"C41",name:"Philidor Defense",moves:"1.e4 e5 2.Nf3 d6",category:"open",description:"Solid but passive defense",marketingDescription:' The Philidor Defense - "Pawns are the soul of chess" - Named after the greatest player of the 18th century. Solid, resilient, timeless.',famousPlayers:["Philidor","Larsen","Ivanchuk"],historicalSignificance:"Named after Franois-Andr Danican Philidor, who dominated chess for 50 years in the 1700s.",valueBonus:10},{eco:"C41",name:"Philidor Defense",variation:"Hanham Variation",moves:"1.e4 e5 2.Nf3 d6 3.d4 Nd7",category:"open",description:"Flexible knight placement",valueBonus:10},{eco:"C41",name:"Philidor Defense",variation:"Lion Variation",moves:"1.e4 e5 2.Nf3 d6 3.d4 Nf6",category:"open",description:"Active counterplay",valueBonus:10},{eco:"C42",name:"Petrov Defense",moves:"1.e4 e5 2.Nf3 Nf6",category:"open",description:"The Russian Game - symmetrical and solid",marketingDescription:" The Petrov Defense - The fortress of Russian chess. Symmetrical, solid, and the choice of players seeking equality with Black.",famousPlayers:["Petrov","Karpov","Kramnik","Caruana"],historicalSignificance:"Named after Russian master Alexander Petrov. The favorite of defensive specialists seeking peace.",valueBonus:10},{eco:"C42",name:"Petrov Defense",variation:"Classical Attack",moves:"1.e4 e5 2.Nf3 Nf6 3.Nxe5 d6 4.Nf3 Nxe4",category:"open",description:"Main line continuation",valueBonus:10},{eco:"C43",name:"Petrov Defense",variation:"Steinitz Attack",moves:"1.e4 e5 2.Nf3 Nf6 3.d4",category:"open",description:"Aggressive center strike",valueBonus:10},{eco:"C40",name:"Latvian Gambit",moves:"1.e4 e5 2.Nf3 f5",category:"gambit",description:"Risky counter-gambit",valueBonus:15},{eco:"C21",name:"Danish Gambit",moves:"1.e4 e5 2.d4 exd4 3.c3",category:"gambit",description:"Sacrificing two pawns for development",valueBonus:15},{eco:"C46",name:"Four Knights Game",moves:"1.e4 e5 2.Nf3 Nc6 3.Nc3 Nf6",category:"open",description:"Symmetrical development",valueBonus:8},{eco:"C47",name:"Four Knights",variation:"Scotch Variation",moves:"1.e4 e5 2.Nf3 Nc6 3.Nc3 Nf6 4.d4",category:"open",description:"Adding d4 to Four Knights",valueBonus:8},{eco:"C48",name:"Four Knights",variation:"Spanish Variation",moves:"1.e4 e5 2.Nf3 Nc6 3.Nc3 Nf6 4.Bb5",category:"open",description:"Spanish flavor in Four Knights",valueBonus:8},{eco:"C42",name:"Stafford Gambit",moves:"1.e4 e5 2.Nf3 Nf6 3.Nxe5 Nc6",category:"gambit",description:"Dangerous trap-laden gambit",marketingDescription:" The Stafford Gambit - The ultimate trickster opening. Loaded with deadly traps that have claimed countless victims.",famousPlayers:["Eric Rosen"],historicalSignificance:"Made famous in the internet era by IM Eric Rosen, creating chaos with deceptive simplicity.",valueBonus:15},{eco:"B01",name:"Scandinavian Defense",moves:"1.e4 d5",category:"semi-open",description:"Immediate counter in center",marketingDescription:" The Scandinavian Defense - Strike immediately! The fearless queen sortie that demands White prove their worth from move one.",famousPlayers:["Bent Larsen","Tiviakov","Anand"],historicalSignificance:"One of the oldest defenses to 1.e4, dating to the 15th century. Brought to elite level by Bent Larsen.",valueBonus:10},{eco:"B01",name:"Scandinavian Defense",variation:"Main Line",moves:"1.e4 d5 2.exd5 Qxd5",category:"semi-open",description:"Queen comes out early",valueBonus:10},{eco:"B01",name:"Scandinavian Defense",variation:"Modern",moves:"1.e4 d5 2.exd5 Nf6",category:"semi-open",description:"Not taking back immediately",valueBonus:10},{eco:"B01",name:"Scandinavian Defense",variation:"Icelandic Gambit",moves:"1.e4 d5 2.exd5 Nf6 3.c4 e6",category:"gambit",description:"Aggressive pawn sacrifice",valueBonus:12},{eco:"C00",name:"French Defense",moves:"1.e4 e6",category:"semi-open",description:"Solid but cramped defense",marketingDescription:" The French Defense - La Dfense Franaise! Solid as the Eiffel Tower. Accept a cramped position, then strike back with devastating counterplay.",famousPlayers:["Botvinnik","Petrosian","Short","Morozevich"],historicalSignificance:"Named after a correspondence match between London and Paris in 1834. The thinking player's defense.",valueBonus:10},{eco:"C02",name:"French Defense",variation:"Advance Variation",moves:"1.e4 e6 2.d4 d5 3.e5",category:"semi-open",description:"Space advantage for White",valueBonus:10},{eco:"C03",name:"French Defense",variation:"Tarrasch Variation",moves:"1.e4 e6 2.d4 d5 3.Nd2",category:"semi-open",description:"Flexible knight placement",valueBonus:10},{eco:"C10",name:"French Defense",variation:"Rubinstein",moves:"1.e4 e6 2.d4 d5 3.Nc3 dxe4",category:"semi-open",description:"Trading center pawn",valueBonus:10},{eco:"C11",name:"French Defense",variation:"Classical",moves:"1.e4 e6 2.d4 d5 3.Nc3 Nf6",category:"semi-open",description:"Main line French",valueBonus:10},{eco:"C15",name:"French Defense",variation:"Winawer",moves:"1.e4 e6 2.d4 d5 3.Nc3 Bb4",category:"semi-open",description:"Sharp and complex",valueBonus:12},{eco:"B10",name:"Caro-Kann Defense",moves:"1.e4 c6",category:"semi-open",description:"Solid and reliable",marketingDescription:" The Caro-Kann Defense - The fortress opening. Solid as stone, yet with hidden attacking venom. Chosen by positional masters.",famousPlayers:["Karpov","Capablanca","Petrosian","Anand"],historicalSignificance:"Named after Horatio Caro and Marcus Kann. A favorite of world champions seeking solidity with Black.",valueBonus:10},{eco:"B12",name:"Caro-Kann",variation:"Advance Variation",moves:"1.e4 c6 2.d4 d5 3.e5",category:"semi-open",description:"Space advantage approach",valueBonus:10},{eco:"B13",name:"Caro-Kann",variation:"Exchange Variation",moves:"1.e4 c6 2.d4 d5 3.exd5 cxd5",category:"semi-open",description:"Symmetrical pawn structure",valueBonus:8},{eco:"B14",name:"Caro-Kann",variation:"Panov-Botvinnik Attack",moves:"1.e4 c6 2.d4 d5 3.exd5 cxd5 4.c4",category:"semi-open",description:"IQP structures",valueBonus:10},{eco:"B15",name:"Caro-Kann",variation:"Main Line",moves:"1.e4 c6 2.d4 d5 3.Nc3 dxe4 4.Nxe4",category:"semi-open",description:"Classical approach",valueBonus:10},{eco:"B17",name:"Caro-Kann",variation:"Steinitz Variation",moves:"1.e4 c6 2.d4 d5 3.Nc3 dxe4 4.Nxe4 Nd7",category:"semi-open",description:"Nd7 before Nf6",valueBonus:10},{eco:"B18",name:"Caro-Kann",variation:"Classical",moves:"1.e4 c6 2.d4 d5 3.Nc3 dxe4 4.Nxe4 Bf5",category:"semi-open",description:"Developing the bad bishop",valueBonus:10},{eco:"B20",name:"Sicilian Defense",moves:"1.e4 c5",category:"semi-open",description:"Fighting response to 1.e4",marketingDescription:" The Sicilian Defense - The ultimate fighting defense. Asymmetrical, complex, and uncompromising. Chosen by champions who refuse to draw.",famousPlayers:["Fischer","Kasparov","Carlsen","Nakamura","Caruana"],historicalSignificance:"The most popular response to 1.e4 at all levels. Has decided more world championship games than any other opening.",valueBonus:12},{eco:"B21",name:"Sicilian Defense",variation:"Grand Prix Attack",moves:"1.e4 c5 2.f4",category:"semi-open",description:"Aggressive anti-Sicilian",valueBonus:10},{eco:"B22",name:"Sicilian Defense",variation:"Alapin",moves:"1.e4 c5 2.c3",category:"semi-open",description:"Preparing d4 without Nc3",valueBonus:10},{eco:"B23",name:"Sicilian Defense",variation:"Closed",moves:"1.e4 c5 2.Nc3",category:"semi-open",description:"Delayed d4, flexible setup",valueBonus:10},{eco:"B27",name:"Sicilian Defense",variation:"Accelerated Dragon",moves:"1.e4 c5 2.Nf3 Nc6 3.d4 cxd4 4.Nxd4 g6",category:"semi-open",description:"Dragon without d6",valueBonus:10},{eco:"B30",name:"Sicilian Defense",variation:"Old Sicilian",moves:"1.e4 c5 2.Nf3 Nc6",category:"semi-open",description:"Classical development",valueBonus:10},{eco:"B33",name:"Sicilian Sveshnikov",moves:"1.e4 c5 2.Nf3 Nc6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 e5",category:"semi-open",description:"Dynamic with weak d5 but active pieces",valueBonus:12},{eco:"B52",name:"Sicilian Rossolimo",moves:"1.e4 c5 2.Nf3 Nc6 3.Bb5",category:"semi-open",description:"Positional anti-Sicilian",valueBonus:10},{eco:"B60",name:"Sicilian Richter-Rauzer",moves:"1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 Nc6 6.Bg5",category:"semi-open",description:"Sharp main line Sicilian",valueBonus:12},{eco:"B70",name:"Sicilian Dragon",moves:"1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 g6",category:"semi-open",description:"Fianchetto kingside, very sharp",valueBonus:12},{eco:"B78",name:"Sicilian Dragon",variation:"Yugoslav Attack",moves:"1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 g6 6.Be3 Bg7 7.f3",category:"semi-open",description:"White attacks on kingside",valueBonus:15},{eco:"B80",name:"Sicilian Scheveningen",moves:"1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 e6",category:"semi-open",description:"Flexible pawn structure",valueBonus:12},{eco:"B84",name:"Sicilian Scheveningen",variation:"Classical",moves:"1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 e6 6.Be2",category:"semi-open",description:"Main line Scheveningen",valueBonus:12},{eco:"B90",name:"Sicilian Najdorf",moves:"1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 a6",category:"semi-open",description:"The most popular Sicilian",valueBonus:12},{eco:"B96",name:"Sicilian Najdorf",variation:"Poisoned Pawn",moves:"1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 a6 6.Bg5 e6 7.f4 Qb6",category:"semi-open",description:"Famous sharp line",valueBonus:15},{eco:"B21",name:"Smith-Morra Gambit",moves:"1.e4 c5 2.d4 cxd4 3.c3",category:"gambit",description:"Gambit against Sicilian",marketingDescription:" The Smith-Morra Gambit - Sacrifice a pawn, gain a lead in development. The aggressive answer to the Sicilian that keeps opponents off-balance.",famousPlayers:["Ken Smith","Esserman"],historicalSignificance:"Popular among club players seeking to avoid heavy Sicilian theory while maintaining attacking chances.",valueBonus:12},{eco:"B02",name:"Alekhine's Defense",moves:"1.e4 Nf6",category:"semi-open",description:"Provoke e5, attack White center",marketingDescription:" Alekhine's Defense - Named after the 4th World Champion. Provoke White to over-extend, then systematically destroy their center.",famousPlayers:["Alekhine","Fischer","Nakamura"],historicalSignificance:"Alexander Alekhine used this hypermodern defense to confound opponents who expected classical play.",valueBonus:12},{eco:"B03",name:"Alekhine's Defense",variation:"Four Pawns Attack",moves:"1.e4 Nf6 2.e5 Nd5 3.d4 d6 4.c4 Nb6 5.f4",category:"semi-open",description:"Aggressive pawn advance",valueBonus:12},{eco:"B04",name:"Alekhine's Defense",variation:"Modern Variation",moves:"1.e4 Nf6 2.e5 Nd5 3.d4 d6 4.Nf3",category:"semi-open",description:"Main line development",valueBonus:10},{eco:"B05",name:"Alekhine's Defense",variation:"Modern Main Line",moves:"1.e4 Nf6 2.e5 Nd5 3.d4 d6 4.Nf3 Bg4",category:"semi-open",description:"Most popular continuation",valueBonus:10},{eco:"B06",name:"Modern Defense",moves:"1.e4 g6",category:"semi-open",description:"Flexible, delays d6",marketingDescription:" The Modern Defense - The chameleon opening. Flexible and provocative, inviting White to overextend before striking back.",famousPlayers:["Suttles","Speelman","Ljubojevic"],historicalSignificance:"A hypermodern approach that became popular in the 1960s-70s.",valueBonus:10},{eco:"B07",name:"Pirc Defense",moves:"1.e4 d6 2.d4 Nf6 3.Nc3 g6",category:"semi-open",description:"Hypermodern, lets White build center",marketingDescription:" The Pirc Defense - Named after Grandmaster Vasja Pirc. Allow White to build a center, then strike with lethal precision.",famousPlayers:["Pirc","Spassky","Smyslov"],historicalSignificance:"Named after Yugoslav GM Vasja Pirc. A hypermodern approach that influenced modern chess.",valueBonus:10},{eco:"B08",name:"Pirc Defense",variation:"Classical",moves:"1.e4 d6 2.d4 Nf6 3.Nc3 g6 4.Nf3",category:"semi-open",description:"Standard development",valueBonus:10},{eco:"B09",name:"Pirc Defense",variation:"Austrian Attack",moves:"1.e4 d6 2.d4 Nf6 3.Nc3 g6 4.f4",category:"semi-open",description:"Aggressive f4 push",valueBonus:12},{eco:"D00",name:"Queen's Pawn Game",moves:"1.d4 d5",category:"closed",description:"Classic response to 1.d4",valueBonus:5},{eco:"D06",name:"Queen's Gambit",moves:"1.d4 d5 2.c4",category:"closed",description:"Classical opening for center control",marketingDescription:" The Queen's Gambit - The opening that launched a cultural phenomenon. Elegant, strategic, and timeless. The crown jewel of classical chess.",famousPlayers:["Lasker","Capablanca","Botvinnik","Kasparov","Carlsen"],historicalSignificance:"One of the oldest recorded openings. Made globally famous by the Netflix series, but respected for centuries by grandmasters.",valueBonus:15},{eco:"D20",name:"Queen's Gambit Accepted",moves:"1.d4 d5 2.c4 dxc4",category:"closed",description:"Taking the gambit pawn",valueBonus:12},{eco:"D30",name:"Queen's Gambit Declined",moves:"1.d4 d5 2.c4 e6",category:"closed",description:"Solid defense, maintaining d5",valueBonus:12},{eco:"D31",name:"Queen's Gambit Declined",variation:"Albin Counter-Gambit",moves:"1.d4 d5 2.c4 e5",category:"gambit",description:"Aggressive counter",valueBonus:15},{eco:"D35",name:"Queen's Gambit Declined",variation:"Exchange",moves:"1.d4 d5 2.c4 e6 3.Nc3 Nf6 4.cxd5 exd5",category:"closed",description:"Symmetrical structure",valueBonus:10},{eco:"D37",name:"Queen's Gambit Declined",variation:"Classical",moves:"1.d4 d5 2.c4 e6 3.Nc3 Nf6 4.Nf3",category:"closed",description:"Standard development",valueBonus:12},{eco:"D40",name:"Queen's Gambit Declined",variation:"Semi-Tarrasch",moves:"1.d4 d5 2.c4 e6 3.Nc3 Nf6 4.Nf3 c5",category:"closed",description:"Counter in center with c5",valueBonus:12},{eco:"D32",name:"Tarrasch Defense",moves:"1.d4 d5 2.c4 e6 3.Nc3 c5",category:"closed",description:"Active isolated queen pawn",valueBonus:10},{eco:"D10",name:"Slav Defense",moves:"1.d4 d5 2.c4 c6",category:"closed",description:"Solid, supports d5 with c6",valueBonus:10},{eco:"D11",name:"Slav Defense",variation:"Main Line",moves:"1.d4 d5 2.c4 c6 3.Nf3",category:"closed",description:"Standard development",valueBonus:10},{eco:"D15",name:"Slav Defense",variation:"Three Knights",moves:"1.d4 d5 2.c4 c6 3.Nf3 Nf6 4.Nc3",category:"closed",description:"Developing knights",valueBonus:10},{eco:"D17",name:"Slav Defense",variation:"Czech",moves:"1.d4 d5 2.c4 c6 3.Nf3 Nf6 4.Nc3 dxc4 5.a4 Bf5",category:"closed",description:"Taking and developing bishop",valueBonus:10},{eco:"E60",name:"Indian Game",moves:"1.d4 Nf6",category:"semi-closed",description:"Hypermodern response to d4",marketingDescription:" The Indian Game - A family of hypermodern defenses from the subcontinent. Flexible, dynamic, and full of hidden counterplay.",famousPlayers:["Nimzowitsch","Fischer","Kasparov","Giri"],historicalSignificance:"The Indian systems revolutionized chess theory in the 20th century, proving that controlling the center doesn't require occupying it.",valueBonus:10},{eco:"E20",name:"Nimzo-Indian Defense",moves:"1.d4 Nf6 2.c4 e6 3.Nc3 Bb4",category:"semi-closed",description:"Flexible and solid, pins Nc3",marketingDescription:" The Nimzo-Indian Defense - Aron Nimzowitsch's masterpiece. Pin the knight, control the center indirectly. The elite's favorite response to 1.d4.",famousPlayers:["Nimzowitsch","Capablanca","Karpov","Kasparov","Carlsen"],historicalSignificance:"Created by Aron Nimzowitsch. Revolutionized chess by showing positional pressure can replace material.",valueBonus:12},{eco:"E32",name:"Nimzo-Indian Defense",variation:"Classical",moves:"1.d4 Nf6 2.c4 e6 3.Nc3 Bb4 4.Qc2",category:"semi-closed",description:"Preventing doubled pawns",valueBonus:12},{eco:"E41",name:"Nimzo-Indian Defense",variation:"Huebner",moves:"1.d4 Nf6 2.c4 e6 3.Nc3 Bb4 4.e3 c5",category:"semi-closed",description:"Modern treatment",valueBonus:12},{eco:"E53",name:"Nimzo-Indian Defense",variation:"Main Line",moves:"1.d4 Nf6 2.c4 e6 3.Nc3 Bb4 4.e3 O-O 5.Bd3 d5 6.Nf3",category:"semi-closed",description:"Standard setup",valueBonus:12},{eco:"E60",name:"King's Indian Defense",moves:"1.d4 Nf6 2.c4 g6",category:"semi-closed",description:"Hypermodern, fianchetto kingside",marketingDescription:" The King's Indian Defense - The warrior's choice. Concede the center, then launch a devastating kingside attack.",famousPlayers:["Bronstein","Fischer","Kasparov","Nakamura"],historicalSignificance:"Kasparov's primary weapon with Black. Created some of the most memorable games in chess history.",valueBonus:12},{eco:"E62",name:"King's Indian Defense",variation:"Fianchetto",moves:"1.d4 Nf6 2.c4 g6 3.g3",category:"semi-closed",description:"Quiet, positional approach",valueBonus:10},{eco:"E70",name:"King's Indian Defense",variation:"Classical",moves:"1.d4 Nf6 2.c4 g6 3.Nc3 Bg7 4.e4 d6 5.Nf3",category:"semi-closed",description:"Main line KID",valueBonus:12},{eco:"E76",name:"King's Indian Defense",variation:"Four Pawns Attack",moves:"1.d4 Nf6 2.c4 g6 3.Nc3 Bg7 4.e4 d6 5.f4",category:"semi-closed",description:"Aggressive pawn advance",valueBonus:12},{eco:"E80",name:"King's Indian Defense",variation:"Smisch",moves:"1.d4 Nf6 2.c4 g6 3.Nc3 Bg7 4.e4 d6 5.f3",category:"semi-closed",description:"Solid, preparing Be3",valueBonus:12},{eco:"E97",name:"King's Indian Defense",variation:"Mar del Plata",moves:"1.d4 Nf6 2.c4 g6 3.Nc3 Bg7 4.e4 d6 5.Nf3 O-O 6.Be2 e5 7.O-O Nc6",category:"semi-closed",description:"Famous attacking variation",valueBonus:15},{eco:"E12",name:"Queen's Indian Defense",moves:"1.d4 Nf6 2.c4 e6 3.Nf3 b6",category:"semi-closed",description:"Control e4 with Bb7",marketingDescription:" The Queen's Indian Defense - Control e4 with the fianchettoed bishop. Solid, flexible, and elegant.",famousPlayers:["Karpov","Anand","Kramnik"],historicalSignificance:"Developed as an alternative when 3.Nc3 is avoided. A positional masterpiece.",valueBonus:10},{eco:"E15",name:"Queen's Indian Defense",variation:"Main Line",moves:"1.d4 Nf6 2.c4 e6 3.Nf3 b6 4.g3",category:"semi-closed",description:"Fianchetto approach",valueBonus:10},{eco:"E17",name:"Queen's Indian Defense",variation:"Classical",moves:"1.d4 Nf6 2.c4 e6 3.Nf3 b6 4.g3 Bb7 5.Bg2 Be7",category:"semi-closed",description:"Traditional setup",valueBonus:10},{eco:"D70",name:"Grnfeld Defense",moves:"1.d4 Nf6 2.c4 g6 3.Nc3 d5",category:"semi-closed",description:"Hypermodern counter to d4",marketingDescription:" The Grnfeld Defense - Ernst Grnfeld's revolutionary concept. Give White the center, then blow it up.",famousPlayers:["Kasparov","Svidler","Giri"],historicalSignificance:"Introduced by Ernst Grnfeld in 1922. Kasparov's most trusted weapon.",valueBonus:12},{eco:"D85",name:"Grnfeld Defense",variation:"Exchange Variation",moves:"1.d4 Nf6 2.c4 g6 3.Nc3 d5 4.cxd5 Nxd5 5.e4",category:"semi-closed",description:"White builds big center",valueBonus:12},{eco:"D90",name:"Grnfeld Defense",variation:"Russian System",moves:"1.d4 Nf6 2.c4 g6 3.Nc3 d5 4.Nf3",category:"semi-closed",description:"Solid development",valueBonus:12},{eco:"E11",name:"Bogo-Indian Defense",moves:"1.d4 Nf6 2.c4 e6 3.Nf3 Bb4+",category:"semi-closed",description:"Check with bishop early",valueBonus:10},{eco:"A60",name:"Benoni Defense",moves:"1.d4 Nf6 2.c4 c5 3.d5",category:"semi-closed",description:"Asymmetrical pawn structure",valueBonus:10},{eco:"A65",name:"Benoni Defense",variation:"Main Line",moves:"1.d4 Nf6 2.c4 c5 3.d5 e6 4.Nc3 exd5 5.cxd5 d6",category:"semi-closed",description:"Classical Benoni",valueBonus:10},{eco:"A67",name:"Benko Gambit",moves:"1.d4 Nf6 2.c4 c5 3.d5 b5",category:"gambit",description:"Pawn sac for queenside pressure",valueBonus:12},{eco:"A57",name:"Benko Gambit",variation:"Accepted",moves:"1.d4 Nf6 2.c4 c5 3.d5 b5 4.cxb5 a6",category:"gambit",description:"Taking the gambit",valueBonus:12},{eco:"A80",name:"Dutch Defense",moves:"1.d4 f5",category:"semi-closed",description:"Aggressive response to d4",marketingDescription:" The Dutch Defense - From the land of tulips and windmills. An unbalancing choice that leads to unique middlegame positions.",famousPlayers:["Alekhine","Botvinnik","Short","Nakamura"],historicalSignificance:"Played by world champions seeking winning chances with Black.",valueBonus:10},{eco:"A84",name:"Dutch Defense",variation:"Classical",moves:"1.d4 f5 2.c4 Nf6 3.Nc3 e6",category:"semi-closed",description:"Standard development",valueBonus:10},{eco:"A87",name:"Dutch Defense",variation:"Leningrad",moves:"1.d4 f5 2.c4 Nf6 3.g3 g6",category:"semi-closed",description:"Dragon-like setup",valueBonus:10},{eco:"A90",name:"Dutch Defense",variation:"Stonewall",moves:"1.d4 f5 2.c4 e6 3.Nc3 Nf6 4.e3 d5",category:"semi-closed",description:"Solid pawn structure",valueBonus:10},{eco:"A04",name:"Rti Opening",moves:"1.Nf3",category:"flank",description:"Hypermodern, flexible setup",marketingDescription:" The Rti Opening - Richard Rti's hypermodern revolution. Control the center without occupying it.",famousPlayers:["Rti","Larsen","Kramnik"],historicalSignificance:"Named after Richard Rti, who beat Capablanca with it when the Cuban was undefeated.",valueBonus:10},{eco:"A05",name:"Rti Opening",variation:"King's Indian Attack",moves:"1.Nf3 Nf6 2.g3",category:"flank",description:"Universal attacking setup",valueBonus:10},{eco:"A09",name:"Rti Opening",variation:"Advance Variation",moves:"1.Nf3 d5 2.c4",category:"flank",description:"Challenging the center",valueBonus:10},{eco:"A10",name:"English Opening",moves:"1.c4",category:"flank",description:"Flexible flank opening",marketingDescription:" The English Opening - The flexible weapon of positional masters. Delays commitment, maximizes options, dominates from the flanks.",famousPlayers:["Botvinnik","Kramnik","Caruana"],historicalSignificance:"Named for the English master Howard Staunton. The backbone of 1.c4 players seeking long-term positional advantage.",valueBonus:10},{eco:"A16",name:"English Opening",variation:"Anglo-Indian",moves:"1.c4 Nf6 2.Nc3",category:"flank",description:"English with Indian setup",valueBonus:10},{eco:"A20",name:"English Opening",variation:"Reversed Sicilian",moves:"1.c4 e5",category:"flank",description:"Sicilian with colors reversed",valueBonus:10},{eco:"A30",name:"English Opening",variation:"Symmetrical",moves:"1.c4 c5",category:"flank",description:"Both sides play c-pawn",valueBonus:10},{eco:"A36",name:"English Opening",variation:"Symmetrical Four Knights",moves:"1.c4 c5 2.Nc3 Nc6 3.g3 g6 4.Bg2 Bg7 5.Nf3 Nf6",category:"flank",description:"Symmetrical with full development",valueBonus:10},{eco:"A02",name:"Bird's Opening",moves:"1.f4",category:"flank",description:"Control e5 with f-pawn",marketingDescription:" Bird's Opening - Named after Henry Bird. An unusual but dangerous weapon that leads to unique positions.",famousPlayers:["Bird","Larsen","Nakamura"],historicalSignificance:"Named after Henry Bird, 19th century English master. A surprise weapon at any level.",valueBonus:10},{eco:"A03",name:"Bird's Opening",variation:"Dutch Variation",moves:"1.f4 d5",category:"flank",description:"Reversed Dutch setup",valueBonus:10},{eco:"A02",name:"From Gambit",moves:"1.f4 e5",category:"gambit",description:"Counter to Bird's Opening",valueBonus:12},{eco:"D00",name:"London System",moves:"1.d4 d5 2.Bf4",category:"closed",description:"Solid, systematic setup",marketingDescription:" The London System - Named after the 1922 London tournament. Simple to learn, hard to beat. The workhorse of club chess.",famousPlayers:["Kamsky","Carlsen","Jobava"],historicalSignificance:"Experienced a renaissance in modern chess due to its solid, low-theory nature.",valueBonus:10},{eco:"D00",name:"London System",variation:"Main Line",moves:"1.d4 d5 2.Bf4 Nf6 3.e3",category:"closed",description:"Pyramidal pawn structure",valueBonus:10},{eco:"A45",name:"Trompowsky Attack",moves:"1.d4 Nf6 2.Bg5",category:"closed",description:"Aggressive anti-Indian",valueBonus:10},{eco:"A46",name:"Torre Attack",moves:"1.d4 Nf6 2.Nf3 e6 3.Bg5",category:"closed",description:"Pin knight, solid development",valueBonus:10},{eco:"D03",name:"Torre Attack",variation:"Classical",moves:"1.d4 d5 2.Nf3 Nf6 3.Bg5",category:"closed",description:"Against d5",valueBonus:10},{eco:"D01",name:"Veresov Attack",moves:"1.d4 d5 2.Nc3 Nf6 3.Bg5",category:"closed",description:"Early Nc3 and Bg5",valueBonus:10},{eco:"D00",name:"Blackmar-Diemer Gambit",moves:"1.d4 d5 2.e4 dxe4 3.Nc3 Nf6 4.f3",category:"gambit",description:"Aggressive gambit for development",valueBonus:15},{eco:"E01",name:"Catalan Opening",moves:"1.d4 Nf6 2.c4 e6 3.g3",category:"closed",description:"Fianchetto bishop, pressure on d5",valueBonus:10},{eco:"E04",name:"Catalan Opening",variation:"Open",moves:"1.d4 Nf6 2.c4 e6 3.g3 d5 4.Bg2 dxc4",category:"closed",description:"Black takes on c4",valueBonus:10},{eco:"E06",name:"Catalan Opening",variation:"Closed",moves:"1.d4 Nf6 2.c4 e6 3.g3 d5 4.Bg2 Be7",category:"closed",description:"Black keeps tension",valueBonus:10},{eco:"A00",name:"Hungarian Opening",moves:"1.g3",category:"flank",description:"Flexible, kingside fianchetto",valueBonus:8},{eco:"A01",name:"Larsen's Opening",moves:"1.b3",category:"flank",description:"Queenside fianchetto",valueBonus:8},{eco:"A00",name:"Grob Attack",moves:"1.g4",category:"irregular",description:"Eccentric opening",marketingDescription:" The Grob Attack - The most audacious first move in chess. For those who dare to be different and embrace chaos from move one.",famousPlayers:["Henri Grob","Basman"],historicalSignificance:"Named after Swiss master Henri Grob. A psychological weapon that signals immediate aggression.",valueBonus:15},{eco:"A00",name:"Bongcloud Attack",moves:"1.e4 e5 2.Ke2",category:"irregular",description:"The ultimate troll opening",marketingDescription:" The Bongcloud Attack - Made famous by Hikaru Nakamura and Magnus Carlsen playing it in official games! Pure chaos.",famousPlayers:["Nakamura","Carlsen"],historicalSignificance:"Became a meme, then was played by world champions in titled events. Chess will never be the same.",valueBonus:20},{eco:"A00",name:"Cow Opening",moves:"1.e4 e5 2.f4 exf4 3.d4",category:"gambit",description:"Moo! A rare gambit",marketingDescription:" The Cow Opening - An udder-ly unexpected opening! Sacrifice material for fun and confusion.",famousPlayers:[],historicalSignificance:"A novelty opening that proves chess can still surprise.",valueBonus:18},{eco:"A40",name:"Owen Defense",moves:"1.e4 b6",category:"irregular",description:"Fianchetto queenside early",valueBonus:10},{eco:"A40",name:"St. George Defense",moves:"1.e4 a6",category:"irregular",description:"Unusual but playable",valueBonus:10},{eco:"A00",name:"Ware Opening",moves:"1.a4",category:"irregular",description:"Unusual first move",valueBonus:8},{eco:"A00",name:"Polish Opening",moves:"1.b4",category:"irregular",description:"The Sokolsky, flank attack",valueBonus:10}];function qQ(e){return e.replace(/\[[^\]]*\]/g,"").trim().replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\$\d+/g,"").replace(/1-0|0-1|1\/2-1\/2|\*/g,"").split(/\s+/).filter(e=>e&&!e.match(/^\d+\.+$/)&&"..."!==e).map(e=>e.replace(/[+#!?]+$/,""))}function VQ(e){return e.replace(/[+#!?x]/g,"").replace(/=.+$/,"").toLowerCase().trim()}function WQ(e){return QQ(qQ(e))}function QQ(e){const t=new lF,n=[];for(const s of e.slice(0,25))try{t.move(s),n.push(s)}catch{break}if(0===n.length)return;let r,a=0;for(const s of zQ){const e=qQ(s.moves);let t=0;for(let r=0;r<e.length&&r<n.length;r++){if(VQ(e[r])!==VQ(n[r]))break;t++}if(t>=e.length&&t>0){const e=t>a,n=t===a&&s.variation&&(!r||!r.variation);(e||n)&&(r=s,a=t)}}if(!r)return;const i=r.variation?`${r.name}: ${r.variation}`:r.name;return{eco:r.eco,name:r.name,variation:r.variation,fullName:i,moves:r.moves,moveCount:qQ(r.moves).length,category:r.category,description:r.description,marketingDescription:r.marketingDescription,famousPlayers:r.famousPlayers,historicalSignificance:r.historicalSignificance,valueBonus:r.valueBonus}}function UQ(){return[...zQ]}const KQ=[{name:"King's Gambit",moves:"1.e4 e5 2.f4",sacrificedMaterial:"f-pawn",compensation:"Open f-file, rapid development",frequency:"common"},{name:"Evans Gambit",moves:"1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4",sacrificedMaterial:"b-pawn",compensation:"Tempo, open lines, center control",frequency:"common"},{name:"Danish Gambit",moves:"1.e4 e5 2.d4 exd4 3.c3",sacrificedMaterial:"d and c pawns",compensation:"Massive lead in development",frequency:"rare"},{name:"Smith-Morra Gambit",moves:"1.e4 c5 2.d4 cxd4 3.c3",sacrificedMaterial:"c-pawn",compensation:"Development and open lines",frequency:"common"},{name:"Benko Gambit",moves:"1.d4 Nf6 2.c4 c5 3.d5 b5",sacrificedMaterial:"b-pawn",compensation:"Queenside pressure, a and b files",frequency:"common"},{name:"Marshall Attack",moves:"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.O-O Be7 6.Re1 b5 7.Bb3 O-O 8.c3 d5",sacrificedMaterial:"e-pawn",compensation:"Attack on white king",frequency:"legendary"},{name:"Muzio Gambit",moves:"1.e4 e5 2.f4 exf4 3.Nf3 g5 4.Bc4 g4 5.O-O",sacrificedMaterial:"Knight",compensation:"Massive attack, development lead",frequency:"rare"},{name:"Latvian Gambit",moves:"1.e4 e5 2.Nf3 f5",sacrificedMaterial:"f-pawn weakens king",compensation:"Counterattack chances",frequency:"rare"},{name:"Englund Gambit",moves:"1.d4 e5",sacrificedMaterial:"e-pawn",compensation:"Tricky for White",frequency:"rare"},{name:"Budapest Gambit",moves:"1.d4 Nf6 2.c4 e5",sacrificedMaterial:"e-pawn",compensation:"Active pieces",frequency:"rare"},{name:"Albin Counter-Gambit",moves:"1.d4 d5 2.c4 e5",sacrificedMaterial:"e-pawn",compensation:"Central initiative",frequency:"rare"},{name:"Queen's Gambit",moves:"1.d4 d5 2.c4",sacrificedMaterial:"c-pawn (temporarily)",compensation:"Center control",frequency:"common"},{name:"Scotch Gambit",moves:"1.e4 e5 2.Nf3 Nc6 3.d4 exd4 4.Bc4",sacrificedMaterial:"d-pawn",compensation:"Development, attacking f7",frequency:"common"},{name:"Wing Gambit",moves:"1.e4 c5 2.b4",sacrificedMaterial:"b-pawn",compensation:"Open b-file, queenside play",frequency:"rare"},{name:"Blackmar-Diemer Gambit",moves:"1.d4 d5 2.e4 dxe4 3.Nc3 Nf6 4.f3",sacrificedMaterial:"e-pawn",compensation:"Development and attack",frequency:"rare"}];function HQ(e){return e.replace(/\[[^\]]*\]/g,"").trim().replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\$\d+/g,"").replace(/1-0|0-1|1\/2-1\/2|\*/g,"").split(/\s+/).filter(e=>e&&!e.match(/^\d+\.+$/)&&"..."!==e).map(e=>e.replace(/[+#!?]+$/,""))}function GQ(e){try{const t=QQ(e);if(!t)return;return{eco:t.eco,name:t.fullName,moves:t.moves,description:t.description,category:"gambit"===t.category?"open":t.category}}catch(APe){return}}function YQ(e){const t=e.slice(0,10).join(" ").toLowerCase();for(const n of KQ){const e=HQ(n.moves).join(" ").toLowerCase();if(t.startsWith(e)||e.startsWith(t))return n}}function ZQ(e){const t=[],n=new lF;try{n.loadPgn(e);n.history({verbose:!0}).forEach((e,n)=>{const r=n+1;if(e.flags.includes("e")&&t.push({type:"en_passant",moveNumber:r,notation:e.san,description:`En passant capture: ${e.san} - a rare pawn capture where the capturing pawn moves to the square the opponent's pawn passed through`}),e.flags.includes("k")&&t.push({type:"castle_kingside",moveNumber:r,notation:e.san,description:"Kingside castling (O-O) - King moves two squares toward h-file, rook jumps to the other side"}),e.flags.includes("q")&&t.push({type:"castle_queenside",moveNumber:r,notation:e.san,description:"Queenside castling (O-O-O) - King moves two squares toward a-file, rook jumps to the other side"}),e.promotion){const n={q:"Queen",r:"Rook",b:"Bishop",n:"Knight"},a="q"!==e.promotion;t.push({type:a?"underpromotion":"promotion",moveNumber:r,notation:e.san,promotedTo:e.promotion,description:a?`Underpromotion to ${n[e.promotion]}: ${e.san} - a tactical choice, often to avoid stalemate or deliver checkmate`:`Pawn promotes to ${n[e.promotion]}: ${e.san} - the most common promotion`})}})}catch(APe){}return t}function XQ(e){const t=[],n=new lF;try{n.loadPgn(e);const r=n.history({verbose:!0});n.reset(),r.forEach((e,r)=>{const a=r+1;n.move(e.san),e.san.includes("+")&&!e.san.includes("#")&&t.push({type:"check",moveNumber:a,notation:e.san,attacker:{piece:e.piece,square:e.to},targets:[{piece:"k",square:JQ(n,"w"===e.color?"b":"w")}],description:`${eU(e.piece)} delivers check from ${e.to}`,value:0}),e.san.includes("#")&&t.push({type:"checkmate",moveNumber:a,notation:e.san,attacker:{piece:e.piece,square:e.to},targets:[{piece:"k",square:JQ(n,"w"===e.color?"b":"w")}],description:`Checkmate! ${eU(e.piece)} delivers the final blow from ${e.to}`,value:100});const i=function(e,t,n){const r=[],a=t.piece,i=t.to,s=t.color,o=function(e,t){const n=[],r="abcdefgh",a="12345678";for(const i of r)for(const r of a){const a=i+r;if(a!==t){e.moves({square:t,verbose:!0}).some(e=>e.to===a)&&n.push(a)}}return n}(e,i),l=[],c={p:1,n:3,b:3,r:5,q:9,k:100};for(const u of o){const t=e.get(u);t&&t.color!==s&&(c[t.type]>=3||"k"===t.type)&&l.push({piece:t.type,square:u})}if(l.length>=2){const e=l.reduce((e,t)=>e+c[t.piece],0);r.push({type:"fork",moveNumber:n,notation:t.san,attacker:{piece:a,square:i},targets:l,description:`${eU(a)} fork attacks ${l.map(e=>eU(e.piece)).join(" and ")}`,value:e})}return r}(n,e,a);t.push(...i);const s=function(e,t,n){const r=[],a=[],i=t.piece,s=t.to,o=t.color,l="w"===o?"b":"w";if(!["b","r","q"].includes(i))return[];const c={p:1,n:3,b:3,r:5,q:9,k:100};JQ(e,l);const u=[[-1,-1],[-1,1],[1,-1],[1,1]],d=[[0,1],[0,-1],[1,0],[-1,0]],h=[...u,...d],p="b"===i?u:"r"===i?d:h,m=s.charCodeAt(0)-97,f=parseInt(s[1])-1;for(const[g,y]of p){const u=[];let d=m+g,h=f+y;for(;d>=0&&d<=7&&h>=0&&h<=7;){const t=String.fromCharCode(97+d)+(h+1),n=e.get(t);if(n){if(u.push({piece:n.type,square:t,color:n.color,value:c[n.type]}),n.color===o)break;if(2===u.length)break}d+=g,h+=y}const p=u.filter(e=>e.color===l);if(2===p.length){const e=p[0],o=p[1];(e.value<o.value||"k"===o.piece)&&r.push({type:"pin",moveNumber:n,notation:t.san,attacker:{piece:i,square:s},targets:[{piece:e.piece,square:e.square},{piece:o.piece,square:o.square}],description:`${eU(i)} pins ${eU(e.piece)} to ${"k"===o.piece?"the King":eU(o.piece)}`,value:e.value+("k"===o.piece?10:o.value)}),e.value>o.value&&"k"!==e.piece&&a.push({type:"skewer",moveNumber:n,notation:t.san,attacker:{piece:i,square:s},targets:[{piece:e.piece,square:e.square},{piece:o.piece,square:o.square}],description:`${eU(i)} skewers ${eU(e.piece)}, exposing ${eU(o.piece)}`,value:e.value+o.value}),o.piece}}return[...r,...a]}(n,e,a);t.push(...s)})}catch(APe){}return t}function JQ(e,t){for(const n of"abcdefgh")for(const r of"12345678"){const a=n+r,i=e.get(a);if(i&&"k"===i.type&&i.color===t)return a}return"e1"}function eU(e){return{p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[e]||e.toUpperCase()}function tU(e,t){const n=[],r=Math.min(Math.floor(.25*e),30),a=Math.max(Math.floor(.7*e),60);return n.push({name:"opening",startMove:1,endMove:r,description:"Development phase - pieces are developed, castling, center control",keyEvents:nU(t,1,r)}),r<a&&n.push({name:"middlegame",startMove:r+1,endMove:a-1,description:"Main battle - tactical combinations, attacks, strategic maneuvering",keyEvents:nU(t,r+1,a-1)}),a<=e&&n.push({name:"endgame",startMove:a,endMove:e,description:"Endgame phase - fewer pieces, king becomes active, pawn promotion key",keyEvents:nU(t,a,e)}),n}function nU(e,t,n){const r=[],a=e.slice(t-1,n);for(let i=0;i<a.length;i++){const e=a[i],n=t+i;e.includes("#")?r.push(`Move ${n}: Checkmate! (${e})`):e.includes("+")?r.push(`Move ${n}: Check (${e})`):"O-O"===e?r.push(`Move ${n}: Kingside castle`):"O-O-O"===e?r.push(`Move ${n}: Queenside castle`):e.includes("=")?r.push(`Move ${n}: Pawn promotion (${e})`):e.includes("x")&&e.toLowerCase().includes("q")&&r.push(`Move ${n}: Queen capture! (${e})`)}return r.slice(0,5)}function rU(e){try{const t=HQ(e),n=t.length;if(0===n)return null;let r=0,a=0;for(const e of t)e.includes("x")&&r++,(e.includes("+")||e.includes("#"))&&a++;let i=[],s={totalMoves:0,brilliantCount:0,greatCount:0,bestCount:0,goodCount:0,bookCount:0,inaccuracyCount:0,mistakeCount:0,blunderCount:0,checkCount:0,checkmateCount:0,captureCount:0,castleCount:0,promotionCount:0,sacrificeCount:0,accuracy:0,whiteAccuracy:0,blackAccuracy:0,whiteMoves:[],blackMoves:[]};try{i=IQ(e),s=$Q(i)}catch(APe){}let o="simple";n>40&&(o="moderate"),n>60&&r>10&&(o="complex"),n>80&&a>5&&(o="masterpiece"),s.brilliantCount>=2&&(o="masterpiece");return{opening:GQ(t),gambit:YQ(t),tactics:XQ(e),specialMoves:ZQ(e),phases:tU(n,t),moveQuality:s,summary:{totalMoves:n,captureCount:r,checkCount:a,brilliantCount:s.brilliantCount,blunderCount:s.blunderCount,accuracy:s.accuracy,materialBalance:0,longestForcingSequence:0,complexity:o}}}catch(APe){return null}}function aU(e,t){const n=[],r={totalMoves:t.length,captureCount:0,checkCount:0,checkmateCount:0,castleCount:0,brilliantCount:0,greatCount:0,blunderCount:0,mistakeCount:0,inaccuracyCount:0,forkCount:0,pinCount:0,sacrificeCount:0,promotionCount:0,enPassantCount:0,accuracy:0};let a=[];try{a=IQ(e)}catch{}let i=null;try{i=rU(e)}catch{}if(t.forEach((e,t)=>{var i;const s=t+1,o=t%2==0?"white":"black",l=a[t],c=null==l?void 0:l.quality;if("brilliant"===c?(n.push({moveNumber:s,type:"brilliant",move:e,player:o,quality:c,description:"An exceptional move that dramatically improves the position, often involving a brilliant sacrifice."}),r.brilliantCount++):"great"===c?(n.push({moveNumber:s,type:"great",move:e,player:o,quality:c,description:"A strong move that significantly strengthens the position."}),r.greatCount++):"blunder"===c?(n.push({moveNumber:s,type:"blunder",move:e,player:o,quality:c,description:"A severe error that may lose the game."}),r.blunderCount++):"mistake"===c?(n.push({moveNumber:s,type:"mistake",move:e,player:o,quality:c,description:"A clear error losing material or significant advantage."}),r.mistakeCount++):"inaccuracy"===c&&(n.push({moveNumber:s,type:"inaccuracy",move:e,player:o,quality:c,description:"A slightly imprecise move that gives up some advantage."}),r.inaccuracyCount++),e.includes("#")?(n.push({moveNumber:s,type:"checkmate",move:e,player:o,description:("white"===o?"White":"Black")+" delivers checkmate! The game ends in victory."}),r.checkmateCount++):e.includes("+")&&(n.push({moveNumber:s,type:"check",move:e,player:o,description:("white"===o?"White":"Black")+" puts the king in check."}),r.checkCount++),e.includes("x")&&!c){const t=function(e){if(e.includes("x"))return null;return null}(e);n.push({moveNumber:s,type:"capture",move:e,player:o,description:t?`${"white"===o?"White":"Black"} captures the ${t}.`:"A piece is captured, shifting the material balance."}),r.captureCount++}if(e.includes("O-O")||e.includes("0-0")){const t="O-O"===e||"0-0"===e;n.push({moveNumber:s,type:"castling",move:e,player:o,description:`${"white"===o?"White":"Black"} castles ${t?"kingside":"queenside"}, bringing the king to safety.`}),r.castleCount++}if(e.includes("=")){const t=null==(i=e.match(/=([QRBN])/))?void 0:i[1],a=t&&"Q"!==t;n.push({moveNumber:s,type:a?"underpromotion":"promotion",move:e,player:o,description:a?`Strategic underpromotion to ${sU(t)}!`:`Pawn promotes to ${sU(t||"Q")}!`}),r.promotionCount++}}),i){for(const e of i.tactics){const t=n.find(t=>t.moveNumber===e.moveNumber);"fork"!==e.type&&"pin"!==e.type&&"skewer"!==e.type&&"discovery"!==e.type&&"sacrifice"!==e.type||(t&&"capture"!==t.type?t&&(t.tactic=e):(n.push({moveNumber:e.moveNumber,type:e.type,move:e.notation,player:e.moveNumber%2==1?"white":"black",tactic:e,description:e.description}),"fork"===e.type&&r.forkCount++,"pin"===e.type&&r.pinCount++,"sacrifice"===e.type&&r.sacrificeCount++))}for(const e of i.specialMoves)if("en_passant"===e.type){const t=n.findIndex(t=>t.moveNumber===e.moveNumber&&"capture"===t.type);t>=0&&(n[t].type="en_passant",n[t].description="En passant capture! A special pawn capture."),r.enPassantCount++}}if(a.length>0){const e=a.filter(e=>["brilliant","great","best","good","book"].includes(e.quality)).length;r.accuracy=Math.round(e/a.length*100)}const s=function(e){const t=new Map;for(const a of e){const e=t.get(a.moveNumber)||[];e.push(a),t.set(a.moveNumber,e)}const n=[],r={checkmate:100,brilliant:95,sacrifice:90,fork:85,pin:80,skewer:78,discovery:75,blunder:70,great:65,mistake:60,promotion:55,underpromotion:54,en_passant:50,check:45,inaccuracy:40,castling:35,capture:30};for(const[,a]of t){const e=a.sort((e,t)=>(r[t.type]||0)-(r[e.type]||0));n.push(...e.slice(0,2))}return n.sort((e,t)=>e.moveNumber-t.moveNumber)}(n.sort((e,t)=>e.moveNumber-t.moveNumber));return{moments:s,phases:(null==i?void 0:i.phases)||iU(t.length),tactics:(null==i?void 0:i.tactics)||[],specialMoves:(null==i?void 0:i.specialMoves)||[],classifiedMoves:a,summary:r}}function iU(e){const t=Math.min(Math.floor(.2*e),30),n=Math.max(Math.floor(.7*e),t+1);return[{name:"opening",startMove:1,endMove:t,description:"Development and central control",keyEvents:["Piece development","King safety","Center control"]},{name:"middlegame",startMove:t+1,endMove:n-1,description:"Tactical battles and strategic maneuvering",keyEvents:["Attack building","Piece coordination","Tactical opportunities"]},{name:"endgame",startMove:n,endMove:e,description:"King activation and pawn promotion",keyEvents:["King activation","Pawn advancement","Technique"]}]}function sU(e){return{Q:"Queen",R:"Rook",B:"Bishop",N:"Knight",K:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",k:"King",p:"Pawn"}[e]||e}const oU={aggressive:{primary:"#ef4444",secondary:"#f97316"},defensive:{primary:"#3b82f6",secondary:"#6366f1"},balanced:{primary:"#10b981",secondary:"#14b8a6"},chaotic:{primary:"#f59e0b",secondary:"#eab308"},methodical:{primary:"#8b5cf6",secondary:"#a855f7"},explosive:{primary:"#ec4899",secondary:"#f43f5e"},default:{primary:"#6b7280",secondary:"#9ca3af"}};function lU(e){return ct.useMemo(()=>{if(!e)return{dominantColor:oU.default.primary,secondaryColor:oU.default.secondary,intensity:.5,flowDirection:"stable",archetype:"unknown",quadrantWeights:{q1:.25,q2:.25,q3:.25,q4:.25},momentum:0};const t=e.archetype.toLowerCase(),n=oU[t]||oU.default;return{dominantColor:n.primary,secondaryColor:n.secondary,intensity:e.intensity,flowDirection:e.flowDirection,archetype:e.archetype,quadrantWeights:e.quadrantProfile,momentum:e.temporalFlow.momentum}},[e])}function cU(e,t){const n=20*Math.abs(t);switch(e){case"forward":return{x:[0,n,0],y:[0,.5*-n,0],duration:3+2*Math.random()};case"backward":return{x:[0,-n,0],y:[0,.5*n,0],duration:4+2*Math.random()};case"lateral":return{x:[0,n,-n,0],y:[0,0,0,0],duration:5+2*Math.random()};case"chaotic":return{x:[0,n*Math.random(),-n*Math.random(),0],y:[0,n*Math.random(),-n*Math.random(),0],duration:2+3*Math.random()};default:return{x:[0,0,0],y:[0,-5,0],duration:4}}}const uU={capture:{icon:bg,color:"text-orange-400",bgColor:"bg-orange-500",label:"Capture",description:"A piece was captured, shifting the material balance.",category:"event"},check:{icon:Ag,color:"text-yellow-400",bgColor:"bg-yellow-500",label:"Check",description:"The king is under attack and must escape.",category:"event"},checkmate:{icon:Zm,color:"text-red-400",bgColor:"bg-red-500",label:"Checkmate",description:"Game over! The king cannot escape.",category:"event"},castling:{icon:Tm,color:"text-blue-400",bgColor:"bg-blue-500",label:"Castle",description:"King moves to safety while activating the rook.",category:"special"},brilliant:{icon:gg,color:"text-cyan-400",bgColor:"bg-cyan-500",label:"Brilliant",description:"An exceptional move, often a sacrifice that dramatically improves position.",category:"quality"},great:{icon:Ng,color:"text-green-400",bgColor:"bg-green-500",label:"Great Move",description:"A strong move that significantly improves the position.",category:"quality"},blunder:{icon:jg,color:"text-red-400",bgColor:"bg-red-600",label:"Blunder",description:"A severe error that often loses the game.",category:"quality"},mistake:{icon:jg,color:"text-orange-400",bgColor:"bg-orange-600",label:"Mistake",description:"A clear error that loses material or advantage.",category:"quality"},inaccuracy:{icon:bg,color:"text-yellow-400",bgColor:"bg-yellow-600",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",category:"quality"},fork:{icon:Ym,color:"text-purple-400",bgColor:"bg-purple-500",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",category:"tactical"},pin:{icon:cg,color:"text-indigo-400",bgColor:"bg-indigo-500",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",category:"tactical"},skewer:{icon:jm,color:"text-pink-400",bgColor:"bg-pink-500",label:"Skewer",description:"Attacking a piece through another, forcing it to move and expose the one behind.",category:"tactical"},discovery:{icon:Ag,color:"text-amber-400",bgColor:"bg-amber-500",label:"Discovery",description:"Moving one piece to reveal an attack from another.",category:"tactical"},sacrifice:{icon:yg,color:"text-cyan-400",bgColor:"bg-cyan-600",label:"Sacrifice",description:"Intentionally giving up material for positional or tactical advantage.",category:"tactical"},en_passant:{icon:xg,color:"text-emerald-400",bgColor:"bg-emerald-500",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square pawn move.",category:"special"},promotion:{icon:Zm,color:"text-gold-400",bgColor:"bg-amber-500",label:"Promotion",description:"Pawn reaches the eighth rank and transforms into a more powerful piece.",category:"special"},underpromotion:{icon:_g,color:"text-violet-400",bgColor:"bg-violet-500",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",category:"special"}},dU={all:{label:"All Moves",icon:Pm,color:"text-muted-foreground",bgColor:"bg-muted hover:bg-muted/80",description:"View the entire game from start to finish."},opening:{label:"Opening",icon:cf,color:"text-emerald-400",bgColor:"bg-emerald-500/20 hover:bg-emerald-500/30 border-emerald-500/30",description:"The first phase where pieces are developed and kings castled. Focus on controlling the center and piece activity."},middlegame:{label:"Middlegame",icon:vg,color:"text-amber-400",bgColor:"bg-amber-500/20 hover:bg-amber-500/30 border-amber-500/30",description:"The heart of the battle. Tactics, attacks, and strategic maneuvering dominate this phase."},endgame:{label:"Endgame",icon:Zm,color:"text-rose-400",bgColor:"bg-rose-500/20 hover:bg-rose-500/30 border-rose-500/30",description:"With fewer pieces, king activity and pawn promotion become decisive factors."}},hU=({moment:e,position:t,orientation:n,onClick:r,size:a="md",signature:i=null})=>{const s=lU(i),o=uU[e.type],l=o.icon,c=ct.useMemo(()=>!i||s.intensity<.3?"":`shadow-[0_0_${Math.round(8*s.intensity)}px_${s.dominantColor}40]`,[i,s.intensity,s.dominantColor]),u=e.moveNumber-1,d=Math.floor(u/2)+1,h=u%2==0,p="horizontal"===n?{left:`${t}%`}:{top:`${t}%`};return xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx("button",{onClick:r,className:`absolute ${"horizontal"===n?"-translate-x-1/2 -top-1":"-translate-y-1/2 left-0"} \n            ${{sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${o.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50 ${c}`,style:p,children:xt.jsx(l,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),xt.jsxs(Zb,{side:"horizontal"===n?"top":"right",className:"max-w-[280px] p-3 space-y-2",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:`p-1.5 rounded ${o.bgColor}`,children:xt.jsx(l,{className:"w-3.5 h-3.5 text-white"})}),xt.jsxs("div",{children:[xt.jsx("div",{className:"font-semibold text-sm",children:o.label}),xt.jsxs("div",{className:"text-xs text-muted-foreground",children:[d,".",h?"":".."," ",e.move]})]}),xt.jsx(MD,{variant:"outline",className:"ml-auto text-[9px] "+("white"===e.player?"border-sky-500/50 text-sky-400":"border-rose-500/50 text-rose-400"),children:"white"===e.player?"White":"Black"})]}),xt.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||o.description}),e.tactic&&xt.jsxs("div",{className:"pt-2 border-t border-border/50",children:[xt.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1",children:"Tactical Details"}),xt.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[xt.jsx("div",{className:"text-muted-foreground",children:"Piece:"}),xt.jsxs("div",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),xt.jsx("div",{className:"text-muted-foreground",children:"Targets:"}),xt.jsx("div",{className:"font-mono",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),xt.jsx("div",{className:"text-muted-foreground",children:"Value:"}),xt.jsxs("div",{className:"text-primary font-medium",children:[e.tactic.value," centipawns"]})]})]}),e.quality&&xt.jsx("div",{className:"pt-2 border-t border-border/50",children:xt.jsx("div",{className:"flex items-center gap-2",children:xt.jsxs(MD,{style:{backgroundColor:DQ[e.quality].color},className:"text-white text-[10px]",children:[DQ[e.quality].symbol," ",DQ[e.quality].label]})})}),xt.jsx("div",{className:"text-[9px] text-muted-foreground/60 pt-1",children:"Click to jump to this move"})]})]})},pU=({phase:e,isActive:t,moveCount:n,onClick:r,phaseInfo:a,compact:i=!1})=>{const s=dU[e],o=s.icon;return xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:r,className:`flex items-center gap-1.5 ${i?"h-6 px-2":"h-7 px-3"} rounded-md text-xs font-medium\n            border transition-all duration-200\n            ${t?`${s.bgColor} ${s.color} border-current shadow-sm`:"border-transparent bg-muted/30 text-muted-foreground hover:bg-muted/50 hover:text-foreground"}`,children:[xt.jsx(o,{className:i?"w-3 h-3":"w-3.5 h-3.5"}),xt.jsx("span",{className:i?"text-[10px]":"",children:s.label}),xt.jsxs("span",{className:(i?"text-[8px]":"text-[10px]")+" opacity-70",children:["(",n,")"]})]})}),xt.jsxs(Zb,{side:"bottom",className:"max-w-[260px] p-3 space-y-2",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:`p-1.5 rounded ${t?s.bgColor:"bg-muted"}`,children:xt.jsx(o,{className:"w-3.5 h-3.5 "+(t?"text-white":"text-muted-foreground")})}),xt.jsx("div",{className:"font-semibold",children:s.label})]}),xt.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:s.description}),a&&a.keyEvents.length>0&&xt.jsxs("div",{className:"pt-2 border-t border-border/50",children:[xt.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1",children:"Key Events"}),xt.jsx("ul",{className:"text-xs space-y-0.5",children:a.keyEvents.slice(0,3).map((e,t)=>xt.jsxs("li",{className:"flex items-center gap-1.5",children:[xt.jsx("span",{className:"w-1 h-1 rounded-full bg-primary/60"}),e]},t))})]}),xt.jsxs("div",{className:"text-[9px] text-muted-foreground/60 pt-1",children:["Click to view only ",s.label.toLowerCase()," moves and update the board"]})]})]})},mU=({hybridPrediction:e,patternPrediction:t,totalMoves:n,currentMove:r,orientation:a="vertical",className:i})=>{const s=ut.useMemo(()=>{var r;const a=[];if((null==(r=null==e?void 0:e.trajectoryPrediction)?void 0:r.expectedMilestones)&&e.trajectoryPrediction.expectedMilestones.forEach((t,n)=>{a.push({move:t.approximateMoveNumber,type:t.description.toLowerCase().includes("critical")?"critical":"milestone",label:`Move ${t.approximateMoveNumber}`,description:t.description,confidence:e.confidence.overall,color:"text-amber-400",icon:bg})}),t&&t.lookaheadMoves>0){const e=n,r=n+t.lookaheadMoves;e>0&&a.push({move:e,type:"prediction",label:"Prediction Zone",description:`Pattern-based forecast for next ${t.lookaheadMoves} moves`,confidence:t.confidence,color:"text-purple-400",icon:Ag});const i=[Math.round(e+.33*t.lookaheadMoves),Math.round(e+.66*t.lookaheadMoves),r];i.forEach((e,n)=>{const r=n===i.length-1;a.push({move:e,type:r?"turning_point":"milestone",label:r?"Trajectory End":`Checkpoint ${n+1}`,description:r?`Predicted outcome: ${t.mostLikelyOutcome.replace("_"," ")}`:"Pattern trajectory checkpoint",confidence:t.confidence*(1-.1*n),color:r?"white_wins"===t.mostLikelyOutcome?"text-sky-400":"black_wins"===t.mostLikelyOutcome?"text-rose-400":"text-amber-400":"text-purple-400/70",icon:r?cf:cg})})}return a.sort((e,t)=>e.move-t.move)},[e,t,n]);if(0===s.length)return null;const o=e=>e/Math.max(n,t?n+t.lookaheadMoves:n)*100,l="vertical"===a;return xt.jsx(Hb,{children:xt.jsxs("div",{className:Cy("absolute pointer-events-none",l?"inset-y-0 right-0 w-8":"inset-x-0 top-0 h-8",i),children:[s.map((e,t)=>{const a=o(e.move),i=e.move<=r,s=e.move===r,c=e.move>n,u=e.icon;return xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx(gD.div,{initial:{opacity:0,scale:.5},animate:{opacity:c?.6:1,scale:s?1.2:1},className:Cy("absolute pointer-events-auto cursor-pointer transition-all",l?"right-1 -translate-y-1/2":"top-1 -translate-x-1/2"),style:l?{top:`${a}%`}:{left:`${a}%`},children:xt.jsx("div",{className:Cy("flex items-center justify-center rounded-full transition-all",s?"ring-2 ring-primary ring-offset-1 ring-offset-background":"",i&&!c?"opacity-100":"opacity-70",c?"border border-dashed border-current":"","critical"===e.type?"bg-rose-500/20":"turning_point"===e.type?"bg-amber-500/20":"prediction"===e.type?"bg-purple-500/20":"bg-card/80","w-5 h-5"),children:xt.jsx(u,{className:Cy("w-3 h-3",e.color)})})})}),xt.jsx(Zb,{side:l?"left":"bottom",className:"max-w-[200px]",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(u,{className:Cy("w-3 h-3",e.color)}),xt.jsx("span",{className:"font-medium text-xs",children:e.label}),c&&xt.jsx("span",{className:"text-[10px] text-muted-foreground bg-purple-500/20 px-1 rounded",children:"Predicted"})]}),e.description&&xt.jsx("p",{className:"text-[10px] text-muted-foreground",children:e.description}),xt.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-muted-foreground",children:[xt.jsx("span",{children:"Confidence:"}),xt.jsx("div",{className:"flex-1 h-1 bg-muted rounded-full overflow-hidden",children:xt.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${e.confidence}%`}})}),xt.jsxs("span",{children:[Math.round(e.confidence),"%"]})]})]})})]},`${e.move}-${e.type}-${t}`)}),t&&t.lookaheadMoves>0&&xt.jsx("div",{className:Cy("absolute bg-gradient-to-b from-purple-500/10 to-purple-500/5 border-l border-dashed border-purple-500/30",l?"inset-x-0 bottom-0":"inset-y-0 right-0"),style:l?{top:`${o(n)}%`}:{left:`${o(n)}%`}})]})})},fU=({totalMoves:e,moves:t=[],pgn:n,hybridPrediction:r,patternPrediction:a})=>{var i;const{currentMove:s,isPlaying:o,playbackSpeed:l,selectedPhase:c,phaseRanges:u,setCurrentMove:d,setMaxMoves:h,togglePlayback:p,reset:m,stepForward:f,stepBackward:g,setPlaybackSpeed:y,setSelectedPhase:v}=R$(),x=ct.useMemo(()=>{if(!n||0===t.length)return null;try{return aU(n,t)}catch{return null}},[n,t]);ct.useEffect(()=>{h(e)},[e,h]);const b=u[c],w=s===1/0?b.end:Math.min(s,b.end),k=w>=b.end,N=s<=b.start||0===s,j=ct.useMemo(()=>(null==x?void 0:x.moments.filter(e=>e.moveNumber>=b.start&&e.moveNumber<=b.end))||[],[x,b]),_=e=>{if("all"!==e&&x)return x.phases.find(t=>t.name===e)},S=ct.useMemo(()=>function(e){const t={capture:0,check:0,checkmate:0,castling:0,brilliant:0,great:0,blunder:0,mistake:0,inaccuracy:0,fork:0,pin:0,skewer:0,discovery:0,sacrifice:0,en_passant:0,promotion:0,underpromotion:0};for(const n of e)t[n.type]++;return t}(j),[j]),C=[{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250}],P=(null==(i=C.find(e=>e.value===l))?void 0:i.label)||"1x",E=0===s||s===1/0?null:s%2==1?"white":"black",R=Math.max(b.end-b.start,1);return xt.jsx(Hb,{children:xt.jsxs("div",{className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 h-full flex flex-col w-[120px] min-w-[120px]",children:[xt.jsxs("div",{className:"flex flex-col items-center gap-2 pb-3 border-b border-border/30",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),E&&xt.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===E?"bg-sky-400":"bg-rose-400")})]}),xt.jsx("div",{className:"text-xs font-medium text-center truncate w-full",children:(()=>{if(s===1/0||s>=b.end)return"all"===c?"All":dU[c].label;if(0===s||s===b.start)return"Start";const e=s-1;if(t[e]){return`${Math.floor(e/2)+1}.${e%2==0?"":".."} ${t[e]}`}return`${s}`})()}),x&&xt.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-muted/50 border border-border/30",children:[xt.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Accuracy"}),xt.jsxs("span",{className:"text-xs font-bold "+(x.summary.accuracy>=90?"text-green-400":x.summary.accuracy>=70?"text-yellow-400":"text-red-400"),children:[x.summary.accuracy,"%"]})]})]}),xt.jsx("div",{className:"flex flex-col gap-1 py-3 border-b border-border/30",children:["all","opening","middlegame","endgame"].map(e=>{const t=u[e],n=t.end-t.start;return xt.jsx(pU,{phase:e,isActive:c===e,moveCount:n,onClick:()=>{v(e),d("all"===e?1/0:t.start)},phaseInfo:_(e),compact:!0},e)})}),j.length>0&&xt.jsxs("div",{className:"py-2 border-b border-border/30",children:[xt.jsx("div",{className:"text-[9px] text-muted-foreground mb-1.5 text-center",children:"Key Moments"}),xt.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-1.5",children:[S.brilliant>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"brilliant"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.brilliant.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.brilliant.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.brilliant})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to first brilliant move"})]}),S.great>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"great"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.great.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.great.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.great})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to first great move"})]}),S.blunder>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"blunder"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.blunder.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.blunder.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.blunder})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to first blunder"})]}),S.fork>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"fork"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.fork.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.fork.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.fork})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to first fork"})]}),S.sacrifice>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"sacrifice"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.sacrifice.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.sacrifice.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.sacrifice})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to first sacrifice"})]}),S.checkmate>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"checkmate"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.checkmate.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.checkmate.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.checkmate})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to checkmate"})]}),S.check>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"check"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.check.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.check.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.check})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to first check"})]}),S.castling>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"castling"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.castling.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.castling.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.castling})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to first castle"})]}),S.promotion>0&&xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:()=>{const e=j.find(e=>"promotion"===e.type);e&&d(e.moveNumber)},className:`flex items-center gap-0.5 ${uU.promotion.color} hover:scale-110 transition-transform cursor-pointer`,children:[xt.jsx(uU.promotion.icon,{className:"w-2.5 h-2.5"}),xt.jsx("span",{className:"text-[9px]",children:S.promotion})]})}),xt.jsx(Zb,{side:"right",className:"text-xs",children:"Click to jump to first promotion"})]})]})]}),xt.jsx("div",{className:"flex-1 flex items-center justify-center py-4 min-h-[200px]",children:xt.jsxs("div",{className:"relative h-full flex items-center gap-2",children:[xt.jsx("div",{className:"relative h-full w-6",children:j.slice(0,25).map((e,t)=>{return xt.jsx(hU,{moment:e,position:(n=e.moveNumber,(n-b.start)/R*100),orientation:"vertical",onClick:()=>(e=>{d(e)})(e.moveNumber),size:"sm"},`${e.moveNumber}-${e.type}-${t}`);var n})}),xt.jsxs("div",{className:"relative h-full flex flex-col items-center",children:[xt.jsx("span",{className:"text-[8px] text-muted-foreground mb-1",children:"Start"}),xt.jsxs("div",{className:"relative h-full w-4",children:[xt.jsx(Bz,{value:[w],min:b.start,max:b.end,step:1,onValueChange:e=>{const t=e[0];t>=b.end?d(1/0):d(Math.max(t,b.start))},orientation:"vertical",className:"h-full"}),(r||a)&&xt.jsx(mU,{hybridPrediction:r,patternPrediction:a,totalMoves:e,currentMove:w,orientation:"vertical",className:"left-6"})]}),xt.jsx("span",{className:"text-[8px] text-muted-foreground mt-1",children:b.end})]})]})}),xt.jsxs("div",{className:"pt-3 border-t border-border/30 space-y-2",children:[xt.jsxs("div",{className:"flex items-center justify-center gap-1",children:[xt.jsx(vD,{variant:"ghost",size:"sm",onClick:g,disabled:N,className:"h-7 w-7 p-0",title:"Previous move",children:xt.jsx(pg,{className:"h-3 w-3"})}),xt.jsx(vD,{variant:o?"secondary":"default",size:"sm",onClick:p,className:"h-8 w-8 p-0 rounded-full",title:o?"Pause":"Play",children:o?xt.jsx(zf,{className:"h-4 w-4"}):xt.jsx(Uf,{className:"h-4 w-4 ml-0.5"})}),xt.jsx(vD,{variant:"ghost",size:"sm",onClick:f,disabled:k,className:"h-7 w-7 p-0",title:"Next move",children:xt.jsx(mg,{className:"h-3 w-3"})})]}),xt.jsxs("div",{className:"flex items-center justify-center gap-1",children:[xt.jsx(vD,{variant:"ghost",size:"sm",onClick:m,className:"h-6 w-6 p-0",title:"Reset",children:xt.jsx(Jf,{className:"h-3 w-3"})}),xt.jsxs(_Q,{children:[xt.jsx(SQ,{asChild:!0,children:xt.jsxs(vD,{variant:"ghost",size:"sm",className:"h-6 px-1.5 gap-0.5 text-[10px]",title:"Playback speed",children:[xt.jsx(pf,{className:"h-2.5 w-2.5"}),P]})}),xt.jsx(OQ,{align:"center",side:"top",children:C.map(e=>xt.jsx(TQ,{onClick:()=>y(e.value),className:l===e.value?"bg-accent":"",children:e.label},e.value))})]})]})]}),o&&xt.jsx("div",{className:"h-1 bg-muted rounded-full overflow-hidden mt-2",children:xt.jsx("div",{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500 transition-all duration-100",style:{width:(w-b.start)/R*100+"%"}})})]})})};const gU={commentary:gg,strategic:Em,recommendation:bg,comparison:Mm,mvpInsight:_g},yU={commentary:"Key Observation",strategic:"Strategic Analysis",recommendation:"Explore This",comparison:"Pattern Comparison",mvpInsight:"MVP Insight"},vU=({pieceActivity:e,gameContext:t,territoryData:n,compact:r=!1})=>{const[a,i]=ct.useState(null),[s,o]=ct.useState(!1),[l,c]=ct.useState(null),[u,d]=ct.useState("commentary"),h=ct.useMemo(()=>0===e.length?null:function(e,t,n){const r=e.filter(e=>"white"===e.color),a=e.filter(e=>"black"===e.color),i=r.reduce((e,t)=>e+t.count,0),s=a.reduce((e,t)=>e+t.count,0),o=i+s||1,l={q1:Math.min(1,i/50),q2:n?Math.min(1,n.whiteControl/32):.5,q3:Math.min(1,s/50),q4:n?Math.min(1,n.blackControl/32):.5},c=t.totalMoves/80,u={opening:c<.2?.8:.3,middle:c>=.2&&c<.6?.8:.4,ending:c>=.6?.8:.2,trend:i>1.2*s?"accelerating":s>1.2*i?"declining":"stable",momentum:(i-s)/o},d=Math.min(1,o/100),h={quadrantProfile:l,temporalFlow:u,intensity:d,fingerprint:`heatmap_${t.totalMoves}_${Math.round(100*d)}`,archetype:"unknown",dominantForce:i>1.1*s?"primary":s>1.1*i?"secondary":"balanced",flowDirection:u.momentum>.2?"forward":u.momentum<-.2?"backward":"lateral",criticalMoments:[]};return h.archetype=D$(h),h}(e,t,n),[e,t,n]);null==h||h.archetype;const p=async()=>{if(0!==e.length){o(!0),c(null);try{const{data:r,error:a}=await KC.functions.invoke("chess-heatmap-analysis",{body:{pieceActivity:e,gameContext:t,territoryData:n}});if(a)throw a;if(null==r?void 0:r.error)throw new Error(r.error);i(r.insights)}catch(BPe){const t=BPe instanceof Error?BPe.message:"Failed to generate insights";c(t),t.includes("Rate limit")&&Yy.error("AI rate limit reached. Try again in a moment.")}finally{o(!1)}}};return ct.useEffect(()=>{e.length>0&&!a&&!s&&p()},[e]),r?xt.jsxs("div",{className:"p-2 bg-background/50 rounded-lg border border-border/50",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(gg,{className:"w-3 h-3 text-amber-400"}),xt.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"AI Insights"}),s&&xt.jsx(Pf,{className:"w-3 h-3 animate-spin text-muted-foreground"})]}),a?xt.jsx("p",{className:"text-xs text-foreground/80 line-clamp-2",children:a.commentary}):l?xt.jsx("p",{className:"text-xs text-destructive",children:l}):xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Analyzing patterns..."})]}):xt.jsxs(gD.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-gradient-to-br from-amber-500/10 to-purple-500/10 rounded-lg border border-amber-500/20",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-md",children:xt.jsx(gg,{className:"w-4 h-4 text-amber-400"})}),xt.jsx("span",{className:"text-sm font-semibold text-foreground",children:"AI Chess Analysis"})]}),xt.jsx(vD,{variant:"ghost",size:"sm",onClick:p,disabled:s,className:"h-7 px-2",children:s?xt.jsx(Pf,{className:"w-3 h-3 animate-spin"}):xt.jsx(Xf,{className:"w-3 h-3"})})]}),xt.jsx("div",{className:"flex gap-1 mb-3 overflow-x-auto pb-1",children:Object.keys(gU).map(e=>{const t=gU[e];return xt.jsxs("button",{onClick:()=>d(e),className:"flex items-center gap-1 px-2 py-1 rounded text-xs whitespace-nowrap transition-colors "+(u===e?"bg-amber-500/20 text-amber-300":"bg-background/30 text-muted-foreground hover:text-foreground"),children:[xt.jsx(t,{className:"w-3 h-3"}),xt.jsx("span",{className:"hidden sm:inline",children:yU[e]})]},e)})}),xt.jsx(yT,{mode:"wait",children:s?xt.jsxs(gD.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2 py-4 justify-center",children:[xt.jsx(Pf,{className:"w-4 h-4 animate-spin text-amber-400"}),xt.jsx("span",{className:"text-sm text-muted-foreground",children:"Analyzing piece patterns..."})]},"loading"):l?xt.jsx(gD.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-destructive py-2",children:l},"error"):a?xt.jsx(gD.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"min-h-[60px]",children:xt.jsxs("div",{className:"flex items-start gap-2",children:[ut.createElement(gU[u],{className:"w-4 h-4 text-amber-400 mt-0.5 flex-shrink-0"}),xt.jsxs("div",{children:[xt.jsx("p",{className:"text-xs font-medium text-amber-300 mb-1",children:yU[u]}),xt.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:a[u]})]})]})},u):xt.jsx(gD.div,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-muted-foreground py-2 text-center",children:"Click refresh to generate AI insights"},"empty")})]})},xU=({heatmap:e,color:t,pieceName:n})=>xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx("div",{className:"rounded overflow-hidden shadow-inner border border-border/30 cursor-help shrink-0",style:{width:32,height:32},children:xt.jsx("svg",{width:32,height:32,viewBox:"0 0 8 8",children:e.grid.map((n,r)=>n.map((n,a)=>{const i=e.maxVisits>0?n/e.maxVisits:0;return xt.jsx("rect",{x:a,y:r,width:1,height:1,fill:n>0?t:"transparent",opacity:.9*i+.1},`${r}-${a}`)}))})})}),xt.jsxs(Zb,{side:"left",className:"p-2",children:[xt.jsxs("div",{className:"text-xs font-medium mb-1",children:[n," Heatmap"]}),xt.jsx("div",{className:"rounded overflow-hidden border border-border/50",style:{width:64,height:64},children:xt.jsxs("svg",{width:64,height:64,viewBox:"0 0 8 8",children:[Array.from({length:8}).map((e,t)=>Array.from({length:8}).map((e,n)=>xt.jsx("rect",{x:n,y:t,width:1,height:1,fill:(t+n)%2==0?"#e8e8e8":"#b8b8b8",opacity:.3},`bg-${t}-${n}`))),e.grid.map((n,r)=>n.map((n,a)=>{const i=e.maxVisits>0?n/e.maxVisits:0;return n>0?xt.jsx("rect",{x:a,y:r,width:1,height:1,fill:t,opacity:.85*i+.15},`heat-${r}-${a}`):null}))]})}),xt.jsx("div",{className:"text-[10px] text-muted-foreground mt-1 text-center",children:"Darker = more visits"})]})]}),bU=({interactive:e=!0,board:t,onNavigateToMove:n,gameContext:r})=>{var a;const i=WF(),s=BF().legendTheme,[o,l]=ct.useState(!1),[c,u]=ct.useState(!1),[d,h]=ct.useState(!1);let p=null;try{p=M$()}catch{}const{highlightedPiece:m,lockedPieces:f=[],compareMode:g=!1,hoveredSquare:y=null,hoveredAnnotation:v=null,hoveredMove:x=null,followPieceData:b=null,pieceArrows:w=[],setHighlightedPiece:k,toggleLockedPiece:N,toggleCompareMode:j,clearLock:_,setHighlightedAnnotations:S,nextPieceMove:C,prevPieceMove:P}=p||{highlightedPiece:null,lockedPieces:[],compareMode:!1,hoveredSquare:null,hoveredAnnotation:null,hoveredMove:null,followPieceData:null,pieceArrows:[],setHighlightedPiece:()=>{},toggleLockedPiece:()=>{},toggleCompareMode:()=>{},clearLock:()=>{},setHighlightedAnnotations:()=>{},nextPieceMove:()=>null,prevPieceMove:()=>null},E=(e,t)=>!!y&&y.pieces.some(n=>n.pieceType===e&&n.pieceColor===t),R=(e,t)=>!!(null==v?void 0:v.associatedPieces)&&v.associatedPieces.some(n=>n.pieceType===e&&n.pieceColor===t),O=ct.useMemo(()=>{if(!t)return new Map;const e=new Map,n=["k","q","r","b","n","p"],r=["w","b"];for(const t of r)for(const r of n)e.set(`${t}-${r}`,{squareCount:0,visitCount:0,percentage:0});for(let a=0;a<8;a++)for(let n=0;n<8;n++){const r=t[a][n],i=new Set;for(const t of r.visits){const n=`${t.color}-${t.piece}`,r=e.get(n);r.visitCount++,i.has(n)||(i.add(n),r.squareCount++)}}for(const[t,a]of e)a.percentage=Math.round(a.squareCount/64*100);return e},[t]),T=ct.useMemo(()=>{if(!t)return new Map;const e=new Map,n=["k","q","r","b","n","p"],r=["w","b"];for(const t of r)for(const r of n)e.set(`${t}-${r}`,{grid:Array.from({length:8},()=>Array(8).fill(0)),maxVisits:0});for(let a=0;a<8;a++)for(let n=0;n<8;n++){const r=t[a][n];for(const t of r.visits){const r=`${t.color}-${t.piece}`,i=e.get(r);i.grid[7-a][n]++,i.maxVisits=Math.max(i.maxVisits,i.grid[7-a][n])}}return e},[t]),M=ct.useMemo(()=>{if(!t||0===O.size)return null;const e={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},n={k:{w:"",b:""},q:{w:"",b:""},r:{w:"",b:""},b:{w:"",b:""},n:{w:"",b:""},p:{w:"",b:""}};let r=0,a=0,s=0,o=0;const l=["k","q","r","b","n","p"].map(t=>{const l=O.get(`w-${t}`),c=O.get(`b-${t}`);r+=l.squareCount,a+=c.squareCount,s+=l.visitCount,o+=c.visitCount;const u=i.find(e=>e.piece===t&&"w"===e.color),d=i.find(e=>e.piece===t&&"b"===e.color);return{pieceType:t,pieceName:e[t],pieceSymbol:n[t].w,whiteSquares:l.squareCount,blackSquares:c.squareCount,whiteVisits:l.visitCount,blackVisits:c.visitCount,whiteHex:(null==u?void 0:u.hex)||"#3B82F6",blackHex:(null==d?void 0:d.hex)||"#EF4444"}});let c=null,u=0;for(const[t,h]of O)if(h.squareCount>u){u=h.squareCount;const[r,a]=t.split("-"),s=i.find(e=>e.piece===a&&e.color===r);c={color:r,type:a,name:e[a],symbol:n[a][r],hex:(null==s?void 0:s.hex)||"#888",squareCount:h.squareCount}}const d=r+a;return{whiteTotalSquares:r,blackTotalSquares:a,whiteTotalVisits:s,blackTotalVisits:o,whitePercentage:d>0?Math.round(r/d*100):50,blackPercentage:d>0?Math.round(a/d*100):50,pieceBattles:l,mvpPiece:c}},[t,O,i]),A=ct.useMemo(()=>{if(!t||!g||2!==f.length)return null;const[e,n]=f;let r=0,a=0,i=0;for(let s=0;s<8;s++)for(let o=0;o<8;o++){const l=t[s][o],c=l.visits.some(t=>t.piece===e.pieceType&&t.color===e.pieceColor),u=l.visits.some(e=>e.piece===n.pieceType&&e.color===n.pieceColor);c&&u?r++:c?a++:u&&i++}return{overlapCount:r,piece1Only:a,piece2Only:i}},[t,g,f]),B=ct.useMemo(()=>{if(!t||!M)return null;const e={q1:0,q2:0,q3:0,q4:0};let n=0;for(let r=0;r<8;r++)for(let a=0;a<8;a++){const i=t[r][a].visits.length;n+=i,r<4&&a<4?e.q1+=i:r<4&&a>=4?e.q2+=i:r>=4&&a<4?e.q3+=i:e.q4+=i}n>0&&(e.q1/=n,e.q2/=n,e.q3/=n,e.q4/=n);const a=(null==r?void 0:r.totalMoves)||0,i={opening:a>0?Math.min(1,10/a):0,middle:a>10?Math.min(1,(a-10)/30):0,ending:a>40?Math.min(1,(a-40)/20):0,trend:M.whitePercentage>55?"accelerating":M.blackPercentage>55?"declining":"stable",momentum:(M.whitePercentage-50)/50},s=Math.min(1,n/200),o=M.whitePercentage>55?"primary":M.blackPercentage>55?"secondary":"balanced";return{fingerprint:`chess-${Date.now()}`,archetype:"unknown",dominantForce:o,flowDirection:i.momentum>0?"forward":i.momentum<0?"backward":"lateral",intensity:s,quadrantProfile:e,temporalFlow:i,criticalMoments:[]}},[t,M,r]);ct.useMemo(()=>B?D$(B):null,[B]);const D=ct.useMemo(()=>{if(!O||0===O.size)return[];const e={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},t=[];for(const[n,r]of O){const[a,i]=n.split("-");t.push({pieceType:e[i],color:"w"===a?"White":"Black",count:r.visitCount,percentage:r.percentage})}return t},[O]),I=ct.useMemo(()=>{if(M)return{whiteControl:M.whitePercentage,blackControl:M.blackPercentage}},[M]),L=i.filter(e=>"w"===e.color),F=i.filter(e=>"b"===e.color),$=()=>{e&&k&&0===f.length&&k(null)},z=(e,t)=>(null==m?void 0:m.pieceType)===e&&(null==m?void 0:m.pieceColor)===t,q=(e,t)=>f.some(n=>n.pieceType===e&&n.pieceColor===t),V=null!==y||f.length>0||null!==m||null!==v||null!==x,W=(e,t)=>!!V&&(x?!((e,t)=>!!x&&x.piece.pieceType===e&&x.piece.pieceColor===t)(e,t):v?!R(e,t):y?!E(e,t):f.length>0?!q(e,t):!!m&&!z(e,t)),Q=t=>{const n=z(t.piece,t.color),r=q(t.piece,t.color),a=(i=t.piece,s=t.color,f.findIndex(e=>e.pieceType===i&&e.pieceColor===s));var i,s;const o=((e,t)=>O.get(`${t}-${e}`)||null)(t.piece,t.color),l=((e,t)=>T.get(`${t}-${e}`)||null)(t.piece,t.color),u=(n||r)&&o,d=E(t.piece,t.color),h=R(t.piece,t.color),m=W(t.piece,t.color),g=d||h;return xt.jsxs("div",{className:`flex items-center gap-2 p-2 -m-2 rounded-md transition-all duration-200 ${e&&p?"cursor-pointer hover:bg-accent/50":""} ${n?"bg-accent ring-2 ring-primary/50":""} ${r?0===a?"bg-sky-500/20 ring-2 ring-sky-500":"bg-rose-500/20 ring-2 ring-rose-500":""} ${d?"bg-amber-500/40 ring-2 ring-amber-500 shadow-[0_0_16px_rgba(251,191,36,0.6)] scale-105":""} ${h?"bg-purple-400/30 ring-2 ring-purple-400 shadow-[0_0_12px_rgba(192,132,252,0.4)]":""} ${g&&!d?"scale-[1.03] z-10":""} ${d?"z-20":""}`,style:{opacity:m?.15:1,transition:"all 0.15s ease-out"},onMouseEnter:()=>((t,n)=>{e&&k&&0===f.length&&k({pieceType:t,pieceColor:n})})(t.piece,t.color),onMouseLeave:$,onClick:()=>((t,n)=>{if(e&&N&&(N({pieceType:t,pieceColor:n}),S))if(f.some(e=>e.pieceType===t&&e.pieceColor===n)){const e=f.filter(e=>!(e.pieceType===t&&e.pieceColor===n)),r=[];e.some(e=>"w"===e.pieceColor)&&r.push("white-player"),e.some(e=>"b"===e.pieceColor)&&r.push("black-player"),S(r)}else{const e=[],r=[...f,{pieceType:t,pieceColor:n}];r.some(e=>"w"===e.pieceColor)&&e.push("white-player"),r.some(e=>"b"===e.pieceColor)&&e.push("black-player"),S(e)}})(t.piece,t.color),children:[c&&l&&xt.jsx(xU,{heatmap:l,color:t.hex,pieceName:t.name}),xt.jsx("div",{className:`w-5 h-5 rounded shadow-sm transition-all duration-200 shrink-0 ${n||r?"scale-125 ring-2 ring-white/50":""} ${d?"scale-125 ring-2 ring-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.8)] animate-pulse":""} ${g&&!d?"scale-110 ring-2 ring-amber-300/80":""}`,style:{backgroundColor:t.hex}}),xt.jsx("span",{className:"text-lg shrink-0",children:t.symbol}),xt.jsx("span",{className:"text-xs text-muted-foreground font-serif flex-1 truncate",children:t.name.replace("White ","").replace("Black ","")}),r&&xt.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-white shrink-0 "+(0===a?"bg-sky-500":"bg-rose-500"),children:a+1}),u&&xt.jsxs("div",{className:"flex flex-col items-end text-[10px] leading-tight animate-fade-in shrink-0",children:[xt.jsxs("span",{className:"text-foreground font-semibold",children:[o.percentage,"%"]}),xt.jsxs("span",{className:"text-muted-foreground",children:[o.squareCount," sq"]})]})]},t.name)};return xt.jsx(Hb,{children:xt.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-card rounded-lg border border-border/50 min-w-0",children:[xt.jsxs("div",{className:"flex items-center justify-between gap-1 flex-wrap",children:[xt.jsx("h3",{className:"font-display text-xs font-semibold tracking-wide",children:"Color Legend"}),xt.jsxs("div",{className:"flex items-center gap-1",children:[t&&!o&&!d&&xt.jsxs(vD,{variant:c?"default":"ghost",size:"sm",onClick:()=>u(!c),className:"h-6 px-2 text-[10px] gap-1 "+(c?"bg-violet-500 hover:bg-violet-600":""),title:"Toggle mini heatmaps inline",children:[xt.jsx(xf,{className:"w-3 h-3"}),"Mini"]}),t&&xt.jsxs(vD,{variant:d?"default":"ghost",size:"sm",onClick:()=>{h(!d),d||l(!1)},className:"h-6 px-2 text-[10px] gap-1 "+(d?"bg-emerald-500 hover:bg-emerald-600":""),title:"Show full heatmap panel",children:[xt.jsx(uf,{className:"w-3 h-3"}),"Heatmap"]}),t&&xt.jsxs(vD,{variant:o?"default":"ghost",size:"sm",onClick:()=>{l(!o),o||h(!1)},className:"h-6 px-2 text-[10px] gap-1 "+(o?"bg-amber-500 hover:bg-amber-600":""),children:[xt.jsx(xg,{className:"w-3 h-3"}),"Battle"]}),e&&p&&!o&&xt.jsxs(vD,{variant:g?"default":"ghost",size:"sm",onClick:j,className:"h-6 px-2 text-[10px] gap-1 "+(g?"bg-primary":""),children:[xt.jsx(gf,{className:"w-3 h-3"}),"Compare"]}),f.length>0&&!o&&xt.jsxs("button",{onClick:_,className:"text-[10px] text-muted-foreground hover:text-foreground flex items-center gap-1 transition-colors",children:[xt.jsx(Mg,{className:"w-3 h-3"}),"Clear"]})]})]}),o?M?xt.jsxs("div",{className:"space-y-4 animate-fade-in",children:[xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("div",{className:"flex justify-between text-[10px] font-semibold",children:[xt.jsx("span",{className:"text-sky-400",children:s.whiteName}),xt.jsx("span",{className:"text-rose-400",children:s.blackName})]}),xt.jsxs("div",{className:"relative h-6 rounded-full overflow-hidden bg-muted/30",children:[xt.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-sky-500 to-sky-400 transition-all duration-500",style:{width:`${M.whitePercentage}%`}}),xt.jsx("div",{className:"absolute right-0 top-0 h-full bg-gradient-to-l from-rose-500 to-rose-400 transition-all duration-500",style:{width:`${M.blackPercentage}%`}}),xt.jsx("div",{className:"absolute left-1/2 top-0 h-full w-0.5 bg-white/20 -translate-x-1/2"}),xt.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3",children:[xt.jsxs("span",{className:"text-xs font-bold text-white drop-shadow-md",children:[M.whitePercentage,"%"]}),xt.jsxs("span",{className:"text-xs font-bold text-white drop-shadow-md",children:[M.blackPercentage,"%"]})]})]}),xt.jsxs("div",{className:"flex justify-between text-[9px] text-muted-foreground",children:[xt.jsxs("span",{children:[M.whiteTotalSquares," squares"]}),xt.jsxs("span",{children:[M.blackTotalSquares," squares"]})]})]}),M.mvpPiece&&xt.jsxs("div",{className:"bg-gradient-to-r from-amber-500/10 via-yellow-500/20 to-amber-500/10 rounded-lg p-3 border border-amber-500/30",children:[xt.jsx("div",{className:"text-[10px] font-semibold text-center mb-1 uppercase tracking-widest text-amber-400",children:" Most Active Piece"}),xt.jsxs("div",{className:"flex items-center justify-center gap-2",children:[xt.jsx("div",{className:"w-6 h-6 rounded shadow-md ring-2 ring-amber-400/50",style:{backgroundColor:M.mvpPiece.hex}}),xt.jsx("span",{className:"text-xl",children:M.mvpPiece.symbol}),xt.jsxs("span",{className:"text-sm font-medium",children:["w"===M.mvpPiece.color?"White":"Black"," ",M.mvpPiece.name]}),xt.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",M.mvpPiece.squareCount," sq)"]})]})]}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsx("div",{className:"text-[10px] font-semibold text-center uppercase tracking-widest text-muted-foreground",children:"Piece Battles"}),M.pieceBattles.map(e=>{const t=e.whiteSquares+e.blackSquares,n=t>0?e.whiteSquares/t*100:50,r=t>0?e.blackSquares/t*100:50,a=e.whiteSquares>e.blackSquares?"white":e.blackSquares>e.whiteSquares?"black":"tie";return xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:e.whiteHex}}),xt.jsx("span",{className:"white"===a?"font-bold text-sky-400":"text-muted-foreground",children:e.whiteSquares})]}),xt.jsxs("span",{className:"text-sm font-medium",children:[e.pieceSymbol," ",e.pieceName]}),xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("span",{className:"black"===a?"font-bold text-rose-400":"text-muted-foreground",children:e.blackSquares}),xt.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:e.blackHex}})]})]}),xt.jsxs("div",{className:"relative h-2 rounded-full overflow-hidden bg-muted/30",children:[xt.jsx("div",{className:"absolute left-0 top-0 h-full rounded-l-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:e.whiteHex}}),xt.jsx("div",{className:"absolute right-0 top-0 h-full rounded-r-full transition-all duration-300",style:{width:`${r}%`,backgroundColor:e.blackHex}})]})]},e.pieceType)})]}),D.length>0&&r&&xt.jsx(vU,{pieceActivity:D,gameContext:r,territoryData:I})]}):null:d?(()=>{if(!t)return null;const e=["k","q","r","b","n","p"],n={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},a=(e,t,n)=>xt.jsx("div",{className:"rounded overflow-hidden border border-border/40 shadow-inner",style:{width:n,height:n},children:xt.jsxs("svg",{width:n,height:n,viewBox:"0 0 8 8",children:[Array.from({length:8}).map((e,t)=>Array.from({length:8}).map((e,n)=>xt.jsx("rect",{x:n,y:t,width:1,height:1,fill:(t+n)%2==0?"hsl(var(--muted))":"hsl(var(--border))",opacity:.3},`bg-${t}-${n}`))),e.grid.map((n,r)=>n.map((n,a)=>{const i=e.maxVisits>0?n/e.maxVisits:0;return n>0?xt.jsx("rect",{x:a,y:r,width:1,height:1,fill:t,opacity:.85*i+.15},`heat-${r}-${a}`):null}))]})});return xt.jsxs("div",{className:"space-y-4 animate-fade-in",children:[xt.jsxs("div",{children:[xt.jsx("div",{className:"flex items-center gap-2 pb-2 border-b border-border/50 mb-3",children:xt.jsxs("span",{className:"text-[9px] font-sans font-medium text-sky-400 uppercase tracking-wider",children:[s.whiteEmoji," ",s.whiteName," Territory"]})}),xt.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(e=>{var t;const r=T.get(`w-${e}`),s=i.find(t=>t.piece===e&&"w"===t.color);return r&&s?xt.jsxs("div",{className:"flex flex-col items-center gap-1",children:[xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("span",{className:"text-sm",children:s.symbol}),xt.jsx("span",{className:"text-[9px] text-muted-foreground",children:n[e]})]}),a(r,s.hex,56),xt.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[(null==(t=O.get(`w-${e}`))?void 0:t.percentage)||0,"%"]})]},`w-${e}`):null})})]}),xt.jsxs("div",{children:[xt.jsx("div",{className:"flex items-center gap-2 pb-2 border-b border-border/50 mb-3",children:xt.jsxs("span",{className:"text-[9px] font-sans font-medium text-rose-400 uppercase tracking-wider",children:[s.blackEmoji," ",s.blackName," Territory"]})}),xt.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(e=>{var t;const r=T.get(`b-${e}`),s=i.find(t=>t.piece===e&&"b"===t.color);return r&&s?xt.jsxs("div",{className:"flex flex-col items-center gap-1",children:[xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("span",{className:"text-sm",children:s.symbol}),xt.jsx("span",{className:"text-[9px] text-muted-foreground",children:n[e]})]}),a(r,s.hex,56),xt.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[(null==(t=O.get(`b-${e}`))?void 0:t.percentage)||0,"%"]})]},`b-${e}`):null})})]}),xt.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Darker = more visits  Shows piece movement patterns"}),D.length>0&&r&&xt.jsx(vU,{pieceActivity:D,gameContext:r,territoryData:I})]})})():xt.jsxs(xt.Fragment,{children:[e&&p&&xt.jsx("p",{className:"text-[10px] text-muted-foreground text-center -mt-2",children:g?`Select 2 pieces to compare  ${f.length}/2 selected`:"Hover to preview  Click to lock"}),g&&A&&2===f.length&&xt.jsxs("div",{className:"bg-gradient-to-r from-sky-500/10 via-purple-500/20 to-rose-500/10 rounded-lg p-3 border border-border/50 animate-fade-in",children:[xt.jsx("div",{className:"text-[10px] font-semibold text-center mb-2 uppercase tracking-widest text-muted-foreground",children:"Overlap Analysis"}),xt.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[xt.jsxs("div",{children:[xt.jsx("div",{className:"text-sky-400 font-bold text-lg",children:A.piece1Only}),xt.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Only "})]}),xt.jsxs("div",{children:[xt.jsx("div",{className:"text-purple-400 font-bold text-lg",children:A.overlapCount}),xt.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Shared"})]}),xt.jsxs("div",{children:[xt.jsx("div",{className:"text-rose-400 font-bold text-lg",children:A.piece2Only}),xt.jsx("div",{className:"text-[9px] text-muted-foreground",children:"Only "})]})]})]}),!g&&1===f.length&&b&&w.length>0&&xt.jsxs("div",{className:"bg-gradient-to-r from-amber-500/10 via-yellow-500/15 to-amber-500/10 rounded-lg p-3 border border-amber-500/30 animate-fade-in",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-2",children:[xt.jsxs("div",{className:"flex items-center gap-1.5",children:[xt.jsx(Mf,{className:"w-3 h-3 text-amber-400"}),xt.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-widest text-amber-400",children:"Follow Mode"})]}),xt.jsxs(MD,{variant:"secondary",className:"text-[9px] h-4 px-1.5",children:[b.currentIndex+1," / ",w.length]})]}),xt.jsxs("div",{className:"flex items-center justify-center gap-2",children:[xt.jsxs(vD,{variant:"outline",size:"sm",onClick:()=>{const e=P();null!==e&&n&&n(e)},disabled:0===b.currentIndex,className:"h-7 px-2 text-xs gap-1",children:[xt.jsx(Im,{className:"w-3 h-3"}),"Prev"]}),xt.jsxs("div",{className:"text-xs font-mono text-muted-foreground",children:["Move ",(null==(a=w[b.currentIndex])?void 0:a.moveNumber)||"-"]}),xt.jsxs(vD,{variant:"outline",size:"sm",onClick:()=>{const e=C();null!==e&&n&&n(e)},disabled:b.currentIndex>=w.length-1,className:"h-7 px-2 text-xs gap-1",children:["Next",xt.jsx(Lm,{className:"w-3 h-3"})]})]}),xt.jsxs("p",{className:"text-[9px] text-muted-foreground text-center mt-2",children:[w.filter(e=>e.isCapture).length," captures "," ",w.length," total moves"]})]}),xt.jsxs("div",{className:"space-y-5",children:[xt.jsxs("div",{className:"space-y-2",children:[xt.jsx("div",{className:"flex items-center gap-2 pb-1.5 border-b border-border/50",children:xt.jsxs("span",{className:"text-[9px] font-sans font-medium text-sky-400 uppercase tracking-wider truncate",children:[s.whiteEmoji," ",s.whiteName]})}),xt.jsx("div",{className:"grid grid-cols-1 gap-1.5",children:L.map(Q)})]}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsx("div",{className:"flex items-center gap-2 pb-1.5 border-b border-border/50",children:xt.jsxs("span",{className:"text-[9px] font-sans font-medium text-rose-400 uppercase tracking-wider truncate",children:[s.blackEmoji," ",s.blackName]})}),xt.jsx("div",{className:"grid grid-cols-1 gap-1.5",children:F.map(Q)})]})]})]})]})})};function wU({children:e,quality:t,count:n,openingInfo:r,classifiedMoves:a}){const i=DQ[t],s=(null==a?void 0:a.filter(e=>e.quality===t))||[];return xt.jsxs(Gb,{delayDuration:200,children:[xt.jsx(Yb,{asChild:!0,children:e}),xt.jsxs(Zb,{side:"top",className:"max-w-xs p-3 space-y-2",sideOffset:8,children:[xt.jsxs("div",{className:"flex items-center gap-2 border-b border-border/30 pb-2",children:[xt.jsx("span",{className:"text-lg font-bold",style:{color:i.color},children:i.symbol}),xt.jsxs("div",{children:[xt.jsx("p",{className:"font-semibold",style:{color:i.color},children:i.label}),xt.jsxs("p",{className:"text-xs text-muted-foreground",children:[n," move",1!==n?"s":""]})]})]}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:i.description}),"book"===t&&r&&xt.jsxs("div",{className:"space-y-2 pt-1",children:[r.opening&&xt.jsxs("div",{className:"bg-emerald-500/10 rounded p-2 border border-emerald-500/20",children:[xt.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[xt.jsx(Pm,{className:"h-3 w-3 text-emerald-400"}),xt.jsx("span",{className:"text-xs font-medium text-emerald-400",children:"Opening Detected"})]}),xt.jsx("p",{className:"text-sm font-semibold text-foreground",children:r.opening.name}),xt.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["ECO: ",r.opening.eco,"  ",r.opening.category]}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.opening.description})]}),r.bookMoves.length>0&&xt.jsxs("div",{className:"space-y-1",children:[xt.jsx("p",{className:"text-[10px] uppercase tracking-wider text-muted-foreground",children:"Book Moves Played"}),xt.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.bookMoves.slice(0,10).map((e,t)=>xt.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",children:[e.moveNumber,".","b"===e.color?"..":"",e.san]},t)),r.bookMoves.length>10&&xt.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",r.bookMoves.length-10," more"]})]}),xt.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Theory followed through move ",r.lastBookMoveNumber]})]})]}),"book"!==t&&s.length>0&&s.length<=8&&xt.jsxs("div",{className:"pt-1",children:[xt.jsx("p",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mb-1",children:"Moves"}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:s.map((e,t)=>xt.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:`${i.color}15`,color:i.color,border:`1px solid ${i.color}30`},children:[e.moveNumber,".","b"===e.color?"..":"",e.san]},t))})]}),i.cpLossRange&&xt.jsxs("p",{className:"text-[10px] text-muted-foreground pt-1 border-t border-border/30",children:[xt.jsx(bg,{className:"h-3 w-3 inline mr-1"}),i.cpLossRange]})]})]})}function kU({count:e,openingInfo:t}){return xt.jsxs(Gb,{delayDuration:200,children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx("div",{className:"mb-3 p-2 rounded bg-emerald-500/10 border border-emerald-500/20 text-center cursor-help transition-all hover:bg-emerald-500/15 hover:border-emerald-500/30",children:xt.jsxs("span",{className:"text-xs text-emerald-400",children:[" ",e," Opening Book Moves"]})})}),xt.jsxs(Zb,{side:"top",className:"max-w-sm p-4 space-y-3",sideOffset:8,children:[xt.jsxs("div",{className:"flex items-center gap-2 border-b border-border/30 pb-2",children:[xt.jsx(Pm,{className:"h-5 w-5 text-emerald-400"}),xt.jsxs("div",{children:[xt.jsx("p",{className:"font-semibold text-emerald-400",children:"Opening Theory"}),xt.jsxs("p",{className:"text-xs text-muted-foreground",children:[e," move",1!==e?"s":""," from established theory"]})]})]}),t.opening?xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("div",{className:"bg-emerald-500/10 rounded-lg p-3 border border-emerald-500/20",children:[xt.jsx("p",{className:"text-sm font-bold text-foreground",children:t.opening.name}),xt.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[xt.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-400",children:["ECO: ",t.opening.eco]}),xt.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground capitalize",children:t.opening.category})]}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:t.opening.description})]}),xt.jsxs("div",{className:"text-xs text-muted-foreground",children:[xt.jsx("span",{className:"font-medium",children:"Main Line: "}),xt.jsx("span",{className:"font-mono text-[10px]",children:t.opening.moves})]})]}):xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Moves follow general opening principles"}),t.bookMoves.length>0&&xt.jsxs("div",{className:"space-y-1.5",children:[xt.jsxs("p",{className:"text-[10px] uppercase tracking-wider text-muted-foreground flex items-center gap-1",children:[xt.jsx(Ag,{className:"h-3 w-3"}),"Book Moves in This Game"]}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:t.bookMoves.map((e,t)=>xt.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 font-mono",children:[e.moveNumber,".","b"===e.color?"..":"",e.san]},t))})]}),xt.jsxs("div",{className:"text-[10px] text-muted-foreground pt-2 border-t border-border/30 flex items-start gap-1.5",children:[xt.jsx(jf,{className:"h-3 w-3 mt-0.5 shrink-0"}),xt.jsx("span",{children:"Book moves are recognized moves from chess opening databases, indicating adherence to established theory and best practices."})]})]})]})}const NU="/assets/en-pensent-logo-new-D812TZ5I.png",jU="/assets/hotcold-BNCnPEDG.jpg",_U="/assets/medieval-rdJU-sS1.jpg",SU="/assets/egyptian-Cxd4vJYz.jpg",CU="/assets/roman-DWM0_XVU.jpg",PU="/assets/modern-CW4oFtkG.jpg",EU="/assets/greyscale-BW39vXi2.jpg",RU="/assets/japanese-Cl243utO.jpg",OU="/assets/nordic-CbEEzt9h.jpg",TU="/assets/artdeco-CqmGU4xZ.jpg",MU="/assets/tropical-2R_9Wy-C.jpg",AU="/assets/cyberpunk-Rv39JB46.jpg",BU="/assets/autumn-CwVcR4Vm.jpg",DU="/assets/ocean--SeJyLYb.jpg",IU="/assets/desert-BUV4RAQp.jpg",LU="/assets/cosmic-Cg5In6Gt.jpg",FU="/assets/vintage-CargvEM3.jpg",$U={hotCold:jU,medieval:_U,egyptian:SU,roman:CU,modern:PU,greyscale:EU,japanese:RU,nordic:OU,artdeco:TU,tropical:MU,cyberpunk:AU,autumn:BU,ocean:DU,desert:IU,cosmic:LU,vintage:FU},zU=({paletteId:e,similarity:t,compact:n=!1,gameCardId:r,gameCardTitle:a,gameCardMatchType:i,gameCardSimilarity:s})=>{const o=e?TF.find(t=>t.id===e):null,l=r?eL.find(e=>e.id===r):null;if(!o&&!l)return null;if("custom"===e&&!l)return null;const c=e?$U[e]:void 0,u=["k","q","r","b","n","p"];return n?xt.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gradient-to-r from-primary/10 via-amber-500/10 to-primary/10 border border-primary/30",children:[xt.jsx("img",{src:NU,alt:"En Pensent",className:"w-6 h-6 rounded-full object-cover ring-2 ring-primary/50"}),xt.jsxs("div",{className:"flex items-center gap-1.5",children:[xt.jsx(gg,{className:"h-3.5 w-3.5 text-primary"}),xt.jsx("span",{className:"text-xs font-semibold text-primary font-display tracking-wide",children:"INTRINSIC"})]}),xt.jsx("span",{className:"text-xs text-muted-foreground font-serif",children:(null==o?void 0:o.name)||a||"En Pensent"})]}):xt.jsxs("div",{className:"relative overflow-hidden rounded-xl border-2 border-primary/40 glow-gold",children:[c&&xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20 pointer-events-none",style:{backgroundImage:`url(${c})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/15 via-transparent to-amber-500/10 pointer-events-none"}),xt.jsxs("div",{className:"relative z-10 p-4",children:[xt.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[xt.jsxs("div",{className:"relative",children:[xt.jsx("img",{src:NU,alt:"En Pensent",className:"w-12 h-12 rounded-full object-cover ring-2 ring-primary/60"}),xt.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-primary flex items-center justify-center",children:xt.jsx(Zm,{className:"h-3 w-3 text-primary-foreground"})})]}),xt.jsxs("div",{children:[xt.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[xt.jsx(gg,{className:"h-4 w-4 text-primary animate-pulse"}),xt.jsx("span",{className:"text-xs font-bold tracking-[0.2em] uppercase",style:{background:"linear-gradient(135deg, hsl(var(--primary)), #F59E0B)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"EN PENSENT"})]}),xt.jsx("p",{className:"text-sm font-semibold",style:{background:"linear-gradient(135deg, hsl(var(--primary)), #D4AF37)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:l?"Intrinsically Valued Game":"Intrinsically Valued Palette"})]})]}),l&&xt.jsxs("div",{className:"flex items-center gap-3 p-3 mb-2 rounded-lg bg-amber-500/10 backdrop-blur-sm border border-amber-500/30",children:[xt.jsx(_g,{className:"h-8 w-8 text-amber-500 shrink-0"}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[xt.jsx("h4",{className:"font-display font-semibold text-sm text-amber-600",children:l.title}),"exact"===i&&xt.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-green-500/20 text-green-600 font-semibold",children:"EXACT MATCH"}),"partial"===i&&s&&xt.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-600 font-semibold",children:[Math.round(100*s),"% MATCH"]})]}),xt.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:[l.white," vs ",l.black,"  ",l.year]})]})]}),o&&"custom"!==e&&xt.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50",children:[xt.jsxs("div",{className:"flex flex-col gap-1",children:[xt.jsx("div",{className:"flex gap-0.5",children:u.map(e=>xt.jsx("div",{className:"w-4 h-4 rounded-sm ring-1 ring-black/20",style:{backgroundColor:o.white[e]}},`w-${e}`))}),xt.jsx("div",{className:"flex gap-0.5",children:u.map(e=>xt.jsx("div",{className:"w-4 h-4 rounded-sm ring-1 ring-black/20",style:{backgroundColor:o.black[e]}},`b-${e}`))})]}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsxs("h4",{className:"font-display font-semibold text-sm flex items-center gap-1.5",children:[xt.jsx("span",{children:o.legendTheme.whiteEmoji}),o.name,xt.jsx("span",{children:o.legendTheme.blackEmoji})]}),xt.jsx("p",{className:"text-xs text-muted-foreground font-serif truncate",children:o.description})]})]}),t&&xt.jsx("div",{className:"mt-2 text-center",children:xt.jsxs("span",{className:"text-xs text-muted-foreground font-serif",children:[Math.round(t),"% match to featured palette"]})}),xt.jsx("p",{className:"mt-3 text-[10px] text-center text-muted-foreground font-serif italic",children:l&&o?"This vision uses an officially curated En Pensent game and palette":l?"This vision recreates an officially curated En Pensent legendary game":"This vision uses an officially curated En Pensent palette"})]})]})},qU=.01,VU=.1,WU=.25,QU=1,UU=2,KU={monthlySubscription:7,marketContributionRate:.17,monthlyContributionPerMember:1.19,baseMarketCap:5e3,valuePerScorePoint:.5,membershipMultiplierCap:3,valueAppreciationRate:.17,platformRetentionRate:.83,marketplaceTransactionFee:.05,sellerRetentionRate:.95,creatorPremiumTiers:{tier1:{minInteractions:10,multiplier:1.2},tier2:{minInteractions:50,multiplier:1.5}}};async function HU(e,t,n=0){try{const{data:{user:r}}=await KC.auth.getUser(),a=(null==r?void 0:r.id)||null,i=a?null:await async function(){try{const e=[navigator.userAgent,navigator.language,screen.width,screen.height,(new Date).getTimezoneOffset()].join("|");let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t.toString(36)}catch{return null}}(),{data:s,error:o}=await KC.rpc("record_vision_interaction",{p_visualization_id:e,p_user_id:a,p_interaction_type:t,p_value_cents:n,p_ip_hash:i});return!o&&!0===s}catch(r){return!1}}async function GU(e){try{const{data:t,error:n}=await KC.from("vision_scores").select("*").eq("visualization_id",e).single();if(n){if("PGRST116"===n.code)return null;throw n}return{visualizationId:t.visualization_id,viewCount:t.view_count,downloadHdCount:t.download_hd_count,downloadGifCount:t.download_gif_count,scanCount:t.scan_count||0,tradeCount:t.trade_count,printOrderCount:t.print_order_count,printRevenueCents:t.print_revenue_cents,totalScore:parseFloat(String(t.total_score)),uniqueViewers:t.unique_viewers,updatedAt:t.updated_at,royaltyCentsEarned:t.royalty_cents_earned||0,royaltyOrdersCount:t.royalty_orders_count||0}}catch(t){return null}}async function YU(e=10){try{const{data:t,error:n}=await KC.from("vision_scores").select("*").order("total_score",{ascending:!1}).limit(e);if(n)throw n;if(!t||0===t.length)return[];const r=t.map(e=>e.visualization_id),{data:a,error:i}=await KC.from("saved_visualizations").select("id, title, image_path, user_id").in("id",r);if(i)throw i;const s=[...new Set((null==a?void 0:a.map(e=>e.user_id))||[])],{data:o}=await KC.from("profiles").select("user_id, display_name").in("user_id",s),l=new Map((null==o?void 0:o.map(e=>[e.user_id,e.display_name]))||[]),c=new Map((null==a?void 0:a.map(e=>[e.id,e]))||[]);return t.map(e=>{const t=c.get(e.visualization_id);return{visualizationId:e.visualization_id,viewCount:e.view_count,downloadHdCount:e.download_hd_count,downloadGifCount:e.download_gif_count,scanCount:e.scan_count||0,tradeCount:e.trade_count,printOrderCount:e.print_order_count,printRevenueCents:e.print_revenue_cents,totalScore:parseFloat(String(e.total_score)),uniqueViewers:e.unique_viewers,updatedAt:e.updated_at,royaltyCentsEarned:e.royalty_cents_earned||0,royaltyOrdersCount:e.royalty_orders_count||0,title:(null==t?void 0:t.title)||"Untitled",imagePath:(null==t?void 0:t.image_path)||"",ownerDisplayName:l.get((null==t?void 0:t.user_id)||"")||"Anonymous",ownerId:(null==t?void 0:t.user_id)||""}})}catch(t){return[]}}async function ZU(){try{const{data:e,error:t}=await KC.from("vision_scores").select("view_count, download_hd_count, download_gif_count, scan_count, trade_count, print_order_count, print_revenue_cents, total_score");if(t)throw t;const n=(e||[]).reduce((e,t)=>({totalViews:e.totalViews+t.view_count,totalDownloads:e.totalDownloads+t.download_hd_count,totalGifDownloads:e.totalGifDownloads+t.download_gif_count,totalScans:e.totalScans+(t.scan_count||0),totalTrades:e.totalTrades+t.trade_count,totalPrintOrders:e.totalPrintOrders+t.print_order_count,totalPrintRevenue:e.totalPrintRevenue+t.print_revenue_cents,totalScore:e.totalScore+parseFloat(String(t.total_score))}),{totalViews:0,totalDownloads:0,totalGifDownloads:0,totalScans:0,totalTrades:0,totalPrintOrders:0,totalPrintRevenue:0,totalScore:0}),{data:r}=await KC.from("saved_visualizations").select("user_id"),a=new Set((null==r?void 0:r.map(e=>e.user_id))||[]).size;return{...n,uniqueCollectors:a}}catch(e){return{totalViews:0,totalDownloads:0,totalGifDownloads:0,totalScans:0,totalTrades:0,totalPrintOrders:0,totalPrintRevenue:0,totalScore:0,uniqueCollectors:0}}}function XU(e,t=1){const n=(e.totalScore*KU.valuePerScorePoint*Math.min(1+e.uniqueViewers/100,2)+5*e.printOrderCount)*Math.min(t,KU.membershipMultiplierCap);return Math.round(100*n)/100}function JU(e){if(e<=0)return 1;const t=1+.3*Math.log10(e+1);return Math.min(t,KU.membershipMultiplierCap)}async function eK(e=100){try{const t=await ZU(),n=JU(e),r=KU.baseMarketCap,a=e*KU.monthlyContributionPerMember*6,i=t.totalScore*KU.valuePerScorePoint*n,{count:s}=await KC.from("saved_visualizations").select("id",{count:"exact",head:!0}),o=r+a+i;return{totalMarketCap:Math.round(100*o)/100,baseMarketCap:r,membershipContribution:Math.round(100*a)/100,organicValue:Math.round(100*i)/100,membershipMultiplier:Math.round(100*n)/100,totalVisions:s||0,totalScore:t.totalScore}}catch(t){return{totalMarketCap:KU.baseMarketCap,baseMarketCap:KU.baseMarketCap,membershipContribution:0,organicValue:0,membershipMultiplier:1,totalVisions:0,totalScore:0}}}async function tK(e,t=100){try{const{data:n}=await KC.from("saved_visualizations").select("id").eq("user_id",e);if(!n||0===n.length)return{totalValue:0,visionCount:0,totalScore:0,membershipMultiplier:1,appreciationFromMemberships:0};const r=n.map(e=>e.id),{data:a}=await KC.from("vision_scores").select("*").in("visualization_id",r),i=JU(t);let s=0,o=0,l=0;for(const e of a||[]){const t={visualizationId:e.visualization_id,viewCount:e.view_count,downloadHdCount:e.download_hd_count,downloadGifCount:e.download_gif_count,scanCount:e.scan_count||0,tradeCount:e.trade_count,printOrderCount:e.print_order_count,printRevenueCents:e.print_revenue_cents,totalScore:parseFloat(String(e.total_score)),uniqueViewers:e.unique_viewers,updatedAt:e.updated_at,royaltyCentsEarned:e.royalty_cents_earned||0,royaltyOrdersCount:e.royalty_orders_count||0};s+=XU(t,i),o+=XU(t,1),l+=t.totalScore}const c=n.length-((null==a?void 0:a.length)||0);return s+=c*(2.5*i),o+=2.5*c,{totalValue:Math.round(100*s)/100,visionCount:n.length,totalScore:l,membershipMultiplier:Math.round(100*i)/100,appreciationFromMemberships:Math.round(100*(s-o))/100}}catch(n){return{totalValue:0,visionCount:0,totalScore:0,membershipMultiplier:1,appreciationFromMemberships:0}}}function nK(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function rK(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const aK=6048e5,iK=6e4,sK=36e5,oK=43200;let lK={};function cK(){return lK}function uK(e,t){var n,r,a,i;const s=cK(),o=(null==t?void 0:t.weekStartsOn)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)??s.weekStartsOn??(null==(i=null==(a=s.locale)?void 0:a.options)?void 0:i.weekStartsOn)??0,l=nK(e),c=l.getDay(),u=(c<o?7:0)+c-o;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function dK(e){return uK(e,{weekStartsOn:1})}function hK(e){const t=nK(e),n=t.getFullYear(),r=rK(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=dK(r),i=rK(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const s=dK(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function pK(e){const t=nK(e);return t.setHours(0,0,0,0),t}function mK(e){const t=nK(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function fK(e,t){const n=nK(e),r=nK(t),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}function gK(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const n=nK(e);return!isNaN(Number(n))}function yK(e){const t=nK(e);return+function(e){const t=nK(e);return t.setHours(23,59,59,999),t}(t)===+function(e){const t=nK(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(t)}function vK(e,t){const n=nK(e),r=nK(t),a=fK(n,r),i=Math.abs(function(e,t){const n=nK(e),r=nK(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(n,r));let s;if(i<1)s=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*i);let t=fK(n,r)===-a;yK(nK(e))&&1===i&&1===fK(e,r)&&(t=!1),s=a*(i-Number(t))}return 0===s?0:s}function xK(e,t,n){const r=function(e,t){return+nK(e)-+nK(t)}(e,t)/1e3;return(a=null==n?void 0:n.roundingMethod,e=>{const t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})(r);var a}const bK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function wK(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const kK={date:wK({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:wK({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:wK({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},NK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function jK(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const _K={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:jK({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:jK({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:jK({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:jK({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:jK({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function SK(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(s)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(s));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(s.length)}}}const CK={ordinalNumber:(PK={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(PK.matchPattern);if(!n)return null;const r=n[0],a=e.match(PK.parsePattern);if(!a)return null;let i=PK.valueCallback?PK.valueCallback(a[0]):a[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:SK({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:SK({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:SK({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:SK({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:SK({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var PK;const EK={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=bK[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:kK,formatRelative:(e,t,n,r)=>NK[e],localize:_K,match:CK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function RK(e){const t=nK(e),n=function(e,t){const n=pK(e),r=pK(t),a=+n-mK(n),i=+r-mK(r);return Math.round((a-i)/864e5)}(t,function(e){const t=nK(e),n=rK(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(t));return n+1}function OK(e){const t=nK(e),n=+dK(t)-+function(e){const t=hK(e),n=rK(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),dK(n)}(t);return Math.round(n/aK)+1}function TK(e,t){var n,r,a,i;const s=nK(e),o=s.getFullYear(),l=cK(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(i=null==(a=l.locale)?void 0:a.options)?void 0:i.firstWeekContainsDate)??1,u=rK(e,0);u.setFullYear(o+1,0,c),u.setHours(0,0,0,0);const d=uK(u,t),h=rK(e,0);h.setFullYear(o,0,c),h.setHours(0,0,0,0);const p=uK(h,t);return s.getTime()>=d.getTime()?o+1:s.getTime()>=p.getTime()?o:o-1}function MK(e,t){const n=nK(e),r=+uK(n,t)-+function(e,t){var n,r,a,i;const s=cK(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??s.firstWeekContainsDate??(null==(i=null==(a=s.locale)?void 0:a.options)?void 0:i.firstWeekContainsDate)??1,l=TK(e,t),c=rK(e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),uK(c,t)}(n,t);return Math.round(r/aK)+1}function AK(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const BK={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return AK("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):AK(n+1,2)},d:(e,t)=>AK(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>AK(e.getHours()%12||12,t.length),H:(e,t)=>AK(e.getHours(),t.length),m:(e,t)=>AK(e.getMinutes(),t.length),s:(e,t)=>AK(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return AK(Math.trunc(r*Math.pow(10,n-3)),t.length)}},DK="midnight",IK="noon",LK="morning",FK="afternoon",$K="evening",zK="night",qK={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return BK.y(e,t)},Y:function(e,t,n,r){const a=TK(e,r),i=a>0?a:1-a;if("YY"===t){return AK(i%100,2)}return"Yo"===t?n.ordinalNumber(i,{unit:"year"}):AK(i,t.length)},R:function(e,t){return AK(hK(e),t.length)},u:function(e,t){return AK(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return AK(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return AK(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return BK.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return AK(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=MK(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):AK(a,t.length)},I:function(e,t,n){const r=OK(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):AK(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):BK.d(e,t)},D:function(e,t,n){const r=RK(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):AK(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return AK(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return AK(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return AK(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?IK:0===r?DK:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?$K:r>=12?FK:r>=4?LK:zK,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return BK.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):BK.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):AK(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):AK(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):BK.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):BK.s(e,t)},S:function(e,t){return BK.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return WK(r);case"XXXX":case"XX":return QK(r);default:return QK(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return WK(r);case"xxxx":case"xx":return QK(r);default:return QK(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+VK(r,":");default:return"GMT"+QK(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+VK(r,":");default:return"GMT"+QK(r,":")}},t:function(e,t,n){return AK(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return AK(e.getTime(),t.length)}};function VK(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return 0===i?n+String(a):n+String(a)+t+AK(i,2)}function WK(e,t){if(e%60==0){return(e>0?"-":"+")+AK(Math.abs(e)/60,2)}return QK(e,t)}function QK(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+AK(Math.trunc(r/60),2)+t+AK(r%60,2)}const UK=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},KK=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},HK={p:KK,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return UK(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",UK(r,t)).replace("{{time}}",KK(a,t))}},GK=/^D+$/,YK=/^Y+$/,ZK=["D","DD","YY","YYYY"];const XK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,JK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eH=/^'([^]*?)'?$/,tH=/''/g,nH=/[a-zA-Z]/;function rH(e,t,n){var r,a,i,s;const o=cK(),l=o.locale??EK,c=o.firstWeekContainsDate??(null==(a=null==(r=o.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??1,u=o.weekStartsOn??(null==(s=null==(i=o.locale)?void 0:i.options)?void 0:s.weekStartsOn)??0,d=nK(e);if(!gK(d))throw new RangeError("Invalid time value");let h=t.match(JK).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,HK[t])(e,l.formatLong)}return e}).join("").match(XK).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:aH(e)};if(qK[t])return{isToken:!0,value:e};if(t.match(nH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});l.localize.preprocessor&&(h=l.localize.preprocessor(d,h));const p={firstWeekContainsDate:c,weekStartsOn:u,locale:l};return h.map(n=>{if(!n.isToken)return n.value;const r=n.value;(function(e){return YK.test(e)}(r)||function(e){return GK.test(e)}(r))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(ZK.includes(e))throw new RangeError(r)}(r,t,String(e));return(0,qK[r[0]])(d,r,l.localize,p)}).join("")}function aH(e){const t=e.match(eH);return t?t[1].replace(tH,"'"):e}function iH(e,t){return function(e,t,n){const r=cK(),a=(null==n?void 0:n.locale)??r.locale??EK,i=fK(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:null==n?void 0:n.addSuffix,comparison:i});let o,l;i>0?(o=nK(t),l=nK(e)):(o=nK(e),l=nK(t));const c=xK(l,o),u=(mK(l)-mK(o))/1e3,d=Math.round((c-u)/60);let h;if(d<2)return(null==n?void 0:n.includeSeconds)?c<5?a.formatDistance("lessThanXSeconds",5,s):c<10?a.formatDistance("lessThanXSeconds",10,s):c<20?a.formatDistance("lessThanXSeconds",20,s):c<40?a.formatDistance("halfAMinute",0,s):c<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):0===d?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",d,s);if(d<45)return a.formatDistance("xMinutes",d,s);if(d<90)return a.formatDistance("aboutXHours",1,s);if(d<1440){const e=Math.round(d/60);return a.formatDistance("aboutXHours",e,s)}if(d<2520)return a.formatDistance("xDays",1,s);if(d<oK){const e=Math.round(d/1440);return a.formatDistance("xDays",e,s)}if(d<86400)return h=Math.round(d/oK),a.formatDistance("aboutXMonths",h,s);if(h=vK(l,o),h<12){const e=Math.round(d/oK);return a.formatDistance("xMonths",e,s)}{const e=h%12,t=Math.trunc(h/12);return e<3?a.formatDistance("aboutXYears",t,s):e<9?a.formatDistance("overXYears",t,s):a.formatDistance("almostXYears",t+1,s)}}(e,function(e){return rK(e,Date.now())}(e),t)}const sH={valueAppreciationRate:.17,poolDistribution:{creatorRoyalty:.4,educationFund:.25,palettePool:.2,gamecardPool:.15},estimatedCosts:{print:{"8x10":{fulfillment:1200,shipping:500},"11x14":{fulfillment:1500,shipping:600},"16x20":{fulfillment:2200,shipping:800},"18x24":{fulfillment:2800,shipping:900},"24x36":{fulfillment:4e3,shipping:1200}},framedPrint:{"8x10":{fulfillment:3e3,shipping:1e3},"11x14":{fulfillment:3800,shipping:1200},"16x20":{fulfillment:5e3,shipping:1500},"18x24":{fulfillment:6200,shipping:1800},"24x36":{fulfillment:8500,shipping:2500}},book:{standard:{fulfillment:2500,shipping:800},largeFormat:{fulfillment:3500,shipping:1e3}},infoCard:{single:{fulfillment:200,shipping:100}}},transactionFeeRate:.035,marketplaceFee:.05};function oH(e){const t=e.fulfillmentCostCents+e.platformFeesCents+e.shippingCostCents,n=Math.max(0,e.grossRevenueCents-t),r=Math.round(n*sH.valueAppreciationRate),a=sH.poolDistribution;return{grossProfitCents:n,valueAppreciationPoolCents:r,creatorRoyaltyCents:Math.round(r*a.creatorRoyalty),educationFundCents:Math.round(r*a.educationFund),palettePoolCents:Math.round(r*a.palettePool),gamecardPoolCents:Math.round(r*a.gamecardPool),platformRetentionCents:n-r,profitMarginPercent:e.grossRevenueCents>0?n/e.grossRevenueCents*100:0}}function lH(e,t,n){const r=sH.estimatedCosts;let a=2e3,i=800;if("print"===e&&r.print[t])a=r.print[t].fulfillment,i=r.print[t].shipping;else if("framedPrint"===e&&r.framedPrint[t])a=r.framedPrint[t].fulfillment,i=r.framedPrint[t].shipping;else if("book"===e){const e="large"===t?"largeFormat":"standard";a=r.book[e].fulfillment,i=r.book[e].shipping}else"infoCard"===e&&(a=r.infoCard.single.fulfillment,i=r.infoCard.single.shipping);return{grossRevenueCents:n,fulfillmentCostCents:a,platformFeesCents:Math.round(n*sH.transactionFeeRate),shippingCostCents:i}}function cH(e,t="print",n="16x20"){const r=oH(lH(t,n,Math.round(100*e)));return{grossProfit:r.grossProfitCents/100,creatorRoyalty:r.creatorRoyaltyCents/100,educationContribution:r.educationFundCents/100,profitMargin:r.profitMarginPercent}}const uH=ct.forwardRef(function({royaltyCentsEarned:e=0,royaltyOrdersCount:t=0,totalPrintRevenue:n=0,printOrderCount:r=0,viewCount:a=0,uniqueViewers:i=0,isOwner:s=!1,className:o=""},l){const c=e/100,u=n/100,d=100*sH.valueAppreciationRate,h=100*sH.marketplaceFee;!function(){const e=cH(49,"print","16x20");e.creatorRoyalty.toFixed(2),e.grossProfit,e.creatorRoyalty}();const p=cH(49,"print","16x20");return xt.jsxs(DD,{ref:l,className:`bg-gradient-to-br from-emerald-500/5 via-primary/5 to-amber-500/5 border-primary/20 ${o}`,children:[xt.jsx(ID,{className:"pb-2",children:xt.jsxs(LD,{className:"flex items-center gap-2 text-base",children:[xt.jsx(Jm,{className:"h-5 w-5 text-emerald-500"}),s?"Vision Value":"Ownership Value Potential",xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{children:xt.jsx(jf,{className:"h-4 w-4 text-muted-foreground"})}),xt.jsxs(Zb,{side:"right",className:"max-w-xs bg-card border-border",children:[xt.jsx("p",{className:"font-medium mb-1",children:"Profit-Based Value Appreciation"}),xt.jsxs("ul",{className:"text-xs space-y-1 text-muted-foreground",children:[xt.jsxs("li",{children:[" ",d,"% of ",xt.jsx("strong",{children:"profit"})," (not revenue) adds to vision value"]}),xt.jsxs("li",{children:[" ~$",p.creatorRoyalty.toFixed(2)," per $49 print after costs"]}),xt.jsxs("li",{children:[" ",xt.jsx("strong",{children:"No automatic payouts"}),"  sell, trade, or gift to realize gains"]}),xt.jsxs("li",{children:[" Only ",h,"% platform fee on sales"]})]})]})]})})]})}),xt.jsx($D,{className:"space-y-4",children:s?xt.jsxs(xt.Fragment,{children:[xt.jsxs("div",{className:"flex items-baseline gap-2",children:[xt.jsxs("span",{className:"text-3xl font-bold text-emerald-500",children:["+$",c.toFixed(2)]}),xt.jsx("span",{className:"text-sm text-muted-foreground",children:"accrued value"})]}),xt.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[xt.jsxs("div",{className:"p-3 rounded-lg bg-background/50 border border-border/50",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[xt.jsx(ug,{className:"h-4 w-4"}),xt.jsx("span",{className:"text-xs",children:"Orders by Others"})]}),xt.jsx("p",{className:"text-lg font-semibold",children:t})]}),xt.jsxs("div",{className:"p-3 rounded-lg bg-background/50 border border-border/50",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[xt.jsx(Ng,{className:"h-4 w-4"}),xt.jsx("span",{className:"text-xs",children:"Total Print Revenue"})]}),xt.jsxs("p",{className:"text-lg font-semibold",children:["$",u.toFixed(2)]})]})]}),xt.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-border/50",children:[xt.jsxs("div",{className:"text-center",children:[xt.jsx("p",{className:"text-lg font-semibold",children:a}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Views"})]}),xt.jsxs("div",{className:"text-center",children:[xt.jsx("p",{className:"text-lg font-semibold",children:i}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique Viewers"})]})]}),0===t&&xt.jsxs("p",{className:"text-xs text-muted-foreground italic border-t border-border/50 pt-3",children:["When others order prints, value accrues here. ",xt.jsx("strong",{children:"No automatic payouts"}),"  sell, trade, or gift to realize gains."]})]}):xt.jsxs(xt.Fragment,{children:[xt.jsxs("div",{className:"space-y-3",children:[xt.jsxs("p",{className:"text-sm text-muted-foreground",children:["As owner, ",xt.jsxs("span",{className:"text-emerald-500 font-medium",children:[d,"%"]})," of order ",xt.jsx("strong",{children:"profit"})," adds to this vision's value. Sell to realize gains."]}),xt.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsx("span",{className:"text-sm",children:"Example: $49 print order"}),xt.jsxs("span",{className:"text-lg font-bold text-emerald-500",children:["+$",p.creatorRoyalty.toFixed(2)]})]}),xt.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["After ~$",(49-p.grossProfit).toFixed(0)," fulfillment costs"]})]})]}),(a>0||i>0)&&xt.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-border/50",children:[xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[xt.jsx(Eg,{className:"h-3.5 w-3.5"}),xt.jsx("span",{className:"text-xs",children:"Interest"})]}),xt.jsxs("p",{className:"text-sm font-medium mt-0.5",children:[a," views"]})]}),xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[xt.jsx(Ng,{className:"h-3.5 w-3.5"}),xt.jsx("span",{className:"text-xs",children:"Potential"})]}),xt.jsx("p",{className:"text-sm font-medium mt-0.5 text-emerald-500",children:"High"})]})]}),xt.jsxs("p",{className:"text-xs text-muted-foreground italic",children:["Claim ownership to build value from print orders. ",xt.jsx("strong",{children:"No automatic payouts"}),"  sell, trade, or gift your vision to realize gains (only ",h,"% fee on sales)."]})]})})]})});function dH(e=6){return ct.useMemo(()=>{const t=Object.values(dL);return[...t].sort(()=>Math.random()-.5).slice(0,Math.min(e,t.length))},[e])}uH.displayName="RoyaltyPotentialCard";const hH=({royaltyCentsEarned:e,royaltyOrdersCount:t,totalPrintRevenue:n,printOrderCount:r,className:a=""})=>{const i=e/100,s=n/100,o=100*KU.valueAppreciationRate,l=100*KU.platformRetentionRate,c=100*KU.marketplaceTransactionFee,u=dH(1);return xt.jsxs(DD,{className:`relative overflow-hidden bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20 ${a}`,children:[u[0]&&xt.jsx("div",{className:"absolute inset-0 opacity-[0.08] bg-cover bg-center",style:{backgroundImage:`url(${u[0]})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/80 to-background/90"}),xt.jsx(ID,{className:"relative z-10 pb-2",children:xt.jsxs(LD,{className:"flex items-center gap-2 text-lg",children:[xt.jsx(Ng,{className:"h-5 w-5 text-primary"}),"Vision Value",xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{children:xt.jsx(jf,{className:"h-4 w-4 text-muted-foreground"})}),xt.jsxs(Zb,{side:"right",className:"max-w-xs bg-card border-border",children:[xt.jsx("p",{className:"font-medium mb-2",children:"How Value Appreciation Works"}),xt.jsxs("ul",{className:"text-xs space-y-1.5 text-muted-foreground",children:[xt.jsxs("li",{className:"flex items-start gap-1.5",children:[xt.jsx(gg,{className:"h-3 w-3 text-primary mt-0.5 shrink-0"}),xt.jsxs("span",{children:[xt.jsxs("strong",{className:"text-foreground",children:[o,"%"]})," of order ",xt.jsx("em",{children:"profit"})," adds to your vision's value"]})]}),xt.jsxs("li",{className:"flex items-start gap-1.5",children:[xt.jsx(Rm,{className:"h-3 w-3 text-muted-foreground mt-0.5 shrink-0"}),xt.jsxs("span",{children:[l,"% of profit covers printing, fulfillment & operations"]})]}),xt.jsxs("li",{className:"flex items-start gap-1.5",children:[xt.jsx(km,{className:"h-3 w-3 text-green-500 mt-0.5 shrink-0"}),xt.jsxs("span",{children:[xt.jsx("strong",{className:"text-foreground",children:"No automatic payouts"}),"  sell, trade, or gift your vision to realize gains"]})]})]})]})]})})]})}),xt.jsxs($D,{className:"relative z-10 space-y-4",children:[xt.jsxs("div",{className:"flex items-baseline gap-2",children:[xt.jsxs("span",{className:"text-3xl font-bold text-primary",children:["+$",i.toFixed(2)]}),xt.jsx("span",{className:"text-sm text-muted-foreground",children:"accrued value"})]}),xt.jsxs(MD,{variant:"outline",className:"gap-1.5 bg-green-500/10 text-green-600 border-green-500/30",children:[xt.jsx(Ng,{className:"h-3 w-3"}),"Value from ",t," print order",1!==t?"s":""," by others"]}),xt.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[xt.jsxs("div",{className:"p-3 rounded-lg bg-background/50 border border-border/50",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[xt.jsx(ug,{className:"h-4 w-4"}),xt.jsx("span",{className:"text-xs",children:"Orders by Others"})]}),xt.jsx("p",{className:"text-lg font-semibold",children:t})]}),xt.jsxs("div",{className:"p-3 rounded-lg bg-background/50 border border-border/50",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[xt.jsx(Jm,{className:"h-4 w-4"}),xt.jsx("span",{className:"text-xs",children:"Total Print Revenue"})]}),xt.jsxs("p",{className:"text-lg font-semibold",children:["$",s.toFixed(2)]})]})]}),r>0&&xt.jsxs("div",{className:"text-xs text-muted-foreground border-t border-border/50 pt-3",children:[xt.jsxs("div",{className:"flex justify-between",children:[xt.jsx("span",{children:"Total orders on this vision:"}),xt.jsx("span",{className:"font-medium",children:r})]}),xt.jsxs("div",{className:"flex justify-between mt-1",children:[xt.jsxs("span",{children:["Value added (",o,"% of profit):"]}),xt.jsxs("span",{className:"font-medium text-primary",children:["+$",i.toFixed(2)]})]}),xt.jsxs("div",{className:"flex justify-between mt-1 opacity-60",children:[xt.jsxs("span",{children:["Platform & fulfillment (",l,"% of profit):"]}),xt.jsxs("span",{className:"font-medium",children:["$",(s-i).toFixed(2)]})]})]}),0===t&&xt.jsx("div",{className:"p-3 rounded-lg bg-primary/5 border border-primary/20",children:xt.jsxs("p",{className:"text-xs text-muted-foreground",children:[xt.jsx("strong",{className:"text-foreground",children:"Grow value:"})," When others order prints,",o,"% of order ",xt.jsx("em",{children:"profit"})," adds to this vision's value.",xt.jsx("strong",{className:"text-foreground",children:" Sell, trade, or gift"})," your vision to realize gains  no automatic payouts."]})}),xt.jsx("div",{className:"p-3 rounded-lg bg-green-500/5 border border-green-500/20",children:xt.jsxs("div",{className:"flex flex-col gap-1",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[xt.jsx(Wf,{className:"h-3.5 w-3.5 text-green-500"}),xt.jsxs("span",{className:"text-muted-foreground",children:["Sell on marketplace: ",xt.jsxs("strong",{className:"text-foreground",children:["only ",c,"% fee"]})]})]}),xt.jsx("p",{className:"text-[10px] text-muted-foreground/70",children:"Visions can also be traded or gifted to other members"})]})})]})]})};var pH="ScrollArea",[mH]=Kh(pH),[fH,gH]=mH(pH),yH=ct.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,l]=ct.useState(null),[c,u]=ct.useState(null),[d,h]=ct.useState(null),[p,m]=ct.useState(null),[f,g]=ct.useState(null),[y,v]=ct.useState(0),[x,b]=ct.useState(0),[w,k]=ct.useState(!1),[N,j]=ct.useState(!1),_=Uh(t,e=>l(e)),S=pI(a);return xt.jsx(fH,{scope:n,type:r,dir:S,scrollHideDelay:i,scrollArea:o,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:w,onScrollbarXEnabledChange:k,scrollbarY:f,onScrollbarYChange:g,scrollbarYEnabled:N,onScrollbarYEnabledChange:j,onCornerWidthChange:v,onCornerHeightChange:b,children:xt.jsx(np.div,{dir:S,...s,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});yH.displayName=pH;var vH="ScrollAreaViewport",xH=ct.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,s=gH(vH,n),o=Uh(t,ct.useRef(null),s.onViewportChange);return xt.jsxs(xt.Fragment,{children:[xt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),xt.jsx(np.div,{"data-radix-scroll-area-viewport":"",...i,ref:o,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:xt.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});xH.displayName=vH;var bH="ScrollAreaScrollbar",wH=ct.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=gH(bH,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o="horizontal"===e.orientation;return ct.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),"hover"===a.type?xt.jsx(kH,{...r,ref:t,forceMount:n}):"scroll"===a.type?xt.jsx(NH,{...r,ref:t,forceMount:n}):"auto"===a.type?xt.jsx(jH,{...r,ref:t,forceMount:n}):"always"===a.type?xt.jsx(_H,{...r,ref:t}):null});wH.displayName=bH;var kH=ct.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=gH(bH,e.__scopeScrollArea),[i,s]=ct.useState(!1);return ct.useEffect(()=>{const e=a.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),s(!0)},r=()=>{t=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[a.scrollArea,a.scrollHideDelay]),xt.jsx(vp,{present:n||i,children:xt.jsx(jH,{"data-state":i?"visible":"hidden",...r,ref:t})})}),NH=ct.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=gH(bH,e.__scopeScrollArea),i="horizontal"===e.orientation,s=WH(()=>l("SCROLL_END"),100),[o,l]=(c="hidden",u={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},ct.useReducer((e,t)=>u[e][t]??e,c));var c,u;return ct.useEffect(()=>{if("idle"===o){const e=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(e)}},[o,a.scrollHideDelay,l]),ct.useEffect(()=>{const e=a.viewport,t=i?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(l("SCROLL"),s()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[a.viewport,i,l,s]),xt.jsx(vp,{present:n||"hidden"!==o,children:xt.jsx(_H,{"data-state":"hidden"===o?"hidden":"visible",...r,ref:t,onPointerEnter:Vh(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Vh(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),jH=ct.forwardRef((e,t)=>{const n=gH(bH,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,s]=ct.useState(!1),o="horizontal"===e.orientation,l=WH(()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?e:t)}},10);return QH(n.viewport,l),QH(n.content,l),xt.jsx(vp,{present:r||i,children:xt.jsx(_H,{"data-state":i?"visible":"hidden",...a,ref:t})})}),_H=ct.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=gH(bH,e.__scopeScrollArea),i=ct.useRef(null),s=ct.useRef(0),[o,l]=ct.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=LH(o.viewport,o.content),u={...r,sizes:o,onSizesChange:l,hasThumb:Boolean(c>0&&c<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:e=>s.current=e};function d(e,t){return function(e,t,n,r="ltr"){const a=FH(n),i=a/2,s=t||i,o=a-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,d="ltr"===r?[0,u]:[-1*u,0];return zH([l,c],d)(e)}(e,s.current,o,t)}return"horizontal"===n?xt.jsx(SH,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const e=$H(a.viewport.scrollLeft,o,a.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=d(e,a.dir))}}):"vertical"===n?xt.jsx(CH,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const e=$H(a.viewport.scrollTop,o);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=d(e))}}):null}),SH=ct.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=gH(bH,e.__scopeScrollArea),[s,o]=ct.useState(),l=ct.useRef(null),c=Uh(t,l,i.onScrollbarXChange);return ct.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),xt.jsx(RH,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":FH(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(i.viewport){const r=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),qH(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:IH(s.paddingLeft),paddingEnd:IH(s.paddingRight)}})}})}),CH=ct.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=gH(bH,e.__scopeScrollArea),[s,o]=ct.useState(),l=ct.useRef(null),c=Uh(t,l,i.onScrollbarYChange);return ct.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),xt.jsx(RH,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":FH(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(i.viewport){const r=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),qH(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:IH(s.paddingTop),paddingEnd:IH(s.paddingBottom)}})}})}),[PH,EH]=mH(bH),RH=ct.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=e,p=gH(bH,n),[m,f]=ct.useState(null),g=Uh(t,e=>f(e)),y=ct.useRef(null),v=ct.useRef(""),x=p.viewport,b=r.content-r.viewport,w=ap(u),k=ap(l),N=WH(d,10);function j(e){if(y.current){const t=e.clientX-y.current.left,n=e.clientY-y.current.top;c({x:t,y:n})}}return ct.useEffect(()=>{const e=e=>{const t=e.target;(null==m?void 0:m.contains(t))&&w(e,b)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[x,m,b,w]),ct.useEffect(k,[r,k]),QH(m,N),QH(p.content,N),xt.jsx(PH,{scope:n,scrollbar:m,hasThumb:a,onThumbChange:ap(i),onThumbPointerUp:ap(s),onThumbPositionChange:k,onThumbPointerDown:ap(o),children:xt.jsx(np.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:Vh(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),y.current=m.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),j(e)}}),onPointerMove:Vh(e.onPointerMove,j),onPointerUp:Vh(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),OH="ScrollAreaThumb",TH=ct.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=EH(OH,e.__scopeScrollArea);return xt.jsx(vp,{present:n||a.hasThumb,children:xt.jsx(MH,{ref:t,...r})})}),MH=ct.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=gH(OH,n),s=EH(OH,n),{onThumbPositionChange:o}=s,l=Uh(t,e=>s.onThumbChange(e)),c=ct.useRef(void 0),u=WH(()=>{c.current&&(c.current(),c.current=void 0)},100);return ct.useEffect(()=>{const e=i.viewport;if(e){const t=()=>{if(u(),!c.current){const t=VH(e,o);c.current=t,o()}};return o(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,u,o]),xt.jsx(np.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Vh(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;s.onThumbPointerDown({x:n,y:r})}),onPointerUp:Vh(e.onPointerUp,s.onThumbPointerUp)})});TH.displayName=OH;var AH="ScrollAreaCorner",BH=ct.forwardRef((e,t)=>{const n=gH(AH,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?xt.jsx(DH,{...e,ref:t}):null});BH.displayName=AH;var DH=ct.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=gH(AH,n),[i,s]=ct.useState(0),[o,l]=ct.useState(0),c=Boolean(i&&o);return QH(a.scrollbarX,()=>{var e;const t=(null==(e=a.scrollbarX)?void 0:e.offsetHeight)||0;a.onCornerHeightChange(t),l(t)}),QH(a.scrollbarY,()=>{var e;const t=(null==(e=a.scrollbarY)?void 0:e.offsetWidth)||0;a.onCornerWidthChange(t),s(t)}),c?xt.jsx(np.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0,...e.style}}):null});function IH(e){return e?parseInt(e,10):0}function LH(e,t){const n=e/t;return isNaN(n)?0:n}function FH(e){const t=LH(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function $H(e,t,n="ltr"){const r=FH(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-r,l=az(e,"ltr"===n?[0,s]:[-1*s,0]);return zH([0,s],[0,o])(l)}function zH(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function qH(e,t){return e>0&&e<t}var VH=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,o=n.top!==i.top;(s||o)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function WH(e,t){const n=ap(e),r=ct.useRef(0);return ct.useEffect(()=>()=>window.clearTimeout(r.current),[]),ct.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function QH(e,t){const n=ap(t);gp(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}var UH=yH,KH=xH,HH=BH;const GH=ct.forwardRef(({className:e,children:t,...n},r)=>xt.jsxs(UH,{ref:r,className:Cy("relative overflow-hidden",e),...n,children:[xt.jsx(KH,{className:"h-full w-full rounded-[inherit]",children:t}),xt.jsx(YH,{}),xt.jsx(HH,{})]}));GH.displayName=UH.displayName;const YH=ct.forwardRef(({className:e,orientation:t="vertical",...n},r)=>xt.jsx(wH,{ref:r,orientation:t,className:Cy("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:xt.jsx(TH,{className:"relative flex-1 rounded-full bg-border"})}));YH.displayName=wH.displayName;const ZH=({visualizationId:e,compact:t=!1})=>{const[n,r]=ct.useState([]),[a,i]=ct.useState(!0);ct.useEffect(()=>{(async()=>{i(!0);const{data:t,error:n}=await KC.from("visualization_transfers").select("*").eq("visualization_id",e).order("created_at",{ascending:!1});if(n||!t)return void i(!1);const a=new Set;t.forEach(e=>{e.from_user_id&&a.add(e.from_user_id),e.to_user_id&&a.add(e.to_user_id)});let s={};if(a.size>0){const{data:e}=await KC.from("profiles").select("user_id, display_name").in("user_id",Array.from(a));s=(e||[]).reduce((e,t)=>(e[t.user_id]=t.display_name,e),{})}const o=t.map(e=>({...e,from_display_name:e.from_user_id?s[e.from_user_id]:null,to_display_name:s[e.to_user_id]||null}));r(o),i(!1)})()},[e]);const s=e=>{switch(e){case"purchase":return xt.jsx(Jm,{className:"h-3.5 w-3.5 text-green-500"});case"free_claim":return xt.jsx(ff,{className:"h-3.5 w-3.5 text-blue-500"});case"gift":return xt.jsx(gg,{className:"h-3.5 w-3.5 text-purple-500"});default:return xt.jsx(Nm,{className:"h-3.5 w-3.5 text-muted-foreground"})}},o=e=>{switch(e){case"purchase":return"Purchased";case"free_claim":return"Claimed";case"gift":return"Gifted";default:return"Transferred"}};if(a)return xt.jsx(DD,{className:t?"border-0 shadow-none":"",children:xt.jsx($D,{className:"flex items-center justify-center py-6",children:xt.jsx(Pf,{className:"h-5 w-5 animate-spin text-muted-foreground"})})});if(0===n.length)return xt.jsx(DD,{className:t?"border-0 shadow-none":"",children:xt.jsxs($D,{className:"flex flex-col items-center justify-center py-6 text-center",children:[xt.jsx(wf,{className:"h-8 w-8 text-muted-foreground/30 mb-2"}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:"No transfer history"}),xt.jsx("p",{className:"text-xs text-muted-foreground/70",children:"This vision hasn't been traded yet"})]})});const l=xt.jsx(GH,{className:t?"max-h-48":"max-h-64",children:xt.jsx("div",{className:"space-y-2",children:n.map((e,t)=>xt.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50 text-sm",children:[xt.jsx("div",{className:"flex items-center justify-center h-7 w-7 rounded-full bg-background shrink-0",children:s(e.transfer_type)}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[e.from_user_id?xt.jsx("span",{className:"text-muted-foreground truncate max-w-[80px]",children:e.from_display_name||"Unknown"}):xt.jsx("span",{className:"text-muted-foreground italic",children:"Unclaimed"}),xt.jsx(Nm,{className:"h-3 w-3 text-muted-foreground/50 shrink-0"}),xt.jsx("span",{className:"font-medium truncate max-w-[80px]",children:e.to_display_name||"Unknown"})]}),xt.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[xt.jsx(MD,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:o(e.transfer_type)}),xt.jsx("span",{children:rH(new Date(e.created_at),"MMM d, yyyy")})]})]}),0===t&&xt.jsx(MD,{variant:"outline",className:"text-[10px] shrink-0",children:"Latest"})]},e.id))})});return t?l:xt.jsxs(DD,{children:[xt.jsx(ID,{className:"pb-3",children:xt.jsxs(LD,{className:"text-base flex items-center gap-2",children:[xt.jsx(wf,{className:"h-4 w-4"}),"Transfer History",xt.jsxs(MD,{variant:"secondary",className:"text-xs ml-auto",children:[n.length," transfer",1!==n.length?"s":""]})]})}),xt.jsx($D,{className:"pt-0",children:l})]})};var XH,JH,eG;(JH=XH||(XH={})).assertEqual=e=>{},JH.assertIs=function(e){},JH.assertNever=function(e){throw new Error},JH.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},JH.getValidEnumValues=e=>{const t=JH.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(const r of t)n[r]=e[r];return JH.objectValues(n)},JH.objectValues=e=>JH.objectKeys(e).map(function(t){return e[t]}),JH.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},JH.find=(e,t)=>{for(const n of e)if(t(n))return n},JH.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,JH.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},JH.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(eG||(eG={})).mergeShapes=(e,t)=>({...e,...t});const tG=XH.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),nG=e=>{switch(typeof e){case"undefined":return tG.undefined;case"string":return tG.string;case"number":return Number.isNaN(e)?tG.nan:tG.number;case"boolean":return tG.boolean;case"function":return tG.function;case"bigint":return tG.bigint;case"symbol":return tG.symbol;case"object":return Array.isArray(e)?tG.array:null===e?tG.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?tG.promise:"undefined"!=typeof Map&&e instanceof Map?tG.map:"undefined"!=typeof Set&&e instanceof Set?tG.set:"undefined"!=typeof Date&&e instanceof Date?tG.date:tG.object;default:return tG.unknown}},rG=XH.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class aG extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){const n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof aG))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,XH.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}aG.create=e=>new aG(e);const iG=(e,t)=>{let n;switch(e.code){case rG.invalid_type:n=e.received===tG.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case rG.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,XH.jsonStringifyReplacer)}`;break;case rG.unrecognized_keys:n=`Unrecognized key(s) in object: ${XH.joinValues(e.keys,", ")}`;break;case rG.invalid_union:n="Invalid input";break;case rG.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${XH.joinValues(e.options)}`;break;case rG.invalid_enum_value:n=`Invalid enum value. Expected ${XH.joinValues(e.options)}, received '${e.received}'`;break;case rG.invalid_arguments:n="Invalid function arguments";break;case rG.invalid_return_type:n="Invalid function return type";break;case rG.invalid_date:n="Invalid date";break;case rG.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:XH.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case rG.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case rG.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case rG.custom:n="Invalid input";break;case rG.invalid_intersection_types:n="Intersection results could not be merged";break;case rG.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case rG.not_finite:n="Number must be finite";break;default:n=t.defaultError,XH.assertNever(e)}return{message:n}};let sG=iG;function oG(e,t){const n=sG,r=(e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(void 0!==a.message)return{...a,path:i,message:a.message};let o="";const l=r.filter(e=>!!e).slice().reverse();for(const c of l)o=c(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===iG?void 0:iG].filter(e=>!!e)});e.common.issues.push(r)}class lG{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return cG;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return lG.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:a}=r;if("aborted"===t.status)return cG;if("aborted"===a.status)return cG;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!r.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const cG=Object.freeze({status:"aborted"}),uG=e=>({status:"dirty",value:e}),dG=e=>({status:"valid",value:e}),hG=e=>"aborted"===e.status,pG=e=>"dirty"===e.status,mG=e=>"valid"===e.status,fG=e=>"undefined"!=typeof Promise&&e instanceof Promise;var gG,yG;(yG=gG||(gG={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},yG.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class vG{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xG=(e,t)=>{if(mG(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new aG(e.common.issues);return this._error=t,this._error}}};function bG(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{const{message:i}=e;return"invalid_enum_value"===t.code?{message:i??a.defaultError}:void 0===a.data?{message:i??r??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:i??n??a.defaultError}},description:a}}class wG{get description(){return this._def.description}_getType(e){return nG(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:nG(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new lG,ctx:{common:e.parent.common,data:e.data,parsedType:nG(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(fG(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(null==t?void 0:t.async)??!1,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nG(e)},r=this._parseSync({data:e,path:n.path,parent:n});return xG(n,r)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nG(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return mG(t)?{value:t.value}:{issues:r.common.issues}}catch(BPe){(null==(n=null==(t=null==BPe?void 0:BPe.message)?void 0:t.toLowerCase())?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(e=>mG(e)?{value:e.value}:{issues:r.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nG(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(fG(r)?r:Promise.resolve(r));return xG(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{const a=e(t),i=()=>r.addIssue({code:rG.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new xY({schema:this,typeName:PY.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return bY.create(this,this._def)}nullable(){return wY.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return aY.create(this)}promise(){return vY.create(this,this._def)}or(e){return oY.create([this,e],this._def)}and(e){return cY.create(this,e,this._def)}transform(e){return new xY({...bG(this._def),schema:this,typeName:PY.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new kY({...bG(this._def),innerType:this,defaultValue:t,typeName:PY.ZodDefault})}brand(){return new _Y({typeName:PY.ZodBranded,type:this,...bG(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new NY({...bG(this._def),innerType:this,catchValue:t,typeName:PY.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return SY.create(this,e)}readonly(){return CY.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const kG=/^c[^\s-]{8,}$/i,NG=/^[0-9a-z]+$/,jG=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_G=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,SG=/^[a-z0-9_-]{21}$/i,CG=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,EG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let RG;const OG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,MG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,AG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,BG=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,DG=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,IG="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",LG=new RegExp(`^${IG}$`);function FG(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function $G(e){return new RegExp(`^${FG(e)}$`)}function zG(e){let t=`${IG}T${FG(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function qG(e,t){return!("v4"!==t&&t||!OG.test(e))||!("v6"!==t&&t||!MG.test(e))}function VG(e,t){if(!CG.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return"object"==typeof a&&null!==a&&((!("typ"in a)||"JWT"===(null==a?void 0:a.typ))&&(!!a.alg&&(!t||a.alg===t)))}catch{return!1}}function WG(e,t){return!("v4"!==t&&t||!TG.test(e))||!("v6"!==t&&t||!AG.test(e))}class QG extends wG{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==tG.string){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.string,received:t.parsedType}),cG}const t=new lG;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const a=e.data.length>r.value,i=e.data.length<r.value;(a||i)&&(n=this._getOrReturnCtx(e,n),a?oG(n,{code:rG.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):i&&oG(n,{code:rG.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)EG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"email",code:rG.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)RG||(RG=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),RG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"emoji",code:rG.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)_G.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"uuid",code:rG.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)SG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"nanoid",code:rG.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)kG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"cuid",code:rG.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)NG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"cuid2",code:rG.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)jG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"ulid",code:rG.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),oG(n,{validation:"url",code:rG.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"regex",code:rG.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){zG(r).test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){LG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){$G(r).test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?PG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"duration",code:rG.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?qG(e.data,r.version)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"ip",code:rG.invalid_string,message:r.message}),t.dirty()):"jwt"===r.kind?VG(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"jwt",code:rG.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?WG(e.data,r.version)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"cidr",code:rG.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?BG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"base64",code:rG.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?DG.test(e.data)||(n=this._getOrReturnCtx(e,n),oG(n,{validation:"base64url",code:rG.invalid_string,message:r.message}),t.dirty()):XH.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:rG.invalid_string,...gG.errToObj(n)})}_addCheck(e){return new QG({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...gG.errToObj(e)})}url(e){return this._addCheck({kind:"url",...gG.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...gG.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...gG.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...gG.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...gG.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...gG.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...gG.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...gG.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...gG.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...gG.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...gG.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...gG.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:(null==e?void 0:e.offset)??!1,local:(null==e?void 0:e.local)??!1,...gG.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...gG.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...gG.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...gG.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...gG.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...gG.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...gG.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...gG.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...gG.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...gG.errToObj(t)})}nonempty(e){return this.min(1,gG.errToObj(e))}trim(){return new QG({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new QG({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new QG({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function UG(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}QG.create=e=>new QG({checks:[],typeName:PY.ZodString,coerce:(null==e?void 0:e.coerce)??!1,...bG(e)});class KG extends wG{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==tG.number){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.number,received:t.parsedType}),cG}let t;const n=new lG;for(const r of this._def.checks)if("int"===r.kind)XH.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),oG(t,{code:rG.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),oG(t,{code:rG.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),oG(t,{code:rG.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==UG(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),oG(t,{code:rG.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),oG(t,{code:rG.not_finite,message:r.message}),n.dirty()):XH.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,gG.toString(t))}gt(e,t){return this.setLimit("min",e,!1,gG.toString(t))}lte(e,t){return this.setLimit("max",e,!0,gG.toString(t))}lt(e,t){return this.setLimit("max",e,!1,gG.toString(t))}setLimit(e,t,n,r){return new KG({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:gG.toString(r)}]})}_addCheck(e){return new KG({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:gG.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:gG.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:gG.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:gG.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:gG.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:gG.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:gG.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:gG.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:gG.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&XH.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}KG.create=e=>new KG({checks:[],typeName:PY.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...bG(e)});class HG extends wG{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==tG.bigint)return this._getInvalidInput(e);let t;const n=new lG;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),oG(t,{code:rG.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),oG(t,{code:rG.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),oG(t,{code:rG.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):XH.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.bigint,received:t.parsedType}),cG}gte(e,t){return this.setLimit("min",e,!0,gG.toString(t))}gt(e,t){return this.setLimit("min",e,!1,gG.toString(t))}lte(e,t){return this.setLimit("max",e,!0,gG.toString(t))}lt(e,t){return this.setLimit("max",e,!1,gG.toString(t))}setLimit(e,t,n,r){return new HG({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:gG.toString(r)}]})}_addCheck(e){return new HG({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:gG.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:gG.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:gG.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:gG.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:gG.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}HG.create=e=>new HG({checks:[],typeName:PY.ZodBigInt,coerce:(null==e?void 0:e.coerce)??!1,...bG(e)});class GG extends wG{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==tG.boolean){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.boolean,received:t.parsedType}),cG}return dG(e.data)}}GG.create=e=>new GG({typeName:PY.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...bG(e)});class YG extends wG{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==tG.date){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.date,received:t.parsedType}),cG}if(Number.isNaN(e.data.getTime())){return oG(this._getOrReturnCtx(e),{code:rG.invalid_date}),cG}const t=new lG;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),oG(n,{code:rG.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):XH.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new YG({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:gG.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:gG.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}YG.create=e=>new YG({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:PY.ZodDate,...bG(e)});class ZG extends wG{_parse(e){if(this._getType(e)!==tG.symbol){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.symbol,received:t.parsedType}),cG}return dG(e.data)}}ZG.create=e=>new ZG({typeName:PY.ZodSymbol,...bG(e)});class XG extends wG{_parse(e){if(this._getType(e)!==tG.undefined){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.undefined,received:t.parsedType}),cG}return dG(e.data)}}XG.create=e=>new XG({typeName:PY.ZodUndefined,...bG(e)});class JG extends wG{_parse(e){if(this._getType(e)!==tG.null){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.null,received:t.parsedType}),cG}return dG(e.data)}}JG.create=e=>new JG({typeName:PY.ZodNull,...bG(e)});class eY extends wG{constructor(){super(...arguments),this._any=!0}_parse(e){return dG(e.data)}}eY.create=e=>new eY({typeName:PY.ZodAny,...bG(e)});class tY extends wG{constructor(){super(...arguments),this._unknown=!0}_parse(e){return dG(e.data)}}tY.create=e=>new tY({typeName:PY.ZodUnknown,...bG(e)});class nY extends wG{_parse(e){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.never,received:t.parsedType}),cG}}nY.create=e=>new nY({typeName:PY.ZodNever,...bG(e)});class rY extends wG{_parse(e){if(this._getType(e)!==tG.undefined){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.void,received:t.parsedType}),cG}return dG(e.data)}}rY.create=e=>new rY({typeName:PY.ZodVoid,...bG(e)});class aY extends wG{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==tG.array)return oG(t,{code:rG.invalid_type,expected:tG.array,received:t.parsedType}),cG;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(oG(t,{code:e?rG.too_big:rG.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(oG(t,{code:rG.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(oG(t,{code:rG.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new vG(t,e,t.path,n)))).then(e=>lG.mergeArray(n,e));const a=[...t.data].map((e,n)=>r.type._parseSync(new vG(t,e,t.path,n)));return lG.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new aY({...this._def,minLength:{value:e,message:gG.toString(t)}})}max(e,t){return new aY({...this._def,maxLength:{value:e,message:gG.toString(t)}})}length(e,t){return new aY({...this._def,exactLength:{value:e,message:gG.toString(t)}})}nonempty(e){return this.min(1,e)}}function iY(e){if(e instanceof sY){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=bY.create(iY(r))}return new sY({...e._def,shape:()=>t})}return e instanceof aY?new aY({...e._def,type:iY(e.element)}):e instanceof bY?bY.create(iY(e.unwrap())):e instanceof wY?wY.create(iY(e.unwrap())):e instanceof uY?uY.create(e.items.map(e=>iY(e))):e}aY.create=(e,t)=>new aY({type:e,minLength:null,maxLength:null,exactLength:null,typeName:PY.ZodArray,...bG(t)});class sY extends wG{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=XH.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==tG.object){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.object,received:t.parsedType}),cG}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof nY&&"strip"===this._def.unknownKeys))for(const o in n.data)a.includes(o)||i.push(o);const s=[];for(const o of a){const e=r[o],t=n.data[o];s.push({key:{status:"valid",value:o},value:e._parse(new vG(n,t,n.path,o)),alwaysSet:o in n.data})}if(this._def.catchall instanceof nY){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of i)s.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)i.length>0&&(oG(n,{code:rG.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const r=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new vG(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of s){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>lG.mergeObjectSync(t,e)):lG.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return gG.errToObj,new sY({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,a;const i=(null==(a=(r=this._def).errorMap)?void 0:a.call(r,t,n).message)??n.defaultError;return"unrecognized_keys"===t.code?{message:gG.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new sY({...this._def,unknownKeys:"strip"})}passthrough(){return new sY({...this._def,unknownKeys:"passthrough"})}extend(e){return new sY({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new sY({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:PY.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new sY({...this._def,catchall:e})}pick(e){const t={};for(const n of XH.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new sY({...this._def,shape:()=>t})}omit(e){const t={};for(const n of XH.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new sY({...this._def,shape:()=>t})}deepPartial(){return iY(this)}partial(e){const t={};for(const n of XH.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new sY({...this._def,shape:()=>t})}required(e){const t={};for(const n of XH.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof bY;)e=e._def.innerType;t[n]=e}return new sY({...this._def,shape:()=>t})}keyof(){return fY(XH.objectKeys(this.shape))}}sY.create=(e,t)=>new sY({shape:()=>e,unknownKeys:"strip",catchall:nY.create(),typeName:PY.ZodObject,...bG(t)}),sY.strictCreate=(e,t)=>new sY({shape:()=>e,unknownKeys:"strict",catchall:nY.create(),typeName:PY.ZodObject,...bG(t)}),sY.lazycreate=(e,t)=>new sY({shape:e,unknownKeys:"strip",catchall:nY.create(),typeName:PY.ZodObject,...bG(t)});class oY extends wG{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map(e=>new aG(e.ctx.common.issues));return oG(t,{code:rG.invalid_union,unionErrors:n}),cG});{let e;const r=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=r.map(e=>new aG(e));return oG(t,{code:rG.invalid_union,unionErrors:a}),cG}}get options(){return this._def.options}}function lY(e,t){const n=nG(e),r=nG(t);if(e===t)return{valid:!0,data:e};if(n===tG.object&&r===tG.object){const n=XH.objectKeys(t),r=XH.objectKeys(e).filter(e=>-1!==n.indexOf(e)),a={...e,...t};for(const i of r){const n=lY(e[i],t[i]);if(!n.valid)return{valid:!1};a[i]=n.data}return{valid:!0,data:a}}if(n===tG.array&&r===tG.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const a=lY(e[r],t[r]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===tG.date&&r===tG.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}oY.create=(e,t)=>new oY({options:e,typeName:PY.ZodUnion,...bG(t)});class cY extends wG{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(hG(e)||hG(r))return cG;const a=lY(e.value,r.value);return a.valid?((pG(e)||pG(r))&&t.dirty(),{status:t.value,value:a.data}):(oG(n,{code:rG.invalid_intersection_types}),cG)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}cY.create=(e,t,n)=>new cY({left:e,right:t,typeName:PY.ZodIntersection,...bG(n)});class uY extends wG{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==tG.array)return oG(n,{code:rG.invalid_type,expected:tG.array,received:n.parsedType}),cG;if(n.data.length<this._def.items.length)return oG(n,{code:rG.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cG;!this._def.rest&&n.data.length>this._def.items.length&&(oG(n,{code:rG.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new vG(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>lG.mergeArray(t,e)):lG.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new uY({...this._def,rest:e})}}uY.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new uY({items:e,typeName:PY.ZodTuple,rest:null,...bG(t)})};class dY extends wG{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==tG.map)return oG(n,{code:rG.invalid_type,expected:tG.map,received:n.parsedType}),cG;const r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([e,t],i)=>({key:r._parse(new vG(n,e,n.path,[i,"key"])),value:a._parse(new vG(n,t,n.path,[i,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of i){const r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return cG;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of i){const r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return cG;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}dY.create=(e,t,n)=>new dY({valueType:t,keyType:e,typeName:PY.ZodMap,...bG(n)});class hY extends wG{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==tG.set)return oG(n,{code:rG.invalid_type,expected:tG.set,received:n.parsedType}),cG;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(oG(n,{code:rG.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(oG(n,{code:rG.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function i(e){const n=new Set;for(const r of e){if("aborted"===r.status)return cG;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map((e,t)=>a._parse(new vG(n,e,n.path,t)));return n.common.async?Promise.all(s).then(e=>i(e)):i(s)}min(e,t){return new hY({...this._def,minSize:{value:e,message:gG.toString(t)}})}max(e,t){return new hY({...this._def,maxSize:{value:e,message:gG.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}hY.create=(e,t)=>new hY({valueType:e,minSize:null,maxSize:null,typeName:PY.ZodSet,...bG(t)});class pY extends wG{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}pY.create=(e,t)=>new pY({getter:e,typeName:PY.ZodLazy,...bG(t)});class mY extends wG{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return oG(t,{received:t.data,code:rG.invalid_literal,expected:this._def.value}),cG}return{status:"valid",value:e.data}}get value(){return this._def.value}}function fY(e,t){return new gY({values:e,typeName:PY.ZodEnum,...bG(t)})}mY.create=(e,t)=>new mY({value:e,typeName:PY.ZodLiteral,...bG(t)});class gY extends wG{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return oG(t,{expected:XH.joinValues(n),received:t.parsedType,code:rG.invalid_type}),cG}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return oG(t,{received:t.data,code:rG.invalid_enum_value,options:n}),cG}return dG(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return gY.create(e,{...this._def,...t})}exclude(e,t=this._def){return gY.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}gY.create=fY;class yY extends wG{_parse(e){const t=XH.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==tG.string&&n.parsedType!==tG.number){const e=XH.objectValues(t);return oG(n,{expected:XH.joinValues(e),received:n.parsedType,code:rG.invalid_type}),cG}if(this._cache||(this._cache=new Set(XH.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=XH.objectValues(t);return oG(n,{received:n.data,code:rG.invalid_enum_value,options:e}),cG}return dG(e.data)}get enum(){return this._def.values}}yY.create=(e,t)=>new yY({values:e,typeName:PY.ZodNativeEnum,...bG(t)});class vY extends wG{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==tG.promise&&!1===t.common.async)return oG(t,{code:rG.invalid_type,expected:tG.promise,received:t.parsedType}),cG;const n=t.parsedType===tG.promise?t.data:Promise.resolve(t.data);return dG(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}vY.create=(e,t)=>new vY({type:e,typeName:PY.ZodPromise,...bG(t)});class xY extends wG{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===PY.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{oG(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){const e=r.transform(n.data,a);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return cG;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?cG:"dirty"===r.status||"dirty"===t.value?uG(r.value):r});{if("aborted"===t.value)return cG;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?cG:"dirty"===r.status||"dirty"===t.value?uG(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?cG:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?cG:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!mG(e))return cG;const i=r.transform(e.value,a);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>mG(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):cG)}XH.assertNever(r)}}xY.create=(e,t,n)=>new xY({schema:e,typeName:PY.ZodEffects,effect:t,...bG(n)}),xY.createWithPreprocess=(e,t,n)=>new xY({schema:t,effect:{type:"preprocess",transform:e},typeName:PY.ZodEffects,...bG(n)});class bY extends wG{_parse(e){return this._getType(e)===tG.undefined?dG(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bY.create=(e,t)=>new bY({innerType:e,typeName:PY.ZodOptional,...bG(t)});class wY extends wG{_parse(e){return this._getType(e)===tG.null?dG(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wY.create=(e,t)=>new wY({innerType:e,typeName:PY.ZodNullable,...bG(t)});class kY extends wG{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===tG.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}kY.create=(e,t)=>new kY({innerType:e,typeName:PY.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...bG(t)});class NY extends wG{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return fG(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new aG(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new aG(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}NY.create=(e,t)=>new NY({innerType:e,typeName:PY.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...bG(t)});class jY extends wG{_parse(e){if(this._getType(e)!==tG.nan){const t=this._getOrReturnCtx(e);return oG(t,{code:rG.invalid_type,expected:tG.nan,received:t.parsedType}),cG}return{status:"valid",value:e.data}}}jY.create=e=>new jY({typeName:PY.ZodNaN,...bG(e)});class _Y extends wG{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class SY extends wG{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?cG:"dirty"===e.status?(t.dirty(),uG(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?cG:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new SY({in:e,out:t,typeName:PY.ZodPipeline})}}class CY extends wG{_parse(e){const t=this._def.innerType._parse(e),n=e=>(mG(e)&&(e.value=Object.freeze(e.value)),e);return fG(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}var PY,EY;CY.create=(e,t)=>new CY({innerType:e,typeName:PY.ZodReadonly,...bG(t)}),(EY=PY||(PY={})).ZodString="ZodString",EY.ZodNumber="ZodNumber",EY.ZodNaN="ZodNaN",EY.ZodBigInt="ZodBigInt",EY.ZodBoolean="ZodBoolean",EY.ZodDate="ZodDate",EY.ZodSymbol="ZodSymbol",EY.ZodUndefined="ZodUndefined",EY.ZodNull="ZodNull",EY.ZodAny="ZodAny",EY.ZodUnknown="ZodUnknown",EY.ZodNever="ZodNever",EY.ZodVoid="ZodVoid",EY.ZodArray="ZodArray",EY.ZodObject="ZodObject",EY.ZodUnion="ZodUnion",EY.ZodDiscriminatedUnion="ZodDiscriminatedUnion",EY.ZodIntersection="ZodIntersection",EY.ZodTuple="ZodTuple",EY.ZodRecord="ZodRecord",EY.ZodMap="ZodMap",EY.ZodSet="ZodSet",EY.ZodFunction="ZodFunction",EY.ZodLazy="ZodLazy",EY.ZodLiteral="ZodLiteral",EY.ZodEnum="ZodEnum",EY.ZodEffects="ZodEffects",EY.ZodNativeEnum="ZodNativeEnum",EY.ZodOptional="ZodOptional",EY.ZodNullable="ZodNullable",EY.ZodDefault="ZodDefault",EY.ZodCatch="ZodCatch",EY.ZodPromise="ZodPromise",EY.ZodBranded="ZodBranded",EY.ZodPipeline="ZodPipeline",EY.ZodReadonly="ZodReadonly";const RY=QG.create,OY=KG.create,TY=GG.create;nY.create,aY.create;const MY=sY.create;oY.create,cY.create,uY.create,gY.create,vY.create,bY.create,wY.create;const AY=OY().int("Price must be a whole number of cents").min(0,"Price cannot be negative").max(1e6,"Maximum price is $10,000");async function BY(e={}){const{page:t=1,limit:n=50}=e,r=(t-1)*n;try{const{count:e,error:a}=await KC.from("visualization_listings").select("*",{count:"exact",head:!0}).eq("status","active");if(a)throw a;const{data:i,error:s}=await KC.from("visualization_listings").select("\n        *,\n        visualization:saved_visualizations(id, title, image_path, game_data)\n      ").eq("status","active").order("created_at",{ascending:!1}).range(r,r+n-1);if(s)throw s;const o=[...new Set((i||[]).map(e=>e.seller_id))];let l={};if(o.length>0){const{data:e}=await KC.from("profiles").select("user_id, display_name").in("user_id",o);l=(e||[]).reduce((e,t)=>(e[t.user_id]={display_name:t.display_name},e),{})}const c=(i||[]).map(e=>({...e,visualization:Array.isArray(e.visualization)?e.visualization[0]:e.visualization,seller:l[e.seller_id]||{display_name:null}})),u=e||0;return{data:c,total:u,page:t,limit:n,hasMore:r+c.length<u,error:null}}catch(a){return{data:[],total:0,page:t,limit:n,hasMore:!1,error:a}}}async function DY(e){if(0===e.length)return{};try{const{data:t,error:n}=await KC.from("visualization_listings").select("visualization_id").in("visualization_id",e).eq("status","active");if(n)throw n;const r=new Set((t||[]).map(e=>e.visualization_id));return e.reduce((e,t)=>(e[t]=r.has(t),e),{})}catch(t){return e.reduce((e,t)=>(e[t]=!1,e),{})}}async function IY(e,t){try{const n=AY.parse(t),{data:{user:r}}=await KC.auth.getUser();if(!r)throw new Error("Not authenticated");const{data:a,error:i}=await KC.from("visualization_listings").insert({visualization_id:e,seller_id:r.id,price_cents:n}).select().single();if(i)throw i;return aP(r.id,e,n),{data:a,error:null}}catch(n){return{data:null,error:n}}}async function LY(e){try{const{data:t,error:n}=await KC.functions.invoke("complete-marketplace-purchase",{body:{listingId:e}});if(n)throw n;if(t.error)throw new Error(t.error);return{...t,error:null}}catch(t){return{error:t}}}async function FY(){try{const{data:e,error:t}=await KC.from("saved_visualizations").select("id, title, image_path, game_data, pgn").is("user_id",null).order("updated_at",{ascending:!1}).limit(50);if(t)throw t;return{data:e||[],error:null}}catch(e){return{data:[],error:e}}}async function $Y(e){try{const{data:{user:t}}=await KC.auth.getUser();if(!t)throw new Error("Not authenticated");const{data:n}=await KC.rpc("is_premium_user",{p_user_id:t.id});if(!n)throw new Error("Premium membership required to claim visions");const{data:r,error:a}=await KC.rpc("can_transfer_visualization",{p_visualization_id:e});if(a)throw a;if(!r)throw new Error("This vision has reached its transfer limit (3 per 24h). Try again later.");const{error:i}=await KC.from("saved_visualizations").update({user_id:t.id}).eq("id",e).is("user_id",null);if(i)throw i;return await KC.from("visualization_transfers").insert({visualization_id:e,from_user_id:null,to_user_id:t.id,transfer_type:"free_claim"}),{success:!0,error:null}}catch(t){return{success:!1,error:t}}}const zY=({visualizationId:e,variant:t="default",className:n=""})=>{const[r,a]=ct.useState(null),[i,s]=ct.useState(!0);if(ct.useEffect(()=>{(async()=>{s(!0);const{remaining:t,error:n}=await async function(e){try{const{data:t,error:n}=await KC.rpc("get_remaining_transfers",{p_visualization_id:e});if(n)throw n;return{remaining:t??3,canTransfer:(t??3)>0,error:null}}catch(n){return{remaining:0,canTransfer:!1,error:n}}}(e);n||a(t),s(!1)})()},[e]),i)return xt.jsxs(MD,{variant:"outline",className:`gap-1 animate-pulse ${n}`,children:[xt.jsx(Xf,{className:"h-3 w-3 animate-spin"}),"default"===t&&xt.jsx("span",{children:"Checking..."})]});if(null===r)return null;const o=r>0,l=r<3,c=o?`${r} transfer${1!==r?"s":""} remaining today. Each vision can be transferred max 3 times per 24 hours.`:"Transfer limit reached - try again after 24 hours";return xt.jsxs(MD,{variant:o?"outline":"destructive",className:`gap-1 ${o?l?"border-amber-500/50 text-amber-600 bg-amber-500/10":"border-green-500/50 text-green-600 bg-green-500/10":""} ${n}`,title:c,children:[o?xt.jsx(Ef,{className:"h-3 w-3"}):xt.jsx(Rf,{className:"h-3 w-3"}),"default"===t&&xt.jsx("span",{children:o?`${r}/3 transfers left`:"Limit reached"}),"compact"===t&&xt.jsxs("span",{children:[r,"/3"]})]})};var qY="Dialog",[VY,WY]=Kh(qY),[QY,UY]=VY(qY),KY=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=ct.useRef(null),l=ct.useRef(null),[c,u]=wp({prop:r,defaultProp:a??!1,onChange:i,caller:qY});return xt.jsx(QY,{scope:t,triggerRef:o,contentRef:l,contentId:lv(),titleId:lv(),descriptionId:lv(),open:c,onOpenChange:u,onOpenToggle:ct.useCallback(()=>u(e=>!e),[u]),modal:s,children:n})};KY.displayName=qY;var HY="DialogTrigger",GY=ct.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=UY(HY,n),i=Uh(t,a.triggerRef);return xt.jsx(np.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":fZ(a.open),...r,ref:i,onClick:Vh(e.onClick,a.onOpenToggle)})});GY.displayName=HY;var YY="DialogPortal",[ZY,XY]=VY(YY,{forceMount:void 0}),JY=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=UY(YY,t);return xt.jsx(ZY,{scope:t,forceMount:n,children:ct.Children.map(r,e=>xt.jsx(vp,{present:n||i.open,children:xt.jsx(yp,{asChild:!0,container:a,children:e})}))})};JY.displayName=YY;var eZ="DialogOverlay",tZ=ct.forwardRef((e,t)=>{const n=XY(eZ,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=UY(eZ,e.__scopeDialog);return i.modal?xt.jsx(vp,{present:r||i.open,children:xt.jsx(rZ,{...a,ref:t})}):null});tZ.displayName=eZ;var nZ=Gh("DialogOverlay.RemoveScroll"),rZ=ct.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=UY(eZ,n);return xt.jsx($q,{as:nZ,allowPinchZoom:!0,shards:[a.contentRef],children:xt.jsx(np.div,{"data-state":fZ(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),aZ="DialogContent",iZ=ct.forwardRef((e,t)=>{const n=XY(aZ,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=UY(aZ,e.__scopeDialog);return xt.jsx(vp,{present:r||i.open,children:i.modal?xt.jsx(sZ,{...a,ref:t}):xt.jsx(oZ,{...a,ref:t})})});iZ.displayName=aZ;var sZ=ct.forwardRef((e,t)=>{const n=UY(aZ,e.__scopeDialog),r=ct.useRef(null),a=Uh(t,n.contentRef,r);return ct.useEffect(()=>{const e=r.current;if(e)return tq(e)},[]),xt.jsx(lZ,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vh(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:Vh(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Vh(e.onFocusOutside,e=>e.preventDefault())})}),oZ=ct.forwardRef((e,t)=>{const n=UY(aZ,e.__scopeDialog),r=ct.useRef(!1),a=ct.useRef(!1);return xt.jsx(lZ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var i,s;null==(i=e.onCloseAutoFocus)||i.call(e,t),t.defaultPrevented||(r.current||null==(s=n.triggerRef.current)||s.focus(),t.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:t=>{var i,s;null==(i=e.onInteractOutside)||i.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));const o=t.target;(null==(s=n.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),lZ=ct.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=UY(aZ,n),l=ct.useRef(null),c=Uh(t,l);return Iz(),xt.jsxs(xt.Fragment,{children:[xt.jsx(qz,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:xt.jsx(up,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":fZ(o.open),...s,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),xt.jsxs(xt.Fragment,{children:[xt.jsx(xZ,{titleId:o.titleId}),xt.jsx(bZ,{contentRef:l,descriptionId:o.descriptionId})]})]})}),cZ="DialogTitle",uZ=ct.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=UY(cZ,n);return xt.jsx(np.h2,{id:a.titleId,...r,ref:t})});uZ.displayName=cZ;var dZ="DialogDescription",hZ=ct.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=UY(dZ,n);return xt.jsx(np.p,{id:a.descriptionId,...r,ref:t})});hZ.displayName=dZ;var pZ="DialogClose",mZ=ct.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=UY(pZ,n);return xt.jsx(np.button,{type:"button",...r,ref:t,onClick:Vh(e.onClick,()=>a.onOpenChange(!1))})});function fZ(e){return e?"open":"closed"}mZ.displayName=pZ;var gZ="DialogTitleWarning",[yZ,vZ]=function(e,t){const n=ct.createContext(t),r=e=>{const{children:t,...r}=e,a=ct.useMemo(()=>r,Object.values(r));return xt.jsx(n.Provider,{value:a,children:t})};return r.displayName=e+"Provider",[r,function(r){const a=ct.useContext(n);if(a)return a;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(gZ,{contentName:aZ,titleName:cZ,docsSlug:"dialog"}),xZ=({titleId:e})=>{const t=vZ(gZ),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return ct.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},bZ=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vZ("DialogDescriptionWarning").contentName}}.`;return ct.useEffect(()=>{var n;const r=null==(n=e.current)?void 0:n.getAttribute("aria-describedby");if(t&&r){document.getElementById(t)}},[n,e,t]),null},wZ=KY,kZ=GY,NZ=JY,jZ=tZ,_Z=iZ,SZ=uZ,CZ=hZ,PZ=mZ;const EZ=wZ,RZ=kZ,OZ=NZ,TZ=ct.forwardRef(({className:e,...t},n)=>xt.jsx(jZ,{ref:n,className:Cy("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));TZ.displayName=jZ.displayName;const MZ=ct.forwardRef(({className:e,children:t,...n},r)=>xt.jsxs(OZ,{children:[xt.jsx(TZ,{}),xt.jsxs(_Z,{ref:r,className:Cy("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,xt.jsxs(PZ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[xt.jsx(Mg,{className:"h-4 w-4"}),xt.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));MZ.displayName=_Z.displayName;const AZ=({className:e,...t})=>xt.jsx("div",{className:Cy("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});AZ.displayName="DialogHeader";const BZ=({className:e,...t})=>xt.jsx("div",{className:Cy("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});BZ.displayName="DialogFooter";const DZ=ct.forwardRef(({className:e,...t},n)=>xt.jsx(SZ,{ref:n,className:Cy("text-lg font-semibold leading-none tracking-tight",e),...t}));DZ.displayName=SZ.displayName;const IZ=ct.forwardRef(({className:e,...t},n)=>xt.jsx(CZ,{ref:n,className:Cy("text-sm text-muted-foreground",e),...t}));IZ.displayName=CZ.displayName;const LZ={haiku:"",couplet:"",quatrain:"","free verse":"",epigram:"","sonnet fragment":""},FZ={haiku:"A traditional Japanese form: 3 lines capturing a moment in time",couplet:"Two rhyming lines that complete a thought",quatrain:"Four lines weaving narrative and emotion","free verse":"Unbound by form, flowing with the game's spirit",epigram:"A brief, witty observation distilled to its essence","sonnet fragment":"An excerpt from a larger poetic tradition"},$Z=({gameId:e,gameTitle:t,isOpen:n,onClose:r})=>{const[a,i]=ut.useState(!1),s=e?mL(e):null,o=e?gL(e):null;return s?xt.jsx(EZ,{open:n,onOpenChange:e=>!e&&r(),children:xt.jsxs(MZ,{className:"sm:max-w-lg border-primary/20 bg-gradient-to-b from-card to-background",children:[xt.jsx(AZ,{children:xt.jsxs(DZ,{className:"flex items-center gap-2 font-display text-xl",children:[xt.jsx(gD.div,{initial:{rotate:-10},animate:{rotate:0},transition:{type:"spring",stiffness:200},children:xt.jsx(af,{className:"h-5 w-5 text-primary"})}),"Poetry of the Game"]})}),xt.jsxs("div",{className:"space-y-6 py-4",children:[t&&xt.jsxs("div",{className:"text-center",children:[xt.jsx("p",{className:"text-sm text-muted-foreground",children:"Inspired by"}),xt.jsx("h3",{className:"font-display text-lg font-semibold text-foreground",children:t})]}),xt.jsxs(gD.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"relative p-6 rounded-xl bg-gradient-to-br from-primary/5 via-transparent to-amber-500/5 border border-primary/20",children:[xt.jsx(Zf,{className:"absolute top-3 left-3 h-6 w-6 text-primary/20"}),xt.jsx(Zf,{className:"absolute bottom-3 right-3 h-6 w-6 text-primary/20 rotate-180"}),xt.jsx("div",{className:"relative z-10 text-center px-4",children:s.poem.split("\n").map((e,t)=>xt.jsx(gD.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2+.15*t},className:"font-serif text-lg md:text-xl leading-relaxed text-foreground italic",children:e},t))})]}),xt.jsxs(gD.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center space-y-2",children:[xt.jsxs(MD,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30 gap-2",children:[xt.jsx("span",{children:LZ[s.style]||""}),o]}),xt.jsx("p",{className:"text-xs text-muted-foreground max-w-sm mx-auto",children:FZ[s.style]})]}),xt.jsx("div",{className:"flex justify-center pt-2",children:xt.jsxs(vD,{variant:"outline",size:"sm",onClick:()=>{if(s){const e=`${s.poem}\n\n "${t||"Chess Vision"}" | En Pensent`;navigator.clipboard.writeText(e),i(!0),Yy.success("Poetry copied to clipboard"),setTimeout(()=>i(!1),2e3)}},className:"gap-2 group",children:[xt.jsx(yT,{mode:"wait",children:a?xt.jsx(gD.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:xt.jsx(Bm,{className:"h-4 w-4 text-green-500"})},"check"):xt.jsx(gD.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:xt.jsx(Km,{className:"h-4 w-4 group-hover:text-primary transition-colors"})},"copy")}),a?"Copied!":"Copy Poetry"]})}),xt.jsx("p",{className:"text-center text-xs text-muted-foreground",children:" En Pensent  Where Every Game Becomes Art "})]})]})}):null},zZ=ut.forwardRef(function({gameId:e,gameTitle:t,onOpenModal:n},r){const a=e?mL(e):null,i=e?gL(e):null;if(!a)return null;const s=a.poem.split("\n")[0];return xt.jsx("button",{ref:r,onClick:n,className:"w-full text-left p-4 rounded-lg bg-gradient-to-r from-primary/5 via-transparent to-amber-500/5 border border-primary/20 hover:border-primary/40 transition-all duration-300 group cursor-pointer hover:scale-[1.01] active:scale-[0.99]",children:xt.jsxs("div",{className:"flex items-start gap-3",children:[xt.jsx("div",{className:"p-2 rounded-full bg-primary/10 group-hover:bg-primary/20 transition-colors",children:xt.jsx(af,{className:"h-4 w-4 text-primary"})}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[xt.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Poetry"}),xt.jsxs(MD,{variant:"secondary",className:"text-[10px] py-0",children:[LZ[a.style]," ",i]})]}),xt.jsxs("p",{className:"font-serif text-sm text-foreground italic truncate",children:['"',s,'..."']}),xt.jsx("p",{className:"text-xs text-primary/70 mt-1 group-hover:text-primary transition-colors",children:"Click to read full poem "})]})]})})});function qZ({className:e,...t}){return xt.jsx("div",{className:Cy("animate-pulse rounded-md bg-muted",e),...t})}var VZ="Collapsible",[WZ,QZ]=Kh(VZ),[UZ,KZ]=WZ(VZ),HZ=ct.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:s,...o}=e,[l,c]=wp({prop:r,defaultProp:a??!1,onChange:s,caller:VZ});return xt.jsx(UZ,{scope:n,disabled:i,contentId:lv(),open:l,onOpenToggle:ct.useCallback(()=>c(e=>!e),[c]),children:xt.jsx(np.div,{"data-state":eX(l),"data-disabled":i?"":void 0,...o,ref:t})})});HZ.displayName=VZ;var GZ="CollapsibleTrigger",YZ=ct.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=KZ(GZ,n);return xt.jsx(np.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":eX(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Vh(e.onClick,a.onOpenToggle)})});YZ.displayName=GZ;var ZZ="CollapsibleContent",XZ=ct.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=KZ(ZZ,e.__scopeCollapsible);return xt.jsx(vp,{present:n||a.open,children:({present:e})=>xt.jsx(JZ,{...r,ref:t,present:e})})});XZ.displayName=ZZ;var JZ=ct.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=e,s=KZ(ZZ,n),[o,l]=ct.useState(r),c=ct.useRef(null),u=Uh(t,c),d=ct.useRef(0),h=d.current,p=ct.useRef(0),m=p.current,f=s.open||o,g=ct.useRef(f),y=ct.useRef(void 0);return ct.useEffect(()=>{const e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),gp(()=>{const e=c.current;if(e){y.current=y.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();d.current=t.height,p.current=t.width,g.current||(e.style.transitionDuration=y.current.transitionDuration,e.style.animationName=y.current.animationName),l(r)}},[s.open,r]),xt.jsx(np.div,{"data-state":eX(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!f,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...e.style},children:f&&a})});function eX(e){return e?"open":"closed"}var tX=HZ,nX=YZ,rX=XZ;const aX=tX,iX=YZ,sX=XZ,oX={hotCold:jU,medieval:_U,egyptian:SU,roman:CU,modern:PU,greyscale:EU,japanese:RU,nordic:OU,artdeco:TU,tropical:MU,cyberpunk:AU,autumn:BU,ocean:DU,desert:IU,cosmic:LU,vintage:FU},lX={hotCold:"Hot & Cold",medieval:"Medieval",egyptian:"Egyptian",roman:"Roman Empire",modern:"Modern",greyscale:"Greyscale",japanese:"Japanese",nordic:"Nordic",artdeco:"Art Deco",tropical:"Tropical",cyberpunk:"Cyberpunk",autumn:"Autumn",ocean:"Ocean",desert:"Desert",cosmic:"Cosmic",vintage:"Vintage",custom:"Custom"},cX=["hotCold","medieval","egyptian","roman","modern","greyscale","japanese","nordic","artdeco","tropical","cyberpunk","autumn","ocean","desert","cosmic","vintage"];function uX(e){return e&&oX[e]||null}function dX(e){return e&&lX[e]||null}function hX(e){return!!e&&cX.includes(e)}function pX(e){return hX(e)}function mX(e,t){const n=hX(e),r=n&&dX(e)||void 0;let a,i,s=!1;if(t){const e=kF(t);e.isMatch&&e.matchedGame&&(s=!0,a=e.matchedGame.title)}return i=s&&n?"premium":s||n?"genesis":"standard",{tier:i,hasOfficialGame:s,hasOfficialPalette:n,gameName:a,paletteName:r}}function fX(e){if(e){if("object"==typeof e.visualizationState&&null!==e.visualizationState){const t=e.visualizationState;if("string"==typeof t.paletteId&&"custom"!==t.paletteId)return t.paletteId;if("string"==typeof t.linkedPaletteId)return t.linkedPaletteId}if("string"==typeof e.paletteId&&"custom"!==e.paletteId)return e.paletteId;if("object"==typeof e.palette&&null!==e.palette){const t=e.palette;if("string"==typeof t.id&&"custom"!==t.id)return t.id}if(e.board){const t=function(e){if(!Array.isArray(e)||8!==e.length)return;const t=new Set;for(const r of e)if(Array.isArray(r))for(const e of r){if(!e||"object"!=typeof e)continue;const n=e.visits;if(Array.isArray(n))for(const e of n)e&&"string"==typeof e.hexColor&&t.add(e.hexColor.toUpperCase())}if(0===t.size)return;let n=null;for(const r of TF){if("custom"===r.id)continue;const e=new Set;for(const t of["k","q","r","b","n","p"])e.add(r.white[t].toUpperCase()),e.add(r.black[t].toUpperCase());let a=0,i=!0;for(const n of t)e.has(n)?a++:i=!1;const s=t.size>0?a/t.size*100:0;if(i&&a>0)return r.id;s>=70&&(!n||a>n.matchCount)&&(n={paletteId:r.id,matchCount:a})}return null==n?void 0:n.paletteId}(e.board);if(t)return t}}}function gX(e){if(e)return"string"==typeof e.pgn?e.pgn:void 0}function yX(e){return e.replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\s+/g," ").replace(/\d+\.\s*/g,"").trim().toLowerCase()}async function vX(e,t){const n=yX(e),{data:r,error:a}=await KC.from("saved_visualizations").select("\n      id,\n      user_id,\n      pgn,\n      game_data\n    ");if(a)return function(){const e=TF.filter(e=>"custom"!==e.id).map(e=>({paletteId:e.id,paletteName:e.name,isTaken:!1,isListedForSale:!1,isOwnedByCurrentUser:!1}));return{availablePalettes:e,takenPalettes:[],totalAvailable:e.length,totalTaken:0}}();const i=new Map;for(const m of r||[]){if(yX(m.pgn||"")===n){const e=fX(m.game_data)||"modern";i.set(e,{ownerId:m.user_id||"",visualizationId:m.id})}}const s=Array.from(new Set(Array.from(i.values()).map(e=>e.ownerId))),{data:o}=await KC.from("profiles").select("user_id, display_name").in("user_id",s),l=new Map((null==o?void 0:o.map(e=>[e.user_id,e.display_name]))||[]),c=Array.from(i.values()).map(e=>e.visualizationId),{data:u}=await KC.from("visualization_listings").select("visualization_id, price_cents, status").in("visualization_id",c).eq("status","active"),d=new Map((null==u?void 0:u.map(e=>[e.visualization_id,e.price_cents]))||[]),h=[],p=[];for(const m of TF){if("custom"===m.id)continue;const e=i.get(m.id),n={paletteId:m.id,paletteName:m.name,isTaken:!!e,ownerDisplayName:e?l.get(e.ownerId)||"A Collector":void 0,ownerUserId:null==e?void 0:e.ownerId,visualizationId:null==e?void 0:e.visualizationId,isListedForSale:!!e&&d.has(e.visualizationId),listingPriceCents:e?d.get(e.visualizationId):void 0,isOwnedByCurrentUser:(null==e?void 0:e.ownerId)===t};e?p.push(n):h.push(n)}return{availablePalettes:h,takenPalettes:p,totalAvailable:h.length,totalTaken:p.length}}const xX=({pgn:e,currentUserId:t,currentPaletteId:n,onPaletteSelect:r,onSeamlessSwitch:a,context:i="generator",compact:s=!1,showAllPalettes:o=!1})=>{const[l,c]=ct.useState(null),[u,d]=ct.useState(!1),[h,p]=ct.useState(!1);ct.useEffect(()=>{e&&(d(!0),vX(e,t).then(c).finally(()=>d(!1)))},[e,t]);const m=ct.useCallback(e=>{a?a(e):!e.isTaken&&r&&r(e.paletteId)},[r,a]);if(!e)return null;if(u)return xt.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/30 border border-border/50",children:[xt.jsx($f,{className:"h-4 w-4 text-muted-foreground"}),xt.jsx(qZ,{className:"h-4 w-32"})]});if(!l)return null;const f=n?[...l.availablePalettes,...l.takenPalettes].find(e=>e.paletteId===n):null;return s&&f?xt.jsxs(aX,{open:h,onOpenChange:p,children:[xt.jsx(iX,{asChild:!0,children:xt.jsxs("button",{className:"w-full flex items-center justify-between p-2 rounded-lg bg-muted/30 border border-border/50 hover:bg-muted/50 transition-colors",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[f.isTaken?f.isOwnedByCurrentUser?xt.jsxs(MD,{variant:"outline",className:"gap-1 bg-green-500/10 text-green-600 border-green-500/30",children:[xt.jsx(Zm,{className:"h-3 w-3"}),"You Own This"]}):f.isListedForSale?xt.jsxs(MD,{variant:"outline",className:"gap-1 bg-amber-500/10 text-amber-600 border-amber-500/30",children:[xt.jsx(ug,{className:"h-3 w-3"}),"For Sale"]}):xt.jsxs(MD,{variant:"outline",className:"gap-1 bg-muted text-muted-foreground",children:[xt.jsx(Rf,{className:"h-3 w-3"}),"Owned"]}):xt.jsxs(MD,{variant:"outline",className:"gap-1 bg-primary/10 text-primary border-primary/30",children:[xt.jsx(Bm,{className:"h-3 w-3"}),"Available"]}),xt.jsx("span",{className:"text-xs text-muted-foreground",children:l.totalTaken>0&&`${l.totalTaken} colorway${l.totalTaken>1?"s":""} taken`})]}),xt.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[xt.jsx("span",{children:"Browse palettes"}),xt.jsx(Dm,{className:"h-3 w-3 transition-transform "+(h?"rotate-180":"")})]})]})}),xt.jsx(sX,{className:"mt-2",children:xt.jsx(bX,{availability:l,currentPaletteId:n,context:i,onPaletteClick:m})})]}):xt.jsx(aX,{open:h||o,onOpenChange:p,children:xt.jsxs("div",{className:"p-3 rounded-lg bg-muted/30 border border-border/50 space-y-3",children:[xt.jsx(iX,{asChild:!0,children:xt.jsxs("button",{className:"flex items-center justify-between w-full text-left",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx($f,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-medium",children:"Browse All Colorways"})]}),xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsxs(MD,{variant:"secondary",className:"text-xs",children:[l.totalAvailable," available"]}),l.totalTaken>0&&xt.jsxs(MD,{variant:"outline",className:"text-xs",children:[l.totalTaken," owned"]}),!o&&xt.jsx(Dm,{className:"h-4 w-4 transition-transform "+(h?"rotate-180":"")})]})]})}),xt.jsx(sX,{children:xt.jsx(bX,{availability:l,currentPaletteId:n,context:i,onPaletteClick:m})})]})})},bX=({availability:e,currentPaletteId:t,context:n,onPaletteClick:r})=>{const a="generator"===n||"postgame"===n;return xt.jsxs("div",{className:"space-y-3",children:[e.availablePalettes.length>0&&xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(gg,{className:"h-3 w-3 text-primary"}),xt.jsxs("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:["Available to Claim (",e.availablePalettes.length,")"]})]}),xt.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.availablePalettes.map(e=>xt.jsx(wX,{info:e,isSelected:e.paletteId===t,isGeneratorContext:a,onClick:()=>r(e)},e.paletteId))})]}),e.takenPalettes.length>0&&xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(rf,{className:"h-3 w-3 text-muted-foreground"}),xt.jsxs("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:["Already Owned - Click to View (",e.takenPalettes.length,")"]})]}),xt.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.takenPalettes.map(e=>xt.jsx(wX,{info:e,isSelected:e.paletteId===t,isGeneratorContext:!1,onClick:()=>r(e)},e.paletteId))})]}),xt.jsx("p",{className:"text-[10px] text-muted-foreground/70 italic pt-2 border-t border-border/30",children:a?"Click available palettes to apply them. Click owned palettes to view that vision.":"Click any palette to view that colorway's visualization menu."})]})},wX=({info:e,isSelected:t,isGeneratorContext:n,onClick:r})=>{const a=TF.find(t=>t.id===e.paletteId);if(!a)return null;const i=a.white.q,s=!e.isTaken||e.visualizationId,o=e.isTaken&&e.visualizationId;return xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs("button",{onClick:r,disabled:!s,className:`\n              inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-full text-xs\n              transition-all border font-medium\n              ${t?"bg-primary/20 border-primary text-primary ring-2 ring-primary/20":e.isTaken?e.isListedForSale?"bg-amber-500/5 border-amber-500/30 text-amber-700 hover:bg-amber-500/10 hover:border-amber-500/50":"bg-muted/50 border-border text-muted-foreground hover:bg-muted hover:border-border":"bg-background border-primary/30 text-foreground hover:border-primary hover:bg-primary/5"}\n              ${s?"cursor-pointer":"cursor-not-allowed opacity-50"}\n            `,children:[xt.jsx("span",{className:"w-3.5 h-3.5 rounded-full border border-black/10 shadow-sm",style:{backgroundColor:i}}),xt.jsx("span",{className:"truncate max-w-[100px]",children:a.name}),e.isTaken&&(e.isOwnedByCurrentUser?xt.jsx(Zm,{className:"h-3 w-3 text-green-600 flex-shrink-0"}):e.isListedForSale?xt.jsx(ug,{className:"h-3 w-3 text-amber-500 flex-shrink-0"}):o?xt.jsx(tf,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}):xt.jsx(Rf,{className:"h-3 w-3 flex-shrink-0"})),!e.isTaken&&n&&xt.jsx(Bm,{className:"h-3 w-3 text-primary flex-shrink-0"})]})}),xt.jsx(Zb,{className:"max-w-[200px]",children:e.isTaken?xt.jsxs("div",{className:"text-center space-y-1",children:[xt.jsx("p",{className:"font-medium",children:a.name}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:e.isOwnedByCurrentUser?"You own this colorway":`Owned by ${e.ownerDisplayName}`}),e.isListedForSale&&xt.jsxs("p",{className:"text-xs text-amber-500",children:["For sale: $",(e.listingPriceCents/100).toFixed(2)]}),xt.jsx("p",{className:"text-[10px] text-primary mt-1",children:"Click to view this vision "})]}):xt.jsxs("div",{className:"text-center space-y-1",children:[xt.jsx("p",{className:"font-medium",children:a.name}),xt.jsx("p",{className:"text-xs text-primary",children:"Available to claim!"}),n&&xt.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Click to apply this palette"})]})})]})})},kX=({pgn:e,currentPaletteId:t,onPaletteSelect:n,compact:r=!1})=>{const{user:a}=lP(),[i,s]=ct.useState(null),[o,l]=ct.useState(new Map),[c,u]=ct.useState(!0),[d,h]=ct.useState(!1);ct.useEffect(()=>{e&&(u(!0),vX(e,null==a?void 0:a.id).then(e=>{s(e);const t=e.takenPalettes.map(e=>e.visualizationId).filter(Boolean);t.length>0&&p(t)}).finally(()=>u(!1)))},[e,null==a?void 0:a.id]);const p=async e=>{const{data:t}=await KC.from("vision_scores").select("visualization_id, total_score, view_count, royalty_cents_earned").in("visualization_id",e);if(t){const e=new Map;t.forEach(t=>{e.set(t.visualization_id,{visualizationId:t.visualization_id,totalScore:t.total_score,viewCount:t.view_count,royaltyCentsEarned:t.royalty_cents_earned})}),l(e)}},m=ct.useMemo(()=>{if(!i)return[];return[...i.takenPalettes,...i.availablePalettes].sort((e,n)=>{var r,a;if(e.paletteId===t)return-1;if(n.paletteId===t)return 1;if(e.isTaken&&!n.isTaken)return-1;if(!e.isTaken&&n.isTaken)return 1;if(e.isTaken&&n.isTaken){const t=e.visualizationId&&(null==(r=o.get(e.visualizationId))?void 0:r.totalScore)||0;return(n.visualizationId&&(null==(a=o.get(n.visualizationId))?void 0:a.totalScore)||0)-t}return 0})},[i,t,o]),f=d?m:m.slice(0,r?4:8);if(c)return xt.jsxs("div",{className:"p-3 rounded-lg border border-border/50 bg-card/50",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[xt.jsx(qZ,{className:"h-4 w-4"}),xt.jsx(qZ,{className:"h-4 w-32"})]}),xt.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(e=>xt.jsx(qZ,{className:"h-12 w-full rounded"},e))})]});if(!i)return null;const g=m.find(e=>e.paletteId===t),y=(null==g?void 0:g.visualizationId)?o.get(g.visualizationId):null;return xt.jsxs("div",{className:"p-3 rounded-lg border border-border/50 bg-card/50 space-y-3",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx($f,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:"Colorway Ownership"})]}),xt.jsx("div",{className:"flex items-center gap-2",children:xt.jsxs(MD,{variant:"outline",className:"text-[10px]",children:[i.totalTaken," / ",i.totalTaken+i.totalAvailable," claimed"]})})]}),(null==g?void 0:g.isTaken)&&y&&xt.jsx("div",{className:"p-2 rounded bg-primary/5 border border-primary/20",children:xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(Zm,{className:"h-3 w-3 text-primary"}),xt.jsxs("span",{className:"text-xs text-muted-foreground",children:[g.isOwnedByCurrentUser?"Your":`${g.ownerDisplayName}'s`," ",g.paletteName]})]}),xt.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[xt.jsxs("span",{className:"flex items-center gap-1",children:[xt.jsx(rf,{className:"h-3 w-3"}),y.viewCount]}),xt.jsxs("span",{className:"flex items-center gap-1 text-primary font-medium",children:[xt.jsx(gg,{className:"h-3 w-3"}),y.totalScore.toFixed(1)," pts"]}),y.royaltyCentsEarned>0&&xt.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[xt.jsx(Ng,{className:"h-3 w-3"}),"$",(y.royaltyCentsEarned/100).toFixed(2)]})]})]})}),xt.jsx("div",{className:`grid ${r?"grid-cols-4":"grid-cols-4 sm:grid-cols-6 lg:grid-cols-8"} gap-1.5`,children:xt.jsx(yT,{mode:"popLayout",children:f.map(e=>{const r=TF.find(t=>t.id===e.paletteId),a=e.visualizationId?o.get(e.visualizationId):null,i=e.paletteId===t;return xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(gD.button,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:()=>null==n?void 0:n(e),className:`\n                        relative p-1.5 rounded border transition-all\n                        ${i?"border-primary ring-1 ring-primary/50":e.isTaken?"border-amber-500/30 bg-amber-500/5":"border-border/50 hover:border-primary/50"}\n                      `,children:[xt.jsx("div",{className:"flex justify-center gap-0.5 mb-1",children:r&&["k","q","r"].map(e=>xt.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.white[e]}},e))}),xt.jsx("p",{className:"text-[8px] text-center truncate text-muted-foreground",children:e.paletteName.split(" ")[0]}),e.isTaken&&xt.jsx("div",{className:"absolute -top-1 -right-1",children:e.isOwnedByCurrentUser?xt.jsx(Zm,{className:"h-3 w-3 text-primary"}):xt.jsx(Rf,{className:"h-2.5 w-2.5 text-amber-500"})}),a&&a.totalScore>0&&xt.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2",children:xt.jsx(MD,{variant:"secondary",className:"text-[7px] px-1 py-0 h-3",children:a.totalScore.toFixed(0)})})]})}),xt.jsx(Zb,{side:"top",className:"text-xs",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsx("p",{className:"font-medium",children:e.paletteName}),e.isTaken?xt.jsxs(xt.Fragment,{children:[xt.jsxs("p",{className:"text-muted-foreground",children:["Owned by ",e.isOwnedByCurrentUser?"you":e.ownerDisplayName]}),a&&xt.jsxs("p",{className:"text-primary",children:["Score: ",a.totalScore.toFixed(1)," pts"]}),e.isListedForSale&&e.listingPriceCents&&xt.jsxs("p",{className:"text-green-500",children:["For sale: $",(e.listingPriceCents/100).toFixed(2)]})]}):xt.jsx("p",{className:"text-green-500",children:"Available to claim"})]})})]})},e.paletteId)})})}),m.length>(r?4:8)&&xt.jsx(vD,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>h(!d),children:d?"Show less":`Show all ${m.length} colorways`})]})},NX=2.67,jX={"8x10":{width:21.36,height:26.7,label:'810"'},"11x14":{width:11*NX,height:14*NX,label:'1114"'},"12x16":{width:32.04,height:42.72,label:'1216"'},"16x20":{width:42.72,height:53.4,label:'1620"'},"18x24":{width:48.06,height:64.08,label:'1824"'},"24x36":{width:64.08,height:96.12,label:'2436"'}},_X={living:{wallGradient:"linear-gradient(180deg, #E8E2DC 0%, #DED8D2 40%, #D4CEC8 100%)",floorColor:"#8B7355",baseboardColor:"#F5F2EF",shadowOpacity:.25},office:{wallGradient:"linear-gradient(180deg, #E8EAF0 0%, #DEE0E6 40%, #D4D6DC 100%)",floorColor:"#5C5C5C",baseboardColor:"#FFFFFF",shadowOpacity:.2},gallery:{wallGradient:"linear-gradient(180deg, #FEFEFE 0%, #F8F8F8 40%, #F2F2F2 100%)",floorColor:"#C8C8C8",baseboardColor:"#FFFFFF",shadowOpacity:.12}},SX=({sizeLabel:e,roomSetting:t,visualizationElement:n,className:r="",selectedFrame:a})=>{const i=(e=>{const t=e.toLowerCase().replace(/[\s"'x]/g,"").replace(/inch(es)?/g,"");for(const[r,a]of Object.entries(jX)){const e=r.replace(/[\s"'x]/g,"").toLowerCase();if(t.includes(e)||e.includes(t))return a}const n=e.match(/(\d+)\s*[x"'\s]+\s*(\d+)/i);if(n){const e=parseInt(n[1],10),t=parseInt(n[2],10);return{width:e*NX,height:t*NX,label:`${e}${t}"`}}return{width:32.04,height:42.72,label:e}})(e),s=_X[t],o=i.width,l=i.height,c=a?6:4,u=(()=>{if(!a)return{background:"linear-gradient(145deg, #1F1F1F 0%, #0A0A0A 50%, #151515 100%)",boxShadow:"\n          inset 1px 1px 0 rgba(255,255,255,0.08),\n          inset -1px -1px 0 rgba(0,0,0,0.5),\n          2px 3px 6px rgba(0,0,0,0.3)\n        "};const e=a.colorHex;switch(a.id){case"natural":return{background:`linear-gradient(145deg, #E8D4B8 0%, ${e} 30%, #B8956E 70%, #A88560 100%)`,boxShadow:"\n            inset 2px 2px 0 rgba(255,255,255,0.2),\n            inset -2px -2px 0 rgba(0,0,0,0.15),\n            3px 4px 8px rgba(0,0,0,0.35)\n          "};case"black":return{background:"linear-gradient(145deg, #2A2A2A 0%, #0A0A0A 30%, #1A1A1A 70%, #0F0F0F 100%)",boxShadow:"\n            inset 2px 2px 0 rgba(255,255,255,0.06),\n            inset -2px -2px 0 rgba(0,0,0,0.6),\n            3px 4px 8px rgba(0,0,0,0.4)\n          "};case"white":return{background:"linear-gradient(145deg, #FFFFFF 0%, #F0F0F0 30%, #E8E8E8 70%, #FAFAFA 100%)",boxShadow:"\n            inset 2px 2px 0 rgba(255,255,255,0.9),\n            inset -2px -2px 0 rgba(0,0,0,0.08),\n            3px 4px 8px rgba(0,0,0,0.25)\n          "};case"walnut":return{background:`linear-gradient(145deg, #6D4C41 0%, ${e} 30%, #4E342E 70%, #3E2723 100%)`,boxShadow:"\n            inset 2px 2px 0 rgba(255,255,255,0.12),\n            inset -2px -2px 0 rgba(0,0,0,0.3),\n            3px 4px 8px rgba(0,0,0,0.4)\n          "};case"gold":return{background:`linear-gradient(145deg, #F5E6A0 0%, ${e} 25%, #C9A227 50%, #B8960F 75%, #E8C547 100%)`,boxShadow:"\n            inset 2px 2px 0 rgba(255,255,255,0.4),\n            inset -2px -2px 0 rgba(0,0,0,0.2),\n            3px 4px 10px rgba(0,0,0,0.35)\n          "};default:return{background:`linear-gradient(145deg, ${e} 0%, ${e} 100%)`,boxShadow:"\n            inset 1px 1px 0 rgba(255,255,255,0.1),\n            inset -1px -1px 0 rgba(0,0,0,0.3),\n            2px 3px 6px rgba(0,0,0,0.3)\n          "}}})();return xt.jsxs("div",{className:`relative group ${r}`,children:[xt.jsxs("div",{className:"relative w-[320px] h-[220px] rounded-lg overflow-hidden transition-transform duration-300 ease-out group-hover:scale-[1.03] group-hover:shadow-xl cursor-pointer",style:{background:s.wallGradient},children:[xt.jsx("div",{className:"absolute inset-0 opacity-[0.08]",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E\")"}}),"gallery"===t&&xt.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[120px] h-[100px] pointer-events-none",style:{background:"linear-gradient(180deg, rgba(255,252,245,0.2) 0%, transparent 100%)"}}),xt.jsx("div",{className:"absolute rounded-[1px]",style:{width:o+2*c+(a?10:6),height:l+2*c+(a?12:8),left:"50%",top:"45%",transform:"translate(-48%, -48%)",background:`rgba(0,0,0,${a?s.shadowOpacity+.1:s.shadowOpacity})`,filter:a?"blur(8px)":"blur(6px)"}}),xt.jsx("div",{className:"absolute transition-all duration-300",style:{width:o+2*c,height:l+2*c,left:"50%",top:"45%",transform:"translate(-50%, -50%)",...u,borderRadius:a?"2px":"1px"},children:xt.jsx("div",{className:"absolute",style:{width:o,height:l,left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#FAF9F7",boxShadow:"inset 0 0 1px rgba(0,0,0,0.15)"},children:xt.jsx("div",{className:"absolute overflow-hidden bg-[#FAFAF9]",style:{width:o-6,height:l-6,left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:n?xt.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",style:{transformOrigin:"center"},children:xt.jsx("div",{style:{transform:`scale(${(Math.min(o-6,l-6)-2)/100})`,transformOrigin:"center"},children:n})}):xt.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:xt.jsx("div",{className:"grid grid-cols-8 grid-rows-8 opacity-30",style:{width:Math.min(o-6,l-6)-4,height:Math.min(o-6,l-6)-4},children:Array.from({length:64}).map((e,t)=>xt.jsx("div",{className:""+((Math.floor(t/8)+t)%2==0?"bg-stone-200":"bg-stone-400")},t))})})})})}),"living"===t&&xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[35px]",style:{background:`linear-gradient(180deg, ${s.floorColor} 0%, #705C45 100%)`},children:xt.jsx("div",{className:"absolute inset-0 flex",children:Array.from({length:8}).map((e,t)=>xt.jsx("div",{className:"flex-1 border-r border-black/10",style:{background:t%2==0?"rgba(255,255,255,0.03)":"transparent"}},t))})}),xt.jsx("div",{className:"absolute bottom-[35px] left-0 right-0 h-[6px]",style:{background:s.baseboardColor,boxShadow:"0 1px 2px rgba(0,0,0,0.1)"}}),xt.jsxs("div",{className:"absolute bottom-[35px] left-1/2 -translate-x-1/2",children:[xt.jsx("div",{className:"relative w-[140px] h-[28px] rounded-t-[4px]",style:{background:"linear-gradient(180deg, #6B5B4F 0%, #5A4A3E 100%)"},children:xt.jsxs("div",{className:"absolute inset-x-2 top-2 bottom-1 flex gap-1",children:[xt.jsx("div",{className:"flex-1 rounded-t-sm bg-black/5"}),xt.jsx("div",{className:"flex-1 rounded-t-sm bg-black/5"}),xt.jsx("div",{className:"flex-1 rounded-t-sm bg-black/5"})]})}),xt.jsxs("div",{className:"relative w-[150px] h-[14px] -mt-[2px] rounded-t-[2px] mx-auto flex gap-[2px] px-1",style:{background:"linear-gradient(180deg, #7A6A5E 0%, #6B5B4F 100%)"},children:[xt.jsx("div",{className:"flex-1 rounded-sm bg-white/5 mt-1"}),xt.jsx("div",{className:"flex-1 rounded-sm bg-white/5 mt-1"}),xt.jsx("div",{className:"flex-1 rounded-sm bg-white/5 mt-1"})]}),xt.jsx("div",{className:"w-[150px] h-[4px] bg-[#3D3228]"}),xt.jsxs("div",{className:"flex justify-between px-3 -mt-[1px]",children:[xt.jsx("div",{className:"w-[6px] h-[6px] bg-[#2A231C] rounded-sm"}),xt.jsx("div",{className:"w-[6px] h-[6px] bg-[#2A231C] rounded-sm"})]})]}),xt.jsxs("div",{className:"absolute bottom-[35px] right-[30px]",children:[xt.jsx("div",{className:"w-[24px] h-[3px] bg-[#4A3C30] rounded-sm shadow-sm"}),xt.jsx("div",{className:"w-[3px] h-[20px] bg-[#3D3228] mx-auto"}),xt.jsx("div",{className:"w-[14px] h-[2px] bg-[#3D3228] mx-auto rounded-full"}),xt.jsxs("div",{className:"absolute -top-[22px] left-1/2 -translate-x-1/2",children:[xt.jsx("div",{className:"w-[16px] h-[12px] bg-gradient-to-b from-[#F5F0E8] to-[#E8E0D5] rounded-t-full border border-[#D4CCC0]"}),xt.jsx("div",{className:"w-[3px] h-[8px] bg-[#8B7355] mx-auto"})]})]}),xt.jsxs("div",{className:"absolute bottom-[35px] left-[25px]",children:[xt.jsxs("div",{className:"relative w-[20px] h-[24px]",children:[xt.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[8px] h-[18px] bg-[#4A7C59] rounded-full rotate-[-8deg]"}),xt.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-[80%] w-[7px] h-[15px] bg-[#5A8C69] rounded-full rotate-[-25deg]"}),xt.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-[20%] w-[7px] h-[16px] bg-[#3A6C49] rounded-full rotate-[20deg]"})]}),xt.jsx("div",{className:"w-[14px] h-[10px] bg-gradient-to-b from-[#C4A07A] to-[#A8876A] mx-auto rounded-b-[3px]",style:{clipPath:"polygon(10% 0, 90% 0, 100% 100%, 0 100%)"}})]}),xt.jsx("div",{className:"absolute bottom-[53px] left-[115px] w-[12px] h-[10px] rounded-[2px] rotate-[-10deg]",style:{background:"linear-gradient(135deg, #C9A86C 0%, #B8975B 100%)"}})]}),"office"===t&&xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[30px]",style:{background:`linear-gradient(180deg, ${s.floorColor} 0%, #4A4A4A 100%)`}}),xt.jsx("div",{className:"absolute bottom-[30px] left-0 right-0 h-[5px]",style:{background:s.baseboardColor,boxShadow:"0 1px 2px rgba(0,0,0,0.08)"}}),xt.jsxs("div",{className:"absolute bottom-[30px] left-1/2 -translate-x-1/2",children:[xt.jsx("div",{className:"w-[180px] h-[6px] rounded-t-[1px]",style:{background:"linear-gradient(180deg, #F5F0EB 0%, #E8E0D8 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.15)"}}),xt.jsxs("div",{className:"flex justify-between px-4",children:[xt.jsx("div",{className:"w-[4px] h-[22px] bg-[#2A2A2A]"}),xt.jsx("div",{className:"w-[4px] h-[22px] bg-[#2A2A2A]"})]})]}),xt.jsxs("div",{className:"absolute bottom-[56px] left-1/2 -translate-x-1/2",children:[xt.jsx("div",{className:"w-[50px] h-[30px] rounded-[2px] border-2 border-[#1A1A1A] bg-[#0F0F0F]",style:{boxShadow:"inset 0 0 10px rgba(100,150,255,0.1)"},children:xt.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#1a2030] to-[#0a1020] rounded-[1px]"})}),xt.jsx("div",{className:"w-[6px] h-[6px] bg-[#2A2A2A] mx-auto"}),xt.jsx("div",{className:"w-[20px] h-[3px] bg-[#2A2A2A] mx-auto rounded-full"})]}),xt.jsx("div",{className:"absolute bottom-[36px] left-1/2 -translate-x-1/2",children:xt.jsx("div",{className:"w-[35px] h-[10px] bg-[#2A2A2A] rounded-[2px]"})}),xt.jsx("div",{className:"absolute bottom-[30px] left-1/2 -translate-x-1/2",children:xt.jsx("div",{className:"w-[40px] h-[35px] rounded-t-[8px] -mb-[12px]",style:{background:"linear-gradient(180deg, #1A1A1A 0%, #2A2A2A 100%)"}})}),xt.jsxs("div",{className:"absolute bottom-[56px] right-[55px]",children:[xt.jsx("div",{className:"w-[14px] h-[3px] bg-[#1A1A1A] rounded-full transform -rotate-12"}),xt.jsx("div",{className:"w-[2px] h-[16px] bg-[#2A2A2A] ml-[3px] transform rotate-[15deg] origin-bottom"}),xt.jsx("div",{className:"w-[8px] h-[2px] bg-[#2A2A2A] rounded-full"})]}),xt.jsxs("div",{className:"absolute bottom-[36px] left-[85px]",children:[xt.jsx("div",{className:"w-[18px] h-[3px] bg-[#4A6B8A] rounded-sm"}),xt.jsx("div",{className:"w-[16px] h-[2px] bg-[#8B4A4A] rounded-sm -mt-[1px] ml-[1px]"}),xt.jsx("div",{className:"w-[17px] h-[2px] bg-[#4A8B6B] rounded-sm -mt-[1px]"})]})]}),"gallery"===t&&xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[28px]",style:{background:`linear-gradient(180deg, ${s.floorColor} 0%, #B0B0B0 100%)`},children:xt.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[80px] h-full",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.15) 0%, transparent 100%)"}})}),xt.jsx("div",{className:"absolute bottom-[28px] left-0 right-0 h-[3px]",style:{background:"#E8E8E8"}}),xt.jsxs("div",{className:"absolute bottom-[28px] left-1/2 -translate-x-1/2",children:[xt.jsx("div",{className:"w-[90px] h-[12px] rounded-[2px]",style:{background:"linear-gradient(180deg, #2A2A2A 0%, #1A1A1A 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:xt.jsxs("div",{className:"flex justify-around pt-1",children:[xt.jsx("div",{className:"w-[3px] h-[3px] rounded-full bg-black/20"}),xt.jsx("div",{className:"w-[3px] h-[3px] rounded-full bg-black/20"}),xt.jsx("div",{className:"w-[3px] h-[3px] rounded-full bg-black/20"})]})}),xt.jsxs("div",{className:"flex justify-between px-2",children:[xt.jsx("div",{className:"w-[3px] h-[10px] bg-[#1A1A1A]"}),xt.jsx("div",{className:"w-[3px] h-[10px] bg-[#1A1A1A]"})]})]}),xt.jsxs("div",{className:"absolute top-[3px] left-0 right-0",children:[xt.jsx("div",{className:"h-[4px] bg-gradient-to-b from-[#E0E0E0] to-[#D0D0D0]"}),xt.jsx("div",{className:"absolute top-[4px] left-1/2 -translate-x-1/2",children:xt.jsx("div",{className:"w-[8px] h-[10px] bg-[#1A1A1A] rounded-b-full"})})]}),xt.jsx("div",{className:"absolute bottom-[65px] right-[40px]",children:xt.jsx("div",{className:"w-[25px] h-[15px] bg-white border border-[#E0E0E0] shadow-sm"})})]})]}),xt.jsx("div",{className:"absolute -bottom-7 left-0 right-0 text-center",children:xt.jsx("span",{className:"text-xs font-display font-semibold text-foreground uppercase tracking-wider",children:i.label})})]})};function CX(e){return zF(e.piece,e.color)}function PX(e,t){return t.findIndex(t=>e.piece===t.pieceType&&e.color===t.pieceColor)}const EX=({board:e,size:t=500,overrideHighlightedPieces:n,overrideCompareMode:r,signature:a})=>{const i=lU(a);let s=null;try{s=M$()}catch{}const o=n||((null==s?void 0:s.lockedPieces.length)?s.lockedPieces:(null==s?void 0:s.highlightedPiece)?[s.highlightedPiece]:[]),l=r??(null==s?void 0:s.compareMode)??!1,c=(null==s?void 0:s.hoveredMove)??null,u=t/8,d=.02*t,h=t+2*d,p=ct.useMemo(()=>[...Array(8)].map((t,n)=>{const r=7-n;return[...Array(8)].map((t,s)=>{const h=e[r][s],p=h.isLight?qF.light:qF.dark,m=d+s*u,f=d+n*u,g=((e,t)=>`${"abcdefgh"[e]}${t+1}`)(s,r),y=function(e,t){return e<4?t>=4?"q1":"q3":t>=4?"q2":"q4"}(s,r),v=a&&i.quadrantWeights[y]||0,x=a?{color:i.dominantColor,intensity:v*i.intensity}:void 0;return((e,t,n,r,a,i,s,o,l,c)=>{const u=[],d=.08*r,h=i.length>0,p=(null==o?void 0:o.targetSquare)===l,m=(o?e.filter(e=>e.piece===o.piece.pieceType&&e.color===o.piece.pieceColor):[]).length>0,f=(h?e.filter(e=>{return t=e,0===(n=i).length||n.some(e=>t.piece===e.pieceType&&t.color===e.pieceColor);var t,n}):e).length>0,g=i.length>0&&e.some(e=>e.piece===i[0].pieceType&&e.color===i[0].pieceColor),y=i.length>1&&e.some(e=>e.piece===i[1].pieceType&&e.color===i[1].pieceColor),v=g&&y,x=h&&!f||o&&!m&&!p;if(c&&c.intensity>.1&&u.push(xt.jsx("rect",{x:t,y:n,width:r,height:r,fill:c.color,opacity:.1*c.intensity,style:{transition:"opacity 0.3s ease-out"}},`pensent-glow-${t}-${n}`)),u.push(xt.jsx("rect",{x:t,y:n,width:r,height:r,fill:a,style:{opacity:x?.3:1,transition:"opacity 0.2s ease-out"}},`base-${t}-${n}`)),0===e.length)return u;const b=[];for(const _ of e){const e=CX(_),t=PX(_,i),n=!h||-1!==t,r=b.findIndex(t=>t.color===e);-1===r?b.push({color:e,matches:n,highlightIndex:t}):n&&(b[r].matches=!0,-1!==t&&(b[r].highlightIndex=t))}const w=Math.min(b.length,6),k=[];let N=r-2*d;const j=.7*N/w;for(let _=0;_<w&&(k.push({color:b[_].color,layerSize:N,matches:b[_].matches,highlightIndex:b[_].highlightIndex}),N-=j,!(N<.1*r));_++);for(let _=0;_<k.length;_++){const e=k[_],a=(r-e.layerSize)/2,i=h?e.matches?1:.15:1;u.push(xt.jsx("rect",{x:t+a,y:n+a,width:e.layerSize,height:e.layerSize,fill:e.color,style:{opacity:i,transition:"opacity 0.2s ease-out"}},`layer-${t}-${n}-${_}`))}if(h&&f){const e=.02*r;s&&2===i.length?v?u.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(168, 85, 247, 0.8)",strokeWidth:2*e},`glow-overlap-${t}-${n}`)):g?u.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(56, 189, 248, 0.6)",strokeWidth:1.5*e},`glow-p1-${t}-${n}`)):y&&u.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(251, 113, 133, 0.6)",strokeWidth:1.5*e},`glow-p2-${t}-${n}`)):u.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(255,255,255,0.6)",strokeWidth:e},`glow-${t}-${n}`))}if(o&&(p||m)){const e=.025*r;p?u.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(251, 191, 36, 0.9)",strokeWidth:2*e},`glow-move-target-${t}-${n}`)):u.push(xt.jsx("rect",{x:t+e,y:n+e,width:r-2*e,height:r-2*e,fill:"none",stroke:"rgba(251, 191, 36, 0.4)",strokeWidth:e},`glow-move-piece-${t}-${n}`))}return u})(h.visits,m,f,u,p,o,l,c,g,x)})}),[e,d,u,o,l,c,a,i]);return xt.jsxs("svg",{width:h,height:h,viewBox:`0 0 ${h} ${h}`,xmlns:"http://www.w3.org/2000/svg",style:{display:"block"},children:[xt.jsx("rect",{x:0,y:0,width:h,height:h,fill:a?i.dominantColor:qF.border,opacity:a?.9:1}),xt.jsx("rect",{x:.5*d,y:.5*d,width:h-d,height:h-d,fill:qF.border}),p,a&&xt.jsx("text",{x:h-d,y:h-4,textAnchor:"end",fontSize:8,fill:i.dominantColor,opacity:.3,fontFamily:"monospace",children:i.archetype})]})},RX=Object.freeze(Object.defineProperty({__proto__:null,default:EX},Symbol.toStringTag,{value:"Module"}));function OX(e){if(!e||"Unknown"===e||"????.??.??"===e)return"Date Unknown";const t=e.split(".");if(3!==t.length)return e;const n=t[0],r=parseInt(t[1])-1,a=parseInt(t[2]);if(isNaN(r)||r<0||r>11)return e;return`${["January","February","March","April","May","June","July","August","September","October","November","December"][r]} ${a}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(a)}, ${n}`}const TX=({gameData:e,title:t,darkMode:n=!1})=>{const r=_$(e.moves),a=n?"text-stone-100":"text-stone-800",i=n?"text-stone-400":"text-stone-500",s=n?"text-stone-500":"text-stone-400",o=n?"text-stone-500":"text-stone-400",l=n?"text-stone-700":"text-stone-300";return xt.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[xt.jsxs("h1",{className:`text-xl md:text-2xl font-semibold tracking-wide ${a}`,style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[xt.jsx("span",{children:e.white}),xt.jsx("span",{className:`mx-2 font-normal italic text-lg ${o}`,style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),xt.jsx("span",{children:e.black})]}),e.event&&"Unknown"!==e.event&&xt.jsx("h2",{className:`text-sm md:text-base italic ${i}`,style:{fontFamily:"'Cormorant', Georgia, serif"},children:e.event}),xt.jsxs("p",{className:`text-xs uppercase tracking-[0.15em] flex items-center justify-center gap-3 ${s}`,style:{fontFamily:"'Inter', sans-serif"},children:[t&&xt.jsx("span",{className:"font-medium",children:t}),t&&xt.jsx("span",{className:l,children:""}),xt.jsx("span",{children:OX(e.date)})]}),xt.jsx("div",{className:`leading-relaxed px-2 text-[8px] ${s}`,style:{fontFamily:"'Times New Roman', Times, serif"},children:r})]})},MX=({moveHistory:e,whitePalette:t,blackPalette:n,opacity:r,isEnabled:a,flipped:i=!1,signature:s=null})=>{const o=lU(s),l=ct.useMemo(()=>((e,t,n)=>{const r=new Map,a=Object.keys(t).length>0?t:LF().white,i=Object.keys(n).length>0?n:LF().black;for(const s of e){const e=("w"===s.color?a:i)[s.piece]||"#888888";r.has(s.square)||r.set(s.square,[]);const t=r.get(s.square);t[t.length-1]!==e&&t.push(e)}return r})(e,t,n),[e,t,n]),c=ct.useMemo(()=>cU(o.flowDirection,o.momentum),[o.flowDirection,o.momentum]);if(!a)return null;const u=(e,t)=>{const{row:n,col:a}=((e,t)=>{const n=e.charCodeAt(0)-97,r=8-parseInt(e[1]);return t?{row:7-r,col:7-n}:{row:r,col:n}})(e,i),l=Math.min(t.length,6),u=r;return xt.jsx("div",{className:"absolute",style:{top:12.5*n+"%",left:12.5*a+"%",width:"12.5%",height:"12.5%",opacity:u,pointerEvents:"none"},children:xt.jsx(yT,{mode:"sync",children:t.slice(0,l).map((t,n)=>{const r=92-n*(70/l),a=(100-r)/2;return xt.jsx(gD.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,x:s?c.x:[0,0,0],y:s?c.y:[0,0,0]},transition:{type:"spring",stiffness:300,damping:20,delay:.05*n,x:{duration:c.duration,repeat:1/0},y:{duration:c.duration,repeat:1/0}},className:"absolute",style:{backgroundColor:t,top:`${a}%`,left:`${a}%`,width:`${r}%`,height:`${r}%`,borderRadius:"2px",boxShadow:s&&o.intensity>.5?`0 0 ${4*o.intensity}px ${o.dominantColor}40`:void 0}},`${e}-layer-${n}`)})})},e)};return xt.jsx("div",{className:"absolute inset-0 pointer-events-none z-[5]",style:{transition:"opacity 0.3s ease-in-out"},children:Array.from(l.entries()).map(([e,t])=>u(e,t))})},AX={K:"",Q:"",R:"",B:"",N:"",P:"",k:"",q:"",r:"",b:"",n:"",p:""},BX=({pgn:e,currentMoveNumber:t,size:n,pieceOpacity:r=.7})=>{const a=n/8,i=ct.useMemo(()=>{var n;if(!e||"string"!=typeof e||e.trim().length<2)return[];try{const r=new lF;r.loadPgn(e);const a=r.history({verbose:!0}),i=new lF,s=t??a.length,o=Math.min(s,a.length);for(let e=0;e<o;e++)i.move(a[e].san);const l=i.board(),c=[];for(let e=0;e<8;e++)for(let t=0;t<8;t++){const r=null==(n=l[e])?void 0:n[t];if(r){const n=7-e,a=`${String.fromCharCode(97+t)}${n+1}`;c.push({square:a,piece:r.type,color:r.color,row:e,col:t})}}return c}catch(APe){return[]}},[e,t]);return 0===i.length?null:xt.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none"},children:i.map((e,t)=>{const n="w"===e.color?AX[e.piece.toUpperCase()]:AX[e.piece.toLowerCase()];return xt.jsx("div",{style:{position:"absolute",left:e.col*a,top:e.row*a,width:a,height:a,display:"flex",alignItems:"center",justifyContent:"center",fontSize:.75*a,opacity:r,color:"w"===e.color?"#ffffff":"#1a1a1a",textShadow:"w"===e.color?"0 1px 3px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.8)":"0 1px 2px rgba(255,255,255,0.3)",fontFamily:"serif"},children:n},t)})})},DX=Object.freeze(Object.defineProperty({__proto__:null,StaticPieceOverlay:BX,default:BX},Symbol.toStringTag,{value:"Module"})),IX=({board:e,gameData:t,size:n=300,darkMode:r=!1,showQR:a=!1,qrDataUrl:i,compact:s=!1,title:o,enPensentData:l,highlightState:c,piecesState:u,pgn:d,withWatermark:h=!1})=>{const p=r?"#0A0A0A":"#FDFCFB",m=r?"#292524":"#e7e5e4",f=r?"#78716c":"#a8a29e",g=r?"#e7e5e4":"#292524",y=r?"#a8a29e":"#78716c",v=s?4:24,x=n-2*v,b=d||t.pgn||"",w=()=>{if(l)return xt.jsxs("div",{style:{position:"relative",width:x,height:x},children:[xt.jsx("div",{style:{position:"absolute",inset:0,display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gridTemplateRows:"repeat(8, 1fr)"},children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return xt.jsx("div",{style:{backgroundColor:n?"#e7e5e4":"#78716c"}},t)})}),xt.jsx(MX,{moveHistory:l.moveHistory,whitePalette:l.whitePalette,blackPalette:l.blackPalette,opacity:.85,isEnabled:!0,flipped:!1})]});if(e){const t=null==c?void 0:c.lockedPieces.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor}));return xt.jsxs("div",{style:{position:"relative",width:x,height:x},children:[xt.jsx(EX,{board:e,size:x,overrideHighlightedPieces:t,overrideCompareMode:null==c?void 0:c.compareMode}),(null==u?void 0:u.showPieces)&&b&&xt.jsx(BX,{pgn:b,currentMoveNumber:u.currentMoveNumber,size:x,pieceOpacity:u.pieceOpacity})]})}return xt.jsx("div",{style:{width:x,height:x,display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gridTemplateRows:"repeat(8, 1fr)"},children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return xt.jsx("div",{style:{backgroundColor:n?"#e7e5e4":"#78716c"}},t)})})};return s?xt.jsxs("div",{style:{backgroundColor:p,padding:`${v}px`,display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"fit-content",borderRadius:1},children:[xt.jsx("div",{style:{position:"relative"},children:w()}),xt.jsxs("div",{style:{width:"100%",paddingTop:2,borderTop:`1px solid ${m}`,textAlign:"center"},children:[xt.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:2},children:[xt.jsx("span",{style:{fontSize:4.5,fontWeight:600,color:g,textTransform:"uppercase",letterSpacing:"0.02em",fontFamily:"'Cinzel', 'Times New Roman', serif"},children:t.white}),xt.jsx("span",{style:{fontSize:3,color:y,fontStyle:"italic"},children:"vs"}),xt.jsx("span",{style:{fontSize:4.5,fontWeight:600,color:g,textTransform:"uppercase",letterSpacing:"0.02em",fontFamily:"'Cinzel', 'Times New Roman', serif"},children:t.black})]}),xt.jsx("p",{style:{fontSize:3,color:f,margin:"1px 0 0 0",fontStyle:"italic",fontFamily:"'Cormorant Garamond', Georgia, serif"},children:t.event||"Chess Game"})]}),xt.jsx("p",{style:{fontSize:2.5,color:f,letterSpacing:"0.15em",textTransform:"uppercase",margin:0},children:" En Pensent "})]}):xt.jsxs("div",{style:{backgroundColor:p,padding:`${v}px`,display:"flex",flexDirection:"column",alignItems:"center",gap:24,width:"fit-content",borderRadius:4,border:`1px solid ${m}`,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},children:[xt.jsxs("div",{style:{position:"relative"},children:[w(),h&&xt.jsxs("div",{style:{position:"absolute",bottom:12,right:12,backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"8px 12px",borderRadius:6,border:"1px solid #e7e5e4",display:"flex",alignItems:"center",gap:10,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[xt.jsx("img",{src:NU,alt:"En Pensent",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover"}}),xt.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:1},children:[xt.jsx("span",{style:{fontSize:14,fontWeight:600,color:"#292524",fontFamily:"'Inter', system-ui, sans-serif",letterSpacing:"0.02em"},children:"EN PENSENT"}),xt.jsx("span",{style:{fontSize:11,color:"#78716c",fontFamily:"'Cormorant Garamond', Georgia, serif",fontStyle:"italic"},children:"enpensent.com"})]})]}),a&&i&&!h&&xt.jsxs("div",{style:{position:"absolute",bottom:4,right:4,backgroundColor:"rgba(0, 0, 0, 0.75)",padding:3,borderRadius:4,border:"1px solid rgba(212, 175, 55, 0.25)",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[xt.jsxs("div",{style:{position:"relative",width:36,height:36},children:[xt.jsx("img",{src:i,alt:"QR",style:{width:36,height:36,display:"block"}}),xt.jsx("img",{src:NU,alt:"",style:{position:"absolute",width:10,height:10,top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"50%",border:"1px solid rgba(212, 175, 55, 0.4)"}})]}),xt.jsx("p",{style:{fontSize:4,color:"rgba(212, 175, 55, 0.5)",letterSpacing:"0.15em",margin:0,fontFamily:"'Inter', system-ui, sans-serif"},children:"SCAN"})]})]}),xt.jsx("div",{style:{width:"100%",paddingTop:16,borderTop:`1px solid ${m}`},children:xt.jsx(TX,{gameData:{white:t.white,black:t.black,event:t.event||"",date:t.date||"",result:t.result||"",moves:t.moves||[],pgn:""},title:o,darkMode:r})}),xt.jsx("p",{style:{fontSize:10,letterSpacing:"0.3em",textTransform:"uppercase",fontWeight:500,color:f,margin:0,fontFamily:"'Inter', system-ui, sans-serif"},children:" En Pensent "})]})},LX=Object.freeze(Object.defineProperty({__proto__:null,PrintReadyVisualization:IX,default:IX},Symbol.toStringTag,{value:"Module"})),FX=[{id:"natural",name:"Natural Wood",color:"Natural",colorHex:"#D4A574",description:"Warm, organic finish that complements any decor",premiumMultiplier:1},{id:"black",name:"Classic Black",color:"Black",colorHex:"#1A1A1A",description:"Timeless elegance for modern and traditional spaces",premiumMultiplier:1},{id:"white",name:"Gallery White",color:"White",colorHex:"#F5F5F5",description:"Clean, museum-quality presentation",premiumMultiplier:1},{id:"walnut",name:"Rich Walnut",color:"Walnut",colorHex:"#5D4037",description:"Premium dark wood with sophisticated grain",premiumMultiplier:1.15},{id:"gold",name:"Champagne Gold",color:"Gold",colorHex:"#D4AF37",description:"Luxurious metallic finish for statement pieces",premiumMultiplier:1.25}],$X={'810"':30,"8x10":30,'1114"':38,"11x14":38,'1216"':42,"12x16":42,'1620"':50,"16x20":50,'1824"':62,"18x24":62,'2436"':85,"24x36":85};function zX(e){return e.toLowerCase().replace(/\s+/g,"").replace(//g,"x").replace(/["']/g,"")}function qX(e,t){const n=function(e){const t=zX(e);for(const[r,a]of Object.entries($X))if(zX(r)===t)return a;const n=e.match(/(\d+)\s*[x]\s*(\d+)/i);if(n){const e=`${n[1]}x${n[2]}`;if($X[e])return $X[e]}return 45}(e),r=FX.find(e=>e.id===t),a=n*((null==r?void 0:r.premiumMultiplier)||1)*1.2;return Math.ceil(a)-.01}function VX(e){return FX.map(t=>({...t,price:qX(e,t.id)}))}function WX(e){return qX(e,"natural")}const QX=12.99,UX=3,KX=FX.slice(0,4).map(e=>({id:e.id,colorHex:e.color})),HX=[{label:'810"',value:"8x10",price:29.99,scale:.7},{label:'1620"',value:"16x20",price:49.99,scale:1},{label:'2436"',value:"24x36",price:79.99,scale:1.3}],GX=({board:e,gameData:t,totalMoves:n,darkMode:r=!1,showPieces:a=!1,pieceOpacity:i=.7,onOrderPrint:s,className:o=""})=>{const{currentMove:l}=R$(),{lockedPieces:c,lockedSquares:u,compareMode:d}=M$(),[h,p]=ct.useState(KX[0]),[m,f]=ct.useState(HX[0]),[g]=ct.useState("living"),y=ct.useMemo(()=>l>=n?e:e.map(e=>e.map(e=>({...e,visits:e.visits.filter(e=>e.moveNumber<=l)}))),[e,l,n]),v=ct.useMemo(()=>{const e=c.length>0||u.length>0?{lockedPieces:c.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor})),lockedSquares:u.map(e=>({square:e.square,pieces:e.pieces.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor}))})),compareMode:d}:void 0,s=a?{showPieces:!0,pieceOpacity:i,currentMoveNumber:l>=n?void 0:l}:void 0;return xt.jsx(IX,{board:y,gameData:t,size:100,darkMode:r,compact:!0,highlightState:e,piecesState:s,pgn:t.pgn})},[y,t,r,c,u,d,a,i,l,n]);return h&&WX(m.value),xt.jsxs(gD.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-xl border border-primary/20 bg-gradient-to-br from-primary/5 via-amber-500/5 to-orange-500/5 p-4 ${o}`,children:[xt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:xt.jsx(Gf,{className:"h-4 w-4 text-primary"})}),xt.jsxs("div",{children:[xt.jsx("h4",{className:"font-display text-sm font-medium",children:"Premium Print"}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Museum-quality canvas"})]})]}),xt.jsxs(MD,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30 text-xs",children:["$",m.price.toFixed(0),h?"+":""]})]}),xt.jsxs("div",{className:"mb-3",children:[xt.jsxs("p",{className:"text-xs text-muted-foreground mb-1.5 flex items-center gap-1",children:[xt.jsx(Lf,{className:"h-3 w-3"}),"Size"]}),xt.jsx("div",{className:"flex gap-2",children:HX.map(e=>xt.jsxs("button",{onClick:()=>f(e),className:"flex-1 py-1.5 px-2 rounded-md border text-xs font-medium transition-all "+(m.value===e.value?"border-primary bg-primary/10 text-primary":"border-border bg-background/50 text-muted-foreground hover:border-primary/50 hover:text-foreground"),children:[xt.jsx("span",{className:"block",children:e.label}),xt.jsxs("span",{className:"block text-[10px] opacity-70",children:["$",e.price]})]},e.value))})]}),xt.jsxs("div",{className:"flex gap-4 items-center",children:[xt.jsx(gD.div,{initial:{scale:.9,opacity:.5},animate:{scale:1,opacity:1},transition:{duration:.2},className:"shrink-0 origin-left -ml-2",style:{transform:`scale(${.85*m.scale})`},children:xt.jsx(SX,{sizeLabel:m.value,roomSetting:g,visualizationElement:v,selectedFrame:h})},m.value),xt.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[xt.jsxs("div",{children:[xt.jsxs("p",{className:"text-xs text-muted-foreground mb-1.5 flex items-center gap-1",children:[xt.jsx(df,{className:"h-3 w-3"}),"Frame Style"]}),xt.jsxs("div",{className:"flex gap-1.5",children:[KX.map(e=>xt.jsx("button",{onClick:()=>p(e),className:"w-6 h-6 rounded-full border-2 transition-all "+((null==h?void 0:h.id)===e.id?"border-primary ring-2 ring-primary/30 scale-110":"border-border hover:border-primary/50"),style:{backgroundColor:e.colorHex},title:e.id.charAt(0).toUpperCase()+e.id.slice(1)},e.id)),xt.jsx("button",{onClick:()=>p(null),className:"w-6 h-6 rounded-full border-2 transition-all flex items-center justify-center text-[8px] font-medium "+(h?"border-border hover:border-primary/50 bg-muted":"border-primary ring-2 ring-primary/30 scale-110 bg-background"),title:"No frame",children:""})]})]}),xt.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[xt.jsxs(MD,{variant:"secondary",className:"text-[10px] px-1.5 py-0.5",children:[xt.jsx(Lf,{className:"h-2.5 w-2.5 mr-1"}),"Free US Shipping"]}),xt.jsx(MD,{variant:"secondary",className:"text-[10px] px-1.5 py-0.5",children:"6 Sizes Available"})]}),xt.jsxs(vD,{size:"sm",className:"w-full gap-2 bg-gradient-to-r from-primary to-amber-500 hover:from-primary/90 hover:to-amber-500/90",onClick:()=>{const e={currentMove:l>=n?n:l,lockedPieces:c.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor})),lockedSquares:u.map(e=>({square:e.square,pieces:e.pieces.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor}))})),compareMode:d,darkMode:r,showPieces:a,pieceOpacity:i};null==s||s(e)},children:[xt.jsx(Gf,{className:"h-4 w-4"}),"Order Print",xt.jsx(Lm,{className:"h-4 w-4"})]})]})]})]})};function YX(e){if(!e)return"empty";const t=function(e){let t=e.replace(/\[[^\]]*\]/g,"");return t=t.replace(/\{[^}]*\}/g,""),t=t.replace(/\([^)]*\)/g,""),t=t.replace(/\d+\.\s*/g,""),t=t.replace(/1-0|0-1|1\/2-1\/2|\*/g,""),t=t.replace(/\s+/g," ").trim(),t}(e);return t?function(e){let t=0,n=0;for(let r=0;r<e.length;r++){const a=e.charCodeAt(r);t=(t<<5)-t+a|0,n=(n<<7)+n+a|0}return(Math.abs(t)^Math.abs(n)).toString(36)}(t):"empty"}function ZX(e,t,n){const r=YX(e),a=new URL(`${window.location.origin}/g/${r}`);return t&&"modern"!==t&&a.searchParams.set("p",t),n&&(void 0!==n.move&&n.move>0&&n.move!==1/0&&a.searchParams.set("m",n.move.toString()),n.dark&&a.searchParams.set("d","1"),n.pieces&&a.searchParams.set("sp","1"),void 0!==n.opacity&&.7!==n.opacity&&a.searchParams.set("o",n.opacity.toFixed(1))),a.toString()}const XX=["2029eb39-ff40-416f-8b07-f065964ff8eb"],JX=["k","q","r","b","n","p"],eJ=["w","b"];function tJ(e){const t=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(e);if(!t)return null;const n=function(e,t,n){let r=e/255,a=t/255,i=n/255;return r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r*=100,a*=100,i*=100,{x:.4124564*r+.3575761*a+.1804375*i,y:.2126729*r+.7151522*a+.072175*i,z:.0193339*r+.119192*a+.9503041*i}}(t.r,t.g,t.b);return function(e,t,n){let r=e/95.047,a=t/100,i=n/108.883;const s=.008856,o=903.3;return r=r>s?Math.pow(r,1/3):(o*r+16)/116,a=a>s?Math.pow(a,1/3):(o*a+16)/116,i=i>s?Math.pow(i,1/3):(o*i+16)/116,{l:116*a-16,a:500*(r-a),b:200*(a-i)}}(n.x,n.y,n.z)}function nJ(e,t){const n=tJ(e),r=tJ(t);if(!n||!r)return 100;const a=n.l-r.l,i=n.a-r.a,s=n.b-r.b;return Math.sqrt(a*a+i*i+s*s)}function rJ(e,t,n=10){return nJ(e,t)<n}function aJ(e,t){return nJ(e,t)<25}function iJ(e,t,n=15){let r=0;const a=JX.length*eJ.length;for(const i of JX)for(const a of eJ){rJ("w"===a?e.white[i]:e.black[i],"w"===a?t.white[i]:t.black[i],n)&&r++}return r/a*100}function sJ(e,t){let n=0,r=0,a=0;const i=JX.length*eJ.length;for(const s of JX)for(const i of eJ){const o="w"===i?e.white[s]:e.black[s],l="w"===i?t.white[s]:t.black[s],c=nJ(o,l);r+=c,aJ(o,l)&&n++,c>=10&&c<=20&&a++}return{knockoffPercentage:n/i*100,averageDistance:r/i,suspiciousColors:a}}function oJ(e){const t=TF.filter(e=>"custom"!==e.id);let n=null;for(const r of t){const t=iJ(e,r);t>=80&&(!n||t>n.similarity)&&(n={paletteId:r.id,similarity:t})}return n}function lJ(e){return e?e.replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\s+/g," ").replace(/\d+\.\s*/g,"").trim().toLowerCase():""}function cJ(e,t,n,r){const a=lJ(e||t.pgn),i=lJ(n||r.pgn);if(a&&i)return a===i;const s=t.moves||[],o=r.moves||[];return s.length===o.length&&s.every((e,t)=>e.toLowerCase()===(o[t]||"").toLowerCase())}async function uJ(e,t,n,r,a){try{const i=a||TF.find(e=>e.id===r)||TF[0],s={white:i.white,black:i.black};let o,l,c=!1;if("custom"!==r)c=!0,o=r,l=100;else if(a){const e=oJ(a);e&&e.similarity>=30&&(c=e.similarity>=80,o=e.paletteId,l=e.similarity)}const u=function(e,t){var n;const r=e||t.pgn;if(!r&&!(null==(n=t.moves)?void 0:n.length))return null;const a=kF(r||"");return a.isMatch&&a.matchedGame?{id:a.matchedGame.id,title:a.matchedGame.title,similarity:a.similarity,matchType:a.matchType}:null}(t,n),d=null!==u,{data:h,error:p}=await KC.from("saved_visualizations").select("id, user_id, pgn, game_data");if(p)return{isTooSimilar:!1,colorSimilarity:0,movesMatch:!1,isIntrinsicPalette:c,isIntrinsicGame:d,matchedGameCard:u||void 0,matchedPaletteId:o,matchedPaletteSimilarity:l};for(const r of h||[]){const a=r.game_data,i=a.visualizationState;let h;if(null==i?void 0:i.customColors)h=i.customColors;else{const e=TF.find(e=>e.id===((null==i?void 0:i.paletteId)||"modern"))||TF[0];h={white:e.white,black:e.black}}const p=cJ(t,n,r.pgn,a);if(!p)continue;const m=iJ(s,h),f=sJ(s,h),g=f.knockoffPercentage>=50&&f.averageDistance<30&&f.suspiciousColors>=4,y=m>=30||g,v=!r.user_id||XX.includes(r.user_id);if(p&&y){if(v&&r.user_id!==e)return{isTooSimilar:!1,colorSimilarity:m,movesMatch:!0,isIntrinsicPalette:c,isIntrinsicGame:d,matchedGameCard:u||void 0,matchedPaletteId:o,matchedPaletteSimilarity:l,isGenesisClaimable:!0,existingVisualizationId:r.id};const t=r.user_id===e;let n,a;if(!t&&r.user_id){const{data:e}=await KC.from("profiles").select("display_name").eq("user_id",r.user_id).single();n=(null==e?void 0:e.display_name)||"Another collector"}return a=g&&m<30?`This visualization appears to be a near-replica of an existing vision. ${f.suspiciousColors} colors are slightly tweaked versions of the original. Please create a more distinctive colorway.`:`This visualization is ${Math.round(m)}% similar to an existing vision of the same game`,{isTooSimilar:!0,colorSimilarity:m,movesMatch:!0,isIntrinsicPalette:c,isIntrinsicGame:d,matchedGameCard:u||void 0,matchedPaletteId:o,matchedPaletteSimilarity:l,existingVisualizationId:r.id,ownerDisplayName:n,ownedByCurrentUser:t,reason:a,existingColors:h,isKnockoff:g,knockoffDetails:f}}}return{isTooSimilar:!1,colorSimilarity:0,movesMatch:!1,isIntrinsicPalette:c,isIntrinsicGame:d,matchedGameCard:u||void 0,matchedPaletteId:o,matchedPaletteSimilarity:l}}catch(i){return{isTooSimilar:!1,colorSimilarity:0,movesMatch:!1}}}function dJ(e){const t=oJ(e);return(null==t?void 0:t.paletteId)||null}const hJ=({pgn:e,gameData:t,paletteId:n="modern",customColors:r,visualizationId:a,isOwner:i=!1,isPremium:s=!1,onClaim:o,onUpgradePrompt:l,compact:c=!1,className:u=""})=>{var d;const{user:h}=lP(),[p,m]=ct.useState({isChecking:!0,isOwned:!1,ownedByCurrentUser:!1,isTooSimilar:!1}),[f,g]=ct.useState(!1),[y,v]=ct.useState(!1);ct.useEffect(()=>{(async()=>{if(null==h?void 0:h.id){m(e=>({...e,isChecking:!0}));try{const a=await uJ(h.id,e,t,n,r);a.isTooSimilar?m({isChecking:!1,isOwned:!0,ownedByCurrentUser:a.ownedByCurrentUser||!1,ownerDisplayName:a.ownerDisplayName,isTooSimilar:!0,similarityResult:a}):m({isChecking:!1,isOwned:!1,ownedByCurrentUser:!1,isTooSimilar:!1,similarityResult:a})}catch(a){m({isChecking:!1,isOwned:!1,ownedByCurrentUser:!1,isTooSimilar:!1})}}else m({isChecking:!1,isOwned:!1,ownedByCurrentUser:!1,isTooSimilar:!1})})()},[null==h?void 0:h.id,e,t,n,r]);return i||p.ownedByCurrentUser?xt.jsxs(MD,{variant:"outline",className:`bg-green-500/10 text-green-600 border-green-500/30 ${u}`,children:[xt.jsx(Bm,{className:"h-3 w-3 mr-1"}),"Your Vision"]}):p.isChecking?xt.jsxs(vD,{variant:"outline",size:c?"sm":"default",disabled:!0,className:u,children:[xt.jsx(Pf,{className:"h-4 w-4 animate-spin mr-2"}),"Checking..."]}):p.isTooSimilar&&p.isOwned?xt.jsxs(xt.Fragment,{children:[xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(vD,{variant:"outline",size:c?"sm":"default",onClick:()=>v(!0),className:`border-amber-500/50 text-amber-600 hover:bg-amber-500/10 ${u}`,children:[xt.jsx(jg,{className:"h-4 w-4 mr-2"}),c?"Similar":"Too Similar"]})}),xt.jsx(Zb,{className:"max-w-xs",children:xt.jsxs("p",{children:["This vision is too similar to one already in ",p.ownerDisplayName||"someone's"," gallery."]})})]})}),xt.jsx(EZ,{open:y,onOpenChange:v,children:xt.jsxs(MZ,{className:"max-w-md",children:[xt.jsxs(AZ,{children:[xt.jsxs(DZ,{className:"flex items-center gap-2",children:[xt.jsx(jg,{className:"h-5 w-5 text-amber-500"}),"Vision Already Exists"]}),xt.jsx(IZ,{children:"This exact colorway of this game is already owned by another collector."})]}),xt.jsxs("div",{className:"space-y-4",children:[xt.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[xt.jsx("div",{className:"p-2 rounded-full bg-primary/10",children:xt.jsx(Pg,{className:"h-4 w-4 text-primary"})}),xt.jsxs("div",{children:[xt.jsx("p",{className:"font-medium",children:p.ownerDisplayName||"Another collector"}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(d=p.similarityResult)?void 0:d.colorSimilarity)?`${Math.round(p.similarityResult.colorSimilarity)}% color similarity`:"Owns this colorway"})]})]}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsx("p",{className:"text-sm font-medium",children:"To claim your own unique vision:"}),xt.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1.5",children:[xt.jsxs("li",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"}),"Change at least 8 colors to make it unique"]}),xt.jsxs("li",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"}),"Try a different palette for a fresh look"]}),xt.jsxs("li",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"}),"Use Creative Mode to customize colors"]})]})]}),xt.jsxs("div",{className:"flex gap-2 pt-2",children:[xt.jsx(vD,{variant:"outline",className:"flex-1",onClick:()=>v(!1),children:"Close"}),xt.jsx(vD,{className:"flex-1 gap-2",asChild:!0,children:xt.jsxs(qN,{to:"/creative",children:[xt.jsx(gg,{className:"h-4 w-4"}),"Open Creative"]})})]})]})]})})]}):xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(vD,{size:c?"sm":"default",onClick:async()=>{if(h)if(s)if(p.isTooSimilar)v(!0);else if(o){g(!0);try{await o()&&(Yy.success("Vision claimed successfully!",{description:"This unique colorway is now in your gallery"}),m(e=>({...e,isOwned:!0,ownedByCurrentUser:!0})))}catch(e){Yy.error("Failed to claim vision")}finally{g(!1)}}else Yy.error("Claim functionality not available");else null==l||l();else Yy.error("Please sign in to claim this vision")},disabled:f,className:`gap-2 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 ${u}`,children:[f?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):xt.jsx(Zm,{className:"h-4 w-4"}),c?"Claim":"Claim This Vision",!s&&xt.jsx(Zm,{className:"h-3 w-3 opacity-70"})]})}),xt.jsx(Zb,{children:s?"Add this unique colorway to your gallery":"Premium members can claim unique visions"})]})})},pJ=({opening:e,variant:t="compact",showEco:n=!0,showPlayers:r=!1,className:a=""})=>{if(!e)return null;const i=e=>{switch(e){case"gambit":return"from-orange-500/20 to-red-500/20 border-orange-500/40 text-orange-400";case"open":return"from-green-500/20 to-emerald-500/20 border-green-500/40 text-green-400";case"semi-open":return"from-blue-500/20 to-cyan-500/20 border-blue-500/40 text-blue-400";case"closed":return"from-purple-500/20 to-indigo-500/20 border-purple-500/40 text-purple-400";case"semi-closed":return"from-violet-500/20 to-purple-500/20 border-violet-500/40 text-violet-400";case"flank":return"from-amber-500/20 to-yellow-500/20 border-amber-500/40 text-amber-400";case"irregular":return"from-pink-500/20 to-rose-500/20 border-pink-500/40 text-pink-400";default:return"from-gray-500/20 to-slate-500/20 border-gray-500/40 text-gray-400"}},s=e=>{switch(e){case"gambit":return"";case"open":return"";case"semi-open":return"";case"closed":return"";case"semi-closed":return"";case"flank":return"";case"irregular":return"";default:return""}};return"inline"===t?xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(MD,{variant:"outline",className:`gap-1 text-[10px] cursor-help bg-gradient-to-r ${i(e.category)} ${a}`,children:[xt.jsx(Pm,{className:"h-2.5 w-2.5"}),e.name,e.variation&&xt.jsxs("span",{className:"opacity-70",children:[": ",e.variation]})]})}),xt.jsx(Zb,{side:"top",className:"max-w-xs",children:xt.jsxs("div",{className:"space-y-1",children:[xt.jsx("p",{className:"font-medium",children:e.fullName}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:e.description}),e.famousPlayers&&e.famousPlayers.length>0&&xt.jsxs("p",{className:"text-xs text-primary",children:["Played by: ",e.famousPlayers.slice(0,3).join(", ")]})]})})]})}):"compact"===t?xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(gD.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-md border text-xs font-medium cursor-help\n                bg-gradient-to-r ${i(e.category)} ${a}`,children:[xt.jsx("span",{children:s(e.category)}),xt.jsx("span",{children:e.name}),n&&xt.jsx(MD,{variant:"secondary",className:"h-4 text-[9px] px-1 bg-background/50",children:e.eco})]})}),xt.jsx(Zb,{side:"top",className:"max-w-sm p-3",children:xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(Pm,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"font-semibold",children:e.fullName})]}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:e.description}),e.marketingDescription&&xt.jsx("p",{className:"text-xs text-foreground italic",children:e.marketingDescription}),e.famousPlayers&&e.famousPlayers.length>0&&xt.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-400",children:[xt.jsx(Eg,{className:"h-3 w-3"}),xt.jsx("span",{children:e.famousPlayers.join("  ")})]})]})})]})}):"full"===t?xt.jsx(gD.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-xl border bg-gradient-to-br ${i(e.category)} ${a}`,children:xt.jsxs("div",{className:"flex items-start gap-3",children:[xt.jsx("div",{className:"h-10 w-10 rounded-lg bg-background/20 flex items-center justify-center text-xl",children:s(e.category)}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[xt.jsx("h3",{className:"font-display font-semibold text-foreground",children:e.name}),e.variation&&xt.jsx(MD,{variant:"secondary",className:"text-[10px]",children:e.variation}),xt.jsx(MD,{variant:"outline",className:"text-[10px] bg-background/30",children:e.eco})]}),xt.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),e.marketingDescription&&xt.jsx("p",{className:"text-sm mt-2 text-foreground/90",children:e.marketingDescription}),e.famousPlayers&&e.famousPlayers.length>0&&xt.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[xt.jsx(Zm,{className:"h-3.5 w-3.5 text-amber-500"}),xt.jsxs("span",{className:"text-xs text-muted-foreground",children:["Champions: ",e.famousPlayers.join("  ")]})]}),e.historicalSignificance&&xt.jsxs("div",{className:"flex items-start gap-2 mt-2",children:[xt.jsx(wf,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5"}),xt.jsx("span",{className:"text-xs text-muted-foreground",children:e.historicalSignificance})]})]})]})}):"card"===t?xt.jsxs(gD.div,{initial:{opacity:0},animate:{opacity:1},className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded border text-[10px] font-medium\n          bg-gradient-to-r ${i(e.category)} ${a}`,children:[xt.jsx(Pm,{className:"h-2.5 w-2.5"}),xt.jsx("span",{className:"truncate max-w-[100px]",children:e.name}),"gambit"===e.category&&xt.jsx(gg,{className:"h-2.5 w-2.5"})]}):null},mJ=({opening:e,showValue:t=!0})=>{const n="gambit"===e.category?"+15%":e.famousPlayers&&e.famousPlayers.length>=3?"+10%":"+5%";return xt.jsxs(gD.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-xl border border-amber-500/30 bg-gradient-to-br from-amber-500/10 via-background to-orange-500/5",children:[xt.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-amber-500/10 to-transparent rounded-bl-full"}),xt.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-orange-500/10 to-transparent rounded-tr-full"}),xt.jsxs("div",{className:"relative p-4 space-y-3",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"h-8 w-8 rounded-lg bg-amber-500/20 flex items-center justify-center",children:xt.jsx(Pm,{className:"h-4 w-4 text-amber-500"})}),xt.jsxs("div",{children:[xt.jsx("p",{className:"text-[10px] uppercase tracking-wider text-muted-foreground",children:"Book Opening"}),xt.jsx("h3",{className:"font-display font-semibold",children:e.fullName})]})]}),t&&xt.jsxs(MD,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-stone-900 border-0",children:[xt.jsx(gg,{className:"h-3 w-3 mr-1"}),n," Value"]})]}),e.marketingDescription&&xt.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:e.marketingDescription}),e.famousPlayers&&e.famousPlayers.length>0&&xt.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-border/50",children:[xt.jsx(Zm,{className:"h-4 w-4 text-amber-500"}),xt.jsxs("span",{className:"text-xs text-muted-foreground",children:["Played by ",e.famousPlayers.join(", ")]})]}),e.historicalSignificance&&xt.jsx("div",{className:"p-2 rounded-lg bg-background/50 border border-border/30",children:xt.jsxs("div",{className:"flex items-start gap-2",children:[xt.jsx(wf,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),xt.jsx("p",{className:"text-[11px] text-muted-foreground leading-relaxed",children:e.historicalSignificance})]})}),xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsxs(MD,{variant:"outline",className:"text-[10px]",children:["ECO: ",e.eco]}),xt.jsx(MD,{variant:"secondary",className:"text-[10px] capitalize",children:e.category}),xt.jsxs(MD,{variant:"secondary",className:"text-[10px]",children:[e.moveCount," book moves"]})]})]})]})},fJ={piece_harmony:{hybridAccuracy:.53,sfAccuracy:.51,agreementRate:.62,sampleSize:1200},kingside_attack:{hybridAccuracy:.51,sfAccuracy:.49,agreementRate:.58,sampleSize:800},queenside_expansion:{hybridAccuracy:.48,sfAccuracy:.52,agreementRate:.55,sampleSize:600},central_domination:{hybridAccuracy:.5,sfAccuracy:.48,agreementRate:.6,sampleSize:500},endgame_technique:{hybridAccuracy:.49,sfAccuracy:.51,agreementRate:.65,sampleSize:450},open_tactical:{hybridAccuracy:.47,sfAccuracy:.53,agreementRate:.52,sampleSize:400},positional_squeeze:{hybridAccuracy:.52,sfAccuracy:.48,agreementRate:.58,sampleSize:350},pawn_storm:{hybridAccuracy:.46,sfAccuracy:.5,agreementRate:.54,sampleSize:300},sacrificial_attack:{hybridAccuracy:.44,sfAccuracy:.46,agreementRate:.48,sampleSize:250},opposite_castling:{hybridAccuracy:.45,sfAccuracy:.47,agreementRate:.5,sampleSize:200},closed_maneuvering:{hybridAccuracy:.354,sfAccuracy:.42,agreementRate:.45,sampleSize:180},prophylactic_defense:{hybridAccuracy:.42,sfAccuracy:.48,agreementRate:.52,sampleSize:150},unknown:{hybridAccuracy:.415,sfAccuracy:.45,agreementRate:.4,sampleSize:805}};function gJ(e,t,n,r,a){const i=fJ[e]||fJ.unknown,s=t===n,o=Math.abs(a)>350,l=Math.abs(a)>250,c=Math.abs(a)>150,u=i.hybridAccuracy>=.5,d=i.hybridAccuracy>=.45;let h=1,p="",m=!1;s?(u?(h=1.18,p=`Agreement + elite ${e} (${(100*i.hybridAccuracy).toFixed(0)}% historical)`):d?(h=1.1,p=`Agreement on ${e}`):(h=1.02,p=`Agreement, moderate archetype ${e}`),c&&(h*=1.08,p+=" + SF confirms")):u?o?(h=.92,p=`Disagree, SF extreme but ${e} elite - TRUST PATTERN`):l?(h=.98,p=`Disagree, ${e} elite vs SF - BREAKTHROUGH ZONE`):c?(h=1,p=`Disagree, strong ${e} vs moderate SF - OPPORTUNITY`):(h=1.05,p=`Disagree, weak SF, elite ${e} - CAPITALIZE`):d?o?(m=!0,h=.82,p=`Disagree, SF absolute extreme (${a}cp), defer`):l?(h=.9,p=`Disagree, ${e} decent vs SF extreme - cautious`):c?(h=.95,p=`Disagree, ${e} decent - OPPORTUNITY`):(h=1,p=`Disagree, weak SF, decent ${e} - BREAKTHROUGH`):o?(m=!0,h=.78,p=`Disagree, SF extreme (${a}cp), weak archetype - defer`):l?(m=!0,h=.82,p=`Disagree, SF strong, weak ${e}`):c?(h=.88,p="Disagree, SF moderate, weak archetype - cautious trust"):(h=.95,p=`Disagree, weak SF, test ${e}`);const f=u?40+100*i.hybridAccuracy:30+100*i.hybridAccuracy,g=Math.min(f,Math.round(r*h));return{adjustedConfidence:Math.max(25,Math.min(88,g)),deferToStockfish:m,confidenceMultiplier:h,reason:p}}function yJ(e){return e>50?"white_wins":e<-50?"black_wins":"draw"}function vJ(e,t,n,r){if("unknown"!==e)return e;if(r>60)return"kingside"===n?"kingside_attack":"queenside"===n?"queenside_expansion":"open_tactical";if(r<30)return"contested"===t?"prophylactic_defense":"closed_maneuvering";switch(n){case"kingside":default:return"piece_harmony";case"queenside":return"positional_squeeze";case"central":return"central_domination";case"diagonal":return"opposite_castling"}}const xJ={kingside_attack:{id:"kingside_attack",name:"Kingside Attack",description:"Concentrated piece activity toward the enemy king",colorCharacteristics:"Heavy warm colors (h-file), intensifying near enemy king",historicalWinRate:.58,predictedOutcome:"white_favored",lookaheadConfidence:15},queenside_expansion:{id:"queenside_expansion",name:"Queenside Expansion",description:"Systematic territorial gain on the a-d files",colorCharacteristics:"Gradual color spread from center to a-file",historicalWinRate:.54,predictedOutcome:"white_favored",lookaheadConfidence:20},central_domination:{id:"central_domination",name:"Central Domination",description:"Dense control of d4-e5 complex",colorCharacteristics:"Intense overlapping colors in center squares",historicalWinRate:.62,predictedOutcome:"white_favored",lookaheadConfidence:25},prophylactic_defense:{id:"prophylactic_defense",name:"Prophylactic Defense",description:"Counter-reactive, preventing opponent threats",colorCharacteristics:"Low intensity, balanced distribution, reactive patterns",historicalWinRate:.48,predictedOutcome:"balanced",lookaheadConfidence:30},pawn_storm:{id:"pawn_storm",name:"Pawn Storm",description:"Advancing pawn chain creating color trail",colorCharacteristics:"Linear pawn color progression, single-color trails",historicalWinRate:.55,predictedOutcome:"white_favored",lookaheadConfidence:12},piece_harmony:{id:"piece_harmony",name:"Piece Harmony",description:"Coordinated piece placement with color overlap",colorCharacteristics:"Multiple piece colors layered on same squares",historicalWinRate:.6,predictedOutcome:"white_favored",lookaheadConfidence:18},opposite_castling:{id:"opposite_castling",name:"Opposite Side Castling",description:"Race to attack opposite flanks",colorCharacteristics:"Split warm/cold territories, high edge intensity",historicalWinRate:.51,predictedOutcome:"balanced",lookaheadConfidence:10},closed_maneuvering:{id:"closed_maneuvering",name:"Closed Maneuvering",description:"Slow positional regrouping",colorCharacteristics:"Low volatility, gradual color shifts, knight activity",historicalWinRate:.52,predictedOutcome:"balanced",lookaheadConfidence:35},open_tactical:{id:"open_tactical",name:"Open Tactical Battle",description:"High-piece activity, captures, exchanges",colorCharacteristics:"High volatility, sparse but intense color bursts",historicalWinRate:.53,predictedOutcome:"balanced",lookaheadConfidence:8},endgame_technique:{id:"endgame_technique",name:"Endgame Technique",description:"Precise maneuvering with few pieces",colorCharacteristics:"Minimal colors, king/pawn dominant, precise paths",historicalWinRate:.58,predictedOutcome:"white_favored",lookaheadConfidence:40},sacrificial_attack:{id:"sacrificial_attack",name:"Sacrificial Attack",description:"Material sacrifice for initiative",colorCharacteristics:"Asymmetric intensity, heavy attacker presence despite fewer pieces",historicalWinRate:.56,predictedOutcome:"white_favored",lookaheadConfidence:6},positional_squeeze:{id:"positional_squeeze",name:"Positional Squeeze",description:"Gradual space restriction",colorCharacteristics:"Slow territorial expansion, compressing opponent colors",historicalWinRate:.61,predictedOutcome:"white_favored",lookaheadConfidence:28},unknown:{id:"unknown",name:"Unclassified Pattern",description:"Novel or hybrid strategic approach",colorCharacteristics:"Does not match known archetypes",historicalWinRate:.5,predictedOutcome:"balanced",lookaheadConfidence:5}},bJ={petrosian_overprotection:{id:"petrosian_overprotection",name:"Petrosian Overprotection",description:"Defending key squares with more pieces than seemingly necessary, creating a web of mutual protection that makes breakthroughs impossible",historicalPractitioners:["Tigran Petrosian","Ulf Andersson","Anatoly Karpov"],colorFlowSignature:"Dense overlapping colors on central squares, multiple piece visits to same squares",winRate:.42,drawRate:.45,counterplayTiming:"middle",riskLevel:"minimal",marketAnalogy:"Diversified defensive portfolio with multiple hedges on same position"},karpov_stranglehold:{id:"karpov_stranglehold",name:"Karpov Stranglehold",description:"Gradual space restriction that slowly suffocates opponent options without dramatic action",historicalPractitioners:["Anatoly Karpov","Magnus Carlsen","Fabiano Caruana"],colorFlowSignature:"Progressive color expansion with decreasing opponent territory per move",winRate:.55,drawRate:.35,counterplayTiming:"late",riskLevel:"low",marketAnalogy:"Slow accumulation strategy that gradually corners competitors"},nimzowitsch_restraint:{id:"nimzowitsch_restraint",name:"Nimzowitsch Restraint",description:"Active prevention of opponent pawn advances, controlling key squares to freeze their structure",historicalPractitioners:["Aron Nimzowitsch","Richard Rti","Bent Larsen"],colorFlowSignature:"Knight/Bishop colors blocking pawn advance paths, static structure",winRate:.48,drawRate:.4,counterplayTiming:"middle",riskLevel:"low",marketAnalogy:"Regulatory capture - blocking competitor expansion paths"},tigran_pivot:{id:"tigran_pivot",name:"Tigran Pivot",description:"Repositioning pieces from one flank to another to meet emerging threats, like a goalkeeper shifting",historicalPractitioners:["Tigran Petrosian","Vladimir Kramnik","Levon Aronian"],colorFlowSignature:"Sudden color shift from one quadrant to opposite, defensive repositioning",winRate:.45,drawRate:.42,counterplayTiming:"early",riskLevel:"moderate",marketAnalogy:"Sector rotation in response to changing market conditions"},hedgehog_coil:{id:"hedgehog_coil",name:"Hedgehog Coil",description:"Compact defensive structure (pawns on 6th rank) that appears passive but coils for counterattack",historicalPractitioners:["Ulf Andersson","Ljubomir Ljubojevi","Yasser Seirawan"],colorFlowSignature:"High density colors on ranks 6-7, sudden burst patterns",winRate:.51,drawRate:.38,counterplayTiming:"late",riskLevel:"moderate",marketAnalogy:"Defensive consolidation before aggressive breakout"},berlin_wall:{id:"berlin_wall",name:"Berlin Wall",description:"Accepting early simplification to reach an endgame fortress, trading complexity for safety",historicalPractitioners:["Vladimir Kramnik","Fabiano Caruana","Anish Giri"],colorFlowSignature:"Low volatility, sparse colors, early queen exchange signature",winRate:.38,drawRate:.52,counterplayTiming:"never",riskLevel:"minimal",marketAnalogy:"Flight to quality - defensive reallocation to safety assets"},fortress_construction:{id:"fortress_construction",name:"Fortress Construction",description:"Building an impregnable position that cannot be breached even with material deficit",historicalPractitioners:["Tigran Petrosian","Sergey Karjakin","Ian Nepomniachtchi"],colorFlowSignature:"Concentrated colors in defensive perimeter, minimal central presence",winRate:.35,drawRate:.58,counterplayTiming:"never",riskLevel:"minimal",marketAnalogy:"Capital preservation at all costs during crisis"},prophylactic_exchange:{id:"prophylactic_exchange",name:"Prophylactic Exchange",description:"Strategic piece trades to eliminate opponent attacking potential before it develops",historicalPractitioners:["Jose Capablanca","Anatoly Karpov","Magnus Carlsen"],colorFlowSignature:"Decreasing piece density over time, targeted color elimination",winRate:.49,drawRate:.4,counterplayTiming:"middle",riskLevel:"low",marketAnalogy:"Unwinding positions to reduce portfolio risk exposure"},waiting_move_mastery:{id:"waiting_move_mastery",name:"Waiting Move Mastery",description:"Using tempo-neutral moves to pass the move, inducing opponent errors through zugzwang",historicalPractitioners:["Tigran Petrosian","Anatoly Karpov","Ding Liren"],colorFlowSignature:"Repetitive color patterns, minimal advance, high king safety",winRate:.44,drawRate:.46,counterplayTiming:"late",riskLevel:"minimal",marketAnalogy:"Cash position waiting for optimal entry point"},elastic_defense:{id:"elastic_defense",name:"Elastic Defense",description:"Strategic retreat under pressure, maintaining structure integrity while preparing counterattack",historicalPractitioners:["Emanuel Lasker","Mikhail Tal","Maxime Vachier-Lagrave"],colorFlowSignature:"Backward color flow followed by sudden forward surge",winRate:.52,drawRate:.32,counterplayTiming:"early",riskLevel:"moderate",marketAnalogy:"Controlled drawdown before aggressive recovery trade"},pressure_absorption:{id:"pressure_absorption",name:"Pressure Absorption",description:"Absorbing sustained attack without breaking, waiting for opponent overextension",historicalPractitioners:["Viktor Korchnoi","Garry Kasparov","Magnus Carlsen"],colorFlowSignature:"Stable defensive colors under high enemy intensity, gradual balance shift",winRate:.48,drawRate:.38,counterplayTiming:"middle",riskLevel:"moderate",marketAnalogy:"Holding positions through volatility, buying the dip"},prophylactic_unknown:{id:"prophylactic_unknown",name:"Unclassified Prophylactic",description:"Novel defensive approach that does not match known patterns",historicalPractitioners:[],colorFlowSignature:"Anomalous defensive color distribution",winRate:.45,drawRate:.4,counterplayTiming:"middle",riskLevel:"moderate",marketAnalogy:"Novel risk management approach"}};function wJ(e,t,n,r){const a=function(e,t,n,r){const a=Math.abs(e.kingsideWhite)+Math.abs(e.kingsideBlack),i=Math.abs(e.queensideWhite)+Math.abs(e.queensideBlack),s=a+i+Math.abs(e.center),o=n.length>0?n.reduce((e,t)=>e+t.shiftMagnitude,0)/n.length:0,l=t.endgame-t.opening,c=100-t.volatility,u=Math.abs(a-i),d=Math.abs(e.center)/Math.max(1,s)*100,h=s<100?(100-s)/100:0,p=(t.endgame>t.middlegame?20:0)+10*n.filter(e=>e.shiftMagnitude>4).length+(t.opening<0&&t.endgame>0?25:0),m=(t.volatility<15?30:0)+(n.length<=1?25:0)+(r>30&&s<80?20:0);let f="middlegame";r<=15?f="opening":r>=35&&(f="endgame");return{kingsideTotal:a,queensideTotal:i,totalActivity:s,avgMomentMagnitude:o,temporalProgression:l,balanceStability:c,quadrantShift:u,centerDominance:d,compressionRatio:h,counterattackPotential:p,structuralRigidity:m,gamePhase:f}}(e,t,n,r),i=function(e,t,n,r){const a=new Map;for(const s of Object.keys(bJ))a.set(s,{score:0,factors:[]});const i={opening:"opening"===e.gamePhase?1.3:.8,middlegame:"middlegame"===e.gamePhase?1.2:.9,endgame:"endgame"===e.gamePhase?1.4:.7};return kJ(a,"petrosian_overprotection",[{condition:e.centerDominance>25,points:30,factor:"Strong central overprotection"},{condition:e.centerDominance>40,points:15,factor:"Dominant center control"},{condition:e.balanceStability>75,points:20,factor:"Deep positional stability"},{condition:t.volatility<20&&r>30,points:15,factor:"Sustained piece coordination"},{condition:e.structuralRigidity>50,points:10,factor:"Locked central structure"}],i.middlegame),kJ(a,"karpov_stranglehold",[{condition:e.temporalProgression>20,points:35,factor:"Progressive positional squeeze"},{condition:t.middlegame>t.opening&&t.endgame>t.middlegame,points:25,factor:"Steadily increasing control"},{condition:e.balanceStability>70&&e.temporalProgression>10,points:15,factor:"Controlled expansion"},{condition:e.compressionRatio<.3&&e.totalActivity>100,points:10,factor:"Space advantage maintained"}],i.endgame),kJ(a,"nimzowitsch_restraint",[{condition:e.structuralRigidity>60,points:35,factor:"Classic blockade structure"},{condition:t.volatility<20&&e.totalActivity<100,points:25,factor:"Frozen pawn structure"},{condition:n.length<=1&&r>25,points:20,factor:"Minimal tactical incidents"},{condition:e.avgMomentMagnitude<2,points:10,factor:"Ultra-quiet play"}],i.middlegame),kJ(a,"tigran_pivot",[{condition:e.quadrantShift>40,points:35,factor:"Major defensive piece transfer"},{condition:e.quadrantShift>60,points:15,factor:"Cross-board repositioning"},{condition:t.volatility>25&&t.volatility<50,points:20,factor:"Controlled volatility during pivot"},{condition:n.some(e=>e.shiftMagnitude>4),points:15,factor:"Reactive repositioning detected"}],i.middlegame),kJ(a,"hedgehog_coil",[{condition:t.opening<-10&&t.endgame>10,points:35,factor:"Classic hedgehog spring pattern"},{condition:t.opening<0&&t.endgame>0,points:20,factor:"Early concession, late expansion"},{condition:e.counterattackPotential>40,points:20,factor:"Coiled counterattack energy"},{condition:e.compressionRatio>.3&&n.length>=2,points:15,factor:"Compact but active structure"}],i.endgame),kJ(a,"berlin_wall",[{condition:t.volatility<12,points:40,factor:"Ultra-solid Berlin structure"},{condition:t.volatility<15&&0===n.length,points:25,factor:"Complete tactical sterility"},{condition:e.totalActivity<80&&r>25,points:20,factor:"Early simplification complete"},{condition:e.structuralRigidity>70,points:10,factor:"Endgame fortress activated"}],i.endgame),kJ(a,"fortress_construction",[{condition:e.compressionRatio>.5,points:40,factor:"Fortress perimeter established"},{condition:e.totalActivity<60&&e.balanceStability>80,points:30,factor:"Impregnable defensive setup"},{condition:t.endgame<t.middlegame&&r>40,points:20,factor:"Late-game defensive contraction"},{condition:e.structuralRigidity>60&&e.counterattackPotential<20,points:10,factor:"Pure defensive fortress"}],i.endgame),kJ(a,"prophylactic_exchange",[{condition:t.endgame<t.opening&&t.endgame<t.middlegame,points:30,factor:"Systematic piece reduction"},{condition:e.totalActivity<100&&n.length<=2,points:20,factor:"Controlled simplification"},{condition:e.temporalProgression<-10,points:20,factor:"Activity decrease over time"},{condition:e.balanceStability>65,points:10,factor:"Stable through exchanges"}],i.middlegame),kJ(a,"waiting_move_mastery",[{condition:t.volatility<10,points:40,factor:"Master-level patience"},{condition:t.volatility<12&&e.balanceStability>85,points:25,factor:"Zugzwang cultivation"},{condition:0===n.length&&r>35,points:25,factor:"Perfect waiting technique"},{condition:0===e.avgMomentMagnitude&&r>30,points:15,factor:"Zero tactical incidents"}],i.endgame),kJ(a,"elastic_defense",[{condition:t.opening<-15&&t.middlegame>0,points:40,factor:"Classic elastic pattern"},{condition:t.opening<-10&&t.endgame>t.opening+20,points:25,factor:"Retreat and spring back"},{condition:e.counterattackPotential>50,points:20,factor:"Strong counterattack rhythm"},{condition:e.avgMomentMagnitude>3&&n.length>=2,points:15,factor:"Multiple swing moments"}],i.middlegame),kJ(a,"pressure_absorption",[{condition:t.opening<0&&t.middlegame<0&&t.endgame>-5,points:35,factor:"Full attack absorbed"},{condition:t.opening<-10&&t.endgame>t.opening,points:25,factor:"Weathered the storm"},{condition:n.length>=3&&e.avgMomentMagnitude<4,points:20,factor:"Multiple absorptions without breaking"},{condition:e.balanceStability>60&&t.opening<0,points:15,factor:"Stable under pressure"}],i.middlegame),a}(a,t,n,r),s=Array.from(i.entries()).sort((e,t)=>t[1].score-e[1].score),[o,l]=s[0],[c,u]=s[1]||["prophylactic_unknown",{score:0,factors:[]}],d=s.reduce((e,[t,n])=>e+n.score,0),h=Math.min(95,Math.max(30,d>0?l.score/d*100+.3*l.score:30)),p=Math.min(85,Math.max(0,d>0?u.score/d*100+.2*u.score:0)),m=function(e,t){return t.compressionRatio>.4?"contracted":t.centerDominance>35?"central":t.quadrantShift>50?"flank":"distributed"}(0,a),f=function(e,t){return e.opening<-10&&e.endgame>e.opening+15?"elastic":e.volatility<15&&t.length<=1?"static":t.length>=3?"reactive":e.endgame>e.opening&&t.length<=2?"proactive":"reactive"}(t,n),g=function(e,t){const n=[{phase:"opening",strength:Math.abs(e.opening)},{phase:"middlegame",strength:Math.abs(e.middlegame)},{phase:"endgame",strength:Math.abs(e.endgame)}];return t.compressionRatio>.4||e.endgame>e.middlegame&&e.middlegame>e.opening?"endgame":e.middlegame>e.opening&&e.middlegame>e.endgame?"middlegame":n.sort((e,t)=>t.strength-e.strength)[0].phase}(t,a),y=function(e,t,n){if(t<40)return"wait";let r={petrosian_overprotection:"hedge",karpov_stranglehold:"accumulate",nimzowitsch_restraint:"hold",tigran_pivot:"hedge",hedgehog_coil:"accumulate",berlin_wall:"hold",fortress_construction:"reduce",prophylactic_exchange:"reduce",waiting_move_mastery:"wait",elastic_defense:"accumulate",pressure_absorption:"hold",prophylactic_unknown:"wait"}[e];"elastic"===n&&"hold"===r&&(r="accumulate");"static"===n&&"accumulate"===r&&(r="hold");return r}(o,h,f),v=bJ[o];return{variation:o,confidence:Math.round(h),matchingFactors:l.factors.length>0?l.factors:["General prophylactic pattern"],suggestedPlay:NJ(o),riskAssessment:jJ(v,h),secondaryVariation:p>25?c:void 0,secondaryConfidence:p>25?Math.round(p):void 0,phaseSpecificStrength:g,defensiveTopology:m,temporalRhythm:f,tradingSignal:y}}function kJ(e,t,n,r){const a=e.get(t);for(const{condition:i,points:s,factor:o}of n)i&&(a.score+=s*r,a.factors.push(o))}function NJ(e,t,n){return{petrosian_overprotection:"Maintain piece coordination; avoid premature pawn breaks",karpov_stranglehold:"Continue gradual restriction; probe for weaknesses",nimzowitsch_restraint:"Keep blockade intact; prepare piece regrouping",tigran_pivot:"Complete defensive reorganization; stabilize before counterplay",hedgehog_coil:"Wait for overextension; strike with ...d5 or ...b5 break",berlin_wall:"Simplify further; exploit endgame technique",fortress_construction:"Maintain fortress integrity; avoid pawn weaknesses",prophylactic_exchange:"Seek favorable exchanges; reduce attacking pieces",waiting_move_mastery:"Play useful waiting moves; induce zugzwang",elastic_defense:"Complete retreat; prepare counterattack timing",pressure_absorption:"Stay resilient; opponent will overextend",prophylactic_unknown:"Maintain flexibility; adapt to emerging patterns"}[e]}function jJ(e,t){const n=e.riskLevel,r=e.drawRate>.45?"High draw tendency. ":"",a="never"===e.counterplayTiming?"No counterplay expected. ":`Counterplay window: ${e.counterplayTiming} game. `,i=t>70?"Pattern clearly established.":t>50?"Pattern developing.":"Pattern uncertain.";return`${n.charAt(0).toUpperCase()+n.slice(1)} risk. ${r}${a}${i}`}function _J(e,t,n){const r=function(e){const t=[];for(let a=0;a<8;a++)for(let n=0;n<8;n++){const r=e[a][n],i=r.visits.length,s=r.visits.length>0?r.visits[r.visits.length-1].color:"x";t.push(`${i}${s}`)}const n=t.join("");let r=0;for(let a=0;a<n.length;a++){r=(r<<5)-r+n.charCodeAt(a),r&=r}return`cf-${Math.abs(r).toString(36)}`}(e),a=function(e){let t=0,n=0,r=0,a=0,i=0;for(let o=0;o<8;o++)for(let s=0;s<8;s++){const l=e[o][s];let c=0,u=0;for(const e of l.visits)"w"===e.color?c++:u++;const d=c-u,h=s>=4,p=o<4;s>=3&&s<=4&&o>=3&&o<=4?i+=d:h&&p?t+=d:h&&!p?n+=d:!h&&p?r+=d:a+=d}const s=e=>Math.max(-100,Math.min(100,5*e));return{kingsideWhite:s(t),kingsideBlack:s(n),queensideWhite:s(r),queensideBlack:s(a),center:s(i)}}(e),i=function(e){const t=Math.abs(e.kingsideWhite)+Math.abs(e.kingsideBlack),n=Math.abs(e.queensideWhite)+Math.abs(e.queensideBlack),r=Math.abs(e.center),a=Math.abs(e.kingsideWhite)+Math.abs(e.queensideBlack),i=Math.abs(e.queensideWhite)+Math.abs(e.kingsideBlack);if(Math.max(a,i)>1.5*t&&Math.max(a,i)>1.5*n)return"diagonal";if(r>t&&r>n)return"central";if(t>1.5*n)return"kingside";if(n>1.5*t)return"queenside";return"balanced"}(a),s=function(e,t){let n=0,r=0,a=0,i=0,s=0;for(let l=0;l<8;l++)for(let t=0;t<8;t++){const o=e[l][t];for(const e of o.visits){const t="w"===e.color?1:-1;e.moveNumber<=10?n+=t:e.moveNumber<=25?r+=t:a+=t,i+=Math.abs(t-s),s=t}}const o=(e,t)=>Math.max(-100,Math.min(100,e/Math.max(t,1)*10));return{opening:o(n,10),middlegame:o(r,15),endgame:o(a,Math.max(0,t-25)),volatility:Math.min(100,i/t*5)}}(e,n),o=function(e,t){const n=[],r=new Array(t+1).fill(0);for(let a=0;a<8;a++)for(let t=0;t<8;t++){const n=e[a][t];for(const e of n.visits)r[e.moveNumber]+="w"===e.color?1:-1}for(let a=2;a<=t;a++){const e=Math.abs(r[a]-r[a-1]);e>=3&&n.push({moveNumber:a,shiftMagnitude:e,description:r[a]>r[a-1]?"White territorial surge":"Black territorial surge",squaresAffected:[]})}return n.slice(0,5)}(e,n),l=function(e,t,n,r){const a=Math.abs(e.kingsideWhite)+Math.abs(e.kingsideBlack),i=Math.abs(e.queensideWhite)+Math.abs(e.queensideBlack),s=a+i+Math.abs(e.center),o=n.length>0?n.reduce((e,t)=>e+t.shiftMagnitude,0)/n.length:0,l=Math.abs(e.kingsideWhite-e.kingsideBlack),c=Math.abs(e.queensideWhite-e.queensideBlack);if(l>30&&c>30&&t.volatility>35)return"opposite_castling";if(t.endgame>t.opening+25&&t.endgame>t.middlegame)return"pawn_storm";if(a>80&&a>1.3*i)return"kingside_attack";if(i>70&&i>1.3*a)return"queenside_expansion";if(Math.abs(e.center)>45&&Math.abs(e.center)>.5*a)return"central_domination";if(n.length>=3&&o>4)return"sacrificial_attack";if(t.volatility>40&&n.length>=2)return"open_tactical";if(r>35&&Math.abs(t.endgame)>15)return"endgame_technique";if(t.volatility<30&&r>30)return"closed_maneuvering";if(t.middlegame>t.opening&&t.endgame>t.middlegame)return"positional_squeeze";if(e.center>20&&t.volatility>=25&&t.volatility<=55)return"piece_harmony";const u=(e.kingsideBlack<-10||e.queensideBlack<-10)&&(t.middlegame<=t.opening||t.endgame<=t.middlegame)&&n.length<=2;if(s<120&&t.volatility<25&&u)return"prophylactic_defense";if(t.volatility>35)return a>i?"kingside_attack":i>a?"queenside_expansion":"open_tactical";if(a>1.2*i)return"kingside_attack";if(i>1.2*a)return"queenside_expansion";if(Math.abs(e.center)>20)return"central_domination";return"piece_harmony"}(a,s,o,n);"prophylactic_defense"===l&&wJ(a,s,o,n);const c=function(e){let t=0;for(let n=0;n<8;n++)for(let r=0;r<8;r++)t+=e[n][r].visits.length;return Math.min(100,t/200*50)}(e);return{fingerprint:r,dominantSide:function(e){if(Math.abs(e.kingsideWhite)+Math.abs(e.kingsideBlack)+Math.abs(e.queensideWhite)+Math.abs(e.queensideBlack)+Math.abs(e.center)<50)return"contested";const t=Math.max(0,-e.kingsideWhite)+Math.max(0,-e.queensideWhite),n=Math.max(0,e.kingsideBlack)+Math.max(0,e.queensideBlack),r=e.center,a=e.kingsideWhite+e.kingsideBlack+e.queensideWhite+e.queensideBlack+e.center,i=a-20,s=2*n+Math.max(0,.8*r)+Math.max(0,.4*i),o=2*t+Math.max(0,.8*-r)+Math.max(0,.4*-i),l=18,c=s-o;if(c>l)return"white";if(c<-l)return"black";if(t>25&&t>1.5*n)return"black";if(n>25&&n>1.5*t)return"white";return"contested"}(a),flowDirection:i,intensity:c,archetype:l,quadrantProfile:a,temporalFlow:s,criticalMoments:o}}function SJ(e,t,n,r){const a=xJ[e.archetype];e.quadrantProfile;const i=e.temporalFlow,s=function(e){const t=e.dominantSide,n=e.quadrantProfile,r=Math.abs(n.kingsideWhite)+Math.abs(n.kingsideBlack)+Math.abs(n.queensideWhite)+Math.abs(n.queensideBlack)+Math.abs(n.center);if(r<50)return{white:33,black:33,draw:34};const a=15+20*Math.min(1,r/300);switch(t){case"white":return{white:35+a,black:30-a/2,draw:35-a/2};case"black":return{white:30-a/2,black:35+a,draw:35-a/2};default:return{white:33,black:33,draw:34}}}(e),o=function(e){const t=e.middlegame-e.opening,n=e.endgame-e.middlegame,r=.4*t+.6*n,a=Math.min(e.volatility/3,20);if(r>15){const e=Math.min(r,40);return{white:40+e-a/2,black:25-e/2,draw:35-e/2+a/2}}if(r<-15){const e=Math.min(-r,40);return{white:25-e/2,black:40+e-a/2,draw:35-e/2+a/2}}return e.volatility>50?{white:35,black:35,draw:30}:{white:30,black:30,draw:40}}(i),l=function(e,t,n){if(!t)return{white:33,black:33,draw:34};const r={prophylactic_defense:{whiteBoost:-2,blackBoost:5,drawBoost:4},closed_maneuvering:{whiteBoost:-1,blackBoost:3,drawBoost:5},kingside_attack:{whiteBoost:0,blackBoost:0,drawBoost:-5},queenside_expansion:{whiteBoost:0,blackBoost:0,drawBoost:-3},sacrificial_attack:{whiteBoost:0,blackBoost:0,drawBoost:-8},opposite_castling:{whiteBoost:-2,blackBoost:2,drawBoost:0},open_tactical:{whiteBoost:-1,blackBoost:2,drawBoost:-3},central_domination:{whiteBoost:2,blackBoost:0,drawBoost:-3},positional_squeeze:{whiteBoost:2,blackBoost:-1,drawBoost:-2},piece_harmony:{whiteBoost:0,blackBoost:1,drawBoost:0},endgame_technique:{whiteBoost:-1,blackBoost:2,drawBoost:6},pawn_storm:{whiteBoost:0,blackBoost:0,drawBoost:-5}}[e]||{whiteBoost:0,blackBoost:0,drawBoost:0},a=["kingside_attack","sacrificial_attack","opposite_castling","pawn_storm"];let i;i=["prophylactic_defense","closed_maneuvering","endgame_technique"].includes(e)?35:a.includes(e)?25:30;const s=Math.max(18,Math.min(45,i+r.drawBoost)),o=100-s;let l,c;"white"===n?(l=.55*o+r.whiteBoost,c=.45*o+r.blackBoost):"black"===n?(c=.55*o+r.blackBoost,l=.45*o+r.whiteBoost):(l=o/2+r.whiteBoost,c=o/2+r.blackBoost);const u=l+c+s;return{white:Math.round(l/u*100),black:Math.round(c/u*100),draw:Math.round(s/u*100)}}(e.archetype,a,e.dominantSide),c=function(e){if(e>200){const t=Math.min(85,60+Math.abs(e-200)/10);return{white:t,black:5,draw:100-t-5}}if(e<-200){const t=Math.min(85,60+Math.abs(e+200)/10);return{white:5,black:t,draw:100-t-5}}if(e>50){const t=(e-50)/150*25;return{white:45+t,black:25-t/2,draw:30}}if(e<-50){const t=(-e-50)/150*25;return{white:25-t/2,black:45+t,draw:30}}return e>15?{white:38,black:28,draw:34}:e<-15?{white:28,black:38,draw:34}:{white:30,black:30,draw:40}}(t),u=function(e,t){if(e<15)return{white:36,black:32,draw:32};if(e<30)return{white:34,black:34,draw:32};if(t<30)return{white:28,black:28,draw:44};if(t>60)return{white:38,black:38,draw:24};return{white:33,black:33,draw:34}}(r,e.intensity),d=.25,h=.2,p=.15,m=.3,f=.1,g=s.white*d+o.white*h+l.white*p+c.white*m+u.white*f,y=s.black*d+o.black*h+l.black*p+c.black*m+u.black*f,v=s.draw*d+o.draw*h+l.draw*p+c.draw*m+u.draw*f,x=g+y+v,b=Math.round(g/x*100),w=Math.round(y/x*100),k=Math.round(v/x*100);let N,j,_;b>w+10&&b>k+8?(N="white_wins",j=b,_=`White leads clearly (${b}% vs B:${w}% D:${k}%)`):w>b+10&&w>k+8?(N="black_wins",j=w,_=`Black leads clearly (${w}% vs W:${b}% D:${k}%)`):k>b+12&&k>w+12?(N="draw",j=k,_=`Draw leads (${k}% vs W:${b}% B:${w}%)`):t>100?(N="white_wins",j=Math.max(b+8,55),_=`SF strong white (+${t}cp)`):t<-100?(N="black_wins",j=Math.max(w+8,55),_=`SF strong black (${t}cp)`):t>50?(N="white_wins",j=Math.max(b,48),_=`SF white advantage (+${t}cp)`):t<-50?(N="black_wins",j=Math.max(w,48),_=`SF black advantage (${t}cp)`):b>w&&b>k?(N="white_wins",j=b,_=`White edge (SF: ${t}cp)`):w>b&&w>k?(N="black_wins",j=w,_=`Black edge (SF: ${t}cp)`):k>=b&&k>=w?(N="draw",j=k,_=`Draw likely (SF: ${t}cp)`):t>=0?(N="white_wins",j=Math.max(b,42),_="Tie broken: SF slightly favors white"):(N="black_wins",j=Math.max(w,42),_="Tie broken: SF slightly favors black");return{whiteConfidence:b,blackConfidence:w,drawConfidence:k,prediction:N,finalConfidence:j,reasoning:_,highClarity:j-("white_wins"===N?Math.max(w,k):"black_wins"===N?Math.max(b,k):Math.max(b,w))>=15}}function CJ(e,t,n=0,r=18){const a=vJ(e.archetype,e.dominantSide,e.flowDirection,e.intensity),i=xJ[a],s=SJ({...e,archetype:a},n,0,t),o=yJ(n),l=gJ(a,s.prediction,o,s.finalConfidence,n);let c,u;l.deferToStockfish?(c="white_wins"===o?"white":"black_wins"===o?"black":"draw",u=l.adjustedConfidence):(c="white_wins"===s.prediction?"white":"black_wins"===s.prediction?"black":"draw",u=l.adjustedConfidence),s.highClarity||(u=Math.max(30,u-8)),u=Math.max(30,Math.min(85,u));const d=function(e){const t=[];switch(e.archetype){case"kingside_attack":t.push("Maintain pressure on the h-file and g-file"),t.push("Look for sacrificial breakthroughs near the king");break;case"queenside_expansion":t.push("Control the c-file for rook infiltration"),t.push("Advance queenside pawns to create passed pawn");break;case"central_domination":t.push("Use central control to restrict opponent mobility"),t.push("Prepare pawn breaks to open lines");break;case"endgame_technique":t.push("Activate the king immediately"),t.push("Create or protect passed pawns");break;default:t.push("Maintain piece coordination"),t.push("Look for tactical opportunities")}"kingside"===e.flowDirection?t.push("Color flow indicates kingside as the decisive theater"):"queenside"===e.flowDirection&&t.push("Color flow indicates queenside expansion opportunity");return t}(e),h=function(e){const t=[];switch(e.flowDirection){case"kingside":t.push("g4","h5","f5","g7");break;case"queenside":t.push("c4","b5","d5","c7");break;case"central":t.push("d4","e4","d5","e5");break;case"diagonal":t.push("a1","h8","a8","h1");break;default:t.push("d4","e5")}return t.slice(0,4)}(e),p=function(e,t){const n=xJ[e.archetype];return t<15?`Opening phase suggests ${n.name}. Expect color intensity to ${e.temporalFlow.volatility>50?"increase rapidly":"develop gradually"} toward the ${e.flowDirection}.`:t<30?`Middlegame ${n.name} pattern established. Color flow is ${"contested"===e.dominantSide?"evenly contested":`favoring ${e.dominantSide}`}. Watch for tactical breaks in the ${e.flowDirection}.`:`Late game ${n.name}. Pattern suggests ${"contested"===e.dominantSide?"drawing tendencies":`favorable conversion for ${e.dominantSide}`}.`}(e,t);return{predictedWinner:c,confidence:u,lookaheadMoves:i.lookaheadConfidence,strategicGuidance:d,futureCriticalSquares:h,expectedEvolution:p}}const PJ={K:"W",Q:"G",R:"R",B:"B",N:"N",P:"E",k:"z",q:"g",r:"r",b:"b",n:"n",p:"e"};function EJ(e,t){if("P"===e){const e=Math.min(Math.max(t-1,0),6);return String.fromCharCode(49+e)}{const e=Math.min(Math.max(6-t,0),6);return String.fromCharCode(97+e)}}function RJ(e,t){const n={q1_kingside_white:0,q2_queenside_white:0,q3_kingside_black:0,q4_queenside_black:0,q5_center_white:0,q6_center_black:0,q7_extended_kingside:0,q8_extended_queenside:0,bishop_dominance:0,knight_dominance:0,rook_dominance:0,queen_dominance:0,pawn_advancement:0,temporalFlow:{early:0,mid:0,late:0}};let r=0,a=0,i=0,s=0,o=0,l=0,c=0,u=0,d=0;for(let m=0;m<8;m++)for(let t=0;t<8;t++){const h=e[m][t];if(0===h.visits.length)continue;const p=h.visits[h.visits.length-1],f=p.piece,g=p.color;for(const e of h.visits)e.moveNumber<=15?c++:e.moveNumber<=40?u++:d++;if("b"===f&&r++,"n"===f&&a++,"r"===f&&i++,"q"===f&&s++,"p"===f){o+="w"===g?Math.min(Math.max(m-1,0),6):Math.min(Math.max(6-m,0),6),l++}const y=t>=4,v=t<=3,x=m<=3,b=m>=4,w=t>=2&&t<=5,k=t>=6,N=t<=1,j="w"===g?1:-1,_=OJ(f);y&&x?n.q1_kingside_white+=j*_:v&&x?n.q2_queenside_white+=j*_:y&&b?n.q3_kingside_black+=j*_:v&&b&&(n.q4_queenside_black+=j*_),w&&x?n.q5_center_white+=j*_:w&&b&&(n.q6_center_black+=j*_),k&&(n.q7_extended_kingside+=j*_),N&&(n.q8_extended_queenside+=j*_)}const h=r+a+i+s;h>0&&(n.bishop_dominance=r/h,n.knight_dominance=a/h,n.rook_dominance=i/h,n.queen_dominance=s/h),n.pawn_advancement=l>0?o/l/6:0;const p=c+u+d;return p>0&&(n.temporalFlow.early=c/p,n.temporalFlow.mid=u/p,n.temporalFlow.late=d/p),n}function OJ(e){if(!e)return.5;return{q:5,r:3,b:2.5,n:2.5,p:1,k:.5}[e.toLowerCase()]||.5}function TJ(e){const t=[];for(let a=0;a<8;a++)for(let n=0;n<8;n++){const r=e[a][n],i=r.visits.length;if(0===r.visits.length){t.push(`${i}x`);continue}const s=r.visits[r.visits.length-1],o=s.piece;let l;if("p"===o)l=EJ(o,a);else if(o){const e="w"===s.color?o.toUpperCase():o;l=PJ[e]||"x"}else l="x";t.push(`${i}${l}`)}const n=t.join("");let r=0;for(let a=0;a<n.length;a++){r=(r<<5)-r+n.charCodeAt(a),r&=r}return`ep8-${Math.abs(r).toString(36)}`}function MJ(e){const t=Math.abs(e.q1_kingside_white)+Math.abs(e.q3_kingside_black),n=Math.abs(e.q2_queenside_white)+Math.abs(e.q4_queenside_black),r=Math.abs(e.q5_center_white)+Math.abs(e.q6_center_black),a=Math.abs(e.q7_extended_kingside)+Math.abs(e.q8_extended_queenside),i=e.bishop_dominance>.3,s=e.knight_dominance>.35,o=e.rook_dominance>.25,l=e.queen_dominance>.3&&e.temporalFlow.early>.3,c=e.pawn_advancement>.5,u=a>20;return t>1.5*n&&e.temporalFlow.mid>.4?o&&c?"kingside_rook_lift_blitz":s?"kingside_knight_charge":i?"kingside_bishop_battery":"kingside_attack":n>1.2*t&&e.temporalFlow.late>.3?i?"queenside_bishop_squeeze":l?"queenside_queen_seventh":o?"queenside_rook_majority":"queenside_pressure":r>40&&e.temporalFlow.early>.5?s?"central_knight_outpost":i?"central_bishop_cross":c?"central_pawn_roller":"central_domination":u&&e.pawn_advancement>.4?Math.abs(e.q7_extended_kingside)>1.5*Math.abs(e.q8_extended_queenside)?"kingside_expansion":Math.abs(e.q8_extended_queenside)>1.5*Math.abs(e.q7_extended_kingside)?"queenside_expansion":i?"wing_bishop_deployment":"wing_play":e.bishop_dominance>.35&&e.knight_dominance<.2?"bishop_pair_mastery":e.knight_dominance>.4&&e.bishop_dominance<.15?"knight_complex_superiority":e.rook_dominance>.35&&e.temporalFlow.mid>.5?"rook_activity_maximum":c&&e.pawn_advancement>.6?"pawn_storm_assault":i&&s?"minor_piece_coordination":o&&u?"rook_wing_domination":r>30&&t>20?"center_kingside_break":e.pawn_advancement>.7&&e.temporalFlow.late>.4?"passed_pawn_race":e.temporalFlow.early>.5?"development_focus":e.temporalFlow.mid>.5?"middlegame_complexity":"endgame_technique"}function AJ(e){const{board:t,totalMoves:n}=e,r=TJ(t),a=RJ(t),i=MJ(a);let s=0;const o=new Set;for(let y=0;y<8;y++)for(let e=0;e<8;e++){const n=t[y][e];s+=n.visits.length;for(const e of n.visits)o.add(e.piece)}const l=s/64,c=o.size/12,u=a.q1_kingside_white+a.q2_queenside_white+a.q5_center_white+.5*a.q7_extended_kingside,d=Math.abs(a.q3_kingside_black+a.q4_queenside_black+a.q6_center_black+.5*a.q7_extended_kingside),h=u>d+10?"white":d>u+10?"black":"contested",p=Math.abs(a.q7_extended_kingside)>1.5*Math.abs(a.q8_extended_queenside)?"kingside":Math.abs(a.q8_extended_queenside)>1.5*Math.abs(a.q7_extended_kingside)?"queenside":Math.abs(a.q5_center_white)+Math.abs(a.q6_center_black)>30?"central":"balanced",m=Math.min(100,(Math.abs(u)+Math.abs(d))/2),f={kingsideWhite:a.q1_kingside_white,kingsideBlack:a.q3_kingside_black,queensideWhite:a.q2_queenside_white,queensideBlack:a.q4_queenside_black,center:a.q5_center_white+a.q6_center_black},g={opening:a.temporalFlow.early,middlegame:a.temporalFlow.mid,endgame:a.temporalFlow.late,volatility:Math.abs(a.q1_kingside_white-a.q3_kingside_black)/100};return{fingerprint:r,quadrantProfile:f,archetype:i.includes("kingside")?"kingside_attack":i.includes("queenside")?"queenside_expansion":i.includes("central")?"central_domination":i.includes("pawn")?"pawn_storm":"positional_squeeze",dominantSide:h,flowDirection:p,intensity:m,temporalFlow:g,criticalMoments:[],complexity:l,colorRichness:c,enhancedProfile:a}}const BJ=Object.freeze(Object.defineProperty({__proto__:null,ARCHETYPE_DEFINITIONS:xJ,ARCHETYPE_HISTORICAL_ACCURACY:fJ,ENHANCED_COLOR_CODES:PJ,PROPHYLACTIC_VARIATIONS:bJ,calculateEnhancedQuadrantProfile:RJ,calculateEquilibriumScores:SJ,calibrateConfidence:gJ,classifyEnhancedArchetype:MJ,classifyProphylacticVariation:wJ,extractColorFlowSignature:_J,extractEnhancedColorFlowSignature:AJ,forceArchetypeAssignment:vJ,generateEnhancedFingerprint:TJ,getGradatedPawnColor:EJ,getSfPrediction:yJ,predictFromColorFlow:CJ},Symbol.toStringTag,{value:"Module"}));let DJ=0,IJ=0;const LJ=new Map;function FJ(){const e=Date.now();return DJ>e?{isLimited:!0,resetInMs:DJ-e}:{isLimited:!1,resetInMs:0}}async function $J(e=12e4){const t=FJ();if(!t.isLimited)return!0;const n=Math.min(t.resetInMs+2e3,e);await new Promise(e=>setTimeout(e,n));return!FJ().isLimited}const zJ=()=>{const e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF1ZnljYXJ3Zmxoc2Rnc3pibm9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc5ODUwOTEsImV4cCI6MjA4MzU2MTA5MX0.uNxFLqJ3BGKkAj1pj77fxnCfDGTcdKFuCIF8HMPYiXw";return{"Content-Type":"application/json",Authorization:`Bearer ${e}`,apikey:e}};function qJ(e,t){try{const n=new lF(e),r=t.slice(0,2),a=t.slice(2,4),i=t.length>4?t.slice(4):void 0,s=n.move({from:r,to:a,promotion:i});return s?s.san:t}catch{return t}}async function VJ(e,t=1,n=!1,r=!0){if(!n){const t=function(e){return LJ.get(e)||null}(e);if(t)return t}if(FJ().isLimited){if(!r)return null;if(!(await $J()))return null}try{await async function(){const e=Date.now()-IJ;if(e<5e3){const t=5e3-e;await new Promise(e=>setTimeout(e,t))}IJ=Date.now()}();const i=await fetch("https://aufycarwflhsdgszbnop.supabase.co/functions/v1/lichess-cloud-eval",{method:"POST",headers:zJ(),body:JSON.stringify({fen:e,multiPv:t})});if(429===i.status){const a=(await i.json()).resetInMs||6e4;if(DJ=Date.now()+a,r){if(await $J())return VJ(e,t,n,!1)}return null}if(!i.ok)return null;const s=await i.json();if(s.notFound)return null;if(!s.pvs||0===s.pvs.length)return null;const o=s.pvs[0],l=o.moves.split(" "),c=l[0],u=void 0!==o.mate,d=u?o.mate>0?1e4:-1e4:o.cp||0,h={fen:s.fen,bestMove:c,bestMoveSan:qJ(e,c),evaluation:d,isMate:u,mateIn:o.mate,depth:s.depth,pv:l,winProbability:(a=d,50+50*(2/(1+Math.exp(-.00368208*a))-1))};return function(e,t){if(LJ.size>=500){const e=LJ.keys().next().value;e&&LJ.delete(e)}LJ.set(e,t)}(e,h),h}catch(i){return null}var a}async function WJ(){const e=FJ();if(e.isLimited)return{available:!1,rateLimited:!0,resetInMs:e.resetInMs};try{const e=await fetch("https://aufycarwflhsdgszbnop.supabase.co/functions/v1/lichess-cloud-eval",{method:"POST",headers:zJ(),body:JSON.stringify({action:"check"})});if(!e.ok)return{available:!1,rateLimited:!1};const t=await e.json();return t.rateLimited&&t.resetInMs&&(DJ=Date.now()+t.resetInMs),{available:t.available,rateLimited:t.rateLimited||!1,resetInMs:t.resetInMs}}catch(t){return{available:!1,rateLimited:!1}}}function QJ(e,t){const n=t.characteristics;let r=0;e.flowDirection===n.flowDirection?r+=25:function(e,t){var n;return(null==(n={kingside:["central","diagonal"],queenside:["central","diagonal"],central:["kingside","queenside","balanced"],balanced:["central"],diagonal:["kingside","queenside"]}[e])?void 0:n.includes(t))||!1}(e.flowDirection,n.flowDirection)&&(r+=12);const a=Math.abs(e.intensity-n.intensity);r+=Math.max(0,20-a/2);const i=Math.abs(e.temporalFlow.volatility-n.volatility);r+=Math.max(0,15-i/3),e.dominantSide===n.dominantSide?r+=20:"contested"!==e.dominantSide&&"contested"!==n.dominantSide||(r+=10);const s=Math.abs(e.quadrantProfile.center-n.centerControl);r+=Math.max(0,10-s/5);const o=(e.quadrantProfile.kingsideWhite+e.quadrantProfile.kingsideBlack)/2,l=Math.abs(o-n.kingsideActivity);r+=Math.max(0,5-l/10);const c=(e.quadrantProfile.queensideWhite+e.quadrantProfile.queensideBlack)/2,u=Math.abs(c-n.queensideActivity);return r+=Math.max(0,5-u/10),Math.round(r)}function UJ(e,t){const n=[],r=t.characteristics;return e.flowDirection===r.flowDirection&&n.push(`Same flow direction: ${e.flowDirection}`),e.dominantSide===r.dominantSide&&n.push(`Same dominant side: ${e.dominantSide}`),Math.abs(e.intensity-r.intensity)<15&&n.push("Similar intensity level"),Math.abs(e.temporalFlow.volatility-r.volatility)<20&&n.push("Similar game volatility"),0===n.length&&n.push("Structural pattern similarity"),n}const KJ=new class{constructor(){fe(this,"patterns",new Map),fe(this,"archetypeIndex",new Map)}addPattern(e,t,n,r){const a={id:`pat-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fingerprint:e.fingerprint,archetype:e.archetype,outcome:t,totalMoves:r,characteristics:{flowDirection:e.flowDirection,intensity:e.intensity,volatility:e.temporalFlow.volatility,dominantSide:e.dominantSide,centerControl:e.quadrantProfile.center,kingsideActivity:(e.quadrantProfile.kingsideWhite+e.quadrantProfile.kingsideBlack)/2,queensideActivity:(e.quadrantProfile.queensideWhite+e.quadrantProfile.queensideBlack)/2},gameMetadata:{event:n.event,white:n.white,black:n.black,date:n.date}};this.patterns.set(a.id,a);const i=this.archetypeIndex.get(e.archetype)||[];return i.push(a),this.archetypeIndex.set(e.archetype,i),a}findSimilar(e,t=5){const n=[],r=this.archetypeIndex.get(e.archetype)||[];for(const i of r){const t=QJ(e,i);t>30&&n.push({pattern:i,similarity:t,matchingFactors:UJ(e,i),predictedOutcome:i.outcome,confidence:.9*t})}const a={kingside_attack:["sacrificial_attack","open_tactical"],queenside_expansion:["positional_squeeze","closed_maneuvering"],central_domination:["piece_harmony","positional_squeeze"],prophylactic_defense:["closed_maneuvering","endgame_technique"],pawn_storm:["kingside_attack","opposite_castling"],piece_harmony:["central_domination","positional_squeeze"],opposite_castling:["kingside_attack","pawn_storm"],closed_maneuvering:["prophylactic_defense","positional_squeeze"],open_tactical:["sacrificial_attack","kingside_attack"],endgame_technique:["prophylactic_defense","positional_squeeze"],sacrificial_attack:["open_tactical","kingside_attack"],positional_squeeze:["central_domination","closed_maneuvering"],unknown:[]}[e.archetype]||[];for(const i of a){const t=this.archetypeIndex.get(i)||[];for(const r of t){const t=.8*QJ(e,r);t>30&&n.push({pattern:r,similarity:t,matchingFactors:UJ(e,r),predictedOutcome:r.outcome,confidence:.7*t})}}return n.sort((e,t)=>t.similarity-e.similarity).slice(0,t)}getStats(){const e={};for(const[t,n]of this.archetypeIndex)e[t]=n.length;return{totalPatterns:this.patterns.size,byArchetype:e}}injectLearnedPattern(e){if(this.patterns.has(e.id))return;this.patterns.set(e.id,e);const t=this.archetypeIndex.get(e.archetype)||[];t.push(e),this.archetypeIndex.set(e.archetype,t)}clear(){this.patterns.clear(),this.archetypeIndex.clear()}};function HJ(e,t,n){return Promise.race([e,new Promise((e,r)=>setTimeout(()=>r(new Error(`${n} timeout after ${t}ms`)),t))])}let GJ=!1,YJ=0;function ZJ(e){const t=e.toLowerCase();return"white"===t||"white_wins"===t?"white_wins":"black"===t||"black_wins"===t?"black_wins":"draw"===t?"draw":null}function XJ(e){const t=["kingside_attack","queenside_expansion","central_domination","prophylactic_defense","pawn_storm","piece_harmony","opposite_castling","closed_maneuvering","open_tactical","endgame_technique","sacrificial_attack","positional_squeeze","unknown"],n=e.toLowerCase().replace(/\s+/g,"_");if(t.includes(n))return n;for(const r of t)if(n.includes(r)||r.includes(n))return r;return"unknown"}function JJ(e,t){return t<=8?"deep_endgame":t<=14?"endgame":e<=12?"opening":e<=25?"early_middlegame":"late_middlegame"}const e0={kingside_attack:{opening:.4,early_middlegame:.7,late_middlegame:.9,endgame:.5,deep_endgame:.3},queenside_expansion:{opening:.5,early_middlegame:.7,late_middlegame:.85,endgame:.7,deep_endgame:.6},central_domination:{opening:.8,early_middlegame:.85,late_middlegame:.75,endgame:.5,deep_endgame:.4},prophylactic_defense:{opening:.3,early_middlegame:.6,late_middlegame:.8,endgame:.9,deep_endgame:.95},pawn_storm:{opening:.3,early_middlegame:.6,late_middlegame:.85,endgame:.7,deep_endgame:.6},piece_harmony:{opening:.7,early_middlegame:.8,late_middlegame:.75,endgame:.5,deep_endgame:.4},opposite_castling:{opening:.6,early_middlegame:.9,late_middlegame:.85,endgame:.4,deep_endgame:.3},closed_maneuvering:{opening:.4,early_middlegame:.6,late_middlegame:.9,endgame:.8,deep_endgame:.7},open_tactical:{opening:.3,early_middlegame:.5,late_middlegame:.6,endgame:.4,deep_endgame:.3},endgame_technique:{opening:.1,early_middlegame:.2,late_middlegame:.4,endgame:.95,deep_endgame:.98},sacrificial_attack:{opening:.2,early_middlegame:.6,late_middlegame:.7,endgame:.3,deep_endgame:.2},positional_squeeze:{opening:.3,early_middlegame:.6,late_middlegame:.9,endgame:.85,deep_endgame:.8},unknown:{opening:.3,early_middlegame:.3,late_middlegame:.3,endgame:.3,deep_endgame:.3}};function t0(e,t,n){let r=t;const a=[];if(n?("positional_squeeze"!==e.archetype&&"closed_maneuvering"!==e.archetype||(r*=1.15,a.push("Late middlegame: positional patterns reliable")),"open_tactical"===e.archetype&&(r=.9*r+.05,a.push("Tactical positions remain volatile"))):(r=.85*r+.075,a.push("Early middlegame: moderate prediction confidence")),"contested"!==e.dominantSide){const t=e.intensity/100*.05;"white"===e.dominantSide?r+=t:r-=t,a.push(`${e.dominantSide} territorial advantage detected`)}return{adjustedRate:Math.max(.25,Math.min(.75,r)),reasoning:a.join("; ")}}function n0(e,t,n){let r=t;const a=[];if("endgame_technique"===e.archetype&&(n?(r*=1.25,a.push("Deep endgame: technique patterns highly reliable")):(r*=1.15,a.push("Endgame: technique patterns predictive"))),"prophylactic_defense"===e.archetype&&(r=.7*r+.15,a.push("Defensive fortress detected - draw likely")),"positional_squeeze"===e.archetype&&(r*=1.2,a.push("Positional squeeze converts well in endgame")),"contested"!==e.dominantSide){const t=.1;"white"===e.dominantSide?(r+=t,a.push("White has endgame territorial advantage")):(r-=t,a.push("Black has endgame territorial advantage"))}return r=n?.95*r+.025:.88*r+.06,{adjustedRate:Math.max(.15,Math.min(.85,r)),reasoning:a.join("; ")}}function r0(e,t,n,r){var a;const i=JJ(n,r),s=(null==(a=e0[e.archetype])?void 0:a[i])??.5;let o;switch(i){case"opening":o=function(e,t){let n=t;const r=[];return"central_domination"===e.archetype&&(n*=1.1,r.push("Central control is decisive in opening")),"piece_harmony"===e.archetype&&(n*=1.08,r.push("Development advantage compounds")),"sacrificial_attack"===e.archetype&&(n=.95*t+.025,r.push("Gambit outcomes highly volatile")),n=.7*n+.15,r.push("Opening phase: prediction regression applied"),{adjustedRate:Math.max(.35,Math.min(.65,n)),reasoning:r.join("; ")}}(e,t);break;case"early_middlegame":o=t0(e,t,!1);break;case"late_middlegame":o=t0(e,t,!0);break;case"endgame":o=n0(e,t,!1);break;case"deep_endgame":o=n0(e,t,!0);break;default:o={adjustedRate:t,reasoning:"Unknown phase"}}const l=s>=.5;return{originalWinRate:t,phaseAdjustedWinRate:o.adjustedRate,phaseReliability:s,phase:i,shouldPredict:l,reasoning:o.reasoning+` [Phase: ${i}, Reliability: ${(100*s).toFixed(0)}%]`}}const a0={prophylactic_defense:.25,central_domination:.2,piece_harmony:.18,kingside_attack:.15,positional_squeeze:.15,queenside_expansion:.12,pawn_storm:.1,sacrificial_attack:.08,closed_maneuvering:.1,endgame_technique:.05,open_tactical:-.05,opposite_castling:-.08,unknown:0};function i0(e,t,n,r){const a=xJ[e.archetype],i=function(e){const t=e.board();let n=0;for(const r of t)for(const e of r)e&&n++;return n}(r),s=JJ(n,i),o=r0(e,a.historicalWinRate,n,i),l=function(e,t,n,r,a=!0){if("mate"===t.evaluation.scoreType)return t.evaluation.score>0?"white_wins":"black_wins";if(Math.abs(t.evaluation.score)>500)return t.evaluation.score>0?"white_wins":"black_wins";if(!a)return"unclear";const i=r??n.historicalWinRate;let s;s="contested"!==e.dominantSide?i>.58?"white"===e.dominantSide?"white_wins":"black_wins":i<.42?"white"===e.dominantSide?"black_wins":"white_wins":e.temporalFlow.volatility<30?"draw":"unclear":e.temporalFlow.volatility>50?"unclear":"draw";const o=200*Math.abs(i-.5),l=function(e,t,n,r,a){const i=a0[t]||0;if(a>70)return{calibratedPrediction:e,adjustmentApplied:"High confidence - no calibration",adjustmentMagnitude:0};if("black_wins"===e&&r>150&&a<55)return{calibratedPrediction:"white_wins",adjustmentApplied:`v7.88 Equilibrium: SF strongly favors white (${r}cp)`,adjustmentMagnitude:i};if("white_wins"===e&&r<-150&&a<55)return{calibratedPrediction:"black_wins",adjustmentApplied:`v7.88 Equilibrium: SF strongly favors black (${r}cp)`,adjustmentMagnitude:-i};if("unclear"===e){if(r>20&&i>0)return{calibratedPrediction:"white_wins",adjustmentApplied:"Prior-based: unclear  white (dataset prior)",adjustmentMagnitude:.48-.33};if(r<-20&&i<0)return{calibratedPrediction:"black_wins",adjustmentApplied:"Prior-based: unclear  black",adjustmentMagnitude:.12}}return"white_wins"===e&&i<-.05&&!(r>50)?{calibratedPrediction:e,adjustmentApplied:`Warning: ${t} may over-predict white`,adjustmentMagnitude:i}:{calibratedPrediction:e,adjustmentApplied:"No calibration needed",adjustmentMagnitude:0}}(s,e.archetype,e.dominantSide,t.evaluation.score,o);l.adjustmentMagnitude;return l.calibratedPrediction}(e,t,a,o.phaseAdjustedWinRate,o.shouldPredict),c=function(e){return{opening:8,early_middlegame:12,late_middlegame:20,endgame:35,deep_endgame:50}[e]}(s),u=function(e,t,n){var r;const a=[];a.push({approximateMoveNumber:t+5,description:`${e.flowDirection} activity intensifies`,criticalSquares:(null==(r=e.criticalMoments[0])?void 0:r.squaresAffected)||["d4","e5"],expectedColorFlow:`Expect ${e.dominantSide} territorial expansion`}),t<20&&a.push({approximateMoveNumber:25,description:"Transition to middlegame complications",criticalSquares:["c5","e5","d4"],expectedColorFlow:"Color intensity peaks as pieces engage"});t<35&&a.push({approximateMoveNumber:40,description:"endgame_technique"===e.archetype?"Endgame conversion phase":"Position clarification expected",criticalSquares:["d-file","king position"],expectedColorFlow:"Color flow stabilizes toward conclusion"});"endgame"!==n&&"deep_endgame"!==n||a.push({approximateMoveNumber:t+15,description:"Technique conversion window",criticalSquares:["king activity","passed pawns"],expectedColorFlow:"High reliability phase - patterns crystallized"});return a}(e,n,s),d=function(e,t,n){const r=n??e.historicalWinRate,a=Math.min(.3,t.evaluation.score/1e3),i=Math.min(.95,Math.max(.05,r+a)),s=Math.min(.95,Math.max(.05,1-r-a)),o=Math.max(0,1-i-s);return{whiteWin:i,blackWin:s,draw:o}}(a,t,o.phaseAdjustedWinRate),h=function(e){const t=[];"kingside_attack"===e.archetype?(t.push("Successful defensive exchange sacrifice"),t.push("Opening of queenside counter-play")):"central_domination"===e.archetype?(t.push("Successful pawn break opening the position"),t.push("Piece sacrifice to destroy center")):(t.push("Tactical blunder changes evaluation significantly"),t.push("Unexpected strategic pivot to opposite wing"));return t}(e);return function(e,t){var n;return((null==(n=e0[e])?void 0:n[t])??.5)>=.75}(e.archetype,s)||h.unshift(` ${e.archetype} archetype unreliable in ${s} phase`),{predictedOutcome:l,horizonMoves:c,expectedMilestones:u,outcomeProbabilities:d,trajectoryBreakers:h}}const s0={archetypes:new Map,lastDatabaseSync:0,globalAccuracy:.333,globalDisagreementWinRate:0,initialized:!1};function o0(e){const t=(Date.now()-e)/36e5;return Math.pow(.5,t/24)}function l0(e,t,n,r){const a=p0(e);a.recentPredictions.push({correct:t,timestamp:Date.now(),weight:1}),a.recentPredictions.length>100&&a.recentPredictions.shift(),a.totalPredictions++,t&&a.correctPredictions++,s0.archetypes.set(e,a),void 0!==n&&void 0!==r&&function(e,t,n){const r=p0(e);t!==n&&(t&&!n?(r.disagreementWins++,r.boostMultiplier=Math.min(1.5,r.boostMultiplier+.15)):(r.disagreementLosses++,r.boostMultiplier=Math.max(.7,r.boostMultiplier-.075)),s0.archetypes.set(e,r))}(e,n,r)}function c0(e){const t=s0.archetypes.get(e);if(!t||t.recentPredictions.length<5)return 1;const n=function(e){if(0===e.length)return.333;let t=0,n=0;for(const r of e){const e=o0(r.timestamp);t+=r.correct?e:0,n+=e}return n>0?t/n:.333}(t.recentPredictions)-.333;return 1+Math.max(-.5,Math.min(.5,1.5*n))}function u0(e,t){const n=[];let r=t;const a=c0(e);r*=a,1!==a&&n.push(`Live calibration: ${a>1?"+":""}${(100*(a-1)).toFixed(0)}%`);const i=function(e){const t=s0.archetypes.get(e);return(null==t?void 0:t.boostMultiplier)??1}(e);r*=i,1!==i&&n.push(`Disagreement boost: ${i>1?"+":""}${(100*(i-1)).toFixed(0)}%`);const s=s0.archetypes.get(e);return s&&s.totalPredictions>50&&n.push(`${s.totalPredictions} historical samples`),r=Math.max(10,Math.min(95,r)),{confidence:r,factors:n}}async function d0(){if(!s0.initialized)try{const{data:e,error:t}=await KC.from("chess_prediction_attempts").select("hybrid_archetype, hybrid_correct, stockfish_correct, created_at").order("created_at",{ascending:!1}).limit(5e3);if(t)return void(s0.initialized=!0);if(!e||0===e.length)return void(s0.initialized=!0);let n=0,r=0,a=0;for(const i of e){const e=m0(i.hybrid_archetype);if(!e)continue;const t=p0(e),s=new Date(i.created_at).getTime();if(t.recentPredictions.push({correct:i.hybrid_correct??!1,timestamp:s,weight:o0(s)}),t.recentPredictions.length>100&&t.recentPredictions.shift(),t.totalPredictions++,i.hybrid_correct&&(t.correctPredictions++,n++),i.hybrid_correct!==i.stockfish_correct&&(a++,i.hybrid_correct&&!i.stockfish_correct?(t.disagreementWins++,r++):t.disagreementLosses++),t.disagreementWins+t.disagreementLosses>0){const e=t.disagreementWins/(t.disagreementWins+t.disagreementLosses);t.boostMultiplier=.7+.8*e}s0.archetypes.set(e,t)}s0.globalAccuracy=e.length>0?n/e.length:.333,s0.globalDisagreementWinRate=a>0?r/a:0,s0.lastDatabaseSync=Date.now(),s0.initialized=!0}catch(BPe){s0.initialized=!0}}function h0(){const e=[];for(const[t,n]of s0.archetypes)n.totalPredictions>=10&&e.push({archetype:t,accuracy:n.correctPredictions/n.totalPredictions,boost:n.boostMultiplier});return e.sort((e,t)=>t.accuracy-e.accuracy),{globalAccuracy:s0.globalAccuracy,globalDisagreementWinRate:s0.globalDisagreementWinRate,archetypeCount:s0.archetypes.size,topPerformers:e.slice(0,5),isLearning:s0.initialized&&s0.archetypes.size>0}}function p0(e){let t=s0.archetypes.get(e);return t||(t={totalPredictions:0,correctPredictions:0,recentPredictions:[],disagreementWins:0,disagreementLosses:0,boostMultiplier:1},s0.archetypes.set(e,t)),t}function m0(e){if(!e)return null;const t=["kingside_attack","queenside_expansion","central_domination","prophylactic_defense","pawn_storm","piece_harmony","opposite_castling","closed_maneuvering","open_tactical","endgame_technique","sacrificial_attack","positional_squeeze","unknown"],n=e.toLowerCase().replace(/\s+/g,"_");if(t.includes(n))return n;for(const r of t)if(n.includes(r)||r.includes(n))return r;return"unknown"}let f0={totalPredictions:0,correctPredictions:0},g0=null;function y0(e,t,n,r){const a=[];g0||(g0=d0());const i=f0.totalPredictions<10?33.3:f0.correctPredictions/f0.totalPredictions*100;a.push(`Historical accuracy: ${i.toFixed(1)}%`);const s=10*(Math.min(1,e.evaluation.depth/25)-.5),o=Math.max(20,Math.min(95,i+s));a.push(`Depth ${e.evaluation.depth} (${s>0?"+":""}${s.toFixed(1)}%)`);const l=xJ[t.archetype],c="unknown"!==t.archetype?10*(l.historicalWinRate-.5)+t.intensity/20:-5,u=Math.max(20,Math.min(95,i+c));a.push(`${l.name} archetype (${c>0?"+":""}${c.toFixed(1)}%)`);const d=function(e,t,n){const r=e.evaluation.score>0,a="white"===t.dominantSide;if(r&&a||!r&&!a)return n.push("Tactics and strategy aligned"),85;if("contested"===t.dominantSide)return n.push("Strategy contested, tactics decisive"),65;return n.push("Tactics and strategy diverge - complex position"),40}(e,t,a),h=i+(s+c+(d-50)/10)/3,p=u0(t.archetype,h);a.push(...p.factors);h0().isLearning&&Math.random();const m=Math.min(95,i+15);return{overall:Math.round(Math.max(20,Math.min(m,p.confidence))),tactical:Math.round(o),strategic:Math.round(u),alignment:d,factors:a}}const v0=[{name:"correlationWeight",value:.3,minValue:.1,maxValue:.6,mutationRate:.02,lastMutation:0,performanceImpact:0},{name:"momentumWeight",value:.25,minValue:.1,maxValue:.5,mutationRate:.02,lastMutation:0,performanceImpact:0},{name:"volatilityWeight",value:.2,minValue:.05,maxValue:.4,mutationRate:.02,lastMutation:0,performanceImpact:0},{name:"sentimentWeight",value:.15,minValue:.05,maxValue:.3,mutationRate:.02,lastMutation:0,performanceImpact:0},{name:"leadingIndicatorLag",value:3,minValue:1,maxValue:10,mutationRate:.05,lastMutation:0,performanceImpact:0},{name:"confidenceThreshold",value:.6,minValue:.4,maxValue:.9,mutationRate:.01,lastMutation:0,performanceImpact:0},{name:"adaptationSpeed",value:.1,minValue:.01,maxValue:.3,mutationRate:.01,lastMutation:0,performanceImpact:0},{name:"patternDecayRate",value:.95,minValue:.8,maxValue:.99,mutationRate:.005,lastMutation:0,performanceImpact:0}];function x0(e,t){var n;return(null==(n=e.find(e=>e.name===t))?void 0:n.value)??0}function b0(e){return`${e.correlationStrength>.7?"High-Corr":e.correlationStrength>.4?"Mid-Corr":"Low-Corr"} ${e.volatility>.7?"High-Vol":e.volatility>.4?"Mid-Vol":"Low-Vol"} ${e.momentum>.3?"Bullish-Mom":e.momentum<-.3?"Bearish-Mom":"Neutral-Mom"}`}function w0(e){return[{market:"cross",indicator:"correlation_shift",operator:"between",value:[e.correlationStrength-.1,e.correlationStrength+.1]},{market:"cross",indicator:"volatility",operator:"between",value:[e.volatility-.1,e.volatility+.1]},{market:"cross",indicator:"price_change",operator:e.momentum>0?">":"<",value:0}]}function k0(e,t,n,r){const a=(i=t.marketConditions,`C${Math.round(10*i.correlationStrength)}V${Math.round(10*i.volatility)}M${Math.round(10*i.momentum)}`);var i;const s=e.findIndex(e=>e.id===a),o=[...e];if(-1!==s){const e={...o[s]};e.occurrences++,e.successRate=(e.successRate*(e.occurrences-1)+(n?1:0))/e.occurrences,e.lastSeen=Date.now(),e.confidence=Math.min(.95,e.successRate*Math.min(1,e.occurrences/50)),o[s]=e}else e.length<100&&o.push({id:a,name:b0(t.marketConditions),conditions:w0(t.marketConditions),predictedOutcome:"up"===t.predicted?"bullish":"down"===t.predicted?"bearish":"neutral",confidence:.5,occurrences:1,successRate:n?1:0,discoveredAt:Date.now(),lastSeen:Date.now()});return o.map(e=>({...e,confidence:e.confidence*r})).filter(e=>e.confidence>.1||Date.now()-e.lastSeen<36e5)}const N0={confidenceMinimum:.55,correlationSignificance:.3,volumeSpikeFactor:1.5,volatilityAdjustment:1,predictionHorizonMs:5e3};const j0=new class{constructor(){fe(this,"state"),fe(this,"maxRecentAnomalies",100),this.state={totalHarvested:0,byType:{wrong_but_profitable:0,calibration_mismatch:0,consensus_violation:0,temporal_glitch:0,cross_domain_resonance:0,mutation_survival:0,emergent_optimization:0},recentAnomalies:[],exploitablePatterns:[],evolutionaryInsights:[]}}harvestFromOutcome(e,t,n,r){const a=[];if(!t&&n>r&&a.push(this.createAnomaly({type:"wrong_but_profitable",description:"Incorrect prediction led to fitness improvement - learning from failure",expectedBehavior:`Prediction: ${e.predicted}`,actualBehavior:`Actual: ${e.actual}, but fitness +${(100*(n-r)).toFixed(1)}%`,informationGained:"Wrong predictions with high confidence reveal blind spots in pattern matching",exploitabilityScore:Math.min(1,5*(n-r)),evolutionaryValue:.7,domain:"prediction",importance:7,tags:["learning","failure-analysis","fitness-paradox"]})),!t&&e.confidence>.75&&a.push(this.createAnomaly({type:"calibration_mismatch",description:`High confidence (${(100*e.confidence).toFixed(0)}%) prediction failed - calibration signal`,expectedBehavior:`Confidence ${(100*e.confidence).toFixed(0)}% should indicate reliability`,actualBehavior:"Prediction failed despite high confidence",informationGained:"Edge case identified where confidence model breaks down",exploitabilityScore:e.confidence,evolutionaryValue:.8,domain:"calibration",importance:8,tags:["calibration","overconfidence","edge-case"]})),t&&e.confidence<.4&&a.push(this.createAnomaly({type:"consensus_violation",description:"Low-confidence contrarian prediction proved correct - hidden pattern detected",expectedBehavior:"Low confidence suggests uncertainty",actualBehavior:"Prediction correct despite low confidence - system knew more than it admitted",informationGained:"Subconscious pattern recognition operating below confidence threshold",exploitabilityScore:1-e.confidence,evolutionaryValue:.9,domain:"pattern-recognition",importance:9,tags:["contrarian","hidden-pattern","brilliant-move"]})),a.length>0){const e=a.reduce((e,t)=>e.evolutionaryValue>t.evolutionaryValue?e:t);return this.recordAnomaly(e),e}return null}harvestFromMutation(e,t,n,r){const a=r-n;if(Math.abs(t)<.1&&a>.05){const n=this.createAnomaly({type:"mutation_survival",description:`Gene "${e}" micro-mutation yielded macro-improvement`,expectedBehavior:`Small mutation (${(100*t).toFixed(1)}%) should have small effect`,actualBehavior:`Fitness improved by ${(100*a).toFixed(1)}%`,informationGained:"Gene exists at critical inflection point - small changes cascade",exploitabilityScore:a/Math.max(.01,Math.abs(t)),evolutionaryValue:.85,domain:"genetics",importance:8,tags:["mutation","cascade-effect","critical-gene"],geneticImpact:{genesAffected:[e],mutationType:"beneficial",fitnessChange:a}});return this.recordAnomaly(n),n}if(Math.abs(t)>.2&&a<-.1){const t=this.createAnomaly({type:"mutation_survival",description:`Gene "${e}" boundary discovered through harmful mutation`,expectedBehavior:"Exploration mutation",actualBehavior:`Fitness dropped ${(100*Math.abs(a)).toFixed(1)}% - boundary found`,informationGained:"Gene has hard constraint - now we know the safe operating range",exploitabilityScore:.6,evolutionaryValue:.5,domain:"genetics",importance:6,tags:["boundary-detection","constraint-mapping"],geneticImpact:{genesAffected:[e],mutationType:"harmful_but_informative",fitnessChange:a}});return this.recordAnomaly(t),t}return null}harvestCrossDomainResonance(e,t,n,r){if(n>.7){const a=this.createAnomaly({type:"cross_domain_resonance",description:`Unexpected resonance between ${e} and ${t}`,expectedBehavior:"Domains should be independent",actualBehavior:`Correlation: ${(100*n).toFixed(0)}%`,informationGained:r,exploitabilityScore:n,evolutionaryValue:.95,domain:`${e}-${t}`,importance:10,tags:["cross-domain","resonance","universal-pattern","glitch-in-matrix"]});return this.recordAnomaly(a),a}return null}createAnomaly(e){return{id:`anomaly_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),systemIntegrityPreserved:!0,relatedPatterns:[],geneticImpact:e.geneticImpact||{genesAffected:[],mutationType:"neutral",fitnessChange:0},...e}}recordAnomaly(e){this.state.totalHarvested++,this.state.byType[e.type]++,this.state.recentAnomalies.unshift(e),this.state.recentAnomalies.length>this.maxRecentAnomalies&&this.state.recentAnomalies.pop(),this.updateExploitablePatterns(e),e.evolutionaryValue>.8&&(this.state.evolutionaryInsights.push(`[${new Date(e.timestamp).toISOString()}] ${e.type}: ${e.informationGained}`),this.state.evolutionaryInsights.length>50&&this.state.evolutionaryInsights.shift())}updateExploitablePatterns(e){const t=`${e.type}:${e.domain}`,n=this.state.exploitablePatterns.find(e=>e.pattern===t);n?(n.frequency++,n.avgExploitability=(n.avgExploitability*(n.frequency-1)+e.exploitabilityScore)/n.frequency):this.state.exploitablePatterns.push({pattern:t,frequency:1,avgExploitability:e.exploitabilityScore}),this.state.exploitablePatterns.sort((e,t)=>t.avgExploitability*t.frequency-e.avgExploitability*e.frequency)}getTopExploitablePatterns(e=5){return this.state.exploitablePatterns.slice(0,e)}getAnomaliesForMemory(e=7){return this.state.recentAnomalies.filter(t=>t.importance>=e)}getState(){return{...this.state}}getEvolutionarySummary(){return{totalAnomalies:this.state.totalHarvested,topPatterns:this.state.exploitablePatterns.slice(0,3).map(e=>e.pattern),recentInsights:this.state.evolutionaryInsights.slice(-5),anomalyDistribution:{...this.state.byType}}}};const _0=new class{constructor(){fe(this,"activeMirages",new Map),fe(this,"historicalMirages",[]),fe(this,"materializationPatterns",new Map)}detectMirage(e,t,n){if(e.confidence>.6)return null;const r=this.classifySignalType(e,t,n),a=this.identifyUncertaintyFactors(e,t),i=this.identifyMaterializationFactors(e,n),s=this.calculateReflexivity(e,t,n),o={id:`mirage_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,detectedAt:new Date,signalType:r,confidence:e.confidence,perceivedPattern:{direction:e.direction,magnitude:e.magnitude,timeHorizon:this.estimateTimeHorizon(t.volatility)},uncertaintyFactors:a,materializationFactors:i,reflexivityPotential:s,status:"detected"};return this.activeMirages.set(o.id,o),o}classifySignalType(e,t,n){const r=n.reduce((e,t)=>e+t.alignment,0)/Math.max(n.length,1);return e.confidence>.4&&r>.5?"pattern_glimpse":n.filter(e=>e.alignment>.4).length>=3?"consensus_precursor":t.volatility<.3?"structural_weak":Math.abs(t.momentum)>.5?"reflexive_potential":"pattern_glimpse"}identifyUncertaintyFactors(e,t){const n=[];return e.confidence<.4&&n.push("Very low base confidence"),t.volatility>.7&&n.push("High volatility obscures signal"),t.volume<.3&&n.push("Low volume - thin information"),Math.abs(t.momentum)<.1&&n.push("No clear momentum direction"),e.confidence>.35&&e.confidence<.45&&n.push("Pattern at calibration threshold - possible overfitting"),n}identifyMaterializationFactors(e,t){const n=[],r=t.filter(e=>e.alignment>.4);r.length>=2&&n.push(`Cross-domain resonance (${r.map(e=>e.domain).join(", ")})`);const a=t.find(e=>"chess"===e.domain);a&&a.alignment>.5&&n.push("Chess trajectory alignment detected");return t.filter(e=>["music","consciousness","collective"].includes(e.domain)).some(e=>e.alignment>.4)&&n.push("Collective entrainment signal present"),n.push("Weak archetype signature detected"),n}calculateReflexivity(e,t,n){let r=0;("up"===e.direction&&t.momentum>0||"down"===e.direction&&t.momentum<0)&&(r+=.3*Math.abs(t.momentum)),r+=.2*t.volume;return r+=.3*(n.reduce((e,t)=>e+t.alignment,0)/Math.max(n.length,1)),r-=.2*t.volatility,r+=.2*e.confidence,Math.max(0,Math.min(1,r))}estimateTimeHorizon(e){return 6e4*(1-e+1)}actOnMirage(e){const t=this.activeMirages.get(e);t&&(t.status="acted_upon")}resolveMirage(e,t){const n=this.activeMirages.get(e);if(!n)return;const r=n.perceivedPattern.direction===t.direction,a="acted_upon"===n.status&&r?.5*n.reflexivityPotential:0;n.status=r?"materialized":"evaporated",n.outcome={resolvedAt:new Date,actualDirection:t.direction,didMaterialize:r,reflexivityContribution:a};const i=n.signalType,s=this.materializationPatterns.get(i)||{success:0,total:0};s.total++,r&&s.success++,this.materializationPatterns.set(i,s),this.historicalMirages.push(n),this.activeMirages.delete(e)}classifyAsHumanEquivalent(e){return e.uncertaintyFactors.includes("Pattern at calibration threshold - possible overfitting")?{type:"optical_equivalent",description:"Real pattern structure, miscalibrated interpretation",actionability:.4}:e.uncertaintyFactors.length>2*e.materializationFactors.length?{type:"desperation_mirage",description:"Weak signal amplified by pattern-seeking, likely noise",actionability:.1}:e.reflexivityPotential>.6&&e.materializationFactors.length>=3?{type:"genuine_foresight",description:"Early detection of materializing pattern with reflexive potential",actionability:.8}:{type:"miscalibration",description:"Insufficient data for pattern confidence",actionability:.3}}getActionableMirages(){return Array.from(this.activeMirages.values()).filter(e=>"detected"===e.status).filter(e=>this.classifyAsHumanEquivalent(e).actionability>.5).sort((e,t)=>t.reflexivityPotential-e.reflexivityPotential)}getMaterializationMetrics(){const e=this.historicalMirages.filter(e=>e.outcome),t=e.filter(e=>{var t;return null==(t=e.outcome)?void 0:t.didMaterialize}),n=t.reduce((e,t)=>{var n;return e+((null==(n=t.outcome)?void 0:n.reflexivityContribution)||0)},0)/Math.max(t.length,1),r=Array.from(this.materializationPatterns.entries()).map(([e,t])=>({type:e,rate:t.success/Math.max(t.total,1)})).sort((e,t)=>t.rate-e.rate).slice(0,3).map(e=>`${e.type} (${(100*e.rate).toFixed(0)}%)`);return{totalMirages:this.historicalMirages.length,materialized:t.length,evaporated:e.length-t.length,materializationRate:t.length/Math.max(e.length,1),avgReflexivityContribution:n,topMaterializingPatterns:r}}cleanupExpired(){const e=Date.now();for(const[t,n]of this.activeMirages){e-n.detectedAt.getTime()>3*n.perceivedPattern.timeHorizon&&this.resolveMirage(t,{direction:"neutral",magnitude:0})}}};const S0=new class{constructor(){fe(this,"state"),fe(this,"fitnessHistory",[]),fe(this,"maxHistorySize",1e3),fe(this,"previousFitness",.5),this.state=this.createInitialState()}createInitialState(){return{metrics:{generationNumber:1,startedAt:Date.now(),totalPredictions:0,successfulEvolutions:0,currentFitness:.5,peakFitness:.5,learningVelocity:0,adaptationRate:.1},genes:[...v0.map(e=>({...e}))],correlationMemory:[],patternLibrary:[],adaptiveThresholds:{...N0},recentMutations:[]}}processOutcome(e){this.state.metrics.totalPredictions++;const t=e.predicted===e.actual,n=this.calculateFitness(t,e.confidence);return j0.harvestFromOutcome(e,t,n,this.previousFitness),this.previousFitness=this.state.metrics.currentFitness,this.updateFitnessHistory(n),this.updateCurrentFitness(n),this.calculateLearningVelocity(),function(e,t,n){const r=t?.1:-.1;e.forEach(e=>{let t=0;switch(e.name){case"correlationWeight":t=r*n.correlationStrength;break;case"momentumWeight":t=r*Math.abs(n.momentum);break;case"volatilityWeight":t=r*(1-n.volatility);break;case"leadingIndicatorLag":t=r*n.leadingSignals;break;default:t=.5*r}e.performanceImpact=.95*e.performanceImpact+.05*t})}(this.state.genes,t,e.marketConditions),this.state.patternLibrary=k0(this.state.patternLibrary,e,t,x0(this.state.genes,"patternDecayRate")),this.maybeEvolve(),this.state.adaptiveThresholds=function(e,t){const{currentFitness:n,learningVelocity:r}=t,a={...e};return n>.65&&r>=0&&(a.confidenceMinimum=Math.max(.5,e.confidenceMinimum-.01)),n<.45&&(a.confidenceMinimum=Math.min(.75,e.confidenceMinimum+.02)),r>.1?a.predictionHorizonMs=Math.max(2e3,.95*e.predictionHorizonMs):r<-.1&&(a.predictionHorizonMs=Math.min(15e3,1.05*e.predictionHorizonMs)),a}(this.state.adaptiveThresholds,this.state.metrics),this.getState()}calculateFitness(e,t){return e?.5+.5*t:.5-.3*t}updateFitnessHistory(e){this.fitnessHistory.push(e),this.fitnessHistory.length>this.maxHistorySize&&this.fitnessHistory.shift()}updateCurrentFitness(e){const t=this.state.metrics.adaptationRate;this.state.metrics.currentFitness=t*e+(1-t)*this.state.metrics.currentFitness,this.state.metrics.currentFitness>this.state.metrics.peakFitness&&(this.state.metrics.peakFitness=this.state.metrics.currentFitness)}calculateLearningVelocity(){if(this.fitnessHistory.length<20)return void(this.state.metrics.learningVelocity=0);const e=this.fitnessHistory.slice(-10).reduce((e,t)=>e+t,0)/10,t=this.fitnessHistory.slice(-20,-10).reduce((e,t)=>e+t,0)/10;this.state.metrics.learningVelocity=10*(e-t)}maybeEvolve(){if(!(this.state.metrics.totalPredictions%50==0||this.state.metrics.learningVelocity<-.05&&this.state.metrics.totalPredictions>20))return;const e=this.state.metrics.currentFitness,t=function(e,t){const n=[];return e.forEach(e=>{if(Math.random()<e.mutationRate){const r=e.value;let a=.1*(Math.random()-.5)*(e.maxValue-e.minValue);e.performanceImpact<-.05&&(a*=-2),e.value=Math.max(e.minValue,Math.min(e.maxValue,e.value+a)),e.lastMutation=Date.now(),n.push({gene:e.name,previousValue:r,newValue:e.value,timestamp:Date.now(),reason:e.performanceImpact<0?"Poor performance":"Random exploration",resultingFitness:t})}}),n}(this.state.genes,this.state.metrics.currentFitness);this.state.recentMutations.push(...t),this.state.recentMutations=this.state.recentMutations.slice(-20),t.forEach(t=>{const n=this.state.metrics.currentFitness;j0.harvestFromMutation(t.gene,t.newValue-t.previousValue,e,n)}),this.state.metrics.generationNumber++,this.state.metrics.successfulEvolutions++}getGeneValue(e){return x0(this.state.genes,e)}getBestPatterns(e=5){return function(e,t=5){return[...e].filter(e=>e.occurrences>=5).sort((e,t)=>t.successRate*t.confidence-e.successRate*e.confidence).slice(0,t)}(this.state.patternLibrary,e)}updateCorrelationMemory(e,t,n){const r=this.state.correlationMemory.find(n=>n.market1===e&&n.market2===t||n.market1===t&&n.market2===e);r?(r.observedCorrelations.push(n),r.observedCorrelations.length>100&&r.observedCorrelations.shift(),r.actualCorrelation=n,r.accuracy=1-Math.abs(r.predictedCorrelation-n),r.lastUpdated=Date.now()):this.state.correlationMemory.push({market1:e,market2:t,observedCorrelations:[n],predictedCorrelation:n,actualCorrelation:n,accuracy:1,lastUpdated:Date.now()})}getState(){return{...this.state}}getEvolutionSummary(){const e=this.getBestPatterns(1)[0],t=j0.getEvolutionarySummary();return{generation:this.state.metrics.generationNumber,fitness:this.state.metrics.currentFitness,velocity:this.state.metrics.learningVelocity,topGenes:this.state.genes.sort((e,t)=>Math.abs(t.performanceImpact)-Math.abs(e.performanceImpact)).slice(0,3).map(e=>({name:e.name,value:e.value,impact:e.performanceImpact})),patternCount:this.state.patternLibrary.length,bestPatternAccuracy:(null==e?void 0:e.successRate)??0,anomalyHarvest:{totalAnomalies:t.totalAnomalies,topPatterns:t.topPatterns,recentInsights:t.recentInsights}}}recordCrossDomainResonance(e,t,n,r){return j0.harvestCrossDomainResonance(e,t,n,r)}getAnomaliesForMemory(e=7){return j0.getAnomaliesForMemory(e)}getExploitablePatterns(e=5){return j0.getTopExploitablePatterns(e)}detectMirage(e,t,n){return _0.detectMirage(e,t,n)}actOnMirage(e){_0.actOnMirage(e)}resolveMirage(e,t){_0.resolveMirage(e,t);const n=_0.getMaterializationMetrics();n.materializationRate>.5&&j0.harvestCrossDomainResonance("mirage","reality",n.avgReflexivityContribution,`Mirage materialized with ${(100*n.materializationRate).toFixed(0)}% rate`)}getActionableMirages(){return _0.getActionableMirages()}getMirageMetrics(){return _0.getMaterializationMetrics()}cleanupMirages(){_0.cleanupExpired()}},C0=()=>({totalPredictions:0,correctPredictions:0,accuracy:0,directionAccuracy:0,magnitudeAccuracy:0,timingAccuracy:0,confidenceCalibration:0,streak:0,bestStreak:0,worstStreak:0,currentStreak:0,lastUpdated:Date.now()}),P0=SD()(ED((e,t)=>({currentSession:null,sessionHistory:[],activeTrades:[],tradeHistory:[],globalAccuracy:C0(),evolutionState:S0.getState(),liveMetrics:{ticksProcessed:0,predictionsMade:0,lastPredictionTime:0,currentSymbol:"SPY",isStreaming:!1},startSession:(n=1e3)=>{const r=t().currentSession;if(r&&"completed"!==r.status)return void e(e=>({currentSession:{...r,status:"active"},liveMetrics:{...e.liveMetrics,isStreaming:!0}}));const a={id:`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,startedAt:Date.now(),startingBalance:n,currentBalance:n,peakBalance:n,troughBalance:n,totalTrades:0,winningTrades:0,losingTrades:0,totalPnl:0,bestTrade:0,worstTrade:0,predictions:0,correctPredictions:0,status:"active"};e({currentSession:a,activeTrades:[],liveMetrics:{...t().liveMetrics,isStreaming:!0}})},pauseSession:()=>{e(e=>({currentSession:e.currentSession?{...e.currentSession,status:"paused"}:null,liveMetrics:{...e.liveMetrics,isStreaming:!1}}))},resumeSession:()=>{e(e=>({currentSession:e.currentSession?{...e.currentSession,status:"active"}:null,liveMetrics:{...e.liveMetrics,isStreaming:!0}}))},endSession:()=>{const{currentSession:n,activeTrades:r}=t();if(!n)return;const a=r.map(e=>({...e,status:"closed",exitTime:Date.now()})),i={...n,endedAt:Date.now(),status:"completed"};e(e=>({currentSession:null,sessionHistory:[i,...e.sessionHistory].slice(0,100),activeTrades:[],tradeHistory:[...a,...e.tradeHistory].slice(0,1e3),liveMetrics:{...e.liveMetrics,isStreaming:!1}}))},openTrade:n=>{var r;const{currentSession:a}=t();a||t().startSession();const i={...n,id:`trade_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionId:(null==(r=t().currentSession)?void 0:r.id)||"unknown",status:"open",correlatedMoves:[]};return e(e=>({activeTrades:[...e.activeTrades,i],currentSession:e.currentSession?{...e.currentSession,totalTrades:e.currentSession.totalTrades+1}:null})),i},closeTrade:(n,r)=>{const{activeTrades:a,currentSession:i}=t(),s=a.find(e=>e.id===n);if(!s||!i)return null;const o="long"===s.direction?(r-s.entryPrice)*s.shares:(s.entryPrice-r)*s.shares,l=o/(s.entryPrice*s.shares)*100,c={...s,exitPrice:r,exitTime:Date.now(),pnl:o,pnlPercent:l,status:"closed"},u=o>0,d=i.currentBalance+o;return e(e=>({activeTrades:e.activeTrades.filter(e=>e.id!==n),tradeHistory:[c,...e.tradeHistory].slice(0,1e3),currentSession:e.currentSession?{...e.currentSession,currentBalance:d,peakBalance:Math.max(e.currentSession.peakBalance,d),troughBalance:Math.min(e.currentSession.troughBalance,d),totalPnl:e.currentSession.totalPnl+o,winningTrades:e.currentSession.winningTrades+(u?1:0),losingTrades:e.currentSession.losingTrades+(u?0:1),bestTrade:Math.max(e.currentSession.bestTrade,o),worstTrade:Math.min(e.currentSession.worstTrade,o)}:null})),c},updateTradePrice:(t,n,r)=>{e(e=>({activeTrades:e.activeTrades.map(e=>{if(e.id!==t)return e;const a="long"===e.direction?(n-e.entryPrice)*e.shares:(e.entryPrice-n)*e.shares,i=Array.from(r.entries()).map(([t,n])=>({symbol:t,pnl:(n-e.entryPrice)/e.entryPrice*(e.entryPrice*e.shares)}));return{...e,pnl:a,pnlPercent:a/(e.entryPrice*e.shares)*100,correlatedMoves:i}}),currentSession:e.currentSession?{...e.currentSession,currentBalance:e.currentSession.startingBalance+e.activeTrades.reduce((e,t)=>e+(t.pnl||0),0)+e.currentSession.totalPnl}:null}))},recordPrediction:t=>{S0.processOutcome({predicted:t.predicted,actual:t.actual,confidence:t.confidence,marketConditions:t.marketConditions}),e(e=>{const n=t.directionCorrect,r=n?e.globalAccuracy.currentStreak>=0?e.globalAccuracy.currentStreak+1:1:e.globalAccuracy.currentStreak<=0?e.globalAccuracy.currentStreak-1:-1,a=e.globalAccuracy.totalPredictions+1,i=e.globalAccuracy.correctPredictions+(n?1:0),s=.1;return{globalAccuracy:{totalPredictions:a,correctPredictions:i,accuracy:i/a*100,directionAccuracy:100*(.9*e.globalAccuracy.directionAccuracy+(n?1:0)*s),magnitudeAccuracy:100*(.9*e.globalAccuracy.magnitudeAccuracy+t.magnitudeAccuracy*s),timingAccuracy:100*(.9*e.globalAccuracy.timingAccuracy+t.timingAccuracy*s),confidenceCalibration:100*(.9*e.globalAccuracy.confidenceCalibration+(1-Math.abs(t.confidence-(n?1:0)))*s),streak:e.globalAccuracy.streak+(n?1:-1),bestStreak:Math.max(e.globalAccuracy.bestStreak,r),worstStreak:Math.min(e.globalAccuracy.worstStreak,r),currentStreak:r,lastUpdated:Date.now()},evolutionState:S0.getState(),currentSession:e.currentSession?{...e.currentSession,predictions:e.currentSession.predictions+1,correctPredictions:e.currentSession.correctPredictions+(n?1:0)}:null,liveMetrics:{...e.liveMetrics,predictionsMade:e.liveMetrics.predictionsMade+1,lastPredictionTime:Date.now()}}})},updateLiveMetrics:t=>{e(e=>({liveMetrics:{...e.liveMetrics,...t}}))},syncEvolutionState:()=>{e({evolutionState:S0.getState()})},getSessionStats:()=>{const{currentSession:e}=t();if(!e)return{totalGrowth:0,growthPercent:0,winRate:0,avgTradePnl:0,sessionDuration:0};const n=e.currentBalance-e.startingBalance,r=e.winningTrades+e.losingTrades;return{totalGrowth:n,growthPercent:n/e.startingBalance*100,winRate:r>0?e.winningTrades/r*100:0,avgTradePnl:r>0?e.totalPnl/r:0,sessionDuration:Date.now()-e.startedAt}},getAllTimeStats:()=>{const{sessionHistory:e,currentSession:n}=t(),r=n?[n,...e]:e;if(0===r.length)return{totalSessions:0,totalTrades:0,totalPnl:0,overallWinRate:0,bestSession:0,avgSessionGrowth:0};const a=r.reduce((e,t)=>e+t.totalTrades,0),i=r.reduce((e,t)=>e+t.winningTrades,0),s=r.reduce((e,t)=>e+t.totalPnl,0),o=r.map(e=>e.currentBalance-e.startingBalance);return{totalSessions:r.length,totalTrades:a,totalPnl:s,overallWinRate:a>0?i/a*100:0,bestSession:Math.max(...o),avgSessionGrowth:o.reduce((e,t)=>e+t,0)/o.length}},resetSession:()=>{e({currentSession:null,activeTrades:[],liveMetrics:{ticksProcessed:0,predictionsMade:0,lastPredictionTime:0,currentSymbol:"SPY",isStreaming:!1}})},resetAllData:()=>{e({currentSession:null,sessionHistory:[],activeTrades:[],tradeHistory:[],globalAccuracy:C0(),evolutionState:S0.getState(),liveMetrics:{ticksProcessed:0,predictionsMade:0,lastPredictionTime:0,currentSymbol:"SPY",isStreaming:!1}})}}),{name:"trading-session-storage",partialize:e=>({sessionHistory:e.sessionHistory,tradeHistory:e.tradeHistory,globalAccuracy:e.globalAccuracy})})),E0={baseline:3650,cloud:3580,localDepth20:3200,localDepth30:3450,localDepth40:3550,localDepth50:3620,unlimited:3700},R0=[[1,800],[.99,677],[.98,589],[.97,538],[.96,501],[.95,470],[.94,444],[.93,422],[.92,401],[.91,383],[.9,366],[.89,351],[.88,336],[.87,322],[.86,309],[.85,296],[.84,284],[.83,273],[.82,262],[.81,251],[.8,240],[.79,230],[.78,220],[.77,211],[.76,202],[.75,193],[.74,184],[.73,175],[.72,166],[.71,158],[.7,149],[.69,141],[.68,133],[.67,125],[.66,117],[.65,110],[.64,102],[.63,95],[.62,87],[.61,80],[.6,72],[.59,65],[.58,57],[.57,50],[.56,43],[.55,36],[.54,29],[.53,21],[.52,14],[.51,7],[.5,0]];function O0(e){if(e<=0)return-800;if(e>=1)return 800;for(let t=0;t<R0.length;t++)if(e>=R0[t][0])return R0[t][1];return-O0(1-e)}function T0(e){if(e>=60)return E0.unlimited;if(e>=50)return E0.localDepth50;if(e>=40)return E0.localDepth40;if(e>=30)return E0.localDepth30;if(e>=20)return E0.localDepth20;const t=Math.min(1,e/60);return Math.round(2800+900*t)}function M0(e,t,n,r){const a=e+t+n;if(0===a)return r;const i=O0((e+.5*n)/a);return Math.round(r+i)}function A0(){return{enPensentElo:3400,stockfishElo:E0.baseline,gamesAnalyzed:0,wins:0,losses:0,draws:0,performanceRating:3400,confidenceInterval:[3200,3600],title:"Elite Engine",titleColor:"from-green-500 to-emerald-500",vsStockfish:"even",eloDifference:0}}function B0(e,t,n,r,a,i,s){const o=T0(s),l=a+(i-n-r-a),c=n,u=r,d=M0(c,u,l,o),h=(p=d)>=3800?{title:"Transcendent",color:"from-purple-400 via-pink-500 to-red-500"}:p>=3700?{title:"Beyond Stockfish 17",color:"from-yellow-400 via-amber-500 to-orange-500"}:p>=3600?{title:"Stockfish 17 Equivalent",color:"from-blue-400 to-cyan-500"}:p>=3500?{title:"Super-GM Level",color:"from-purple-500 to-violet-600"}:p>=3400?{title:"Elite Engine",color:"from-green-500 to-emerald-500"}:p>=3200?{title:"Strong Engine",color:"from-teal-500 to-cyan-500"}:p>=3e3?{title:"Master Level",color:"from-blue-500 to-indigo-500"}:p>=2800?{title:"Grandmaster",color:"from-orange-500 to-red-500"}:p>=2600?{title:"International Master",color:"from-yellow-500 to-orange-500"}:{title:"Strong Player",color:"from-gray-400 to-gray-500"};var p;const m=function(e,t){const n=Math.round(200/Math.sqrt(Math.max(1,t/10)));return[Math.max(2400,e-n),e+n]}(d,i),f=d-o;let g;return g=f>50?"winning":f<-50?"losing":"even",{enPensentElo:d,stockfishElo:o,gamesAnalyzed:i,wins:c,losses:u,draws:l,performanceRating:d,confidenceInterval:m,title:h.title,titleColor:h.color,vsStockfish:g,eloDifference:f}}function D0(e){return Math.round(e).toString()}function I0(e){const t=Math.abs(e.eloDifference);return"winning"===e.vsStockfish?t>200?`Dominating Stockfish 17 by +${t} ELO`:t>100?`Outperforming Stockfish 17 by +${t} ELO`:`Slightly ahead of Stockfish 17 (+${t} ELO)`:"losing"===e.vsStockfish?t>200?`Behind Stockfish 17 by -${t} ELO`:t>100?`Trailing Stockfish 17 by -${t} ELO`:`Slightly behind Stockfish 17 (-${t} ELO)`:"Competitive with Stockfish 17"}const L0=new Set;function F0(e){return L0.add(e),()=>L0.delete(e)}function $0(e){L0.forEach(t=>t(e))}let z0=null,q0=0;let V0=0;async function W0(){if(z0&&Date.now()-q0<5e3)return z0;const[{count:e},{count:t},{count:n},{count:r},{count:a},{count:i},{count:s},{count:o},{count:l},{count:c}]=await Promise.all([KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!0),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("stockfish_correct",!0),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!0).eq("stockfish_correct",!0),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!1).eq("stockfish_correct",!1),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!0).eq("stockfish_correct",!1),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!1).eq("stockfish_correct",!0),KC.from("chess_benchmark_results").select("*",{count:"exact",head:!0}),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).gte("stockfish_depth",15).lte("stockfish_depth",22),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).gte("stockfish_depth",25)]),u=e||0,d=i||0,h=s||0,p={totalGames:u,hybridWins:d,stockfishWins:h,bothCorrect:r||0,bothWrong:a||0,hybridAccuracy:u>0?(t||0)/u*100:0,stockfishAccuracy:u>0?(n||0)/u*100:0,avgConfidence:.7,totalRuns:o||0,hybridNetWins:d-h,volumePoolCount:l||0,deepPoolCount:c||0};return z0=p,q0=Date.now(),u!==V0&&(V0=u),p}function Q0(){z0=null,q0=0}let U0=!1;async function K0(e,t={}){var n,r,a,i,s,o,l,c;const u=t.depth||18,d=void 0!==t.precomputedEval||t.skipCloudEval;if(!U0&&!d){null==(n=t.onProgress)||n.call(t,"Loading historical patterns from database",2);try{const{loaded:e,hybridWins:t,totalAccuracy:n}=await async function(){if(GJ&&YJ>0)return{loaded:YJ,hybridWins:0,stockfishWins:0,totalAccuracy:0};const e=[];let t=0,n=!0,r=0;for(;n&&r<5;){r++;try{const a=async()=>await KC.from("chess_prediction_attempts").select("id, fen, hybrid_archetype, hybrid_confidence, hybrid_correct, actual_result, lesson_learned, stockfish_correct").range(t,t+500-1),i=await HJ(a(),8e3,`PatternPage${r}`);if(i.error)break;if(!i.data||0===i.data.length){n=!1;break}e.push(...i.data),t+=500,n=500===i.data.length}catch(BPe){break}}let a=0,i=0,s=0;for(const l of e)if(l.hybrid_correct&&!l.stockfish_correct&&a++,l.stockfish_correct&&!l.hybrid_correct&&i++,l.hybrid_correct&&s++,l.hybrid_correct&&l.hybrid_archetype){const e=ZJ(l.actual_result),t=XJ(l.hybrid_archetype);if(e&&t){const n={id:l.id,fingerprint:l.fen.substring(0,20),archetype:t,outcome:e,totalMoves:30,characteristics:{flowDirection:"balanced",intensity:l.hybrid_confidence||.5,volatility:.3,dominantSide:"white_wins"===e?"white":"black_wins"===e?"black":"contested",centerControl:.5,kingsideActivity:.5,queensideActivity:.5},gameMetadata:{event:"Learned Pattern",white:"GM",black:"GM"}};KJ.injectLearnedPattern(n)}}const o=e.length>0?s/e.length*100:0;return GJ=!0,YJ=e.length,{loaded:e.length,hybridWins:a,stockfishWins:i,totalAccuracy:o}}();U0=!0}catch(APe){}}null==(r=t.onProgress)||r.call(t,"Simulating game visualization",5);const h=j$(e),{board:p,gameData:m,totalMoves:f}=h;null==(a=t.onProgress)||a.call(t,"Extracting color flow signatures (baseline + enhanced)",15),_J(p,0,f);const g=AJ(h);null==(i=t.onProgress)||i.call(t,"Analyzing current position",30);const y=new lF;try{y.loadPgn(e)}catch{}const v=y.fen();let x;if(void 0!==t.precomputedEval)x={fen:v,bestMove:"e2e4",evaluation:{score:t.precomputedEval,scoreType:"cp",depth:t.precomputedDepth||u,nodes:0,nps:0,time:0,pv:[]},winProbability:50+t.precomputedEval/20,isCheckmate:!1,isStalemate:!1,isDraw:!1};else if(t.skipCloudEval)x={fen:v,bestMove:"e2e4",evaluation:{score:0,scoreType:"cp",depth:10,nodes:0,nps:0,time:0,pv:[]},winProbability:50,isCheckmate:!1,isStalemate:!1,isDraw:!1};else{x=function(e,t){var n;const r=(null==e?void 0:e.evaluation)??0,a=(null==e?void 0:e.isMate)??!1,i=null==e?void 0:e.mateIn;return{fen:t,bestMove:(null==e?void 0:e.bestMove)??"e2e4",ponder:(null==(n=null==e?void 0:e.pv)?void 0:n[1])??void 0,evaluation:{score:r,scoreType:a?"mate":"cp",mateIn:i??void 0,depth:(null==e?void 0:e.depth)??20,nodes:5e4,nps:0,time:0,pv:(null==e?void 0:e.pv)??[]},winProbability:(null==e?void 0:e.winProbability)??50,isCheckmate:!1,isStalemate:!1,isDraw:!1}}(await VJ(v),v)}null==(s=t.onProgress)||s.call(t,"Fusing tactical and strategic analysis",60);const b=CJ(g,f),w=function(e,t){const n=[],r=[];"mate"===e.evaluation.scoreType?(n.push("Forced checkmate"),r.push(`Mate in ${e.evaluation.mateIn}`)):Math.abs(e.evaluation.score)>300&&(n.push("Winning advantage"),r.push("Material or positional dominance"));const a=e.evaluation.pv.slice(0,5).map(e=>{try{const n=e.slice(0,2),r=e.slice(2,4),a=new lF(t.fen()).move({from:n,to:r,promotion:e[4]});return(null==a?void 0:a.san)||e}catch{return e}});a.some(e=>e.includes("x"))&&n.push("Tactical sequence with captures"),a.some(e=>e.includes("+"))&&n.push("Forcing moves with check");let i=e.bestMove;try{const n=e.bestMove.slice(0,2),r=e.bestMove.slice(2,4),a=new lF(t.fen()).move({from:n,to:r,promotion:e.bestMove[4]});a&&(i=a.san)}catch{}return{bestMove:i,evaluation:e.evaluation.score,mateIn:e.evaluation.mateIn,principalVariation:a,tacticalThemes:n.length>0?n:["Quiet position"],immediateThreats:r.length>0?r:["No immediate threats"]}}(x,y),k=function(e,t){const n=xJ[e.archetype];return{archetype:e.archetype,archetypeName:n.name,flowDirection:e.flowDirection,dominantSide:e.dominantSide,strategicGuidance:t.strategicGuidance,criticalSquares:t.futureCriticalSquares}}(g,b);null==(o=t.onProgress)||o.call(t,"Generating fused recommendation",75);const N=function(e,t,n){const r=[],a=e.bestMove;let i,s;r.push(`Stockfish recommends ${a} (eval: ${(e.evaluation/100).toFixed(2)})`),r.push(`This aligns with the ${t.archetypeName} pattern`),i="kingside"===n.flowDirection&&a.includes("h")||a.includes("g")?"Perfectly aligned - continues kingside pressure":"queenside"===n.flowDirection&&(a.includes("a")||a.includes("b")||a.includes("c"))?"Perfectly aligned - continues queenside expansion":"central"===n.flowDirection&&(a.includes("d")||a.includes("e"))?"Perfectly aligned - reinforces central control":"Tactically optimal, may shift strategic trajectory",s=Math.abs(e.evaluation)>200?"Short-term tactics dominate - position is already decided":n.temporalFlow.volatility>60?"High-intensity position - tactical precision critical":"Balanced position - strategic considerations matter equally";const o=i.includes("Perfectly")?15:0;return{move:a,reasoning:r,trajectoryAlignment:i,tradeoffAnalysis:s,moveConfidence:Math.min(95,60+o+n.intensity/4)}}(w,k,g);null==(l=t.onProgress)||l.call(t,"Calculating trajectory prediction",85);const j=i0(g,x,f,y);if(!d)try{const e=await W0();if(e.totalGames>0){const t=Math.round(e.hybridAccuracy/100*e.totalGames);_=e.totalGames,f0={totalPredictions:_,correctPredictions:t,lastUpdated:Date.now()}}}catch(BPe){}var _;const S=y0(x,g);null==(c=t.onProgress)||c.call(t,"Complete",100);const C=function(e,t,n){const r=e.evaluation.score,a=100*(xJ[t.archetype].historicalWinRate-.5),i=n.alignment/100;return Math.round(.7*r+a*t.intensity/100*.3*i)}(x,g,S);return{combinedScore:C,tacticalAnalysis:w,strategicAnalysis:k,fusedRecommendation:N,trajectoryPrediction:j,confidence:S}}function H0(){const[e,t]=ct.useState(!1),[n,r]=ct.useState(null),[a,i]=ct.useState(null),[s,o]=ct.useState({hybridPrediction:null,patternPrediction:null,colorFlowSignature:null}),l=ct.useCallback(async(e,n)=>{if(e){t(!0),i(null),r({stage:"Initializing hybrid analysis",percent:0});try{r({stage:"Extracting color flow signature",percent:10});const t=j$(e),a=_J(t.board,t.gameData,t.totalMoves);r({stage:"Matching historical patterns",percent:25});const i=function(e){var t;const n=j$(e),r=_J(n.board,n.gameData,n.totalMoves),a=KJ.findSimilar(r,10);if(0===a.length){const e=xJ[r.archetype];return{topMatches:[],aggregatePrediction:{whiteWinProbability:e.historicalWinRate,blackWinProbability:1-e.historicalWinRate-.15,drawProbability:.15},mostLikelyOutcome:"white_favored"===e.predictedOutcome?"white_wins":"black_favored"===e.predictedOutcome?"black_wins":"draw",confidence:40,lookaheadMoves:e.lookaheadConfidence,insights:[`Pattern type: ${e.name}`,"No historical matches found - using archetype baseline","contested"!==r.dominantSide?`${r.dominantSide} has territorial advantage`:"Position is territorially contested"]}}let i=0,s=0,o=0,l=0;for(const f of a){const e=f.similarity/100;l+=e,"white_wins"===f.predictedOutcome?i+=e:"black_wins"===f.predictedOutcome?s+=e:o+=e}const c={whiteWinProbability:i/l,blackWinProbability:s/l,drawProbability:o/l};let u;u=c.whiteWinProbability>=c.blackWinProbability&&c.whiteWinProbability>=c.drawProbability?"white_wins":c.blackWinProbability>=c.drawProbability?"black_wins":"draw";const d=a.reduce((e,t)=>e+t.similarity,0)/a.length,h=Math.round(d*(a.length/10)*.9),p=xJ[r.archetype].lookaheadConfidence+Math.round(d/10)+Math.min(10,2*a.length),m=[];return m.push(`Matched ${a.length} historical patterns`),m.push(`Strongest match: ${a[0].similarity}% similarity`),(null==(t=a[0].pattern.gameMetadata)?void 0:t.white)&&m.push(`Similar to: ${a[0].pattern.gameMetadata.white} vs ${a[0].pattern.gameMetadata.black}`),m.push(`Pattern trajectory reliable for ~${p} moves`),{topMatches:a.slice(0,5),aggregatePrediction:c,mostLikelyOutcome:u,confidence:h,lookaheadMoves:p,insights:m}}(e);r({stage:"Preparing Stockfish tactical analysis",percent:35}),await new Promise(e=>setTimeout(e,1e3)),r({stage:"Running Stockfish tactical analysis (Cloud)",percent:40});const s=await K0(e,{depth:(null==n?void 0:n.depth)||18,onProgress:(e,t)=>{r({stage:e,percent:40+.5*t,details:`Depth: ${(null==n?void 0:n.depth)||18}`})}});r({stage:"Updating pattern database",percent:95}),r({stage:"Analysis complete",percent:100}),o({hybridPrediction:s,patternPrediction:i,colorFlowSignature:a})}catch(BPe){i(BPe instanceof Error?BPe.message:"Analysis failed")}finally{t(!1)}}else i("No PGN provided")},[]);return{isAnalyzing:e,progress:n,error:a,result:s,analyzeGame:l,clearResults:ct.useCallback(()=>{o({hybridPrediction:null,patternPrediction:null,colorFlowSignature:null}),i(null),r(null)},[])}}const G0=({pgn:e,compact:t=!1})=>{const{isAnalyzing:n,progress:r,error:a,result:i,analyzeGame:s,clearResults:o}=H0(),[l,c]=ct.useState("fusion"),u=()=>{o(),s(e,{depth:20})};return t?xt.jsx(Y0,{pgn:e,isAnalyzing:n,result:i,onAnalyze:u}):xt.jsxs("div",{className:"space-y-4",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsxs("div",{className:"relative",children:[xt.jsx(Em,{className:"h-6 w-6 text-primary"}),xt.jsx(gg,{className:"h-3 w-3 text-amber-500 absolute -top-1 -right-1"})]}),xt.jsxs("div",{children:[xt.jsx("h3",{className:"font-display text-sm uppercase tracking-wider",children:"Hybrid Prediction Engine"}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Stockfish + Color Flow Fusion"})]})]}),xt.jsx(vD,{onClick:u,disabled:n||!e,className:"bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:n?xt.jsxs(xt.Fragment,{children:[xt.jsx(Pf,{className:"h-4 w-4 animate-spin mr-2"}),"Analyzing..."]}):xt.jsxs(xt.Fragment,{children:[xt.jsx(Ag,{className:"h-4 w-4 mr-2"}),"Generate Prediction"]})})]}),xt.jsx(yT,{children:n&&r&&xt.jsxs(gD.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-4 rounded-lg bg-gradient-to-br from-primary/10 to-purple-500/10 border border-primary/30",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-2",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(Pf,{className:"h-4 w-4 animate-spin text-primary"}),xt.jsx("span",{className:"text-sm font-medium",children:r.stage})]}),xt.jsxs("span",{className:"text-sm font-mono text-primary",children:[r.percent.toFixed(0),"%"]})]}),xt.jsx(w$,{value:r.percent,className:"h-2"}),r.details&&xt.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:r.details})]})}),a&&xt.jsxs("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 flex items-center gap-3",children:[xt.jsx(jg,{className:"h-5 w-5 text-destructive"}),xt.jsx("span",{className:"text-sm text-destructive",children:a})]}),i.hybridPrediction&&xt.jsxs(GI,{value:l,onValueChange:e=>c(e),children:[xt.jsxs(YI,{className:"grid w-full grid-cols-4 mb-4",children:[xt.jsxs(ZI,{value:"fusion",className:"flex items-center gap-1",children:[xt.jsx(_f,{className:"h-3 w-3"}),xt.jsx("span",{className:"hidden sm:inline",children:"Fusion"})]}),xt.jsxs(ZI,{value:"tactical",className:"flex items-center gap-1",children:[xt.jsx(Hm,{className:"h-3 w-3"}),xt.jsx("span",{className:"hidden sm:inline",children:"Tactical"})]}),xt.jsxs(ZI,{value:"strategic",className:"flex items-center gap-1",children:[xt.jsx($f,{className:"h-3 w-3"}),xt.jsx("span",{className:"hidden sm:inline",children:"Strategic"})]}),xt.jsxs(ZI,{value:"patterns",className:"flex items-center gap-1",children:[xt.jsx(Um,{className:"h-3 w-3"}),xt.jsx("span",{className:"hidden sm:inline",children:"80-Move"})]})]}),xt.jsx(XI,{value:"fusion",children:xt.jsx(Z0,{prediction:i.hybridPrediction,colorSignature:i.colorFlowSignature})}),xt.jsx(XI,{value:"tactical",children:xt.jsx(X0,{prediction:i.hybridPrediction})}),xt.jsx(XI,{value:"strategic",children:xt.jsx(J0,{prediction:i.hybridPrediction,colorSignature:i.colorFlowSignature})}),xt.jsx(XI,{value:"patterns",children:xt.jsx(e1,{patternPrediction:i.patternPrediction})})]}),!n&&!i.hybridPrediction&&!a&&xt.jsxs("div",{className:"p-8 rounded-lg border border-dashed border-border/50 text-center bg-card/30",children:[xt.jsxs("div",{className:"relative inline-block mb-4",children:[xt.jsx(Em,{className:"h-12 w-12 text-muted-foreground/30"}),xt.jsxs("div",{className:"absolute -right-2 -top-2 flex",children:[xt.jsx(Hm,{className:"h-5 w-5 text-blue-500/50"}),xt.jsx($f,{className:"h-5 w-5 text-purple-500/50 -ml-1"})]})]}),xt.jsx("h4",{className:"font-medium mb-2",children:"Hybrid Prediction Engine"}),xt.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto",children:"Combines Stockfish's 30-move tactical depth with Color Flow's 80-move strategic trajectory prediction for unprecedented game insight."})]})]})},Y0=({pgn:e,isAnalyzing:t,result:n,onAnalyze:r})=>xt.jsxs("div",{className:"p-3 rounded-lg border border-border/50 bg-card/50 space-y-2",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(Em,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-medium",children:"Hybrid Engine"}),xt.jsx(MD,{variant:"outline",className:"text-[10px]",children:"Stockfish + Color Flow"})]}),xt.jsx(vD,{size:"sm",variant:"outline",onClick:r,disabled:t||!e,className:"h-7 text-xs",children:t?xt.jsx(Pf,{className:"h-3 w-3 animate-spin"}):"Analyze"})]}),n.hybridPrediction&&xt.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[xt.jsxs("div",{className:"p-2 rounded bg-blue-500/10 border border-blue-500/20",children:[xt.jsx("span",{className:"text-muted-foreground",children:"Tactical:"}),xt.jsx("span",{className:"ml-1 font-mono font-bold text-blue-500",children:n.hybridPrediction.fusedRecommendation.move})]}),xt.jsxs("div",{className:"p-2 rounded bg-purple-500/10 border border-purple-500/20",children:[xt.jsx("span",{className:"text-muted-foreground",children:"Strategic:"}),xt.jsx("span",{className:"ml-1 font-medium text-purple-500 capitalize",children:n.hybridPrediction.strategicAnalysis.archetype.replace("_"," ")})]})]})]}),Z0=({prediction:e,colorSignature:t})=>xt.jsxs("div",{className:"space-y-4",children:[xt.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-primary/10 via-purple-500/10 to-amber-500/10 border border-primary/30",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[xt.jsxs(MD,{className:"bg-gradient-to-r from-primary to-purple-600 text-white",children:[xt.jsx(_f,{className:"h-3 w-3 mr-1"}),"Fused Recommendation"]}),xt.jsxs("div",{className:"text-right",children:[xt.jsxs("div",{className:"text-2xl font-bold text-primary",children:[e.fusedRecommendation.moveConfidence.toFixed(0),"%"]}),xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Confidence"})]})]}),xt.jsx("div",{className:"text-3xl font-display font-bold text-primary mb-3",children:e.fusedRecommendation.move}),xt.jsx("div",{className:"space-y-2 mb-4",children:e.fusedRecommendation.reasoning.map((e,t)=>xt.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[xt.jsx(Lm,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),xt.jsx("span",{children:e})]},t))}),xt.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-border/30",children:[xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Trajectory Alignment"}),xt.jsx("p",{className:"text-sm",children:e.fusedRecommendation.trajectoryAlignment})]}),xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Trade-off"}),xt.jsx("p",{className:"text-sm",children:e.fusedRecommendation.tradeoffAnalysis})]})]})]}),xt.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[xt.jsx(t1,{label:"Overall",value:e.confidence.overall,icon:xt.jsx(Em,{className:"h-3 w-3"})}),xt.jsx(t1,{label:"Tactical",value:e.confidence.tactical,icon:xt.jsx(Hm,{className:"h-3 w-3"}),color:"blue"}),xt.jsx(t1,{label:"Strategic",value:e.confidence.strategic,icon:xt.jsx($f,{className:"h-3 w-3"}),color:"purple"}),xt.jsx(t1,{label:"Alignment",value:e.confidence.alignment,icon:xt.jsx(xm,{className:"h-3 w-3"}),color:"amber"})]}),xt.jsx(n1,{trajectory:e.trajectoryPrediction})]}),X0=({prediction:e})=>xt.jsxs("div",{className:"space-y-4",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(Hm,{className:"h-5 w-5 text-blue-500"}),xt.jsx("h4",{className:"font-medium",children:"Stockfish 17 Analysis"}),xt.jsx(MD,{variant:"outline",className:"text-[10px]",children:"~3200 ELO"})]}),xt.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-2",children:[xt.jsxs(MD,{className:"bg-blue-500/20 text-blue-600",children:[xt.jsx(bg,{className:"h-3 w-3 mr-1"}),"Best Move"]}),xt.jsxs("div",{className:"font-mono text-lg font-bold text-blue-500",children:[e.tacticalAnalysis.evaluation>0?"+":"",(e.tacticalAnalysis.evaluation/100).toFixed(2)]})]}),xt.jsx("div",{className:"text-3xl font-display font-bold text-blue-500 mb-3",children:e.tacticalAnalysis.bestMove}),e.tacticalAnalysis.mateIn&&xt.jsxs(MD,{className:"bg-red-500/20 text-red-600 mb-3",children:["Mate in ",e.tacticalAnalysis.mateIn]}),xt.jsxs("div",{className:"p-3 rounded bg-background/50 mb-3",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Principal Variation:"}),xt.jsxs("div",{className:"flex flex-wrap gap-1 font-mono text-sm",children:[e.tacticalAnalysis.principalVariation.slice(0,8).map((e,t)=>xt.jsx("span",{className:"px-1.5 py-0.5 rounded bg-blue-500/10",children:e},t)),e.tacticalAnalysis.principalVariation.length>8&&xt.jsxs("span",{className:"text-muted-foreground",children:["+",e.tacticalAnalysis.principalVariation.length-8]})]})]})]}),e.tacticalAnalysis.tacticalThemes.length>0&&xt.jsxs("div",{className:"p-3 rounded-lg border border-border/50",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Detected Themes:"}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:e.tacticalAnalysis.tacticalThemes.map((e,t)=>xt.jsx(MD,{variant:"secondary",className:"text-xs capitalize",children:e.replace("_"," ")},t))})]}),e.tacticalAnalysis.immediateThreats.length>0&&xt.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/30",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(jg,{className:"h-4 w-4 text-amber-500"}),xt.jsx("span",{className:"text-sm font-medium text-amber-600",children:"Immediate Threats"})]}),xt.jsx("ul",{className:"space-y-1",children:e.tacticalAnalysis.immediateThreats.map((e,t)=>xt.jsxs("li",{className:"text-sm flex items-start gap-2",children:[xt.jsx(Lm,{className:"h-4 w-4 text-amber-500 shrink-0"}),e]},t))})]})]}),J0=({prediction:e,colorSignature:t})=>{const n=e.strategicAnalysis.archetype,r=xJ[n];return xt.jsxs("div",{className:"space-y-4",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx($f,{className:"h-5 w-5 text-purple-500"}),xt.jsx("h4",{className:"font-medium",children:"Color Flow Analysis"}),xt.jsxs(MD,{variant:"outline",className:"text-[10px]",children:[(null==t?void 0:t.intensity)||0,"% Intensity"]})]}),xt.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/30",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[xt.jsxs(MD,{className:"bg-purple-500/20 text-purple-600",children:[xt.jsx(Um,{className:"h-3 w-3 mr-1"}),"Strategic Archetype"]}),xt.jsxs(MD,{variant:"outline",className:"text-xs",children:[(null==r?void 0:r.lookaheadConfidence)||40,"+ moves ahead"]})]}),xt.jsx("h3",{className:"text-xl font-display font-bold text-purple-500 mb-2 capitalize",children:e.strategicAnalysis.archetypeName}),xt.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:(null==r?void 0:r.description)||"Game pattern detected from color flow analysis."}),xt.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Flow Direction"}),xt.jsx("div",{className:"font-medium capitalize",children:e.strategicAnalysis.flowDirection})]}),xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Dominant Side"}),xt.jsx("div",{className:"font-medium capitalize",children:e.strategicAnalysis.dominantSide})]})]})]}),t&&xt.jsxs("div",{className:"p-3 rounded-lg border border-border/50",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:"Territory Control by Quadrant:"}),xt.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[xt.jsx(a1,{label:"Kingside ",value:t.quadrantProfile.kingsideWhite}),xt.jsx(a1,{label:"Kingside ",value:t.quadrantProfile.kingsideBlack}),xt.jsx(a1,{label:"Queenside ",value:t.quadrantProfile.queensideWhite}),xt.jsx(a1,{label:"Queenside ",value:t.quadrantProfile.queensideBlack})]}),xt.jsx("div",{className:"mt-2 pt-2 border-t border-border/30",children:xt.jsx(a1,{label:"Center Control",value:t.quadrantProfile.center})})]}),xt.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/5 border border-purple-500/20",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Strategic Guidance:"}),xt.jsx("ul",{className:"space-y-2",children:e.strategicAnalysis.strategicGuidance.map((e,t)=>xt.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[xt.jsx(gg,{className:"h-4 w-4 text-purple-500 shrink-0 mt-0.5"}),e]},t))})]}),xt.jsxs("div",{className:"p-3 rounded-lg border border-border/50",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Critical Squares:"}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:e.strategicAnalysis.criticalSquares.map((e,t)=>xt.jsx(MD,{variant:"outline",className:"font-mono text-xs",children:e},t))})]})]})},e1=({patternPrediction:e})=>e?xt.jsxs("div",{className:"space-y-4",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(Wm,{className:"h-5 w-5 text-amber-500"}),xt.jsx("h4",{className:"font-medium",children:"Pattern-Based Trajectory"}),xt.jsxs(MD,{className:"bg-amber-500/20 text-amber-600",children:[e.lookaheadMoves,"+ Moves Ahead"]})]}),xt.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-amber-500/10 to-orange-500/10 border border-amber-500/30",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-4",children:[xt.jsxs(MD,{className:"bg-amber-500/20 text-amber-600",children:[xt.jsx(rf,{className:"h-3 w-3 mr-1"}),"Predicted Outcome"]}),xt.jsxs("span",{className:"text-sm font-mono",children:[e.confidence,"% confidence"]})]}),xt.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[xt.jsx(i1,{label:"White Wins",probability:e.aggregatePrediction.whiteWinProbability,isActive:"white_wins"===e.mostLikelyOutcome,icon:xt.jsx(zm,{className:"h-4 w-4"})}),xt.jsx(i1,{label:"Draw",probability:e.aggregatePrediction.drawProbability,isActive:"draw"===e.mostLikelyOutcome,icon:xt.jsx(If,{className:"h-4 w-4"})}),xt.jsx(i1,{label:"Black Wins",probability:e.aggregatePrediction.blackWinProbability,isActive:"black_wins"===e.mostLikelyOutcome,icon:xt.jsx(qm,{className:"h-4 w-4"})})]}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsx(s1,{label:" White",value:e.aggregatePrediction.whiteWinProbability,color:"text-white bg-slate-200"}),xt.jsx(s1,{label:" Draw",value:e.aggregatePrediction.drawProbability,color:"text-gray-600 bg-gray-400"}),xt.jsx(s1,{label:" Black",value:e.aggregatePrediction.blackWinProbability,color:"text-black bg-slate-800"})]})]}),e.insights.length>0&&xt.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/5 border border-amber-500/20",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Pattern Insights:"}),xt.jsx("ul",{className:"space-y-2",children:e.insights.map((e,t)=>xt.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[xt.jsx(Ng,{className:"h-4 w-4 text-amber-500 shrink-0 mt-0.5"}),e]},t))})]}),e.topMatches.length>0&&xt.jsxs("div",{className:"p-3 rounded-lg border border-border/50",children:[xt.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Similar Historical Patterns (",e.topMatches.length,"):"]}),xt.jsx(GH,{className:"h-40",children:xt.jsx("div",{className:"space-y-2 pr-4",children:e.topMatches.slice(0,5).map((e,t)=>xt.jsx(o1,{match:e,rank:t+1},t))})})]})]}):xt.jsxs("div",{className:"p-6 rounded-lg border border-dashed border-border/50 text-center",children:[xt.jsx(Um,{className:"h-8 w-8 mx-auto text-muted-foreground/30 mb-2"}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:"Pattern prediction not available"})]}),t1=({label:e,value:t,icon:n,color:r="primary"})=>xt.jsxs("div",{className:`p-2 rounded-lg border ${{primary:"text-primary border-primary/30 bg-primary/5",blue:"text-blue-500 border-blue-500/30 bg-blue-500/5",purple:"text-purple-500 border-purple-500/30 bg-purple-500/5",amber:"text-amber-500 border-amber-500/30 bg-amber-500/5"}[r]} text-center`,children:[xt.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n,xt.jsx("span",{className:"text-[10px] uppercase tracking-wide",children:e})]}),xt.jsxs("div",{className:"text-lg font-bold",children:[t.toFixed(0),"%"]})]}),n1=({trajectory:e})=>xt.jsxs("div",{className:"p-4 rounded-lg border border-border/50 bg-card/50",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(Ng,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-medium",children:"Game Trajectory"})]}),xt.jsxs(MD,{variant:"outline",className:"text-xs",children:[e.horizonMoves," moves ahead"]})]}),xt.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[xt.jsxs("div",{className:"p-2 rounded bg-green-500/10 text-center",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:" White"}),xt.jsxs("div",{className:"font-bold text-green-600",children:[(100*e.outcomeProbabilities.whiteWin).toFixed(0),"%"]})]}),xt.jsxs("div",{className:"p-2 rounded bg-gray-500/10 text-center",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Draw"}),xt.jsxs("div",{className:"font-bold text-gray-600",children:[(100*e.outcomeProbabilities.draw).toFixed(0),"%"]})]}),xt.jsxs("div",{className:"p-2 rounded bg-slate-500/10 text-center",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:" Black"}),xt.jsxs("div",{className:"font-bold text-slate-600",children:[(100*e.outcomeProbabilities.blackWin).toFixed(0),"%"]})]})]}),e.expectedMilestones.length>0&&xt.jsxs("div",{className:"space-y-2",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Expected Milestones:"}),e.expectedMilestones.slice(0,3).map((e,t)=>xt.jsx(r1,{milestone:e},t))]}),e.trajectoryBreakers.length>0&&xt.jsxs("div",{className:"mt-3 pt-3 border-t border-border/30",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"What could change this:"}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:e.trajectoryBreakers.map((e,t)=>xt.jsx(MD,{variant:"secondary",className:"text-xs",children:e},t))})]})]}),r1=({milestone:e})=>xt.jsxs("div",{className:"flex items-start gap-2 p-2 rounded bg-background/50 text-sm",children:[xt.jsxs(MD,{variant:"outline",className:"text-[10px] shrink-0",children:["~Move ",e.approximateMoveNumber]}),xt.jsxs("div",{children:[xt.jsx("p",{children:e.description}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.expectedColorFlow})]})]}),a1=({label:e,value:t})=>xt.jsxs("div",{children:[xt.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[xt.jsx("span",{children:e}),xt.jsx("span",{className:"font-mono",children:t.toFixed(0)})]}),xt.jsx("div",{className:"h-1.5 rounded-full bg-border overflow-hidden",children:xt.jsx("div",{className:"h-full rounded-full transition-all "+(t>0?"bg-purple-500":"bg-pink-500"),style:{width:`${Math.abs(t)}%`}})})]}),i1=({label:e,probability:t,isActive:n,icon:r})=>xt.jsxs("div",{className:"text-center p-2 rounded-lg transition-all "+(n?"bg-amber-500/20 border border-amber-500/50 scale-105":"bg-background/50 opacity-60"),children:[xt.jsx("div",{className:"mb-1 "+(n?"text-amber-500":"text-muted-foreground"),children:r}),xt.jsx("div",{className:"text-xs text-muted-foreground",children:e}),xt.jsxs("div",{className:"font-bold "+(n?"text-amber-500":""),children:[t.toFixed(0),"%"]})]}),s1=({label:e,value:t,color:n})=>xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("span",{className:"text-xs w-16 shrink-0",children:e}),xt.jsx("div",{className:"flex-1 h-3 rounded-full bg-border overflow-hidden",children:xt.jsx("div",{className:`h-full rounded-full ${n}`,style:{width:`${t}%`}})}),xt.jsxs("span",{className:"text-xs font-mono w-10 text-right",children:[t.toFixed(0),"%"]})]}),o1=({match:e,rank:t})=>xt.jsxs("div",{className:"p-2 rounded border border-border/30 bg-card/30",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-1",children:[xt.jsxs(MD,{variant:"outline",className:"text-[10px]",children:["#",t,"  ",e.similarity.toFixed(0),"% similar"]}),xt.jsx(MD,{className:"text-[10px] "+("white_wins"===e.predictedOutcome?"bg-green-500/20 text-green-600":"black_wins"===e.predictedOutcome?"bg-red-500/20 text-red-600":"bg-gray-500/20 text-gray-600"),children:e.predictedOutcome.replace("_"," ")})]}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:e.matchingFactors.slice(0,3).map((t,n)=>xt.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[t,n<Math.min(e.matchingFactors.length,3)-1&&"  "]},n))})]}),l1=({totalMoves:e,moves:t,hybridPrediction:n,patternPrediction:r})=>{const{currentMove:a,setCurrentMove:i,isPlaying:s,play:o,pause:l,setMaxMoves:c}=R$(),u=e>0?a/e*100:0;ct.useEffect(()=>{c(e)},[e,c]);const d=ct.useMemo(()=>{if(!t)return[];const e=[];return t.forEach((t,n)=>{const r=n+1;t.includes("x")?e.push({move:r,type:"capture",notation:t}):t.includes("+")?e.push({move:r,type:"check",notation:t}):t.includes("#")?e.push({move:r,type:"checkmate",notation:t}):"O-O"!==t&&"O-O-O"!==t||e.push({move:r,type:"castle",notation:t})}),e.slice(0,10)},[t]);return xt.jsxs("div",{className:"space-y-3 p-3 rounded-lg bg-muted/30 border border-border/50",children:[xt.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[xt.jsx("span",{className:"font-mono",children:(()=>{if(0===a)return"Start";if(a>=e)return"Final";return`${Math.ceil(a/2)}. ${a%2==1?"":"..."}`})()}),xt.jsxs("span",{children:[a," / ",e]})]}),xt.jsxs("div",{className:"relative",children:[xt.jsx(w$,{value:u,className:"h-2"}),(n||r)&&xt.jsx(mU,{hybridPrediction:n,patternPrediction:r,totalMoves:e,currentMove:a,orientation:"horizontal",className:"h-6 -top-2"})]}),xt.jsxs("div",{className:"flex items-center justify-center gap-1",children:[xt.jsx(vD,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(0),disabled:0===a,children:xt.jsx(pg,{className:"h-4 w-4"})}),xt.jsx(vD,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(Math.max(0,a-1)),disabled:0===a,children:xt.jsx(Im,{className:"h-4 w-4"})}),xt.jsx(vD,{variant:"outline",size:"icon",className:"h-10 w-10 border-primary/50",onClick:()=>s?l():o(),children:s?xt.jsx(zf,{className:"h-5 w-5"}):xt.jsx(Uf,{className:"h-5 w-5 ml-0.5"})}),xt.jsx(vD,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(Math.min(e,a+1)),disabled:a>=e,children:xt.jsx(Lm,{className:"h-4 w-4"})}),xt.jsx(vD,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(e),disabled:a>=e,children:xt.jsx(mg,{className:"h-4 w-4"})})]}),d.length>0&&xt.jsxs("div",{className:"pt-2 border-t border-border/30",children:[xt.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Key Moments"}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:d.slice(0,6).map((e,t)=>xt.jsx(vD,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>i(e.move),children:xt.jsx("span",{className:"capture"===e.type?"text-red-400":"check"===e.type?"text-amber-400":"checkmate"===e.type?"text-green-400":"text-blue-400",children:e.notation})},t))})]})]})},c1=({visionScore:e,isLoading:t,gameData:n,totalMoves:r,createdAt:a,gameAnalysis:i,pgn:s})=>{const o=JU(100),l=ut.useMemo(()=>{const e=[s,n.pgn];for(const t of e)if(t&&"string"==typeof t&&t.trim().length>0)return t.trim();return""},[s,n.pgn]),{qualitySummary:c,classifiedMoves:u}=ut.useMemo(()=>{if(!l)return{qualitySummary:null,classifiedMoves:[]};try{const e=IQ(l);return 0===e.length?{qualitySummary:null,classifiedMoves:[]}:{qualitySummary:$Q(e),classifiedMoves:e}}catch(APe){return{qualitySummary:null,classifiedMoves:[]}}},[l]),d=ut.useMemo(()=>l&&0!==u.length?function(e,t){const n=new lF;let r=[];try{n.loadPgn(e),r=n.history()}catch{r=t.map(e=>e.san)}const a=GQ(r),i=t.filter(e=>"book"===e.quality).map(e=>({moveNumber:e.moveNumber,san:e.san,color:e.color})),s=i.length>0?Math.max(...i.map(e=>e.moveNumber)):0;return{opening:a,bookMoves:i,lastBookMoveNumber:s}}(l,u):null,[l,u]),h=ut.useMemo(()=>{if(!l)return null;try{return WQ(l)||null}catch{return null}},[l]),p=e?XU(e,o):0,m=ut.useMemo(()=>{var t,n;if(e)return null;let r=5;return i&&(i.opening&&(r+=2),i.gambit&&(r+=3),i.tactics.length>0&&(r+=.5*i.tactics.length),i.specialMoves.length>0&&(r+=.25*i.specialMoves.length),"masterpiece"===(null==(t=i.summary)?void 0:t.complexity)?r+=5:"complex"===(null==(n=i.summary)?void 0:n.complexity)&&(r+=3)),c&&(r+=2*c.brilliantCount,r+=.5*c.greatCount),Math.min(r,50)},[e,i,c]),f=p;return t?xt.jsx("div",{className:"flex items-center justify-center py-12",children:xt.jsx(Pf,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):xt.jsxs("div",{className:"space-y-6",children:[xt.jsxs("div",{className:"p-4 rounded-lg border border-border/50 bg-card/50 space-y-3",children:[xt.jsx("h3",{className:"font-display text-sm uppercase tracking-wider text-muted-foreground",children:"Game Summary"}),xt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[xt.jsxs("div",{children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"White"}),xt.jsx("div",{className:"font-medium",children:n.white||"Unknown"})]}),xt.jsxs("div",{children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Black"}),xt.jsx("div",{className:"font-medium",children:n.black||"Unknown"})]}),n.event&&xt.jsxs("div",{className:"col-span-2",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Event"}),xt.jsx("div",{className:"font-medium",children:n.event})]}),xt.jsxs("div",{children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Moves"}),xt.jsx("div",{className:"font-display text-lg text-primary",children:r})]}),xt.jsxs("div",{children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Result"}),xt.jsx("div",{className:"font-display text-lg",children:n.result||"?"})]})]})]}),i&&xt.jsxs("div",{className:"space-y-3",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("h3",{className:"font-display text-sm uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[xt.jsx(Pm,{className:"h-4 w-4"}),"Deep Analysis"]}),i.summary&&xt.jsx(MD,{variant:"secondary",className:"text-[10px] "+("masterpiece"===i.summary.complexity?"bg-amber-500/20 text-amber-600":"complex"===i.summary.complexity?"bg-purple-500/20 text-purple-600":"moderate"===i.summary.complexity?"bg-blue-500/20 text-blue-600":"bg-green-500/20 text-green-600"),children:i.summary.complexity})]}),h?xt.jsx(mJ,{opening:h,showValue:!0}):i.opening&&xt.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[xt.jsx(MD,{variant:"outline",className:"bg-blue-500/20 text-blue-600 border-blue-500/30",children:"Opening"}),xt.jsx("span",{className:"text-xs text-muted-foreground",children:i.opening.eco})]}),xt.jsx("p",{className:"font-medium text-sm",children:i.opening.name}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.opening.description})]}),i.gambit&&xt.jsxs("div",{className:"p-3 rounded-lg bg-orange-500/10 border border-orange-500/20",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[xt.jsxs(MD,{variant:"outline",className:"bg-orange-500/20 text-orange-600 border-orange-500/30",children:[xt.jsx(Ag,{className:"h-3 w-3 mr-1"}),"Gambit"]}),xt.jsx(MD,{variant:"secondary",className:"text-[10px]",children:i.gambit.frequency})]}),xt.jsx("p",{className:"font-medium text-sm",children:i.gambit.name}),xt.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Sacrifices ",i.gambit.sacrificedMaterial," for ",i.gambit.compensation]})]}),i.tactics.length>0&&xt.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[xt.jsx("div",{className:"flex items-center gap-2 mb-2",children:xt.jsxs(MD,{variant:"outline",className:"bg-purple-500/20 text-purple-600 border-purple-500/30",children:[xt.jsx(xg,{className:"h-3 w-3 mr-1"}),"Tactics (",i.tactics.length,")"]})}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:i.tactics.slice(0,8).map((e,t)=>xt.jsxs(MD,{variant:"secondary",className:"text-xs",children:["fork"===e.type&&"","pin"===e.type&&"","discovery"===e.type&&"","skewer"===e.type&&"","back_rank"===e.type&&"","smothered_mate"===e.type&&"","sacrifice"===e.type&&"","double_attack"===e.type&&"","check"===e.type&&"","checkmate"===e.type&&"#"," ",e.type.replace("_"," ")," (m",e.moveNumber,")"]},t))})]}),i.specialMoves.length>0&&xt.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[xt.jsx("div",{className:"flex items-center gap-2 mb-2",children:xt.jsxs(MD,{variant:"outline",className:"bg-green-500/20 text-green-600 border-green-500/30",children:[xt.jsx(gg,{className:"h-3 w-3 mr-1"}),"Special Moves"]})}),xt.jsx("div",{className:"flex flex-wrap gap-1",children:i.specialMoves.map(e=>{var t,n;return xt.jsxs(MD,{variant:"secondary",className:"text-xs",children:["castle_kingside"===e.type&&"0-0","castle_queenside"===e.type&&"0-0-0","en_passant"===e.type&&"e.p.","promotion"===e.type&&`=${null==(t=e.promotedTo)?void 0:t.toUpperCase()}`,"underpromotion"===e.type&&`=${null==(n=e.promotedTo)?void 0:n.toUpperCase()}!`," ","(m",e.moveNumber,")"]},`${e.type}-${e.moveNumber}`)})})]}),c&&xt.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-br from-cyan-500/10 via-transparent to-purple-500/10 border border-cyan-500/20",children:[xt.jsx("div",{className:"flex items-center justify-between mb-3",children:xt.jsxs(MD,{variant:"outline",className:"bg-cyan-500/10 text-cyan-600 border-cyan-500/30",children:[xt.jsx(gg,{className:"h-3 w-3 mr-1"}),"Move Quality"]})}),xt.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[xt.jsxs("div",{className:"p-2 rounded bg-background/50 border border-border/30 text-center",children:[xt.jsxs("p",{className:"text-[10px] text-muted-foreground mb-1",children:[" ",n.white||"White"]}),xt.jsxs("p",{className:"text-lg font-bold "+(c.whiteAccuracy>=90?"text-green-400":c.whiteAccuracy>=70?"text-yellow-400":"text-red-400"),children:[c.whiteAccuracy,"%"]})]}),xt.jsxs("div",{className:"p-2 rounded bg-background/50 border border-border/30 text-center",children:[xt.jsxs("p",{className:"text-[10px] text-muted-foreground mb-1",children:[" ",n.black||"Black"]}),xt.jsxs("p",{className:"text-lg font-bold "+(c.blackAccuracy>=90?"text-green-400":c.blackAccuracy>=70?"text-yellow-400":"text-red-400"),children:[c.blackAccuracy,"%"]})]})]}),xt.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center text-xs mb-3",children:[c.brilliantCount>0&&xt.jsx(wU,{quality:"brilliant",count:c.brilliantCount,classifiedMoves:u,children:xt.jsxs("div",{className:"p-2 rounded bg-cyan-500/10 border border-cyan-500/20 cursor-help transition-all hover:bg-cyan-500/15 hover:border-cyan-500/30",children:[xt.jsx("p",{className:"font-bold text-cyan-400",children:c.brilliantCount}),xt.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Brilliant !!"})]})}),c.greatCount>0&&xt.jsx(wU,{quality:"great",count:c.greatCount,classifiedMoves:u,children:xt.jsxs("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/20 cursor-help transition-all hover:bg-green-500/15 hover:border-green-500/30",children:[xt.jsx("p",{className:"font-bold text-green-400",children:c.greatCount}),xt.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Great !"})]})}),c.bestCount>0&&xt.jsx(wU,{quality:"best",count:c.bestCount,classifiedMoves:u,children:xt.jsxs("div",{className:"p-2 rounded bg-lime-500/10 border border-lime-500/20 cursor-help transition-all hover:bg-lime-500/15 hover:border-lime-500/30",children:[xt.jsx("p",{className:"font-bold text-lime-400",children:c.bestCount}),xt.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Best "})]})}),c.goodCount>0&&xt.jsx(wU,{quality:"good",count:c.goodCount,classifiedMoves:u,children:xt.jsxs("div",{className:"p-2 rounded bg-gray-500/10 border border-gray-500/20 cursor-help transition-all hover:bg-gray-500/15 hover:border-gray-500/30",children:[xt.jsx("p",{className:"font-bold text-gray-400",children:c.goodCount}),xt.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Good "})]})})]}),(c.inaccuracyCount>0||c.mistakeCount>0||c.blunderCount>0)&&xt.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs mb-3",children:[c.inaccuracyCount>0&&xt.jsx(wU,{quality:"inaccuracy",count:c.inaccuracyCount,classifiedMoves:u,children:xt.jsxs("div",{className:"p-2 rounded bg-yellow-500/10 border border-yellow-500/20 cursor-help transition-all hover:bg-yellow-500/15 hover:border-yellow-500/30",children:[xt.jsx("p",{className:"font-bold text-yellow-400",children:c.inaccuracyCount}),xt.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Inaccuracy ?!"})]})}),c.mistakeCount>0&&xt.jsx(wU,{quality:"mistake",count:c.mistakeCount,classifiedMoves:u,children:xt.jsxs("div",{className:"p-2 rounded bg-orange-500/10 border border-orange-500/20 cursor-help transition-all hover:bg-orange-500/15 hover:border-orange-500/30",children:[xt.jsx("p",{className:"font-bold text-orange-400",children:c.mistakeCount}),xt.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Mistake ?"})]})}),c.blunderCount>0&&xt.jsx(wU,{quality:"blunder",count:c.blunderCount,classifiedMoves:u,children:xt.jsxs("div",{className:"p-2 rounded bg-red-500/10 border border-red-500/20 cursor-help transition-all hover:bg-red-500/15 hover:border-red-500/30",children:[xt.jsx("p",{className:"font-bold text-red-400",children:c.blunderCount}),xt.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Blunder ??"})]})})]}),c.bookCount>0&&d&&xt.jsx(kU,{count:c.bookCount,openingInfo:d}),xt.jsxs("div",{className:"pt-2 border-t border-border/30",children:[xt.jsx("p",{className:"text-[10px] text-muted-foreground mb-2",children:"Tactical Events"}),xt.jsxs("div",{className:"grid grid-cols-6 gap-1 text-center text-xs",children:[xt.jsxs("div",{className:"p-1 rounded bg-yellow-500/10",children:[xt.jsx("p",{className:"font-bold text-yellow-400",children:c.checkCount}),xt.jsx("p",{className:"text-muted-foreground text-[9px]",children:"Checks"})]}),xt.jsxs("div",{className:"p-1 rounded bg-red-500/10",children:[xt.jsx("p",{className:"font-bold text-red-400",children:c.checkmateCount}),xt.jsx("p",{className:"text-muted-foreground text-[9px]",children:"Mate"})]}),xt.jsxs("div",{className:"p-1 rounded bg-orange-500/10",children:[xt.jsx("p",{className:"font-bold text-orange-400",children:c.captureCount}),xt.jsx("p",{className:"text-muted-foreground text-[9px]",children:"Captures"})]}),xt.jsxs("div",{className:"p-1 rounded bg-blue-500/10",children:[xt.jsx("p",{className:"font-bold text-blue-400",children:c.castleCount}),xt.jsx("p",{className:"text-muted-foreground text-[9px]",children:"Castles"})]}),xt.jsxs("div",{className:"p-1 rounded bg-purple-500/10",children:[xt.jsx("p",{className:"font-bold text-purple-400",children:c.sacrificeCount}),xt.jsx("p",{className:"text-muted-foreground text-[9px]",children:"Sacrifices"})]}),xt.jsxs("div",{className:"p-1 rounded bg-pink-500/10",children:[xt.jsx("p",{className:"font-bold text-pink-400",children:c.promotionCount}),xt.jsx("p",{className:"text-muted-foreground text-[9px]",children:"Promos"})]})]})]})]})]}),(e||m)&&xt.jsxs("div",{className:"p-4 rounded-lg border border-primary/30 bg-primary/5 space-y-4",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsx("h3",{className:"font-display text-sm uppercase tracking-wider text-primary",children:e?"Vision Score":"Potential Value"}),e?xt.jsxs(MD,{variant:"outline",className:"bg-primary/10 text-primary",children:[e.totalScore.toFixed(2)," pts"]}):xt.jsx(MD,{variant:"outline",className:"bg-amber-500/10 text-amber-600 border-amber-500/30",children:"New Vision"})]}),e?xt.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsx("div",{className:"text-lg font-display",children:e.viewCount}),xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Views"})]}),xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsx("div",{className:"text-lg font-display",children:e.downloadHdCount+e.downloadGifCount}),xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Downloads"})]}),xt.jsxs("div",{className:"p-2 rounded bg-background/50",children:[xt.jsx("div",{className:"text-lg font-display",children:e.printOrderCount}),xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Prints"})]})]}):xt.jsx("div",{className:"text-center py-2",children:xt.jsx("p",{className:"text-sm text-muted-foreground",children:"Save this vision to start tracking its value"})}),xt.jsxs("div",{className:"pt-3 border-t border-border/30",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsx("span",{className:"text-sm text-muted-foreground",children:e?"Estimated Value":"Potential Starting Value"}),xt.jsxs("span",{className:"font-display text-xl text-primary",children:["$",(e?f:m||0).toFixed(2)]})]}),!e&&m&&xt.jsx("p",{className:"text-xs text-muted-foreground mt-1 text-center",children:"Based on game complexity and tactical richness"})]})]}),e&&e.totalScore>0&&xt.jsxs("div",{className:"p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[xt.jsx("h3",{className:"font-display text-sm uppercase tracking-wider text-muted-foreground",children:"Score Breakdown"}),xt.jsxs("div",{className:"space-y-2 text-sm",children:[xt.jsxs("div",{className:"flex justify-between",children:[xt.jsxs("span",{className:"text-muted-foreground",children:["Views (",e.viewCount,"  ",qU,")"]}),xt.jsx("span",{children:(e.viewCount*qU).toFixed(2)})]}),xt.jsxs("div",{className:"flex justify-between",children:[xt.jsxs("span",{className:"text-muted-foreground",children:["HD Downloads (",e.downloadHdCount,"  ",VU,")"]}),xt.jsx("span",{children:(e.downloadHdCount*VU).toFixed(2)})]}),xt.jsxs("div",{className:"flex justify-between",children:[xt.jsxs("span",{className:"text-muted-foreground",children:["GIF Downloads (",e.downloadGifCount,"  ",WU,")"]}),xt.jsx("span",{children:(e.downloadGifCount*WU).toFixed(2)})]}),e.tradeCount>0&&xt.jsxs("div",{className:"flex justify-between",children:[xt.jsxs("span",{className:"text-muted-foreground",children:["Trades (",e.tradeCount,"  ",QU,")"]}),xt.jsx("span",{children:(e.tradeCount*QU).toFixed(2)})]}),e.printOrderCount>0&&xt.jsxs("div",{className:"flex justify-between",children:[xt.jsx("span",{className:"text-muted-foreground",children:"Print Orders"}),xt.jsx("span",{children:(e.printOrderCount*UU+e.printRevenueCents/100).toFixed(2)})]})]})]}),a&&xt.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:["Created ",rH(new Date(a),"MMMM d, yyyy")]})]})},u1=({onExport:e,isPremium:t=!1,darkMode:n,totalMoves:r,showPieces:a,pieceOpacity:i})=>{const{currentMove:s}=R$(),{lockedPieces:o,lockedSquares:l,compareMode:c}=M$(),u=ct.useCallback(t=>{const u={currentMove:s>=r?r:s,lockedPieces:o.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor})),lockedSquares:l.map(e=>({square:e.square,pieces:e.pieces.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor}))})),compareMode:c,darkMode:n,showPieces:a,pieceOpacity:i};null==e||e(t,u)},[e,s,r,o,l,c,n,a,i]);return e?xt.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:[xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(vD,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>u("preview"),children:[xt.jsx(ef,{className:"h-4 w-4"}),"Preview"]})}),xt.jsx(Zb,{children:"Download preview image (free)"})]})}),xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(vD,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>u("hd"),children:[xt.jsx(ef,{className:"h-4 w-4"}),"HD",!t&&xt.jsx(Zm,{className:"h-3 w-3 text-primary"})]})}),xt.jsx(Zb,{children:t?"Download high-resolution image":"Premium: Download HD image"})]})}),xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(vD,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>u("gif"),children:[xt.jsx(ef,{className:"h-4 w-4"}),"GIF",!t&&xt.jsx(Zm,{className:"h-3 w-3 text-primary"})]})}),xt.jsx(Zb,{children:t?"Download animated GIF":"Premium: Download animated GIF"})]})}),xt.jsxs(vD,{variant:"default",size:"sm",className:"gap-2 bg-gradient-to-r from-amber-500/80 to-amber-600/80 hover:from-amber-500 hover:to-amber-600 text-stone-900",onClick:()=>u("print"),children:[xt.jsx(Gf,{className:"h-4 w-4"}),"Order Print"]})]}):null},d1=({onShare:e,darkMode:t,showPieces:n,pieceOpacity:r,totalMoves:a})=>{const{currentMove:i}=R$(),{lockedPieces:s,lockedSquares:o,compareMode:l}=M$(),c=ct.useCallback(()=>{const c={currentMove:i>=a?a:i,lockedPieces:s.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor})),lockedSquares:o.map(e=>({square:e.square,pieces:e.pieces.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor}))})),compareMode:l,darkMode:t,showPieces:n,pieceOpacity:r};e(c)},[e,i,a,s,o,l,t,n,r]);return xt.jsxs(vD,{variant:"ghost",size:"sm",className:"gap-2 ml-auto",onClick:c,children:[xt.jsx(ig,{className:"h-4 w-4"}),"Share"]})},h1=({board:e,gameData:t,totalMoves:n,pgn:r,context:a,defaultTab:i,visualizationId:s,paletteId:o,createdAt:l,title:c,imageUrl:u,shareId:d,onTransferToCreative:h,onExport:p,onShare:m,onClose:f,onBack:g,onSaveToGallery:y,onPaletteChange:v,isPremium:x=!1,onUpgradePrompt:b,showPurchaseButton:w=!1,purchasePrice:k,onPurchase:N,isPurchasing:j=!1,isListed:_=!1,onListForSale:S,isOwner:C=!1,sellerName:P,visionScoreData:E,headerActions:R,showBackButton:O=!0,backButtonText:T,initialState:M})=>{var A,B,D,I,L,F;const{user:$}=lP(),z=i||("marketplace"===a?"analytics":"experience"),[q,V]=ct.useState(z),[W,Q]=ct.useState(E?{visualizationId:s||"",viewCount:E.viewCount,uniqueViewers:E.uniqueViewers,downloadHdCount:E.downloadHdCount,downloadGifCount:E.downloadGifCount,scanCount:E.scanCount||0,printOrderCount:E.printOrderCount,printRevenueCents:E.printRevenueCents,tradeCount:E.tradeCount,totalScore:E.totalScore,royaltyCentsEarned:E.royaltyCentsEarned,royaltyOrdersCount:E.royaltyOrdersCount,updatedAt:(new Date).toISOString()}:null),[U,K]=ct.useState(!1),[H,G]=ct.useState(null),[Y,Z]=ct.useState(null),[X,J]=ct.useState(!1),{result:ee,analyzeGame:te,isAnalyzing:ne}=H0(),{showPieces:re,pieceOpacity:ae,darkMode:ie,setShowPieces:se,setPieceOpacity:oe,setDarkMode:le}=B$(),[ce,ue]=ct.useState(!0),[de,he]=ct.useState((null==M?void 0:M.heatmaps)??!1),[pe,me]=ct.useState(re??!1),[fe,ge]=ct.useState(ae??.7),[ye,ve]=ct.useState(400),[xe,be]=ct.useState(ie??!1),we=ct.useRef(!1),ke=ct.useRef(!1),Ne=ct.useRef(!1);ct.useEffect(()=>{void 0===(null==M?void 0:M.pieces)||we.current||me(M.pieces),void 0===(null==M?void 0:M.opacity)||ke.current||ge(M.opacity),void 0===(null==M?void 0:M.dark)||Ne.current||be(M.dark),void 0!==(null==M?void 0:M.heatmaps)&&he(M.heatmaps)},[]);const je=ct.useCallback(e=>{we.current=!0,me(e),se(e)},[se]),_e=ct.useCallback(e=>{ke.current=!0,ge(e),oe(e)},[oe]),Se=ct.useCallback(e=>{Ne.current=!0,be(e),le(e)},[le]),[Ce,Pe]=ct.useState(!0),[Ee,Re]=ct.useState(!1),[Oe,Te]=ct.useState(!1),Me=ct.useMemo(()=>void 0!==(null==M?void 0:M.move)&&M.move>0?Math.min(M.move,n):n,[null==M?void 0:M.move,n]),Ae=ct.useRef(null),Be=ct.useRef(null),[De,Ie]=ct.useState(e),[Le,Fe]=ct.useState(t),[$e,ze]=ct.useState(n),[qe,Ve]=ct.useState(o),[We,Qe]=ct.useState(s),[Ue,Ke]=ct.useState(c),[He,Ge]=ct.useState(C),[Ye,Ze]=ct.useState(_),[Xe,Je]=ct.useState(P),[et,tt]=ct.useState(k),[nt,rt]=ct.useState(!1);ct.useEffect(()=>{Ie(e),Fe(t),ze(n),Ve(o),Qe(s),Ke(c),Ge(C),Ze(_),Je(P),tt(k)},[e,t,n,o,s,c,C,_,P,k]);const at=ct.useMemo(()=>{const e=qe||BF().id;if("custom"===e)return null;const t=TF.find(t=>t.id===e);return t?{id:e,name:t.name}:null},[qe]),it=ct.useMemo(()=>{const e=[r,null==Le?void 0:Le.pgn,null==t?void 0:t.pgn];for(const t of e)if(t&&"string"==typeof t&&t.trim().length>0){const e=t.trim();if(e.length>=2)return e}return""},[r,null==Le?void 0:Le.pgn,null==t?void 0:t.pgn]),st=ct.useMemo(()=>{const e=(null==Le?void 0:Le.moves)||(null==t?void 0:t.moves);if(e&&e.length>0)return e;if(!it)return[];try{const e=new lF;return e.loadPgn(it),e.history()}catch{try{const e=new lF,t=it.replace(/\[[^\]]*\]/g,"").trim().replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/\$\d+/g,"").replace(/1-0|0-1|1\/2-1\/2|\*/g,"").split(/\s+/).filter(e=>e&&!e.match(/^\d+\.+$/)&&"..."!==e),n=[];for(const r of t)try{const t=r.replace(/0-0-0/gi,"O-O-O").replace(/0-0/gi,"O-O").replace(/[+#!?]+$/,""),a=e.move(t);a&&n.push(a.san)}catch(APe){}return n}catch(APe){return[]}}},[null==Le?void 0:Le.moves,null==t?void 0:t.moves,it]),ot=ct.useCallback(async e=>{var t,n,r;if(it){rt(!0);try{AF(e.paletteId),Ve(e.paletteId);const a=YX(it),i=new URL(window.location.href);i.pathname=`/g/${a}`,e.paletteId&&"modern"!==e.paletteId?i.searchParams.set("p",e.paletteId):i.searchParams.delete("p");const s=new URLSearchParams(window.location.search);if(s.has("src")&&i.searchParams.set("src",s.get("src")),s.has("listing")&&i.searchParams.set("listing",s.get("listing")),window.history.replaceState({},"",i.toString()),e.isTaken&&e.visualizationId){const{data:r,error:a}=await KC.from("saved_visualizations").select("*").eq("id",e.visualizationId).single();if(a)throw a;const i=r.game_data;i.board&&Ie(i.board),i.gameData&&Fe(i.gameData),i.totalMoves&&ze(i.totalMoves),Qe(e.visualizationId),Ke(r.title),Ge(r.user_id===(null==$?void 0:$.id));const{data:s}=await KC.from("visualization_listings").select("*, profiles:seller_id(display_name)").eq("visualization_id",e.visualizationId).eq("status","active").maybeSingle();Ze(!!s),tt(null==s?void 0:s.price_cents),Je((null==(t=null==s?void 0:s.profiles)?void 0:t.display_name)||"Anonymous");const o=await GU(e.visualizationId);Q(o),Yy.success(`Switched to ${e.ownerDisplayName}'s ${(null==(n=TF.find(t=>t.id===e.paletteId))?void 0:n.name)||"palette"} colorway`)}else{const t=j$(it),n=t.board.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>({...e,hexColor:zF(e.piece,e.color)}))})));Ie(n),Fe(t.gameData),ze(t.totalMoves),Qe(void 0),Ke(void 0),Ge(!1),Ze(!1),Q(null);const a=null==(r=TF.find(t=>t.id===e.paletteId))?void 0:r.name;Yy.success(`Applied ${a||"new"} palette`)}null==v||v()}catch(BPe){Yy.error("Failed to switch palette")}finally{rt(!1)}}},[it,null==$?void 0:$.id,v]);ct.useEffect(()=>{const e=()=>{const e=window.innerWidth,t=window.innerHeight,n=e>=1280;let r;r=n&&Ce?e-160-240-24-32:n?e-160-24-32:e-32;const a=t-180-120,i=Math.max(300,r),s=Math.max(300,a),o=Math.min(i,s),l=n?580:520;ve(Math.max(300,Math.min(o,l)))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[Ce]),ct.useEffect(()=>{s&&!E&&(K(!0),GU(s).then(e=>Q(e)).finally(()=>K(!1)))},[s,E]),ct.useEffect(()=>{if(!it)return void G(null);const e=it.trim();if(e)try{const t=rU(e);G(t)}catch(APe){G(null)}else G(null)},[it,st.length]),ct.useEffect(()=>{if(it){const e=kF(it);Z(e)}},[it]),ct.useEffect(()=>{if(it&&st.length>0&&!ee.hybridPrediction&&!ne){const e=setTimeout(()=>{te(it,{depth:15})},500);return()=>clearTimeout(e)}},[it,st.length,ee.hybridPrediction,ne,te]),ct.useEffect(()=>{o&&"custom"!==o&&AF(o)},[o]);const lt=ct.useCallback(()=>{x||!b?null==h||h():b()},[x,b,h]);ct.useEffect(()=>{const e=e=>{if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target.isContentEditable)return;switch(e.key.toLowerCase()){case"f":e.preventDefault(),Te(e=>!e);break;case"c":e.preventDefault(),ue(e=>!e);break;case"l":e.preventDefault(),window.innerWidth<1280?Re(e=>!e):Pe(e=>!e);break;case"escape":Oe&&(e.preventDefault(),Te(!1))}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Oe]);const ut=ct.useMemo(()=>c||(t.white&&t.black?`${t.white} vs ${t.black}`:"Chess Visualization"),[c,t.white,t.black]),dt=ct.useMemo(()=>{var e;if(null==(e=null==M?void 0:M.locked)?void 0:e.length)return M.locked.map(e=>({pieceType:e.type,pieceColor:e.color}))},[null==M?void 0:M.locked]);return xt.jsx(E$,{initialMove:Me,initialPhase:null==M?void 0:M.phase,children:xt.jsxs(T$,{initialLockedPieces:dt,initialCompareMode:null==M?void 0:M.compare,children:[xt.jsx(yT,{children:Oe&&xt.jsxs(gD.div,{ref:Be,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-background flex items-center justify-center",children:[xt.jsx("div",{className:"absolute top-4 right-4 flex items-center gap-2 z-10",children:xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx(vD,{variant:"outline",size:"icon",onClick:()=>Te(!1),className:"bg-background/80 backdrop-blur-sm",children:xt.jsx(Df,{className:"h-5 w-5"})})}),xt.jsx(Zb,{children:"Exit fullscreen (Esc)"})]})})}),xt.jsx("div",{className:"relative","data-vision-board":"true",children:xt.jsx(_V,{board:De,totalMoves:$e,size:Math.min(window.innerHeight-100,window.innerWidth-100,700),gameData:Le,darkMode:xe,title:Ue||ut,showCoordinates:ce,showPieces:pe,pieceOpacity:fe,pgn:it})}),xt.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-xs text-muted-foreground bg-muted/50 px-3 py-1.5 rounded-full",children:["Press ",xt.jsx("kbd",{className:"px-1.5 py-0.5 bg-background rounded border text-foreground",children:"Esc"})," or ",xt.jsx("kbd",{className:"px-1.5 py-0.5 bg-background rounded border text-foreground",children:"F"})," to exit"]})]})}),xt.jsxs("div",{className:"flex flex-col w-full max-w-full",ref:Ae,children:[(g||R)&&xt.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 mb-4 pb-3 border-b border-border/50",children:[xt.jsxs("div",{className:"flex items-center justify-between flex-1",children:[g?xt.jsxs(vD,{variant:"ghost",size:"sm",onClick:g,className:"gap-2",children:[xt.jsx(Jf,{className:"h-4 w-4"}),T||"Return"]}):xt.jsx("div",{}),xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:"Print Paper:"}),xt.jsx(vD,{variant:xe?"outline":"secondary",size:"sm",onClick:()=>Se(!1),className:"gap-1 text-xs h-8",children:"Light"}),xt.jsx(vD,{variant:xe?"secondary":"outline",size:"sm",onClick:()=>Se(!0),className:"gap-1 text-xs h-8",children:"Dark"})]})]}),R&&xt.jsx("div",{className:"flex-shrink-0",children:R})]}),xt.jsxs(GI,{value:q,onValueChange:e=>V(e),children:[xt.jsxs(YI,{className:"w-full grid grid-cols-2 bg-muted/50 p-1 mb-4",children:[xt.jsxs(ZI,{value:"experience",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-lg transition-all duration-300",children:[xt.jsx(gD.div,{animate:{rotate:"experience"===q?0:-10},transition:{type:"spring",stiffness:300},children:xt.jsx(gg,{className:"h-4 w-4"})}),"Experience"]}),xt.jsxs(ZI,{value:"analytics",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-lg transition-all duration-300",children:[xt.jsx(gD.div,{animate:{rotate:"analytics"===q?0:10},transition:{type:"spring",stiffness:300},children:xt.jsx(Mm,{className:"h-4 w-4"})}),"Analytics"]})]}),xt.jsx(XI,{value:"experience",className:"mt-0 w-full",children:xt.jsx("div",{className:"w-full",children:xt.jsxs("div",{className:"space-y-4 w-full pb-4",children:[xt.jsx(mV,{showCoordinates:ce,onToggleCoordinates:ue,showPieces:pe,pieceOpacity:fe,onTogglePieces:je,onOpacityChange:_e,showLegend:Ce,onToggleLegend:Pe,onFullscreen:()=>Te(!0)}),H&&xt.jsxs("button",{onClick:()=>V("analytics"),className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-500/10 via-blue-500/5 to-cyan-500/10 border border-purple-500/20 hover:border-purple-500/40 transition-all group flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20 group-hover:bg-purple-500/30 transition-colors",children:xt.jsx(Pm,{className:"h-4 w-4 text-purple-400"})}),xt.jsxs("div",{className:"text-left",children:[xt.jsx("p",{className:"font-medium text-sm text-foreground",children:"Deep Analysis Available"}),xt.jsxs("p",{className:"text-xs text-muted-foreground",children:[H.opening?`${H.opening.name}`:"Opening detection",H.tactics.length>0&&`  ${H.tactics.length} tactics`,H.gambit&&"  Gambit detected"]})]})]}),xt.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-400 group-hover:text-purple-300",children:[xt.jsx("span",{children:"View in Analytics"}),xt.jsx(Mm,{className:"h-4 w-4"})]})]}),xt.jsxs("div",{className:"flex gap-2 xl:gap-3 items-start justify-center w-full",children:[xt.jsx("div",{className:"hidden xl:flex flex-shrink-0",style:{minWidth:"160px",width:"160px"},children:xt.jsx(fU,{totalMoves:$e,moves:st,pgn:it,hybridPrediction:ee.hybridPrediction,patternPrediction:ee.patternPrediction})}),xt.jsxs("div",{className:"flex-shrink-0 relative","data-vision-board":"true",children:[nt&&xt.jsx("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center z-10 rounded-lg",children:xt.jsx(Pf,{className:"h-8 w-8 animate-spin text-primary"})}),xt.jsx(_V,{board:De,totalMoves:$e,size:ye,gameData:Le,darkMode:xe,title:Ue||ut,showCoordinates:ce,showPieces:pe,pieceOpacity:fe,pgn:it})]}),Ce&&xt.jsx("div",{className:"hidden xl:flex flex-col flex-shrink-0",style:{minWidth:"240px",width:"240px",maxHeight:"calc(100vh - 240px)",overflowY:"auto"},children:xt.jsx(bU,{interactive:!0,board:De,gameContext:{whiteName:Le.white,blackName:Le.black,event:Le.event,result:Le.result,opening:null==(A=null==H?void 0:H.opening)?void 0:A.name,totalMoves:n}})})]}),xt.jsx("div",{className:"xl:hidden",children:xt.jsx(l1,{totalMoves:$e,moves:st,hybridPrediction:ee.hybridPrediction,patternPrediction:ee.patternPrediction})}),Ce&&xt.jsx("div",{className:"xl:hidden",children:xt.jsxs(gD.div,{className:"rounded-lg border border-border/50 bg-card/50 overflow-hidden",initial:!1,children:[xt.jsxs("button",{onClick:()=>Re(!Ee),className:"w-full flex items-center justify-between p-3 hover:bg-muted/30 transition-colors",children:[xt.jsxs("span",{className:"font-display text-sm uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[xt.jsx(rf,{className:"h-4 w-4"}),"Color Legend"]}),xt.jsx(gD.div,{animate:{rotate:Ee?180:0},transition:{duration:.2},children:xt.jsx(Dm,{className:"h-4 w-4 text-muted-foreground"})})]}),xt.jsx(yT,{children:Ee&&xt.jsx(gD.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:xt.jsx("div",{className:"p-3 pt-0",children:xt.jsx(W$,{whitePalette:LF().white,blackPalette:LF().black,board:e,compact:!0})})})})]})}),(at||(null==Y?void 0:Y.isMatch))&&xt.jsx(zU,{paletteId:null==at?void 0:at.id,similarity:at?100:void 0,gameCardId:null==(B=null==Y?void 0:Y.matchedGame)?void 0:B.id,gameCardTitle:null==(D=null==Y?void 0:Y.matchedGame)?void 0:D.title,gameCardMatchType:null==Y?void 0:Y.matchType,gameCardSimilarity:null==Y?void 0:Y.similarity}),it&&xt.jsx(xX,{pgn:it,currentUserId:null==$?void 0:$.id,currentPaletteId:null==at?void 0:at.id,context:a,compact:!1,onSeamlessSwitch:ot}),(null==Y?void 0:Y.isMatch)&&(null==(I=null==Y?void 0:Y.matchedGame)?void 0:I.id)&&mL(Y.matchedGame.id)&&xt.jsx(zZ,{gameId:Y.matchedGame.id,gameTitle:Y.matchedGame.title,onOpenModal:()=>J(!0)}),xt.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-border/30",children:[p&&xt.jsx(u1,{onExport:p,isPremium:x,darkMode:xe,totalMoves:$e,showPieces:pe,pieceOpacity:fe}),y&&xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(vD,{variant:"outline",size:"sm",className:"gap-2",onClick:async()=>{const e=await y();e&&(Qe(e),Ge(!0))},children:[xt.jsx(Zm,{className:"h-4 w-4 text-primary"}),"Save to Gallery",!x&&xt.jsx(Zm,{className:"h-3 w-3 text-primary"})]})}),xt.jsx(Zb,{children:x?"Save to your vision gallery":"Premium: Save to your vision gallery"})]})}),He&&!Ye&&S&&xt.jsxs(vD,{variant:"outline",size:"sm",className:"gap-2",onClick:S,children:[xt.jsx(Ng,{className:"h-4 w-4"}),"List for Sale"]}),Ye&&xt.jsx(MD,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:"Listed on Marketplace"}),!He&&("marketplace"===a||"shared"===a||"gallery"===a)&&xt.jsx(hJ,{pgn:it,gameData:Le,paletteId:qe,visualizationId:We,isOwner:He,isPremium:x,onClaim:y,onUpgradePrompt:b,compact:!0}),h&&xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(vD,{variant:"outline",size:"sm",className:"gap-2",onClick:lt,children:[xt.jsx(Og,{className:"h-4 w-4"}),"Edit in Creative",!x&&xt.jsx(Zm,{className:"h-3 w-3 text-primary"})]})}),xt.jsx(Zb,{children:x?"Open in Creative Mode studio":"Premium: Edit in Creative Mode"})]})}),m&&xt.jsx(d1,{onShare:m,darkMode:xe,showPieces:pe,pieceOpacity:fe,totalMoves:$e})]}),p&&xt.jsx(GX,{board:De,gameData:Le,totalMoves:$e,darkMode:xe,showPieces:pe,pieceOpacity:fe,onOrderPrint:e=>p("print",e),className:"mt-6"}),xt.jsx("div",{className:"mt-6 p-4 rounded-xl bg-gradient-to-br from-primary/5 via-transparent to-primary/10 border border-primary/20",children:xt.jsxs("div",{className:"flex items-start gap-3",children:[xt.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:xt.jsx(gg,{className:"h-5 w-5 text-primary"})}),xt.jsxs("div",{className:"flex-1 space-y-2",children:[xt.jsx("h4",{className:"font-medium text-foreground",children:"Museum-Quality Chess Art"}),xt.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1.5",children:[xt.jsxs("li",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"}),"Archival canvas prints that last 100+ years"]}),xt.jsxs("li",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"}),"Free US shipping on every order"]}),xt.jsxs("li",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"}),"Handcrafted frames in 5 premium finishes"]}),xt.jsxs("li",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"}),"30-day satisfaction guarantee"]})]})]})]})})]})})}),xt.jsx(XI,{value:"analytics",className:"mt-0",children:xt.jsxs("div",{className:"pb-4",children:[it&&xt.jsx("div",{className:"mb-6",children:xt.jsx(kX,{pgn:it,currentPaletteId:qe,onPaletteSelect:ot,compact:!1})}),W&&xt.jsx("div",{className:"mb-6",children:He?xt.jsx(hH,{royaltyCentsEarned:W.royaltyCentsEarned,royaltyOrdersCount:W.royaltyOrdersCount,totalPrintRevenue:W.printRevenueCents,printOrderCount:W.printOrderCount}):xt.jsx(uH,{isOwner:!1,royaltyCentsEarned:W.royaltyCentsEarned,royaltyOrdersCount:W.royaltyOrdersCount,totalPrintRevenue:W.printRevenueCents,printOrderCount:W.printOrderCount,viewCount:W.viewCount,uniqueViewers:W.uniqueViewers})}),We&&xt.jsx("div",{className:"mb-6",children:xt.jsx(ZH,{visualizationId:We})}),We&&xt.jsxs("div",{className:"mb-4 flex items-center gap-3 p-3 rounded-lg bg-muted/30 border border-border/50",children:[xt.jsx("span",{className:"text-sm text-muted-foreground",children:"Transfer availability:"}),xt.jsx(zY,{visualizationId:We})]}),xt.jsx(c1,{visionScore:W,isLoading:U,gameData:Le,totalMoves:$e,createdAt:l,gameAnalysis:H,pgn:it}),it&&xt.jsx("div",{className:"mt-6",children:xt.jsx(G0,{pgn:it})}),Ye&&xt.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-green-500/10 border border-green-500/30",children:[xt.jsxs(MD,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30 mb-2",children:[xt.jsx(Ng,{className:"h-3 w-3 mr-1"}),"Listed on Marketplace"]}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:"This vision is available for collectors to purchase."})]}),w&&N&&xt.jsx("div",{className:"mt-6 pt-4 border-t border-border/30",children:xt.jsx(vD,{className:"w-full gap-2",size:"lg",onClick:N,disabled:j,children:j?xt.jsx(Pf,{className:"h-5 w-5 animate-spin"}):0===et?xt.jsx(xt.Fragment,{children:"Claim for Free"}):xt.jsxs(xt.Fragment,{children:["Purchase for $",((et||0)/100).toFixed(2)]})})}),He&&!Ye&&S&&xt.jsx("div",{className:"mt-6 pt-4 border-t border-border/30",children:xt.jsxs(vD,{variant:"outline",className:"w-full gap-2",size:"lg",onClick:S,children:[xt.jsx(Ng,{className:"h-5 w-5"}),"List for Sale on Marketplace"]})})]})})]}),xt.jsx($Z,{gameId:(null==(L=null==Y?void 0:Y.matchedGame)?void 0:L.id)||null,gameTitle:null==(F=null==Y?void 0:Y.matchedGame)?void 0:F.title,isOpen:X,onClose:()=>J(!1)})]})]})})},p1=[{square:"e2",piece:"p",isWhite:!0},{square:"e4",piece:"p",isWhite:!0},{square:"e7",piece:"p",isWhite:!1},{square:"e5",piece:"p",isWhite:!1},{square:"g1",piece:"n",isWhite:!0},{square:"f3",piece:"n",isWhite:!0},{square:"b8",piece:"n",isWhite:!1},{square:"c6",piece:"n",isWhite:!1},{square:"f1",piece:"b",isWhite:!0},{square:"b5",piece:"b",isWhite:!0},{square:"a7",piece:"p",isWhite:!1},{square:"a6",piece:"p",isWhite:!1},{square:"b5",piece:"b",isWhite:!0},{square:"a4",piece:"b",isWhite:!0},{square:"g8",piece:"n",isWhite:!1},{square:"f6",piece:"n",isWhite:!1},{square:"e1",piece:"k",isWhite:!0},{square:"g1",piece:"k",isWhite:!0},{square:"f1",piece:"r",isWhite:!0},{square:"d8",piece:"q",isWhite:!1},{square:"e7",piece:"q",isWhite:!1},{square:"d2",piece:"p",isWhite:!0},{square:"d4",piece:"p",isWhite:!0},{square:"c8",piece:"b",isWhite:!1},{square:"g4",piece:"b",isWhite:!1},{square:"c1",piece:"b",isWhite:!0},{square:"e3",piece:"b",isWhite:!0},{square:"h7",piece:"p",isWhite:!1},{square:"h6",piece:"p",isWhite:!1},{square:"d1",piece:"q",isWhite:!0},{square:"d3",piece:"q",isWhite:!0}],m1=({onComplete:e,totalMoves:t=p1.length,signature:n})=>{const[r,a]=ct.useState(0),[i,s]=ct.useState(new Map),[o,l]=ct.useState(!1),c=lU(n),u=ct.useMemo(()=>{const e=r/p1.length;return e<.33?"opening":e<.66?"middle":"ending"},[r]);ct.useEffect(()=>{const t=c.intensity??.5,n=setInterval(()=>{if(r<p1.length){const e=p1[r],{piece:t,isWhite:n}=e,i=n?FF[t]:$F[t];s(n=>{const r=new Map(n),a=r.get(e.square)||[];return r.set(e.square,[...a,{color:i,piece:t}]),r}),a(e=>e+1)}else l(!0),clearInterval(n),setTimeout(()=>null==e?void 0:e(),500)},80*(t>.7?.7:t<.3?1.3:1));return()=>clearInterval(n)},[r,e,c.intensity]);return xt.jsxs("div",{className:"flex flex-col items-center justify-center space-y-8 py-12 animate-fade-in",children:[xt.jsxs("div",{className:"relative",children:[xt.jsx(gD.div,{className:"grid grid-cols-8 gap-0 shadow-2xl rounded-sm overflow-hidden",style:{width:280,height:280},animate:{boxShadow:n?`0 0 ${30*c.intensity}px ${c.dominantColor}40`:"0 0 30px rgba(180, 140, 100, 0.3)"},children:(()=>{const e=[];for(let t=7;t>=0;t--)for(let r=0;r<8;r++){const a=String.fromCharCode(97+r)+(t+1),s=i.get(a)||[],o=(r+t)%2==1,l=r<4?t<4?"q3":"q1":t<4?"q4":"q2",u=c.quadrantWeights[l]??.25;e.push(xt.jsx(gD.div,{className:"relative aspect-square",style:{backgroundColor:o?"#FAFAF9":"#2C2C2C"},animate:{boxShadow:s.length>0&&n?`inset 0 0 ${20*u}px ${c.dominantColor}30`:"none"},children:s.map((e,t)=>xt.jsx(gD.div,{className:"absolute inset-0",initial:{scale:0,opacity:0},animate:{scale:1-.15*t,opacity:.85},transition:{duration:.2,ease:"easeOut"},style:{backgroundColor:e.color,zIndex:t}},`${a}-${t}`))},a))}return e})()}),n&&xt.jsx(gD.div,{className:"absolute -bottom-6 left-0 right-0 h-1 rounded-full overflow-hidden",style:{backgroundColor:`${c.secondaryColor}30`},children:xt.jsx(gD.div,{className:"h-full",style:{backgroundColor:c.dominantColor},animate:{width:r/p1.length*100+"%"}})})]}),xt.jsxs("div",{className:"text-center space-y-3",children:[xt.jsxs("div",{className:"flex items-center justify-center gap-2",children:[xt.jsx(gD.div,{className:"w-2 h-2 rounded-full",style:{backgroundColor:c.dominantColor},animate:{scale:[1,1.2,1],opacity:[1,.7,1]},transition:{duration:1,repeat:1/0}}),xt.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:o?"Finalizing...":`Replaying ${u} phase`}),xt.jsx(gD.div,{className:"w-2 h-2 rounded-full",style:{backgroundColor:c.secondaryColor},animate:{scale:[1,1.2,1],opacity:[1,.7,1]},transition:{duration:1,repeat:1/0,delay:.3}})]}),xt.jsx("div",{className:"w-48 h-1 bg-muted rounded-full overflow-hidden mx-auto",children:xt.jsx(gD.div,{className:"h-full transition-all duration-100 ease-out",style:{width:r/p1.length*100+"%",background:`linear-gradient(90deg, ${c.dominantColor}, ${c.secondaryColor})`}})}),xt.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Move ",Math.min(r,p1.length)," of ",t,n&&xt.jsxs("span",{className:"ml-2 opacity-50",children:[" ",c.archetype]})]})]})]})},f1={hotCold:jU,medieval:_U,egyptian:SU,roman:CU,modern:PU,greyscale:EU,japanese:RU,nordic:OU,artdeco:TU,tropical:MU,cyberpunk:AU,autumn:BU,ocean:DU,desert:IU,cosmic:LU,vintage:FU},g1={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},y1={k:{white:"",black:""},q:{white:"",black:""},r:{white:"",black:""},b:{white:"",black:""},n:{white:"",black:""},p:{white:"",black:""}},v1=()=>{const e=Math.floor(360*Math.random())/360,t=(50+Math.floor(40*Math.random()))/100,n=(35+Math.floor(30*Math.random()))/100,r=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),a=n<.5?n*(1+t):n+t-n*t,i=2*n-a,s=Math.round(255*r(i,a,e+1/3)),o=Math.round(255*r(i,a,e)),l=Math.round(255*r(i,a,e-1/3));return`#${s.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${l.toString(16).padStart(2,"0")}`.toUpperCase()},x1=ct.forwardRef(function({onPaletteChange:e},t){const{user:n}=lP(),[r,a]=ct.useState(BF().id),[i,s]=ct.useState(()=>{const e=IF();return{white:{...e.white},black:{...e.black}}}),[o,l]=ct.useState(!1),[c,u]=ct.useState(""),[d,h]=ct.useState(!1),[p,m]=ct.useState([]),[f,g]=ct.useState([]),[y,v]=ct.useState(!1),x=["k","q","r","b","n","p"];ct.useEffect(()=>{(async()=>{v(!0);try{const{data:e}=await KC.from("saved_palettes").select("id, name, white_colors, black_colors, is_public, user_id").eq("is_public",!0).order("created_at",{ascending:!1}).limit(20);if(g((e||[]).map(e=>({...e,white_colors:e.white_colors,black_colors:e.black_colors}))),n){const{data:e}=await KC.from("saved_palettes").select("id, name, white_colors, black_colors, is_public, user_id").eq("user_id",n.id).order("created_at",{ascending:!1});m((e||[]).map(e=>({...e,white_colors:e.white_colors,black_colors:e.black_colors})))}}catch(e){}finally{v(!1)}})()},[n]);const b=t=>{x.forEach(e=>{DF("w",e,t.white_colors[e]),DF("b",e,t.black_colors[e])}),s({white:t.white_colors,black:t.black_colors}),AF("custom"),a("custom"),null==e||e("custom"),Yy.success(`"${t.name}" loaded!`)},w=ct.useCallback(t=>{if("custom"===t&&"custom"!==r){const e=(()=>{const e={},t={};return["k","q","r","b","n","p"].forEach(n=>{e[n]=v1(),t[n]=v1()}),{white:e,black:t}})();x.forEach(t=>{DF("w",t,e.white[t]),DF("b",t,e.black[t])}),s(e)}AF(t),a(t),null==e||e(t),"custom"!==t&&async function(e){const{data:t}=await KC.from("palette_value_pool").select("total_interactions").eq("palette_id",e).single();t&&await KC.from("palette_value_pool").update({total_interactions:(t.total_interactions||0)+1,last_interaction_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("palette_id",e)}(t).catch(e=>{})},[e,r]),k=ct.useCallback((t,n,a)=>{DF(t,n,a),s(e=>({...e,["w"===t?"white":"black"]:{...e["w"===t?"white":"black"],[n]:a}})),"custom"===r&&(null==e||e("custom"))},[r,e]),N=async()=>{if(n&&c.trim()){h(!0);try{const{error:e}=await KC.from("saved_palettes").insert({user_id:n.id,name:c.trim(),white_colors:i.white,black_colors:i.black});if(e)throw e;Yy.success("Palette saved!",{description:`"${c}" has been saved to your account.`}),l(!1),u("")}catch(e){Yy.error("Failed to save palette")}finally{h(!1)}}},j="custom"===r;return xt.jsxs("div",{ref:t,className:"rounded-lg border border-border/50 bg-card/50 overflow-hidden",children:[xt.jsxs("div",{className:"px-6 py-5 border-b border-border/50 flex items-center justify-between",children:[xt.jsxs("div",{children:[xt.jsxs("h3",{className:"flex items-center gap-2 font-display text-lg font-semibold",children:[xt.jsx($f,{className:"h-5 w-5 text-primary"}),"Color Palette"]}),xt.jsx("p",{className:"text-sm text-muted-foreground mt-1 font-serif",children:"Choose a theme for your visualization"})]}),xt.jsxs(_Q,{children:[xt.jsx(SQ,{asChild:!0,children:xt.jsxs(vD,{variant:"outline",size:"sm",className:"gap-2",disabled:y,children:[y?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):xt.jsx(Dm,{className:"h-4 w-4"}),"Load Saved"]})}),xt.jsxs(OQ,{align:"end",className:"w-64 max-h-80 overflow-y-auto bg-card border-border z-50",children:[n&&p.length>0&&xt.jsxs(xt.Fragment,{children:[xt.jsxs(MQ,{className:"flex items-center gap-2 text-xs",children:[xt.jsx(Pg,{className:"h-3 w-3"}),"My Palettes"]}),p.map(e=>xt.jsx(TQ,{onClick:()=>b(e),className:"cursor-pointer",children:xt.jsxs("div",{className:"flex items-center gap-2 w-full",children:[xt.jsx("div",{className:"flex gap-0.5",children:x.slice(0,3).map(t=>xt.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:e.white_colors[t]}},t))}),xt.jsx("span",{className:"flex-1 truncate",children:e.name}),e.is_public&&xt.jsx(yf,{className:"h-3 w-3 text-muted-foreground"})]})},e.id)),xt.jsx(AQ,{})]}),f.length>0&&xt.jsxs(xt.Fragment,{children:[xt.jsxs(MQ,{className:"flex items-center gap-2 text-xs",children:[xt.jsx(yf,{className:"h-3 w-3"}),"Community Palettes"]}),f.filter(e=>!n||e.user_id!==n.id).slice(0,10).map(e=>xt.jsx(TQ,{onClick:()=>b(e),className:"cursor-pointer",children:xt.jsxs("div",{className:"flex items-center gap-2 w-full",children:[xt.jsx("div",{className:"flex gap-0.5",children:x.slice(0,3).map(t=>xt.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:e.white_colors[t]}},t))}),xt.jsx("span",{className:"flex-1 truncate",children:e.name})]})},e.id))]}),0===p.length&&0===f.length&&xt.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted-foreground",children:"No saved palettes yet"})]})]})]}),xt.jsxs("div",{className:"p-5 space-y-5",children:[xt.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 scrollbar-hide snap-x snap-mandatory sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:overflow-visible sm:pb-0",children:TF.map(e=>{const t=e.id===r,n="custom"===e.id,a=n?i:{white:e.white,black:e.black},s=f1[e.id];return xt.jsxs("button",{onClick:()=>w(e.id),className:"relative text-left p-4 rounded-lg border transition-all duration-300 overflow-hidden min-w-[280px] sm:min-w-0 snap-start "+(t?"border-primary glow-gold":"border-border/50 hover:border-primary/30"),children:[s&&xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-15 pointer-events-none",style:{backgroundImage:`url(${s})`}}),xt.jsx("div",{className:"absolute inset-0 pointer-events-none "+(t?"bg-primary/10":"bg-card/80")}),xt.jsxs("div",{className:"relative z-10",children:[xt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[n&&xt.jsx(Vf,{className:"h-3.5 w-3.5 text-primary"}),xt.jsxs("div",{children:[xt.jsx("h4",{className:"font-display font-semibold text-sm",children:e.name}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 font-serif",children:e.description})]})]}),t&&xt.jsx("div",{className:"w-5 h-5 rounded-full bg-primary flex items-center justify-center flex-shrink-0",children:xt.jsx(Bm,{className:"h-3 w-3 text-primary-foreground"})})]}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("span",{className:"text-[10px] text-muted-foreground w-8 flex-shrink-0",children:"White"}),xt.jsx("div",{className:"flex gap-1 flex-1",children:x.map(e=>xt.jsx("div",{className:"w-5 h-5 rounded-sm shadow-sm ring-1 ring-black/10",style:{backgroundColor:a.white[e]},title:`White ${e.toUpperCase()}`},`w-${e}`))})]}),xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("span",{className:"text-[10px] text-muted-foreground w-8 flex-shrink-0",children:"Black"}),xt.jsx("div",{className:"flex gap-1 flex-1",children:x.map(e=>xt.jsx("div",{className:"w-5 h-5 rounded-sm shadow-sm ring-1 ring-black/10",style:{backgroundColor:a.black[e]},title:`Black ${e.toUpperCase()}`},`b-${e}`))})]})]}),xt.jsx("div",{className:"flex items-center gap-1 mt-1.5 ml-8",children:["K","Q","R","B","N","P"].map(e=>xt.jsx("span",{className:"w-5 text-center text-[8px] text-muted-foreground/60",children:e},e))})]})]},e.id)})}),j&&xt.jsxs("div",{className:"border border-primary/30 rounded-lg p-5 bg-primary/5 animate-fade-in",children:[xt.jsxs("h4",{className:"font-display font-semibold text-sm mb-4 flex items-center gap-2",children:[xt.jsx(Vf,{className:"h-4 w-4 text-primary"}),"Customize Your Colors"]}),xt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[xt.jsxs("div",{className:"space-y-3",children:[xt.jsx("h5",{className:"text-xs uppercase tracking-wider text-muted-foreground font-medium",children:"White Pieces"}),xt.jsx("div",{className:"space-y-2",children:x.map(e=>xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsx("span",{className:"text-xl w-6",children:y1[e].white}),xt.jsx("span",{className:"text-sm text-muted-foreground w-16",children:g1[e]}),xt.jsxs("label",{className:"relative cursor-pointer group",children:[xt.jsx("input",{type:"color",value:i.white[e],onChange:t=>k("w",e,t.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"}),xt.jsx("div",{className:"w-8 h-8 rounded-md shadow-sm ring-1 ring-black/10 group-hover:ring-primary/50 transition-all",style:{backgroundColor:i.white[e]}})]}),xt.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:i.white[e]})]},`custom-w-${e}`))})]}),xt.jsxs("div",{className:"space-y-3",children:[xt.jsx("h5",{className:"text-xs uppercase tracking-wider text-muted-foreground font-medium",children:"Black Pieces"}),xt.jsx("div",{className:"space-y-2",children:x.map(e=>xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsx("span",{className:"text-xl w-6",children:y1[e].black}),xt.jsx("span",{className:"text-sm text-muted-foreground w-16",children:g1[e]}),xt.jsxs("label",{className:"relative cursor-pointer group",children:[xt.jsx("input",{type:"color",value:i.black[e],onChange:t=>k("b",e,t.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"}),xt.jsx("div",{className:"w-8 h-8 rounded-md shadow-sm ring-1 ring-black/10 group-hover:ring-primary/50 transition-all",style:{backgroundColor:i.black[e]}})]}),xt.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:i.black[e]})]},`custom-b-${e}`))})]})]}),n&&xt.jsx("div",{className:"mt-6 pt-4 border-t border-primary/20",children:xt.jsxs(vD,{onClick:()=>l(!0),className:"w-full gap-2",variant:"outline",children:[xt.jsx(eg,{className:"h-4 w-4"}),"Save This Palette"]})}),!n&&xt.jsx("p",{className:"mt-4 text-xs text-center text-muted-foreground",children:"Sign in to save your custom palettes"})]})]}),xt.jsx(EZ,{open:o,onOpenChange:l,children:xt.jsxs(MZ,{children:[xt.jsxs(AZ,{children:[xt.jsx(DZ,{className:"font-display",children:"Save Custom Palette"}),xt.jsx(IZ,{children:"Give your palette a name to save it to your account."})]}),xt.jsxs("div",{className:"space-y-4 pt-2",children:[xt.jsx(EF,{placeholder:"My Awesome Palette",value:c,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&c.trim()&&N()}}),xt.jsx("div",{className:"flex items-center gap-2 justify-center p-3 rounded-lg bg-muted/50",children:x.map(e=>xt.jsxs("div",{className:"flex flex-col gap-1",children:[xt.jsx("div",{className:"w-6 h-6 rounded-sm ring-1 ring-black/10",style:{backgroundColor:i.white[e]}}),xt.jsx("div",{className:"w-6 h-6 rounded-sm ring-1 ring-black/10",style:{backgroundColor:i.black[e]}})]},`preview-${e}`))}),xt.jsxs(vD,{onClick:N,disabled:!c.trim()||d,className:"w-full gap-2",children:[d?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):xt.jsx(eg,{className:"h-4 w-4"}),"Save Palette"]})]})]})})]})});x1.displayName="PaletteSelector";const b1=["","","","","","","","","","","",""],w1=({signature:e,particleCount:t=12})=>{const n=lU(e),r=ct.useMemo(()=>{const e=function(e,t){const n=[],r=[{weight:e.q1,xRange:[0,50],yRange:[0,50]},{weight:e.q2,xRange:[50,100],yRange:[0,50]},{weight:e.q3,xRange:[0,50],yRange:[50,100]},{weight:e.q4,xRange:[50,100],yRange:[50,100]}],a=r.reduce((e,t)=>e+t.weight,0);return r.forEach(e=>{const r=Math.round(e.weight/a*t);for(let t=0;t<r;t++)n.push({x:e.xRange[0]+Math.random()*(e.xRange[1]-e.xRange[0]),y:e.yRange[0]+Math.random()*(e.yRange[1]-e.yRange[0]),weight:e.weight})}),n}(n.quadrantWeights,t);return e.map((e,t)=>{const r=cU(n.flowDirection,n.momentum),a=Math.random()>.6;return{id:t,piece:b1[Math.floor(Math.random()*b1.length)],left:e.x,top:e.y,delay:8*Math.random(),duration:r.duration,size:16+24*Math.random()*(1+e.weight),opacity:.03+.08*e.weight*n.intensity,color:a?n.secondaryColor:n.dominantColor,flowAnimation:r}})},[n,t]);return xt.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[r.map(e=>xt.jsx(gD.div,{className:"absolute",style:{left:`${e.left}%`,top:`${e.top}%`,fontSize:`${e.size}px`,opacity:e.opacity,color:e.color,textShadow:`0 0 ${10*n.intensity}px ${e.color}40`},initial:{y:0,x:0},animate:{y:e.flowAnimation.y,x:e.flowAnimation.x,opacity:[e.opacity,1.5*e.opacity,e.opacity]},transition:{duration:e.duration,delay:e.delay,repeat:1/0,ease:"easeInOut"},children:e.piece},e.id)),e?xt.jsx(gD.div,{className:"absolute bottom-2 right-2 text-xs font-mono opacity-20",style:{color:n.dominantColor},initial:{opacity:0},animate:{opacity:.2},children:n.archetype}):null]})},k1=["","","","","","","","","","","",""],N1={gold:["rgba(212, 175, 55,","rgba(255, 215, 0,","rgba(218, 165, 32,","rgba(184, 134, 11,"],silver:["rgba(192, 192, 192,","rgba(169, 169, 169,","rgba(211, 211, 211,","rgba(220, 220, 220,"]},j1=()=>{const[e,t]=ct.useState(()=>"undefined"!=typeof window&&window.innerWidth<768);ct.useEffect(()=>{const e=()=>t(window.innerWidth<768);return window.addEventListener("resize",e,{passive:!0}),()=>window.removeEventListener("resize",e)},[]);const n=e?6:12,r=ct.useMemo(()=>Array.from({length:n},(t,n)=>{const r=Math.random();return{id:n,piece:k1[Math.floor(Math.random()*k1.length)],x:120*Math.random()-10,y:15+70*Math.random(),depth:r,size:e?12+16*r:14+22*r,color:Math.random()>.5?"gold":"silver",trails:[],phase:Math.random()*Math.PI*2,speed:e?.06+.12*r:.08+.18*r}}),[n,e]),[a,i]=ct.useState(r);return ct.useEffect(()=>{i(r)},[r]),ct.useEffect(()=>{let e,t=0;const n=r=>{r-t>=80&&(t=r,i(e=>e.map(e=>{const t=e.phase+.015*(.5+e.depth),n=Math.sin(t)*(.15+.1*e.depth),r=.04*Math.cos(.5*t);let a=e.x+e.speed+n,i=e.y+r;a>115&&(a=-15),i=Math.max(12,Math.min(88,i));const s=[{x:e.x,y:e.y,opacity:.15+.05*e.depth,colorIdx:Math.floor(4*Math.random())},...e.trails.map(e=>({...e,opacity:.78*e.opacity}))].filter(e=>e.opacity>.01).slice(0,5);return{...e,x:a,y:i,phase:t,trails:s}}))),e=requestAnimationFrame(n)};return e=requestAnimationFrame(n),()=>cancelAnimationFrame(e)},[]),xt.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:a.map(e=>{const t=N1[e.color],n=.12+.12*e.depth;return xt.jsxs(ut.Fragment,{children:[e.trails.map((n,r)=>xt.jsx("span",{style:{position:"absolute",left:`${n.x}%`,top:`${n.y}%`,fontSize:e.size,color:`${t[n.colorIdx]}${.4*n.opacity})`,textShadow:`0 0 ${6+8*e.depth}px ${t[n.colorIdx]}${.25*n.opacity})`,transform:"translate(-50%, -50%)",filter:`blur(${1.2-3*n.opacity}px)`,zIndex:Math.floor(10*e.depth)},children:e.piece},`t-${e.id}-${r}`)),xt.jsx("span",{style:{position:"absolute",left:`${e.x}%`,top:`${e.y}%`,fontSize:e.size,color:`${t[0]}${n})`,textShadow:`0 0 ${10+10*e.depth}px ${t[0]}${.6*n})`,transform:"translate3d(-50%, -50%, 0)",filter:`drop-shadow(0 0 ${4+6*e.depth}px ${t[0]}0.3))`,zIndex:Math.floor(10*e.depth)+1,willChange:"left, top",backfaceVisibility:"hidden"},children:e.piece})]},e.id)})})},_1=ct.forwardRef(function(e,t){const{isPremium:n}=lP(),[r,a]=ct.useState(null),[i,s]=ct.useState(!0),o={visualizations:847,creators:234,views:12500,downloads:1850,trades:127,printOrders:89,printRevenue:445e3,defaultTopGames:[{gameId:"immortal-game",favoriteCount:127},{gameId:"opera-game",favoriteCount:98},{gameId:"game-of-century",favoriteCount:86}]};ct.useEffect(()=>{(async()=>{var e,t;try{const[n,r,i,s,l]=await Promise.all([KC.from("saved_visualizations").select("id, user_id",{count:"exact"}),KC.from("favorite_games").select("id, game_id",{count:"exact"}),ZU(),YU(3),eK(150)]),c=new Set((null==(e=n.data)?void 0:e.map(e=>e.user_id))||[]).size,u=n.count||0,d={};null==(t=r.data)||t.forEach(e=>{d[e.game_id]=(d[e.game_id]||0)+1});const h=Object.entries(d).map(([e,t])=>({gameId:e,favoriteCount:t})).sort((e,t)=>t.favoriteCount-e.favoriteCount).slice(0,3);a({totalVisualizations:o.visualizations+u,totalCreators:o.creators+c,topGames:h.length>0?h:o.defaultTopGames,topVisions:s,recentGrowth:"+18%",platformStats:{totalViews:o.views+i.totalViews,totalDownloads:o.downloads+i.totalDownloads,totalTrades:o.trades+i.totalTrades,totalPrintOrders:o.printOrders+i.totalPrintOrders,totalPrintRevenue:o.printRevenue+i.totalPrintRevenue,totalScore:i.totalScore},marketCap:{totalMarketCap:l.totalMarketCap+2500,membershipMultiplier:l.membershipMultiplier,totalVisions:l.totalVisions+o.visualizations}})}catch(n){a({totalVisualizations:o.visualizations,totalCreators:o.creators,topGames:o.defaultTopGames,topVisions:[],recentGrowth:"+18%",platformStats:{totalViews:o.views,totalDownloads:o.downloads,totalTrades:o.trades,totalPrintOrders:o.printOrders,totalPrintRevenue:o.printRevenue,totalScore:0},marketCap:{totalMarketCap:KU.baseMarketCap+2500,membershipMultiplier:1,totalVisions:o.visualizations}})}finally{s(!1)}})()},[]);return xt.jsx("section",{ref:t,className:"py-12",children:xt.jsx("div",{className:"container mx-auto px-4",children:xt.jsx("div",{className:"max-w-5xl mx-auto",children:xt.jsxs(gD.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"rounded-2xl border border-border/50 bg-gradient-to-br from-card/80 via-card/60 to-primary/5 overflow-hidden",children:[xt.jsxs("div",{className:"p-6 border-b border-border/30 flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:xt.jsx(Mm,{className:"h-5 w-5 text-primary"})}),xt.jsxs("div",{children:[xt.jsx("h3",{className:"font-display font-bold uppercase tracking-wide text-lg",children:"Vision NFT Insights"}),xt.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Real-time platform & asset analytics"})]})]}),xt.jsxs(qN,{to:"/analytics",className:"inline-flex items-center gap-1 text-xs font-display uppercase tracking-wider text-primary hover:text-primary/80 transition-colors",children:["View All",xt.jsx(Lm,{className:"h-3 w-3"})]})]}),xt.jsx("div",{className:"p-6",children:xt.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[xt.jsxs("div",{className:"space-y-4",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(Jm,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Vision Market"})]}),xt.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-primary/20 via-primary/10 to-transparent border border-primary/30 relative overflow-hidden",children:[xt.jsx(gD.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear"}}),xt.jsxs("div",{className:"relative",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[xt.jsx(gg,{className:"h-3.5 w-3.5 text-primary"}),xt.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wide",children:"Total Market Cap"})]}),xt.jsx("p",{className:"text-2xl font-display font-bold text-primary",children:i?"...":`$${((null==r?void 0:r.marketCap.totalMarketCap)||0).toLocaleString()}`}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i?"...":`${(null==r?void 0:r.marketCap.totalVisions)||0} visions  ${null==r?void 0:r.marketCap.membershipMultiplier}x multiplier`})]})]}),xt.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[xt.jsxs("div",{className:"p-3 rounded-lg bg-card/50 border border-border/30",children:[xt.jsx("div",{className:"flex items-center gap-2 mb-1",children:xt.jsx(rf,{className:"h-3.5 w-3.5 text-primary/70"})}),xt.jsx("p",{className:"text-xl font-display font-bold",children:i?"...":(null==r?void 0:r.platformStats.totalViews.toLocaleString())||0}),xt.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wide",children:"Total Views"})]}),xt.jsxs("div",{className:"p-3 rounded-lg bg-card/50 border border-border/30",children:[xt.jsx("div",{className:"flex items-center gap-2 mb-1",children:xt.jsx(km,{className:"h-3.5 w-3.5 text-primary/70"})}),xt.jsx("p",{className:"text-xl font-display font-bold",children:i?"...":(null==r?void 0:r.platformStats.totalTrades)||0}),xt.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wide",children:"Trades"})]})]})]}),xt.jsxs("div",{className:"space-y-3",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(uf,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Trending Games"})]}),(null==r?void 0:r.topGames)&&r.topGames.length>0?r.topGames.map((e,t)=>{return xt.jsxs(gD.div,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-3 p-3 rounded-lg bg-card/30 border border-border/20 hover:border-primary/30 transition-colors",children:[xt.jsx("span",{className:"w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center text-xs font-display text-primary",children:t+1}),xt.jsx("span",{className:"flex-1 text-sm font-serif truncate",children:(n=e.gameId,n.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "))}),xt.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[xt.jsx(bf,{className:"h-3 w-3"}),xt.jsx("span",{className:"text-xs",children:e.favoriteCount})]})]},e.gameId);var n}):xt.jsx("div",{className:"p-4 rounded-lg bg-card/30 border border-border/20 text-center",children:xt.jsx("p",{className:"text-sm text-muted-foreground font-serif italic",children:"Be the first to favorite a game!"})})]}),xt.jsx("div",{className:"relative",children:xt.jsxs("div",{className:"space-y-3",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(yg,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Top Visions"})]}),xt.jsxs("div",{className:"relative",children:[xt.jsx("div",{className:"space-y-3 "+(n?"":"blur-sm"),children:(null==r?void 0:r.topVisions)&&r.topVisions.length>0?r.topVisions.map((e,t)=>xt.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-primary/5 border border-primary/20",children:[xt.jsx("span",{className:"w-6 h-6 rounded-full bg-primary/30 flex items-center justify-center text-xs font-display text-primary font-bold",children:t+1}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsx("p",{className:"text-sm font-display truncate",children:e.title}),xt.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.totalScore.toFixed(1)," pts"]})]})]},e.visualizationId)):xt.jsxs(xt.Fragment,{children:[xt.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-primary/5 border border-primary/20",children:[xt.jsx(Ng,{className:"h-4 w-4 text-primary"}),xt.jsxs("div",{className:"flex-1",children:[xt.jsx("p",{className:"text-sm font-display",children:"Platform Growth"}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% this week"})]})]}),xt.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-primary/5 border border-primary/20",children:[xt.jsx(Zm,{className:"h-4 w-4 text-primary"}),xt.jsxs("div",{className:"flex-1",children:[xt.jsx("p",{className:"text-sm font-display",children:"Your Portfolio"}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"View your rank"})]})]})]})}),!n&&xt.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:xt.jsxs(qN,{to:"/analytics",className:"flex flex-col items-center gap-2 p-4 rounded-lg bg-background/90 border border-primary/30 hover:border-primary/50 transition-colors",children:[xt.jsx(Rf,{className:"h-5 w-5 text-primary"}),xt.jsx("span",{className:"text-xs font-display uppercase tracking-wider text-primary",children:"Unlock Vision Analytics"})]})})]})]})})]})})]})})})})});_1.displayName="TrendingWidget";const S1=ct.forwardRef(function(e,t){const{isPremium:n,isAdmin:r}=lP(),[a,i]=ct.useState([]),[s,o]=ct.useState([]),[l,c]=ct.useState(0),[u,d]=ct.useState(!0),[h,p]=ct.useState(new Date);ct.useEffect(()=>{const e=async()=>{try{const[e,t,n]=await Promise.all([KC.from("palette_value_pool").select("*").order("earned_value_cents",{ascending:!1}).limit(3),KC.from("gamecard_value_pool").select("*").order("earned_value_cents",{ascending:!1}).limit(3),KC.from("financial_trends").select("*").order("date",{ascending:!1}).limit(1)]),r=(e.data||[]).map(e=>({id:e.id,name:e.palette_name,totalValue:(e.base_value_cents+e.earned_value_cents)/100,change24h:10*Math.random()-2,type:"palette"})),a=(t.data||[]).map(e=>({id:e.id,name:e.game_title.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),totalValue:(e.base_value_cents+e.earned_value_cents)/100,change24h:15*Math.random()-3,type:"gamecard"}));i([...r.slice(0,2),...a.slice(0,2)]);const s=(e.data||[]).reduce((e,t)=>e+t.base_value_cents+t.earned_value_cents,0),l=(t.data||[]).reduce((e,t)=>e+t.base_value_cents+t.earned_value_cents,0);c((s+l)/100),o([{id:"1",type:"print",description:"Print order completed",value:49.99,timestamp:new Date(Date.now()-12e4)},{id:"2",type:"trade",description:"Vision traded",value:125,timestamp:new Date(Date.now()-3e5)},{id:"3",type:"listing",description:"New marketplace listing",timestamp:new Date(Date.now()-6e5)}]),p(new Date)}catch(e){}finally{d(!1)}};e();const t=KC.channel("market-updates").on("postgres_changes",{event:"*",schema:"public",table:"visualization_listings"},e=>{const t={id:crypto.randomUUID(),type:e.new&&"sold"===e.new.status?"sale":"listing",description:e.new&&"sold"===e.new.status?"Vision sold!":"New listing added",value:e.new?(e.new.price_cents||0)/100:void 0,timestamp:new Date};o(e=>[t,...e].slice(0,5)),p(new Date)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"order_financials"},e=>{const t={id:crypto.randomUUID(),type:"print",description:`${e.new.order_type||"Order"} completed`,value:(e.new.gross_revenue_cents||0)/100,timestamp:new Date};o(e=>[t,...e].slice(0,5)),p(new Date)}).subscribe(),n=setInterval(e,3e4);return()=>{KC.removeChannel(t),clearInterval(n)}},[]);const m=e=>{const t=Math.floor((Date.now()-e.getTime())/1e3);return t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:`${Math.floor(t/3600)}h ago`},f=e=>{switch(e){case"sale":return xt.jsx(Jm,{className:"h-3 w-3 text-green-500"});case"print":return xt.jsx(gg,{className:"h-3 w-3 text-primary"});case"trade":return xt.jsx(Ng,{className:"h-3 w-3 text-blue-500"});case"listing":return xt.jsx(xm,{className:"h-3 w-3 text-amber-500"})}};return xt.jsx("section",{ref:t,className:"py-8",children:xt.jsx("div",{className:"container mx-auto px-4",children:xt.jsx("div",{className:"max-w-5xl mx-auto",children:xt.jsxs(gD.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"rounded-2xl border border-primary/20 bg-gradient-to-br from-card/90 via-card/70 to-primary/5 overflow-hidden backdrop-blur-sm",children:[xt.jsxs("div",{className:"p-4 md:p-6 border-b border-border/30 flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsxs("div",{className:"relative",children:[xt.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-amber-500/20 flex items-center justify-center",children:xt.jsx(xm,{className:"h-5 w-5 text-primary"})}),xt.jsxs("span",{className:"absolute -top-0.5 -right-0.5 flex h-3 w-3",children:[xt.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),xt.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]}),xt.jsxs("div",{children:[xt.jsxs("h3",{className:"font-display font-bold uppercase tracking-wide text-sm md:text-lg flex items-center gap-2",children:["Live Market Activity",xt.jsx("span",{className:"text-[10px] font-normal text-green-500 bg-green-500/10 px-2 py-0.5 rounded-full",children:"LIVE"})]}),xt.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground font-serif",children:"Value pools & real-time transactions"})]})]}),r&&xt.jsxs(qN,{to:"/admin/economics",className:"inline-flex items-center gap-1 text-xs font-display uppercase tracking-wider text-primary hover:text-primary/80 transition-colors",children:["CEO Dashboard",xt.jsx(Lm,{className:"h-3 w-3"})]})]}),xt.jsxs("div",{className:"p-4 md:p-6",children:[xt.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[xt.jsx("div",{className:"md:col-span-1",children:xt.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-br from-primary/15 via-primary/10 to-transparent border border-primary/30 relative overflow-hidden h-full",children:[xt.jsx(gD.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:4,repeat:1/0,ease:"linear"}}),xt.jsxs("div",{className:"relative",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(Jm,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Total Value Pools"})]}),xt.jsx("p",{className:"text-2xl md:text-3xl font-display font-bold text-primary mb-1",children:u?"...":`$${l.toLocaleString()}`}),xt.jsxs("p",{className:"text-xs text-green-500 flex items-center gap-1",children:[xt.jsx(jm,{className:"h-3 w-3"}),"Growing with every order"]}),xt.jsxs("p",{className:"text-[10px] text-muted-foreground mt-2",children:["Updated ",m(h)]})]})]})}),xt.jsxs("div",{className:"md:col-span-1 space-y-3",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx($f,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Top Value Pools"})]}),u?xt.jsx("div",{className:"space-y-2",children:[1,2,3].map(e=>xt.jsx("div",{className:"h-12 rounded-lg bg-card/50 animate-pulse"},e))}):xt.jsx("div",{className:"space-y-2",children:a.map((e,t)=>xt.jsxs(gD.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-3 p-2 rounded-lg bg-card/40 border border-border/30 hover:border-primary/30 transition-colors",children:[xt.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center "+("palette"===e.type?"bg-amber-500/20 text-amber-500":"bg-blue-500/20 text-blue-500"),children:"palette"===e.type?xt.jsx($f,{className:"h-3 w-3"}):xt.jsx(hf,{className:"h-3 w-3"})}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsx("p",{className:"text-xs font-medium truncate",children:e.name}),xt.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["$",e.totalValue.toFixed(0)]})]}),xt.jsxs("div",{className:"text-xs flex items-center gap-0.5 "+(e.change24h>=0?"text-green-500":"text-red-500"),children:[e.change24h>=0?xt.jsx(jm,{className:"h-3 w-3"}):xt.jsx(bm,{className:"h-3 w-3"}),Math.abs(e.change24h).toFixed(1),"%"]})]},e.id))})]}),xt.jsxs("div",{className:"md:col-span-1 space-y-3",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[xt.jsx(xm,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Recent Activity"})]}),xt.jsx("div",{className:"space-y-2 max-h-[150px] overflow-y-auto",children:s.map(e=>xt.jsxs(gD.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-2 rounded-lg bg-card/30 border border-border/20",children:[f(e.type),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsx("p",{className:"text-xs truncate",children:e.description}),e.value&&xt.jsxs("p",{className:"text-[10px] text-primary font-medium",children:["$",e.value.toFixed(2)]})]}),xt.jsx("span",{className:"text-[10px] text-muted-foreground whitespace-nowrap",children:m(e.timestamp)})]},e.id))})]})]}),xt.jsxs("div",{className:"mt-4 pt-4 border-t border-border/20 flex items-center justify-between",children:[xt.jsxs("p",{className:"text-[10px] text-muted-foreground flex items-center gap-1",children:[xt.jsx(Zm,{className:"h-3 w-3 text-primary"}),"20% of every sale grows these pools  Full transparency on"," ",xt.jsx(qN,{to:"/admin/economics",className:"text-primary hover:underline",children:"economics page"})]}),n&&xt.jsxs(qN,{to:"/premium-analytics",className:"text-[10px] text-primary hover:underline flex items-center gap-1",children:["Detailed Analytics ",xt.jsx(Lm,{className:"h-3 w-3"})]})]})]})]})})})})});function C1(e={}){const{threshold:t=.1,rootMargin:n="0px 0px -50px 0px",triggerOnce:r=!0}=e,a=ct.useRef(null),[i,s]=ct.useState(!1);return ct.useEffect(()=>{const e=a.current;if(!e)return;const i=new IntersectionObserver(([t])=>{t.isIntersecting?(s(!0),r&&i.unobserve(e)):r||s(!1)},{threshold:t,rootMargin:n});return i.observe(e),()=>i.disconnect()},[t,n,r]),[a,i]}S1.displayName="LiveMarketWidget";const P1={hidden:"opacity-0 translate-y-8",visible:"opacity-100 translate-y-0"},E1={hidden:"opacity-0 scale-95",visible:"opacity-100 scale-100"};function R1(e,t,n){const r=TF.find(e=>e.id===n)||TF[0];return("w"===t?r.white:r.black)[e]}const O1=({pgn:e,paletteId:t,size:n=200,className:r=""})=>{const{board:a,boardElements:i}=ct.useMemo(()=>{const r=j$(e),a=n/8,i=.02*n,s=[...Array(8)].map((e,n)=>{const s=7-n;return[...Array(8)].map((e,o)=>{const l=r.board[s][o],c=l.isLight?qF.light:qF.dark,u=i+o*a,d=i+n*a;return((e,t,n,r,a,i)=>{const s=[],o=.08*r;if(s.push(xt.jsx("rect",{x:t,y:n,width:r,height:r,fill:a},`base-${t}-${n}`)),0===e.length)return s;const l=[];for(const p of e){const e=R1(p.piece,p.color,i);l.includes(e)||l.push(e)}const c=Math.min(l.length,6),u=[];let d=r-2*o;const h=.7*d/c;for(let p=0;p<c&&(u.push({color:l[p],layerSize:d}),d-=h,!(d<.1*r));p++);for(let p=0;p<u.length;p++){const e=u[p],a=(r-e.layerSize)/2;s.push(xt.jsx("rect",{x:t+a,y:n+a,width:e.layerSize,height:e.layerSize,fill:e.color},`layer-${t}-${n}-${p}`))}return s})(l.visits,u,d,a,c,t)})});return{board:r.board,boardElements:s}},[e,t,n]),s=n+2*(.02*n);return xt.jsxs("svg",{width:s,height:s,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",className:r,style:{display:"block"},children:[xt.jsx("rect",{x:0,y:0,width:s,height:s,fill:qF.border}),i]})},T1="/assets/chess-king-art-BlC3qeIJ.jpg",M1="/assets/chess-movement-art-BO2PEHzn.jpg",A1=[{id:"cosmic-masterpiece",title:"Cosmic Dreams",description:"Deep space aesthetics",paletteId:"cosmic",gameId:"kasparov-topalov-1999",backgroundArt:LU,accentColor:"from-purple-500/20 to-blue-500/20"},{id:"medieval-kingdom",title:"Medieval Kingdom",description:"Royal court elegance",paletteId:"medieval",gameId:"morphy-opera-1858",backgroundArt:_U,accentColor:"from-amber-500/20 to-stone-500/20"},{id:"japanese-zen",title:"Japanese Zen",description:"Tranquil minimalism",paletteId:"japanese",gameId:"anderssen-kieseritzky-1851",backgroundArt:T1,accentColor:"from-red-500/20 to-rose-500/20"},{id:"art-deco-glory",title:"Art Deco Glory",description:"Gatsby-era opulence",paletteId:"artdeco",gameId:"byrne-fischer-1956",backgroundArt:M1,accentColor:"from-yellow-500/20 to-amber-500/20"}],B1=({design:e,index:t})=>{const n=eL.find(t=>t.id===e.gameId),r=(null==n?void 0:n.pgn)||eL[0].pgn;return xt.jsx(gD.div,{initial:{opacity:0,y:20,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0},transition:{delay:.1*t,duration:.5},className:"group",children:xt.jsxs("div",{className:"relative p-3 rounded-xl bg-card/80 backdrop-blur-sm border border-border/50 hover:border-primary/50 transition-all duration-500 hover:shadow-xl hover:shadow-primary/10 overflow-hidden",children:[xt.jsx("div",{className:"absolute inset-0 opacity-15 pointer-events-none",children:xt.jsx("img",{src:e.backgroundArt,alt:"",className:"w-full h-full object-cover"})}),xt.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${e.accentColor} opacity-0 group-hover:opacity-100 transition-opacity duration-500`}),xt.jsxs("div",{className:"relative mb-3 rounded-lg overflow-hidden border-2 border-amber-900/30 group-hover:border-primary/40 shadow-lg transition-all duration-300",children:[xt.jsxs("div",{className:"aspect-square relative",children:[xt.jsx(O1,{pgn:r,paletteId:e.paletteId,size:200,className:"w-full h-full transition-transform duration-700 group-hover:scale-110"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),xt.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:xt.jsxs("div",{className:"bg-background/95 backdrop-blur-sm px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider flex items-center gap-2 shadow-lg transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300",children:[xt.jsx($f,{className:"h-3 w-3 text-primary"}),"Create This"]})})]}),xt.jsxs("div",{className:"relative z-10",children:[xt.jsx("h4",{className:"font-display font-bold text-sm uppercase tracking-wide text-center group-hover:text-primary transition-colors",children:e.title}),xt.jsx("p",{className:"text-xs text-muted-foreground text-center font-serif mt-1",children:e.description})]})]})})},D1=()=>{const[e,t]=C1();return xt.jsxs("section",{className:"py-20 relative overflow-hidden",children:[xt.jsx("div",{className:"absolute -left-20 top-1/4 w-80 h-80 opacity-10 blur-sm pointer-events-none",children:xt.jsx("img",{src:T1,alt:"",className:"w-full h-full object-cover rounded-full"})}),xt.jsx("div",{className:"absolute -right-20 bottom-1/4 w-72 h-72 opacity-10 blur-sm pointer-events-none",children:xt.jsx("img",{src:M1,alt:"",className:"w-full h-full object-cover rounded-full"})}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-primary/5 to-transparent pointer-events-none"}),xt.jsx("div",{className:"absolute top-10 left-1/4 w-2 h-2 bg-primary/30 rounded-full animate-pulse"}),xt.jsx("div",{className:"absolute bottom-20 right-1/3 w-3 h-3 bg-gold/30 rounded-full animate-pulse",style:{animationDelay:"1s"}}),xt.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 bg-primary/40 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),xt.jsx("div",{className:"container mx-auto px-4 relative",children:xt.jsxs("div",{className:"max-w-5xl mx-auto",children:[xt.jsxs("div",{ref:e,className:`text-center space-y-4 mb-14 transition-all duration-700 ease-out ${t?P1.visible:P1.hidden}`,children:[xt.jsxs(gD.div,{initial:{scale:.9,opacity:0},whileInView:{scale:1,opacity:1},viewport:{once:!0},className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-primary/20 via-primary/10 to-primary/20 border border-primary/30 text-primary text-xs font-display uppercase tracking-widest shadow-lg shadow-primary/10",children:[xt.jsx(Ff,{className:"h-3.5 w-3.5"}),"New Feature",xt.jsx(gg,{className:"h-3 w-3"})]}),xt.jsxs("h3",{className:"text-3xl md:text-4xl font-royal font-bold uppercase tracking-wide",children:["Creative ",xt.jsx("span",{className:"text-gold-gradient",children:"Mode"})]}),xt.jsx("p",{className:"text-muted-foreground font-serif max-w-2xl mx-auto text-base leading-relaxed",children:"Design custom chess positions and color schemes. Place any piece anywhere and create unique artwork that's truly yours  powered by your imagination."})]}),xt.jsx("div",{className:"flex gap-4 md:gap-6 overflow-x-auto pb-4 scrollbar-hide snap-x snap-mandatory md:grid md:grid-cols-4 md:overflow-visible md:pb-0 mb-12",children:A1.map((e,t)=>xt.jsx(qN,{to:"/creative-mode",className:"min-w-[180px] md:min-w-0 snap-start",children:xt.jsx(B1,{design:e,index:t})},e.id))}),xt.jsxs(gD.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4},className:"text-center",children:[xt.jsx(qN,{to:"/creative-mode",children:xt.jsxs(vD,{size:"lg",className:"gap-2 group px-8 py-6 text-base shadow-lg shadow-primary/20 hover:shadow-xl hover:shadow-primary/30 transition-all duration-300",children:[xt.jsx(Ff,{className:"h-5 w-5"}),"Enter Creative Mode",xt.jsx(Nm,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]})}),xt.jsxs("div",{className:"mt-5 flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[xt.jsx(Zm,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"font-serif",children:"Premium feature  Try it free for preview"})]})]})]})})]})};function I1(e){return{file:e.charCodeAt(0)-"a".charCodeAt(0),rank:parseInt(e[1])-1}}function L1(e,t,n){const r=[],a=I1(e),i=I1(t),s=Math.sign(i.file-a.file),o=Math.sign(i.rank-a.rank);if("n"===n.toLowerCase())return r.push(t),r;let l=a.file+s,c=a.rank+o;for(;l!==i.file||c!==i.rank;){const e=String.fromCharCode("a".charCodeAt(0)+l),t=(c+1).toString();r.push(e+t),l+=s,c+=o}return r.push(t),r}const F1=({pgn:e,size:t=300,className:n="",animationSpeed:r=150})=>{const a=ct.useMemo(()=>function(e){const t=new lF;try{return t.loadPgn(e),t.history({verbose:!0})}catch{return[]}}(e),[e]),[i,s]=ct.useState(0);ct.useEffect(()=>{if(0===a.length)return;const e=setInterval(()=>{s(e=>e>=a.length?0:e+1)},r);return()=>clearInterval(e)},[a.length,r]);const o=ct.useMemo(()=>{const e=[];for(let t=0;t<8;t++){e[t]=[];for(let n=0;n<8;n++){const r=(t+n)%2==1;e[t][n]={file:n,rank:t,visits:[],isLight:r}}}for(let t=0;t<Math.min(i,a.length);t++){const n=a[t],r=n.piece,i=n.color,s=zF(r,i),o=L1(n.from,n.to,n.piece);for(const a of o){const{file:n,rank:o}=I1(a);e[o][n].visits.push({piece:r,color:i,moveNumber:t+1,hexColor:s})}}return e},[i,a]),{archetype:l}=ct.useMemo(()=>{const e=function(e,t,n){let r=0,a=0,i=0,s=0,o=0;for(let u=0;u<8;u++)for(let t=0;t<8;t++){const n=e[u][t].visits.length;o+=n,t<4&&u>=4?r+=n:t>=4&&u>=4?a+=n:t<4&&u<4?i+=n:s+=n}const l=e=>Math.min(100,e/Math.max(o,1)*400),c=n>0?t/n:0;return{fingerprint:`anim-${t}-${n}`,archetype:"animated_preview",quadrantProfile:{q1:l(r),q2:l(a),q3:l(i),q4:l(s)},temporalFlow:{opening:c<.3?.8:.3,middle:c>=.3&&c<.7?.8:.3,ending:c>=.7?.8:.3,trend:c<.5?"accelerating":"stable",momentum:c<.5?.5:0},intensity:Math.min(1,o/64*.5),dominantForce:r+a>i+s?"primary":"secondary",flowDirection:"forward",criticalMoments:[]}}(o,i,a.length);return{signature:e,archetype:D$(e)}},[o,i,a.length]),c=t/8,u=.02*t,d=t+2*u,h=ct.useMemo(()=>[...Array(8)].map((e,t)=>{const n=7-t;return[...Array(8)].map((e,r)=>{const a=o[n][r],i=a.isLight?qF.light:qF.dark,s=u+r*c,l=u+t*c;return((e,t,n,r,a)=>{const i=[],s=.08*r;if(i.push(xt.jsx("rect",{x:t,y:n,width:r,height:r,fill:a},`base-${t}-${n}`)),0===e.length)return i;const o=[];for(const h of e)o.includes(h.hexColor)||o.push(h.hexColor);const l=Math.min(o.length,6),c=[];let u=r-2*s;const d=.7*u/l;for(let h=0;h<l&&(c.push({color:o[h],layerSize:u}),u-=d,!(u<.1*r));h++);for(let h=0;h<c.length;h++){const e=c[h],a=(r-e.layerSize)/2;i.push(xt.jsx("rect",{x:t+a,y:n+a,width:e.layerSize,height:e.layerSize,fill:e.color,style:{transition:"all 0.15s ease-out"}},`layer-${t}-${n}-${h}`))}return i})(a.visits,s,l,c,i)})}),[o,u,c]);return xt.jsxs("svg",{width:d,height:d,viewBox:`0 0 ${d} ${d}`,xmlns:"http://www.w3.org/2000/svg",className:n,style:{display:"block"},"data-archetype":l,"data-move":i,children:[xt.jsx("rect",{x:0,y:0,width:d,height:d,fill:qF.border}),h]})},$1=ct.forwardRef(function(e,t){const n=eN(),[r,a]=ct.useState(0),i=eL.find(e=>"anderssen-kieseritzky-1851"===e.id),s=(null==i?void 0:i.pgn)||eL[0].pgn,o=(null==i?void 0:i.title)||"The Immortal Game";ct.useEffect(()=>{const e=setInterval(()=>{a(e=>(e+1)%4)},3e3);return()=>clearInterval(e)},[]);const l=[{icon:Om,title:"Capture",desc:"Photograph any En Pensent vision"},{icon:lf,title:"Analyze",desc:"AI reads the unique color fingerprint"},{icon:Cf,title:"Connect",desc:"Instantly link to digital page"},{icon:Ng,title:"Score",desc:"Every scan increases Vision Score"}];return xt.jsxs("section",{ref:t,className:"relative py-16 md:py-24 overflow-hidden",children:[xt.jsx("div",{className:"absolute -left-32 top-1/4 w-96 h-96 opacity-10 blur-sm pointer-events-none rotate-12",children:xt.jsx("img",{src:T1,alt:"",className:"w-full h-full object-cover rounded-full"})}),xt.jsx("div",{className:"absolute -right-24 bottom-1/3 w-80 h-80 opacity-8 blur-sm pointer-events-none -rotate-12",children:xt.jsx("img",{src:M1,alt:"",className:"w-full h-full object-cover rounded-full"})}),xt.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-0 w-full h-48 opacity-5 pointer-events-none",children:xt.jsx("img",{src:JI,alt:"",className:"w-full h-full object-cover"})}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-background to-background pointer-events-none"}),xt.jsx("div",{className:"absolute top-20 left-1/4 w-2 h-2 bg-primary/40 rounded-full animate-pulse"}),xt.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 bg-gold/40 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),xt.jsx("div",{className:"absolute bottom-32 left-1/3 w-2.5 h-2.5 bg-primary/30 rounded-full animate-pulse",style:{animationDelay:"1s"}}),xt.jsx("div",{className:"relative container mx-auto px-4",children:xt.jsxs("div",{className:"max-w-6xl mx-auto",children:[xt.jsxs("div",{className:"text-center mb-12",children:[xt.jsxs(gD.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-display uppercase tracking-widest mb-6",children:[xt.jsx(gg,{className:"h-4 w-4"}),"Revolutionary Technology",xt.jsx(MD,{variant:"secondary",className:"ml-2 text-xs",children:"Patent Pending"})]}),xt.jsx(gD.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"text-3xl md:text-5xl font-royal font-bold uppercase tracking-wide mb-4",children:"Natural Vision"}),xt.jsx(gD.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Every visualization is visually encrypted with its own data  powering the world's most advanced chess pattern recognition system."})]}),xt.jsxs("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12 items-center",children:[xt.jsx(gD.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"relative",children:xt.jsxs("div",{className:"relative aspect-square max-w-sm mx-auto",children:[xt.jsx("div",{className:"absolute -inset-4 bg-gradient-to-br from-primary/20 via-gold/10 to-primary/20 rounded-2xl blur-xl opacity-50"}),xt.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none overflow-hidden rounded-xl",children:xt.jsx(gD.div,{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent opacity-80",animate:{top:["0%","100%"]},transition:{duration:2.5,repeat:1/0,ease:"linear"}})}),xt.jsxs("div",{className:"relative bg-card rounded-xl border border-border shadow-2xl overflow-hidden",children:[xt.jsx(F1,{pgn:s,size:320,animationSpeed:120,className:"w-full h-auto"}),xt.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[xt.jsx("div",{className:"absolute top-2 left-2 w-6 h-6 border-l-2 border-t-2 border-primary/70"}),xt.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 border-r-2 border-t-2 border-primary/70"}),xt.jsx("div",{className:"absolute bottom-2 left-2 w-6 h-6 border-l-2 border-b-2 border-primary/70"}),xt.jsx("div",{className:"absolute bottom-2 right-2 w-6 h-6 border-r-2 border-b-2 border-primary/70"})]})]}),xt.jsx(gD.div,{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 bg-card/95 backdrop-blur-sm px-5 py-2.5 rounded-full border border-primary/30 shadow-lg",animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0},children:xt.jsx("span",{className:"text-sm font-medium text-gold-gradient",children:o})}),xt.jsx("div",{className:"absolute -right-10 top-1/2 -translate-y-1/2 flex flex-col gap-1.5",children:[...Array(8)].map((e,t)=>xt.jsx(gD.div,{className:"h-1 bg-gradient-to-r from-primary/60 to-gold/40 rounded-full",initial:{width:20},animate:{width:[20,40+30*Math.random(),20],opacity:[.4,.9,.4]},transition:{duration:1.5,delay:.1*t,repeat:1/0}},t))})]})}),xt.jsxs(gD.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"space-y-8",children:[xt.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map((e,t)=>{const n=e.icon,a=r===t,i=[T1,M1,JI,T1];return xt.jsxs(gD.div,{className:"relative p-4 rounded-xl border transition-all duration-300 overflow-hidden "+(a?"bg-primary/10 border-primary/30 shadow-lg shadow-primary/10":"bg-card/50 border-border/50"),animate:{scale:a?1.02:1},children:[xt.jsx("div",{className:"absolute inset-0 opacity-[0.08] pointer-events-none transition-opacity duration-500 "+(a?"opacity-[0.12]":""),children:xt.jsx("img",{src:i[t],alt:"",className:"w-full h-full object-cover"})}),xt.jsxs("div",{className:"relative z-10",children:[xt.jsx(n,{className:"h-6 w-6 mb-2 "+(a?"text-primary":"text-muted-foreground")}),xt.jsx("h4",{className:"font-semibold "+(a?"text-foreground":"text-muted-foreground"),children:e.title}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.desc})]})]},e.title)})}),xt.jsxs("div",{className:"relative bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl p-6 border border-primary/20 overflow-hidden",children:[xt.jsx("div",{className:"absolute inset-0 opacity-[0.06] pointer-events-none",children:xt.jsx("img",{src:JI,alt:"",className:"w-full h-full object-cover"})}),xt.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[xt.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:xt.jsx(Zm,{className:"h-6 w-6 text-primary"})}),xt.jsxs("div",{children:[xt.jsx("h4",{className:"font-semibold mb-2",children:"Building Chess Intelligence"}),xt.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Every scan contributes to our growing pattern database. As millions of visions are cross-referenced, our AI evolves ",xt.jsx("span",{className:"text-primary font-medium",children:" eventually suggesting moves with accuracy surpassing traditional engines."})]})]})]}),xt.jsxs("div",{className:"relative z-10 mt-4 pt-4 border-t border-primary/20 flex items-center gap-4 text-sm",children:[xt.jsxs("div",{className:"flex items-center gap-1.5",children:[xt.jsx(Eg,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-muted-foreground",children:"More Patterns"})]}),xt.jsx("span",{className:"text-primary",children:""}),xt.jsxs("div",{className:"flex items-center gap-1.5",children:[xt.jsx(Ng,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-muted-foreground",children:"Smarter Predictions"})]})]})]}),xt.jsxs(vD,{size:"lg",className:"w-full gap-2 text-lg py-6 shadow-lg shadow-primary/20",onClick:()=>n("/vision-scanner"),children:[xt.jsx(ng,{className:"h-5 w-5"}),"Try Natural Vision Scanner"]}),xt.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Works in-app with camera or image upload. Traditional QR also included on prints."})]})]})]})})]})});$1.displayName="NaturalQRShowcase";var z1="horizontal",q1=["horizontal","vertical"],V1=ct.forwardRef((e,t)=>{const{decorative:n,orientation:r=z1,...a}=e,i=function(e){return q1.includes(e)}(r)?r:z1,s=n?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"};return xt.jsx(np.div,{"data-orientation":i,...s,...a,ref:t})});V1.displayName="Separator";var W1=V1;const Q1=ct.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>xt.jsx(W1,{ref:a,decorative:n,orientation:t,className:Cy("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Q1.displayName=W1.displayName;const U1="/assets/carlsen-cover-v2-C36EaDIc.jpg",K1="/assets/carlsen-back-cover-4pnoQeGH.jpg",H1=({onClick:e,className:t="",size:n="lg"})=>{const[r,a]=ct.useState(!1),i={sm:"10px",md:"20px",lg:"36px"},s={sm:"8px",md:"16px",lg:"28px"};return xt.jsx(gD.button,{onClick:e,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),className:`relative group cursor-pointer ${t}`,style:{perspective:"2000px"},whileHover:{scale:1.02},transition:{duration:.3},children:xt.jsxs(gD.div,{className:`relative ${{sm:"w-24",md:"w-48",lg:"w-80 max-w-full"}[n]}`,style:{transformStyle:"preserve-3d"},animate:{rotateY:r?360:-15,rotateX:r?0:5},transition:{duration:r?2.5:.7,ease:[.4,0,.2,1]},children:[xt.jsx(gD.div,{className:"absolute inset-0 bg-black/40 blur-2xl rounded-lg",style:{transform:"translateZ(-60px) translateY(24px) scale(0.9)"},animate:{opacity:r?.3:.4},transition:{duration:.7}}),xt.jsx("div",{className:"absolute bottom-0 left-0 right-0",style:{height:s[n],transform:`translateZ(-${parseInt(s[n])/2}px) rotateX(-90deg)`,transformOrigin:"bottom center",background:"linear-gradient(to bottom, #fcd34d, #f59e0b, #d97706, #b45309)",boxShadow:"inset 0 2px 8px rgba(0,0,0,0.2), 0 0 12px rgba(251,191,36,0.4)"},children:xt.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 50%, rgba(255,255,255,0.3) 100%)"}})}),xt.jsx("div",{className:"absolute top-0 right-0 bottom-0",style:{width:s[n],transform:`translateX(${s[n]}) rotateY(90deg)`,transformOrigin:"left center",background:"linear-gradient(to right, #fcd34d, #f59e0b, #d97706)",boxShadow:"inset -2px 0 6px rgba(0,0,0,0.15), 0 0 12px rgba(251,191,36,0.4)"},children:xt.jsx("div",{className:"absolute inset-0",style:{background:"\n                linear-gradient(135deg, rgba(255,255,255,0.5) 0%, transparent 40%, rgba(255,255,255,0.3) 100%),\n                repeating-linear-gradient(\n                  to bottom,\n                  transparent,\n                  transparent 3px,\n                  rgba(180,83,9,0.3) 3px,\n                  rgba(180,83,9,0.3) 4px\n                )\n              "}})}),xt.jsx("div",{className:"absolute top-0 left-0 right-0",style:{height:s[n],transform:`translateZ(-${parseInt(s[n])/2}px) rotateX(90deg)`,transformOrigin:"top center",background:"linear-gradient(to top, #fcd34d, #f59e0b, #d97706, #b45309)",boxShadow:"inset 0 -2px 8px rgba(0,0,0,0.2), 0 0 12px rgba(251,191,36,0.4)"},children:xt.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(225deg, rgba(255,255,255,0.4) 0%, transparent 50%, rgba(255,255,255,0.3) 100%)"}})}),xt.jsxs("div",{className:"absolute top-0 left-0 bottom-0 overflow-hidden flex flex-col items-center justify-between",style:{width:i[n],transform:`translateX(-${i[n]}) rotateY(-90deg)`,transformOrigin:"right center",background:"linear-gradient(to right, #0f172a 0%, #1e293b 20%, #1e293b 80%, #0f172a 100%)",boxShadow:"inset -3px 0 12px rgba(0,0,0,0.4), inset 3px 0 8px rgba(255,255,255,0.05)",padding:"sm"===n?"4px 2px":"md"===n?"8px 3px":"12px 4px"},children:[xt.jsx("div",{className:"absolute left-0 top-0 bottom-0",style:{width:"sm"===n?"1px":"md"===n?"2px":"3px",background:"linear-gradient(to bottom, #d4a574, #f5d89a 20%, #c9a45c 50%, #f5d89a 80%, #d4a574)"}}),xt.jsx("div",{className:"absolute right-0 top-0 bottom-0",style:{width:"sm"===n?"1px":"md"===n?"2px":"3px",background:"linear-gradient(to bottom, #d4a574, #f5d89a 20%, #c9a45c 50%, #f5d89a 80%, #d4a574)"}}),xt.jsx("div",{className:"text-amber-400 font-serif text-center",style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)",fontSize:"sm"===n?"4px":"md"===n?"7px":"10px",fontWeight:600,letterSpacing:"0.2em"},children:"CARLSEN"}),xt.jsx("div",{className:"text-amber-400",style:{fontSize:"sm"===n?"6px":"md"===n?"10px":"14px"},children:""}),xt.jsx("div",{className:"text-amber-400/80 text-center",style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)",fontSize:"sm"===n?"2px":"md"===n?"4px":"6px",fontWeight:"bold",letterSpacing:"0.15em",fontVariant:"small-caps"},children:"EN PENSENT"}),xt.jsx("img",{src:NU,alt:"En Pensent",className:"rounded-full object-cover",style:{width:"sm"===n?"6px":"md"===n?"12px":"20px",height:"sm"===n?"6px":"md"===n?"12px":"20px",boxShadow:"0 0 4px rgba(212, 165, 116, 0.6)"}})]}),xt.jsxs("div",{className:"absolute inset-0 rounded-l-sm overflow-hidden",style:{transform:`translateZ(-${parseInt(s[n])+2}px) rotateY(180deg)`,backfaceVisibility:"visible"},children:[xt.jsx("img",{src:K1,alt:"Carlsen in Color - Back Cover",className:"w-full h-full object-cover"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-black/10 pointer-events-none"})]}),xt.jsxs("div",{className:"relative rounded-r-sm overflow-hidden",style:{transformStyle:"preserve-3d",boxShadow:"6px 6px 20px rgba(0,0,0,0.35), -1px -1px 3px rgba(255,255,255,0.1)",backfaceVisibility:"visible"},children:[xt.jsx("img",{src:U1,alt:"Carlsen in Color - Coffee Table Book",className:"w-full h-auto block"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/8 via-transparent to-black/15 pointer-events-none"}),xt.jsx(gD.div,{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-amber-300/15 to-transparent pointer-events-none",animate:{opacity:r?0:.5},transition:{duration:.5}}),xt.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-[2px] bg-gradient-to-b from-white/30 via-white/15 to-white/30"})]}),xt.jsx(gD.div,{className:"absolute -bottom-10 left-0 right-0 flex justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:r?0:1},transition:{delay:.5,duration:.3},children:xt.jsxs("span",{className:"text-xs text-muted-foreground/60 flex items-center gap-1.5 bg-background/80 backdrop-blur-sm px-3 py-1.5 rounded-full",children:[xt.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:xt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Hover for 360 view"]})}),xt.jsx(gD.div,{className:"absolute -bottom-10 left-0 right-0 flex justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:r?1:0},transition:{delay:.3,duration:.3},children:xt.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1.5 bg-gradient-to-r from-amber-100 to-orange-100 border border-amber-300 px-3 py-1.5 rounded-full shadow-sm",children:[xt.jsx("span",{className:"text-amber-500",children:""}),"Gold Gilded Pages",xt.jsx("span",{className:"text-amber-500",children:""})]})})]})})},G1=[{id:0,type:"spine",image:"",title:"Spine"},{id:1,type:"cover",image:U1,title:"Front Cover"},{id:2,type:"spread",image:"/assets/spread-preview-1--50xdiTW.png",title:"Breaking the Wall",year:"2016",opponent:"Sergey Karjakin",pageNumber:6},{id:3,type:"spread",image:"/assets/spread-preview-2-9aZudWF4.png",title:"The 136-Move Epic",year:"2021",opponent:"Ian Nepomniachtchi",pageNumber:10},{id:4,type:"spread",image:"/assets/spread-preview-3-CaiuBIJG.png",title:"The Berlin Endgame",year:"2013",opponent:"Viswanathan Anand",pageNumber:14},{id:5,type:"back",image:K1,title:"Back Cover"}],Y1=({className:e=""})=>{const[t,n]=ct.useState(1),[r,a]=ct.useState(0),[i,s]=ct.useState(!1),o=G1[t],l="cover"===o.type||"back"===o.type,c="spine"===o.type;return xt.jsxs("div",{className:`relative ${e}`,children:[xt.jsxs("div",{className:"relative mx-auto",style:{perspective:"1500px",maxWidth:"100%"},children:[xt.jsx("div",{className:"absolute inset-x-4 bottom-0 h-8 bg-black/20 blur-xl rounded-full transform translate-y-4"}),xt.jsxs("div",{className:"relative rounded-lg shadow-2xl overflow-hidden "+(c?"bg-gradient-to-b from-slate-900 to-slate-800":l?"bg-gradient-to-br from-slate-900 to-slate-800":"bg-gradient-to-b from-amber-100 to-amber-50"),style:{transformStyle:"preserve-3d",transform:"rotateX(5deg)"},children:[!l&&!c&&xt.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-4 -translate-x-1/2 bg-gradient-to-r from-amber-200 via-amber-300 to-amber-200 z-10 shadow-inner"}),xt.jsx("div",{className:"relative",children:xt.jsx(yT,{mode:"wait",custom:r,onExitComplete:()=>s(!1),children:xt.jsxs(gD.div,{custom:r,variants:{enter:e=>({rotateY:e>0?-90:90,opacity:0,scale:.95}),center:{rotateY:0,opacity:1,scale:1},exit:e=>({rotateY:e>0?90:-90,opacity:0,scale:.95})},initial:"enter",animate:"center",exit:"exit",transition:{rotateY:{type:"spring",stiffness:200,damping:25},opacity:{duration:.3},scale:{duration:.3}},className:"relative",style:{transformStyle:"preserve-3d"},children:[xt.jsxs("div",{className:"relative",children:[c?xt.jsxs("div",{className:"mx-auto flex flex-col items-center justify-between py-8 px-3",style:{width:"80px",height:"500px",background:"linear-gradient(to right, #0f172a 0%, #1e293b 20%, #1e293b 80%, #0f172a 100%)",boxShadow:"inset 2px 0 8px rgba(0,0,0,0.5), inset -2px 0 8px rgba(0,0,0,0.5)"},children:[xt.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[3px]",style:{background:"linear-gradient(to bottom, #d4a574, #f5d89a 20%, #c9a45c 50%, #f5d89a 80%, #d4a574)"}}),xt.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-[3px]",style:{background:"linear-gradient(to bottom, #d4a574, #f5d89a 20%, #c9a45c 50%, #f5d89a 80%, #d4a574)"}}),xt.jsx("div",{className:"text-amber-400 font-serif tracking-[0.3em] text-center",style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)",fontSize:"14px",fontWeight:600,letterSpacing:"0.25em"},children:"CARLSEN"}),xt.jsx("div",{className:"text-amber-400 text-2xl my-4",children:""}),xt.jsx("div",{className:"text-amber-400/80 text-center",style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)",fontSize:"8px",fontWeight:"bold",letterSpacing:"0.2em",fontVariant:"small-caps"},children:"EN PENSENT"}),xt.jsx("div",{className:"mt-4",children:xt.jsx("img",{src:NU,alt:"En Pensent",className:"w-10 h-10 rounded-full object-cover",style:{boxShadow:"0 0 8px rgba(212, 165, 116, 0.6)"}})})]}):xt.jsx("img",{src:o.image,alt:o.title,className:"w-full h-auto block "+(l?"aspect-[3/4] object-contain mx-auto py-4":""),style:{aspectRatio:l?"3/4":"16/9",objectFit:l?"contain":"cover",maxHeight:l?"500px":"auto"}}),!l&&!c&&xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-black/5 pointer-events-none"}),xt.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\")"}}),xt.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-8 -translate-x-1/2 bg-gradient-to-r from-transparent via-black/10 to-transparent pointer-events-none"})]}),c&&xt.jsx("div",{className:"absolute -bottom-8 left-0 right-0 text-center",children:xt.jsx("span",{className:"inline-block bg-gradient-to-r from-amber-600 to-amber-500 text-white text-xs font-bold px-4 py-2 rounded-full shadow-lg",children:"Gold Gilded Spine"})}),"cover"===o.type&&xt.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:xt.jsx("span",{className:"inline-block bg-gradient-to-r from-amber-500 to-orange-500 text-white text-xs font-bold px-4 py-2 rounded-full shadow-lg",children:"100 Masterpieces"})}),"back"===o.type&&xt.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:xt.jsx("span",{className:"inline-block bg-slate-800/80 text-amber-200 text-xs font-medium px-4 py-2 rounded-full",children:"Premium Hardcover  Museum-Quality Print"})})]}),"spread"===o.type&&xt.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent p-4 pt-12",children:xt.jsxs("div",{className:"flex items-end justify-between text-white",children:[xt.jsxs("div",{children:[xt.jsxs("p",{className:"text-xs uppercase tracking-wider opacity-70 mb-1",children:["Game #",o.id,"  Page ",o.pageNumber]}),xt.jsx("h3",{className:"font-serif text-lg font-bold",children:o.title}),xt.jsxs("p",{className:"text-sm opacity-80",children:["vs ",o.opponent,"  ",o.year]})]}),xt.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-60",children:[xt.jsx(Pm,{className:"w-3 h-3"}),xt.jsx("span",{children:"En Pensent Visualization"})]})]})})]},t)})}),!l&&!c&&xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-gradient-to-bl from-amber-50 to-transparent rounded-bl-lg pointer-events-none",style:{boxShadow:"inset 2px 2px 6px rgba(0,0,0,0.05)"}}),xt.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 bg-gradient-to-br from-amber-50 to-transparent rounded-br-lg pointer-events-none",style:{boxShadow:"inset -2px 2px 6px rgba(0,0,0,0.05)"}})]})]})]}),xt.jsxs("div",{className:"flex items-center justify-center gap-6 mt-6",children:[xt.jsx(vD,{variant:"outline",size:"icon",onClick:()=>{i||t<=0||(a(-1),s(!0),n(e=>e-1))},disabled:0===t||i,className:"h-12 w-12 rounded-full border-amber-300 bg-white hover:bg-amber-50 disabled:opacity-30 shadow-md",children:xt.jsx(Im,{className:"h-6 w-6 text-amber-700"})}),xt.jsx("div",{className:"flex items-center gap-3",children:G1.map((e,r)=>xt.jsx("button",{onClick:()=>{i||(a(r>t?1:-1),s(!0),n(r))},className:"transition-all duration-300 rounded-sm "+(r===t?"w-8 h-3 bg-amber-600":"spine"===e.type||"cover"===e.type||"back"===e.type?"w-3 h-3 bg-amber-500/60 hover:bg-amber-500":"w-3 h-3 bg-amber-300 hover:bg-amber-400"),title:"spine"===e.type?"Spine":"cover"===e.type?"Front Cover":"back"===e.type?"Back Cover":e.title},r))}),xt.jsx(vD,{variant:"outline",size:"icon",onClick:()=>{i||t>=G1.length-1||(a(1),s(!0),n(e=>e+1))},disabled:t===G1.length-1||i,className:"h-12 w-12 rounded-full border-amber-300 bg-white hover:bg-amber-50 disabled:opacity-30 shadow-md",children:xt.jsx(Lm,{className:"h-6 w-6 text-amber-700"})})]}),xt.jsxs("p",{className:"text-center text-sm text-amber-700 mt-4 font-medium",children:["spine"===o.type?"Spine":"cover"===o.type?"Front Cover":"back"===o.type?"Back Cover":`Spread ${t-1} of 3`,xt.jsx("span",{className:"text-amber-500 font-normal",children:"  100 spreads in full book"})]})]})},Z1=[{code:"USD",symbol:"$",name:"US Dollar",flag:""},{code:"CAD",symbol:"$",name:"Canadian Dollar",flag:""},{code:"EUR",symbol:"",name:"Euro",flag:""},{code:"GBP",symbol:"",name:"British Pound",flag:""},{code:"AUD",symbol:"$",name:"Australian Dollar",flag:""},{code:"JPY",symbol:"",name:"Japanese Yen",flag:""},{code:"CHF",symbol:"Fr",name:"Swiss Franc",flag:""},{code:"CNY",symbol:"",name:"Chinese Yuan",flag:""},{code:"INR",symbol:"",name:"Indian Rupee",flag:""},{code:"MXN",symbol:"$",name:"Mexican Peso",flag:""},{code:"BRL",symbol:"R$",name:"Brazilian Real",flag:""},{code:"KRW",symbol:"",name:"South Korean Won",flag:""}],X1={USD:1,CAD:1.36,EUR:.92,GBP:.79,AUD:1.53,JPY:148.5,CHF:.88,CNY:7.24,INR:83.5,MXN:17.2,BRL:4.97,KRW:1320},J1=SD()(ED((e,t)=>({selectedCurrency:Z1[0],exchangeRates:X1,setCurrency:t=>{e({selectedCurrency:t})},convertPrice:e=>{const{selectedCurrency:n,exchangeRates:r}=t();return e*(r[n.code]||1)},formatPrice:e=>{const{selectedCurrency:n}=t(),r=t().convertPrice(e);return new Intl.NumberFormat("en-US",{style:"currency",currency:n.code,minimumFractionDigits:"JPY"===n.code||"KRW"===n.code?0:2,maximumFractionDigits:"JPY"===n.code||"KRW"===n.code?0:2}).format(r)}}),{name:"en-pensent-currency",storage:CD(()=>localStorage)})),e2={USD:"US",CAD:"CA",EUR:"DE",GBP:"GB",AUD:"AU",JPY:"JP",CHF:"CH",CNY:"CN",INR:"IN",MXN:"MX",BRL:"BR",KRW:"KR"},t2="https://printify-shop-manager-fs4kw.myshopify.com/api/2025-07/graphql.json",n2="a0ffa036b52f6150e7e1bfaf4b307ff4";let r2=0,a2=!1,i2=0;const s2="\n  mutation cartCreate($input: CartInput!, $country: CountryCode) @inContext(country: $country) {\n    cartCreate(input: $input) {\n      cart {\n        id\n        checkoutUrl\n      }\n      userErrors {\n        field\n        message\n      }\n    }\n  }\n";async function o2(e,t=1){if(a2&&!(Date.now()-i2>6e4&&(a2=!1,r2=0,1)))throw new Error("Payment system temporarily unavailable. Please try again in a minute.");try{const t=await async function(e){var t;const n=e.map(e=>{const t={quantity:e.quantity,merchandiseId:e.variantId};if(e.customPrintData){const n=[];e.customPrintData.printImageUrl&&n.push({key:"_custom_image_url",value:e.customPrintData.printImageUrl}),e.customPrintData.gameTitle&&n.push({key:"_game_title",value:e.customPrintData.gameTitle}),e.customPrintData.visualizationId&&n.push({key:"_visualization_id",value:e.customPrintData.visualizationId}),e.customPrintData.gameId&&n.push({key:"_game_id",value:e.customPrintData.gameId}),e.customPrintData.paletteId&&n.push({key:"_palette_id",value:e.customPrintData.paletteId}),e.customPrintData.frameStyle&&n.push({key:"_frame_style",value:e.customPrintData.frameStyle}),e.customPrintData.includeInfoCard&&n.push({key:"_include_info_card",value:"true"}),n.length>0&&(t.attributes=n)}return t}),r=J1.getState().selectedCurrency,a=e2[r.code]||"US",i=await fetch(t2,{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":n2},body:JSON.stringify({query:s2,variables:{input:{lines:n},country:a}})});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const s=await i.json();if(s.errors)throw new Error(`Shopify error: ${s.errors.map(e=>e.message).join(", ")}`);if(s.data.cartCreate.userErrors.length>0)throw new Error(`Cart error: ${s.data.cartCreate.userErrors.map(e=>e.message).join(", ")}`);const o=null==(t=s.data.cartCreate.cart)?void 0:t.checkoutUrl;if(!o)throw new Error("No checkout URL returned");const l=new URL(o);return l.searchParams.set("channel","online_store"),l.toString()}(e);return r2=0,t}catch(r){if(r2++,i2=Date.now(),r2>=5&&(a2=!0),t<3){if(r instanceof Error&&(r.message.includes("network")||r.message.includes("timeout")||r.message.includes("rate limit")||r.message.includes("502")||r.message.includes("503")||r.message.includes("504")))return await(n=1e3*t,new Promise(e=>setTimeout(e,n))),o2(e,t+1)}throw r}var n}const l2=SD()(ED((e,t)=>({items:[],checkoutUrl:null,isLoading:!1,addItem:n=>{const{items:r}=t(),a=r.find(e=>e.variantId===n.variantId);e(a?{items:r.map(e=>e.variantId===n.variantId?{...e,quantity:e.quantity+n.quantity}:e)}:{items:[...r,n]}),Yy.success("Added to cart!",{duration:2e3,position:"top-center"})},updateQuantity:(n,r)=>{r<=0?t().removeItem(n):e({items:t().items.map(e=>e.variantId===n?{...e,quantity:r}:e)})},removeItem:n=>{e({items:t().items.filter(e=>e.variantId!==n)})},clearCart:()=>{e({items:[],checkoutUrl:null})},setLoading:t=>e({isLoading:t}),createCheckout:async()=>{const{items:n}=t();if(0!==n.length){e({isLoading:!0});try{const t=await o2(n);e({checkoutUrl:t}),e({items:[]}),Yy.success("Checkout ready!",{description:"Redirecting to secure checkout..."})}catch(r){const e=r instanceof Error?r.message:"Checkout failed";Yy.error("Checkout failed",{description:e.includes("circuit breaker")?"Payment system temporarily unavailable. Please try again shortly.":"Please try again or contact support if the problem persists."})}finally{e({isLoading:!1})}}else Yy.error("Your cart is empty")}}),{name:"en-pensent-cart",storage:CD(()=>localStorage)})),c2=[{icon:Zm,text:"100 of Carlsen's greatest games"},{icon:$f,text:"Signature Hot & Cold visualization palette"},{icon:qf,text:"Unique haiku poetry for each game"},{icon:Gf,text:"Premium hardcover, museum-quality print"},{icon:ff,text:"Perfect gift for chess enthusiasts"}],u2=[{quote:"A masterpiece of chess art.",author:"Chess.com Editor"},{quote:"The perfect fusion of sport and design.",author:"Art Collector"}],d2={standard:{variantId:"gid://shopify/ProductVariant/46478683537570",productId:"gid://shopify/Product/8892237185186",title:"Carlsen in Color: Standard Edition",variantTitle:"Standard 8.511",price:"79.99",size:'8.5"  11"',handle:"carlsen-in-color-standard-edition",imageUrl:"https://cdn.shopify.com/s/files/1/0701/8276/4706/files/carlsen-cover.jpg?v=1768242062"},large:{variantId:"gid://shopify/ProductVariant/46478683603106",productId:"gid://shopify/Product/8892237217954",title:"Carlsen in Color: Large Format Edition",variantTitle:"Large 1114",price:"99.99",size:'11"  14"',handle:"carlsen-in-color-large-format-edition",imageUrl:"https://cdn.shopify.com/s/files/1/0701/8276/4706/files/carlsen-cover.jpg?v=1768242062"}},h2=ct.forwardRef(function({variant:e="featured",onOrderClick:t,showCTA:n=!0},r){const[a,i]=ct.useState(!1),[s,o]=ct.useState("large"),l=l2(e=>e.addItem),c=()=>{t?t():(()=>{const e=d2[s],t={product:{node:{id:e.productId,title:e.title,description:`Premium hardcover book, ${e.size}`,handle:e.handle,priceRange:{minVariantPrice:{amount:e.price,currencyCode:"USD"}},images:{edges:e.imageUrl?[{node:{url:e.imageUrl,altText:e.title}}]:[]},variants:{edges:[{node:{id:e.variantId,title:e.variantTitle,price:{amount:e.price,currencyCode:"USD"},availableForSale:!0,selectedOptions:[{name:"Title",value:e.variantTitle}]}}]},options:[{name:"Title",values:[e.variantTitle]}]}},variantId:e.variantId,variantTitle:e.variantTitle,price:{amount:e.price,currencyCode:"USD"},quantity:1,selectedOptions:[{name:"Title",value:e.variantTitle}]};l(t),Yy.success("Added to cart!",{description:`${e.title} - $${e.price}`})})()},u=xt.jsx(EZ,{open:a,onOpenChange:i,children:xt.jsxs(MZ,{className:"max-w-5xl max-h-[90vh] overflow-y-auto p-0 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 border-amber-500/20",children:[xt.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-amber-500/20 px-6 py-4",children:xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center",children:xt.jsx(Pm,{className:"w-5 h-5 text-white"})}),xt.jsxs("div",{children:[xt.jsx("h2",{className:"font-serif text-xl font-bold text-white",children:"Carlsen in Color"}),xt.jsx("p",{className:"text-amber-400/80 text-sm",children:"100 Masterpieces  Coffee Table Edition"})]})]}),xt.jsxs(MD,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg",children:[xt.jsx(gg,{className:"w-3 h-3 mr-1"}),"NEW RELEASE"]})]})}),xt.jsxs("div",{className:"grid lg:grid-cols-5 gap-0",children:[xt.jsx("div",{className:"lg:col-span-3 p-6 bg-gradient-to-br from-amber-50 to-orange-50",children:xt.jsx(Y1,{})}),xt.jsxs("div",{className:"lg:col-span-2 p-6 space-y-6",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("div",{className:"flex",children:[...Array(5)].map((e,t)=>xt.jsx(yg,{className:"w-4 h-4 fill-amber-400 text-amber-400"},t))}),xt.jsx("span",{className:"text-amber-200/80 text-sm",children:"Collector's Choice"})]}),xt.jsxs("div",{className:"relative rounded-xl overflow-hidden border border-amber-500/20",children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-[0.18]",style:{backgroundImage:`url(${aL})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/85 to-slate-800/90"}),xt.jsx("div",{className:"relative p-4 space-y-3",children:c2.map((e,t)=>xt.jsxs(gD.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-3 text-slate-200",children:[xt.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:xt.jsx(e.icon,{className:"w-4 h-4 text-amber-400"})}),xt.jsx("span",{className:"text-sm",children:e.text})]},t))})]}),xt.jsx(Q1,{className:"bg-slate-700"}),xt.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-slate-700",children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-[0.20]",style:{backgroundImage:`url(${sL})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-800/85 to-slate-900/90"}),xt.jsx("div",{className:"relative p-4",children:xt.jsxs("div",{className:"flex items-start gap-2",children:[xt.jsx(bf,{className:"w-4 h-4 text-amber-500 flex-shrink-0 mt-0.5"}),xt.jsxs("div",{children:[xt.jsxs("p",{className:"text-slate-300 text-sm italic",children:['"',u2[0].quote,'"']}),xt.jsxs("p",{className:"text-amber-400/70 text-xs mt-1",children:[" ",u2[0].author]})]})]})})]}),xt.jsxs("div",{className:"space-y-3",children:[xt.jsx(gD.div,{whileHover:{scale:1.02,x:4},whileTap:{scale:.98},onClick:()=>o("standard"),children:xt.jsxs(DD,{className:"group relative overflow-hidden cursor-pointer transition-all duration-500 "+("standard"===s?"border-2 border-amber-400 shadow-[0_0_30px_rgba(251,191,36,0.45)] ring-3 ring-amber-400/25":"bg-slate-800/50 border border-slate-700 hover:border-slate-500"),children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center scale-105 transition-all duration-700 "+("standard"===s?"opacity-35 group-hover:scale-110":"opacity-20 group-hover:opacity-30 group-hover:scale-105"),style:{backgroundImage:`url(${uL})`}}),xt.jsx("div",{className:"absolute inset-0 transition-all duration-500 "+("standard"===s?"bg-gradient-to-r from-slate-900/65 via-slate-800/55 to-amber-900/45":"bg-gradient-to-r from-slate-800/85 to-slate-900/90")}),"standard"===s&&xt.jsx(gD.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-amber-400/15 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,repeatDelay:1}}),"standard"===s&&xt.jsx(gD.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 left-2 w-6 h-6 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center z-10 shadow-lg",children:xt.jsx(Bm,{className:"w-4 h-4 text-white"})}),xt.jsxs($D,{className:"relative p-4 flex items-center justify-between",children:[xt.jsxs("div",{children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("p",{className:"font-medium "+("standard"===s?"text-amber-100":"text-white"),children:"Standard Edition"}),"standard"===s&&xt.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-amber-500/30 text-amber-300",children:" Classic"})]}),xt.jsx("p",{className:"text-sm "+("standard"===s?"text-amber-200/70":"text-slate-400"),children:'8.5"  11" Hardcover'})]}),xt.jsxs("div",{className:"text-right",children:[xt.jsx("p",{className:"text-2xl font-bold "+("standard"===s?"text-amber-100":"text-white"),children:"$79.99"}),xt.jsx("p",{className:"text-xs text-slate-500",children:"+ shipping"})]})]})]})}),xt.jsx(gD.div,{whileHover:{scale:1.02,x:4},whileTap:{scale:.98},onClick:()=>o("large"),children:xt.jsxs(DD,{className:"group relative overflow-hidden cursor-pointer transition-all duration-500 "+("large"===s?"border-2 border-amber-400 shadow-[0_0_35px_rgba(251,191,36,0.55),0_0_60px_rgba(249,115,22,0.25)] ring-3 ring-amber-400/30":"bg-gradient-to-r from-amber-600/20 to-orange-600/20 border border-amber-500/50 hover:border-amber-400"),children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center scale-105 transition-all duration-700 "+("large"===s?"opacity-45 group-hover:scale-110":"opacity-25 group-hover:opacity-35 group-hover:scale-105"),style:{backgroundImage:`url(${nL})`}}),xt.jsx("div",{className:"absolute inset-0 transition-all duration-500 "+("large"===s?"bg-gradient-to-r from-amber-900/55 via-orange-900/45 to-amber-800/55":"bg-gradient-to-r from-amber-900/70 to-orange-900/80")}),"large"===s&&xt.jsx(gD.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-amber-300/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,repeatDelay:.5}}),xt.jsx("div",{className:"absolute top-0 right-0 z-20",children:xt.jsx("div",{className:"relative",children:xt.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-amber-400 to-orange-500 text-slate-900 text-[10px] font-bold px-2 py-0.5 rounded-bl-lg",children:" POPULAR"})})}),"large"===s&&xt.jsx(gD.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 left-2 w-6 h-6 rounded-full bg-gradient-to-br from-amber-300 to-amber-500 flex items-center justify-center z-10 shadow-lg shadow-amber-400/50",children:xt.jsx(Bm,{className:"w-4 h-4 text-slate-900"})}),xt.jsxs($D,{className:"relative p-4 flex items-center justify-between",children:[xt.jsxs("div",{children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("p",{className:"text-amber-100 font-medium",children:"Large Format"}),xt.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-amber-400/30 text-amber-200 border border-amber-400/30",children:" Premium"})]}),xt.jsx("p",{className:"text-amber-200/60 text-sm",children:'11"  14" Premium'})]}),xt.jsxs("div",{className:"text-right",children:[xt.jsx("p",{className:"text-2xl font-bold text-amber-100",children:"$99.99"}),xt.jsx("p",{className:"text-xs text-amber-200/50",children:"+ shipping"})]})]})]})})]}),xt.jsxs("div",{className:"space-y-3 pt-2",children:[xt.jsxs(vD,{onClick:c,size:"lg",className:"w-full bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white shadow-lg shadow-amber-600/25 h-12 text-base",children:[xt.jsx(dg,{className:"w-5 h-5 mr-2"}),"Order Your Copy"]}),xt.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-slate-400",children:[xt.jsxs("span",{className:"flex items-center gap-1",children:[xt.jsx(Bm,{className:"w-3 h-3 text-green-500"}),"Secure checkout"]}),xt.jsxs("span",{className:"flex items-center gap-1",children:[xt.jsx(yf,{className:"w-3 h-3 text-blue-400"}),"Worldwide shipping"]})]})]}),xt.jsxs("div",{className:"relative rounded-lg overflow-hidden border-t border-slate-800 pt-4",children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-[0.05]",style:{backgroundImage:`url(${iL})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/95 to-transparent"}),xt.jsxs("div",{className:"relative text-center",children:[xt.jsx("p",{className:"text-xs text-slate-500",children:"Published by"}),xt.jsx("p",{className:"text-sm text-amber-400 font-serif tracking-wider",children:" EN PENSENT "})]})]})]})]})]})});return"hero"===e?xt.jsxs(gD.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"relative py-20 overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[xt.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[xt.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_30%,rgba(251,191,36,0.15),transparent_50%)]"}),xt.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_70%,rgba(249,115,22,0.1),transparent_50%)]"})]}),xt.jsx("div",{className:"container mx-auto px-4",children:xt.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[xt.jsx(gD.div,{initial:{opacity:0,x:-40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"relative flex justify-center lg:justify-end",children:xt.jsxs("div",{className:"relative",children:[xt.jsx(H1,{onClick:()=>i(!0),size:"lg"}),xt.jsxs(MD,{className:"absolute -top-4 -right-4 bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 shadow-lg z-20 text-sm",children:[xt.jsx(gg,{className:"w-4 h-4 mr-1"}),"NEW"]})]})}),xt.jsxs(gD.div,{initial:{opacity:0,x:40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"space-y-6",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-amber-500",children:[xt.jsx(Zm,{className:"w-5 h-5"}),xt.jsx("span",{className:"text-sm font-medium uppercase tracking-wider",children:"Collector's Edition"})]}),xt.jsx("h2",{className:"text-4xl md:text-5xl font-serif font-bold text-white",children:"Carlsen in Color"}),xt.jsx("p",{className:"text-xl text-amber-200/80 font-serif italic",children:"100 Masterpieces of Magnus Carlsen"}),xt.jsx("p",{className:"text-slate-300 leading-relaxed",children:"A stunning coffee table book featuring En Pensent visualizations of the greatest games from the world champion's legendary career. Each spread pairs unique haiku poetry with the signature Hot & Cold palette."}),xt.jsxs("div",{className:"flex flex-wrap gap-3",children:[xt.jsxs(MD,{variant:"outline",className:"text-sm border-amber-500/50 text-amber-200 bg-amber-500/10",children:[xt.jsx(Pm,{className:"w-3 h-3 mr-1"}),"100 Spreads"]}),xt.jsxs(MD,{variant:"outline",className:"text-sm border-amber-500/50 text-amber-200 bg-amber-500/10",children:[xt.jsx(_m,{className:"w-3 h-3 mr-1"}),"Premium Hardcover"]}),xt.jsx(MD,{variant:"outline",className:"text-sm border-amber-500/50 text-amber-200 bg-amber-500/10",children:"Museum-Quality Print"})]}),xt.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 pt-4",children:[xt.jsx(gD.div,{className:"flex-1",whileHover:{scale:1.04,y:-4},whileTap:{scale:.97},onClick:()=>o("standard"),children:xt.jsxs(DD,{className:"group relative overflow-hidden cursor-pointer transition-all duration-500 h-full "+("standard"===s?"border-2 border-amber-400 shadow-[0_0_35px_rgba(251,191,36,0.5),0_0_60px_rgba(251,191,36,0.2)] ring-4 ring-amber-400/30":"border border-slate-600/50 hover:border-amber-500/50 shadow-lg hover:shadow-amber-500/20"),children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center scale-110 transition-all duration-700 "+("standard"===s?"opacity-40 group-hover:scale-125":"opacity-25 group-hover:opacity-35 group-hover:scale-115"),style:{backgroundImage:`url(${uL})`}}),xt.jsx("div",{className:"absolute inset-0 transition-all duration-500 "+("standard"===s?"bg-gradient-to-br from-slate-900/70 via-slate-800/60 to-amber-900/50":"bg-gradient-to-br from-slate-900/85 via-slate-800/80 to-slate-900/85")}),"standard"===s&&xt.jsx(gD.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-amber-400/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,repeatDelay:1}}),xt.jsxs("div",{className:"absolute top-0 left-0 w-16 h-16 transition-opacity duration-300 "+("standard"===s?"opacity-100":"opacity-0"),children:[xt.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-amber-400 to-transparent"}),xt.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-gradient-to-b from-amber-400 to-transparent"})]}),"standard"===s&&xt.jsx(gD.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},className:"absolute top-3 right-3 w-7 h-7 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center z-10 shadow-lg shadow-amber-500/50",children:xt.jsx(Bm,{className:"w-4 h-4 text-white"})}),xt.jsxs($D,{className:"relative p-5 text-center space-y-1",children:[xt.jsx("div",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium mb-2 transition-colors "+("standard"===s?"bg-amber-500/30 text-amber-200":"bg-slate-700/50 text-slate-400"),children:" Classic"}),xt.jsx("p",{className:"text-lg font-serif font-semibold transition-colors "+("standard"===s?"text-amber-100":"text-slate-200"),children:"Standard Edition"}),xt.jsx("p",{className:"text-sm transition-colors "+("standard"===s?"text-amber-200/80":"text-slate-500"),children:'8.5"  11" Hardcover'}),xt.jsxs("p",{className:"text-3xl font-bold pt-2 transition-colors "+("standard"===s?"text-amber-100":"text-white"),children:["$79",xt.jsx("span",{className:"text-lg",children:".99"})]})]})]})}),xt.jsx(gD.div,{className:"flex-1",whileHover:{scale:1.04,y:-4},whileTap:{scale:.97},onClick:()=>o("large"),children:xt.jsxs(DD,{className:"group relative overflow-hidden cursor-pointer transition-all duration-500 h-full "+("large"===s?"border-2 border-amber-400 shadow-[0_0_40px_rgba(251,191,36,0.6),0_0_80px_rgba(249,115,22,0.3)] ring-4 ring-amber-400/40":"border border-amber-600/40 hover:border-amber-500 shadow-lg shadow-orange-500/10 hover:shadow-amber-500/25"),children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center scale-110 transition-all duration-700 "+("large"===s?"opacity-50 group-hover:scale-125":"opacity-30 group-hover:opacity-40 group-hover:scale-115"),style:{backgroundImage:`url(${nL})`}}),xt.jsx("div",{className:"absolute inset-0 transition-all duration-500 "+("large"===s?"bg-gradient-to-br from-amber-900/60 via-orange-900/50 to-amber-800/60":"bg-gradient-to-br from-amber-900/75 via-orange-900/70 to-amber-900/75")}),"large"===s&&xt.jsx(gD.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-amber-300/25 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,repeatDelay:.5}}),xt.jsxs("div",{className:"absolute top-0 left-0 w-20 h-20 transition-opacity duration-300 "+("large"===s?"opacity-100":"opacity-50"),children:[xt.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-amber-400 to-transparent"}),xt.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-gradient-to-b from-amber-400 to-transparent"})]}),xt.jsxs("div",{className:"absolute bottom-0 right-0 w-20 h-20 transition-opacity duration-300 "+("large"===s?"opacity-100":"opacity-50"),children:[xt.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-gradient-to-l from-amber-400 to-transparent"}),xt.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-gradient-to-t from-amber-400 to-transparent"})]}),xt.jsx("div",{className:"absolute -top-1 -right-1 z-20",children:xt.jsxs("div",{className:"relative",children:[xt.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-amber-400 to-orange-500 text-slate-900 text-[10px] font-bold px-3 py-1 rounded-bl-lg rounded-tr shadow-lg",children:" POPULAR"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-300 to-orange-400 blur-sm opacity-50 -z-10"})]})}),"large"===s&&xt.jsx(gD.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},className:"absolute top-10 right-3 w-8 h-8 rounded-full bg-gradient-to-br from-amber-300 to-amber-500 flex items-center justify-center z-10 shadow-lg shadow-amber-400/60",children:xt.jsx(Bm,{className:"w-5 h-5 text-slate-900"})}),xt.jsxs($D,{className:"relative p-5 text-center space-y-1",children:[xt.jsx("div",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium mb-2 bg-amber-400/30 text-amber-200 border border-amber-400/30",children:" Premium"}),xt.jsx("p",{className:"text-lg font-serif font-semibold text-amber-100",children:"Large Format"}),xt.jsx("p",{className:"text-sm text-amber-200/80",children:'11"  14" Premium'}),xt.jsxs("p",{className:"text-3xl font-bold pt-2 text-amber-50",children:["$99",xt.jsx("span",{className:"text-lg",children:".99"})]})]})]})})]}),n&&xt.jsxs("div",{className:"flex flex-wrap gap-3 pt-4 relative z-10",children:[xt.jsxs(vD,{size:"lg",onClick:e=>{e.stopPropagation(),c()},className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white shadow-lg shadow-amber-600/25",children:[xt.jsx(dg,{className:"w-4 h-4 mr-2"}),"Order Now"]}),xt.jsxs(vD,{size:"lg",variant:"outline",onClick:e=>{e.stopPropagation(),i(!0)},className:"border-amber-500/50 text-amber-200 hover:bg-amber-500/10",children:[xt.jsx(rf,{className:"w-4 h-4 mr-2"}),"Preview Pages"]})]})]})]})}),u]}):"compact"===e?xt.jsxs(xt.Fragment,{children:[xt.jsxs("div",{className:"relative flex items-center gap-5 p-5 rounded-2xl border border-amber-500/30 bg-gradient-to-r from-slate-900/95 via-slate-800/95 to-slate-900/95 backdrop-blur-sm overflow-hidden shadow-xl shadow-amber-900/20",style:{isolation:"isolate"},children:[xt.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-transparent via-amber-500/60 to-transparent"}),xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-[0.08] pointer-events-none",style:{backgroundImage:`url(${nL})`},"aria-hidden":"true"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-900/90 via-slate-800/80 to-slate-900/90 pointer-events-none","aria-hidden":"true"}),xt.jsx("button",{onClick:e=>{e.stopPropagation(),i(!0)},className:"relative z-10 flex-shrink-0 group",children:xt.jsxs("div",{className:"relative",children:[xt.jsx("img",{src:U1,alt:"Carlsen in Color",className:"w-24 h-auto rounded-lg shadow-xl shadow-amber-900/30 transition-transform duration-300 group-hover:scale-105 group-hover:-rotate-1"}),xt.jsx("div",{className:"absolute -right-0.5 top-1 bottom-1 w-1 bg-gradient-to-b from-amber-400 via-amber-500 to-amber-600 rounded-r opacity-80"})]})}),xt.jsxs("div",{className:"relative z-10 flex-1 min-w-0 space-y-1",children:[xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsx("h4",{className:"font-serif text-lg font-bold text-amber-50 tracking-wide",children:"Carlsen in Color"}),xt.jsx(MD,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white text-[10px] font-bold px-2 py-0.5 shadow-lg shadow-amber-500/30",children:"NEW"})]}),xt.jsx("p",{className:"text-sm text-slate-300 font-medium",children:"100 Masterpieces  From $79.99"}),xt.jsx("p",{className:"text-xs text-slate-400 hidden sm:block",children:"Premium hardcover with unique haiku poetry"})]}),n&&xt.jsxs("div",{className:"relative z-10 flex gap-3 flex-shrink-0",children:[xt.jsx(vD,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),i(!0)},className:"text-amber-400 hover:text-amber-300 hover:bg-amber-500/10",children:xt.jsx(rf,{className:"w-4 h-4"})}),xt.jsxs(vD,{size:"sm",onClick:e=>{e.stopPropagation(),i(!0)},className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 text-white shadow-lg shadow-amber-600/30 gap-1.5",children:[xt.jsx(tf,{className:"w-3.5 h-3.5"}),"Order"]})]})]}),u]}):xt.jsxs(xt.Fragment,{children:[xt.jsxs(gD.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6 border border-primary/30",children:[xt.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-primary/20 to-amber-500/10 rounded-full blur-3xl pointer-events-none"}),xt.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-amber-600/10 to-transparent rounded-full blur-2xl pointer-events-none"}),xt.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-transparent via-primary/50 to-transparent"}),xt.jsxs("div",{className:"relative flex flex-col md:flex-row gap-6 items-start",children:[xt.jsx("button",{onClick:()=>i(!0),className:"flex-shrink-0 hover:scale-105 transition-transform group",children:xt.jsxs("div",{className:"relative",children:[xt.jsx("img",{src:U1,alt:"Carlsen in Color",className:"w-40 h-auto rounded-lg shadow-2xl shadow-amber-900/40"}),xt.jsx("div",{className:"absolute -right-0.5 top-1 bottom-1 w-1 bg-gradient-to-b from-amber-400 via-amber-500 to-amber-600 rounded-r opacity-80"}),xt.jsx("div",{className:"absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity bg-gradient-to-t from-amber-500/20 to-transparent pointer-events-none"})]})}),xt.jsxs("div",{className:"flex-1 space-y-4",children:[xt.jsx("div",{className:"flex items-center gap-2",children:xt.jsxs(MD,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg shadow-amber-600/30",children:[xt.jsx(gg,{className:"w-3 h-3 mr-1"}),"NEW RELEASE"]})}),xt.jsx("h3",{className:"text-2xl font-serif font-bold text-white tracking-wide",children:"Carlsen in Color"}),xt.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:"A premium coffee table book featuring 100 En Pensent visualizations of Magnus Carlsen's greatest games with unique haiku poetry."}),xt.jsxs("div",{className:"flex items-center gap-6 text-sm pt-1",children:[xt.jsxs("span",{className:"text-slate-400",children:["Standard: ",xt.jsx("strong",{className:"text-white font-semibold",children:"$79.99"})]}),xt.jsxs("span",{className:"text-slate-400",children:["Large: ",xt.jsx("strong",{className:"text-primary font-semibold",children:"$99.99"})]})]}),n&&xt.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[xt.jsxs(vD,{onClick:()=>i(!0),className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 text-white shadow-lg shadow-amber-600/30",children:[xt.jsx(dg,{className:"w-4 h-4 mr-2"}),"Order Now"]}),xt.jsxs(vD,{variant:"outline",onClick:()=>i(!0),className:"border-primary/50 text-primary hover:bg-primary/10 hover:text-primary",children:[xt.jsx(rf,{className:"w-4 h-4 mr-2"}),"Preview Pages"]})]})]})]})]}),u]})});h2.displayName="BookShowcase";const p2=ct.forwardRef(({variant:e="homepage",className:t=""},n)=>{var r;const{data:a}=tk({queryKey:["education-fund-summary"],queryFn:async()=>{const{data:e,error:t}=await KC.from("education_fund").select("fund_contribution_cents, visions_released");if(t)throw t;const n=(null==e?void 0:e.reduce((e,t)=>e+(t.fund_contribution_cents||0),0))||0,r=(null==e?void 0:e.reduce((e,t)=>e+(t.visions_released||0),0))||0;return{totalFundDollars:n/100,scholarshipsCount:Math.floor(n/700),visionsReleased:r}},staleTime:6e4});return"card"===e?xt.jsx(qN,{to:"/education-fund",className:t,children:xt.jsx(DD,{className:"group border-emerald-500/20 hover:border-emerald-500/40 bg-gradient-to-br from-emerald-500/5 to-teal-500/5 transition-all cursor-pointer",children:xt.jsxs($D,{className:"p-4 flex items-center gap-3",children:[xt.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-500/10 flex items-center justify-center shrink-0",children:xt.jsx(vf,{className:"h-5 w-5 text-emerald-500"})}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsx("h4",{className:"font-display text-sm font-medium truncate",children:"Chess Education Fund"}),xt.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[(null==a?void 0:a.scholarshipsCount)||0," scholarships funded"]})]}),xt.jsx(Lm,{className:"h-4 w-4 text-muted-foreground group-hover:text-emerald-500 transition-colors"})]})})}):"compact"===e?xt.jsxs(qN,{to:"/education-fund",className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 hover:border-emerald-500/40 text-sm text-emerald-600 dark:text-emerald-400 transition-all ${t}`,children:[xt.jsx(vf,{className:"h-4 w-4"}),xt.jsx("span",{className:"font-medium",children:"Education Fund"}),xt.jsxs(MD,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:[(null==a?void 0:a.scholarshipsCount)||0," scholarships"]})]}):xt.jsx("section",{className:`py-16 ${t}`,children:xt.jsx("div",{className:"container mx-auto px-4",children:xt.jsx(gD.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"max-w-4xl mx-auto",children:xt.jsx(DD,{className:"overflow-hidden border-emerald-500/20 bg-gradient-to-br from-emerald-500/5 via-teal-500/5 to-cyan-500/5",children:xt.jsx($D,{className:"p-8 md:p-12",children:xt.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center",children:[xt.jsxs("div",{className:"text-center md:text-left space-y-4 flex-1",children:[xt.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-600 dark:text-emerald-400 text-xs font-display uppercase tracking-wider",children:[xt.jsx(bf,{className:"h-3.5 w-3.5"}),"Giving Back"]}),xt.jsxs("h2",{className:"text-2xl md:text-3xl font-royal font-bold uppercase tracking-wide",children:["Chess ",xt.jsx("span",{className:"text-emerald-500",children:"Education"})," Fund"]}),xt.jsx("p",{className:"text-muted-foreground font-serif leading-relaxed max-w-lg",children:"Every premium membership contributes to scholarships for underprivileged students. When memberships lapse, vision values flow directly to chess education worldwide."}),xt.jsxs("div",{className:"flex flex-wrap gap-6 justify-center md:justify-start pt-2",children:[xt.jsxs("div",{className:"text-center",children:[xt.jsxs("p",{className:"text-2xl font-bold text-emerald-500",children:["$",(null==(r=null==a?void 0:a.totalFundDollars)?void 0:r.toFixed(0))||"0"]}),xt.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Total Funded"})]}),xt.jsxs("div",{className:"text-center",children:[xt.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:(null==a?void 0:a.scholarshipsCount)||0}),xt.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Scholarships"})]}),xt.jsxs("div",{className:"text-center",children:[xt.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:xt.jsx(yf,{className:"h-6 w-6 inline"})}),xt.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Worldwide"})]})]})]}),xt.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[xt.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-emerald-500/20 to-teal-500/20 flex items-center justify-center",children:xt.jsx(vf,{className:"h-12 w-12 text-emerald-500"})}),xt.jsx(qN,{to:"/education-fund",children:xt.jsxs(vD,{variant:"outline",className:"gap-2 border-emerald-500/30 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-500/10",children:[xt.jsx(gg,{className:"h-4 w-4"}),"Learn More",xt.jsx(Lm,{className:"h-4 w-4"})]})})]})]})})})})})})});p2.displayName="EducationFundShowcase";const m2=[{id:"natural-frame-canvas",src:"/assets/natural-frame-canvas-BVb8cI8r.jpg",title:"Natural Wood Frame",setting:"Wall Display",frame:"Natural Wood",mood:"Warm & Inviting",description:"Premium canvas print in natural oak frame showing visible canvas texture and warm gallery lighting"},{id:"black-frame-product",src:"/assets/black-frame-product-C9csGL_n.jpg",title:"Classic Black Frame",setting:"Product Shot",frame:"Classic Black",mood:"Modern Elegance",description:"Sleek matte black frame with canvas print, studio lighting highlighting canvas weave and clean frame lines"},{id:"white-frame-lifestyle",src:"/assets/white-frame-lifestyle-DLcj0JKW.jpg",title:"Gallery White Frame",setting:"Living Room",frame:"Gallery White",mood:"Contemporary",description:"Clean white frame in elegant living space with natural light reflecting off premium canvas surface"},{id:"walnut-frame-detail",src:"/assets/walnut-frame-detail-DUHzOmk1.jpg",title:"Rich Walnut Frame",setting:"Dark Background",frame:"Rich Walnut",mood:"Luxurious",description:"Deep walnut wood grain frame with studio lighting showcasing print quality and craftsmanship"},{id:"gold-frame-office",src:"/assets/gold-frame-office-BjUKGZXP.jpg",title:"Champagne Gold Frame",setting:"Modern Office",frame:"Champagne Gold",mood:"Premium",description:"Elegant champagne gold frame in luxury office setting with metallic shimmer and canvas texture visible"},{id:"unframed-canvas-lean",src:"/assets/unframed-canvas-lean-Bm_EYmA_.jpg",title:"Unframed Canvas",setting:"Leaning Display",mood:"Artist Studio",description:"Gallery-wrapped canvas print leaning against wall showing wrapped edges, thickness and canvas material quality"},{id:"canvas-macro-closeup",src:"/assets/canvas-macro-closeup-B8UGZCTy.jpg",title:"Canvas Texture Detail",setting:"Macro Close-up",mood:"Material Quality",description:"Extreme macro showing individual canvas threads, ink saturation and archival print quality"},{id:"hands-canvas-print",src:"/assets/hands-canvas-print-q6k7S8wB.jpg",title:"Canvas in Hand",setting:"Product Demo",mood:"Authentic Scale",description:"Hands holding the canvas print showing thickness, wrapped edges and real-world scale"},{id:"bedroom-natural-frame",src:"/assets/bedroom-natural-frame-DPYlSrlR.jpg",title:"Bedroom Sanctuary",setting:"Modern Bedroom",frame:"Natural Wood",mood:"Peaceful",description:"Print as bedroom centerpiece above the bed with soft morning light illuminating the artwork"},{id:"restaurant-black-frame",src:"/assets/restaurant-black-frame-Bpfj-Ipf.jpg",title:"Fine Dining",setting:"Restaurant",frame:"Classic Black",mood:"Sophisticated",description:"Upscale restaurant with exposed brick, warm ambient lighting highlighting the framed art"},{id:"gallery-wall-collection",src:"/assets/gallery-wall-collection-DJBAqfeQ.jpg",title:"Gallery Collection",setting:"Art Gallery",frame:"Gallery White",mood:"Museum Quality",description:"Multiple prints displayed in professional gallery setting with museum lighting"},{id:"hotel-lobby-gold",src:"/assets/hotel-lobby-gold-ByUQ4Tc0.jpg",title:"Luxury Hotel",setting:"Hotel Lobby",frame:"Champagne Gold",mood:"Prestigious",description:"Grand hotel lobby with marble surfaces and the gold-framed print as a statement piece"},{id:"studio-loft-canvas",src:"/assets/studio-loft-canvas-Dprbn7n6.jpg",title:"Artist Loft",setting:"Creative Studio",mood:"Artistic",description:"Industrial loft workspace with large canvas print, natural light through warehouse windows"},{id:"library-walnut-frame",src:"/assets/library-walnut-frame-NPivLuvh.jpg",title:"Private Library",setting:"Home Study",frame:"Rich Walnut",mood:"Scholarly",description:"Classic study with dark wood bookshelves and the walnut-framed print as focal art"}],f2=({className:e,compact:t=!1,showTitle:n=!0,maxImages:r,autoplay:a=!1,onImageClick:i})=>{const[s,o]=ct.useState(null),[l,c]=ct.useState(0),u=r?m2.slice(0,r):m2;ut.useEffect(()=>{if(!a||null!==s)return;const e=setInterval(()=>{c(e=>(e+1)%u.length)},5e3);return()=>clearInterval(e)},[a,s,u.length]);const d=()=>{null!==s?o(0===s?u.length-1:s-1):c(0===l?u.length-1:l-1)},h=()=>{null!==s?o(s===u.length-1?0:s+1):c(l===u.length-1?0:l+1)};return t?xt.jsx("div",{className:Cy("relative overflow-hidden rounded-xl",e),children:xt.jsxs("div",{className:"relative aspect-[16/9] md:aspect-[21/9]",children:[xt.jsx(yT,{mode:"wait",children:xt.jsx(gD.img,{src:u[l].src,alt:u[l].title,className:"absolute inset-0 w-full h-full object-cover",initial:{opacity:0,scale:1.05},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.5}},u[l].id)}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/20"}),xt.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex items-end justify-between",children:[xt.jsxs("div",{className:"space-y-1",children:[xt.jsx("h3",{className:"text-white font-display text-lg md:text-xl font-bold",children:u[l].title}),xt.jsxs("div",{className:"flex items-center gap-2",children:[u[l].frame&&xt.jsxs(MD,{className:"bg-white/20 text-white border-white/30 text-xs",children:[xt.jsx(df,{className:"h-3 w-3 mr-1"}),u[l].frame]}),xt.jsx(MD,{className:"bg-primary/80 text-primary-foreground text-xs",children:u[l].mood})]})]}),xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx(vD,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",onClick:d,children:xt.jsx(Im,{className:"h-4 w-4"})}),xt.jsx(vD,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white hover:bg-white/20",onClick:h,children:xt.jsx(Lm,{className:"h-4 w-4"})})]})]}),xt.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-1.5",children:u.map((e,t)=>xt.jsx("button",{className:Cy("w-1.5 h-1.5 rounded-full transition-all duration-300",t===l?"bg-white w-4":"bg-white/40 hover:bg-white/60"),onClick:()=>c(t)},t))})]})}):xt.jsxs("div",{className:Cy("space-y-4",e),children:[n&&xt.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[xt.jsx(gg,{className:"h-5 w-5 text-primary"}),xt.jsx("h2",{className:"font-display text-xl font-bold",children:"See Your Art in Any Space"})]}),xt.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:u.map((e,t)=>xt.jsxs(gD.div,{className:"group relative aspect-[4/3] rounded-lg overflow-hidden cursor-pointer bg-muted",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{i?i(e):o(t)},children:[xt.jsx("img",{src:e.src,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),xt.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:[xt.jsx("div",{className:"text-white text-sm font-medium",children:e.title}),e.frame&&xt.jsxs("div",{className:"text-white/70 text-xs mt-0.5",children:[e.frame," Frame"]})]})]},e.id))}),xt.jsx(yT,{children:null!==s&&xt.jsx(gD.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(null),children:xt.jsxs(gD.div,{className:"relative max-w-5xl w-full",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[xt.jsx(vD,{variant:"ghost",size:"icon",className:"absolute -top-12 right-0 text-white hover:bg-white/10",onClick:()=>o(null),children:xt.jsx(Mg,{className:"h-6 w-6"})}),xt.jsxs("div",{className:"relative",children:[xt.jsx("img",{src:u[s].src,alt:u[s].title,className:"w-full h-auto rounded-lg shadow-2xl"}),xt.jsx(vD,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 h-10 w-10 text-white bg-black/30 hover:bg-black/50",onClick:e=>{e.stopPropagation(),d()},children:xt.jsx(Im,{className:"h-6 w-6"})}),xt.jsx(vD,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 h-10 w-10 text-white bg-black/30 hover:bg-black/50",onClick:e=>{e.stopPropagation(),h()},children:xt.jsx(Lm,{className:"h-6 w-6"})})]}),xt.jsxs("div",{className:"mt-4 text-center text-white",children:[xt.jsx("h3",{className:"text-xl font-display font-bold",children:u[s].title}),xt.jsx("p",{className:"text-white/70 mt-1",children:u[s].description}),xt.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[u[s].frame&&xt.jsxs(MD,{className:"bg-white/20 border-white/30",children:[xt.jsx(df,{className:"h-3 w-3 mr-1"}),u[s].frame]}),xt.jsx(MD,{variant:"secondary",children:u[s].mood})]})]}),xt.jsx("div",{className:"flex items-center justify-center gap-2 mt-4 overflow-x-auto py-2",children:u.map((e,t)=>xt.jsx("button",{className:Cy("w-16 h-12 rounded-md overflow-hidden flex-shrink-0 transition-all",t===s?"ring-2 ring-white ring-offset-2 ring-offset-black":"opacity-50 hover:opacity-75"),onClick:()=>o(t),children:xt.jsx("img",{src:e.src,alt:e.title,className:"w-full h-full object-cover"})},e.id))})]})})})]})},g2={headline:{testId:"membership_headline_v1",testName:"Headline Copy Test",isActive:!0,variants:[{id:"A",name:"Original",description:"Become a Visionary",weight:25},{id:"B",name:"Urgency",description:"Join 2,847 Chess Artists Today",weight:25},{id:"C",name:"Benefit",description:"Unlock Your Chess Art Potential",weight:25},{id:"D",name:"Social Proof",description:"The #1 Chess Visualization Platform",weight:25}]},cta:{testId:"membership_cta_v1",testName:"CTA Button Test",isActive:!0,variants:[{id:"A",name:"Original",description:"Become a Visionary",weight:25},{id:"B",name:"Action",description:"Start Creating Now",weight:25},{id:"C",name:"Trial",description:"Try Free for 7 Days",weight:25},{id:"D",name:"Value",description:"Get Premium for $7/mo",weight:25}]},layout:{testId:"membership_layout_v1",testName:"Layout Style Test",isActive:!0,variants:[{id:"A",name:"Grid",description:"4-column feature grid",weight:33},{id:"B",name:"List",description:"Compact feature list",weight:33},{id:"C",name:"Carousel",description:"Swipeable feature cards",weight:34}]},priceDisplay:{testId:"membership_price_v1",testName:"Price Display Test",isActive:!0,variants:[{id:"A",name:"Monthly",description:"$7/month",weight:50},{id:"B",name:"Daily",description:"Less than $0.25/day",weight:50}]}},y2="ep_ab_variants";function v2(e){const t=Object.values(g2).find(t=>t.testId===e);if(!t||!t.isActive)return"A";const n=x2();if(n[e])return n[e].variant;const r=function(e){const t=100*Math.random();let n=0;for(const r of e)if(n+=r.weight,t<=n)return r.id;return e[0].id}(t.variants);return function(e,t){try{const n=x2();n[e]={variant:t,assignedAt:Date.now()},sessionStorage.setItem(y2,JSON.stringify(n))}catch{}}(e,r),r}function x2(){try{const e=sessionStorage.getItem(y2);return e?JSON.parse(e):{}}catch{return{}}}function b2(){const e=x2(),t={};for(const[n,r]of Object.entries(e))t[n]=r.variant;return t}async function w2(e,t,n,r){try{const{data:{user:a}}=await KC.auth.getUser(),i=sessionStorage.getItem("ep_funnel_session_id"),{error:s}=await KC.from("membership_funnel_events").insert({event_type:`ab_${n}`,user_id:(null==a?void 0:a.id)||null,session_id:i,trigger_source:e,metadata:JSON.stringify({variant:t,test_id:e,...r})});return!s}catch(a){return!1}}async function k2(e,t=30){try{const{data:n,error:r}=await KC.from("membership_funnel_events").select("event_type, metadata").in("event_type",["ab_impression","ab_conversion"]).eq("trigger_source",e).gte("created_at",new Date(Date.now()-24*t*60*60*1e3).toISOString());if(r)throw r;const a={A:{impressions:0,conversions:0},B:{impressions:0,conversions:0},C:{impressions:0,conversions:0},D:{impressions:0,conversions:0}};for(const e of n||[])try{const t="string"==typeof e.metadata?JSON.parse(e.metadata):e.metadata,n=null==t?void 0:t.variant;n&&a[n]&&("ab_impression"===e.event_type?a[n].impressions++:"ab_conversion"===e.event_type&&a[n].conversions++)}catch{}const i=Object.entries(a).filter(([,e])=>e.impressions>0).map(([e,t])=>({variant:e,impressions:t.impressions,conversions:t.conversions,conversionRate:t.impressions>0?t.conversions/t.impressions*100:0})).sort((e,t)=>t.conversionRate-e.conversionRate),s=30,o=i.filter(e=>e.impressions>=s),l=o.length>0?o[0].variant:null;return{variants:i,winner:l,confidence:l&&o.length>1?Math.min(95,50+o[0].impressions/10):0}}catch(n){return{variants:[],winner:null,confidence:0}}}function N2(){const e=function(){const e=v2(g2.headline.testId),t=v2(g2.cta.testId),n=v2(g2.layout.testId),r=v2(g2.priceDisplay.testId),a={A:{main:"Become a Visionary",signIn:"Sign In / Sign Up"},B:{main:"Start Creating Now",signIn:"Get Started Free"},C:{main:"Try Free for 7 Days",signIn:"Start Free Trial"},D:{main:"Get Premium for $7/mo",signIn:"Sign Up for $7/mo"}},i={A:{display:"$7",subtext:"/month"},B:{display:"<$0.25",subtext:"/day"},C:{display:"$7",subtext:"/month"},D:{display:"<$0.25",subtext:"/day"}};return{headline:{A:"Become a Visionary",B:"Join 2,847 Chess Artists Today",C:"Unlock Your Chess Art Potential",D:"The #1 Chess Visualization Platform"}[e],ctaText:a[t].main,ctaSignInText:a[t].signIn,layout:{A:"grid",B:"list",C:"carousel",D:"grid"}[n],priceDisplay:i[r].display,priceSubtext:i[r].subtext}}(),t=ct.useRef(!1);return{variants:e,recordImpressions:async()=>{if(t.current)return;t.current=!0;const e=b2();for(const[t,n]of Object.entries(e))await w2(t,n,"impression")},recordConversions:async()=>{const e=b2();for(const[t,n]of Object.entries(e))await w2(t,n,"conversion")},tests:g2}}function j2(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)||Array.isArray(e)}function _2(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;return JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&n.every(n=>{const r=e[n],a=t[n];return"function"==typeof r?`${r}`==`${a}`:j2(r)&&j2(a)?_2(r,a):r===a})}function S2(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function C2(e){return"number"==typeof e}function P2(e){return"string"==typeof e}function E2(e){return"boolean"==typeof e}function R2(e){return"[object Object]"===Object.prototype.toString.call(e)}function O2(e){return Math.abs(e)}function T2(e){return Math.sign(e)}function M2(e,t){return O2(e-t)}function A2(e){return F2(e).map(Number)}function B2(e){return e[D2(e)]}function D2(e){return Math.max(0,e.length-1)}function I2(e,t){return t===D2(e)}function L2(e,t=0){return Array.from(Array(e),(e,n)=>t+n)}function F2(e){return Object.keys(e)}function $2(e,t){return[e,t].reduce((e,t)=>(F2(t).forEach(n=>{const r=e[n],a=t[n],i=R2(r)&&R2(a);e[n]=i?$2(r,a):a}),e),{})}function z2(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function q2(){let e=[];const t={add:function(n,r,a,i={passive:!0}){let s;if("addEventListener"in n)n.addEventListener(r,a,i),s=()=>n.removeEventListener(r,a,i);else{const e=n;e.addListener(a),s=()=>e.removeListener(a)}return e.push(s),t},clear:function(){e=e.filter(e=>e())}};return t}function V2(e,t,n,r){const a=q2(),i=1e3/60;let s=null,o=0,l=0;function c(e){if(!l)return;s||(s=e,n(),n());const a=e-s;for(s=e,o+=a;o>=i;)n(),o-=i;r(o/i),l&&(l=t.requestAnimationFrame(c))}function u(){t.cancelAnimationFrame(l),s=null,o=0,l=0}return{init:function(){a.add(e,"visibilitychange",()=>{e.hidden&&(s=null,o=0)})},destroy:function(){u(),a.clear()},start:function(){l||(l=t.requestAnimationFrame(c))},stop:u,update:n,render:r}}function W2(e=0,t=0){const n=O2(e-t);function r(t){return t<e}function a(e){return e>t}function i(e){return r(e)||a(e)}return{length:n,max:t,min:e,constrain:function(n){return i(n)?r(n)?e:t:n},reachedAny:i,reachedMax:a,reachedMin:r,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}}}function Q2(e,t,n){const{constrain:r}=W2(0,e),a=e+1;let i=s(t);function s(e){return n?O2((a+e)%a):r(e)}function o(){return i}function l(){return Q2(e,o(),n)}const c={get:o,set:function(e){return i=s(e),c},add:function(e){return l().set(o()+e)},clone:l};return c}function U2(e,t,n,r,a,i,s,o,l,c,u,d,h,p,m,f,g,y,v){const{cross:x,direction:b}=e,w=["INPUT","SELECT","TEXTAREA"],k={passive:!1},N=q2(),j=q2(),_=W2(50,225).constrain(p.measure(20)),S={mouse:300,touch:400},C={mouse:500,touch:600},P=m?43:25;let E=!1,R=0,O=0,T=!1,M=!1,A=!1,B=!1;function D(e){if(!z2(e,r)&&e.touches.length>=2)return I(e);const t=i.readPoint(e),n=i.readPoint(e,x),s=M2(t,R),l=M2(n,O);if(!M&&!B){if(!e.cancelable)return I(e);if(M=s>l,!M)return I(e)}const u=i.pointerMove(e);s>f&&(A=!0),c.useFriction(.3).useDuration(.75),o.start(),a.add(b(u)),e.preventDefault()}function I(e){const t=u.byDistance(0,!1).index!==d.get(),n=i.pointerUp(e)*(m?C:S)[B?"mouse":"touch"],r=function(e,t){const n=d.add(-1*T2(e)),r=u.byDistance(e,!m).distance;return m||O2(e)<_?r:g&&t?.5*r:u.byIndex(n.get(),0).distance}(b(n),t),a=function(e,t){if(0===e||0===t)return 0;if(O2(e)<=O2(t))return 0;const n=M2(O2(e),O2(t));return O2(n/e)}(n,r),s=P-10*a,o=y+a/50;M=!1,T=!1,j.clear(),c.useDuration(s).useFriction(o),l.distance(r,!m),B=!1,h.emit("pointerUp")}function L(e){A&&(e.stopPropagation(),e.preventDefault(),A=!1)}return{init:function(e){if(!v)return;function o(o){(E2(v)||v(e,o))&&function(e){const o=z2(e,r);if(B=o,A=m&&o&&!e.buttons&&E,E=M2(a.get(),s.get())>=2,o&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return w.includes(t)}(e.target))return;T=!0,i.pointerDown(e),c.useFriction(0).useDuration(0),a.set(s),function(){const e=B?n:t;j.add(e,"touchmove",D,k).add(e,"touchend",I).add(e,"mousemove",D,k).add(e,"mouseup",I)}(),R=i.readPoint(e),O=i.readPoint(e,x),h.emit("pointerDown")}(o)}const l=t;N.add(l,"dragstart",e=>e.preventDefault(),k).add(l,"touchmove",()=>{},k).add(l,"touchend",()=>{}).add(l,"touchstart",o).add(l,"mousedown",o).add(l,"touchcancel",I).add(l,"contextmenu",I).add(l,"click",L,!0)},destroy:function(){N.clear(),j.clear()},pointerDown:function(){return T}}}function K2(e,t){let n,r;function a(e){return e.timeStamp}function i(n,r){const a="client"+("x"===(r||e.scroll)?"X":"Y");return(z2(n,t)?n:n.touches[0])[a]}return{pointerDown:function(e){return n=e,r=e,i(e)},pointerMove:function(e){const t=i(e)-i(r),s=a(e)-a(n)>170;return r=e,s&&(n=e),t},pointerUp:function(e){if(!n||!r)return 0;const t=i(r)-i(n),s=a(e)-a(n),o=a(e)-a(r)>170,l=t/s;return s&&!o&&O2(l)>.1?l:0},readPoint:i}}function H2(e,t,n,r,a,i,s){const o=[e].concat(r);let l,c,u=[],d=!1;function h(e){return a.measureSize(s.measure(e))}return{init:function(a){i&&(c=h(e),u=r.map(h),l=new ResizeObserver(n=>{(E2(i)||i(a,n))&&function(n){for(const i of n){if(d)return;const n=i.target===e,s=r.indexOf(i.target),o=n?c:u[s];if(O2(h(n?e:r[s])-o)>=.5){a.reInit(),t.emit("resize");break}}}(n)}),n.requestAnimationFrame(()=>{o.forEach(e=>l.observe(e))}))},destroy:function(){d=!0,l&&l.disconnect()}}}function G2(e,t,n,r,a){const i=a.measure(10),s=a.measure(50),o=W2(.1,.99);let l=!1;function c(){return!l&&(!!e.reachedAny(n.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:c,constrain:function(a){if(!c())return;const l=e.reachedMin(t.get())?"min":"max",u=O2(e[l]-t.get()),d=n.get()-t.get(),h=o.constrain(u/s);n.subtract(d*h),!a&&O2(d)<i&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){l=!e}}}function Y2(e,t,n,r){const a=t.min+.1,i=t.max+.1,{reachedMin:s,reachedMax:o}=W2(a,i);return{loop:function(t){if(!function(e){return 1===e?o(n.get()):-1===e&&s(n.get())}(t))return;const a=e*(-1*t);r.forEach(e=>e.add(a))}}}function Z2(e,t,n,r,a){const{reachedAny:i,removeOffset:s,constrain:o}=r;function l(e){return e.concat().sort((e,t)=>O2(e)-O2(t))[0]}function c(t,r){const a=[t,t+n,t-n];if(!e)return t;if(!r)return l(a);const i=a.filter(e=>T2(e)===r);return i.length?l(i):B2(a)-n}return{byDistance:function(n,r){const l=a.get()+n,{index:u,distance:d}=function(n){const r=e?s(n):o(n),a=t.map((e,t)=>({diff:c(e-r,0),index:t})).sort((e,t)=>O2(e.diff)-O2(t.diff)),{index:i}=a[0];return{index:i,distance:r}}(l),h=!e&&i(l);return!r||h?{index:u,distance:n}:{index:u,distance:n+c(t[u]-d,0)}},byIndex:function(e,n){return{index:e,distance:c(t[e]-a.get(),n)}},shortcut:c}}function X2(e,t,n,r,a,i,s,o){const l={passive:!0,capture:!0};let c=0;function u(e){"Tab"===e.code&&(c=(new Date).getTime())}return{init:function(d){o&&(i.add(document,"keydown",u,!1),t.forEach((t,u)=>{i.add(t,"focus",t=>{(E2(o)||o(d,t))&&function(t){if((new Date).getTime()-c>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;const i=n.findIndex(e=>e.includes(t));C2(i)&&(a.useDuration(0),r.index(i,0),s.emit("slideFocus"))}(u)},l)}))}}}function J2(e){let t=e;function n(e){return C2(e)?e:e.get()}return{get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}}}function e5(e,t){const n="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},r=t.style;let a=null,i=!1;return{clear:function(){i||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(i)return;const s=(o=e.direction(t),Math.round(100*o)/100);var o;s!==a&&(r.transform=n(s),a=s)},toggleActive:function(e){i=!e}}}function t5(e,t,n,r,a,i,s,o,l){const c=A2(a),u=A2(a).reverse(),d=function(){const e=s[0];return m(p(u,e),n,!1)}().concat(function(){const e=t-s[0]-1;return m(p(c,e),-n,!0)}());function h(e,t){return e.reduce((e,t)=>e-a[t],t)}function p(e,t){return e.reduce((e,n)=>h(e,t)>0?e.concat([n]):e,[])}function m(a,s,c){const u=function(e){return i.map((n,a)=>({start:n-r[a]+.5+e,end:n+t-.5+e}))}(s);return a.map(t=>{const r=c?0:-n,a=c?n:0,i=c?"end":"start",s=u[t][i];return{index:t,loopPoint:s,slideLocation:J2(-1),translate:e5(e,l[t]),target:()=>o.get()>s?r:a}})}return{canLoop:function(){return d.every(({index:e})=>h(c.filter(t=>t!==e),t)<=.1)},clear:function(){d.forEach(e=>e.translate.clear())},loop:function(){d.forEach(e=>{const{target:t,translate:n,slideLocation:r}=e,a=t();a!==r.get()&&(n.to(a),r.set(a))})},loopPoints:d}}function n5(e,t,n){let r,a=!1;return{init:function(i){n&&(r=new MutationObserver(e=>{a||(E2(n)||n(i,e))&&function(e){for(const n of e)if("childList"===n.type){i.reInit(),t.emit("slidesChanged");break}}(e)}),r.observe(e,{childList:!0}))},destroy:function(){r&&r.disconnect(),a=!0}}}function r5(e,t,n,r){const a={};let i,s=null,o=null,l=!1;return{init:function(){i=new IntersectionObserver(e=>{l||(e.forEach(e=>{const n=t.indexOf(e.target);a[n]=e}),s=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(e=>i.observe(e))},destroy:function(){i&&i.disconnect(),l=!0},get:function(e=!0){if(e&&s)return s;if(!e&&o)return o;const t=function(e){return F2(a).reduce((t,n)=>{const r=parseInt(n),{isIntersecting:i}=a[r];return(e&&i||!e&&!i)&&t.push(r),t},[])}(e);return e&&(s=t),e||(o=t),t}}}function a5(e,t,n,r,a,i,s,o,l){const{startEdge:c,endEdge:u,direction:d}=e,h=C2(n);return{groupSlides:function(e){return h?function(e,t){return A2(e).filter(e=>e%t===0).map(n=>e.slice(n,n+t))}(e,n):function(e){return e.length?A2(e).reduce((n,h,p)=>{const m=B2(n)||0,f=0===m,g=h===D2(e),y=a[c]-i[m][c],v=a[c]-i[h][u],x=!r&&f?d(s):0,b=O2(v-(!r&&g?d(o):0)-(y+x));return p&&b>t+l&&n.push(h),g&&n.push(e.length),n},[]).map((t,n,r)=>{const a=Math.max(r[n-1]||0);return e.slice(a,t)}):[]}(e)}}}function i5(e,t,n,r,a,i,s){const{align:o,axis:l,direction:c,startIndex:u,loop:d,duration:h,dragFree:p,dragThreshold:m,inViewThreshold:f,slidesToScroll:g,skipSnaps:y,containScroll:v,watchResize:x,watchSlides:b,watchDrag:w,watchFocus:k}=i,N={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:a}=e;return{top:t,right:n+r,bottom:t+a,left:n,width:r,height:a}}},j=N.measure(t),_=n.map(N.measure),S=function(e,t){const n="rtl"===t,r="y"===e,a=!r&&n?-1:1;return{scroll:r?"y":"x",cross:r?"x":"y",startEdge:r?"top":n?"right":"left",endEdge:r?"bottom":n?"left":"right",measureSize:function(e){const{height:t,width:n}=e;return r?t:n},direction:function(e){return e*a}}}(l,c),C=S.measureSize(j),P=function(e){return{measure:function(t){return e*(t/100)}}}(C),E=function(e,t){const n={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}return{measure:function(r,a){return P2(e)?n[e](r):e(t,r,a)}}}(o,C),R=!d&&!!v,O=d||!!v,{slideSizes:T,slideSizesWithGaps:M,startGap:A,endGap:B}=function(e,t,n,r,a,i){const{measureSize:s,startEdge:o,endEdge:l}=e,c=n[0]&&a,u=function(){if(!c)return 0;const e=n[0];return O2(t[o]-e[o])}(),d=function(){if(!c)return 0;const e=i.getComputedStyle(B2(r));return parseFloat(e.getPropertyValue(`margin-${l}`))}(),h=n.map(s),p=n.map((e,t,n)=>{const r=!t,a=I2(n,t);return r?h[t]+u:a?h[t]+d:n[t+1][o]-e[o]}).map(O2);return{slideSizes:h,slideSizesWithGaps:p,startGap:u,endGap:d}}(S,j,_,n,O,a),D=a5(S,C,g,d,j,_,A,B,2),{snaps:I,snapsAligned:L}=function(e,t,n,r,a){const{startEdge:i,endEdge:s}=e,{groupSlides:o}=a,l=o(r).map(e=>B2(e)[s]-e[0][i]).map(O2).map(t.measure),c=r.map(e=>n[i]-e[i]).map(e=>-O2(e)),u=o(c).map(e=>e[0]).map((e,t)=>e+l[t]);return{snaps:c,snapsAligned:u}}(S,E,j,_,D),F=-B2(I)+B2(M),{snapsContained:$,scrollContainLimit:z}=function(e,t,n,r,a){const i=W2(-t+e,0),s=n.map((e,t)=>{const{min:r,max:a}=i,s=i.constrain(e),o=!t,c=I2(n,t);return o?a:c||l(r,s)?r:l(a,s)?a:s}).map(e=>parseFloat(e.toFixed(3))),o=function(){const e=s[0],t=B2(s);return W2(s.lastIndexOf(e),s.indexOf(t)+1)}();function l(e,t){return M2(e,t)<=1}return{snapsContained:function(){if(t<=e+a)return[i.max];if("keepSnaps"===r)return s;const{min:n,max:l}=o;return s.slice(n,l)}(),scrollContainLimit:o}}(C,F,L,v,2),q=R?$:L,{limit:V}=function(e,t,n){const r=t[0];return{limit:W2(n?r-e:B2(t),r)}}(F,q,d),W=Q2(D2(q),u,d),Q=W.clone(),U=A2(n),K=V2(r,a,()=>(({dragHandler:e,scrollBody:t,scrollBounds:n,options:{loop:r}})=>{r||n.constrain(e.pointerDown()),t.seek()})(oe),e=>(({scrollBody:e,translate:t,location:n,offsetLocation:r,previousLocation:a,scrollLooper:i,slideLooper:s,dragHandler:o,animation:l,eventHandler:c,scrollBounds:u,options:{loop:d}},h)=>{const p=e.settled(),m=!u.shouldConstrain(),f=d?p:p&&m,g=f&&!o.pointerDown();g&&l.stop();const y=n.get()*h+a.get()*(1-h);r.set(y),d&&(i.loop(e.direction()),s.loop()),t.to(r.get()),g&&c.emit("settle"),f||c.emit("scroll")})(oe,e)),H=q[W.get()],G=J2(H),Y=J2(H),Z=J2(H),X=J2(H),J=function(e,t,n,r,a,i){let s=0,o=0,l=a,c=i,u=e.get(),d=0;function h(e){return l=e,m}function p(e){return c=e,m}const m={direction:function(){return o},duration:function(){return l},velocity:function(){return s},seek:function(){const t=r.get()-e.get();let a=0;return l?(n.set(e),s+=t/l,s*=c,u+=s,e.add(s),a=u-d):(s=0,n.set(r),e.set(r),a=t),o=T2(a),d=u,m},settled:function(){return O2(r.get()-t.get())<.001},useBaseFriction:function(){return p(i)},useBaseDuration:function(){return h(a)},useFriction:p,useDuration:h};return m}(G,Z,Y,X,h,.68),ee=Z2(d,q,F,V,X),te=function(e,t,n,r,a,i,s){function o(a){const o=a.distance,l=a.index!==t.get();i.add(o),o&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(n.set(t.get()),t.set(a.index),s.emit("select"))}return{distance:function(e,t){o(a.byDistance(e,t))},index:function(e,n){const r=t.clone().set(e);o(a.byIndex(r.get(),n))}}}(K,W,Q,J,ee,X,s),ne=function(e){const{max:t,length:n}=e;return{get:function(e){return n?(e-t)/-n:0}}}(V),re=q2(),ae=r5(t,n,s,f),{slideRegistry:ie}=function(e,t,n,r,a,i){const{groupSlides:s}=a,{min:o,max:l}=r;return{slideRegistry:function(){const r=s(i),a=!e||"keepSnaps"===t;return 1===n.length?[i]:a?r:r.slice(o,l).map((e,t,n)=>{const r=!t,a=I2(n,t);return r?L2(B2(n[0])+1):a?L2(D2(i)-B2(n)[0]+1,B2(n)[0]):e})}()}}(R,v,q,z,D,U),se=X2(e,n,ie,te,J,re,s,k),oe={ownerDocument:r,ownerWindow:a,eventHandler:s,containerRect:j,slideRects:_,animation:K,axis:S,dragHandler:U2(S,e,r,a,X,K2(S,a),G,K,te,J,ee,W,s,P,p,m,y,.68,w),eventStore:re,percentOfView:P,index:W,indexPrevious:Q,limit:V,location:G,offsetLocation:Z,previousLocation:Y,options:i,resizeHandler:H2(t,s,a,n,S,x,N),scrollBody:J,scrollBounds:G2(V,Z,X,J,P),scrollLooper:Y2(F,V,Z,[G,Z,Y,X]),scrollProgress:ne,scrollSnapList:q.map(ne.get),scrollSnaps:q,scrollTarget:ee,scrollTo:te,slideLooper:t5(S,C,F,T,M,I,q,Z,n),slideFocus:se,slidesHandler:n5(t,s,b),slidesInView:ae,slideIndexes:U,slideRegistry:ie,slidesToScroll:D,target:X,translate:e5(S,t)};return oe}const s5={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function o5(e){function t(e,t){return $2(e,t||{})}const n={mergeOptions:t,optionsAtMedia:function(n){const r=n.breakpoints||{},a=F2(r).filter(t=>e.matchMedia(t).matches).map(e=>r[e]).reduce((e,n)=>t(e,n),{});return t(n,a)},optionsMediaQueries:function(t){return t.map(e=>F2(e.breakpoints||{})).reduce((e,t)=>e.concat(t),[]).map(e.matchMedia)}};return n}function l5(e,t,n){const r=e.ownerDocument,a=r.defaultView,i=o5(a),s=function(e){let t=[];const n={init:function(n,r){return t=r.filter(({options:t})=>!1!==e.optionsAtMedia(t).active),t.forEach(t=>t.init(n,e)),r.reduce((e,t)=>Object.assign(e,{[t.name]:t}),{})},destroy:function(){t=t.filter(e=>e.destroy())}};return n}(i),o=q2(),l=function(){let e,t={};function n(e){return t[e]||[]}const r={init:function(t){e=t},emit:function(t){return n(t).forEach(n=>n(e,t)),r},off:function(e,a){return t[e]=n(e).filter(e=>e!==a),r},on:function(e,a){return t[e]=n(e).concat([a]),r},clear:function(){t={}}};return r}(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:d}=i,{on:h,off:p,emit:m}=l,f=S;let g,y,v,x,b=!1,w=c(s5,l5.globalOptions),k=c(w),N=[];function j(t){const n=i5(e,v,x,r,a,t,l);if(t.loop&&!n.slideLooper.canLoop()){return j(Object.assign({},t,{loop:!1}))}return n}function _(t,n){b||(w=c(w,t),k=u(w),N=n||N,function(){const{container:t,slides:n}=k,r=P2(t)?e.querySelector(t):t;v=r||e.children[0];const a=P2(n)?v.querySelectorAll(n):n;x=[].slice.call(a||v.children)}(),g=j(k),d([w,...N.map(({options:e})=>e)]).forEach(e=>o.add(e,"change",S)),k.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init(R),g.eventHandler.init(R),g.resizeHandler.init(R),g.slidesHandler.init(R),g.options.loop&&g.slideLooper.loop(),v.offsetParent&&x.length&&g.dragHandler.init(R),y=s.init(R,N)))}function S(e,t){const n=E();C(),_(c({startIndex:n},e),t),l.emit("reInit")}function C(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),s.destroy(),o.clear()}function P(e,t,n){k.active&&!b&&(g.scrollBody.useBaseFriction().useDuration(!0===t?0:k.duration),g.scrollTo.index(e,n||0))}function E(){return g.index.get()}const R={canScrollNext:function(){return g.index.add(1).get()!==E()},canScrollPrev:function(){return g.index.add(-1).get()!==E()},containerNode:function(){return v},internalEngine:function(){return g},destroy:function(){b||(b=!0,o.clear(),C(),l.emit("destroy"),l.clear())},off:p,on:h,emit:m,plugins:function(){return y},previousScrollSnap:function(){return g.indexPrevious.get()},reInit:f,rootNode:function(){return e},scrollNext:function(e){P(g.index.add(1).get(),e,-1)},scrollPrev:function(e){P(g.index.add(-1).get(),e,1)},scrollProgress:function(){return g.scrollProgress.get(g.offsetLocation.get())},scrollSnapList:function(){return g.scrollSnapList},scrollTo:P,selectedScrollSnap:E,slideNodes:function(){return x},slidesInView:function(){return g.slidesInView.get()},slidesNotInView:function(){return g.slidesInView.get(!1)}};return _(t,n),setTimeout(()=>l.emit("init"),0),R}function c5(e={},t=[]){const n=ct.useRef(e),r=ct.useRef(t),[a,i]=ct.useState(),[s,o]=ct.useState(),l=ct.useCallback(()=>{a&&a.reInit(n.current,r.current)},[a]);return ct.useEffect(()=>{_2(n.current,e)||(n.current=e,l())},[e,l]),ct.useEffect(()=>{(function(e,t){if(e.length!==t.length)return!1;const n=S2(e),r=S2(t);return n.every((e,t)=>_2(e,r[t]))})(r.current,t)||(r.current=t,l())},[t,l]),ct.useEffect(()=>{if("undefined"!=typeof window&&window.document&&window.document.createElement&&s){l5.globalOptions=c5.globalOptions;const e=l5(s,n.current,r.current);return i(e),()=>e.destroy()}i(void 0)},[s,i]),[o,a]}l5.globalOptions=void 0,c5.globalOptions=void 0;const u5=ct.createContext(null);function d5(){const e=ct.useContext(u5);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const h5=ct.forwardRef(({orientation:e="horizontal",opts:t,setApi:n,plugins:r,className:a,children:i,...s},o)=>{const[l,c]=c5({...t,axis:"horizontal"===e?"x":"y"},r),[u,d]=ct.useState(!1),[h,p]=ct.useState(!1),m=ct.useCallback(e=>{e&&(d(e.canScrollPrev()),p(e.canScrollNext()))},[]),f=ct.useCallback(()=>{null==c||c.scrollPrev()},[c]),g=ct.useCallback(()=>{null==c||c.scrollNext()},[c]),y=ct.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),f()):"ArrowRight"===e.key&&(e.preventDefault(),g())},[f,g]);return ct.useEffect(()=>{c&&n&&n(c)},[c,n]),ct.useEffect(()=>{if(c)return m(c),c.on("reInit",m),c.on("select",m),()=>{null==c||c.off("select",m)}},[c,m]),xt.jsx(u5.Provider,{value:{carouselRef:l,api:c,opts:t,orientation:e||("y"===(null==t?void 0:t.axis)?"vertical":"horizontal"),scrollPrev:f,scrollNext:g,canScrollPrev:u,canScrollNext:h},children:xt.jsx("div",{ref:o,onKeyDownCapture:y,className:Cy("relative",a),role:"region","aria-roledescription":"carousel",...s,children:i})})});h5.displayName="Carousel";const p5=ct.forwardRef(({className:e,...t},n)=>{const{carouselRef:r,orientation:a}=d5();return xt.jsx("div",{ref:r,className:"overflow-hidden",children:xt.jsx("div",{ref:n,className:Cy("flex","horizontal"===a?"-ml-4":"-mt-4 flex-col",e),...t})})});p5.displayName="CarouselContent";const m5=ct.forwardRef(({className:e,...t},n)=>{const{orientation:r}=d5();return xt.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:Cy("min-w-0 shrink-0 grow-0 basis-full","horizontal"===r?"pl-4":"pt-4",e),...t})});m5.displayName="CarouselItem";const f5=ct.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},a)=>{const{orientation:i,scrollPrev:s,canScrollPrev:o}=d5();return xt.jsxs(vD,{ref:a,variant:t,size:n,className:Cy("absolute h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!o,onClick:s,...r,children:[xt.jsx(wm,{className:"h-4 w-4"}),xt.jsx("span",{className:"sr-only",children:"Previous slide"})]})});f5.displayName="CarouselPrevious";const g5=ct.forwardRef(({className:e,variant:t="outline",size:n="icon",...r},a)=>{const{orientation:i,scrollNext:s,canScrollNext:o}=d5();return xt.jsxs(vD,{ref:a,variant:t,size:n,className:Cy("absolute h-8 w-8 rounded-full","horizontal"===i?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!o,onClick:s,...r,children:[xt.jsx(Nm,{className:"h-4 w-4"}),xt.jsx("span",{className:"sr-only",children:"Next slide"})]})});g5.displayName="CarouselNext";const y5=[{id:"downloads",icon:ef,title:"HD Downloads",description:"Crystal-clear 4K resolution exports",stats:{label:"Avg downloads/user",value:"47/mo",growth:"+156%"},tooltip:'Export your visualizations in stunning 40964096 resolution, perfect for printing up to 2424" without quality loss. Premium members download an average of 47 images per month.'},{id:"watermark",icon:Nf,title:"No Watermarks",description:"Clean, professional artwork",stats:{label:"Print orders",value:"12K+",growth:"+89%"},tooltip:"Your art, your brand. Watermark-free exports enable professional presentation and resale. Over 12,000 prints ordered by our community."},{id:"gifs",icon:of,title:"Animated GIFs",description:"Share the game journey",stats:{label:"Social shares",value:"340K",growth:"+234%"},tooltip:"Export mesmerizing animated GIFs that tell the complete story of any chess game. Perfect for social media - our GIFs have been shared over 340,000 times."},{id:"gallery",icon:yg,title:"Personal Gallery",description:"7-day grace period protection",stats:{label:"Visions saved",value:"890K",growth:"+67%"},tooltip:"Build your personal museum of chess visualizations. If your subscription lapses, you get a 7-day grace period with reminders before visions become claimable."},{id:"marketplace",icon:Jm,title:"Marketplace Access",description:"0% commission, 3/day transfer limit",stats:{label:"Trading volume",value:"$47K",growth:"+312%"},tooltip:"Buy, sell, or gift your claimed visualizations. 100% holder value retention - we take 0% commission. Each vision has a 3 transfer/24h limit to prevent manipulation."},{id:"royalties",icon:bf,title:"20% Print Royalties",description:"Earn from your collection",stats:{label:"Royalties paid",value:"$8.2K",growth:"+425%"},tooltip:"When anyone orders a print of your vision, you earn 20% of the order value as royalties. Passive income from your art collection."},{id:"analytics",icon:Mm,title:"Premium Analytics",description:"Deep platform insights",stats:{label:"Data points/vision",value:"24",growth:"NEW"},tooltip:"Access 24 unique data points per vision including territory heatmaps, piece activity scores, and market valuation metrics."},{id:"infocards",icon:mf,title:"Info Card Add-Ons",description:"Physical data cards",stats:{label:"Card orders",value:"2.8K",growth:"+178%"},tooltip:"Order beautifully printed info cards with your visualization's complete analytics - piece statistics, territory control, and game phases."}],v5=[{quote:"Changed how I see chess",author:"GM Magnus C.",role:"World Champion"},{quote:"Art meets strategy",author:"Anna R.",role:"Content Creator"},{quote:"Worth every penny",author:"Daniel N.",role:"Chess Streamer"}],x5=[aL,sL,rL,iL,nL,oL,lL,cL],b5={downloads:aL,watermark:sL,gifs:nL,gallery:rL,marketplace:iL,royalties:cL,analytics:lL,infocards:oL},w5=({feature:e,isHighlighted:t,isHovered:n,onHover:r,onLeave:a,idx:i})=>xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsxs(gD.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*i},onMouseEnter:()=>r(e.id),onMouseLeave:a,className:"relative p-4 rounded-xl border cursor-pointer transition-all duration-300 overflow-hidden "+(t?"bg-primary/10 border-primary/50 ring-2 ring-primary/30":"bg-muted/30 border-border/50 hover:bg-muted/50 hover:border-border"),children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-[0.18] transition-opacity duration-300 hover:opacity-[0.25]",style:{backgroundImage:`url(${b5[e.id]||aL})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/90 to-background/70"}),xt.jsx("div",{className:"relative z-10 h-10 w-10 rounded-lg flex items-center justify-center mb-3 "+(t?"bg-primary/20":"bg-muted"),children:xt.jsx(e.icon,{className:"h-5 w-5 "+(t?"text-primary":"text-muted-foreground")})}),xt.jsx("h4",{className:"relative z-10 font-medium text-sm mb-1",children:e.title}),xt.jsx("p",{className:"relative z-10 text-xs text-muted-foreground line-clamp-2",children:e.description}),xt.jsx(yT,{children:(n||t)&&xt.jsx(gD.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"relative z-10 mt-3 pt-3 border-t border-border/50",children:xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsx("span",{className:"text-[10px] text-muted-foreground",children:e.stats.label}),xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("span",{className:"text-xs font-bold text-primary",children:e.stats.value}),xt.jsx(MD,{variant:"secondary",className:"text-[9px] px-1 py-0 h-4 bg-green-500/10 text-green-600",children:e.stats.growth})]})]})})}),xt.jsx("div",{className:"absolute top-2 right-2 z-10 h-5 w-5 rounded-full flex items-center justify-center "+(t?"bg-primary":"bg-muted"),children:xt.jsx(Bm,{className:"h-3 w-3 "+(t?"text-primary-foreground":"text-muted-foreground")})})]})}),xt.jsx(Zb,{side:"top",className:"max-w-xs p-4",children:xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(e.icon,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"font-medium",children:e.title})]}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:e.tooltip}),xt.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[xt.jsx(Ng,{className:"h-3 w-3 text-green-500"}),xt.jsxs("span",{className:"text-xs text-green-600",children:[e.stats.value,"  ",e.stats.growth]})]})]})})]}),k5=ct.forwardRef(({isOpen:e,onClose:t,onAuthRequired:n,trigger:r="general"},a)=>{const{user:i,isPremium:s,isFreeAccount:o,openCheckout:l}=lP(),{variants:c,recordImpressions:u,recordConversions:d}=N2(),[h,p]=ct.useState(!1),[m,f]=ct.useState(null),[g]=ct.useState(()=>Math.floor(Math.random()*x5.length)),y=ct.useRef(0),v=ct.useRef(new Set),x=ct.useRef(!1);ct.useEffect(()=>{e&&!x.current&&(y.current=Date.now(),x.current=!0,YC("modal_view",{trigger_source:r}),u()),e||(x.current=!1,v.current.clear())},[e,r,u]);const b=e=>{f(e),v.current.has(e)||(v.current.add(e),YC("feature_hover",{trigger_source:r,feature_id:e}))},w=()=>{const e=Date.now()-y.current;YC("modal_dismiss",{trigger_source:r,time_on_modal_ms:e,features_viewed:Array.from(v.current)}),t()},k={download:["downloads","watermark"],save:["gallery","marketplace"],gif:["gifs","downloads"],analytics:["analytics","infocards"],marketplace:["marketplace","gallery"],infocard:["infocards","analytics"],general:[]}[r]||[];return xt.jsx(EZ,{open:e,onOpenChange:e=>!e&&t(),children:xt.jsx(MZ,{className:"max-w-4xl max-h-[95vh] overflow-hidden p-0 gap-0",children:xt.jsxs(gD.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:[xt.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[xt.jsx(gD.img,{src:x5[g],alt:"",className:"w-full h-full object-cover",initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:.15},transition:{duration:1.5}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/80 via-background/95 to-background"})]}),xt.jsxs("div",{className:"relative z-10",children:[xt.jsxs(AZ,{className:"p-6 pb-4 text-center border-b border-border/50",children:[xt.jsx("div",{className:"flex justify-center mb-4",children:xt.jsxs(gD.div,{className:"relative rounded-full",animate:{boxShadow:["0 0 20px hsl(var(--primary)/0.3)","0 0 40px hsl(var(--primary)/0.5)","0 0 20px hsl(var(--primary)/0.3)"]},transition:{duration:2,repeat:1/0},children:[xt.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary via-primary/80 to-primary/60 p-1 overflow-hidden",children:xt.jsx("img",{src:NU,alt:"En Pensent",className:"h-full w-full rounded-full object-cover"})}),xt.jsx(gD.div,{className:"absolute -top-1 -right-1 h-6 w-6 rounded-full bg-green-500 flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:xt.jsx(Ag,{className:"h-3 w-3 text-white"})})]})}),xt.jsx(DZ,{className:"font-display text-3xl",children:c.headline.includes("Visionary")?xt.jsxs(xt.Fragment,{children:["Become a ",xt.jsx("span",{className:"text-primary",children:"Visionary"})]}):xt.jsx("span",{className:"text-primary",children:c.headline})}),xt.jsxs("p",{className:"text-muted-foreground mt-2 max-w-md mx-auto",children:["Join "," ",xt.jsxs("span",{className:"text-foreground font-medium",children:[ZC.activeVisionaries.toLocaleString()," chess artists"]})," "," transforming games into masterpieces"]}),xt.jsxs(gD.div,{className:"mt-4 inline-flex items-center gap-2 px-6 py-3 rounded-full bg-primary/10 border border-primary/30",whileHover:{scale:1.02},children:[xt.jsx("span",{className:"text-4xl font-bold text-primary",children:c.priceDisplay}),xt.jsxs("div",{className:"text-left",children:[xt.jsx("p",{className:"text-sm font-medium",children:c.priceSubtext}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Cancel anytime"})]}),xt.jsx(MD,{className:"ml-2 bg-green-500/20 text-green-600 border-green-500/30",children:"95% margin"})]}),xt.jsx(vD,{variant:"ghost",size:"icon",onClick:w,className:"absolute top-4 right-4 h-8 w-8",children:xt.jsx(Mg,{className:"h-4 w-4"})})]}),xt.jsxs("div",{className:"p-6 max-h-[50vh] overflow-y-auto",children:[xt.jsx(Hb,{delayDuration:0,children:"carousel"===c.layout?xt.jsxs(h5,{className:"w-full",children:[xt.jsx(p5,{children:y5.map((e,t)=>{const n=k.includes(e.id);return xt.jsx(m5,{className:"md:basis-1/2 lg:basis-1/3",children:xt.jsx(w5,{feature:e,isHighlighted:n,isHovered:m===e.id,onHover:b,onLeave:()=>f(null),idx:t})},e.id)})}),xt.jsx(f5,{}),xt.jsx(g5,{})]}):"list"===c.layout?xt.jsx("div",{className:"space-y-2",children:y5.map((e,t)=>{const n=k.includes(e.id);return xt.jsxs(gD.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},onMouseEnter:()=>b(e.id),onMouseLeave:()=>f(null),className:"flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all "+(n?"bg-primary/10 border-primary/50":"bg-muted/30 border-border/50 hover:bg-muted/50"),children:[xt.jsx("div",{className:"h-8 w-8 rounded-lg flex items-center justify-center "+(n?"bg-primary/20":"bg-muted"),children:xt.jsx(e.icon,{className:"h-4 w-4 "+(n?"text-primary":"text-muted-foreground")})}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsx("h4",{className:"font-medium text-sm",children:e.title}),xt.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.description})]}),xt.jsx(MD,{variant:"secondary",className:"text-xs bg-green-500/10 text-green-600",children:e.stats.growth})]},e.id)})}):xt.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:y5.map((e,t)=>{const n=k.includes(e.id);return xt.jsx(w5,{feature:e,isHighlighted:n,isHovered:m===e.id,onHover:b,onLeave:()=>f(null),idx:t},e.id)})})}),xt.jsx(gD.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-6 p-4 rounded-xl bg-gradient-to-r from-muted/50 via-muted/30 to-muted/50 border border-border/50",children:xt.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[xt.jsxs("div",{className:"flex items-center gap-3",children:[xt.jsx("div",{className:"flex -space-x-2",children:[1,2,3,4,5].map(e=>xt.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-primary/60 to-primary/40 border-2 border-background flex items-center justify-center",children:xt.jsx(Eg,{className:"h-3 w-3 text-primary-foreground"})},e))}),xt.jsxs("div",{children:[xt.jsxs("p",{className:"text-sm font-medium",children:[ZC.activeVisionaries.toLocaleString()," active Visionaries"]}),xt.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",ZC.weeklyGrowth," this week"]})]})]}),xt.jsxs("div",{className:"flex gap-4 text-center",children:[xt.jsxs("div",{children:[xt.jsxs("p",{className:"text-lg font-bold text-primary",children:[ZC.averageRating,""]}),xt.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Rating"})]}),xt.jsx("div",{className:"w-px bg-border"}),xt.jsxs("div",{children:[xt.jsxs("p",{className:"text-lg font-bold",children:["$",(ZC.currentARR/1e3).toFixed(1),"K"]}),xt.jsx("p",{className:"text-[10px] text-muted-foreground",children:"ARR"})]}),xt.jsx("div",{className:"w-px bg-border"}),xt.jsxs("div",{children:[xt.jsxs("p",{className:"text-lg font-bold text-green-600",children:[ZC.grossMargin,"%"]}),xt.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Margin"})]})]})]})}),xt.jsx("div",{className:"mt-4 flex gap-3 overflow-x-auto pb-2",children:v5.map((e,t)=>xt.jsxs(gD.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6+.1*t},className:"flex-shrink-0 p-3 rounded-lg bg-muted/30 border border-border/50 min-w-[180px]",children:[xt.jsxs("p",{className:"text-xs italic mb-2",children:['"',e.quote,'"']}),xt.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[xt.jsx("span",{className:"font-medium text-foreground",children:e.author})," "," ",e.role]})]},t))})]}),xt.jsxs("div",{className:"p-6 pt-4 border-t border-border/50 bg-gradient-to-t from-muted/50 to-transparent",children:[o&&xt.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-primary/5 border border-primary/20 text-center",children:[xt.jsx("p",{className:"text-sm text-primary font-medium",children:"Ready to unlock your full potential?"}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Your free account is set up  One click to Premium"})]}),xt.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[xt.jsx(vD,{size:"lg",className:"w-full sm:w-auto min-w-[200px] btn-luxury gap-2",onClick:async()=>{const e=Date.now()-y.current;if(!i)return YC("signup_started",{trigger_source:r,time_on_modal_ms:e,features_viewed:Array.from(v.current)}),t(),void(null==n||n());YC(o?"free_to_premium":"checkout_started",{trigger_source:r,time_on_modal_ms:e,features_viewed:Array.from(v.current),account_type:o?"free":"existing"}),d(),p(!0);try{await l(),t()}catch(a){Yy.error("Failed to open checkout")}finally{p(!1)}},disabled:h,children:h?xt.jsxs(xt.Fragment,{children:[xt.jsx(Pf,{className:"h-4 w-4 animate-spin"})," Processing..."]}):o?xt.jsxs(xt.Fragment,{children:[xt.jsx(Zm,{className:"h-4 w-4"}),"Upgrade Now  $6.99/mo",xt.jsx(Lm,{className:"h-4 w-4"})]}):i?xt.jsxs(xt.Fragment,{children:[xt.jsx(Zm,{className:"h-4 w-4"}),c.ctaText,xt.jsx(Lm,{className:"h-4 w-4"})]}):xt.jsxs(xt.Fragment,{children:[xt.jsx(Pg,{className:"h-4 w-4"}),c.ctaSignInText,xt.jsx(Lm,{className:"h-4 w-4"})]})}),xt.jsx(vD,{variant:"ghost",size:"lg",onClick:w,className:"w-full sm:w-auto",children:"Maybe Later"})]}),xt.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs text-muted-foreground",children:[xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx(cg,{className:"h-3 w-3"}),xt.jsx("span",{children:"Secure via Stripe"})]}),xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx(bf,{className:"h-3 w-3"}),xt.jsx("span",{children:"Cancel anytime"})]}),xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx(ff,{className:"h-3 w-3"}),xt.jsx("span",{children:"30-day guarantee"})]})]})]})]})]})})})});k5.displayName="VisionaryMembershipCard";const N5=({isOpen:e,onClose:t,onAuthRequired:n,trigger:r="general"})=>xt.jsx(k5,{isOpen:e,onClose:t,onAuthRequired:n,trigger:r}),j5=({showText:e=!0,size:t="sm"})=>{const{isPremium:n}=lP();if(!n)return null;const r="sm"===t?"h-3 w-3":"h-4 w-4";return xt.jsxs(MD,{variant:"secondary",className:"bg-gradient-to-r from-primary/20 to-primary/10 text-primary border-primary/30 gap-1",children:[xt.jsx(Zm,{className:r}),e&&xt.jsx("span",{children:"Premium"})]})},_5=wZ,S5=kZ,C5=NZ,P5=ct.forwardRef(({className:e,...t},n)=>xt.jsx(jZ,{className:Cy("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));P5.displayName=jZ.displayName;const E5=mm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),R5=ct.forwardRef(({side:e="right",className:t,children:n,...r},a)=>xt.jsxs(C5,{children:[xt.jsx(P5,{}),xt.jsxs(_Z,{ref:a,className:Cy(E5({side:e}),t),...r,children:[n,xt.jsxs(PZ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[xt.jsx(Mg,{className:"h-4 w-4"}),xt.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));R5.displayName=_Z.displayName;const O5=({className:e,...t})=>xt.jsx("div",{className:Cy("flex flex-col space-y-2 text-center sm:text-left",e),...t});O5.displayName="SheetHeader";const T5=ct.forwardRef(({className:e,...t},n)=>xt.jsx(SZ,{ref:n,className:Cy("text-lg font-semibold text-foreground",e),...t}));T5.displayName=SZ.displayName;const M5=ct.forwardRef(({className:e,...t},n)=>xt.jsx(CZ,{ref:n,className:Cy("text-sm text-muted-foreground",e),...t}));M5.displayName=CZ.displayName;const A5=SD(e=>({orderData:null,setOrderData:t=>e({orderData:t}),clearOrderData:()=>e({orderData:null}),setPreviewImage:t=>e(e=>({orderData:e.orderData?{...e.orderData,previewImageBase64:t}:null})),setFen:t=>e(e=>({orderData:e.orderData?{...e.orderData,fen:t}:null}))}));var B5=[" ","Enter","ArrowUp","ArrowDown"],D5=[" ","Enter"],I5="Select",[L5,F5,$5]=tp(I5),[z5]=Kh(I5,[$5,rb]),q5=rb(),[V5,W5]=z5(I5),[Q5,U5]=z5(I5),K5=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:m}=e,f=q5(t),[g,y]=ct.useState(null),[v,x]=ct.useState(null),[b,w]=ct.useState(!1),k=pI(c),[N,j]=wp({prop:r,defaultProp:a??!1,onChange:i,caller:I5}),[_,S]=wp({prop:s,defaultProp:o,onChange:l,caller:I5}),C=ct.useRef(null),P=!g||(m||!!g.closest("form")),[E,R]=ct.useState(new Set),O=Array.from(E).map(e=>e.props.value).join(";");return xt.jsx(xb,{...f,children:xt.jsxs(V5,{required:p,scope:t,trigger:g,onTriggerChange:y,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:lv(),value:_,onValueChange:S,open:N,onOpenChange:j,dir:k,triggerPointerDownPosRef:C,disabled:h,children:[xt.jsx(L5.Provider,{scope:t,children:xt.jsx(Q5,{scope:e.__scopeSelect,onNativeOptionAdd:ct.useCallback(e=>{R(t=>new Set(t).add(e))},[]),onNativeOptionRemove:ct.useCallback(e=>{R(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),P?xt.jsxs(M3,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:_,onChange:e=>S(e.target.value),disabled:h,form:m,children:[void 0===_?xt.jsx("option",{value:""}):null,Array.from(E)]},O):null]})})};K5.displayName=I5;var H5="SelectTrigger",G5=ct.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=q5(n),s=W5(H5,n),o=s.disabled||r,l=Uh(t,s.onTriggerChange),c=F5(n),u=ct.useRef("touch"),[d,h,p]=B3(e=>{const t=c().filter(e=>!e.disabled),n=t.find(e=>e.value===s.value),r=D3(t,e,n);void 0!==r&&s.onValueChange(r.value)}),m=e=>{o||(s.onOpenChange(!0),p()),e&&(s.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return xt.jsx(bb,{asChild:!0,...i,children:xt.jsx(np.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":A3(s.value)?"":void 0,...a,ref:l,onClick:Vh(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&m(e)}),onPointerDown:Vh(a.onPointerDown,e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(m(e),e.preventDefault())}),onKeyDown:Vh(a.onKeyDown,e=>{const t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||B5.includes(e.key)&&(m(),e.preventDefault())})})})});G5.displayName=H5;var Y5="SelectValue",Z5=ct.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...o}=e,l=W5(Y5,n),{onValueNodeHasChildrenChange:c}=l,u=void 0!==i,d=Uh(t,l.onValueNodeChange);return gp(()=>{c(u)},[c,u]),xt.jsx(np.span,{...o,ref:d,style:{pointerEvents:"none"},children:A3(l.value)?xt.jsx(xt.Fragment,{children:s}):i})});Z5.displayName=Y5;var X5=ct.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return xt.jsx(np.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});X5.displayName="SelectIcon";var J5=e=>xt.jsx(yp,{asChild:!0,...e});J5.displayName="SelectPortal";var e3="SelectContent",t3=ct.forwardRef((e,t)=>{const n=W5(e3,e.__scopeSelect),[r,a]=ct.useState();if(gp(()=>{a(new DocumentFragment)},[]),!n.open){const t=r;return t?Sh.createPortal(xt.jsx(r3,{scope:e.__scopeSelect,children:xt.jsx(L5.Slot,{scope:e.__scopeSelect,children:xt.jsx("div",{children:e.children})})}),t):null}return xt.jsx(s3,{...e,ref:t})});t3.displayName=e3;var n3=10,[r3,a3]=z5(e3),i3=Gh("SelectContent.RemoveScroll"),s3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:f,avoidCollisions:g,...y}=e,v=W5(e3,n),[x,b]=ct.useState(null),[w,k]=ct.useState(null),N=Uh(t,e=>b(e)),[j,_]=ct.useState(null),[S,C]=ct.useState(null),P=F5(n),[E,R]=ct.useState(!1),O=ct.useRef(!1);ct.useEffect(()=>{if(x)return tq(x)},[x]),Iz();const T=ct.useCallback(e=>{const[t,...n]=P().map(e=>e.ref.current),[r]=n.slice(-1),a=document.activeElement;for(const i of e){if(i===a)return;if(null==i||i.scrollIntoView({block:"nearest"}),i===t&&w&&(w.scrollTop=0),i===r&&w&&(w.scrollTop=w.scrollHeight),null==i||i.focus(),document.activeElement!==a)return}},[P,w]),M=ct.useCallback(()=>T([j,x]),[T,j,x]);ct.useEffect(()=>{E&&M()},[E,M]);const{onOpenChange:A,triggerPointerDownPosRef:B}=v;ct.useEffect(()=>{if(x){let e={x:0,y:0};const t=t=>{var n,r;e={x:Math.abs(Math.round(t.pageX)-((null==(n=B.current)?void 0:n.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=B.current)?void 0:r.y)??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():x.contains(n.target)||A(!1),document.removeEventListener("pointermove",t),B.current=null};return null!==B.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[x,A,B]),ct.useEffect(()=>{const e=()=>A(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[A]);const[D,I]=B3(e=>{const t=P().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=D3(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),L=ct.useCallback((e,t,n)=>{const r=!O.current&&!n;(void 0!==v.value&&v.value===t||r)&&(_(e),r&&(O.current=!0))},[v.value]),F=ct.useCallback(()=>null==x?void 0:x.focus(),[x]),$=ct.useCallback((e,t,n)=>{const r=!O.current&&!n;(void 0!==v.value&&v.value===t||r)&&C(e)},[v.value]),z="popper"===r?l3:o3,q=z===l3?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:f,avoidCollisions:g}:{};return xt.jsx(r3,{scope:n,content:x,viewport:w,onViewportChange:k,itemRefCallback:L,selectedItem:j,onItemLeave:F,itemTextRefCallback:$,focusSelectedItem:M,selectedItemText:S,position:r,isPositioned:E,searchRef:D,children:xt.jsx($q,{as:i3,allowPinchZoom:!0,children:xt.jsx(qz,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Vh(a,e=>{var t;null==(t=v.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:xt.jsx(up,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:xt.jsx(z,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault(),...y,...q,onPlaced:()=>R(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Vh(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||I(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=P().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>T(t)),e.preventDefault()}})})})})})})});s3.displayName="SelectContentImpl";var o3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=W5(e3,n),s=a3(e3,n),[o,l]=ct.useState(null),[c,u]=ct.useState(null),d=Uh(t,e=>u(e)),h=F5(n),p=ct.useRef(!1),m=ct.useRef(!0),{viewport:f,selectedItem:g,selectedItemText:y,focusSelectedItem:v}=s,x=ct.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&c&&f&&g&&y){const e=i.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),n=i.valueNode.getBoundingClientRect(),a=y.getBoundingClientRect();if("rtl"!==i.dir){const r=a.left-t.left,i=n.left-r,s=e.left-i,l=e.width+s,c=Math.max(l,t.width),u=window.innerWidth-n3,d=az(i,[n3,Math.max(n3,u-c)]);o.style.minWidth=l+"px",o.style.left=d+"px"}else{const r=t.right-a.right,i=window.innerWidth-n.right-r,s=window.innerWidth-e.right-i,l=e.width+s,c=Math.max(l,t.width),u=window.innerWidth-n3,d=az(i,[n3,Math.max(n3,u-c)]);o.style.minWidth=l+"px",o.style.right=d+"px"}const s=h(),l=window.innerHeight-2*n3,u=f.scrollHeight,d=window.getComputedStyle(c),m=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),x=parseInt(d.borderBottomWidth,10),b=m+v+u+parseInt(d.paddingBottom,10)+x,w=Math.min(5*g.offsetHeight,b),k=window.getComputedStyle(f),N=parseInt(k.paddingTop,10),j=parseInt(k.paddingBottom,10),_=e.top+e.height/2-n3,S=l-_,C=g.offsetHeight/2,P=m+v+(g.offsetTop+C),E=b-P;if(P<=_){const e=s.length>0&&g===s[s.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-f.offsetTop-f.offsetHeight,n=P+Math.max(S,C+(e?j:0)+t+x);o.style.height=n+"px"}else{const e=s.length>0&&g===s[0].ref.current;o.style.top="0px";const t=Math.max(_,m+f.offsetTop+(e?N:0)+C)+E;o.style.height=t+"px",f.scrollTop=P-_+f.offsetTop}o.style.margin=`${n3}px 0`,o.style.minHeight=w+"px",o.style.maxHeight=l+"px",null==r||r(),requestAnimationFrame(()=>p.current=!0)}},[h,i.trigger,i.valueNode,o,c,f,g,y,i.dir,r]);gp(()=>x(),[x]);const[b,w]=ct.useState();gp(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);const k=ct.useCallback(e=>{e&&!0===m.current&&(x(),null==v||v(),m.current=!1)},[x,v]);return xt.jsx(c3,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:xt.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:xt.jsx(np.div,{...a,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});o3.displayName="SelectItemAlignedPosition";var l3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=n3,...i}=e,s=q5(n);return xt.jsx(wb,{...s,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});l3.displayName="SelectPopperPosition";var[c3,u3]=z5(e3,{}),d3="SelectViewport",h3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=a3(d3,n),s=u3(d3,n),o=Uh(t,i.onViewportChange),l=ct.useRef(0);return xt.jsxs(xt.Fragment,{children:[xt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),xt.jsx(L5.Slot,{scope:n,children:xt.jsx(np.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Vh(a.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=s;if((null==r?void 0:r.current)&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*n3,a=parseFloat(n.style.minHeight),i=parseFloat(n.style.height),s=Math.max(a,i);if(s<r){const a=s+e,i=Math.min(r,a),o=a-i;n.style.height=i+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});h3.displayName=d3;var p3="SelectGroup",[m3,f3]=z5(p3);ct.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=lv();return xt.jsx(m3,{scope:n,id:a,children:xt.jsx(np.div,{role:"group","aria-labelledby":a,...r,ref:t})})}).displayName=p3;var g3="SelectLabel",y3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=f3(g3,n);return xt.jsx(np.div,{id:a.id,...r,ref:t})});y3.displayName=g3;var v3="SelectItem",[x3,b3]=z5(v3),w3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,o=W5(v3,n),l=a3(v3,n),c=o.value===r,[u,d]=ct.useState(i??""),[h,p]=ct.useState(!1),m=Uh(t,e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,r,a)}),f=lv(),g=ct.useRef("touch"),y=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(""===r)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return xt.jsx(x3,{scope:n,value:r,disabled:a,textId:f,isSelected:c,onItemTextChange:ct.useCallback(e=>{d(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:xt.jsx(L5.ItemSlot,{scope:n,value:r,disabled:a,textValue:u,children:xt.jsx(np.div,{role:"option","aria-labelledby":f,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:m,onFocus:Vh(s.onFocus,()=>p(!0)),onBlur:Vh(s.onBlur,()=>p(!1)),onClick:Vh(s.onClick,()=>{"mouse"!==g.current&&y()}),onPointerUp:Vh(s.onPointerUp,()=>{"mouse"===g.current&&y()}),onPointerDown:Vh(s.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:Vh(s.onPointerMove,e=>{var t;g.current=e.pointerType,a?null==(t=l.onItemLeave)||t.call(l):"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Vh(s.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))}),onKeyDown:Vh(s.onKeyDown,e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(D5.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});w3.displayName=v3;var k3="SelectItemText",N3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=W5(k3,n),o=a3(k3,n),l=b3(k3,n),c=U5(k3,n),[u,d]=ct.useState(null),h=Uh(t,e=>d(e),l.onItemTextChange,e=>{var t;return null==(t=o.itemTextRefCallback)?void 0:t.call(o,e,l.value,l.disabled)}),p=null==u?void 0:u.textContent,m=ct.useMemo(()=>xt.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:f,onNativeOptionRemove:g}=c;return gp(()=>(f(m),()=>g(m)),[f,g,m]),xt.jsxs(xt.Fragment,{children:[xt.jsx(np.span,{id:l.textId,...i,ref:h}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Sh.createPortal(i.children,s.valueNode):null]})});N3.displayName=k3;var j3="SelectItemIndicator",_3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return b3(j3,n).isSelected?xt.jsx(np.span,{"aria-hidden":!0,...r,ref:t}):null});_3.displayName=j3;var S3="SelectScrollUpButton",C3=ct.forwardRef((e,t)=>{const n=a3(S3,e.__scopeSelect),r=u3(S3,e.__scopeSelect),[a,i]=ct.useState(!1),s=Uh(t,r.onScrollButtonChange);return gp(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),a?xt.jsx(R3,{...e,ref:s,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});C3.displayName=S3;var P3="SelectScrollDownButton",E3=ct.forwardRef((e,t)=>{const n=a3(P3,e.__scopeSelect),r=u3(P3,e.__scopeSelect),[a,i]=ct.useState(!1),s=Uh(t,r.onScrollButtonChange);return gp(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;i(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),a?xt.jsx(R3,{...e,ref:s,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});E3.displayName=P3;var R3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=a3("SelectScrollButton",n),s=ct.useRef(null),o=F5(n),l=ct.useCallback(()=>{null!==s.current&&(window.clearInterval(s.current),s.current=null)},[]);return ct.useEffect(()=>()=>l(),[l]),gp(()=>{var e;const t=o().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[o]),xt.jsx(np.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Vh(a.onPointerDown,()=>{null===s.current&&(s.current=window.setInterval(r,50))}),onPointerMove:Vh(a.onPointerMove,()=>{var e;null==(e=i.onItemLeave)||e.call(i),null===s.current&&(s.current=window.setInterval(r,50))}),onPointerLeave:Vh(a.onPointerLeave,()=>{l()})})}),O3=ct.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return xt.jsx(np.div,{"aria-hidden":!0,...r,ref:t})});O3.displayName="SelectSeparator";var T3="SelectArrow";ct.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=q5(n),i=W5(T3,n),s=a3(T3,n);return i.open&&"popper"===s.position?xt.jsx(kb,{...a,...r,ref:t}):null}).displayName=T3;var M3=ct.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=ct.useRef(null),i=Uh(r,a),s=Q$(t);return ct.useEffect(()=>{const e=a.current;if(!e)return;const n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(s!==t&&r){const n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[s,t]),xt.jsx(np.select,{...n,style:{...kp,...n.style},ref:i,defaultValue:t})});function A3(e){return""===e||void 0===e}function B3(e){const t=ap(e),n=ct.useRef(""),r=ct.useRef(0),a=ct.useCallback(e=>{const a=n.current+e;t(a),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),i=ct.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return ct.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function D3(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=(s=e,o=Math.max(a,0),s.map((e,t)=>s[(o+t)%s.length]));var s,o;1===r.length&&(i=i.filter(e=>e!==n));const l=i.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}M3.displayName="SelectBubbleInput";var I3=G5,L3=X5,F3=J5,$3=t3,z3=h3,q3=y3,V3=w3,W3=N3,Q3=_3,U3=C3,K3=E3,H3=O3;const G3=K5,Y3=Z5,Z3=ct.forwardRef(({className:e,children:t,...n},r)=>xt.jsxs(I3,{ref:r,className:Cy("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,xt.jsx(L3,{asChild:!0,children:xt.jsx(Dm,{className:"h-4 w-4 opacity-50"})})]}));Z3.displayName=I3.displayName;const X3=ct.forwardRef(({className:e,...t},n)=>xt.jsx(U3,{ref:n,className:Cy("flex cursor-default items-center justify-center py-1",e),...t,children:xt.jsx(Fm,{className:"h-4 w-4"})}));X3.displayName=U3.displayName;const J3=ct.forwardRef(({className:e,...t},n)=>xt.jsx(K3,{ref:n,className:Cy("flex cursor-default items-center justify-center py-1",e),...t,children:xt.jsx(Dm,{className:"h-4 w-4"})}));J3.displayName=K3.displayName;const e4=ct.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>xt.jsx(F3,{children:xt.jsxs($3,{ref:a,className:Cy("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[xt.jsx(X3,{}),xt.jsx(z3,{className:Cy("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),xt.jsx(J3,{})]})}));e4.displayName=$3.displayName;ct.forwardRef(({className:e,...t},n)=>xt.jsx(q3,{ref:n,className:Cy("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=q3.displayName;const t4=ct.forwardRef(({className:e,children:t,...n},r)=>xt.jsxs(V3,{ref:r,className:Cy("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[xt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:xt.jsx(Q3,{children:xt.jsx(Bm,{className:"h-4 w-4"})})}),xt.jsx(W3,{children:t})]}));t4.displayName=V3.displayName;ct.forwardRef(({className:e,...t},n)=>xt.jsx(H3,{ref:n,className:Cy("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=H3.displayName;const n4=({className:e="",compact:t=!1})=>{const{selectedCurrency:n,setCurrency:r}=J1();return xt.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[!t&&xt.jsx(yf,{className:"h-4 w-4 text-muted-foreground"}),xt.jsxs(G3,{value:n.code,onValueChange:e=>{const t=Z1.find(t=>t.code===e);t&&r(t)},children:[xt.jsx(Z3,{className:t?"w-[90px] h-8 text-xs":"w-[160px]",children:xt.jsx(Y3,{children:xt.jsxs("span",{className:"flex items-center gap-2",children:[xt.jsx("span",{children:n.flag}),xt.jsx("span",{children:n.code})]})})}),xt.jsx(e4,{children:Z1.map(e=>xt.jsx(t4,{value:e.code,children:xt.jsxs("span",{className:"flex items-center gap-2",children:[xt.jsx("span",{children:e.flag}),xt.jsx("span",{className:"font-medium",children:e.code}),!t&&xt.jsxs("span",{className:"text-muted-foreground text-xs",children:["- ",e.name]})]})},e.code))})]})]})},r4={natural:{gradient:"linear-gradient(145deg, #E8D4B8 0%, #C4A77D 30%, #B8956E 70%, #A88560 100%)",shadow:"0 2px 4px rgba(0,0,0,0.3)"},black:{gradient:"linear-gradient(145deg, #2A2A2A 0%, #0A0A0A 30%, #1A1A1A 70%, #0F0F0F 100%)",shadow:"0 2px 4px rgba(0,0,0,0.4)"},white:{gradient:"linear-gradient(145deg, #FFFFFF 0%, #F0F0F0 30%, #E8E8E8 70%, #FAFAFA 100%)",shadow:"0 2px 4px rgba(0,0,0,0.15)"},walnut:{gradient:"linear-gradient(145deg, #6B4423 0%, #5D3A1A 30%, #4A2F15 70%, #3D2610 100%)",shadow:"0 2px 4px rgba(0,0,0,0.4)"},gold:{gradient:"linear-gradient(145deg, #F5E6C8 0%, #D4AF37 30%, #C5A028 70%, #B8941F 100%)",shadow:"0 2px 4px rgba(180,140,30,0.3)"}},a4=({previewImage:e,productImage:t,gameTitle:n,frameStyle:r,isActive:a=!1})=>{const i=(e=>{if(!e)return null;const t=e.toLowerCase();return t.includes("natural")?"natural":t.includes("black")?"black":t.includes("white")?"white":t.includes("walnut")?"walnut":t.includes("gold")||t.includes("champagne")?"gold":"black"})(r),s=i?r4[i]:null;return!!i&&e&&s?xt.jsxs("div",{className:"w-14 h-14 rounded-md overflow-hidden flex-shrink-0 relative flex items-center justify-center "+(a?"ring-2 ring-primary ring-offset-2 ring-offset-background":""),style:{background:"linear-gradient(180deg, #E8E2DC 0%, #D4CEC8 100%)"},children:[xt.jsx("div",{className:"relative flex items-center justify-center",style:{background:s.gradient,boxShadow:s.shadow,padding:"3px",borderRadius:"1px"},children:xt.jsx("div",{style:{background:"#FAFAFA",padding:"1px"},children:xt.jsx("img",{src:e,alt:n||"Chess Vision",className:"w-8 h-10 object-cover",style:{display:"block"}})})}),a&&xt.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-md ring-2 ring-primary/50 animate-pulse"})]}):xt.jsxs("div",{className:"w-14 h-14 bg-secondary/20 rounded-md overflow-hidden flex-shrink-0 relative border border-border/50 "+(a?"ring-2 ring-primary ring-offset-2 ring-offset-background":""),children:[e?xt.jsx("img",{src:e,alt:n||"Chess Vision",className:"w-full h-full object-cover"}):t?xt.jsx("img",{src:t,alt:"Product",className:"w-full h-full object-cover"}):xt.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:xt.jsx(dg,{className:"h-5 w-5 text-muted-foreground"})}),a&&xt.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-md ring-2 ring-primary/50 animate-pulse"})]})},i4=[{minQuantity:1,discountPercent:0,label:"No discount"},{minQuantity:2,discountPercent:10,label:"10% off"},{minQuantity:3,discountPercent:15,label:"15% off"},{minQuantity:4,discountPercent:20,label:"20% off"},{minQuantity:5,discountPercent:25,label:"25% off"},{minQuantity:8,discountPercent:30,label:"30% off"},{minQuantity:10,discountPercent:35,label:"35% off"}],s4={freeRegions:["US","CA"],internationalCost:14.99};function o4(e){let t=i4[0];for(const n of i4)e>=n.minQuantity&&(t=n);return t}function l4(e,t,n="US"){const r=o4(t),a=function(e){const t=o4(e),n=i4.indexOf(t);return n<i4.length-1?i4[n+1]:null}(t),i=e*(r.discountPercent/100),s=e-i,o=a?a.minQuantity-t:0,l=function(e="US"){const t=s4.freeRegions.includes(e);return{isFreeShipping:t,shippingCost:t?0:s4.internationalCost,region:e,regionLabel:{US:"United States",CA:"Canada",international:"International"}[e]}}(n),c=s+l.shippingCost;return{discountPercent:r.discountPercent,discountAmount:i,finalTotal:s,tier:r,nextTier:a,itemsUntilNextTier:o,shipping:l,grandTotal:c}}var c4=ct.forwardRef((e,t)=>xt.jsx(np.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));c4.displayName="Label";var u4=c4;const d4=mm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),h4=ct.forwardRef(({className:e,...t},n)=>xt.jsx(u4,{ref:n,className:Cy(d4(),e),...t}));h4.displayName=u4.displayName;const p4=ct.forwardRef(({isOpen:e,onClose:t,onSuccess:n},r)=>{const[a,i]=ct.useState(!1),[s,o]=ct.useState(""),[l,c]=ct.useState(null);ct.useEffect(()=>{e&&u()},[e]);const u=async()=>{var e;try{const{data:t,error:n}=await KC.auth.mfa.listFactors();if(n)throw n;const r=null==(e=t.totp)?void 0:e.find(e=>"verified"===e.status);r&&c(r.id)}catch(t){}},d=async()=>{if(l&&6===s.length){i(!0);try{const{data:e,error:t}=await KC.auth.mfa.challenge({factorId:l});if(t)throw t;const{error:r}=await KC.auth.mfa.verify({factorId:l,challengeId:e.id,code:s});if(r)throw r;const{data:{user:a}}=await KC.auth.getUser();a&&rP(a.id),Yy.success("Verification successful!"),n(),h()}catch(e){Yy.error("Verification failed",{description:"Invalid code. Please try again."}),o("")}finally{i(!1)}}},h=()=>{o(""),t()};return xt.jsx(EZ,{open:e,onOpenChange:e=>!e&&h(),children:xt.jsxs(MZ,{className:"sm:max-w-md bg-card border-border",children:[xt.jsxs(AZ,{children:[xt.jsxs(DZ,{className:"font-display text-xl flex items-center gap-2",children:[xt.jsx(cg,{className:"h-5 w-5 text-primary"}),"Two-Factor Authentication"]}),xt.jsx(IZ,{children:"Enter the 6-digit code from your authenticator app"})]}),xt.jsxs("div",{className:"space-y-4 py-4",children:[xt.jsxs("div",{className:"space-y-2",children:[xt.jsx(h4,{htmlFor:"mfaCode",children:"Verification Code"}),xt.jsx(EF,{id:"mfaCode",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"000000",value:s,onChange:e=>o(e.target.value.replace(/\D/g,"")),onKeyDown:e=>{"Enter"===e.key&&6===s.length&&d()},className:"text-center text-2xl tracking-widest font-mono",autoFocus:!0})]}),xt.jsx(vD,{className:"w-full btn-luxury",onClick:d,disabled:6!==s.length||a,children:a?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):"Verify"}),xt.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Open your authenticator app and enter the current code for En Pensent"})]})]})})});p4.displayName="MFAVerification";const m4=new class{constructor(){fe(this,"cache",new Map),fe(this,"lastGlobalCleanup",Date.now())}check(e,t){const n=Date.now();n-this.lastGlobalCleanup>6e4&&this.globalCleanup(n,t.windowMs);let r=this.cache.get(e);if(!r){if(this.cache.size>=1e3){const e=this.cache.keys().next().value;e&&this.cache.delete(e)}r={timestamps:[],lastCleanup:n},this.cache.set(e,r)}const a=n-t.windowMs;r.timestamps=r.timestamps.filter(e=>e>a);const i=r.timestamps.length<t.maxRequests;i&&r.timestamps.push(n);const s=r.timestamps[0]||n,o=Math.max(0,s+t.windowMs-n);return{allowed:i,remaining:Math.max(0,t.maxRequests-r.timestamps.length),resetInMs:o,retryAfter:i?void 0:Math.ceil(o/1e3)}}globalCleanup(e,t){this.lastGlobalCleanup=e;const n=e-t;for(const[r,a]of this.cache)a.timestamps.every(e=>e<=n)&&this.cache.delete(r)}getStats(){return{size:this.cache.size,maxSize:1e3}}clear(){this.cache.clear()}},f4={auth:{maxRequests:10,windowMs:6e4},search:{maxRequests:60,windowMs:6e4},download:{maxRequests:10,windowMs:6e4},upload:{maxRequests:20,windowMs:6e4},save:{maxRequests:30,windowMs:6e4},listing:{maxRequests:50,windowMs:6e4},payment:{maxRequests:5,windowMs:6e4},offer:{maxRequests:10,windowMs:6e4},benchmark:{maxRequests:5,windowMs:3e5},scan:{maxRequests:3,windowMs:3e5},lichessApi:{maxRequests:30,windowMs:6e4},lichessCloudEval:{maxRequests:20,windowMs:6e4},chesscomApi:{maxRequests:30,windowMs:6e4}};function g4(){if("undefined"==typeof window)return"server";let e=0;const t=[navigator.userAgent,navigator.language,screen.width,screen.height,(new Date).getTimezoneOffset()].join("|");for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return`browser:${Math.abs(e).toString(36)}`}function y4({profile:e,showToast:t=!0,onLimited:n}){const[r,a]=ct.useState({isLimited:!1,remaining:null,resetInMs:null}),i=ct.useRef(),s=ct.useRef();ct.useEffect(()=>(s.current=g4(),()=>{i.current&&clearTimeout(i.current)}),[]);const o=ct.useCallback(()=>{const r=function(e,t){const n="string"==typeof t?f4[t]:t,r="string"==typeof t?`${t}:${e}`:`custom:${e}`;return m4.check(r,n)}(s.current||g4(),e);return a({isLimited:!r.allowed,remaining:r.remaining,resetInMs:r.resetInMs}),r.allowed||(t&&r.retryAfter&&Yy.error(`Rate limited. Try again in ${r.retryAfter}s`),null==n||n(r),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{a(e=>({...e,isLimited:!1}))},r.resetInMs)),r},[e,t,n]),l=ct.useCallback(()=>{a({isLimited:!1,remaining:null,resetInMs:null}),i.current&&clearTimeout(i.current)},[]);return{check:o,isLimited:r.isLimited,remaining:r.remaining,resetInMs:r.resetInMs,reset:l}}function v4(){return y4({profile:"benchmark"})}const x4=["Save email for personalized experience","Track your visualization views","Get notified about new features","One-click upgrade to Premium anytime"],b4=ct.forwardRef(({isOpen:e,onClose:t,defaultMode:n="signin"},r)=>{const[a,i]=ct.useState(n),[s,o]=ct.useState(""),[l,c]=ct.useState(""),[u,d]=ct.useState(""),[h,p]=ct.useState(""),[m,f]=ct.useState(!1),[g,y]=ct.useState(!1),{signIn:v,signUp:x}=lP(),{check:b,isLimited:w,resetInMs:k}=y4({profile:"auth"}),N=k?Math.ceil(k/1e3):null,j=()=>{o(""),c(""),d(""),p("")};return xt.jsxs("div",{ref:r,children:[xt.jsx(EZ,{open:e&&!g,onOpenChange:e=>!e&&t(),children:xt.jsxs(MZ,{className:"sm:max-w-md bg-card border-border",children:[xt.jsxs(AZ,{children:[xt.jsx(DZ,{className:"font-display text-xl text-center",children:"signin"===a?"Welcome Back":"Create Free Account"}),"signup"===a&&xt.jsx(IZ,{className:"text-center",children:"Start with a free account  Upgrade anytime"})]}),"signup"===a&&xt.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 border border-border/50",children:[xt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[xt.jsx(ff,{className:"h-4 w-4 text-primary"}),xt.jsx("span",{className:"text-sm font-medium",children:"Free Account Includes:"})]}),xt.jsx("ul",{className:"space-y-2",children:x4.map((e,t)=>xt.jsxs("li",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[xt.jsx(Bm,{className:"h-3 w-3 text-green-500 flex-shrink-0"}),e]},t))}),xt.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 flex items-center gap-2",children:[xt.jsx(Zm,{className:"h-4 w-4 text-primary"}),xt.jsxs("span",{className:"text-xs text-primary",children:[xt.jsx("span",{className:"font-medium",children:"Premium features"})," unlock after payment"]})]})]}),xt.jsxs("form",{onSubmit:async e=>{e.preventDefault();if(b().allowed){f(!0);try{if("signin"===a){const{error:e,requiresMFA:n}=await v(s,l);e?Yy.error("Sign in failed",{description:e.message}):n?y(!0):(Yy.success("Welcome back!"),t(),j())}else{const{error:e}=await x(s,l,u,h||void 0);e?Yy.error("Sign up failed",{description:e.message}):(Yy.success("Free account created!",{description:"Upgrade to Premium anytime to unlock all features.",icon:xt.jsx(ff,{className:"h-4 w-4"})}),t(),j())}}finally{f(!1)}}},className:"space-y-4 mt-4",children:["signup"===a&&xt.jsxs("div",{className:"space-y-2",children:[xt.jsx(h4,{htmlFor:"displayName",className:"text-sm font-medium",children:"Display Name"}),xt.jsxs("div",{className:"relative",children:[xt.jsx(Pg,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),xt.jsx(EF,{id:"displayName",type:"text",placeholder:"Your name",value:u,onChange:e=>d(e.target.value),className:"pl-10"})]})]}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsx(h4,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),xt.jsxs("div",{className:"relative",children:[xt.jsx(Tf,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),xt.jsx(EF,{id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:e=>o(e.target.value),required:!0,className:"pl-10"})]})]}),"signup"===a&&xt.jsxs("div",{className:"space-y-2",children:[xt.jsxs(h4,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:["Phone Number",xt.jsx(MD,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:"Optional"})]}),xt.jsxs("div",{className:"relative",children:[xt.jsx(Qf,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),xt.jsx(EF,{id:"phone",type:"tel",placeholder:"+1 (555) 123-4567",value:h,onChange:e=>p(e.target.value),className:"pl-10"})]}),xt.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Get SMS notifications about your visions and exclusive offers"})]}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsx(h4,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),xt.jsxs("div",{className:"relative",children:[xt.jsx(Rf,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),xt.jsx(EF,{id:"password",type:"password",placeholder:"",value:l,onChange:e=>c(e.target.value),required:!0,minLength:6,className:"pl-10"})]})]}),xt.jsx(vD,{type:"submit",disabled:m||w,className:"w-full btn-luxury",children:m?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):w?`Try again in ${N}s`:"signin"===a?"Sign In":xt.jsxs(xt.Fragment,{children:[xt.jsx(gg,{className:"h-4 w-4 mr-2"}),"Create Free Account"]})})]}),xt.jsx("div",{className:"mt-4 text-center",children:xt.jsx("button",{type:"button",onClick:()=>{i("signin"===a?"signup":"signin"),j()},className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:"signin"===a?xt.jsxs(xt.Fragment,{children:["Don't have an account? ",xt.jsx("span",{className:"font-medium text-primary",children:"Sign up free"})]}):xt.jsxs(xt.Fragment,{children:["Already have an account? ",xt.jsx("span",{className:"font-medium text-primary",children:"Sign in"})]})})})]})}),xt.jsx(p4,{isOpen:g,onClose:()=>y(!1),onSuccess:()=>{Yy.success("Welcome back!"),t(),j(),y(!1)}})]})});b4.displayName="AuthModal";const w4=()=>{const[e,t]=ct.useState(!1),[n,r]=ct.useState(!1),[a,i]=ct.useState(!1),s=eN(),o=Zk(),{user:l,isPremium:c}=lP(),{setOrderData:u}=A5(),{items:d,isLoading:h,updateQuantity:p,removeItem:m,createCheckout:f}=l2(),{formatPrice:g,selectedCurrency:y}=J1(),v=d.reduce((e,t)=>e+t.quantity,0),x=d.reduce((e,t)=>e+parseFloat(t.price.amount)*t.quantity,0),b=d.filter(e=>{var t;return null==(t=e.customPrintData)?void 0:t.frameStyle}).length,w=b>=3,k=b>0&&!w?QX:0,N=l4(x,v,"US"),j=N.grandTotal+k;return xt.jsxs(xt.Fragment,{children:[xt.jsxs(_5,{open:e,onOpenChange:t,children:[xt.jsx(S5,{asChild:!0,children:xt.jsxs(vD,{variant:"outline",size:"icon",className:"relative",children:[xt.jsx(dg,{className:"h-5 w-5"}),v>0&&xt.jsx(MD,{className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs bg-primary text-primary-foreground",children:v})]})}),xt.jsxs(R5,{className:"w-full sm:max-w-lg flex flex-col h-full",children:[xt.jsxs(O5,{className:"flex-shrink-0",children:[xt.jsx(T5,{children:"Shopping Cart"}),xt.jsx(M5,{children:0===v?"Your cart is empty":`${v} item${1!==v?"s":""} in your cart`})]}),xt.jsx("div",{className:"flex flex-col flex-1 pt-6 min-h-0",children:0===d.length?xt.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[xt.jsxs("div",{className:"text-center",children:[xt.jsx(dg,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),xt.jsx("p",{className:"text-muted-foreground",children:"Your cart is empty"}),xt.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Create a visualization and order your print!"})]}),!c&&xt.jsx("div",{className:"w-full max-w-xs",children:xt.jsxs("button",{onClick:()=>r(!0),className:"w-full group relative overflow-hidden rounded-xl border border-primary/20 bg-gradient-to-br from-primary/5 to-primary/10 p-4 transition-all hover:border-primary/40 hover:shadow-lg hover:shadow-primary/10",children:[xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/0 via-primary/5 to-primary/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),xt.jsxs("div",{className:"relative flex items-center gap-3",children:[xt.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center flex-shrink-0",children:xt.jsx(Zm,{className:"h-5 w-5 text-white"})}),xt.jsxs("div",{className:"flex-1 text-left",children:[xt.jsx("p",{className:"font-medium text-sm",children:"Become a Visionary"}),xt.jsx("p",{className:"text-xs text-muted-foreground",children:"Unlock HD downloads, trading & more"})]}),xt.jsx(Lm,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"})]}),xt.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs",children:[xt.jsx("span",{className:"text-muted-foreground",children:"2,847 active members"}),xt.jsx("span",{className:"text-primary font-semibold",children:"$7/month"})]})]})})]}):xt.jsxs(xt.Fragment,{children:[xt.jsxs(vD,{variant:"ghost",size:"sm",onClick:()=>t(!1),className:"mb-3 -ml-1 text-muted-foreground hover:text-foreground",children:[xt.jsx(wm,{className:"h-4 w-4 mr-1"}),"Continue Shopping"]}),xt.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 min-h-0",children:[xt.jsx("div",{className:"space-y-3",children:d.map(e=>{var n,r,a,i,l,c,d,h,f,y,v,x,b,w,k,N;(e=>{const t={};if(e.includes("Frame")){const n=e.match(/\+ (.+?) Frame/);n&&(t.frame=n[1])}e.includes("Info Card")&&(t.infoCard=!0)})(e.variantTitle);const j=!!(null==(n=e.customPrintData)?void 0:n.previewImageBase64)||!!(null==(r=e.customPrintData)?void 0:r.gameHash),_="/order-print"===o.pathname&&j,S=uX(null==(a=e.customPrintData)?void 0:a.paletteId),C=dX(null==(i=e.customPrintData)?void 0:i.paletteId),P=hL(null==(l=e.customPrintData)?void 0:l.gameId),E=pX(null==(c=e.customPrintData)?void 0:c.paletteId);return xt.jsxs("div",{className:`relative rounded-lg overflow-hidden transition-all ${_?"ring-2 ring-primary ring-offset-2 ring-offset-background":""} ${j?"cursor-pointer group":""}`,onClick:()=>j&&(e=>{var n,r;if(null==(n=e.customPrintData)?void 0:n.gameHash){t(!1);const n=e.customPrintData.paletteId?`?p=${e.customPrintData.paletteId}`:"";s(`/g/${e.customPrintData.gameHash}${n}`)}else if(null==(r=e.customPrintData)?void 0:r.gameTitle){const e=o.pathname+o.search,n=A5.getState().orderData;n&&u({...n,returnPath:e}),t(!1),s("/order-print")}})(e),children:[(S||P)&&xt.jsxs("div",{className:"relative h-12 w-full overflow-hidden",children:[xt.jsx("img",{src:S||P,alt:C||"Game",className:"w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-black/40 to-transparent"}),xt.jsxs("div",{className:"absolute inset-0 flex items-center px-3 gap-2",children:[S&&xt.jsxs("div",{className:"flex items-center gap-1.5",children:[xt.jsx($f,{className:"h-3 w-3 text-white/90"}),xt.jsx("span",{className:"text-[10px] font-medium text-white/90",children:C}),E&&xt.jsx(MD,{className:"h-4 px-1 text-[8px] bg-gradient-to-r from-amber-500 to-amber-600 border-0",children:"Premium"})]}),P&&!S&&xt.jsxs("div",{className:"flex items-center gap-1.5",children:[xt.jsx(xg,{className:"h-3 w-3 text-white/90"}),xt.jsx("span",{className:"text-[10px] font-medium text-white/90",children:"Famous Game"})]})]})]}),xt.jsxs("div",{className:"flex gap-3 p-3 "+(_?"bg-primary/10":"bg-muted/50 group-hover:bg-muted/70"),children:[xt.jsx(a4,{previewImage:null==(d=e.customPrintData)?void 0:d.previewImageBase64,productImage:null==(v=null==(y=null==(f=null==(h=e.product.node.images)?void 0:h.edges)?void 0:f[0])?void 0:y.node)?void 0:v.url,gameTitle:null==(x=e.customPrintData)?void 0:x.gameTitle,frameStyle:null==(b=e.customPrintData)?void 0:b.frameStyle,isActive:_}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[(null==(w=e.customPrintData)?void 0:w.gameTitle)&&xt.jsx("h4",{className:"font-medium text-sm truncate text-primary",children:e.customPrintData.gameTitle}),(null==(N=null==(k=e.customPrintData)?void 0:k.gameData)?void 0:N.white)&&xt.jsxs("p",{className:"text-[10px] text-muted-foreground truncate",children:[e.customPrintData.gameData.white," vs ",e.customPrintData.gameData.black]}),xt.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[e.product.node.title,"  ",e.selectedOptions.map(e=>e.value).join(" ")]}),xt.jsx("p",{className:"font-semibold text-sm mt-1",children:g(parseFloat(e.price.amount))})]}),xt.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[xt.jsx(vD,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:t=>{t.stopPropagation(),m(e.variantId)},children:xt.jsx(wg,{className:"h-3 w-3"})}),xt.jsxs("div",{className:"flex items-center gap-0.5",children:[xt.jsx(vD,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:t=>{t.stopPropagation(),p(e.variantId,e.quantity-1)},children:xt.jsx(If,{className:"h-3 w-3"})}),xt.jsx("span",{className:"w-6 text-center text-xs",children:e.quantity}),xt.jsx(vD,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:t=>{t.stopPropagation(),p(e.variantId,e.quantity+1)},children:xt.jsx(Kf,{className:"h-3 w-3"})})]})]})]}),j&&xt.jsx("div",{className:"absolute bottom-1 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:xt.jsxs("span",{className:"text-[9px] text-muted-foreground flex items-center gap-1",children:["Click to view ",xt.jsx(Lm,{className:"h-2.5 w-2.5"})]})})]},e.variantId)})}),!c&&d.length>0&&xt.jsx("div",{className:"mt-4 pt-4 border-t border-dashed",children:xt.jsxs("button",{onClick:()=>r(!0),className:"w-full group flex items-center gap-3 p-3 rounded-lg bg-gradient-to-r from-amber-500/10 to-primary/10 border border-amber-500/20 hover:border-amber-500/40 transition-all",children:[xt.jsx(Zm,{className:"h-5 w-5 text-amber-500"}),xt.jsxs("div",{className:"flex-1 text-left",children:[xt.jsx("p",{className:"text-xs font-medium",children:"Unlock exclusive add-ons"}),xt.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Vision Data Cards  HD Downloads  More"})]}),xt.jsx(Lm,{className:"h-4 w-4 text-muted-foreground group-hover:text-amber-500 transition-colors"})]})})]}),xt.jsxs("div",{className:"flex-shrink-0 space-y-3 pt-4 border-t bg-background",children:[xt.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[xt.jsx(Sg,{className:"h-4 w-4 text-blue-500"}),xt.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:"  FREE shipping to USA & Canada"})]}),b>0&&xt.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg text-xs "+(w?"bg-green-500/10 border border-green-500/20 text-green-600 dark:text-green-400":"bg-amber-500/10 border border-amber-500/20 text-amber-600 dark:text-amber-400"),children:[xt.jsx(df,{className:"h-3 w-3"}),xt.jsx("span",{children:w?xt.jsxs(xt.Fragment,{children:[xt.jsx("span",{className:"font-bold",children:"FREE"})," frame shipping (",b," framed)"]}):xt.jsxs(xt.Fragment,{children:["Frame shipping: ",xt.jsxs("span",{className:"font-bold",children:["$",QX]})," (",3-b," more for free)"]})})]}),N.nextTier&&xt.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 rounded-lg p-2 border border-primary/20",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[xt.jsx(ff,{className:"h-3 w-3 text-primary"}),xt.jsxs("span",{children:["Add ",xt.jsxs("span",{className:"font-bold text-primary",children:[N.itemsUntilNextTier," more"]})," for"," ",xt.jsx("span",{className:"font-bold text-primary",children:N.nextTier.label}),"!"]})]}),xt.jsx("div",{className:"mt-1.5 h-1 bg-muted rounded-full overflow-hidden",children:xt.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/70 rounded-full transition-all duration-300",style:{width:v/N.nextTier.minQuantity*100+"%"}})})]}),N.discountPercent>0&&xt.jsxs("div",{className:"flex items-center justify-center gap-2 py-1.5 bg-green-500/10 rounded-lg border border-green-500/20",children:[xt.jsx(gg,{className:"h-3 w-3 text-green-500"}),xt.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[N.tier.label,"  Save ",g(N.discountAmount),"!"]})]}),xt.jsxs("div",{className:"space-y-1",children:[xt.jsxs("div",{className:"flex items-center justify-between",children:[xt.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Currency:"}),xt.jsx(n4,{compact:!0})]}),"USD"!==y.code&&xt.jsxs("p",{className:"text-[10px] text-muted-foreground text-center",children:["Checkout will be in ",y.name]})]}),xt.jsxs("div",{className:"space-y-1 text-xs",children:[xt.jsxs("div",{className:"flex justify-between items-center",children:[xt.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),xt.jsx("span",{className:N.discountPercent>0?"line-through text-muted-foreground":"",children:g(x)})]}),N.discountPercent>0&&xt.jsxs("div",{className:"flex justify-between items-center text-green-600 dark:text-green-400",children:[xt.jsxs("span",{children:["Bulk discount (",N.discountPercent,"%)"]}),xt.jsxs("span",{children:["-",g(N.discountAmount)]})]}),xt.jsxs("div",{className:"flex justify-between items-center",children:[xt.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[xt.jsx(Sg,{className:"h-3 w-3"}),"Shipping"]}),xt.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:k>0?`$${k.toFixed(2)}`:"FREE"})]}),xt.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[xt.jsx("span",{className:"font-semibold",children:"Total"}),xt.jsxs("div",{className:"text-right",children:[xt.jsx("span",{className:"text-lg font-bold",children:g(j)}),"USD"!==y.code&&xt.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[" $",j.toFixed(2)," USD"]})]})]})]}),xt.jsx(vD,{onClick:async()=>{const e=window.open("about:blank","_blank");try{await f();const n=l2.getState().checkoutUrl;n&&e?(e.location.href=n,t(!1)):n&&(window.location.href=n)}catch(n){null==e||e.close()}},className:"w-full",size:"lg",disabled:0===d.length||h,children:h?xt.jsxs(xt.Fragment,{children:[xt.jsx(Pf,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Checkout..."]}):xt.jsxs(xt.Fragment,{children:[xt.jsx(tf,{className:"w-4 h-4 mr-2"}),"Checkout"]})}),xt.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"Int'l shipping at checkout  Processed in USD"})]})]})})]})]}),xt.jsx(k5,{isOpen:n,onClose:()=>r(!1),onAuthRequired:()=>{r(!1),i(!0)},trigger:"general"}),xt.jsx(b4,{isOpen:a,onClose:()=>i(!1)})]})};var k4={exports:{}},N4={},j4=ct;var _4="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},S4=j4.useState,C4=j4.useEffect,P4=j4.useLayoutEffect,E4=j4.useDebugValue;function R4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_4(e,n)}catch(r){return!0}}var O4="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=S4({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return P4(function(){a.value=n,a.getSnapshot=t,R4(a)&&i({inst:a})},[e,n,t]),C4(function(){return R4(a)&&i({inst:a}),e(function(){R4(a)&&i({inst:a})})},[e]),E4(n),n};N4.useSyncExternalStore=void 0!==j4.useSyncExternalStore?j4.useSyncExternalStore:O4,k4.exports=N4;var T4=k4.exports;function M4(){return()=>{}}var A4="Avatar",[B4]=Kh(A4),[D4,I4]=B4(A4),L4=ct.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=ct.useState("idle");return xt.jsx(D4,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:xt.jsx(np.span,{...r,ref:t})})});L4.displayName=A4;var F4="AvatarImage",$4=ct.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,s=I4(F4,n),o=function(e,{referrerPolicy:t,crossOrigin:n}){const r=T4.useSyncExternalStore(M4,()=>!0,()=>!1),a=ct.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[s,o]=ct.useState(()=>V4(i,e));return gp(()=>{o(V4(i,e))},[i,e]),gp(()=>{const e=e=>()=>{o(e)};if(!i)return;const r=e("loaded"),a=e("error");return i.addEventListener("load",r),i.addEventListener("error",a),t&&(i.referrerPolicy=t),"string"==typeof n&&(i.crossOrigin=n),()=>{i.removeEventListener("load",r),i.removeEventListener("error",a)}},[i,n,t]),s}(r,i),l=ap(e=>{a(e),s.onImageLoadingStatusChange(e)});return gp(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?xt.jsx(np.img,{...i,ref:t,src:r}):null});$4.displayName=F4;var z4="AvatarFallback",q4=ct.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=I4(z4,n),[s,o]=ct.useState(void 0===r);return ct.useEffect(()=>{if(void 0!==r){const e=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(e)}},[r]),s&&"loaded"!==i.imageLoadingStatus?xt.jsx(np.span,{...a,ref:t}):null});function V4(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}q4.displayName=z4;var W4=L4,Q4=$4,U4=q4;const K4=ct.forwardRef(({className:e,...t},n)=>xt.jsx(W4,{ref:n,className:Cy("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));K4.displayName=W4.displayName;const H4=ct.forwardRef(({className:e,...t},n)=>xt.jsx(Q4,{ref:n,className:Cy("aspect-square h-full w-full",e),...t}));H4.displayName=Q4.displayName;const G4=ct.forwardRef(({className:e,...t},n)=>xt.jsx(U4,{ref:n,className:Cy("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));G4.displayName=U4.displayName;const Y4=({isOpen:e,onClose:t})=>{const{isPremium:n}=lP(),[r,a]=ct.useState("initial"),[i,s]=ct.useState(!1),[o,l]=ct.useState(null),[c,u]=ct.useState(null),[d,h]=ct.useState(null),[p,m]=ct.useState(""),[f,g]=ct.useState(!1),[y,v]=ct.useState(!1);ct.useEffect(()=>{e&&x()},[e]);const x=async()=>{var e;s(!0);try{const{data:t,error:n}=await KC.auth.mfa.listFactors();if(n)throw n;const r=null==(e=t.totp)?void 0:e.find(e=>"verified"===e.status);g(!!r),r&&h(r.id)}catch(t){}finally{s(!1)}},b=()=>{a("initial"),l(null),u(null),m(""),t()};return n?xt.jsx(EZ,{open:e,onOpenChange:e=>!e&&b(),children:xt.jsxs(MZ,{className:"sm:max-w-md bg-card border-border",children:[xt.jsxs(AZ,{children:[xt.jsxs(DZ,{className:"font-display text-xl flex items-center gap-2",children:[f?xt.jsx(og,{className:"h-5 w-5 text-green-500"}):xt.jsx(cg,{className:"h-5 w-5 text-primary"}),"Two-Factor Authentication"]}),xt.jsx(IZ,{children:f?"Your account is protected with 2FA":"Add an extra layer of security to your account"})]}),i&&"initial"===r?xt.jsx("div",{className:"flex items-center justify-center py-8",children:xt.jsx(Pf,{className:"h-8 w-8 animate-spin text-primary"})}):xt.jsxs(xt.Fragment,{children:["initial"===r&&xt.jsx("div",{className:"space-y-4 py-4",children:f?xt.jsxs(xt.Fragment,{children:[xt.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[xt.jsx(og,{className:"h-8 w-8 text-green-500"}),xt.jsxs("div",{children:[xt.jsx("p",{className:"font-medium text-green-500",children:"2FA Enabled"}),xt.jsx("p",{className:"text-sm text-muted-foreground",children:"Your account has extra security protection"})]})]}),xt.jsx(vD,{variant:"destructive",className:"w-full",onClick:async()=>{if(d){s(!0);try{const{error:e}=await KC.auth.mfa.unenroll({factorId:d});if(e)throw e;g(!1),h(null),a("initial"),Yy.success("Two-factor authentication disabled")}catch(e){Yy.error("Failed to disable 2FA",{description:e.message})}finally{s(!1)}}},disabled:i,children:i?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):xt.jsxs(xt.Fragment,{children:[xt.jsx(lg,{className:"h-4 w-4 mr-2"}),"Disable Two-Factor Authentication"]})})]}):xt.jsxs(xt.Fragment,{children:[xt.jsxs("div",{className:"text-center py-4",children:[xt.jsx(cg,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),xt.jsx("p",{className:"text-muted-foreground",children:"Protect your account with a time-based one-time password (TOTP) from an authenticator app."})]}),xt.jsx(vD,{className:"w-full btn-luxury",onClick:async()=>{var e,t;s(!0);try{const{data:n,error:r}=await KC.auth.mfa.enroll({factorType:"totp",friendlyName:"En Pensent Authenticator"});if(r)throw r;(null==(e=n.totp)?void 0:e.qr_code)&&(null==(t=n.totp)?void 0:t.secret)&&(l(n.totp.qr_code),u(n.totp.secret),h(n.id),a("setup"))}catch(n){Yy.error("Failed to start MFA setup",{description:n.message})}finally{s(!1)}},disabled:i,children:i?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):xt.jsxs(xt.Fragment,{children:[xt.jsx(cg,{className:"h-4 w-4 mr-2"}),"Enable Two-Factor Authentication"]})})]})}),"setup"===r&&o&&xt.jsxs("div",{className:"space-y-4 py-4",children:[xt.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)"}),xt.jsx("div",{className:"flex justify-center",children:xt.jsx("div",{className:"p-4 bg-white rounded-lg",children:xt.jsx("img",{src:o,alt:"MFA QR Code",className:"w-48 h-48"})})}),c&&xt.jsxs("div",{className:"space-y-2",children:[xt.jsx(h4,{className:"text-xs text-muted-foreground",children:"Or enter this code manually:"}),xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx("code",{className:"flex-1 p-2 bg-muted rounded text-xs font-mono break-all",children:c}),xt.jsx(vD,{variant:"outline",size:"icon",onClick:()=>{c&&(navigator.clipboard.writeText(c),v(!0),setTimeout(()=>v(!1),2e3))},className:"shrink-0",children:y?xt.jsx(Bm,{className:"h-4 w-4 text-green-500"}):xt.jsx(Km,{className:"h-4 w-4"})})]})]}),xt.jsx(vD,{className:"w-full",onClick:()=>a("verify"),children:"Continue to Verification"})]}),"verify"===r&&xt.jsxs("div",{className:"space-y-4 py-4",children:[xt.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Enter the 6-digit code from your authenticator app"}),xt.jsxs("div",{className:"space-y-2",children:[xt.jsx(h4,{htmlFor:"verificationCode",children:"Verification Code"}),xt.jsx(EF,{id:"verificationCode",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"000000",value:p,onChange:e=>m(e.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-widest font-mono"})]}),xt.jsxs("div",{className:"flex gap-2",children:[xt.jsx(vD,{variant:"outline",className:"flex-1",onClick:()=>a("setup"),children:"Back"}),xt.jsx(vD,{className:"flex-1 btn-luxury",onClick:async()=>{if(d&&6===p.length){s(!0);try{const{data:e,error:t}=await KC.auth.mfa.challenge({factorId:d});if(t)throw t;const{error:n}=await KC.auth.mfa.verify({factorId:d,challengeId:e.id,code:p});if(n)throw n;a("success"),g(!0),Yy.success("Two-factor authentication enabled!")}catch(e){Yy.error("Verification failed",{description:e.message})}finally{s(!1)}}},disabled:6!==p.length||i,children:i?xt.jsx(Pf,{className:"h-4 w-4 animate-spin"}):"Verify & Enable"})]})]}),"success"===r&&xt.jsxs("div",{className:"text-center py-6",children:[xt.jsx(og,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),xt.jsx("h3",{className:"text-lg font-medium text-green-500 mb-2",children:"2FA Successfully Enabled!"}),xt.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Your account is now protected with two-factor authentication. You'll need to enter a code from your authenticator app when signing in."}),xt.jsx(vD,{onClick:b,children:"Done"})]})]})]})}):xt.jsx(EZ,{open:e,onOpenChange:e=>!e&&b(),children:xt.jsxs(MZ,{className:"sm:max-w-md bg-card border-border",children:[xt.jsx(AZ,{children:xt.jsxs(DZ,{className:"font-display text-xl flex items-center gap-2",children:[xt.jsx(cg,{className:"h-5 w-5 text-primary"}),"Two-Factor Authentication"]})}),xt.jsxs("div",{className:"text-center py-6",children:[xt.jsx(cg,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),xt.jsx("p",{className:"text-muted-foreground mb-4",children:"Two-factor authentication is an exclusive premium feature that adds an extra layer of security to your account."}),xt.jsx(vD,{className:"btn-luxury",onClick:b,children:"Upgrade to Premium"})]})]})})},Z4=({isOpen:e,onClose:t})=>{const[n,r]=ct.useState(null),a="212 555 3287",i="En Pensent",s="ALEC",o="SHELTON",l="Chief Executive Officer",c="358 Exchange Place",u="New York, N.Y. 10099",d="212 555 6390",h="10 4534",p="ceo@enpensent.com",m="enpensent.com",f=async(e,t)=>{try{await navigator.clipboard.writeText(e),r(t),Yy.success(`${t} copied to clipboard`),setTimeout(()=>r(null),2e3)}catch{Yy.error("Failed to copy")}},g=()=>{const e=new Blob(["BEGIN:VCARD\nVERSION:3.0\nN:Shelton;Alec;Arthur;;\nFN:Alec Arthur Shelton\nTITLE:Chief Executive Officer\nORG:En Pensent\nEMAIL:ceo@enpensent.com\nURL:https://www.enpensent.com\nTEL:+1 212 555 3287\nADR:;;358 Exchange Place;New York;N.Y.;10099;USA\nEND:VCARD"],{type:"text/vcard"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="alec-shelton-ceo.vcf",n.click(),URL.revokeObjectURL(t),Yy.success("vCard downloaded successfully")};return xt.jsx(EZ,{open:e,onOpenChange:t,children:xt.jsxs(MZ,{className:"sm:max-w-lg p-0 overflow-hidden bg-transparent border-none shadow-none",children:[xt.jsx(AZ,{className:"sr-only",children:xt.jsx(DZ,{children:"CEO Business Card"})}),xt.jsxs("div",{className:"relative",children:[xt.jsxs(gD.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"relative w-full aspect-[1.75/1] rounded-sm overflow-hidden shadow-2xl",style:{background:"#fdfcfa"},children:[xt.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)' opacity='0.06'/%3E%3C/svg%3E\")"}}),xt.jsxs("div",{className:"relative h-full px-8 sm:px-10 py-5 sm:py-6 flex flex-col justify-between select-none",children:[xt.jsxs("div",{className:"flex justify-between items-start",children:[xt.jsxs("button",{onClick:()=>f(a,"Phone"),className:"text-[10px] sm:text-[11px] tracking-[0.08em] text-stone-700 hover:text-stone-900 transition-colors",style:{fontFamily:'Georgia, "Times New Roman", serif'},children:[a,"Phone"===n&&xt.jsx(Bm,{className:"inline h-3 w-3 ml-1 text-green-600"})]}),xt.jsxs("div",{className:"flex items-center gap-1.5",children:[xt.jsx("span",{className:"text-base sm:text-lg text-stone-800",style:{fontFamily:"Georgia, serif"},children:""}),xt.jsx("span",{className:"text-[11px] sm:text-xs tracking-[0.15em] text-stone-800 font-normal italic",style:{fontFamily:'Georgia, "Times New Roman", serif'},children:i})]})]}),xt.jsxs("div",{className:"text-center",children:[xt.jsxs("h2",{className:"text-xl sm:text-2xl tracking-[0.2em] text-stone-800 font-normal",style:{fontFamily:'Georgia, "Times New Roman", serif'},children:[s," ",o]}),xt.jsx("p",{className:"text-[10px] sm:text-[11px] tracking-[0.12em] text-stone-600 mt-1.5 italic",style:{fontFamily:'Georgia, "Times New Roman", serif'},children:l})]}),xt.jsxs("div",{className:"flex justify-between items-end",children:[xt.jsxs("div",{className:"text-[9px] sm:text-[10px] tracking-[0.05em] text-stone-600 leading-relaxed",style:{fontFamily:'Georgia, "Times New Roman", serif'},children:[xt.jsx("p",{children:c}),xt.jsx("p",{children:u})]}),xt.jsxs("div",{className:"text-[9px] sm:text-[10px] tracking-[0.05em] text-stone-600 text-right leading-relaxed",style:{fontFamily:'Georgia, "Times New Roman", serif'},children:[xt.jsxs("p",{children:[xt.jsx("span",{className:"text-stone-500",children:"fax"})," ",d,xt.jsx("span",{className:"mx-1.5 text-stone-400",children:"|"}),xt.jsx("span",{className:"text-stone-500",children:"telex"})," ",h]}),xt.jsxs("button",{onClick:()=>f(p,"Email"),className:"hover:text-stone-900 transition-colors inline-flex items-center gap-1",children:[p,"Email"===n&&xt.jsx(Bm,{className:"h-2.5 w-2.5 text-green-600"})]})]})]})]}),xt.jsx("div",{className:"absolute inset-0 pointer-events-none border border-stone-200/60 rounded-sm"})]}),xt.jsxs(gD.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex items-center justify-center gap-3 mt-5",children:[xt.jsxs(vD,{variant:"outline",size:"sm",onClick:g,className:"gap-2 bg-background/90 backdrop-blur border-border",children:[xt.jsx(ef,{className:"h-4 w-4"}),"Save Contact"]}),xt.jsxs(vD,{variant:"outline",size:"sm",onClick:async()=>{if(navigator.share)try{await navigator.share({title:"Alec Shelton - CEO, En Pensent",text:`${s} ${o}\n${l}\n${i}\n${p}`,url:`https://${m}`})}catch{}else g()},className:"gap-2 bg-background/90 backdrop-blur border-border",children:[xt.jsx(ig,{className:"h-4 w-4"}),"Share"]}),xt.jsx(vD,{variant:"ghost",size:"icon",onClick:t,className:"bg-background/80 backdrop-blur h-8 w-8",children:xt.jsx(Mg,{className:"h-4 w-4"})})]})]})]})})},X4=()=>{var e;const{user:t,profile:n,isLoading:r,isPremium:a,isFreeAccount:i,mfaStatus:s,signOut:o,openCheckout:l,openCustomerPortal:c}=lP(),u=eN(),[d,h]=ct.useState(!1),[p,m]=ct.useState(!1),[f,g]=ct.useState(!1),[y,v]=ct.useState(!1),[x,b]=ct.useState(!1),[w,k]=ct.useState(0),[N,j]=ct.useState(0);if(ct.useEffect(()=>{(async()=>{if(!t)return b(!1),k(0),void j(0);try{const{data:e,error:n}=await KC.from("user_roles").select("role").eq("user_id",t.id).eq("role","admin").maybeSingle();if(n)throw n;const r=!!e;if(b(r),r){const[e,t]=await Promise.all([KC.from("withdrawal_requests").select("*",{count:"exact",head:!0}).eq("status","pending"),KC.from("dmca_reports").select("*",{count:"exact",head:!0}).eq("status","pending")]);e.error||k(e.count||0),t.error||j(t.count||0)}}catch(e){b(!1)}})()},[t]),r)return xt.jsx("div",{className:"w-8 h-8 rounded-full bg-muted animate-pulse"});if(!t)return xt.jsxs(xt.Fragment,{children:[xt.jsxs(vD,{variant:"outline",size:"sm",onClick:()=>h(!0),className:"gap-2",children:[xt.jsx(Pg,{className:"h-4 w-4"}),xt.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]}),xt.jsxs(vD,{variant:"default",size:"sm",onClick:()=>{h(!0)},className:"gap-1.5 btn-luxury hidden sm:flex",children:[xt.jsx(ff,{className:"h-4 w-4"}),"Free Sign Up"]}),xt.jsx(k5,{isOpen:p,onClose:()=>m(!1),onAuthRequired:()=>{m(!1),h(!0)},trigger:"general"}),xt.jsx(b4,{isOpen:d,onClose:()=>h(!1),defaultMode:"signup"})]});const _=(null==n?void 0:n.display_name)||(null==(e=t.email)?void 0:e.split("@")[0])||"User",S=_.slice(0,2).toUpperCase();return xt.jsxs(xt.Fragment,{children:[xt.jsxs(_Q,{children:[xt.jsx(SQ,{asChild:!0,children:xt.jsxs(vD,{variant:"ghost",size:"sm",className:"gap-2 hover:bg-primary/10",children:[xt.jsxs(K4,{className:"h-7 w-7 border border-border",children:[xt.jsx(H4,{src:(null==n?void 0:n.avatar_url)||void 0,alt:_}),xt.jsx(G4,{className:"text-xs bg-primary/20 text-primary",children:S})]}),xt.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:_}),xt.jsx(j5,{showText:!1})]})}),xt.jsx(OQ,{align:"end",className:"w-56 bg-card border-border z-50 p-0 overflow-hidden",children:xt.jsx(GH,{className:"h-auto max-h-[70vh] overflow-y-auto",children:xt.jsxs("div",{className:"p-1",children:[xt.jsx("div",{className:"px-3 py-2",children:xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsxs(K4,{className:"h-8 w-8 border border-border",children:[xt.jsx(H4,{src:(null==n?void 0:n.avatar_url)||void 0,alt:_}),xt.jsx(G4,{className:"text-xs bg-primary/20 text-primary",children:S})]}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("p",{className:"text-sm font-medium truncate",children:_}),a?xt.jsx(j5,{}):i?xt.jsx(MD,{variant:"outline",className:"text-[9px] px-1 py-0 h-4 bg-muted",children:"FREE"}):null]}),xt.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.email})]})]})}),xt.jsx(AQ,{}),!a&&xt.jsxs(xt.Fragment,{children:[xt.jsxs(TQ,{onClick:()=>m(!0),className:"gap-2 cursor-pointer bg-primary/5 text-primary focus:bg-primary/10 focus:text-primary",children:[xt.jsx(Zm,{className:"h-4 w-4"}),i?"Upgrade to Premium":"Get Premium",i&&xt.jsx(MD,{variant:"secondary",className:"ml-auto text-[9px] px-1.5 bg-green-500/10 text-green-600",children:"Unlock All"})]}),xt.jsx(AQ,{})]}),xt.jsx(MQ,{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Play"}),xt.jsxs(TQ,{onClick:()=>u("/play"),className:"gap-2 cursor-pointer",children:[xt.jsx(hf,{className:"h-4 w-4"}),"Play En Pensent"]}),xt.jsxs(TQ,{onClick:()=>u("/game-history"),className:"gap-2 cursor-pointer",children:[xt.jsx(wf,{className:"h-4 w-4"}),"Game History"]}),xt.jsxs(TQ,{onClick:()=>u("/creative-mode"),className:"gap-2 cursor-pointer",children:[xt.jsx(Ff,{className:"h-4 w-4"}),"Creative Mode",!a&&xt.jsx(Zm,{className:"h-3 w-3 text-primary ml-auto"})]}),xt.jsx(AQ,{}),xt.jsx(MQ,{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Studio"}),xt.jsxs(TQ,{onClick:()=>u("/my-palettes"),className:"gap-2 cursor-pointer",children:[xt.jsx($f,{className:"h-4 w-4"}),"My Palettes"]}),xt.jsxs(TQ,{onClick:()=>u("/my-vision"),className:"gap-2 cursor-pointer",children:[xt.jsx(Nf,{className:"h-4 w-4"}),"My Vision Gallery",!a&&xt.jsx(Zm,{className:"h-3 w-3 text-primary ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/creator-dashboard"),className:"gap-2 cursor-pointer",children:[xt.jsx(Rg,{className:"h-4 w-4"}),"Creator Dashboard",!a&&xt.jsx(Zm,{className:"h-3 w-3 text-primary ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/analytics"),className:"gap-2 cursor-pointer",children:[xt.jsx(Mm,{className:"h-4 w-4"}),"Analytics"]}),x&&xt.jsxs(xt.Fragment,{children:[xt.jsx(AQ,{}),xt.jsxs(MQ,{className:"text-xs text-primary uppercase tracking-wider flex items-center gap-1",children:[xt.jsx(Zm,{className:"h-3 w-3"}),"Admin"]}),xt.jsxs(TQ,{onClick:()=>u("/admin/moderation"),className:"gap-2 cursor-pointer text-primary",children:[xt.jsx(cg,{className:"h-4 w-4"}),"Content Moderation"]}),xt.jsxs(TQ,{onClick:()=>u("/admin/seed-marketplace"),className:"gap-2 cursor-pointer text-primary",children:[xt.jsx(Xm,{className:"h-4 w-4"}),"Seed Marketplace"]}),xt.jsxs(TQ,{onClick:()=>u("/admin/palettes"),className:"gap-2 cursor-pointer text-primary",children:[xt.jsx(Tg,{className:"h-4 w-4"}),"Palette Admin"]}),xt.jsxs(TQ,{onClick:()=>u("/admin/withdrawals"),className:"gap-2 cursor-pointer text-primary",children:[xt.jsx(Sm,{className:"h-4 w-4"}),"Withdrawals",w>0&&xt.jsx("span",{className:"ml-auto bg-destructive text-destructive-foreground text-xs font-medium px-1.5 py-0.5 rounded-full",children:w})]}),xt.jsxs(TQ,{onClick:()=>u("/admin/dmca"),className:"gap-2 cursor-pointer text-primary",children:[xt.jsx(tg,{className:"h-4 w-4"}),"DMCA Reports",N>0&&xt.jsx("span",{className:"ml-auto bg-destructive text-destructive-foreground text-xs font-medium px-1.5 py-0.5 rounded-full",children:N})]}),xt.jsxs(TQ,{onClick:()=>u("/admin/economics"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Mm,{className:"h-4 w-4"}),"CEO Economics",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/admin/ceo-dashboard"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Sf,{className:"h-4 w-4"}),"CEO Dashboard",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/book"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Pm,{className:"h-4 w-4"}),"Book Generator",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/admin/ai-art-bank"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Nf,{className:"h-4 w-4"}),"AI Art Bank",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>v(!0),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(kf,{className:"h-4 w-4"}),"CEO Business Card",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/premium-analytics"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Mm,{className:"h-4 w-4"}),"Premium Analytics",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsx(AQ,{}),xt.jsxs(MQ,{className:"text-xs text-amber-500 uppercase tracking-wider flex items-center gap-1",children:[xt.jsx(Ag,{className:"h-3 w-3"}),"En Pensent Engine"]}),xt.jsxs(TQ,{onClick:()=>u("/admin/system-vitals"),className:"gap-2 cursor-pointer text-amber-500 font-semibold bg-amber-500/10",children:[xt.jsx(Ag,{className:"h-4 w-4 animate-pulse"}),"System Vitals (LIVE)",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/benchmark"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Mm,{className:"h-4 w-4"}),"Benchmark Engine",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/stock-predictions"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Am,{className:"h-4 w-4"}),"Stock Predictions",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/trading"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Ag,{className:"h-4 w-4"}),"Trading Terminal",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/strategic-plan"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(sf,{className:"h-4 w-4"}),"Strategic Plan",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/code-analysis"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Qm,{className:"h-4 w-4"}),"Code Analyzer",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/showcase"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(Hf,{className:"h-4 w-4"}),"Showcase Tour",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/investor-portal"),className:"gap-2 cursor-pointer text-amber-500 font-semibold",children:[xt.jsx(gg,{className:"h-4 w-4"}),"Investor Portal",xt.jsx(Zm,{className:"h-3 w-3 ml-auto"})]})]}),xt.jsx(AQ,{}),xt.jsx(MQ,{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Account"}),a&&xt.jsxs(TQ,{onClick:async()=>{try{a?await c():await l()}catch(e){}},className:"gap-2 cursor-pointer",children:[xt.jsx(Gm,{className:"h-4 w-4"}),"Manage Subscription"]}),xt.jsxs(TQ,{onClick:()=>g(!0),className:"gap-2 cursor-pointer",children:[s.enabled?xt.jsx(og,{className:"h-4 w-4 text-green-500"}):xt.jsx(cg,{className:"h-4 w-4"}),"Security Settings",!a&&xt.jsx(Zm,{className:"h-3 w-3 text-primary ml-auto"})]}),xt.jsxs(TQ,{onClick:()=>u("/account"),className:"gap-2 cursor-pointer",children:[xt.jsx(ag,{className:"h-4 w-4"}),"Account Settings"]}),xt.jsx(AQ,{}),xt.jsxs(TQ,{onClick:()=>o(),className:"gap-2 cursor-pointer text-destructive focus:text-destructive",children:[xt.jsx(Of,{className:"h-4 w-4"}),"Sign Out"]})]})})})]}),xt.jsx(Y4,{isOpen:f,onClose:()=>g(!1)}),xt.jsx(Z4,{isOpen:y,onClose:()=>v(!1)}),xt.jsx(k5,{isOpen:p,onClose:()=>m(!1),onAuthRequired:()=>{m(!1),h(!0)},trigger:"general"}),xt.jsx(b4,{isOpen:d,onClose:()=>h(!1)})]})};function J4({variant:e="outline",size:t="default",className:n="",showLabel:r=!0}){const a=eN();return xt.jsx(Hb,{children:xt.jsxs(Gb,{children:[xt.jsx(Yb,{asChild:!0,children:xt.jsx(gD.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:xt.jsxs(vD,{variant:e,size:t,className:n,onClick:()=>a("/vision-scanner"),children:[xt.jsx(ng,{className:r?"h-4 w-4 mr-2":"h-4 w-4"}),r&&"Scan Vision"]})})}),xt.jsx(Zb,{children:xt.jsx("p",{children:"Scan any En Pensent visualization to find its page"})})]})})}function e6(){const{user:e}=lP(),[t,n]=ct.useState([]),[r,a]=ct.useState(0),[i,s]=ct.useState({isInGracePeriod:!1,gracePeriodEnd:null,daysRemaining:0}),[o,l]=ct.useState(!1),c=ct.useCallback(async()=>{if(!e)return n([]),void a(0);l(!0);try{const{data:t,error:r}=await KC.from("subscription_notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(20);if(r)return;n(t||[]),a((null==t?void 0:t.filter(e=>!e.read_at).length)||0)}finally{l(!1)}},[e]),u=ct.useCallback(async()=>{if(e)try{const{data:t,error:n}=await KC.from("user_subscriptions").select("grace_period_end, subscription_status").eq("user_id",e.id).single();if(n||!(null==t?void 0:t.grace_period_end))return void s({isInGracePeriod:!1,gracePeriodEnd:null,daysRemaining:0});const r=new Date(t.grace_period_end),a=new Date,i=Math.max(0,Math.ceil((r.getTime()-a.getTime())/864e5));s({isInGracePeriod:r>a,gracePeriodEnd:r,daysRemaining:i})}catch(t){}else s({isInGracePeriod:!1,gracePeriodEnd:null,daysRemaining:0})},[e]),d=ct.useCallback(async t=>{if(!e)return;const{error:r}=await KC.from("subscription_notifications").update({read_at:(new Date).toISOString()}).eq("id",t).eq("user_id",e.id);r||(n(e=>e.map(e=>e.id===t?{...e,read_at:(new Date).toISOString()}:e)),a(e=>Math.max(0,e-1)))},[e]),h=ct.useCallback(async()=>{if(!e)return;const{error:t}=await KC.from("subscription_notifications").update({read_at:(new Date).toISOString()}).eq("user_id",e.id).is("read_at",null);t||(n(e=>e.map(e=>({...e,read_at:e.read_at||(new Date).toISOString()}))),a(0))},[e]);return ct.useEffect(()=>{c(),u()},[c,u]),ct.useEffect(()=>{if(!e)return;const t=KC.channel("subscription_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"subscription_notifications",filter:`user_id=eq.${e.id}`},e=>{const t=e.new;n(e=>[t,...e]),a(e=>e+1)}).subscribe();return()=>{KC.removeChannel(t)}},[e]),{notifications:t,unreadCount:r,gracePeriodStatus:i,isLoading:o,markAsRead:d,markAllAsRead:h,refetch:c}}const t6={expiring_soon:xt.jsx(Wm,{className:"h-4 w-4 text-yellow-500"}),grace_period_started:xt.jsx(jg,{className:"h-4 w-4 text-orange-500"}),grace_period_ending:xt.jsx(jg,{className:"h-4 w-4 text-destructive"}),visions_released:xt.jsx(qm,{className:"h-4 w-4 text-destructive"}),subscription_renewed:xt.jsx($m,{className:"h-4 w-4 text-green-500"})};function n6(){const{notifications:e,unreadCount:t,markAsRead:n,markAllAsRead:r}=e6();return 0===e.length?null:xt.jsxs(_Q,{children:[xt.jsx(SQ,{asChild:!0,children:xt.jsxs(vD,{variant:"ghost",size:"icon",className:"relative",children:[xt.jsx(Cm,{className:"h-5 w-5"}),t>0&&xt.jsx(MD,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:t>9?"9+":t})]})}),xt.jsxs(OQ,{align:"end",className:"w-80 max-h-96 overflow-y-auto",children:[xt.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[xt.jsx("span",{className:"font-semibold text-sm",children:"Notifications"}),t>0&&xt.jsx(vD,{variant:"ghost",size:"sm",className:"text-xs h-6",onClick:r,children:"Mark all read"})]}),xt.jsx(AQ,{}),0===e.length?xt.jsx("div",{className:"px-3 py-4 text-center text-muted-foreground text-sm",children:"No notifications"}):e.map(e=>xt.jsxs(TQ,{className:Cy("flex items-start gap-3 p-3 cursor-pointer",!e.read_at&&"bg-muted/50"),onClick:()=>!e.read_at&&n(e.id),children:[xt.jsx("div",{className:"flex-shrink-0 mt-0.5",children:t6[e.notification_type]||xt.jsx(Cm,{className:"h-4 w-4"})}),xt.jsxs("div",{className:"flex-1 min-w-0",children:[xt.jsx("p",{className:"text-sm leading-relaxed",children:e.message}),xt.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:iH(new Date(e.created_at),{addSuffix:!0})})]}),!e.read_at&&xt.jsx("div",{className:"flex-shrink-0",children:xt.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})})]},e.id))]})]})}const r6=[{to:"/play",label:"Play",icon:hf,highlight:!0},{to:"/creative-mode",label:"Create",icon:Ff,highlight:!0},{to:"/code-analysis",label:"Code Analysis",icon:Ng,highlight:!0},{to:"/marketplace",label:"Marketplace",icon:ug,highlight:!1},{to:"/openings",label:"Openings",icon:Pm,highlight:!1},{to:"/about",label:"About Us"},{to:"/investors",label:"Investors"}],a6=()=>{const[e,t]=ct.useState(!1);return Zk().pathname,xt.jsx("header",{className:"sticky top-0 w-full border-b border-border/40 bg-background/95 backdrop-blur-xl supports-[backdrop-filter]:bg-background/85",style:{zIndex:9999,position:"sticky",isolation:"isolate"},children:xt.jsxs("div",{className:"container flex h-16 sm:h-18 md:h-20 items-center justify-between relative",children:[xt.jsxs("div",{className:"flex items-center gap-4 md:gap-8",children:[xt.jsxs(qN,{to:"/",className:"flex items-center gap-2 sm:gap-3 group",children:[xt.jsx("img",{src:NU,alt:"En Pensent Logo",className:"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-full object-cover glow-gold group-hover:scale-105 transition-transform"}),xt.jsxs("div",{className:"hidden sm:block",children:[xt.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-royal font-bold tracking-wider text-gold-gradient uppercase",children:"En Pensent"}),xt.jsx("p",{className:"text-2xs sm:text-[9px] uppercase tracking-[0.25em] sm:tracking-[0.3em] text-muted-foreground font-sans",children:"Chess Art Prints"})]})]}),xt.jsx("nav",{className:"hidden lg:flex items-center gap-4 xl:gap-6 relative z-20",children:r6.map(e=>xt.jsxs(qN,{to:e.to,className:"text-xs xl:text-sm font-medium transition-colors uppercase tracking-wider flex items-center gap-1.5 relative z-10 "+(e.highlight?"text-primary hover:text-primary/80":"text-muted-foreground hover:text-foreground"),children:[e.icon&&xt.jsx(e.icon,{className:"h-3.5 w-3.5 xl:h-4 xl:w-4"}),e.label]},e.to))})]}),xt.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 md:gap-3",children:[xt.jsx("div",{className:"hidden md:block",children:xt.jsx(J4,{variant:"ghost",size:"sm",showLabel:!1})}),xt.jsx("div",{className:"hidden md:block",children:xt.jsx(n4,{compact:!0})}),xt.jsx(n6,{}),xt.jsx(X4,{}),xt.jsx(w4,{}),xt.jsxs(_5,{open:e,onOpenChange:t,children:[xt.jsx(S5,{asChild:!0,className:"lg:hidden",children:xt.jsxs(vD,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10",children:[xt.jsx(Bf,{className:"h-5 w-5"}),xt.jsx("span",{className:"sr-only",children:"Open menu"})]})}),xt.jsx(R5,{side:"right",className:"w-80 sm:w-96 bg-background border-border",children:xt.jsxs("div",{className:"flex flex-col gap-6 mt-6",children:[xt.jsxs(qN,{to:"/",onClick:()=>t(!1),className:"flex items-center gap-3 pb-4 border-b border-border/50",children:[xt.jsx("img",{src:NU,alt:"En Pensent Logo",className:"w-12 h-12 rounded-full object-cover glow-gold"}),xt.jsxs("div",{children:[xt.jsx("span",{className:"text-xl font-royal font-bold tracking-wider text-gold-gradient uppercase block",children:"En Pensent"}),xt.jsx("span",{className:"text-2xs uppercase tracking-widest text-muted-foreground",children:"Chess Art Prints"})]})]}),xt.jsx("nav",{className:"flex flex-col gap-1",children:r6.map(e=>xt.jsxs(qN,{to:e.to,onClick:()=>t(!1),className:"text-base font-medium transition-colors uppercase tracking-wider py-3 px-3 rounded-lg flex items-center gap-3 "+(e.highlight?"text-primary bg-primary/5 hover:bg-primary/10":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[e.icon&&xt.jsx(e.icon,{className:"h-5 w-5"}),e.label]},e.to))}),xt.jsxs("div",{className:"pt-4 border-t border-border/50",children:[xt.jsx("p",{className:"text-xs text-muted-foreground mb-3 uppercase tracking-wide font-medium",children:"Vision Scanner"}),xt.jsx(J4,{variant:"outline",className:"w-full justify-start h-12"})]}),xt.jsxs("div",{className:"pt-4 border-t border-border/50",children:[xt.jsx("p",{className:"text-xs text-muted-foreground mb-3 uppercase tracking-wide font-medium",children:"Currency"}),xt.jsx(n4,{})]})]})})]})]})]})})},i6=ct.forwardRef(function(e,t){const n="/"===Zk().pathname;return xt.jsxs("footer",{ref:t,className:"border-t border-border/40 mt-16 sm:mt-20 bg-card/30",children:[xt.jsx("div",{className:"container mx-auto px-4 py-8 sm:py-10 md:py-12",children:xt.jsxs("div",{className:"flex flex-col items-center space-y-4 sm:space-y-5",children:[xt.jsx("div",{className:"divider-gold w-32 sm:w-40 mb-2"}),xt.jsx(qN,{to:"/",onClick:e=>{n&&(e.preventDefault(),Yy("Refreshing...",{icon:"",duration:1e3}),setTimeout(()=>window.location.reload(),300))},className:"group",children:xt.jsx("img",{src:NU,alt:"En Pensent Logo",className:"w-14 h-14 sm:w-16 sm:h-16 rounded-full object-cover glow-gold group-hover:scale-105 transition-transform"})}),xt.jsx("p",{className:"text-base sm:text-lg font-royal font-bold tracking-widest uppercase text-gold-gradient",children:"En Pensent"}),xt.jsx("p",{className:"text-sm sm:text-base text-muted-foreground font-serif italic text-center px-4",children:"The future of chess intelligence"}),xt.jsxs("nav",{className:"hidden sm:flex items-center gap-6 pt-2",children:[xt.jsx(qN,{to:"/about",className:"text-xs uppercase tracking-wider text-muted-foreground hover:text-foreground transition-colors",children:"About"}),xt.jsx(qN,{to:"/marketplace",className:"text-xs uppercase tracking-wider text-muted-foreground hover:text-foreground transition-colors",children:"Marketplace"}),xt.jsx(qN,{to:"/investors",className:"text-xs uppercase tracking-wider text-muted-foreground hover:text-foreground transition-colors",children:"Investors"})]}),xt.jsxs("nav",{className:"flex items-center gap-4 pt-3 flex-wrap justify-center",children:[xt.jsx(qN,{to:"/terms",className:"text-xs text-muted-foreground/70 hover:text-foreground transition-colors",children:"Terms of Service"}),xt.jsx("span",{className:"text-muted-foreground/30",children:""}),xt.jsx(qN,{to:"/privacy",className:"text-xs text-muted-foreground/70 hover:text-foreground transition-colors",children:"Privacy Policy"}),xt.jsx("span",{className:"text-muted-foreground/30",children:""}),xt.jsx(qN,{to:"/dmca",className:"text-xs text-muted-foreground/70 hover:text-foreground transition-colors",children:"DMCA"})]}),xt.jsxs("div",{className:"flex flex-col items-center gap-2 pt-4 sm:pt-6",children:[xt.jsxs("p",{className:"text-xs text-muted-foreground/60",children:[" ",(new Date).getFullYear()," En Pensent LLC. All rights reserved."]}),xt.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground/40",children:[xt.jsx(Rf,{className:"w-3 h-3"}),xt.jsx("span",{children:"Patent Pending  Proprietary Technology"})]}),xt.jsxs("div",{className:"flex flex-wrap justify-center gap-1 mt-1",children:[xt.jsx("span",{className:"text-[9px] text-muted-foreground/30",children:"En Pensent"}),xt.jsx("span",{className:"text-muted-foreground/20",children:""}),xt.jsx("span",{className:"text-[9px] text-muted-foreground/30",children:"Natural Vision"}),xt.jsx("span",{className:"text-muted-foreground/20",children:""}),xt.jsx("span",{className:"text-[9px] text-muted-foreground/30",children:"Hustlenomics"})]})]})]})}),xt.jsx("div",{className:"h-safe-bottom"})]})});i6.displayName="Footer";var s6="AlertDialog",[o6]=Kh(s6,[WY]),l6=WY(),c6=e=>{const{__scopeAlertDialog:t,...n}=e,r=l6(t);return xt.jsx(wZ,{...r,...n,modal:!0})};c6.displayName=s6;var u6=ct.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=l6(n);return xt.jsx(kZ,{...a,...r,ref:t})});u6.displayName="AlertDialogTrigger";var d6=e=>{const{__scopeAlertDialog:t,...n}=e,r=l6(t);return xt.jsx(NZ,{...r,...n})};d6.displayName="AlertDialogPortal";var h6=ct.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=l6(n);return xt.jsx(jZ,{...a,...r,ref:t})});h6.displayName="AlertDialogOverlay";var p6="AlertDialogContent",[m6,f6]=o6(p6),g6=Jh("AlertDialogContent"),y6=ct.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=l6(n),s=ct.useRef(null),o=Uh(t,s),l=ct.useRef(null);return xt.jsx(yZ,{contentName:p6,titleName:v6,docsSlug:"alert-dialog",children:xt.jsx(m6,{scope:n,cancelRef:l,children:xt.jsxs(_Z,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:Vh(a.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=l.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[xt.jsx(g6,{children:r}),xt.jsx(_6,{contentRef:s})]})})})});y6.displayName=p6;var v6="AlertDialogTitle",x6=ct.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=l6(n);return xt.jsx(SZ,{...a,...r,ref:t})});x6.displayName=v6;var b6="AlertDialogDescription",w6=ct.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=l6(n);return xt.jsx(CZ,{...a,...r,ref:t})});w6.displayName=b6;var k6=ct.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=l6(n);return xt.jsx(PZ,{...a,...r,ref:t})});k6.displayName="AlertDialogAction";var N6="AlertDialogCancel",j6=ct.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=f6(N6,n),i=l6(n),s=Uh(t,a);return xt.jsx(PZ,{...i,...r,ref:s})});j6.displayName=N6;var _6=({contentRef:e})=>{const t=`\`${p6}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${p6}\` by passing a \`${b6}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${p6}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return ct.useEffect(()=>{var t;document.getElementById(null==(t=e.current)?void 0:t.getAttribute("aria-describedby"))},[t,e]),null},S6=h6,C6=y6,P6=k6,E6=j6,R6=x6,O6=w6;const T6=c6,M6=u6,A6=d6,B6=ct.forwardRef(({className:e,...t},n)=>xt.jsx(S6,{className:Cy("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));B6.displayName=S6.displayName;const D6=ct.forwardRef(({className:e,...t},n)=>xt.jsxs(A6,{children:[xt.jsx(B6,{}),xt.jsx(C6,{ref:n,className:Cy("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));D6.displayName=C6.displayName;const I6=({className:e,...t})=>xt.jsx("div",{className:Cy("flex flex-col space-y-2 text-center sm:text-left",e),...t});I6.displayName="AlertDialogHeader";const L6=({className:e,...t})=>xt.jsx("div",{className:Cy("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});L6.displayName="AlertDialogFooter";const F6=ct.forwardRef(({className:e,...t},n)=>xt.jsx(R6,{ref:n,className:Cy("text-lg font-semibold",e),...t}));F6.displayName=R6.displayName;const $6=ct.forwardRef(({className:e,...t},n)=>xt.jsx(O6,{ref:n,className:Cy("text-sm text-muted-foreground",e),...t}));$6.displayName=O6.displayName;const z6=ct.forwardRef(({className:e,...t},n)=>xt.jsx(P6,{ref:n,className:Cy(yD(),e),...t}));z6.displayName=P6.displayName;const q6=ct.forwardRef(({className:e,...t},n)=>xt.jsx(E6,{ref:n,className:Cy(yD({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));q6.displayName=E6.displayName;const V6={getItem:e=>sessionStorage.getItem(e),setItem:(e,t)=>{sessionStorage.setItem(e,t)},removeItem:e=>{sessionStorage.removeItem(e)}},W6=SD()(ED((e,t)=>({currentSimulation:null,currentPgn:"",currentGameTitle:"",savedShareId:null,capturedTimelineState:null,visualizationStateStack:[],creativeModeTransfer:null,previousRoute:null,navigationStack:[],returningFromOrder:!1,setCurrentSimulation:(n,r="",a="")=>{const i=t(),s={state:{currentSimulation:n,currentPgn:r,currentGameTitle:a,savedShareId:i.savedShareId,capturedTimelineState:i.capturedTimelineState,visualizationStateStack:i.visualizationStateStack,creativeModeTransfer:i.creativeModeTransfer,previousRoute:i.previousRoute,navigationStack:i.navigationStack,returningFromOrder:i.returningFromOrder},version:0};sessionStorage.setItem("en-pensent-session",JSON.stringify(s)),e({currentSimulation:n,currentPgn:r,currentGameTitle:a})},setSavedShareId:t=>e({savedShareId:t}),setCapturedTimelineState:t=>e({capturedTimelineState:t}),setReturningFromOrder:t=>e({returningFromOrder:t}),clearSimulation:()=>e({currentSimulation:null,currentPgn:"",currentGameTitle:"",savedShareId:null,capturedTimelineState:null,returningFromOrder:!1}),pushVisualizationState:t=>e(e=>({visualizationStateStack:[...e.visualizationStateStack,t].slice(-10)})),popVisualizationState:()=>{const n=t();if(0===n.visualizationStateStack.length)return null;const r=[...n.visualizationStateStack],a=r.pop()||null;return e({visualizationStateStack:r}),a},peekVisualizationState:()=>{const e=t();return 0===e.visualizationStateStack.length?null:e.visualizationStateStack[e.visualizationStateStack.length-1]},getVisualizationStateForRoute:e=>{const n=t();for(let t=n.visualizationStateStack.length-1;t>=0;t--)if(n.visualizationStateStack[t].sourceRoute===e)return n.visualizationStateStack[t];return null},clearVisualizationStateStack:()=>e({visualizationStateStack:[]}),setCreativeModeTransfer:t=>e({creativeModeTransfer:t}),clearCreativeModeTransfer:()=>e({creativeModeTransfer:null}),pushRoute:t=>e(e=>({navigationStack:[...e.navigationStack,t],previousRoute:e.navigationStack.length>0?e.navigationStack[e.navigationStack.length-1]:null})),popRoute:()=>{const n=t();if(0===n.navigationStack.length)return null;const r=[...n.navigationStack],a=r.pop()||null;return e({navigationStack:r,previousRoute:r.length>0?r[r.length-1]:null}),a},setPreviousRoute:t=>e({previousRoute:t}),clearSession:()=>e({currentSimulation:null,currentPgn:"",currentGameTitle:"",savedShareId:null,capturedTimelineState:null,visualizationStateStack:[],creativeModeTransfer:null,previousRoute:null,navigationStack:[],returningFromOrder:!1})}),{name:"en-pensent-session",storage:CD(()=>V6),partialize:e=>({currentSimulation:e.currentSimulation,currentPgn:e.currentPgn,currentGameTitle:e.currentGameTitle,savedShareId:e.savedShareId,capturedTimelineState:e.capturedTimelineState,visualizationStateStack:e.visualizationStateStack,creativeModeTransfer:e.creativeModeTransfer,previousRoute:e.previousRoute,navigationStack:e.navigationStack,returningFromOrder:e.returningFromOrder})})),Q6="ENPENSENT";function U6(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t).toString(16).padStart(8,"0").slice(0,8)}function K6(e,t){const n=e.getContext("2d");if(!n)return e;const r=n.getImageData(0,0,e.width,e.height),a=r.data,i=function(e){const t=JSON.stringify({v:1,vid:e.visualizationId,uid:e.userId,ts:e.timestamp,sid:e.shareId||""}),n=U6(t);return`${Q6}|${n}|${t}|END`}(t),s=i.split("").map(e=>e.charCodeAt(0).toString(2).padStart(8,"0")).join("");const o=s.length,l=(Math.ceil(o/3),e.width,e.height,s.length.toString(2).padStart(32,"0"));for(let c=0;c<32&&c<a.length;c++){const e=4*Math.floor(c/3),t=c%3;e+t<a.length&&(a[e+t]=254&a[e+t]|parseInt(l[c],10))}for(let c=0;c<s.length&&44+4*Math.floor(c/3)<a.length;c++){const e=44+4*Math.floor(c/3),t=c%3;if(e+t<a.length){const n=parseInt(s[c],10);a[e+t]=254&a[e+t]|n}}return n.putImageData(r,0,0),e}function H6(e){const t=e.getContext("2d");if(!t)return null;const n=t.getImageData(0,0,e.width,e.height).data;try{let e="";for(let u=0;u<32&&u<n.length;u++){const t=4*Math.floor(u/3);e+=(1&n[t+u%3]).toString()}const t=parseInt(e,2);if(t<=0||t>1e4)return null;const r=44;let a="";for(let u=0;u<t&&r+4*Math.floor(u/3)<n.length;u++){const e=r+4*Math.floor(u/3);a+=(1&n[e+u%3]).toString()}const i=function(e){const t=e.match(/.{8}/g);return t?t.map(e=>String.fromCharCode(parseInt(e,2))).join(""):""}(a);if(!i.startsWith(Q6))return null;const s=i.split("|");if(s.length<4)return null;const o=s[1],l=s[2];if(U6(l)!==o)return null;const c=JSON.parse(l);return{visualizationId:c.vid,userId:c.uid,timestamp:c.ts,shareId:c.sid||void 0}}catch(r){return null}}async function G6(e,t){return new Promise((n,r)=>{const a=new Image;a.onload=()=>{const e=document.createElement("canvas");e.width=a.width,e.height=a.height;const i=e.getContext("2d");i?(i.drawImage(a,0,0),K6(e,t),n(e.toDataURL("image/png",1))):r(new Error("Failed to get canvas context"))},a.onerror=()=>r(new Error("Failed to load image")),a.src=e})}const Y6=new Map;async function Z6(e,t,n=100,r=60){const a=`${e}:${t}`,i=Date.now(),s=Y6.get(a);if(s){if(i<s.resetAt)return s.count>=n?{allowed:!1,retry_after:Math.ceil((s.resetAt-i)/1e3)}:(s.count++,{allowed:!0,remaining:n-s.count});Y6.delete(a)}return Y6.set(a,{count:1,resetAt:i+1e3*r}),async function(e,t,n,r){try{await KC.rpc("check_rate_limit",{p_identifier:e,p_endpoint:t,p_max_requests:n,p_window_seconds:r})}catch(a){}}(e,t,n,r).catch(()=>{}),{allowed:!0,remaining:n-1}}function X6(){const e=[navigator.userAgent,navigator.language,(new Date).getTimezoneOffset(),screen.width,screen.height,screen.colorDepth].join("|");let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return`anon_${Math.abs(t).toString(36)}`}const J6={maxRequests:20,windowSeconds:60};function e8(e){const{isPremium:t,visualizationId:n,userId:r,onUnauthorized:a,onUpgradeRequired:i}=e,[s,o]=ct.useState({isExportingHD:!1,isExportingGIF:!1,gifProgress:0});return{...s,boardRef:ct.useRef(null),downloadHD:ct.useCallback(async(e,a,s=!1)=>{if(!t)return null==i||i(),!1;o(e=>({...e,isExportingHD:!0}));try{const t=(await Mh(async()=>{const{default:e}=await import("./html2canvas.esm-C2s7aB6S.js");return{default:e}},[])).default;let i=(await t(e,{scale:5,useCORS:!0,allowTaint:!0,logging:!1,backgroundColor:s?"#0A0A0A":"#FDFCFB",onclone:e=>{e.querySelectorAll("svg").forEach(e=>{e.style.overflow="visible"})}})).toDataURL("image/png",1);if(n&&r)try{i=await G6(i,{visualizationId:n,userId:r,timestamp:Date.now()})}catch(l){}const o=await fetch(i),c=await o.blob(),u=URL.createObjectURL(c),d=document.createElement("a");return d.href=u,d.download=`${a.replace(/\s+/g,"-").toLowerCase()}-hd.png`,document.body.appendChild(d),setTimeout(()=>{d.click(),setTimeout(()=>{d.parentNode&&document.body.removeChild(d),URL.revokeObjectURL(u)},100)},0),n&&HU(n,"download_hd"),Yy.success("HD image downloaded!",{description:"Your visualization has been saved to your device."}),!0}catch(c){return Yy.error("Download failed",{description:"Please try again or use a different browser."}),!1}finally{o(e=>({...e,isExportingHD:!1}))}},[t,n,i]),downloadTrademarkHD:ct.useCallback(async e=>{var a,s,l,c,u;if(!t)return null==i||i(),!1;const d=X6(),h=await Z6(d,"download",J6.maxRequests,J6.windowSeconds);if(!h.allowed)return Yy.error(`Too many downloads. Please wait ${h.retry_after} seconds.`),!1;o(e=>({...e,isExportingHD:!0}));try{const{generateCleanPrintImage:t}=await Mh(async()=>{const{generateCleanPrintImage:e}=await import("./printImageGenerator-yhMAt_WZ.js");return{generateCleanPrintImage:e}},__vite__mapDeps([0,1])),i={board:e.board,gameData:e.gameData,totalMoves:(null==(a=e.gameData.moves)?void 0:a.length)||0},o={currentMove:e.currentMoveNumber??1/0,selectedPhase:"all",lockedPieces:(null==(s=e.highlightState)?void 0:s.lockedPieces)||[],compareMode:(null==(l=e.highlightState)?void 0:l.compareMode)||!1,displayMode:"art",darkMode:e.darkMode||!1,showTerritory:!1,showHeatmaps:!1,showPieces:(null==(c=e.piecesState)?void 0:c.showPieces)||!1,pieceOpacity:(null==(u=e.piecesState)?void 0:u.pieceOpacity)||.7,capturedAt:new Date};let d=await t(i,{darkMode:e.darkMode||!1,includeQR:e.showQR||!1,shareId:e.shareId,capturedState:o,highlightState:e.highlightState?{lockedPieces:e.highlightState.lockedPieces.map(e=>({pieceType:e.pieceType,pieceColor:"white"===e.pieceColor?"w":"black"===e.pieceColor?"b":e.pieceColor})),compareMode:e.highlightState.compareMode}:void 0,pgn:e.pgn||e.gameData.pgn});if(n&&r)try{d=await G6(d,{visualizationId:n,userId:r,timestamp:Date.now(),shareId:e.shareId})}catch(p){}const h=await fetch(d),m=await h.blob(),f=URL.createObjectURL(m),g=document.createElement("a");return g.href=f,g.download=`${e.title.replace(/\s+/g,"-").toLowerCase()}-hd.png`,document.body.appendChild(g),setTimeout(()=>{g.click(),setTimeout(()=>{g.parentNode&&document.body.removeChild(g),URL.revokeObjectURL(f)},100)},0),n&&HU(n,"download_hd"),Yy.success("HD image downloaded!",{description:"Your trademark visualization has been saved."}),!0}catch(m){return Yy.error("Download failed",{description:"Please try again or use a different browser."}),!1}finally{o(e=>({...e,isExportingHD:!1}))}},[t,n,i]),downloadGIF:ct.useCallback(async(e,r,a,s,l)=>{if(!t)return null==i||i(),!1;const c=X6(),u=await Z6(c,"download",J6.maxRequests,J6.windowSeconds);if(!u.allowed)return Yy.error(`Too many downloads. Please wait ${u.retry_after} seconds.`),!1;if(!e||!e.board||void 0===e.totalMoves)return Yy.error("Invalid visualization data",{description:"Cannot generate GIF from current visualization."}),!1;if(0===e.totalMoves)return Yy.error("No moves to animate",{description:"This visualization has no moves to create a GIF from."}),!1;o(e=>({...e,isExportingGIF:!0,gifProgress:0}));try{const{generateAnimatedGif:t}=await Mh(async()=>{const{generateAnimatedGif:e}=await import("./gifFrameRenderer-DyZpMga7.js");return{generateAnimatedGif:e}},[]),r="gif-export";Yy.loading("Generating animated GIF...",{id:r,duration:1/0});const i=(e,t)=>{o(t=>({...t,gifProgress:e})),null==s||s(e),Yy.loading(`${t} (${Math.round(100*e)}%)`,{id:r})},c=await t({simulation:e,size:400,darkMode:!1,showCoordinates:!0,frameDelay:150,quality:10,maxFrames:60,onProgress:i,showPieces:(null==l?void 0:l.showPieces)||!1,pieceOpacity:(null==l?void 0:l.pieceOpacity)||.7});if(!c||0===c.size)throw new Error("Generated GIF is empty");const u=URL.createObjectURL(c),d=document.createElement("a");return d.href=u,d.download=`${a.replace(/\s+/g,"-").toLowerCase()}.gif`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),n&&HU(n,"download_gif"),Yy.dismiss(r),Yy.success("Animated GIF downloaded!",{description:`${e.totalMoves} moves captured (${(c.size/1024).toFixed(0)}KB)`}),!0}catch(d){Yy.dismiss("gif-export");const e=d instanceof Error?d.message:"Unknown error";let t="Please try again or use HD download instead.";return e.includes("worker")?t="GIF encoder failed to initialize. Try refreshing the page.":e.includes("timeout")?t="GIF generation took too long. Try with a shorter game.":e.includes("frame")&&(t="Failed to capture visualization frames."),Yy.error("GIF generation failed",{description:t}),!1}finally{o(e=>({...e,isExportingGIF:!1,gifProgress:0}))}},[t,n,i])}}"undefined"!=typeof window&&setInterval(function(){const e=Date.now();for(const[t,n]of Y6.entries())e>=n.resetAt&&Y6.delete(t)},3e5);const t8="/assets/upload-section-hero-Cd7WY8Gx.jpg",n8=()=>{const e=dH(4),t=eN(),{user:n,isPremium:r,isCheckingSubscription:a}=lP(),{setOrderData:i}=A5(),s=ct.useRef(null),[o,l]=ct.useState(null),[c,u]=ct.useState(!1),[d,h]=ct.useState(null),[p,m]=ct.useState(""),[f,g]=ct.useState(""),[y,v]=ct.useState(0),[x,b]=ct.useState(null),[w,k]=ct.useState(null),[N,j]=ct.useState(!1),[_,S]=ct.useState(!1),[C,P]=ct.useState(!1),[E,R]=ct.useState(!1),[O,T]=ct.useState(!1),{downloadTrademarkHD:M,downloadGIF:A}=e8({isPremium:r,visualizationId:w,userId:null==n?void 0:n.id,onUnauthorized:()=>R(!0),onUpgradeRequired:()=>P(!0)}),{currentSimulation:B,currentPgn:D,currentGameTitle:I,savedShareId:L,capturedTimelineState:F,returningFromOrder:$,setCurrentSimulation:z,setSavedShareId:q,setCapturedTimelineState:V,setReturningFromOrder:W,clearSimulation:Q,setCreativeModeTransfer:U}=W6(),{setCurrentMove:K,setLockedPieces:H,setCompareMode:G,setDarkMode:Y}=B$(),{clearActiveVision:Z}=RD();ct.useEffect(()=>{if(!o&&B&&D){if(l(B),m(D),g(I),b(L),F&&(K(F.currentMove),H(F.lockedPieces),G(F.compareMode),Y(F.darkMode)),$){const e=(null==F?void 0:F.title)||I||"Visualization",t=F?`Move ${F.currentMove} of ${F.totalMoves||B.totalMoves||0}`:"Your exact board state has been preserved";Yy.success(`${e} restored!`,{description:t,icon:xt.jsx(gg,{className:"w-4 h-4"})}),W(!1)}Q()}},[]);const X=ct.useRef(null),J=ct.useRef(null),ee=ct.useRef(null),te=ct.useRef(null),ne=ct.useRef(null),re=ct.useRef(null);ut.useEffect(()=>{let e,t=!1;const n=()=>window.innerWidth<768,r=()=>{const e=window.scrollY,r=n();if(te.current)if(r)te.current.style.transform="translate3d(0, 0, 0) scale(1.05)";else{const t=.12*e;te.current.style.transform=`translate3d(0, ${t}px, 0) scale(1.1)`}if(ne.current&&J.current)if(r)ne.current.style.transform="translate3d(0, 0, 0) scale(1.08)";else{const t=.08*(e-(J.current.getBoundingClientRect().top+e)+window.innerHeight);ne.current.style.transform=`translate3d(0, ${t}px, 0) scale(1.15)`}if(re.current&&ee.current)if(r)re.current.style.transform="translate3d(0, 0, 0)";else{const e=ee.current.getBoundingClientRect(),t=-.06*(e.top+e.height/2-window.innerHeight/2);re.current.style.transform=`translate3d(0, ${t}px, 0)`}t=!1},a=()=>{n()||t||(e=requestAnimationFrame(r),t=!0)},i=()=>{r()};return window.addEventListener("scroll",a,{passive:!0}),window.addEventListener("resize",i,{passive:!0}),r(),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",i),cancelAnimationFrame(e)}},[]);const[ae,ie]=C1(),[se,oe]=C1(),[le,ce]=C1(),[ue,de]=C1(),[he,pe]=C1(),[me,fe]=C1(),[ge,ye]=C1(),ve=ct.useCallback(e=>{v(e=>e+1),j(!0),Yy.success(`Palette changed to ${e.charAt(0).toUpperCase()+e.slice(1)}`)},[]),xe=ct.useCallback((e,t)=>{const n=t||"Position";Mh(async()=>{const{fenToVisualizationBoard:e}=await Promise.resolve().then(()=>a$);return{fenToVisualizationBoard:e}},void 0).then(({fenToVisualizationBoard:t})=>{const r={board:t(e),gameData:{white:"Position",black:"Setup",event:n,date:(new Date).toISOString().split("T")[0].replace(/-/g,"."),result:"*",pgn:e,moves:[]},totalMoves:0};h({result:r,pgn:e,title:n}),u(!0)})},[]),be=ct.useCallback(()=>{if(d){z(d.result,d.pgn,d.title);const e=YX(d.pgn),n=BF().id,r=new URLSearchParams;n&&"modern"!==n&&r.set("p",n),r.set("src","generator");const a=`/g/${e}${r.toString()?`?${r.toString()}`:""}`;u(!1),h(null),t(a)}},[d,t,z]),we=()=>{l(null),m(""),g(""),u(!1),h(null),b(null),j(!1),S(!1)};return xt.jsxs("div",{className:"min-h-screen bg-background",children:[xt.jsx(a6,{}),xt.jsx(T6,{open:_,onOpenChange:S,children:xt.jsxs(D6,{children:[xt.jsxs(I6,{children:[xt.jsx(F6,{children:"Unsaved Changes"}),xt.jsx($6,{children:"You have unsaved changes to your visualization. If you leave now, your palette and display settings will be lost."})]}),xt.jsxs(L6,{children:[xt.jsx(q6,{children:"Stay Here"}),xt.jsx(z6,{onClick:we,children:"Leave Anyway"})]})]})}),xt.jsx("main",{children:c?xt.jsx("div",{className:"container mx-auto px-4 py-12 max-w-4xl",children:xt.jsx(m1,{onComplete:be,totalMoves:null==d?void 0:d.result.totalMoves})}):o?xt.jsx("div",{className:"w-full px-4 py-8",ref:s,children:xt.jsx(h1,{board:o.board,gameData:o.gameData,totalMoves:o.totalMoves,pgn:p||o.gameData.pgn,context:"generator",title:f,shareId:x,visualizationId:w||void 0,isPremium:r,onBack:()=>{N&&!x?S(!0):we()},onUpgradePrompt:()=>P(!0),onExport:async(e,l)=>{var c;if("print"!==e&&"preview"!==e){if(!n)return void R(!0);if(!r)return void P(!0)}const u=f||`${o.gameData.white} vs ${o.gameData.black}`,d=l&&l.currentMove<o.totalMoves?o.board.map(e=>e.map(e=>({...e,visits:e.visits.filter(e=>e.moveNumber<=l.currentMove)}))):o.board,h=l&&l.lockedPieces.length>0?{lockedPieces:l.lockedPieces.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor})),compareMode:l.compareMode}:void 0;if("print"===e){z(o,p,u),q(x),l&&V({currentMove:l.currentMove,totalMoves:o.totalMoves,title:u,lockedPieces:l.lockedPieces.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor})),compareMode:l.compareMode,darkMode:l.darkMode,showPieces:l.showPieces,pieceOpacity:l.pieceOpacity}),W(!0);const e=p?YX(p):void 0,n=BF().id;i({title:u,pgn:p,gameData:{white:o.gameData.white,black:o.gameData.black,event:o.gameData.event,date:o.gameData.date,result:o.gameData.result},simulation:o,shareId:x||void 0,returnPath:"/",gameHash:e,paletteId:n,capturedState:l?{currentMove:l.currentMove,selectedPhase:"all",lockedPieces:l.lockedPieces,compareMode:l.compareMode,displayMode:"standard",darkMode:l.darkMode,showTerritory:!1,showHeatmaps:!1,showPieces:l.showPieces,pieceOpacity:l.pieceOpacity,capturedAt:new Date}:void 0}),t("/order-print")}else if("preview"===e)try{const{generateCleanPrintImage:e}=await Mh(async()=>{const{generateCleanPrintImage:e}=await import("./printImageGenerator-yhMAt_WZ.js");return{generateCleanPrintImage:e}},__vite__mapDeps([0,1])),t={...o,board:d},n=!r||a,i=await e(t,{darkMode:(null==l?void 0:l.darkMode)||!1,withWatermark:n,highlightState:h,pgn:p,capturedState:l?{currentMove:l.currentMove,selectedPhase:"all",lockedPieces:l.lockedPieces||[],compareMode:l.compareMode,displayMode:"art",darkMode:l.darkMode,showTerritory:!1,showHeatmaps:!1,showPieces:l.showPieces,pieceOpacity:l.pieceOpacity,capturedAt:new Date}:void 0}),s=await fetch(i),c=await s.blob(),m=URL.createObjectURL(c),f=document.createElement("a");f.href=m,f.download=`${u.replace(/\s+/g,"-").toLowerCase()}-preview.png`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(m),Yy.success("Preview downloaded!",{description:n?"Includes En Pensent branding.":"Full resolution image saved."})}catch(m){Yy.error("Download failed",{description:"Please try again."})}else if("hd"===e)await M({board:d,gameData:o.gameData,title:u,darkMode:(null==l?void 0:l.darkMode)||!1,showQR:!!x,shareId:x||void 0,highlightState:h,piecesState:l?{showPieces:l.showPieces,pieceOpacity:l.pieceOpacity}:void 0,currentMoveNumber:null==l?void 0:l.currentMove,pgn:p});else if("gif"===e){const e=null==(c=s.current)?void 0:c.querySelector("[data-vision-board]"),t=l?{showPieces:l.showPieces,pieceOpacity:l.pieceOpacity}:void 0;e?await A(o,e,u,void 0,t):s.current&&await A(o,s.current,u,void 0,t)}},onSaveToGallery:async()=>{if(!n)return R(!0),null;if(!r)return P(!0),null;T(!0);try{const{checkDuplicateVisualization:e,saveVisualization:t}=await Mh(async()=>{const{checkDuplicateVisualization:e,saveVisualization:t}=await import("./visualizationStorage-CNvw0MDn.js");return{checkDuplicateVisualization:e,saveVisualization:t}},__vite__mapDeps([2,3,4])),{getActivePalette:r}=await Mh(async()=>{const{getActivePalette:e}=await Promise.resolve().then(()=>QF);return{getActivePalette:e}},void 0),a={paletteId:r().id,darkMode:!1},i=await e(n.id,p,o.gameData,a);if(i.isDuplicate)return i.ownedByCurrentUser?Yy.info("Already in your gallery",{description:"This visualization is already saved to your collection."}):Yy.error("This vision is already owned",{description:`Owned by ${i.ownerDisplayName||"another collector"}. Try a different palette!`}),null;if(i.isTooSimilar)return Yy.error("Too similar to an existing vision",{description:`${Math.round(i.colorSimilarity||30)}% similar to a vision by ${i.ownerDisplayName||"another collector"}. Change at least 8 colors.`}),null;const{generateCleanPrintImage:s}=await Mh(async()=>{const{generateCleanPrintImage:e}=await import("./printImageGenerator-yhMAt_WZ.js");return{generateCleanPrintImage:e}},__vite__mapDeps([0,1])),l=await s(o,{darkMode:!1}),c=await fetch(l),u=await c.blob(),d=f||`${o.gameData.white} vs ${o.gameData.black}`,h=await t(n.id,d,o,u,p,a);return h.error?(Yy.error("Save failed",{description:h.error.message}),null):h.data?(k(h.data.id),b(h.data.public_share_id),j(!1),Yy.success("Saved to your gallery!",{description:"You now own this unique visualization."}),h.data.id):null}catch(e){return Yy.error("Save failed",{description:"Please try again."}),null}finally{T(!1)}},onShare:()=>{if(p){const e=ZX(p,BF().id);navigator.clipboard.writeText(e),Yy.success("Share link copied!",{description:"Universal link to this game!"})}else Yy.info("Generate a visualization first to share")},onTransferToCreative:()=>{if(!n)return void R(!0);if(!r)return void P(!0);const e=BF();U({board:o.board.map((e,t)=>e.map((e,t)=>{const n=e.visits[e.visits.length-1];if(n){return"w"===n.color?n.piece.toUpperCase():n.piece.toLowerCase()}return null})),whitePalette:e.white,blackPalette:e.black,title:f||`${o.gameData.white} vs ${o.gameData.black}`,sourceVisualizationId:w||void 0}),t("/creative-mode")}})}):xt.jsxs(xt.Fragment,{children:[xt.jsxs("section",{ref:X,className:"relative overflow-hidden",children:[xt.jsx("div",{ref:te,className:"absolute inset-0 bg-cover bg-center opacity-35 will-change-transform",style:{backgroundImage:`url(${t8})`,transform:"translate3d(0, 0, 0) scale(1.1)",backfaceVisibility:"hidden"}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/80 via-background/60 to-background pointer-events-none"}),xt.jsx(w1,{}),xt.jsx("div",{ref:ae,className:`relative container mx-auto px-4 py-14 md:py-28 transition-all duration-700 ease-out ${ie?P1.visible:P1.hidden}`,children:xt.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-5 md:space-y-8",children:[xt.jsxs("div",{className:"inline-flex items-center gap-1.5 md:gap-2 px-4 md:px-5 py-2 md:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs md:text-sm font-display uppercase tracking-widest backdrop-blur-sm",children:[xt.jsx(Zm,{className:"h-3.5 w-3.5 md:h-4 md:w-4"}),"The Future of Chess Intelligence"]}),xt.jsxs("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-royal font-bold leading-tight tracking-wide uppercase",children:["Your Masterpieces,",xt.jsx("br",{}),xt.jsx("span",{className:"text-gold-gradient",children:"Forever Immortalized"})]}),xt.jsx("p",{className:"text-muted-foreground text-base md:text-xl max-w-2xl mx-auto leading-relaxed font-serif px-2",children:"Upload any chess game and transform it into a stunning visualization  where every piece tells its story through color and movement."})]})})]}),xt.jsxs("div",{className:"relative h-32 md:h-64 overflow-hidden flex flex-col items-center justify-center gap-3 md:gap-5",children:[xt.jsx(j1,{}),xt.jsx("h2",{className:"relative z-10 text-xl md:text-4xl lg:text-5xl font-display tracking-widest text-gold-gradient animate-gentle-glow px-4 text-center",style:{fontFamily:"'Cinzel', serif"},children:"Make Chess Yours..."}),xt.jsxs("button",{onClick:()=>P(!0),className:"relative z-10 group flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/5 to-amber-500/5 border border-primary/20 hover:border-primary/40 transition-all duration-300 hover:scale-105 overflow-hidden",children:[xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-primary/10 to-transparent animate-shimmer",style:{backgroundSize:"200% 100%"}}),xt.jsx(Zm,{className:"relative h-3.5 w-3.5 text-primary/70 group-hover:text-primary transition-colors"}),xt.jsx("span",{className:"relative text-xs md:text-sm text-muted-foreground group-hover:text-foreground transition-colors font-medium tracking-wide",children:"Unlock HD Downloads & Personal Gallery"}),xt.jsx(gg,{className:"relative h-3 w-3 text-amber-500/60 group-hover:text-amber-500 transition-colors"})]})]}),xt.jsx("section",{className:"container mx-auto px-4 py-12 space-y-12",children:xt.jsxs("div",{ref:se,className:`max-w-4xl mx-auto space-y-12 transition-all duration-700 delay-100 ease-out ${oe?P1.visible:P1.hidden}`,children:[xt.jsx(s$,{onPgnSubmit:(e,t)=>{const n=cF(e),r=j$(n);h({result:r,pgn:n,title:t||""}),u(!0)},onFenSubmit:xe}),xt.jsx(x1,{onPaletteChange:ve})]})}),xt.jsxs("section",{ref:J,className:"relative py-20 overflow-hidden",children:[xt.jsx("div",{ref:ne,className:"absolute inset-0 bg-cover bg-center opacity-10 will-change-transform",style:{backgroundImage:`url(${M1})`,transform:"translate3d(0, 0, 0) scale(1.15)",backfaceVisibility:"hidden"}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-background via-background/90 to-background"}),xt.jsx("div",{className:"relative container mx-auto px-4",children:xt.jsxs("div",{className:"max-w-4xl mx-auto",children:[xt.jsxs("h3",{ref:le,className:`text-2xl md:text-3xl font-royal font-bold text-center mb-12 uppercase tracking-wider transition-all duration-700 ease-out ${ce?P1.visible:P1.hidden}`,children:["Why ",xt.jsx("span",{className:"text-gold-gradient",children:"En Pensent"}),"?"]}),xt.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[xt.jsx("div",{ref:ue,className:`transition-all duration-500 ease-out ${de?E1.visible:E1.hidden}`,children:xt.jsxs(qN,{to:"/marketplace",className:"relative block text-center space-y-4 p-8 rounded-xl overflow-hidden border border-border/50 group cursor-pointer hover:scale-[1.02] hover:border-primary/50 hover:shadow-xl hover:shadow-primary/10 transition-all duration-300",children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-15 group-hover:opacity-25 transition-opacity duration-500",style:{backgroundImage:`url(${e[0]})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card via-card/90 to-card/70"}),xt.jsxs("div",{className:"relative z-10",children:[xt.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center mx-auto group-hover:bg-primary/30 group-hover:scale-110 transition-all duration-300",children:xt.jsx(_m,{className:"h-8 w-8 text-primary"})}),xt.jsx("h3",{className:"font-display font-bold text-xl uppercase tracking-wide mt-4 group-hover:text-primary transition-colors",children:"Historic Moments"}),xt.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-serif mt-2",children:"Immortalize Fischer vs Spassky, Kasparov vs Deep Blue, or any legendary game in history"}),xt.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-primary/70 mt-3 group-hover:text-primary transition-colors",children:["Explore Marketplace ",xt.jsx(tf,{className:"h-3 w-3"})]})]})]})}),xt.jsx("div",{ref:he,className:`transition-all duration-500 delay-100 ease-out ${pe?E1.visible:E1.hidden}`,children:xt.jsxs(qN,{to:"/creative-mode",className:"relative block text-center space-y-4 p-8 rounded-xl overflow-hidden border border-border/50 group cursor-pointer hover:scale-[1.02] hover:border-primary/50 hover:shadow-xl hover:shadow-primary/10 transition-all duration-300",children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-15 group-hover:opacity-25 transition-opacity duration-500",style:{backgroundImage:`url(${e[1]})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card via-card/90 to-card/70"}),xt.jsxs("div",{className:"relative z-10",children:[xt.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center mx-auto group-hover:bg-primary/30 group-hover:scale-110 transition-all duration-300",children:xt.jsx($f,{className:"h-8 w-8 text-primary"})}),xt.jsx("h3",{className:"font-display font-bold text-xl uppercase tracking-wide mt-4 group-hover:text-primary transition-colors",children:"Unique Artwork"}),xt.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-serif mt-2",children:"Every game creates a one-of-a-kind masterpiece  no two visualizations are ever the same"}),xt.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-primary/70 mt-3 group-hover:text-primary transition-colors",children:["Create Your Own ",xt.jsx(tf,{className:"h-3 w-3"})]})]})]})}),xt.jsx("div",{ref:me,className:`transition-all duration-500 delay-200 ease-out ${fe?E1.visible:E1.hidden}`,children:xt.jsxs(qN,{to:"/my-vision",className:"relative block text-center space-y-4 p-8 rounded-xl overflow-hidden border border-border/50 group cursor-pointer hover:scale-[1.02] hover:border-primary/50 hover:shadow-xl hover:shadow-primary/10 transition-all duration-300",children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-15 group-hover:opacity-25 transition-opacity duration-500",style:{backgroundImage:`url(${e[2]})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card via-card/90 to-card/70"}),xt.jsxs("div",{className:"relative z-10",children:[xt.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center mx-auto group-hover:bg-primary/30 group-hover:scale-110 transition-all duration-300",children:xt.jsx(gg,{className:"h-8 w-8 text-primary"})}),xt.jsx("h3",{className:"font-display font-bold text-xl uppercase tracking-wide mt-4 group-hover:text-primary transition-colors",children:"Personal Legacy"}),xt.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-serif mt-2",children:"Commemorate your own victories, lessons learned, or matches played with loved ones"}),xt.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-primary/70 mt-3 group-hover:text-primary transition-colors",children:["View Your Gallery ",xt.jsx(tf,{className:"h-3 w-3"})]})]})]})})]})]})})]}),xt.jsx("section",{ref:ee,className:"py-10 md:py-16",children:xt.jsx("div",{className:"container mx-auto px-4",children:xt.jsxs("div",{ref:ge,className:`max-w-4xl mx-auto flex flex-col md:flex-row items-center gap-6 md:gap-12 transition-all duration-700 ease-out ${ye?P1.visible:P1.hidden}`,children:[xt.jsx("div",{ref:re,className:"w-36 h-36 md:w-64 md:h-64 rounded-xl md:rounded-2xl overflow-hidden shadow-xl md:shadow-2xl ring-1 ring-primary/20 flex-shrink-0 will-change-transform",style:{transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden"},children:xt.jsx("img",{src:T1,alt:"Golden chess king",className:"w-full h-full object-cover"})}),xt.jsxs("div",{className:"text-center md:text-left space-y-3 md:space-y-4 px-2",children:[xt.jsxs("h3",{className:"text-xl md:text-3xl font-royal font-bold uppercase tracking-wide",children:["Every King Has a ",xt.jsx("span",{className:"text-gold-gradient",children:"Story"})]}),xt.jsx("p",{className:"text-muted-foreground font-serif leading-relaxed text-base md:text-lg",children:"From the opening move to the final checkmate, each chess game weaves a unique narrative. Our visualizations capture this journey  transforming strategic brilliance into museum-quality art you can display with pride."})]})]})})}),xt.jsx(D1,{}),xt.jsx(h2,{variant:"hero"}),xt.jsx(S1,{}),xt.jsx("section",{className:"py-16",children:xt.jsx("div",{className:"container mx-auto px-4",children:xt.jsxs("div",{className:"max-w-6xl mx-auto",children:[xt.jsxs("div",{className:"text-center mb-8",children:[xt.jsxs("h2",{className:"font-display text-3xl md:text-4xl font-bold mb-3",children:["Your Art, ",xt.jsx("span",{className:"text-gold-gradient",children:"Any Space"})]}),xt.jsx("p",{className:"text-muted-foreground font-serif max-w-2xl mx-auto",children:"See how your chess visualizations transform any room with our museum-quality prints and handcrafted frames."})]}),xt.jsx(f2,{compact:!0,autoplay:!0,className:"max-w-4xl mx-auto"})]})})}),xt.jsx(_1,{}),xt.jsx($1,{}),xt.jsx("section",{className:"py-16",children:xt.jsx("div",{className:"container mx-auto px-4",children:xt.jsx("div",{className:"max-w-5xl mx-auto",children:xt.jsxs("div",{className:"relative overflow-hidden rounded-3xl border-2 border-primary/40 bg-gradient-to-br from-card/95 via-card to-primary/10 shadow-2xl shadow-primary/10",children:[xt.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20 transition-opacity duration-1000",style:{backgroundImage:`url(${e[3]})`}}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-card via-card/80 to-transparent"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card via-transparent to-card/50"}),xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent animate-shimmer"}),xt.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 border-t-2 border-l-2 border-primary/40 rounded-tl-3xl"}),xt.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 border-b-2 border-r-2 border-primary/40 rounded-br-3xl"}),xt.jsx("div",{className:"relative z-10 p-8 md:p-14",children:xt.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-10",children:[xt.jsxs("div",{className:"relative flex-shrink-0 group",children:[xt.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-primary/30 via-amber-400/20 to-primary/30 rounded-full blur-xl opacity-60 group-hover:opacity-100 transition-opacity duration-500"}),xt.jsx("div",{className:"relative w-28 h-28 md:w-36 md:h-36 rounded-full border-4 border-primary/50 overflow-hidden shadow-xl shadow-primary/20 group-hover:border-primary/80 transition-colors duration-300",children:xt.jsx("img",{src:NU,alt:"En Pensent",className:"w-full h-full object-cover"})}),xt.jsx("div",{className:"absolute -inset-2 border border-primary/30 rounded-full animate-spin-slow opacity-50",style:{animationDuration:"20s"}})]}),xt.jsxs("div",{className:"flex-1 text-center lg:text-left space-y-5",children:[xt.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gradient-to-r from-primary/20 to-amber-500/20 border border-primary/30 text-xs font-display uppercase tracking-[0.2em] text-primary shadow-lg shadow-primary/10",children:[xt.jsx(gg,{className:"h-3.5 w-3.5"}),"Visionary Membership"]}),xt.jsxs("h3",{className:"text-3xl md:text-4xl lg:text-5xl font-display font-bold uppercase tracking-wide leading-tight",children:["Elevate Your ",xt.jsx("span",{className:"text-gold-gradient",children:"Chess Legacy"})]}),xt.jsx("p",{className:"text-base md:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl",children:"Join an exclusive circle of chess art collectors. Unlock Stockfish 17 analysis (~3200 ELO), pristine HD downloads, curate your personal gallery, and gain first access to limited edition prints."}),xt.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start gap-4 text-sm",children:[xt.jsxs("div",{className:"flex items-center gap-2 text-primary/80",children:[xt.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),xt.jsx("span",{className:"font-serif",children:"Stockfish 17 engine"})]}),xt.jsxs("div",{className:"flex items-center gap-2 text-primary/80",children:[xt.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),xt.jsx("span",{className:"font-serif",children:"Watermark-free exports"})]}),xt.jsxs("div",{className:"flex items-center gap-2 text-primary/80",children:[xt.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),xt.jsx("span",{className:"font-serif",children:"Vision ownership"})]})]}),xt.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 pt-4",children:[xt.jsxs("div",{className:"text-center sm:text-left",children:[xt.jsxs("div",{className:"flex items-baseline gap-1",children:[xt.jsx("span",{className:"text-4xl md:text-5xl font-display font-bold text-gold-gradient",children:"$7"}),xt.jsx("span",{className:"text-muted-foreground font-serif text-lg",children:"/month"})]}),xt.jsx("p",{className:"text-xs text-muted-foreground/70 font-serif mt-1",children:"Cancel anytime"})]}),xt.jsxs(vD,{onClick:()=>P(!0),className:"group relative inline-flex items-center gap-3 px-8 py-4 rounded-xl bg-gradient-to-r from-primary via-amber-500 to-primary text-primary-foreground font-display uppercase tracking-wider text-sm hover:shadow-xl hover:shadow-primary/30 transition-all duration-300 overflow-hidden",children:[xt.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-700"}),xt.jsx(Zm,{className:"h-5 w-5 relative z-10"}),xt.jsx("span",{className:"relative z-10",children:"Become a Visionary"})]})]})]})]})})]})})})})]})}),xt.jsx(p2,{variant:"homepage"}),xt.jsx(i6,{}),xt.jsx(k5,{isOpen:C,onClose:()=>P(!1),onAuthRequired:()=>{P(!1),R(!0)},trigger:"general"}),xt.jsx(b4,{isOpen:E,onClose:()=>R(!1)})]})},r8=SD()(ED((e,t)=>({recentlyViewed:[],addRecentlyViewed:t=>{const n=Date.now();e(e=>{const r=e.recentlyViewed.filter(e=>e.id!==t.id);return{recentlyViewed:[{...t,viewedAt:n},...r].slice(0,12)}})},removeRecentlyViewed:t=>{e(e=>({recentlyViewed:e.recentlyViewed.filter(e=>e.id!==t)}))},clearRecentlyViewed:()=>{e({recentlyViewed:[]})},getRecentVisions:(e=6)=>{const{recentlyViewed:n}=t(),r=Date.now();return n.filter(e=>r-e.viewedAt<6048e5).slice(0,e)}}),{name:"en-pensent-recently-viewed",storage:CD(()=>localStorage),partialize:e=>({recentlyViewed:e.recentlyViewed})}));function a8(e){return 0===e?"$0.00":e<100?`$0.${e.toString().padStart(2,"0")}`:`$${(e/100).toFixed(2)}`}const i8=({visionNFT:e,showDetails:t=!0,className:n=""})=>{const r=e.current_floor_price_cents-e.mint_price_cents,a=e.mint_price_cents>0?r/e.mint_price_cents*100:0,i=r>=0;return xt.jsxs("div",{className:`space-y-2 ${n}`,children:[xt.jsxs("div",{className:"flex items-center gap-2",children:[xt.jsx(Jm,{className:"h-5 w-5 text-primary"}),xt.jsxs("div",{children:[xt.jsx("div",{className:"text-2xl font-bold",children:a8(e.current_floor_price_cents)}),xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Current Floor"})]})]}),t&&xt.jsxs("div",{className:"flex items-center gap-2",children:[i?xt.jsx(Ng,{className:"h-4 w-4 text-green-500"}):xt.jsx(kg,{className:"h-4 w-4 text-red-500"}),xt.jsx("span",{className:i?"text-green-500":"text-red-500",children:(s=a,`${s>=0?"+":""}${s.toFixed(1)}%`)}),xt.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",a8(r)," from mint)"]})]}),t&&e.all_time_high_cents&&e.all_time_high_cents>0&&xt.jsxs("div",{className:"text-xs text-muted-foreground",children:[xt.jsxs("span",{className:"text-green-500",children:[" ",a8(e.all_time_high_cents)," ATH"]}),e.all_time_low_cents&&e.all_time_low_cents!==e.mint_price_cents&&xt.jsxs("span",{className:"ml-2 text-red-500",children:[" ",a8(e.all_time_low_cents)," ATL"]})]}),e.rarity_score>70&&xt.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-amber-500/10 text-amber-500 text-xs",children:[xt.jsx(xm,{className:"h-3 w-3"}),"Rare (",e.rarity_score,"/100)"]})]});var s};var s8=Array.isArray,o8="object"==typeof Ne&&Ne&&Ne.Object===Object&&Ne,l8=o8,c8="object"==typeof self&&self&&self.Object===Object&&self,u8=l8||c8||Function("return this")(),d8=u8.Symbol,h8=d8,p8=Object.prototype,m8=p8.hasOwnProperty,f8=p8.toString,g8=h8?h8.toStringTag:void 0;var y8=function(e){var t=m8.call(e,g8),n=e[g8];try{e[g8]=void 0;var r=!0}catch(APe){}var a=f8.call(e);return r&&(t?e[g8]=n:delete e[g8]),a},v8=Object.prototype.toString;var x8=y8,b8=function(e){return v8.call(e)},w8=d8?d8.toStringTag:void 0;var k8=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":w8&&w8 in Object(e)?x8(e):b8(e)};var N8=function(e){return null!=e&&"object"==typeof e},j8=k8,_8=N8;var S8=function(e){return"symbol"==typeof e||_8(e)&&"[object Symbol]"==j8(e)},C8=s8,P8=S8,E8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R8=/^\w*$/;var O8=function(e,t){if(C8(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!P8(e))||(R8.test(e)||!E8.test(e)||null!=t&&e in Object(t))};var T8=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const M8=je(T8);var A8=k8,B8=T8;var D8=function(e){if(!B8(e))return!1;var t=A8(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const I8=je(D8);var L8,F8=u8["__core-js_shared__"],$8=(L8=/[^.]+$/.exec(F8&&F8.keys&&F8.keys.IE_PROTO||""))?"Symbol(src)_1."+L8:"";var z8=function(e){return!!$8&&$8 in e},q8=Function.prototype.toString;var V8=function(e){if(null!=e){try{return q8.call(e)}catch(APe){}try{return e+""}catch(APe){}}return""},W8=D8,Q8=z8,U8=T8,K8=V8,H8=/^\[object .+?Constructor\]$/,G8=Function.prototype,Y8=Object.prototype,Z8=G8.toString,X8=Y8.hasOwnProperty,J8=RegExp("^"+Z8.call(X8).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var e7=function(e){return!(!U8(e)||Q8(e))&&(W8(e)?J8:H8).test(K8(e))},t7=function(e,t){return null==e?void 0:e[t]};var n7=function(e,t){var n=t7(e,t);return e7(n)?n:void 0},r7=n7(Object,"create"),a7=r7;var i7=function(){this.__data__=a7?a7(null):{},this.size=0};var s7=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},o7=r7,l7=Object.prototype.hasOwnProperty;var c7=function(e){var t=this.__data__;if(o7){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return l7.call(t,e)?t[e]:void 0},u7=r7,d7=Object.prototype.hasOwnProperty;var h7=r7;var p7=i7,m7=s7,f7=c7,g7=function(e){var t=this.__data__;return u7?void 0!==t[e]:d7.call(t,e)},y7=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=h7&&void 0===t?"__lodash_hash_undefined__":t,this};function v7(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}v7.prototype.clear=p7,v7.prototype.delete=m7,v7.prototype.get=f7,v7.prototype.has=g7,v7.prototype.set=y7;var x7=v7;var b7=function(){this.__data__=[],this.size=0};var w7=function(e,t){return e===t||e!=e&&t!=t},k7=w7;var N7=function(e,t){for(var n=e.length;n--;)if(k7(e[n][0],t))return n;return-1},j7=N7,_7=Array.prototype.splice;var S7=N7;var C7=N7;var P7=N7;var E7=b7,R7=function(e){var t=this.__data__,n=j7(t,e);return!(n<0)&&(n==t.length-1?t.pop():_7.call(t,n,1),--this.size,!0)},O7=function(e){var t=this.__data__,n=S7(t,e);return n<0?void 0:t[n][1]},T7=function(e){return C7(this.__data__,e)>-1},M7=function(e,t){var n=this.__data__,r=P7(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function A7(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}A7.prototype.clear=E7,A7.prototype.delete=R7,A7.prototype.get=O7,A7.prototype.has=T7,A7.prototype.set=M7;var B7=A7,D7=n7(u8,"Map"),I7=x7,L7=B7,F7=D7;var $7=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var z7=function(e,t){var n=e.__data__;return $7(t)?n["string"==typeof t?"string":"hash"]:n.map},q7=z7;var V7=z7;var W7=z7;var Q7=z7;var U7=function(){this.size=0,this.__data__={hash:new I7,map:new(F7||L7),string:new I7}},K7=function(e){var t=q7(this,e).delete(e);return this.size-=t?1:0,t},H7=function(e){return V7(this,e).get(e)},G7=function(e){return W7(this,e).has(e)},Y7=function(e,t){var n=Q7(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Z7(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Z7.prototype.clear=U7,Z7.prototype.delete=K7,Z7.prototype.get=H7,Z7.prototype.has=G7,Z7.prototype.set=Y7;var X7=Z7,J7=X7;function e9(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var s=e.apply(this,r);return n.cache=i.set(a,s)||i,s};return n.cache=new(e9.Cache||J7),n}e9.Cache=J7;var t9=e9;const n9=je(t9);var r9=t9;var a9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i9=/\\(\\)?/g,s9=function(e){var t=r9(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a9,function(e,n,r,a){t.push(r?a.replace(i9,"$1"):n||e)}),t});var o9=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},l9=o9,c9=s8,u9=S8,d9=d8?d8.prototype:void 0,h9=d9?d9.toString:void 0;var p9=function e(t){if("string"==typeof t)return t;if(c9(t))return l9(t,e)+"";if(u9(t))return h9?h9.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},m9=p9;var f9=function(e){return null==e?"":m9(e)},g9=s8,y9=O8,v9=s9,x9=f9;var b9=function(e,t){return g9(e)?e:y9(e,t)?[e]:v9(x9(e))},w9=S8;var k9=function(e){if("string"==typeof e||w9(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},N9=b9,j9=k9;var _9=function(e,t){for(var n=0,r=(t=N9(t,e)).length;null!=e&&n<r;)e=e[j9(t[n++])];return n&&n==r?e:void 0},S9=_9;var C9=function(e,t,n){var r=null==e?void 0:S9(e,t);return void 0===r?n:r};const P9=je(C9);const E9=je(function(e){return null==e});var R9=k8,O9=s8,T9=N8;const M9=je(function(e){return"string"==typeof e||!O9(e)&&T9(e)&&"[object String]"==R9(e)});var A9,B9={exports:{}},D9={},I9=Symbol.for("react.element"),L9=Symbol.for("react.portal"),F9=Symbol.for("react.fragment"),$9=Symbol.for("react.strict_mode"),z9=Symbol.for("react.profiler"),q9=Symbol.for("react.provider"),V9=Symbol.for("react.context"),W9=Symbol.for("react.server_context"),Q9=Symbol.for("react.forward_ref"),U9=Symbol.for("react.suspense"),K9=Symbol.for("react.suspense_list"),H9=Symbol.for("react.memo"),G9=Symbol.for("react.lazy"),Y9=Symbol.for("react.offscreen");function Z9(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case I9:switch(e=e.type){case F9:case z9:case $9:case U9:case K9:return e;default:switch(e=e&&e.$$typeof){case W9:case V9:case Q9:case G9:case H9:case q9:return e;default:return t}}case L9:return t}}}A9=Symbol.for("react.module.reference"),D9.ContextConsumer=V9,D9.ContextProvider=q9,D9.Element=I9,D9.ForwardRef=Q9,D9.Fragment=F9,D9.Lazy=G9,D9.Memo=H9,D9.Portal=L9,D9.Profiler=z9,D9.StrictMode=$9,D9.Suspense=U9,D9.SuspenseList=K9,D9.isAsyncMode=function(){return!1},D9.isConcurrentMode=function(){return!1},D9.isContextConsumer=function(e){return Z9(e)===V9},D9.isContextProvider=function(e){return Z9(e)===q9},D9.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===I9},D9.isForwardRef=function(e){return Z9(e)===Q9},D9.isFragment=function(e){return Z9(e)===F9},D9.isLazy=function(e){return Z9(e)===G9},D9.isMemo=function(e){return Z9(e)===H9},D9.isPortal=function(e){return Z9(e)===L9},D9.isProfiler=function(e){return Z9(e)===z9},D9.isStrictMode=function(e){return Z9(e)===$9},D9.isSuspense=function(e){return Z9(e)===U9},D9.isSuspenseList=function(e){return Z9(e)===K9},D9.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===F9||e===z9||e===$9||e===U9||e===K9||e===Y9||"object"==typeof e&&null!==e&&(e.$$typeof===G9||e.$$typeof===H9||e.$$typeof===q9||e.$$typeof===V9||e.$$typeof===Q9||e.$$typeof===A9||void 0!==e.getModuleId)},D9.typeOf=Z9,B9.exports=D9;var X9=B9.exports,J9=k8,eee=N8;var tee=function(e){return"number"==typeof e||eee(e)&&"[object Number]"==J9(e)};const nee=je(tee);var ree=tee;const aee=je(function(e){return ree(e)&&e!=+e});var iee=function(e){return 0===e?0:e>0?1:-1},see=function(e){return M9(e)&&e.indexOf("%")===e.length-1},oee=function(e){return nee(e)&&!aee(e)},lee=function(e){return oee(e)||M9(e)},cee=0,uee=function(e){var t=++cee;return"".concat(e||"").concat(t)},dee=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!oee(e)&&!M9(e))return r;if(see(e)){var i=e.indexOf("%");n=t*parseFloat(e.slice(0,i))/100}else n=+e;return aee(n)&&(n=r),a&&n>t&&(n=t),n},hee=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},pee=function(e,t){return oee(e)&&oee(t)?function(n){return e+n*(t-e)}:function(){return t}};function mee(e,t,n){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):P9(e,t))===n}):null}var fee=function(e){if(!e||!e.length)return null;for(var t=e.length,n=0,r=0,a=0,i=0,s=1/0,o=-1/0,l=0,c=0,u=0;u<t;u++)n+=l=e[u].cx||0,r+=c=e[u].cy||0,a+=l*c,i+=l*l,s=Math.min(s,l),o=Math.max(o,l);var d=t*i!==n*n?(t*a-n*r)/(t*i-n*n):0;return{xmin:s,xmax:o,a:d,b:(r-d*n)/t}},gee=function(e,t){return oee(e)&&oee(t)?e-t:M9(e)&&M9(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function yee(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function vee(e){return(vee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],bee=["points","pathLength"],wee={svg:["viewBox","children"],polygon:bee,polyline:bee},kee=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Nee=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(ct.isValidElement(e)&&(n=e.props),!M8(n))return null;var r={};return Object.keys(n).forEach(function(e){kee.includes(e)&&(r[e]=t||function(t){return n[e](n,t)})}),r},jee=function(e,t,n){if(!M8(e)||"object"!==vee(e))return null;var r=null;return Object.keys(e).forEach(function(a){var i=e[a];kee.includes(a)&&"function"==typeof i&&(r||(r={}),r[a]=function(e,t,n){return function(r){return e(t,n,r),null}}(i,t,n))}),r},_ee=["children"],See=["children"];function Cee(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Pee(e){return(Pee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Eee={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ree=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},Oee=null,Tee=null,Mee=function e(t){if(t===Oee&&Array.isArray(Tee))return Tee;var n=[];return ct.Children.forEach(t,function(t){E9(t)||(X9.isFragment(t)?n=n.concat(e(t.props.children)):n.push(t))}),Tee=n,Oee=t,n};function Aee(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(function(e){return Ree(e)}):[Ree(t)],Mee(e).forEach(function(e){var t=P9(e,"type.displayName")||P9(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}function Bee(e,t){var n=Aee(e,t);return n&&n[0]}var Dee=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!oee(n)||n<=0||!oee(r)||r<=0)},Iee=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Lee=function(e){return e&&"object"===Pee(e)&&"clipDot"in e},Fee=function(e,t,n){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(ct.isValidElement(e)&&(r=e.props),!M8(r))return null;var a={};return Object.keys(r).forEach(function(e){var i;(function(e,t,n,r){var a,i=null!==(a=null==wee?void 0:wee[r])&&void 0!==a?a:[];return t.startsWith("data-")||!I8(e)&&(r&&i.includes(t)||xee.includes(t))||n&&kee.includes(t)})(null===(i=r)||void 0===i?void 0:i[e],e,t,n)&&(a[e]=r[e])}),a},$ee=function e(t,n){if(t===n)return!0;var r=ct.Children.count(t);if(r!==ct.Children.count(n))return!1;if(0===r)return!0;if(1===r)return zee(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=t[a],s=n[a];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!zee(i,s))return!1}return!0},zee=function(e,t){if(E9(e)&&E9(t))return!0;if(!E9(e)&&!E9(t)){var n=e.props||{},r=n.children,a=Cee(n,_ee),i=t.props||{},s=i.children,o=Cee(i,See);return r&&s?yee(a,o)&&$ee(r,s):!r&&!s&&yee(a,o)}return!1},qee=function(e,t){var n=[],r={};return Mee(e).forEach(function(e,a){if(function(e){return e&&e.type&&M9(e.type)&&Iee.indexOf(e.type)>=0}(e))n.push(e);else if(e){var i=Ree(e.type),s=t[i]||{},o=s.handler,l=s.once;if(o&&(!l||!r[i])){var c=o(e,i,a);n.push(c),r[i]=!0}}}),n},Vee=["children","width","height","viewBox","className","style","title","desc"];function Wee(){return Wee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wee.apply(this,arguments)}function Qee(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Uee(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,i=e.className,s=e.style,o=e.title,l=e.desc,c=Qee(e,Vee),u=a||{width:n,height:r,x:0,y:0},d=dm("recharts-surface",i);return ut.createElement("svg",Wee({},Fee(c,!0,"svg"),{className:d,width:n,height:r,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ut.createElement("title",null,o),ut.createElement("desc",null,l),t)}var Kee=["children","className"];function Hee(){return Hee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hee.apply(this,arguments)}function Gee(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yee=ut.forwardRef(function(e,t){var n=e.children,r=e.className,a=Gee(e,Kee),i=dm("recharts-layer",r);return ut.createElement("g",Hee({className:i},Fee(a,!0),{ref:t}),n)}),Zee=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a]};var Xee=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i};var Jee=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Xee(e,t,n)},ete=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var tte=function(e){return ete.test(e)};var nte=function(e){return e.split("")},rte="\\ud800-\\udfff",ate="["+rte+"]",ite="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ste="\\ud83c[\\udffb-\\udfff]",ote="[^"+rte+"]",lte="(?:\\ud83c[\\udde6-\\uddff]){2}",cte="[\\ud800-\\udbff][\\udc00-\\udfff]",ute="(?:"+ite+"|"+ste+")"+"?",dte="[\\ufe0e\\ufe0f]?",hte=dte+ute+("(?:\\u200d(?:"+[ote,lte,cte].join("|")+")"+dte+ute+")*"),pte="(?:"+[ote+ite+"?",ite,lte,cte,ate].join("|")+")",mte=RegExp(ste+"(?="+ste+")|"+pte+hte,"g");var fte=nte,gte=tte,yte=function(e){return e.match(mte)||[]};var vte=Jee,xte=tte,bte=function(e){return gte(e)?yte(e):fte(e)},wte=f9;const kte=je(function(e){return function(t){t=wte(t);var n=xte(t)?bte(t):void 0,r=n?n[0]:t.charAt(0),a=n?vte(n,1).join(""):t.slice(1);return r[e]()+a}}("toUpperCase"));function Nte(e){return function(){return e}}const jte=Math.cos,_te=Math.sin,Ste=Math.sqrt,Cte=Math.PI,Pte=2*Cte,Ete=Math.PI,Rte=2*Ete,Ote=1e-6,Tte=Rte-Ote;function Mte(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Ate{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Mte:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Mte;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,a,i){this._append`C${+e},${+t},${+n},${+r},${this._x1=+a},${this._y1=+i}`}arcTo(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error(`negative radius: ${a}`);let i=this._x1,s=this._y1,o=n-e,l=r-t,c=i-e,u=s-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>Ote)if(Math.abs(u*o-l*c)>Ote&&a){let h=n-i,p=r-s,m=o*o+l*l,f=h*h+p*p,g=Math.sqrt(m),y=Math.sqrt(d),v=a*Math.tan((Ete-Math.acos((m+d-f)/(2*g*y)))/2),x=v/y,b=v/g;Math.abs(x-1)>Ote&&this._append`L${e+x*c},${t+x*u}`,this._append`A${a},${a},0,0,${+(u*h>c*p)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,a,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),o=n*Math.sin(r),l=e+s,c=t+o,u=1^i,d=i?r-a:a-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ote||Math.abs(this._y1-c)>Ote)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%Rte+Rte),d>Tte?this._append`A${n},${n},0,1,${u},${e-s},${t-o}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>Ote&&this._append`A${n},${n},0,${+(d>=Ete)},${u},${this._x1=e+n*Math.cos(a)},${this._y1=t+n*Math.sin(a)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function Bte(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Ate(t)}function Dte(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Ite(e){this._context=e}function Lte(e){return new Ite(e)}function Fte(e){return e[0]}function $te(e){return e[1]}function zte(e,t){var n=Nte(!0),r=null,a=Lte,i=null,s=Bte(o);function o(o){var l,c,u,d=(o=Dte(o)).length,h=!1;for(null==r&&(i=a(u=s())),l=0;l<=d;++l)!(l<d&&n(c=o[l],l,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,o),+t(c,l,o));if(u)return i=null,u+""||null}return e="function"==typeof e?e:void 0===e?Fte:Nte(e),t="function"==typeof t?t:void 0===t?$te:Nte(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:Nte(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Nte(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:Nte(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o}function qte(e,t,n){var r=null,a=Nte(!0),i=null,s=Lte,o=null,l=Bte(c);function c(c){var u,d,h,p,m,f=(c=Dte(c)).length,g=!1,y=new Array(f),v=new Array(f);for(null==i&&(o=s(m=l())),u=0;u<=f;++u){if(!(u<f&&a(p=c[u],u,c))===g)if(g=!g)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(y[h],v[h]);o.lineEnd(),o.areaEnd()}g&&(y[u]=+e(p,u,c),v[u]=+t(p,u,c),o.point(r?+r(p,u,c):y[u],n?+n(p,u,c):v[u]))}if(m)return o=null,m+""||null}function u(){return zte().defined(a).curve(s).context(i)}return e="function"==typeof e?e:void 0===e?Fte:Nte(+e),t="function"==typeof t?t:Nte(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?$te:Nte(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:Nte(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:Nte(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Nte(+e),c):r},c.y=function(e){return arguments.length?(t="function"==typeof e?e:Nte(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:Nte(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:Nte(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(a="function"==typeof e?e:Nte(!!e),c):a},c.curve=function(e){return arguments.length?(s=e,null!=i&&(o=s(i)),c):s},c.context=function(e){return arguments.length?(null==e?i=o=null:o=s(i=e),c):i},c}Ite.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class Vte{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const Wte={draw(e,t){const n=Ste(t/Cte);e.moveTo(n,0),e.arc(0,0,n,0,Pte)}},Qte={draw(e,t){const n=Ste(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Ute=Ste(1/3),Kte=2*Ute,Hte={draw(e,t){const n=Ste(t/Kte),r=n*Ute;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Gte={draw(e,t){const n=Ste(t),r=-n/2;e.rect(r,r,n,n)}},Yte=_te(Cte/10)/_te(7*Cte/10),Zte=_te(Pte/10)*Yte,Xte=-jte(Pte/10)*Yte,Jte={draw(e,t){const n=Ste(.8908130915292852*t),r=Zte*n,a=Xte*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const t=Pte*i/5,s=jte(t),o=_te(t);e.lineTo(o*n,-s*n),e.lineTo(s*r-o*a,o*r+s*a)}e.closePath()}},ene=Ste(3),tne={draw(e,t){const n=-Ste(t/(3*ene));e.moveTo(0,2*n),e.lineTo(-ene*n,-n),e.lineTo(ene*n,-n),e.closePath()}},nne=-.5,rne=Ste(3)/2,ane=1/Ste(12),ine=3*(ane/2+1),sne={draw(e,t){const n=Ste(t/ine),r=n/2,a=n*ane,i=r,s=n*ane+n,o=-i,l=s;e.moveTo(r,a),e.lineTo(i,s),e.lineTo(o,l),e.lineTo(nne*r-rne*a,rne*r+nne*a),e.lineTo(nne*i-rne*s,rne*i+nne*s),e.lineTo(nne*o-rne*l,rne*o+nne*l),e.lineTo(nne*r+rne*a,nne*a-rne*r),e.lineTo(nne*i+rne*s,nne*s-rne*i),e.lineTo(nne*o+rne*l,nne*l-rne*o),e.closePath()}};function one(){}function lne(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cne(e){this._context=e}function une(e){this._context=e}function dne(e){this._context=e}function hne(e){this._context=e}function pne(e){return e<0?-1:1}function mne(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),s=(n-e._y1)/(a||r<0&&-0),o=(i*a+s*r)/(r+a);return(pne(i)+pne(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function fne(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function gne(e,t,n){var r=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-r)/3;e._context.bezierCurveTo(r+o,a+o*t,i-o,s-o*n,i,s)}function yne(e){this._context=e}function vne(e){this._context=new xne(e)}function xne(e){this._context=e}function bne(e){this._context=e}function wne(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function kne(e,t){this._context=e,this._t=t}function Nne(e,t){if((a=e.length)>1)for(var n,r,a,i=1,s=e[t[0]],o=s.length;i<a;++i)for(r=s,s=e[t[i]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function jne(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function _ne(e,t){return e[t]}function Sne(e){const t=[];return t.key=e,t}function Cne(e){return(Cne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lne(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lne(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},une.prototype={areaStart:one,areaEnd:one,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:lne(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},dne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:lne(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},hne.prototype={areaStart:one,areaEnd:one,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},yne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gne(this,this._t0,fne(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gne(this,fne(this,n=mne(this,e,t)),n);break;default:gne(this,this._t0,n=mne(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(vne.prototype=Object.create(yne.prototype)).point=function(e,t){yne.prototype.point.call(this,t,e)},xne.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},bne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=wne(e),a=wne(t),i=0,s=1;s<n;++i,++s)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},kne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Pne=["type","size","sizeType"];function Ene(){return Ene=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ene.apply(this,arguments)}function Rne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function One(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rne(Object(n),!0).forEach(function(t){Tne(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Tne(e,t,n){var r;return r=function(e,t){if("object"!=Cne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Cne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Cne(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mne(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ane={symbolCircle:Wte,symbolCross:Qte,symbolDiamond:Hte,symbolSquare:Gte,symbolStar:Jte,symbolTriangle:tne,symbolWye:sne},Bne=Math.PI/180,Dne=function(e){var t,n,r=e.type,a=void 0===r?"circle":r,i=e.size,s=void 0===i?64:i,o=e.sizeType,l=void 0===o?"area":o,c=One(One({},Mne(e,Pne)),{},{type:a,size:s,sizeType:l}),u=c.className,d=c.cx,h=c.cy,p=Fee(c,!0);return d===+d&&h===+h&&s===+s?ut.createElement("path",Ene({},p,{className:dm("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(h,")"),d:(t=function(e){var t="symbol".concat(kte(e));return Ane[t]||Wte}(a),n=function(e,t){let n=null,r=Bte(a);function a(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"==typeof e?e:Nte(e||Wte),t="function"==typeof t?t:Nte(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"==typeof t?t:Nte(t),a):e},a.size=function(e){return arguments.length?(t="function"==typeof e?e:Nte(+e),a):t},a.context=function(e){return arguments.length?(n=null==e?null:e,a):n},a}().type(t).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*Bne;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(s,l,a)),n())})):null};function Ine(e){return(Ine="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lne(){return Lne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lne.apply(this,arguments)}function Fne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $ne(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Une(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zne(e,t,n){return t=Vne(t),function(e,t){if(t&&("object"===Ine(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qne()?Reflect.construct(t,n||[],Vne(e).constructor):t.apply(e,n))}function qne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(qne=function(){return!!e})()}function Vne(e){return(Vne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wne(e,t){return(Wne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qne(e,t,n){return(t=Une(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Une(e){var t=function(e,t){if("object"!=Ine(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ine(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ine(t)?t:t+""}Dne.registerSymbol=function(e,t){Ane["symbol".concat(kte(e))]=t};var Kne=32,Hne=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zne(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wne(e,t)}(e,ct.PureComponent),$ne(e,[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,r=Kne/6,a=Kne/3,i=e.inactive?t:e.color;if("plainline"===e.type)return ut.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:Kne,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return ut.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(n,"h").concat(a,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*a,",").concat(n,"\n            H").concat(Kne,"M").concat(2*a,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(a,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return ut.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(Kne,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(ut.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fne(Object(n),!0).forEach(function(t){Qne(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete s.legendIcon,ut.cloneElement(e.legendIcon,s)}return ut.createElement(Dne,{fill:i,cx:n,cy:n,size:Kne,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,a=t.layout,i=t.formatter,s=t.inactiveColor,o={x:0,y:0,width:Kne,height:Kne},l={display:"horizontal"===a?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map(function(t,n){var a=t.formatter||i,u=dm(Qne(Qne({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var d=I8(t.value)?null:t.value;Zee(!I8(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var h=t.inactive?s:t.color;return ut.createElement("li",Lne({className:u,style:l,key:"legend-item-".concat(n)},jee(e.props,t,n)),ut.createElement(Uee,{width:r,height:r,viewBox:o,style:c},e.renderIcon(t)),ut.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},a?a(d,t,n):d))})}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return ut.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}();Qne(Hne,"displayName","Legend"),Qne(Hne,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Gne=B7;var Yne=B7,Zne=D7,Xne=X7;var Jne=B7,ere=function(){this.__data__=new Gne,this.size=0},tre=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},nre=function(e){return this.__data__.get(e)},rre=function(e){return this.__data__.has(e)},are=function(e,t){var n=this.__data__;if(n instanceof Yne){var r=n.__data__;if(!Zne||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Xne(r)}return n.set(e,t),this.size=n.size,this};function ire(e){var t=this.__data__=new Jne(e);this.size=t.size}ire.prototype.clear=ere,ire.prototype.delete=tre,ire.prototype.get=nre,ire.prototype.has=rre,ire.prototype.set=are;var sre=ire;var ore=X7,lre=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},cre=function(e){return this.__data__.has(e)};function ure(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ore;++t<n;)this.add(e[t])}ure.prototype.add=ure.prototype.push=lre,ure.prototype.has=cre;var dre=ure;var hre=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var pre=function(e,t){return e.has(t)},mre=dre,fre=hre,gre=pre;var yre=function(e,t,n,r,a,i){var s=1&n,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&n?new mre:void 0;for(i.set(e,t),i.set(t,e);++d<o;){var m=e[d],f=t[d];if(r)var g=s?r(f,m,d,t,e,i):r(m,f,d,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!fre(t,function(e,t){if(!gre(p,t)&&(m===e||a(m,e,n,r,i)))return p.push(t)})){h=!1;break}}else if(m!==f&&!a(m,f,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h};var vre=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},xre=u8.Uint8Array,bre=w7,wre=yre,kre=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n},Nre=vre,jre=d8?d8.prototype:void 0,_re=jre?jre.valueOf:void 0;var Sre=function(e,t,n,r,a,i,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new xre(e),new xre(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return bre(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=kre;case"[object Set]":var l=1&r;if(o||(o=Nre),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=wre(o(e),o(t),r,a,i,s);return s.delete(e),u;case"[object Symbol]":if(_re)return _re.call(e)==_re.call(t)}return!1};var Cre=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e},Pre=Cre,Ere=s8;var Rre=function(e,t,n){var r=t(e);return Ere(e)?r:Pre(r,n(e))};var Ore=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[a++]=s)}return i},Tre=function(){return[]},Mre=Object.prototype.propertyIsEnumerable,Are=Object.getOwnPropertySymbols,Bre=Are?function(e){return null==e?[]:(e=Object(e),Ore(Are(e),function(t){return Mre.call(e,t)}))}:Tre;var Dre=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Ire=k8,Lre=N8;var Fre,$re,zre,qre,Vre,Wre,Qre,Ure,Kre=function(e){return Lre(e)&&"[object Arguments]"==Ire(e)},Hre=N8,Gre=Object.prototype,Yre=Gre.hasOwnProperty,Zre=Gre.propertyIsEnumerable,Xre=Kre(function(){return arguments}())?Kre:function(e){return Hre(e)&&Yre.call(e,"callee")&&!Zre.call(e,"callee")},Jre={exports:{}};Fre=Jre,zre=u8,qre=function(){return!1},Vre=($re=Jre.exports)&&!$re.nodeType&&$re,Wre=Vre&&Fre&&!Fre.nodeType&&Fre,Qre=Wre&&Wre.exports===Vre?zre.Buffer:void 0,Ure=(Qre?Qre.isBuffer:void 0)||qre,Fre.exports=Ure;var eae=Jre.exports,tae=/^(?:0|[1-9]\d*)$/;var nae=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&tae.test(e))&&e>-1&&e%1==0&&e<t};var rae=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},aae=k8,iae=rae,sae=N8,oae={};oae["[object Float32Array]"]=oae["[object Float64Array]"]=oae["[object Int8Array]"]=oae["[object Int16Array]"]=oae["[object Int32Array]"]=oae["[object Uint8Array]"]=oae["[object Uint8ClampedArray]"]=oae["[object Uint16Array]"]=oae["[object Uint32Array]"]=!0,oae["[object Arguments]"]=oae["[object Array]"]=oae["[object ArrayBuffer]"]=oae["[object Boolean]"]=oae["[object DataView]"]=oae["[object Date]"]=oae["[object Error]"]=oae["[object Function]"]=oae["[object Map]"]=oae["[object Number]"]=oae["[object Object]"]=oae["[object RegExp]"]=oae["[object Set]"]=oae["[object String]"]=oae["[object WeakMap]"]=!1;var lae=function(e){return sae(e)&&iae(e.length)&&!!oae[aae(e)]};var cae=function(e){return function(t){return e(t)}},uae={exports:{}};!function(e,t){var n=o8,r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,i=a&&a.exports===r&&n.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(APe){}}();e.exports=s}(uae,uae.exports);var dae=uae.exports,hae=lae,pae=cae,mae=dae&&dae.isTypedArray,fae=mae?pae(mae):hae,gae=Dre,yae=Xre,vae=s8,xae=eae,bae=nae,wae=fae,kae=Object.prototype.hasOwnProperty;var Nae=function(e,t){var n=vae(e),r=!n&&yae(e),a=!n&&!r&&xae(e),i=!n&&!r&&!a&&wae(e),s=n||r||a||i,o=s?gae(e.length,String):[],l=o.length;for(var c in e)!t&&!kae.call(e,c)||s&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bae(c,l))||o.push(c);return o},jae=Object.prototype;var _ae=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||jae)};var Sae=function(e,t){return function(n){return e(t(n))}},Cae=Sae(Object.keys,Object),Pae=_ae,Eae=Cae,Rae=Object.prototype.hasOwnProperty;var Oae=D8,Tae=rae;var Mae=function(e){return null!=e&&Tae(e.length)&&!Oae(e)},Aae=Nae,Bae=function(e){if(!Pae(e))return Eae(e);var t=[];for(var n in Object(e))Rae.call(e,n)&&"constructor"!=n&&t.push(n);return t},Dae=Mae;var Iae=function(e){return Dae(e)?Aae(e):Bae(e)},Lae=Rre,Fae=Bre,$ae=Iae;var zae=function(e){return Lae(e,$ae,Fae)},qae=Object.prototype.hasOwnProperty;var Vae=function(e,t,n,r,a,i){var s=1&n,o=zae(e),l=o.length;if(l!=zae(t).length&&!s)return!1;for(var c=l;c--;){var u=o[c];if(!(s?u in t:qae.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var m=s;++c<l;){var f=e[u=o[c]],g=t[u];if(r)var y=s?r(g,f,u,t,e,i):r(f,g,u,e,t,i);if(!(void 0===y?f===g||a(f,g,n,r,i):y)){p=!1;break}m||(m="constructor"==u)}if(p&&!m){var v=e.constructor,x=t.constructor;v==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof x&&x instanceof x||(p=!1)}return i.delete(e),i.delete(t),p},Wae=n7(u8,"DataView"),Qae=n7(u8,"Promise"),Uae=n7(u8,"Set"),Kae=Wae,Hae=D7,Gae=Qae,Yae=Uae,Zae=n7(u8,"WeakMap"),Xae=k8,Jae=V8,eie="[object Map]",tie="[object Promise]",nie="[object Set]",rie="[object WeakMap]",aie="[object DataView]",iie=Jae(Kae),sie=Jae(Hae),oie=Jae(Gae),lie=Jae(Yae),cie=Jae(Zae),uie=Xae;(Kae&&uie(new Kae(new ArrayBuffer(1)))!=aie||Hae&&uie(new Hae)!=eie||Gae&&uie(Gae.resolve())!=tie||Yae&&uie(new Yae)!=nie||Zae&&uie(new Zae)!=rie)&&(uie=function(e){var t=Xae(e),n="[object Object]"==t?e.constructor:void 0,r=n?Jae(n):"";if(r)switch(r){case iie:return aie;case sie:return eie;case oie:return tie;case lie:return nie;case cie:return rie}return t});var die=sre,hie=yre,pie=Sre,mie=Vae,fie=uie,gie=s8,yie=eae,vie=fae,xie="[object Arguments]",bie="[object Array]",wie="[object Object]",kie=Object.prototype.hasOwnProperty;var Nie=function(e,t,n,r,a,i){var s=gie(e),o=gie(t),l=s?bie:fie(e),c=o?bie:fie(t),u=(l=l==xie?wie:l)==wie,d=(c=c==xie?wie:c)==wie,h=l==c;if(h&&yie(e)){if(!yie(t))return!1;s=!0,u=!1}if(h&&!u)return i||(i=new die),s||vie(e)?hie(e,t,n,r,a,i):pie(e,t,l,n,r,a,i);if(!(1&n)){var p=u&&kie.call(e,"__wrapped__"),m=d&&kie.call(t,"__wrapped__");if(p||m){var f=p?e.value():e,g=m?t.value():t;return i||(i=new die),a(f,g,n,r,i)}}return!!h&&(i||(i=new die),mie(e,t,n,r,a,i))},jie=N8;var _ie=function e(t,n,r,a,i){return t===n||(null==t||null==n||!jie(t)&&!jie(n)?t!=t&&n!=n:Nie(t,n,r,a,e,i))},Sie=sre,Cie=_ie;var Pie=T8;var Eie=function(e){return e==e&&!Pie(e)},Rie=Eie,Oie=Iae;var Tie=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},Mie=function(e,t,n,r){var a=n.length,i=a,s=!r;if(null==e)return!i;for(e=Object(e);a--;){var o=n[a];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){var l=(o=n[a])[0],c=e[l],u=o[1];if(s&&o[2]){if(void 0===c&&!(l in e))return!1}else{var d=new Sie;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?Cie(u,c,3,r,d):h))return!1}}return!0},Aie=function(e){for(var t=Oie(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Rie(a)]}return t},Bie=Tie;var Die=b9,Iie=Xre,Lie=s8,Fie=nae,$ie=rae,zie=k9;var qie=function(e,t){return null!=e&&t in Object(e)},Vie=function(e,t,n){for(var r=-1,a=(t=Die(t,e)).length,i=!1;++r<a;){var s=zie(t[r]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}return i||++r!=a?i:!!(a=null==e?0:e.length)&&$ie(a)&&Fie(s,a)&&(Lie(e)||Iie(e))};var Wie=_ie,Qie=C9,Uie=function(e,t){return null!=e&&Vie(e,t,qie)},Kie=O8,Hie=Eie,Gie=Tie,Yie=k9;var Zie=function(e){return e};var Xie=_9;var Jie=function(e){return function(t){return null==t?void 0:t[e]}},ese=function(e){return function(t){return Xie(t,e)}},tse=O8,nse=k9;var rse=function(e){var t=Aie(e);return 1==t.length&&t[0][2]?Bie(t[0][0],t[0][1]):function(n){return n===e||Mie(n,e,t)}},ase=function(e,t){return Kie(e)&&Hie(t)?Gie(Yie(e),t):function(n){var r=Qie(n,e);return void 0===r&&r===t?Uie(n,e):Wie(t,r,3)}},ise=Zie,sse=s8,ose=function(e){return tse(e)?Jie(nse(e)):ese(e)};var lse=function(e){return"function"==typeof e?e:null==e?ise:"object"==typeof e?sse(e)?ase(e[0],e[1]):rse(e):ose(e)};var cse=function(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1};var use=cse,dse=function(e){return e!=e},hse=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1};var pse=function(e,t,n){return t==t?hse(e,t,n):use(e,dse,n)};var mse=function(e,t){return!!(null==e?0:e.length)&&pse(e,t,0)>-1};var fse=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1};var gse=Uae,yse=function(){},vse=gse&&1/vre(new gse([,-0]))[1]==1/0?function(e){return new gse(e)}:yse,xse=dre,bse=mse,wse=fse,kse=pre,Nse=vse,jse=vre;var _se=lse,Sse=function(e,t,n){var r=-1,a=bse,i=e.length,s=!0,o=[],l=o;if(n)s=!1,a=wse;else if(i>=200){var c=t?null:Nse(e);if(c)return jse(c);s=!1,a=kse,l=new xse}else l=t?[]:o;e:for(;++r<i;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,s&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),o.push(u)}else a(l,d,n)||(l!==o&&l.push(d),o.push(u))}return o};const Cse=je(function(e,t){return e&&e.length?Sse(e,_se(t)):[]});function Pse(e,t,n){return!0===t?Cse(e,n):I8(t)?Cse(e,t):e}function Ese(e){return(Ese="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Rse=["ref"];function Ose(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ose(Object(n),!0).forEach(function(t){Lse(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ose(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fse(r.key),r)}}function Ase(e,t,n){return t=Dse(t),function(e,t){if(t&&("object"===Ese(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bse()?Reflect.construct(t,n||[],Dse(e).constructor):t.apply(e,n))}function Bse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Bse=function(){return!!e})()}function Dse(e){return(Dse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ise(e,t){return(Ise=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lse(e,t,n){return(t=Fse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fse(e){var t=function(e,t){if("object"!=Ese(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ese(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ese(t)?t:t+""}function $se(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function zse(e){return e.value}var qse=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Lse(t=Ase(this,e,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ise(e,t)}(e,ct.PureComponent),t=e,r=[{key:"getWithHeight",value:function(e,t){var n=Tse(Tse({},this.defaultProps),e.props).layout;return"vertical"===n&&oee(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Tse({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,a=r.layout,i=r.align,s=r.verticalAlign,o=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===i&&"vertical"===a?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===i?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===s?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===s?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),Tse(Tse({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,a=t.height,i=t.wrapperStyle,s=t.payloadUniqBy,o=t.payload,l=Tse(Tse({position:"absolute",width:r||"auto",height:a||"auto"},this.getDefaultPosition(i)),i);return ut.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(ut.isValidElement(e))return ut.cloneElement(e,t);if("function"==typeof e)return ut.createElement(e,t);t.ref;var n=$se(t,Rse);return ut.createElement(Hne,n)}(n,Tse(Tse({},this.props),{},{payload:Pse(o,s,zse)})))}}])&&Mse(t.prototype,n),r&&Mse(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Lse(qse,"displayName","Legend"),Lse(qse,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Vse=Xre,Wse=s8,Qse=d8?d8.isConcatSpreadable:void 0;var Use=Cre,Kse=function(e){return Wse(e)||Vse(e)||!!(Qse&&e&&e[Qse])};var Hse=function e(t,n,r,a,i){var s=-1,o=t.length;for(r||(r=Kse),i||(i=[]);++s<o;){var l=t[s];n>0&&r(l)?n>1?e(l,n-1,r,a,i):Use(i,l):a||(i[i.length]=l)}return i};var Gse=function(e){return function(t,n,r){for(var a=-1,i=Object(t),s=r(t),o=s.length;o--;){var l=s[e?o:++a];if(!1===n(i[l],l,i))break}return t}}(),Yse=Iae;var Zse=function(e,t){return e&&Gse(e,t,Yse)},Xse=Mae;var Jse=function(e,t){return function(n,r){if(null==n)return n;if(!Xse(n))return e(n,r);for(var a=n.length,i=t?a:-1,s=Object(n);(t?i--:++i<a)&&!1!==r(s[i],i,s););return n}}(Zse),eoe=Jse,toe=Mae;var noe=function(e,t){var n=-1,r=toe(e)?Array(e.length):[];return eoe(e,function(e,a,i){r[++n]=t(e,a,i)}),r};var roe=S8;var aoe=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,a=e==e,i=roe(e),s=void 0!==t,o=null===t,l=t==t,c=roe(t);if(!o&&!c&&!i&&e>t||i&&s&&l&&!o&&!c||r&&s&&l||!n&&l||!a)return 1;if(!r&&!i&&!c&&e<t||c&&n&&a&&!r&&!i||o&&n&&a||!s&&a||!l)return-1}return 0};var ioe=o9,soe=_9,ooe=lse,loe=noe,coe=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},uoe=cae,doe=function(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,s=a.length,o=n.length;++r<s;){var l=aoe(a[r],i[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index},hoe=Zie,poe=s8;var moe=function(e,t,n){t=t.length?ioe(t,function(e){return poe(e)?function(t){return soe(t,1===e.length?e[0]:e)}:e}):[hoe];var r=-1;t=ioe(t,uoe(ooe));var a=loe(e,function(e,n,a){return{criteria:ioe(t,function(t){return t(e)}),index:++r,value:e}});return coe(a,function(e,t){return doe(e,t,n)})};var foe=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},goe=foe,yoe=Math.max;var voe=function(e,t,n){return t=yoe(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=yoe(r.length-t,0),s=Array(i);++a<i;)s[a]=r[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=r[a];return o[t]=n(s),goe(e,this,o)}};var xoe=function(e){return function(){return e}},boe=n7,woe=function(){try{var e=boe(Object,"defineProperty");return e({},"",{}),e}catch(APe){}}(),koe=xoe,Noe=woe,joe=Noe?function(e,t){return Noe(e,"toString",{configurable:!0,enumerable:!1,value:koe(t),writable:!0})}:Zie,_oe=Date.now;var Soe=function(e){var t=0,n=0;return function(){var r=_oe(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(joe),Coe=Zie,Poe=voe,Eoe=Soe;var Roe=w7,Ooe=Mae,Toe=nae,Moe=T8;var Aoe=function(e,t,n){if(!Moe(n))return!1;var r=typeof t;return!!("number"==r?Ooe(n)&&Toe(t,n.length):"string"==r&&t in n)&&Roe(n[t],e)},Boe=Hse,Doe=moe,Ioe=Aoe;const Loe=je(function(e,t){return Eoe(Poe(e,t,Coe),e+"")}(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ioe(e,t[0],t[1])?t=[]:n>2&&Ioe(t[0],t[1],t[2])&&(t=[t[0]]),Doe(e,Boe(t,1),[])}));function Foe(e){return(Foe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $oe(){return $oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$oe.apply(this,arguments)}function zoe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qoe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qoe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qoe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Voe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Woe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Voe(Object(n),!0).forEach(function(t){Qoe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Voe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Qoe(e,t,n){var r;return r=function(e,t){if("object"!=Foe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Foe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Foe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uoe(e){return Array.isArray(e)&&lee(e[0])&&lee(e[1])?e.join(" ~ "):e}var Koe=function(e){var t=e.separator,n=void 0===t?" : ":t,r=e.contentStyle,a=void 0===r?{}:r,i=e.itemStyle,s=void 0===i?{}:i,o=e.labelStyle,l=void 0===o?{}:o,c=e.payload,u=e.formatter,d=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,m=e.label,f=e.labelFormatter,g=e.accessibilityLayer,y=void 0!==g&&g,v=Woe({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),x=Woe({margin:0},l),b=!E9(m),w=b?m:"",k=dm("recharts-default-tooltip",h),N=dm("recharts-tooltip-label",p);b&&f&&null!=c&&(w=f(m,c));var j=y?{role:"status","aria-live":"assertive"}:{};return ut.createElement("div",$oe({className:k,style:v},j),ut.createElement("p",{className:N,style:x},ut.isValidElement(w)?w:"".concat(w)),function(){if(c&&c.length){var e=(d?Loe(c,d):c).map(function(e,t){if("none"===e.type)return null;var r=Woe({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},s),a=e.formatter||u||Uoe,i=e.value,o=e.name,l=i,d=o;if(a&&null!=l&&null!=d){var h=a(i,o,e,t,c);if(Array.isArray(h)){var p=zoe(h,2);l=p[0],d=p[1]}else l=h}return ut.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:r},lee(d)?ut.createElement("span",{className:"recharts-tooltip-item-name"},d):null,lee(d)?ut.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ut.createElement("span",{className:"recharts-tooltip-item-value"},l),ut.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return ut.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function Hoe(e){return(Hoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Goe(e,t,n){var r;return r=function(e,t){if("object"!=Hoe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Hoe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Hoe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yoe="recharts-tooltip-wrapper",Zoe={visibility:"hidden"};function Xoe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return dm(Yoe,Goe(Goe(Goe(Goe({},"".concat(Yoe,"-right"),oee(n)&&t&&oee(t.x)&&n>=t.x),"".concat(Yoe,"-left"),oee(n)&&t&&oee(t.x)&&n<t.x),"".concat(Yoe,"-bottom"),oee(r)&&t&&oee(t.y)&&r>=t.y),"".concat(Yoe,"-top"),oee(r)&&t&&oee(t.y)&&r<t.y))}function Joe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(i&&oee(i[r]))return i[r];var u=n[r]-o-a,d=n[r]+a;return t[r]?s[r]?u:d:s[r]?u<l[r]?Math.max(d,l[r]):Math.max(u,l[r]):d+o>l[r]+c?Math.max(u,l[r]):Math.max(d,l[r])}function ele(e){return(ele="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tle(Object(n),!0).forEach(function(t){lle(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tle(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rle(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cle(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ale(e,t,n){return t=sle(t),function(e,t){if(t&&("object"===ele(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ile()?Reflect.construct(t,n||[],sle(e).constructor):t.apply(e,n))}function ile(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ile=function(){return!!e})()}function sle(e){return(sle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ole(e,t){return(ole=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lle(e,t,n){return(t=cle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cle(e){var t=function(e,t){if("object"!=ele(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ele(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ele(t)?t:t+""}var ule=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return lle(t=ale(this,e,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),lle(t,"handleKeyDown",function(e){var n,r,a,i;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=t.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(a=null===(i=t.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==a?a:0}})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ole(e,t)}(e,ct.PureComponent),rle(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,a=t.animationDuration,i=t.animationEasing,s=t.children,o=t.coordinate,l=t.hasPayload,c=t.isAnimationActive,u=t.offset,d=t.position,h=t.reverseDirection,p=t.useTranslate3d,m=t.viewBox,f=t.wrapperStyle,g=function(e){var t,n,r=e.allowEscapeViewBox,a=e.coordinate,i=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&a?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=Joe({allowEscapeViewBox:r,coordinate:a,key:"x",offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=Joe({allowEscapeViewBox:r,coordinate:a,key:"y",offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):Zoe,cssClasses:Xoe({translateX:t,translateY:n,coordinate:a})}}({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:m}),y=g.cssClasses,v=g.cssProperties,x=nle(nle({transition:c&&n?"transform ".concat(a,"ms ").concat(i):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&l?"visible":"hidden",position:"absolute",top:0,left:0},f);return ut.createElement("div",{tabIndex:-1,className:y,style:x,ref:function(t){e.wrapperNode=t}},s)}}])}(),dle={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout)};function hle(e){return(hle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ple(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ple(Object(n),!0).forEach(function(t){ble(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ple(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fle(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wle(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gle(e,t,n){return t=vle(t),function(e,t){if(t&&("object"===hle(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yle()?Reflect.construct(t,n||[],vle(e).constructor):t.apply(e,n))}function yle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(yle=function(){return!!e})()}function vle(e){return(vle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xle(e,t){return(xle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ble(e,t,n){return(t=wle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wle(e){var t=function(e,t){if("object"!=hle(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=hle(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==hle(t)?t:t+""}function kle(e){return e.dataKey}var Nle=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gle(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xle(e,t)}(e,ct.PureComponent),fle(e,[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,a=t.animationDuration,i=t.animationEasing,s=t.content,o=t.coordinate,l=t.filterNull,c=t.isAnimationActive,u=t.offset,d=t.payload,h=t.payloadUniqBy,p=t.position,m=t.reverseDirection,f=t.useTranslate3d,g=t.viewBox,y=t.wrapperStyle,v=null!=d?d:[];l&&v.length&&(v=Pse(d.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),h,kle));var x=v.length>0;return ut.createElement(ule,{allowEscapeViewBox:r,animationDuration:a,animationEasing:i,isAnimationActive:c,active:n,coordinate:o,hasPayload:x,offset:u,position:p,reverseDirection:m,useTranslate3d:f,viewBox:g,wrapperStyle:y},function(e,t){return ut.isValidElement(e)?ut.cloneElement(e,t):"function"==typeof e?ut.createElement(e,t):ut.createElement(Koe,t)}(s,mle(mle({},this.props),{},{payload:v})))}}])}();ble(Nle,"displayName","Tooltip"),ble(Nle,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!dle.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var jle=u8,_le=/\s/;var Sle=function(e){for(var t=e.length;t--&&_le.test(e.charAt(t)););return t},Cle=/^\s+/;var Ple=function(e){return e?e.slice(0,Sle(e)+1).replace(Cle,""):e},Ele=T8,Rle=S8,Ole=/^[-+]0x[0-9a-f]+$/i,Tle=/^0b[01]+$/i,Mle=/^0o[0-7]+$/i,Ale=parseInt;var Ble=function(e){if("number"==typeof e)return e;if(Rle(e))return NaN;if(Ele(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ele(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ple(e);var n=Tle.test(e);return n||Mle.test(e)?Ale(e.slice(2),n?2:8):Ole.test(e)?NaN:+e},Dle=T8,Ile=function(){return jle.Date.now()},Lle=Ble,Fle=Math.max,$le=Math.min;var zle=function(e,t,n){var r,a,i,s,o,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=a;return r=a=void 0,c=t,s=e.apply(i,n)}function m(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function f(){var e=Ile();if(m(e))return g(e);o=setTimeout(f,function(e){var n=t-(e-l);return d?$le(n,i-(e-c)):n}(e))}function g(e){return o=void 0,h&&r?p(e):(r=a=void 0,s)}function y(){var e=Ile(),n=m(e);if(r=arguments,a=this,l=e,n){if(void 0===o)return function(e){return c=e,o=setTimeout(f,t),u?p(e):s}(l);if(d)return clearTimeout(o),o=setTimeout(f,t),p(l)}return void 0===o&&(o=setTimeout(f,t)),s}return t=Lle(t)||0,Dle(n)&&(u=!!n.leading,i=(d="maxWait"in n)?Fle(Lle(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==o&&clearTimeout(o),c=0,r=l=a=o=void 0},y.flush=function(){return void 0===o?s:g(Ile())},y},qle=zle,Vle=T8;var Wle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Vle(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),qle(e,t,{leading:r,maxWait:t,trailing:a})};const Qle=je(Wle);function Ule(e){return(Ule="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kle(Object(n),!0).forEach(function(t){Gle(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kle(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Gle(e,t,n){var r;return r=function(e,t){if("object"!=Ule(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ule(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ule(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yle(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zle(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xle=ct.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=void 0===r?{width:-1,height:-1}:r,i=e.width,s=void 0===i?"100%":i,o=e.height,l=void 0===o?"100%":o,c=e.minWidth,u=void 0===c?0:c,d=e.minHeight,h=e.maxHeight,p=e.children,m=e.debounce,f=void 0===m?0:m,g=e.id,y=e.className,v=e.onResize,x=e.style,b=void 0===x?{}:x,w=ct.useRef(null),k=ct.useRef();k.current=v,ct.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return w.current},configurable:!0})});var N=Yle(ct.useState({containerWidth:a.width,containerHeight:a.height}),2),j=N[0],_=N[1],S=ct.useCallback(function(e,t){_(function(n){var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]);ct.useEffect(function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,a=n.height;S(r,a),null===(t=k.current)||void 0===t||t.call(k,r,a)};f>0&&(e=Qle(e,f,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=w.current.getBoundingClientRect(),r=n.width,a=n.height;return S(r,a),t.observe(w.current),function(){t.disconnect()}},[S,f]);var C=ct.useMemo(function(){var e=j.containerWidth,t=j.containerHeight;if(e<0||t<0)return null;Zee(see(s)||see(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,l),Zee(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=see(s)?e:s,a=see(l)?t:l;n&&n>0&&(r?a=r/n:a&&(r=a*n),h&&a>h&&(a=h)),Zee(r>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,a,s,l,u,d,n);var i=!Array.isArray(p)&&Ree(p.type).endsWith("Chart");return ut.Children.map(p,function(e){return ut.isValidElement(e)?ct.cloneElement(e,Hle({width:r,height:a},i?{style:Hle({height:"100%",width:"100%",maxHeight:a,maxWidth:r},e.props.style)}:{})):e})},[n,p,l,h,d,u,j,s]);return ut.createElement("div",{id:g?"".concat(g):void 0,className:dm("recharts-responsive-container",y),style:Hle(Hle({},b),{},{width:s,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:w},C)}),Jle=function(e){return null};function ece(e){return(ece="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tce(Object(n),!0).forEach(function(t){rce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rce(e,t,n){var r;return r=function(e,t){if("object"!=ece(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ece(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ece(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Jle.displayName="Cell";var ace={widthCache:{},cacheCount:0},ice={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},sce="recharts_measurement_span";var oce=function(e){if(null==e||dle.isSsr)return{width:0,height:0};var t,n=(t=nce({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t),r=JSON.stringify({text:e,copyStyle:n});if(ace.widthCache[r])return ace.widthCache[r];try{var a=document.getElementById(sce);a||((a=document.createElement("span")).setAttribute("id",sce),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var i=nce(nce({},ice),n);Object.assign(a.style,i),a.textContent="".concat(e);var s=a.getBoundingClientRect(),o={width:s.width,height:s.height};return ace.widthCache[r]=o,++ace.cacheCount>2e3&&(ace.cacheCount=0,ace.widthCache={}),o}catch(APe){return{width:0,height:0}}};function lce(e){return(lce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hce(r.key),r)}}function hce(e){var t=function(e,t){if("object"!=lce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=lce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==lce(t)?t:t+""}var pce=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mce=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fce=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gce=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,yce={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},vce=Object.keys(yce),xce="NaN";var bce=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||fce.test(n)||(this.num=NaN,this.unit=""),vce.includes(n)&&(this.num=function(e,t){return e*yce[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=cce(null!==(n=gce.exec(t))&&void 0!==n?n:[],3),a=r[1],i=r[2];return new e(parseFloat(a),null!=i?i:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&dce(t.prototype,n),r&&dce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function wce(e){if(e.includes(xce))return xce;for(var t=e;t.includes("*")||t.includes("/");){var n,r=cce(null!==(n=pce.exec(t))&&void 0!==n?n:[],4),a=r[1],i=r[2],s=r[3],o=bce.parse(null!=a?a:""),l=bce.parse(null!=s?s:""),c="*"===i?o.multiply(l):o.divide(l);if(c.isNaN())return xce;t=t.replace(pce,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=cce(null!==(u=mce.exec(t))&&void 0!==u?u:[],4),h=d[1],p=d[2],m=d[3],f=bce.parse(null!=h?h:""),g=bce.parse(null!=m?m:""),y="+"===p?f.add(g):f.subtract(g);if(y.isNaN())return xce;t=t.replace(mce,y.toString())}return t}var kce=/\(([^()]*)\)/;function Nce(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=cce(kce.exec(t),2)[1];t=t.replace(kce,wce(n))}return t}(t),t=wce(t)}function jce(e){var t=function(e){try{return Nce(e)}catch(APe){return xce}}(e.slice(5,-1));return t===xce?"":t}var _ce=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Sce=["dx","dy","angle","className","breakAll"];function Cce(){return Cce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cce.apply(this,arguments)}function Pce(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ece(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oce=/[ \f\n\r\t\v\u2028\u2029]+/,Tce=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var a=[];return E9(t)||(a=n?t.toString().split(""):t.toString().split(Oce)),{wordsWithComputedWidth:a.map(function(e){return{word:e,width:oce(e,r).width}}),spaceWidth:n?0:oce("",r).width}}catch(APe){return null}},Mce=function(e){return[{words:E9(e)?[]:e.toString().split(Oce)}]},Ace=function(e){var t=e.width,n=e.scaleToFit,r=e.children,a=e.style,i=e.breakAll,s=e.maxLines;if((t||n)&&!dle.isSsr){var o=Tce({breakAll:i,children:r,style:a});return o?function(e,t,n,r,a){var i=e.maxLines,s=e.children,o=e.style,l=e.breakAll,c=oee(i),u=s,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var i=t.word,s=t.width,o=e[e.length-1];if(o&&(null==r||a||o.width+s+n<Number(r)))o.words.push(i),o.width+=s+n;else{var l={words:[i],width:s};e.push(l)}return e},[])},h=d(t);if(!c)return h;for(var p,m=function(e){var t=u.slice(0,e),n=Tce({breakAll:l,style:o,children:t+""}).wordsWithComputedWidth,a=d(n),s=a.length>i||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(a).width>Number(r);return[s,a]},f=0,g=u.length-1,y=0;f<=g&&y<=u.length-1;){var v=Math.floor((f+g)/2),x=Ece(m(v-1),2),b=x[0],w=x[1],k=Ece(m(v),1)[0];if(b||k||(f=v+1),b&&k&&(g=v-1),!b&&k){p=w;break}y++}return p||h}({breakAll:i,children:r,maxLines:s,style:a},o.wordsWithComputedWidth,o.spaceWidth,t,n):Mce(r)}return Mce(r)},Bce="#808080",Dce=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,a=void 0===r?0:r,i=e.lineHeight,s=void 0===i?"1em":i,o=e.capHeight,l=void 0===o?"0.71em":o,c=e.scaleToFit,u=void 0!==c&&c,d=e.textAnchor,h=void 0===d?"start":d,p=e.verticalAnchor,m=void 0===p?"end":p,f=e.fill,g=void 0===f?Bce:f,y=Pce(e,_ce),v=ct.useMemo(function(){return Ace({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:u,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,u,y.style,y.width]),x=y.dx,b=y.dy,w=y.angle,k=y.className,N=y.breakAll,j=Pce(y,Sce);if(!lee(n)||!lee(a))return null;var _,S=n+(oee(x)?x:0),C=a+(oee(b)?b:0);switch(m){case"start":_=jce("calc(".concat(l,")"));break;case"middle":_=jce("calc(".concat((v.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:_=jce("calc(".concat(v.length-1," * -").concat(s,")"))}var P=[];if(u){var E=v[0].width,R=y.width;P.push("scale(".concat((oee(R)?R/E:1)/E,")"))}return w&&P.push("rotate(".concat(w,", ").concat(S,", ").concat(C,")")),P.length&&(j.transform=P.join(" ")),ut.createElement("text",Cce({},Fee(j,!0),{x:S,y:C,className:dm("recharts-text",k),textAnchor:h,fill:g.includes("url")?Bce:g}),v.map(function(e,t){var n=e.words.join(N?"":" ");return ut.createElement("tspan",{x:S,dy:0===t?_:s,key:"".concat(n,"-").concat(t)},n)}))};function Ice(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lce(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fce(e){let t,n,r;function a(e,r,a=0,i=e.length){if(a<i){if(0!==t(r,r))return i;do{const t=a+i>>>1;n(e[t],r)<0?a=t+1:i=t}while(a<i)}return a}return 2!==e.length?(t=Ice,n=(t,n)=>Ice(e(t),n),r=(t,n)=>e(t)-n):(t=e===Ice||e===Lce?e:$ce,n=e,r=e),{left:a,center:function(e,t,n=0,i=e.length){const s=a(e,t,n,i-1);return s>n&&r(e[s-1],t)>-r(e[s],t)?s-1:s},right:function(e,r,a=0,i=e.length){if(a<i){if(0!==t(r,r))return i;do{const t=a+i>>>1;n(e[t],r)<=0?a=t+1:i=t}while(a<i)}return a}}}function $ce(){return 0}function zce(e){return null===e?NaN:+e}const qce=Fce(Ice).right;Fce(zce).center;class Vce extends Map{constructor(e,t=Qce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Wce(this,e))}has(e){return super.has(Wce(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const r=t(n);e.has(r)&&(n=e.get(r),e.delete(r));return n}(this,e))}}function Wce({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Qce(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Uce(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const Kce=Math.sqrt(50),Hce=Math.sqrt(10),Gce=Math.sqrt(2);function Yce(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),s=i>=Kce?10:i>=Hce?5:i>=Gce?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?Yce(e,t,2*n):[o,l,c]}function Zce(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[a,i,s]=r?Yce(t,e,n):Yce(e,t,n);if(!(i>=a))return[];const o=i-a+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(i-c)/-s;else for(let c=0;c<o;++c)l[c]=(i-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(a+c)/-s;else for(let c=0;c<o;++c)l[c]=(a+c)*s;return l}function Xce(e,t,n){return Yce(e=+e,t=+t,n=+n)[2]}function Jce(e,t,n){n=+n;const r=(t=+t)<(e=+e),a=r?Xce(t,e,n):Xce(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function eue(e,t){let n;for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);return n}function tue(e,t){let n;for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);return n}function nue(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=void 0===a?Uce:function(e=Ice){if(e===Ice)return Uce;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}(a);r>n;){if(r-n>600){const i=r-n+1,s=t-n+1,o=Math.log(i),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(i-l)/i)*(s-i/2<0?-1:1);nue(e,t,Math.max(n,Math.floor(t-s*l/i+c)),Math.min(r,Math.floor(t+(i-s)*l/i+c)),a)}const i=e[t];let s=n,o=r;for(rue(e,n,t),a(e[r],i)>0&&rue(e,n,r);s<o;){for(rue(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}0===a(e[n],i)?rue(e,n,o):(++o,rue(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function rue(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function aue(e,t,n=zce){if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),s=+n(e[i],i,e);return s+(+n(e[i+1],i+1,e)-s)*(a-i)}}function iue(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function sue(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const oue=Symbol("implicit");function lue(){var e=new Vce,t=[],n=[],r=oue;function a(a){let i=e.get(a);if(void 0===i){if(r!==oue)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Vce;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return lue(t,n).unknown(r)},iue.apply(a,arguments),a}function cue(){var e,t,n=lue().unknown(void 0),r=n.domain,a=n.range,i=0,s=1,o=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=s<i,h=d?s:i,p=d?i:s;e=(p-h)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*u,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var m=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}(n).map(function(t){return h+e*t});return a(d?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([i,s]=e,i=+i,s=+s,d()):[i,s]},n.rangeRound=function(e){return[i,s]=e,i=+i,s=+s,o=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,d()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return cue(r(),[i,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},iue.apply(d(),arguments)}function uue(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return uue(t())},e}function due(){return uue(cue.apply(null,arguments).paddingInner(1))}function hue(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pue(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mue(){}var fue=.7,gue=1/fue,yue="\\s*([+-]?\\d+)\\s*",vue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bue=/^#([0-9a-f]{3,8})$/,wue=new RegExp(`^rgb\\(${yue},${yue},${yue}\\)$`),kue=new RegExp(`^rgb\\(${xue},${xue},${xue}\\)$`),Nue=new RegExp(`^rgba\\(${yue},${yue},${yue},${vue}\\)$`),jue=new RegExp(`^rgba\\(${xue},${xue},${xue},${vue}\\)$`),_ue=new RegExp(`^hsl\\(${vue},${xue},${xue}\\)$`),Sue=new RegExp(`^hsla\\(${vue},${xue},${xue},${vue}\\)$`),Cue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Pue(){return this.rgb().formatHex()}function Eue(){return this.rgb().formatRgb()}function Rue(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bue.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Oue(t):3===n?new Aue(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Tue(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Tue(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=wue.exec(e))?new Aue(t[1],t[2],t[3],1):(t=kue.exec(e))?new Aue(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Nue.exec(e))?Tue(t[1],t[2],t[3],t[4]):(t=jue.exec(e))?Tue(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=_ue.exec(e))?$ue(t[1],t[2]/100,t[3]/100,1):(t=Sue.exec(e))?$ue(t[1],t[2]/100,t[3]/100,t[4]):Cue.hasOwnProperty(e)?Oue(Cue[e]):"transparent"===e?new Aue(NaN,NaN,NaN,0):null}function Oue(e){return new Aue(e>>16&255,e>>8&255,255&e,1)}function Tue(e,t,n,r){return r<=0&&(e=t=n=NaN),new Aue(e,t,n,r)}function Mue(e,t,n,r){return 1===arguments.length?((a=e)instanceof mue||(a=Rue(a)),a?new Aue((a=a.rgb()).r,a.g,a.b,a.opacity):new Aue):new Aue(e,t,n,null==r?1:r);var a}function Aue(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Bue(){return`#${Fue(this.r)}${Fue(this.g)}${Fue(this.b)}`}function Due(){const e=Iue(this.opacity);return`${1===e?"rgb(":"rgba("}${Lue(this.r)}, ${Lue(this.g)}, ${Lue(this.b)}${1===e?")":`, ${e})`}`}function Iue(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Lue(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fue(e){return((e=Lue(e))<16?"0":"")+e.toString(16)}function $ue(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new que(e,t,n,r)}function zue(e){if(e instanceof que)return new que(e.h,e.s,e.l,e.opacity);if(e instanceof mue||(e=Rue(e)),!e)return new que;if(e instanceof que)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,o=i-a,l=(i+a)/2;return o?(s=t===i?(n-r)/o+6*(n<r):n===i?(r-t)/o+2:(t-n)/o+4,o/=l<.5?i+a:2-i-a,s*=60):o=l>0&&l<1?0:s,new que(s,o,l,e.opacity)}function que(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Vue(e){return(e=(e||0)%360)<0?e+360:e}function Wue(e){return Math.max(0,Math.min(1,e||0))}function Que(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}hue(mue,Rue,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Pue,formatHex:Pue,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return zue(this).formatHsl()},formatRgb:Eue,toString:Eue}),hue(Aue,Mue,pue(mue,{brighter(e){return e=null==e?gue:Math.pow(gue,e),new Aue(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?fue:Math.pow(fue,e),new Aue(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Aue(Lue(this.r),Lue(this.g),Lue(this.b),Iue(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bue,formatHex:Bue,formatHex8:function(){return`#${Fue(this.r)}${Fue(this.g)}${Fue(this.b)}${Fue(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Due,toString:Due})),hue(que,function(e,t,n,r){return 1===arguments.length?zue(e):new que(e,t,n,null==r?1:r)},pue(mue,{brighter(e){return e=null==e?gue:Math.pow(gue,e),new que(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?fue:Math.pow(fue,e),new que(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Aue(Que(e>=240?e-240:e+120,a,r),Que(e,a,r),Que(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new que(Vue(this.h),Wue(this.s),Wue(this.l),Iue(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Iue(this.opacity);return`${1===e?"hsl(":"hsla("}${Vue(this.h)}, ${100*Wue(this.s)}%, ${100*Wue(this.l)}%${1===e?")":`, ${e})`}`}}));const Uue=e=>()=>e;function Kue(e){return 1===(e=+e)?Hue:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Uue(isNaN(t)?n:t)}}function Hue(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Uue(isNaN(e)?t:e)}const Gue=function e(t){var n=Kue(t);function r(e,t){var r=n((e=Mue(e)).r,(t=Mue(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),s=Hue(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function Yue(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function Zue(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),s=new Array(r);for(n=0;n<a;++n)i[n]=ade(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<a;++n)s[n]=i[n](e);return s}}function Xue(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Jue(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ede(e,t){var n,r={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=ade(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var tde=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nde=new RegExp(tde.source,"g");function rde(e,t){var n,r,a,i=tde.lastIndex=nde.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=tde.exec(e))&&(r=nde.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:Jue(n,r)})),i=nde.lastIndex;return i<t.length&&(a=t.slice(i),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function ade(e,t){var n,r,a=typeof t;return null==t||"boolean"===a?Uue(t):("number"===a?Jue:"string"===a?(n=Rue(t))?(t=n,Gue):rde:t instanceof Rue?Gue:t instanceof Date?Xue:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Zue:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?ede:Jue:Yue))(e,t)}function ide(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function sde(e){return+e}var ode=[0,1];function lde(e){return e}function cde(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ude(e,t,n){var r=e[0],a=e[1],i=t[0],s=t[1];return a<r?(r=cde(a,r),i=n(s,i)):(r=cde(r,a),i=n(i,s)),function(e){return i(r(e))}}function dde(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)a[s]=cde(e[s],e[s+1]),i[s]=n(t[s],t[s+1]);return function(t){var n=qce(e,t,1,r)-1;return i[n](a[n](t))}}function hde(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pde(){var e,t,n,r,a,i,s=ode,o=ode,l=ade,c=lde;function u(){var e=Math.min(s.length,o.length);return c!==lde&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),r=e>2?dde:ude,a=i=null,d}function d(t){return null==t||isNaN(t=+t)?n:(a||(a=r(s.map(e),o,l)))(e(c(t)))}return d.invert=function(n){return c(t((i||(i=r(o,s.map(e),Jue)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,sde),u()):s.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=ide,u()},d.clamp=function(e){return arguments.length?(c=!!e||lde,u()):c!==lde},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function mde(){return pde()(lde,lde)}function fde(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gde(e){return(e=fde(Math.abs(e)))?e[1]:NaN}var yde,vde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xde(e){if(!(t=vde.exec(e)))throw new Error("invalid format: "+e);var t;return new bde({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function bde(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function wde(e,t){var n=fde(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}xde.prototype=bde.prototype,bde.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const kde={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wde(100*e,t),r:wde,s:function(e,t){var n=fde(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(yde=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+fde(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Nde(e){return e}var jde,_de,Sde,Cde=Array.prototype.map,Pde=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ede(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Nde:(t=Cde.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),i.push(e.substring(a-=o,a+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Nde:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Cde.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=xde(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,m=e.width,f=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(f=!0,v="g"):kde[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var x="$"===h?a:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?i:/[%p]/.test(v)?l:"",w=kde[v],k=/[defgprs%]/.test(v);function N(e){var a,i,l,h=x,N=b;if("c"===v)N=w(e)+N,e="";else{var j=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),j&&0===+e&&"+"!==d&&(j=!1),h=(j?"("===d?d:c:"-"===d||"("===d?"":d)+h,N=("s"===v?Pde[8+yde/3]:"")+N+(j&&"("===d?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?s+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}f&&!p&&(e=r(e,1/0));var _=h.length+e.length+N.length,S=_<m?new Array(m-_+1).join(t):"";switch(f&&p&&(e=r(S+e,S.length?m-N.length:1/0),S=""),n){case"<":e=h+e+N+S;break;case"=":e=h+S+e+N;break;case"^":e=S.slice(0,_=S.length>>1)+h+e+N+S.slice(_);break;default:e=S+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:d,formatPrefix:function(e,t){var n=d(((e=xde(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(gde(t)/3))),a=Math.pow(10,-r),i=Pde[8+r/3];return function(e){return n(a*e)+i}}}}function Rde(e,t,n,r){var a,i=Jce(e,t,n);switch((r=xde(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(gde(t)/3)))-gde(Math.abs(e)))}(i,s))||(r.precision=a),Sde(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gde(t)-gde(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-gde(Math.abs(e)))}(i))||(r.precision=a-2*("%"===r.type))}return _de(r)}function Ode(e){var t=e.domain;return e.ticks=function(e){var n=t();return Zce(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Rde(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),s=0,o=i.length-1,l=i[s],c=i[o],u=10;for(c<l&&(a=l,l=c,c=a,a=s,s=o,o=a);u-- >0;){if((a=Xce(l,c,n))===r)return i[s]=l,i[o]=c,t(i);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function Tde(){var e=mde();return e.copy=function(){return hde(e,Tde())},iue.apply(e,arguments),Ode(e)}function Mde(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],s=e[a];return s<i&&(n=r,r=a,a=n,n=i,i=s,s=n),e[r]=t.floor(i),e[a]=t.ceil(s),e}function Ade(e){return Math.log(e)}function Bde(e){return Math.exp(e)}function Dde(e){return-Math.log(-e)}function Ide(e){return-Math.exp(-e)}function Lde(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Fde(e){return(t,n)=>-e(-t,n)}function $de(e){const t=e(Ade,Bde),n=t.domain;let r,a,i=10;function s(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),a=function(e){return 10===e?Lde:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),n()[0]<0?(r=Fde(r),a=Fde(a),e(Dde,Ide)):e(Ade,Bde),t}return t.base=function(e){return arguments.length?(i=+e,s()):i},t.domain=function(e){return arguments.length?(n(e),s()):n()},t.ticks=e=>{const t=n();let s=t[0],o=t[t.length-1];const l=o<s;l&&([s,o]=[o,s]);let c,u,d=r(s),h=r(o);const p=null==e?10:+e;let m=[];if(!(i%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1;c<i;++c)if(u=d<0?c/a(-d):c*a(d),!(u<s)){if(u>o)break;m.push(u)}}else for(;d<=h;++d)for(c=i-1;c>=1;--c)if(u=d>0?c/a(-d):c*a(d),!(u<s)){if(u>o)break;m.push(u)}2*m.length<p&&(m=Zce(s,o,p))}else m=Zce(d,h,Math.min(h-d,p)).map(a);return l?m.reverse():m},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===i?"s":","),"function"!=typeof n&&(i%1||null!=(n=xde(n)).precision||(n.trim=!0),n=_de(n)),e===1/0)return n;const s=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/a(Math.round(r(e)));return t*i<i-.5&&(t*=i),t<=s?n(e):""}},t.nice=()=>n(Mde(n(),{floor:e=>a(Math.floor(r(e))),ceil:e=>a(Math.ceil(r(e)))})),t}function zde(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function qde(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Vde(e){var t=1,n=e(zde(t),qde(t));return n.constant=function(n){return arguments.length?e(zde(t=+n),qde(t)):t},Ode(n)}function Wde(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Qde(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ude(e){return e<0?-e*e:e*e}function Kde(e){var t=e(lde,lde),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(lde,lde):.5===n?e(Qde,Ude):e(Wde(n),Wde(1/n)):n},Ode(t)}function Hde(){var e=Kde(pde());return e.copy=function(){return hde(e,Hde()).exponent(e.exponent())},iue.apply(e,arguments),e}function Gde(e){return Math.sign(e)*e*e}jde=Ede({thousands:",",grouping:[3],currency:["$",""]}),_de=jde.format,Sde=jde.formatPrefix;const Yde=new Date,Zde=new Date;function Xde(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),a.round=e=>{const t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),a.range=(n,r,i)=>{const s=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return s;let o;do{s.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return s},a.filter=n=>Xde(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(a.count=(t,r)=>(Yde.setTime(+t),Zde.setTime(+r),e(Yde),e(Zde),Math.floor(n(Yde,Zde))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?t=>r(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const Jde=Xde(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Jde.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Xde(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Jde:null),Jde.range;const ehe=1e3,the=6e4,nhe=36e5,rhe=864e5,ahe=6048e5,ihe=2592e6,she=31536e6,ohe=Xde(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ehe)},(e,t)=>(t-e)/ehe,e=>e.getUTCSeconds());ohe.range;const lhe=Xde(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ehe)},(e,t)=>{e.setTime(+e+t*the)},(e,t)=>(t-e)/the,e=>e.getMinutes());lhe.range;const che=Xde(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*the)},(e,t)=>(t-e)/the,e=>e.getUTCMinutes());che.range;const uhe=Xde(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ehe-e.getMinutes()*the)},(e,t)=>{e.setTime(+e+t*nhe)},(e,t)=>(t-e)/nhe,e=>e.getHours());uhe.range;const dhe=Xde(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*nhe)},(e,t)=>(t-e)/nhe,e=>e.getUTCHours());dhe.range;const hhe=Xde(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*the)/rhe,e=>e.getDate()-1);hhe.range;const phe=Xde(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rhe,e=>e.getUTCDate()-1);phe.range;const mhe=Xde(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rhe,e=>Math.floor(e/rhe));function fhe(e){return Xde(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*the)/ahe)}mhe.range;const ghe=fhe(0),yhe=fhe(1),vhe=fhe(2),xhe=fhe(3),bhe=fhe(4),whe=fhe(5),khe=fhe(6);function Nhe(e){return Xde(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/ahe)}ghe.range,yhe.range,vhe.range,xhe.range,bhe.range,whe.range,khe.range;const jhe=Nhe(0),_he=Nhe(1),She=Nhe(2),Che=Nhe(3),Phe=Nhe(4),Ehe=Nhe(5),Rhe=Nhe(6);jhe.range,_he.range,She.range,Che.range,Phe.range,Ehe.range,Rhe.range;const Ohe=Xde(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());Ohe.range;const The=Xde(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());The.range;const Mhe=Xde(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Mhe.every=e=>isFinite(e=Math.floor(e))&&e>0?Xde(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null,Mhe.range;const Ahe=Xde(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function Bhe(e,t,n,r,a,i){const s=[[ohe,1,ehe],[ohe,5,5e3],[ohe,15,15e3],[ohe,30,3e4],[i,1,the],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,nhe],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,rhe],[r,2,1728e5],[n,1,ahe],[t,1,ihe],[t,3,7776e6],[e,1,she]];function o(t,n,r){const a=Math.abs(n-t)/r,i=Fce(([,,e])=>e).right(s,a);if(i===s.length)return e.every(Jce(t/she,n/she,r));if(0===i)return Jde.every(Math.max(Jce(t,n,r),1));const[o,l]=s[a/s[i-1][2]<s[i][2]/a?i-1:i];return o.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const a=n&&"function"==typeof n.range?n:o(e,t,n),i=a?a.range(e,+t+1):[];return r?i.reverse():i},o]}Ahe.every=e=>isFinite(e=Math.floor(e))&&e>0?Xde(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null,Ahe.range;const[Dhe,Ihe]=Bhe(Ahe,The,jhe,mhe,dhe,che),[Lhe,Fhe]=Bhe(Mhe,Ohe,ghe,hhe,uhe,lhe);function $he(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zhe(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qhe(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Vhe,Whe,Qhe,Uhe={"-":"",_:" ",0:"0"},Khe=/^\s*\d+/,Hhe=/^%/,Ghe=/[\\^$*+?|[\]().{}]/g;function Yhe(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Zhe(e){return e.replace(Ghe,"\\$&")}function Xhe(e){return new RegExp("^(?:"+e.map(Zhe).join("|")+")","i")}function Jhe(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function epe(e,t,n){var r=Khe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function tpe(e,t,n){var r=Khe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function npe(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function rpe(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ape(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ipe(e,t,n){var r=Khe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function spe(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ope(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function lpe(e,t,n){var r=Khe.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function cpe(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function upe(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function dpe(e,t,n){var r=Khe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function hpe(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ppe(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function mpe(e,t,n){var r=Khe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function fpe(e,t,n){var r=Khe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function gpe(e,t,n){var r=Khe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ype(e,t,n){var r=Hhe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function vpe(e,t,n){var r=Khe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function xpe(e,t,n){var r=Khe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function bpe(e,t){return Yhe(e.getDate(),t,2)}function wpe(e,t){return Yhe(e.getHours(),t,2)}function kpe(e,t){return Yhe(e.getHours()%12||12,t,2)}function Npe(e,t){return Yhe(1+hhe.count(Mhe(e),e),t,3)}function jpe(e,t){return Yhe(e.getMilliseconds(),t,3)}function _pe(e,t){return jpe(e,t)+"000"}function Spe(e,t){return Yhe(e.getMonth()+1,t,2)}function Cpe(e,t){return Yhe(e.getMinutes(),t,2)}function Ppe(e,t){return Yhe(e.getSeconds(),t,2)}function Epe(e){var t=e.getDay();return 0===t?7:t}function Rpe(e,t){return Yhe(ghe.count(Mhe(e)-1,e),t,2)}function Ope(e){var t=e.getDay();return t>=4||0===t?bhe(e):bhe.ceil(e)}function Tpe(e,t){return e=Ope(e),Yhe(bhe.count(Mhe(e),e)+(4===Mhe(e).getDay()),t,2)}function Mpe(e){return e.getDay()}function Ape(e,t){return Yhe(yhe.count(Mhe(e)-1,e),t,2)}function Bpe(e,t){return Yhe(e.getFullYear()%100,t,2)}function Dpe(e,t){return Yhe((e=Ope(e)).getFullYear()%100,t,2)}function Ipe(e,t){return Yhe(e.getFullYear()%1e4,t,4)}function Lpe(e,t){var n=e.getDay();return Yhe((e=n>=4||0===n?bhe(e):bhe.ceil(e)).getFullYear()%1e4,t,4)}function Fpe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yhe(t/60|0,"0",2)+Yhe(t%60,"0",2)}function $pe(e,t){return Yhe(e.getUTCDate(),t,2)}function zpe(e,t){return Yhe(e.getUTCHours(),t,2)}function qpe(e,t){return Yhe(e.getUTCHours()%12||12,t,2)}function Vpe(e,t){return Yhe(1+phe.count(Ahe(e),e),t,3)}function Wpe(e,t){return Yhe(e.getUTCMilliseconds(),t,3)}function Qpe(e,t){return Wpe(e,t)+"000"}function Upe(e,t){return Yhe(e.getUTCMonth()+1,t,2)}function Kpe(e,t){return Yhe(e.getUTCMinutes(),t,2)}function Hpe(e,t){return Yhe(e.getUTCSeconds(),t,2)}function Gpe(e){var t=e.getUTCDay();return 0===t?7:t}function Ype(e,t){return Yhe(jhe.count(Ahe(e)-1,e),t,2)}function Zpe(e){var t=e.getUTCDay();return t>=4||0===t?Phe(e):Phe.ceil(e)}function Xpe(e,t){return e=Zpe(e),Yhe(Phe.count(Ahe(e),e)+(4===Ahe(e).getUTCDay()),t,2)}function Jpe(e){return e.getUTCDay()}function eme(e,t){return Yhe(_he.count(Ahe(e)-1,e),t,2)}function tme(e,t){return Yhe(e.getUTCFullYear()%100,t,2)}function nme(e,t){return Yhe((e=Zpe(e)).getUTCFullYear()%100,t,2)}function rme(e,t){return Yhe(e.getUTCFullYear()%1e4,t,4)}function ame(e,t){var n=e.getUTCDay();return Yhe((e=n>=4||0===n?Phe(e):Phe.ceil(e)).getUTCFullYear()%1e4,t,4)}function ime(){return"+0000"}function sme(){return"%"}function ome(e){return+e}function lme(e){return Math.floor(+e/1e3)}function cme(e){return new Date(e)}function ume(e){return e instanceof Date?+e:+new Date(+e)}function dme(e,t,n,r,a,i,s,o,l,c){var u=mde(),d=u.invert,h=u.domain,p=c(".%L"),m=c(":%S"),f=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),x=c("%B"),b=c("%Y");function w(e){return(l(e)<e?p:o(e)<e?m:s(e)<e?f:i(e)<e?g:r(e)<e?a(e)<e?y:v:n(e)<e?x:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,ume)):h().map(cme)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(Mde(n,e)):u},u.copy=function(){return hde(u,dme(e,t,n,r,a,i,s,o,l,c))},u}function hme(){var e,t,n,r,a,i=0,s=1,o=lde,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([i,s]=a,e=r(i=+i),t=r(s=+s),n=e===t?0:1/(t-e),c):[i,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(ade),c.rangeRound=u(ide),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(s),n=e===t?0:1/(t-e),c}}function pme(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mme(){var e=Kde(hme());return e.copy=function(){return pme(e,mme()).exponent(e.exponent())},sue.apply(e,arguments)}function fme(){var e,t,n,r,a,i,s,o=0,l=.5,c=1,u=1,d=lde,h=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+i(e))-t)*(u*e<u*t?r:a),d(h?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,r,a;return arguments.length?([n,r,a]=t,d=function(e,t){void 0===t&&(t=e,e=ade);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}(e,[n,r,a]),p):[d(0),d(.5),d(1)]}}return p.domain=function(s){return arguments.length?([o,l,c]=s,e=i(o=+o),t=i(l=+l),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),u=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=m(ade),p.rangeRound=m(ide),p.unknown=function(e){return arguments.length?(s=e,p):s},function(s){return i=s,e=s(o),t=s(l),n=s(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function gme(){var e=Kde(fme());return e.copy=function(){return pme(e,gme()).exponent(e.exponent())},sue.apply(e,arguments)}!function(e){Vhe=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=Xhe(a),u=Jhe(a),d=Xhe(i),h=Jhe(i),p=Xhe(s),m=Jhe(s),f=Xhe(o),g=Jhe(o),y=Xhe(l),v=Jhe(l),x={a:function(e){return s[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:bpe,e:bpe,f:_pe,g:Dpe,G:Lpe,H:wpe,I:kpe,j:Npe,L:jpe,m:Spe,M:Cpe,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:ome,s:lme,S:Ppe,u:Epe,U:Rpe,V:Tpe,w:Mpe,W:Ape,x:null,X:null,y:Bpe,Y:Ipe,Z:Fpe,"%":sme},b={a:function(e){return s[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:$pe,e:$pe,f:Qpe,g:nme,G:ame,H:zpe,I:qpe,j:Vpe,L:Wpe,m:Upe,M:Kpe,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:ome,s:lme,S:Hpe,u:Gpe,U:Ype,V:Xpe,w:Jpe,W:eme,x:null,X:null,y:tme,Y:rme,Z:ime,"%":sme},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return j(e,t,n,r)},d:upe,e:upe,f:gpe,g:spe,G:ipe,H:hpe,I:hpe,j:dpe,L:fpe,m:cpe,M:ppe,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:lpe,Q:vpe,s:xpe,S:mpe,u:tpe,U:npe,V:rpe,w:epe,W:ape,x:function(e,t,r){return j(e,n,t,r)},X:function(e,t,n){return j(e,r,t,n)},y:spe,Y:ipe,Z:ope,"%":ype};function k(e,t){return function(n){var r,a,i,s=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(a=Uhe[r=e.charAt(++o)])?r=e.charAt(++o):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),s.push(r),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function N(e,t){return function(n){var r,a,i=qhe(1900,void 0,1);if(j(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=zhe(qhe(i.y,0,1))).getUTCDay(),r=a>4||0===a?_he.ceil(r):_he(r),r=phe.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=$he(qhe(i.y,0,1))).getDay(),r=a>4||0===a?yhe.ceil(r):yhe(r),r=hhe.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?zhe(qhe(i.y,0,1)).getUTCDay():$he(qhe(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,zhe(i)):$he(i)}}function j(e,t,n,r){for(var a,i,s=0,o=t.length,l=n.length;s<o;){if(r>=l)return-1;if(37===(a=t.charCodeAt(s++))){if(a=t.charAt(s++),!(i=w[a in Uhe?t.charAt(s++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),{format:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),Whe=Vhe.format,Vhe.parse,Qhe=Vhe.utcFormat,Vhe.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const yme=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cue,scaleDiverging:function e(){var t=Ode(fme()(lde));return t.copy=function(){return pme(t,e())},sue.apply(t,arguments)},scaleDivergingLog:function e(){var t=$de(fme()).domain([.1,1,10]);return t.copy=function(){return pme(t,e()).base(t.base())},sue.apply(t,arguments)},scaleDivergingPow:gme,scaleDivergingSqrt:function(){return gme.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=Vde(fme());return t.copy=function(){return pme(t,e()).constant(t.constant())},sue.apply(t,arguments)},scaleIdentity:function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,sde),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,sde):[0,1],Ode(r)},scaleImplicit:oue,scaleLinear:Tde,scaleLog:function e(){const t=$de(pde()).domain([1,10]);return t.copy=()=>hde(t,e()).base(t.base()),iue.apply(t,arguments),t},scaleOrdinal:lue,scalePoint:due,scalePow:Hde,scaleQuantile:function e(){var t,n=[],r=[],a=[];function i(){var e=0,t=Math.max(1,r.length);for(a=new Array(t-1);++e<t;)a[e-1]=aue(n,e/t);return s}function s(e){return null==e||isNaN(e=+e)?t:r[qce(a,e)]}return s.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},s.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(Ice),i()},s.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return a.slice()},s.copy=function(){return e().domain(n).range(r).unknown(t)},iue.apply(s,arguments)},scaleQuantize:function e(){var t,n=0,r=1,a=1,i=[.5],s=[0,1];function o(e){return null!=e&&e<=e?s[qce(i,e,0,a)]:t}function l(){var e=-1;for(i=new Array(a);++e<a;)i[e]=((e+1)*r-(e-a)*n)/(a+1);return o}return o.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},o.range=function(e){return arguments.length?(a=(s=Array.from(e)).length-1,l()):s.slice()},o.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,i[0]]:t>=a?[i[a-1],r]:[i[t-1],i[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return e().domain([n,r]).range(s).unknown(t)},iue.apply(Ode(o),arguments)},scaleRadial:function e(){var t,n=mde(),r=[0,1],a=!1;function i(e){var r=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(n(e));return isNaN(r)?t:a?Math.round(r):r}return i.invert=function(e){return n.invert(Gde(e))},i.domain=function(e){return arguments.length?(n.domain(e),i):n.domain()},i.range=function(e){return arguments.length?(n.range((r=Array.from(e,sde)).map(Gde)),i):r.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(a=!!e,i):a},i.clamp=function(e){return arguments.length?(n.clamp(e),i):n.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e(n.domain(),r).round(a).clamp(n.clamp()).unknown(t)},iue.apply(i,arguments),Ode(i)},scaleSequential:function e(){var t=Ode(hme()(lde));return t.copy=function(){return pme(t,e())},sue.apply(t,arguments)},scaleSequentialLog:function e(){var t=$de(hme()).domain([1,10]);return t.copy=function(){return pme(t,e()).base(t.base())},sue.apply(t,arguments)},scaleSequentialPow:mme,scaleSequentialQuantile:function e(){var t=[],n=lde;function r(e){if(null!=e&&!isNaN(e=+e))return n((qce(t,e,1)-1)/(t.length-1))}return r.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Ice),r},r.interpolator=function(e){return arguments.length?(n=e,r):n},r.range=function(){return t.map((e,r)=>n(r/(t.length-1)))},r.quantiles=function(e){return Array.from({length:e+1},(n,r)=>function(e,t){if((n=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||n<2)return tue(e);if(t>=1)return eue(e);var n,r=(n-1)*t,a=Math.floor(r),i=eue(nue(e,a).subarray(0,a+1));return i+(tue(e.subarray(a+1))-i)*(r-a)}}(t,r/e))},r.copy=function(){return e(n).domain(t)},sue.apply(r,arguments)},scaleSequentialSqrt:function(){return mme.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=Vde(hme());return t.copy=function(){return pme(t,e()).constant(t.constant())},sue.apply(t,arguments)},scaleSqrt:function(){return Hde.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=Vde(pde());return t.copy=function(){return hde(t,e()).constant(t.constant())},iue.apply(t,arguments)},scaleThreshold:function e(){var t,n=[.5],r=[0,1],a=1;function i(e){return null!=e&&e<=e?r[qce(n,e,0,a)]:t}return i.domain=function(e){return arguments.length?(n=Array.from(e),a=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),a=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(n).range(r).unknown(t)},iue.apply(i,arguments)},scaleTime:function(){return iue.apply(dme(Lhe,Fhe,Mhe,Ohe,ghe,hhe,uhe,lhe,ohe,Whe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return iue.apply(dme(Dhe,Ihe,Ahe,The,jhe,phe,dhe,che,ohe,Qhe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:Rde},Symbol.toStringTag,{value:"Module"}));var vme=S8;var xme=function(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],s=t(i);if(null!=s&&(void 0===o?s==s&&!vme(s):n(s,o)))var o=s,l=i}return l};var bme=function(e,t){return e>t},wme=xme,kme=bme,Nme=Zie;const jme=je(function(e){return e&&e.length?wme(e,Nme,kme):void 0});var _me=function(e,t){return e<t},Sme=xme,Cme=_me,Pme=Zie;const Eme=je(function(e){return e&&e.length?Sme(e,Pme,Cme):void 0});var Rme=o9,Ome=lse,Tme=noe,Mme=s8;var Ame=Hse,Bme=function(e,t){return(Mme(e)?Rme:Tme)(e,Ome(t))};const Dme=je(function(e,t){return Ame(Bme(e,t),1)});var Ime=_ie;const Lme=je(function(e,t){return Ime(e,t)});var Fme,$me=1e9,zme=!0,qme="[DecimalError] ",Vme=qme+"Invalid argument: ",Wme=qme+"Exponent out of range: ",Qme=Math.floor,Ume=Math.pow,Kme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hme=1e7,Gme=9007199254740991,Yme=Qme(1286742750677284.5),Zme={};function Xme(e,t){var n,r,a,i,s,o,l,c,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),zme?lfe(t,d):t;if(l=e.d,c=t.d,s=e.e,a=t.e,l=l.slice(),i=s-a){for(i<0?(r=l,i=-i,o=c.length):(r=c,a=s,o=l.length),i>(o=(s=Math.ceil(d/7))>o?s+1:o+1)&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((o=l.length)-(i=c.length)<0&&(i=o,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/Hme|0,l[i]%=Hme;for(n&&(l.unshift(n),++a),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=a,zme?lfe(t,d):t}function Jme(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Vme+e)}function efe(e){var t,n,r,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(i+=ife(n)),i+=r;(n=7-(r=(s=e[t])+"").length)&&(i+=ife(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return i+s}Zme.absoluteValue=Zme.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},Zme.comparedTo=Zme.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,n=(r=i.d.length)<(a=e.d.length)?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1},Zme.decimalPlaces=Zme.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},Zme.dividedBy=Zme.div=function(e){return tfe(this,new this.constructor(e))},Zme.dividedToIntegerBy=Zme.idiv=function(e){var t=this.constructor;return lfe(tfe(this,new t(e),0,1),t.precision)},Zme.equals=Zme.eq=function(e){return!this.cmp(e)},Zme.exponent=function(){return rfe(this)},Zme.greaterThan=Zme.gt=function(e){return this.cmp(e)>0},Zme.greaterThanOrEqualTo=Zme.gte=function(e){return this.cmp(e)>=0},Zme.isInteger=Zme.isint=function(){return this.e>this.d.length-2},Zme.isNegative=Zme.isneg=function(){return this.s<0},Zme.isPositive=Zme.ispos=function(){return this.s>0},Zme.isZero=function(){return 0===this.s},Zme.lessThan=Zme.lt=function(e){return this.cmp(e)<0},Zme.lessThanOrEqualTo=Zme.lte=function(e){return this.cmp(e)<1},Zme.logarithm=Zme.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(Fme))throw Error(qme+"NaN");if(n.s<1)throw Error(qme+(n.s?"NaN":"-Infinity"));return n.eq(Fme)?new r(0):(zme=!1,t=tfe(sfe(n,i),sfe(e,i),i),zme=!0,lfe(t,a))},Zme.minus=Zme.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?cfe(t,e):Xme(t,(e.s=-e.s,e))},Zme.modulo=Zme.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(!(e=new r(e)).s)throw Error(qme+"NaN");return n.s?(zme=!1,t=tfe(n,e,0,1).times(e),zme=!0,n.minus(t)):lfe(new r(n),a)},Zme.naturalExponential=Zme.exp=function(){return nfe(this)},Zme.naturalLogarithm=Zme.ln=function(){return sfe(this)},Zme.negated=Zme.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},Zme.plus=Zme.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Xme(t,e):cfe(t,(e.s=-e.s,e))},Zme.precision=Zme.sd=function(e){var t,n,r,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Vme+e);if(t=rfe(a)+1,n=7*(r=a.d.length-1)+1,r=a.d[r]){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},Zme.squareRoot=Zme.sqrt=function(){var e,t,n,r,a,i,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(qme+"NaN")}for(e=rfe(o),zme=!1,0==(a=Math.sqrt(+o))||a==1/0?(((t=efe(o.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Qme((e+1)/2)-(e<0||e%2),r=new l(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new l(a.toString()),a=s=(n=l.precision)+3;;)if(r=(i=r).plus(tfe(o,i,s+2)).times(.5),efe(i.d).slice(0,s)===(t=efe(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&"4999"==t){if(lfe(i,n+1,0),i.times(i).eq(o)){r=i;break}}else if("9999"!=t)break;s+=4}return zme=!0,lfe(r,n)},Zme.times=Zme.mul=function(e){var t,n,r,a,i,s,o,l,c,u=this,d=u.constructor,h=u.d,p=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,(l=h.length)<(c=p.length)&&(i=h,h=p,p=i,s=l,l=c,c=s),i=[],r=s=l+c;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,a=l+r;a>r;)o=i[a]+p[r]*h[a-r-1]+t,i[a--]=o%Hme|0,t=o/Hme|0;i[a]=(i[a]+t)%Hme|0}for(;!i[--s];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,zme?lfe(e,d.precision):e},Zme.toDecimalPlaces=Zme.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(Jme(e,0,$me),void 0===t?t=r.rounding:Jme(t,0,8),lfe(n,e+rfe(n)+1,t))},Zme.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=ufe(r,!0):(Jme(e,0,$me),void 0===t?t=a.rounding:Jme(t,0,8),n=ufe(r=lfe(new a(r),e+1,t),!0,e+1)),n},Zme.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?ufe(a):(Jme(e,0,$me),void 0===t?t=i.rounding:Jme(t,0,8),n=ufe((r=lfe(new i(a),e+rfe(a)+1,t)).abs(),!1,e+rfe(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)},Zme.toInteger=Zme.toint=function(){var e=this,t=e.constructor;return lfe(new t(e),rfe(e)+1,t.rounding)},Zme.toNumber=function(){return+this},Zme.toPower=Zme.pow=function(e){var t,n,r,a,i,s,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(Fme);if(!(o=new l(o)).s){if(e.s<1)throw Error(qme+"Infinity");return o}if(o.eq(Fme))return o;if(r=l.precision,e.eq(Fme))return lfe(o,r);if(s=(t=e.e)>=(n=e.d.length-1),i=o.s,s){if((n=c<0?-c:c)<=Gme){for(a=new l(Fme),t=Math.ceil(r/7+4),zme=!1;n%2&&dfe((a=a.times(o)).d,t),0!==(n=Qme(n/2));)dfe((o=o.times(o)).d,t);return zme=!0,e.s<0?new l(Fme).div(a):lfe(a,r)}}else if(i<0)throw Error(qme+"NaN");return i=i<0&&1&e.d[Math.max(t,n)]?-1:1,o.s=1,zme=!1,a=e.times(sfe(o,r+12)),zme=!0,(a=nfe(a)).s=i,a},Zme.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?r=ufe(a,(n=rfe(a))<=i.toExpNeg||n>=i.toExpPos):(Jme(e,1,$me),void 0===t?t=i.rounding:Jme(t,0,8),r=ufe(a=lfe(new i(a),e,t),e<=(n=rfe(a))||n<=i.toExpNeg,e)),r},Zme.toSignificantDigits=Zme.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(Jme(e,1,$me),void 0===t?t=n.rounding:Jme(t,0,8)),lfe(new n(this),e,t)},Zme.toString=Zme.valueOf=Zme.val=Zme.toJSON=Zme[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=rfe(e),n=e.constructor;return ufe(e,t<=n.toExpNeg||t>=n.toExpPos)};var tfe=function(){function e(e,t){var n,r=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+r,e[a]=n%Hme|0,r=n/Hme|0;return r&&e.unshift(r),e}function t(e,t,n,r){var a,i;if(n!=r)i=n>r?1:-1;else for(a=i=0;a<n;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*Hme+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,i,s){var o,l,c,u,d,h,p,m,f,g,y,v,x,b,w,k,N,j,_=r.constructor,S=r.s==a.s?1:-1,C=r.d,P=a.d;if(!r.s)return new _(r);if(!a.s)throw Error(qme+"Division by zero");for(l=r.e-a.e,N=P.length,w=C.length,m=(p=new _(S)).d=[],c=0;P[c]==(C[c]||0);)++c;if(P[c]>(C[c]||0)&&--l,(v=null==i?i=_.precision:s?i+(rfe(r)-rfe(a))+1:i)<0)return new _(0);if(v=v/7+2|0,c=0,1==N)for(u=0,P=P[0],v++;(c<w||u)&&v--;c++)x=u*Hme+(C[c]||0),m[c]=x/P|0,u=x%P|0;else{for((u=Hme/(P[0]+1)|0)>1&&(P=e(P,u),C=e(C,u),N=P.length,w=C.length),b=N,g=(f=C.slice(0,N)).length;g<N;)f[g++]=0;(j=P.slice()).unshift(0),k=P[0],P[1]>=Hme/2&&++k;do{u=0,(o=t(P,f,N,g))<0?(y=f[0],N!=g&&(y=y*Hme+(f[1]||0)),(u=y/k|0)>1?(u>=Hme&&(u=Hme-1),1==(o=t(d=e(P,u),f,h=d.length,g=f.length))&&(u--,n(d,N<h?j:P,h))):(0==u&&(o=u=1),d=P.slice()),(h=d.length)<g&&d.unshift(0),n(f,d,g),-1==o&&(o=t(P,f,N,g=f.length))<1&&(u++,n(f,N<g?j:P,g)),g=f.length):0===o&&(u++,f=[0]),m[c++]=u,o&&f[0]?f[g++]=C[b]||0:(f=[C[b]],g=1)}while((b++<w||void 0!==f[0])&&v--)}return m[0]||m.shift(),p.e=l,lfe(p,s?i+rfe(p)+1:i)}}();function nfe(e,t){var n,r,a,i,s,o=0,l=0,c=e.constructor,u=c.precision;if(rfe(e)>16)throw Error(Wme+rfe(e));if(!e.s)return new c(Fme);for(zme=!1,s=u,i=new c(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(s+=Math.log(Ume(2,l))/Math.LN10*2+5|0,n=r=a=new c(Fme),c.precision=s;;){if(r=lfe(r.times(e),s),n=n.times(++o),efe((i=a.plus(tfe(r,n,s))).d).slice(0,s)===efe(a.d).slice(0,s)){for(;l--;)a=lfe(a.times(a),s);return c.precision=u,null==t?(zme=!0,lfe(a,u)):a}a=i}}function rfe(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function afe(e,t,n){if(t>e.LN10.sd())throw zme=!0,n&&(e.precision=n),Error(qme+"LN10 precision limit exceeded");return lfe(new e(e.LN10),t)}function ife(e){for(var t="";e--;)t+="0";return t}function sfe(e,t){var n,r,a,i,s,o,l,c,u,d=1,h=e,p=h.d,m=h.constructor,f=m.precision;if(h.s<1)throw Error(qme+(h.s?"NaN":"-Infinity"));if(h.eq(Fme))return new m(0);if(null==t?(zme=!1,c=f):c=t,h.eq(10))return null==t&&(zme=!0),afe(m,c);if(c+=10,m.precision=c,r=(n=efe(p)).charAt(0),i=rfe(h),!(Math.abs(i)<15e14))return l=afe(m,c+2,f).times(i+""),h=sfe(new m(r+"."+n.slice(1)),c-10).plus(l),m.precision=f,null==t?(zme=!0,lfe(h,f)):h;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=efe((h=h.times(e)).d)).charAt(0),d++;for(i=rfe(h),r>1?(h=new m("0."+n),i++):h=new m(r+"."+n.slice(1)),o=s=h=tfe(h.minus(Fme),h.plus(Fme),c),u=lfe(h.times(h),c),a=3;;){if(s=lfe(s.times(u),c),efe((l=o.plus(tfe(s,new m(a),c))).d).slice(0,c)===efe(o.d).slice(0,c))return o=o.times(2),0!==i&&(o=o.plus(afe(m,c+2,f).times(i+""))),o=tfe(o,new m(d),c),m.precision=f,null==t?(zme=!0,lfe(o,f)):o;o=l,a+=2}}function ofe(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(r,a)){if(a-=r,n=n-r-1,e.e=Qme(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),zme&&(e.e>Yme||e.e<-Yme))throw Error(Wme+n)}else e.s=0,e.e=0,e.d=[0];return e}function lfe(e,t,n){var r,a,i,s,o,l,c,u,d=e.d;for(s=1,i=d[0];i>=10;i/=10)s++;if((r=t-s)<0)r+=7,a=t,c=d[u=0];else{if((u=Math.ceil((r+1)/7))>=(i=d.length))return e;for(c=i=d[u],s=1;i>=10;i/=10)s++;a=(r%=7)-7+s}if(void 0!==n&&(o=c/(i=Ume(10,s-a-1))%10|0,l=t<0||void 0!==d[u+1]||c%i,l=n<4?(o||l)&&(0==n||n==(e.s<0?3:2)):o>5||5==o&&(4==n||l||6==n&&(r>0?a>0?c/Ume(10,s-a):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return l?(i=rfe(e),d.length=1,t=t-i-1,d[0]=Ume(10,(7-t%7)%7),e.e=Qme(-t/7)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==r?(d.length=u,i=1,u--):(d.length=u+1,i=Ume(10,7-r),d[u]=a>0?(c/Ume(10,s-a)%Ume(10,a)|0)*i:0),l)for(;;){if(0==u){(d[0]+=i)==Hme&&(d[0]=1,++e.e);break}if(d[u]+=i,d[u]!=Hme)break;d[u--]=0,i=1}for(r=d.length;0===d[--r];)d.pop();if(zme&&(e.e>Yme||e.e<-Yme))throw Error(Wme+rfe(e));return e}function cfe(e,t){var n,r,a,i,s,o,l,c,u,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),zme?lfe(t,p):t;if(l=e.d,d=t.d,r=t.e,c=e.e,l=l.slice(),s=c-r){for((u=s<0)?(n=l,s=-s,o=d.length):(n=d,r=c,o=l.length),s>(a=Math.max(Math.ceil(p/7),o)+2)&&(s=a,n.length=1),n.reverse(),a=s;a--;)n.push(0);n.reverse()}else{for((u=(a=l.length)<(o=d.length))&&(o=a),a=0;a<o;a++)if(l[a]!=d[a]){u=l[a]<d[a];break}s=0}for(u&&(n=l,l=d,d=n,t.s=-t.s),o=l.length,a=d.length-o;a>0;--a)l[o++]=0;for(a=d.length;a>s;){if(l[--a]<d[a]){for(i=a;i&&0===l[--i];)l[i]=Hme-1;--l[i],l[a]+=Hme}l[a]-=d[a]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(t.d=l,t.e=r,zme?lfe(t,p):t):new h(0)}function ufe(e,t,n){var r,a=rfe(e),i=efe(e.d),s=i.length;return t?(n&&(r=n-s)>0?i=i.charAt(0)+"."+i.slice(1)+ife(r):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ife(-a-1)+i,n&&(r=n-s)>0&&(i+=ife(r))):a>=s?(i+=ife(a+1-s),n&&(r=n-a-1)>0&&(i=i+"."+ife(r))):((r=a+1)<s&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-s)>0&&(a+1===s&&(i+="."),i+=ife(r))),e.s<0?"-"+i:i}function dfe(e,t){if(e.length>t)return e.length=t,!0}function hfe(e){if(!e||"object"!=typeof e)throw Error(qme+"Object expected");var t,n,r,a=["precision",1,$me,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(r=e[n=a[t]])){if(!(Qme(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(Vme+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(Vme+n+": "+r);this[n]=new this(r)}return this}var pfe=function e(t){var n,r,a;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(Vme+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):ofe(t,e.toString())}if("string"!=typeof e)throw Error(Vme+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!Kme.test(e))throw Error(Vme+e);ofe(t,e)}if(i.prototype=Zme,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=hfe,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<a.length;)t.hasOwnProperty(r=a[n++])||(t[r]=this[r]);return i.config(t),i}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});Fme=new pfe(1);const mfe=pfe;function ffe(e){return function(e){if(Array.isArray(e))return gfe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gfe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gfe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yfe=function(e){return e},vfe={},xfe=function(e){return e===vfe},bfe=function(e){return function t(){return 0===arguments.length||1===arguments.length&&xfe(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},wfe=function e(t,n){return 1===t?n:bfe(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var s=a.filter(function(e){return e!==vfe}).length;return s>=t?n.apply(void 0,a):e(t-s,bfe(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=a.map(function(e){return xfe(e)?t.shift():e});return n.apply(void 0,ffe(i).concat(t))}))})},kfe=function(e){return wfe(e.length,e)},Nfe=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},jfe=kfe(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),_fe=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Sfe=function(e){var t=null,n=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t&&a.every(function(e,n){return e===t[n]})?n:(t=a,n=e.apply(void 0,a))}};var Cfe=kfe(function(e,t,n){var r=+e;return r+n*(+t-r)}),Pfe=kfe(function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)}),Efe=kfe(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Rfe={rangeStep:function(e,t,n){for(var r=new mfe(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i},getDigitCount:function(e){return 0===e?1:Math.floor(new mfe(e).abs().log(10).toNumber())+1},interpolateNumber:Cfe,uninterpolateNumber:Pfe,uninterpolateTruncation:Efe};function Ofe(e){return function(e){if(Array.isArray(e))return Afe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Mfe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tfe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(BPe){a=!0,i=BPe}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||Mfe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mfe(e,t){if(e){if("string"==typeof e)return Afe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Afe(e,t):void 0}}function Afe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bfe(e){var t=Tfe(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function Dfe(e,t,n){if(e.lte(0))return new mfe(0);var r=Rfe.getDigitCount(e.toNumber()),a=new mfe(10).pow(r),i=e.div(a),s=1!==r?.05:.1,o=new mfe(Math.ceil(i.div(s).toNumber())).add(n).mul(s).mul(a);return t?o:new mfe(Math.ceil(o))}function Ife(e,t,n){var r=1,a=new mfe(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new mfe(10).pow(Rfe.getDigitCount(e)-1),a=new mfe(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new mfe(Math.floor(e)))}else 0===e?a=new mfe(Math.floor((t-1)/2)):n||(a=new mfe(Math.floor(e)));var s=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return yfe;var r=t.reverse(),a=r[0],i=r.slice(1);return function(){return i.reduce(function(e,t){return t(e)},a.apply(void 0,arguments))}}(jfe(function(e){return a.add(new mfe(e-s).mul(r)).toNumber()}),Nfe);return o(0,t)}function Lfe(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new mfe(0),tickMin:new mfe(0),tickMax:new mfe(0)};var i,s=Dfe(new mfe(t).sub(e).div(n-1),r,a);i=e<=0&&t>=0?new mfe(0):(i=new mfe(e).add(t).div(2)).sub(new mfe(i).mod(s));var o=Math.ceil(i.sub(e).div(s).toNumber()),l=Math.ceil(new mfe(t).sub(i).div(s).toNumber()),c=o+l+1;return c>n?Lfe(e,t,n,r,a+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:s,tickMin:i.sub(new mfe(o).mul(s)),tickMax:i.add(new mfe(l).mul(s))})}var Ffe=Sfe(function(e){var t=Tfe(e,2),n=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(a,2),o=Tfe(Bfe([n,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(Ofe(Nfe(0,a-1).map(function(){return 1/0}))):[].concat(Ofe(Nfe(0,a-1).map(function(){return-1/0})),[c]);return n>r?_fe(u):u}if(l===c)return Ife(l,a,i);var d=Lfe(l,c,s,i),h=d.step,p=d.tickMin,m=d.tickMax,f=Rfe.rangeStep(p,m.add(new mfe(.1).mul(h)),h);return n>r?_fe(f):f}),$fe=Sfe(function(e,t){var n=Tfe(e,2),r=n[0],a=n[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Tfe(Bfe([r,a]),2),o=s[0],l=s[1];if(o===-1/0||l===1/0)return[r,a];if(o===l)return[o];var c=Math.max(t,2),u=Dfe(new mfe(l).sub(o).div(c-1),i,0),d=[].concat(Ofe(Rfe.rangeStep(new mfe(o),new mfe(l).sub(new mfe(.99).mul(u)),u)),[l]);return r>a?_fe(d):d});function zfe(e,t){throw new Error("Invariant failed")}var qfe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Vfe(e){return(Vfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wfe(){return Wfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wfe.apply(this,arguments)}function Qfe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ufe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ufe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ufe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kfe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Hfe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ege(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gfe(e,t,n){return t=Zfe(t),function(e,t){if(t&&("object"===Vfe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yfe()?Reflect.construct(t,n||[],Zfe(e).constructor):t.apply(e,n))}function Yfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Yfe=function(){return!!e})()}function Zfe(e){return(Zfe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xfe(e,t){return(Xfe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jfe(e,t,n){return(t=ege(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ege(e){var t=function(e,t){if("object"!=Vfe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Vfe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Vfe(t)?t:t+""}var tge=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gfe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xfe(e,t)}(e,ut.Component),Hfe(e,[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,r=e.width,a=e.dataKey,i=e.data,s=e.dataPointFormatter,o=e.xAxis,l=e.yAxis,c=Kfe(e,qfe),u=Fee(c,!1);"x"===this.props.direction&&"number"!==o.type&&zfe();var d=i.map(function(e){var i=s(e,a),c=i.x,d=i.y,h=i.value,p=i.errorVal;if(!p)return null;var m,f,g=[];if(Array.isArray(p)){var y=Qfe(p,2);m=y[0],f=y[1]}else m=f=p;if("vertical"===n){var v=o.scale,x=d+t,b=x+r,w=x-r,k=v(h-m),N=v(h+f);g.push({x1:N,y1:b,x2:N,y2:w}),g.push({x1:k,y1:x,x2:N,y2:x}),g.push({x1:k,y1:b,x2:k,y2:w})}else if("horizontal"===n){var j=l.scale,_=c+t,S=_-r,C=_+r,P=j(h-m),E=j(h+f);g.push({x1:S,y1:E,x2:C,y2:E}),g.push({x1:_,y1:P,x2:_,y2:E}),g.push({x1:S,y1:P,x2:C,y2:P})}return ut.createElement(Yee,Wfe({className:"recharts-errorBar",key:"bar-".concat(g.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},u),g.map(function(e){return ut.createElement("line",Wfe({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return ut.createElement(Yee,{className:"recharts-errorBars"},d)}}])}();function nge(e){return(nge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function age(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rge(Object(n),!0).forEach(function(t){ige(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ige(e,t,n){var r;return r=function(e,t){if("object"!=nge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=nge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==nge(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Jfe(tge,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Jfe(tge,"displayName","ErrorBar");var sge=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,a=e.legendContent,i=Bee(t,qse);if(!i)return null;var s,o=qse.defaultProps,l=void 0!==o?age(age({},o),i.props):{};return s=i.props&&i.props.payload?i.props&&i.props.payload:"children"===a?(n||[]).reduce(function(e,t){var n=t.item,r=t.props,a=r.sectors||r.data||[];return e.concat(a.map(function(e){return{type:i.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(n||[]).map(function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?age(age({},n),t.props):{},a=r.dataKey,i=r.name,s=r.legendType;return{inactive:r.hide,dataKey:a,type:l.iconType||s||"square",color:fge(t),value:i||a,payload:r}}),age(age(age({},l),qse.getWithHeight(i,r)),{},{payload:s,item:i})};function oge(e){return(oge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lge(e){return function(e){if(Array.isArray(e))return cge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return cge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cge(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uge(Object(n),!0).forEach(function(t){hge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hge(e,t,n){var r;return r=function(e,t){if("object"!=oge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=oge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==oge(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pge(e,t,n){return E9(e)||E9(t)?n:lee(t)?P9(e,t,n):I8(t)?t(e):n}function mge(e,t,n,r){var a=Dme(e,function(e){return pge(e,t)});if("number"===n){var i=a.filter(function(e){return oee(e)||parseFloat(e)});return i.length?[Eme(i),jme(i)]:[1/0,-1/0]}return(r?a.filter(function(e){return!E9(e)}):a).map(function(e){return lee(e)||e instanceof Date?e:""})}var fge=function(e){var t,n,r=e.type.displayName,a=null!==(t=e.type)&&void 0!==t&&t.defaultProps?dge(dge({},e.type.defaultProps),e.props):e.props,i=a.stroke,s=a.fill;switch(r){case"Line":n=i;break;case"Area":case"Radar":n=i&&"none"!==i?i:s;break;default:n=s}return n},gge=function(e,t,n,r,a){var i=Aee(t.props.children,tge).filter(function(e){return function(e,t,n){return!!E9(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,a,e.props.direction)});if(i&&i.length){var s=i.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var r=pge(t,n);if(E9(r))return e;var a=Array.isArray(r)?[Eme(r),jme(r)]:[r,r],i=s.reduce(function(e,n){var r=pge(t,n,0),i=a[0]-Math.abs(Array.isArray(r)?r[0]:r),s=a[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(i,e[0]),Math.max(s,e[1])]},[1/0,-1/0]);return[Math.min(i[0],e[0]),Math.max(i[1],e[1])]},[1/0,-1/0])}return null},yge=function(e,t,n,r,a){var i=t.map(function(t){var i=t.props.dataKey;return"number"===n&&i&&gge(e,t,i,r)||mge(e,i,n,a)});if("number"===n)return i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var s={};return i.reduce(function(e,t){for(var n=0,r=t.length;n<r;n++)s[t[n]]||(s[t[n]]=!0,e.push(t[n]));return e},[])},vge=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},xge=function(e,t,n,r){if(r)return e.map(function(e){return e.coordinate});var a,i,s=e.map(function(e){return e.coordinate===t&&(a=!0),e.coordinate===n&&(i=!0),e.coordinate});return a||s.push(t),i||s.push(n),s},bge=function(e,t,n){if(!e)return null;var r=e.scale,a=e.duplicateDomain,i=e.type,s=e.range,o="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===i&&r.bandwidth?r.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null==s?void 0:s.length)>=2?2*iee(s[0]-s[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=a?a.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}}).filter(function(e){return!aee(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(e){return{coordinate:r(e)+l,value:e,offset:l}}):r.domain().map(function(e,t){return{coordinate:r(e)+l,value:a?a[e]:e,index:t,offset:l}})},wge=new WeakMap,kge=function(e,t){if("function"!=typeof t)return e;wge.has(e)||wge.set(e,new WeakMap);var n=wge.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},Nge=function(e,t,n){var r=e.scale,a=e.type,i=e.layout,s=e.axisType;if("auto"===r)return"radial"===i&&"radiusAxis"===s?{scale:cue(),realScaleType:"band"}:"radial"===i&&"angleAxis"===s?{scale:Tde(),realScaleType:"linear"}:"category"===a&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:due(),realScaleType:"point"}:"category"===a?{scale:cue(),realScaleType:"band"}:{scale:Tde(),realScaleType:"linear"};if(M9(r)){var o="scale".concat(kte(r));return{scale:(yme[o]||due)(),realScaleType:yme[o]?o:"point"}}return I8(r)?{scale:r}:{scale:due(),realScaleType:"point"}},jge=1e-4,_ge=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-jge,i=Math.max(r[0],r[1])+jge,s=e(t[0]),o=e(t[n-1]);(s<a||s>i||o<a||o>i)&&e.domain([t[0],t[n-1]])}},Sge={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,i=0,s=0;s<t;++s){var o=aee(e[s][n][1])?e[s][n][0]:e[s][n][1];o>=0?(e[s][n][0]=a,e[s][n][1]=a+o,a=e[s][n][1]):(e[s][n][0]=i,e[s][n][1]=i+o,i=e[s][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,a,i=0,s=e[0].length;i<s;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}Nne(e,t)}},none:Nne,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],i=a.length;r<i;++r){for(var s=0,o=0;s<n;++s)o+=e[s][r][1]||0;a[r][1]+=a[r][0]=-o/2}Nne(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,i=0,s=1;s<r;++s){for(var o=0,l=0,c=0;o<a;++o){for(var u=e[t[o]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,p=0;p<o;++p){var m=e[t[p]];h+=(m[s][1]||0)-(m[s-1][1]||0)}l+=d,c+=h*d}n[s-1][1]+=n[s-1][0]=i,l&&(i-=c/l)}n[s-1][1]+=n[s-1][0]=i,Nne(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,i=0;i<t;++i){var s=aee(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=a,e[i][n][1]=a+s,a=e[i][n][1]):(e[i][n][0]=0,e[i][n][1]=0)}}},Cge=function(e,t,n){var r=t.map(function(e){return e.props.dataKey}),a=Sge[n],i=function(){var e=Nte([]),t=jne,n=Nne,r=_ne;function a(a){var i,s,o=Array.from(e.apply(this,arguments),Sne),l=o.length,c=-1;for(const e of a)for(i=0,++c;i<l;++i)(o[i][c]=[0,+r(e,o[i].key,c,a)]).data=e;for(i=0,s=Dte(t(o));i<l;++i)o[s[i]].index=i;return n(o,s),o}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:Nte(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"==typeof e?e:Nte(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?jne:"function"==typeof e?e:Nte(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?Nne:e,a):n},a}().keys(r).value(function(e,t){return+pge(e,t,0)}).order(jne).offset(a);return i(e)},Pge=function(e,t){var n=t.realScaleType,r=t.type,a=t.tickCount,i=t.originalDomain,s=t.allowDecimals,o=n||t.scale;if("auto"!==o&&"linear"!==o)return null;if(a&&"number"===r&&i&&("auto"===i[0]||"auto"===i[1])){var l=e.domain();if(!l.length)return null;var c=Ffe(l,a,s);return e.domain([Eme(c),jme(c)]),{niceTicks:c}}if(a&&"number"===r){var u=e.domain();return{niceTicks:$fe(u,a,s)}}return null};function Ege(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,i=e.index,s=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!E9(a[t.dataKey])){var o=mee(n,"value",a[t.dataKey]);if(o)return o.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=pge(a,E9(s)?t.dataKey:s);return E9(l)?null:t.scale(l)}var Rge=function(e){var t=e.axis,n=e.ticks,r=e.offset,a=e.bandSize,i=e.entry,s=e.index;if("category"===t.type)return n[s]?n[s].coordinate+r:null;var o=pge(i,t.dataKey,t.domain[s]);return E9(o)?null:t.scale(o)-a/2+r},Oge=function(e,t,n){return Object.keys(e).reduce(function(r,a){var i=e[a].stackedData.reduce(function(e,r){var a=r.slice(t,n+1).reduce(function(e,t){return[Eme(t.concat([e[0]]).filter(oee)),jme(t.concat([e[1]]).filter(oee))]},[1/0,-1/0]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(i[0],r[0]),Math.max(i[1],r[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},Tge=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Mge=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Age=function(e,t,n){if(I8(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(oee(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(Tge.test(e[0])){var a=+Tge.exec(e[0])[1];r[0]=t[0]-a}else I8(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(oee(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(Mge.test(e[1])){var i=+Mge.exec(e[1])[1];r[1]=t[1]+i}else I8(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Bge=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=Loe(t,function(e){return e.coordinate}),i=1/0,s=1,o=a.length;s<o;s++){var l=a[s],c=a[s-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},Dge=function(e,t,n){return e&&e.length?Lme(e,P9(n,"type.defaultProps.domain"))?t:e:t},Ige=function(e,t){var n=e.type.defaultProps?dge(dge({},e.type.defaultProps),e.props):e.props,r=n.dataKey,a=n.name,i=n.unit,s=n.formatter,o=n.tooltipType,l=n.chartType,c=n.hide;return dge(dge({},Fee(e,!1)),{},{dataKey:r,unit:i,formatter:s,name:a||r,color:fge(e),value:pge(t,r),type:o,payload:t,chartType:l,hide:c})};function Lge(e){return(Lge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fge(Object(n),!0).forEach(function(t){zge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zge(e,t,n){var r;return r=function(e,t){if("object"!=Lge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Lge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Lge(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wge=Math.PI/180,Qge=function(e){return 180*e/Math.PI},Uge=function(e,t,n,r){return{x:e+Math.cos(-Wge*r)*n,y:t+Math.sin(-Wge*r)*n}},Kge=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},Hge=function(e,t,n,r,a){var i=e.width,s=e.height,o=e.startAngle,l=e.endAngle,c=dee(e.cx,i,i/2),u=dee(e.cy,s,s/2),d=Kge(i,s,n),h=dee(e.innerRadius,d,0),p=dee(e.outerRadius,d,.8*d);return Object.keys(t).reduce(function(e,n){var i,s=t[n],d=s.domain,m=s.reversed;if(E9(s.range))"angleAxis"===r?i=[o,l]:"radiusAxis"===r&&(i=[h,p]),m&&(i=[i[1],i[0]]);else{var f=qge(i=s.range,2);o=f[0],l=f[1]}var g=Nge(s,a),y=g.realScaleType,v=g.scale;v.domain(d).range(i),_ge(v);var x=Pge(v,$ge($ge({},s),{},{realScaleType:y})),b=$ge($ge($ge({},s),x),{},{range:i,radius:p,realScaleType:y,scale:v,cx:c,cy:u,innerRadius:h,outerRadius:p,startAngle:o,endAngle:l});return $ge($ge({},e),{},zge({},n,b))},{})},Gge=function(e,t){var n=e.x,r=e.y,a=t.cx,i=t.cy,s=function(e,t){var n=e.x,r=e.y,a=t.x,i=t.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(r-i,2))}({x:n,y:r},{x:a,y:i});if(s<=0)return{radius:s};var o=(n-a)/s,l=Math.acos(o);return r>i&&(l=2*Math.PI-l),{radius:s,angle:Qge(l),angleInRadian:l}},Yge=function(e,t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360);return e+360*Math.min(a,i)},Zge=function(e,t){var n=e.x,r=e.y,a=Gge({x:n,y:r},t),i=a.radius,s=a.angle,o=t.innerRadius,l=t.outerRadius;if(i<o||i>l)return!1;if(0===i)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),a=Math.floor(n/360),i=Math.min(r,a);return{startAngle:t-360*i,endAngle:n-360*i}}(t),d=u.startAngle,h=u.endAngle,p=s;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;c=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=d}return c?$ge($ge({},t),{},{radius:i,angle:Yge(p,t)}):null},Xge=function(e){return ct.isValidElement(e)||I8(e)||"boolean"==typeof e?"":e.className};function Jge(e){return(Jge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eye=["offset"];function tye(e){return function(e){if(Array.isArray(e))return nye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function aye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aye(Object(n),!0).forEach(function(t){sye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sye(e,t,n){var r;return r=function(e,t){if("object"!=Jge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Jge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Jge(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oye(){return oye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oye.apply(this,arguments)}var lye=function(e,t,n){var r,a,i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,u=c.cx,d=c.cy,h=c.innerRadius,p=c.outerRadius,m=c.startAngle,f=c.endAngle,g=c.clockWise,y=(h+p)/2,v=function(e,t){return iee(t-e)*Math.min(Math.abs(t-e),360)}(m,f),x=v>=0?1:-1;"insideStart"===i?(r=m+x*o,a=g):"insideEnd"===i?(r=f-x*o,a=!g):"end"===i&&(r=f+x*o,a=g),a=v<=0?a:!a;var b=Uge(u,d,y,r),w=Uge(u,d,y,r+359*(a?1:-1)),k="M".concat(b.x,",").concat(b.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(a?0:1,",\n    ").concat(w.x,",").concat(w.y),N=E9(e.id)?uee("recharts-radial-line-"):e.id;return ut.createElement("text",oye({},n,{dominantBaseline:"central",className:dm("recharts-radial-bar-label",l)}),ut.createElement("defs",null,ut.createElement("path",{id:N,d:k})),ut.createElement("textPath",{xlinkHref:"#".concat(N)},t))};function cye(e){var t,n=e.offset,r=iye({offset:void 0===n?5:n},rye(e,eye)),a=r.viewBox,i=r.position,s=r.value,o=r.children,l=r.content,c=r.className,u=void 0===c?"":c,d=r.textBreakAll;if(!a||E9(s)&&E9(o)&&!ct.isValidElement(l)&&!I8(l))return null;if(ct.isValidElement(l))return ct.cloneElement(l,r);if(I8(l)){if(t=ct.createElement(l,r),ct.isValidElement(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=E9(e.children)?t:e.children;return I8(n)?n(r):r}(r);var h=function(e){return"cx"in e&&oee(e.cx)}(a),p=Fee(r,!0);if(h&&("insideStart"===i||"insideEnd"===i||"end"===i))return lye(r,t,p);var m=h?function(e){var t=e.viewBox,n=e.offset,r=e.position,a=t,i=a.cx,s=a.cy,o=a.innerRadius,l=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===r){var u=Uge(i,s,l+n,c),d=u.x;return{x:d,y:u.y,textAnchor:d>=i?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=Uge(i,s,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(r):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,a=e.position,i=t,s=i.x,o=i.y,l=i.width,c=i.height,u=c>=0?1:-1,d=u*r,h=u>0?"end":"start",p=u>0?"start":"end",m=l>=0?1:-1,f=m*r,g=m>0?"end":"start",y=m>0?"start":"end";if("top"===a)return iye(iye({},{x:s+l/2,y:o-u*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===a)return iye(iye({},{x:s+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(o+c),0),width:l}:{});if("left"===a){var v={x:s-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return iye(iye({},v),n?{width:Math.max(v.x-n.x,0),height:c}:{})}if("right"===a){var x={x:s+l+f,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return iye(iye({},x),n?{width:Math.max(n.x+n.width-x.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===a?iye({x:s+f,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},b):"insideRight"===a?iye({x:s+l-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===a?iye({x:s+l/2,y:o+d,textAnchor:"middle",verticalAnchor:p},b):"insideBottom"===a?iye({x:s+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===a?iye({x:s+f,y:o+d,textAnchor:y,verticalAnchor:p},b):"insideTopRight"===a?iye({x:s+l-f,y:o+d,textAnchor:g,verticalAnchor:p},b):"insideBottomLeft"===a?iye({x:s+f,y:o+c-d,textAnchor:y,verticalAnchor:h},b):"insideBottomRight"===a?iye({x:s+l-f,y:o+c-d,textAnchor:g,verticalAnchor:h},b):M8(a)&&(oee(a.x)||see(a.x))&&(oee(a.y)||see(a.y))?iye({x:s+dee(a.x,l),y:o+dee(a.y,c),textAnchor:"end",verticalAnchor:"end"},b):iye({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(r);return ut.createElement(Dce,oye({className:dm("recharts-label",u)},p,m,{breakAll:d}),t)}cye.displayName="Label";var uye=function(e){var t=e.cx,n=e.cy,r=e.angle,a=e.startAngle,i=e.endAngle,s=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,d=e.y,h=e.top,p=e.left,m=e.width,f=e.height,g=e.clockWise,y=e.labelViewBox;if(y)return y;if(oee(m)&&oee(f)){if(oee(u)&&oee(d))return{x:u,y:d,width:m,height:f};if(oee(h)&&oee(p))return{x:h,y:p,width:m,height:f}}return oee(u)&&oee(d)?{x:u,y:d,width:0,height:0}:oee(t)&&oee(n)?{cx:t,cy:n,startAngle:a||r||0,endAngle:i||r||0,innerRadius:l||0,outerRadius:c||o||s||0,clockWise:g}:e.viewBox?e.viewBox:{}};cye.parseViewBox=uye,cye.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=uye(e),i=Aee(r,cye).map(function(e,n){return ct.cloneElement(e,{viewBox:t||a,key:"label-".concat(n)})});if(!n)return i;var s=function(e,t){return e?!0===e?ut.createElement(cye,{key:"label-implicit",viewBox:t}):lee(e)?ut.createElement(cye,{key:"label-implicit",viewBox:t,value:e}):ct.isValidElement(e)?e.type===cye?ct.cloneElement(e,{key:"label-implicit",viewBox:t}):ut.createElement(cye,{key:"label-implicit",content:e,viewBox:t}):I8(e)?ut.createElement(cye,{key:"label-implicit",content:e,viewBox:t}):M8(e)?ut.createElement(cye,oye({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||a);return[s].concat(tye(i))};const dye=je(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0});function hye(e){return(hye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var pye=["valueAccessor"],mye=["data","dataKey","clockWise","id","textBreakAll"];function fye(e){return function(e){if(Array.isArray(e))return gye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yye(){return yye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yye.apply(this,arguments)}function vye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vye(Object(n),!0).forEach(function(t){bye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bye(e,t,n){var r;return r=function(e,t){if("object"!=hye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=hye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==hye(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kye=function(e){return Array.isArray(e.value)?dye(e.value):e.value};function Nye(e){var t=e.valueAccessor,n=void 0===t?kye:t,r=wye(e,pye),a=r.data,i=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,c=wye(r,mye);return a&&a.length?ut.createElement(Yee,{className:"recharts-label-list"},a.map(function(e,t){var r=E9(i)?n(e,t):pge(e&&e.payload,i),a=E9(o)?{}:{id:"".concat(o,"-").concat(t)};return ut.createElement(cye,yye({},Fee(e,!0),c,a,{parentViewBox:e.parentViewBox,value:r,textBreakAll:l,viewBox:cye.parseViewBox(E9(s)?e:xye(xye({},e),{},{clockWise:s})),key:"label-".concat(t),index:t}))})):null}function jye(e){return(jye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _ye(){return _ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_ye.apply(this,arguments)}function Sye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sye(Object(n),!0).forEach(function(t){Pye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Pye(e,t,n){var r;return r=function(e,t){if("object"!=jye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=jye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==jye(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Nye.displayName="LabelList",Nye.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=Aee(e.children,Nye).map(function(e,n){return ct.cloneElement(e,{data:t,key:"labelList-".concat(n)})});return n?[function(e,t){return e?!0===e?ut.createElement(Nye,{key:"labelList-implicit",data:t}):ut.isValidElement(e)||I8(e)?ut.createElement(Nye,{key:"labelList-implicit",data:t,content:e}):M8(e)?ut.createElement(Nye,yye({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(fye(r)):r};var Eye=function(e){var t=e.cx,n=e.cy,r=e.radius,a=e.angle,i=e.sign,s=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(s?1:-1)+r,u=Math.asin(o/c)/Wge,d=l?a:a+i*u,h=l?a-i*u:a;return{center:Uge(t,n,c,d),circleTangency:Uge(t,n,r,d),lineTangency:Uge(t,n,c*Math.cos(u*Wge),h),theta:u}},Rye=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,a=e.outerRadius,i=e.startAngle,s=function(e,t){return iee(t-e)*Math.min(Math.abs(t-e),359.999)}(i,e.endAngle),o=i+s,l=Uge(t,n,a,i),c=Uge(t,n,a,o),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(i>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var d=Uge(t,n,r,i),h=Uge(t,n,r,o);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(i<=o),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},Oye={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Tye=function(e){var t=Cye(Cye({},Oye),e),n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,u=t.endAngle,d=t.className;if(i<a||c===u)return null;var h,p=dm("recharts-sector",d),m=i-a,f=dee(s,m,0,!0);return h=f>0&&Math.abs(c-u)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,a=e.outerRadius,i=e.cornerRadius,s=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=iee(c-l),d=Eye({cx:t,cy:n,radius:a,angle:l,sign:u,cornerRadius:i,cornerIsExternal:o}),h=d.circleTangency,p=d.lineTangency,m=d.theta,f=Eye({cx:t,cy:n,radius:a,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:o}),g=f.circleTangency,y=f.lineTangency,v=f.theta,x=o?Math.abs(l-c):Math.abs(l-c)-m-v;if(x<0)return s?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*i,",0\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*-i,",0\n      "):Rye({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:l,endAngle:c});var b="M ".concat(p.x,",").concat(p.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var w=Eye({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),k=w.circleTangency,N=w.lineTangency,j=w.theta,_=Eye({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),S=_.circleTangency,C=_.lineTangency,P=_.theta,E=o?Math.abs(l-c):Math.abs(l-c)-j-P;if(E<0&&0===i)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(C.x,",").concat(C.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(E>180),",").concat(+(u>0),",").concat(k.x,",").concat(k.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b}({cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:Math.min(f,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):Rye({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:c,endAngle:u}),ut.createElement("path",_ye({},Fee(t,!0),{className:p,d:h,role:"img"}))};function Mye(e){return(Mye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aye(){return Aye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Aye.apply(this,arguments)}function Bye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bye(Object(n),!0).forEach(function(t){Iye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Iye(e,t,n){var r;return r=function(e,t){if("object"!=Mye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Mye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Mye(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lye={curveBasisClosed:function(e){return new une(e)},curveBasisOpen:function(e){return new dne(e)},curveBasis:function(e){return new cne(e)},curveBumpX:function(e){return new Vte(e,!0)},curveBumpY:function(e){return new Vte(e,!1)},curveLinearClosed:function(e){return new hne(e)},curveLinear:Lte,curveMonotoneX:function(e){return new yne(e)},curveMonotoneY:function(e){return new vne(e)},curveNatural:function(e){return new bne(e)},curveStep:function(e){return new kne(e,.5)},curveStepAfter:function(e){return new kne(e,1)},curveStepBefore:function(e){return new kne(e,0)}},Fye=function(e){return e.x===+e.x&&e.y===+e.y},$ye=function(e){return e.x},zye=function(e){return e.y},qye=function(e){var t,n=e.type,r=void 0===n?"linear":n,a=e.points,i=void 0===a?[]:a,s=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(I8(e))return e;var n="curve".concat(kte(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Lye[n]||Lte:Lye["".concat(n).concat("vertical"===t?"Y":"X")]}(r,o),d=c?i.filter(function(e){return Fye(e)}):i;if(Array.isArray(s)){var h=c?s.filter(function(e){return Fye(e)}):s,p=d.map(function(e,t){return Dye(Dye({},e),{},{base:h[t]})});return(t="vertical"===o?qte().y(zye).x1($ye).x0(function(e){return e.base.x}):qte().x($ye).y1(zye).y0(function(e){return e.base.y})).defined(Fye).curve(u),t(p)}return(t="vertical"===o&&oee(s)?qte().y(zye).x1($ye).x0(s):oee(s)?qte().x($ye).y1(zye).y0(s):zte().x($ye).y(zye)).defined(Fye).curve(u),t(d)},Vye=function(e){var t=e.className,n=e.points,r=e.path,a=e.pathRef;if(!(n&&n.length||r))return null;var i=n&&n.length?qye(e):r;return ct.createElement("path",Aye({},Fee(e,!1),Nee(e),{className:dm("recharts-curve",t),d:i,ref:a}))},Wye={exports:{}};function Qye(){}function Uye(){}Uye.resetWarningCache=Qye;Wye.exports=function(){function e(e,t,n,r,a,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Uye,resetWarningCache:Qye};return n.PropTypes=n,n}();const Kye=je(Wye.exports);var Hye=Object.getOwnPropertyNames,Gye=Object.getOwnPropertySymbols,Yye=Object.prototype.hasOwnProperty;function Zye(e,t){return function(n,r,a){return e(n,r,a)&&t(n,r,a)}}function Xye(e){return function(t,n,r){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,r);var a=r.cache,i=a.get(t),s=a.get(n);if(i&&s)return i===n&&s===t;a.set(t,n),a.set(n,t);var o=e(t,n,r);return a.delete(t),a.delete(n),o}}function Jye(e){return Hye(e).concat(Gye(e))}var eve=Object.hasOwn||function(e,t){return Yye.call(e,t)};function tve(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var nve=Object.getOwnPropertyDescriptor,rve=Object.keys;function ave(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function ive(e,t){return tve(e.getTime(),t.getTime())}function sve(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function ove(e,t){return e===t}function lve(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a,i,s=new Array(r),o=e.entries(),l=0;(a=o.next())&&!a.done;){for(var c=t.entries(),u=!1,d=0;(i=c.next())&&!i.done;)if(s[d])d++;else{var h=a.value,p=i.value;if(n.equals(h[0],p[0],l,d,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){u=s[d]=!0;break}d++}if(!u)return!1;l++}return!0}var cve=tve;function uve(e,t,n){var r=rve(e),a=r.length;if(rve(t).length!==a)return!1;for(;a-- >0;)if(!yve(e,t,n,r[a]))return!1;return!0}function dve(e,t,n){var r,a,i,s=Jye(e),o=s.length;if(Jye(t).length!==o)return!1;for(;o-- >0;){if(!yve(e,t,n,r=s[o]))return!1;if(a=nve(e,r),i=nve(t,r),(a||i)&&(!a||!i||a.configurable!==i.configurable||a.enumerable!==i.enumerable||a.writable!==i.writable))return!1}return!0}function hve(e,t){return tve(e.valueOf(),t.valueOf())}function pve(e,t){return e.source===t.source&&e.flags===t.flags}function mve(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a,i,s=new Array(r),o=e.values();(a=o.next())&&!a.done;){for(var l=t.values(),c=!1,u=0;(i=l.next())&&!i.done;){if(!s[u]&&n.equals(a.value,i.value,a.value,i.value,e,t,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function fve(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function gve(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function yve(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||eve(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var vve=Array.isArray,xve="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,bve=Object.assign,wve=Object.prototype.toString.call.bind(Object.prototype.toString);var kve=Nve();function Nve(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,a=e.createInternalComparator,i=e.createState,s=e.strict,o=void 0!==s&&s,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?dve:ave,areDatesEqual:ive,areErrorsEqual:sve,areFunctionsEqual:ove,areMapsEqual:r?Zye(lve,dve):lve,areNumbersEqual:cve,areObjectsEqual:r?dve:uve,arePrimitiveWrappersEqual:hve,areRegExpsEqual:pve,areSetsEqual:r?Zye(mve,dve):mve,areTypedArraysEqual:r?dve:fve,areUrlsEqual:gve};if(n&&(a=bve({},a,n(a))),t){var i=Xye(a.areArraysEqual),s=Xye(a.areMapsEqual),o=Xye(a.areObjectsEqual),l=Xye(a.areSetsEqual);a=bve({},a,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return a}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,p,m){if(e===p)return!0;if(null==e||null==p)return!1;var f=typeof e;if(f!==typeof p)return!1;if("object"!==f)return"number"===f?s(e,p,m):"function"===f&&a(e,p,m);var g=e.constructor;if(g!==p.constructor)return!1;if(g===Object)return o(e,p,m);if(vve(e))return t(e,p,m);if(null!=xve&&xve(e))return d(e,p,m);if(g===Date)return n(e,p,m);if(g===RegExp)return c(e,p,m);if(g===Map)return i(e,p,m);if(g===Set)return u(e,p,m);var y=wve(e);return"[object Date]"===y?n(e,p,m):"[object RegExp]"===y?c(e,p,m):"[object Map]"===y?i(e,p,m):"[object Set]"===y?u(e,p,m):"[object Object]"===y?"function"!=typeof e.then&&"function"!=typeof p.then&&o(e,p,m):"[object URL]"===y?h(e,p,m):"[object Error]"===y?r(e,p,m):"[object Arguments]"===y?o(e,p,m):("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)&&l(e,p,m)}}(l),u=a?a(c):(t=c,function(e,n,r,a,i,s,o){return t(e,n,o)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,i=e.strict;if(r)return function(e,s){var o=r(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,u=o.meta;return n(e,s,{cache:c,equals:a,meta:u,strict:i})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var s={cache:void 0,equals:a,meta:void 0,strict:i};return function(e,t){return n(e,t,s)}}({circular:r,comparator:c,createState:i,equals:u,strict:o})}function jve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame(function r(a){n<0&&(n=a),a-n>t?(e(a),n=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)})}function _ve(e){return(_ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sve(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Cve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pve(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var a=Sve(r),i=a[0],s=a.slice(1);return"number"==typeof i?void jve(n.bind(null,s),i):(n(i),void jve(n.bind(null,s)))}"object"===_ve(r)&&e(r),"function"==typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function Eve(e){return(Eve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ove(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rve(Object(n),!0).forEach(function(t){Tve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rve(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Tve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Eve(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==Eve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Eve(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Nve({strict:!0}),Nve({circular:!0}),Nve({circular:!0,strict:!0}),Nve({createInternalComparator:function(){return tve}}),Nve({strict:!0,createInternalComparator:function(){return tve}}),Nve({circular:!0,createInternalComparator:function(){return tve}}),Nve({circular:!0,createInternalComparator:function(){return tve},strict:!0});var Mve=function(e){return e},Ave=function(e,t){return Object.keys(t).reduce(function(n,r){return Ove(Ove({},n),{},Tve({},r,e(r,t[r])))},{})},Bve=function(e,t,n){return e.map(function(e){return"".concat((r=e,r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(n);var r}).join(",")};function Dve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||Lve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ive(e){return function(e){if(Array.isArray(e))return Fve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lve(e,t){if(e){if("string"==typeof e)return Fve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fve(e,t):void 0}}function Fve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $ve=1e-4,zve=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},qve=function(e,t){return e.map(function(e,n){return e*Math.pow(t,n)}).reduce(function(e,t){return e+t})},Vve=function(e,t){return function(n){var r=zve(e,t);return qve(r,n)}},Wve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],s=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,a=0,i=1,s=1;break;case"ease":r=.25,a=.1,i=.25,s=1;break;case"ease-in":r=.42,a=0,i=1,s=1;break;case"ease-out":r=.42,a=0,i=.58,s=1;break;case"ease-in-out":r=0,a=0,i=.58,s=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=Dve(o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);r=l[0],a=l[1],i=l[2],s=l[3]}}var c,u,d=Vve(r,i),h=Vve(a,s),p=(c=r,u=i,function(e){var t=zve(c,u),n=[].concat(Ive(t.map(function(e,t){return e*t}).slice(1)),[0]);return qve(n,e)}),m=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var a=d(n)-t,i=p(n);if(Math.abs(a-t)<$ve||i<$ve)return h(n);n=m(n-a/i)}return h(n)};return f.isStepper=!1,f},Qve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"==typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Wve(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,a=void 0===r?8:r,i=e.dt,s=void 0===i?17:i,o=function(e,t,r){var i=r+(-(e-t)*n-r*a)*s/1e3,o=r*s/1e3+e;return Math.abs(o-t)<$ve&&Math.abs(i)<$ve?[t,0]:[o,i]};return o.isStepper=!0,o.dt=s,o}();default:if("cubic-bezier"===r.split("(")[0])return Wve(r)}return"function"==typeof r?r:null};function Uve(e){return(Uve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kve(e){return function(e){if(Array.isArray(e))return Jve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hve(Object(n),!0).forEach(function(t){Yve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hve(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Uve(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==Uve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Uve(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||Xve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xve(e,t){if(e){if("string"==typeof e)return Jve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jve(e,t):void 0}}function Jve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var exe=function(e,t,n){return e+(t-e)*n},txe=function(e){return e.from!==e.to},nxe=function e(t,n,r){var a=Ave(function(e,n){if(txe(n)){var r=Zve(t(n.from,n.to,n.velocity),2),a=r[0],i=r[1];return Gve(Gve({},n),{},{from:a,velocity:i})}return n},n);return r<1?Ave(function(e,t){return txe(t)?Gve(Gve({},t),{},{velocity:exe(t.velocity,a[e].velocity,r),from:exe(t.from,a[e].from,r)}):t},n):e(t,a,r-1)};const rxe=function(e,t,n,r,a){var i,s,o,l,c=(i=e,s=t,[Object.keys(i),Object.keys(s)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),u=c.reduce(function(n,r){return Gve(Gve({},n),{},Yve({},r,[e[r],t[r]]))},{}),d=c.reduce(function(n,r){return Gve(Gve({},n),{},Yve({},r,{from:e[r],velocity:0,to:t[r]}))},{}),h=-1,p=function(){return null};return p=n.isStepper?function(r){o||(o=r);var i=(r-o)/n.dt;d=nxe(n,d,i),a(Gve(Gve(Gve({},e),t),Ave(function(e,t){return t.from},d))),o=r,Object.values(d).filter(txe).length&&(h=requestAnimationFrame(p))}:function(i){l||(l=i);var s=(i-l)/r,o=Ave(function(e,t){return exe.apply(void 0,Kve(t).concat([n(s)]))},u);if(a(Gve(Gve(Gve({},e),t),o)),s<1)h=requestAnimationFrame(p);else{var c=Ave(function(e,t){return exe.apply(void 0,Kve(t).concat([n(1)]))},u);a(Gve(Gve(Gve({},e),t),c))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(h)}}};function axe(e){return(axe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ixe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function sxe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function oxe(e){return function(e){if(Array.isArray(e))return lxe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return lxe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lxe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lxe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cxe(Object(n),!0).forEach(function(t){dxe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cxe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dxe(e,t,n){return(t=pxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hxe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pxe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pxe(e){var t=function(e,t){if("object"!==axe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==axe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===axe(t)?t:String(t)}function mxe(e,t){return(mxe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fxe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(APe){return!1}}();return function(){var n,r=vxe(e);if(t){var a=vxe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return gxe(this,n)}}function gxe(e,t){if(t&&("object"===axe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yxe(e)}function yxe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vxe(e){return(vxe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xxe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mxe(e,t)}(t,ct.PureComponent);var e=fxe(t);function t(n,r){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=(a=e.call(this,n,r)).props,s=i.isActive,o=i.attributeName,l=i.from,c=i.to,u=i.steps,d=i.children,h=i.duration;if(a.handleStyleChange=a.handleStyleChange.bind(yxe(a)),a.changeStyle=a.changeStyle.bind(yxe(a)),!s||h<=0)return a.state={style:{}},"function"==typeof d&&(a.state={style:c}),gxe(a);if(u&&u.length)a.state={style:u[0].style};else if(l){if("function"==typeof d)return a.state={style:l},gxe(a);a.state={style:o?dxe({},o,l):l}}else a.state={style:{}};return a}return hxe(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,a=t.attributeName,i=t.shouldReAnimate,s=t.to,o=t.from,l=this.state.style;if(r)if(n){if(!(kve(e.to,s)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||i?o:e.to;if(this.state&&l){var d={style:a?dxe({},a,u):u};(a&&l[a]!==u||!a&&l!==u)&&this.setState(d)}this.runAnimation(uxe(uxe({},this.props),{},{from:u,begin:0}))}}else{var h={style:a?dxe({},a,s):s};this.state&&l&&(a&&l[a]!==s||!a&&l!==s)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,a=e.duration,i=e.easing,s=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=rxe(n,r,Qve(i),a,this.changeStyle);this.manager.start([l,s,function(){t.stopJSAnimation=c()},a,o])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,a=e.onAnimationStart,i=n[0],s=i.style,o=i.duration,l=void 0===o?0:o;return this.manager.start([a].concat(oxe(n.reduce(function(e,r,a){if(0===a)return e;var i=r.duration,s=r.easing,o=void 0===s?"ease":s,l=r.style,c=r.properties,u=r.onAnimationEnd,d=a>0?n[a-1]:r,h=c||Object.keys(l);if("function"==typeof o||"spring"===o)return[].concat(oxe(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:i,easing:o}),i]);var p=Bve(h,i,o),m=uxe(uxe(uxe({},d.style),l),{},{transition:p});return[].concat(oxe(e),[m,i,u]).filter(Mve)},[s,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Pve());var t=e.begin,n=e.duration,r=e.attributeName,a=e.to,i=e.easing,s=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!=typeof i&&"function"!=typeof c&&"spring"!==i)if(l.length>1)this.runStepAnimation(e);else{var d=r?dxe({},r,a):a,h=Bve(Object.keys(d),n,i);u.start([s,t,uxe(uxe({},d),{},{transition:h}),n,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var n=e.duration;e.attributeName,e.easing;var r=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var a=sxe(e,ixe),i=ct.Children.count(t),s=this.state.style;if("function"==typeof t)return t(s);if(!r||0===i||n<=0)return t;var o=function(e){var t=e.props,n=t.style,r=void 0===n?{}:n,i=t.className;return ct.cloneElement(e,uxe(uxe({},a),{},{style:uxe(uxe({},r),s),className:i}))};return 1===i?o(ct.Children.only(t)):ut.createElement("div",null,ct.Children.map(t,function(e){return o(e)}))}}]),t}();function bxe(e){return(bxe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wxe(){return wxe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wxe.apply(this,arguments)}function kxe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nxe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nxe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nxe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jxe(Object(n),!0).forEach(function(t){Sxe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jxe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Sxe(e,t,n){var r;return r=function(e,t){if("object"!=bxe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=bxe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==bxe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}xxe.displayName="Animate",xxe.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},xxe.propTypes={from:Kye.oneOfType([Kye.object,Kye.string]),to:Kye.oneOfType([Kye.object,Kye.string]),attributeName:Kye.string,duration:Kye.number,begin:Kye.number,easing:Kye.oneOfType([Kye.string,Kye.func]),steps:Kye.arrayOf(Kye.shape({duration:Kye.number.isRequired,style:Kye.object.isRequired,easing:Kye.oneOfType([Kye.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Kye.func]),properties:Kye.arrayOf("string"),onAnimationEnd:Kye.func})),children:Kye.oneOfType([Kye.node,Kye.func]),isActive:Kye.bool,canBegin:Kye.bool,onAnimationEnd:Kye.func,shouldReAnimate:Kye.bool,onAnimationStart:Kye.func,onAnimationReStart:Kye.func};var Cxe=function(e,t,n,r,a){var i,s=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(s>0&&a instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=a[d]>s?s:a[d];i="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(i+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),i+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(i+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+o*u[1])),i+="L ".concat(e+n,",").concat(t+r-o*u[2]),u[2]>0&&(i+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),i+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(i+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-o*u[3])),i+="Z"}else if(s>0&&a===+a&&a>0){var h=Math.min(s,a);i="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*h,"\n            L ").concat(e+n,",").concat(t+r-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-o*h," Z")}else i="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return i},Pxe=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,a=t.x,i=t.y,s=t.width,o=t.height;if(Math.abs(s)>0&&Math.abs(o)>0){var l=Math.min(a,a+s),c=Math.max(a,a+s),u=Math.min(i,i+o),d=Math.max(i,i+o);return n>=l&&n<=c&&r>=u&&r<=d}return!1},Exe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rxe=function(e){var t=_xe(_xe({},Exe),e),n=ct.useRef(),r=kxe(ct.useState(-1),2),a=r[0],i=r[1];ct.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(BPe){}},[]);var s=t.x,o=t.y,l=t.width,c=t.height,u=t.radius,d=t.className,h=t.animationEasing,p=t.animationDuration,m=t.animationBegin,f=t.isAnimationActive,g=t.isUpdateAnimationActive;if(s!==+s||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var y=dm("recharts-rectangle",d);return g?ut.createElement(xxe,{canBegin:a>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:p,animationEasing:h,isActive:g},function(e){var r=e.width,i=e.height,s=e.x,o=e.y;return ut.createElement(xxe,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:f,easing:h},ut.createElement("path",wxe({},Fee(t,!0),{className:y,d:Cxe(s,o,r,i,u),ref:n})))}):ut.createElement("path",wxe({},Fee(t,!0),{className:y,d:Cxe(s,o,l,c,u)}))};function Oxe(){return Oxe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oxe.apply(this,arguments)}var Txe=function(e){var t=e.cx,n=e.cy,r=e.r,a=dm("recharts-dot",e.className);return t===+t&&n===+n&&r===+r?ct.createElement("circle",Oxe({},Fee(e,!1),Nee(e),{className:a,cx:t,cy:n,r:r})):null};function Mxe(e){return(Mxe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Axe=["x","y","top","left","width","height","className"];function Bxe(){return Bxe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bxe.apply(this,arguments)}function Dxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ixe(e,t,n){var r;return r=function(e,t){if("object"!=Mxe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Mxe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Mxe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lxe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Fxe=function(e,t,n,r,a,i){return"M".concat(e,",").concat(a,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n)},$xe=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,a=void 0===r?0:r,i=e.top,s=void 0===i?0:i,o=e.left,l=void 0===o?0:o,c=e.width,u=void 0===c?0:c,d=e.height,h=void 0===d?0:d,p=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dxe(Object(n),!0).forEach(function(t){Ixe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dxe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:n,y:a,top:s,left:l,width:u,height:h},Lxe(e,Axe));return oee(n)&&oee(a)&&oee(u)&&oee(h)&&oee(s)&&oee(l)?ut.createElement("path",Bxe({},Fee(m,!0),{className:dm("recharts-cross",p),d:Fxe(n,a,u,h,s,l)})):null},zxe=Sae(Object.getPrototypeOf,Object),qxe=k8,Vxe=zxe,Wxe=N8,Qxe=Function.prototype,Uxe=Object.prototype,Kxe=Qxe.toString,Hxe=Uxe.hasOwnProperty,Gxe=Kxe.call(Object);const Yxe=je(function(e){if(!Wxe(e)||"[object Object]"!=qxe(e))return!1;var t=Vxe(e);if(null===t)return!0;var n=Hxe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Kxe.call(n)==Gxe});var Zxe=k8,Xxe=N8;const Jxe=je(function(e){return!0===e||!1===e||Xxe(e)&&"[object Boolean]"==Zxe(e)});function ebe(e){return(ebe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tbe(){return tbe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tbe.apply(this,arguments)}function nbe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rbe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rbe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rbe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function abe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ibe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?abe(Object(n),!0).forEach(function(t){sbe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):abe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sbe(e,t,n){var r;return r=function(e,t){if("object"!=ebe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ebe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ebe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var obe=function(e,t,n,r,a){var i,s=n-r;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+n,",").concat(t),i+="L ".concat(e+n-s/2,",").concat(t+a),i+="L ".concat(e+n-s/2-r,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z")},lbe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cbe=function(e){var t=ibe(ibe({},lbe),e),n=ct.useRef(),r=nbe(ct.useState(-1),2),a=r[0],i=r[1];ct.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(BPe){}},[]);var s=t.x,o=t.y,l=t.upperWidth,c=t.lowerWidth,u=t.height,d=t.className,h=t.animationEasing,p=t.animationDuration,m=t.animationBegin,f=t.isUpdateAnimationActive;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||0===l&&0===c||0===u)return null;var g=dm("recharts-trapezoid",d);return f?ut.createElement(xxe,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:p,animationEasing:h,isActive:f},function(e){var r=e.upperWidth,i=e.lowerWidth,s=e.height,o=e.x,l=e.y;return ut.createElement(xxe,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:h},ut.createElement("path",tbe({},Fee(t,!0),{className:g,d:obe(o,l,r,i,s),ref:n})))}):ut.createElement("g",null,ut.createElement("path",tbe({},Fee(t,!0),{className:g,d:obe(s,o,l,c,u)})))},ube=["option","shapeType","propTransformer","activeClassName","isActive"];function dbe(e){return(dbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hbe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function pbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pbe(Object(n),!0).forEach(function(t){fbe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pbe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fbe(e,t,n){var r;return r=function(e,t){if("object"!=dbe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=dbe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==dbe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gbe(e,t){return mbe(mbe({},t),e)}function ybe(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return ut.createElement(Rxe,n);case"trapezoid":return ut.createElement(cbe,n);case"sector":return ut.createElement(Tye,n);case"symbols":if(function(e){return"symbols"===e}(t))return ut.createElement(Dne,n);break;default:return null}}function vbe(e){var t,n=e.option,r=e.shapeType,a=e.propTransformer,i=void 0===a?gbe:a,s=e.activeClassName,o=void 0===s?"recharts-active-shape":s,l=e.isActive,c=hbe(e,ube);if(ct.isValidElement(n))t=ct.cloneElement(n,mbe(mbe({},c),function(e){return ct.isValidElement(e)?e.props:e}(n)));else if(I8(n))t=n(c);else if(Yxe(n)&&!Jxe(n)){var u=i(n,c);t=ut.createElement(ybe,{shapeType:r,elementProps:u})}else{var d=c;t=ut.createElement(ybe,{shapeType:r,elementProps:d})}return l?ut.createElement(Yee,{className:o},t):t}function xbe(e,t){return null!=t&&"trapezoids"in e.props}function bbe(e,t){return null!=t&&"sectors"in e.props}function wbe(e,t){return null!=t&&"points"in e.props}function kbe(e,t){var n,r,a=e.x===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,i=e.y===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return a&&i}function Nbe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function jbe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function _be(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=function(e,t){var n;return xbe(e,t)?n="trapezoids":bbe(e,t)?n="sectors":wbe(e,t)&&(n="points"),n}(n,t),i=function(e,t){var n,r;return xbe(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:bbe(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:wbe(e,t)?t.payload:{}}(n,t),s=r.filter(function(e,r){var s=Lme(i,e),o=n.props[a].filter(function(e){var r=function(e,t){var n;return xbe(e,t)?n=kbe:bbe(e,t)?n=Nbe:wbe(e,t)&&(n=jbe),n}(n,t);return r(e,t)}),l=n.props[a].indexOf(o[o.length-1]);return s&&r===l});return r.indexOf(s[s.length-1])}var Sbe=Math.ceil,Cbe=Math.max;var Pbe=Ble,Ebe=1/0;var Rbe=function(e){return e?(e=Pbe(e))===Ebe||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},Obe=function(e,t,n,r){for(var a=-1,i=Cbe(Sbe((t-e)/(n||1)),0),s=Array(i);i--;)s[r?i:++a]=e,e+=n;return s},Tbe=Aoe,Mbe=Rbe;const Abe=je(function(e){return function(t,n,r){return r&&"number"!=typeof r&&Tbe(t,n,r)&&(n=r=void 0),t=Mbe(t),void 0===n?(n=t,t=0):n=Mbe(n),r=void 0===r?t<n?1:-1:Mbe(r),Obe(t,n,r,e)}}());function Bbe(e){return(Bbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ibe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dbe(Object(n),!0).forEach(function(t){Lbe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dbe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Lbe(e,t,n){var r;return r=function(e,t){if("object"!=Bbe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Bbe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Bbe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fbe=["Webkit","Moz","O","ms"];function $be(e){return($be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zbe(){return zbe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zbe.apply(this,arguments)}function qbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qbe(Object(n),!0).forEach(function(t){Gbe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qbe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ybe(r.key),r)}}function Qbe(e,t,n){return t=Kbe(t),function(e,t){if(t&&("object"===$be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ube()?Reflect.construct(t,n||[],Kbe(e).constructor):t.apply(e,n))}function Ube(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ube=function(){return!!e})()}function Kbe(e){return(Kbe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hbe(e,t){return(Hbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gbe(e,t,n){return(t=Ybe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ybe(e){var t=function(e,t){if("object"!=$be(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=$be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==$be(t)?t:t+""}var Zbe=function(e){return e.changedTouches&&!!e.changedTouches.length},Xbe=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gbe(n=Qbe(this,e,[t]),"handleDrag",function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)}),Gbe(n,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])}),Gbe(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,a=e.startIndex;null==r||r({endIndex:t,startIndex:a})}),n.detachDragEndListener()}),Gbe(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Gbe(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Gbe(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Gbe(n,"handleSlideDragStart",function(e){var t=Zbe(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hbe(e,t)}(e,ct.PureComponent),t=e,r=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.stroke,s=Math.floor(n+a/2)-1;return ut.createElement(ut.Fragment,null,ut.createElement("rect",{x:t,y:n,width:r,height:a,fill:i,stroke:"none"}),ut.createElement("line",{x1:t+1,y1:s,x2:t+r-1,y2:s,fill:"none",stroke:"#fff"}),ut.createElement("line",{x1:t+1,y1:s+2,x2:t+r-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,n){return ut.isValidElement(t)?ut.cloneElement(t,n):I8(t)?t(n):e.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,a=e.x,i=e.travellerWidth,s=e.updateId,o=e.startIndex,l=e.endIndex;if(n!==t.prevData||s!==t.prevUpdateId)return Vbe({prevData:n,prevTravellerWidth:i,prevUpdateId:s,prevX:a,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,a=e.x,i=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=due().domain(Abe(0,o)).range([a,a+i-s]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:a,travellerWidth:i,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||a!==t.prevX||i!==t.prevTravellerWidth)){t.scale.range([a,a+r-i]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:n,prevTravellerWidth:i,prevUpdateId:s,prevX:a,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var a=Math.floor((n+r)/2);e[a]>t?r=a:n=a}return t>=e[r]?r:n}}],(n=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var n=t.startX,r=t.endX,a=this.state.scaleValues,i=this.props,s=i.gap,o=i.data.length-1,l=Math.min(n,r),c=Math.max(n,r),u=e.getIndexInRange(a,l),d=e.getIndexInRange(a,c);return{startIndex:u-u%s,endIndex:d===o?o:d-d%s}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,a=t.dataKey,i=pge(n[e],a,e);return I8(r)?r(i,e):i}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,a=t.endX,i=this.props,s=i.x,o=i.width,l=i.travellerWidth,c=i.startIndex,u=i.endIndex,d=i.onChange,h=e.pageX-n;h>0?h=Math.min(h,s+o-l-a,s+o-l-r):h<0&&(h=Math.max(h,s-r,s-a));var p=this.getIndex({startX:r+h,endX:a+h});p.startIndex===c&&p.endIndex===u||!d||d(p),this.setState({startX:r+h,endX:a+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=Zbe(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,a=t.endX,i=t.startX,s=this.state[r],o=this.props,l=o.x,c=o.width,u=o.travellerWidth,d=o.onChange,h=o.gap,p=o.data,m={startX:this.state.startX,endX:this.state.endX},f=e.pageX-n;f>0?f=Math.min(f,l+c-u-s):f<0&&(f=Math.max(f,l-s)),m[r]=s+f;var g=this.getIndex(m),y=g.startIndex,v=g.endIndex;this.setState(Gbe(Gbe({},r,s+f),"brushMoveStartX",e.pageX),function(){var e;d&&(e=p.length-1,("startX"===r&&(a>i?y%h===0:v%h===0)||a<i&&v===e||"endX"===r&&(a>i?v%h===0:y%h===0)||a>i&&v===e)&&d(g))})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,a=r.scaleValues,i=r.startX,s=r.endX,o=this.state[t],l=a.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=a.length)){var u=a[c];"startX"===t&&u>=s||"endX"===t&&u<=i||this.setState(Gbe({},t,u),function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,a=e.height,i=e.fill,s=e.stroke;return ut.createElement("rect",{stroke:s,fill:i,x:t,y:n,width:r,height:a})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,a=e.height,i=e.data,s=e.children,o=e.padding,l=ct.Children.only(s);return l?ut.cloneElement(l,{x:t,y:n,width:r,height:a,margin:o,compact:!0,data:i}):null}},{key:"renderTravellerLayer",value:function(t,n){var r,a,i=this,s=this.props,o=s.y,l=s.travellerWidth,c=s.height,u=s.traveller,d=s.ariaLabel,h=s.data,p=s.startIndex,m=s.endIndex,f=Math.max(t,this.props.x),g=Vbe(Vbe({},Fee(this.props,!1)),{},{x:f,y:o,width:l,height:c}),y=d||"Min value: ".concat(null===(r=h[p])||void 0===r?void 0:r.name,", Max value: ").concat(null===(a=h[m])||void 0===a?void 0:a.name);return ut.createElement(Yee,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),i.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(u,g))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,a=n.height,i=n.stroke,s=n.travellerWidth,o=Math.min(e,t)+s,l=Math.max(Math.abs(t-e)-s,0);return ut.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:o,y:r,width:l,height:a})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,a=e.height,i=e.travellerWidth,s=e.stroke,o=this.state,l=o.startX,c=o.endX,u={pointerEvents:"none",fill:s};return ut.createElement(Yee,{className:"recharts-brush-texts"},ut.createElement(Dce,zbe({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:r+a/2},u),this.getTextOfTick(t)),ut.createElement(Dce,zbe({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+i+5,y:r+a/2},u),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,a=e.x,i=e.y,s=e.width,o=e.height,l=e.alwaysShowText,c=this.state,u=c.startX,d=c.endX,h=c.isTextActive,p=c.isSlideMoving,m=c.isTravellerMoving,f=c.isTravellerFocused;if(!t||!t.length||!oee(a)||!oee(i)||!oee(s)||!oee(o)||s<=0||o<=0)return null;var g,y,v,x,b=dm("recharts-brush",n),w=1===ut.Children.count(r),k=(y="none",v=(g="userSelect").replace(/(\w)/,function(e){return e.toUpperCase()}),(x=Fbe.reduce(function(e,t){return Ibe(Ibe({},e),{},Lbe({},t+v,y))},{}))[g]=y,x);return ut.createElement(Yee,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(u,d),this.renderTravellerLayer(u,"startX"),this.renderTravellerLayer(d,"endX"),(h||p||m||f||l)&&this.renderText())}}])&&Wbe(t.prototype,n),r&&Wbe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Gbe(Xbe,"displayName","Brush"),Gbe(Xbe,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Jbe=Jse;var ewe=hre,twe=lse,nwe=function(e,t){var n;return Jbe(e,function(e,r,a){return!(n=t(e,r,a))}),!!n},rwe=s8,awe=Aoe;const iwe=je(function(e,t,n){var r=rwe(e)?ewe:nwe;return n&&awe(e,t,n)&&(t=void 0),r(e,twe(t))});var swe=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},owe=woe;var lwe=function(e,t,n){"__proto__"==t&&owe?owe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},cwe=Zse,uwe=lse;const dwe=je(function(e,t){var n={};return t=uwe(t),cwe(e,function(e,r,a){lwe(n,r,t(e,r,a))}),n});var hwe=Jse;var pwe=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0},mwe=function(e,t){var n=!0;return hwe(e,function(e,r,a){return n=!!t(e,r,a)}),n},fwe=lse,gwe=s8,ywe=Aoe;const vwe=je(function(e,t,n){var r=gwe(e)?pwe:mwe;return n&&ywe(e,t,n)&&(t=void 0),r(e,fwe(t))});var xwe=["x","y"];function bwe(e){return(bwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wwe(){return wwe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wwe.apply(this,arguments)}function kwe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nwe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kwe(Object(n),!0).forEach(function(t){jwe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kwe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jwe(e,t,n){var r;return r=function(e,t){if("object"!=bwe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=bwe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==bwe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _we(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Swe(e,t){var n=e.x,r=e.y,a=_we(e,xwe),i="".concat(n),s=parseInt(i,10),o="".concat(r),l=parseInt(o,10),c="".concat(t.height||a.height),u=parseInt(c,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Nwe(Nwe(Nwe(Nwe(Nwe({},t),a),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function Cwe(e){return ut.createElement(vbe,wwe({shapeType:"rectangle",propTransformer:Swe,activeClassName:"recharts-active-bar"},e))}var Pwe,Ewe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"==typeof e)return e;var a=oee(n)||function(e){return E9(e)}(n);return a?e(n,r):(a||zfe(),t)}},Rwe=["value","background"];function Owe(e){return(Owe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Twe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Mwe(){return Mwe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mwe.apply(this,arguments)}function Awe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Bwe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Awe(Object(n),!0).forEach(function(t){zwe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Awe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qwe(r.key),r)}}function Iwe(e,t,n){return t=Fwe(t),function(e,t){if(t&&("object"===Owe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lwe()?Reflect.construct(t,n||[],Fwe(e).constructor):t.apply(e,n))}function Lwe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Lwe=function(){return!!e})()}function Fwe(e){return(Fwe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $we(e,t){return($we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zwe(e,t,n){return(t=qwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qwe(e){var t=function(e,t){if("object"!=Owe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Owe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Owe(t)?t:t+""}var Vwe=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return zwe(t=Iwe(this,e,[].concat(r)),"state",{isAnimationFinished:!1}),zwe(t,"id",uee("recharts-bar-")),zwe(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()}),zwe(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$we(e,t)}(e,ct.PureComponent),t=e,r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(n=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props,r=n.shape,a=n.dataKey,i=n.activeIndex,s=n.activeBar,o=Fee(this.props,!1);return e&&e.map(function(e,n){var l=n===i,c=l?s:r,u=Bwe(Bwe(Bwe({},o),e),{},{isActive:l,option:c,index:n,dataKey:a,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return ut.createElement(Yee,Mwe({className:"recharts-bar-rectangle"},jee(t.props,e,n),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(n)}),ut.createElement(Cwe,u))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,r=t.layout,a=t.isAnimationActive,i=t.animationBegin,s=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state.prevData;return ut.createElement(xxe,{begin:i,duration:s,isActive:a,easing:o,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var a=t.t,i=n.map(function(e,t){var n=c&&c[t];if(n){var i=pee(n.x,e.x),s=pee(n.y,e.y),o=pee(n.width,e.width),l=pee(n.height,e.height);return Bwe(Bwe({},e),{},{x:i(a),y:s(a),width:o(a),height:l(a)})}if("horizontal"===r){var u=pee(0,e.height)(a);return Bwe(Bwe({},e),{},{y:e.y+e.height-u,height:u})}var d=pee(0,e.width)(a);return Bwe(Bwe({},e),{},{width:d})});return ut.createElement(Yee,null,e.renderRectanglesStatically(i))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&Lme(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,n=t.data,r=t.dataKey,a=t.activeIndex,i=Fee(this.props.background,!1);return n.map(function(t,n){t.value;var s=t.background,o=Twe(t,Rwe);if(!s)return null;var l=Bwe(Bwe(Bwe(Bwe(Bwe({},o),{},{fill:"#eee"},s),i),jee(e.props,t,n)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:r,index:n,className:"recharts-bar-background-rectangle"});return ut.createElement(Cwe,Mwe({key:"background-bar-".concat(n),option:e.props.background,isActive:n===a},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.data,a=n.xAxis,i=n.yAxis,s=n.layout,o=Aee(n.children,tge);if(!o)return null;var l="vertical"===s?r[0].height/2:r[0].width/2,c=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:pge(e,t)}},u={clipPath:e?"url(#clipPath-".concat(t,")"):null};return ut.createElement(Yee,u,o.map(function(e){return ut.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:r,xAxis:a,yAxis:i,layout:s,offset:l,dataPointFormatter:c})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,r=e.className,a=e.xAxis,i=e.yAxis,s=e.left,o=e.top,l=e.width,c=e.height,u=e.isAnimationActive,d=e.background,h=e.id;if(t||!n||!n.length)return null;var p=this.state.isAnimationFinished,m=dm("recharts-bar",r),f=a&&a.allowDataOverflow,g=i&&i.allowDataOverflow,y=f||g,v=E9(h)?this.id:h;return ut.createElement(Yee,{className:m},f||g?ut.createElement("defs",null,ut.createElement("clipPath",{id:"clipPath-".concat(v)},ut.createElement("rect",{x:f?s:s-l/2,y:g?o:o-c/2,width:f?l:2*l,height:g?c:2*c}))):null,ut.createElement(Yee,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(v,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,v),(!u||p)&&Nye.renderCallByParent(this.props,n))}}])&&Dwe(t.prototype,n),r&&Dwe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Wwe(e){return(Wwe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gwe(r.key),r)}}function Uwe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kwe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uwe(Object(n),!0).forEach(function(t){Hwe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uwe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hwe(e,t,n){return(t=Gwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gwe(e){var t=function(e,t){if("object"!=Wwe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Wwe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wwe(t)?t:t+""}Pwe=Vwe,zwe(Vwe,"displayName","Bar"),zwe(Vwe,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!dle.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),zwe(Vwe,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,u=e.dataStartIndex,d=e.displayedData,h=e.offset,p=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!p)return null;var m=t.layout,f=n.type.defaultProps,g=void 0!==f?Bwe(Bwe({},f),n.props):n.props,y=g.dataKey,v=g.children,x=g.minPointSize,b="horizontal"===m?s:i,w=c?b.scale.domain():null,k=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]}({numericAxis:b}),N=Aee(v,Jle),j=d.map(function(e,t){var r,d,h,f,g,v;c?r=function(e,t){if(!t||2!==t.length||!oee(t[0])||!oee(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!oee(e[0])||e[0]<n)&&(a[0]=n),(!oee(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a}(c[u+t],w):(r=pge(e,y),Array.isArray(r)||(r=[k,r]));var b=Ewe(x,Pwe.defaultProps.minPointSize)(r[1],t);if("horizontal"===m){var j,_=[s.scale(r[0]),s.scale(r[1])],S=_[0],C=_[1];d=Rge({axis:i,ticks:o,bandSize:a,offset:p.offset,entry:e,index:t}),h=null!==(j=null!=C?C:S)&&void 0!==j?j:void 0,f=p.size;var P=S-C;if(g=Number.isNaN(P)?0:P,v={x:d,y:s.y,width:f,height:s.height},Math.abs(b)>0&&Math.abs(g)<Math.abs(b)){var E=iee(g||b)*(Math.abs(b)-Math.abs(g));h-=E,g+=E}}else{var R=[i.scale(r[0]),i.scale(r[1])],O=R[0],T=R[1];if(d=O,h=Rge({axis:s,ticks:l,bandSize:a,offset:p.offset,entry:e,index:t}),f=T-O,g=p.size,v={x:i.x,y:h,width:i.width,height:g},Math.abs(b)>0&&Math.abs(f)<Math.abs(b))f+=iee(f||b)*(Math.abs(b)-Math.abs(f))}return Bwe(Bwe(Bwe({},e),{},{x:d,y:h,width:f,height:g,value:c?r:r[1],payload:e,background:v},N&&N[t]&&N[t].props),{},{tooltipPayload:[Ige(n,e)],tooltipPosition:{x:d+f/2,y:h+g/2}})});return Bwe({data:j,layout:m},h)});var Ywe=function(e,t,n,r,a){var i=e.width,s=e.height,o=e.layout,l=e.children,c=Object.keys(t),u={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},d=!!Bee(l,Vwe);return c.reduce(function(i,s){var l,c,h,p,m,f=t[s],g=f.orientation,y=f.domain,v=f.padding,x=void 0===v?{}:v,b=f.mirror,w=f.reversed,k="".concat(g).concat(b?"Mirror":"");if("number"===f.type&&("gap"===f.padding||"no-gap"===f.padding)){var N=y[1]-y[0],j=1/0,_=f.categoricalDomain.sort(gee);if(_.forEach(function(e,t){t>0&&(j=Math.min((e||0)-(_[t-1]||0),j))}),Number.isFinite(j)){var S=j/N,C="vertical"===f.layout?n.height:n.width;if("gap"===f.padding&&(l=S*C/2),"no-gap"===f.padding){var P=dee(e.barCategoryGap,S*C),E=S*C/2;l=E-P-(E-P)/C*P}}}c="xAxis"===r?[n.left+(x.left||0)+(l||0),n.left+n.width-(x.right||0)-(l||0)]:"yAxis"===r?"horizontal"===o?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(l||0),n.top+n.height-(x.bottom||0)-(l||0)]:f.range,w&&(c=[c[1],c[0]]);var R=Nge(f,a,d),O=R.scale,T=R.realScaleType;O.domain(y).range(c),_ge(O);var M=Pge(O,Kwe(Kwe({},f),{},{realScaleType:T}));"xAxis"===r?(m="top"===g&&!b||"bottom"===g&&b,h=n.left,p=u[k]-m*f.height):"yAxis"===r&&(m="left"===g&&!b||"right"===g&&b,h=u[k]-m*f.width,p=n.top);var A=Kwe(Kwe(Kwe({},f),M),{},{realScaleType:T,x:h,y:p,scale:O,width:"xAxis"===r?n.width:f.width,height:"yAxis"===r?n.height:f.height});return A.bandSize=Bge(A,M),f.hide||"xAxis"!==r?f.hide||(u[k]+=(m?-1:1)*A.width):u[k]+=(m?-1:1)*A.height,Kwe(Kwe({},i),{},Hwe({},s,A))},{})},Zwe=function(e,t){var n=e.x,r=e.y,a=t.x,i=t.y;return{x:Math.min(n,a),y:Math.min(r,i),width:Math.abs(a-n),height:Math.abs(i-r)}},Xwe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&Qwe(t.prototype,n),r&&Qwe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Hwe(Xwe,"EPS",1e-4);var Jwe=function(e){var t=Object.keys(e).reduce(function(t,n){return Kwe(Kwe({},t),{},Hwe({},n,Xwe.create(e[n])))},{});return Kwe(Kwe({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,a=n.position;return dwe(e,function(e,n){return t[n].apply(e,{bandAware:r,position:a})})},isInRange:function(e){return vwe(e,function(e,n){return t[n].isInRange(e)})}})};var eke=lse,tke=Mae,nke=Iae;var rke=function(e){return function(t,n,r){var a=Object(t);if(!tke(t)){var i=eke(n);t=nke(t),n=function(e){return i(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[i?t[s]:s]:void 0}},ake=Rbe;var ike=cse,ske=lse,oke=function(e){var t=ake(e),n=t%1;return t==t?n?t-n:t:0},lke=Math.max;const cke=je(rke(function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:oke(n);return a<0&&(a=lke(r+a,0)),ike(e,ske(t),a)}));var uke=n9(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),dke=ct.createContext(void 0),hke=ct.createContext(void 0),pke=ct.createContext(void 0),mke=ct.createContext({}),fke=ct.createContext(void 0),gke=ct.createContext(0),yke=ct.createContext(0),vke=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,a=t.offset,i=e.clipPathId,s=e.children,o=e.width,l=e.height,c=uke(a);return ut.createElement(dke.Provider,{value:n},ut.createElement(hke.Provider,{value:r},ut.createElement(mke.Provider,{value:a},ut.createElement(pke.Provider,{value:c},ut.createElement(fke.Provider,{value:i},ut.createElement(gke.Provider,{value:l},ut.createElement(yke.Provider,{value:o},s)))))))},xke=function(e){var t=ct.useContext(dke);null==t&&zfe();var n=t[e];return null==n&&zfe(),n},bke=function(e){var t=ct.useContext(hke);null==t&&zfe();var n=t[e];return null==n&&zfe(),n},wke=function(){return ct.useContext(yke)},kke=function(){return ct.useContext(gke)};function Nke(e){return(Nke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jke(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tke(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ke(e,t,n){return t=Cke(t),function(e,t){if(t&&("object"===Nke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ske()?Reflect.construct(t,n||[],Cke(e).constructor):t.apply(e,n))}function Ske(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ske=function(){return!!e})()}function Cke(e){return(Cke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pke(e,t){return(Pke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Eke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eke(Object(n),!0).forEach(function(t){Oke(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eke(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oke(e,t,n){return(t=Tke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tke(e){var t=function(e,t){if("object"!=Nke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Nke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Nke(t)?t:t+""}function Mke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ake(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ake(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ake(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bke(){return Bke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bke.apply(this,arguments)}function Dke(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,i=e.yAxisId,s=e.shape,o=e.className,l=e.alwaysShow,c=ct.useContext(fke),u=xke(a),d=bke(i),h=ct.useContext(pke);if(!c||!h)return null;Zee(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(e,t,n,r,a,i,s,o,l){var c=a.x,u=a.y,d=a.width,h=a.height;if(n){var p=l.y,m=e.y.apply(p,{position:i});if(swe(l,"discard")&&!e.y.isInRange(m))return null;var f=[{x:c+d,y:m},{x:c,y:m}];return"left"===o?f.reverse():f}if(t){var g=l.x,y=e.x.apply(g,{position:i});if(swe(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:u+h},{x:y,y:u}];return"top"===s?v.reverse():v}if(r){var x=l.segment.map(function(t){return e.apply(t,{position:i})});return swe(l,"discard")&&iwe(x,function(t){return!e.isInRange(t)})?null:x}return null}(Jwe({x:u.scale,y:d.scale}),lee(t),lee(n),r&&2===r.length,h,e.position,u.orientation,d.orientation,e);if(!p)return null;var m=Mke(p,2),f=m[0],g=f.x,y=f.y,v=m[1],x=v.x,b=v.y,w=Rke(Rke({clipPath:swe(e,"hidden")?"url(#".concat(c,")"):void 0},Fee(e,!0)),{},{x1:g,y1:y,x2:x,y2:b});return ut.createElement(Yee,{className:dm("recharts-reference-line",o)},function(e,t){return ut.isValidElement(e)?ut.cloneElement(e,t):I8(e)?e(t):ut.createElement("line",Bke({},t,{className:"recharts-reference-line-line"}))}(s,w),cye.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2;return Zwe({x:t,y:n},{x:r,y:a})}({x1:g,y1:y,x2:x,y2:b})))}var Ike=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_ke(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pke(e,t)}(e,ut.Component),jke(e,[{key:"render",value:function(){return ut.createElement(Dke,this.props)}}])}();function Lke(){return Lke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lke.apply(this,arguments)}function Fke(e){return(Fke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$ke(Object(n),!0).forEach(function(t){Kke(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$ke(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qke(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hke(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vke(e,t,n){return t=Qke(t),function(e,t){if(t&&("object"===Fke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wke()?Reflect.construct(t,n||[],Qke(e).constructor):t.apply(e,n))}function Wke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Wke=function(){return!!e})()}function Qke(e){return(Qke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uke(e,t){return(Uke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kke(e,t,n){return(t=Hke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hke(e){var t=function(e,t){if("object"!=Fke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Fke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Fke(t)?t:t+""}Oke(Ike,"displayName","ReferenceLine"),Oke(Ike,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var Gke=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Vke(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uke(e,t)}(e,ut.Component),qke(e,[{key:"render",value:function(){var t=this.props,n=t.x,r=t.y,a=t.r,i=t.alwaysShow,s=t.clipPathId,o=lee(n),l=lee(r);if(Zee(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var c=function(e){var t=e.x,n=e.y,r=e.xAxis,a=e.yAxis,i=Jwe({x:r.scale,y:a.scale}),s=i.apply({x:t,y:n},{bandAware:!0});return swe(e,"discard")&&!i.isInRange(s)?null:s}(this.props);if(!c)return null;var u=c.x,d=c.y,h=this.props,p=h.shape,m=h.className,f=zke(zke({clipPath:swe(this.props,"hidden")?"url(#".concat(s,")"):void 0},Fee(this.props,!0)),{},{cx:u,cy:d});return ut.createElement(Yee,{className:dm("recharts-reference-dot",m)},e.renderDot(p,f),cye.renderCallByParent(this.props,{x:u-a,y:d-a,width:2*a,height:2*a}))}}])}();function Yke(){return Yke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yke.apply(this,arguments)}function Zke(e){return(Zke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xke(Object(n),!0).forEach(function(t){iNe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xke(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eNe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sNe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tNe(e,t,n){return t=rNe(t),function(e,t){if(t&&("object"===Zke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nNe()?Reflect.construct(t,n||[],rNe(e).constructor):t.apply(e,n))}function nNe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(nNe=function(){return!!e})()}function rNe(e){return(rNe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aNe(e,t){return(aNe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iNe(e,t,n){return(t=sNe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sNe(e){var t=function(e,t){if("object"!=Zke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Zke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Zke(t)?t:t+""}Kke(Gke,"displayName","ReferenceDot"),Kke(Gke,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),Kke(Gke,"renderDot",function(e,t){return ut.isValidElement(e)?ut.cloneElement(e,t):I8(e)?e(t):ut.createElement(Txe,Lke({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var oNe=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tNe(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aNe(e,t)}(e,ut.Component),eNe(e,[{key:"render",value:function(){var t=this.props,n=t.x1,r=t.x2,a=t.y1,i=t.y2,s=t.className,o=t.alwaysShow,l=t.clipPathId;Zee(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=lee(n),u=lee(r),d=lee(a),h=lee(i),p=this.props.shape;if(!(c||u||d||h||p))return null;var m=function(e,t,n,r,a){var i=a.x1,s=a.x2,o=a.y1,l=a.y2,c=a.xAxis,u=a.yAxis;if(!c||!u)return null;var d=Jwe({x:c.scale,y:u.scale}),h={x:e?d.x.apply(i,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(o,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(s,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!swe(a,"discard")||d.isInRange(h)&&d.isInRange(p)?Zwe(h,p):null}(c,u,d,h,this.props);if(!m&&!p)return null;var f=swe(this.props,"hidden")?"url(#".concat(l,")"):void 0;return ut.createElement(Yee,{className:dm("recharts-reference-area",s)},e.renderRect(p,Jke(Jke({clipPath:f},Fee(this.props,!0)),m)),cye.renderCallByParent(this.props,m))}}])}();function lNe(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function cNe(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=r*Math.PI/180,i=Math.atan(n/t),s=a>i&&a<Math.PI-i?n/Math.sin(a):t/Math.cos(a);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},n)}function uNe(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function dNe(e){return(dNe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pNe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hNe(Object(n),!0).forEach(function(t){mNe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hNe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mNe(e,t,n){var r;return r=function(e,t){if("object"!=dNe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=dNe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==dNe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fNe(e,t,n){var r=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,u=e.unit,d=e.angle;if(!a||!a.length||!r)return[];if(oee(l)||dle.isSsr)return function(e,t){return lNe(e,t+1)}(a,"number"==typeof l&&oee(l)?l:0);var h=[],p="top"===o||"bottom"===o?"width":"height",m=u&&"width"===p?oce(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},f=function(e,r){var a=I8(c)?c(e.value,r):e.value;return"width"===p?cNe(oce(a,{fontSize:t,letterSpacing:n}),m,d):oce(a,{fontSize:t,letterSpacing:n})[p]},g=a.length>=2?iee(a[1].coordinate-a[0].coordinate):1,y=function(e,t,n){var r="width"===n,a=e.x,i=e.y,s=e.width,o=e.height;return 1===t?{start:r?a:i,end:r?a+s:i+o}:{start:r?a+s:i+o,end:r?a:i}}(i,g,p);return"equidistantPreserveStart"===l?function(e,t,n,r,a){for(var i,s=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var t=null==r?void 0:r[c];if(void 0===t)return{v:lNe(r,u)};var i,s=c,h=function(){return void 0===i&&(i=n(t,s)),i},p=t.coordinate,m=0===c||uNe(e,p,h,d,l);m||(c=0,d=o,u+=1),m&&(d=p+e*(h()/2+a),c+=u)};u<=s.length;)if(i=h())return i.v;return[]}(g,y,f,a,s):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,a,i){var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end;if(i){var u=r[o-1],d=n(u,o-1),h=e*(u.coordinate+e*d/2-c);s[o-1]=u=pNe(pNe({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),uNe(e,u.tickCoord,function(){return d},l,c)&&(c=u.tickCoord-e*(d/2+a),s[o-1]=pNe(pNe({},u),{},{isShow:!0}))}for(var p=i?o-1:o,m=function(t){var r,i=s[t],o=function(){return void 0===r&&(r=n(i,t)),r};if(0===t){var u=e*(i.coordinate-e*o()/2-l);s[t]=i=pNe(pNe({},i),{},{tickCoord:u<0?i.coordinate-u*e:i.coordinate})}else s[t]=i=pNe(pNe({},i),{},{tickCoord:i.coordinate});uNe(e,i.tickCoord,o,l,c)&&(l=i.tickCoord+e*(o()/2+a),s[t]=pNe(pNe({},i),{},{isShow:!0}))},f=0;f<p;f++)m(f);return s}(g,y,f,a,s,"preserveStartEnd"===l):function(e,t,n,r,a){for(var i=(r||[]).slice(),s=i.length,o=t.start,l=t.end,c=function(t){var r,c=i[t],u=function(){return void 0===r&&(r=n(c,t)),r};if(t===s-1){var d=e*(c.coordinate+e*u()/2-l);i[t]=c=pNe(pNe({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else i[t]=c=pNe(pNe({},c),{},{tickCoord:c.coordinate});uNe(e,c.tickCoord,u,o,l)&&(l=c.tickCoord-e*(u()/2+a),i[t]=pNe(pNe({},c),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return i}(g,y,f,a,s),h.filter(function(e){return e.isShow}))}iNe(oNe,"displayName","ReferenceArea"),iNe(oNe,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),iNe(oNe,"renderRect",function(e,t){return ut.isValidElement(e)?ut.cloneElement(e,t):I8(e)?e(t):ut.createElement(Rxe,Yke({},t,{className:"recharts-reference-area-rect"}))});var gNe=["viewBox"],yNe=["viewBox"],vNe=["ticks"];function xNe(e){return(xNe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bNe(){return bNe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bNe.apply(this,arguments)}function wNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kNe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wNe(Object(n),!0).forEach(function(t){ENe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wNe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function NNe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function jNe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RNe(r.key),r)}}function _Ne(e,t,n){return t=CNe(t),function(e,t){if(t&&("object"===xNe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,SNe()?Reflect.construct(t,n||[],CNe(e).constructor):t.apply(e,n))}function SNe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(SNe=function(){return!!e})()}function CNe(e){return(CNe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PNe(e,t){return(PNe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ENe(e,t,n){return(t=RNe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RNe(e){var t=function(e,t){if("object"!=xNe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=xNe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==xNe(t)?t:t+""}var ONe=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_Ne(this,e,[t])).state={fontSize:"",letterSpacing:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PNe(e,t)}(e,ct.Component),t=e,r=[{key:"renderTickItem",value:function(e,t,n){var r=dm(t.className,"recharts-cartesian-axis-tick-value");return ut.isValidElement(e)?ut.cloneElement(e,kNe(kNe({},t),{},{className:r})):I8(e)?e(kNe(kNe({},t),{},{className:r})):ut.createElement(Dce,bNe({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],(n=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=NNe(e,gNe),a=this.props,i=a.viewBox,s=NNe(a,yNe);return!yee(n,i)||!yee(r,s)||!yee(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,a,i,s,o=this.props,l=o.x,c=o.y,u=o.width,d=o.height,h=o.orientation,p=o.tickSize,m=o.mirror,f=o.tickMargin,g=m?-1:1,y=e.tickSize||p,v=oee(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=n=e.coordinate,s=(r=(a=c+ +!m*d)-g*y)-g*f,i=v;break;case"left":r=a=e.coordinate,i=(t=(n=l+ +!m*u)-g*y)-g*f,s=v;break;case"right":r=a=e.coordinate,i=(t=(n=l+ +m*u)+g*y)+g*f,s=v;break;default:t=n=e.coordinate,s=(r=(a=c+ +m*d)+g*y)+g*f,i=v}return{line:{x1:t,y1:r,x2:n,y2:a},tick:{x:i,y:s}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,a=e.height,i=e.orientation,s=e.mirror,o=e.axisLine,l=kNe(kNe(kNe({},Fee(this.props,!1)),Fee(o,!1)),{},{fill:"none"});if("top"===i||"bottom"===i){var c=+("top"===i&&!s||"bottom"===i&&s);l=kNe(kNe({},l),{},{x1:t,y1:n+c*a,x2:t+r,y2:n+c*a})}else{var u=+("left"===i&&!s||"right"===i&&s);l=kNe(kNe({},l),{},{x1:t+u*r,y1:n,x2:t+u*r,y2:n+a})}return ut.createElement("line",bNe({},l,{className:dm("recharts-cartesian-axis-line",P9(o,"className"))}))}},{key:"renderTicks",value:function(t,n,r){var a=this,i=this.props,s=i.tickLine,o=i.stroke,l=i.tick,c=i.tickFormatter,u=i.unit,d=fNe(kNe(kNe({},this.props),{},{ticks:t}),n,r),h=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=Fee(this.props,!1),f=Fee(l,!1),g=kNe(kNe({},m),{},{fill:"none"},Fee(s,!1)),y=d.map(function(t,n){var r=a.getTickLineCoord(t),i=r.line,y=r.tick,v=kNe(kNe(kNe(kNe({textAnchor:h,verticalAnchor:p},m),{},{stroke:"none",fill:o},f),y),{},{index:n,payload:t,visibleTicksCount:d.length,tickFormatter:c});return ut.createElement(Yee,bNe({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},jee(a.props,t,n)),s&&ut.createElement("line",bNe({},g,i,{className:dm("recharts-cartesian-axis-tick-line",P9(s,"className"))})),l&&e.renderTickItem(l,v,"".concat(I8(c)?c(t.value,n):t.value).concat(u||"")))});return ut.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var e=this,t=this.props,n=t.axisLine,r=t.width,a=t.height,i=t.ticksGenerator,s=t.className;if(t.hide)return null;var o=this.props,l=o.ticks,c=NNe(o,vNe),u=l;return I8(i)&&(u=l&&l.length>0?i(this.props):i(c)),r<=0||a<=0||!u||!u.length?null:ut.createElement(Yee,{className:dm("recharts-cartesian-axis",s),ref:function(t){e.layerReference=t}},n&&this.renderAxisLine(),this.renderTicks(u,this.state.fontSize,this.state.letterSpacing),cye.renderCallByParent(this.props))}}])&&jNe(t.prototype,n),r&&jNe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();ENe(ONe,"displayName","CartesianAxis"),ENe(ONe,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var TNe=["x1","y1","x2","y2","key"],MNe=["offset"];function ANe(e){return(ANe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DNe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BNe(Object(n),!0).forEach(function(t){INe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BNe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function INe(e,t,n){var r;return r=function(e,t){if("object"!=ANe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ANe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ANe(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LNe(){return LNe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LNe.apply(this,arguments)}function FNe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $Ne=function(e){var t=e.fill;if(!t||"none"===t)return null;var n=e.fillOpacity,r=e.x,a=e.y,i=e.width,s=e.height,o=e.ry;return ut.createElement("rect",{x:r,y:a,ry:o,width:i,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function zNe(e,t){var n;if(ut.isValidElement(e))n=ut.cloneElement(e,t);else if(I8(e))n=e(t);else{var r=t.x1,a=t.y1,i=t.x2,s=t.y2,o=t.key,l=FNe(t,TNe),c=Fee(l,!1);c.offset;var u=FNe(c,MNe);n=ut.createElement("line",LNe({},u,{x1:r,y1:a,x2:i,y2:s,fill:"none",key:o}))}return n}function qNe(e){var t=e.x,n=e.width,r=e.horizontal,a=void 0===r||r,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(r,i){var s=DNe(DNe({},e),{},{x1:t,y1:r,x2:t+n,y2:r,key:"line-".concat(i),index:i});return zNe(a,s)});return ut.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function VNe(e){var t=e.y,n=e.height,r=e.vertical,a=void 0===r||r,i=e.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(r,i){var s=DNe(DNe({},e),{},{x1:r,y1:t,x2:r,y2:t+n,key:"line-".concat(i),index:i});return zNe(a,s)});return ut.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function WNe(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,i=e.width,s=e.height,o=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=o.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==c[0]&&c.unshift(0);var u=c.map(function(e,o){var l=!c[o+1]?a+s-e:c[o+1]-e;if(l<=0)return null;var u=o%t.length;return ut.createElement("rect",{key:"react-".concat(o),y:e,x:r,height:l,width:i,stroke:"none",fill:t[u],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ut.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function QNe(e){var t=e.vertical,n=void 0===t||t,r=e.verticalFill,a=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==u[0]&&u.unshift(0);var d=u.map(function(e,t){var n=!u[t+1]?i+o-e:u[t+1]-e;if(n<=0)return null;var c=t%r.length;return ut.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:n,height:l,stroke:"none",fill:r[c],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ut.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var UNe=function(e,t){var n=e.xAxis,r=e.width,a=e.height,i=e.offset;return xge(fNe(DNe(DNe(DNe({},ONe.defaultProps),n),{},{ticks:bge(n,!0),viewBox:{x:0,y:0,width:r,height:a}})),i.left,i.left+i.width,t)},KNe=function(e,t){var n=e.yAxis,r=e.width,a=e.height,i=e.offset;return xge(fNe(DNe(DNe(DNe({},ONe.defaultProps),n),{},{ticks:bge(n,!0),viewBox:{x:0,y:0,width:r,height:a}})),i.top,i.top+i.height,t)},HNe={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function GNe(e){var t,n,r,a,i,s,o,l,c=wke(),u=kke(),d=ct.useContext(mke),h=DNe(DNe({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:HNe.stroke,fill:null!==(n=e.fill)&&void 0!==n?n:HNe.fill,horizontal:null!==(r=e.horizontal)&&void 0!==r?r:HNe.horizontal,horizontalFill:null!==(a=e.horizontalFill)&&void 0!==a?a:HNe.horizontalFill,vertical:null!==(i=e.vertical)&&void 0!==i?i:HNe.vertical,verticalFill:null!==(s=e.verticalFill)&&void 0!==s?s:HNe.verticalFill,x:oee(e.x)?e.x:d.left,y:oee(e.y)?e.y:d.top,width:oee(e.width)?e.width:d.width,height:oee(e.height)?e.height:d.height}),p=h.x,m=h.y,f=h.width,g=h.height,y=h.syncWithTicks,v=h.horizontalValues,x=h.verticalValues,b=(o=ct.useContext(dke),hee(o)),w=(l=ct.useContext(hke),cke(l,function(e){return vwe(e.domain,Number.isFinite)})||hee(l));if(!oee(f)||f<=0||!oee(g)||g<=0||!oee(p)||p!==+p||!oee(m)||m!==+m)return null;var k=h.verticalCoordinatesGenerator||UNe,N=h.horizontalCoordinatesGenerator||KNe,j=h.horizontalPoints,_=h.verticalPoints;if((!j||!j.length)&&I8(N)){var S=v&&v.length,C=N({yAxis:w?DNe(DNe({},w),{},{ticks:S?v:w.ticks}):void 0,width:c,height:u,offset:d},!!S||y);Zee(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ANe(C),"]")),Array.isArray(C)&&(j=C)}if((!_||!_.length)&&I8(k)){var P=x&&x.length,E=k({xAxis:b?DNe(DNe({},b),{},{ticks:P?x:b.ticks}):void 0,width:c,height:u,offset:d},!!P||y);Zee(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ANe(E),"]")),Array.isArray(E)&&(_=E)}return ut.createElement("g",{className:"recharts-cartesian-grid"},ut.createElement($Ne,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),ut.createElement(qNe,LNe({},h,{offset:d,horizontalPoints:j,xAxis:b,yAxis:w})),ut.createElement(VNe,LNe({},h,{offset:d,verticalPoints:_,xAxis:b,yAxis:w})),ut.createElement(WNe,LNe({},h,{horizontalPoints:j})),ut.createElement(QNe,LNe({},h,{verticalPoints:_})))}GNe.displayName="CartesianGrid";var YNe,ZNe=["layout","type","stroke","connectNulls","isRange","ref"],XNe=["key"];function JNe(e){return(JNe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eje(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function tje(){return tje=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tje.apply(this,arguments)}function nje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rje(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nje(Object(n),!0).forEach(function(t){cje(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nje(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uje(r.key),r)}}function ije(e,t,n){return t=oje(t),function(e,t){if(t&&("object"===JNe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sje()?Reflect.construct(t,n||[],oje(e).constructor):t.apply(e,n))}function sje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(sje=function(){return!!e})()}function oje(e){return(oje=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lje(e,t){return(lje=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cje(e,t,n){return(t=uje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uje(e){var t=function(e,t){if("object"!=JNe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=JNe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==JNe(t)?t:t+""}var dje=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return cje(t=ije(this,e,[].concat(r)),"state",{isAnimationFinished:!0}),cje(t,"id",uee("recharts-area-")),cje(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),I8(e)&&e()}),cje(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),I8(e)&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lje(e,t)}(e,ct.PureComponent),t=e,r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],(n=[{key:"renderDots",value:function(t,n,r){var a=this.props.isAnimationActive,i=this.state.isAnimationFinished;if(a&&!i)return null;var s=this.props,o=s.dot,l=s.points,c=s.dataKey,u=Fee(this.props,!1),d=Fee(o,!0),h=l.map(function(t,n){var r=rje(rje(rje({key:"dot-".concat(n),r:3},u),d),{},{index:n,cx:t.x,cy:t.y,dataKey:c,value:t.value,payload:t.payload,points:l});return e.renderDotItem(o,r)}),p={clipPath:t?"url(#clipPath-".concat(n?"":"dots-").concat(r,")"):null};return ut.createElement(Yee,tje({className:"recharts-area-dots"},p),h)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,n=t.baseLine,r=t.points,a=t.strokeWidth,i=r[0].x,s=r[r.length-1].x,o=e*Math.abs(i-s),l=jme(r.map(function(e){return e.y||0}));return oee(n)&&"number"==typeof n?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(jme(n.map(function(e){return e.y||0})),l)),oee(l)?ut.createElement("rect",{x:i<s?i:i-o,y:0,width:o,height:Math.floor(l+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,n=t.baseLine,r=t.points,a=t.strokeWidth,i=r[0].y,s=r[r.length-1].y,o=e*Math.abs(i-s),l=jme(r.map(function(e){return e.x||0}));return oee(n)&&"number"==typeof n?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(jme(n.map(function(e){return e.x||0})),l)),oee(l)?ut.createElement("rect",{x:0,y:i<s?i:i-o,width:l+(a?parseInt("".concat(a),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,n,r){var a=this.props,i=a.layout,s=a.type,o=a.stroke,l=a.connectNulls,c=a.isRange;a.ref;var u=eje(a,ZNe);return ut.createElement(Yee,{clipPath:n?"url(#clipPath-".concat(r,")"):null},ut.createElement(Vye,tje({},Fee(u,!0),{points:e,connectNulls:l,type:s,baseLine:t,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==o&&ut.createElement(Vye,tje({},Fee(this.props,!1),{className:"recharts-area-curve",layout:i,type:s,connectNulls:l,fill:"none",points:e})),"none"!==o&&c&&ut.createElement(Vye,tje({},Fee(this.props,!1),{className:"recharts-area-curve",layout:i,type:s,connectNulls:l,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var n=this,r=this.props,a=r.points,i=r.baseLine,s=r.isAnimationActive,o=r.animationBegin,l=r.animationDuration,c=r.animationEasing,u=r.animationId,d=this.state,h=d.prevPoints,p=d.prevBaseLine;return ut.createElement(xxe,{begin:o,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"area-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(r){var s=r.t;if(h){var o,l=h.length/a.length,c=a.map(function(e,t){var n=Math.floor(t*l);if(h[n]){var r=h[n],a=pee(r.x,e.x),i=pee(r.y,e.y);return rje(rje({},e),{},{x:a(s),y:i(s)})}return e});return o=oee(i)&&"number"==typeof i?pee(p,i)(s):E9(i)||aee(i)?pee(p,0)(s):i.map(function(e,t){var n=Math.floor(t*l);if(p[n]){var r=p[n],a=pee(r.x,e.x),i=pee(r.y,e.y);return rje(rje({},e),{},{x:a(s),y:i(s)})}return e}),n.renderAreaStatically(c,o,e,t)}return ut.createElement(Yee,null,ut.createElement("defs",null,ut.createElement("clipPath",{id:"animationClipPath-".concat(t)},n.renderClipRect(s))),ut.createElement(Yee,{clipPath:"url(#animationClipPath-".concat(t,")")},n.renderAreaStatically(a,i,e,t)))})}},{key:"renderArea",value:function(e,t){var n=this.props,r=n.points,a=n.baseLine,i=n.isAnimationActive,s=this.state,o=s.prevPoints,l=s.prevBaseLine,c=s.totalLength;return i&&r&&r.length&&(!o&&c>0||!Lme(o,r)||!Lme(l,a))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(r,a,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,r=t.dot,a=t.points,i=t.className,s=t.top,o=t.left,l=t.xAxis,c=t.yAxis,u=t.width,d=t.height,h=t.isAnimationActive,p=t.id;if(n||!a||!a.length)return null;var m=this.state.isAnimationFinished,f=1===a.length,g=dm("recharts-area",i),y=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,x=y||v,b=E9(p)?this.id:p,w=null!==(e=Fee(r,!1))&&void 0!==e?e:{r:3,strokeWidth:2},k=w.r,N=void 0===k?3:k,j=w.strokeWidth,_=void 0===j?2:j,S=(Lee(r)?r:{}).clipDot,C=void 0===S||S,P=2*N+_;return ut.createElement(Yee,{className:g},y||v?ut.createElement("defs",null,ut.createElement("clipPath",{id:"clipPath-".concat(b)},ut.createElement("rect",{x:y?o:o-u/2,y:v?s:s-d/2,width:y?u:2*u,height:v?d:2*d})),!C&&ut.createElement("clipPath",{id:"clipPath-dots-".concat(b)},ut.createElement("rect",{x:o-P/2,y:s-P/2,width:u+P,height:d+P}))):null,f?null:this.renderArea(x,b),(r||f)&&this.renderDots(x,C,b),(!h||m)&&Nye.renderCallByParent(this.props,a))}}])&&aje(t.prototype,n),r&&aje(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function hje(e){return(hje="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pje(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xje(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mje(e,t,n){return t=gje(t),function(e,t){if(t&&("object"===hje(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fje()?Reflect.construct(t,n||[],gje(e).constructor):t.apply(e,n))}function fje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(fje=function(){return!!e})()}function gje(e){return(gje=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yje(e,t){return(yje=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vje(e,t,n){return(t=xje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xje(e){var t=function(e,t){if("object"!=hje(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=hje(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==hje(t)?t:t+""}function bje(){return bje=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bje.apply(this,arguments)}function wje(e){var t=e.xAxisId,n=wke(),r=kke(),a=xke(t);return null==a?null:ct.createElement(ONe,bje({},a,{className:dm("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return bge(e,!0)}}))}YNe=dje,cje(dje,"displayName","Area"),cje(dje,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!dle.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),cje(dje,"getBaseValue",function(e,t,n,r){var a=e.layout,i=e.baseValue,s=t.props.baseValue,o=null!=s?s:i;if(oee(o)&&"number"==typeof o)return o;var l="horizontal"===a?r:n,c=l.scale.domain();if("number"===l.type){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return"dataMin"===o?d:"dataMax"===o||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===o?c[0]:"dataMax"===o?c[1]:c[0]}),cje(dje,"getComposedData",function(e){var t,n=e.props,r=e.item,a=e.xAxis,i=e.yAxis,s=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,p=e.offset,m=n.layout,f=u&&u.length,g=YNe.getBaseValue(n,r,a,i),y="horizontal"===m,v=!1,x=h.map(function(e,t){var n;f?n=u[d+t]:(n=pge(e,c),Array.isArray(n)?v=!0:n=[g,n]);var r=null==n[1]||f&&null==pge(e,c);return y?{x:Ege({axis:a,ticks:s,bandSize:l,entry:e,index:t}),y:r?null:i.scale(n[1]),value:n,payload:e}:{x:r?null:a.scale(n[1]),y:Ege({axis:i,ticks:o,bandSize:l,entry:e,index:t}),value:n,payload:e}});return t=f||v?x.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?i.scale(t):null}:{x:null!=t?a.scale(t):null,y:e.y}}):y?i.scale(g):a.scale(g),rje({points:x,baseLine:t,layout:m,isRange:v},p)}),cje(dje,"renderDotItem",function(e,t){var n;if(ut.isValidElement(e))n=ut.cloneElement(e,t);else if(I8(e))n=e(t);else{var r=dm("recharts-area-dot","boolean"!=typeof e?e.className:""),a=t.key,i=eje(t,XNe);n=ut.createElement(Txe,tje({},i,{key:a,className:r}))}return n});var kje=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mje(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yje(e,t)}(e,ct.Component),pje(e,[{key:"render",value:function(){return ct.createElement(wje,this.props)}}])}();function Nje(e){return(Nje="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jje(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rje(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _je(e,t,n){return t=Cje(t),function(e,t){if(t&&("object"===Nje(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Sje()?Reflect.construct(t,n||[],Cje(e).constructor):t.apply(e,n))}function Sje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Sje=function(){return!!e})()}function Cje(e){return(Cje=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pje(e,t){return(Pje=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Eje(e,t,n){return(t=Rje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rje(e){var t=function(e,t){if("object"!=Nje(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Nje(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Nje(t)?t:t+""}function Oje(){return Oje=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oje.apply(this,arguments)}vje(kje,"displayName","XAxis"),vje(kje,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var Tje=function(e){var t=e.yAxisId,n=wke(),r=kke(),a=bke(t);return null==a?null:ct.createElement(ONe,Oje({},a,{className:dm("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return bge(e,!0)}}))},Mje=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_je(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pje(e,t)}(e,ct.Component),jje(e,[{key:"render",value:function(){return ct.createElement(Tje,this.props)}}])}();function Aje(e){return function(e){if(Array.isArray(e))return Bje(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Bje(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bje(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bje(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Eje(Mje,"displayName","YAxis"),Eje(Mje,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var Dje=function(e,t,n,r,a){var i=Aee(e,Ike),s=Aee(e,Gke),o=[].concat(Aje(i),Aje(s)),l=Aee(e,oNe),c="".concat(r,"Id"),u=r[0],d=t;if(o.length&&(d=o.reduce(function(e,t){if(t.props[c]===n&&swe(t.props,"extendDomain")&&oee(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e},d)),l.length){var h="".concat(u,"1"),p="".concat(u,"2");d=l.reduce(function(e,t){if(t.props[c]===n&&swe(t.props,"extendDomain")&&oee(t.props[h])&&oee(t.props[p])){var r=t.props[h],a=t.props[p];return[Math.min(e[0],r,a),Math.max(e[1],r,a)]}return e},d)}return a&&a.length&&(d=a.reduce(function(e,t){return oee(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},d)),d},Ije={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new a(r,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,s=new Array(i);a<i;a++)s[a]=r[a].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,a,i,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,a),!0;case 5:return u.fn.call(u.context,t,r,a,i),!0;case 6:return u.fn.call(u.context,t,r,a,i,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||s(this,i);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||a&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(Ije);var Lje=new(je(Ije.exports)),Fje="recharts.syncMouseEvents";function $je(e){return($je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zje(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vje(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qje(e,t,n){return(t=Vje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vje(e){var t=function(e,t){if("object"!=$je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=$je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==$je(t)?t:t+""}var Wje=function(){return zje(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qje(this,"activeIndex",0),qje(this,"coordinateList",[]),qje(this,"layout","horizontal")},[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,a=e.container,i=void 0===a?null:a,s=e.layout,o=void 0===s?null:s,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!=r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!=i?i:this.container,this.layout=null!=o?o:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,a=n.y,i=n.height,s=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+s+o,u=a+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}])}();function Qje(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,i=e.endAngle;return{points:[Uge(t,n,r,a),Uge(t,n,r,i)],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function Uje(e,t,n){var r,a,i,s;if("horizontal"===e)i=r=t.x,a=n.top,s=n.top+n.height;else if("vertical"===e)s=a=t.y,r=n.left,i=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return Qje(t);var o=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,h=Uge(o,l,c,d),p=Uge(o,l,u,d);r=h.x,a=h.y,i=p.x,s=p.y}return[{x:r,y:a},{x:i,y:s}]}function Kje(e){return(Kje="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gje(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hje(Object(n),!0).forEach(function(t){Yje(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hje(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yje(e,t,n){var r;return r=function(e,t){if("object"!=Kje(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Kje(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Kje(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zje(e){var t,n,r,a=e.element,i=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,p=e.chartName,m=null!==(t=a.props.cursor)&&void 0!==t?t:null===(n=a.type.defaultProps)||void 0===n?void 0:n.cursor;if(!a||!m||!s||!o||"ScatterChart"!==p&&"axis"!==i)return null;var f=Vye;if("ScatterChart"===p)r=o,f=$xe;else if("BarChart"===p)r=function(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-a,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(h,o,c,d),f=Rxe;else if("radial"===h){var g=Qje(o),y=g.cx,v=g.cy,x=g.radius;r={cx:y,cy:v,startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:x,outerRadius:x},f=Tye}else r={points:Uje(h,o,c)},f=Vye;var b=Gje(Gje(Gje(Gje({stroke:"#ccc",pointerEvents:"none"},c),r),Fee(m,!1)),{},{payload:l,payloadIndex:u,className:dm("recharts-tooltip-cursor",m.className)});return ct.isValidElement(m)?ct.cloneElement(m,b):ct.createElement(f,b)}var Xje=["item"],Jje=["children","className","width","height","style","compact","title","desc"];function e_e(e){return(e_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t_e(){return t_e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t_e.apply(this,arguments)}function n_e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,a=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||u_e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r_e(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function a_e(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f_e(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function i_e(e,t,n){return t=o_e(t),function(e,t){if(t&&("object"===e_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s_e()?Reflect.construct(t,n||[],o_e(e).constructor):t.apply(e,n))}function s_e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(s_e=function(){return!!e})()}function o_e(e){return(o_e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l_e(e,t){return(l_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c_e(e){return function(e){if(Array.isArray(e))return d_e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u_e(e,t){if(e){if("string"==typeof e)return d_e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d_e(e,t):void 0}}function d_e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p_e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h_e(Object(n),!0).forEach(function(t){m_e(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h_e(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m_e(e,t,n){return(t=f_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f_e(e){var t=function(e,t){if("object"!=e_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=e_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e_e(t)?t:t+""}var g_e={xAxis:["bottom","top"],yAxis:["left","right"]},y_e={width:"100%",height:"100%"},v_e={x:0,y:0};function x_e(e){return e}var b_e=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,a=t.dataEndIndex,i=(null!=n?n:[]).reduce(function(e,t){var n=t.props.data;return n&&n.length?[].concat(c_e(e),c_e(n)):e},[]);return i.length>0?i:e&&e.length&&oee(r)&&oee(a)?e.slice(r,a+1):[]};function w_e(e){return"number"===e?[0,"auto"]:void 0}var k_e=function(e,t,n,r){var a=e.graphicalItems,i=e.tooltipAxis,s=b_e(t,e);return n<0||!a||!a.length||n>=s.length?null:a.reduce(function(a,o){var l,c,u=null!==(l=o.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),i.dataKey&&!i.allowDuplicatedCategory)?c=mee(void 0===u?s:u,i.dataKey,r):c=u&&u[n]||s[n];return c?[].concat(c_e(a),[Ige(o,c)]):a},[])},N_e=function(e,t,n,r){var a=r||{x:e.chartX,y:e.chartY},i=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,n),s=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=-1,s=null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0;if(s<=1)return 0;if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var o=a.range,l=0;l<s;l++){var c=l>0?r[l-1].coordinate:r[s-1].coordinate,u=r[l].coordinate,d=l>=s-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(iee(u-c)!==iee(d-u)){var p=[];if(iee(d-u)===iee(o[1]-o[0])){h=d;var m=u+o[1]-o[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var f=d+o[1]-o[0];p[0]=Math.min(u,(f+u)/2),p[1]=Math.max(u,(f+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){i=r[l].index;break}}else{var y=Math.min(c,d),v=Math.max(c,d);if(e>(y+u)/2&&e<=(v+u)/2){i=r[l].index;break}}}else for(var x=0;x<s;x++)if(0===x&&e<=(n[x].coordinate+n[x+1].coordinate)/2||x>0&&x<s-1&&e>(n[x].coordinate+n[x-1].coordinate)/2&&e<=(n[x].coordinate+n[x+1].coordinate)/2||x===s-1&&e>(n[x].coordinate+n[x-1].coordinate)/2){i=n[x].index;break}return i}(i,s,l,o);if(c>=0&&l){var u=l[c]&&l[c].value,d=k_e(e,t,c,u),h=function(e,t,n,r){var a=t.find(function(e){return e&&e.index===n});if(a){if("horizontal"===e)return{x:a.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:a.coordinate};if("centric"===e){var i=a.coordinate,s=r.radius;return p_e(p_e(p_e({},r),Uge(r.cx,r.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,l=r.angle;return p_e(p_e(p_e({},r),Uge(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return v_e}(n,s,c,a);return{activeTooltipIndex:c,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},j_e=function(e,t){var n=t.axes,r=t.graphicalItems,a=t.axisType,i=t.axisIdKey,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=e.stackOffset,h=vge(c,a);return n.reduce(function(t,n){var p,m=void 0!==n.type.defaultProps?p_e(p_e({},n.type.defaultProps),n.props):n.props,f=m.type,g=m.dataKey,y=m.allowDataOverflow,v=m.allowDuplicatedCategory,x=m.scale,b=m.ticks,w=m.includeHidden,k=m[i];if(t[k])return t;var N,j,_,S=b_e(e.data,{graphicalItems:r.filter(function(e){var t;return(i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i])===k}),dataStartIndex:o,dataEndIndex:l}),C=S.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null==e?void 0:e[0],a=null==e?void 0:e[1];if(r&&a&&oee(r)&&oee(a))return!0}return!1})(m.domain,y,f)&&(N=Age(m.domain,null,y),!h||"number"!==f&&"auto"===x||(_=mge(S,g,"category")));var P=w_e(f);if(!N||0===N.length){var E,R=null!==(E=m.domain)&&void 0!==E?E:P;if(g){if(N=mge(S,g,f),"category"===f&&h){var O=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(N);v&&O?(j=N,N=Abe(0,C)):v||(N=Dge(R,N,n).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(c_e(e),[t])},[]))}else if("category"===f)N=v?N.filter(function(e){return""!==e&&!E9(e)}):Dge(R,N,n).reduce(function(e,t){return e.indexOf(t)>=0||""===t||E9(t)?e:[].concat(c_e(e),[t])},[]);else if("number"===f){var T=function(e,t,n,r,a){var i=t.map(function(t){return gge(e,t,n,a,r)}).filter(function(e){return!E9(e)});return i&&i.length?i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(S,r.filter(function(e){var t,n,r=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],a="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===k&&(w||!a)}),g,a,c);T&&(N=T)}!h||"number"!==f&&"auto"===x||(_=mge(S,g,"category"))}else N=h?Abe(0,C):s&&s[k]&&s[k].hasStack&&"number"===f?"expand"===d?[0,1]:Oge(s[k].stackGroups,o,l):yge(S,r.filter(function(e){var t=i in e.props?e.props[i]:e.type.defaultProps[i],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===k&&(w||!n)}),f,c,!0);if("number"===f)N=Dje(u,N,k,a,b),R&&(N=Age(R,N,y));else if("category"===f&&R){var M=R;N.every(function(e){return M.indexOf(e)>=0})&&(N=M)}}return p_e(p_e({},t),{},m_e({},k,p_e(p_e({},m),{},{axisType:a,domain:N,categoricalDomain:_,duplicateDomain:j,originalDomain:null!==(p=m.domain)&&void 0!==p?p:P,isCategorical:h,layout:c})))},{})},__e=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,a=t.AxisComp,i=t.graphicalItems,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),d=Aee(c,a),h={};return d&&d.length?h=j_e(e,{axes:d,graphicalItems:i,axisType:r,axisIdKey:u,stackGroups:s,dataStartIndex:o,dataEndIndex:l}):i&&i.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,a=t.axisType,i=t.axisIdKey,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=b_e(e.data,{graphicalItems:n,dataStartIndex:o,dataEndIndex:l}),h=d.length,p=vge(c,a),m=-1;return n.reduce(function(e,t){var f,g=(void 0!==t.type.defaultProps?p_e(p_e({},t.type.defaultProps),t.props):t.props)[i],y=w_e("number");return e[g]?e:(m++,p?f=Abe(0,h):s&&s[g]&&s[g].hasStack?(f=Oge(s[g].stackGroups,o,l),f=Dje(u,f,g,a)):(f=Age(y,yge(d,n.filter(function(e){var t,n,r=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],a="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!a}),"number",c),r.defaultProps.allowDataOverflow),f=Dje(u,f,g,a)),p_e(p_e({},e),{},m_e({},g,p_e(p_e({axisType:a},r.defaultProps),{},{hide:!0,orientation:P9(g_e,"".concat(a,".").concat(m%2),null),domain:f,originalDomain:y,isCategorical:p,layout:c}))))},{})}(e,{Axis:a,graphicalItems:i,axisType:r,axisIdKey:u,stackGroups:s,dataStartIndex:o,dataEndIndex:l})),h},S_e=function(e){var t=e.children,n=e.defaultShowTooltip,r=Bee(t,Xbe),a=0,i=0;return e.data&&0!==e.data.length&&(i=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(a=r.props.startIndex),r.props.endIndex>=0&&(i=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},C_e=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},P_e=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),a=void 0===r?{}:r,i=e.yAxisMap,s=void 0===i?{}:i,o=n.width,l=n.height,c=n.children,u=n.margin||{},d=Bee(c,Xbe),h=Bee(c,qse),p=Object.keys(s).reduce(function(e,t){var n=s[t],r=n.orientation;return n.mirror||n.hide?e:p_e(p_e({},e),{},m_e({},r,e[r]+n.width))},{left:u.left||0,right:u.right||0}),m=Object.keys(a).reduce(function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:p_e(p_e({},e),{},m_e({},r,P9(e,"".concat(r))+n.height))},{top:u.top||0,bottom:u.bottom||0}),f=p_e(p_e({},m),p),g=f.bottom;d&&(f.bottom+=d.props.height||Xbe.defaultProps.height),h&&t&&(f=function(e,t,n,r){var a=n.children,i=n.width,s=n.margin,o=i-(s.left||0)-(s.right||0),l=sge({children:a,legendWidth:o});if(l){var c=r||{},u=c.width,d=c.height,h=l.align,p=l.verticalAlign,m=l.layout;if(("vertical"===m||"horizontal"===m&&"middle"===p)&&"center"!==h&&oee(e[h]))return dge(dge({},e),{},hge({},h,e[h]+(u||0)));if(("horizontal"===m||"vertical"===m&&"center"===h)&&"middle"!==p&&oee(e[p]))return dge(dge({},e),{},hge({},p,e[p]+(d||0)))}return e}(f,0,n,t));var y=o-f.left-f.right,v=l-f.top-f.bottom;return p_e(p_e({brushBottom:g},f),{},{width:Math.max(y,0),height:Math.max(v,0)})},E_e=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},R_e=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,a=void 0===r?"axis":r,i=e.validateTooltipEventTypes,s=void 0===i?["axis"]:i,o=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,u=e.defaultProps,d=function(e,t){var n=t.graphicalItems,r=t.stackGroups,a=t.offset,i=t.updateId,s=t.dataStartIndex,l=t.dataEndIndex,c=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,p=e.maxBarSize,m=C_e(u),f=m.numericAxisName,g=m.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some(function(e){var t=Ree(e&&e.type);return t&&t.indexOf("Bar")>=0})}(n),v=[];return n.forEach(function(n,m){var x=b_e(e.data,{graphicalItems:[n],dataStartIndex:s,dataEndIndex:l}),b=void 0!==n.type.defaultProps?p_e(p_e({},n.type.defaultProps),n.props):n.props,w=b.dataKey,k=b.maxBarSize,N=b["".concat(f,"Id")],j=b["".concat(g,"Id")],_=o.reduce(function(e,n){var r=t["".concat(n.axisType,"Map")],a=b["".concat(n.axisType,"Id")];r&&r[a]||"zAxis"===n.axisType||zfe();var i=r[a];return p_e(p_e({},e),{},m_e(m_e({},n.axisType,i),"".concat(n.axisType,"Ticks"),bge(i)))},{}),S=_[g],C=_["".concat(g,"Ticks")],P=r&&r[N]&&r[N].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?dge(dge({},e.type.defaultProps),e.props):e.props).stackId;if(lee(r)){var a=t[r];if(a){var i=a.items.indexOf(e);return i>=0?a.stackedData[i]:null}}return null}(n,r[N].stackGroups),E=Ree(n.type).indexOf("Bar")>=0,R=Bge(S,C),O=[],T=y&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,a=void 0===r?{}:r;if(!a)return{};for(var i={},s=Object.keys(a),o=0,l=s.length;o<l;o++)for(var c=a[s[o]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var p=c[u[d]],m=p.items,f=p.cateAxisId,g=m.filter(function(e){return Ree(e.type).indexOf("Bar")>=0});if(g&&g.length){var y=g[0].type.defaultProps,v=void 0!==y?dge(dge({},y),g[0].props):g[0].props,x=v.barSize,b=v[f];i[b]||(i[b]=[]);var w=E9(x)?t:x;i[b].push({item:g[0],stackList:g.slice(1),barSize:E9(w)?void 0:dee(w,n,0)})}}return i}({barSize:c,stackGroups:r,totalSize:E_e(_,g)});if(E){var M,A,B=E9(k)?p:k,D=null!==(M=null!==(A=Bge(S,C,!0))&&void 0!==A?A:B)&&void 0!==M?M:0;O=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,a=e.sizeList,i=void 0===a?[]:a,s=e.maxBarSize,o=i.length;if(o<1)return null;var l,c=dee(t,r,0,!0),u=[];if(i[0].barSize===+i[0].barSize){var d=!1,h=r/o,p=i.reduce(function(e,t){return e+t.barSize||0},0);(p+=(o-1)*c)>=r&&(p-=(o-1)*c,c=0),p>=r&&h>0&&(d=!0,p=o*(h*=.9));var m={offset:((r-p)/2|0)-c,size:0};l=i.reduce(function(e,t){var n={item:t.item,position:{offset:m.offset+m.size+c,size:d?h:t.barSize}},r=[].concat(lge(e),[n]);return m=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:m})}),r},u)}else{var f=dee(n,r,0,!0);r-2*f-(o-1)*c<=0&&(c=0);var g=(r-2*f-(o-1)*c)/o;g>1&&(g>>=0);var y=s===+s?Math.min(g,s):g;l=i.reduce(function(e,t,n){var r=[].concat(lge(e),[{item:t.item,position:{offset:f+(g+c)*n+(g-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:r[r.length-1].position})}),r},u)}return l}({barGap:d,barCategoryGap:h,bandSize:D!==R?D:R,sizeList:T[j],maxBarSize:B}),D!==R&&(O=O.map(function(e){return p_e(p_e({},e),{},{position:p_e(p_e({},e.position),{},{offset:e.position.offset-D/2})})}))}var I,L,F=n&&n.type&&n.type.getComposedData;F&&v.push({props:p_e(p_e({},F(p_e(p_e({},_),{},{displayedData:x,props:e,dataKey:w,item:n,bandSize:R,barPosition:O,offset:a,stackedData:P,layout:u,dataStartIndex:s,dataEndIndex:l}))),{},m_e(m_e(m_e({key:n.key||"item-".concat(m)},f,_[f]),g,_[g]),"animationId",i)),childIndex:(I=n,L=e.children,Mee(L).indexOf(I)),item:n})}),v},h=function(e,r){var a=e.props,i=e.dataStartIndex,s=e.dataEndIndex,l=e.updateId;if(!Dee({props:a}))return null;var u=a.children,h=a.layout,p=a.stackOffset,m=a.data,f=a.reverseStackOrder,g=C_e(h),y=g.numericAxisName,v=g.cateAxisName,x=Aee(u,n),b=function(e,t,n,r,a,i){if(!e)return null;var s=(i?t.reverse():t).reduce(function(e,t){var a,i=null!==(a=t.type)&&void 0!==a&&a.defaultProps?dge(dge({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(i.hide)return e;var o=i[n],l=e[o]||{hasStack:!1,stackGroups:{}};if(lee(s)){var c=l.stackGroups[s]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[s]=c}else l.stackGroups[uee("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return dge(dge({},e),{},hge({},o,l))},{});return Object.keys(s).reduce(function(t,i){var o=s[i];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,i){var s=o.stackGroups[i];return dge(dge({},t),{},hge({},i,{numericAxisId:n,cateAxisId:r,items:s.items,stackedData:Cge(e,s.items,a)}))},{})),dge(dge({},t),{},hge({},i,o))},{})}(m,x,"".concat(y,"Id"),"".concat(v,"Id"),p,f),w=o.reduce(function(e,t){var n="".concat(t.axisType,"Map");return p_e(p_e({},e),{},m_e({},n,__e(a,p_e(p_e({},t),{},{graphicalItems:x,stackGroups:t.axisType===y&&b,dataStartIndex:i,dataEndIndex:s}))))},{}),k=P_e(p_e(p_e({},w),{},{props:a,graphicalItems:x}),null==r?void 0:r.legendBBox);Object.keys(w).forEach(function(e){w[e]=c(a,w[e],k,e.replace("Map",""),t)});var N,j,_=w["".concat(v,"Map")],S=(N=hee(_),{tooltipTicks:j=bge(N,!1,!0),orderedTooltipTicks:Loe(j,function(e){return e.coordinate}),tooltipAxis:N,tooltipAxisBandSize:Bge(N,j)}),C=d(a,p_e(p_e({},w),{},{dataStartIndex:i,dataEndIndex:s,updateId:l,graphicalItems:x,stackGroups:b,offset:k}));return p_e(p_e({formattedGraphicalItems:C,graphicalItems:x,offset:k,stackGroups:b},S),w)},p=function(){function e(n){var r,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m_e(i=i_e(this,e,[n]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),m_e(i,"accessibilityManager",new Wje),m_e(i,"handleLegendBBoxUpdate",function(e){if(e){var t=i.state,n=t.dataStartIndex,r=t.dataEndIndex,a=t.updateId;i.setState(p_e({legendBBox:e},h({props:i.props,dataStartIndex:n,dataEndIndex:r,updateId:a},p_e(p_e({},i.state),{},{legendBBox:e}))))}}),m_e(i,"handleReceiveSyncEvent",function(e,t,n){if(i.props.syncId===e){if(n===i.eventEmitterSymbol&&"function"!=typeof i.props.syncMethod)return;i.applySyncEvent(t)}}),m_e(i,"handleBrushChange",function(e){var t=e.startIndex,n=e.endIndex;if(t!==i.state.dataStartIndex||n!==i.state.dataEndIndex){var r=i.state.updateId;i.setState(function(){return p_e({dataStartIndex:t,dataEndIndex:n},h({props:i.props,dataStartIndex:t,dataEndIndex:n,updateId:r},i.state))}),i.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}}),m_e(i,"handleMouseEnter",function(e){var t=i.getMouseInfo(e);if(t){var n=p_e(p_e({},t),{},{isTooltipActive:!0});i.setState(n),i.triggerSyncEvent(n);var r=i.props.onMouseEnter;I8(r)&&r(n,e)}}),m_e(i,"triggeredAfterMouseMove",function(e){var t=i.getMouseInfo(e),n=t?p_e(p_e({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};i.setState(n),i.triggerSyncEvent(n);var r=i.props.onMouseMove;I8(r)&&r(n,e)}),m_e(i,"handleItemMouseEnter",function(e){i.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),m_e(i,"handleItemMouseLeave",function(){i.setState(function(){return{isTooltipActive:!1}})}),m_e(i,"handleMouseMove",function(e){e.persist(),i.throttleTriggeredAfterMouseMove(e)}),m_e(i,"handleMouseLeave",function(e){i.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};i.setState(t),i.triggerSyncEvent(t);var n=i.props.onMouseLeave;I8(n)&&n(t,e)}),m_e(i,"handleOuterEvent",function(e){var t,n=function(e){var t=e&&e.type;return t&&Eee[t]?Eee[t]:null}(e),r=P9(i.props,"".concat(n));n&&I8(r)&&r(null!==(t=/.*touch.*/i.test(n)?i.getMouseInfo(e.changedTouches[0]):i.getMouseInfo(e))&&void 0!==t?t:{},e)}),m_e(i,"handleClick",function(e){var t=i.getMouseInfo(e);if(t){var n=p_e(p_e({},t),{},{isTooltipActive:!0});i.setState(n),i.triggerSyncEvent(n);var r=i.props.onClick;I8(r)&&r(n,e)}}),m_e(i,"handleMouseDown",function(e){var t=i.props.onMouseDown;I8(t)&&t(i.getMouseInfo(e),e)}),m_e(i,"handleMouseUp",function(e){var t=i.props.onMouseUp;I8(t)&&t(i.getMouseInfo(e),e)}),m_e(i,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),m_e(i,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseDown(e.changedTouches[0])}),m_e(i,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseUp(e.changedTouches[0])}),m_e(i,"handleDoubleClick",function(e){var t=i.props.onDoubleClick;I8(t)&&t(i.getMouseInfo(e),e)}),m_e(i,"handleContextMenu",function(e){var t=i.props.onContextMenu;I8(t)&&t(i.getMouseInfo(e),e)}),m_e(i,"triggerSyncEvent",function(e){void 0!==i.props.syncId&&Lje.emit(Fje,i.props.syncId,e,i.eventEmitterSymbol)}),m_e(i,"applySyncEvent",function(e){var t=i.props,n=t.layout,r=t.syncMethod,a=i.state.updateId,s=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)i.setState(p_e({dataStartIndex:s,dataEndIndex:o},h({props:i.props,dataStartIndex:s,dataEndIndex:o,updateId:a},i.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,d=i.state,p=d.offset,m=d.tooltipTicks;if(!p)return;if("function"==typeof r)u=r(m,e);else if("value"===r){u=-1;for(var f=0;f<m.length;f++)if(m[f].value===e.activeLabel){u=f;break}}var g=p_e(p_e({},p),{},{x:p.left,y:p.top}),y=Math.min(l,g.x+g.width),v=Math.min(c,g.y+g.height),x=m[u]&&m[u].value,b=k_e(i.state,i.props.data,u),w=m[u]?{x:"horizontal"===n?m[u].coordinate:y,y:"horizontal"===n?v:m[u].coordinate}:v_e;i.setState(p_e(p_e({},e),{},{activeLabel:x,activeCoordinate:w,activePayload:b,activeTooltipIndex:u}))}else i.setState(e)}),m_e(i,"renderCursor",function(e){var n,r=i.state,a=r.isTooltipActive,s=r.activeCoordinate,o=r.activePayload,l=r.offset,c=r.activeTooltipIndex,u=r.tooltipAxisBandSize,d=i.getTooltipEventType(),h=null!==(n=e.props.active)&&void 0!==n?n:a,p=i.props.layout,m=e.key||"_recharts-cursor";return ut.createElement(Zje,{key:m,activeCoordinate:s,activePayload:o,activeTooltipIndex:c,chartName:t,element:e,isActive:h,layout:p,offset:l,tooltipAxisBandSize:u,tooltipEventType:d})}),m_e(i,"renderPolarAxis",function(e,t,n){var r=P9(e,"type.axisType"),a=P9(i.state,"".concat(r,"Map")),s=e.type.defaultProps,o=void 0!==s?p_e(p_e({},s),e.props):e.props,l=a&&a[o["".concat(r,"Id")]];return ct.cloneElement(e,p_e(p_e({},l),{},{className:dm(r,l.className),key:e.key||"".concat(t,"-").concat(n),ticks:bge(l,!0)}))}),m_e(i,"renderPolarGrid",function(e){var t=e.props,n=t.radialLines,r=t.polarAngles,a=t.polarRadius,s=i.state,o=s.radiusAxisMap,l=s.angleAxisMap,c=hee(o),u=hee(l),d=u.cx,h=u.cy,p=u.innerRadius,m=u.outerRadius;return ct.cloneElement(e,{polarAngles:Array.isArray(r)?r:bge(u,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(a)?a:bge(c,!0).map(function(e){return e.coordinate}),cx:d,cy:h,innerRadius:p,outerRadius:m,key:e.key||"polar-grid",radialLines:n})}),m_e(i,"renderLegend",function(){var e=i.state.formattedGraphicalItems,t=i.props,n=t.children,r=t.width,a=t.height,s=i.props.margin||{},o=r-(s.left||0)-(s.right||0),c=sge({children:n,formattedGraphicalItems:e,legendWidth:o,legendContent:l});if(!c)return null;var u=c.item,d=r_e(c,Xje);return ct.cloneElement(u,p_e(p_e({},d),{},{chartWidth:r,chartHeight:a,margin:s,onBBoxUpdate:i.handleLegendBBoxUpdate}))}),m_e(i,"renderTooltip",function(){var e,t=i.props,n=t.children,r=t.accessibilityLayer,a=Bee(n,Nle);if(!a)return null;var s=i.state,o=s.isTooltipActive,l=s.activeCoordinate,c=s.activePayload,u=s.activeLabel,d=s.offset,h=null!==(e=a.props.active)&&void 0!==e?e:o;return ct.cloneElement(a,{viewBox:p_e(p_e({},d),{},{x:d.left,y:d.top}),active:h,label:u,payload:h?c:[],coordinate:l,accessibilityLayer:r})}),m_e(i,"renderBrush",function(e){var t=i.props,n=t.margin,r=t.data,a=i.state,s=a.offset,o=a.dataStartIndex,l=a.dataEndIndex,c=a.updateId;return ct.cloneElement(e,{key:e.key||"_recharts-brush",onChange:kge(i.handleBrushChange,e.props.onChange),data:r,x:oee(e.props.x)?e.props.x:s.left,y:oee(e.props.y)?e.props.y:s.top+s.height+s.brushBottom-(n.bottom||0),width:oee(e.props.width)?e.props.width:s.width,startIndex:o,endIndex:l,updateId:"brush-".concat(c)})}),m_e(i,"renderReferenceElement",function(e,t,n){if(!e)return null;var r=i.clipPathId,a=i.state,s=a.xAxisMap,o=a.yAxisMap,l=a.offset,c=e.type.defaultProps||{},u=e.props,d=u.xAxisId,h=void 0===d?c.xAxisId:d,p=u.yAxisId,m=void 0===p?c.yAxisId:p;return ct.cloneElement(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:s[h],yAxis:o[m],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:r})}),m_e(i,"renderActivePoints",function(t){var n=t.item,r=t.activePoint,a=t.basePoint,i=t.childIndex,s=t.isRange,o=[],l=n.props.key,c=void 0!==n.item.type.defaultProps?p_e(p_e({},n.item.type.defaultProps),n.item.props):n.item.props,u=c.activeDot,d=p_e(p_e({index:i,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:fge(n.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},Fee(u,!1)),Nee(u));return o.push(e.renderActiveDot(u,d,"".concat(l,"-activePoint-").concat(i))),a?o.push(e.renderActiveDot(u,p_e(p_e({},d),{},{cx:a.x,cy:a.y}),"".concat(l,"-basePoint-").concat(i))):s&&o.push(null),o}),m_e(i,"renderGraphicChild",function(e,t,n){var r=i.filterFormatItem(e,t,n);if(!r)return null;var a=i.getTooltipEventType(),s=i.state,o=s.isTooltipActive,l=s.tooltipAxis,c=s.activeTooltipIndex,u=s.activeLabel,d=Bee(i.props.children,Nle),h=r.props,p=h.points,m=h.isRange,f=h.baseLine,g=void 0!==r.item.type.defaultProps?p_e(p_e({},r.item.type.defaultProps),r.item.props):r.item.props,y=g.activeDot,v=g.hide,x=g.activeBar,b=g.activeShape,w=Boolean(!v&&o&&d&&(y||x||b)),k={};"axis"!==a&&d&&"click"===d.props.trigger?k={onClick:kge(i.handleItemMouseEnter,e.props.onClick)}:"axis"!==a&&(k={onMouseLeave:kge(i.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:kge(i.handleItemMouseEnter,e.props.onMouseEnter)});var N=ct.cloneElement(e,p_e(p_e({},r.props),k));if(w){if(!(c>=0)){var j,_=(null!==(j=i.getItemByXY(i.state.activeCoordinate))&&void 0!==j?j:{graphicalItem:N}).graphicalItem,S=_.item,C=void 0===S?e:S,P=_.childIndex,E=p_e(p_e(p_e({},r.props),k),{},{activeIndex:P});return[ct.cloneElement(C,E),null,null]}var R,O;if(l.dataKey&&!l.allowDuplicatedCategory){var T="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());R=mee(p,T,u),O=m&&f&&mee(f,T,u)}else R=null==p?void 0:p[c],O=m&&f&&f[c];if(b||x){var M=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[ct.cloneElement(e,p_e(p_e(p_e({},r.props),k),{},{activeIndex:M})),null,null]}if(!E9(R))return[N].concat(c_e(i.renderActivePoints({item:r,activePoint:R,basePoint:O,childIndex:c,isRange:m})))}return m?[N,null,null]:[N,null]}),m_e(i,"renderCustomized",function(e,t,n){return ct.cloneElement(e,p_e(p_e({key:"recharts-customized-".concat(n)},i.props),i.state))}),m_e(i,"renderMap",{CartesianGrid:{handler:x_e,once:!0},ReferenceArea:{handler:i.renderReferenceElement},ReferenceLine:{handler:x_e},ReferenceDot:{handler:i.renderReferenceElement},XAxis:{handler:x_e},YAxis:{handler:x_e},Brush:{handler:i.renderBrush,once:!0},Bar:{handler:i.renderGraphicChild},Line:{handler:i.renderGraphicChild},Area:{handler:i.renderGraphicChild},Radar:{handler:i.renderGraphicChild},RadialBar:{handler:i.renderGraphicChild},Scatter:{handler:i.renderGraphicChild},Pie:{handler:i.renderGraphicChild},Funnel:{handler:i.renderGraphicChild},Tooltip:{handler:i.renderCursor,once:!0},PolarGrid:{handler:i.renderPolarGrid,once:!0},PolarAngleAxis:{handler:i.renderPolarAxis},PolarRadiusAxis:{handler:i.renderPolarAxis},Customized:{handler:i.renderCustomized}}),i.clipPathId="".concat(null!==(r=n.id)&&void 0!==r?r:uee("recharts"),"-clip"),i.throttleTriggeredAfterMouseMove=Qle(i.triggeredAfterMouseMove,null!==(a=n.throttleDelay)&&void 0!==a?a:1e3/60),i.state={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l_e(e,t)}(e,ct.Component),a_e(e,[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,a=e.layout,i=Bee(t,Nle);if(i){var s=i.props.defaultIndex;if(!("number"!=typeof s||s<0||s>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[s]&&this.state.tooltipTicks[s].value,l=k_e(this.state,n,s,o),c=this.state.tooltipTicks[s].coordinate,u=(this.state.offset.top+r)/2,d="horizontal"===a?{x:c,y:u}:{y:c,x:u},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(d=p_e(p_e({},d),h.props.points[s].tooltipPosition),l=h.props.points[s].tooltipPayload);var p={activeTooltipIndex:s,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:d};this.setState(p),this.renderCursor(i),this.accessibilityManager.setIndex(s)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;var n,r;(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin)&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}});return null}},{key:"componentDidUpdate",value:function(e){$ee([Bee(e.children,Nle)],[Bee(this.props.children,Nle)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=Bee(this.props.children,Nle);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return s.indexOf(t)>=0?t:a}return a}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),a={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},i={chartX:Math.round(e.pageX-a.left),chartY:Math.round(e.pageY-a.top)},s=r.width/n.offsetWidth||1,o=this.inRange(i.chartX,i.chartY,s);if(!o)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap,d=this.getTooltipEventType(),h=N_e(this.state,this.props.data,this.props.layout,o);if("axis"!==d&&c&&u){var p=hee(c).scale,m=hee(u).scale,f=p&&p.invert?p.invert(i.chartX):null,g=m&&m.invert?m.invert(i.chartY):null;return p_e(p_e({},i),{},{xValue:f,yValue:g},h)}return h?p_e(p_e({},i),h):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,a=e/n,i=t/n;if("horizontal"===r||"vertical"===r){var s=this.state.offset;return a>=s.left&&a<=s.left+s.width&&i>=s.top&&i<=s.top+s.height?{x:a,y:i}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var u=hee(l);return Zge({x:a,y:i},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=Bee(e,Nle),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),p_e(p_e({},Nee(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){Lje.on(Fje,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Lje.removeListener(Fje,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,a=0,i=r.length;a<i;a++){var s=r[a];if(s.item===e||s.props.key===e.key||t===Ree(s.item.type)&&n===s.childIndex)return s}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,a=t.height,i=t.width;return ut.createElement("defs",null,ut.createElement("clipPath",{id:e},ut.createElement("rect",{x:n,y:r,height:a,width:i})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=n_e(t,2),r=n[0],a=n[1];return p_e(p_e({},e),{},m_e({},r,a.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=n_e(t,2),r=n[0],a=n[1];return p_e(p_e({},e),{},m_e({},r,a.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var a=0,i=n.length;a<i;a++){var s=n[a],o=s.props,l=s.item,c=void 0!==l.type.defaultProps?p_e(p_e({},l.type.defaultProps),l.props):l.props,u=Ree(l.type);if("Bar"===u){var d=(o.data||[]).find(function(t){return Pxe(e,t)});if(d)return{graphicalItem:s,payload:d}}else if("RadialBar"===u){var h=(o.data||[]).find(function(t){return Zge(e,t)});if(h)return{graphicalItem:s,payload:h}}else if(xbe(s,r)||bbe(s,r)||wbe(s,r)){var p=_be({graphicalItem:s,activeTooltipItem:r,itemData:c.data}),m=void 0===c.activeIndex?p:c.activeIndex;return{graphicalItem:p_e(p_e({},s),{},{childIndex:m}),payload:wbe(s,r)?c.data[p]:s.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!Dee(this))return null;var t,n,r=this.props,a=r.children,i=r.className,s=r.width,o=r.height,l=r.style,c=r.compact,u=r.title,d=r.desc,h=r_e(r,Jje),p=Fee(h,!1);if(c)return ut.createElement(vke,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ut.createElement(Uee,t_e({},p,{width:s,height:o,title:u,desc:d}),this.renderClipPath(),qee(a,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,p.role=null!==(n=this.props.role)&&void 0!==n?n:"application",p.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},p.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return ut.createElement(vke,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ut.createElement("div",t_e({className:dm("recharts-wrapper",i),style:p_e({position:"relative",cursor:"default",width:s,height:o},l)},m,{ref:function(t){e.container=t}}),ut.createElement(Uee,t_e({},p,{width:s,height:o,title:u,desc:d,style:y_e}),this.renderClipPath(),qee(a,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}();m_e(p,"displayName",t),m_e(p,"defaultProps",p_e({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),m_e(p,"getDerivedStateFromProps",function(e,t){var n=e.dataKey,r=e.data,a=e.children,i=e.width,s=e.height,o=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var p=S_e(e);return p_e(p_e(p_e({},p),{},{updateId:0},h(p_e(p_e({props:e},p),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:i,prevHeight:s,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(n!==t.prevDataKey||r!==t.prevData||i!==t.prevWidth||s!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!yee(c,t.prevMargin)){var m=S_e(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=p_e(p_e({},N_e(t,r,o)),{},{updateId:t.updateId+1}),y=p_e(p_e(p_e({},m),f),g);return p_e(p_e(p_e({},y),h(p_e({props:e},y),t)),{},{prevDataKey:n,prevData:r,prevWidth:i,prevHeight:s,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(!$ee(a,t.prevChildren)){var v,x,b,w,k=Bee(a,Xbe),N=k&&null!==(v=null===(x=k.props)||void 0===x?void 0:x.startIndex)&&void 0!==v?v:u,j=k&&null!==(b=null===(w=k.props)||void 0===w?void 0:w.endIndex)&&void 0!==b?b:d,_=N!==u||j!==d,S=!E9(r)&&!_?t.updateId:t.updateId+1;return p_e(p_e({updateId:S},h(p_e(p_e({props:e},t),{},{updateId:S,dataStartIndex:N,dataEndIndex:j}),t)),{},{prevChildren:a,dataStartIndex:N,dataEndIndex:j})}return null}),m_e(p,"renderActiveDot",function(e,t,n){var r;return r=ct.isValidElement(e)?ct.cloneElement(e,t):I8(e)?e(t):ut.createElement(Txe,t),ut.createElement(Yee,{className:"recharts-active-dot",key:n},r)});var m=ct.forwardRef(function(e,t){return ut.createElement(p,t_e({},e,{ref:t}))});return m.displayName=p.displayName,m},O_e=R_e({chartName:"AreaChart",GraphicalChild:dje,axisComponents:[{axisType:"xAxis",AxisComp:kje},{axisType:"yAxis",AxisComp:Mje}],formatAxisMap:Ywe});const T_e=({history:e,mintPrice:t,className:n=""})=>{var r,a,i;const s=ct.useMemo(()=>e.map(e=>({date:rH(new Date(e.snapshot_date),"MMM d"),fullDate:e.snapshot_date,floor:e.floor_price_cents/100,mint:t/100,print:(e.print_revenue_cents||0)/100,game:(e.gamecard_share_cents||0)/100,palette:(e.palette_share_cents||0)/100,opening:(e.opening_share_cents||0)/100,engagement:(e.engagement_cents||0)/100,trading:(e.trading_premium_cents||0)/100})),[e,t]),o=(null==(r=e[e.length-1])?void 0:r.floor_price_cents)||t,l=o-t,c=t>0?l/t*100:0;return e.length<2?xt.jsxs("div",{className:`p-4 text-center text-muted-foreground ${n}`,children:[xt.jsx(Ng,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),xt.jsx("p",{children:"Not enough data yet. Check back tomorrow!"}),xt.jsxs("p",{className:"text-sm",children:["Current floor: $",(o/100).toFixed(2)]})]}):xt.jsxs("div",{className:`space-y-4 ${n}`,children:[xt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[xt.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Appreciation"}),xt.jsxs("div",{className:"text-lg font-bold "+(l>=0?"text-green-500":"text-red-500"),children:[l>=0?"+":"",(l/100).toFixed(2)," (",c.toFixed(1),"%)"]})]}),xt.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[xt.jsx("div",{className:"text-xs text-muted-foreground",children:"Value Sources"}),xt.jsxs("div",{className:"text-sm",children:[(null==(a=e[0])?void 0:a.game_hype_score)&&`Game Hype: ${e[0].game_hype_score}/100`,(null==(i=e[0])?void 0:i.palette_scarcity)&&xt.jsxs("span",{className:"ml-2",children:["Scarcity: ",e[0].palette_scarcity]})]})]})]}),xt.jsx("div",{className:"h-64",children:xt.jsx(Xle,{width:"100%",height:"100%",children:xt.jsxs(O_e,{data:s,margin:{top:10,right:10,left:0,bottom:0},children:[xt.jsx("defs",{children:xt.jsxs("linearGradient",{id:"colorFloor",x1:"0",y1:"0",x2:"0",y2:"1",children:[xt.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),xt.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),xt.jsx(GNe,{strokeDasharray:"3 3",stroke:"hsl(var(--muted))"}),xt.jsx(kje,{dataKey:"date",tick:{fontSize:12},stroke:"hsl(var(--muted-foreground))"}),xt.jsx(Mje,{tick:{fontSize:12},stroke:"hsl(var(--muted-foreground))",tickFormatter:e=>`$${e}`}),xt.jsx(Nle,{content:({active:e,payload:t,label:n})=>{if(!e||!t||!t.length)return null;const r=t[0].payload;return xt.jsxs("div",{className:"bg-popover p-3 rounded-lg border shadow-lg",children:[xt.jsx("p",{className:"font-medium mb-2",children:r.fullDate}),xt.jsxs("div",{className:"space-y-1 text-sm",children:[xt.jsxs("p",{className:"text-primary font-semibold",children:["Floor: $",r.floor.toFixed(2)]}),r.print>0&&xt.jsxs("p",{className:"text-muted-foreground",children:["Prints: +$",r.print.toFixed(2)]}),r.game>0&&xt.jsxs("p",{className:"text-muted-foreground",children:["Game: +$",r.game.toFixed(2)]}),r.palette>0&&xt.jsxs("p",{className:"text-muted-foreground",children:["Palette: +$",r.palette.toFixed(2)]}),r.opening>0&&xt.jsxs("p",{className:"text-muted-foreground",children:["Opening: +$",r.opening.toFixed(2)]})]})]})}}),xt.jsx(Ike,{y:t/100,stroke:"hsl(var(--muted-foreground))",strokeDasharray:"3 3",label:{value:"Mint",position:"insideBottomLeft",fontSize:10}}),xt.jsx(dje,{type:"monotone",dataKey:"floor",stroke:"hsl(var(--primary))",strokeWidth:2,fillOpacity:1,fill:"url(#colorFloor)"})]})})}),xt.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),xt.jsx("span",{children:"Floor Price"})]}),xt.jsxs("div",{className:"flex items-center gap-1",children:[xt.jsx("div",{className:"w-3 h-0.5 bg-muted-foreground"}),xt.jsx("span",{children:"Mint Price"})]})]})]})};function M_e({visualizationId:e,visionNftId:t,enabled:n=!0}){const[r,a]=ct.useState(null),[i,s]=ct.useState([]),[o,l]=ct.useState(!0),[c,u]=ct.useState(null),d=ct.useCallback(async()=>{if(n)if(e||t){l(!0),u(null);try{let n=null;if(t){const{data:e,error:r}=await async function(e){try{const{data:t,error:n}=await KC.from("vision_nfts").select("*").eq("id",e).single();if(n)throw n;return{data:t,error:null}}catch(c){return{data:null,error:c}}}(t);if(r)throw r;n=e}else if(e){const{data:t,error:r}=await async function(e){try{const{data:t,error:n}=await KC.from("vision_nfts").select("*").eq("visualization_id",e).single();if(n)throw n;return{data:t,error:null}}catch(c){return{data:null,error:c}}}(e);if(r)throw r;n=t}if(a(n),n){const{data:e,error:t}=await async function(e,t=30){try{const{data:n,error:r}=await KC.from("vision_value_history").select("*").eq("vision_nft_id",e).gte("snapshot_date",new Date(Date.now()-24*t*60*60*1e3).toISOString().split("T")[0]).order("snapshot_date",{ascending:!0});if(r)throw r;return{data:n||[],error:null}}catch(c){return{data:[],error:c}}}(n.id,90);if(t)throw t;s(e||[])}}catch(BPe){u(BPe instanceof Error?BPe:new Error(String(BPe)))}finally{l(!1)}}else l(!1)},[e,t,n]);return ct.useEffect(()=>{d()},[d]),ct.useEffect(()=>{if(!n||!(null==r?void 0:r.id))return;const e=KC.channel(`vision-nft-${r.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"vision_nfts",filter:`id=eq.${r.id}`},e=>{a(e.new)}).subscribe();return()=>{KC.removeChannel(e)}},[null==r?void 0:r.id,n]),{visionNFT:r,history:i,isLoading:o,error:c,refetch:d}}const A_e=()=>{const{gameHash:e}=tN(),[t]=QN(),n=eN(),{user:r,isPremium:a,isCheckingSubscription:i}=lP(),{setCurrentSimulation:s,setSavedShareId:o,setCapturedTimelineState:l,setReturningFromOrder:c,returningFromOrder:u,capturedTimelineState:d,currentSimulation:h,currentPgn:p,currentGameTitle:m,clearSimulation:f}=W6(),{setOrderData:g}=A5(),{saveActiveVision:y,clearActiveVision:v}=RD(),x=B$(),[b,w]=ct.useState(!0),[k,N]=ct.useState(null),[j,_]=ct.useState(null),[S,C]=ct.useState([]),[P,E]=ct.useState("modern"),[R,O]=ct.useState(null),[T,M]=ct.useState(!1),[A,B]=ct.useState(!1),[D,I]=ct.useState(!1),[L,F]=ct.useState(null),[$,z]=ct.useState(null),[q,V]=ct.useState(0);ct.useRef(!1);const{visionNFT:W,history:Q}=M_e({visualizationId:(null==j?void 0:j.id)||void 0,enabled:!!(null==j?void 0:j.id)}),U=ct.useMemo(()=>({paletteId:t.get("p")||void 0,move:t.has("m")?parseInt(t.get("m")):void 0,dark:"1"===t.get("d"),pieces:"1"===t.get("sp"),opacity:t.has("o")?parseFloat(t.get("o")):void 0}),[t]),K=ct.useMemo(()=>({source:t.get("src"),listingId:t.get("listing")}),[t]),H=ct.useMemo(()=>{switch(K.source){case"gallery":return{href:"/my-vision",label:"Return to Gallery"};case"marketplace":return{href:"/marketplace",label:"Return to Marketplace"};default:return{href:"/",label:"Back to En Pensent"}}},[K.source]),{downloadTrademarkHD:G,downloadGIF:Y}=e8({isPremium:a,visualizationId:null==j?void 0:j.id,onUnauthorized:()=>M(!0),onUpgradeRequired:()=>B(!0)});ct.useEffect(()=>{u&&d&&(Yy.success(`${d.title||"Visualization"} restored!`,{description:d.currentMove?`Move ${d.currentMove} of ${d.totalMoves}`:"Your visualization is ready",icon:xt.jsx(gg,{className:"w-4 h-4"})}),c(!1),l(null))},[u,d,c,l]),ct.useEffect(()=>{let n=0;const a=async()=>{if(!e)return N("Invalid game link"),void w(!1);const r="generator"===t.get("src");if(h&&p){if(YX(p)===e){I(!0),F(h.board),z(h.gameData),V(h.totalMoves);const e=U.paletteId||"modern";return E(e),"custom"!==e&&AF(e),r&&Yy.success("Visualization generated!",{description:`${h.totalMoves} moves processed.`}),void w(!1)}}else if(r&&n<8)return n++,void setTimeout(()=>{const t=W6.getState();if(t.currentSimulation&&t.currentPgn){if(YX(t.currentPgn)===e){I(!0),F(t.currentSimulation.board),z(t.currentSimulation.gameData),V(t.currentSimulation.totalMoves);const e=U.paletteId||"modern";return E(e),"custom"!==e&&AF(e),Yy.success("Visualization generated!",{description:`${t.currentSimulation.totalMoves} moves processed.`}),void w(!1)}}n>=8?i():a()},100);i()},i=async()=>{var t,n,a,i,s,o,l,c,u,d,h,p,m,f;try{const{data:y,error:v}=await KC.from("saved_visualizations").select("*").order("created_at",{ascending:!0});if(v)throw v;const x=[];for(const r of y||[]){const c=r.pgn||(null==(t=r.game_data)?void 0:t.pgn)||"";if(YX(c)===e||"empty"===e&&!c){const e=r.game_data;x.push({id:r.id,title:r.title,pgn:r.pgn||(null==e?void 0:e.pgn)||null,image_path:r.image_path,public_share_id:r.public_share_id,user_id:r.user_id,created_at:r.created_at,game_data:{white:(null==e?void 0:e.white)||(null==(n=null==e?void 0:e.gameData)?void 0:n.white),black:(null==e?void 0:e.black)||(null==(a=null==e?void 0:e.gameData)?void 0:a.black),event:(null==e?void 0:e.event)||(null==(i=null==e?void 0:e.gameData)?void 0:i.event),date:(null==e?void 0:e.date)||(null==(s=null==e?void 0:e.gameData)?void 0:s.date),result:(null==e?void 0:e.result)||(null==(o=null==e?void 0:e.gameData)?void 0:o.result),moves:(null==e?void 0:e.moves)||(null==(l=null==e?void 0:e.gameData)?void 0:l.moves),totalMoves:null==e?void 0:e.totalMoves,board:null==e?void 0:e.board,pgn:null==e?void 0:e.pgn,visualizationState:(null==e?void 0:e.visualizationState)||{paletteId:null==e?void 0:e.paletteId}}})}}if(0===x.length)return N("Game not found"),void w(!1);const b=x[0];_(b);const k=x.map(e=>{var t,n;return{id:e.id,paletteId:(null==(n=null==(t=e.game_data)?void 0:t.visualizationState)?void 0:n.paletteId)||"modern",ownerId:e.user_id||null,ownerName:null,isListed:!1}});C(k);const j=U.paletteId,S=(null==(u=null==(c=b.game_data)?void 0:c.visualizationState)?void 0:u.paletteId)||"modern";if(j){k.some(e=>e.paletteId===j)?(E(j),"custom"!==j&&AF(j)):(E(S),"custom"!==S&&AF(S))}else E(S),"custom"!==S&&AF(S);if(b.id&&(HU(b.id,"view").catch(console.error),GU(b.id).then(e=>{e&&O(e)}).catch(console.error),r8.getState().addRecentlyViewed({id:b.id,gameHash:e,imagePath:b.image_path,title:b.title})),r&&P){const t=k.find(e=>e.paletteId===P&&e.ownerId===r.id);t&&g({visualizationId:t.id,title:b.title,gameHash:e,gameData:{white:(null==(d=b.game_data)?void 0:d.white)||"Unknown",black:(null==(h=b.game_data)?void 0:h.black)||"Unknown",event:null==(p=b.game_data)?void 0:p.event,date:null==(m=b.game_data)?void 0:m.date,result:null==(f=b.game_data)?void 0:f.result}})}}catch(BPe){N("Failed to load game")}finally{w(!1)}};a()},[e,U.paletteId,h,p,t,r,P,g]);const{board:Z,gameData:X,totalMoves:J,effectivePgn:ee}=ct.useMemo(()=>{var e;if(D&&L&&$)return{board:L,gameData:$,totalMoves:q,effectivePgn:p||$.pgn||""};if(!j)return{board:[],gameData:{},totalMoves:0,effectivePgn:""};const t=j.game_data,n=j.pgn||t.pgn||"";let r=t.board||[];if(0===r.length&&n)try{r=j$(n).board}catch(APe){}0===r.length&&(r=Array(8).fill(null).map((e,t)=>Array(8).fill(null).map((e,n)=>({file:n,rank:t,visits:[],isLight:(n+t)%2==1}))));return{board:r,gameData:{white:t.white||"White",black:t.black||"Black",event:t.event||"",date:t.date||"",result:t.result||"",pgn:n,moves:t.moves||[]},totalMoves:t.totalMoves||(null==(e=t.moves)?void 0:e.length)||0,effectivePgn:n}},[j,D,L,$,q,p]);ct.useEffect(()=>{if(!e||b||!j)return;y({route:`/g/${e}${P?`?p=${P}`:""}`,gameHash:e,paletteId:P,pgn:ee,gameTitle:(null==j?void 0:j.title)||"",currentMove:x.currentMove,selectedPhase:x.selectedPhase,lockedPieces:x.lockedPieces,compareMode:x.compareMode,darkMode:x.darkMode,showPieces:x.showPieces,pieceOpacity:x.pieceOpacity})},[e,P,b,j,ee,x.currentMove,x.selectedPhase,x.lockedPieces,x.compareMode,x.darkMode,x.showPieces,x.pieceOpacity,y]);const te=ct.useCallback(async()=>{if(!r)return M(!0),null;if(!a)return B(!0),null;if(!Z||!X||!ee)return Yy.error("No visualization to save"),null;try{const{checkDuplicateVisualization:e,saveVisualization:t}=await Mh(async()=>{const{checkDuplicateVisualization:e,saveVisualization:t}=await import("./visualizationStorage-CNvw0MDn.js");return{checkDuplicateVisualization:e,saveVisualization:t}},__vite__mapDeps([2,3,4])),{getActivePalette:n}=await Mh(async()=>{const{getActivePalette:e}=await Promise.resolve().then(()=>QF);return{getActivePalette:e}},void 0),a={paletteId:n().id,darkMode:!1},i={board:Z,gameData:X,totalMoves:J},s=await e(r.id,ee,X,a);if(s.isDuplicate)return s.ownedByCurrentUser?Yy.info("Already in your gallery",{description:"This visualization is already saved to your collection."}):Yy.error("This vision is already owned",{description:`Owned by ${s.ownerDisplayName||"another collector"}. Try a different palette!`}),null;if(s.isTooSimilar)return Yy.error("Too similar to an existing vision",{description:`${Math.round(s.colorSimilarity||30)}% similar to a vision by ${s.ownerDisplayName||"another collector"}. Change at least 8 colors.`}),null;const{generateCleanPrintImage:o}=await Mh(async()=>{const{generateCleanPrintImage:e}=await import("./printImageGenerator-yhMAt_WZ.js");return{generateCleanPrintImage:e}},__vite__mapDeps([0,1])),l=await o(i,{darkMode:!1}),c=await fetch(l),u=await c.blob(),d=D?m||`${(null==$?void 0:$.white)||"White"} vs ${(null==$?void 0:$.black)||"Black"}`:(null==j?void 0:j.title)||`${X.white} vs ${X.black}`,h=await t(r.id,d,i,u,ee,a);return h.error?(Yy.error("Save failed",{description:h.error.message}),null):h.data?(Yy.success("Saved to your gallery!",{description:"You now own this unique visualization."}),h.data.id):null}catch(e){return Yy.error("Save failed",{description:"Please try again."}),null}},[r,a,Z,X,J,ee,D,null==j?void 0:j.title,$,m]),ne=ct.useCallback(()=>{v(),n(H.href)},[v,n,H.href]),re=ct.useCallback(async e=>{const t=ZX(ee,P,e?{move:e.currentMove,dark:e.darkMode,pieces:e.showPieces,opacity:e.pieceOpacity}:void 0);if(navigator.share)try{await navigator.share({title:(null==j?void 0:j.title)||"Chess Visualization",text:"Check out this chess game visualization from En Pensent",url:t})}catch(BPe){"AbortError"!==BPe.name&&(await navigator.clipboard.writeText(t),Yy.success("Link copied to clipboard!"))}else await navigator.clipboard.writeText(t),Yy.success("Link copied to clipboard!")},[ee,P,null==j?void 0:j.title]),ae=ct.useCallback(async(t,r)=>{if(!(j||D))return;const u=(null==j?void 0:j.title)||D&&m||(D&&$?`${$.white||"White"} vs ${$.black||"Black"}`:"Visualization"),d=null==j?void 0:j.id,h=null==j?void 0:j.image_path,p=null==j?void 0:j.public_share_id,f=r&&r.currentMove<J&&r.currentMove>0?Z.map(e=>e.map(e=>({...e,visits:e.visits.filter(e=>e.moveNumber<=r.currentMove)}))):Z,y=(null==r?void 0:r.lockedPieces)&&r.lockedPieces.length>0?{lockedPieces:r.lockedPieces.map(e=>({pieceType:e.pieceType,pieceColor:"white"===e.pieceColor?"w":"black"===e.pieceColor?"b":e.pieceColor})),compareMode:r.compareMode}:void 0;if("preview"!==t)if("hd"!==t){if("gif"===t){const e=document.querySelector('[data-vision-board="true"]');return void(e?Y({board:Z,gameData:X,totalMoves:J},e,u,void 0,r?{showPieces:r.showPieces,pieceOpacity:r.pieceOpacity}:void 0):Yy.error("Unable to capture visualization"))}if("print"===t){r&&l({currentMove:r.currentMove,totalMoves:J,title:u,lockedPieces:r.lockedPieces.map(e=>({pieceType:e.pieceType,pieceColor:e.pieceColor})),compareMode:r.compareMode,darkMode:r.darkMode,showPieces:r.showPieces,pieceOpacity:r.pieceOpacity}),s({board:Z,gameData:X,totalMoves:J},ee,u),o(p||""),c(!0);const t=kF(ee),a=t.isMatch&&t.matchedGame?t.matchedGame.id:void 0,i={visualizationId:d,title:u,imagePath:h,gameData:{white:X.white,black:X.black,event:X.event,date:X.date,result:X.result},simulation:{board:Z,gameData:X,totalMoves:J},shareId:p||void 0,returnPath:`/g/${e}`,gameHash:e,gameId:a,paletteId:P,pgn:ee,capturedState:r?{currentMove:r.currentMove,selectedPhase:"all",lockedPieces:r.lockedPieces,compareMode:r.compareMode,displayMode:"standard",darkMode:r.darkMode,showTerritory:!1,showHeatmaps:!1,showPieces:r.showPieces,pieceOpacity:r.pieceOpacity,capturedAt:new Date}:void 0};g(i),n("/order-print")}}else G({board:f,gameData:X,title:u,darkMode:(null==r?void 0:r.darkMode)||!1,highlightState:y,piecesState:r?{showPieces:r.showPieces,pieceOpacity:r.pieceOpacity}:void 0,pgn:ee,currentMoveNumber:null==r?void 0:r.currentMove});else try{const{generateCleanPrintImage:e}=await Mh(async()=>{const{generateCleanPrintImage:e}=await import("./printImageGenerator-yhMAt_WZ.js");return{generateCleanPrintImage:e}},__vite__mapDeps([0,1])),t=r?{currentMove:r.currentMove,selectedPhase:"all",lockedPieces:r.lockedPieces,compareMode:r.compareMode,displayMode:"standard",darkMode:r.darkMode,showTerritory:!1,showHeatmaps:!1,showPieces:r.showPieces,pieceOpacity:r.pieceOpacity,capturedAt:new Date}:void 0,n=!a||i,s=await e({board:f,gameData:X,totalMoves:J},{darkMode:(null==r?void 0:r.darkMode)||!1,withWatermark:n,highlightState:y,capturedState:t,pgn:ee}),o=await fetch(s),l=await o.blob(),c=URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=`${u.replace(/\s+/g,"-").toLowerCase()}-preview.png`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),Yy.success("Preview downloaded!")}catch(BPe){Yy.error("Download failed")}},[j,Z,X,J,ee,e,a,G,Y,n,g,l,s,o,c,D,i,P,$,m]);if(b)return xt.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:xt.jsx(gD.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-2 border-primary border-t-transparent rounded-full"})});if(k||!(j||D&&L))return xt.jsxs("div",{className:"min-h-screen bg-background",children:[xt.jsx(a6,{}),xt.jsx("main",{className:"container mx-auto px-4 py-16",children:xt.jsxs("div",{className:"max-w-md mx-auto text-center space-y-6",children:[xt.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:xt.jsx(Zm,{className:"h-10 w-10 text-primary/50"})}),xt.jsx("h1",{className:"text-2xl font-royal font-bold uppercase tracking-wide",children:"Game Not Found"}),xt.jsx("p",{className:"text-muted-foreground font-serif",children:k||"This game may not have been saved yet."}),xt.jsx(qN,{to:"/",children:xt.jsxs(vD,{variant:"outline",className:"gap-2",children:[xt.jsx(Im,{className:"h-4 w-4"}),"Create a Visualization"]})})]})}),xt.jsx(i6,{})]});const ie=D?m||`${(null==$?void 0:$.white)||"White"} vs ${(null==$?void 0:$.black)||"Black"}`:(null==j?void 0:j.title)||"Visualization",se=D?"generator":K.source||"shared";return xt.jsxs("div",{className:"min-h-screen bg-background",children:[xt.jsx(a6,{}),xt.jsx("main",{className:"container mx-auto px-4 py-8 md:py-16",children:xt.jsxs("div",{className:"max-w-4xl mx-auto",children:[xt.jsx(gD.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-6",children:xt.jsxs("button",{onClick:ne,className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[xt.jsx(Im,{className:"h-4 w-4"}),xt.jsx("span",{className:"font-serif",children:H.label})]})}),xt.jsxs(gD.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[xt.jsx("h1",{className:"text-2xl md:text-3xl font-royal font-bold uppercase tracking-wide mb-2",children:ie}),xt.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[D?xt.jsxs("span",{className:"flex items-center gap-1.5",children:[xt.jsx(gg,{className:"h-4 w-4 text-primary"}),"Freshly generated"]}):xt.jsxs("span",{className:"flex items-center gap-1.5",children:[xt.jsx(gg,{className:"h-4 w-4 text-primary"}),S.length," palette",1!==S.length?"s":""," available"]}),R&&xt.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-primary/10 text-primary text-xs font-display uppercase tracking-wider",children:["Score: ",R.totalScore.toLocaleString()]}),W&&xt.jsx("div",{className:"flex items-center gap-2",children:xt.jsx(i8,{visionNFT:W,showDetails:!1})})]})]}),xt.jsx(gD.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-card/50 rounded-xl border border-border/50 p-4 md:p-6",children:xt.jsx(h1,{board:Z,gameData:X,totalMoves:J,pgn:ee,context:se,paletteId:P,visualizationId:null==j?void 0:j.id,isPremium:a,onUpgradePrompt:()=>B(!0),onBack:ne,isOwner:D||(null==j?void 0:j.user_id)===(null==r?void 0:r.id),visionScoreData:R?{viewCount:R.viewCount,uniqueViewers:R.uniqueViewers,royaltyCentsEarned:R.royaltyCentsEarned,royaltyOrdersCount:R.royaltyOrdersCount,printRevenueCents:R.printRevenueCents,printOrderCount:R.printOrderCount,totalScore:R.totalScore,downloadHdCount:R.downloadHdCount,downloadGifCount:R.downloadGifCount,tradeCount:R.tradeCount}:null,onShare:re,onExport:ae,onSaveToGallery:"generator"===se?te:void 0,initialState:{move:U.move,dark:U.dark,pieces:U.pieces,opacity:U.opacity}})}),W&&Q.length>0&&xt.jsxs(gD.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 bg-card/50 rounded-xl border border-border/50 p-4 md:p-6",children:[xt.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[xt.jsx(Ng,{className:"h-5 w-5 text-primary"}),"Value History"]}),xt.jsx(T_e,{history:Q,mintPrice:W.mint_price_cents})]})]})}),xt.jsx(i6,{}),T&&xt.jsx(b4,{isOpen:T,onClose:()=>M(!1),defaultMode:"signin"}),A&&xt.jsx(N5,{isOpen:A,onClose:()=>B(!1),trigger:"download"})]})};function B_e(e={}){const{interval:t=3e4,autoStart:n=!0,onPulse:r,enabled:a=!0}=e,[i,s]=ct.useState({isAlive:!1,lastPulse:null,pulseCount:0,isProcessing:!1,nextPulseIn:Math.floor(t/1e3)}),o=ct.useRef(null),l=ct.useRef(null),c=ct.useRef(r);ct.useEffect(()=>{c.current=r},[r]);const u=ct.useCallback(async()=>{if(a){s(e=>({...e,isProcessing:!0}));try{c.current&&await c.current()}catch(e){}finally{s(e=>({...e,isAlive:!0,lastPulse:new Date,pulseCount:e.pulseCount+1,isProcessing:!1,nextPulseIn:Math.floor(t/1e3)}))}}},[a,t]),d=ct.useCallback(()=>{o.current||(u(),o.current=setInterval(u,t),l.current=setInterval(()=>{s(e=>({...e,nextPulseIn:Math.max(0,e.nextPulseIn-1)}))},1e3),s(e=>({...e,isAlive:!0})))},[u,t]),h=ct.useCallback(()=>{o.current&&(clearInterval(o.current),o.current=null),l.current&&(clearInterval(l.current),l.current=null),s(e=>({...e,isAlive:!1}))},[]),p=ct.useCallback(()=>{h(),setTimeout(d,100)},[h,d]);return ct.useEffect(()=>(n&&a&&d(),()=>{h()}),[n,a,d,h]),ct.useEffect(()=>{!a&&o.current?h():a&&n&&!o.current&&d()},[a,n,d,h]),{...i,pulse:u,start:d,stop:h,restart:p}}function D_e(e){if(e<=0)return"now";if(e<60)return`${e}s`;return`${Math.floor(e/60)}m ${e%60}s`}const I_e=new Set;function L_e(e){return I_e.add(e),()=>I_e.delete(e)}function F_e(e){I_e.forEach(t=>t(e))}function $_e(){const{toast:e}=qh(),t=ct.useRef({codeHealth:100,marketSync:100,patternAlignment:100,lastEvolution:null,evolutionCount:0}),n=ct.useCallback(async e=>{F_e(e);try{const n={state_type:"unified_evolution",genes:{code_health:t.current.codeHealth,market_sync:t.current.marketSync,pattern_alignment:t.current.patternAlignment,last_event:e},generation:t.current.evolutionCount+1,fitness_score:(t.current.codeHealth+t.current.marketSync+t.current.patternAlignment)/3,last_mutation_at:(new Date).toISOString()},{error:r}=await KC.from("evolution_state").insert(n);t.current.evolutionCount++,t.current.lastEvolution=new Date}catch(BPe){}},[]),r=ct.useCallback(async r=>{t.current.codeHealth=r.health,await n({type:"code_analysis",source:"code",data:r,timestamp:new Date}),F_e({type:"market_sync",source:"code",data:{trigger:"code_analysis",codeArchetype:r.archetype,healthFactor:r.health/100},timestamp:new Date}),e({title:" Universe Synchronized",description:"Code patterns propagated. Market calibration updated."})},[n,e]),a=ct.useCallback(async e=>{t.current.codeHealth=Math.min(100,t.current.codeHealth+5),await n({type:"code_fix",source:"code",data:e,timestamp:new Date}),F_e({type:"pattern_discovered",source:"code",data:{domain:"code",pattern:e.issue,resolution:e.resolution,impact:"positive"},timestamp:new Date})},[n]),i=ct.useCallback(async e=>{t.current.patternAlignment=Math.min(100,t.current.patternAlignment+2),await n({type:"pattern_discovered",source:e.domain,data:e,timestamp:new Date})},[n]),s=ct.useCallback(async e=>{t.current.marketSync=e.accuracy,await n({type:"market_sync",source:"market",data:e,timestamp:new Date})},[n]),o=ct.useCallback(()=>({...t.current}),[]);return{emitEvolution:n,onCodeAnalyzed:r,onCodeFixed:a,onPatternDiscovered:i,onMarketSynced:s,getUnifiedState:o,subscribeToEvolution:L_e}}const z_e=ct.createContext(null);function q_e({children:e,autoStart:t=!0,interval:n=3e4}){const[r,a]=ct.useState(!1),[i,s]=ct.useState(.3),[o,l]=ct.useState(.5),c=$_e(),u=ct.useRef(c.getUnifiedState()),d=function(e={}){const{enabled:t=!0,volume:n=.3,tempo:r=60,intensity:a=.5}=e,i=ct.useRef(null),s=ct.useRef(null),o=ct.useRef(!1),[l,c]=ct.useState(!1),u=ct.useRef([]),d=ct.useCallback(()=>{if(o.current)return!0;try{return i.current=new(window.AudioContext||window.webkitAudioContext),s.current=i.current.createGain(),s.current.gain.value=n,s.current.connect(i.current.destination),o.current=!0,!0}catch(APe){return!1}},[n]),h=ct.useCallback((e=a)=>{if(!t||!d())return;const r=i.current,o=s.current,l=r.currentTime,c=(t,a,i)=>{const s=r.createOscillator(),c=r.createGain();s.type="sine",s.frequency.setValueAtTime(a,l+t),s.frequency.exponentialRampToValueAtTime(.5*a,l+t+i),c.gain.setValueAtTime(0,l+t),c.gain.linearRampToValueAtTime(e*n,l+t+.02),c.gain.exponentialRampToValueAtTime(.001,l+t+i),s.connect(c),c.connect(o),s.start(l+t),s.stop(l+t+i)};c(0,80+40*e,.15),c(.12,60+30*e,.1)},[t,d,a,n]),p=ct.useCallback(e=>{if(!t||!d())return;const r=i.current,a=s.current,o=r.currentTime;({mutate:[220,330,440],evolve:[440,550,660,880],sync:[440,660,880]})[e].forEach((t,i)=>{const s=r.createOscillator(),l=r.createGain();s.type="sync"===e?"triangle":"sine",s.frequency.value=t;const c=.08*i;l.gain.setValueAtTime(0,o+c),l.gain.linearRampToValueAtTime(.5*n,o+c+.05),l.gain.exponentialRampToValueAtTime(.001,o+c+.3),s.connect(l),l.connect(a),s.start(o+c),s.stop(o+c+.35)})},[t,d,n]),m=ct.useCallback((e,r)=>{if(!t||!d())return;const a=i.current,o=s.current,l=a.currentTime,c=a.createOscillator(),u=a.createGain(),h="up"===e?440:"down"===e?220:330;c.type="sine",c.frequency.setValueAtTime(h,l),"up"===e?c.frequency.exponentialRampToValueAtTime(1.5*h,l+.2):"down"===e&&c.frequency.exponentialRampToValueAtTime(.7*h,l+.2),u.gain.setValueAtTime(0,l),u.gain.linearRampToValueAtTime(n*r,l+.03),u.gain.exponentialRampToValueAtTime(.001,l+.25),c.connect(u),u.connect(o),c.start(l),c.stop(l+.3)},[t,d,n]),f=ct.useCallback(e=>{if(!t||!d())return;const r=i.current,a=s.current,o=r.currentTime;e?[523.25,659.25,783.99].forEach((e,t)=>{const i=r.createOscillator(),s=r.createGain();i.type="triangle",i.frequency.value=e,s.gain.setValueAtTime(0,o),s.gain.linearRampToValueAtTime(.4*n,o+.05),s.gain.exponentialRampToValueAtTime(.001,o+.4),i.connect(s),s.connect(a),i.start(o+.03*t),i.stop(o+.5)}):[440,523.25,659.25].forEach((e,t)=>{const i=r.createOscillator(),s=r.createGain();i.type="sawtooth",i.frequency.value=.5*e,s.gain.setValueAtTime(0,o),s.gain.linearRampToValueAtTime(.2*n,o+.05),s.gain.exponentialRampToValueAtTime(.001,o+.3),i.connect(s),s.connect(a),i.start(o+.02*t),i.stop(o+.35)})},[t,d,n]),g=ct.useCallback((e=55)=>{if(!t||!d())return;const r=i.current,a=s.current;u.current.forEach(e=>{try{e.stop()}catch{}}),u.current=[],[1,1.5,2,3].forEach(t=>{const i=r.createOscillator(),s=r.createGain(),o=r.createBiquadFilter();i.type="sine",i.frequency.value=e*t,o.type="lowpass",o.frequency.value=200,s.gain.value=.05*n/t,i.connect(o),o.connect(s),s.connect(a),i.start(),u.current.push(i)}),c(!0)},[t,d,n]),y=ct.useCallback(()=>{u.current.forEach(e=>{try{e.stop()}catch{}}),u.current=[],c(!1)},[]);return ct.useEffect(()=>{s.current&&(s.current.gain.value=n)},[n]),ct.useEffect(()=>()=>{y(),i.current&&i.current.close()},[y]),{initAudio:d,playHeartbeatPulse:h,playEvolutionSound:p,playPredictionSound:m,playOutcomeSound:f,startAmbientDrone:g,stopAmbientDrone:y,isPlaying:l,isInitialized:o.current}}({enabled:r,volume:i,intensity:o});ct.useEffect(()=>{const e=c.getUnifiedState();u.current=e;const t=(e.codeHealth+e.marketSync+e.patternAlignment)/300;l(t)},[c]),ct.useEffect(()=>L_e(e=>{if(r)switch(e.type){case"code_analysis":case"code_fix":d.playEvolutionSound("mutate");break;case"pattern_discovered":d.playEvolutionSound("evolve");break;case"market_sync":d.playEvolutionSound("sync")}}),[r,d]);const h=B_e({interval:n,autoStart:t,onPulse:ct.useCallback(()=>{r&&d.playHeartbeatPulse(o),u.current=c.getUnifiedState()},[r,d,o,c]),enabled:!0}),p=ct.useCallback(()=>{h.pulse()},[h]),m={isAlive:h.isAlive,pulseCount:h.pulseCount,lastPulse:h.lastPulse,intensity:o,soundEnabled:r,setSoundEnabled:a,volume:i,setVolume:s,triggerPulse:p,codeHealth:u.current.codeHealth,marketSync:u.current.marketSync,patternAlignment:u.current.patternAlignment};return xt.jsx(z_e.Provider,{value:m,children:e})}const V_e=ct.createContext(null);function W_e(){const e=ct.useContext(V_e);if(!e)throw new Error("useRealtimeAccuracyContext must be used within RealtimeAccuracyProvider");return e}function Q_e({children:e,enabled:t=!0}){const n=function(e=!0){const t=Gw(),{syncEvolutionState:n,globalAccuracy:r}=P0(),a=ct.useRef([]),[i,s]=ct.useState({isConnected:!1,lastUpdate:null,updateCount:0,channels:[]}),[o,l]=ct.useState(null),[c,u]=ct.useState(A0()),d=ct.useCallback(e=>{if(e.totalGames>0){const t=B0(e.hybridAccuracy,e.stockfishAccuracy,e.hybridWins,e.stockfishWins,e.bothCorrect,e.totalGames,35);u(t)}},[]),h=ct.useCallback(async()=>{try{n();const e=await W0();l(e),d(e),$0({type:"chess",data:e,timestamp:new Date});const{data:r}=await KC.from("security_accuracy_metrics").select("*").order("composite_accuracy",{ascending:!1});r&&$0({type:"security",data:r,timestamp:new Date});const{data:a}=await KC.from("evolution_state").select("*").eq("state_type","global").single();a&&$0({type:"evolution",data:a,timestamp:new Date});const{data:i}=await KC.from("market_correlations").select("*").order("calculated_at",{ascending:!1}).limit(50);i&&$0({type:"correlation",data:i,timestamp:new Date}),t.invalidateQueries({queryKey:["security-metrics"]}),t.invalidateQueries({queryKey:["evolution-state"]}),t.invalidateQueries({queryKey:["market-correlations"]}),t.invalidateQueries({queryKey:["prediction-outcomes"]}),t.invalidateQueries({queryKey:["chess-cumulative-stats"]}),t.invalidateQueries({queryKey:["benchmark-stats"]}),s(e=>({...e,lastUpdate:new Date,updateCount:e.updateCount+1}))}catch(e){}},[n,t]);return ct.useEffect(()=>{if(!e)return;const r=[],i=KC.channel("realtime-chess-predictions").on("postgres_changes",{event:"INSERT",schema:"public",table:"chess_prediction_attempts"},async e=>{Q0();const n=await W0();l(n),d(n),$0({type:"chess",data:n,timestamp:new Date}),s(e=>({...e,lastUpdate:new Date,updateCount:e.updateCount+1})),t.invalidateQueries({queryKey:["chess-cumulative-stats"]}),t.invalidateQueries({queryKey:["benchmark-stats"]})}).subscribe(e=>{});r.push(i);const o=KC.channel("realtime-chess-benchmarks").on("postgres_changes",{event:"*",schema:"public",table:"chess_benchmark_results"},async e=>{Q0();const n=await W0();l(n),d(n),$0({type:"chess",data:{...n,benchmarkEvent:e.eventType,benchmarkData:e.new},timestamp:new Date}),s(e=>({...e,lastUpdate:new Date,updateCount:e.updateCount+1})),t.invalidateQueries({queryKey:["chess-cumulative-stats"]}),t.invalidateQueries({queryKey:["benchmark-stats"]}),t.invalidateQueries({queryKey:["benchmark-history"]})}).subscribe(e=>{});r.push(o);const c=KC.channel("realtime-predictions").on("postgres_changes",{event:"*",schema:"public",table:"prediction_outcomes"},e=>{n(),S0.getState(),$0({type:"prediction",data:e.new,timestamp:new Date}),s(e=>({...e,lastUpdate:new Date,updateCount:e.updateCount+1})),t.invalidateQueries({queryKey:["prediction-outcomes"]})}).subscribe(e=>{});r.push(c);const u=KC.channel("realtime-evolution").on("postgres_changes",{event:"*",schema:"public",table:"evolution_state"},e=>{n(),$0({type:"evolution",data:e.new,timestamp:new Date}),s(e=>({...e,lastUpdate:new Date,updateCount:e.updateCount+1})),t.invalidateQueries({queryKey:["evolution-state"]})}).subscribe(e=>{});r.push(u);const p=KC.channel("realtime-security-metrics").on("postgres_changes",{event:"*",schema:"public",table:"security_accuracy_metrics"},e=>{$0({type:"security",data:e.new,timestamp:new Date}),s(e=>({...e,lastUpdate:new Date,updateCount:e.updateCount+1})),t.invalidateQueries({queryKey:["security-metrics"]})}).subscribe(e=>{});r.push(p);const m=KC.channel("realtime-correlations").on("postgres_changes",{event:"*",schema:"public",table:"market_correlations"},e=>{$0({type:"correlation",data:e.new,timestamp:new Date}),s(e=>({...e,lastUpdate:new Date,updateCount:e.updateCount+1})),t.invalidateQueries({queryKey:["market-correlations"]})}).subscribe(e=>{});r.push(m),a.current=r,s(e=>({...e,isConnected:!0,channels:["chess","benchmarks","predictions","evolution","security","correlations"]})),h();const f=setInterval(()=>{n()},5e3);return()=>{clearInterval(f),r.forEach(e=>{KC.removeChannel(e)}),s(e=>({...e,isConnected:!1,channels:[]}))}},[e,n,t,h]),{...i,globalAccuracy:r,chessStats:o,liveEloState:c,syncAccuracyData:h,subscribeToUpdates:F0}}(t),{syncEvolutionState:r}=P0();ct.useEffect(()=>{n.updateCount>0&&r()},[n.updateCount,r]);const a={...n,subscribeToUpdates:F0};return xt.jsx(V_e.Provider,{value:a,children:e})}class U_e{constructor(){fe(this,"worker",null),fe(this,"isReady",!1),fe(this,"pendingCallbacks",new Map),fe(this,"analysisCallbacks",[]),fe(this,"currentDepth",0),fe(this,"analysisBuffer",[]),fe(this,"crashCount",0),fe(this,"lastCrashTime",0),fe(this,"isRecovering",!1),fe(this,"waitReadyPromise",null),this.initWorker()}terminateWorker(){if(this.worker){try{this.worker.terminate()}catch(APe){}this.worker=null}this.isReady=!1,this.waitReadyPromise=null,this.pendingCallbacks.clear(),this.analysisCallbacks=[]}initWorker(){this.terminateWorker();try{this.worker=new Worker("/stockfish.worker.js"),this.worker.onmessage=e=>{const{type:t,data:n}=e.data;"ready"===t?(this.isReady=!0,this.crashCount=0,this.isRecovering=!1,this.configure()):"uci"===t?this.handleUciMessage(n):"error"===t&&n&&(n.includes("RuntimeError")||n.includes("Unreachable")||n.includes("Out of bounds"))&&this.handleCrash("WASM runtime error")},this.worker.onerror=e=>{this.handleCrash("Worker error")}}catch(e){this.handleCrash("Worker creation failed")}}handleCrash(e){const t=Date.now();t-this.lastCrashTime<3e4?this.crashCount++:this.crashCount=1,this.lastCrashTime=t,this.isReady=!1,this.crashCount>=3||this.isRecovering||(this.isRecovering=!0,setTimeout(()=>{this.isRecovering&&this.initWorker()},200))}configure(){this.sendCommand("setoption",{name:"Threads",value:1}),this.sendCommand("setoption",{name:"Hash",value:128}),this.sendCommand("setoption",{name:"MultiPV",value:1}),this.sendCommand("setoption",{name:"Slow Mover",value:100})}sendCommand(e,t){this.worker&&this.worker.postMessage({command:e,options:t})}handleUciMessage(e){if(e.startsWith("info")){const t=this.parseInfoLine(e);t&&t.depth>this.currentDepth&&(this.currentDepth=t.depth,this.analysisCallbacks.forEach(e=>e(t)))}if(e.startsWith("bestmove")){const t=e.split(" "),n=t[1],r=t[3],a=this.pendingCallbacks.get("bestmove");a&&(a({bestMove:n,ponder:r}),this.pendingCallbacks.delete("bestmove"))}this.analysisBuffer.push(e),this.analysisBuffer.length>100&&this.analysisBuffer.shift()}parseInfoLine(e){const t=e.split(" "),n={pv:[]};let r=1;for(;r<t.length;){switch(t[r]){case"depth":n.depth=parseInt(t[++r]);break;case"score":"cp"===t[++r]?(n.scoreType="cp",n.score=parseInt(t[++r])):"mate"===t[r]&&(n.scoreType="mate",n.mateIn=parseInt(t[++r]),n.score=n.mateIn>0?1e4:-1e4);break;case"nodes":n.nodes=parseInt(t[++r]);break;case"nps":n.nps=parseInt(t[++r]);break;case"time":n.time=parseInt(t[++r]);break;case"multipv":n.multipv=parseInt(t[++r]);break;case"pv":for(r++;r<t.length&&!t[r].startsWith("info");)n.pv.push(t[r++]);r--}r++}return n.depth&&void 0!==n.score?n:null}async waitReady(e){return this.isReady&&this.worker?(null==e||e(1),!0):(this.waitReadyPromise||(this.worker||this.initWorker(),this.waitReadyPromise=new Promise(t=>{let n=0;let r=0,a=0;const i=setInterval(()=>{n++;const s=Math.min(n/150,.99);s-r>.1&&(r=s,null==e||e(s)),this.isReady?(clearInterval(i),this.waitReadyPromise=null,null==e||e(1),t(!0)):n>=150&&(clearInterval(i),this.waitReadyPromise=null,t(!1));const o=Date.now();o-a>5e3&&(a=o)},100)})),this.waitReadyPromise)}async analyzePosition(e,t={}){await this.waitReady(),this.currentDepth=0;const n=t.depth||12,r=(t.requireExactDepth,Math.max(8e3,Math.min(200*n,3e4)));return new Promise((a,i)=>{let s,o=!1;this.sendCommand("position",{fen:e});let l=null,c=0;const u=e=>{l=e,e.depth>c&&(c=e.depth)};this.analysisCallbacks.push(u);const d=()=>{s&&clearTimeout(s),this.analysisCallbacks=this.analysisCallbacks.filter(e=>e!==u),this.pendingCallbacks.delete("bestmove")};this.pendingCallbacks.set("bestmove",({bestMove:t,ponder:n})=>{if(o)return;o=!0,d();const r=new lF(e);null==l||l.depth;a({fen:e,bestMove:t,ponder:n,evaluation:l||{depth:0,score:0,scoreType:"cp",pv:[],nodes:0,nps:0,time:0},winProbability:void 0!==(null==l?void 0:l.score)?this.cpToWinProbability(l.score):50,isCheckmate:r.isCheckmate(),isStalemate:r.isStalemate(),isDraw:r.isDraw()})}),s=setTimeout(()=>{var t;if(o)return;o=!0,this.sendCommand("stop"),d();const n=new lF(e);a({fen:e,bestMove:(null==(t=null==l?void 0:l.pv)?void 0:t[0])||"",evaluation:l||{depth:c,score:0,scoreType:"cp",pv:[],nodes:0,nps:0,time:r},winProbability:void 0!==(null==l?void 0:l.score)?this.cpToWinProbability(l.score):50,isCheckmate:n.isCheckmate(),isStalemate:n.isStalemate(),isDraw:n.isDraw()})},r),t.nodes?this.sendCommand("go",{nodes:t.nodes}):t.movetime?this.sendCommand("go",{movetime:t.movetime}):this.sendCommand("go",{depth:n})})}async analyzeGame(e,t={}){await this.waitReady();const n=t.depth||10,r=new lF;try{r.loadPgn(e)}catch(APe){throw new Error("Invalid PGN")}const a=r.history({verbose:!0}),i=[];r.reset();let s=await this.analyzePosition(r.fen(),{depth:n,nodes:5e4}),o=s.evaluation.score;for(let h=0;h<a.length;h++){const e=a[h];r.fen();const l="w"===r.turn(),c=o*(l?1:-1),u=s.bestMove,d=s.evaluation.pv;r.move(e),s=await this.analyzePosition(r.fen(),{depth:n,nodes:5e4}),o=s.evaluation.score;const p=o*(l?-1:1),m=Math.max(0,c-p),f=this.calculateAccuracy(m),g=e.from+e.to===u.slice(0,4);i.push({san:e.san,uci:e.from+e.to+(e.promotion||""),evalBefore:l?c:-c,evalAfter:l?p:-p,cpLoss:m,accuracy:f,bestMove:u,wasBestMove:g,pvLine:d}),t.onProgress&&t.onProgress(h+1,a.length)}const l=i.filter((e,t)=>t%2==0),c=i.filter((e,t)=>t%2==1),u=l.length?l.reduce((e,t)=>e+t.accuracy,0)/l.length:0,d=c.length?c.reduce((e,t)=>e+t.accuracy,0)/c.length:0;return{moves:i,whiteAccuracy:Math.round(10*u)/10,blackAccuracy:Math.round(10*d)/10,averageDepth:n,engineVersion:"Stockfish 17.1 NNUE WASM"}}async evaluateMove(e,t,n=15){await this.waitReady();const r=new lF(e),a=await this.analyzePosition(e,{depth:n,movetime:500}),i=a.evaluation.score;r.move(t);const s=-(await this.analyzePosition(r.fen(),{depth:n,movetime:500})).evaluation.score,o=Math.max(0,i-s);return{cpLoss:o,accuracy:this.calculateAccuracy(o),wasBest:t.toLowerCase().includes(a.bestMove.slice(0,4).toLowerCase()),bestMove:a.bestMove}}async quickEval(e){await this.waitReady();return(await this.analyzePosition(e,{nodes:1e4})).evaluation.score}stop(){this.sendCommand("stop")}terminate(){this.sendCommand("quit"),this.worker&&(this.worker.terminate(),this.worker=null),this.isReady=!1}cpToWinProbability(e){return 50+50*(2/(1+Math.exp(-.00368208*e))-1)}calculateAccuracy(e){if(e<=0)return 100;const t=103.1668*Math.exp(-.04354*e)-3.1669;return Math.max(0,Math.min(100,t))}get available(){return this.isReady&&null!==this.worker&&this.crashCount<3}forceRecovery(){this.crashCount=0,this.isRecovering=!1,this.initWorker()}get info(){return{version:"Stockfish 17.1 NNUE WASM",available:this.available,crashCount:this.crashCount}}}let K_e=null;function H_e(){return K_e||(K_e=new U_e),K_e}function G_e(){K_e&&(K_e.terminate(),K_e=null)}async function Y_e(e,t={}){const{max:n=50,since:r,until:a}=t;try{const{data:t,error:i}=await KC.functions.invoke("lichess-games",{body:{player:e,max:n,since:r,until:a}});if(i)return{games:[],username:e,totalGames:0,importedCount:0,errors:[i.message||"Edge function error"]};if("Rate limited"===(null==t?void 0:t.error))return{games:[],username:e,totalGames:0,importedCount:0,errors:[`Rate limited - retry after ${t.retryAfter}s`]};if(null==t?void 0:t.error)return{games:[],username:e,totalGames:0,importedCount:0,errors:[t.error]};const s=((null==t?void 0:t.games)||[]).map(e=>({id:e.id,rated:e.rated??!0,variant:e.variant||"standard",speed:e.speed||"blitz",perf:e.perf||e.speed||"blitz",createdAt:e.createdAt,lastMoveAt:e.lastMoveAt,status:e.status,players:{white:{user:{name:e.whiteName,id:e.whiteName},rating:e.whiteElo},black:{user:{name:e.blackName,id:e.blackName},rating:e.blackElo}},winner:e.winner,moves:e.moves,pgn:e.pgn,opening:e.openingEco?{eco:e.openingEco,name:e.openingName||"Unknown",ply:e.openingPly||0}:void 0}));return{games:s,username:e,totalGames:s.length,importedCount:s.length,errors:[]}}catch(i){return{games:[],username:e,totalGames:0,importedCount:0,errors:[i instanceof Error?i.message:"Unknown error"]}}}function Z_e(e){var t,n;if(e.pgn)return e.pgn;const r=[];r.push(`[Event "Lichess ${e.perf}"]`),r.push(`[Site "https://lichess.org/${e.id}"]`),r.push(`[Date "${new Date(e.createdAt).toISOString().split("T")[0].replace(/-/g,".")}"]`),r.push(`[White "${(null==(t=e.players.white.user)?void 0:t.name)||"Anonymous"}"]`),r.push(`[Black "${(null==(n=e.players.black.user)?void 0:n.name)||"Anonymous"}"]`),r.push(`[Result "${X_e(e)}"]`),e.players.white.rating&&r.push(`[WhiteElo "${e.players.white.rating}"]`),e.players.black.rating&&r.push(`[BlackElo "${e.players.black.rating}"]`),e.opening&&(r.push(`[ECO "${e.opening.eco}"]`),r.push(`[Opening "${e.opening.name}"]`));let a="";if(e.moves)try{const t=new lF,n=e.moves.split(" "),r=[];for(const e of n){if(!e||e.length<4)continue;const n=e.slice(0,2),a=e.slice(2,4),i=e.length>4?e[4]:void 0;try{const e=t.move({from:n,to:a,promotion:i});e&&r.push(e.san)}catch{break}}a=r.map((e,t)=>t%2==0?`${Math.floor(t/2)+1}. ${e}`:e).join(" ")}catch(BPe){a=""}return`${r.join("\n")}\n\n${a} ${X_e(e)}`}function X_e(e){return"draw"===e.status||"stalemate"===e.status?"1/2-1/2":"white"===e.winner?"1-0":"black"===e.winner?"0-1":"timeout"===e.status||"outoftime"===e.status?"1/2-1/2":"*"}async function J_e(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch archive: ${t.status}`);return(await t.json()).games||[]}async function eSe(e,t={}){const{max:n=100,months:r=12,monthOffset:a=0}=t,i=[];try{const t=await async function(e){const t=await fetch(`https://api.chess.com/pub/player/${e}/games/archives`);if(!t.ok){if(404===t.status)throw new Error(`User "${e}" not found on Chess.com`);throw new Error(`Chess.com API error: ${t.status}`)}return(await t.json()).archives||[]}(e);if(0===t.length)return{games:[],username:e,totalGames:0,importedCount:0,archives:[],errors:["No game archives found for this user"]};const s=t.slice().reverse(),o=Math.min(a,s.length),l=Math.min(o+r,s.length),c=s.slice(o,l);let u=[];for(const e of c){if(u.length>=n)break;try{const t=await J_e(e);u=u.concat(t)}catch(BPe){i.push(`Failed to fetch archive: ${e}`)}}u.sort((e,t)=>t.end_time-e.end_time);const d=u.slice(0,n);return{games:d,username:e,totalGames:u.length,importedCount:d.length,archives:c,errors:i}}catch(s){return{games:[],username:e,totalGames:0,importedCount:0,archives:[],errors:[s instanceof Error?s.message:"Unknown error"]}}}function tSe(e){return"win"===e.white.result?"1-0":"win"===e.black.result?"0-1":"agreed"===e.white.result||"stalemate"===e.white.result||"repetition"===e.white.result||"insufficient"===e.white.result?"1/2-1/2":"*"}function nSe(e){return e.startsWith("moves:")?e:e.split(" ").slice(0,4).join(" ")}function rSe(e){const t=nSe(e);let n=5381,r=52711;for(let a=0;a<t.length;a++){const e=t.charCodeAt(a);n=(n<<5)+n^e,r=(r<<5)+r^e,n>>>=0,r>>>=0}return n.toString(16).padStart(8,"0")+r.toString(16).padStart(8,"0")}function aSe(e){const t=e.replace(/^(li_|cc_)/,""),n=e.startsWith("li_")||e.startsWith("cc_"),r=8===t.length&&/^[a-zA-Z0-9]+$/.test(t),a=e.startsWith("cc_")&&/^\d+$/.test(t);return r||a||n&&t.length>=6}async function iSe(){const e=new Set,t=new Set,n=new Set;let r=0;const a=1e3;let i=!0,s=0;for(;i;){const{data:o,error:l}=await KC.from("chess_prediction_attempts").select("position_hash, game_id, fen").range(r,r+a-1);if(l)break;if(!o||0===o.length){i=!1;break}for(const r of o){if(r.game_id)if(aSe(r.game_id)){e.add(r.game_id);const t=r.game_id.replace(/^(li_|cc_)/,"");t!==r.game_id&&e.add(t)}else 0;r.position_hash&&t.add(r.position_hash),r.fen&&n.add(nSe(r.fen))}s+=o.length,r+=a,i=o.length===a}return{gameIds:e,realLichessIds:e,positionHashes:t,fenStrings:n}}function sSe(e,t){return!!aSe(e)&&t.gameIds.has(e)}async function oSe(e,t){var n;try{const{data:r}=await KC.from("chess_prediction_attempts").select("id, hybrid_confidence, hybrid_correct, lesson_learned").or(`position_hash.eq.${t},fen.eq.${e}`).limit(1).single();if(r){const e=Math.min(.99,(r.hybrid_confidence||.5)+.01);await KC.from("chess_prediction_attempts").update({hybrid_confidence:e,lesson_learned:{...r.lesson_learned||{},reaffirmed_count:((null==(n=r.lesson_learned)?void 0:n.reaffirmed_count)||0)+1,last_reaffirmed:(new Date).toISOString()}}).eq("id",r.id)}}catch(r){}}function lSe(e){const t={timestamp:(new Date).toISOString(),type:"unknown",insight:"",archetype:e.hybridArchetype||"Unknown"};return e.hybridCorrect&&!e.stockfishCorrect?{...t,type:"hybrid_superiority",insight:"Color Flow detected strategic pattern that pure tactics missed",stockfishMiss:e.stockfishEval,confidence:e.hybridConfidence}:!e.hybridCorrect&&e.stockfishCorrect?{...t,type:"hybrid_failure",insight:"Tactical considerations outweighed strategic patterns",needsImprovement:!0,stockfishEval:e.stockfishEval}:e.hybridCorrect||e.stockfishCorrect?{...t,type:"consensus",insight:"Clear position correctly evaluated by both systems",reliable:!0}:{...t,type:"position_chaos",insight:"Position too chaotic for either system",unpredictable:!0}}async function cSe(e){const t=`benchmark-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;try{const n=e.completedAt?e.completedAt.getTime()-e.startedAt.getTime():0,{data:r,error:a}=await KC.from("chess_benchmark_results").insert({run_id:t,data_source:e.dataSource,total_games:e.totalGames,completed_games:e.completedGames,prediction_move_number:20,stockfish_accuracy:e.stockfishAccuracy,hybrid_accuracy:e.hybridAccuracy,stockfish_wins:e.stockfishWins,hybrid_wins:e.hybridWins,both_correct:e.bothCorrect,both_wrong:e.bothWrong,p_value:e.pValue,confidence:e.confidence,archetype_performance:e.archetypePerformance,games_analyzed:e.gamesAnalyzed,duration_ms:n,stockfish_version:"TCEC Stockfish 17 NNUE (ELO 3600) Unlimited",hybrid_version:"En Pensent Hybrid v2.0 (TCEC Calibrated)",data_quality_tier:"tcec_calibrated",stockfish_mode:"tcec_unlimited"}).select("id").single();if(a)return null;const i=r.id,s=["white","black","draw","white_wins","black_wins"],o=e.predictionPoints.filter(e=>{const t=String(e.hybridPrediction||""),n=String(e.stockfishPrediction||""),r=t&&"unknown"!==t&&s.includes(t),a=n&&"unknown"!==n&&s.includes(n);return!(!r||!a)}).map(e=>{var t,n,r;let a="web_client";return(null==(t=e.gameId)?void 0:t.startsWith("li_"))?a="lichess_live":(null==(n=e.gameId)?void 0:n.startsWith("cc_"))?a="chesscom_live":(null==(r=e.gameId)?void 0:r.startsWith("term_"))&&(a="farm_terminal"),{benchmark_id:i,game_id:e.gameId,game_name:e.gameName,move_number:e.moveNumber,fen:e.fen,pgn:e.pgn,stockfish_eval:e.stockfishEval,stockfish_depth:e.stockfishDepth,stockfish_prediction:e.stockfishPrediction,stockfish_confidence:e.stockfishConfidence,hybrid_prediction:e.hybridPrediction,hybrid_confidence:e.hybridConfidence,hybrid_archetype:e.hybridArchetype,actual_result:e.actualResult,stockfish_correct:e.stockfishCorrect,hybrid_correct:e.hybridCorrect,position_hash:rSe(e.fen),lesson_learned:JSON.parse(JSON.stringify(lSe(e))),data_quality_tier:"tcec_calibrated",data_source:a,engine_version:"TCEC Stockfish 17 NNUE (ELO 3600)",hybrid_engine:"En Pensent Universal v2.1",lichess_id_verified:!0}}),l=25;let c=0;for(let e=0;e<o.length;e+=l){const t=o.slice(e,e+l),{error:n}=await KC.from("chess_prediction_attempts").insert(t);if(n)return await KC.from("chess_benchmark_results").delete().eq("id",i),null;c+=t.length}return t}catch(n){return null}}async function uSe(){const[{count:e},{count:t},{count:n},{count:r},{count:a},{count:i},{count:s},{count:o}]=await Promise.all([KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!0),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("stockfish_correct",!0),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!0).eq("stockfish_correct",!0),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!1).eq("stockfish_correct",!1),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!0).eq("stockfish_correct",!1),KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).eq("hybrid_correct",!1).eq("stockfish_correct",!0),KC.from("chess_benchmark_results").select("*",{count:"exact",head:!0})]),l=e||0,c=t||0,u=n||0,d=r||0,h=a||0,p=i||0,m=s||0,f=await async function(){const e={};let t=0;const n=1e3;let r=!0;for(;r;){const{data:a,error:i}=await KC.from("chess_prediction_attempts").select("hybrid_archetype, hybrid_correct, stockfish_correct, stockfish_prediction").range(t,t+n-1);if(i||!a||0===a.length){r=!1;break}for(const t of a){const n=t.stockfish_prediction&&"unknown"!==t.stockfish_prediction&&["white_wins","black_wins","draw","white","black"].includes(t.stockfish_prediction),r=t.hybrid_archetype||"Unknown";e[r]||(e[r]={totalPredictions:0,correctPredictions:0,accuracy:0,stockfishBeats:0,hybridBeats:0}),e[r].totalPredictions++,t.hybrid_correct&&e[r].correctPredictions++,n&&(t.hybrid_correct&&!t.stockfish_correct&&e[r].hybridBeats++,t.stockfish_correct&&!t.hybrid_correct&&e[r].stockfishBeats++)}t+=n,r=a.length===n}for(const a of Object.keys(e))e[a].accuracy=e[a].totalPredictions>0?e[a].correctPredictions/e[a].totalPredictions*100:0;return e}();let g=null,y=null,v=0,x=100;for(const[b,w]of Object.entries(f))w.totalPredictions>=5&&(w.accuracy>v&&(v=w.accuracy,g=b),w.accuracy<x&&(x=w.accuracy,y=b));return{totalRuns:o||0,totalGamesAnalyzed:l,overallHybridAccuracy:l>0?c/l*100:0,overallStockfishAccuracy:l>0?u/l*100:0,hybridNetWins:p-m,hybridWins:p,stockfishWins:m,bothCorrect:d,bothWrong:h,bestArchetype:g,worstArchetype:y,validPredictionCount:l,invalidPredictionCount:0}}const dSe={manualBenchmarkActive:!1,wasAutoEvolutionRunning:!1,startedAt:null,abortController:null},hSe=new Set;function pSe(e){return hSe.add(e),()=>hSe.delete(e)}function mSe(e){hSe.forEach(t=>{try{t(e)}catch(APe){}})}async function fSe(e){for(let t=1;t<=3;t++)try{const{data:n}=await KC.from("evolution_state").select("id").eq("state_type","benchmark_lock").maybeSingle(),r={state_type:"benchmark_lock",genes:{locked:e,version:"8.01-SMOOTH",timestamp:(new Date).toISOString()},fitness_score:e?0:100,generation:0};let a;if(null==n?void 0:n.id){a=(await KC.from("evolution_state").update(r).eq("id",n.id)).error}else{a=(await KC.from("evolution_state").upsert(r,{onConflict:"state_type",ignoreDuplicates:!1})).error}if(!a)return;if((a.message.includes("duplicate key")||a.message.includes("unique constraint"))&&t<3){await new Promise(e=>setTimeout(e,100*t));continue}return}catch(BPe){if(t<3){await new Promise(e=>setTimeout(e,100*t));continue}return}}async function gSe(){if(dSe.manualBenchmarkActive)return dSe.abortController||new AbortController;dSe.abortController=new AbortController,await fSe(!0);const e=SCe();return dSe.wasAutoEvolutionRunning=e.isRunning&&!e.isPaused,dSe.wasAutoEvolutionRunning&&(NCe(),await new Promise(e=>setTimeout(e,100))),dSe.manualBenchmarkActive=!0,dSe.startedAt=new Date,mSe(!0),dSe.abortController}async function ySe(){if(!dSe.manualBenchmarkActive)return;dSe.startedAt&&Math.round((Date.now()-dSe.startedAt.getTime())/1e3);dSe.abortController&&(dSe.abortController.abort(),dSe.abortController=null),dSe.manualBenchmarkActive=!1,dSe.startedAt=null,mSe(!1),await fSe(!1),await new Promise(e=>setTimeout(e,200)),dSe.wasAutoEvolutionRunning&&jCe(),dSe.wasAutoEvolutionRunning=!1}function vSe(){return dSe.manualBenchmarkActive}function xSe(){var e;return(null==(e=dSe.abortController)?void 0:e.signal)||null}const bSe=15e3,wSe=4e3,kSe=30,NSe=1e3;let jSe=new Set,_Se=!1,SSe=null;function CSe(e){return e.replace(/^(li_|cc_|term_|puz_|ccp_)/,"")}async function PSe(){_Se||(SSe||(SSe=(async()=>{Date.now();const e=setTimeout(()=>{_Se=!0},bSe);try{for(let e=0;e<kSe&&!_Se;e++){const t=e*NSe;try{const e=new AbortController,n=setTimeout(()=>e.abort(),wSe),{data:r,error:a}=await KC.from("chess_prediction_attempts").select("game_id").range(t,t+NSe-1);if(clearTimeout(n),a||!r||0===r.length)break;for(const t of r)t.game_id&&jSe.add(CSe(t.game_id));if(r.length<NSe)break}catch(BPe){break}}}finally{clearTimeout(e),_Se=!0}})()),await SSe)}function ESe(e){const t=CSe(e);return jSe.has(t)}function RSe(e){const t=CSe(e);jSe.add(t)}function OSe(){return jSe}const TSe=200;let MSe=0,ASe=0,BSe=Date.now(),DSe=TSe;const ISe=[],LSe=5e3,FSe=10;function $Se(){const e=Date.now();return e-BSe>3e4&&(ASe=Math.max(0,ASe-2),BSe=e),!function(){const e=Date.now()-LSe;for(;ISe.length>0&&ISe[0]<e;)ISe.shift();return ISe.length>=FSe}()?ASe>0&&ISe.length<FSe/2&&(ASe=Math.max(0,ASe-.5),DSe=Math.max(TSe,.9*DSe)):(ASe++,DSe=Math.min(TSe*(1+.5*ASe),1200)),DSe}async function zSe(e,t,n=0){t(e),ISe.push(Date.now());const r=$Se(),a=Date.now()-MSe,i=Math.max(r,n),s=Math.max(0,i-a);s>0&&await new Promise(e=>setTimeout(e,s)),MSe=Date.now()}function qSe(e,t,n){return Promise.race([e,new Promise((e,r)=>setTimeout(()=>r(new Error(`${n} timeout after ${t}ms`)),t))])}const VSe={name:"VOLUME-LOCAL",targetPerHour:180,stockfishMode:"local_fast",localDepth:14,localNodes:15e5,analysisTimeout:8e3,delayBetweenGames:200},WSe={name:"LOCAL-DEEP",targetPerHour:25,stockfishMode:"local_deep",localDepth:22,localNodes:25e6,analysisTimeout:25e3,delayBetweenGames:400},QSe=["DrNykterstein","nihalsarin2004","FairChess_on_YouTube","LyonBeast","Bombegansen","GMWSO","Vladimirovich9000","penguingim1","AnishGiri","DanielNaroditsky","opperwezen","Fins","Polish_fighter3000","howitzer14","lachesisQ","TemurKuybokarov","Msb2","Zhigalko_Sergei","chaborak","Alireza2003","FerdinandPorsche","realDonaldDuck","GMKrikor","platinumcloud","BogdanDeac","mutdpro","yoseph2013","KontraJG","Javokhir_Sindarov","rasulovvugar","GMVallejo","kingsafety","muisback","DrNyktersteinFan","BaryshBufetov","Zhigalko_Igor","ShimanovAlex","Vladimirovich3000"],USe=["MagnusCarlsen","Hikaru","FabianoCaruana","LevonAronian","GarryKasparov","DanielNaroditsky","GothamChess","AnishGiri","WesleySo","Firouzja2003","NihalSarin","Naroditsky","MVL_Chess","Alireza_Firouz","lachesisQ","DominguezPerez","EricHansen","Rensch","BotezLive","Anna_Chess","GiriAnish","Grischuk","AronianLevon","SoWesley","CaruanaFabiano","Nepomniachtchi","DingLiren","CarlsenMagnus"];function KSe(e){const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t}async function HSe(e,t,n){try{const{simulateGame:r}=await Mh(async()=>{const{simulateGame:e}=await Promise.resolve().then(()=>S$);return{simulateGame:e}},void 0),{extractColorFlowSignature:a,predictFromColorFlow:i,calculateEquilibriumScores:s}=await Mh(async()=>{const{extractColorFlowSignature:e,predictFromColorFlow:t,calculateEquilibriumScores:n}=await Promise.resolve().then(()=>BJ);return{extractColorFlowSignature:e,predictFromColorFlow:t,calculateEquilibriumScores:n}},void 0),o=r(e),l=a(o.board,o.gameData,o.totalMoves),c=i(l,o.totalMoves,t,n),u=l.archetype||"unknown",d="white"===c.predictedWinner?"white_wins":"black"===c.predictedWinner?"black_wins":"draw";return{prediction:d,confidence:c.confidence,archetype:u}}catch(BPe){const n=GSe(t);return{prediction:n.prediction,confidence:n.confidence,archetype:n.archetype}}}function GSe(e){return e>100?{prediction:"white_wins",confidence:Math.min(85,55+Math.abs(e)/10),archetype:"positional_squeeze"}:e<-100?{prediction:"black_wins",confidence:Math.min(85,55+Math.abs(e)/10),archetype:"positional_squeeze"}:e>40?{prediction:"white_wins",confidence:45+Math.abs(e)/5,archetype:"central_domination"}:e<-40?{prediction:"black_wins",confidence:45+Math.abs(e)/5,archetype:"central_domination"}:e>15?{prediction:"white_wins",confidence:38,archetype:"piece_harmony"}:e<-15?{prediction:"black_wins",confidence:38,archetype:"piece_harmony"}:{prediction:"draw",confidence:42,archetype:"closed_maneuvering"}}async function YSe(e,t,n,r){var a,i,s;const o=[],l=KSe([...QSe]),c=Date.now(),u=2019+Math.floor(6*Math.random()),d=Math.floor(12*Math.random()),h=1+Math.floor(28*Math.random()),p=new Date(u,d,h).getTime(),m=Math.min(c,p+2592e6);null==r||r(`[Lichess] Batch ${n}: ${new Date(p).toISOString().slice(0,10)}`);for(const f of l.slice(0,10)){if(o.length>=e)break;try{const n=await Y_e(f,{max:30,since:p,until:m,rated:!0,opening:!0,moves:!0,pgnInJson:!0});for(const r of n.games){if(o.length>=e)break;const n=r.id.replace(/^li_/,"");if(t.has(n)||t.has(r.id))continue;if(((null==(a=r.moves)?void 0:a.split(" ").length)||0)<20)continue;const l=Z_e(r),c=(null==(i=r.players.white.user)?void 0:i.name)||"Anon",u=(null==(s=r.players.black.user)?void 0:s.name)||"Anon",d=r.players.white.rating||2e3,h=r.players.black.rating||2e3;o.push({id:r.id,name:`${c} (${d}) vs ${u} (${h})`,pgn:l,result:"white"===r.winner?"white_wins":"black"===r.winner?"black_wins":"draw",source:"lichess",rating:Math.max(d,h),whiteElo:d,blackElo:h,timeControl:r.speed||void 0})}await new Promise(e=>setTimeout(e,400))}catch(BPe){await new Promise(e=>setTimeout(e,800))}}return KSe(o)}async function ZSe(e,t,n){if(vSe())return null;const r=new lF;try{r.loadPgn(e.pgn)}catch{return null}const a=r.history();if(a.length<t)return null;r.reset();for(let l=0;l<t;l++)r.move(a[l]);const i=r.fen();try{const e=H_e(),t=new Promise((e,t)=>setTimeout(()=>t(new Error("Engine ready timeout")),15e3));try{await Promise.race([e.waitReady(),t])}catch(s){G_e(),await new Promise(e=>setTimeout(e,500));const e=H_e();await e.waitReady()}const r=new Promise((e,t)=>setTimeout(()=>t(new Error(`Analysis timeout after ${n.analysisTimeout}ms`)),n.analysisTimeout)),a=await Promise.race([e.analyzePosition(i,{depth:n.localDepth,nodes:n.localNodes}),r]);return{eval:a.evaluation.score,depth:a.evaluation.depth,nodes:a.evaluation.nodes,mode:n.stockfishMode}}catch(BPe){try{G_e(),await new Promise(e=>setTimeout(e,500));const e=H_e();await Promise.race([e.waitReady(),new Promise(e=>setTimeout(e,3e3))])}catch(o){await new Promise(e=>setTimeout(e,1e3))}return null}}async function XSe(e,t,n){const r=await ZSe(e,t,VSe);return r?{eval:r.eval,depth:r.depth,nodes:r.nodes}:null}async function JSe(e,t,n){const r=await ZSe(e,t,n);return r?{eval:r.eval,depth:r.depth,nodes:r.nodes}:null}async function eCe(e,t,n){const r=[],a=VSe;if(vSe())return r;null==n||n(`[${a.name}] Starting batch ${t}...`,0);try{await qSe(PSe(),8e3,"InitKnownIds")}catch(BPe){}const i=OSe();let s=[],o=[];try{s=await qSe(YSe(Math.ceil(.7*e),i,t,e=>null==n?void 0:n(e,5)),2e4,"FetchLichess")}catch(BPe){}try{o=await qSe(async function(e,t,n,r){const a=[],i=KSe([...USe]),s=Math.floor(36*Math.random());null==r||r(`[Chess.com] Batch ${n}: Archive offset ${s} months`);for(const o of i.slice(0,8)){if(a.length>=e)break;try{const n=await eSe(o,{max:30,months:2,monthOffset:s});for(const r of n.games){if(a.length>=e)break;const n=r.url.match(/\/game\/live\/(\d+)/),i=n?`cc_${n[1]}`:`cc_${r.end_time}`,s=i.replace(/^cc_/,"");if(t.has(s)||t.has(i))continue;if(!r.pgn||r.pgn.length<100)continue;const o="win"===r.white.result?"white_wins":"win"===r.black.result?"black_wins":"draw";a.push({id:i,name:`${r.white.username} (${r.white.rating}) vs ${r.black.username} (${r.black.rating})`,pgn:r.pgn,result:o,source:"chesscom",rating:Math.max(r.white.rating,r.black.rating),whiteElo:r.white.rating,blackElo:r.black.rating,timeControl:r.time_class||void 0})}await new Promise(e=>setTimeout(e,500))}catch(BPe){await new Promise(e=>setTimeout(e,1e3))}}return KSe(a)}(Math.ceil(.3*e),i,t,e=>null==n?void 0:n(e,10)),2e4,"FetchChessCom")}catch(BPe){}const l=KSe([...s,...o]).filter(e=>!ESe(e.id));if(0===l.length)return null==n||n(`[${a.name}] No fresh games found`,100),[];null==n||n(`[${a.name}] Processing ${l.length} fresh games...`,15);let c=0;for(const u of l){if(r.length>=e)break;if(vSe())return r;const t=Date.now(),i=15+Math.floor(20*Math.random());try{const s=await XSe(u,i);if(!s){c++;continue}const o=new lF;o.loadPgn(u.pgn);const d=o.history();o.reset();for(let e=0;e<i;e++)o.move(d[e]);const h=o.fen(),p=o.pgn(),m=await HSe(p,s.eval,s.depth),f=GSe(s.eval),g={gameId:u.id,gameName:u.name,moveNumber:i,fen:h,pgn:p,stockfishEval:s.eval,stockfishDepth:s.depth,stockfishMode:"local",stockfishNodes:s.nodes,stockfishPrediction:f.prediction,stockfishConfidence:f.confidence,hybridPrediction:m.prediction,hybridConfidence:m.confidence,hybridArchetype:m.archetype,actualResult:u.result,stockfishCorrect:f.prediction===u.result,hybridCorrect:m.prediction===u.result,dataSource:u.source,poolName:a.name,analysisTimeMs:Date.now()-t,whiteElo:u.whiteElo,blackElo:u.blackElo,timeControl:u.timeControl};r.push(g),c++;const y=15+c/l.length*85;null==n||n(`[${a.name}] ${r.length}/${e} analyzed`,y,g),await zSe(u.id,RSe,a.delayBetweenGames)}catch(BPe){c++}}return null==n||n(`[${a.name}] Completed: ${r.length} predictions`,100),r}async function tCe(e,t){if(0===e.length)return null;const n=`pool-${t}-${Date.now()}-${Math.random().toString(36).slice(2,6)}`;try{const r=e.filter(e=>e.stockfishCorrect).length,a=e.filter(e=>e.hybridCorrect).length,{data:i,error:s}=await KC.from("chess_benchmark_results").insert({run_id:n,data_source:"dual_pool_pipeline",total_games:e.length,completed_games:e.length,prediction_move_number:25,stockfish_accuracy:r/e.length*100,hybrid_accuracy:a/e.length*100,stockfish_wins:e.filter(e=>e.stockfishCorrect&&!e.hybridCorrect).length,hybrid_wins:e.filter(e=>e.hybridCorrect&&!e.stockfishCorrect).length,both_correct:e.filter(e=>e.stockfishCorrect&&e.hybridCorrect).length,both_wrong:e.filter(e=>!e.stockfishCorrect&&!e.hybridCorrect).length,stockfish_version:"LOCAL-DEEP"===t?"Stockfish 17 NNUE Local D30":"Lichess Cloud SF17",stockfish_mode:t.toLowerCase(),hybrid_version:`En Pensent v6.92 (${t})`,data_quality_tier:"dual_pool",games_analyzed:e.map(e=>e.gameName)}).select("id").single();if(s)return null;const o=i.id,l=e.map(e=>({benchmark_id:o,game_id:CSe(e.gameId),game_name:e.gameName,move_number:e.moveNumber,fen:e.fen,pgn:e.pgn,stockfish_eval:e.stockfishEval,stockfish_depth:e.stockfishDepth,stockfish_prediction:e.stockfishPrediction,stockfish_confidence:e.stockfishConfidence,hybrid_prediction:e.hybridPrediction,hybrid_confidence:e.hybridConfidence,hybrid_archetype:e.hybridArchetype,actual_result:e.actualResult,stockfish_correct:e.stockfishCorrect,hybrid_correct:e.hybridCorrect,position_hash:rSe(e.fen),data_source:e.dataSource,data_quality_tier:"dual_pool",lichess_id_verified:!0,time_control:e.timeControl||null,white_elo:e.whiteElo||null,black_elo:e.blackElo||null})),c=25;for(let e=0;e<l.length;e+=c){const t=l.slice(e,e+c),{error:n}=await KC.from("chess_prediction_attempts").upsert(t,{onConflict:"game_id",ignoreDuplicates:!0})}return n}catch(BPe){return null}}const nCe="8.03-RECALIBRATED",rCe={cloudBatchSize:5,localBatchSize:1,cloudBatchIntervalMs:1e4,localBatchIntervalMs:45e3,maxConsecutiveErrors:3,recoveryDelayMs:500,healthCheckIntervalMs:12e4},aCe=9e4,iCe={isRunning:!1,isPaused:!1,totalPredictions:0,totalCloudPredictions:0,totalLocalPredictions:0,sessionStartedAt:null,sessionPredictions:0,consecutiveErrors:0,lastErrorAt:null,lastSuccessAt:null,recoveryCount:0,cloudPoolStatus:"idle",localPoolStatus:"idle",currentBatchNumber:0,batchStartedAt:null};let sCe=null,oCe=null,lCe=null;const cCe=new Set;function uCe(e){return cCe.add(e),()=>cCe.delete(e)}function dCe(e,t){cCe.forEach(n=>{try{n({...iCe},e,t)}catch(BPe){}})}let hCe=!1;async function pCe(){if(!hCe){hCe=!0;try{const e={state_type:"auto_evolution_engine",genes:{version:nCe,total_predictions:iCe.totalPredictions,total_cloud:iCe.totalCloudPredictions,total_local:iCe.totalLocalPredictions,recovery_count:iCe.recoveryCount,consecutive_errors:iCe.consecutiveErrors},fitness_score:0===iCe.consecutiveErrors?1:Math.max(0,1-.2*iCe.consecutiveErrors),generation:iCe.currentBatchNumber,last_mutation_at:(new Date).toISOString()},{error:t}=await KC.from("evolution_state").upsert(e,{onConflict:"state_type",ignoreDuplicates:!1});t&&!t.message.includes("duplicate key")&&t.message.includes("unique constraint")}catch(BPe){}finally{hCe=!1}}}async function mCe(){try{G_e(),await new Promise(e=>setTimeout(e,500));const e=H_e();await e.waitReady()}catch(BPe){}}async function fCe(){iCe.recoveryCount++,dCe("recovery_started",{count:iCe.recoveryCount}),wCe(),await new Promise(e=>setTimeout(e,Math.min(rCe.recoveryDelayMs,1e3))),await mCe(),iCe.consecutiveErrors=0,iCe.cloudPoolStatus="idle",iCe.localPoolStatus="idle",await pCe(),iCe.isRunning&&!iCe.isPaused&&(await new Promise(e=>setTimeout(e,1e3)),bCe()),dCe("recovery_complete",{count:iCe.recoveryCount})}function gCe(e,t,n){return Promise.race([e,new Promise((e,r)=>setTimeout(()=>r(new Error(`${n} timeout after ${t}ms`)),t))])}async function yCe(){if(!iCe.isPaused&&iCe.isRunning)if(vSe())iCe.isRunning&&!iCe.isPaused&&(sCe=setTimeout(yCe,3e4));else{iCe.cloudPoolStatus="running",iCe.batchStartedAt=new Date,dCe("cloud_batch_started",{batch:iCe.currentBatchNumber});try{const e=await gCe(eCe(rCe.cloudBatchSize,iCe.currentBatchNumber,(e,t,n)=>{n&&dCe("prediction_complete",{pool:"volume",prediction:n,sessionTotal:iCe.sessionPredictions})}),aCe,"CloudBatch");if(e.length>0){const t=await gCe(tCe(e,"VOLUME-LOCAL"),3e4,"SavePredictions");iCe.totalPredictions+=e.length,iCe.totalCloudPredictions+=e.length,iCe.sessionPredictions+=e.length,iCe.consecutiveErrors=0,iCe.lastSuccessAt=new Date,dCe("cloud_batch_complete",{count:e.length,runId:t,totalSession:iCe.sessionPredictions,totalLifetime:iCe.totalPredictions})}iCe.cloudPoolStatus="idle",await gCe(pCe(),1e4,"PersistState")}catch(BPe){if(iCe.consecutiveErrors++,iCe.lastErrorAt=new Date,iCe.cloudPoolStatus="error",dCe("cloud_batch_error",{error:BPe,consecutiveErrors:iCe.consecutiveErrors}),String(BPe).includes("timeout"))try{G_e(),await new Promise(e=>setTimeout(e,2e3))}catch{}iCe.consecutiveErrors>=rCe.maxConsecutiveErrors&&await fCe()}iCe.currentBatchNumber++,iCe.isRunning&&!iCe.isPaused&&(sCe=setTimeout(yCe,rCe.cloudBatchIntervalMs))}}async function vCe(){if(!iCe.isPaused&&iCe.isRunning)if(vSe())iCe.isRunning&&!iCe.isPaused&&(oCe=setTimeout(vCe,3e4));else{iCe.localPoolStatus="running",dCe("local_batch_started",{batch:iCe.currentBatchNumber});try{const e=await gCe(async function(e,t,n){const r=[],a=WSe;null==n||n(`[${a.name}] Starting batch ${t}...`,0);try{await qSe(PSe(),8e3,"InitKnownIds")}catch(BPe){}const i=OSe(),s=(await YSe(3*e,i,t+100,e=>null==n?void 0:n(e,5))).filter(e=>!ESe(e.id));if(0===s.length)return null==n||n(`[${a.name}] No fresh games found`,100),[];null==n||n(`[${a.name}] Deep analyzing ${Math.min(s.length,e)} games...`,10);let o=0;for(const l of s){if(r.length>=e)break;if(vSe())return r;const t=Date.now(),i=15+Math.floor(20*Math.random()),s=10+o/e*90;null==n||n(`[${a.name}] Deep analyzing: ${l.name}`,s);try{const c=await JSe(l,i,a);if(!c){o++;continue}const u=new lF;u.loadPgn(l.pgn);const d=u.history();u.reset();for(let e=0;e<i;e++)u.move(d[e]);const h=u.fen(),p=u.pgn(),m=await HSe(p,c.eval,c.depth),f=GSe(c.eval),g={gameId:l.id,gameName:l.name,moveNumber:i,fen:h,pgn:p,stockfishEval:c.eval,stockfishDepth:c.depth,stockfishMode:"local",stockfishNodes:c.nodes,stockfishPrediction:f.prediction,stockfishConfidence:f.confidence,hybridPrediction:m.prediction,hybridConfidence:m.confidence,hybridArchetype:m.archetype,actualResult:l.result,stockfishCorrect:f.prediction===l.result,hybridCorrect:m.prediction===l.result,dataSource:l.source,poolName:a.name,analysisTimeMs:Date.now()-t,whiteElo:l.whiteElo,blackElo:l.blackElo,timeControl:l.timeControl};r.push(g),o++,null==n||n(`[${a.name}] ${r.length}/${e} deep analyzed`,s+5,g),await zSe(l.id,RSe,a.delayBetweenGames)}catch(BPe){o++}}return null==n||n(`[${a.name}] Completed: ${r.length} deep predictions`,100),r}(rCe.localBatchSize,iCe.currentBatchNumber+1e3,(e,t,n)=>{n&&dCe("prediction_complete",{pool:"deep",prediction:n,sessionTotal:iCe.sessionPredictions})}),12e4,"LocalBatch");if(e.length>0){const t=await gCe(tCe(e,"LOCAL-DEEP"),3e4,"SavePredictions");iCe.totalPredictions+=e.length,iCe.totalLocalPredictions+=e.length,iCe.sessionPredictions+=e.length,iCe.consecutiveErrors=0,iCe.lastSuccessAt=new Date,dCe("local_batch_complete",{count:e.length,runId:t,totalSession:iCe.sessionPredictions,totalLifetime:iCe.totalPredictions})}iCe.localPoolStatus="idle",await gCe(pCe(),1e4,"PersistState")}catch(BPe){if(iCe.consecutiveErrors++,iCe.lastErrorAt=new Date,iCe.localPoolStatus="error",dCe("local_batch_error",{error:BPe}),String(BPe).includes("timeout"))try{G_e(),await new Promise(e=>setTimeout(e,2e3))}catch{}iCe.consecutiveErrors>=rCe.maxConsecutiveErrors&&await fCe()}iCe.isRunning&&!iCe.isPaused&&(oCe=setTimeout(vCe,rCe.localBatchIntervalMs))}}function xCe(){gCe(async function(){try{H_e().available||await mCe();const{error:e}=await KC.from("chess_prediction_attempts").select("id",{head:!0,count:"exact"}).limit(1);return!e}catch(BPe){return!1}}(),3e4,"HealthCheck").then(e=>{!e&&iCe.isRunning&&fCe()}).catch(e=>{iCe.isRunning&&fCe()}),iCe.isRunning&&(lCe=setTimeout(xCe,rCe.healthCheckIntervalMs))}function bCe(){sCe=setTimeout(yCe,1e3),oCe=setTimeout(vCe,3e4),lCe=setTimeout(xCe,rCe.healthCheckIntervalMs)}function wCe(){sCe&&(clearTimeout(sCe),sCe=null),oCe&&(clearTimeout(oCe),oCe=null),lCe&&(clearTimeout(lCe),lCe=null)}async function kCe(){if(!iCe.isRunning){try{await gCe(async function(){try{const{count:e}=await KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0});e&&(iCe.totalPredictions=e);const{count:t}=await KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).gte("stockfish_depth",15).lte("stockfish_depth",22);t&&(iCe.totalCloudPredictions=t);const{count:n}=await KC.from("chess_prediction_attempts").select("*",{count:"exact",head:!0}).gte("stockfish_depth",25);n&&(iCe.totalLocalPredictions=n);const{data:r}=await KC.from("evolution_state").select("*").eq("state_type","auto_evolution_engine").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(null==r?void 0:r.genes){const e=r.genes;iCe.currentBatchNumber=r.generation||0,iCe.recoveryCount=e.recovery_count||0}}catch(BPe){}}(),15e3,"LoadStats")}catch(BPe){}iCe.isRunning=!0,iCe.isPaused=!1,iCe.sessionStartedAt=new Date,iCe.sessionPredictions=0,iCe.consecutiveErrors=0;try{const e=H_e();await gCe(e.waitReady(),2e4,"StockfishWarmup")}catch(BPe){}bCe();try{await gCe(pCe(),1e4,"PersistState")}catch{}dCe("engine_started",{version:nCe,totalPredictions:iCe.totalPredictions})}}function NCe(){iCe.isRunning&&!iCe.isPaused&&(iCe.isPaused=!0,wCe(),dCe("engine_paused"))}function jCe(){iCe.isRunning&&iCe.isPaused&&(iCe.isPaused=!1,bCe(),dCe("engine_resumed"))}function _Ce(){iCe.isRunning=!1,iCe.isPaused=!1,wCe(),pCe(),dCe("engine_stopped",{sessionPredictions:iCe.sessionPredictions})}function SCe(){return{...iCe}}function CCe(e){iCe.isRunning&&("cloud"===e?yCe():vCe())}const PCe="7.0-UNBLOCKABLE";function ECe({children:e,autoStart:t=!0}){const n=ct.useRef(!1),r=ct.useRef(null);return ct.useEffect(()=>{if(!t)return;if(n.current)return;n.current=!0;const e=uCe((e,t,n)=>{"cloud_batch_complete"===t||"local_batch_complete"===t?RCe(t,n):"recovery_complete"===t||"cloud_batch_error"!==t&&"local_batch_error"!==t||RCe("batch_error",{error:String(null==n?void 0:n.error)})}),a=async()=>{if(!SCe().isRunning)try{const e=kCe(),t=new Promise((e,t)=>setTimeout(()=>t(new Error("Start timeout")),3e4));await Promise.race([e,t]);const n=SCe();await RCe("auto_start",{version:PCe,totalPredictions:n.totalPredictions})}catch(BPe){setTimeout(a,15e3)}};a(),r.current=setInterval(async()=>{SCe().isRunning||await a()},12e4);const i=async()=>{if("visible"===document.visibilityState){SCe().isRunning||await a()}};return document.addEventListener("visibilitychange",i),()=>{e(),document.removeEventListener("visibilitychange",i),r.current&&clearInterval(r.current)}},[t]),xt.jsx(xt.Fragment,{children:e})}async function RCe(e,t){try{const n=KC.from("evolution_state").insert({state_type:`v7.0_${e}`,genes:{version:PCe,event:e,timestamp:(new Date).toISOString(),...t},fitness_score:100,generation:0}),r=new Promise((e,t)=>setTimeout(()=>t(new Error("Log timeout")),5e3));await Promise.race([n,r])}catch(BPe){}}const OCe=ct.lazy(()=>Mh(()=>import("./MyPalettes-cs59ko9r.js"),__vite__mapDeps([5,6,7]))),TCe=ct.lazy(()=>Mh(()=>import("./MyVision-V3Aqa4XQ.js"),__vite__mapDeps([8,2,3,4,9,6,10,11,12,13]))),MCe=ct.lazy(()=>Mh(()=>import("./About-CZtBACU7.js"),__vite__mapDeps([14,15,16,17,18]))),ACe=ct.lazy(()=>Mh(()=>import("./Investors-ByC4c675.js"),__vite__mapDeps([19,6,10,20,21,16]))),BCe=ct.lazy(()=>Mh(()=>import("./Analytics-mj0rqp0R.js"),__vite__mapDeps([22,6,23,24]))),DCe=ct.lazy(()=>Mh(()=>import("./Leaderboard-Dl0ov8MN.js"),__vite__mapDeps([25,26,27,28]))),ICe=ct.lazy(()=>Mh(()=>import("./Play-bDlMh7pn.js"),__vite__mapDeps([29,26,30,31,1,32]))),LCe=ct.lazy(()=>Mh(()=>import("./CreativeMode-D5Y0MnKR.js"),__vite__mapDeps([33,2,3,4,30]))),FCe=ct.lazy(()=>Mh(()=>import("./GameHistory-Ogy8Y_to.js"),__vite__mapDeps([34,6]))),$Ce=ct.lazy(()=>Mh(()=>import("./News-DF-u8tmJ.js"),[])),zCe=ct.lazy(()=>Mh(()=>import("./QRMockup-CbW5TwL3.js"),__vite__mapDeps([35,1]))),qCe=ct.lazy(()=>Mh(()=>import("./OrderPrint-CcE8VPTF.js"),__vite__mapDeps([36,0,1,37,32]))),VCe=ct.lazy(()=>Mh(()=>import("./Marketplace-djDqF-Ix.js"),__vite__mapDeps([38,39,40,6,13,9]))),WCe=ct.lazy(()=>Mh(()=>import("./AdminSeedMarketplace-B30V8gBh.js"),[])),QCe=ct.lazy(()=>Mh(()=>import("./VisualizationRedirect-B0yYR0nE.js"),[])),UCe=ct.lazy(()=>Mh(()=>import("./GalleryDetailRedirect-D8G-PwOt.js"),[])),KCe=ct.lazy(()=>Mh(()=>import("./MarketplaceDetailRedirect-mcIXM2tc.js"),[])),HCe=ct.lazy(()=>Mh(()=>import("./PaletteAdminPage-CXM6mzzj.js"),[])),GCe=ct.lazy(()=>Mh(()=>import("./AdminModeration-GOVjgd_d.js"),__vite__mapDeps([41,4]))),YCe=ct.lazy(()=>Mh(()=>import("./AdminEconomics-CmiAE7NE.js"),__vite__mapDeps([42,43,44,45,46,47,6]))),ZCe=ct.lazy(()=>Mh(()=>import("./Account-DoIcZ4vU.js"),__vite__mapDeps([48,3,4,10,11,12,6,13,49,18]))),XCe=ct.lazy(()=>Mh(()=>import("./BookGenerator-BRsKPBU8.js"),__vite__mapDeps([50,21,7]))),JCe=ct.lazy(()=>Mh(()=>import("./EducationFund-DkaLQRKx.js"),__vite__mapDeps([51,17,45,6]))),ePe=ct.lazy(()=>Mh(()=>import("./CreatorDashboard-DPST0BRG.js"),__vite__mapDeps([52,15,10,45,47]))),tPe=ct.lazy(()=>Mh(()=>import("./AdminWithdrawals-BMAmJUuw.js"),__vite__mapDeps([53,6]))),nPe=ct.lazy(()=>Mh(()=>import("./AdminDMCA-gh_5ZLdV.js"),__vite__mapDeps([54,55,6]))),rPe=ct.lazy(()=>Mh(()=>import("./AdminWatermarkVerification-DWLgxFSx.js"),__vite__mapDeps([56,12,6]))),aPe=ct.lazy(()=>Mh(()=>import("./AdminBatchWatermarkVerification-kPaJmoDI.js"),__vite__mapDeps([57,12]))),iPe=ct.lazy(()=>Mh(()=>import("./DMCACounterNotification-CYDeO2Vn.js"),__vite__mapDeps([58,40,12]))),sPe=ct.lazy(()=>Mh(()=>import("./DMCAStatusTracking-MSzzk5SQ.js"),__vite__mapDeps([59,12,10,55]))),oPe=ct.lazy(()=>Mh(()=>import("./VisionScannerPage-Bgu7IQwc.js"),__vite__mapDeps([60,28,61,62,6,18]))),lPe=ct.lazy(()=>Mh(()=>import("./TermsOfService-CxrKTHmW.js"),[])),cPe=ct.lazy(()=>Mh(()=>import("./PrivacyPolicy-CNGhBPBB.js"),[])),uPe=ct.lazy(()=>Mh(()=>import("./DMCA-Cg6B4Hhk.js"),__vite__mapDeps([63,40,55,20]))),dPe=ct.lazy(()=>Mh(()=>import("./PremiumAnalytics-ByHuHnoV.js"),__vite__mapDeps([64,43,45,37]))),hPe=ct.lazy(()=>Mh(()=>import("./AdminCEODashboard-COkSGBuB.js"),__vite__mapDeps([65,6,49,43,47,66,46,67,68,69,10,70]))),pPe=ct.lazy(()=>Mh(()=>import("./AdminAIArtBank-C88H2GCs.js"),__vite__mapDeps([71,13,6]))),mPe=ct.lazy(()=>Mh(()=>import("./OpeningEncyclopedia-DEdDV9-e.js"),[])),fPe=ct.lazy(()=>Mh(()=>import("./CodeAnalysis-BjliSulv.js"),__vite__mapDeps([72,68,24,66,46,67,69,27,47,17,10,6,73,74]))),gPe=ct.lazy(()=>Mh(()=>import("./AcademicPaper-BcuZ7eZs.js"),[])),yPe=ct.lazy(()=>Mh(()=>import("./SDKDocs-Cn3zdf8g.js"),__vite__mapDeps([75,68]))),vPe=ct.lazy(()=>Mh(()=>import("./SharedAnalysisReport-CWF9rO-p.js"),__vite__mapDeps([76,68,69,6]))),xPe=ct.lazy(()=>Mh(()=>import("./WhyThisMatters-BFeC6DRR.js"),[])),bPe=ct.lazy(()=>Mh(()=>import("./InvestorPortal-BN5CNpMd.js"),__vite__mapDeps([77,68,70,49]))),wPe=ct.lazy(()=>Mh(()=>import("./EarlyAccess-DXmw_Ain.js"),[])),kPe=ct.lazy(()=>Mh(()=>import("./StockPredictions-B-BbMD7w.js"),__vite__mapDeps([78,12,44,10,62,79,37]))),NPe=ct.lazy(()=>Mh(()=>import("./StrategicPlan-TOxV0W8s.js"),__vite__mapDeps([80,27]))),jPe=ct.lazy(()=>Mh(()=>import("./ScalpingTerminalPage-DTLAvQtx.js"),__vite__mapDeps([81,79,62]))),_Pe=ct.lazy(()=>Mh(()=>import("./OptionsScalpingPage-UjEiROgj.js"),[])),SPe=ct.lazy(()=>Mh(()=>import("./Showcase-CC-ItQZ5.js"),__vite__mapDeps([82,74]))),CPe=ct.lazy(()=>Mh(()=>import("./AdminSystemVitals-D5oWTV_l.js"),__vite__mapDeps([83,43,84,10]))),PPe=ct.lazy(()=>Mh(()=>import("./Benchmark-DR5eyCvF.js"),__vite__mapDeps([85,86,6,26,73,61,84,68,10,27,23,87]))),EPe=ct.lazy(()=>Mh(()=>import("./ProofCenter-BwcNk0W0.js"),__vite__mapDeps([88,86,6,70,67,39]))),RPe=ct.lazy(()=>Mh(()=>import("./NotFound-B01Yvo_L.js"),[])),OPe=new qw({defaultOptions:{queries:{staleTime:3e5,retry:1,refetchOnWindowFocus:!1}}}),TPe=()=>xt.jsx(QD,{componentName:"App",children:xt.jsx(Yw,{client:OPe,children:xt.jsx(oP,{children:xt.jsx(Q_e,{enabled:!0,children:xt.jsx(ECe,{autoStart:!0,children:xt.jsx(q_e,{autoStart:!0,interval:3e4,children:xt.jsxs(Hb,{children:[xt.jsx(By,{}),xt.jsx(iv,{}),xt.jsx(xD,{}),xt.jsx(kD,{}),xt.jsx(AD,{}),xt.jsxs($N,{children:[xt.jsx(cI,{}),xt.jsx(rI,{}),xt.jsx(oI,{}),xt.jsx(OD,{}),xt.jsx(BD,{}),xt.jsxs(yN,{children:[xt.jsx(fN,{path:"/",element:xt.jsx(n8,{})}),xt.jsx(fN,{path:"/my-palettes",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(OCe,{})})}),xt.jsx(fN,{path:"/my-vision",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(TCe,{})})}),xt.jsx(fN,{path:"/my-vision/:id",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(UCe,{})})}),xt.jsx(fN,{path:"/about",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(MCe,{})})}),xt.jsx(fN,{path:"/play",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(ICe,{})})}),xt.jsx(fN,{path:"/creative-mode",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(LCe,{})})}),xt.jsx(fN,{path:"/game-history",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(FCe,{})})}),xt.jsx(fN,{path:"/v/:shareId",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(QCe,{})})}),xt.jsx(fN,{path:"/g/:gameHash",element:xt.jsx(A_e,{})}),xt.jsx(fN,{path:"/openings",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(mPe,{})})}),xt.jsx(fN,{path:"/code-analysis",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(fPe,{})})}),xt.jsx(fN,{path:"/analysis/:id",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(vPe,{})})}),xt.jsx(fN,{path:"/account",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(ZCe,{})})}),xt.jsx(fN,{path:"/terms",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(lPe,{})})}),xt.jsx(fN,{path:"/privacy",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(cPe,{})})}),xt.jsx(fN,{path:"/dmca",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(uPe,{})})}),xt.jsx(fN,{path:"/dmca/counter-notification",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(iPe,{})})}),xt.jsx(fN,{path:"/dmca/status",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(sPe,{})})}),xt.jsx(fN,{path:"/marketplace",element:xt.jsx(lI,{featureName:"Marketplace",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(VCe,{})})})}),xt.jsx(fN,{path:"/marketplace/:id",element:xt.jsx(lI,{featureName:"Marketplace",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(KCe,{})})})}),xt.jsx(fN,{path:"/order-print",element:xt.jsx(lI,{featureName:"Print Orders",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(qCe,{})})})}),xt.jsx(fN,{path:"/book",element:xt.jsx(lI,{featureName:"Book Generator",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(XCe,{})})})}),xt.jsx(fN,{path:"/analytics",element:xt.jsx(lI,{featureName:"Analytics",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(BCe,{})})})}),xt.jsx(fN,{path:"/leaderboard",element:xt.jsx(lI,{featureName:"Leaderboard",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(DCe,{})})})}),xt.jsx(fN,{path:"/premium-analytics",element:xt.jsx(lI,{featureName:"Premium Analytics",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(dPe,{})})})}),xt.jsx(fN,{path:"/creator-dashboard",element:xt.jsx(lI,{featureName:"Creator Dashboard",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(ePe,{})})})}),xt.jsx(fN,{path:"/investors",element:xt.jsx(lI,{featureName:"Investors",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(ACe,{})})})}),xt.jsx(fN,{path:"/investor-portal",element:xt.jsx(lI,{featureName:"Investor Portal",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(bPe,{})})})}),xt.jsx(fN,{path:"/education-fund",element:xt.jsx(lI,{featureName:"Education Fund",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(JCe,{})})})}),xt.jsx(fN,{path:"/news",element:xt.jsx(lI,{featureName:"News",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx($Ce,{})})})}),xt.jsx(fN,{path:"/why-this-matters",element:xt.jsx(lI,{featureName:"Why This Matters",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(xPe,{})})})}),xt.jsx(fN,{path:"/early-access",element:xt.jsx(lI,{featureName:"Early Access",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(wPe,{})})})}),xt.jsx(fN,{path:"/showcase",element:xt.jsx(lI,{featureName:"Showcase",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(SPe,{})})})}),xt.jsx(fN,{path:"/qr-preview",element:xt.jsx(lI,{featureName:"QR Preview",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(zCe,{})})})}),xt.jsx(fN,{path:"/academic-paper",element:xt.jsx(lI,{featureName:"Academic Paper",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(gPe,{})})})}),xt.jsx(fN,{path:"/sdk-docs",element:xt.jsx(lI,{featureName:"SDK Documentation",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(yPe,{})})})}),xt.jsx(fN,{path:"/vision-scanner",element:xt.jsx(lI,{featureName:"Vision Scanner",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(oPe,{})})})}),xt.jsx(fN,{path:"/stock-predictions",element:xt.jsx(lI,{featureName:"Stock Predictions",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(kPe,{})})})}),xt.jsx(fN,{path:"/strategic-plan",element:xt.jsx(lI,{featureName:"Strategic Plan",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(NPe,{})})})}),xt.jsx(fN,{path:"/trading",element:xt.jsx(lI,{featureName:"Trading Terminal",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(jPe,{})})})}),xt.jsx(fN,{path:"/options",element:xt.jsx(lI,{featureName:"Options Scalping",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(_Pe,{})})})}),xt.jsx(fN,{path:"/benchmark",element:xt.jsx(lI,{featureName:"Benchmark",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(PPe,{})})})}),xt.jsx(fN,{path:"/proof",element:xt.jsx(lI,{featureName:"Proof Center",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(EPe,{})})})}),xt.jsx(fN,{path:"/admin/ceo-dashboard",element:xt.jsx(lI,{featureName:"CEO Dashboard",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(hPe,{})})})}),xt.jsx(fN,{path:"/admin/system-vitals",element:xt.jsx(lI,{featureName:"System Vitals",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(CPe,{})})})}),xt.jsx(fN,{path:"/admin/seed-marketplace",element:xt.jsx(lI,{featureName:"Seed Marketplace",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(WCe,{})})})}),xt.jsx(fN,{path:"/admin/palettes",element:xt.jsx(lI,{featureName:"Palette Admin",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(HCe,{})})})}),xt.jsx(fN,{path:"/admin/moderation",element:xt.jsx(lI,{featureName:"Moderation",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(GCe,{})})})}),xt.jsx(fN,{path:"/admin/economics",element:xt.jsx(lI,{featureName:"Economics",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(YCe,{})})})}),xt.jsx(fN,{path:"/admin/withdrawals",element:xt.jsx(lI,{featureName:"Withdrawals",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(tPe,{})})})}),xt.jsx(fN,{path:"/admin/dmca",element:xt.jsx(lI,{featureName:"DMCA Admin",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(nPe,{})})})}),xt.jsx(fN,{path:"/admin/watermark-verification",element:xt.jsx(lI,{featureName:"Watermark Verification",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(rPe,{})})})}),xt.jsx(fN,{path:"/admin/batch-watermark-verification",element:xt.jsx(lI,{featureName:"Batch Watermark Verification",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(aPe,{})})})}),xt.jsx(fN,{path:"/admin/ai-art-bank",element:xt.jsx(lI,{featureName:"AI Art Bank",children:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(pPe,{})})})}),xt.jsx(fN,{path:"*",element:xt.jsx(ct.Suspense,{fallback:xt.jsx(uI,{}),children:xt.jsx(RPe,{})})})]})]})]})})})})})})});function MPe(){if("undefined"!=typeof window){const e=160;let t=!1;setInterval(()=>{const n=window.outerWidth-window.innerWidth>e,r=window.outerHeight-window.innerHeight>e;n||r?t||(t=!0):t=!1},1e3),document.addEventListener("contextmenu",e=>{const t=e.target;(t.closest('[data-protected="true"]')||t.closest("canvas"))&&e.preventDefault()}),document.addEventListener("keydown",e=>{!e.ctrlKey&&!e.metaKey||"s"!==e.key&&"u"!==e.key&&"S"!==e.key&&"U"!==e.key||e.preventDefault()})}}"undefined"!=typeof window&&MPe(),window.addEventListener("error",e=>{WD(e.error||e.message,{errorType:"runtime",metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener("unhandledrejection",e=>{const t=e.reason;WD(t instanceof Error?t:String(t),{errorType:"runtime",metadata:{type:"unhandledrejection"}})}),window.addEventListener("beforeunload",()=>{if(qD&&clearTimeout(qD),zD.length>0&&navigator.sendBeacon){const e=JSON.stringify({errors:zD});navigator.sendBeacon("/api/collect-errors",e)}}),MPe(),Eh(document.getElementById("root")).render(xt.jsx(ut.StrictMode,{children:xt.jsx(TPe,{})}));export{kg as $,wm as A,vD as B,Mm as C,yT as D,rf as E,uf as F,yf as G,a6 as H,gg as I,yg as J,bg as K,Pf as L,bf as M,cg as N,Nf as O,$f as P,qN as Q,dt as R,rz as S,wg as T,Pg as U,Lm as V,Ng as W,Zm as X,i6 as Y,Ag as Z,If as _,eN as a,H6 as a$,B$ as a0,M$ as a1,D$ as a2,Mg as a3,Mf as a4,DD as a5,$D as a6,rH as a7,Wm as a8,Bz as a9,kje as aA,Mje as aB,Nle as aC,dje as aD,ff as aE,Q1 as aF,Vwe as aG,KU as aH,lg as aI,tg as aJ,Xf as aK,$m as aL,qm as aM,Tf as aN,Qf as aO,tf as aP,dI as aQ,G3 as aR,Z3 as aS,Y3 as aT,e4 as aU,t4 as aV,M6 as aW,qZ as aX,Cg as aY,zm as aZ,Cf as a_,pg as aa,Im as ab,zf as ac,Uf as ad,mg as ae,ID as af,LD as ag,MD as ah,tN as ai,QN as aj,YX as ak,e6 as al,jg as am,Cy as an,Gm as ao,vm as ap,dH as aq,tk as ar,mN as as,Rg as at,Jm as au,ug as av,FD as aw,Xle as ax,O_e as ay,GNe as az,Yy as b,xm as b$,h4 as b0,EF as b1,MY as b2,RY as b3,TY as b4,sf as b5,TF as b6,uJ as b7,dJ as b8,mm as b9,qh as bA,ef as bB,Bm as bC,Km as bD,Em as bE,ig as bF,Eg as bG,w$ as bH,Gf as bI,Xm as bJ,Hm as bK,Jf as bL,Zk as bM,Mh as bN,qf as bO,Om as bP,lf as bQ,Rm as bR,df as bS,f2 as bT,ZC as bU,Hb as bV,Gb as bW,Yb as bX,Zb as bY,g2 as bZ,k2 as b_,R_e as ba,Ywe as bb,t8 as bc,jU as bd,_U as be,SU as bf,CU as bg,PU as bh,EU as bi,RU as bj,OU as bk,TU as bl,MU as bm,AU as bn,BU as bo,DU as bp,IU as bq,LU as br,FU as bs,nf as bt,UQ as bu,Pm as bv,Nm as bw,rg as bx,wf as by,hg as bz,Oh as c,_f as c$,km as c0,k5 as c1,b4 as c2,ZU as c3,YU as c4,eK as c5,tK as c6,NU as c7,fg as c8,ng as c9,lv as cA,tX as cB,np as cC,nX as cD,rX as cE,Uh as cF,pI as cG,Vh as cH,QZ as cI,Kh as cJ,Dm as cK,vp as cL,Q$ as cM,eb as cN,Xb as cO,dw as cP,lw as cQ,Dw as cR,Rw as cS,Gw as cT,ew as cU,bw as cV,Cm as cW,Am as cX,CF as cY,PF as cZ,Qm as c_,qF as ca,zF as cb,j$ as cc,IY as cd,WQ as ce,Lf as cf,mf as cg,eL as ch,eg as ci,EZ as cj,MZ as ck,AZ as cl,DZ as cm,IZ as cn,K4 as co,H4 as cp,G4 as cq,lH as cr,oH as cs,jf as ct,sH as cu,rG as cv,OY as cw,ut as cx,tp as cy,wp as cz,Rf as d,M_e as d$,S0 as d0,QD as d1,je as d2,Ne as d3,Zf as d4,hf as d5,dL as d6,Sm as d7,GH as d8,iH as d9,Lme as dA,Aee as dB,tge as dC,pge as dD,fee as dE,I8 as dF,Vye as dG,dm as dH,E9 as dI,Nye as dJ,dle as dK,Jle as dL,Ege as dM,uee as dN,jF as dO,_F as dP,qse as dQ,Wf as dR,SF as dS,NF as dT,RI as dU,OI as dV,wI as dW,Vm as dX,W6 as dY,DY as dZ,ag as d_,BZ as da,dg as db,og as dc,vf as dd,W_e as de,sK as df,iK as dg,uSe as dh,gK as di,h2 as dj,Hf as dk,A5 as dl,Og as dm,T$ as dn,Ff as dp,EX as dq,lI as dr,P0 as ds,vbe as dt,Dne as du,Fee as dv,Yee as dw,jee as dx,xxe as dy,pee as dz,T6 as e,Tg as e$,i8 as e0,ZX as e1,VX as e2,WX as e3,QX as e4,Sg as e5,UX as e6,mL as e7,af as e8,BF as e9,iee as eA,Kge as eB,dee as eC,Zee as eD,Lee as eE,Hge as eF,aG as eG,uV as eH,dV as eI,hV as eJ,FY as eK,zY as eL,$Y as eM,r8 as eN,BY as eO,fX as eP,gX as eQ,mX as eR,LY as eS,pJ as eT,$_e as eU,L_e as eV,B_e as eW,D_e as eX,aX as eY,iX as eZ,sX as e_,l2 as ea,J1 as eb,IX as ec,n4 as ed,SX as ee,uX as ef,dX as eg,pX as eh,hL as ei,kF as ej,TX as ek,mJ as el,Fm as em,F1 as en,Ef as eo,xme as ep,bme as eq,lse as er,_me as es,Dce as et,Uge as eu,Xge as ev,cye as ew,Txe as ex,P9 as ey,oee as ez,D6 as f,A0 as f$,RZ as f0,Um as f1,nK as f2,rK as f3,_Q as f4,SQ as f5,OQ as f6,TQ as f7,Kf as f8,Of as f9,CCe as fA,nCe as fB,jCe as fC,NCe as fD,iSe as fE,xSe as fF,sSe as fG,rSe as fH,oSe as fI,H_e as fJ,K0 as fK,Y_e as fL,Z_e as fM,ESe as fN,eSe as fO,tSe as fP,pSe as fQ,d0 as fR,h0 as fS,Q0 as fT,l0 as fU,D0 as fV,I0 as fW,E0 as fX,T0 as fY,Yf as fZ,aSe as f_,pK as fa,SD as fb,ED as fc,lF as fd,MX as fe,jm as ff,Ym as fg,Tm as fh,DQ as fi,vg as fj,cf as fk,pf as fl,MQ as fm,AQ as fn,CQ as fo,PQ as fp,EQ as fq,lU as fr,BX as fs,JF as ft,UF as fu,HU as fv,SCe as fw,uCe as fx,kCe as fy,_Ce as fz,I6 as g,v4 as g0,ySe as g1,gSe as g2,B0 as g3,WJ as g4,cSe as g5,HC as g6,jV as g7,RX as g8,DX as g9,LX as ga,F6 as h,$6 as i,xt as j,L6 as k,q6 as l,z6 as m,DF as n,AF as o,_g as p,GI as q,ct as r,KC as s,YI as t,lP as u,ZI as v,XI as w,gD as x,_m as y,xg as z};
