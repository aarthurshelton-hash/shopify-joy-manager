const n="/**\n * Time Control Style Profiler\n * \n * Maps chess time controls to cognitive fingerprints and trading styles.\n * A player's relative ELO across time controls reveals their decision-making DNA:\n * \n * TIME CONTROL → TRADING STYLE MAPPING:\n * - Bullet/Ultrabullet → Scalping/HFT (intuitive, pattern-reflex)\n * - Blitz → Day Trading (balanced speed/analysis)\n * - Rapid → Swing Trading (deliberate, trend-focused)\n * - Classical → Position Trading (deep calculation)\n * - Correspondence → Long-term Investing (Warren Buffett patience)\n * \n * The ELO VARIANCE between time controls is the key insight:\n * - High Bullet, Low Classical = Intuitive player (thrives under pressure)\n * - High Classical, Low Bullet = Analytical player (needs time to calculate)\n * - Consistent across all = Balanced cognitive profile\n */\n\nexport type TimeControlCategory = \n  | 'ultrabullet'  // < 30 seconds per side\n  | 'bullet'       // 1-2 minutes per side\n  | 'blitz'        // 3-5 minutes per side\n  | 'rapid'        // 10-15 minutes per side\n  | 'classical'    // 30+ minutes per side\n  | 'correspondence'; // Days per move\n\nexport type TradingStyleEquivalent = \n  | 'high_frequency'    // HFT, millisecond decisions\n  | 'scalping'          // Seconds to minutes\n  | 'day_trading'       // Hours, same-day close\n  | 'swing_trading'     // Days to weeks\n  | 'position_trading'  // Weeks to months\n  | 'long_term_investing'; // Months to years\n\nexport interface TimeControlElo {\n  category: TimeControlCategory;\n  elo: number;\n  gamesPlayed: number;\n  winRate: number;\n  averageMoveTime?: number;\n  blunderRate?: number;\n}\n\nexport interface StyleProfile {\n  // Core identity\n  dominantStyle: TimeControlCategory;\n  weakestStyle: TimeControlCategory;\n  \n  // The key insight: ELO variance reveals cognitive DNA\n  eloVariance: number;  // Standard deviation across time controls\n  maxEloDelta: number;  // Biggest gap between any two time controls\n  \n  // Cognitive fingerprint (0-1 scale)\n  intuitionScore: number;      // High bullet performance = high intuition\n  calculationScore: number;    // High classical performance = high calculation\n  pressureResistance: number;  // Performance under time pressure\n  consistencyScore: number;    // How stable across time controls\n  \n  // Trading style mapping\n  optimalTradingStyle: TradingStyleEquivalent;\n  riskTolerance: 'low' | 'medium' | 'high' | 'extreme';\n  \n  // Predictions\n  volatilityAffinity: number;     // 0 = prefers calm markets, 1 = thrives in chaos\n  decisionSpeed: number;          // 0 = slow/deliberate, 1 = instant\n  reversalProbability: number;    // Likelihood of changing position under pressure\n  panicSellProbability: number;   // Based on blunder rate under time pressure\n  \n  // Market tempo matching\n  optimalMarketConditions: {\n    volatility: 'low' | 'medium' | 'high';\n    trendStrength: 'ranging' | 'trending' | 'strong_trend';\n    timeframe: string;\n  };\n}\n\nexport interface TimeControlStyleMapping {\n  timeControl: TimeControlCategory;\n  tradingStyle: TradingStyleEquivalent;\n  decisionWindow: string;\n  cognitiveProfile: string;\n  marketEquivalent: string;\n  strengthIndicators: string[];\n  weaknessIndicators: string[];\n}\n\n// The core mapping between chess and trading\nexport const TIME_CONTROL_MAPPINGS: TimeControlStyleMapping[] = [\n  {\n    timeControl: 'ultrabullet',\n    tradingStyle: 'high_frequency',\n    decisionWindow: '< 1 second',\n    cognitiveProfile: 'Pure pattern recognition, no calculation',\n    marketEquivalent: 'Algorithmic HFT, order flow reading',\n    strengthIndicators: [\n      'Instant pattern recognition',\n      'Thrives in chaos',\n      'No analysis paralysis',\n      'Intuitive risk assessment'\n    ],\n    weaknessIndicators: [\n      'May miss deep opportunities',\n      'Susceptible to traps',\n      'Inconsistent in slow markets',\n      'Overtrading tendency'\n    ]\n  },\n  {\n    timeControl: 'bullet',\n    tradingStyle: 'scalping',\n    decisionWindow: '1-30 seconds',\n    cognitiveProfile: 'Fast pattern + minimal verification',\n    marketEquivalent: 'Scalping, momentum riding',\n    strengthIndicators: [\n      'Quick position entry/exit',\n      'Strong momentum reading',\n      'Handles volatility well',\n      'Fast adaptation'\n    ],\n    weaknessIndicators: [\n      'May exit winners too early',\n      'Stress under slow markets',\n      'Tendency to force trades',\n      'Higher transaction costs'\n    ]\n  },\n  {\n    timeControl: 'blitz',\n    tradingStyle: 'day_trading',\n    decisionWindow: '30 seconds - 5 minutes',\n    cognitiveProfile: 'Balanced speed and analysis',\n    marketEquivalent: 'Day trading, intraday swings',\n    strengthIndicators: [\n      'Balanced risk/reward',\n      'Good position sizing',\n      'Moderate stress handling',\n      'Adaptable timeframes'\n    ],\n    weaknessIndicators: [\n      'Jack of all trades',\n      'May second-guess decisions',\n      'Moderate in all conditions',\n      'Average pattern depth'\n    ]\n  },\n  {\n    timeControl: 'rapid',\n    tradingStyle: 'swing_trading',\n    decisionWindow: '5-30 minutes',\n    cognitiveProfile: 'Thoughtful analysis with time constraints',\n    marketEquivalent: 'Swing trading, multi-day holds',\n    strengthIndicators: [\n      'Trend identification',\n      'Patient entry points',\n      'Good risk management',\n      'Sees bigger picture'\n    ],\n    weaknessIndicators: [\n      'Slow in fast markets',\n      'May miss quick opportunities',\n      'Overthinking tendency',\n      'Struggles with volatility spikes'\n    ]\n  },\n  {\n    timeControl: 'classical',\n    tradingStyle: 'position_trading',\n    decisionWindow: '30+ minutes',\n    cognitiveProfile: 'Deep calculation, comprehensive analysis',\n    marketEquivalent: 'Position trading, fundamental analysis',\n    strengthIndicators: [\n      'Deep market understanding',\n      'Patient capital deployment',\n      'Strong risk assessment',\n      'Ignores noise'\n    ],\n    weaknessIndicators: [\n      'Paralysis by analysis',\n      'Misses fast moves',\n      'May hold losers too long',\n      'Struggles with HFT environments'\n    ]\n  },\n  {\n    timeControl: 'correspondence',\n    tradingStyle: 'long_term_investing',\n    decisionWindow: 'Days to weeks',\n    cognitiveProfile: 'Research-driven, fundamental focus',\n    marketEquivalent: 'Value investing, Warren Buffett style',\n    strengthIndicators: [\n      'Ignores short-term noise',\n      'Strong thesis development',\n      'Patient compounding',\n      'Low transaction costs'\n    ],\n    weaknessIndicators: [\n      'Slow to react to changes',\n      'May miss regime shifts',\n      'Capital efficiency concerns',\n      'Opportunity cost'\n    ]\n  }\n];\n\n/**\n * Analyze time control ELOs to generate a style profile\n */\nexport function analyzeTimeControlProfile(elos: TimeControlElo[]): StyleProfile {\n  if (elos.length === 0) {\n    return getDefaultProfile();\n  }\n\n  // Sort by ELO to find dominant/weakest\n  const sorted = [...elos].sort((a, b) => b.elo - a.elo);\n  const dominantStyle = sorted[0].category;\n  const weakestStyle = sorted[sorted.length - 1].category;\n  \n  // Calculate variance\n  const avgElo = elos.reduce((sum, e) => sum + e.elo, 0) / elos.length;\n  const eloVariance = Math.sqrt(\n    elos.reduce((sum, e) => sum + Math.pow(e.elo - avgElo, 2), 0) / elos.length\n  );\n  const maxEloDelta = sorted[0].elo - sorted[sorted.length - 1].elo;\n  \n  // Calculate cognitive scores\n  const bulletPerf = elos.find(e => e.category === 'bullet' || e.category === 'ultrabullet');\n  const classicalPerf = elos.find(e => e.category === 'classical' || e.category === 'correspondence');\n  const blitzPerf = elos.find(e => e.category === 'blitz');\n  \n  // Intuition = bullet strength relative to classical\n  const intuitionScore = bulletPerf && classicalPerf \n    ? Math.min(1, Math.max(0, 0.5 + (bulletPerf.elo - classicalPerf.elo) / 400))\n    : 0.5;\n    \n  // Calculation = classical strength relative to bullet\n  const calculationScore = bulletPerf && classicalPerf\n    ? Math.min(1, Math.max(0, 0.5 + (classicalPerf.elo - bulletPerf.elo) / 400))\n    : 0.5;\n    \n  // Pressure resistance = bullet/blitz performance relative to average\n  const fastElo = (bulletPerf?.elo || avgElo);\n  const pressureResistance = Math.min(1, Math.max(0, 0.5 + (fastElo - avgElo) / 200));\n  \n  // Consistency = inverse of variance (normalized)\n  const consistencyScore = Math.max(0, 1 - (eloVariance / 200));\n  \n  // Map to trading style\n  const optimalTradingStyle = mapToTradingStyle(dominantStyle);\n  \n  // Risk tolerance based on bullet/ultrabullet affinity\n  const riskTolerance = determineRiskTolerance(dominantStyle, intuitionScore);\n  \n  // Volatility affinity\n  const volatilityAffinity = intuitionScore * 0.7 + (1 - consistencyScore) * 0.3;\n  \n  // Decision speed\n  const decisionSpeed = getDecisionSpeed(dominantStyle);\n  \n  // Reversal probability = low consistency + high intuition\n  const reversalProbability = (1 - consistencyScore) * 0.5 + intuitionScore * 0.3;\n  \n  // Panic sell = poor bullet performance under time pressure\n  const avgBlunderRate = elos.reduce((sum, e) => sum + (e.blunderRate || 0.1), 0) / elos.length;\n  const panicSellProbability = avgBlunderRate * (1 - pressureResistance);\n  \n  return {\n    dominantStyle,\n    weakestStyle,\n    eloVariance,\n    maxEloDelta,\n    intuitionScore,\n    calculationScore,\n    pressureResistance,\n    consistencyScore,\n    optimalTradingStyle,\n    riskTolerance,\n    volatilityAffinity,\n    decisionSpeed,\n    reversalProbability,\n    panicSellProbability,\n    optimalMarketConditions: {\n      volatility: volatilityAffinity > 0.6 ? 'high' : volatilityAffinity > 0.3 ? 'medium' : 'low',\n      trendStrength: calculationScore > 0.6 ? 'strong_trend' : 'trending',\n      timeframe: getOptimalTimeframe(dominantStyle)\n    }\n  };\n}\n\n/**\n * Map time control to trading style\n */\nfunction mapToTradingStyle(timeControl: TimeControlCategory): TradingStyleEquivalent {\n  const mapping: Record<TimeControlCategory, TradingStyleEquivalent> = {\n    'ultrabullet': 'high_frequency',\n    'bullet': 'scalping',\n    'blitz': 'day_trading',\n    'rapid': 'swing_trading',\n    'classical': 'position_trading',\n    'correspondence': 'long_term_investing'\n  };\n  return mapping[timeControl];\n}\n\n/**\n * Determine risk tolerance from dominant style\n */\nfunction determineRiskTolerance(\n  style: TimeControlCategory, \n  intuitionScore: number\n): 'low' | 'medium' | 'high' | 'extreme' {\n  if (style === 'ultrabullet' && intuitionScore > 0.7) return 'extreme';\n  if (style === 'bullet' || style === 'ultrabullet') return 'high';\n  if (style === 'blitz') return 'medium';\n  if (style === 'rapid') return 'medium';\n  return 'low';\n}\n\n/**\n * Get decision speed for time control\n */\nfunction getDecisionSpeed(style: TimeControlCategory): number {\n  const speeds: Record<TimeControlCategory, number> = {\n    'ultrabullet': 1.0,\n    'bullet': 0.85,\n    'blitz': 0.6,\n    'rapid': 0.4,\n    'classical': 0.2,\n    'correspondence': 0.05\n  };\n  return speeds[style];\n}\n\n/**\n * Get optimal trading timeframe for style\n */\nfunction getOptimalTimeframe(style: TimeControlCategory): string {\n  const timeframes: Record<TimeControlCategory, string> = {\n    'ultrabullet': '1-5 minute charts',\n    'bullet': '5-15 minute charts',\n    'blitz': '15min-1hr charts',\n    'rapid': '4hr-Daily charts',\n    'classical': 'Daily-Weekly charts',\n    'correspondence': 'Weekly-Monthly charts'\n  };\n  return timeframes[style];\n}\n\n/**\n * Default profile when no data available\n */\nfunction getDefaultProfile(): StyleProfile {\n  return {\n    dominantStyle: 'blitz',\n    weakestStyle: 'classical',\n    eloVariance: 0,\n    maxEloDelta: 0,\n    intuitionScore: 0.5,\n    calculationScore: 0.5,\n    pressureResistance: 0.5,\n    consistencyScore: 0.5,\n    optimalTradingStyle: 'day_trading',\n    riskTolerance: 'medium',\n    volatilityAffinity: 0.5,\n    decisionSpeed: 0.5,\n    reversalProbability: 0.3,\n    panicSellProbability: 0.2,\n    optimalMarketConditions: {\n      volatility: 'medium',\n      trendStrength: 'trending',\n      timeframe: '1hr-4hr charts'\n    }\n  };\n}\n\n/**\n * Compare player style to current market conditions\n * Returns a \"fit score\" - how well suited this player is for current market\n */\nexport function calculateMarketFit(\n  profile: StyleProfile,\n  marketConditions: {\n    volatility: number;      // 0-1\n    momentum: number;        // -1 to 1\n    trendStrength: number;   // 0-1\n    timeframeMinutes: number;\n  }\n): {\n  fitScore: number;\n  recommendation: string;\n  warnings: string[];\n} {\n  let fitScore = 0.5;\n  const warnings: string[] = [];\n  \n  // Volatility match\n  const volMatch = 1 - Math.abs(profile.volatilityAffinity - marketConditions.volatility);\n  fitScore += volMatch * 0.3;\n  \n  // If high volatility and low pressure resistance = warning\n  if (marketConditions.volatility > 0.7 && profile.pressureResistance < 0.4) {\n    warnings.push('High volatility may trigger panic decisions');\n    fitScore -= 0.15;\n  }\n  \n  // Timeframe match\n  const optimalMinutes = getOptimalMinutes(profile.dominantStyle);\n  const timeframeDiff = Math.abs(marketConditions.timeframeMinutes - optimalMinutes) / optimalMinutes;\n  fitScore -= timeframeDiff * 0.2;\n  \n  // Trend match for calculation-heavy players\n  if (profile.calculationScore > 0.6 && marketConditions.trendStrength < 0.3) {\n    warnings.push('Ranging market - your analytical style needs trends');\n    fitScore -= 0.1;\n  }\n  \n  // Intuition players struggle in slow trends\n  if (profile.intuitionScore > 0.7 && marketConditions.momentum === 0) {\n    warnings.push('Flat momentum - intuitive style needs action');\n    fitScore -= 0.1;\n  }\n  \n  fitScore = Math.max(0, Math.min(1, fitScore));\n  \n  let recommendation: string;\n  if (fitScore > 0.7) {\n    recommendation = 'Excellent fit - trade with confidence';\n  } else if (fitScore > 0.5) {\n    recommendation = 'Moderate fit - adjust position size';\n  } else if (fitScore > 0.3) {\n    recommendation = 'Poor fit - consider sitting out';\n  } else {\n    recommendation = 'Stay out - market doesn\\'t match your style';\n  }\n  \n  return { fitScore, recommendation, warnings };\n}\n\nfunction getOptimalMinutes(style: TimeControlCategory): number {\n  const minutes: Record<TimeControlCategory, number> = {\n    'ultrabullet': 1,\n    'bullet': 5,\n    'blitz': 30,\n    'rapid': 240,\n    'classical': 1440,\n    'correspondence': 10080\n  };\n  return minutes[style];\n}\n\n/**\n * Format style profile for display\n */\nexport function formatStyleProfile(profile: StyleProfile): {\n  summary: string;\n  cognitiveFingerprint: string;\n  tradingAdvice: string;\n  strengthsWeaknesses: { strengths: string[]; weaknesses: string[] };\n} {\n  const mapping = TIME_CONTROL_MAPPINGS.find(m => m.timeControl === profile.dominantStyle);\n  \n  return {\n    summary: `${profile.dominantStyle.toUpperCase()} dominant (${profile.riskTolerance} risk). ` +\n             `ELO variance: ${profile.eloVariance.toFixed(0)} pts. ` +\n             `Max gap: ${profile.maxEloDelta.toFixed(0)} pts.`,\n    cognitiveFingerprint: \n      `Intuition: ${(profile.intuitionScore * 100).toFixed(0)}% | ` +\n      `Calculation: ${(profile.calculationScore * 100).toFixed(0)}% | ` +\n      `Pressure Resistance: ${(profile.pressureResistance * 100).toFixed(0)}%`,\n    tradingAdvice: \n      `Optimal: ${mapping?.tradingStyle.replace('_', ' ').toUpperCase() || 'N/A'} on ${profile.optimalMarketConditions.timeframe}. ` +\n      `Volatility affinity: ${(profile.volatilityAffinity * 100).toFixed(0)}%. ` +\n      `Panic sell risk: ${(profile.panicSellProbability * 100).toFixed(0)}%.`,\n    strengthsWeaknesses: {\n      strengths: mapping?.strengthIndicators || [],\n      weaknesses: mapping?.weaknessIndicators || []\n    }\n  };\n}\n";export{n as default};
