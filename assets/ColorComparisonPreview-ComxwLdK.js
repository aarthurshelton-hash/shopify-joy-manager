const e="import React from 'react';\nimport { motion } from 'framer-motion';\nimport { PieceType } from '@/lib/chess/pieceColors';\nimport { PaletteColors, colorDistance } from '@/lib/visualizations/similarityDetection';\nimport { AlertTriangle, Check, X } from 'lucide-react';\nimport { useEnPensentPatterns } from '@/hooks/useEnPensentPatterns';\nimport { TemporalSignature } from '@/lib/pensent-core/types/core';\n\nconst PIECE_TYPES: PieceType[] = ['k', 'q', 'r', 'b', 'n', 'p'];\nconst PIECE_NAMES: Record<PieceType, string> = {\n  k: 'King', q: 'Queen', r: 'Rook', b: 'Bishop', n: 'Knight', p: 'Pawn'\n};\nconst PIECE_SYMBOLS: Record<PieceType, { white: string; black: string }> = {\n  k: { white: '♚', black: '♔' },\n  q: { white: '♛', black: '♕' },\n  r: { white: '♜', black: '♖' },\n  b: { white: '♝', black: '♗' },\n  n: { white: '♞', black: '♘' },\n  p: { white: '♟', black: '♙' },\n};\n\ninterface ColorComparisonPreviewProps {\n  yourColors: PaletteColors;\n  existingColors: PaletteColors;\n  similarityThreshold?: number;\n  ownerName?: string;\n  signature?: TemporalSignature | null;\n}\n\nconst ColorComparisonPreview: React.FC<ColorComparisonPreviewProps> = ({\n  yourColors,\n  existingColors,\n  similarityThreshold = 50,\n  ownerName = 'Another collector',\n  signature,\n}) => {\n  const pattern = useEnPensentPatterns(signature);\n  // Calculate which colors are too similar\n  const colorMatches: Array<{\n    side: 'white' | 'black';\n    piece: PieceType;\n    yourColor: string;\n    existingColor: string;\n    isSimilar: boolean;\n    distance: number;\n  }> = [];\n  \n  for (const piece of PIECE_TYPES) {\n    // White pieces\n    const whiteDistance = colorDistance(yourColors.white[piece], existingColors.white[piece]);\n    colorMatches.push({\n      side: 'white',\n      piece,\n      yourColor: yourColors.white[piece],\n      existingColor: existingColors.white[piece],\n      isSimilar: whiteDistance < similarityThreshold,\n      distance: whiteDistance,\n    });\n    \n    // Black pieces\n    const blackDistance = colorDistance(yourColors.black[piece], existingColors.black[piece]);\n    colorMatches.push({\n      side: 'black',\n      piece,\n      yourColor: yourColors.black[piece],\n      existingColor: existingColors.black[piece],\n      isSimilar: blackDistance < similarityThreshold,\n      distance: blackDistance,\n    });\n  }\n  \n  const similarCount = colorMatches.filter(m => m.isSimilar).length;\n  const similarityPercent = Math.round((similarCount / 12) * 100);\n  const needToChange = Math.ceil(12 * 0.7) - (12 - similarCount); // Need at least 70% different\n  \n  return (\n    <motion.div \n      className=\"bg-background border rounded-lg p-4 space-y-4\"\n      style={{\n        borderColor: signature ? `${pattern.dominantColor}40` : undefined,\n        boxShadow: signature ? `0 0 ${15 * pattern.intensity}px ${pattern.dominantColor}20` : undefined\n      }}\n      animate={signature ? { \n        boxShadow: [\n          `0 0 ${10 * pattern.intensity}px ${pattern.dominantColor}15`,\n          `0 0 ${20 * pattern.intensity}px ${pattern.dominantColor}25`,\n          `0 0 ${10 * pattern.intensity}px ${pattern.dominantColor}15`\n        ]\n      } : {}}\n      transition={{ duration: 3, repeat: Infinity }}\n    >\n      {/* Header */}\n      <div className=\"flex items-start gap-3\">\n        <AlertTriangle className=\"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5\" />\n        <div>\n          <h4 className=\"font-medium text-sm\">Color Similarity Detected</h4>\n          <p className=\"text-xs text-muted-foreground mt-0.5\">\n            Your colors are <span className=\"font-semibold text-amber-600\">{similarityPercent}% similar</span> to a vision by {ownerName}.\n            {needToChange > 0 && (\n              <> Change at least <span className=\"font-semibold\">{needToChange} more colors</span> for uniqueness.</>\n            )}\n          </p>\n          {signature && (\n            <p className=\"text-[10px] mt-1 opacity-60\" style={{ color: pattern.dominantColor }}>\n              Pattern: {pattern.archetype} • Flow: {pattern.flowDirection}\n            </p>\n          )}\n        </div>\n      </div>\n      \n      {/* Color Comparison Grid */}\n      <div className=\"grid grid-cols-2 gap-4\">\n        {/* White Pieces */}\n        <div>\n          <h5 className=\"text-xs font-medium text-muted-foreground mb-2\">White Pieces</h5>\n          <div className=\"space-y-1.5\">\n            {PIECE_TYPES.map(piece => {\n              const match = colorMatches.find(m => m.side === 'white' && m.piece === piece)!;\n              return (\n                <div \n                  key={`white-${piece}`}\n                  className={`flex items-center gap-2 p-1.5 rounded-md ${\n                    match.isSimilar ? 'bg-amber-500/10' : 'bg-green-500/10'\n                  }`}\n                >\n                  <span className=\"text-sm w-4\">{PIECE_SYMBOLS[piece].white}</span>\n                  <div className=\"flex items-center gap-1 flex-1\">\n                    <div \n                      className=\"w-5 h-5 rounded border\"\n                      style={{ backgroundColor: match.yourColor }}\n                      title={`Your: ${match.yourColor}`}\n                    />\n                    <span className=\"text-[10px] text-muted-foreground\">→</span>\n                    <div \n                      className=\"w-5 h-5 rounded border\"\n                      style={{ backgroundColor: match.existingColor }}\n                      title={`Existing: ${match.existingColor}`}\n                    />\n                  </div>\n                  {match.isSimilar ? (\n                    <X className=\"h-3.5 w-3.5 text-amber-500\" />\n                  ) : (\n                    <Check className=\"h-3.5 w-3.5 text-green-500\" />\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        \n        {/* Black Pieces */}\n        <div>\n          <h5 className=\"text-xs font-medium text-muted-foreground mb-2\">Black Pieces</h5>\n          <div className=\"space-y-1.5\">\n            {PIECE_TYPES.map(piece => {\n              const match = colorMatches.find(m => m.side === 'black' && m.piece === piece)!;\n              return (\n                <div \n                  key={`black-${piece}`}\n                  className={`flex items-center gap-2 p-1.5 rounded-md ${\n                    match.isSimilar ? 'bg-amber-500/10' : 'bg-green-500/10'\n                  }`}\n                >\n                  <span className=\"text-sm w-4\">{PIECE_SYMBOLS[piece].black}</span>\n                  <div className=\"flex items-center gap-1 flex-1\">\n                    <div \n                      className=\"w-5 h-5 rounded border\"\n                      style={{ backgroundColor: match.yourColor }}\n                      title={`Your: ${match.yourColor}`}\n                    />\n                    <span className=\"text-[10px] text-muted-foreground\">→</span>\n                    <div \n                      className=\"w-5 h-5 rounded border\"\n                      style={{ backgroundColor: match.existingColor }}\n                      title={`Existing: ${match.existingColor}`}\n                    />\n                  </div>\n                  {match.isSimilar ? (\n                    <X className=\"h-3.5 w-3.5 text-amber-500\" />\n                  ) : (\n                    <Check className=\"h-3.5 w-3.5 text-green-500\" />\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n      \n      {/* Legend */}\n      <div className=\"flex items-center gap-4 text-[10px] text-muted-foreground pt-2 border-t\">\n        <div className=\"flex items-center gap-1\">\n          <X className=\"h-3 w-3 text-amber-500\" />\n          <span>Too similar - needs change</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <Check className=\"h-3 w-3 text-green-500\" />\n          <span>Unique enough</span>\n        </div>\n        {signature && (\n          <motion.div \n            className=\"ml-auto flex items-center gap-1\"\n            animate={{ opacity: [0.5, 1, 0.5] }}\n            transition={{ duration: 2, repeat: Infinity }}\n          >\n            <div className=\"w-2 h-2 rounded-full\" style={{ backgroundColor: pattern.dominantColor }} />\n            <span style={{ color: pattern.secondaryColor }}>{pattern.archetype}</span>\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n  );\n};\n\nexport default ColorComparisonPreview;\n";export{e as default};
