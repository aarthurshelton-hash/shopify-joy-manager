import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as l,B as o,A as d,cb as u,cR as m,a8 as h,D as x,aB as p,aC as w,aD as f,aE as v,p as j,t as g,w as y,dy as C,dt as b,bo as N,dq as q,cZ as z,a1 as B,a2 as D,a3 as L,a4 as _,a5 as W,aW as A,bC as H,dz as M,b as P,y as U}from"./index-DeSwrHRg.js";import{C as S}from"./calendar-DG7a-ynN.js";!function(){const e=k,t=O();for(;;)try{if(520281===-parseInt(e(362))/1*(parseInt(e(340))/2)+-parseInt(e(365))/3+parseInt(e(352))/4*(-parseInt(e(405))/5)+-parseInt(e(428))/6*(parseInt(e(344))/7)+parseInt(e(369))/8*(parseInt(e(433))/9)+-parseInt(e(408))/10*(-parseInt(e(383))/11)+parseInt(e(363))/12)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const K=function(){const e=k,t={};t[e(341)]=function(e,t){return e!==t},t[e(348)]=e(379);const s=t;let n=!0;return function(t,r){const a=e;if(s[a(341)](s[a(348)],s[a(348)])){const e={};return e[a(360)]=null,e.error=_0x4c3034,e}{const e=n?function(){const e=a;if({}[e(391)]=e(374)+"+$",r){const s=r[e(431)](t,arguments);return r=null,s}}:function(){};return n=!1,e}}}()(void 0,function(){const e=k,t={};t[e(345)]="(((.+)+)+)+$";const s=t;return K[e(355)]().search(s[e(345)]).toString()[e(384)+"r"](K)[e(440)](s.ddnii)});K();const I=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[k(431)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function k(e,t){e-=328;const s=O();let n=s[e];if(void 0===k.NNkiHk){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};k.QGLcPz=r,k.AHCeCI={},k.NNkiHk=!0}const a=e+s[0],c=k.AHCeCI[a];if(c)n=c;else{const e=function(e){this.SnujdS=e,this.KeCmdd=[1,0,0],this.rWkheP=function(){return"newState"},this.OoRwTz="\\w+ *\\(\\) *{\\w+ *",this.UyHwxu="['|\"].+['|\"];? *}"};e.prototype.PuEHtl=function(){const e=new RegExp(this.OoRwTz+this.UyHwxu).test(this.rWkheP.toString())?--this.KeCmdd[1]:--this.KeCmdd[0];return this.PVdVUv(e)},e.prototype.PVdVUv=function(e){return Boolean(~e)?this.EEBodb(this.SnujdS):e},e.prototype.EEBodb=function(e){for(let t=0,s=this.KeCmdd.length;t<s;t++)this.KeCmdd.push(Math.round(Math.random())),s=this.KeCmdd.length;return e(this.KeCmdd[0])},new e(k).PuEHtl(),n=k.QGLcPz(n),k.AHCeCI[a]=n}return n}async function R(t){const s=k,n={};n[s(399)]="created_at",n[s(347)]=function(e,t){return e!==t},n[s(441)]=s(381),n.UFNci=s(412)+"isplay_name",n[s(330)]=s(413)+"ts",n[s(436)]="user_id";const r=n;try{const n={};n[s(337)]=!1;let a=e.from(s(373)+s(380)).select("*").order(r[s(399)],n);t&&r[s(347)](t,s(402))&&(a=a.eq(s(417),t));const{data:c,error:i}=await a;if(i)throw i;const l=[...new Set((c||[])[s(439)](e=>e.user_id))],{data:o}=await e[s(370)](r.pyJOl)[s(432)](r[s(438)]).in("user_id",l),{data:d}=await e[s(370)](r[s(330)])[s(432)](s(398)+s(386)+"d_cents, t"+s(389)+s(356)).in(r[s(436)],l),u=new Map((null==o?void 0:o[s(439)](e=>[e[s(371)],e]))||[]),m=new Map((null==d?void 0:d[s(439)](e=>[e.user_id,e]))||[]),h=(c||[])[s(439)](e=>{var t,n,r;return{...e,payout_details:e["payout_det"+s(329)],user_display_name:(null==(t=u[s(393)](e[s(371)]))?void 0:t.display_name)||s(421)+"er",wallet_total_earned:(null==(n=m.get(e[s(371)]))?void 0:n.total_earned_cents)||0,wallet_total_withdrawn:(null==(r=m[s(393)](e.user_id))?void 0:r["total_with"+s(426)+"s"])||0}}),x={};return x[s(360)]=h,x[s(350)]=null,x}catch(a){const e={data:[]};return e[s(350)]=a,e}}function O(){const e=["x19WCM90B19F","rLnzD28","y1PoB1m","Aw52B2TL","zxjYB3i","DcbMB3vUzcbVCG","nfjUwhz0vW","CMv0DxjUicHMDq","sNHQrLm","Dg9tDhjPBMC","CMf3BL9Jzw50CW","yMLUza","whvdsve","wvf6ueu","zgf0yq","CMvQzwn0zwq","mJC4m3bKDKLXuG","mJyYmdG4odHyr2TNyxe","zxHJzxb0Aw9U","mJG3odG2mePKsK9AAq","Aw5MBW","AwHjBe4","ruXMz0y","ntaWoenZBxbbsq","zNjVBq","DxnLCL9Pza","C3rHDhvZlcbHBq","D2L0AgrYyxDHBa","kcGOlISPkYKRkq","ywrTAw5FBM90zq","y29TCgXLDgvKxW","surmufy","y29UC29Szq","twPir0u","x3jLCxvLC3rZ","ChjVzMLSzxm","DgfIBgu","mZn6Cw16uKC","y29UC3rYDwn0BW","Dg9ju09tDhjPBG","B3rHBf9LyxjUzq","CgvUzgLUz19HBq","y29TCgXLDgvK","B3rHBf93AxrOza","ig5VDcbPBIbHCa","tgX0r2W","C3vJy2vZCW","z2v0","v0HNrLy","twnmseS","E30Uy29UC3rYDq","Bg9N","DxnLCL9PzcWGDa","s1r0wvq","z2v0vxnLCG","CgvUzgLUz19JBW","ywXS","CMvQzwn0zwrFyW","v2fSBgv0ihvWza","mZK5ndq4merPvgLKqq","Bw91BNq","uMvQzwn0Aw9Uia","mJCWoty4mez1wvHVtG","DgHKCMf3ywW","yxbWCM92zwrFyq","yxbWCM92zwq","DxnLCL9PzcWGza","DxnLCL93ywXSzq","Dw50","DgLJyxrLza","DfLYAMW","C3rHDhvZ","yw1VDw50x2nLBG","B3vUDa","tLzxCem","vw5RBM93BIbvCW","yxv0Aa","BMn6s3e","tM90igf1DgHLBG","CM4GDgHPCYiPka","zhjHD25Fy2vUDa","CMvHC29UigLZia","mJCWzKjPrwLl","ChjVDg90ExbL","rfHRshC","yxbWBhK","C2vSzwn0","nZK2nxfMvMX2Ea","zM9YrwfJAa","yM9KEq","ywTWvxq","ChjVy2vZCY13Aq","vuzoy2K","BwfW","C2vHCMnO","ChLkt2W","yxbWCM92zwrFyW","ywLSCW","yKvtwMC","AuzZy2G","CMvXDwLYzwq","CgvUzgLUzW","zNvUy3rPB25Z","DxbKyxrL","B3vUDf9Jzw50CW","yxnJzw5KAw5N","uMvXDwvZDcbUBW","Bg9OEuC","nJq0Au95y0Xw","ugDdvgi","qwvJAwC","Dg90ywW","ntG0otLPCLHOsMy","zgrUAwK"];return(O=function(){return e})()}async function E(){const t=k,s={};s.RwdeK=t(333),s[t(394)]=t(411),s.uEEXR=t(388),s.lohyG=t(361),s[t(368)]=t(373)+t(380),s[t(354)]=t(372)+t(336);const n=s;try{const{data:s,error:r}=await e[t(370)](n[t(368)]).select(n[t(354)]);if(r)throw r;const a={};a[t(401)+"unt"]=0,a[t(387)+"ount"]=0,a[t(328)+t(419)]=0,a.approved_amount=0,a.completed_total=0,a.rejected_count=0;const c=a;(s||[])[t(434)](e=>{const s=t;switch(e[s(417)]){case n.RwdeK:c[s(401)+s(414)]++,c[s(387)+s(419)]+=e[s(418)+"ts"];break;case n.WHgFV:c[s(328)+"ount"]++,c[s(410)+s(406)]+=e[s(418)+"ts"];break;case n.uEEXR:c[s(376)+s(343)]+=e.amount_cents;break;case n[s(339)]:c[s(403)+s(419)]++}});const i={};return i[t(360)]=c,i[t(350)]=null,i}catch(r){const e={};return e[t(360)]=null,e[t(350)]=r,e}}I(void 0,function(){const e=k,t={NVWpC:function(e,t){return e(t)},BeyVb:function(e){return e()},iFsch:e(397),tvPBw:"warn",CNcal:e(366),labLg:"error",McLHK:e(382),YQzPE:"trace",MyzUL:function(e,t){return e<t}},s=t.BeyVb(function(){const s=e;let n;try{n=t[s(420)](Function,s(353)+"nction() "+s(396)+'ctor("retu'+s(425)+" ));")()}catch(r){n=window}return n}),n=s[e(378)]=s[e(378)]||{},r=[t[e(331)],t.tvPBw,t.CNcal,t.labLg,e(364),t[e(395)],t[e(359)]];for(let a=0;t.MyzUL(a,r.length);a++){const t=I[e(384)+"r"][e(429)].bind(I),s=r[a],c=n[s]||t;t[e(346)]=I[e(357)](I),t.toString=c.toString[e(357)](c),n[s]=t}})(),function(){const e=J,t=X();for(;;)try{if(493336===-parseInt(e(116))/1*(parseInt(e(127))/2)+parseInt(e(107))/3+parseInt(e(122))/4+-parseInt(e(120))/5+-parseInt(e(130))/6*(-parseInt(e(133))/7)+parseInt(e(149))/8+-parseInt(e(115))/9)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Z=function(){const e=J,t={};t[e(106)]="pjKkL";const s=t;let n=!0;return function(t,r){const a=e;if(s.FqUec===a(140)){const e=n?function(){const e=a,s={};s[e(144)]="(((.+)+)+)+$";const n=s;if(r){if(e(118)===e(123))return _0x4296f6[e(146)]().search(n[e(144)])[e(146)]()[e(159)+"r"](_0x23cc19)[e(113)](n[e(144)]);{const s=r[e(145)](t,arguments);return r=null,s}}}:function(){};return n=!1,e}{const e={};return e[a(157)]=!1,e[a(147)]=_0x402af9,e}}}()(void 0,function(){const e=J;return Z[e(146)]()[e(113)](e(155)+"+$")[e(146)]()[e(159)+"r"](Z).search("(((.+)+)+)+$")});Z();const G=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[J(145)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function J(e,t){e-=105;const s=X();let n=s[e];if(void 0===J.HHuQNP){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};J.tKKpbW=r,J.xHROXu={},J.HHuQNP=!0}const a=e+s[0],c=J.xHROXu[a];if(c)n=c;else{const e=function(e){this.gPIRFg=e,this.POXeZx=[1,0,0],this.ZVqzIT=function(){return"newState"},this.UpAhFY="\\w+ *\\(\\) *{\\w+ *",this.OmluRH="['|\"].+['|\"];? *}"};e.prototype.AkhjcB=function(){const e=new RegExp(this.UpAhFY+this.OmluRH).test(this.ZVqzIT.toString())?--this.POXeZx[1]:--this.POXeZx[0];return this.BmYJIR(e)},e.prototype.BmYJIR=function(e){return Boolean(~e)?this.STWOkh(this.gPIRFg):e},e.prototype.STWOkh=function(e){for(let t=0,s=this.POXeZx.length;t<s;t++)this.POXeZx.push(Math.round(Math.random())),s=this.POXeZx.length;return e(this.POXeZx[0])},new e(J).AkhjcB(),n=J.tKKpbW(n),J.xHROXu[a]=n}return n}function X(){const e=["yMLUza","mJm3mZyXmLH5Cvnesa","ywLNrem","Aw5MBW","zLDutMC","DgLJyxrLza","odjgvvnKqum","CMv0DxjUicHMDq","Bg9N","mtC0EhvyrwD0","yxv0Aa","z2v0x29Yx2nYzq","mty1ndq1CLjjAwfs","yxrLx3DHBgXLDa","rhLfv2S","yxnJzw5KAw5N","y29UC29Szq","y3jLyxrLzf9HDa","x19WCM90B19F","CgPlA0W","q0DZu3a","Cf91C2vYx2LK","z2v0vxnLCG","Cvbcwuq","yxbWBhK","Dg9tDhjPBMC","zxjYB3i","CMTLDhbSywnLxW","nJq5ntq4oeDLt0XmBG","qxLrv28","D2fSBgv0x3rYyq","zgf0yq","zNjVBq","E30Uy29UC3rYDq","kcGOlISPkYKRkq","zxHJzxb0Aw9U","C3vJy2vZCW","y2vFy2vUDhm","y29UC3rYDwn0BW","D2fYBG","rgDVBwW","Dg9gAxHLza","tg14Exi","rLfOExe","Cf9SAxn0Aw5NxW","rNfvzwm","mtiZmZe1mhDRAgX1BG","tM90igf1DgHLBG","uKPIsge","CNbJ","C2vSzwn0","Cf9ZywXLx3bYAq","C2vHCMnO","DgfIBgu","mtq5oty5nJfgqKjft20","mZaWnuXSqvfpua","BgvUz3rO","DhHhv1e","ChjVDg90ExbL","mta5ndy3mhDxr3jmvW"];return(X=function(){return e})()}function Y(e){const t=J,s={NOdzB:function(e,t){return e/t}};return"$"+s.NOdzB(e,100)[t(162)](2)}function V(){var K,I;const{user:O}=t(),Z=s(),[G,J]=n.useState(!1),[X,V]=n.useState(!0),[F,T]=n.useState([]),[Q,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{le()},[O]);const le=async()=>{if(!O)return void V(!1);const{data:t}=await e.rpc("has_role",{_user_id:O.id,_role:"admin"});!0===t&&(J(!0),await oe()),V(!1)},oe=async()=>{const[e,t]=await Promise.all([R(ee),E()]);e.data&&T(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(U,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(U,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(U,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(U,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(U,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(U,{variant:"outline",children:e})}};return X?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):O&&G?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(o,{variant:"ghost",size:"icon",onClick:()=>Z(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Y(Q.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Y(Q.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Y(Q.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),oe()},children:[r.jsxs(w,{className:"mb-6",children:[r.jsx(f,{value:"pending",children:"Pending"}),r.jsx(f,{value:"approved",children:"Approved"}),r.jsx(f,{value:"completed",children:"Completed"}),r.jsx(f,{value:"rejected",children:"Rejected"}),r.jsx(f,{value:"all",children:"All"})]}),r.jsx(v,{value:ee,children:r.jsxs(c,{children:[r.jsxs(j,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===F.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(b,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:F.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(N,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(q,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(S,{className:"h-3 w-3"}),z(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",Y(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:Y(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(o,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(o,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(o,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(B,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(D,{children:[r.jsxs(L,{children:[r.jsxs(_,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(W,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(K=se.request.payout_details)?void 0:K.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:Y(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(A,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(H,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(I=se.request.payout_details)?void 0:I.email})]})]})]}),r.jsxs(M,{children:[r.jsx(o,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(o,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=k,r={};r.Aecig=n(373)+n(380),r[n(377)]=n(411);const a=r;try{const{data:{user:r}}=await e[n(422)][n(400)]();if(!r)throw new Error(n(424)+n(415));const{error:c}=await e.from(a[n(342)])[n(335)]({status:a[n(377)],admin_notes:s||null,reviewed_by:r.id,reviewed_at:(new Date)[n(385)+"g"]()}).eq("id",t).eq(n(417),n(333));if(c)throw c;return{success:!0,error:null}}catch(c){const e={};return e[n(392)]=!1,e[n(350)]=c,e}}(se.request.id,re),t.success&&P.success("Withdrawal approved");break;case"reject":if(!re.trim())return P.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=k,r={};r.wIBcT=n(424)+n(415),r[n(416)]=n(361),r[n(423)]=n(417);const a=r;try{const{data:{user:r}}=await e[n(422)][n(400)]();if(!r)throw new Error(a.wIBcT);if(!s)throw new Error(n(407)+n(427)+n(332));const{error:c}=await e[n(370)]("withdrawal"+n(380))[n(335)]({status:a[n(416)],admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(385)+"g"]()}).eq("id",t).eq(a[n(423)],n(333));if(c)throw c;const i={success:!0};return i[n(350)]=null,i}catch(c){const e={};return e[n(392)]=!1,e[n(350)]=c,e}}(se.request.id,re),t.success&&P.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=k,r={};r[n(358)]="withdrawal"+n(380),r[n(367)]="status",r[n(430)]=n(338)+n(351)+n(390)+"proved status";const a=r;try{const{data:{user:r}}=await e[n(422)].getUser();if(!r)throw new Error(n(424)+n(415));const{data:c,error:i}=await e[n(370)](a[n(358)])[n(432)]("*").eq("id",t).eq(a.ihIlN,n(411)).single();if(i||!c)throw new Error(a[n(430)]);const{error:l}=await e[n(370)](n(373)+n(380)).update({status:n(388),admin_notes:s?(c[n(375)+"s"]||"")+"\n---\n"+s:c[n(375)+"s"],completed_at:(new Date)[n(385)+"g"]()}).eq("id",t);if(l)throw l;const o={};o.request_id=t,o[n(371)]=c.user_id,o.amount_cents=c.amount_cents;const d={};d[n(435)]=o;const{error:u}=await e[n(334)][n(349)](n(437)+n(409),d),m={};return m[n(392)]=!0,m[n(350)]=null,m}catch(c){const e={};return e[n(392)]=!1,e.error=c,e}}(se.request.id,re),t.success&&P.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?P.error(t.error.message):(ne({type:null,request:null}),ae(""),await oe())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(l,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(o,{onClick:()=>Z("/"),children:"Go Home"})]})})})}G(void 0,function(){const e=J,t={bkdvG:function(e,t){return e(t)},fWTNg:function(e,t){return e+t},UmqKt:e(128)+"nction() ",CGsSp:e(154)+'ctor("return this")( )',Dgoml:e(124),yJcHd:e(147),RJbHa:e(150)};let s;try{s=t.bkdvG(Function,t[e(125)](t.UmqKt,t[e(141)])+");")()}catch(a){s=window}const n=s[e(137)]=s.console||{},r=[e(129),e(160),t[e(161)],t.yJcHd,e(156),e(114),"trace"];for(let c=0;c<r[e(117)];c++){if(e(135)===t[e(109)]){const t={data:null};return t[e(147)]=_0x4c08fb,t}{const t=G[e(159)+"r"][e(119)].bind(G),s=r[c],a=n[s]||t;t[e(139)]=G.bind(G),t[e(146)]=a[e(146)][e(121)](a),n[s]=t}}})();export{V as default};
