import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as m,a8 as x,D as h,aB as p,aC as f,aD as w,aE as v,p as j,t as y,w as g,dy as C,dt as b,bo as N,dq as z,cZ as D,a1 as q,a2 as L,a3 as B,a4 as A,a5 as M,aW as _,bC as W,dz as U,b as H,y as P}from"./index-Cjdju9jQ.js";import{C as S}from"./calendar-oARNJC7y.js";!function(){const e=K,t=Z();for(;;)try{if(936082===-parseInt(e(498))/1*(-parseInt(e(479))/2)+-parseInt(e(535))/3+-parseInt(e(436))/4+parseInt(e(437))/5+parseInt(e(475))/6*(-parseInt(e(520))/7)+parseInt(e(415))/8+parseInt(e(449))/9*(parseInt(e(516))/10))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const k=function(){const e=K,t={};t[e(508)]=e(513),t[e(532)]="OPeoy";const s=t;let n=!0;return function(e,t){const r=n?function(){const n=K;if(t){if(s[n(508)]!==s[n(532)]){const s=t[n(485)](e,arguments);return t=null,s}_0x3a1bde=_0x1b4cf6.eq(n(471),_0x53c17f)}}:function(){};return n=!1,r}}()(void 0,function(){const e=K,t={};t[e(461)]=e(472)+"+$";const s=t;return k[e(497)]().search("(((.+)+)+)+$")[e(497)]()[e(424)+"r"](k)[e(456)](s[e(461)])});k();const I=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[K(485)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function K(e,t){e-=412;const s=Z();let n=s[e];if(void 0===K.DrAqWH){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};K.ZskUHm=r,K.JoSUDm={},K.DrAqWH=!0}const a=e+s[0],c=K.JoSUDm[a];if(c)n=c;else{const e=function(e){this.XoyoQf=e,this.jtacaz=[1,0,0],this.nRKlow=function(){return"newState"},this.xOtPAa="\\w+ *\\(\\) *{\\w+ *",this.BflJRn="['|\"].+['|\"];? *}"};e.prototype.XbwzuJ=function(){const e=new RegExp(this.xOtPAa+this.BflJRn).test(this.nRKlow.toString())?--this.jtacaz[1]:--this.jtacaz[0];return this.hszxFK(e)},e.prototype.hszxFK=function(e){return Boolean(~e)?this.EiQYfm(this.XoyoQf):e},e.prototype.EiQYfm=function(e){for(let t=0,s=this.jtacaz.length;t<s;t++)this.jtacaz.push(Math.round(Math.random())),s=this.jtacaz.length;return e(this.jtacaz[0])},new e(K).XbwzuJ(),n=K.ZskUHm(n),K.JoSUDm[a]=n}return n}async function J(t){const s=K,n={};n[s(462)]=s(448),n.LQamD=s(442),n[s(504)]="profiles",n[s(468)]="user_id, d"+s(501)+"e",n[s(529)]=s(454)+"ts";const r=n;try{const n={};n[s(429)]=!1;let a=e[s(414)](s(422)+s(481))[s(428)]("*")[s(470)](r[s(462)],n);t&&t!==r.LQamD&&(a=a.eq(s(471),t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[]).map(e=>e.user_id))],{data:l}=await e[s(414)](r[s(504)])[s(428)](r.bbJhW).in(s(507),o),{data:d}=await e[s(414)](r[s(529)])[s(428)](s(510)+s(439)+"d_cents, total_withd"+s(460)).in("user_id",o),u=new Map((null==l?void 0:l.map(e=>[e[s(507)],e]))||[]),m=new Map((null==d?void 0:d[s(444)](e=>[e[s(507)],e]))||[]),x=(c||[])[s(444)](e=>{var t,n,r;return{...e,payout_details:e[s(426)+s(480)],user_display_name:(null==(t=u[s(495)](e.user_id))?void 0:t[s(459)+"me"])||s(416)+"er",wallet_total_earned:(null==(n=m[s(495)](e[s(507)]))?void 0:n[s(457)+"ed_cents"])||0,wallet_total_withdrawn:(null==(r=m[s(495)](e[s(507)]))?void 0:r[s(473)+"drawn_cents"])||0}}),h={};return h[s(515)]=x,h[s(455)]=null,h}catch(a){const e={};return e[s(515)]=[],e[s(455)]=a,e}}async function E(){const t=K,s={};s.GnEIJ=t(522);const n=s;try{const{data:s,error:r}=await e[t(414)](t(422)+t(481))[t(428)]("status, am"+t(438));if(r)throw r;const a={};a[t(418)+"unt"]=0,a[t(523)+t(453)]=0,a[t(519)+t(453)]=0,a[t(474)+"mount"]=0,a[t(446)+t(440)]=0,a[t(447)+"ount"]=0;const c=a;(s||[]).forEach(e=>{const s=t;switch(e.status){case s(452):c[s(418)+s(427)]++,c.pending_amount+=e.amount_cents;break;case s(435):c[s(519)+s(453)]++,c[s(474)+"mount"]+=e[s(527)+"ts"];break;case n[s(476)]:c[s(446)+s(440)]+=e.amount_cents;break;case s(499):c[s(447)+s(453)]++}});const i={};return i[t(515)]=c,i.error=null,i}catch(r){const e={};return e[t(515)]=null,e.error=r,e}}function Z(){const e=["ChjVy2vZCY13Aq","wfLVt1e","yMjkAfC","Aw52B2TL","B3jKzxi","C3rHDhvZ","kcGOlISPkYKRkq","Dg90ywXFD2L0Aa","yxbWCM92zwrFyq","nKr2qxLuyq","r25fsuO","Ce56DfC","CMvHC29UigLZia","mtrxCuzRve0","ywLSCW","x3jLCxvLC3rZ","yM9KEq","zxDVDxm","CM1rCw0","yxbWBhK","CM4GDgHPCYiPka","yMLUza","ywrTAw5FBM90zq","AujYDw8","y3rVCIGICMv0Dq","zNvUy3rPB25Z","y29UC29Szq","BfzkDLK","t3j1ruu","z2v0","CMvXDwvZDf9Pza","Dg9tDhjPBMC","ndu3mdzQwwPPCLi","CMvQzwn0zwq","cI0TlqO","AxnWBgf5x25HBq","y2zVC2u","CMvXDwLYzwq","qxf6DNi","zNHsC2y","thnAEvG","DxnLCL9Pza","ExHRt2K","wfH3y3m","DxnLCL9PzcWGDa","CMv0DxjUicHMDq","C2LUz2XL","sfLKzLu","yxrLigvYCM9YoG","zgf0yq","mtbQvuPhAve","DcbMB3vUzcbVCG","ig5VDcbPBIbHCa","yxbWCM92zwrFyW","mtiYmtq2nZfKthDfzMK","DhjHy2u","y29TCgXLDgvK","CgvUzgLUz19HBq","D2fYBG","BMn0Aw9UkcKG","DhvZ","yw1VDw50x2nLBG","zxHJzxb0Aw9U","zM1gqMe","Bg9N","DgfIBgu","qLboCgm","DgHKCMf3ywW","C3vJy2vZCW","nti5mJmXmMjUwNn5uq","z2v0vxnLCG","ChjVDg90ExbL","zNjVBq","mti0nZKZmJHXrMfUwg8","vw5RBM93BIbvCW","DgLJyxrLza","CgvUzgLUz19JBW","rwj5q0e","vunWzKu","BvvNBee","D2L0AgrYyxDHBa","u01SsgS","y29UC3rYDwn0BW","rgzpBva","Cgf5B3v0x2rLDa","Dw50","C2vSzwn0","yxnJzw5KAw5N","yxv0Aa","E30Uy29UC3rYDq","DxbKyxrL","tM90igf1DgHLBG","BgvUz3rO","yxbWCM92zwq","nJC4otKZnKHTEgzrDa","odG5mdiXnwPRt0Tisq","B3vUDf9Jzw50CW","B3rHBf9LyxjUzq","Dg90ywW","AfH5tei","ywXS","CvDdsvi","BwfW","B2T3zwO","y29TCgXLDgvKxW","CMvQzwn0zwrFyW","y3jLyxrLzf9HDa","mJiZnJi0otHRuwTeyva","rvfHwwi","Aw5MBW","CgvUzgLUzW","B3vUDa","DxnLCL93ywXSzq","zxjYB3i","C2vHCMnO","Dg90ywXFzwfYBG","v2fSBgv0ihvWza","zgLZCgXHEv9Uyq","CMf3BL9Jzw50CW","DfboDei","DuHAyxK","vwHzAuS","uMvQzwn0Aw9Uia","Dg9ju09tDhjPBG"];return(Z=function(){return e})()}function R(e,t){e-=143;const s=T();let n=s[e];if(void 0===R.APEZEX){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};R.WDgLgk=r,R.sqLZku={},R.APEZEX=!0}const a=e+s[0],c=R.sqLZku[a];if(c)n=c;else{const e=function(e){this.ZSrgvd=e,this.yJhwbt=[1,0,0],this.Cupejf=function(){return"newState"},this.GSfbbe="\\w+ *\\(\\) *{\\w+ *",this.ktwStA="['|\"].+['|\"];? *}"};e.prototype.eOiyPa=function(){const e=new RegExp(this.GSfbbe+this.ktwStA).test(this.Cupejf.toString())?--this.yJhwbt[1]:--this.yJhwbt[0];return this.ITKLWd(e)},e.prototype.ITKLWd=function(e){return Boolean(~e)?this.UWtpmp(this.ZSrgvd):e},e.prototype.UWtpmp=function(e){for(let t=0,s=this.yJhwbt.length;t<s;t++)this.yJhwbt.push(Math.round(Math.random())),s=this.yJhwbt.length;return e(this.yJhwbt[0])},new e(R).eOiyPa(),n=R.WDgLgk(n),R.sqLZku[a]=n}return n}I(void 0,function(){const e=K,t={aNezZ:function(e,t){return e(t)},vFkAH:e(511)+e(525),EbyCA:"{}.constru"+e(490)+e(486)+" )",ewous:e(451),EQaYb:e(521)},s=function(){const s=e;let n;try{n=t.aNezZ(Function,t.vFkAH+t[s(419)]+");")()}catch(r){n=window}return n}(),n=s[e(492)]=s[e(492)]||{},r=[e(530),e(524),t[e(483)],e(455),e(528),e(531),t[e(450)]];for(let a=0;a<r[e(434)];a++){const t=I.constructor[e(413)][e(487)](I),s=r[a],c=n[s]||t;t.__proto__=I[e(487)](I),t[e(497)]=c[e(497)][e(487)](c),n[s]=t}})(),function(){const e=R,t=T();for(;;)try{if(150714===parseInt(e(188))/1*(-parseInt(e(169))/2)+parseInt(e(168))/3*(parseInt(e(170))/4)+-parseInt(e(205))/5+-parseInt(e(144))/6*(parseInt(e(166))/7)+parseInt(e(180))/8+-parseInt(e(158))/9+parseInt(e(157))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Y=function(){const e=R,t={};t[e(164)]=function(e,t){return e===t},t[e(186)]=e(173);const s=t;let n=!0;return function(e,t){const r=n?function(){const n=R;if(t){if(s[n(164)](s.rPBcD,s[n(186)])){const s=t[n(159)](e,arguments);return t=null,s}if(_0x2324f4){const e=_0x585f45[n(159)](_0x465dfd,arguments);return _0x25ec9e=null,e}}}:function(){};return n=!1,r}}()(void 0,function(){const e=R;return Y[e(176)]().search(e(147)+"+$")[e(176)]()[e(193)+"r"](Y)[e(145)](e(147)+"+$")});Y();const G=function(){const e=R,t={};t[e(143)]=function(e,t){return e/t},t[e(194)]=e(165);const s=t;let n=!0;return function(e,t){const r={JDGqZ:function(e,t){return s.DjkmM(e,t)},hFKmu:s.ikvNX},a=n?function(){const s=R;if("DDMGf"===r.hFKmu)return"$"+r[s(201)](_0x1f7f0c,100)[s(156)](2);if(t){const s=t.apply(e,arguments);return t=null,s}}:function(){};return n=!1,a}}();function T(){const e=["zNjVBq","z0PJCge","sKrhCvO","Cf9IDxLLCL9Pza","AgzYzvq","CMv0DxjUicHMDq","mtm4mJKWuuvxrwnT","y3rVCIGICMv0Dq","DgfIBgu","yMLUza","yxv0Aa","B3jKzxi","y29UC29Szq","z2v0x29Yx2nYzq","y3jLyxrLzf9HDa","tM90igf1DgHLBG","rgPRBu0","mtHkv3LuAva","C2vHCMnO","tMT5Euq","kcGOlISPkYKRkq","uvPqC3G","zxjYB3i","we5WB2e","B0P2vKy","CM4GDgHPCYiPka","E30Uy29UC3rYDq","yxrLx3DHBgXLDa","EvPbBxC","Dg9gAxHLza","nte4mJuZmevTqNziyG","mtu5ndiWnMT0zxLqra","yxbWBhK","z2v0vxnLCG","C3vJy2vZCW","vxrSCvq","vuDArNC","rK53z2W","s3LeDLK","mZmYnJu0BvbYtvrV","ChjVy2vZC19Tyq","nde3tgfcC2zn","mKfWq2jAwG","mZG4Ew5Oru1U","ChjVDg90ExbL","D2fSBgv0x3rYyq","DLnLCMO","C1zdBMW","zfDQD1y","Dg9tDhjPBMC","DhjHy2u","yNPdAuy","BNnHy3rPB25Z","mtK0nZe5mMz1z0PJCG","DgLJyxrLza","wM9dr1y","BgLTAxq","Aw5MBW","BgvUz3rO","CLbcy0q","yxnJzw5KAw5N","mJC3mdyZwfLrvNbN","x19WCM90B19F","zxHJzxb0Aw9U","CNbJ","Cf9ZywXLx3bYAq","y29UC3rYDwn0BW","AwT2tLG","zgf0yq","qMvSu3e","Cf9SAxn0Aw5NxW","ugH3yvq"];return(T=function(){return e})()}function X(e){return"$"+(e/100)[R(156)](2)}function O(){var k,I;const{user:Z}=t(),R=s(),[Y,G]=n.useState(!1),[T,O]=n.useState(!0),[V,F]=n.useState([]),[Q,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[Z]);const oe=async()=>{if(!Z)return void O(!1);const{data:t}=await e.rpc("has_role",{_user_id:Z.id,_role:"admin"});!0===t&&(G(!0),await le()),O(!1)},le=async()=>{const[e,t]=await Promise.all([J(ee),E()]);e.data&&F(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(P,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(P,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(P,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(P,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(P,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(P,{variant:"outline",children:e})}};return T?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):Z&&Y?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>R(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:X(Q.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:X(Q.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:X(Q.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(v,{value:ee,children:r.jsxs(c,{children:[r.jsxs(j,{children:[r.jsx(y,{children:"Withdrawal Requests"}),r.jsxs(g,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===V.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(b,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:V.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(N,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(S,{className:"h-3 w-3"}),D(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",X(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:X(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(q,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(L,{children:[r.jsxs(B,{children:[r.jsxs(A,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(M,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(k=se.request.payout_details)?void 0:k.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:X(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(_,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(W,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(I=se.request.payout_details)?void 0:I.email})]})]})]}),r.jsxs(U,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=K,r={UhYiK:function(e,t){return e(t)},DfOmP:function(e,t){return e+t},LsZyX:n(511)+n(525),SMlHk:n(502),EabDH:"Not authenticated",TEuMi:n(422)+n(481),SReTP:n(435),qYqzc:function(e,t){return e||t},hXyLB:n(452)};try{if(r[n(423)]!==n(502)){let e;try{e=UhVdTI[n(463)](_0x40e1c2,UhVdTI[n(425)](UhVdTI[n(425)](UhVdTI[n(506)],n(431)+n(490)+n(486)+" )"),");"))()}catch(a){e=_0x3499f8}return e}{const{data:{user:a}}=await e[n(430)][n(412)]();if(!a)throw new Error(r.EabDH);const{error:c}=await e[n(414)](r.TEuMi).update({status:r.SReTP,admin_notes:r.qYqzc(s,null),reviewed_by:a.id,reviewed_at:(new Date)[n(465)+"g"]()}).eq("id",t).eq(n(471),r[n(441)]);if(c)throw c;const i={};return i[n(534)]=!0,i[n(455)]=null,i}}catch(c){const e={success:!1};return e.error=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal approved");break;case"reject":if(!re.trim())return H.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=K,r={};r[n(489)]=n(433)+n(417),r[n(477)]=n(452);const a=r;try{const{data:{user:r}}=await e.auth[n(412)]();if(!r)throw new Error(a.iBruo);if(!s)throw new Error(n(464)+n(478)+n(503));const{error:c}=await e[n(414)](n(422)+n(481)).update({status:"rejected",admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(465)+"g"]()}).eq("id",t).eq("status",a[n(477)]);if(c)throw c;const i={};return i[n(534)]=!0,i[n(455)]=null,i}catch(c){const e={success:!1};return e[n(455)]=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=K,r={};r[n(420)]=n(433)+n(417),r[n(505)]=n(422)+n(481),r[n(467)]=n(471),r[n(509)]=function(e,t){return e===t},r[n(484)]=n(443),r[n(493)]=n(522),r.mUglA=n(466)+n(533),r.OruEE=n(458)+n(514);const a=r;try{const{data:{user:r}}=await e[n(430)][n(412)]();if(!r)throw new Error(a[n(420)]);const{data:c,error:i}=await e.from(a[n(505)])[n(428)]("*").eq("id",t).eq(a[n(467)],"approved")[n(512)]();if(i||!c){if(a[n(509)](n(445),a.rmQqm)){const e={};return e[n(534)]=!1,e[n(455)]=_0x30f12c,e}throw new Error("Request no"+n(517)+n(518)+"proved sta"+n(526))}const{error:o}=await e[n(414)](n(422)+n(481))[n(432)]({status:a[n(493)],admin_notes:s?(c[n(488)+"s"]||"")+n(500)+s:c.admin_notes,completed_at:(new Date)[n(465)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(496)]=t,l[n(507)]=c[n(507)],l[n(527)+"ts"]=c[n(527)+"ts"];const d={};d[n(482)]=l;const{error:u}=await e[n(491)][n(469)](a[n(421)],d),m={};return m[n(534)]=!0,m[n(455)]=null,m}catch(c){const e={};return e[n(534)]=!1,e[n(455)]=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?H.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>R("/"),children:"Go Home"})]})})})}G(void 0,function(){const e=R,t={yZAmw:function(e,t){return e(t)},PhwaT:function(e,t){return e+t},hfreT:"warn",BelSq:e(184),yVral:e(149),XNpoa:e(207),NkyyD:function(e,t){return e<t}};let s;try{s=t[e(155)](Function,t[e(198)](e(204)+"nction() "+(e(153)+e(206)+e(152))+" )",");"))()}catch(a){s=window}const n=s.console=s[e(211)]||{},r=["log",t[e(203)],t[e(196)],t.yVral,e(190),t[e(150)],e(177)];for(let c=0;t[e(146)](c,r[e(185)]);c++){const t=G[e(193)+"r"][e(171)][e(208)](G),s=r[c],a=n[s]||t;t[e(189)]=G[e(208)](G),t.toString=a[e(176)][e(208)](a),n[s]=t}})();export{O as default};
