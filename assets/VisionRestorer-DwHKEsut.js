const e="import { useEffect, useRef } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { useActiveVisionStore } from '@/stores/activeVisionStore';\n\n/**\n * VisionRestorer - Automatically restores the user to their last active vision\n * when they refresh the page or navigate away and return\n */\nexport const VisionRestorer = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const hasAttemptedRestoreRef = useRef(false);\n  \n  const { \n    hasValidVision, \n    getRestoreRoute, \n    shouldRestoreOnMount,\n    markRestored,\n    activeVision,\n  } = useActiveVisionStore();\n  \n  useEffect(() => {\n    // Only attempt restore once per session\n    if (hasAttemptedRestoreRef.current) return;\n    \n    // Only restore if we're on the home page\n    if (location.pathname !== '/') return;\n    \n    // Check if we should restore\n    if (!shouldRestoreOnMount) return;\n    \n    // Check for valid vision to restore\n    if (!hasValidVision()) {\n      markRestored();\n      return;\n    }\n    \n    const restoreRoute = getRestoreRoute();\n    if (!restoreRoute) {\n      markRestored();\n      return;\n    }\n    \n    // Don't restore to the home page (avoid infinite loop)\n    if (restoreRoute === '/') {\n      markRestored();\n      return;\n    }\n    \n    hasAttemptedRestoreRef.current = true;\n    markRestored();\n    \n    // Navigate to the saved vision route\n    // Use replace to avoid adding to history\n    navigate(restoreRoute, { replace: true });\n  }, [location.pathname, hasValidVision, getRestoreRoute, shouldRestoreOnMount, markRestored, navigate]);\n  \n  return null;\n};\n";export{e as default};
