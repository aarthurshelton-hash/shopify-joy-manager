import{d6 as e,d7 as t,cp as n,a as s,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as f,C as x,x as h,D as p,B as v,A as g,p as w,t as b,cN as y,bC as j,S as N,a6 as C,P as z,y as M,bG as D,T as L,aq as _,z as B,cU as E,aj as q,aT as A,ca as G,b as S,d8 as O}from"./index-Cjdju9jQ.js";!function(){const e=I,t=P();for(;;)try{if(829659===-parseInt(e(425))/1+-parseInt(e(591))/2*(-parseInt(e(416))/3)+parseInt(e(436))/4*(parseInt(e(576))/5)+parseInt(e(491))/6*(-parseInt(e(445))/7)+parseInt(e(470))/8*(-parseInt(e(550))/9)+-parseInt(e(563))/10*(parseInt(e(406))/11)+parseInt(e(507))/12*(parseInt(e(423))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const W=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=I,t={};t[e(518)]=e(467)+"+$";const n=t;return W[e(580)]().search("(((.+)+)+)+$").toString()[e(541)+"r"](W).search(n[e(518)])});W();const k=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[I(622)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();k(void 0,function(){const e=I,t={btqnl:function(e,t){return e(t)},gSuCe:function(e,t){return e+t},WAAdz:e(604)+'ctor("retu'+e(417)+" )",Eeffc:e(618),OHJoR:"info",wrrqi:e(471),YoQaz:e(593)},n=function(){const n=e;let s;try{s=t.btqnl(Function,t[n(400)](n(460)+n(469),t[n(557)])+");")()}catch(r){s=window}return s}(),s=n.console=n[e(415)]||{},r=[e(409),t.Eeffc,t.OHJoR,e(514),t[e(500)],e(403),e(570)];for(let a=0;a<r[e(571)];a++)if(t[e(391)]!==e(392)){const t=k[e(541)+"r"].prototype[e(443)](k),n=r[a],i=s[n]||t;t[e(475)]=k[e(443)](k),t[e(580)]=i[e(580)].bind(i),s[n]=t}else _0x501288[e(465)](_0x1f0e54,_0x1c431b,_0xd8c06)})();function I(e,t){e-=385;const n=P();let s=n[e];if(void 0===I.gZnGyO){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};I.hdMTKU=r,I.oRWlSm={},I.gZnGyO=!0}const a=e+n[0],i=I.oRWlSm[a];if(i)s=i;else{const e=function(e){this.lxkdOn=e,this.oCfEwO=[1,0,0],this.nfgbcD=function(){return"newState"},this.ptrFYn="\\w+ *\\(\\) *{\\w+ *",this.fkvLeC="['|\"].+['|\"];? *}"};e.prototype.aCkcxF=function(){const e=new RegExp(this.ptrFYn+this.fkvLeC).test(this.nfgbcD.toString())?--this.oCfEwO[1]:--this.oCfEwO[0];return this.QhwBZt(e)},e.prototype.QhwBZt=function(e){return Boolean(~e)?this.cvYUxI(this.lxkdOn):e},e.prototype.cvYUxI=function(e){for(let t=0,n=this.oCfEwO.length;t<n;t++)this.oCfEwO.push(Math.round(Math.random())),n=this.oCfEwO.length;return e(this.oCfEwO[0])},new e(I).aCkcxF(),s=I.hdMTKU(s),I.oRWlSm[a]=s}return s}function Y(n,s){const r=I,a={rycWY:function(e,t,n){return e(t,n)},rjoRg:function(e,t){return e/t},FpEqL:function(e,t){return e+t},titcF:function(e,t){return e*t},VpZQe:function(e,t){return e<t},ncNdh:function(e,t){return e-t},aVLQe:function(e,t){return e*t},GNfwi:function(e,t){return e+t},KRrub:function(e,t){return e*t},iYyAW:function(e,t){return e*t},VstWB:function(e,t){return e/t},cEtSo:function(e,t){return e*t},QuwjX:r(549),xdtaw:function(e,t){return e+t}},i=a.rjoRg(s,8),o=.02*s,c=a.FpEqL(s,a.titcF(o,2));let l=r(501)+r(564)+"ww.w3.org/"+r(495)+r(555)+c+r(493)+c+(r(539)+r(525))+c+" "+c+'">';l+=r(464)+'" y="0" wi'+r(430)+c+r(493)+c+'" fill="'+e[r(583)]+'"/>';for(let u=0;a[r(546)](u,8);u++){const s=a[r(520)](7,u);for(let c=0;c<8;c++){const d=n[s][c],m=d[r(476)]?e[r(578)]:e[r(530)],f=a[r(456)](o,a[r(395)](c,i)),x=a[r(608)](o,u*i);if(l+='<rect x="'+f+r(486)+x+'" width="'+i+r(493)+i+r(410)+m+r(586),d[r(442)][r(571)]>0){const e=a.KRrub(i,.08),n=[];for(const i of d.visits){const e=a[r(532)](t,i[r(621)],i[r(488)]);!n[r(447)](e)&&n[r(596)](e)}const s=Math[r(506)](n[r(571)],6),o=[];let c=i-a[r(487)](e,2);const u=a[r(560)](a[r(397)](c,.7),s);for(let t=0;t<s;t++)if(a[r(394)]!==r(549)){const e=a[r(532)](_0x356200,_0xa8eb5e[r(621)],_0x431151[r(488)]);!_0x20ae58.includes(e)&&_0x515f9d.push(e)}else{const e={};if(e[r(488)]=n[t],e[r(478)]=c,o[r(596)](e),c-=u,c<.1*i)break}for(const t of o){const e=(i-t[r(478)])/2;l+=r(595)+(f+e)+r(486)+a[r(528)](x,e)+'" width="'+t[r(478)]+r(493)+t.layerSize+r(410)+t[r(488)]+'"/>'}}}}return l+=r(405),l}function P(){const e=["BNvsy3a","DfLfvNG","A0XYvxq","AgLUz1f1ywXPDa","D2LKDgG9iG","swD6r1e","v0fbzhO","wMjgsu4","i0zerKngqG","vNn0v0i","zw5Wzw5Zzw50lG","zhjHD0LTywDL","mZi3mev2s2TbDa","psjODhrWoI8VDW","AwL2rvi","zMLSBfn0EwXL","D2HPDgu","y3fozwC","AgD0tuC","DhjHy2u","BgvUz3rO","ru4Guevou0vova","z01XweS","u0jQvNy","y3rvuKW","nw9Ht3jPwG","BwvHC3vYzvrLEa","BgLNAhq","v3LoDhO","Dg9tDhjPBMC","C0juvhy","CvPyEvy","yM9YzgvY","CNfmB1G","y2fUDMfZ","iI8+","sKHgzuS","AgvPz2H0","vgLTzxmGtMv3ia","D2LKDgG","mte1mJK0B2fRsuzR","z1L4tMW","EhP6rMW","idiWChGGj0nVCG","phjLy3qGEd0I","ChvZAa","zgvMyxvSDa","y3jVC3npCMLNAq","zMLSBa","BNHft0i","BgLUzvrV","qKnqyLK","zM9UDa","E30Uy29UC3rYDq","Bw92zvrV","yNPwy1K","ENjeww8","r05MD2K","we1JDMS","s1nwALm","iZbbmeeWqq","uKnWwxu","wvHXqu4","C3rYB2TLu3r5Ba","vw5RBM93BG","zM9UDhm","zxbIDeC","D2fYBG","D1jdCgK","Dgv4DefSAwDU","CgLLy2u","yxbWBhK","tLqG4PMA","D3nbCuq","CMLM","ALHfB2y","y29T","zw50","ww9ryxO","D0LZsvG","ugnXA3a","uxv3ALG","yvzmuwu","Bw9Yyw50jYWGrW","y0v0u28","mc45nsK","CgHkBKK","z1n1q2u","yLPovLm","vvPHvM0","DgfIBgu","rM55D2u","pc9ZDMC+","ntq1mdvOr0TfqwO","r0vRt2O","tM9jwe0","Bg9N","iIbMAwXSpsi","zKntBMW","iZC4nZe2yW","y2XPCa","Aw1Hz2vtBw9VDa","y29UC29Szq","mZbmD0vZze8","CM4GDgHPCYiPka","ywXWAgfIzxrPyW","nJaWidi0ChGGjW","C3jJ","v1LbDKu","qMXHy2S","mJaXnwDJDxzOAG","i2e4yti5zq","ndG3mdi2z01HB29d","ihzZia","AM9PBG","zMLSBfjLy3q","B25LCNjVCG","zhrOpsi","ren1swG","vKXiENK","BgLUzvDPzhrO","vNzuq3y","rwrNAfi","ntC1nZuWog1bAwvbAq","y1D2rgi","q3zczfO","D0XHC3O","icdIGkiGia","y3rVCIGICMv0Dq","DMLZAxrZ","yMLUza","AuDgBxK","mtC0m3f5AvPIyG","BfDyzK8","Aw5JBhvKzxm","C2f2zq","yMvNAw5qyxrO","tM9KBvO","sLzWA2q","uNbRy20","Dg9vChbLCKnHCW","DhLWzq","Dd11DgyToa","rNbfCuW","Awv0wgu","CxjJB2rL","Cw1oDLa","CMv0DxjUicHMDq","y09nrfm","C2nHBgu","i2zHzMfMoq","phjLy3qGEd0Ima","zMLSBfrLEhq","iZi5mJuYna","kcGOlISPkYKRkq","y3jLyxrLt2jQzq","BMn0Aw9UkcKG","ohPLCMndqW","zxHJzxb0Aw9U","uM9Tyw4NlcbuAq","y3jLyxrLrwXLBq","sLngC28","x19WCM90B19F","AxnmAwDODa","sgTsBfm","Bgf5zxjtAxPL","ntaWideYChGGjW","yxjJ","zw9Yz2LHlcbZzq","z2v0q29UDgv4Da","CgvUC2vUDc5JBW","Eu9sB2u","CMvKDwnL","iIb5psi","AvL5qvC","y29SB3i","CxDyEwG","tLfWEgK","mZG4ntzAqNLZv00","Aw1Hz2uVC3zNkW","iIbOzwLNAhq9iG","q2LUEMvSjYWGjW","mJaWmc9ZDMCIia","v25vC2i","BNmTC2vYAwy","iZq0ndaZyW","Bg9HzcbtvKC","D3jYCwK","phn2zYb4BwXUCW","yw5VBNLTB3vZ","uM9Tyw4NlcbZzq","s0jyAxm","C3bSAxq","BwLU","mZaZode2sw9ptwnQ","Bw92zxm","CMvHzhK","zw5Iswu","B25SB2fK","AxrHBgLJiduWma","zgf0zq","zxjYB3i","D05pDNa","ANbAwNi","Eg1So2nOyxjZzq","wvzcELy","y2vUDgvY","BMnozgG","CMv2B2TLt2jQzq","yKPSuLu","zgntAMy","rMfPBgvKihrVia","iJaGmca","sw50zxiNlcbZyq","CM91BMrszwn0","Egr0yxC","ide4ChGGj0nVCG","zgfYAW","tw92BhC","CNLJv1K","uKnsCwy","lI4U","wxvcsxC","wKzTz2e","i2u3ztvLna","C3rYB2TL","iIb2Awv3qM94pq","BgvMDa","y29UC3rYDwn0BW","ug9it2G","zxzLBNq","v2zvz2S","vfL6Be0","vNbAuwu","nJaWideZChGGjW","B1f1tfy","s0v3r1C","mti1mtu3odDUtgn1y0q"];return(P=function(){return e})()}async function U(e,t,n){const s=I,r={Movlw:function(e,t){return e(t)},JSFso:s(460)+s(469),YXqAN:"{}.constru"+s(441)+s(417)+" )",Pcqkp:s(585),jhnSg:function(e,t){return e*t},nxEOB:s(524)+s(499),VvTCv:function(e,t){return e===t},RCpYu:s(461),bJlRU:s(492)+s(517)+s(455)};return new Promise((a,i)=>{const o=s,c={GEkOj:r[o(393)],qwXyh:function(e,t){return r.jhnSg(e,t)},kLrUt:function(e,t){return e!==t},WnUsb:r[o(600)]};if(r[o(434)](r[o(612)],"cOMDS")){const s=new Image,l={};l[o(454)]=r[o(522)];const u=new Blob([e],l),d=URL["createObje"+o(575)](u);s.onload=()=>{const e=o,r=document[e(473)+"ent"](c[e(407)]);r[e(590)]=c[e(489)](t,5),r[e(588)]=c[e(489)](n,5);const i=r[e(482)]("2d");i[e(462)](5,5),i[e(562)](s,0,0,t,n),URL[e(521)+e(575)](d),a(r)},s[o(429)]=()=>{const e=o;c[e(553)](e(432),e(432))?(_0x54c41e=_0x3edb65[e(453)+"e"](),_0x2b82d4&&(_0x12d946+=e(440)+_0x23818d)):(URL[e(521)+e(575)](d),i(new Error(c[e(496)])))},s[o(420)]=d}else _0x4ecc5e=FFIGid[o(531)](_0x388919,FFIGid[o(474)]+FFIGid[o(613)]+");")()})}async function T(e){const t=I,n={};n[t(490)]=t(458),n[t(551)]="https://en"+t(483)+"m",n.EwaTb="transparent";const s=n;return(await import(s[t(490)]))[t(597)].toDataURL(s[t(551)],{width:200,margin:1,color:{dark:e?"#FAFAFA":"#1A1A1A",light:s.EwaTb},errorCorrectionLevel:"M"})}async function K(){return new Promise((e,t)=>{const s=I,r=new Image;r.crossOrigin="anonymous",r.onload=()=>e(r),r[s(429)]=t,r[s(420)]=n})}async function Z(e,t,n={}){const s=I,r={NodmZ:function(e,t){return e*t},SBjVv:function(e,t){return e(t)},WYAvE:s(540),yORoe:function(e,t){return e+t},zrDYo:s(519),WfUgk:function(e,t,n){return e(t,n)},Fnywe:function(e,t){return e+t},lGFTR:function(e,t){return e*t},oQuLV:function(e,t,n,s){return e(t,n,s)},gYxNl:function(e,t){return e+t},JPUVb:function(e,t){return e*t},urZfs:s(611),NoIXM:s(559),XMcvk:function(e,t){return e+t},WyNtz:function(e,t){return e+t},bZNVS:function(e,t){return e-t},rqLoX:"#a8a29e",enbIe:"#78716c",wNOvp:function(e,t){return e+t},sOrRq:"White",Sozcw:s(422),HfmPT:"middle",IgzGQ:s(419)+"Cinzel', '"+s(589)+s(503)+"rif",ietXe:s(426),jpZZr:function(e,t){return e-t},iGFmy:function(e,t){return e/t},wLasz:s(512)+" 20px 'Cor"+s(396)+s(481)+s(387),UZaVm:function(e,t){return e!==t},fCSnl:s(512)+s(529)+s(396)+s(481)+s(387),OrrlG:function(e,t){return e||t},dcSjf:"phJnI",ZFmga:function(e,t){return e===t},PoHOh:s(568),hgtMG:s(619),lWXfO:function(e,t){return e*t},qZXyV:"400 10px '"+s(589)+s(472)+"mes, serif",KBXis:function(e,t){return e>t},bzVcY:s(534),YuBIw:function(e,t){return e-t},CvBdZ:s(617),oxWoj:s(573),LWRYZ:function(e,t){return e>=t},bYbGn:function(e,t){return e<t},DCuIh:s(565),TMcTL:function(e){return e()},RCRqf:function(e,t){return e+t},JVpkd:function(e,t){return e-t},EdghR:function(e,t){return e+t},BCPbY:"rgba(255, 255, 255, "+s(398),tYEVx:"#e7e5e4",nhUMW:function(e,t){return e+t},TYzlM:function(e,t){return e+t},KSVjS:function(e,t){return e-t},qmNvP:function(e,t){return e/t},Rpkcm:function(e,t){return e+t},cWvDb:function(e,t){return e/t},sBTTv:function(e,t){return e/t},qsqkK:function(e,t){return e*t},wsAqD:function(e,t){return e+t},YGLSO:s(498),HkRlS:s(572),uLxDj:function(e,t){return e-t}};await async function(){const e=I;document[e(616)]&&document[e(616)][e(509)]&&await document.fonts[e(509)],await new Promise(e=>setTimeout(e,150))}();const{boardSize:a=600,darkMode:i=!1,withWatermark:o=!1,title:c}=n,l=r[s(544)](Y,e,a),u=.02*a,d=r[s(404)](a,r.lGFTR(u,2)),m=await r[s(548)](U,l,d,d),f=60,x=r.gYxNl(d,r[s(450)](f,2)),h=r.yORoe(d+220+60,120),p=document[s(473)+s(390)](s(585));p[s(590)]=5*x,p[s(588)]=r.JPUVb(h,5);const v=p[s(482)]("2d");v[s(462)](5,5),v[s(414)+"hingEnabled"]=!0,v["imageSmoot"+s(554)+"y"]="high",v[s(566)]=i?r.urZfs:r[s(408)],v[s(428)](0,0,x,h),v.drawImage(m,0,0,m.width,m[s(588)],f,f,d,d);const g=r.XMcvk(r[s(579)](f,d),28);v[s(614)+"e"]=s(i?466:537),v[s(433)]=1,v[s(449)](),v[s(605)](f,g),v[s(601)](r[s(401)](x,f),g),v[s(538)]();const w=s(i?463:466),b=i?r[s(584)]:s(412),y=s(i?412:424),j=i?r[s(510)]:r.rqLoX,N=x/2;let C=r[s(515)](g,55);const z=t[s(567)]||r.sOrRq,M=t.black||r.Sozcw;v.textBaseline=r.HfmPT,v[s(603)]=r[s(556)];const D=v[s(577)+"t"](z)[s(590)],L=v[s(577)+"t"](M)[s(590)];v.font="italic 500"+s(594)+"morant', G"+s(481)+s(387);const _=r[s(457)],B=v[s(577)+"t"](_)[s(590)],E=r[s(404)](D+B,L),q=r[s(516)](N,r[s(444)](E,2));if(v.font=s(419)+s(494)+s(589)+s(503)+s(387),v[s(566)]=w,v[s(620)]=r[s(421)],v[s(465)](z,q,C),v[s(603)]=r[s(439)],v[s(566)]=j,v[s(465)](_,r[s(592)](q,D),C),v.font=r[s(556)],v[s(566)]=w,v[s(465)](M,r[s(592)](r.wNOvp(q,D),B),C),C+=36,t[s(543)]&&r[s(402)](t[s(543)],"Unknown")){const e="1|3|4|2|0"[s(505)]("|");let n=0;for(;;){switch(e[n++]){case"0":C+=32;continue;case"1":v[s(566)]=b;continue;case"2":v.fillText(t.event,N,C);continue;case"3":v[s(603)]=r[s(411)];continue;case"4":v[s(620)]=s(519);continue}break}}const A=c,G=t[s(513)]||"";if(r.OrrlG(A,G)){if(r[s(402)](s(399),r[s(523)]))return _0x4cbc69;{v.fillStyle=y,v[s(603)]=s(479)+s(526)+s(497),v.textAlign=r[s(607)];let e="";if(A)if(r[s(536)](r[s(542)],r[s(569)])){const e=new _0x4807df,t={};t[s(454)]=s(492)+"xml;charse"+s(455);const n=new _0x643cd9([_0x12a6e5],t),a=_0x5bf876[s(468)+s(575)](n);e[s(511)]=()=>{const t=s,n=_0x3baf0a[t(473)+t(390)](t(585));n[t(590)]=_0x5e41b2*_0x211e65,n[t(588)]=r[t(450)](_0x4ff3e8,_0x109073);const i=n[t(482)]("2d");i[t(462)](_0x2203b7,_0x491ad7),i.drawImage(e,0,0,_0x475065,_0x16feda),_0x4a827e[t(521)+t(575)](a),r[t(574)](_0x48c3bf,n)},e.onerror=()=>{const e=s;_0x1003be["revokeObje"+e(575)](a),_0x4e3165(new _0x3013cd(e(524)+e(499)))},e.src=a}else e=A[s(453)+"e"](),G&&(e+=s(440)+G);else e=G;const t=2,n=e[s(505)](""),a=n[s(485)]((e,t)=>e+v[s(577)+"t"](t)[s(590)],0),i=r[s(446)](n[s(571)]-1,t);let o=N-r[s(484)](a,i)/2;for(const c of n)if(r[s(402)]("bjHbo","bjHbo")){const e=new _0x1ce6ff;e[s(598)+"n"]=s(502),e[s(511)]=()=>_0x2bbbd3(e),e[s(429)]=_0x29d618,e[s(420)]=_0x7921fc}else v[s(620)]=s(540),v[s(465)](c,o,C),o+=v[s(577)+"t"](c)[s(590)]+t;C+=28}}if(t[s(508)]&&t[s(508)].length>0){v.fillStyle=y,v[s(603)]=r[s(582)],v.textAlign=r[s(607)];const e=t[s(508)][s(427)](" "),n=r[s(504)](e.length,400)?r.Fnywe(e.substring(0,400),r[s(606)]):e,a=r.YuBIw(x-120,40),i=n.split(" ");let o="",c=C;const l=15,u=4;let d=0;for(const t of i)if(r[s(438)]===r.oxWoj)_0x589102[s(620)]=r[s(421)],_0x535e39[s(465)](_0x57603a,_0x4fe0ac,_0x40b147),_0x1417df+=r[s(484)](_0x5bc106[s(577)+"t"](_0x4441cd)[s(590)],_0x51a0f3);else{const e=o+(o?" ":"")+t;if(v[s(577)+"t"](e)[s(590)]>a&&o){if(v[s(465)](o,N,c),o=t,c+=l,d++,r.LWRYZ(d,u))break}else o=e}o&&r.bYbGn(d,u)&&v[s(465)](o,N,c)}const S=r[s(535)](h,f)-20;v[s(566)]=y,v[s(603)]="500 11px 'Inter', sa"+s(497),v[s(620)]=s(519);const O=("â™” EN PENSE"+s(385))[s(505)]("");let W=N-(O[s(485)]((e,t)=>e+v[s(577)+"t"](t)[s(590)],0)+4*r[s(401)](O.length,1))/2;for(const k of O)r[s(402)](s(388),r[s(431)])?(v[s(620)]=r.WYAvE,v[s(465)](k,W,S),W+=r[s(609)](v.measureText(k)[s(590)],4)):(_0x28a258[s(566)]=_0x55056e,_0x224221[s(603)]=s(512)+s(529)+s(396)+s(481)+s(387),_0x4c90c3[s(620)]=r[s(607)],_0xce9700.fillText(_0x49cdfc[s(543)],_0x40ad6b,_0x19f13f),_0x4289d9+=32);if(o){const[e,t]=await Promise.all([T(!1),r.TMcTL(K)]),n=220,a=65,i=r.RCRqf(f,d)-n-12,o=r[s(451)](r[s(401)](r[s(435)](f,d),a),12);v[s(566)]=r[s(602)],v.beginPath(),v[s(527)](i,o,n,a,6),v[s(599)](),v[s(614)+"e"]=r[s(552)],v[s(433)]=1,v[s(538)]();const c=48,l=r.nhUMW(i,12),u=r[s(545)](o,r[s(610)](a,c)/2);v[s(448)](),v[s(449)](),v[s(480)](l+r[s(459)](c,2),r[s(452)](u,r[s(437)](c,2)),r[s(581)](c,2),0,r.qsqkK(Math.PI,2)),v[s(413)](),v[s(562)](t,l,u,c,c),v.restore();const m=r[s(386)](l,c)+10;v.textAlign="left",v.textBaseline=s(418),v[s(566)]=r.YGLSO,v[s(603)]=s(547)+s(526)+s(497),v[s(465)](r[s(477)],m,o+28),v[s(566)]=s(412),v.font="400 11px '"+s(526)+s(497),v[s(465)](s(561)+s(389),m,o+46);const x=50,h=r.uLxDj(r[s(533)](i,n),x)-10,p=r[s(533)](o,r[s(459)](a-x,2)),g=new Image;await new Promise(t=>{const n=s,r={JHFeK:function(e){return e()}};g[n(511)]=()=>{const e=n;v[e(562)](g,h,p,x,x),r[e(587)](t)},g[n(429)]=()=>t(),g[n(420)]=e})}return p}const H=G.filter(e=>"custom"!==e.id);const R=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const F=()=>{const e=s(),{user:t,isLoading:n}=r(),[W,k]=a.useState(null),[I,Y]=a.useState(!1),[P,U]=a.useState(0),[T,K]=a.useState(""),[F,V]=a.useState([]),[J,X]=a.useState(50),[$,Q]=a.useState(!0),[ee,te]=a.useState(!1),[ne,se]=a.useState(null);a.useEffect(()=>{n||(async()=>{if(!t)return void k(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});k(!0===e)})()},[t,n]);const re=a.useCallback(async(e,n,s,r,a=!0)=>{try{const m=i(e.pgn),f=a?H[Math.floor(Math.random()*H.length)]:H[s%H.length],x=function(e,t){const n=G.find(e=>e.id===t)||G[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?n.white:n.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,f.id);o(f.id);const h=await Z(x,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:n}),p=await new Promise((e,t)=>{h.toBlob(n=>{n?e(n):t(new Error("Failed to create blob"))},"image/png",.95)}),v=Date.now(),g=`${t.id}/${v}-${n.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(g,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:b}=c.storage.from("visualizations").getPublicUrl(g),y=l(e.pgn),j={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:x,totalMoves:m.totalMoves,visualizationState:{paletteId:f.id,paletteName:f.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?s+1:void 0,gameHash:y}},{data:N,error:C}=await c.from("saved_visualizations").insert({user_id:t.id,title:n,pgn:e.pgn,game_data:j,image_path:b.publicUrl}).select().single();if(C)throw C;const z=function(e,t){if(e){const e=99,n=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+n}return 199+Math.floor(600*Math.random())}(r,s),{data:M,error:D}=await u(N.id,z);if(D)throw D;const L=function(e,t){const n=e?1.5:1,s=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*n+5*s),hdDownloads:Math.floor(3*Math.random()*n),gifDownloads:Math.floor(2*Math.random()*n),tradeCount:e?Math.floor(2*Math.random()):0}}(r,s);for(let e=0;e<L.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:N.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const _=d(e.pgn),B=a?"premium":"genesis";return{title:n,success:!0,visualizationId:N.id,listingId:null==M?void 0:M.id,isExemplar:r,paletteId:f.id,paletteName:f.name,gameHash:y,tier:B,openingName:null==_?void 0:_.fullName}}catch(m){return{title:n,success:!1,error:m.message,isExemplar:r}}},[t]),ae=F.filter(e=>e.success).length,ie=F.filter(e=>!e.success).length;return F.filter(e=>e.success&&e.isExemplar).length,n||null===W?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})}):t&&W?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(v,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(g,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(x,{children:[m.jsx(w,{children:m.jsxs(b,{className:"flex items-center gap-3",children:[m.jsx(y,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(j,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",J," visions: ",Math.min(25,J)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,J-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:J,onChange:e=>X(Number(e.target.value)),disabled:I,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(N,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:I}),m.jsxs(C,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(z,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(M,{variant:"secondary",className:"text-xs",children:[H.length," palettes"]})]})]}),m.jsx(v,{onClick:async()=>{if(!t)return void S.error("You must be logged in as the CEO account");Y(!0),V([]),U(0);const e=[],n=O.slice(0,Math.min(J,O.length)),s=[];for(let t=0;t<J;t++){const e=t%n.length,r=t<25,a=R[t]||`Vision ${t+1}`;s.push({game:n[e],title:a,isExemplar:r})}for(let t=0;t<s.length;t++){const{game:n,title:r,isExemplar:a}=s[t];K(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${s.length})`);const i=await re(n,r,t,a,$);e.push(i),V([...e]),U((t+1)/s.length*100),await new Promise(e=>setTimeout(e,300))}Y(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?S.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):S.error("Failed to create any visions")},disabled:I||!t,className:"w-full",size:"lg",children:I?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(L,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(v,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),se(null);try{const{data:e,error:n}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(n)throw n;if(!e||0===e.length)return S.info("No visions to delete"),void te(!1);const s=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",s);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=s.filter(e=>!i.has(e)),l=s.filter(e=>i.has(e));if(0===o.length)return S.info("All your visions have accrued natural value - none deleted"),se({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);se({deleted:o.length,preserved:l.length}),S.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){S.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||I||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(L,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),ne&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",ne.deleted," deleted"]}),ne.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",ne.preserved," preserved (has value)"]})]})})]}),I&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(_,{value:P,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:T})]}),F.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(B,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(E,{className:"h-4 w-4"}),F.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(q,{className:"h-4 w-4"}),F.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:F.map((e,t)=>m.jsxs(A.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(E,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(q,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(M,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(M,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(z,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(x,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(v,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{F as default};
