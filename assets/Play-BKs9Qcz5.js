import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as z,af as M,ag as D,ai as B,y as q,bF as L,bG as A,b6 as P,ae as S,bH as H,ah as T,bI as G,B as I,bJ as K,bK as W,bL as U,bM as _,bN as E,bO as O,bP as Y,bQ as X,bR as R,bS as V,bT as J,bU as Z,bV as F,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as ze,c7 as Me,an as De,av as Be,aw as qe,c8 as Le,aM as Ae,c9 as Pe,H as Se,P as He,ca as Te,b3 as Ge,bs as Ie,be as Ke,cb as We,aP as Ue,cc as _e,d as Ee,b2 as Oe,a9 as Ye,cd as Xe,ce as Re,cf as Ve,al as Je,au as Ze}from"./index-DEc03Eh1.js";import{L as Fe}from"./LiveColorLegend-C1kjPab6.js";import{T as Qe}from"./trending-down-IGGanLOz.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CkMEYft9.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=dt,t=ht();for(;;)try{if(544746===parseInt(e(172))/1*(parseInt(e(123))/2)+-parseInt(e(116))/3*(parseInt(e(147))/4)+-parseInt(e(173))/5+-parseInt(e(163))/6+-parseInt(e(186))/7*(parseInt(e(180))/8)+parseInt(e(159))/9*(-parseInt(e(142))/10)+parseInt(e(185))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[dt(157)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=dt;return ut[e(141)]().search(e(127)+"+$")[e(141)]()[e(166)+"r"](ut)[e(151)](e(127)+"+$")});function dt(e,t){e-=115;const n=ht();let s=n[e];if(void 0===dt.fNsKMe){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};dt.PuFsJb=r,dt.ZhspKP={},dt.fNsKMe=!0}const a=e+n[0],i=dt.ZhspKP[a];if(i)s=i;else{const e=function(e){this.URRsWs=e,this.WAXQUZ=[1,0,0],this.zsycWn=function(){return"newState"},this.AxGTgK="\\w+ *\\(\\) *{\\w+ *",this.XXeRNo="['|\"].+['|\"];? *}"};e.prototype.iRcwqs=function(){const e=new RegExp(this.AxGTgK+this.XXeRNo).test(this.zsycWn.toString())?--this.WAXQUZ[1]:--this.WAXQUZ[0];return this.ecQDjP(e)},e.prototype.ecQDjP=function(e){return Boolean(~e)?this.CuFxHn(this.URRsWs):e},e.prototype.CuFxHn=function(e){for(let t=0,n=this.WAXQUZ.length;t<n;t++)this.WAXQUZ.push(Math.round(Math.random())),n=this.WAXQUZ.length;return e(this.WAXQUZ[0])},new e(dt).iRcwqs(),s=dt.PuFsJb(s),dt.ZhspKP[a]=s}return s}ut();const mt=function(){const e=dt,t={};t[e(181)]=e(150),t[e(118)]=e(154),t.yPzYl=e(171);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(148)]=function(e,t){return e!==t},i.lOtsd=n[a(181)];const o=i;if(n[a(118)]!==n[a(129)]){const e=s?function(){const e=a;if(r){if(o.qiDHP(o[e(143)],e(150))){const t=_0x144f78?function(){if(_0x68c766){const t=_0x1b30a0[e(157)](_0xaeb05d,arguments);return _0x193180=null,t}}:function(){};return _0x35c1b8=!1,t}{const n=r[e(157)](t,arguments);return r=null,n}}}:function(){};return s=!1,e}return _0x2e80c3(_0x2b227f).message}}();function xt(e){const t=dt;return function(e){const t=dt,n={};n[t(184)]=t(119)+" No legal "+t(135)+t(179),n[t(138)]=t(136)+t(161)+t(160),n.GaCKr=t(178)+"nt_material",n[t(121)]=t(128)+t(122)+"l",n[t(152)]=t(149)+"_rule",n[t(167)]=t(136)+"e fifty-mo"+t(164),n[t(183)]=t(168)+"le",n.iPTHA=t(175);const s=n;if(e[t(177)+"e"]()){const e={};return e[t(120)]=t(131),e.message=s[t(184)],e[t(158)+"ge"]="Stalemate!",e}if(e["isThreefol"+t(133)+"n"]()){const e={};return e[t(120)]=t(140)+"repetition",e[t(174)]=s[t(138)],e[t(158)+"ge"]="Threefold "+t(156),e}if(e[t(132)+t(146)+"al"]()){const e={};return e[t(120)]=s[t(155)],e.message=t(130)+t(182)+t(124),e.shortMessage=s[t(121)],e}const r=e[t(169)]();if(parseInt(r[t(145)](" ")[4],10)>=100){const e={};return e.reason=s.jNGaT,e[t(174)]=s.mVehn,e[t(158)+"ge"]=s[t(183)],e}const a={};return a[t(120)]=t(126),a[t(174)]="Game drawn!",a.shortMessage=s.iPTHA,a}(e)[t(174)]}function ht(){const e=["mZe0odG4ofHlzNLbuW","reDVCeO","C3vMzMLJAwvUDa","C1vgCNC","uujlDve","mJi0ndy4otDPy2HbB0m","n1P2tfrWEa","E30Uy29UC3rYDq","DgfIBgu","x19WCM90B19F","nJLAweHbt2C","ugfhrMS","yNbwyvy","u3rHBgvTyxrLiq","CMvHC29U","sxnZyLK","BNqGtwf0zxjPyq","mtm0mtjTy2HcwLO","ig1HDgvYAwfSlG","tKn2suy","Dw5RBM93BG","kcGOlISPkYKRkq","sw5ZDwzMAwnPzq","Evb6wwW","rhjHDYbIEsbPBG","C3rHBgvTyxrL","AxnjBNn1zMzPyW","zfjLCgv0AxrPBW","q0rVBfC","Bw92zxmGyxzHAq","rhjHDYbIEsb0Aa","y29UC29Szq","qvbOCeG","zxHJzxb0Aw9U","DgHYzwvMB2XKxW","Dg9tDhjPBMC","nJaXntKWAhbSs1vd","Be90C2q","AxneCMf3","C3bSAxq","AwvUDe1HDgvYAq","ndmXmJrrDMnnz3e","CwLesfa","zMLMDhLFBw92zq","shbArK8","C2vHCMnO","AK5hyvq","BgvUz3rO","rhLHy1u","r2fds3i","uMvWzxrPDgLVBG","yxbWBhK","C2HVCNrnzxnZyq","ow5PEwfhrG","Cgv0AxrPB24U","CMvLzM9SzcbYzq","Bg9N","ndeYnZu3nhnlteTitW","DMuGCNvSzs4","yMLUza","y29UC3rYDwn0BW","BvzLAg4","ntaTtw92zsbsDq","zMvU","ChjVDg90ExbL","t0HsCMW","mtnftKTXD1i","oty2otG1y1for1n5","BwvZC2fNzq","rhjHDW","BMn0Aw9UkcKG","AxntDgfSzw1HDa","Aw5ZDwzMAwnPzq","BgfIBguU"];return(ht=function(){return e})()}mt(void 0,function(){const e=dt,t={CDolW:function(e,t){return e+t},wDzkK:"return (fu"+e(176),PaGFk:function(e){return e()},Okliz:"info",NCvIF:function(e,t){return e<t}};let n;try{const s=Function(t[e(134)](t.wDzkK,e(187)+'ctor("return this")( )')+");");n=t[e(117)](s)}catch(a){n=window}const s=n[e(137)]=n.console||{},r=[e(162),"warn",t.Okliz,"error",e(139),e(188),"trace"];for(let i=0;t[e(125)](i,r[e(153)]);i++){const t=mt[e(166)+"r"][e(170)][e(165)](mt),n=r[i],a=s[n]||t;t[e(115)]=mt.bind(mt),t[e(141)]=a[e(141)].bind(a),s[n]=t}})(),function(){const e=ft,t=vt();for(;;)try{if(825052===parseInt(e(376))/1*(-parseInt(e(383))/2)+-parseInt(e(370))/3*(-parseInt(e(342))/4)+parseInt(e(335))/5+-parseInt(e(341))/6*(-parseInt(e(405))/7)+parseInt(e(390))/8+-parseInt(e(306))/9+-parseInt(e(356))/10*(parseInt(e(314))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){const e=ft,t={UfTVQ:function(e,t){return e===t}};t[e(302)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e,i={uTUBT:function(e,t){return n.UfTVQ(e,t)}};if(!n.IPgxr(a(415),a(415))){const e=s?function(){const e=a;if(r){if(i[e(374)](e(313),e(313))){const n=r[e(340)](t,arguments);return r=null,n}return()=>{const t=e;_0x1aa9eb.current[t(338)]&&_0xcac7b7[t(317)][t(338)].close()}}}:function(){};return s=!1,e}{const e=new(_0x446094.AudioContext||_0xfff46e[a(344)+"oContext"]),t=e.createGain();t[a(400)](e[a(310)+"n"]),t.gain[a(396)]=_0x58b02e;const n={};n[a(338)]=e,n[a(316)]=t,_0x20bf91[a(317)]=n}}}()(void 0,function(){const e=ft,t={};t[e(350)]=e(361)+"+$";const n=t;return pt[e(343)]()[e(305)](n[e(350)])[e(343)]()[e(329)+"r"](pt)[e(305)](n[e(350)])});function ft(e,t){e-=288;const n=vt();let s=n[e];if(void 0===ft.ykRTHo){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ft.dMJvWr=r,ft.jhaTZu={},ft.ykRTHo=!0}const a=e+n[0],i=ft.jhaTZu[a];if(i)s=i;else{const e=function(e){this.TBpkBv=e,this.GiTCSk=[1,0,0],this.wrvXng=function(){return"newState"},this.PezIKo="\\w+ *\\(\\) *{\\w+ *",this.kuqGYY="['|\"].+['|\"];? *}"};e.prototype.gtcjJO=function(){const e=new RegExp(this.PezIKo+this.kuqGYY).test(this.wrvXng.toString())?--this.GiTCSk[1]:--this.GiTCSk[0];return this.IOYgKZ(e)},e.prototype.IOYgKZ=function(e){return Boolean(~e)?this.UzdpIa(this.TBpkBv):e},e.prototype.UzdpIa=function(e){for(let t=0,n=this.GiTCSk.length;t<n;t++)this.GiTCSk.push(Math.round(Math.random())),n=this.GiTCSk.length;return e(this.GiTCSk[0])},new e(ft).gtcjJO(),s=ft.dMJvWr(s),ft.jhaTZu[a]=s}return s}pt();const gt=function(){const e=ft,t={};t[e(362)]=e(403);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(413)]=function(e,t){return e+t};const o=i;if(a(403)===n.aoOix){const e=s?function(){if(r){const e=r[a(340)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x2dd7e1[a(300)][a(322)+"lRampToVal"+a(393)](_0x1cd9eb,o[a(413)](_0x1e9bc7[a(357)+"e"],_0x4535d6))}}();function vt(){const e=["y2XVC2u","ntKYndqYmezzs3rWEG","Aw5PDef1zgLV","y3jLyxrLt3nJAq","y29UDgv4Da","v2vIief1zgLVia","yxbWBhK","nKjIAuLODW","ng9gtwPiCa","Dg9tDhjPBMC","D2vIA2L0qxvKAq","twreuMW","y3jLyxrLqNvMzG","yNvMzMvY","CM4GDgHPCYiPka","C3rHCNq","tMv5sem","CNHRCMC","y2fWDhvYzq","v0zprvq","DhLWzq","rwTxzMC","mtyWCfvTwe91","y3vYCMvUDfrPBq","EhfOwgm","C2f3Dg9VDgG","swLWBeW","kcGOlISPkYKRkq","yw9pAxG","y2HLy2TTyxrL","CMzPsLK","rNjeCvu","z2fTzuvUza","C3rVCa","s0DWtwO","y3jLyxrLr2fPBG","ndy3otK2n2zlDMrjDa","r1DODvi","BurtAhy","y3rVCIGICMv0Dq","DvrvqLq","rMT4A0e","nteXodK4BNrhEKDx","zMPdrKy","DfHbCKu","C2fTCgXLuMf0zq","qujWyxC","Bw92zq","BgXHDg9Y","mNLtDuPOvq","zxjtB3vYy2u","D2fYBG","AwXSzwDHBa","ywrgAwX0zxi","uuXKwvG","u1zTuMi","oti4nJy1nLn5refgBq","BNDRuxy","y2HLy2S","DwvbDfrPBwu","qu5yAu4","twXeugC","DMfSDwu","CgXHEvnVDw5K","zxHJzxb0Aw9U","DMLJDg9YEq","y29UBMvJDa","uMvQvNO","z2v0q2HHBM5LBa","zfHsteC","C3f1yxjL","mtmZndmZm3rAB0HZEG","DhjPyw5NBgu","vgLTzq","DgfIBgu","EezrEeG","rM9RyLy","D3vMt3C","sKnfBeu","EKnss24","C2LUzq","AvvmEfK","zhjHDW","yxDUCLa","rgf0yq","ywvJtwC","CMfUzg9T","zgvMzwf0","z2fPBG","zxHXzLe","C2v0vMfSDwvbDa","Aw1L","zLDHuuO","qNPxwvu","zNjLCxvLBMn5","qvbjig5VDcbZDq","svbNEhi","DhjHy2u","zxDLtee","C2vHCMnO","mJC0mJC1mhP4wer2sG","y29UC29Szq","y3jLyxrLqMLXDq","DKDjyLm","zgvZDgLUyxrPBW","vg9wywX1zuf0va","BMn0Aw9UkcKG","s1rQEgO","mty4nZu1ngn0D3DOqG","A012qNu","z2fPBK5Vzgu","y3vYCMvUDa","zxjYB3i","vNn3uLa","BgvUz3rO","yMLUza","zxHWB25LBNrPyq","BfjHBxbuB1zHBa","Bg93CgfZCW","rK1xwNK","BNj1zNq","DhHXB1u","ChjVDg90ExbL","y29UC3rYDwn0BW","EM52tM8","BgLUzwfYuMfTCa","s2jVsvq","E30Uy29UC3rYDq"];return(vt=function(){return e})()}gt(void 0,function(){const e=ft,t={rfiJY:function(e,t){return e+t},aecMg:function(e,t){return e+t},VswRP:"return (fu"+e(312),FkxkA:function(e,t){return e(t)},vjHAE:function(e,t){return e+t},SVmRb:e(333)+e(373)+'rn this")( )',fjCFF:"yyZsK",WFOET:function(e){return e()},FMWZy:e(385),nwkQv:"info",awnrP:e(398),DPcuk:e(303)},n=t[e(353)](function(){const n=e,s={FokbV:function(e,n){return t[ft(364)](e,n)},txqoU:function(e,n){return t[ft(291)](e,n)},vGIbS:t[n(319)]};let r;try{r=t[n(375)](Function,t.vjHAE(t[n(319)]+t[n(389)],");"))()}catch(a){if(n(326)===t[n(377)]){let e;try{e=_0x40b2d6(s[n(410)](s[n(327)](s[n(309)],"{}.constru"+n(373)+n(348)+" )"),");"))()}catch(i){e=_0x35fc0f}return e}r=window}return r}),s=n[e(307)]=n[e(307)]||{},r=["log",t[e(325)],t[e(391)],e(318),t[e(289)],e(408),t.DPcuk];for(let a=0;a<r[e(320)];a++){const t=gt[e(329)+"r"][e(328)][e(321)](gt),n=r[a],i=s[n]||t;t.__proto__=gt.bind(gt),t[e(343)]=i[e(343)][e(321)](i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=ft,r={ANXiN:function(e,t){return e||t},exqfQ:function(e,t){return e+t},RejVz:function(e,t){return e-t},znvNo:function(e,t){return e+t},paXxk:function(e,t){return e+t},YyGWD:function(e,t){return e*t},lZLVO:s(324),EkWfg:function(e,t){return e+t},eweLA:s(381),KboIT:function(e,t,n,s,r,a){return e(t,n,s,r,a)},FrDqU:s(406),xqhXc:s(352),tXArE:function(e,t,n){return e(t,n)},MdDRl:s(404),IiplL:s(414),GWhuR:s(392),rxkrg:s(363),fWaQJ:s(366),FSdxD:function(e,t,n){return e(t,n)},QLdYX:s(399),ABpaw:function(e,t,n,s,r,a){return e(t,n,s,r,a)},KGpMj:s(386),unxWx:s(359),kMvBu:s(412),mDShv:function(e,t){return e===t},iSxEn:"NDtbH",xFQxH:function(e,t,n){return e(t,n)}},a={};a[s(338)]=null,a[s(316)]=null;const i=t.useRef(a),o=r[s(409)](t.useCallback,()=>{const e=s;if(!i[e(317)][e(338)])try{const t=new(window.AudioContext||window[e(344)+"oContext"]),s=t[e(369)]();s[e(400)](t[e(310)+"n"]),s[e(294)][e(396)]=n;const r={};r[e(338)]=t,r[e(316)]=s,i[e(317)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;i.current[e(316)]&&(i[e(317)].gainNode.gain[e(396)]=n)},[n]);const c=t.useCallback((t,n,a="sine",c=.01,l=.1,u)=>{const d=s;if(!e)return;o();const{context:m,gainNode:x}=i[d(317)];if(r[d(394)](!m,!x))return;const h=m[d(337)+d(382)](),p=m[d(369)]();h.type=a,h[d(300)].setValueAtTime(t,m.currentTime),u&&h[d(300)][d(322)+d(323)+d(393)](u,m[d(357)+"e"]+n),p[d(294)][d(296)+d(407)](0,m.currentTime),p.gain[d(331)+d(311)+d(297)](1,r[d(295)](m.currentTime,c)),p[d(294)][d(322)+d(323)+"ueAtTime"](.01,r[d(401)](r[d(330)](m.currentTime,n),l)),p[d(294)][d(331)+d(311)+"ime"](0,r.paXxk(m[d(357)+"e"],n)),h[d(400)](p),p[d(400)](x),h[d(349)](m[d(357)+"e"]),h[d(367)](m[d(357)+"e"]+n)},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(317)];if(!c||!l)return;const u=r.YyGWD(c[a(379)],t),d=c[a(346)+"er"](1,u,c[a(379)]),m=d[a(402)+a(290)](0);for(let e=0;e<u;e++)m[e]=2*Math[a(292)]()-1;const x=c["createBuff"+a(384)]();x[a(347)]=d;const h=c[a(308)+a(387)]();h[a(354)]=r.lZLVO,h.frequency[a(396)]=n;const p=c[a(369)]();p[a(294)][a(296)+a(407)](.3,c[a(357)+"e"]),p[a(294)]["exponentia"+a(323)+"ueAtTime"](.01,r[a(355)](c[a(357)+"e"],t)),x[a(400)](h),h[a(400)](p),p[a(400)](l),x[a(349)](c[a(357)+"e"]),x[a(367)](c.currentTime+t)},[e,o]),u=r.tXArE(t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(304)]:r.KboIT(c,800,.08,n(414),.005,.05),r[n(332)](c,400,.06,r[n(365)],.005,.04);break;case r[n(358)]:r[n(378)](l,.12,2e3),c(300,.1,r[n(345)],.005,.08),r[n(332)](c,150,.15,r[n(360)],.01,.1);break;case"castle":c(600,.06,r[n(360)],.005,.04),r.tXArE(setTimeout,()=>c(700,.06,n(414),.005,.04),80);break;case r[n(371)]:r[n(332)](c,880,.15,n(406),.01,.1),r.tXArE(setTimeout,()=>c(1100,.12,n(406),.01,.08),120);break;case r[n(351)]:c(880,.2,n(414),.01,.15),setTimeout(()=>c(660,.2,n(414),.01,.15),150),setTimeout(()=>c(440,.3,n(414),.01,.2),300),setTimeout(()=>c(330,.4,"sine",.01,.3),500);break;case"gameStart":c(523,.12,n(414),.01,.08),setTimeout(()=>c(659,.12,"sine",.01,.08),100),r.tXArE(setTimeout,()=>c(784,.2,n(414),.01,.15),200);break;case r[n(298)]:r[n(332)](c,440,.15,n(406),.01,.1),r.FSdxD(setTimeout,()=>c(349,.25,"triangle",.01,.2),150);break;case r[n(388)]:r[n(380)](c,523,.1,r.IiplL,.01,.08),setTimeout(()=>c(659,.1,n(414),.01,.08),100),setTimeout(()=>c(784,.1,n(414),.01,.08),200),setTimeout(()=>c(1047,.3,n(414),.01,.25),300);break;case n(293):r[n(380)](c,392,.2,n(414),.02,.15),setTimeout(()=>c(349,.2,n(414),.02,.15),200),setTimeout(()=>c(330,.3,n(414),.02,.25),400),setTimeout(()=>c(262,.4,n(414),.02,.35),650);break;case n(288):r[n(380)](c,440,.15,r[n(360)],.01,.1),setTimeout(()=>c(440,.15,n(414),.01,.1),180),setTimeout(()=>c(523,.2,n(414),.01,.15),360);break;case r[n(368)]:c(200,.1,r[n(345)],.005,.08),c(150,.08,r.unxWx,.005,.06)}},[e,c,l]);t.useEffect(()=>{const e=s,t={};t.wufOw=r[e(315)];const n=t;if(r[e(372)](r.iSxEn,e(299))){const t=_0x154980[e(340)](_0x53db31,arguments);return _0x168596=null,t}return()=>{const t=e;t(395)===n[t(411)]?_0x203d9f.current.gainNode&&(_0x34596f[t(317)][t(316)][t(294)][t(396)]=_0x49e7bd):i[t(317)][t(338)]&&i[t(317)][t(338)][t(334)]()}},[]);const d={};return d[s(397)]=u,d[s(336)]=o,d},yt=Nt;!function(){const e=Nt,t=kt();for(;;)try{if(815556===-parseInt(e(421))/1*(-parseInt(e(427))/2)+-parseInt(e(437))/3*(parseInt(e(426))/4)+-parseInt(e(438))/5*(parseInt(e(440))/6)+-parseInt(e(436))/7+-parseInt(e(412))/8*(-parseInt(e(423))/9)+parseInt(e(434))/10+parseInt(e(430))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nt(429)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Nt,t={};t[e(408)]=e(422)+"+$";const n=t;return wt.toString()[e(418)](e(422)+"+$")[e(432)]()[e(439)+"r"](wt)[e(418)](n[e(408)])});wt();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nt(429)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();jt(void 0,function(){const e=Nt,t={XFOMW:function(e,t){return e(t)},EwCzp:function(e,t){return e+t},BrfoZ:function(e,t){return e+t},lNHVr:"return (function() ",OWvHL:function(e){return e()},GQMPl:e(420),NBqOr:function(e,t){return e<t}};let n;try{const s=t[e(415)](Function,t[e(416)](t.BrfoZ(t[e(417)],e(414)+'ctor("return this")( )'),");"));n=t[e(428)](s)}catch(a){n=window}const s=n[e(409)]=n[e(409)]||{},r=[e(424),e(433),"info","error",t[e(431)],"table",e(425)];for(let i=0;t.NBqOr(i,r[e(435)]);i++){const t=jt[e(439)+"r"][e(411)][e(419)](jt),n=r[i],a=s[n]||t;t[e(406)]=jt[e(419)](jt),t[e(432)]=a[e(432)][e(419)](a),s[n]=t}})();const Ct={};function Nt(e,t){e-=406;const n=kt();let s=n[e];if(void 0===Nt.emGpTe){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.TvDIim=r,Nt.GULlsX={},Nt.emGpTe=!0}const a=e+n[0],i=Nt.GULlsX[a];if(i)s=i;else{const e=function(e){this.VAQICA=e,this.KiYgNr=[1,0,0],this.leqvzT=function(){return"newState"},this.gDOZoJ="\\w+ *\\(\\) *{\\w+ *",this.VURdOw="['|\"].+['|\"];? *}"};e.prototype.eIsFxH=function(){const e=new RegExp(this.gDOZoJ+this.VURdOw).test(this.leqvzT.toString())?--this.KiYgNr[1]:--this.KiYgNr[0];return this.uizkgW(e)},e.prototype.uizkgW=function(e){return Boolean(~e)?this.RBUIeT(this.VAQICA):e},e.prototype.RBUIeT=function(e){for(let t=0,n=this.KiYgNr.length;t<n;t++)this.KiYgNr.push(Math.round(Math.random())),n=this.KiYgNr.length;return e(this.KiYgNr[0])},new e(Nt).eIsFxH(),s=Nt.TvDIim(s),Nt.GULlsX[a]=s}return s}function kt(){const e=["nZC3nZyZmgnfAfvPDG","y29UC3rYDwn0BW","nMnfr01Izq","x19WCM90B19F","y2HLC3mTC291BG","v3rsEMq","y29UC29Szq","zc1Zzxr0Aw5NCW","ChjVDg90ExbL","nZe5ndCXmLDnC3r3Da","zw5HyMXLza","E30Uy29UC3rYDq","wezptvC","rxDdENa","Be5ivNi","C2vHCMnO","yMLUza","zxHJzxb0Aw9U","m0H2D3PmqW","kcGOlISPkYKRkq","oxzQAKLRzG","Bg9N","DhjHy2u","mZjWCvLyAKy","mtC1mdiYAuftA2zn","t1D2seW","yxbWBhK","mJG1mZCXntDeBgDAzNG","r1fnugW","Dg9tDhjPBMC","D2fYBG","otaYndKXmezxy1LXAG","BgvUz3rO","nta1ota0mffVAeTtCq","ntG2ode4ugDjD0To"];return(kt=function(){return e})()}Ct.name=yt(407)+yt(410);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[yt(413)]}))}),Ct));function Mt(e,t){e-=247;const n=Lt();let s=n[e];if(void 0===Mt.xBRPqg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Mt.gYCRIb=r,Mt.WqtHzo={},Mt.xBRPqg=!0}const a=e+n[0],i=Mt.WqtHzo[a];if(i)s=i;else{const e=function(e){this.VswUBa=e,this.roJZBx=[1,0,0],this.LfdYzc=function(){return"newState"},this.zCNYnF="\\w+ *\\(\\) *{\\w+ *",this.tqEsND="['|\"].+['|\"];? *}"};e.prototype.ewSPAu=function(){const e=new RegExp(this.zCNYnF+this.tqEsND).test(this.LfdYzc.toString())?--this.roJZBx[1]:--this.roJZBx[0];return this.ofDJmR(e)},e.prototype.ofDJmR=function(e){return Boolean(~e)?this.lpdlKB(this.VswUBa):e},e.prototype.lpdlKB=function(e){for(let t=0,n=this.roJZBx.length;t<n;t++)this.roJZBx.push(Math.round(Math.random())),n=this.roJZBx.length;return e(this.roJZBx[0])},new e(Mt).ewSPAu(),s=Mt.gYCRIb(s),Mt.WqtHzo[a]=s}return s}const Dt=Mt;!function(){const e=Mt,t=Lt();for(;;)try{if(299831===-parseInt(e(496))/1+parseInt(e(527))/2*(-parseInt(e(445))/3)+-parseInt(e(428))/4+-parseInt(e(493))/5+parseInt(e(534))/6+parseInt(e(459))/7+parseInt(e(443))/8*(parseInt(e(309))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){const e=Mt,t={};t[e(369)]=e(269);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Mt;if(n[s(369)]===s(429))({qyfaG:function(e,t){return e(t)}})[s(441)](_0x14cebf,s(327));else if(t){const n=t[s(259)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}()(void 0,function(){const e=Mt,t={};t.qNwEb=e(457)+"+$";const n=t;return Bt[e(437)]()[e(330)](e(457)+"+$")[e(437)]()[e(464)+"r"](Bt)[e(330)](n[e(324)])});Bt();const qt=function(){const e=Mt,t={};t[e(283)]=e(273);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(513)]=n[a(283)],i[a(321)]=a(291);const o=i,c=s?function(){const e=a;if(r){if(o[e(513)]!==o.nsVQH){const n=r[e(259)](t,arguments);return r=null,n}_0x38a46a.success("w"===_0x2f8d49?"You won!":e(417)+"!")}}:function(){};return s=!1,c}}();function Lt(){const e=["Aw4GysbNyw1L","BvLOt0W","Cu53rwi","zNjVBq","t1vcCgK","DMLJDg9YEq","q2HHBgXLBMDLia","DKLuAgi","C2vHCMnO","y3vYCMvUDf9Mzq","AM9PBKj5q29Kzq","qwzUs2C","q2fUBM90igPVAq","Aw5JBhvKzxm","BIbPBIb0BYbJCG","C2LVBIK","DgLTzv9JB250CG","uNzVr0e","rK5ZANK","ChjVDg90ExbL","z0j0DeO","y0zXD2q","Bw92zv91y2K","Bw92zunVDw50","CMvZDwX0","BxLdB2XVCG","B2vhALG","AgfSBgvUz2vFyW","s3HxrhK","DxbKyxrLievmtW","Bg9FCMf0Aw5N","tgP2y3u","AxnFChvIBgLJ","yKHNywO","r2fTzsbHBhjLyq","ihbSyxLPBMCGyq","Dw50Aw1Lza","yvjOs1K","CfzUwvq","y2HLC3nFBw92zq","y3jLyxrLr2fTzq","DfHzyKy","y29KztOG","vgLlrwG","r0DxvKO","uMf0Aw5NoIa","yxnJzw5KAw5N","vMvrAeS","D2fPDgLUzW","AgfUz2vZ","y3jLyxrLzef0","AwXSzwDHBa","BgvnB3zLCW","y2HHBMDL","zhrnvKW","rgnbvei","y2fWDhvYzwq","tuLUuxe","CgDU","B3vUza","Ahrtzhy","su5trvju","tNjrA1i","Ewnywva","y29TCgXLDgvK","D2HPDgvuAw1LuG","q0LuwNm","ihjHDgLUz3m6","yKXVqMS","BerQEu4","qKvZCKK","teXzu3u","zxHJzxb0Aw9U","BIb5B3vYig93BG","Bxb2r0y","sw52ywXPzcbVCG","ENvqD0y","rMv5sNG","sg9pyMK","CKLK","y29Kzq","zseGww91igfYzq","z2fTzv9Pzd1LCq","ANz5AKW","DgLTzunVBNrYBW","uxrUDNq","C3vIC3rYAw5N","B2rL","ugXLyxnLihnPzW","Bw92zq","tY1p","vunQyNm","C2vSzwn0","tKXJCLq","tw92zsbLCNjVCG","v2HPDguGD2LUCW","Bw92zxmT","vePrzvG","uvbksg8","Aw5MBW","yvn2uw0","Afryt1i","zwXVx3jHDgLUzW","teT5Bg4","AvHbt0G","AM9PBKDHBwu","mtmYmJm1mKTVEgXmzW","wMLNDgu","ywHZseC","BMvS","C3f1yxjL","Bg9HzeDHBwu","ruzmt0O","lwfJy2vWDhmGAq","t1LNrNy","Dg9tDhjPBMC","ChjVzMLSzxm","ywjHBMrVBMvK","sfbrzxK","CxLMyuC","rfjqreC","mJr4rgfjCfa","zw1HAw5PBMC","mJm5mxLRENz0Aq","DhjHy2u","BIbPBIb0BYbQBW","BwvZC2fNzq","EhntrKW","yMXHy2TuAw1LuG","z1rHzhC","zwf0zsbHigDHBq","ww91ihjLC2LNBG","BMv3","quf1vKe","y2fWDhvYzq","kcGOlISPkYKRkq","CM4GDgHPCYiPka","nZe5nZqWqwLJD2Th","y2HLy2S","BMn0Aw9UkcKG","y2HHBgXLBMDLqW","Bw92zv9JB3vUDa","y29UC3rYDwn0BW","D2LUBMvYswq","D2LUBMvYx2LK","D2HPDgvFDgLTzq","yMLUza","zwqHifDHAxrPBG","ww91ihDVBIe","DxnLCL9Pza","CgXHEwvYx2LK","yMXHy2TFCgXHEq","A2zTwKy","yMXPDhPFnq","ruTKz24","yMXHy2TFDgLTzq","yMXHy2S","Bw92zv9Zyw4","C3vJy2vZCW","A1vxrge","yMXHy2TqywXLDa","qMXHy2SGD2LUCW","rhjHDYbVzMzLCG","Ce9vwwe","zhrZv3q","y29UC29Szq","BgvUz3rO","EuzNv0K","y2HHBM5LBa","rMfPBgvKihrVia","C3vIC2nYAwjL","mtqYmdy1mgfWqvDZtG","revUEwu","D2HPDgu","nty3ovjkuLfSsW","rML5Cgm","qNr5uwO","Ahvbrg8","suPrrwK","CeTqDxi","x3jLBwfPBMLUzW","DhvYBG","C3rHCNrLzf9HDa","B2Pxr0u","ufDJCLK","Bwf5yMvtAw5NBa","y2HLC3nFz2fTzq","svPbsMC","yNj4Bwq","zwXzEwy","ChjVBw90Aw9U","rw5VBeO","rLLnwLy","CYbcBgfJAY4","CMv0DxjUicHMDq","D0TrEwy","qujnvfi","Bg9HzcbNyw1L","Axnhyw1Lt3zLCG","q01fzwW","zhKGC3rHCNrLza","Bg9N","D2HPDgvFCgfSzq","DhrL","C3rHCNrLzef0","mte4nezTrvPysW","t2vxtMC","zxjFAwq","CeToreO","r3HzAfe","Bw92zv9UDw1Izq","z3fHrwy","mJK1mtmZne94ruHxuW","DLjxwwW","zeHmwNO","t3HxwhG","yMXHy2TFD2LUCW","tNnQsfm","D2HPDgvFCgXHEq","D2HPDgvqBgf5zq","CLb2Egq","BwfRzu1VDMu","CNbJ","BunHEwG","D2HPDgvFD2LUCW","D0TXzK4","r2fTzsbJCMvHDa","yxbWBhK","ChvIBgLJ","C2fU","yNvSBgv0xZe","z2vUzxjHDgvFyW","D2LOB1u","yMXHy2TFCgfSzq","Cg9ZDgDYzxnFyW","zMvU","EfDhuxK","v3vdrve","y3jLyxrLzf9HDa","zxjYB3i","BMvUDc4UlG","C1LhCxq","zeLnyuu","BwfW","yMXHy2TqBgf5zq","ALHlD0K","z2fTzq","y3rVCIGICMv0Dq","wePnuwe","ywn0AxzL","B25LBNqGyxv0BW","tM13uvO","vhDrDvG","AxndAgvJAW","zhjHDW","zYbMB3iGB3bWBW","zgvMzwf0","Aw5Zzxj0","Dg9ju09tDhjPBG","v0Losvm","zMLUza","DxbKyxrL","y3vYCMvUDezLBG","Bw92zxm","AK1lEfa","CMvTB3zLq2HHBG","Bw92zwrtCxvHCG","r2fTzsbUB3qGzG","Dg9vChbLCKnHCW","r0Xur0q","t2zVuvu","AM54swO","BMv3uMf0Aw5N","D2HPDgvqywXLDa","CeP2wK4","y2HHBgXLBMDLxW","z2v0qxzHAwXHyG","mJm5mJaYovb5surPDG","t2zQzMG","CwfKCuS","CMfWAwrFmtu","tgjUqK8","q0DQsLq","AxndAgvJA21HDa","y2fZDgXL","tY1plu8","C3rHDhvZ","igDHBwu","BMTkq3y","BNnwuuG"];return(Lt=function(){return e})()}qt(void 0,function(){const e=Mt,t={XJMQa:function(e,t){return e(t)},LbnBO:function(e,t){return e+t},TwQuX:e(516)+e(461),wAvkF:"{}.constru"+e(279)+e(458)+" )",vRWYl:e(271),hTXOR:e(394),fPRhX:e(446),EZUUo:function(e,t){return e<t},oeGjX:function(e,t){return e===t},MInQq:e(505)};let n;try{n=t.XJMQa(Function,t[e(313)](t[e(284)],t.wAvkF)+");")()}catch(a){n=window}const s=n[e(487)]=n[e(487)]||{},r=[e(523),"warn",e(421),t[e(535)],t[e(423)],"table",t.fPRhX];for(let i=0;t.EZUUo(i,r[e(488)]);i++)if(t[e(348)](t[e(379)],"ojWGE")){const t=qt[e(464)+"r"][e(341)][e(468)](qt),n=r[i],a=s[n]||t;t.__proto__=qt[e(468)](qt),t[e(437)]=a.toString[e(468)](a),s[n]=t}else t[e(280)](_0x51af1e,e(411))})();const At={};At[Dt(262)]=60,At[Dt(475)]=300,At[Dt(312)]=900,At[Dt(358)]=0;const Pt=At,St=Wt;!function(){const e=Wt,t=Ut();for(;;)try{if(713188===-parseInt(e(111))/1*(-parseInt(e(134))/2)+-parseInt(e(104))/3+-parseInt(e(118))/4+parseInt(e(131))/5+parseInt(e(154))/6+-parseInt(e(136))/7*(parseInt(e(141))/8)+parseInt(e(102))/9*(-parseInt(e(142))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ht=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Wt(105)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Wt;return Ht[e(151)]()[e(155)](e(138)+"+$")[e(151)]()[e(153)+"r"](Ht).search(e(138)+"+$")});Ht();const Tt=function(){const e={};e[Wt(150)]=function(e,t){return e===t};const t=e;let n=!0;return function(e,s){const r=n?function(){if(s){if(t[Wt(150)]("AkWTi","spExk"))return!!_0x3a69bd&&_0x14c9fc.vibrate([15,40,15]);{const t=s.apply(e,arguments);return s=null,t}}}:function(){};return n=!1,r}}();Tt(void 0,function(){const e=Wt,t={oGjac:function(e,t){return e(t)},NeqBL:e(156)+e(127)+'rn this")( )',JKciO:e(125),LZPAY:e(147),fvCdX:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t.oGjac(Function,n(140)+n(145)+t[n(108)]+");")()}catch(r){s=window}return s}(),s=n[e(107)]=n.console||{},r=[t[e(110)],t[e(124)],e(146),e(137),"exception",e(130),e(100)];for(let a=0;t.fvCdX(a,r.length);a++){const t=Tt[e(153)+"r"][e(106)][e(128)](Tt),n=r[a],i=s[n]||t;t[e(112)]=Tt[e(128)](Tt),t.toString=i.toString[e(128)](i),s[n]=t}})();const Gt={};Gt[St(120)]=10,Gt.medium=25,Gt.heavy=50,Gt[St(126)]=[10,50,20],Gt.error=[50,30,50,30,50],Gt.selection=5;const It=Gt,Kt=()=>{const e=St,n={PcULB:function(e,t){return e===t},sCRJv:e(122),PWNVl:e(148)+"dback fail"+e(116),YxTax:function(e,t){return e(t)},pmVam:function(e,t){return e+t},kQhLl:"return (fu"+e(145),eNGMj:"LgskF",knakO:e(101),PukWB:e(113),PqNOp:function(e,t,n){return e(t,n)},BcyQx:function(e,t,n){return e(t,n)},VCUAm:function(e,t,n){return e(t,n)}},s=typeof navigator!==n[e(114)]&&n[e(123)]in navigator,r=t.useCallback((t="light")=>{const r=e;if(!s)return!1;try{if(n[r(103)](n[r(139)],r(149))){const e=_0x405c7f[r(105)](_0x5cb200,arguments);return _0x1a7d95=null,e}{const e=It[t];return navigator.vibrate(e)}}catch(a){return!1}},[s]),a={select:t.useCallback(()=>r("selection"),[r]),move:t.useCallback(()=>r("light"),[r]),capture:t.useCallback(()=>r(e(157)),[r]),check:t.useCallback(()=>r(e(129)),[r]),victory:n.PqNOp(t.useCallback,()=>r(e(126)),[r]),error:n[e(109)](t.useCallback,()=>r(e(137)),[r]),castle:t.useCallback(()=>{const t=e;if(n[t(135)]===t(144))return!!s&&navigator.vibrate([15,40,15]);{let e;try{e=oRgSEL[t(133)](_0x486235,oRgSEL[t(115)](oRgSEL[t(119)],t(156)+t(127)+t(152)+" )")+");")()}catch(r){e=_0x528c9e}return e}},[s]),gameStart:n[e(121)](t.useCallback,()=>!!s&&navigator[e(113)]([10,30,10,30,20]),[s])},i={};return i[e(143)+"d"]=s,i[e(113)]=r,i[e(117)]=a,i};function Wt(e,t){e-=100;const n=Ut();let s=n[e];if(void 0===Wt.VapSzp){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Wt.FjsfHN=r,Wt.MTTANW={},Wt.VapSzp=!0}const a=e+n[0],i=Wt.MTTANW[a];if(i)s=i;else{const e=function(e){this.gqNVRR=e,this.BIngWr=[1,0,0],this.FZnuKY=function(){return"newState"},this.ixtxHe="\\w+ *\\(\\) *{\\w+ *",this.oUhtxd="['|\"].+['|\"];? *}"};e.prototype.MkBoeB=function(){const e=new RegExp(this.ixtxHe+this.oUhtxd).test(this.FZnuKY.toString())?--this.BIngWr[1]:--this.BIngWr[0];return this.JIGnXS(e)},e.prototype.JIGnXS=function(e){return Boolean(~e)?this.wNyKoP(this.gqNVRR):e},e.prototype.wNyKoP=function(e){for(let t=0,n=this.BIngWr.length;t<n;t++)this.BIngWr.push(Math.round(Math.random())),n=this.BIngWr.length;return e(this.BIngWr[0])},new e(Wt).MkBoeB(),s=Wt.FjsfHN(s),Wt.MTTANW[a]=s}return s}function Ut(){const e=["ufDovMW","wxHuyxG","nJe2zvzoEvPT","zu5htwO","mtKXmtDiDNL0yNy","zxjYB3i","kcGOlISPkYKRkq","C0nssNy","CMv0DxjUicHMDq","mtK1mKPiwvPkvW","mteWwNLsvufi","AxntDxbWB3j0zq","tgDZA0y","BMn0Aw9UkcKG","Aw5MBW","D2fYBG","sgfWDgLJigzLzq","B1bzree","vwP3Ahu","Dg9tDhjPBMC","CM4GDgHPCYiPka","y29UC3rYDwn0BW","nJm0mteWnNfiENLsrG","C2vHCMnO","E30Uy29UC3rYDq","BwvKAxvT","DhjHy2u","Dw5KzwzPBMvK","ntKXmdu3AwL6uKHS","ugnvtei","ody2odGWs2r4qwjl","yxbWBhK","ChjVDg90ExbL","y29UC29Szq","tMvXqKW","qMn5uxG","sKTJAu8","mtKWm0PXs3nPCq","x19WCM90B19F","DMLICMf0zq","A25HA08","Cg1wyw0","zwq6","AgfWDgLJCW","mJyZnJyWnevKtw1PsW","A1fOtgW","BgLNAhq","vKnvqw0","uhndr3q","uhvRv0i","tfPqqvK","Bg9N","C3vJy2vZCW","y3rVCIGICMv0Dq","yMLUza","AgvHDNK","DgfIBgu","nZaZntq1nu1Qz3jZAq"];return(Ut=function(){return e})()}const _t={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Et=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:z}=Kt();let M=null;try{M=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Et(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?z.capture():z.move();return void(await n(b,c)?(y(null),j([])):z.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return z.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,x,n,s,z]),P=t.useCallback(e=>{if(!(null==M?void 0:M.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?M.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):M.setHoveredSquare(null)},[M,q]),S=t.useCallback(()=>{(null==M?void 0:M.setHoveredSquare)&&M.setHoveredSquare(null)},[M]),H=t.useCallback(e=>{if(!M)return!1;const{highlightedPiece:t,lockedPieces:n}=M,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[M,g]),T=M&&(null!==M.highlightedPiece||M.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Et(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=H(i),j=T&&g&&!y,N=T&&y;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>P(i),onMouseLeave:S,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),P(i),setTimeout(()=>S(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:_t[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Yt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Xt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Yt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?z[e.quality]:null;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(L,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Rt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Vt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:W,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Jt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:W,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const z=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=z.find(e=>e.value===x))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(P,{className:"w-3 h-3"})]}):u.jsx(S,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(T,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Rt[e],s=n.icon;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(G,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Vt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(I,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Xt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(_,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(E,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(O,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(V,{className:"h-3 w-3"}),q]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(J,{align:"end",className:"bg-popover",children:z.map(e=>u.jsx(Z,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(J,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Zt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Ft=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(I,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(S,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(S,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(I,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:z}=he(),{setCapturedTimelineState:M,setReturningFromOrder:D}=pe(),B=t.useRef(null),[q,L]=t.useState(j),[A,P]=t.useState(!1),[S,H]=t.useState(""),[T,G]=t.useState(!1),[K,W]=t.useState(!1);se(p);const U=t.useMemo(()=>p?fe(p):null,[p]),_=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const E=async e=>{if(e&&!v)return void G(!0);if(!B.current)return;P(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{P(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(I,{variant:q?"outline":"default",size:"sm",onClick:()=>_(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(I,{variant:q?"default":"outline",size:"sm",onClick:()=>_(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:z})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",U&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",U]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(I,{onClick:()=>E(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(I,{onClick:()=>E(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(I,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?ze(x,c.totalMoves):Me;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(I,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;M({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:z}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:z},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:T,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),W(!0)},trigger:"download"}),u.jsx(qe,{isOpen:K,onClose:()=>W(!1)})]})},en=mn;!function(){const e=mn,t=cn();for(;;)try{if(650590===parseInt(e(411))/1*(parseInt(e(375))/2)+parseInt(e(355))/3+parseInt(e(410))/4*(-parseInt(e(384))/5)+parseInt(e(441))/6*(parseInt(e(377))/7)+parseInt(e(423))/8+parseInt(e(430))/9+parseInt(e(414))/10*(-parseInt(e(421))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){const e=mn,t={};t[e(431)]=function(e,t){return e!==t},t[e(389)]=e(364);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(431)](n[a(389)],a(372))){const e=s?function(){if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0x57b1f8?function(){if(_0x467e40){const e=_0x970693[a(353)](_0x55c943,arguments);return _0xeb95e5=null,e}}:function(){};return _0x26e4eb=!1,e}}}()(void 0,function(){const e=mn,t={};t[e(449)]=e(404)+"+$";const n=t;return tn[e(386)]()[e(354)](n[e(449)])[e(386)]()[e(380)+"r"](tn)[e(354)](n[e(449)])});tn();const nn=function(){const e={};e[mn(396)]=function(e,t){return e===t};const t=e;let n=!0;return function(e,s){const r={CeXgO:function(e,n){return t[mn(396)](e,n)},jYzms:"zBVjw"},a=n?function(){const t=mn;if(!r[t(408)]("zBVjw",r[t(440)])){const e=_0x3f3e87[t(353)](_0x534b4a,arguments);return _0x56948b=null,e}if(s){const t=s.apply(e,arguments);return s=null,t}}:function(){};return n=!1,a}}();nn(void 0,function(){const e=mn,t={htnfb:function(e,t){return e!==t},mneQq:function(e,t){return e(t)},qsdHS:"return (fu"+e(358),vFBIT:function(e){return e()},tAJyy:"info",VUJiO:e(351),OSavq:e(447)};let n;try{if(t[e(406)](e(387),e(417))){const s=t[e(443)](Function,t[e(448)]+"{}.constru"+e(371)+'rn this")( ));');n=t.vFBIT(s)}else{const t=_0x1650fa[e(380)+"r"][e(457)][e(397)](_0x5289d0),n=_0x286c46[_0x179133],s=_0x25ae09[n]||t;t[e(368)]=_0xf62e91.bind(_0x517f5c),t.toString=s.toString[e(397)](s),_0x3ebb5f[n]=t}}catch(a){n=window}const s=n[e(415)]=n[e(415)]||{},r=[e(378),e(425),t[e(400)],"error",t[e(412)],t[e(374)],e(422)];for(let i=0;i<r[e(352)];i++){const t=nn.constructor[e(457)][e(397)](nn),n=r[i],a=s[n]||t;t[e(368)]=nn.bind(nn),t[e(386)]=a[e(386)][e(397)](a),s[n]=t}})();const sn=()=>{const e=mn,t={};t[e(361)]=4e3,o[e(424)]("Shortcuts:"+e(402)+e(446)+e(433)+"=Lobby, ?="+e(436),t)},rn={};rn[en(437)]="M",rn[en(455)]=en(452)+en(439);const an={key:"R"};an[en(455)]=en(363)+"e (during "+en(407);const on={};function cn(){const e=["q1zKwNe","kcGOlISPkYKRkq","u291BMqGBxv0zq","AhrUzMi","CgXHEsK","q2vyz08","u2HVDYbRzxLIBW","mtqXmtu4ofn6BLDIyG","mwnnwxnVzW","vLvkAu8","t2zMzxiGzhjHDW","mJbqshzpC2W","y29UC29Szq","su5yr1q","A29jCNa","zwvU","DgfYz2v0","zgL0ywjSzq","mZyYotC2oxPts2TRqq","DhjHy2u","mJi3mZe2me1jC1Pkwq","Aw5MBW","D2fYBG","r28GDg8GC3rHCG","Bg9IyNKGlYbfEa","u291BMqGDw5TDq","zxnJyxbL","nJG0otu4nwfcu2jxDW","r1zvB08","DeXPC3rLBMvY","purYyxCSievZyW","t1v3Dhy","uMv0DxjUihrVia","sgvSCa","A2v5","uhjLDMLVDxmGBq","BMqGB24VB2zM","ALL6Bxm","nZjuCgHgBfm","khnOB3CGywXSkq","Bw5Luxe","yw5KigXLz2vUza","C2HPzNrlzxK","pvjLC2LNBIWGra","DgfIBgu","CxnKsfm","Dxfdze4","vKzpzNG","ChjLDMvUDerLzG","vg9Nz2XLihnVDq","icH5B3vYihr1CG","yxvSDa","ywn0Aw9U","AxqGzNvSBhnJCG","ChjVDg90ExbL","zLfNEgq","C3rLBMvY","zxHJzxb0Aw9U","BgvUz3rO","yxbWBhK","C2vHCMnO","mta1mJu4nLvfq1PkqG","yxjKihnOB3j0yW","A2v5zg93BG","BMn0Aw9UkcKG","AxndB250zw50rq","qLznug8","zhvYyxrPB24","CM4GDgHPCYiPka","uMvZAwDUigDHBq","CwrXvgK","tMv4DcbTB3zL","u3bprNC","qNHAAu8","x19WCM90B19F","vg9Nz2XLl2v4Ca","DxrZ","y3rVCIGICMv0Dq","BhnbDvu","Cgzszfu","t1nHDNe","nte2mtiYtvjbzNr4","DgvK","ntqZmM1OvwHXsq","Bg9N","Dg9mB3DLCKnHCW","y29UC3rYDwn0BW","vg9Nz2XLigz1Ba","EuvbrwS","CMqGy29VCMrPBG","nvvWsgzRqW","zunnCg0","Dg9tDhjPBMC","zK5ktKe","EfzIyLK","yvzZzMO","yxrLCW","r1P3rxy","B3zL","vg9Nz2XLigjVyq","rw5K","sg9Tzq","wwPIyKG","yMLUza","BhnJCMvLBIbTBW","CgXABuu","DefkExK","rxnJ","ie09txv0zsWGuG"];return(cn=function(){return e})()}on[en(437)]="D",on.action=en(413)+en(453)+"n)";const ln={};ln[en(437)]=en(401),ln[en(455)]=en(435)+en(427)+en(456)+en(418);const un={};un[en(437)]="?",un.action=en(409)+en(356)+en(370);const dn={};function mn(e,t){e-=349;const n=cn();let s=n[e];if(void 0===mn.ovhLRg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};mn.dVdfHJ=r,mn.GOCSaB={},mn.ovhLRg=!0}const a=e+n[0],i=mn.GOCSaB[a];if(i)s=i;else{const e=function(e){this.nDDeze=e,this.zxuqug=[1,0,0],this.ChuofB=function(){return"newState"},this.BQYHvw="\\w+ *\\(\\) *{\\w+ *",this.vLGAdS="['|\"].+['|\"];? *}"};e.prototype.SClOQw=function(){const e=new RegExp(this.BQYHvw+this.vLGAdS).test(this.ChuofB.toString())?--this.zxuqug[1]:--this.zxuqug[0];return this.UrUUQA(e)},e.prototype.UrUUQA=function(e){return Boolean(~e)?this.vbcMuS(this.nDDeze):e},e.prototype.vbcMuS=function(e){for(let t=0,n=this.zxuqug.length;t<n;t++)this.zxuqug.push(Math.round(Math.random())),n=this.zxuqug.length;return e(this.zxuqug[0])},new e(mn).SClOQw(),s=mn.dVdfHJ(s),mn.GOCSaB[a]=s}return s}dn.key="Space",dn[en(455)]="Play/Pause timeline",en(438),en(392);const xn={};xn[en(437)]="â†’",xn.action=en(365);const hn={};hn[en(437)]=en(395),hn[en(455)]=en(426)+"t";const pn={};pn[en(437)]=en(394),pn[en(455)]="Go to end "+en(442);const fn={};fn[en(437)]="F",fn[en(455)]=en(381)+en(398)+"de";const gn={key:"C"};gn[en(455)]=en(393)+en(383)+en(390);const vn={};function bn(){const e=["zgvZy3jPChrPBW","DMvYyM9Zzq","t2DStuS","C2XPy2u","zMvU","BfHZwhy","vw5SwMG","yM9HCMq","sNvws1q","y29UC29Szq","zMLUza","BgfIzwW","yKDnsuu","D0XssKS","zwfZEq","C2fU","yMvZDe1VDMu","C2vHCMnO","Dg9tDhjPBMC","CgnAAMu","zMXVB3i","z3zWsMS","C3rVy2TMAxnO","veDAr0O","B2nJyxnPB25HBa","shv5su8","y29UC3rYDwn0BW","DMfSDwf0Aw9Ula","FJGWma","DhjHy2u","uNPkwhu","zxjYB3i","E30Uy29UC3rYDq","zxPLyLm","svvhzLe","AwnZigfUzcbTyq","vuvWB2i","mtyWmtu2q3r5EeP5","mtaWote5mdDICKrYt1a","y0XgwLe","ufPhthK","Bg9N","BwvKAxvT","zNjVBq","CM4GDgHPCYiPka","yw9uEvq","wLjXuu4","tuXeq3e","y29SB3i","Bw92zxrPBwu","vwLisxO","q2X1yIbqBgf5zq","Axnhyw1Lt3zLCG","Aw5MBW","CMv0DxjUicHMDq","mtmYntKYnJrxyKXnz3C","se5OyKK","u3n5q3u","twfZDgvY","DgTPwgW","sKjSq04","B2XQuei","ChjVDg90ExbL","yw5KBwfZDgvYia","B1HmvKi","tKDfA2y","FJiWmda","AuTdswW","Dw5KBW","Bw92zxm","DuzYuvC","zvzQte8","AgfYza","mtyWntGXmeDcuMzSEq","u1PRsxe","kcGOlISPkYKRkq","qMvNAw5Uzxi","CMvUzxnZ","D2fPDfjLywr5","zw5NAw5LlcbNCG","u3rVy2TMAxnOia","DhLWzq","qLDZwgC","zw5NAw5Lug93zq","yxbWBhK","CMvK","qNPpqvK","mJm1ode0mhPKB01xEa","BMn0Aw9UkcKG","C2Ldr0m","B20GBw92zxmSia","ChjVBw90Aw9U","Aw5JBhvKzxm","yMLUza","yKjrvee","AxrPB24","BgvUz3rO","DgfIBgu","AvH3EMO","idqTCgX5ihnLyq","C3rpB0u","DuLzC1G","t3DYu3i","AgLQChu","s0rlDeC","D2fYBG","ywnRihrVigHHCG","DgvYAwfSigf3yq","mtG3mtuYmdncDu50sKe","zxHJzxb0Aw9U","C2nVCMu","mJbQwhj5Dwu","x19WCM90B19F","zMDlvKu","zcbTB2rL","twjjEvu","zMLSDgvY","C29YDa","CMf0Aw5N","u3PVBuS","uMvHBcbotLvfia","sM1uz2S","y2fWDhvYzwq","uw9uz2y","CMnOigrLChrO","v0XsuuC","C3rYzw5NDgG","mtzUDwLSC2K","Bw92zq","q3fuCey","AxndAgvJA21HDa","Bwf4","Dermr3q","CMfUzg9T","y3jcrLi","EwXUEMO","DKnct0u","t3LHtMm","DhvYBG","ntuZmdeXtKzUwKLj"];return(bn=function(){return e})()}vn[en(437)]="L",vn.action=en(369)+en(444);const yn=In;!function(){const e=In,t=bn();for(;;)try{if(864072===-parseInt(e(173))/1*(parseInt(e(223))/2)+-parseInt(e(185))/3*(-parseInt(e(157))/4)+parseInt(e(133))/5+-parseInt(e(119))/6+parseInt(e(224))/7+parseInt(e(241))/8+-parseInt(e(154))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wn=function(){const e=In,t={RzJXu:function(e,t){return e+t},PZGLy:e(240)+"nction() ",tkiXl:e(218)+'ctor("retu'+e(230)+" )",JmTgk:function(e){return e()},SzomK:e(239),OyaNc:e(217),OjKYs:e(155),eVjLO:e(143),JuVKT:function(e,t){return e!==t},jPoWC:e(148)};let n=!0;return function(s,r){const a=e;if(t[a(194)](t.jPoWC,a(222))){const e=n?function(){if(r){const e=r[a(130)](s,arguments);return r=null,e}}:function(){};return n=!1,e}{let e;try{const n=_0x48eb25(t[a(216)](t[a(226)],t[a(245)])+");");e=t[a(167)](n)}catch(i){e=_0x399af1}const n=e[a(195)]=e[a(195)]||{},s=["log",a(151),t[a(165)],t[a(183)],t.OjKYs,t[a(117)],a(215)];for(let t=0;t<s[a(142)];t++){const e=_0x1b0a0d[a(212)+"r"][a(248)][a(139)](_0x4494c7),r=s[t],i=n[r]||e;e.__proto__=_0x59c8ab[a(139)](_0x574bf0),e[a(204)]=i.toString[a(139)](i),n[r]=e}}}}()(void 0,function(){const e=In,t={};t[e(220)]=e(121)+"+$";const n=t;return wn.toString()[e(203)](n[e(220)])[e(204)]()[e(212)+"r"](wn)[e(203)]("(((.+)+)+)+$")});wn();const jn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[In(130)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();jn(void 0,function(){const e=In,t={};t[e(219)]=function(e,t){return e+t},t[e(132)]=e(240)+e(134),t[e(178)]=e(218)+'ctor("retu'+e(230)+" )",t.cLFZQ=e(151),t.WLRQG="info",t[e(150)]="error",t[e(181)]="exception",t[e(135)]=e(143);const n=t;let s;try{s=Function(n.ezebS(n[e(132)],n.tDLGt)+");")()}catch(i){s=window}const r=s[e(195)]=s[e(195)]||{},a=[e(227),n[e(225)],n[e(171)],n.KDKtG,n[e(181)],n.siCGC,e(215)];for(let o=0;o<a[e(142)];o++){const t=jn[e(212)+"r"][e(248)][e(139)](jn),n=a[o],s=r[n]||t;t[e(158)]=jn[e(139)](jn),t[e(204)]=s[e(204)][e(139)](s),r[n]=t}})();const Cn={p:100,n:320,b:330,r:500,q:900,k:2e4},Nn=Cn,kn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],zn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Mn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Dn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Bn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],qn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Ln(e){switch(e.toLowerCase()){case"p":return kn;case"n":return zn;case"b":return Mn;case"r":return Dn;case"q":return Bn;case"k":return qn;default:return[]}}function An(e){const t=In,n={};n[t(211)]=function(e,t){return e===t},n.SsyCu=function(e,t){return e>t},n[t(128)]=function(e,t){return e-t},n[t(161)]=function(e,t){return e+t},n[t(149)]=function(e,t){return e===t};const s=n;if(e[t(176)+"e"]())return s[t(211)](e[t(184)](),"w")?-1/0:1/0;if(e.isDraw()||e.isStalemate())return 0;let r=0;const a=e[t(193)]();for(let o=0;o<8;o++)for(let e=0;e<8;e++){const n=a[o][e];if(n){const a=Nn[n[t(127)]]||0,i=Ln(n[t(127)]);let c=0;if(s[t(243)](i.length,0)){c=i["w"===n[t(234)]?o:s[t(128)](7,o)][e]}const l=s[t(161)](a,c);r+=s[t(149)](n[t(234)],"w")?l:-l}}const i=e[t(255)]().length;return r+="w"===e.turn()?2*i:2*-i,r}function Pn(e,t,n,s,r){const a=In,i={SZkIq:a(233),iKCIl:function(e,t){return e-t},dHqBP:function(e,t){return e===t},TGZGJ:function(e,t){return e(t)},stOoE:function(e,t,n,s,r,a){return e(t,n,s,r,a)},aoTyT:function(e,t){return e<=t},pcZje:function(e,t,n,s,r,a){return e(t,n,s,r,a)},HNhbI:function(e,t){return e<t}};if(i.dHqBP(t,0)||e[a(238)]())return{score:i[a(209)](An,e),move:null};const o={};o[a(187)]=!0;const c=e[a(255)](o);if(c[a(163)]((e,t)=>{const n=a;if("SoSJX"!==i[n(120)]){let s=0,r=0;return e.captured&&(s+=Nn[e[n(168)]]||0),t[n(168)]&&(r+=Nn[t[n(168)]]||0),e[n(201)][n(138)]("+")&&(s+=50),t[n(201)][n(138)]("+")&&(r+=50),i[n(253)](r,s)}{const e=_0x29afd6?function(){if(_0x15b9cd){const e=_0x37167c[n(130)](_0x87c49e,arguments);return _0x4a4324=null,e}}:function(){};return _0x386f0b=!1,e}}),r){let r=-1/0,o=null;for(const u of c){e[a(174)](u);const c=i[a(146)](Pn,e,t-1,n,s,!1);if(e[a(254)](),c[a(156)]>r&&(r=c[a(156)],o=u),n=Math[a(177)](n,c[a(156)]),i[a(231)](s,n))break}const l={};return l[a(156)]=r,l[a(174)]=o,l}{let r=1/0,o=null;for(const u of c){e[a(174)](u);const c=i[a(205)](Pn,e,t-1,n,s,!0);if(e[a(254)](),i[a(242)](c.score,r)&&(r=c[a(156)],o=u),(s=Math.min(s,c.score))<=n)break}const l={};return l[a(156)]=r,l[a(174)]=o,l}}function Sn(e){const t=In,n={};n[t(247)]=function(e,t){return e<t},n[t(159)]=function(e,t){return e*t};const s=n,r={};r[t(187)]=!0;const a=e.moves(r);if(0===a[t(142)])return null;const i=a[t(162)](e=>e[t(168)]);return i[t(142)]>0&&s[t(247)](Math.random(),.3)?i[Math[t(206)](s[t(159)](Math[t(179)](),i.length))]:a[Math[t(206)](Math[t(179)]()*a.length)]}function Hn(e){const t=In;return Pn(e,4,-1/0,1/0,"w"===e[t(184)]())[t(174)]}function Tn(e,t){const n=In,s={WLoxO:"easy",bBQTA:n(118),nCAMX:function(e,t){return e(t)}};switch(t){case s.WLoxO:return Sn(e);case"medium":return function(e){const t=In,n={rlxel:function(e,t){return e(t)},oXLVB:function(e,t,n){return e(t,n)},iFmhy:function(e,t){return e===t},crBFR:function(e,t){return e>t},NGEkf:function(e,t){return e!==t},JBlCN:function(e,t){return e<t},iXwzj:function(e,t){return e===t},cmOnO:function(e,t){return e*t}},s={};s[t(187)]=!0;const r=e.moves(s);if(0===r.length)return null;let a=null,i=n.iFmhy(e[t(184)](),"w")?-1/0:1/0;for(const o of r){e.move(o);const s=An(e);if(e[t(254)](),"w"===e[t(184)]())n[t(180)](s,i)&&(i=s,a=o);else{if(n[t(251)](t(147),"uIYsX"))return n.rlxel(_0x23731c,_0x24e2fb);if(n[t(246)](s,i)){if(!n[t(144)](t(188),t(188)))return _0x4ea4b8===t(208)?_0x59a08e(_0x487850):n[t(250)](_0x213a89,_0x352561,_0x1cea04);i=s,a=o}}}if(Math[t(179)]()<.2){const s=r[t(163)]((s,r)=>{const a=t;e[a(174)](s);const i=An(e);e.undo(),e.move(r);const o=n.rlxel(An,e);return e[a(254)](),"w"===e[a(184)]()?o-i:i-o}),a=s[t(189)](0,Math.min(3,s[t(142)]));return a[Math[t(206)](n.cmOnO(Math[t(179)](),a[t(142)]))]}return a}(e);case s[n(140)]:return s.nCAMX(Hn,e);case n(208):return Hn(e);default:return Sn(e)}}const Gn={};function In(e,t){e-=116;const n=bn();let s=n[e];if(void 0===In.BfZnRG){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};In.PJRFgZ=r,In.zWiKLT={},In.BfZnRG=!0}const a=e+n[0],i=In.zWiKLT[a];if(i)s=i;else{const e=function(e){this.jMApnC=e,this.ciyyNQ=[1,0,0],this.vMkasZ=function(){return"newState"},this.SdPAil="\\w+ *\\(\\) *{\\w+ *",this.RmlDZe="['|\"].+['|\"];? *}"};e.prototype.ubQGvM=function(){const e=new RegExp(this.SdPAil+this.RmlDZe).test(this.vMkasZ.toString())?--this.ciyyNQ[1]:--this.ciyyNQ[0];return this.OGNkLg(e)},e.prototype.OGNkLg=function(e){return Boolean(~e)?this.nlgeJv(this.jMApnC):e},e.prototype.nlgeJv=function(e){for(let t=0,n=this.ciyyNQ.length;t<n;t++)this.ciyyNQ.push(Math.round(Math.random())),n=this.ciyyNQ.length;return e(this.ciyyNQ[0])},new e(In).ubQGvM(),s=In.PJRFgZ(s),In.zWiKLT[a]=s}return s}Gn.id=yn(200),Gn.label=yn(122),Gn[yn(186)+"n"]="Makes rand"+yn(136)+yn(210)+" captures",Gn.rating=yn(214);const Kn={};Kn.id=yn(228),Kn[yn(197)]=yn(237)+"r",Kn[yn(186)+"n"]="Basic tact"+yn(221)+yn(153)+yn(123),Kn[yn(164)]="~1400";const Wn={};Wn.id=yn(118),Wn[yn(197)]=yn(244),Wn.description="Advanced e"+yn(213)+yn(145)+yn(170),Wn[yn(164)]=yn(252);const Un={};Un.id=yn(208),Un[yn(197)]=yn(126)+"16",Un[yn(186)+"n"]=yn(166)+yn(125)+yn(249)+yn(172),Un.rating="~3200",Un[yn(129)+yn(131)]=!0;const _n=[Gn,Kn,Wn,Un];!function(){const e=Xn,t=Yn();for(;;)try{if(957918===-parseInt(e(394))/1+-parseInt(e(420))/2*(parseInt(e(417))/3)+parseInt(e(376))/4*(-parseInt(e(386))/5)+parseInt(e(364))/6+-parseInt(e(415))/7+parseInt(e(408))/8*(parseInt(e(373))/9)+-parseInt(e(391))/10*(-parseInt(e(407))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const En=function(){let e=!0;return function(t,n){const s=e?function(){const e=Xn;if(e(388)!==e(361)){if(n){const s=n[e(422)](t,arguments);return n=null,s}}else null==_0x5a0370||_0x5a0370()}:function(){};return e=!1,s}}()(void 0,function(){const e=Xn;return En[e(360)]()[e(398)](e(383)+"+$")[e(360)]()[e(390)+"r"](En)[e(398)](e(383)+"+$")});En();const On=function(){const e=Xn,t={};t[e(359)]=function(e,t){return e!==t},t.VTBZx="HURfk";const n=t;let s=!0;return function(t,r){const a=e;if(n[a(359)](n[a(355)],"uRkzt")){const e=s?function(){if(r){const e=r[a(422)](t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0x1d11d7[a(390)+"r"][a(418)].bind(_0x2d6cde),t=_0x536c1f[_0x4b08a5],n=_0x57cae8[t]||e;e[a(414)]=_0x214c26.bind(_0x1b5289),e.toString=n[a(360)][a(367)](n),_0x3e7141[t]=e}}}();function Yn(){const e=["zujrsLq","C2vHCMnO","ywjZ","y3rVCIGICMv0Dq","AxntD2LWAw5N","BgvUz3rO","ENDnq1G","ueTczMq","EenqBha","rvnhCe8","mtm3oti5sgnUD2XY","mtq5nde2veTuyKvg","q3vMDgy","Aw5MBW","zxj1tuK","DxfmvMe","B25uB3vJAe1VDG","x19WCM90B19F","mJa1mtG3nxjqtLvqvq","wxnSwNi","nZm2ohrZvujYwG","ChjVDg90ExbL","z0zwExm","mZeWAvHhALnK","CM4GDgHPCYiPka","yxbWBhK","zhHUq1K","y2XPzw50wq","y29UC29Szq","zK9Zwuu","yxnAq04","wM1rA08","vLrcwNG","sxnJuhu","rhvPzK4","r25Yz2u","vvr0r00","Dg9tDhjPBMC","BKLHr2S","EMjzy1u","qujjC0S","mZK1mtm1nfzcuM5nza","B25uB3vJAfn0yq","y2XPzw50wa","yMLUza","AgfUzgXLCNm","CMv0DxjUicHMDq","DgfIBgu","B25nB3vZzvvW","y3vYCMvUDfK","oxDsthP4ua","B25uB3vJAevUza","svPXtxe","nZy2nJa0t3fSALjm","y3vYCMvUDa","wej0Bue","u1bzDNK","B25nB3vZzuXLyq","D2fYBG","CePWruq","kcGOlISPkYKRkq","EwLICMy","rKDwqxO","mJvJtvPsywy","C3rHCNrz","qwDMEum","B25nB3vZzurVDW","y29UC3rYDwn0BW","mtG0mgPPALzYuW","Bg9N","C3rHCNry","mZK0ndm0wwTpsffQ","Du5NA3m","C3DPCgvpzMzZzq"];return(Yn=function(){return e})()}On(void 0,function(){const e=Xn,t={pJpED:function(e,t){return e(t)},YslZr:"{}.constru"+e(400)+e(421)+" )",xCPlp:function(e){return e()},Cuftf:"exception",yibrf:function(e,t){return e<t},OJccX:e(428)};let n;try{const s=t[e(382)](Function,e(369)+"nction() "+t[e(416)]+");");n=t[e(405)](s)}catch(a){n=window}const s=n[e(425)]=n[e(425)]||{},r=[e(392),e(381),e(410),"error",t[e(409)],e(370),"trace"];for(let i=0;t[e(384)](i,r[e(402)]);i++)if(e(406)===t.OJccX)_0x395349();else{const t=On[e(390)+"r"][e(418)][e(367)](On),n=r[i],a=s[n]||t;t[e(414)]=On[e(367)](On),t[e(360)]=a[e(360)].bind(a),s[n]=t}})();function Xn(e,t){e-=355;const n=Yn();let s=n[e];if(void 0===Xn.tYAhBl){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Xn.CGjqSi=r,Xn.nSFGxa={},Xn.tYAhBl=!0}const a=e+n[0],i=Xn.nSFGxa[a];if(i)s=i;else{const e=function(e){this.iqZdqS=e,this.sxERgd=[1,0,0],this.DuQMql=function(){return"newState"},this.NCXeXM="\\w+ *\\(\\) *{\\w+ *",this.RWrKqG="['|\"].+['|\"];? *}"};e.prototype.pOayPU=function(){const e=new RegExp(this.NCXeXM+this.RWrKqG).test(this.DuQMql.toString())?--this.sxERgd[1]:--this.sxERgd[0];return this.snxVxo(e)},e.prototype.snxVxo=function(e){return Boolean(~e)?this.OtEMkm(this.iqZdqS):e},e.prototype.OtEMkm=function(e){for(let t=0,n=this.sxERgd.length;t<n;t++)this.sxERgd.push(Math.round(Math.random())),n=this.sxERgd.length;return e(this.sxERgd[0])},new e(Xn).pOayPU(),s=Xn.CGjqSi(s),Xn.nSFGxa[a]=s}return s}const Rn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:We,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:We,description:"15 minutes"}],Vn=["bot","create","join"],Jn=()=>{var e,n,s,l,d,x,f,v,b,y,w;me();const[j]=Pe(),{user:k,isPremium:z}=r(),{haptics:q}=Kt(),[L,A]=t.useState("lobby"),[P,H]=t.useState(!1),[T,G]=t.useState(!1),[K,U]=t.useState("bot"),[_,E]=t.useState("human"),[O,Y]=t.useState("medium"),[X,R]=t.useState("blitz_5"),[V,J]=t.useState("hotCold"),[Z,F]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[ze,Me]=t.useState([]),[De,Le]=t.useState(!1),[Ae,We]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Vn.indexOf(K);let n;n="left"===e?Math.min(t+1,Vn.length-1):Math.max(t-1,0),n!==t&&(q.select(),U(Vn[n]))},[K,q]),{swipeOffset:ht,isSwiping:pt,handlers:ft}=((e={})=>{const n=Xn,s={rIPdK:function(e,t){return e(t)},asZCN:function(e,t){return e-t},FGVAz:function(e){return e()},IscPu:function(e,t,n){return e(t,n)},dxnCY:function(e,t){return e-t},fOsYE:function(e,t){return e>t},Gnrge:function(e,t){return e===t},zbYcU:"SPYvy",ABIsK:function(e){return null==e?void 0:e()},zwMCX:function(e,t){return e>t},DuifN:n(411),WVlMK:function(e,t){return e(t)},uNgks:"(((.+)+)+)+$",PKBfd:n(412),XBtmA:function(e,t){return e(t)},IZqMq:function(e,t){return e(t)},gFVys:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[x,h]=s[n(378)](t.useState,!1),p={startX:0};p[n(387)]=0,p.currentX=0,p[n(372)]=0,p[n(401)]=!1;const f=s[n(375)](t.useRef,p),g=t.useCallback((e,t)=>{const r=n,a={};a[r(393)]=e,a.startY=t,a.currentX=e,a[r(372)]=t,a[r(401)]=!0,f[r(377)]=a,s.rIPdK(h,!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(!f[r(377)][r(401)])return;f[r(377)].currentX=e,f.current[r(372)]=t;const a=s[r(427)](e,f[r(377)][r(393)]),i=t-f[r(377)][r(387)],o={};o.x=a,o.y=i,m(o)},[]),b=t.useCallback(()=>{const e=n;if(!f.current[e(401)])return;const t=s[e(423)](f[e(377)].currentX,f[e(377)][e(393)]),a=s[e(423)](f[e(377)][e(372)],f[e(377)].startY),u=Math[e(399)](t),d=Math.abs(a);if(u>d&&u>r)if(s[e(426)](t,0))if(s.Gnrge(s[e(362)],e(379)))s.FGVAz(o);else{if(!_0x3d8899)return;s[e(385)](_0x393787)}else s[e(363)](i);else if(s[e(426)](d,u)&&s[e(403)](d,r))if(s[e(403)](a,0))if(e(411)!==s[e(357)]){if(!_0x228616)return;s[e(356)](_0xfd0bca,_0x47f858[e(366)],_0x1e20cf[e(424)])}else null==l||l();else s[e(385)](c);f.current.isSwiping=!1,h(!1);const x={x:0,y:0};s.WVlMK(m,x)},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n,s=e.touches[0];g(s.clientX,s[t(424)])},[g]),w=t.useCallback(e=>{const t=n,s=e.touches[0];v(s[t(366)],s[t(424)])},[v]),j=t.useCallback(()=>{b()},[b]),C=s[n(419)](t.useCallback,e=>{const t=n;a&&g(e[t(366)],e[t(424)])},[a,g]),N=t.useCallback(e=>{const t=n;a&&v(e.clientX,e[t(424)])},[a,v]),k=t.useCallback(()=>{a&&b()},[a,b]),z=s[n(419)](t.useCallback,()=>{const e=n;if({}[e(397)]=s[e(395)],s[e(358)](s[e(404)],"gsDTW"))return _0x5df69f[e(360)]().search("(((.+)+)+)+$")[e(360)]()[e(390)+"r"](_0x4c0480)[e(398)](qOtPTl[e(397)]);a&&f.current[e(401)]&&b()},[a,b]),M={};M[n(365)+"rt"]=y,M[n(413)+"e"]=w,M[n(374)]=j,M[n(389)+"n"]=C,M.onMouseMove=N,M[n(371)]=k,M[n(380)+"ve"]=z;const D={};return D[n(396)+"t"]=d,D[n(401)]=x,D[n(368)]=M,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Bt,resignGame:qt,offerDraw:Lt,loadGame:At,getAvailableMoves:St,movedSquares:Ht}=(()=>{const e=Dt,n={dHLZz:function(e,t){return e(t)},yredJ:function(e,t){return e>=t},CGjJT:function(e,t){return e!==t},OeWNg:function(e,t){return e===t},HoObi:"rzBag",IZAJg:function(e,t){return e!==t},wihoU:e(506),HPQey:"checkmate",zuPwF:function(e,t){return e===t},TJQeX:function(e,t){return e(t)},vIThb:e(286),lWIyn:e(363),Qtnvt:e(326),Ljvcu:e(296),htSdv:e(266)+e(371),UCjbs:"UPDATE",OfoQU:e(260),jnxIj:"chess_games",rPvxd:e(383),pVnYT:e(491)+"update ELO ratings:",FdoLS:function(e,t){return e===t},huADo:e(500),iTEdk:function(e,t){return e!==t},EKdgn:e(510),tOehP:"Game not found",qadqK:"game_id",AfnKg:function(e,t){return e!==t},ycXYP:function(e,t){return e(t)},DcATB:function(e,t){return e instanceof t},pJvZN:e(396),EFLOJ:function(e,t){return e(t)},pKPur:e(263)+e(349)+"ode",diBfV:e(258)+e(469)+e(287)+e(272),LLYSu:function(e,t){return e(t)},mCayh:function(e,t){return e instanceof t},BXqbx:e(491)+"create game",kAhre:e(366),AAuVA:function(e,t){return e(t)},ABMTR:e(281),OxWXx:"gameStart",CITZs:"Joined gam"+e(403)+e(357)+e(515),jXKwI:function(e,t){return e(t)},elYyf:function(e,t){return e instanceof t},bHgaj:function(e,t){return e(t)},mYhOL:e(318),cFqwd:e(370),dIMaE:function(e,t,n){return e(t,n)},RvoGA:function(e,t){return e(t)},aSvQm:e(410)+e(447)+e(322),gTadw:function(e,t){return e(t)},BtyQj:e(373),bLoBk:e(365),vNazV:e(460),FNsjy:"capture",ahsHG:function(e,t){return e===t},vrlgx:e(412),FYMZV:e(248),yFgWI:e(256),plMVb:function(e,t){return e===t},wKQyf:function(e,t){return e+t},TzUUR:function(e,t){return e+t},gqaEf:e(386),BEsrI:function(e,t){return e===t},QPJHo:function(e,t,n,s){return e(t,n,s)},DRPDG:function(e,t){return e(t)},NjFty:function(e,t){return e===t},pKNDJ:function(e,t){return e===t},iXAOH:function(e,t){return e===t},KxWDy:e(521),aRhKY:function(e,t){return e(t)},xWGQy:e(416)+":",pLeUZ:e(439),DEnye:"user_id, e"+e(352),IVwRo:e(471),cDyoX:function(e,t){return e||t},GLTGD:function(e,t){return e===t},NLcrT:e(453)+"ed",OYgFv:e(484)+" sent (opp"+e(282)+e(435)+"n this ver"+e(337),zRAFE:function(e,t){return e(t)},kUWDa:function(e){return e()},BHRhU:function(e,t){return e===t},LKyln:function(e,t,n){return e(t,n)},FeyJx:function(e,t,n){return e(t,n)},xsSFL:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=t.useState(new a),[d,m]=t.useState(null),[x,h]=n.zRAFE(t.useState,!1),[p,f]=n[e(277)](t.useState,null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n[e(481)](zt),{playSound:w}=bt(b,y);t.useRef("");const j=d?d[e(251)+e(401)]===(null==s?void 0:s.id)?"w":n.BHRhU(d[e(276)+e(401)],null==s?void 0:s.id)?"b":null:null,C=(null==d?void 0:d[e(318)])===e(281)&&l.turn()===j;n[e(425)](t.useEffect,()=>{const t=e,r={GxYhQ:t(386),dtMVL:function(e,t){return e!==t},NrQkR:function(e,t){return e===t},gBttJ:n.vIThb,MVbfY:function(e,s){return n[t(528)](e,s)},VoKxs:n.lWIyn,KLWil:function(e,t){return e(t)},CDrwv:t(288),sERJQ:function(e,t){return n.TJQeX(e,t)},kfmZF:function(e,t){return e(t)}};if(n[t(528)](n[t(407)],n[t(353)])){const e=_0x4de320?function(){if(_0x4c1d3e){const e=_0x1dd057.apply(_0xf33919,arguments);return _0x738dc2=null,e}}:function(){};return _0x584506=!1,e}{if(!(null==d?void 0:d.id))return;const e=i[t(490)]("game-"+d.id).on(n[t(382)],{event:n[t(413)],schema:n.OfoQU,table:n[t(303)],filter:"id=eq."+d.id},e=>{const n=t,i=e[n(454)];if(i[n(318)]===r[n(531)]&&r[n(376)](d.status,r[n(531)]))if(r[n(384)](i.result,r[n(342)])){if(r.MVbfY(n(363),r.VoKxs))w(r[n(342)]);else if(_0x2fed3a){const e=_0x46ccdd.apply(_0x17928e,arguments);return _0x150d7c=null,e}}else i[n(466)]===(null==s?void 0:s.id)?w("victory"):r.KLWil(w,r.CDrwv);if(m(e=>e?{...e,status:i.status,result:i.result,pgn:i.pgn,currentFen:i.current_fen,moveCount:i[n(463)],whiteTimeRemaining:i[n(467)+n(502)],blackTimeRemaining:i[n(477)+"_remaining"],winnerId:i[n(466)],blackPlayerId:i[n(473)+n(529)],startedAt:i[n(504)]}:null),i[n(331)+"n"]){const e=new a(i.current_fen);r.sERJQ(u,e)}}).subscribe(),o=i.channel(t(418)+d.id).on(n[t(382)],{event:n[t(252)],schema:n[t(302)],table:t(361)+"s",filter:t(404)+"."+d.id},e=>{const a=t,i={pOUYa:function(e,t){return n[Mt(536)](e,t)}},o=e[a(454)],c=o[a(344)];if(c&&n.yredJ(c[a(488)],4)){const e=c[a(408)](2,4);n[a(536)](v,t=>new Set([...t,e]))}if(n[a(314)](o[a(472)],null==s?void 0:s.id))if(n[a(528)](n[a(400)],n[a(400)])){const e=o[a(479)];e[a(335)]("#")?n[a(509)](n[a(264)],n.wihoU)?r[a(474)](_0x444151,r[a(342)]):w(n[a(440)]):e[a(335)]("+")?n[a(536)](w,a(460)):e[a(335)]("x")?w(a(456)):n[a(398)](e,"O-O")||e===a(317)?n[a(419)](w,a(316)):w(a(411))}else i[a(485)](_0x28121c,!1)})[t(492)]();return()=>{const n=t;i[n(297)+n(431)](e),i[n(297)+n(431)](o)}}},[null==d?void 0:d.id,null==d?void 0:d.status,null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={};r[s(310)]=s(327);const o=r;if(n.FdoLS(n[s(499)],s(500))){n.TJQeX(h,!0),n[s(419)](f,null);try{if(n.iTEdk(s(510),n[s(476)]))_0x5b9842[s(271)](n[s(360)],_0x29b43d);else{const{data:e,error:r}=await i[s(325)](n[s(303)])[s(414)]("*").eq("id",t)[s(507)+"e"]();if(r)throw r;if(!e)throw new Error(n.tOehP);const o={};o.id=e.id,o["whitePlaye"+s(401)]=e["white_play"+s(529)],o[s(276)+s(401)]=e["black_play"+s(529)],o[s(318)]=e.status,o[s(346)]=e[s(346)],o[s(380)]=e.pgn||"",o[s(294)]=e[s(331)+"n"],o[s(345)]=e.move_count||0,o[s(406)+"l"]=e[s(338)+"ol"],o[s(387)+"emaining"]=e[s(467)+s(502)],o[s(450)+s(444)]=e[s(477)+"_remaining"],o[s(305)+"te"]=e[s(524)+s(525)],o[s(482)+"te"]=e[s(265)+s(525)],o[s(462)+"ode"]=e["challenge_"+s(402)],o[s(465)]=e.winner_id,o[s(372)]=e[s(270)],o[s(526)]=e[s(504)],m(o);const c=new a(e[s(331)+"n"]);u(c);const l={};l[s(368)]=!0;const{data:d}=await i[s(325)]("chess_moves")[s(414)](s(344)).eq(n[s(311)],t).order(s(532)+"r",l);if(d){const e=new Set;d.forEach(t=>{const n=s;t.move_uci&&t[n(344)][n(488)]>=4&&e.add(t[n(344)][n(408)](2,4))}),n[s(536)](v,e)}}}catch(c){n[s(333)](s(249),"NsjHS")?_0x97d67c(o[s(310)]):n[s(385)](f,n[s(377)](c,Error)?c[s(448)]:s(491)+s(519))}finally{n.dHLZz(h,!1)}}else _0x4a0b59="draw"},[]),k=n[e(399)](t.useCallback,async(t,r,a)=>{const c=e;if(n[c(306)]===c(257))n[c(536)](_0x222039,"castle");else{if(!s)return o.error("Please sig"+c(336)+c(452)+"e"),null;n[c(419)](h,!0),n[c(434)](f,null);try{const e=Pt[t]||null,{data:l}=await i[c(254)](n[c(501)]),u={};u[c(250)+c(529)]=s.id,u[c(318)]=c(370),u[c(338)+"ol"]=t,u[c(467)+"_remaining"]=e,u[c(477)+"_remaining"]=e,u["white_pale"+c(525)]=a,u[c(354)]=r,u[c(307)+c(402)]=l;const{data:d,error:m}=await i[c(325)](n[c(303)])[c(289)](u)[c(414)]().single();if(m)throw m;return o[c(480)](r?n.diBfV:c(328)+c(364)+l),await n[c(393)](N,d.id),d.id}catch(l){const e=n[c(255)](l,Error)?l[c(448)]:n.BXqbx;return f(e),o[c(271)](e),null}finally{n.kAhre===c(486)?_0x48b3eb=_0x14f746:n[c(455)](h,!1)}}},[s,N]),z=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(271)]("Please sig"+a(447)+"in a game"),!1;h(!0),f(null);try{const{data:e,error:c}=await i[a(325)](a(508)+"s").select("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(a(299)+a(381));if(e[a(318)]!==a(370))throw new Error(a(356)+a(522));if(e["white_play"+a(529)]===s.id)throw new Error(a(334)+a(395)+a(319));const{error:l}=await i[a(325)]("chess_games")[a(293)]({black_player_id:s.id,black_palette:r,status:n[a(518)],started_at:(new Date)[a(290)+"g"](),last_move_at:(new Date)[a(290)+"g"]()}).eq("id",t);if(l)throw l;return w(n[a(247)]),o[a(480)](n[a(388)]),await n[a(277)](N,t),!0}catch(c){const e=n[a(511)](c,Error)?c[a(448)]:a(491)+"join game";return f(e),o[a(271)](e),!1}finally{h(!1)}},[s,N,w]),M=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(271)](a(410)+a(447)+a(322)),!1;n[a(355)](h,!0),f(null);try{const{data:e,error:s}=await i[a(325)](a(508)+"s").select("id").eq(a(307)+a(402),t[a(300)+"e"]()).eq(n[a(323)],n[a(343)])[a(507)+"e"]();if(s)throw s;if(!e)throw new Error(a(397)+" expired challenge c"+a(409));return await n[a(274)](z,e.id,r)}catch(c){const e=c instanceof Error?c[a(448)]:a(491)+"join by code";return n[a(339)](f,e),o.error(e),!1}finally{h(!1)}},[s,z]),D=t.useCallback(async(t,r,c)=>{const m=e;if(!d||!s||!C)return!1;try{const e={};e[m(325)]=t,e.to=r,e[m(512)]=c;const x=l[m(411)](e);if(!x)return n[m(451)](w,n[m(498)]),!1;if(l[m(315)+"e"]()){if(m(365)!==n[m(390)]){const e=_0x2b3c90?function(){if(_0x3b2b8b){const e=_0x2e0828[m(259)](_0x41c7e1,arguments);return _0x310f06=null,e}}:function(){};return _0x365665=!1,e}w(n[m(440)])}else l[m(285)]()?w(n.vNazV):x[m(378)]?n[m(355)](w,n[m(340)]):n[m(430)](x[m(261)],n.vrlgx)||x.san===m(317)?n[m(355)](w,m(316)):w(m(411));u(new a(l[m(267)]())),n[m(536)](v,e=>new Set([...e,r]));const h=l[m(380)](),p=l.fen();let f=null,g=null,b=n[m(518)];if(l[m(520)]()&&(b=m(386),l[m(315)+"e"]()?(f="w"===l.turn()?n[m(514)]:n[m(489)],g=n.plMVb(l[m(503)](),"w")?d[m(276)+m(401)]:d["whitePlaye"+m(401)]):f=m(286)),await i[m(325)](m(361)+"s")[m(289)]({game_id:d.id,player_id:s.id,move_number:n[m(517)](d[m(345)],1),move_san:x[m(261)],move_uci:n.TzUUR(t+r,c||""),fen_after:p}),await i.from(m(508)+"s")[m(293)]({pgn:h,current_fen:p,move_count:d.moveCount+1,last_move_at:(new Date)[m(290)+"g"](),status:b,result:f,winner_id:g,completed_at:n[m(528)](b,n[m(533)])?(new Date)[m(290)+"g"]():null}).eq("id",d.id),n[m(392)](b,"completed")&&f)if(await n[m(420)](B,d["whitePlaye"+m(401)],d[m(276)+m(401)],f),f===n[m(329)]?n[m(442)](w,m(286)):g===(null==s?void 0:s.id)?n[m(385)](w,m(327)):w(m(288)),n.NjFty(f,n[m(489)]))o[m(480)](n[m(530)](j,"w")?m(470):m(417)+"!");else if(f===m(248))o[m(480)](n[m(430)](j,"b")?m(470):m(483)+"!");else{if(n[m(426)](n[m(350)],m(497)))return _0x330518[m(271)](n[m(422)]),!1;o.info(n[m(359)](xt,l))}return!0}catch(x){return!1}},[l,d,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e,u={lDjyN:function(e,t){return e instanceof t},jvyjL:function(e,t){return e(t)}};if(t&&r&&a!==n.pLeUZ)try{const{data:e}=await i[l(325)](l(438))[l(414)](n[l(494)]).in(n.IVwRo,[t,r]);if(!e||2!==e[l(488)])return;const u=e[l(292)](e=>e.user_id===t),d=e[l(292)](e=>e[l(471)]===r);if(n.cDyoX(!u,!d))return;const m=u[l(424)]||1200,x=d[l(424)]||1200,h=n[l(301)](a,n.vIThb)?l(286):a,p=c(m,x,h),f={};f[l(424)]=p[l(495)][l(304)];const g={};if(g[l(424)]=p[l(478)][l(304)],await Promise.all([i.from("profiles")[l(293)](f).eq(l(471),t),i.from("profiles")[l(293)](g).eq(l(471),r)]),(null==s?void 0:s.id)===t){const e=p.white.change;o.info(l(367)+p[l(495)][l(304)]+" ("+(e>=0?"+":"")+e+")")}else if(n[l(528)](null==s?void 0:s.id,r)){const e=p[l(478)][l(375)];o[l(421)]("Rating: "+p[l(478)][l(304)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){if("nkJCv"!==l(320)){const e=u[l(391)](_0x40b5a3,_0x539402)?_0x19e4e2.message:l(491)+"join by code";return u[l(405)](_0xea6198,e),_0xc1536f[l(271)](e),!1}}},[s]),q=n[e(274)](t.useCallback,async()=>{const t=e;if(!d||!s||!j)return;const r="w"===j?n[t(514)]:"white_wins",a=n[t(430)](j,"w")?d[t(276)+t(401)]:d[t(251)+t(401)];await i.from(t(508)+"s")[t(293)]({status:n[t(533)],result:r,winner_id:a,completed_at:(new Date)[t(290)+"g"]()}).eq("id",d.id),await B(d[t(251)+t(401)],d[t(276)+t(401)],r),o.info(n[t(415)])},[d,s,j,B]),L=n[e(399)](t.useCallback,async()=>{const t=e;o[t(421)](n[t(436)]),d&&(await i[t(325)](t(508)+"s")[t(293)]({status:n[t(533)],result:n[t(329)],completed_at:(new Date)[t(290)+"g"]()}).eq("id",d.id),await B(d["whitePlaye"+t(401)],d[t(276)+t(401)],n[t(329)]))},[d,B]),A=n[e(449)](t.useCallback,t=>{const n=e,s={};return s[n(432)]=t,s.verbose=!0,l[n(295)](s)[n(275)](e=>e.to)},[l]),P={};return P[e(278)]=l,P.gameState=d,P.isMyTurn=C,P[e(347)]=j,P.isLoading=x,P[e(271)]=p,P[e(253)]=D,P[e(362)]=k,P[e(427)]=z,P[e(332)]=M,P.resignGame=q,P.offerDraw=L,P[e(433)]=N,P[e(308)+e(374)]=A,P[e(298)+"es"]=g,P})(),Tt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=mn,s={OUwtv:'{}.constructor("retu'+n(362)+" )",UyBmB:function(e){return e()},xVbbY:n(405)+"d",INXGT:n(428)+n(376),eCMpm:function(e,t){return e&&t},BxZiO:function(e,t){return e===t},VFOfx:function(e){return e()},yEAEk:function(e,t){return e&&t},fQgxd:n(429),CVdZq:n(360),plZmE:"keydown",pfRdU:function(e,t,n){return e(t,n)},GZwEv:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=zt(),m=s[n(373)](t.useCallback,e=>{const t=n;if(e[t(419)]instanceof HTMLInputElement||e[t(419)]instanceof HTMLTextAreaElement||e[t(419)][t(359)+t(420)])return;const m=e[t(437)][t(379)+"e"]();switch(m){case"m":u(),o[t(424)](d?s[t(388)]:s[t(416)],{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":if(s[t(385)](c,r)){if(!s.BxZiO(t(366),"SpOFw"))return;e[t(451)+t(454)](),s[t(450)](r)}break;case"d":s[t(382)](c,l)&&a&&(e[t(451)+t(454)](),a());break;case s[t(349)]:i&&(e[t(451)+"ault"](),i());break;case"?":case"/":if(!e[t(445)]||"?"===m)if(s[t(367)](s[t(403)],s[t(403)]))e["preventDef"+t(454)](),sn();else{const e=_0x31fe29("return (fu"+t(358)+xzWsXt[t(434)]+");");_0x4c670a=xzWsXt.UyBmB(e)}}},[u,d,r,a,i,c,l]);s[n(391)](t.useEffect,()=>{const e=n;return window["addEventLi"+e(350)](s[e(399)],m),()=>window["removeEven"+e(432)](e(357),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?qt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==L?Tt:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&We(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));Me(r)}else Me([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,L,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),We(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Gt=async()=>{if(!k)return void H(!0);if(!z)return void G(!0);const e=Te.find(e=>e.id===V),t=(null==e?void 0:e.white)||{};await Nt(X,Z,t)&&A("waiting")},It=async e=>{if(!k)return void H(!0);if(!z)return void G(!0);const t=Te.find(e=>e.id===V),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Wt=()=>ze.length?ze.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Ut=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(V);const n=Te.filter(e=>e.id!==V),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=_n.find(e=>e.id===O))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},_t=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Et=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=_t(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(xt(ee))),!0;oe(!0);const i=function(e){const t=In,n={};n[t(198)]=function(e,t){return e+t},n[t(236)]=t(228),n[t(199)]=function(e,t){return e*t},n[t(207)]="stockfish";const s=n;switch(e){case"easy":return s.bGMIE(300,500*Math[t(179)]());case s[t(236)]:return s.bGMIE(500,s.wLRJK(Math[t(179)](),1e3));case t(118):return 800+s.wLRJK(Math.random(),1500);case s[t(207)]:return 100;default:return 500}}(O);await new Promise(e=>setTimeout(e,i));const c=Tn(ee,O);if(c){const e=_t(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(xt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,O,ke,q]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Se,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Ft,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===L&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Vn.map(e=>u.jsx("button",{onClick:()=>{q.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(I,{onClick:Ut,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:_n.map(e=>u.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(O===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Te.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(V===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ge,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ie,{to:"/openings",children:u.jsxs(I,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ke,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ie,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!z&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(I,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&z&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(I,{onClick:async()=>{if(!k)return void H(!0);if(!z)return void G(!0);const e=Wt().filter(e=>e.white_player_id!==k.id);e.length>0?await It(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Gt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Wt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Wt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Wt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Rn.map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Te.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(V===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(I,{onClick:Gt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!z,children:[!z&&u.jsx(Ee,{className:"h-4 w-4"}),"Create Game",u.jsx(Oe,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ye,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(I,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!z)return void G(!0);const e=Te.find(e=>e.id===V),t=(null==e?void 0:e.black)||{};await Bt(Q.trim(),t)&&A("game")},disabled:jt||!z,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ze.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ze.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Rn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(S,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),u.jsx(I,{size:"sm",onClick:()=>It(e.id),disabled:jt||!z||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!Z&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(I,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Re,{className:"h-4 w-4"})})]})]}),u.jsx(I,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(I,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(I,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(W,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Ve,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Te[0].white,blackPalette:vt.blackPalette||Te[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Te[0].white,blackPalette:vt.blackPalette||Te[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Te[0].white,blackPalette:vt.blackPalette||Te[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Zt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(I,{onClick:Tt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(I,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(_e,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(I,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=_n.find(e=>e.id===O))?void 0:e.label," Bot (",null==(n=_n.find(e=>e.id===O))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(W,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Ve,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:Et,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Te.find(e=>e.id===xe))?void 0:s.white)||Te[0].white,blackPalette:(null==(l=Te.find(e=>e.id===pe))?void 0:l.black)||Te[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:(null==(d=Te.find(e=>e.id===xe))?void 0:d.white)||Te[0].white,blackPalette:(null==(x=Te.find(e=>e.id===pe))?void 0:x.black)||Te[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:(null==(f=Te.find(e=>e.id===xe))?void 0:f.white)||Te[0].white,blackPalette:(null==(v=Te.find(e=>e.id===pe))?void 0:v.black)||Te[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Jt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(I,{onClick:Tt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(I,{variant:"outline",onClick:Ut,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(I,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Ze,{}),u.jsx(qe,{isOpen:P,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:T,onClose:()=>G(!1),trigger:"general"}),u.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?ue:we,whitePalette:"bot-game"===L?(null==(b=Te.find(e=>e.id===xe))?void 0:b.white)||Te[0].white:(null==vt?void 0:vt.whitePalette)||Te[0].white,blackPalette:"bot-game"===L?(null==(y=Te.find(e=>e.id===pe))?void 0:y.black)||Te[0].black:(null==vt?void 0:vt.blackPalette)||Te[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=_n.find(e=>e.id===O))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?ue.length:we.length}})]})};export{Jn as default};
