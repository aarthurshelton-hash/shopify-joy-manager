import{d9 as e,c9 as a,a as t,r,j as s,aT as n,s as i,aH as o}from"./index-ckGSTu6A.js";const l=()=>{const{shareId:l}=e(),[d]=a(),c=t(),[u,m]=r.useState(null);return r.useEffect(()=>{(async()=>{var e,a,t;if(l)try{const{data:r,error:s}=await i.from("saved_visualizations").select("pgn, game_data").eq("public_share_id",l).maybeSingle();if(s)return void m("Failed to load visualization");if(!r)return void m("Visualization not found");const n=r.pgn||(null==(e=r.game_data)?void 0:e.pgn)||"",u=o(n),f=null==(t=null==(a=r.game_data)?void 0:a.visualizationState)?void 0:t.paletteId,h=new URLSearchParams(d);f&&!h.has("p")&&h.set("p",f);const p=h.toString();c(`/g/${u}${p?`?${p}`:""}`,{replace:!0})}catch(r){m("Failed to redirect")}else m("Invalid share link")})()},[l,d,c]),u?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h1",{className:"text-xl font-royal font-bold text-foreground",children:u}),s.jsx("button",{onClick:()=>c("/"),className:"text-primary hover:underline",children:"Go to Homepage"})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx(n.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-2 border-primary border-t-transparent rounded-full"})})};export{l as default};
