const n="import React, { useEffect, useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { RefreshCw, Lock, Unlock } from 'lucide-react';\nimport { getRemainingTransfers } from '@/lib/marketplace/marketplaceApi';\n\ninterface TransferLimitBadgeProps {\n  visualizationId: string;\n  variant?: 'default' | 'compact';\n  className?: string;\n}\n\nexport const TransferLimitBadge: React.FC<TransferLimitBadgeProps> = ({\n  visualizationId,\n  variant = 'default',\n  className = '',\n}) => {\n  const [remaining, setRemaining] = useState<number | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchTransferLimit = async () => {\n      setIsLoading(true);\n      const { remaining: count, error } = await getRemainingTransfers(visualizationId);\n      if (!error) {\n        setRemaining(count);\n      }\n      setIsLoading(false);\n    };\n\n    fetchTransferLimit();\n  }, [visualizationId]);\n\n  if (isLoading) {\n    return (\n      <Badge variant=\"outline\" className={`gap-1 animate-pulse ${className}`}>\n        <RefreshCw className=\"h-3 w-3 animate-spin\" />\n        {variant === 'default' && <span>Checking...</span>}\n      </Badge>\n    );\n  }\n\n  if (remaining === null) return null;\n\n  const canTransfer = remaining > 0;\n  const isLimited = remaining < 3;\n\n  const tooltipText = canTransfer \n    ? `${remaining} transfer${remaining !== 1 ? 's' : ''} remaining today. Each vision can be transferred max 3 times per 24 hours.`\n    : 'Transfer limit reached - try again after 24 hours';\n\n  return (\n    <Badge \n      variant={canTransfer ? 'outline' : 'destructive'}\n      className={`gap-1 ${\n        canTransfer \n          ? isLimited \n            ? 'border-amber-500/50 text-amber-600 bg-amber-500/10' \n            : 'border-green-500/50 text-green-600 bg-green-500/10'\n          : ''\n      } ${className}`}\n      title={tooltipText}\n    >\n      {canTransfer ? (\n        <Unlock className=\"h-3 w-3\" />\n      ) : (\n        <Lock className=\"h-3 w-3\" />\n      )}\n      {variant === 'default' && (\n        <span>\n          {canTransfer ? `${remaining}/3 transfers left` : 'Limit reached'}\n        </span>\n      )}\n      {variant === 'compact' && (\n        <span>{remaining}/3</span>\n      )}\n    </Badge>\n  );\n};\n\nexport default TransferLimitBadge;";export{n as default};
