import{d6 as e,d7 as t,cp as s,a as n,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as f,C as x,x as h,D as p,B as v,A as g,p as w,t as y,cN as j,bC as b,S as N,a6 as z,P as C,y as M,bG as D,T as L,aq as B,z as q,cU as _,aj as S,aT as E,ca as A,b as I,d8 as G}from"./index-DEc03Eh1.js";!function(){const e=U,t=Z();for(;;)try{if(316873===-parseInt(e(404))/1+-parseInt(e(321))/2+-parseInt(e(474))/3*(-parseInt(e(417))/4)+-parseInt(e(462))/5*(-parseInt(e(475))/6)+parseInt(e(389))/7*(parseInt(e(333))/8)+-parseInt(e(375))/9*(-parseInt(e(440))/10)+parseInt(e(377))/11*(-parseInt(e(382))/12))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const K=function(){const e=U,t={};t[e(349)]=e(395),t.rBNWa="BwzZU",t.DLtMB=function(e,t){return e!==t},t[e(387)]=e(448);const s=t;let n=!0;return function(e,t){const r=n?function(){const n=U;if(s[n(349)]===s[n(330)])_0x1a7a2f["revokeObje"+n(441)](_0x55f87e),_0x516108(new _0x8dd39f("Failed to "+n(369)));else if(t){if(s[n(338)]("BVXAd",s[n(387)])){const e={YOztZ:n(439),GOEYM:function(e,t){return e*t},fKmSt:function(e,t){return e(t)},CDKjX:n(280)+n(369)};return new _0x2366f5((t,s)=>{const r=n,a=new _0x2a09f4,i={};i[r(300)]=r(288)+r(270)+r(326);const o=new _0x33fafc([_0x2d133b],i),c=_0x517fcc[r(461)+r(441)](o);a[r(313)]=()=>{const s=r,n=_0x35440c[s(362)+s(339)](e[s(346)]);n.width=e[s(357)](_0x3cc74f,_0x8ba784),n[s(275)]=_0x18067f*_0x1f473d;const i=n.getContext("2d");i[s(269)](_0xee0a98,_0x480ec6),i[s(311)](a,0,0,_0x1dc787,_0x2460be),_0x15ffd1[s(341)+s(441)](c),e[s(381)](t,n)},a[r(318)]=()=>{const t=r;_0x4a1a25["revokeObje"+t(441)](c),s(new _0x11640c(e[t(316)]))},a[r(273)]=c})}{const s=t[n(401)](e,arguments);return t=null,s}}}:function(){};return n=!1,r}}()(void 0,function(){const e=U;return K[e(426)]()[e(323)](e(351)+"+$")[e(426)]()[e(283)+"r"](K)[e(323)]("(((.+)+)+)+$")});function U(e,t){e-=264;const s=Z();let n=s[e];if(void 0===U.ZYMoZb){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};U.zUUlgV=r,U.DDJaRo={},U.ZYMoZb=!0}const a=e+s[0],i=U.DDJaRo[a];if(i)n=i;else{const e=function(e){this.gdTcjI=e,this.cIQvvH=[1,0,0],this.YziwrT=function(){return"newState"},this.cNoUyT="\\w+ *\\(\\) *{\\w+ *",this.lApIQP="['|\"].+['|\"];? *}"};e.prototype.bMhXwx=function(){const e=new RegExp(this.cNoUyT+this.lApIQP).test(this.YziwrT.toString())?--this.cIQvvH[1]:--this.cIQvvH[0];return this.WPwjxg(e)},e.prototype.WPwjxg=function(e){return Boolean(~e)?this.dRKamF(this.gdTcjI):e},e.prototype.dRKamF=function(e){for(let t=0,s=this.cIQvvH.length;t<s;t++)this.cIQvvH.push(Math.round(Math.random())),s=this.cIQvvH.length;return e(this.cIQvvH[0])},new e(U).bMhXwx(),n=U.zUUlgV(n),U.DDJaRo[a]=n}return n}K();const P=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[U(401)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();P(void 0,function(){const e=U,t={};t[e(454)]=function(e,t){return e+t},t[e(488)]=e(490)+e(392),t.sCOlU=e(431),t[e(409)]="error",t.uSUSR=e(347),t.DvSeA=e(455);const s=t,n=function(){const t=e;let n;try{n=Function(s.kvUue(s.oooZL+"{}.constru"+t(465)+t(356)+" )",");"))()}catch(r){n=window}return n}(),r=n[e(424)]=n[e(424)]||{},a=[s.sCOlU,e(289),e(332),s[e(409)],s[e(483)],"table",s[e(458)]];for(let i=0;i<a.length;i++){const t=P.constructor[e(267)][e(480)](P),s=a[i],n=r[s]||t;t.__proto__=P[e(480)](P),t[e(426)]=n.toString[e(480)](n),r[s]=t}})();async function k(){const e=U,t={SfNpr:function(e,t,s){return e(t,s)}};if(document[e(492)]&&document[e(492)][e(456)])if(e(416)==e(416))await document[e(492)][e(456)];else{const s=t[e(308)](_0x5515bc,_0x1d6da2[e(384)],_0x4de32b[e(361)]);!_0x5aa3c8[e(298)](s)&&_0x47701a[e(489)](s)}await new Promise(e=>setTimeout(e,150))}function Z(){const e=["tgXrBxe","ru4Guevou0vova","BNrlAKG","AM9PBG","C3rYB2TLu3r5Ba","BgLUzvDPzhrO","Bg9HzcbtvKC","AgLUz1f1ywXPDa","vvbYB2e","yxjJ","phjLy3qGEd0I","wNrMvNq","ntrfy2TAruO","s0XeEuK","ntKZnda2vfntsM5e","i2zHzMfMoq","z2v0q29UDgv4Da","zMLSBfjLy3q","zKTTu3q","mZzsD1fsAK8","4PMuievoifbftLnf","CgLLy2u","phjLy3qGEd0Ima","D2HPDgu","BfnZBgO","yKDwzMC","nZi3nZLKuMLqwe8","CxjJB2rL","uvbStLu","BMn0Aw9UkcKG","D01kuLm","iZfbmueXqq","u25Nz0e","lI4U","ywXS","mJu1lcaYntuSia","vvj3zKq","Dgv4DejHC2vSAq","yxbWBhK","uvnTBMy","phn2zYb4BwXUCW","mJyZmJiZzgnSue94","CMvKDwnL","Aw1Hz2vtBw9VDa","wLzyAgu","AgLUz0vUywjSzq","rxr4y0K","iZC4nZe2yW","vw5RBM93BG","C3vIC3rYAw5N","uKT1svK","zw9Yz2LHlcbZzq","zNrSBuG","zgrOz2y","ndC5mNnhz1DYEq","zevPwK4","yw5VBNLTB3vZ","yMv1sMC","y2vUDgvY","ntaWideXChGGjW","y2XPCa","y29UC29Szq","mc45nsK","Dg9tDhjPBMC","wMLgC28","C3bSAxq","ntaWideYChGGjW","DMLZAxrZ","Bg9N","idiWChGGj0nVCG","ywXWAgfIzxrPyW","uM9Tyw4NlcbuAq","C2f2zq","vLPJy3e","iIbOzwLNAhq9iG","ExfbteK","y2fUDMfZ","nZqWndCWwMPpyuHp","y3rvuKW","zgf0zq","wujUuxq","EvnLBge","uK9IrLa","ndaWideXChGGjW","yMXHy2S","qLzyqwq","BNmTC2vYAwy","iIb3Awr0Ad0I","zhrOpsi","Ehfsz1i","D2LKDgG","A3zvDwu","DhjHy2u","CMvHzhK","i2e4yti5zq","rhztzue","iIb5psiWiIb3Aq","zgfYAW","y3jLyxrLt2jQzq","mJK5mZa1rMfquNr6","A2fdwhO","AhfKt0S","y3rVCIGICMv0Dq","BgLUzvrV","ide4ChGGj0nVCG","iI8+","yM9YzgvY","reTSDgi","sNzjBNa","ndaWideWChGGjW","iIb5psi","ndKYv0PhsuLN","mJrHrKfvDxi","sLzYzuG","ihzZia","vgLTzxmGtMv3ia","v2HPDgu","yMLUza","rgn4CLu","Bw9Yyw50jYWGrW","Dvnvu1i","Bgf5zxjtAxPL","BgLNAhq","BwvZlcbZzxjPzG","y29T","B29VwKW","ChvZAa","CMv0DxjUicHMDq","CMDIysGYntuSia","zM9UDhm","q2LUEMvSjYWGjW","zMLSBfrLEhq","EuP3EM4","zxzLBNq","ChjVDg90ExbL","AfrTANu","C2nHBgu","Eg1So2nOyxjZzq","zgvMyxvSDa","CxfJs28","C3jJ","nJaWideZChGGjW","AgvPz2H0","zxrryKq","zu9ktKe","Axnhr2W","BgvUz3rO","rMfPBgvKihrVia","yM5irvm","nJaWidi0ChGGjW","y29UC3rYDwn0BW","y3jVC3npCMLNAq","Ahr0Chm6lY9LBG","EhjNv2q","uMDsD1O","Aw1Hz2uVC3zNkW","D2fYBG","CMLM","CMvZDg9Yzq","CNLmu3y","zMLSBa","yMvNAw5qyxrO","AxrHBgLJiduWma","DwrzwwK","y2fzsxK","Aw5JBhvKzxm","Bw92zvrV","DhLWzq","Dgv4DefSAwDU","uM9Tyw4NlcbZzq","C3rYB2TL","B2H5rey","BgvMDa","qvDYv2S","pc9ZDMC+","u2zoChi","tw1cz1O","D2LKDgG9iG","zhjHD0LTywDL","BuT2zM8","B25SB2fK","tNf5ELy","zMLSBfn0EwXL","q0rlALG","zu1OrK8","B25LCNjVCG","iIbMAwXSpsi","AfnwD0O","mti1mZG0nLb3t1jxCG","BenPt2G","C2vHCMnO","shvYC0i","Bw92zxm","Dd11DgyToa","D3CUDZmUB3jNlW","icdIGkiGia","psjODhrWoI8VDW","CKjov2e","iZi5mJuYna","Aw5MBW","mZC2rLPvtKzl","sw50zxiNlcbZyq","vffxq3K","iZq0ndaZyW","C01XsMC","reX0tui","zw50","BwvHC3vYzvrLEa","CMv2B2TLt2jQzq","uuTVEw0","mJaWmc9ZDMCIia","t1vItuq","EhLLqvy","wu96DfO","zxHJzxb0Aw9U","te5vuxm","DNPNreS","DMf2ugy","kcGOlISPkYKRkq","iZbbmeeWqq","yKPxufm","B3fJwva","zM9UDa","CM4GDgHPCYiPka","r09fwu0","qNzcA3q","wMTPCxa","DvbjBK8","y29SB3i","y3jLyxrLrwXLBq"];return(Z=function(){return e})()}async function T(e){const t=U,s={};s.AWrWk=t(394);const n=s,r=(await import(t(390)))[t(271)],a={};a[t(460)]=e?"#FAFAFA":n[t(306)],a.light="transparent";const i={width:200,margin:1};return i[t(361)]=a,i.errorCorrectionLevel="M",r.toDataURL(t(285)+"pensent.com",i)}async function W(){const e=U,t={};t[e(415)]=e(419);const n=t;return new Promise((t,r)=>{const a=e,i=new Image;i[a(284)+"n"]=n[a(415)],i.onload=()=>t(i),i[a(318)]=r,i[a(273)]=s})}async function Y(s,n,r={}){const a=U,i={xyeAV:function(e){return e()},BvBkt:function(e,t){return e*t},QKoym:function(e,t){return e*t},QSmnf:function(e,t){return e+t},MmBgZ:function(e,t){return e*t},hSVwJ:function(e,t){return e*t},ViBuo:"high",dbrBx:a(352),bnHES:a(331),ZiFso:"#e7e5e4",dEiZN:a(457),eSUkY:"#78716c",yqALI:function(e,t){return e+t},LNUQs:"middle",oUCsy:a(282)+a(493)+"Times New "+a(302)+"rif",KLDyI:a(295)+a(432)+"morant', G"+a(414)+a(290),eMhFO:a(477),yJwzn:function(e,t){return e+t},JVreH:function(e,t){return e-t},qgeEi:function(e,t){return e/t},kaCXz:a(305),RKuIY:function(e,t){return e+t},UhZVd:a(411),hTmju:a(295)+a(467)+a(482)+a(414)+a(290),vavPf:a(429)+a(334)+a(449),mjTdQ:a(421),ohyDF:function(e,t){return e-t},uPInO:function(e,t){return e/t},wMJRS:a(472)+a(478)+a(434)+a(486),qFJEX:function(e,t){return e>t},bJWPS:function(e,t){return e+t},DKltb:function(e,t){return e===t},mKvfo:a(277),isGGl:function(e,t){return e>t},qqcKo:function(e,t){return e>=t},luBrf:a(422)+a(334)+a(449),gwmDi:function(e,t){return e-t},ZtfVt:function(e,t){return e-t},RObFP:function(e,t){return e+t},ZVXhe:a(491)+a(398)+a(425),TQWCy:function(e,t){return e/t},ySela:function(e,t){return e/t},sMqJg:function(e,t){return e+t},bGVfg:function(e,t){return e+t},jLjjs:a(433),Zkiqp:a(274)+a(334)+a(449),OUbMD:function(e,t){return e+t},oqcYP:"enpensent."+a(487)};await i[a(345)](k);const{boardSize:o=600,darkMode:c=!1,withWatermark:l=!1,title:u}=r,d=function(s,n){const r=U,a={};a[r(391)]=function(e,t){return e-t},a[r(464)]=function(e,t){return e<t},a[r(399)]=function(e,t){return e+t},a.RgRwZ=function(e,t){return e*t},a[r(436)]=function(e,t){return e*t},a.ntKjH=function(e,t){return e>t},a.NqyzV=function(e,t){return e*t},a[r(324)]=function(e,t){return e-t},a[r(452)]=function(e,t){return e*t},a[r(420)]=function(e,t){return e/t},a[r(286)]=function(e,t){return e*t},a[r(322)]=function(e,t){return e<t},a.ryLSv=function(e,t){return e+t},a[r(297)]=function(e,t){return e+t};const i=a,o=n/8,c=.02*n,l=n+2*c;let u=r(403)+r(329)+r(327)+r(343)+r(310)+l+r(437)+l+'" viewBox="0 0 '+l+" "+l+'">';u+=r(385)+r(459)+r(451)+l+r(437)+l+r(319)+e[r(469)]+r(468);for(let d=0;d<8;d++){const n=i.QPlNU(7,d);for(let a=0;i[r(464)](a,8);a++){const l=s[n][a],m=l.isLight?e[r(485)]:e[r(460)],f=i[r(399)](c,i[r(287)](a,o)),x=c+i.VZccq(d,o);if(u+='<rect x="'+f+r(473)+x+r(450)+o+r(437)+o+r(319)+m+'"/>',i[r(365)](l.visits.length,0)){const e=i[r(314)](o,.08),s=[];for(const i of l[r(430)]){const e=t(i[r(384)],i[r(361)]);!s[r(298)](e)&&s.push(e)}const n=Math.min(s[r(279)],6),a=[];let c=i[r(324)](o,i.xqRgR(e,2));const d=i.beuJg(i[r(286)](c,.7),n);for(let t=0;i[r(464)](t,n);t++){const e={};if(e[r(361)]=s[t],e[r(484)]=c,a[r(489)](e),c-=d,i[r(322)](c,.1*o))break}for(const t of a){const e=i[r(420)](o-t[r(484)],2);u+=r(373)+i[r(292)](f,e)+r(473)+i[r(297)](x,e)+r(450)+t[r(484)]+r(437)+t[r(484)]+r(319)+t.color+r(468)}}}}return u+=r(307),u}(s,o),m=i[a(358)](o,.02),f=o+i[a(342)](m,2),x=await async function(e,t,s){const n=U,r={LlQmq:"canvas",DcxrU:function(e,t){return e*t},Litib:function(e,t){return e(t)},udYYi:function(e,t){return e===t},IPKqk:n(443),etQbD:n(288)+n(270)+"t=utf-8"};return new Promise((a,i)=>{const o=n;if(r[o(296)](r.IPKqk,o(443))){const n=new Image,c={};c.type=r[o(276)];const l=new Blob([e],c),u=URL[o(461)+o(441)](l);n.onload=()=>{const e=o,i=document[e(362)+e(339)](r[e(363)]);i[e(453)]=r[e(481)](t,5),i[e(275)]=r[e(481)](s,5);const c=i[e(379)]("2d");c[e(269)](5,5),c.drawImage(n,0,0,t,s),URL[e(341)+e(441)](u),r.Litib(a,i)},n[o(318)]=()=>{const e=o;URL["revokeObje"+e(441)](u),i(new Error(e(280)+e(369)))},n[o(273)]=u}else _0x1e4c15=_0x110ae9.toUpperCase(),_0x38cd2d&&(_0x25b22b+="  â€¢  "+_0x3f05d4)})}(d,f,f),h=60,p=i[a(402)](f,i[a(309)](h,2)),v=i[a(402)](f+220+60,120),g=document["createElem"+a(339)]("canvas");g[a(453)]=5*p,g[a(275)]=i[a(320)](v,5);const w=g.getContext("2d");w[a(269)](5,5),w[a(406)+a(408)+"d"]=!0,w[a(406)+a(370)+"y"]=i.ViBuo,w[a(315)]=c?i.dbrBx:"#FDFCFB",w[a(380)](0,0,p,v),w.drawImage(x,0,0,x.width,x[a(275)],h,h,f,f);const y=i[a(402)](i[a(402)](h,f),28);w[a(367)+"e"]=c?i[a(281)]:i[a(427)],w[a(368)]=1,w.beginPath(),w[a(299)](h,y),w[a(466)](p-h,y),w[a(303)]();const j=c?a(378):i[a(281)],b=c?i[a(418)]:a(410),N=c?i.eSUkY:i[a(418)],z=a(c?410:457),C=p/2;let M=i[a(438)](y,55);const D=n[a(386)]||a(479),L=n[a(447)]||"Black";w[a(400)+"ne"]=i[a(348)],w[a(355)]=i.oUCsy;const B=w.measureText(D)[a(453)],q=w[a(340)+"t"](L)[a(453)];w[a(355)]=i[a(376)];const _=i[a(317)],S=w.measureText(_).width,E=i[a(265)](B,S)+q,A=i[a(476)](C,i.qgeEi(E,2));w[a(355)]="600 24px '"+a(493)+a(478)+"Roman', se"+a(290),w[a(315)]=j,w[a(301)]=i[a(463)],w[a(264)](D,A,M),w[a(355)]=i.KLDyI,w[a(315)]=z,w.fillText(_,A+B,M),w[a(355)]=a(282)+"Cinzel', '"+a(478)+a(302)+a(290),w.fillStyle=j,w[a(264)](L,i.RKuIY(A+B,S),M),M+=36,n.event&&n[a(266)]!==i.UhZVd&&(w[a(315)]=b,w.font=i[a(268)],w[a(301)]=a(421),w[a(264)](n[a(266)],C,M),M+=32);const I=u,G=n[a(442)]||"";if(I||G){w.fillStyle=N,w[a(355)]=i[a(350)],w[a(301)]=i.mjTdQ;let e="";I?(e=I.toUpperCase(),G&&(e+=a(328)+G)):e=G;const t=2,s=e[a(428)](""),n=s[a(405)]((e,t)=>e+w[a(340)+"t"](t).width,0),r=i.QKoym(i[a(476)](s[a(279)],1),t);let o=i[a(304)](C,i[a(360)](n+r,2));for(const c of s)w[a(301)]=i[a(463)],w[a(264)](c,o,M),o+=w[a(340)+"t"](c)[a(453)]+t;M+=28}if(n[a(325)]&&n[a(325)][a(279)]>0){w[a(315)]=N,w[a(355)]=i[a(393)],w[a(301)]=a(421);const e=n.moves[a(366)](" "),t=i.qFJEX(e[a(279)],400)?i[a(353)](e[a(412)](0,400),a(396)):e,s=i[a(304)](i[a(476)](p,i[a(358)](h,2)),40),r=t[a(428)](" ");let o="",c=M;const l=15,u=4;let d=0;for(const n of r){if(!i[a(470)](i[a(312)],i[a(312)]))return _0x422449;{const e=i[a(413)](o,o?" ":"")+n;if(i[a(278)](w[a(340)+"t"](e)[a(453)],s)&&o){if(w[a(264)](o,C,c),o=n,c+=l,d++,i[a(272)](d,u))break}else o=e}}o&&d<u&&w.fillText(o,C,c)}const K=v-h-20;w[a(315)]=N,w[a(355)]=i.luBrf,w[a(301)]=a(421);const P=(a(383)+"NT â™š").split(""),Z=P[a(405)]((e,t)=>e+w[a(340)+"t"](t)[a(453)],0)+4*(P[a(279)]-1);let Y=i.gwmDi(C,Z/2);for(const e of P)w.textAlign=i.kaCXz,w[a(264)](e,Y,K),Y+=i[a(438)](w[a(340)+"t"](e)[a(453)],4);if(l){const[e,t]=await Promise[a(397)]([T(!1),i[a(345)](W)]),s=220,n=65,r=i[a(374)](h+f,s)-12,o=i[a(374)](i[a(445)](h,f)-n,12);w[a(315)]=i[a(407)],w[a(294)](),w.roundRect(r,o,s,n,6),w[a(293)](),w[a(367)+"e"]=i[a(427)],w[a(368)]=1,w[a(303)]();const c=48,l=r+12,u=o+i[a(335)](n-c,2);w[a(435)](),w[a(294)](),w[a(372)](l+c/2,i[a(402)](u,c/2),i[a(444)](c,2),0,i.MmBgZ(Math.PI,2)),w[a(423)](),w[a(311)](t,l,u,c,c),w[a(291)]();const d=i[a(337)](i[a(388)](l,c),10);w[a(301)]=a(305),w[a(400)+"ne"]=i.jLjjs,w[a(315)]=a(336),w[a(355)]=i[a(359)],w[a(264)](a(364),d,i[a(344)](o,28)),w[a(315)]=i.eSUkY,w[a(355)]=a(446)+a(334)+"ns-serif",w[a(264)](i[a(354)],d,o+46);const m=50,x=r+s-m-10,p=o+i.ohyDF(n,m)/2,v=new Image;await new Promise(t=>{const s=a;v[s(313)]=()=>{w[s(311)](v,x,p,m,m),t()},v.onerror=()=>t(),v[s(273)]=e})}return g}const O=A.filter(e=>"custom"!==e.id);const H=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const V=()=>{const e=n(),{user:t,isLoading:s}=r(),[K,U]=a.useState(null),[P,k]=a.useState(!1),[Z,T]=a.useState(0),[W,V]=a.useState(""),[F,J]=a.useState([]),[R,X]=a.useState(50),[$,Q]=a.useState(!0),[ee,te]=a.useState(!1),[se,ne]=a.useState(null);a.useEffect(()=>{s||(async()=>{if(!t)return void U(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});U(!0===e)})()},[t,s]);const re=a.useCallback(async(e,s,n,r,a=!0)=>{try{const m=i(e.pgn),f=a?O[Math.floor(Math.random()*O.length)]:O[n%O.length],x=function(e,t){const s=A.find(e=>e.id===t)||A[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?s.white:s.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,f.id);o(f.id);const h=await Y(x,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:s}),p=await new Promise((e,t)=>{h.toBlob(s=>{s?e(s):t(new Error("Failed to create blob"))},"image/png",.95)}),v=Date.now(),g=`${t.id}/${v}-${s.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(g,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:y}=c.storage.from("visualizations").getPublicUrl(g),j=l(e.pgn),b={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:x,totalMoves:m.totalMoves,visualizationState:{paletteId:f.id,paletteName:f.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?n+1:void 0,gameHash:j}},{data:N,error:z}=await c.from("saved_visualizations").insert({user_id:t.id,title:s,pgn:e.pgn,game_data:b,image_path:y.publicUrl}).select().single();if(z)throw z;const C=function(e,t){if(e){const e=99,s=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+s}return 199+Math.floor(600*Math.random())}(r,n),{data:M,error:D}=await u(N.id,C);if(D)throw D;const L=function(e,t){const s=e?1.5:1,n=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*s+5*n),hdDownloads:Math.floor(3*Math.random()*s),gifDownloads:Math.floor(2*Math.random()*s),tradeCount:e?Math.floor(2*Math.random()):0}}(r,n);for(let e=0;e<L.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:N.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const B=d(e.pgn),q=a?"premium":"genesis";return{title:s,success:!0,visualizationId:N.id,listingId:null==M?void 0:M.id,isExemplar:r,paletteId:f.id,paletteName:f.name,gameHash:j,tier:q,openingName:null==B?void 0:B.fullName}}catch(m){return{title:s,success:!1,error:m.message,isExemplar:r}}},[t]),ae=F.filter(e=>e.success).length,ie=F.filter(e=>!e.success).length;return F.filter(e=>e.success&&e.isExemplar).length,s||null===K?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})}):t&&K?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(v,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(g,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(x,{children:[m.jsx(w,{children:m.jsxs(y,{className:"flex items-center gap-3",children:[m.jsx(j,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(b,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",R," visions: ",Math.min(25,R)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,R-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:R,onChange:e=>X(Number(e.target.value)),disabled:P,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(N,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:P}),m.jsxs(z,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(C,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(M,{variant:"secondary",className:"text-xs",children:[O.length," palettes"]})]})]}),m.jsx(v,{onClick:async()=>{if(!t)return void I.error("You must be logged in as the CEO account");k(!0),J([]),T(0);const e=[],s=G.slice(0,Math.min(R,G.length)),n=[];for(let t=0;t<R;t++){const e=t%s.length,r=t<25,a=H[t]||`Vision ${t+1}`;n.push({game:s[e],title:a,isExemplar:r})}for(let t=0;t<n.length;t++){const{game:s,title:r,isExemplar:a}=n[t];V(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${n.length})`);const i=await re(s,r,t,a,$);e.push(i),J([...e]),T((t+1)/n.length*100),await new Promise(e=>setTimeout(e,300))}k(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?I.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):I.error("Failed to create any visions")},disabled:P||!t,className:"w-full",size:"lg",children:P?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(L,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(v,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),ne(null);try{const{data:e,error:s}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(s)throw s;if(!e||0===e.length)return I.info("No visions to delete"),void te(!1);const n=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",n);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=n.filter(e=>!i.has(e)),l=n.filter(e=>i.has(e));if(0===o.length)return I.info("All your visions have accrued natural value - none deleted"),ne({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);ne({deleted:o.length,preserved:l.length}),I.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){I.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||P||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(L,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),se&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",se.deleted," deleted"]}),se.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",se.preserved," preserved (has value)"]})]})})]}),P&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(B,{value:Z,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:W})]}),F.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(q,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(_,{className:"h-4 w-4"}),F.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(S,{className:"h-4 w-4"}),F.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:F.map((e,t)=>m.jsxs(E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(_,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(S,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(M,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(M,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(C,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(x,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(v,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{V as default};
