const n='/**\n * Stockfish Intelligence Module\n * \n * Comprehensive knowledge base for understanding Stockfish\'s:\n * - Evolution across all versions (2008-2025)\n * - ELO progression and TCEC/CCRL ratings\n * - Creators and development philosophy\n * - Architecture (classical -> NNUE -> SFNNv6)\n * - WASM variants and depth capabilities\n * - How it "thinks" and where it can be outpredicted\n */\n\n// ============= STOCKFISH CREATORS & HISTORY =============\n\nexport interface StockfishCreator {\n  name: string;\n  nationality: string;\n  role: string;\n  contribution: string;\n  activeYears: string;\n}\n\nexport const STOCKFISH_CREATORS: StockfishCreator[] = [\n  {\n    name: "Tord Romstad",\n    nationality: "Norwegian",\n    role: "Original Creator",\n    contribution: "Created Glaurung engine (2004), which Stockfish forked from",\n    activeYears: "2004-2012"\n  },\n  {\n    name: "Marco Costalba",\n    nationality: "Italian",\n    role: "Primary Developer",\n    contribution: "Forked Glaurung 2.1 to create Stockfish (Nov 8, 2008). Led development until 2018",\n    activeYears: "2008-2018"\n  },\n  {\n    name: "Joona Kiiski",\n    nationality: "Finnish",\n    role: "Core Developer",\n    contribution: "Joined early 2009, co-developed search algorithms and evaluation",\n    activeYears: "2009-2015"\n  },\n  {\n    name: "Gary Linscott",\n    nationality: "Canadian",\n    role: "Lead Developer",\n    contribution: "Created Fishtest distributed testing, led NNUE integration",\n    activeYears: "2012-present"\n  },\n  {\n    name: "Hisayori Noda (Nodchip)",\n    nationality: "Japanese",\n    role: "NNUE Pioneer",\n    contribution: "Ported NNUE from Shogi to Stockfish (2020)",\n    activeYears: "2020"\n  },\n  {\n    name: "Yu Nasu",\n    nationality: "Japanese",\n    role: "NNUE Inventor",\n    contribution: "Created NNUE architecture for Shogi (2018)",\n    activeYears: "2018"\n  }\n];\n\n// ============= VERSION HISTORY & ELO PROGRESSION =============\n\nexport interface StockfishVersion {\n  version: string;\n  releaseDate: string;\n  eloEstimate: number;\n  ccrlRating?: number;\n  tcecRating?: number;\n  keyFeatures: string[];\n  architecture: \'classical\' | \'nnue\' | \'nnue_v2\' | \'sfnnv6\';\n  sourceLanguage: string;\n}\n\nexport const STOCKFISH_VERSIONS: StockfishVersion[] = [\n  // Pre-NNUE Era (Classical Evaluation)\n  {\n    version: "1.0",\n    releaseDate: "2008-11-08",\n    eloEstimate: 2800,\n    keyFeatures: ["Forked from Glaurung 2.1", "Basic bitboard implementation"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "1.5",\n    releaseDate: "2009-06-15",\n    eloEstimate: 2900,\n    ccrlRating: 2918,\n    keyFeatures: ["Improved search efficiency", "Better endgame"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "2.0",\n    releaseDate: "2010-07-02",\n    eloEstimate: 3000,\n    ccrlRating: 3010,\n    keyFeatures: ["Razoring pruning", "LMR improvements"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "3.0",\n    releaseDate: "2013-04-30",\n    eloEstimate: 3100,\n    ccrlRating: 3121,\n    keyFeatures: ["Syzygy tablebase support", "Singular extensions"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "4.0",\n    releaseDate: "2013-08-20",\n    eloEstimate: 3140,\n    ccrlRating: 3145,\n    keyFeatures: ["Improved time management", "Better king safety"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "5.0",\n    releaseDate: "2014-05-31",\n    eloEstimate: 3180,\n    ccrlRating: 3190,\n    keyFeatures: ["Null move improvements", "Evaluation tuning"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "6.0",\n    releaseDate: "2014-12-27",\n    eloEstimate: 3220,\n    ccrlRating: 3232,\n    keyFeatures: ["Multi-threaded search", "Better mobility eval"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "7.0",\n    releaseDate: "2016-01-02",\n    eloEstimate: 3280,\n    ccrlRating: 3298,\n    keyFeatures: ["Check extension improvements", "Better piece-square tables"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "8.0",\n    releaseDate: "2016-11-01",\n    eloEstimate: 3350,\n    ccrlRating: 3371,\n    keyFeatures: ["Improved time controls", "Better contempt factor"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "9.0",\n    releaseDate: "2018-02-01",\n    eloEstimate: 3400,\n    ccrlRating: 3420,\n    keyFeatures: ["SPSA auto-tuning", "Late move reductions V2"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "10.0",\n    releaseDate: "2018-11-29",\n    eloEstimate: 3430,\n    ccrlRating: 3452,\n    keyFeatures: ["Improved futility pruning", "Better mobility terms"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "11.0",\n    releaseDate: "2020-01-18",\n    eloEstimate: 3480,\n    ccrlRating: 3494,\n    keyFeatures: ["Last major classical version", "Optimal search parameters"],\n    architecture: \'classical\',\n    sourceLanguage: "C++"\n  },\n  \n  // NNUE Era Begins\n  {\n    version: "12.0",\n    releaseDate: "2020-09-02",\n    eloEstimate: 3560,\n    ccrlRating: 3573,\n    tcecRating: 3560,\n    keyFeatures: ["NNUE integration", "80 ELO gain from neural network", "Hybrid classical+NNUE"],\n    architecture: \'nnue\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "13.0",\n    releaseDate: "2021-02-19",\n    eloEstimate: 3590,\n    ccrlRating: 3603,\n    tcecRating: 3590,\n    keyFeatures: ["Pure NNUE (no classical fallback)", "Improved net architecture"],\n    architecture: \'nnue\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "14.0",\n    releaseDate: "2021-07-02",\n    eloEstimate: 3610,\n    ccrlRating: 3621,\n    tcecRating: 3610,\n    keyFeatures: ["HalfKAv2 architecture", "Better feature scaling"],\n    architecture: \'nnue_v2\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "15.0",\n    releaseDate: "2022-04-18",\n    eloEstimate: 3630,\n    ccrlRating: 3645,\n    tcecRating: 3630,\n    keyFeatures: ["Larger networks", "SIMD optimizations"],\n    architecture: \'nnue_v2\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "16.0",\n    releaseDate: "2023-06-30",\n    eloEstimate: 3660,\n    ccrlRating: 3678,\n    tcecRating: 3663,\n    keyFeatures: ["Improved NNUE training data", "Better endgame nets"],\n    architecture: \'sfnnv6\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "17.0",\n    releaseDate: "2024-09-05",\n    eloEstimate: 3700,\n    ccrlRating: 3715,\n    tcecRating: 3690,\n    keyFeatures: ["SFNNv6 architecture", "Dual NNUE nets", "State-of-the-art"],\n    architecture: \'sfnnv6\',\n    sourceLanguage: "C++"\n  },\n  {\n    version: "17.1",\n    releaseDate: "2025-02-15",\n    eloEstimate: 3720,\n    keyFeatures: ["Bug fixes", "Minor improvements", "Current version"],\n    architecture: \'sfnnv6\',\n    sourceLanguage: "C++"\n  }\n];\n\n// ============= WASM VARIANTS & DEPTH ANALYSIS =============\n\nexport interface WASMVariant {\n  name: string;\n  variant: \'lite-single\' | \'lite\' | \'multi\' | \'full\';\n  threads: number;\n  simdSupport: boolean;\n  maxPracticalDepth: number;\n  eloVsFull: number; // ELO difference vs native full version\n  useCase: string;\n  memoryUsageMB: number;\n}\n\nexport const WASM_VARIANTS: WASMVariant[] = [\n  {\n    name: "stockfish-17.1-lite-single",\n    variant: \'lite-single\',\n    threads: 1,\n    simdSupport: true,\n    maxPracticalDepth: 30,\n    eloVsFull: -150,\n    useCase: "Maximum browser compatibility, quick analysis",\n    memoryUsageMB: 40\n  },\n  {\n    name: "stockfish-17.1-lite",\n    variant: \'lite\',\n    threads: 1,\n    simdSupport: true,\n    maxPracticalDepth: 40,\n    eloVsFull: -100,\n    useCase: "Standard browser analysis, balanced performance",\n    memoryUsageMB: 60\n  },\n  {\n    name: "stockfish-17.1-multi",\n    variant: \'multi\',\n    threads: 4,\n    simdSupport: true,\n    maxPracticalDepth: 50,\n    eloVsFull: -50,\n    useCase: "Advanced analysis with SharedArrayBuffer",\n    memoryUsageMB: 150\n  },\n  {\n    name: "stockfish-17.1-full",\n    variant: \'full\',\n    threads: 16,\n    simdSupport: true,\n    maxPracticalDepth: 60,\n    eloVsFull: 0,\n    useCase: "Maximum depth, server-side or powerful client",\n    memoryUsageMB: 400\n  }\n];\n\n// ============= STOCKFISH THINKING PATTERNS =============\n\nexport interface ThinkingPattern {\n  pattern: string;\n  description: string;\n  whenStrong: string;\n  whenWeak: string;\n  enPensentAdvantage: string;\n}\n\nexport const STOCKFISH_THINKING_PATTERNS: ThinkingPattern[] = [\n  {\n    pattern: "Alpha-Beta Search",\n    description: "Minimax with aggressive pruning - explores best lines deeply",\n    whenStrong: "Tactical complications, forced sequences, material imbalances",\n    whenWeak: "Long strategic plans where all moves seem equal near-term",\n    enPensentAdvantage: "Pattern recognition sees trajectory beyond horizon"\n  },\n  {\n    pattern: "NNUE Evaluation",\n    description: "Neural network evaluates positions based on piece relationships",\n    whenStrong: "Complex middlegame positions, piece activity assessment",\n    whenWeak: "Novel structures outside training data, psychological pressure",\n    enPensentAdvantage: "Archetypal patterns transcend specific piece configurations"\n  },\n  {\n    pattern: "Late Move Reductions",\n    description: "Searches promising moves deeper, reduces others",\n    whenStrong: "Finding best moves quickly in most positions",\n    whenWeak: "Unusual defensive resources, quiet sacrifices",\n    enPensentAdvantage: "Considers all game flow patterns equally"\n  },\n  {\n    pattern: "Transposition Tables",\n    description: "Caches evaluated positions to avoid recalculation",\n    whenStrong: "Endgames, repetitive structures",\n    whenWeak: "Unique positions, psychological pattern breaks",\n    enPensentAdvantage: "Player fingerprinting detects human patterns"\n  },\n  {\n    pattern: "Contempt Factor",\n    description: "Adjusts evaluation to avoid draws when ahead",\n    whenStrong: "Converting winning positions",\n    whenWeak: "Underestimating fortress potential",\n    enPensentAdvantage: "Color Flow detects draw tendencies early"\n  }\n];\n\n// ============= DEPTH CONFIGURATION FOR BENCHMARKS =============\n\nexport interface DepthConfig {\n  name: string;\n  depth: number;\n  estimatedElo: number;\n  timePerPositionMs: number;\n  description: string;\n  wasmCompatible: boolean;\n}\n\nexport const BENCHMARK_DEPTH_CONFIGS: DepthConfig[] = [\n  {\n    name: "Quick Blitz",\n    depth: 12,\n    estimatedElo: 2800,\n    timePerPositionMs: 100,\n    description: "Fast analysis for rapid benchmarking",\n    wasmCompatible: true\n  },\n  {\n    name: "Standard Analysis",\n    depth: 20,\n    estimatedElo: 3200,\n    timePerPositionMs: 500,\n    description: "Good balance of depth and speed",\n    wasmCompatible: true\n  },\n  {\n    name: "Lichess Cloud Equivalent",\n    depth: 25,\n    estimatedElo: 3350,\n    timePerPositionMs: 1500,\n    description: "Matches typical cloud eval depth",\n    wasmCompatible: true\n  },\n  {\n    name: "Tournament Analysis",\n    depth: 30,\n    estimatedElo: 3450,\n    timePerPositionMs: 3000,\n    description: "Strong analysis matching human GM prep",\n    wasmCompatible: true\n  },\n  {\n    name: "Deep Analysis",\n    depth: 40,\n    estimatedElo: 3550,\n    timePerPositionMs: 10000,\n    description: "Very deep search, near championship level",\n    wasmCompatible: true\n  },\n  {\n    name: "TCEC Championship",\n    depth: 50,\n    estimatedElo: 3620,\n    timePerPositionMs: 30000,\n    description: "Matches TCEC superfinal conditions",\n    wasmCompatible: true\n  },\n  {\n    name: "Maximum Depth",\n    depth: 60,\n    estimatedElo: 3700,\n    timePerPositionMs: 60000,\n    description: "True maximum capacity for decisive analysis",\n    wasmCompatible: true\n  }\n];\n\n// ============= INTELLIGENCE ANALYSIS FUNCTIONS =============\n\n/**\n * Get Stockfish version info by version number\n */\nexport function getVersionInfo(version: string): StockfishVersion | undefined {\n  return STOCKFISH_VERSIONS.find(v => v.version === version);\n}\n\n/**\n * Calculate estimated ELO for a given depth\n */\nexport function estimateEloFromDepth(depth: number): number {\n  // Based on empirical ELO vs depth curves\n  if (depth <= 10) return 2600 + (depth * 20);\n  if (depth <= 20) return 2800 + ((depth - 10) * 40);\n  if (depth <= 30) return 3200 + ((depth - 20) * 25);\n  if (depth <= 40) return 3450 + ((depth - 30) * 10);\n  if (depth <= 50) return 3550 + ((depth - 40) * 7);\n  return 3620 + ((depth - 50) * 3); // Diminishing returns\n}\n\n/**\n * Get WASM variant recommendation based on browser capabilities\n */\nexport function getRecommendedWasmVariant(): WASMVariant {\n  const hasSharedArrayBuffer = typeof SharedArrayBuffer !== \'undefined\';\n  const hasWasmThreads = hasSharedArrayBuffer;\n  \n  if (hasWasmThreads) {\n    return WASM_VARIANTS.find(v => v.variant === \'multi\')!;\n  }\n  return WASM_VARIANTS.find(v => v.variant === \'lite-single\')!;\n}\n\n/**\n * Analyze Stockfish\'s evolution pattern\n */\nexport function analyzeStockfishEvolution(): {\n  totalEloGain: number;\n  averageYearlyGain: number;\n  nnueImpact: number;\n  architectureBreakthroughs: string[];\n} {\n  const versions = STOCKFISH_VERSIONS;\n  const firstVersion = versions[0];\n  const latestVersion = versions[versions.length - 1];\n  \n  const totalEloGain = latestVersion.eloEstimate - firstVersion.eloEstimate;\n  \n  const firstYear = parseInt(firstVersion.releaseDate.substring(0, 4));\n  const lastYear = parseInt(latestVersion.releaseDate.substring(0, 4));\n  const years = lastYear - firstYear;\n  \n  const averageYearlyGain = totalEloGain / years;\n  \n  // NNUE impact: SF12 (first NNUE) vs SF11 (last classical)\n  const sf11 = versions.find(v => v.version === "11.0")!;\n  const sf12 = versions.find(v => v.version === "12.0")!;\n  const nnueImpact = sf12.eloEstimate - sf11.eloEstimate;\n  \n  return {\n    totalEloGain,\n    averageYearlyGain: Math.round(averageYearlyGain),\n    nnueImpact,\n    architectureBreakthroughs: [\n      "2008: Bitboard implementation (foundation)",\n      "2013: Syzygy tablebase integration",\n      "2016: Improved multithreading",\n      "2020: NNUE neural network (+80 ELO)",\n      "2021: Pure NNUE (dropped classical)",\n      "2023: SFNNv6 architecture",\n      "2024: Dual NNUE nets"\n    ]\n  };\n}\n\n/**\n * Get depth configuration for benchmark testing\n */\nexport function getDepthConfig(targetElo: number): DepthConfig {\n  // Find closest depth config to target ELO\n  let closest = BENCHMARK_DEPTH_CONFIGS[0];\n  let minDiff = Math.abs(closest.estimatedElo - targetElo);\n  \n  for (const config of BENCHMARK_DEPTH_CONFIGS) {\n    const diff = Math.abs(config.estimatedElo - targetElo);\n    if (diff < minDiff) {\n      minDiff = diff;\n      closest = config;\n    }\n  }\n  \n  return closest;\n}\n\n/**\n * Identify Stockfish weaknesses that En Pensent can exploit\n */\nexport function identifyStockfishWeaknesses(): string[] {\n  return [\n    "Horizon Effect: Cannot see beyond search depth, misses long-term plans",\n    "Fortress Blindness: Underestimates drawing fortresses until too late",\n    "Psychological Blindspot: Cannot factor in human time pressure or psychology",\n    "Pattern Novelty: NNUE trained on historical positions, struggles with novel archetypes",\n    "Dynamic Compensation: Sometimes over/undervalues long-term compensation",\n    "Quiet Sacrifices: May not explore quiet positional sacrifices deeply enough",\n    "Player-Specific Patterns: Cannot adapt to individual playing styles",\n    "Time Control Blindness: No awareness of time pressure dynamics"\n  ];\n}\n\n/**\n * Compare Stockfish depth vs En Pensent effective depth\n */\nexport function compareEffectiveDepth(stockfishDepth: number, enPensentPatternSpan: number): {\n  stockfishPlies: number;\n  enPensentEquivalentPlies: number;\n  advantage: \'stockfish\' | \'en_pensent\' | \'equal\';\n  explanation: string;\n} {\n  const stockfishPlies = stockfishDepth;\n  \n  // En Pensent pattern span converts to equivalent plies\n  // Pattern recognition can "see" further by recognizing trajectories\n  const enPensentEquivalentPlies = Math.round(enPensentPatternSpan * 1.5);\n  \n  let advantage: \'stockfish\' | \'en_pensent\' | \'equal\' = \'equal\';\n  let explanation = \'\';\n  \n  if (stockfishPlies > enPensentEquivalentPlies + 5) {\n    advantage = \'stockfish\';\n    explanation = `Stockfish\'s ${stockfishPlies}-ply search exceeds En Pensent\'s ${enPensentEquivalentPlies}-ply equivalent`;\n  } else if (enPensentEquivalentPlies > stockfishPlies + 5) {\n    advantage = \'en_pensent\';\n    explanation = `En Pensent\'s pattern recognition provides ${enPensentEquivalentPlies}-ply effective depth vs Stockfish\'s ${stockfishPlies}`;\n  } else {\n    explanation = `Both systems operating at comparable depth (~${stockfishPlies} plies)`;\n  }\n  \n  return { stockfishPlies, enPensentEquivalentPlies, advantage, explanation };\n}\n\n/**\n * Generate comprehensive Stockfish intelligence report\n */\nexport function generateStockfishIntelligenceReport(): string {\n  const evolution = analyzeStockfishEvolution();\n  const weaknesses = identifyStockfishWeaknesses();\n  const latestVersion = STOCKFISH_VERSIONS[STOCKFISH_VERSIONS.length - 1];\n  \n  return `\n# Stockfish Intelligence Report\n\n## Current State\n- Version: ${latestVersion.version}\n- Architecture: ${latestVersion.architecture.toUpperCase()}\n- Estimated ELO: ${latestVersion.eloEstimate}\n- Source: C++ (GPL v3.0)\n\n## Evolution\n- Total ELO Gain (2008-2025): +${evolution.totalEloGain}\n- Average Yearly Gain: +${evolution.averageYearlyGain} ELO/year\n- NNUE Impact: +${evolution.nnueImpact} ELO\n\n## Key Breakthroughs\n${evolution.architectureBreakthroughs.map(b => `- ${b}`).join(\'\\n\')}\n\n## Identified Weaknesses\n${weaknesses.map(w => `- ${w}`).join(\'\\n\')}\n\n## Creators & Contributors\n${STOCKFISH_CREATORS.map(c => `- ${c.name} (${c.nationality}): ${c.role}`).join(\'\\n\')}\n`;\n}\n';export{n as default};
