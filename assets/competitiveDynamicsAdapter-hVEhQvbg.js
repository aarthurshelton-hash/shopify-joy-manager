const n="/**\n * Competitive Dynamics Adapter\n * \n * Studies combat, war, sports, and competitive behavior patterns\n * to understand human aggression, strategy, and victory/defeat cycles.\n * \n * Markets are battlefields. Every trade is a contest.\n * \n * Inventor: Alec Arthur Shelton\n */\n\nimport { UniversalSignal, DomainSignature, DomainType } from '../types';\n\n// Combat and War Strategies - timeless patterns\nconst COMBAT_STRATEGIES = {\n  sunTzu: {\n    deception: 'All warfare is based on deception',\n    timing: 'Attack when the enemy is unprepared',\n    terrain: 'Know the ground, know victory',\n    marketApplication: 'Market makers deceive; smart money moves when retail sleeps'\n  },\n  romanFormations: {\n    testudo: { pattern: 'defensive_consolidation', marketPhase: 'accumulation' },\n    wedge: { pattern: 'aggressive_penetration', marketPhase: 'breakout' },\n    orb: { pattern: 'surrounded_defense', marketPhase: 'capitulation' }\n  },\n  gladiatorPrinciples: {\n    patience: 'Wait for the opening',\n    commitment: 'Strike with full force when committed',\n    adaptability: 'Read opponent continuously',\n    crowdAwareness: 'The crowd influences the fight'\n  }\n};\n\n// Sports Competition Patterns\nconst SPORTS_DYNAMICS = {\n  momentum: {\n    swingFactor: 0.73, // Probability momentum continues once established\n    breakingPoint: 0.15, // Threshold where momentum reverses\n    psychologicalWeight: 0.85\n  },\n  homeAdvantage: {\n    averageBoost: 0.03, // 3% performance increase\n    crowdInfluence: 0.6,\n    familiarityFactor: 0.4,\n    marketEquivalent: 'institutional_home_turf'\n  },\n  clutchPerformance: {\n    pressureResponse: {\n      elite: 1.15, // Perform 15% better under pressure\n      average: 0.92, // Perform 8% worse\n      choking: 0.65 // Significant degradation\n    }\n  },\n  underdog: {\n    historicalUpsetRate: 0.28,\n    motivationalBoost: 1.25,\n    nothingToLose: 'asymmetric risk-reward psychology'\n  }\n};\n\n// Animal Competition Patterns\nconst ANIMAL_COMPETITION = {\n  territorial: {\n    display: 'Most conflicts resolved through display, not combat',\n    escalation: 'Physical combat is last resort - costly',\n    marketParallel: 'Volume spikes are displays; actual moves are commitments'\n  },\n  packHunting: {\n    coordination: 0.89, // Success rate with coordination\n    isolation: 'Separate target from herd',\n    exhaustion: 'Wear down over time',\n    marketParallel: 'Institutions coordinate to move markets'\n  },\n  alphaContest: {\n    frequencyOfChallenge: 'Peaks during resource scarcity',\n    outcomePredictor: 'Size + experience + current condition',\n    marketParallel: 'Bull/bear regime changes'\n  },\n  predatorPrey: {\n    vigilanceCost: 'Constant alertness reduces other activities',\n    groupProtection: 'Larger groups = individual safety',\n    marketParallel: 'Retail scattered = vulnerable; coordinated = protection'\n  }\n};\n\n// War Cycles and Market Correlation\nconst WAR_CYCLES = {\n  kondratiev: {\n    period: 50, // years\n    phases: ['spring_growth', 'summer_inflation', 'autumn_plateau', 'winter_depression'],\n    warCorrelation: 'Major wars cluster at cycle transitions'\n  },\n  conflictEscalation: {\n    stages: [\n      { name: 'tension', intensity: 0.2, marketImpact: 'uncertainty_premium' },\n      { name: 'provocation', intensity: 0.4, marketImpact: 'volatility_spike' },\n      { name: 'mobilization', intensity: 0.6, marketImpact: 'sector_rotation' },\n      { name: 'engagement', intensity: 0.8, marketImpact: 'flight_to_safety' },\n      { name: 'resolution', intensity: 1.0, marketImpact: 'reconstruction_rally' }\n    ]\n  }\n};\n\n// Victory and Defeat Psychology\nconst VICTORY_DEFEAT_CYCLES = {\n  winnerEffect: {\n    testosteroneSpike: 1.20, // 20% increase after victory\n    riskToleranceIncrease: 0.35,\n    overconfidenceDanger: 'Winner expects to keep winning',\n    marketParallel: 'Winning traders increase position size dangerously'\n  },\n  loserEffect: {\n    cortisolSpike: 1.45,\n    riskAversionIncrease: 0.40,\n    learned_helplessness: 'Stops trying after repeated losses',\n    marketParallel: 'Retail capitulation at bottoms'\n  },\n  comebackPsychology: {\n    desperationPhase: { riskTaking: 'maximum', rationality: 'minimum' },\n    acceptancePhase: { riskTaking: 'calculated', rationality: 'returning' },\n    resurgencePhase: { riskTaking: 'controlled', rationality: 'high' }\n  }\n};\n\ninterface CompetitiveData {\n  marketPhase: 'accumulation' | 'markup' | 'distribution' | 'markdown';\n  dominantStrategy: keyof typeof COMBAT_STRATEGIES;\n  momentumState: number; // -1 to 1\n  crowdSentiment: number; // fear to greed\n  institutionalPosition: 'hunting' | 'defending' | 'neutral';\n  volatilityRegime: 'low' | 'medium' | 'high' | 'extreme';\n}\n\nclass CompetitiveDynamicsAdapter {\n  private readonly domain: DomainType = 'bio'; // Maps to bio domain (survival/competition)\n  private signalBuffer: UniversalSignal[] = [];\n  private isActive = false;\n  private currentBattlePhase: string = 'reconnaissance';\n\n  async initialize(): Promise<void> {\n    this.isActive = true;\n    console.log('[CompetitiveDynamicsAdapter] Combat intelligence activated');\n  }\n\n  processCompetitiveData(data: CompetitiveData): UniversalSignal {\n    const battleIntensity = this.calculateBattleIntensity(data);\n    const dominantForce = this.determineDominantForce(data);\n    const strategyScore = this.evaluateStrategyAlignment(data);\n    const momentumPersistence = data.momentumState > 0 \n      ? SPORTS_DYNAMICS.momentum.swingFactor \n      : 1 - SPORTS_DYNAMICS.momentum.swingFactor;\n    const underdogSignal = Math.abs(data.crowdSentiment) > 0.8 \n      ? SPORTS_DYNAMICS.underdog.historicalUpsetRate \n      : 0;\n    \n    const frequency = 0.5 + (battleIntensity * 0.3);\n    const intensity = Math.abs(data.momentumState) * (1 + strategyScore);\n    \n    const signal: UniversalSignal = {\n      domain: this.domain,\n      timestamp: Date.now(),\n      frequency,\n      intensity: Math.min(intensity, 1),\n      phase: this.getPhaseFromBattle(data.marketPhase),\n      harmonics: [battleIntensity, dominantForce, momentumPersistence, underdogSignal, strategyScore],\n      rawData: [battleIntensity, dominantForce, momentumPersistence, underdogSignal, strategyScore, data.crowdSentiment]\n    };\n    \n    this.signalBuffer.push(signal);\n    if (this.signalBuffer.length > 100) this.signalBuffer.shift();\n    \n    return signal;\n  }\n\n  private calculateBattleIntensity(data: CompetitiveData): number {\n    const volatilityWeight = { low: 0.2, medium: 0.5, high: 0.8, extreme: 1.0 }[data.volatilityRegime];\n    return (volatilityWeight + Math.abs(data.crowdSentiment)) / 2;\n  }\n\n  private determineDominantForce(data: CompetitiveData): number {\n    const phaseForce = { accumulation: 0.3, markup: 0.8, distribution: -0.3, markdown: -0.8 }[data.marketPhase];\n    return (data.momentumState + phaseForce) / 2;\n  }\n\n  private evaluateStrategyAlignment(data: CompetitiveData): number {\n    const timingScore = data.marketPhase === 'accumulation' || data.marketPhase === 'distribution' ? 0.8 : 0.5;\n    return (0.6 + timingScore) / 2;\n  }\n\n  private getPhaseFromBattle(marketPhase: string): number {\n    const phaseMap: Record<string, number> = {\n      accumulation: 0, markup: Math.PI / 2, distribution: Math.PI, markdown: 3 * Math.PI / 2\n    };\n    return phaseMap[marketPhase] || 0;\n  }\n\n  extractSignature(signals: UniversalSignal[]): DomainSignature {\n    if (signals.length === 0) return this.getDefaultSignature();\n    \n    const avgIntensity = signals.reduce((s, sig) => s + sig.intensity, 0) / signals.length;\n    const recentBattles = signals.slice(-10);\n    const battleTrend = recentBattles.reduce((s, sig) => s + (sig.harmonics[1] || 0), 0) / recentBattles.length;\n    \n    return {\n      domain: this.domain,\n      quadrantProfile: {\n        aggressive: battleTrend > 0.3 ? 0.8 : 0.3,\n        defensive: battleTrend < -0.3 ? 0.8 : 0.3,\n        tactical: Math.abs(battleTrend) < 0.3 ? 0.6 : 0.3,\n        strategic: 0.5\n      },\n      temporalFlow: { early: 0.4, mid: 0.5, late: 0.6 },\n      intensity: avgIntensity,\n      momentum: battleTrend,\n      volatility: Math.abs(battleTrend),\n      dominantFrequency: 0.5,\n      harmonicResonance: 0.6,\n      phaseAlignment: 0.5,\n      extractedAt: Date.now()\n    };\n  }\n\n  private getDefaultSignature(): DomainSignature {\n    return {\n      domain: this.domain,\n      quadrantProfile: { aggressive: 0.25, defensive: 0.25, tactical: 0.25, strategic: 0.25 },\n      temporalFlow: { early: 0.33, mid: 0.34, late: 0.33 },\n      intensity: 0.5, momentum: 0, volatility: 0.5,\n      dominantFrequency: 0.5, harmonicResonance: 0.5, phaseAlignment: 0.5, extractedAt: Date.now()\n    };\n  }\n\n  generateCompetitiveData(momentum: number, volatility: number, volume: number, direction: number): CompetitiveData {\n    const marketPhase = direction > 0.3 ? 'markup' : direction < -0.3 ? 'markdown' : momentum > 0 ? 'accumulation' : 'distribution';\n    const volatilityRegime = volatility > 0.8 ? 'extreme' : volatility > 0.5 ? 'high' : volatility > 0.2 ? 'medium' : 'low';\n    \n    return {\n      marketPhase,\n      dominantStrategy: 'sunTzu',\n      momentumState: momentum,\n      crowdSentiment: direction,\n      institutionalPosition: volume > 0.7 ? 'hunting' : volume < 0.3 ? 'neutral' : 'defending',\n      volatilityRegime\n    };\n  }\n}\n\nexport const competitiveDynamicsAdapter = new CompetitiveDynamicsAdapter();\nexport { COMBAT_STRATEGIES, SPORTS_DYNAMICS, ANIMAL_COMPETITION, WAR_CYCLES, VICTORY_DEFEAT_CYCLES };\n";export{n as default};
