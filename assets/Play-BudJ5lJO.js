import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as w,aZ as y,bC as j,ad as C,aj as N,bD as M,bE as k,af as z,ag as D,ai as B,y as L,bF as A,bG as q,b6 as S,ae as P,bH as H,ah as I,bI as T,B as G,bJ as K,bK as E,bL as W,bM as U,bN as _,bO as Y,bP as O,bQ as J,bR as V,bS as Z,bT as X,bU as R,bV as F,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as we,a5 as ye,c5 as je,L as Ce,ax as Ne,b1 as Me,c6 as ke,c7 as ze,an as De,av as Be,aw as Le,c8 as Ae,aM as qe,c9 as Se,H as Pe,P as He,ca as Ie,b3 as Te,bs as Ge,be as Ke,cb as Ee,aP as We,cc as Ue,d as _e,b2 as Ye,a9 as Oe,cd as Je,ce as Ve,cf as Ze,al as Xe,au as Re}from"./index-Dq7M-Dd_.js";import{L as Fe}from"./LiveColorLegend-dC-i0jVZ.js";import{T as Qe}from"./trending-down-WblA6ANi.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CRtbJ1fS.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function ut(){const e=["C3vMzMLJAwvUDa","C3rHBgvTyxrL","yMLUza","zxHJzxb0Aw9U","mJaWotGZmNj4Axr1za","AxneCMf3","CMv0DxjUicHMDq","Bu1Xt1e","yxbWBhK","Ag9mwxy","D29mshK","s0rQAei","ndmYC01ZAM5V","vgHYzwvMB2XKia","x19WCM90B19F","zsbMAwz0Es1TBW","AKr0DNK","C2vHCMnO","mta0oty5nMnluK1VBG","Aw5MBW","u3rHBgvTyxrLiq","AxnjBNn1zMzPyW","CMvLzM9SzcbYzq","wKnysva","BNqGtwf0zxjPyq","y29UC29Szq","AxntDgfSzw1HDa","tLbZzwq","BvP2sKq","zfjLCgv0AxrPBW","uM5eqMO","BeXgCxe","y29UC3rYDwn0BW","Bw92zxmGyxzHAq","C2HVCNrnzxnZyq","zNfUEeS","qvHqr3e","uMvWzxrPDgLVBG","kcGOlISPkYKRkq","rhjHDYbIEsb0Aa","Cgv0AxrPB24U","DgfIBgu","BNrFBwf0zxjPyq","DMuGCNvSzs4","zxjYB3i","ntaTtw92zsbsDq","uwjzEM4","zMfquKW","vLv2qvO","mZqXmZbmwvjhyvq","rhjHDYbIEsbPBG","Aw5ZDwzMAwnPzq","rhjHDW","BgfIBguU","mtmXndC3t0zbq2jx","Bg9N","Dg9tDhjPBMC","DhjHy2u","C1HiD3y","DgHYzwvMB2XKxW","ChjVDg90ExbL","wuPrtNy","CM4GDgHPCYiPka","B3Liuxq","ntmYzwfev0Ld","sw5ZDwzMAwnPzq","BwvZC2fNzq","u1ziA3K","mty4odq2nuXJtLbyCa","CMvHC29U","Dw5RBM93BG","AMrozxy","CMvWzxrPDgLVBG","mNbrt1znvG","nZu5mJy0zvboANPQ","AgXft0m","zMvU","E30Uy29UC3rYDq","odaXqLfxBNjt","C2Tpvee","BMn0Aw9UkcKG"];return(ut=function(){return e})()}function dt(e,t){e-=223;const n=ut();let s=n[e];if(void 0===dt.cYNQNi){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};dt.WcIMZW=r,dt.LbvPlM={},dt.cYNQNi=!0}const a=e+n[0],i=dt.LbvPlM[a];if(i)s=i;else{const e=function(e){this.yvVWnQ=e,this.EtzIYV=[1,0,0],this.XhJgAN=function(){return"newState"},this.NkfdEs="\\w+ *\\(\\) *{\\w+ *",this.LHkKdt="['|\"].+['|\"];? *}"};e.prototype.avncxy=function(){const e=new RegExp(this.NkfdEs+this.LHkKdt).test(this.XhJgAN.toString())?--this.EtzIYV[1]:--this.EtzIYV[0];return this.jwHqTD(e)},e.prototype.jwHqTD=function(e){return Boolean(~e)?this.UsUygV(this.yvVWnQ):e},e.prototype.UsUygV=function(e){for(let t=0,n=this.EtzIYV.length;t<n;t++)this.EtzIYV.push(Math.round(Math.random())),n=this.EtzIYV.length;return e(this.EtzIYV[0])},new e(dt).avncxy(),s=dt.WcIMZW(s),dt.LbvPlM[a]=s}return s}!function(){const e=dt,t=ut();for(;;)try{if(223991===parseInt(e(278))/1*(-parseInt(e(297))/2)+parseInt(e(298))/3+-parseInt(e(242))/4+parseInt(e(292))/5+parseInt(e(228))/6+parseInt(e(288))/7*(-parseInt(e(236))/8)+parseInt(e(302))/9*(-parseInt(e(273))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[dt(232)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=dt,t={};t[e(291)]=e(262)+"+$";const n=t;return mt[e(280)]().search(e(262)+"+$").toString()[e(256)+"r"](mt)[e(241)](n[e(291)])});mt();const xt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[dt(232)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function ht(e){const t=dt;return function(e){const t=dt,n={ZyCMj:"(((.+)+)+)+$",LHrbk:t(283)+"repetition",QbYzn:"Draw by th"+t(246)+t(264),hoLYv:t(259),faPRL:t(225),vtZkP:t(244)+" No legal "+t(257)+t(277),KcmZT:t(244),oyHQt:t(237)+t(261),AXPGq:t(275)+t(266)+"l",mZvJD:t(289)+t(248)+"l",RnDBj:function(e,t,n){return e(t,n)},YLrVD:function(e,t){return e!==t},rCfgg:t(255),sZZeF:t(269)+"le",VUvAZ:t(294)};if(e[t(250)+"e"]()){if("fqnxK"===n[t(233)]){const e={};return e[t(293)]=n[t(271)],e[t(290)]=n.vtZkP,e[t(258)+"ge"]=n.KcmZT,e}return _0x4fbad2[t(280)]()[t(241)](t(262)+"+$")[t(280)]()[t(256)+"r"](_0x48b520)[t(241)](ZfyBjm.ZyCMj)}if(e["isThreefol"+t(253)+"n"]()){const e={};return e[t(293)]="threefold_"+t(296),e[t(290)]="Draw by th"+t(246)+t(264),e[t(258)+"ge"]=n[t(287)],e}if(e[t(245)+"ientMaterial"]()){const e={};return e[t(293)]=n[t(260)],e[t(290)]=t(274)+t(224)+" material.",e.shortMessage=n[t(252)],e}const s=e[t(300)]();if(n[t(254)](parseInt,s.split(" ")[4],10)>=100){if(n.YLrVD(n.rCfgg,t(299))){const e={};return e[t(293)]="fifty_move_rule",e[t(290)]=t(263)+t(239)+t(267),e[t(258)+"ge"]=n.sZZeF,e}{const e={};return e[t(293)]=n.LHrbk,e[t(290)]=n[t(270)],e.shortMessage="Threefold "+t(261),e}}const r={};return r[t(293)]=n[t(272)],r[t(290)]="Game drawn!",r[t(258)+"ge"]=t(276),r}(e)[t(290)]}xt(void 0,function(){const e=dt,t={jDtvy:function(e,t){return e(t)},NPsed:function(e,t){return e+t},woLHy:e(230)+e(223),iOoaV:"warn",EYmqo:e(243),jdNev:e(227),KDjhB:e(265),YJQNv:e(281),sXHwv:function(e,t){return e<t},skOTA:e(247),mMqOQ:"SnSlx"},n=function(){const n=e;let s;try{s=t[n(240)](Function,t[n(251)](t[n(234)],n(301)+'ctor("retu'+n(286)+" )")+");")()}catch(r){s=window}return s}(),s=n[e(249)]=n[e(249)]||{},r=[e(279),t.iOoaV,t.EYmqo,e(268),t[e(295)],t[e(235)],t[e(285)]];for(let a=0;t[e(282)](a,r.length);a++){if(t[e(303)]===t[e(231)]){const t=_0x1099fb[e(232)](_0x1877cf,arguments);return _0x533532=null,t}{const t=xt[e(256)+"r"][e(284)].bind(xt),n=r[a],i=s[n]||t;t[e(238)]=xt.bind(xt),t[e(280)]=i.toString[e(226)](i),s[n]=t}}})(),function(){const e=gt,t=vt();for(;;)try{if(743348===-parseInt(e(445))/1+parseInt(e(402))/2+parseInt(e(465))/3*(parseInt(e(408))/4)+parseInt(e(468))/5*(-parseInt(e(437))/6)+parseInt(e(467))/7*(parseInt(e(359))/8)+-parseInt(e(410))/9+parseInt(e(374))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(397)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=gt,t={};t[e(440)]=e(451)+"+$";const n=t;return pt[e(377)]()[e(360)]("(((.+)+)+)+$")[e(377)]()[e(463)+"r"](pt)[e(360)](n[e(440)])});pt();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(397)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function gt(e,t){e-=358;const n=vt();let s=n[e];if(void 0===gt.QkXcYg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.IcbNit=r,gt.NmyJSz={},gt.QkXcYg=!0}const a=e+n[0],i=gt.NmyJSz[a];if(i)s=i;else{const e=function(e){this.BJCHPf=e,this.WrTpak=[1,0,0],this.dcDORE=function(){return"newState"},this.sbaAkU="\\w+ *\\(\\) *{\\w+ *",this.yIDiPP="['|\"].+['|\"];? *}"};e.prototype.WWpNFc=function(){const e=new RegExp(this.sbaAkU+this.yIDiPP).test(this.dcDORE.toString())?--this.WrTpak[1]:--this.WrTpak[0];return this.xPMipe(e)},e.prototype.xPMipe=function(e){return Boolean(~e)?this.lajkZp(this.BJCHPf):e},e.prototype.lajkZp=function(e){for(let t=0,n=this.WrTpak.length;t<n;t++)this.WrTpak.push(Math.round(Math.random())),n=this.WrTpak.length;return e(this.WrTpak[0])},new e(gt).WWpNFc(),s=gt.IcbNit(s),gt.NmyJSz[a]=s}return s}function vt(){const e=["z0nKvfG","Cxzps2e","C2fTCgXLuMf0zq","zNjLCxvLBMn5","y29UBMvJDa","DhjPyw5NBgu","DKPUBw4","qxvKAw9dB250zq","Bg9N","ChbVCNrLza","nNvpBMjAra","y2HLy2S","C3rHCNq","zvH2ufu","BfjHBxbuB1zHBa","r25Aq3m","DMLJDg9YEq","v2vIief1zgLVia","mteZmti1mKDiywzgAW","CMfUzg9T","rMnrzhm","y3vYCMvUDfrPBq","C2LUzq","zhjHDW","kcGOlISPkYKRkq","BgXHDg9Y","yNvMzMvY","qMXttKq","qwPstfG","qvbjig5VDcbZDq","A2nStfa","yvjZuuG","EMjLrfm","zxjtB3vYy2u","sM1vDMq","D2fYBG","y29UC3rYDwn0BW","ALPXD08","mtiZndq5n3fAwMjsrW","DhjHy2u","mtC4mJC1m3jdC2rXyG","ntiYnZK0me1jrvvYDW","wNjtq3G","BMn0Aw9UkcKG","z1n3C2K","z2fTzvn0yxj0","y2fZDgXL","DKvICe0","BgvUz3rO","A2X5shy","ndbryxzpCNq","C2vHCMnO","vg9wywX1zuf0va","y29UC29Szq","y3vYCMvUDa","zxHJzxb0Aw9U","tgDQALm","zxHWB25LBNrPyq","zLrWz2i","CKX3zwK","AwXSzwDHBa","BxP4r1C","DKnRAwS","y3rVCIGICMv0Dq","D2vIA2L0qxvKAq","mJiWndi2meLOu2TTCW","zxDVC0O","DwvbDfrPBwu","Dg9tDhjPBMC","Chztz1G","BwXrtLe","CgXHEvnVDw5K","y2fWDhvYzq","qvP1v2C","B0nVBNrLEhq","rgf0yq","EwDbz28","AKX3r2C","AKPtsMu","Aw5PDef1zgLV","CMv0DxjUicHMDq","DMfSDwu","vgLTzq","z2v0q2HHBM5LBa","r3fMExe","u1fIy1q","Bw92zq","uwDWqKK","yxbWBhK","C2v0vMfSDwvbDa","BM1erw8","y29UDgv4Da","z2fPBG","mJeWnJC3ogXPv1P5sq","yMLUza","BgLUzwfYuMfTCa","A05MAhG","A2jTAvy","wxvHzfK","mtjIvMXJyvO","Aw1L","nZC1mZy3mxL4txfusW","x19WCM90B19F","E30Uy29UC3rYDq","uw9Wugq","DvL1Dhm","y3jLyxrLqMLXDq","z2fPBK5Vzgu","y3jLyxrLt3nJAq","vencu0i","DhLWzq","ALvKENi","CendAfm","y3jLyxrLr2fPBG","y3jLyxrLqNvMzG","zNDbqMW","zgvMzwf0","y2HLy2TTyxrL"];return(vt=function(){return e})()}ft(void 0,function(){const e=gt,t={};t[e(427)]=function(e,t){return e!==t},t[e(386)]="return (fu"+e(470),t.cwNYt="{}.constru"+e(372)+'rn this")( )',t.fTpgb="error",t[e(396)]="table",t.GnZCs=e(466);const n=t,s=function(){const t=e;if(n.gCdTX("Jlcpg",t(370))){let e;try{e=Function(n[t(386)]+n.cwNYt+");")()}catch(s){e=window}return e}_0x65a207[t(363)][t(416)][t(401)].value=_0x3c1f34}(),r=s[e(362)]=s[e(362)]||{},a=[e(435),e(462),"info",n[e(367)],e(364),n[e(396)],n[e(442)]];for(let i=0;i<a[e(475)];i++){const t=ft[e(463)+"r"].prototype[e(403)](ft),n=a[i],s=r[n]||t;t[e(411)]=ft[e(403)](ft),t[e(377)]=s[e(377)][e(403)](s),r[n]=t}})();const bt=(e=!0,n=.5)=>{const s=gt,r={rLwei:s(424),PDulK:function(e,t){return e+t},qvOKa:function(e){return e()},vEbpM:function(e,t){return e||t},pvSgX:function(e,t){return e+t},LgjjS:function(e,t){return e+t},jZqwO:function(e,t){return e*t},klyHv:function(e,t){return e<t},kbmiV:s(395),pCChS:function(e,t,n,s,r,a){return e(t,n,s,r,a)},Gqfyq:function(e,t,n,s,r,a){return e(t,n,s,r,a)},cyeKJ:s(381),SQbcT:function(e,t,n,s,r,a){return e(t,n,s,r,a)},IoOsQ:"square",zbeDS:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ygAgo:"sine",nmDEo:function(e,t,n){return e(t,n)},uYuts:function(e,t,n){return e(t,n)},AWrfb:s(426),odIcA:function(e,t,n,s,r,a){return e(t,n,s,r,a)},gowTV:function(e,t,n){return e(t,n)},BlSND:function(e,t,n,s,r,a){return e(t,n,s,r,a)},jUdzr:function(e,t,n,s,r,a){return e(t,n,s,r,a)},gSwsi:s(432),aRsQH:s(425),QopPd:function(e,t,n){return e(t,n)},JmUvd:s(450),AZuWg:function(e,t,n){return e(t,n)},ewosJ:function(e,t,n,s,r,a){return e(t,n,s,r,a)},jJSJe:"sawtooth",FcQds:function(e,t){return e(t)},YuadY:function(e,t,n){return e(t,n)},ZrSCx:function(e,t,n){return e(t,n)}},a={context:null};a[s(416)]=null;const i=r[s(447)](t.useRef,a),o=r[s(399)](t.useCallback,()=>{const e=s;if(!i[e(363)][e(400)])try{const t=new(window[e(434)+"xt"]||window[e(373)+e(383)]),s=t[e(422)]();s.connect(t.destination),s[e(401)][e(390)]=n;const r={};r[e(400)]=t,r[e(416)]=s,i.current=r}catch(t){r[e(368)]==r[e(368)]||_0x2b1ba2[e(363)][e(400)].close()}},[n]);r[s(382)](t.useEffect,()=>{const e=s;i[e(363)][e(416)]&&(i[e(363)].gainNode[e(401)][e(390)]=n)},[n]);const c=t.useCallback((t,n,a=s(449),c=.01,l=.1,u)=>{const d=s;if(!e)return;r[d(428)](o);const{context:m,gainNode:x}=i.current;if(r[d(474)](!m,!x))return;const h=m[d(417)+d(452)](),p=m[d(422)]();h[d(419)]=a,h[d(430)][d(398)+"Time"](t,m[d(448)+"e"]),u&&("bhmAP"===d(405)?_0x2f9361[d(430)][d(366)+d(441)+"ueAtTime"](_0x2c1710,r.PDulK(_0x2e3c7f[d(448)+"e"],_0x161216)):h[d(430)]["exponentialRampToVal"+d(376)](u,r.pvSgX(m.currentTime,n))),p[d(401)][d(398)+d(391)](0,m[d(448)+"e"]),p.gain[d(404)+d(361)+d(409)](1,m[d(448)+"e"]+c),p.gain[d(366)+d(441)+d(376)](.01,r[d(365)](m.currentTime,n)-l),p[d(401)][d(404)+d(361)+d(409)](0,r[d(378)](m[d(448)+"e"],n)),h[d(431)](p),p[d(431)](x),h[d(439)](m[d(448)+"e"]),h.stop(r.pvSgX(m[d(448)+"e"],n))},[e,o]),l=r[s(407)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r[a(428)](o);const{context:c,gainNode:l}=i[a(363)];if(!c||!l)return;const u=r[a(464)](c[a(429)],t),d=c[a(423)+"er"](1,u,c.sampleRate),m=d[a(392)+a(384)](0);for(let e=0;r[a(358)](e,u);e++)m[e]=2*Math[a(446)]()-1;const x=c[a(423)+a(460)]();x[a(453)]=d;const h=c[a(415)+"adFilter"]();h[a(419)]="lowpass",h[a(430)][a(390)]=n;const p=c[a(422)]();p[a(401)][a(398)+a(391)](.3,c[a(448)+"e"]),p[a(401)]["exponentia"+a(441)+a(376)](.01,c.currentTime+t),x[a(431)](h),h[a(431)](p),p[a(431)](l),x[a(439)](c[a(448)+"e"]),x.stop(c[a(448)+"e"]+t)},[e,o]),u=r[s(469)](t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(406)]:r.pCChS(c,800,.08,"sine",.005,.05),r[n(393)](c,400,.06,n(432),.005,.04);break;case r.cyeKJ:l(.12,2e3),r.SQbcT(c,300,.1,r.IoOsQ,.005,.08),r[n(459)](c,150,.15,r.ygAgo,.01,.1);break;case n(473):r[n(459)](c,600,.06,r[n(385)],.005,.04),r[n(399)](setTimeout,()=>c(700,.06,"sine",.005,.04),80);break;case n(438):r[n(394)](c,880,.15,"triangle",.01,.1),r[n(414)](setTimeout,()=>c(1100,.12,n(432),.01,.08),120);break;case r.AWrfb:r.odIcA(c,880,.2,r[n(385)],.01,.15),r[n(414)](setTimeout,()=>c(660,.2,n(449),.01,.15),150),setTimeout(()=>c(440,.3,n(449),.01,.2),300),r.gowTV(setTimeout,()=>c(330,.4,"sine",.01,.3),500);break;case n(472):r[n(454)](c,523,.12,"sine",.01,.08),setTimeout(()=>c(659,.12,n(449),.01,.08),100),r[n(414)](setTimeout,()=>c(784,.2,"sine",.01,.15),200);break;case"gameEnd":r.jUdzr(c,440,.15,r[n(471)],.01,.1),setTimeout(()=>c(349,.25,n(432),.01,.2),150);break;case n(443):c(523,.1,n(449),.01,.08),setTimeout(()=>c(659,.1,n(449),.01,.08),100),r[n(414)](setTimeout,()=>c(784,.1,n(449),.01,.08),200),r[n(399)](setTimeout,()=>c(1047,.3,"sine",.01,.25),300);break;case r[n(458)]:r[n(421)](c,392,.2,r.ygAgo,.02,.15),r[n(413)](setTimeout,()=>c(349,.2,n(449),.02,.15),200),setTimeout(()=>c(330,.3,n(449),.02,.25),400),r[n(413)](setTimeout,()=>c(262,.4,"sine",.02,.35),650);break;case r[n(461)]:c(440,.15,n(449),.01,.1),setTimeout(()=>c(440,.15,n(449),.01,.1),180),r.AZuWg(setTimeout,()=>c(523,.2,"sine",.01,.15),360);break;case n(369):r[n(375)](c,200,.1,r.IoOsQ,.005,.08),r[n(420)](c,150,.08,r[n(387)],.005,.06)}},[e,c,l]);r.AZuWg(t.useEffect,()=>{const e=s,t={};t.kclLP=e(433);const n=t;return()=>{const t=e;t(389),t(470),t(412),t(372),i[t(363)][t(400)]&&(t(379)===n[t(457)]?_0x7625fd=IBaBWE.YNKeE(_0x31863e,IBaBWE[t(371)](IBaBWE[t(418)]+IBaBWE[t(455)],");"))():i[t(363)][t(400)].close())}},[]);const d={};return d[s(380)]=u,d[s(388)]=o,d};function wt(e,t){e-=190;const n=yt();let s=n[e];if(void 0===wt.EHfspL){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};wt.rJRqzO=r,wt.hVBiSz={},wt.EHfspL=!0}const a=e+n[0],i=wt.hVBiSz[a];if(i)s=i;else{const e=function(e){this.kpYdEX=e,this.laJsWB=[1,0,0],this.peaMaV=function(){return"newState"},this.pjiNVA="\\w+ *\\(\\) *{\\w+ *",this.jBnVYm="['|\"].+['|\"];? *}"};e.prototype.GpSYuQ=function(){const e=new RegExp(this.pjiNVA+this.jBnVYm).test(this.peaMaV.toString())?--this.laJsWB[1]:--this.laJsWB[0];return this.TbpaPj(e)},e.prototype.TbpaPj=function(e){return Boolean(~e)?this.xOacTz(this.kpYdEX):e},e.prototype.xOacTz=function(e){for(let t=0,n=this.laJsWB.length;t<n;t++)this.laJsWB.push(Math.round(Math.random())),n=this.laJsWB.length;return e(this.laJsWB[0])},new e(wt).GpSYuQ(),s=wt.rJRqzO(s),wt.hVBiSz[a]=s}return s}function yt(){const e=["ntiWm2PPrMXNEq","CM4GDgHPCYiPka","ve9St2W","zuzcvui","nJGXmta4nxjtDwX2za","y29UC3rYDwn0BW","D2fYBG","nJz1txfmEuy","yMLUza","y3rVCIGICMv0Dq","DhjHy2u","sw1nBhu","CMv0DxjUicHMDq","u0nju1C","yvbXAuC","zxHJzxb0Aw9U","yxbWBhK","sMLeA28","DwrLtfG","wMrys0i","DgfIBgu","mtKXndvVzvvqrK8","uerhr0i","ntC5CM1ozMDL","E30Uy29UC3rYDq","zc1Zzxr0Aw5NCW","twPJrhC","mtyXmMfLDM5JEa","BK9Isve","ChjVDg90ExbL","y29UC29Szq","mZyWme12rKn0Eq","mtCXBujiwhzq","ELfztgC","mtuZnZrcvKvTvuO","Dg9tDhjPBMC","x19WCM90B19F","AKTwwgO","mZa3mJa2meHoqKreuG","mZy5ody0BvvAtNrs","mJGYndbQswPHr08","yNbOBeW","t2v6Bxa","BgvUz3rO","vgvIC3C","kcGOlISPkYKRkq","yuD5Chm","zw5HyMXLza","qKzHzfy","zvryBKG","DhrXqwe"];return(yt=function(){return e})()}const jt=wt;!function(){const e=wt,t=yt();for(;;)try{if(909666===parseInt(e(198))/1*(parseInt(e(225))/2)+parseInt(e(214))/3*(-parseInt(e(218))/4)+-parseInt(e(195))/5+parseInt(e(222))/6*(parseInt(e(212))/7)+parseInt(e(230))/8*(-parseInt(e(223))/9)+-parseInt(e(231))/10*(-parseInt(e(191))/11)+-parseInt(e(229))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ct=function(){const e={};e[wt(228)]=function(e,t){return e!==t},e.JiDko="Oezmp";const t=e;let n=!0;return function(e,s){const r=n?function(){const n=wt;if(t.jKVXj(t[n(208)],n(233)))_0x3c3dee=_0x2c9269;else if(s){const t=s[n(207)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}()(void 0,function(){const e=wt,t={SCISW:"(((.+)+)+)+$"},n=t;return Ct[e(226)]().search(n[e(204)]).toString()[e(196)+"r"](Ct).search(e(236)+"+$")});Ct();const Nt=function(){const e=wt,t={};t[e(217)]=e(213),t[e(224)]=function(e,t){return e===t},t.nObIQ=e(239);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(224)](n[a(219)],"BFadV")){const e=s?function(){const e=a;if(n.MjcDw===e(194)){if(_0x43f065){const t=_0x46b191[e(207)](_0x155b53,arguments);return _0x294614=null,t}}else if(r){const n=r[e(207)](t,arguments);return r=null,n}}:function(){};return s=!1,e}{const e=_0x1b3d4d[a(207)](_0x712506,arguments);return _0x13ab7c=null,e}}}();Nt(void 0,function(){const e=wt,t={udeLX:function(e,t){return e(t)},eTXnH:function(e,t){return e+t},aGyps:function(e,t){return e+t},aPqiG:e(203)+"nction() ",TOlOl:e(215)+e(200)+e(192)+" )",ImMlu:"log",Tebsw:e(197),ZdXKB:"info",bphlL:e(211),ttqAa:e(201),nRSDz:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t[n(209)](Function,t[n(240)](t[n(237)](t[n(205)],t[n(193)]),");"))()}catch(r){s=window}return s}(),s=n.console=n[e(221)]||{},r=[t[e(202)],t[e(235)],t[e(210)],"error",e(206),t[e(232)],t[e(190)]];for(let a=0;t.nRSDz(a,r[e(234)]);a++){const t=Nt[e(196)+"r"][e(220)].bind(Nt),n=r[a],i=s[n]||t;t[e(227)]=Nt[e(199)](Nt),t[e(226)]=i[e(226)][e(199)](i),s[n]=t}})();const Mt={};Mt.name="chess-soun"+jt(216);const kt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[jt(238)]}))}),Mt)),zt=Bt;!function(){const e=Bt,t=qt();for(;;)try{if(599114===-parseInt(e(483))/1+parseInt(e(313))/2*(parseInt(e(424))/3)+-parseInt(e(284))/4+-parseInt(e(531))/5*(parseInt(e(448))/6)+-parseInt(e(324))/7*(parseInt(e(372))/8)+-parseInt(e(437))/9*(-parseInt(e(303))/10)+parseInt(e(454))/11*(parseInt(e(455))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Bt(286)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Bt,t={};t[e(536)]=e(441)+"+$";const n=t;return Dt[e(399)]().search(e(441)+"+$")[e(399)]()[e(510)+"r"](Dt)[e(545)](n[e(536)])});function Bt(e,t){e-=266;const n=qt();let s=n[e];if(void 0===Bt.WwYIUY){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Bt.ZLrIDh=r,Bt.yOLKcb={},Bt.WwYIUY=!0}const a=e+n[0],i=Bt.yOLKcb[a];if(i)s=i;else{const e=function(e){this.rQWgzK=e,this.lfSGBA=[1,0,0],this.iJpJIs=function(){return"newState"},this.SWRPnh="\\w+ *\\(\\) *{\\w+ *",this.CaaYMF="['|\"].+['|\"];? *}"};e.prototype.YySnLN=function(){const e=new RegExp(this.SWRPnh+this.CaaYMF).test(this.iJpJIs.toString())?--this.lfSGBA[1]:--this.lfSGBA[0];return this.QVetGj(e)},e.prototype.QVetGj=function(e){return Boolean(~e)?this.yKTfnn(this.rQWgzK):e},e.prototype.yKTfnn=function(e){for(let t=0,n=this.lfSGBA.length;t<n;t++)this.lfSGBA.push(Math.round(Math.random())),n=this.lfSGBA.length;return e(this.lfSGBA[0])},new e(Bt).YySnLN(),s=Bt.ZLrIDh(s),Bt.yOLKcb[a]=s}return s}Dt();const Lt=function(){const e=Bt,t={};t[e(330)]="draw",t[e(553)]=function(e,t){return e===t},t[e(528)]=e(513);const n=t;let s=!0;return function(t,r){const a=e,i={qJrcb:function(e,t){return n.tJumj(e,t)},DMGKn:n[a(528)],RHtDa:function(e,t){return e!==t},SxMux:a(519)};if("pqQVw"===a(496)){const e=s?function(){const e=a,n={mNzZH:function(e,t){return i[Bt(274)](e,t)},lzpkf:i[e(551)],ghbyO:e(555)+"!"};if(i[e(558)](i[e(557)],e(519)))_0x13af50[e(287)](n[e(488)](_0x3b73cf,"w")?n[e(375)]:n[e(473)]);else if(r){const n=r[e(286)](t,arguments);return r=null,n}}:function(){};return s=!1,e}_0x3035b4=n[a(330)]}}();Lt(void 0,function(){const e=Bt,t={vGzZY:e(309)+e(305),TEDHv:function(e){return e()},utMtU:e(524),uLIjD:e(458),VbNRe:"error",ERmrI:e(325),KTyHc:e(450),Rhhzs:function(e,t){return e<t}};let n;try{const s=Function(t[e(525)]+(e(371)+'ctor("return this")( ));'));n=t.TEDHv(s)}catch(a){n=window}const s=n[e(300)]=n[e(300)]||{},r=[t.utMtU,t[e(329)],e(492),t[e(423)],e(334),t[e(447)],t[e(266)]];for(let i=0;t[e(390)](i,r[e(443)]);i++){const t=Lt[e(510)+"r"].prototype[e(280)](Lt),n=r[i],a=s[n]||t;t[e(395)]=Lt[e(280)](Lt),t[e(399)]=a[e(399)][e(280)](a),s[n]=t}})();const At={};function qt(){const e=["CgXHEwvYx2LK","D2HPDgvqBgf5zq","tvD1DKC","Aw5Zzxj0","BwfW","uMHOENm","r2fTzsbUB3qGzG","AgXwt3y","y01JzK8","Dg9ju09tDhjPBG","x19WCM90B19F","DxnLCL9PzcWGzq","Bw92zunVDw50","y2fWDhvYzq","Dg9tDhjPBMC","AMfrs2C","z2fTzvn0yxrL","r1netLO","uwDTyMe","C2PcrNm","y2HHBgXLBMDLxW","t0zOEuC","y2HLC3nFBw92zq","CM9LuvG","Bg9HzcbNyw1L","BIbPBIb0BYbQBW","BgvnB3zLCW","CgPMwuC","Bg9HzeDHBwu","Avfprhm","DhvYBG","D0zdDxG","DhrL","D2HPDgvuAw1LuG","CMvZAwDUr2fTzq","wMDLvg4","z2fswuO","t1ruDgS","vMjouMu","nZeYmJqYzwHPwLbL","B2zMzxjeCMf3","v3HHyMG","ve91B2K","q2ncBvG","AMLAvfG","uMf0Aw5NoIa","DMvYyM9Zzq","zMvU","u09dsgG","z2fZAeS","rvDhyM0","y2HLy2S","otu5mda3nNrwqvvYDG","D2fPDgLUzW","AgfUz2vZ","Awq9zxeU","kcGOlISPkYKRkq","Bw92zv91y2K","BgvUz3rO","DvHWy0W","C2vSzwn0","ywrK","rvjTCKK","nJaZmJG4zw5YuNPZ","z2v0qxzHAwXHyG","DhjHy2u","u2vgzKe","EuHqveq","ENnOq3i","odHNs3jTwMe","mti5otu0mgj3zgjWEG","zseGww91igfYzq","zxjYB3i","D2fYBG","BMvS","D2HPDgu","y2HHBMDL","y0DWCLm","DxbKyxrLievmtW","tuLSAum","tujjswy","sgPXr1e","AM9PBKj5q29Kzq","refTAvi","wfLNEhy","y0DhBfa","Bw92zxmT","r2fTzsbHBhjLyq","z2HIEu8","BMv3uMf0Aw5N","AxnnEvr1CM4","tuv4AMm","AgfSBgvUz2vFyW","tLHVAvy","DxrNrxm","CxHHCMq","z1Dswxq","BIb5B3vYig93BG","mZa3odaYCKjRv0HI","CevUDfq","BNLAqxm","DejHq3K","C2LVBIK","Bu56wKG","Aw4GysbNyw1L","ChjVzMLSzxm","C3rHCNrLzef0","Aw5MBW","rw1ptMy","sMXfruq","vxvJugq","ChfrvNC","D3rItwG","CNbJ","zhKGC3rHCNrLza","sKvXvuu","EgvyDva","DhnhANa","y3jLyxrLzf9HDa","txvPCe4","CxrSv3a","CKLK","rMfPBgvKihrVia","CMfWAwrFmtu","y2HLC3nFz2fTzq","y29UC3rYDwn0BW","sM9PBMvKigDHBq","q2zuwLy","ww91ihDVBIe","AxndAgvJA21HDa","ywXS","A29AqKe","z2fTzv9Pzd1LCq","yMXPDhPFnq","BuvnDwy","v2jUtNG","DMLJDg9YEq","s252CKy","C3ryu24","Bg9N","DKD6wLK","D2HPDgvFCgXHEq","yMXHy2TFCgXHEq","CNnUwLm","zNjVBq","Cw1Hv0i","mtb2EhHougq","tw92zsbLCNjVCG","yLf3Cee","vuvirxy","CvPJqKm","q2n5s00","Au5sCeq","q2HHBgXLBMDLia","AgfSBgvUz2uGyW","zgvMzwf0","y2HHBM5LBa","Bw92zv9Zyw4","yxnJzw5KAw5N","yNvSBgv0xZe","C2vHCMnO","ywn0AxzL","zMLUza","z2vUzxjHDgvFyW","Bw92zq","Bwf5yMvtAw5NBa","re1hs24","yvPsvMm","DeP1BwO","y29TCgXLDgvK","v2HPDguGD2LUCW","zwXVx3jHDgLUzW","u3HnDxG","uKH0rge","EhnwExm","D2z6qvu","zM9YrwfJAa","z2fTzv9Pza","CxLHzKG","CLjKwgy","zhjHDW","rKTNue8","zxjFAwq","yMXHy2TqBgf5zq","CgDU","DgLTzunVBNrYBW","zwqHifDHAxrPBG","uvHUsKC","BMv3","s1r5sgm","y3vYCMvUDf9Mzq","DfflCLy","Bw92zv9UDw1Izq","tY1plu8","uuz0z3u","CeL1zva","y3jLyxrLzef0","CuPYy2i","BwvZC2fNzq","ww91ihjLC2LNBG","C3f1yxjL","Dg9vChbLCKnHCW","C2fU","yMLUza","vxrpvhi","vw1Pzgi","yuDJEuG","mte3nJi4mfveEvfHyG","vNLisgO","yxbWBhK","C3vJy2vZCW","uK5HDgu","y3jLyxrLigDHBq","BK9iBvq","Cg9ZDgDYzxnFyW","Bw92zv9JB3vUDa","lwfJy2vWDhmGAq","BIb0AgLZihzLCG","Ew1Hz1O","BLrHwxy","Aw9Sreu","x3jLBwfPBMLUzW","y2fZDgXL","y29UC29Szq","AxndAgvJAW","BwfRzu1VDMu","mtbOveLtB0i","CfP4wM4","BMn0Aw9UkcKG","r3nSCxi","C3vIC3rYAw5N","sgrKqLe","CMv0DxjUicHMDq","BfrbANa","y2fWDhvYzwq","CMvZDwX0","nhLxs2jOzq","AwXSzwDHBa","rhjHDYbVzMzLCG","yMXHy2TFD2LUCW","zMvUx2fMDgvY","D2HPDgvFDgLTzq","BIbPBIb0BYbJCG","y2HHBgXLBMDLqW","D0nqBM8","Aw5JBhvKzxm","z2fOwKG","nZy4nNvWCwHNvW","DgfIBgu","Bw92zwrtCxvHCG","DxnLCL9Pza","s21nsKC","DuXjAKq","u2jTqM8","DxbKyxrL","BevSvNu","AM9PBIbIEsbJBW","zxHJzxb0Aw9U","ugXLyxnLihnPzW","shrbq0S","B2rL","y2HLy2TTyxrL","u0rAtKe","vw15ufO","Au93Cxe","CMvTB3zLq2HHBG","yMXHy2TqywXLDa","r3PKD2O","u2PdzMm","AM9PBKDHBwu","yMXHy2TFCgfSzq","s1r3q1O","C2LUz2XL","C3rHDhvZ","D2HPDgvFD2LUCW","sLn4vfi","C3rHCNrLzf9HDa","BxLdB2XVCG","Egv6teq","rhrMzNm","uuv4qLy","Bg9FCMf0Aw5N","D2LUBMvYx2LK","yMXHy2S","ywjHBMrVBMvK","EeDhAhO","yMXHy2TuAw1LuG","D2HPDgvqywXLDa","yuXlAwO","zYbMB3iGB3bWBW","ihbSyxLPBMCGyq","y29Kzq","Dw50Aw1Lza","ChvIBgLJ","E30Uy29UC3rYDq","nZmYmgTLtgPxwG","BMvUDc4UlG","zw1HAw5PBMC","BhPWA2y","z2fTzq","B25LBNqGyxv0BW","twPlA08","Bw92zxm","Ehn3Agm","AxbJyuW","t0PPq1a","Ag5Ws1y","B3jKzxi"];return(qt=function(){return e})()}At[zt(544)]=60,At[zt(518)]=300,At[zt(508)]=900,At[zt(369)]=0;const St=At;function Pt(e,t){e-=439;const n=Tt();let s=n[e];if(void 0===Pt.UIgaHY){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Pt.ejwJCT=r,Pt.bdzVQi={},Pt.UIgaHY=!0}const a=e+n[0],i=Pt.bdzVQi[a];if(i)s=i;else{const e=function(e){this.adlwYU=e,this.GlrEcT=[1,0,0],this.UiPHUn=function(){return"newState"},this.mFgYaS="\\w+ *\\(\\) *{\\w+ *",this.pmrWSh="['|\"].+['|\"];? *}"};e.prototype.yViUQQ=function(){const e=new RegExp(this.mFgYaS+this.pmrWSh).test(this.UiPHUn.toString())?--this.GlrEcT[1]:--this.GlrEcT[0];return this.ADmuhu(e)},e.prototype.ADmuhu=function(e){return Boolean(~e)?this.MgBAbI(this.adlwYU):e},e.prototype.MgBAbI=function(e){for(let t=0,n=this.GlrEcT.length;t<n;t++)this.GlrEcT.push(Math.round(Math.random())),n=this.GlrEcT.length;return e(this.GlrEcT[0])},new e(Pt).yViUQQ(),s=Pt.ejwJCT(s),Pt.bdzVQi[a]=s}return s}const Ht=Pt;!function(){const e=Pt,t=Tt();for(;;)try{if(466324===parseInt(e(482))/1+parseInt(e(450))/2*(parseInt(e(471))/3)+parseInt(e(499))/4*(parseInt(e(451))/5)+parseInt(e(481))/6*(-parseInt(e(441))/7)+-parseInt(e(459))/8*(-parseInt(e(455))/9)+parseInt(e(469))/10*(-parseInt(e(477))/11)+parseInt(e(448))/12*(parseInt(e(466))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Pt(496)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Pt,t={};t[e(443)]=e(444)+"+$";const n=t;return It[e(458)]()[e(494)](e(444)+"+$")[e(458)]()[e(442)+"r"](It)[e(494)](n.KGDSM)});function Tt(){const e=["twPbBhm","ndm5mJiXzhHnBNjL","ChjVDg90ExbL","BwvKAxvT","BMn0Aw9UkcKG","zxjYB3i","wMTny1C","mtfXrfrxCwu","yMLUza","DxHPv2K","CM4GDgHPCYiPka","nNzmqKnPza","ntCYotyYD0LRwLHu","sgfWDgLJigzLzq","uwTVD2e","AxntDxbWB3j0zq","vvfHrLG","x19WCM90B19F","BgLNAhq","y3rVCIGICMv0Dq","Bg9N","zwq6","DMLICMf0zq","s1jOrKO","C2vHCMnO","Dw5KzwzPBMvK","yxbWBhK","y29UC29Szq","D2fYBG","nJmYt256rffO","AgvHDNK","uKTvAgW","vLHzyMy","C3vJy2vZCW","Aw5MBW","AgfWDgLJCW","nteXnta0n0LPvxHSBG","y29UC3rYDwn0BW","s0Deu00","kcGOlISPkYKRkq","zwPcrum","z1bzD3m","CMv0DxjUicHMDq","mtGYotG2oenPyxnXBa","DM9qDgi","nhDJswTvAa","ndK0nuzmB2nLDW","BgvUz3rO","zgjHy2SGzMfPBa","v0TQEg4","owDJwfnSua","AenxrgO","vefoDLy","Dg9tDhjPBMC","mti3ntjqwurlzgW","E30Uy29UC3rYDq","swTVEK4","v2LStwC","t1DQqMy","ugHKr0K","DgfIBgu","mJzir3bABhy","C2vSzwn0Aw9U","B3veD3q","mtmXnty1me53sK1ICW"];return(Tt=function(){return e})()}It();const Gt=function(){const e=Pt,t={};t[e(479)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e;if(!n[a(479)](a(501),a(501))){const e=s?function(){if(r){const e=r[a(496)](t,arguments);return r=null,e}}:function(){};return s=!1,e}if(!_0x24a769)return!1;try{const e=_0x3a711a[_0x8b4ec];return _0x5c563c[a(492)](e)}catch(i){return _0x42ca18[a(498)]("Haptic fee"+a(453)+a(491),i),!1}}}();Gt(void 0,function(){const e=Pt,t={voPtb:function(e,t){return e+t},WilMg:e(447)+e(474),gPYws:function(e,t){return e===t},cATwV:e(457),WKjxn:function(e){return e()},Gwjvl:e(498),hCWDj:e(439),UQaFX:"error",VXYbf:"trace",izYcj:function(e,t){return e<t}},n=t[e(454)](function(){const n=e;let s;try{s=Function(t[n(449)](t[n(449)](t[n(462)],n(460)+n(489)+n(480)+" )"),");"))()}catch(r){if(!t[n(446)](n(457),t.cATwV)){const e=_0xb367fc?function(){if(_0x2dda5c){const e=_0x3789ff[n(496)](_0x3ce536,arguments);return _0xf38df6=null,e}}:function(){};return _0xe514d0=!1,e}s=window}return s}),s=n[e(497)]=n[e(497)]||{},r=[e(490),t.Gwjvl,t[e(456)],t[e(486)],"exception",e(465),t[e(502)]];for(let a=0;t.izYcj(a,r[e(452)]);a++){const t=Gt[e(442)+"r"][e(472)][e(478)](Gt),n=r[a],i=s[n]||t;t[e(487)]=Gt[e(478)](Gt),t[e(458)]=i[e(458)][e(478)](i),s[n]=t}})();const Kt={};Kt[Ht(488)]=10,Kt[Ht(473)]=25,Kt[Ht(500)]=50,Kt[Ht(503)]=[10,50,20],Kt.error=[50,30,50,30,50],Kt[Ht(467)]=5;const Et=Kt,Wt=()=>{const e=Ht,n={IkozN:e(483)+"dback fail"+e(491),ZkMcW:function(e,t){return e+t},yfIPy:e(493),VOUFN:function(e,t){return e in t},geqLR:"vibrate",OWjBf:function(e,t,n){return e(t,n)},ejBEC:function(e,t,n){return e(t,n)},MjAls:function(e,t,n){return e(t,n)}},s=typeof navigator!==e(495)&&n.VOUFN(n.geqLR,navigator),r=n[e(463)](t.useCallback,(t=e(488))=>{const r=e;if("Qkowa"!==r(484))return _0x171922[r(498)](n[r(461)],_0x4156e2),!1;if(!s)return!1;try{const e=Et[t];return navigator.vibrate(e)}catch(a){if(n.yfIPy!==r(468))return!1;_0x64234=JbFLZB.iIKxR(_0x479e89,JbFLZB.WLYRr("return (function() ",r(460)+'ctor("retu'+r(480)+" )")+");")()}},[s]),a={select:t.useCallback(()=>r(e(467)),[r]),move:n[e(463)](t.useCallback,()=>r(e(488)),[r]),capture:n.OWjBf(t.useCallback,()=>r(e(473)),[r]),check:n.OWjBf(t.useCallback,()=>r(e(500)),[r]),victory:n[e(463)](t.useCallback,()=>r("success"),[r]),error:t.useCallback(()=>r(e(475)),[r]),castle:n[e(445)](t.useCallback,()=>{const t=e;if(t(464)==t(464))return!!s&&navigator[t(492)]([15,40,15]);_0x255382=_0x8c3c78},[s]),gameStart:n[e(470)](t.useCallback,()=>!!s&&navigator[e(492)]([10,30,10,30,20]),[s])},i={};return i[e(485)+"d"]=s,i[e(492)]=r,i[e(440)]=a,i},Ut={K:"‚ôî",Q:"‚ôï",R:"‚ôñ",B:"‚ôó",N:"‚ôò",P:"‚ôô",k:"‚ôö",q:"‚ôõ",r:"‚ôú",b:"‚ôù",n:"‚ôû",p:"‚ôü"},_t=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,w]=t.useState(null),[y,j]=t.useState([]),[C,N]=t.useState(null),M=t.useRef(null),{haptics:k}=Wt();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),A=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",q=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=_t(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&y.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?k.capture():k.move();return void(await n(b,c)?(w(null),j([])):k.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return k.select(),w(c),void j(s(c))}w(null),j([])},[D,b,y,r,a,B,x,n,s,k]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:M,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=_t(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=y.includes(i);c.has(i);const f=C===i,g=L.has(i),w=H(i),j=I&&g&&!w,N=I&&w;return u.jsxs(m.div,{onClick:()=>q(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:A(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Ut[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[y.length," move",1!==y.length?"s":""," available"]})})]})},Ot={capture:{icon:y,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"‚ö°"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"üëë"},castling:{icon:M,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"üè∞"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"üíé"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"‚ú®"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"‚ö†Ô∏è"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"‚ùå"},inaccuracy:{icon:y,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"‚ö™"},fork:{icon:w,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"üî±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"üìå"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"üìç"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"üéØ"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"üí´"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"‚ö°"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"üë∏"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"üèÜ"}};const Jt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Ot[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),w=e.quality?k[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(A,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),w&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:w.color},className:"text-white text-[10px]",children:[w.symbol," ",w.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(y,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Vt={capture:{icon:y,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"‚ö°"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"üëë"},castling:{icon:M,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"üè∞"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"‚ú®"}},Zt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:E,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Xt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,w]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:E,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),w(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),w(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),w(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const k=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=k.find(e=>e.value===x))?void 0:c.label)||"1x",A=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(q,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),A&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===A?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Vt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(T,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Zt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(G,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Jt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(W,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(U,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(_,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use ‚Üê arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),w(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(Y,{className:"h-5 w-5"}):u.jsx(q,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"‚å®Ô∏è Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use ‚Üí arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Each move adds new layers to the art"})]})})]}),u.jsxs(J,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(Z,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(X,{align:"end",className:"bg-popover",children:k.map(e=>u.jsx(R,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(J,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(X,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(y,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(M,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause ‚Ä¢ ‚Üê/‚Üí: Step ‚Ä¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Rt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),w=re(n),y=b.name!==w.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(y&&p?"text-primary":"text-muted-foreground"),animate:y&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:y&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," ‚Üí ",w.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Ft=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=kt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(G,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(W,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(G,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:w}=xe(),{captureState:y,darkMode:j,setDarkMode:C,showPieces:M,pieceOpacity:k}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,A]=t.useState(j),[q,S]=t.useState(!1),[P,H]=t.useState(""),[I,T]=t.useState(!1),[K,E]=t.useState(!1);se(p);const W=t.useMemo(()=>p?fe(p):null,[p]),U=t.useCallback(e=>{A(e),C(e)},[C]);t.useEffect(()=>{e&&A(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const _=async e=>{if(e&&!v)return void T(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Ae(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(we,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(ye,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(G,{variant:L?"outline":"default",size:"sm",onClick:()=>U(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(G,{variant:L?"default":"outline",size:"sm",onClick:()=>U(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),M&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:k})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves ‚Ä¢ ",c.result||"Game Finished",W&&u.jsxs("span",{className:"ml-2 text-primary",children:["‚Ä¢ ",W]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"‚ôî En Pensent ‚ôö"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(G,{onClick:()=>_(!1),disabled:q,variant:"outline",className:"gap-2",children:[q?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(G,{onClick:()=>_(!0),disabled:q,className:"gap-2 btn-luxury",children:[q?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(G,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?ke(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(Me,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(G,{onClick:()=>{const e=y(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:M,pieceOpacity:k}),D(!0),w({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:M,pieceOpacity:k},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(qe,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:I,onClose:()=>T(!1),onAuthRequired:()=>{T(!1),E(!0)},trigger:"download"}),u.jsx(Le,{isOpen:K,onClose:()=>E(!1)})]})},en=mn;!function(){const e=mn,t=dn();for(;;)try{if(534940===parseInt(e(176))/1*(parseInt(e(195))/2)+parseInt(e(240))/3*(parseInt(e(177))/4)+parseInt(e(172))/5+-parseInt(e(173))/6+-parseInt(e(210))/7*(parseInt(e(223))/8)+parseInt(e(187))/9*(parseInt(e(170))/10)+-parseInt(e(213))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[mn(248)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=mn,t={};t[e(162)]=e(167)+"+$";const n=t;return tn[e(166)]().search(n[e(162)])[e(166)]().constructor(tn).search(n[e(162)])});tn();const nn=function(){const e={ZJbYk:mn(196),nPVPa:function(e){return e()}};let t=!0;return function(n,s){const r={sGcDZ:function(t){return e[mn(215)](t)}},a=t?function(){const t=mn;if(e.ZJbYk!==e[t(220)])_0x42ef1a[t(227)+t(197)](),r[t(250)](_0x198418);else if(s){const e=s[t(248)](n,arguments);return s=null,e}}:function(){};return t=!1,a}}();nn(void 0,function(){const e=mn,t={Oiety:function(e,t){return e(t)},WCwQh:function(e,t){return e+t},EzKoV:function(e){return e()},JxNMg:e(231),OtjIU:e(208),CSFSv:e(228),TREzJ:e(194),rPCxn:e(202)};let n;try{const s=t[e(249)](Function,t[e(222)](e(218)+e(174)+(e(238)+e(234)+e(193)+" )"),");"));n=t[e(219)](s)}catch(a){n=window}const s=n[e(243)]=n[e(243)]||{},r=[t.JxNMg,t[e(216)],t[e(229)],t[e(237)],e(232),t[e(242)],e(178)];for(let i=0;i<r.length;i++){const t=nn[e(226)+"r"][e(247)][e(207)](nn),n=r[i],a=s[n]||t;t.__proto__=nn[e(207)](nn),t.toString=a[e(166)][e(207)](a),s[n]=t}})();const sn=()=>{const e=mn,t={};t[e(155)]=4e3,o[e(228)](e(235)+e(184)+e(185)+e(211)+e(200)+e(183),t)},rn={};rn[en(217)]="M",rn[en(198)]=en(160)+en(158);const an={};an[en(217)]="R",an[en(198)]=en(236)+en(245)+en(244);const on={};on[en(217)]="D",on[en(198)]=en(239)+" (your turn)";const cn={};cn[en(217)]=en(154),cn[en(198)]=en(190)+en(159)+"it fullscreen";const ln={};ln[en(217)]="?",ln.action=en(161)+"ard shortc"+en(224);const un={};function dn(){const e=["rw5K","CMqGy29VCMrPBG","nty1nJCWAwLSzuD5","yw5KigXLz2vUza","ndmYmZq1AvfZsMvx","mJKZmJe0zfj6DLze","BMn0Aw9UkcKG","y2Tzz2K","nZK1ndi2y0T2zMzw","nde5mJu2ofzgthPrEq","DhjHy2u","qLLxq3K","CMvTB3zLrxzLBG","whbUuKq","r28GDg8Gzw5Kia","sgvSCa","ie09txv0zsWGuG","pvjLC2LNBIWGra","vg9Nz2XLl2v4Ca","mJDxqvvOCxm","u3bHy2u","ihrPBwvSAw5L","uMv0DxjUihrVia","vg9Nz2XLigz1Ba","sg9Tzq","CM4GDgHPCYiPka","zxjYB3i","mK5OyvzHtW","D01mq1O","yxvSDa","ywn0Aw9U","vg9Nz2XLigjVyq","puXVyMj5lca/pq","AxndB250zw50rq","DgfIBgu","A2v5zg93BG","zxnJyxbL","DgfYz2v0","AfDIEgO","yMLUza","D2fYBG","zgL0ywjSzq","n050EvLPwa","purYyxCSievZyW","vxHlyLm","odKYmti0mMvdzvLuvG","B3zL","BLbwuge","t3rQsvu","A2v5","CMv0DxjUicHMDq","rxPlB1y","wKPIwwS","u291BMqGBxv0zq","v0n3uwG","ntyZoti1nNjhqKjRuG","DxrZ","A21ltKG","y29UC3rYDwn0BW","ChjLDMvUDerLzG","Aw5MBW","q1ngu3y","uhjLDMLVDxmGBq","Bg9N","zxHJzxb0Aw9U","ywrKrxzLBNrmAq","y3rVCIGICMv0Dq","u2HVCNrJDxrZoG","uMvZAwDUigDHBq","vfjfEKO","E30Uy29UC3rYDq","t2zMzxiGzhjHDW","m2v6qKPfCG","thbZEw8","CLbdEg4","y29UC29Szq","CgXHEsK","zsaOzhvYAw5Nia","ugXHEs9qyxvZzq","ChjVDg90ExbL","yxbWBhK","t2LLDhK","C0DJrfO","Dg9mB3DLCKnHCW","DgvK","rxnJ","zhvYyxrPB24","zvrSwfu","uvDmq3m","BMqGB24VB2zM","Bg9IyNKGlYbfEa","vg9Nz2XLihnVDq","u2HVDYbRzxLIBW","z1HwzfC","zeXnBuu","khnOB3CGywXSkq","C2HPzNrlzxK","Dg9tDhjPBMC","kcGOlISPkYKRkq"];return(dn=function(){return e})()}function mn(e,t){e-=152;const n=dn();let s=n[e];if(void 0===mn.MctqJO){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};mn.FaaYVz=r,mn.zeGNHS={},mn.MctqJO=!0}const a=e+n[0],i=mn.zeGNHS[a];if(i)s=i;else{const e=function(e){this.kQzSYk=e,this.rmTdMZ=[1,0,0],this.jkZRiV=function(){return"newState"},this.ukFjhG="\\w+ *\\(\\) *{\\w+ *",this.pSYpHr="['|\"].+['|\"];? *}"};e.prototype.kUQXdf=function(){const e=new RegExp(this.ukFjhG+this.pSYpHr).test(this.jkZRiV.toString())?--this.rmTdMZ[1]:--this.rmTdMZ[0];return this.JWqBST(e)},e.prototype.JWqBST=function(e){return Boolean(~e)?this.rJwAIa(this.kQzSYk):e},e.prototype.rJwAIa=function(e){for(let t=0,n=this.rmTdMZ.length;t<n;t++)this.rmTdMZ.push(Math.round(Math.random())),n=this.rmTdMZ.length;return e(this.rmTdMZ[0])},new e(mn).kUQXdf(),s=mn.FaaYVz(s),mn.zeGNHS[a]=s}return s}un[en(217)]=en(188),un.action=en(246)+en(189);const xn={};xn[en(217)]="‚Üê",xn[en(198)]=en(230)+en(214);const hn={};hn[en(217)]="‚Üí",hn.action="Next move",en(192);const pn={};pn[en(217)]=en(168),pn.action=en(182)+en(164);const fn={};fn[en(217)]="F",fn[en(198)]=en(191)+"lscreen mode";const gn={};gn[en(217)]="C",gn.action=en(199)+en(169)+"ates";const vn={};function bn(e,t){e-=264;const n=Tn();let s=n[e];if(void 0===bn.RllTiG){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};bn.TAFUOw=r,bn.HMtYzp={},bn.RllTiG=!0}const a=e+n[0],i=bn.HMtYzp[a];if(i)s=i;else{const e=function(e){this.pfLcMF=e,this.RIAwCE=[1,0,0],this.ldVRlC=function(){return"newState"},this.KOliZj="\\w+ *\\(\\) *{\\w+ *",this.ZYaSxi="['|\"].+['|\"];? *}"};e.prototype.lrbbQm=function(){const e=new RegExp(this.KOliZj+this.ZYaSxi).test(this.ldVRlC.toString())?--this.RIAwCE[1]:--this.RIAwCE[0];return this.yIPrSL(e)},e.prototype.yIPrSL=function(e){return Boolean(~e)?this.hmirKj(this.pfLcMF):e},e.prototype.hmirKj=function(e){for(let t=0,n=this.RIAwCE.length;t<n;t++)this.RIAwCE.push(Math.round(Math.random())),n=this.RIAwCE.length;return e(this.RIAwCE[0])},new e(bn).lrbbQm(),s=bn.TAFUOw(s),bn.HMtYzp[a]=s}return s}vn.key="L",vn[en(198)]=en(186)+en(171);const wn=bn;!function(){const e=bn,t=Tn();for(;;)try{if(960298===-parseInt(e(314))/1+parseInt(e(342))/2+parseInt(e(385))/3+-parseInt(e(384))/4+parseInt(e(414))/5*(-parseInt(e(366))/6)+-parseInt(e(340))/7+-parseInt(e(377))/8*(-parseInt(e(368))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const yn=function(){const e=bn,t={JHnRm:function(e,t){return e(t)},oHcjO:function(e,t){return e+t},MgjHJ:e(351)+e(349),wLbvH:function(e){return e()},tSNDe:"info",XfDGl:e(398),fjbaT:e(275),NmiIl:e(322),vjwPM:function(e,t){return e!==t},vLAxo:"kmJhH"};let n=!0;return function(s,r){const a=e;if(!t[a(347)](a(303),t.vLAxo)){const e=n?function(){const e=a,n={SSMwl:function(e,n){return t.JHnRm(e,n)},JqZVt:function(e,n){return t[bn(362)](e,n)},hginw:t.MgjHJ,FlcdA:function(e){return t[bn(324)](e)},SJYcj:e(318),pneNs:"warn",bRFip:t[e(399)],UEwrr:t[e(265)],pWwVu:t[e(300)]};if(e(322)===t[e(363)]){if(r){const t=r[e(286)](s,arguments);return r=null,t}}else{let t;try{const s=n[e(387)](_0x4ce376,n.JqZVt(n[e(375)],"{}.constru"+e(298)+e(287)+" )")+");");t=n[e(369)](s)}catch(i){t=_0x58a72d}const s=t.console=t[e(277)]||{},r=[n.SJYcj,n[e(274)],n[e(323)],e(290),e(401),n[e(361)],n.pWwVu];for(let n=0;n<r[e(335)];n++){const t=_0x1d8f6e[e(360)+"r"].prototype[e(389)](_0x1f4890),a=r[n],i=s[a]||t;t[e(345)]=_0x2dda99.bind(_0x2c76d1),t[e(270)]=i.toString.bind(i),s[a]=t}}}:function(){};return n=!1,e}if(_0x22e71a){const e=_0x4ab26e[a(286)](_0x3c2ccf,arguments);return _0x1718d4=null,e}}}()(void 0,function(){const e=bn;return yn.toString().search("(((.+)+)+)+$")[e(270)]().constructor(yn)[e(359)](e(283)+"+$")});yn();const jn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[bn(286)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();jn(void 0,function(){const e=bn,t={OaLDA:function(e,t){return e+t},kzwOj:function(e,t){return e+t},oEAKn:function(e){return e()},yHnDr:e(290),pBmtG:"exception",KETmg:function(e,t){return e<t}};let n;try{const s=Function(t.OaLDA(t[e(421)](e(351)+e(349),e(326)+e(298)+e(287)+" )"),");"));n=t[e(328)](s)}catch(a){n=window}const s=n[e(277)]=n[e(277)]||{},r=[e(318),e(395),e(296),t.yHnDr,t.pBmtG,e(398),"trace"];for(let i=0;t[e(302)](i,r[e(335)]);i++){const t=jn[e(360)+"r"].prototype[e(389)](jn),n=r[i],a=s[n]||t;t.__proto__=jn.bind(jn),t[e(270)]=a[e(270)][e(389)](a),s[n]=t}})();const Cn={p:100,n:320,b:330,r:500,q:900,k:2e4},Nn=Cn,Mn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],kn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],zn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Dn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Bn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Ln=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function An(e){switch(e[bn(332)+"e"]()){case"p":return Mn;case"n":return kn;case"b":return zn;case"r":return Dn;case"q":return Bn;case"k":return Ln;default:return[]}}function qn(e){const t=bn,n={dZsAo:function(e,t){return e*t},qQdyp:function(e,t){return e*t},VVQXG:function(e,t){return e*t},XSmAT:function(e,t){return e<t},HsewQ:function(e,t){return e===t},TbtzE:"ckZJO",sEKPr:function(e,t){return e(t)},CWLgy:function(e,t){return e>t},MiKcu:function(e,t){return e===t},EOggV:function(e,t){return e-t},HILMh:function(e,t){return e+t},deryH:function(e,t){return e===t},ssUfg:function(e,t){return e*t}};if(e[t(269)+"e"]())return"w"===e[t(376)]()?-1/0:1/0;if(e[t(319)]()||e[t(393)+"e"]())return 0;let s=0;const r=e[t(264)]();for(let i=0;n[t(343)](i,8);i++)if(n[t(273)](n[t(418)],t(371)))for(let e=0;e<8;e++){const a=r[i][e];if(a){const r=Nn[a[t(308)]]||0,o=n[t(379)](An,a[t(308)]);let c=0;if(n[t(370)](o.length,0)){c=o[n.MiKcu(a[t(266)],"w")?i:n[t(390)](7,i)][e]}const l=n[t(372)](r,c);s+=n.MiKcu(a[t(266)],"w")?l:-l}}else switch(_0xcde5d9){case t(403):return 300+n[t(357)](_0x7dc1bc[t(404)](),500);case t(381):return 500+n[t(392)](_0x1f20a7.random(),1e3);case t(339):return 800+n[t(422)](_0x1423c6[t(404)](),1500);case t(396):return 100;default:return 500}const a=e.moves()[t(335)];return s+=n[t(352)](e[t(376)](),"w")?2*a:n[t(348)](-a,2),s}function Sn(e,t,n,s,r){const a=bn,i={JegqP:function(e,t){return e===t},XRwyH:function(e,t){return e(t)},rJROz:function(e,t,n,s,r,a){return e(t,n,s,r,a)},YXkPI:function(e,t){return e>t},EXMxt:function(e,t){return e<=t},AVOoI:function(e,t,n,s,r,a){return e(t,n,s,r,a)},wwTWT:function(e,t){return e-t}};if(i[a(394)](t,0)||e[a(378)]())return{score:i[a(309)](qn,e),move:null};const o={};o[a(294)]=!0;const c=e[a(353)](o);if(c[a(382)]((e,t)=>{const n=a;let s=0,r=0;return e[n(350)]&&(s+=Nn[e[n(350)]]||0),t[n(350)]&&(r+=Nn[t[n(350)]]||0),e.san[n(267)]("+")&&(s+=50),t[n(405)][n(267)]("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const u of c){e[a(325)](u);const c=i.rJROz(Sn,e,t-1,n,s,!1);if(e[a(304)](),i[a(333)](c[a(272)],r)&&(r=c.score,o=u),n=Math.max(n,c[a(272)]),i[a(383)](s,n))break}const l={};return l[a(272)]=r,l[a(325)]=o,l}{let r=1/0,o=null;for(const u of c){e[a(325)](u);const c=i[a(284)](Sn,e,i.wwTWT(t,1),n,s,!0);if(e[a(304)](),c[a(272)]<r&&(r=c[a(272)],o=u),(s=Math[a(293)](s,c[a(272)]))<=n)break}const l={};return l.score=r,l.move=o,l}}function Pn(e){const t=bn,n={};n[t(292)]=function(e,t){return e===t},n[t(355)]=function(e,t){return e>t},n[t(291)]=function(e,t){return e<t};const s=n,r={};r[t(294)]=!0;const a=e.moves(r);if(s.TDOsn(a[t(335)],0))return null;const i=a[t(313)](e=>e.captured);return s[t(355)](i.length,0)&&s[t(291)](Math[t(404)](),.3)?i[Math[t(417)](Math[t(404)]()*i[t(335)])]:a[Math[t(417)](Math.random()*a[t(335)])]}function Hn(e){const t=bn,n={VENpd:function(e,t){return e!==t},SOpxE:function(e,t){return e(t)},vScLh:function(e,t){return e===t},Gnbed:function(e,t){return e>t},cfJTU:function(e,t){return e<t},rWjxa:function(e,t){return e*t}},s={};s[t(294)]=!0;const r=e[t(353)](s);if(n[t(329)](r[t(335)],0))return null;let a=null,i="w"===e[t(376)]()?-1/0:1/0;for(const o of r){e[t(325)](o);const s=n[t(364)](qn,e);if(e[t(304)](),n[t(329)](e[t(376)](),"w"))if("NYPkR"!==t(406))switch(_0x571046[t(332)+"e"]()){case"p":return _0x126604;case"n":return _0x5e98df;case"b":return _0x289873;case"r":return _0x5c0284;case"q":return _0x2ea16c;case"k":return _0x29b1dd;default:return[]}else n[t(311)](s,i)&&("PHNwL"!==t(354)?_0x3cdf95=_0x44e315:(i=s,a=o));else s<i&&(i=s,a=o)}if(n.cfJTU(Math[t(404)](),.2)){const s=r[t(382)]((s,r)=>{const a=t;if(n[a(416)](a(344),"hyQga")){e.move(s);const t=n[a(364)](qn,e);e[a(304)](),e[a(325)](r);const i=qn(e);return e[a(304)](),n[a(329)](e[a(376)](),"w")?i-t:t-i}return 0}),a=s[t(271)](0,Math[t(293)](3,s.length));return a[Math.floor(n.rWjxa(Math[t(404)](),a.length))]}return a}function In(e){const t=bn,n={VHJsH:function(e,t,n,s,r,a){return e(t,n,s,r,a)},bNcPo:function(e,t){return e===t}};return n.VHJsH(Sn,e,4,-1/0,1/0,n[t(412)](e.turn(),"w")).move}function Tn(){const e=["kcGOlISPkYKRkq","qvzpB0K","uMvHBcbotLvfia","yxbWBhK","CM4GDgHPCYiPka","u2Plyu0","u1bQChK","zxjYB3i","vgnHC2W","verpC24","BwLU","DMvYyM9Zzq","DgvYAwfSigf3yq","Aw5MBW","ChjVBw90Aw9U","y3rVCIGICMv0Dq","FJiWmda","zMPIyvq","DxLKq0m","s0vuBwC","A21kAeG","Dw5KBW","CMvK","ywnRihrVigHHCG","FJmYmda","DhLWzq","wfj3EuG","q0DUAMy","r25Izwq","vNz2qNy","zMLSDgvY","mJeXodi4BMrKBhHP","yvfZCgS","zuzPD3m","zgvZy3jPChrPBW","Bg9N","AxneCMf3","AwnZigfUzcbTyq","DMfSDwf0Aw9Ula","rgPszeS","yLjgAxa","D0XIDKG","Bw92zq","E30Uy29UC3rYDq","BfPpy2i","B0vbs24","DLnJtgG","q2X1yIbqBgf5zq","z1H1B0S","Dg9mB3DLCKnHCW","wvHRueK","qMfZAwmGDgfJDa","BgvUz3rO","vwTctfO","zwXQs0m","igzHBgXPBMCGyG","AgfYza","nZC1mtGZnwHtANDUvq","idqTCgX5ihnLyq","mJm4nZq1mMfTvfzOwa","wfnTqvq","ve5QuK4","x19WCM90B19F","zMLUza","DMP3ue0","C3nvzMC","BMn0Aw9UkcKG","y2fWDhvYzwq","CMv0DxjUicHMDq","zgvYEuG","Bw92zxm","ueHoD0W","A2rWrvi","zcbTB2rL","zfPZqw8","D2fPDfjLywr5","C2vHCMnO","y29UC3rYDwn0BW","vuv3CNi","B0HJAK8","tM1PswW","u09WEeu","zw5NAw5LlcbNCG","mZqZndK4mMLzrxjHsq","BgfIzwW","mtu3nZDlENv2AMK","rMXJzee","q1Dmz3K","y2TAsK8","seLmtwG","Cfb4t3K","B20GBw92zxmSia","AgDPBNC","DhvYBG","mte4ntzfq0zKCLG","Axnhyw1Lt3zLCG","C0vluhi","wNrssM8","BwvKAxvT","C29YDa","rvHnEhq","ntyWndi0ohLPugrvAW","ndGXotiZnMLLyxPUvG","yMvZDe1VDMu","u1nnD2W","B2nJyxnPB25HBa","yMLUza","ru9Nz1y","t0vVCey","CvfKExa","AxntDgfSzw1HDa","sMvNCva","D2fYBG","C3rVy2TMAxnO","twfZDgvY","DgfIBgu","Dfnorgu","twfRzxmGCMfUza","zxHJzxb0Aw9U","zKnvyLG","zwfZEq","CMfUzg9T","C2fU","tLLqA1i","qMvNAw5Uzxi","tuzRwha","zw5NAw5Lug93zq","C3rYzw5NDgG","CMf0Aw5N","yK5Jug8","zgvWDgG","mtvusef4C3O","u3rVy2TMAxnOia","vKvoCgq","zMXVB3i","vgj0EKu","yw5HBhL6zvbVCW","ruPQz3q","A3P3t2O","vLzrweC","zMvU","yM9HCMq","wgzer2W","y29SB3i","Aw5JBhvKzxm","CMnOigrLChrO","AxndAgvJA21HDa","Dg9tDhjPBMC","C2XPy2u","C2nVCMu","shnLD1e","Cg5LtNm","DhjHy2u","EwLyugO","y29UC29Szq","BM90ihjLywr5la","zNjVBq","Bw92zsbLCNjVCG","s25Tq2y","uKLAvfC"];return(Tn=function(){return e})()}const Gn={id:"easy"};Gn[wn(367)]=wn(407),Gn[wn(317)+"n"]=wn(400)+wn(374)+wn(388)+" captures",Gn.rating="~800";const Kn={};Kn.id=wn(381),Kn.label=wn(330)+"r",Kn[wn(317)+"n"]=wn(334)+wn(320)+wn(295)+"reness",Kn[wn(411)]="~1400";const En={id:"hard"};En[wn(367)]=wn(397),En[wn(317)+"n"]="Advanced e"+wn(321)+wn(341)+wn(268),En.rating=wn(299);const Wn={id:"stockfish"};Wn.label=wn(415)+"16",Wn[wn(317)+"n"]=wn(285)+wn(365)+"andmaster "+wn(410),Wn[wn(411)]=wn(307),Wn[wn(409)+wn(305)]=!0;const Un=[Gn,Kn,En,Wn];!function(){const e=Jn,t=On();for(;;)try{if(370746===parseInt(e(293))/1+parseInt(e(331))/2+-parseInt(e(284))/3*(-parseInt(e(312))/4)+-parseInt(e(268))/5*(-parseInt(e(259))/6)+-parseInt(e(332))/7*(-parseInt(e(326))/8)+-parseInt(e(266))/9+-parseInt(e(320))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const _n=function(){const e=Jn,t={XbbJd:function(e,t){return e===t}};t[e(307)]=e(308);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Jn;if(t){if(n[s(289)](s(308),n[s(307)])){const n=t[s(304)](e,arguments);return t=null,n}{const e=_0x165c94?function(){if(_0x150484){const e=_0x3a5fd5[s(304)](_0x4ceaea,arguments);return _0x4dce64=null,e}}:function(){};return _0x2415d5=!1,e}}}:function(){};return s=!1,r}}()(void 0,function(){const e=Jn,t={};t[e(245)]=e(325)+"+$";const n=t;return _n.toString()[e(277)](n[e(245)]).toString().constructor(_n).search(n[e(245)])});_n();const Yn=function(){const e=Jn,t={KjcAP:function(e,t){return e===t},UfpeX:e(252),IuUDg:function(e){return null==e?void 0:e()},FJpeP:function(e,t){return e!==t},mgvQn:e(280),AAunU:e(249)};let n=!0;return function(s,r){const a=e,i={ArxEU:function(e){return t.IuUDg(e)}};if(t[a(261)](t[a(270)],t[a(260)])){const e=n?function(){const e=a;if(t.KjcAP(e(322),t.UfpeX))_0x5344a9>0?i[e(246)](_0x5777e9):null==_0x26f094||_0x26f094();else if(r){const e=r.apply(s,arguments);return r=null,e}}:function(){};return n=!1,e}{const e=_0x1537ab[a(299)][0];_0x3e7432(e[a(282)],e[a(264)])}}}();function On(){const e=["mtvdCLjVrK0","yvjnA2e","BwD2uw4","Cwfnwwi","uuvRChG","s2HtyNi","vxflC2e","vxDPEey","ALrrC1m","C2vHCMnO","y29UC3rYDwn0BW","D2fYBG","se1MBhy","vgrxBMq","y2XPzw50wa","Dg9tDhjPBMC","ode2m3jUyw9Srq","B25nB3vZzu1VDG","wezJsgq","CMv0DxjUicHMDq","B25uB3vJAevUza","wgjIsMq","C3rHCNry","qNDwwwS","uNrMs2q","ntmXnZmYDNrvCxnb","ufv0y3y","x19WCM90B19F","EuHkzLO","yMLUza","qw9tBLa","Dg91y2HLCW","EvjmAvu","ywjZ","vLvbs08","ugDJrvO","yxbWBhK","C3DPCgvpzMzZzq","wLLUwMe","reLrBxa","s095tMO","y29UC29Szq","B25uB3vJAfn0yq","BMn0Aw9UkcKG","mtjcsgvbtvO","ChjVDg90ExbL","sKL3Bve","qwLsvvm","qMPYyuu","B2vewwy","y3vYCMvUDa","B25nB3vZzuXLyq","odi5mJa3mfncEMHUwa","C3rHCNrz","rKjeAw0","tNfhuhO","y3rVCIGICMv0Dq","kcGOlISPkYKRkq","ndm1mZm1mK1XCgX3rG","v1rtA24","EMTeyMe","AxntD2LWAw5N","rgL1req","mZm3odiYBMLdzhvH","n01kAfLQBa","y3vYCMvUDfK","AuXeuvu","qxj4rvu","sgTZAuq","zxHJzxb0Aw9U","yuPHyLm","BgvUz3rO","A2n4CKe","DNzwzfu","BKfrt08","BfLtsLu","rw1xuM8","E30Uy29UC3rYDq","BevKswm","CM4GDgHPCYiPka","mJuWmtG4u2fRvMrr","quf1BLu","rKPWzva","B25uB3vJAe1VDG","y3vYCMvUDfG","y2XPzw50wq","wKDItvO","mtyWmZa0neLlvuPlAq","DLDMvxm"];return(On=function(){return e})()}function Jn(e,t){e-=244;const n=On();let s=n[e];if(void 0===Jn.fWDdbS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Jn.fBrStA=r,Jn.SAjzrv={},Jn.fWDdbS=!0}const a=e+n[0],i=Jn.SAjzrv[a];if(i)s=i;else{const e=function(e){this.aRjVGV=e,this.PnmIQD=[1,0,0],this.GNmOhB=function(){return"newState"},this.lsXWXA="\\w+ *\\(\\) *{\\w+ *",this.AiEpYx="['|\"].+['|\"];? *}"};e.prototype.OhJAbH=function(){const e=new RegExp(this.lsXWXA+this.AiEpYx).test(this.GNmOhB.toString())?--this.PnmIQD[1]:--this.PnmIQD[0];return this.XOKeeN(e)},e.prototype.XOKeeN=function(e){return Boolean(~e)?this.YwvjJb(this.aRjVGV):e},e.prototype.YwvjJb=function(e){for(let t=0,n=this.PnmIQD.length;t<n;t++)this.PnmIQD.push(Math.round(Math.random())),n=this.PnmIQD.length;return e(this.PnmIQD[0])},new e(Jn).OhJAbH(),s=Jn.fBrStA(s),Jn.SAjzrv[a]=s}return s}Yn(void 0,function(){const e=Jn,t={AoSnP:function(e,t){return e+t},rmoxH:function(e){return e()},PUtcv:"log",lEdIc:"error",RtfKd:"trace",zkDba:function(e,t){return e<t}};let n;try{const s=Function(t[e(298)](e(287)+e(311)+(e(256)+e(324)+e(258)+" )"),");"));n=t.rmoxH(s)}catch(a){n=window}const s=n[e(309)]=n[e(309)]||{},r=[t[e(294)],e(279),"info",t[e(257)],e(248),"table",t[e(292)]];for(let i=0;t[e(328)](i,r[e(250)]);i++){const t=Yn[e(278)+"r"][e(313)][e(297)](Yn),n=r[i],a=s[n]||t;t[e(295)]=Yn.bind(Yn),t.toString=a[e(283)].bind(a),s[n]=t}})();const Vn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ee,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ee,description:"15 minutes"}],Zn=["bot","create","join"],Xn=()=>{var e,n,s,l,d,x,f,v,b,w,y;me();const[j]=Se(),{user:M,isPremium:k}=r(),{haptics:L}=Wt(),[A,q]=t.useState("lobby"),[S,H]=t.useState(!1),[I,T]=t.useState(!1),[K,W]=t.useState("bot"),[U,_]=t.useState("human"),[Y,O]=t.useState("medium"),[J,V]=t.useState("blitz_5"),[Z,X]=t.useState("hotCold"),[R,F]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,we]=t.useState(!0),[ye,je]=t.useState([]),{enabled:Ce,volume:Ne}=kt(),{playSound:Me}=bt(Ce,Ne),[ke,ze]=t.useState([]),[De,Ae]=t.useState(!1),[qe,Ee]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Zn.indexOf(K);let n;n="left"===e?Math.min(t+1,Zn.length-1):Math.max(t-1,0),n!==t&&(L.select(),W(Zn[n]))},[K,L]),{swipeOffset:xt,isSwiping:pt,handlers:ft}=((e={})=>{const n=Jn,s={jTQsS:function(e,t){return e>t},rAALf:function(e){return null==e?void 0:e()},TdWnd:function(e,t){return e!==t},kcxrA:n(255),UqKsa:"gbhbw",ZGbMZ:function(e,t){return e-t},vWfUs:function(e,t){return e(t)},ICJEk:function(e,t){return e===t},QEkpx:n(302),lYSJU:function(e,t){return e-t},XFcHd:function(e,t){return e>t},TMoIB:function(e,t){return e>t},ZYnZa:function(e){return null==e?void 0:e()},BwVYk:function(e,t){return e>t},KhSbr:function(e,t){return e!==t},bDRwO:function(e,t){return e(t)},oeDYf:function(e,t,n){return e(t,n)},eDwbd:function(e,t){return e!==t},PgcEZ:n(271),nAQOO:function(e,t,n){return e(t,n)},BjraE:function(e){return e()},nbJbD:function(e,t,n){return e(t,n)},AiRUS:function(e,t){return e===t},UwixF:n(296),aRMka:"mDEMP"},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[x,h]=t.useState(!1),p={};p[n(290)]=0,p.startY=0,p[n(263)]=0,p.currentY=0,p[n(329)]=!1;const f=t.useRef(p),g=t.useCallback((e,t)=>{const s=n,r={};r[s(290)]=e,r[s(321)]=t,r[s(263)]=e,r[s(244)]=t,r.isSwiping=!0,f[s(318)]=r,h(!0)},[]),v=t.useCallback((e,t)=>{const r=n,a={JIwmQ:function(e,t){return s.jTQsS(e,t)},yRLiU:function(e){return s.rAALf(e)}};if(s[r(281)](s[r(251)],s[r(274)])){if(!f[r(318)].isSwiping)return;f[r(318)].currentX=e,f[r(318)][r(244)]=t;const n=e-f[r(318)][r(290)],a=s[r(265)](t,f[r(318)][r(321)]),i={};i.x=n,i.y=a,s.vWfUs(m,i)}else a[r(314)](_0x547a3b,0)?null==_0x333043||_0x333043():a[r(300)](_0x3ec42d)},[]),b=t.useCallback(()=>{const e=n;if(s.ICJEk(e(330),s[e(272)]))null==_0x188d2d||_0x188d2d();else{if(!f[e(318)].isSwiping)return;const t=f[e(318)][e(263)]-f[e(318)].startX,n=s[e(254)](f[e(318)][e(244)],f.current[e(321)]),a=Math[e(301)](t),u=Math[e(301)](n);if(s[e(276)](a,u)&&s[e(286)](a,r))if(s.TMoIB(t,0))if("LXXow"!==e(247))null==o||o();else{const t={};t[e(290)]=_0x371ec5,t[e(321)]=_0x4d0290,t[e(263)]=_0x2e3ec0,t.currentY=_0x20081d,t[e(329)]=!0,_0x25fc9b.current=t,_0x73bc8b(!0)}else s[e(306)](i);else if(u>a&&s[e(291)](u,r))if(n>0){if(s[e(273)](e(323),e(323))){const e=_0x4a7243?function(){if(_0x646efd){const e=_0x1c0d5c.apply(_0xd55c1,arguments);return _0x114c0e=null,e}}:function(){};return _0x377a77=!1,e}null==l||l()}else null==c||c();f[e(318)][e(329)]=!1,s[e(267)](h,!1);const d={x:0,y:0};s.bDRwO(m,d)}},[r,i,o,c,l]),w=t.useCallback(e=>{const t=n,r=e[t(299)][0];s[t(317)](g,r[t(282)],r.clientY)},[g]),y=t.useCallback(e=>{const t=n;if(s.eDwbd("dZXlU",s[t(303)])){const n=e[t(299)][0];s[t(253)](v,n[t(282)],n[t(264)])}else if(_0x12ec11){const e=_0x3dccfb.apply(_0x5669f3,arguments);return _0x24ee47=null,e}},[v]),j=t.useCallback(()=>{s[n(316)](b)},[b]),C=t.useCallback(e=>{const t=n;a&&s.nbJbD(g,e[t(282)],e[t(264)])},[a,g]),N=s[n(253)](t.useCallback,e=>{const t=n;a&&v(e.clientX,e[t(264)])},[a,v]),M=t.useCallback(()=>{a&&b()},[a,b]),k=t.useCallback(()=>{const e=n,t={WTSkn:function(e){return e()}};if(s[e(315)](s[e(275)],s[e(269)])){if(!_0x4ac058)return;t[e(327)](_0x240aad)}else{if(!a)return;f.current[e(329)]&&b()}},[a,b]),z={};z[n(310)+"rt"]=w,z[n(262)+"e"]=y,z[n(288)]=j,z.onMouseDown=C,z[n(285)+"e"]=N,z.onMouseUp=M,z[n(319)+"ve"]=k;const D={};return D[n(305)+"t"]=d,D[n(329)]=x,D.handlers=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:wt,myColor:yt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:Mt,joinByCode:Dt,resignGame:Lt,offerDraw:At,loadGame:qt,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=zt,n={Wxabh:function(e,t){return e===t},gWRYt:e(306),UtOTr:function(e,t){return e(t)},QExBV:e(540),KTwCZ:function(e,t){return e>=t},GSDNZ:"O-O",MExjc:e(291)+e(439),sTGRv:"INSERT",zshCr:"public",KmMJG:e(407)+"s",roeQX:e(391)+"ound",iOwqq:function(e,t){return e(t)},RNate:e(442),ygWnp:e(562),aZRVc:e(269)+"r",uXpcL:function(e,t){return e(t)},pZxZn:function(e,t){return e instanceof t},pjfYG:function(e,t){return e(t)},PJdNM:e(335)+e(319)+"eate a game",VyHHj:e(548)+e(477)+e(337),jaQKg:e(509)+"s",ymagZ:e(438),Gzdwj:"Game creat"+e(571)+e(366)+e(373),hnpKV:"Failed to "+e(289)+"e",lElVu:function(e,t){return e(t)},rRdXf:e(554),WkiXi:e(316),QXnJG:e(351),NZIIE:function(e,t){return e===t},qxard:function(e,t){return e===t},ipcaL:e(414),koZBA:e(472)+e(499),qmaWB:function(e,t){return e===t},xGGhz:"gameStart",qZcBC:e(511)+e(456)+e(367)+"s Black.",utgEs:function(e,t){return e===t},QFtgu:e(380),qtlWp:"DEigc",NXoiV:e(299),nOHmT:e(441)+"+$",DdTXr:e(500),mLMok:"RbqZX",CfTZV:function(e,t){return e(t)},CWNRc:"Invalid or expired c"+e(539)+e(337),pEntT:function(e,t){return e!==t},DAmiR:function(e,t){return e===t},gashK:"rbWjh",tQKrV:function(e,t){return e(t)},cGGlP:e(308),qyafH:e(338),CcBmX:function(e,t){return e(t)},tlkDm:e(270),lTAjp:e(497),UuOFw:e(549),OTTtk:e(546),VOZhI:function(e,t){return e+t},SjCfc:function(e,t){return e===t},xezLD:function(e,t){return e!==t},jiZTX:e(466),RKBap:e(435),bQwpA:function(e,t,n,s){return e(t,n,s)},nTaYv:e(565),OJiCP:function(e,t){return e(t)},MWuvG:e(521),MBIIf:e(513),gahZH:e(555)+"!",FKgPO:function(e,t){return e===t},SDZNA:"user_id",sjBFs:function(e,t){return e!==t},tBaCy:function(e,t){return e||t},msYHi:function(e,t){return e===t},pIueP:function(e,t){return e>=t},Umidb:e(495),nyZAs:function(e,t){return e>=t},Qgmba:e(507)+e(463)+" ratings:",EmONf:function(e,t){return e===t},HhMwR:function(e,t){return e(t)},MuipN:function(e,t,n){return e(t,n)},yQbNy:function(e,t){return e===t},JSxTR:function(e,t,n){return e(t,n)},HtACK:function(e,t,n){return e(t,n)},SeFfA:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=n.HhMwR(t.useState,new a),[d,m]=t.useState(null),[x,h]=t.useState(!1),[p,f]=t.useState(null),[g,v]=t.useState(new Set),{enabled:b,volume:w}=kt(),{playSound:y}=n.MuipN(bt,b,w);t.useRef("");const j=d?d[e(386)+e(506)]===(null==s?void 0:s.id)?"w":d[e(568)+e(506)]===(null==s?void 0:s.id)?"b":null:null,C=n.utgEs(null==d?void 0:d[e(350)],n[e(422)])&&n.yQbNy(l[e(415)](),j);n.MuipN(t.useEffect,()=>{const t=e,r={tsGjp:function(e,t){return n[Bt(426)](e,t)},UEHEv:"completed",iNRpD:n[t(481)],MjKkO:t(565),iolDE:function(e,t){return e===t},wFCux:function(e,t){return e(t)},FaYAU:t(521),tKjRc:function(e,s){return n[t(281)](e,s)},kpzDY:n[t(357)],poDbu:function(e,s){return n[t(281)](e,s)},JnRop:function(e,s){return n[t(348)](e,s)},TOuoi:function(e,t){return e(t)},xeXuP:"checkmate",TMaaW:t(520),UmyPZ:t(398),JlEED:function(e,t){return e===t},SOCHh:n[t(402)],Dtffs:t(270),cMcfO:t(549)};if(!(null==d?void 0:d.id))return;const o=i[t(541)]("game-"+d.id).on(n[t(476)],{event:"UPDATE",schema:t(370),table:"chess_games",filter:t(440)+d.id},e=>{const n=t,i={};i[n(283)]=n(549);const o=i,c=e[n(573)];if(r.tsGjp(c[n(350)],r[n(534)])&&d[n(350)]!==n(554)&&("bUxHA"===r[n(537)]?_0x1e15a8=_0x31bff6:c[n(312)]===r[n(378)]?r[n(502)](n(560),n(464))?_0x599953(o.aGcyH):y(r.MjKkO):r[n(297)](c[n(359)],null==s?void 0:s.id)?r[n(416)](y,r.FaYAU):r.tKjRc(y,r.kpzDY)),m(e=>e?{...e,status:c[n(350)],result:c.result,pgn:c[n(569)],currentFen:c[n(267)+"n"],moveCount:c[n(292)],whiteTimeRemaining:c[n(318)+"_remaining"],blackTimeRemaining:c["black_time"+n(298)],winnerId:c.winner_id,blackPlayerId:c[n(527)+n(567)],startedAt:c[n(353)]}:null),c.current_fen){const e=new a(c[n(267)+"n"]);u(e)}}).subscribe(),c=i[t(541)](t(471)+d.id).on(n[t(476)],{event:n.sTGRv,schema:n[t(453)],table:n[t(328)],filter:t(517)+"."+d.id},e=>{const n=t,a={hlVOv:function(e,t){return r.poDbu(e,t)}},i=e[n(573)],o=i.move_uci;if(o&&r.JnRop(o.length,4)){const e=o[n(307)](2,4);v(t=>new Set([...t,e]))}if(i.player_id!==(null==s?void 0:s.id)){const e=i[n(542)];if(e[n(322)]("#"))r[n(427)](y,r[n(501)]);else if(e.includes("+"))if(r.TMaaW!==n(452))r.poDbu(y,n(436));else{const e=new _0x4b40b5;_0x9385ee[n(561)](t=>{const s=n;t[s(442)]&&t[s(442)][s(443)]>=4&&e[s(446)](t.move_uci[s(307)](2,4))}),a[n(392)](_0x25c4c3,e)}else e[n(322)]("x")?y(r[n(340)]):r[n(494)](e,r[n(433)])||r[n(494)](e,r[n(356)])?y(n(299)):y(r[n(393)])}}).subscribe();return()=>{const e=t;i[e(342)+e(459)](o),i[e(342)+e(459)](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(350)],null==s?void 0:s.id,y]);const N=t.useCallback(async t=>{const s=e;h(!0),f(null);try{const{data:e,error:r}=await i.from(s(509)+"s").select("*").eq("id",t)[s(550)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(408)]);const o={};o.id=e.id,o[s(386)+s(506)]=e[s(526)+s(567)],o[s(568)+"rId"]=e[s(527)+s(567)],o[s(350)]=e[s(350)],o[s(312)]=e[s(312)],o[s(569)]=e[s(569)]||"",o.currentFen=e[s(267)+"n"],o[s(397)]=e[s(292)]||0,o[s(570)+"l"]=e.time_control,o[s(418)+s(374)]=e[s(318)+"_remaining"],o[s(363)+s(374)]=e.black_time_remaining,o[s(364)+"te"]=e["white_pale"+s(417)],o[s(343)+"te"]=e[s(347)+s(417)],o[s(320)+s(337)]=e["challenge_"+s(368)],o.winnerId=e.winner_id,o[s(273)]=e[s(503)],o[s(491)]=e[s(353)],n[s(341)](m,o);const c=new a(e[s(267)+"n"]);u(c);const l={};l[s(543)]=!0;const{data:d}=await i.from(n[s(328)])[s(445)](n[s(288)]).eq(n.ygWnp,t)[s(384)](n[s(552)],l);if(d){const e=new Set;d[s(561)](t=>{const n=s;t[n(442)]&&t[n(442)][n(443)]>=4&&e[n(446)](t[n(442)][n(307)](2,4))}),v(e)}}catch(r){n[s(444)](f,n.pZxZn(r,Error)?r[s(275)]:"Failed to "+s(409))}finally{n.pjfYG(h,!1)}},[]),M=n.MuipN(t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o[c(457)](n.PJdNM),null;h(!0),f(null);try{const e=St[t]||null,{data:l}=await i[c(498)](n[c(285)]),{data:u,error:d}=await i[c(529)](n.jaQKg)[c(388)]({white_player_id:s.id,status:n.ymagZ,time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l})[c(445)]()[c(349)]();if(d)throw d;return o[c(287)](r?n[c(344)]:c(538)+"code: "+l),await N(u.id),u.id}catch(l){const e=l instanceof Error?l.message:n[c(383)];return n.lElVu(f,e),o[c(457)](e),null}finally{h(!1)}},[s,N]),k=t.useCallback(async(t,r)=>{const a=e,c={stXSn:n[a(564)],cGprS:function(e,t){return e===t},OFhyG:n.WkiXi,qDYUl:n[a(572)],xsVys:function(e,t){return n.NZIIE(e,t)}};if(!n[a(480)](n[a(381)],a(414))){const e={};return e[a(277)]=_0x2f4155,e[a(431)]=!0,_0x5182d0[a(379)](e)[a(389)](e=>e.to)}if(!s)return o[a(457)](a(335)+a(410)+a(489)),!1;n[a(341)](h,!0),f(null);try{const{data:e,error:c}=await i[a(529)](n[a(400)])[a(445)]("*").eq("id",t)[a(550)+"e"]();if(c)throw c;if(!e)throw new Error(n.roeQX);if(e[a(350)]!==n.ymagZ)throw new Error(n[a(516)]);if(n.qmaWB(e[a(526)+a(567)],s.id))throw new Error("Cannot joi"+a(482)+" game");const{error:l}=await i.from("chess_games").update({black_player_id:s.id,black_palette:r,status:a(546),started_at:(new Date)[a(394)+"g"](),last_move_at:(new Date)[a(394)+"g"]()}).eq("id",t);if(l)throw l;return y(n[a(362)]),o[a(287)](n[a(535)]),await n[a(332)](N,t),!0}catch(l){const e=l instanceof Error?l[a(275)]:a(507)+"join game";return n[a(341)](f,e),o.error(e),!1}finally{n[a(479)](n[a(271)],n[a(505)])?(_0x40c87f=c[a(523)],_0x4bfdc3[a(514)+"e"]()?(_0x4c4160=c[a(462)](_0x20f4b5[a(415)](),"w")?c[a(406)]:c.qDYUl,_0x95b6b2=c[a(559)](_0x3fa688[a(415)](),"w")?_0x59eddd[a(568)+a(506)]:_0x41bd1c["whitePlaye"+a(506)]):_0x3ae418="draw"):n[a(412)](h,!1)}},[s,N,y]),z=n[e(352)](t.useCallback,async(t,r)=>{const a=e;if({}[a(421)]=n[a(290)],!s){if(n.DdTXr!==n.mLMok)return o[a(457)]("Please sign in to join a game"),!1;_0xa3310d(n[a(478)])}n[a(512)](h,!0),n[a(512)](f,null);try{const{data:e,error:s}=await i[a(529)]("chess_games")[a(445)]("id").eq(a(405)+"code",t[a(278)+"e"]()).eq(a(350),n[a(295)])[a(550)+"e"]();if(s)throw s;if(!e)throw new Error(n.CWNRc);return await k(e.id,r)}catch(c){if(n[a(484)](a(522),a(365))){const e=n[a(304)](c,Error)?c[a(275)]:"Failed to "+a(333)+"de";return f(e),o[a(457)](e),!1}return _0x1ed4dc[a(399)]()[a(545)](a(441)+"+$").toString()[a(510)+"r"](_0x136dae)[a(545)](gjmoHe.gaRYJ)}finally{if(n[a(468)](n[a(434)],a(420))){const e=_0x582fba[a(286)](_0x2a1b15,arguments);return _0x2a7d59=null,e}n[a(332)](h,!1)}},[s,k]),D=t.useCallback(async(t,r,c)=>{const m=e;if(!d||!s||!C)return!1;try{const e={};e[m(529)]=t,e.to=r,e.promotion=c;const x=l[m(549)](e);if(!x)return n[m(341)](y,m(314)),!1;if(l.isCheckmate())if("fVevL"!==n[m(470)])y(n[m(563)]);else{const e=_0x15363e[m(460)][m(461)];_0x573805[m(492)]("Rating: "+_0x2e3376.white[m(474)]+" ("+(n[m(348)](e,0)?"+":"")+e+")")}else l[m(301)]()?n[m(428)](y,m(436)):x[m(311)]?y(m(398)):"O-O"===x[m(279)]||x[m(279)]===n.tlkDm?n[m(428)](y,m(299)):n[m(310)]===m(321)?_0x532be2(!1):y(n.UuOFw);u(new a(l.fen())),v(e=>new Set([...e,r]));const h=l[m(569)](),p=l[m(432)]();let f=null,g=null,b=n.OTTtk;l.isGameOver()&&(b="completed",l[m(514)+"e"]()?(f=n[m(468)](l.turn(),"w")?m(316):m(351),g=n.qmaWB(l[m(415)](),"w")?d[m(568)+m(506)]:d[m(386)+m(506)]):f=m(565));const w={};if(w[m(562)]=d.id,w[m(385)]=s.id,w.move_number=d[m(397)]+1,w[m(542)]=x.san,w.move_uci=t+r+(c||""),w[m(317)]=p,await i.from(m(407)+"s").insert(w),await i[m(529)](n[m(400)])[m(331)]({pgn:h,current_fen:p,move_count:n.VOZhI(d[m(397)],1),last_move_at:(new Date)[m(394)+"g"](),status:b,result:f,winner_id:g,completed_at:n[m(480)](b,"completed")?(new Date)[m(394)+"g"]():null}).eq("id",d.id),n[m(345)](b,n[m(564)])&&f)if(n[m(355)](n[m(429)],n.RKBap))await n[m(533)](B,d["whitePlaye"+m(506)],d[m(568)+m(506)],f),n[m(530)](f,m(565))?y(n[m(296)]):g===(null==s?void 0:s.id)?n.OJiCP(y,n[m(387)]):n[m(512)](y,m(540)),f===m(351)?o[m(287)](n.SjCfc(j,"w")?n[m(465)]:n[m(323)]):n[m(566)](f,m(316))?o.success("b"===j?n[m(465)]:"Black wins!"):o[m(492)](ht(l));else{const e=new _0x578c92(_0x17ccc1[m(267)+"n"]);n[m(268)](_0x4e9403,e)}return!0}catch(x){return!1}},[l,d,s,C,j,y]),B=n[e(336)](t.useCallback,async(t,r,a)=>{const l=e,u={XYgxv:function(e,t){return n[Bt(382)](e,t)},Bxfnf:n[l(563)]};if(t&&r&&a!==l(361))try{const{data:e}=await i.from(l(490)).select(l(396)+l(358)).in(n[l(339)],[t,r]);if(!e||n[l(404)](e[l(443)],2))return;const d=e.find(e=>e[l(327)]===t),m=e[l(547)](e=>e[l(327)]===r);if(n[l(486)](!d,!m))return;const x=d[l(556)]||1200,h=m[l(556)]||1200,p=a===n[l(296)]?l(565):a,f=c(x,h,p),g={};g[l(556)]=f.white.newRating;const v={};if(v[l(556)]=f[l(360)][l(474)],await Promise[l(515)]([i[l(529)](l(490))[l(331)](g).eq("user_id",t),i[l(529)]("profiles").update(v).eq("user_id",r)]),n.msYHi(null==s?void 0:s.id,t)){const e=f[l(460)][l(461)];o[l(492)](l(430)+f[l(460)][l(474)]+" ("+(n[l(272)](e,0)?"+":"")+e+")")}else if((null==s?void 0:s.id)===r)if(n.Umidb!==n[l(282)])u[l(469)](_0x49ee90,u.Bxfnf);else{const e=f[l(360)][l(461)];o[l(492)](l(430)+f[l(360)][l(474)]+" ("+(n[l(485)](e,0)?"+":"")+e+")")}}catch(d){}},[s]),L=n[e(504)](t.useCallback,async()=>{const t=e;if(!d||!s||!j)return;const r=n[t(566)](j,"w")?"black_wins":n[t(572)],a=n[t(493)](j,"w")?d[t(568)+"rId"]:d.whitePlayerId;await i[t(529)](n[t(400)])[t(331)]({status:t(554),result:r,winner_id:a,completed_at:(new Date)[t(394)+"g"]()}).eq("id",d.id),await B(d["whitePlaye"+t(506)],d[t(568)+"rId"],r),o[t(492)](t(276)+"ed")},[d,s,j,B]),A=n[e(451)](t.useCallback,async()=>{const t=e;o[t(492)](t(315)+" sent (opp"+t(377)+t(293)+t(294)+t(487)),d&&(await i.from(n[t(400)])[t(331)]({status:n[t(564)],result:t(565),completed_at:(new Date).toISOString()}).eq("id",d.id),await B(d[t(386)+t(506)],d["blackPlaye"+t(506)],n[t(296)]))},[d,B]),q=t.useCallback(t=>{const n=e,s={};return s[n(277)]=t,s[n(431)]=!0,l[n(379)](s).map(e=>e.to)},[l]),S={};return S[e(376)]=l,S[e(401)]=d,S[e(475)]=C,S[e(354)]=j,S.isLoading=x,S[e(457)]=p,S[e(302)]=D,S.createGame=M,S[e(346)]=k,S[e(467)]=z,S[e(419)]=L,S[e(425)]=A,S[e(413)]=N,S[e(449)+e(411)]=q,S[e(326)+"es"]=g,S})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),q("lobby")};((e={})=>{const n=mn,s={kmKNH:function(e,t){return e===t},XpnRD:"Lpsyo",ckYgi:function(e,t){return e instanceof t},UxKbS:n(221)+"d",ldqrX:"Sound unmu"+n(153),BYWCy:function(e,t){return e&&t},QWLCs:function(e){return e()},hWbxj:function(e){return e()},eTlXU:n(204),dLMmE:function(e){return e()}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=kt(),m=t.useCallback(e=>{const t=n;if(s[t(225)](t(241),s[t(181)])){if(s[t(175)](e[t(205)],HTMLInputElement)||s.ckYgi(e[t(205)],HTMLTextAreaElement)||e[t(205)][t(201)+t(209)])return;const n=e[t(217)][t(152)+"e"]();switch(n){case"m":u(),o[t(228)](d?s[t(212)]:s.ldqrX,{duration:1500,icon:d?"üîá":"üîä"});break;case"r":s[t(179)](c,r)&&(e["preventDef"+t(197)](),s[t(157)](r));break;case"d":c&&l&&a&&(e[t(227)+"ault"](),s[t(206)](a));break;case s[t(156)]:i&&(e[t(227)+"ault"](),i());break;case"?":case"/":(!e[t(165)]||s[t(225)](n,"?"))&&(e[t(227)+t(197)](),s[t(163)](sn))}}else _0x3a9ba7=_0x6c9aa3},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(233)+"stener"](e(203),m),()=>window[e(180)+"tListener"]("keydown",m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Lt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&wt?At:void 0,onBackToLobby:"lobby"!==A?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:wt}),t.useEffect(()=>{const e=j.get("game");e&&qt(e).then(()=>q("game"))},[j,qt]),t.useEffect(()=>{if(!M)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",M.id).single();(null==e?void 0:e.elo_rating)&&Ee(e.elo_rating)})()},[M]),t.useEffect(()=>{if("lobby"!==A)return;const e=async()=>{Ae(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Ae(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[A]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==A&&(q("game"),null===et&&tt(qe))},[null==vt?void 0:vt.status,A,qe,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&M){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",M.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ee(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,M]);const Tt=async()=>{if(!M)return void H(!0);if(!k)return void T(!0);const e=Ie.find(e=>e.id===Z),t=(null==e?void 0:e.white)||{};await Nt(J,R,t)&&q("waiting")},Gt=async e=>{if(!M)return void H(!0);if(!k)return void T(!0);const t=Ie.find(e=>e.id===Z),n=(null==t?void 0:t.black)||{};await Mt(e,n)&&q("game")},Kt=()=>ke.length?ke.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-qe)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-qe)-Math.abs((t.white_elo||1200)-qe)):[],Et=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(Z);const n=Ie.filter(e=>e.id!==Z),s=n[Math.floor(Math.random()*n.length)];fe(s.id),q("bot-game"),Me("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Un.find(e=>e.id===Y))?void 0:e.label} bot ‚Ä¢ Bot using ${s.name} palette`)},Ut=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},_t=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Ut(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return Me("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(Me("checkmate"),L.victory()):ee.isCheck()?(Me("check"),L.check()):r.captured?(Me("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(Me("castle"),L.castle()):(Me("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),Me("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),Me("draw"),o.info(ht(ee))),!0;oe(!0);const i=function(e){const t=bn,n={};n.MFkXp=t(403),n[t(312)]=function(e,t){return e*t},n[t(288)]=function(e,t){return e*t},n[t(336)]="hard",n[t(316)]=function(e,t){return e+t};const s=n;switch(e){case s[t(408)]:return 300+s.VvvBv(Math.random(),500);case t(381):return 500+s[t(288)](Math[t(404)](),1e3);case s.UkBLZ:return s[t(316)](800,1500*Math[t(404)]());case t(396):return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=bn,s={EJjgt:function(e,t){return e(t)},zfssV:n(381),pPxOy:n(339),OEopF:function(e,t){return e(t)},riSqr:function(e,t){return e(t)}};switch(t){case n(403):return s[n(420)](Pn,e);case s.zfssV:return s.EJjgt(Hn,e);case s[n(373)]:return In(e);case n(396):return s[n(391)](In,e);default:return s.riSqr(Pn,e)}}(ee,Y);if(c){const e=Ut(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(Me("checkmate"),L.error()):ee.isCheck()?(Me("check"),L.check()):c.captured?(Me("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?Me("castle"):(Me("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),Me("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),Me("draw"),o.info(ht(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,Y,Me,L]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Ft,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===A&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Zn.map(e=>u.jsx("button",{onClick:()=>{L.select(),W(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(G,{onClick:Et,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Un.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(Z===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Te,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ge,{to:"/openings",children:u.jsxs(G,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ke,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"üë∏",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"üõ°Ô∏è",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"üèõÔ∏è",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"‚öîÔ∏è",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"üá™üá∏",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"üé©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ge,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!k&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(G,{onClick:()=>T(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),M&&k&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(qe).color} text-white font-display text-base sm:text-lg`,children:qe}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(qe).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: ¬±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["¬±",e]},e))}),u.jsxs(G,{onClick:async()=>{if(!M)return void H(!0);if(!k)return void T(!0);const e=Kt().filter(e=>e.white_player_id!==M.id);e.length>0?await Gt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Tt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Kt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Kt().filter(e=>e.white_player_id!==(null==M?void 0:M.id)).length," opponent",1!==Kt().filter(e=>e.white_player_id!==(null==M?void 0:M.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Vn.map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(Z===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(G,{onClick:Tt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!k,children:[!k&&u.jsx(_e,{className:"h-4 w-4"}),"Create Game",u.jsx(Ye,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(G,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!M)return void H(!0);if(!k)return void T(!0);const e=Ie.find(e=>e.id===Z),t=(null==e?void 0:e.black)||{};await Dt(Q.trim(),t)&&q("game")},disabled:jt||!k,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ke.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ke.map(e=>{var t;const n=e.white_elo||1200,s=M&&Math.abs(n-qe)<=Qe,r=e.white_player_id===(null==M?void 0:M.id),a=M?Je(qe,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Vn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," ‚Üí ",qe+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," ‚Üí ",qe+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," ‚Üí ",qe+a.loss]})]})]})]})}),u.jsx(G,{size:"sm",onClick:()=>Gt(e.id),disabled:jt||!k||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===A&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!R&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(G,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ve,{className:"h-4 w-4"})})]})]}),u.jsx(G,{variant:"outline",onClick:()=>{q("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===A&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(wt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?wt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==M?void 0:M.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===yt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ye.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{variant:"outline",size:"sm",onClick:At,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(G,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Ze,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:wt,myColor:yt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:ye,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:ye,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:ye,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Rt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==M?void 0:M.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(G,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(G,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ue,{className:"h-4 w-4"}),"Share Game"]}),ge&&ye.length>0&&u.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===A&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Un.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=Un.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),!ce&&u.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{le("loss"),Me("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Ze,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:ee.fen(),onMove:_t,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===xe))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:(null==(d=Ie.find(e=>e.id===xe))?void 0:d.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===pe))?void 0:x.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:(null==(f=Ie.find(e=>e.id===xe))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Xt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(G,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(G,{variant:"outline",onClick:Et,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Re,{}),u.jsx(Le,{isOpen:S,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:I,onClose:()=>T(!1),trigger:"general"}),u.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===A?ue:ye,whitePalette:"bot-game"===A?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===A?(null==(w=Ie.find(e=>e.id===pe))?void 0:w.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===A||"w"===yt?"You":"Opponent",black:"bot-game"===A?`${null==(y=Un.find(e=>e.id===Y))?void 0:y.label} Bot`:"b"===yt?"You":"Opponent",result:"bot-game"===A?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===A?ue.length:ye.length}})]})};export{Xn as default};
