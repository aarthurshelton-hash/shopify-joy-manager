const n='/**\n * Opening Encyclopedia - Browse all recognized chess openings\n * \n * Displays the complete database of openings with marketing information,\n * famous players, and historical significance. Includes opening-specific\n * collections linking to marketplace visions.\n */\n\nimport React, { useState, useMemo } from \'react\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { Link } from \'react-router-dom\';\nimport { \n  BookOpen, \n  Search, \n  Crown, \n  History, \n  Filter,\n  Sparkles,\n  ChevronRight,\n  Users,\n  Zap,\n  Shield,\n  Target,\n  Shuffle,\n  ShoppingBag,\n  ArrowRight,\n} from \'lucide-react\';\nimport { Header } from \'@/components/shop/Header\';\nimport { Footer } from \'@/components/shop/Footer\';\nimport { Input } from \'@/components/ui/input\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Button } from \'@/components/ui/button\';\nimport { Card, CardContent } from \'@/components/ui/card\';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \'@/components/ui/tabs\';\nimport { getAllOpenings, DetectedOpening } from \'@/lib/chess/openingDetector\';\n\ntype CategoryFilter = \'all\' | \'open\' | \'semi-open\' | \'closed\' | \'semi-closed\' | \'flank\' | \'gambit\' | \'irregular\';\n\ninterface OpeningEntry {\n  eco: string;\n  name: string;\n  variation?: string;\n  moves: string;\n  category: DetectedOpening[\'category\'];\n  description: string;\n  marketingDescription?: string;\n  famousPlayers?: string[];\n  historicalSignificance?: string;\n}\n\n// Featured opening collections for marketplace\nconst FEATURED_COLLECTIONS = [\n  { name: "Queen\'s Gambit", query: "queen\'s gambit", icon: \'üë∏\', color: \'from-purple-500/20 to-pink-500/20 border-purple-500/40\' },\n  { name: \'Sicilian Defense\', query: \'sicilian\', icon: \'üõ°Ô∏è\', color: \'from-red-500/20 to-orange-500/20 border-red-500/40\' },\n  { name: \'Italian Game\', query: \'italian\', icon: \'üèõÔ∏è\', color: \'from-green-500/20 to-emerald-500/20 border-green-500/40\' },\n  { name: "King\'s Gambit", query: "king\'s gambit", icon: \'‚öîÔ∏è\', color: \'from-amber-500/20 to-yellow-500/20 border-amber-500/40\' },\n  { name: \'Ruy Lopez\', query: \'ruy lopez\', icon: \'üá™üá∏\', color: \'from-blue-500/20 to-indigo-500/20 border-blue-500/40\' },\n  { name: \'London System\', query: \'london\', icon: \'üé©\', color: \'from-gray-500/20 to-slate-500/20 border-gray-500/40\' },\n];\n\nconst CATEGORY_INFO: Record<CategoryFilter, { label: string; icon: React.ReactNode; color: string; description: string }> = {\n  all: { label: \'All Openings\', icon: <BookOpen className="h-4 w-4" />, color: \'text-foreground\', description: \'Browse all recognized chess openings\' },\n  open: { label: \'Open Games\', icon: <Target className="h-4 w-4" />, color: \'text-green-400\', description: \'Classical 1.e4 e5 positions with open files and diagonals\' },\n  \'semi-open\': { label: \'Semi-Open\', icon: <Shield className="h-4 w-4" />, color: \'text-blue-400\', description: \'Asymmetrical responses to 1.e4 (Sicilian, French, Caro-Kann)\' },\n  closed: { label: \'Closed\', icon: <Shield className="h-4 w-4" />, color: \'text-purple-400\', description: \'Strategic 1.d4 d5 positions with locked pawn structures\' },\n  \'semi-closed\': { label: \'Semi-Closed\', icon: <Shield className="h-4 w-4" />, color: \'text-violet-400\', description: \'Indian defenses and hypermodern systems\' },\n  flank: { label: \'Flank\', icon: <Shuffle className="h-4 w-4" />, color: \'text-amber-400\', description: \'English, R√©ti, and other flank openings\' },\n  gambit: { label: \'Gambits\', icon: <Zap className="h-4 w-4" />, color: \'text-orange-400\', description: \'Sacrifice material for initiative and attack\' },\n  irregular: { label: \'Irregular\', icon: <Sparkles className="h-4 w-4" />, color: \'text-pink-400\', description: \'Unusual and surprise openings\' },\n};\n\nconst OpeningEncyclopedia: React.FC = () => {\n  const [searchQuery, setSearchQuery] = useState(\'\');\n  const [selectedCategory, setSelectedCategory] = useState<CategoryFilter>(\'all\');\n  const [expandedOpening, setExpandedOpening] = useState<string | null>(null);\n\n  // Get all openings from database\n  const allOpenings = useMemo(() => getAllOpenings(), []);\n\n  // Filter and group openings\n  const filteredOpenings = useMemo(() => {\n    let result = [...allOpenings];\n\n    // Search filter\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      result = result.filter(o => \n        o.name.toLowerCase().includes(query) ||\n        (o.variation && o.variation.toLowerCase().includes(query)) ||\n        o.eco.toLowerCase().includes(query) ||\n        o.description.toLowerCase().includes(query) ||\n        (o.famousPlayers && o.famousPlayers.some(p => p.toLowerCase().includes(query)))\n      );\n    }\n\n    // Category filter\n    if (selectedCategory !== \'all\') {\n      result = result.filter(o => o.category === selectedCategory);\n    }\n\n    return result;\n  }, [allOpenings, searchQuery, selectedCategory]);\n\n  // Group by main opening name\n  const groupedOpenings = useMemo(() => {\n    const groups: Record<string, OpeningEntry[]> = {};\n    filteredOpenings.forEach(o => {\n      if (!groups[o.name]) {\n        groups[o.name] = [];\n      }\n      groups[o.name].push(o);\n    });\n    return groups;\n  }, [filteredOpenings]);\n\n  // Stats\n  const stats = useMemo(() => ({\n    total: allOpenings.length,\n    gambits: allOpenings.filter(o => o.category === \'gambit\').length,\n    withFamousPlayers: allOpenings.filter(o => o.famousPlayers && o.famousPlayers.length > 0).length,\n    uniqueNames: new Set(allOpenings.map(o => o.name)).size,\n  }), [allOpenings]);\n\n  const getCategoryStyle = (category: string) => {\n    switch (category) {\n      case \'gambit\': return \'from-orange-500/20 to-red-500/20 border-orange-500/40\';\n      case \'open\': return \'from-green-500/20 to-emerald-500/20 border-green-500/40\';\n      case \'semi-open\': return \'from-blue-500/20 to-cyan-500/20 border-blue-500/40\';\n      case \'closed\': return \'from-purple-500/20 to-indigo-500/20 border-purple-500/40\';\n      case \'semi-closed\': return \'from-violet-500/20 to-purple-500/20 border-violet-500/40\';\n      case \'flank\': return \'from-amber-500/20 to-yellow-500/20 border-amber-500/40\';\n      case \'irregular\': return \'from-pink-500/20 to-rose-500/20 border-pink-500/40\';\n      default: return \'from-gray-500/20 to-slate-500/20 border-gray-500/40\';\n    }\n  };\n\n  return (\n    <div className="min-h-screen bg-background">\n      <Header />\n      \n      {/* Hero Section */}\n      <section className="relative border-b border-border/40 overflow-hidden bg-gradient-to-b from-amber-500/5 to-transparent">\n        <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-amber-500/10 via-transparent to-transparent" />\n        \n        <div className="relative container mx-auto px-4 py-12">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className="text-center max-w-3xl mx-auto"\n          >\n            <div className="flex items-center justify-center gap-3 mb-4">\n              <div className="h-14 w-14 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg shadow-amber-500/20">\n                <BookOpen className="h-7 w-7 text-stone-900" />\n              </div>\n            </div>\n            <h1 className="text-3xl md:text-4xl font-display font-bold tracking-tight mb-3">\n              Opening Encyclopedia\n            </h1>\n            <p className="text-muted-foreground text-lg mb-6">\n              Explore {stats.uniqueNames} chess openings with rich historical context and strategic insights\n            </p>\n            \n            {/* Stats */}\n            <div className="flex items-center justify-center gap-6 text-sm">\n              <div className="flex items-center gap-2">\n                <BookOpen className="h-4 w-4 text-primary" />\n                <span><strong>{stats.total}</strong> variations</span>\n              </div>\n              <div className="flex items-center gap-2">\n                <Zap className="h-4 w-4 text-orange-400" />\n                <span><strong>{stats.gambits}</strong> gambits</span>\n              </div>\n              <div className="flex items-center gap-2">\n                <Crown className="h-4 w-4 text-amber-400" />\n                <span><strong>{stats.withFamousPlayers}</strong> with champions</span>\n              </div>\n            </div>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Opening Collections - Link to Marketplace */}\n      <section className="border-b border-border/40 py-8 bg-gradient-to-b from-transparent to-muted/20">\n        <div className="container mx-auto px-4">\n          <div className="flex items-center justify-between mb-4">\n            <h2 className="font-display text-lg font-semibold flex items-center gap-2">\n              <ShoppingBag className="h-5 w-5 text-primary" />\n              Opening Collections\n            </h2>\n            <Link to="/marketplace">\n              <Button variant="ghost" size="sm" className="gap-1 text-xs">\n                View Marketplace\n                <ArrowRight className="h-3 w-3" />\n              </Button>\n            </Link>\n          </div>\n          <p className="text-sm text-muted-foreground mb-4">\n            Explore visions featuring famous book openings\n          </p>\n          <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3">\n            {FEATURED_COLLECTIONS.map((collection) => (\n              <Link\n                key={collection.name}\n                to={`/marketplace?opening=${encodeURIComponent(collection.query)}`}\n              >\n                <motion.div\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  className={`p-3 rounded-lg border bg-gradient-to-br ${collection.color} cursor-pointer transition-shadow hover:shadow-lg`}\n                >\n                  <div className="text-2xl mb-1">{collection.icon}</div>\n                  <p className="font-medium text-sm truncate">{collection.name}</p>\n                  <p className="text-[10px] text-muted-foreground">Browse collection ‚Üí</p>\n                </motion.div>\n              </Link>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Search and Filters */}\n      <div className="container mx-auto px-4 py-6">\n        <div className="flex flex-col md:flex-row gap-4 mb-6">\n          <div className="relative flex-1">\n            <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />\n            <Input\n              placeholder="Search openings, players, or ECO codes..."\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className="pl-10"\n            />\n          </div>\n          \n          <div className="flex gap-2 overflow-x-auto pb-2 md:pb-0">\n            {(Object.keys(CATEGORY_INFO) as CategoryFilter[]).map((cat) => (\n              <Button\n                key={cat}\n                variant={selectedCategory === cat ? \'default\' : \'outline\'}\n                size="sm"\n                onClick={() => setSelectedCategory(cat)}\n                className="gap-1.5 whitespace-nowrap"\n              >\n                {CATEGORY_INFO[cat].icon}\n                <span className="hidden sm:inline">{CATEGORY_INFO[cat].label}</span>\n              </Button>\n            ))}\n          </div>\n        </div>\n\n        {/* Category description */}\n        {selectedCategory !== \'all\' && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \'auto\' }}\n            className="mb-6 p-3 rounded-lg bg-muted/50 border border-border/50"\n          >\n            <div className="flex items-center gap-2">\n              <span className={CATEGORY_INFO[selectedCategory].color}>\n                {CATEGORY_INFO[selectedCategory].icon}\n              </span>\n              <span className="font-medium">{CATEGORY_INFO[selectedCategory].label}</span>\n              <span className="text-muted-foreground text-sm">‚Äî</span>\n              <span className="text-muted-foreground text-sm">{CATEGORY_INFO[selectedCategory].description}</span>\n            </div>\n          </motion.div>\n        )}\n\n        {/* Results count */}\n        <div className="flex items-center justify-between mb-4">\n          <p className="text-sm text-muted-foreground">\n            Showing {filteredOpenings.length} variations in {Object.keys(groupedOpenings).length} opening families\n          </p>\n        </div>\n\n        {/* Openings Grid */}\n        <div className="grid gap-4">\n          <AnimatePresence mode="popLayout">\n            {Object.entries(groupedOpenings).map(([name, variations], index) => {\n              const mainOpening = variations.find(v => !v.variation) || variations[0];\n              const isExpanded = expandedOpening === name;\n              const hasVariations = variations.length > 1;\n              \n              return (\n                <motion.div\n                  key={name}\n                  layout\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -20 }}\n                  transition={{ delay: index * 0.02 }}\n                >\n                  <Card className={`overflow-hidden border bg-gradient-to-r ${getCategoryStyle(mainOpening.category)} hover:shadow-lg transition-shadow`}>\n                    <CardContent className="p-0">\n                      {/* Main opening header */}\n                      <button\n                        onClick={() => setExpandedOpening(isExpanded ? null : name)}\n                        className="w-full p-4 text-left flex items-start gap-4 hover:bg-background/30 transition-colors"\n                      >\n                        <div className="flex-1 min-w-0">\n                          <div className="flex items-center gap-2 flex-wrap mb-1">\n                            <h3 className="font-display font-semibold text-lg">{name}</h3>\n                            <Badge variant="outline" className="text-[10px]">{mainOpening.eco}</Badge>\n                            <Badge variant="secondary" className="text-[10px] capitalize">{mainOpening.category}</Badge>\n                            {hasVariations && (\n                              <Badge variant="secondary" className="text-[10px]">\n                                {variations.length} variations\n                              </Badge>\n                            )}\n                          </div>\n                          \n                          <p className="text-sm text-muted-foreground mb-2">{mainOpening.description}</p>\n                          \n                          {mainOpening.marketingDescription && (\n                            <p className="text-sm text-foreground/90 mb-2">{mainOpening.marketingDescription}</p>\n                          )}\n                          \n                          {mainOpening.famousPlayers && mainOpening.famousPlayers.length > 0 && (\n                            <div className="flex items-center gap-2">\n                              <Crown className="h-3.5 w-3.5 text-amber-500" />\n                              <span className="text-xs text-muted-foreground">\n                                {mainOpening.famousPlayers.join(\' ‚Ä¢ \')}\n                              </span>\n                            </div>\n                          )}\n                        </div>\n                        \n                        {hasVariations && (\n                          <ChevronRight className={`h-5 w-5 text-muted-foreground transition-transform ${isExpanded ? \'rotate-90\' : \'\'}`} />\n                        )}\n                      </button>\n                      \n                      {/* Expanded variations */}\n                      <AnimatePresence>\n                        {isExpanded && hasVariations && (\n                          <motion.div\n                            initial={{ height: 0, opacity: 0 }}\n                            animate={{ height: \'auto\', opacity: 1 }}\n                            exit={{ height: 0, opacity: 0 }}\n                            className="border-t border-border/50"\n                          >\n                            <div className="p-4 space-y-3 bg-background/50">\n                              {/* Historical significance */}\n                              {mainOpening.historicalSignificance && (\n                                <div className="p-3 rounded-lg bg-amber-500/10 border border-amber-500/20 mb-4">\n                                  <div className="flex items-start gap-2">\n                                    <History className="h-4 w-4 text-amber-500 mt-0.5" />\n                                    <p className="text-sm text-foreground/90">{mainOpening.historicalSignificance}</p>\n                                  </div>\n                                </div>\n                              )}\n                              \n                              {/* Variations list */}\n                              <h4 className="text-xs uppercase tracking-wider text-muted-foreground font-medium mb-2">\n                                Variations\n                              </h4>\n                              <div className="grid gap-2">\n                                {variations.filter(v => v.variation).map((v, i) => (\n                                  <div \n                                    key={i}\n                                    className="p-3 rounded-lg bg-background/50 border border-border/30"\n                                  >\n                                    <div className="flex items-center gap-2 mb-1">\n                                      <span className="font-medium text-sm">{v.variation}</span>\n                                      <Badge variant="outline" className="text-[9px]">{v.eco}</Badge>\n                                    </div>\n                                    <p className="text-xs text-muted-foreground">{v.description}</p>\n                                    <code className="text-[10px] text-muted-foreground font-mono block mt-1">\n                                      {v.moves}\n                                    </code>\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          </motion.div>\n                        )}\n                      </AnimatePresence>\n                    </CardContent>\n                  </Card>\n                </motion.div>\n              );\n            })}\n          </AnimatePresence>\n        </div>\n\n        {/* Empty state */}\n        {filteredOpenings.length === 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className="text-center py-12"\n          >\n            <BookOpen className="h-12 w-12 text-muted-foreground/50 mx-auto mb-4" />\n            <h3 className="text-lg font-medium mb-2">No openings found</h3>\n            <p className="text-muted-foreground text-sm">\n              Try adjusting your search or filter criteria\n            </p>\n          </motion.div>\n        )}\n      </div>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default OpeningEncyclopedia;\n';export{n as default};
