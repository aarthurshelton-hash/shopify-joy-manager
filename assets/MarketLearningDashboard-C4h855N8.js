const e='/**\n * Market Learning Dashboard\n * Comprehensive view of the 24/7 learning system\n * Shows all securities, correlations, evolution, and reports\n */\n\nimport React, { useState, useEffect } from \'react\';\nimport { Card } from \'@/components/ui/card\';\nimport { Button } from \'@/components/ui/button\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Progress } from \'@/components/ui/progress\';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \'@/components/ui/tabs\';\nimport { ScrollArea } from \'@/components/ui/scroll-area\';\nimport { \n  Activity, Brain, TrendingUp, Link2, FileText, \n  RefreshCw, Zap, Clock, Target, BarChart3,\n  CheckCircle, XCircle, Wifi, WifiOff\n} from \'lucide-react\';\nimport { useMarketLearningSystem, SecurityMetrics, MarketCorrelation } from \'@/hooks/useMarketLearningSystem\';\nimport { formatNextPulse } from \'@/hooks/useLiveHeartbeat\';\n\nconst SecurityCard: React.FC<{ metric: SecurityMetrics }> = ({ metric }) => {\n  const accuracy = metric.composite_accuracy * 100;\n  const getAccuracyColor = (acc: number) => {\n    if (acc >= 70) return \'text-green-400\';\n    if (acc >= 50) return \'text-yellow-400\';\n    return \'text-red-400\';\n  };\n\n  return (\n    <Card className="p-3 bg-card/50 border-border/50">\n      <div className="flex items-center justify-between mb-2">\n        <span className="font-mono font-bold text-foreground">{metric.symbol}</span>\n        <Badge variant={accuracy >= 60 ? \'default\' : \'secondary\'} className="text-xs">\n          {metric.total_predictions} pred\n        </Badge>\n      </div>\n      \n      <div className="space-y-1">\n        <div className="flex justify-between text-xs">\n          <span className="text-muted-foreground">Composite</span>\n          <span className={getAccuracyColor(accuracy)}>{accuracy.toFixed(1)}%</span>\n        </div>\n        <Progress value={accuracy} className="h-1.5" />\n        \n        <div className="grid grid-cols-2 gap-1 mt-2 text-xs">\n          <div className="flex justify-between">\n            <span className="text-muted-foreground">Dir:</span>\n            <span className={getAccuracyColor(metric.direction_accuracy * 100)}>\n              {(metric.direction_accuracy * 100).toFixed(0)}%\n            </span>\n          </div>\n          <div className="flex justify-between">\n            <span className="text-muted-foreground">Mag:</span>\n            <span className={getAccuracyColor(metric.magnitude_accuracy * 100)}>\n              {(metric.magnitude_accuracy * 100).toFixed(0)}%\n            </span>\n          </div>\n          <div className="flex justify-between">\n            <span className="text-muted-foreground">Tim:</span>\n            <span className={getAccuracyColor(metric.timing_accuracy * 100)}>\n              {(metric.timing_accuracy * 100).toFixed(0)}%\n            </span>\n          </div>\n          <div className="flex justify-between">\n            <span className="text-muted-foreground">Cal:</span>\n            <span className={getAccuracyColor(metric.calibration_accuracy * 100)}>\n              {(metric.calibration_accuracy * 100).toFixed(0)}%\n            </span>\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n};\n\nconst CorrelationRow: React.FC<{ correlation: MarketCorrelation }> = ({ correlation }) => {\n  const strength = Math.abs(correlation.correlation_coefficient);\n  const isPositive = correlation.correlation_coefficient > 0;\n  \n  return (\n    <div className="flex items-center justify-between py-2 border-b border-border/30 last:border-0">\n      <div className="flex items-center gap-2">\n        <span className="font-mono text-sm text-foreground">{correlation.symbol_a}</span>\n        <Link2 className={`w-3 h-3 ${isPositive ? \'text-green-400\' : \'text-red-400\'}`} />\n        <span className="font-mono text-sm text-foreground">{correlation.symbol_b}</span>\n      </div>\n      <div className="flex items-center gap-2">\n        <Progress value={strength * 100} className="w-16 h-1.5" />\n        <span className={`text-xs font-mono ${isPositive ? \'text-green-400\' : \'text-red-400\'}`}>\n          {(correlation.correlation_coefficient * 100).toFixed(1)}%\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport const MarketLearningDashboard: React.FC = () => {\n  const { \n    isConnected, \n    isCollecting,\n    lastUpdate,\n    securityMetrics,\n    correlations,\n    evolutionState,\n    report,\n    ticksCollectedToday,\n    predictionsToday,\n    error,\n    heartbeat,\n    actions\n  } = useMarketLearningSystem(true);\n\n  const [isGeneratingReport, setIsGeneratingReport] = useState(false);\n\n  const handleGenerateReport = async () => {\n    setIsGeneratingReport(true);\n    await actions.generateReport();\n    setIsGeneratingReport(false);\n  };\n\n  const handleForceSync = async () => {\n    await actions.syncAll();\n    await actions.triggerCollection();\n    await actions.triggerResolution();\n    await actions.triggerCorrelation();\n    await actions.triggerEvolution();\n  };\n\n  return (\n    <div className="space-y-4">\n      {/* Status Bar */}\n      <Card className="p-3 bg-card/80 border-border">\n        <div className="flex items-center justify-between flex-wrap gap-2">\n          <div className="flex items-center gap-4">\n            <div className="flex items-center gap-2">\n              {isConnected ? (\n                <Wifi className="w-4 h-4 text-green-400" />\n              ) : (\n                <WifiOff className="w-4 h-4 text-red-400" />\n              )}\n              <span className="text-sm text-muted-foreground">\n                {isConnected ? \'Connected\' : \'Disconnected\'}\n              </span>\n            </div>\n            \n            <div className="flex items-center gap-2">\n              <Activity className={`w-4 h-4 ${heartbeat.isAlive ? \'text-green-400 animate-pulse\' : \'text-muted-foreground\'}`} />\n              <span className="text-xs text-muted-foreground">\n                Next: {formatNextPulse(heartbeat.nextPulseIn)}\n              </span>\n            </div>\n            \n            <div className="flex items-center gap-2">\n              <Zap className="w-4 h-4 text-yellow-400" />\n              <span className="text-xs text-muted-foreground">\n                {ticksCollectedToday} ticks today\n              </span>\n            </div>\n            \n            <div className="flex items-center gap-2">\n              <Target className="w-4 h-4 text-blue-400" />\n              <span className="text-xs text-muted-foreground">\n                {predictionsToday} predictions\n              </span>\n            </div>\n          </div>\n          \n          <div className="flex items-center gap-2">\n            <Button \n              size="sm" \n              variant="outline" \n              onClick={handleForceSync}\n              disabled={heartbeat.isProcessing}\n            >\n              <RefreshCw className={`w-3 h-3 mr-1 ${heartbeat.isProcessing ? \'animate-spin\' : \'\'}`} />\n              Sync\n            </Button>\n            <Button \n              size="sm" \n              onClick={handleGenerateReport}\n              disabled={isGeneratingReport}\n            >\n              <FileText className="w-3 h-3 mr-1" />\n              Report\n            </Button>\n          </div>\n        </div>\n        \n        {error && (\n          <div className="mt-2 text-xs text-red-400 bg-red-500/10 p-2 rounded">\n            {error}\n          </div>\n        )}\n      </Card>\n\n      {/* Main Content */}\n      <Tabs defaultValue="securities" className="space-y-4">\n        <TabsList className="grid grid-cols-4 w-full">\n          <TabsTrigger value="securities" className="text-xs">\n            <BarChart3 className="w-3 h-3 mr-1" />\n            Securities\n          </TabsTrigger>\n          <TabsTrigger value="correlations" className="text-xs">\n            <Link2 className="w-3 h-3 mr-1" />\n            Correlations\n          </TabsTrigger>\n          <TabsTrigger value="evolution" className="text-xs">\n            <Brain className="w-3 h-3 mr-1" />\n            Evolution\n          </TabsTrigger>\n          <TabsTrigger value="report" className="text-xs">\n            <FileText className="w-3 h-3 mr-1" />\n            Report\n          </TabsTrigger>\n        </TabsList>\n\n        {/* Securities Tab */}\n        <TabsContent value="securities">\n          <Card className="p-4 bg-card/50">\n            <div className="flex items-center justify-between mb-4">\n              <h3 className="text-sm font-semibold text-foreground">Security Accuracy Metrics</h3>\n              <Badge variant="outline">{securityMetrics.length} tracked</Badge>\n            </div>\n            \n            <ScrollArea className="h-[400px]">\n              <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">\n                {securityMetrics.map(metric => (\n                  <SecurityCard key={metric.symbol} metric={metric} />\n                ))}\n                \n                {securityMetrics.length === 0 && (\n                  <div className="col-span-full text-center text-muted-foreground py-8">\n                    <Brain className="w-8 h-8 mx-auto mb-2 opacity-50" />\n                    <p className="text-sm">No security data yet. System is learning...</p>\n                  </div>\n                )}\n              </div>\n            </ScrollArea>\n          </Card>\n        </TabsContent>\n\n        {/* Correlations Tab */}\n        <TabsContent value="correlations">\n          <Card className="p-4 bg-card/50">\n            <div className="flex items-center justify-between mb-4">\n              <h3 className="text-sm font-semibold text-foreground">Cross-Market Correlations</h3>\n              <Button size="sm" variant="outline" onClick={actions.triggerCorrelation}>\n                <RefreshCw className="w-3 h-3 mr-1" />\n                Recalculate\n              </Button>\n            </div>\n            \n            <ScrollArea className="h-[400px]">\n              <div className="space-y-1">\n                {correlations\n                  .filter(c => Math.abs(c.correlation_coefficient) > 0.3)\n                  .map((corr, i) => (\n                    <CorrelationRow key={i} correlation={corr} />\n                  ))}\n                \n                {correlations.length === 0 && (\n                  <div className="text-center text-muted-foreground py-8">\n                    <Link2 className="w-8 h-8 mx-auto mb-2 opacity-50" />\n                    <p className="text-sm">No correlations calculated yet.</p>\n                  </div>\n                )}\n              </div>\n            </ScrollArea>\n          </Card>\n        </TabsContent>\n\n        {/* Evolution Tab */}\n        <TabsContent value="evolution">\n          <Card className="p-4 bg-card/50">\n            <div className="flex items-center justify-between mb-4">\n              <h3 className="text-sm font-semibold text-foreground">Self-Evolving System</h3>\n              {evolutionState && (\n                <Badge variant="outline">Generation {evolutionState.generation}</Badge>\n              )}\n            </div>\n            \n            {evolutionState ? (\n              <div className="space-y-4">\n                <div className="grid grid-cols-2 gap-4">\n                  <div className="space-y-2">\n                    <div className="flex justify-between text-sm">\n                      <span className="text-muted-foreground">Fitness Score</span>\n                      <span className="font-mono text-foreground">\n                        {(evolutionState.fitness_score * 100).toFixed(1)}%\n                      </span>\n                    </div>\n                    <Progress value={evolutionState.fitness_score * 100} className="h-2" />\n                  </div>\n                  \n                  <div className="space-y-2">\n                    <div className="flex justify-between text-sm">\n                      <span className="text-muted-foreground">Total Predictions</span>\n                      <span className="font-mono text-foreground">\n                        {evolutionState.total_predictions.toLocaleString()}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className="border-t border-border/50 pt-4">\n                  <h4 className="text-xs font-semibold text-muted-foreground mb-3">EVOLVED GENES</h4>\n                  <div className="grid grid-cols-2 gap-2">\n                    {Object.entries(evolutionState.genes).map(([gene, value]) => (\n                      <div key={gene} className="flex justify-between text-xs">\n                        <span className="text-muted-foreground capitalize">\n                          {gene.replace(/([A-Z])/g, \' $1\').trim()}\n                        </span>\n                        <span className="font-mono text-foreground">\n                          {(Number(value) * 100).toFixed(1)}%\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n                \n                {evolutionState.last_mutation_at && (\n                  <div className="text-xs text-muted-foreground flex items-center gap-1">\n                    <Clock className="w-3 h-3" />\n                    Last mutation: {new Date(evolutionState.last_mutation_at).toLocaleString()}\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className="text-center text-muted-foreground py-8">\n                <Brain className="w-8 h-8 mx-auto mb-2 opacity-50" />\n                <p className="text-sm">Evolution state initializing...</p>\n              </div>\n            )}\n          </Card>\n        </TabsContent>\n\n        {/* Report Tab */}\n        <TabsContent value="report">\n          <Card className="p-4 bg-card/50">\n            <div className="flex items-center justify-between mb-4">\n              <h3 className="text-sm font-semibold text-foreground">System Report</h3>\n              <Button \n                size="sm" \n                onClick={handleGenerateReport}\n                disabled={isGeneratingReport}\n              >\n                {isGeneratingReport ? (\n                  <RefreshCw className="w-3 h-3 mr-1 animate-spin" />\n                ) : (\n                  <FileText className="w-3 h-3 mr-1" />\n                )}\n                Generate\n              </Button>\n            </div>\n            \n            {report ? (\n              <ScrollArea className="h-[400px]">\n                <div className="space-y-4">\n                  <div className="grid grid-cols-3 gap-4">\n                    <Card className="p-3 bg-background/50">\n                      <div className="text-xs text-muted-foreground mb-1">Overall Accuracy</div>\n                      <div className="text-2xl font-bold text-foreground">\n                        {(report.overallAccuracy * 100).toFixed(1)}%\n                      </div>\n                    </Card>\n                    <Card className="p-3 bg-background/50">\n                      <div className="text-xs text-muted-foreground mb-1">Total Predictions</div>\n                      <div className="text-2xl font-bold text-foreground">\n                        {report.summary.totalPredictions.toLocaleString()}\n                      </div>\n                    </Card>\n                    <Card className="p-3 bg-background/50">\n                      <div className="text-xs text-muted-foreground mb-1">System Fitness</div>\n                      <div className="text-2xl font-bold text-foreground">\n                        {(report.summary.systemFitness * 100).toFixed(1)}%\n                      </div>\n                    </Card>\n                  </div>\n                  \n                  <div className="border-t border-border/50 pt-4">\n                    <h4 className="text-xs font-semibold text-muted-foreground mb-3">TOP PERFORMERS</h4>\n                    <div className="space-y-2">\n                      {report.securityMetrics.slice(0, 5).map(metric => (\n                        <div key={metric.symbol} className="flex items-center justify-between">\n                          <div className="flex items-center gap-2">\n                            <span className="font-mono text-sm text-foreground">{metric.symbol}</span>\n                            <Badge variant="outline" className="text-xs">\n                              {metric.total_predictions} pred\n                            </Badge>\n                          </div>\n                          <div className="flex items-center gap-2">\n                            {metric.composite_accuracy >= 0.6 ? (\n                              <CheckCircle className="w-4 h-4 text-green-400" />\n                            ) : (\n                              <XCircle className="w-4 h-4 text-red-400" />\n                            )}\n                            <span className="font-mono text-sm">\n                              {(metric.composite_accuracy * 100).toFixed(1)}%\n                            </span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <div className="text-xs text-muted-foreground">\n                    Report generated: {new Date(report.generatedAt).toLocaleString()}\n                  </div>\n                </div>\n              </ScrollArea>\n            ) : (\n              <div className="text-center text-muted-foreground py-8">\n                <FileText className="w-8 h-8 mx-auto mb-2 opacity-50" />\n                <p className="text-sm">Click "Generate" to create a comprehensive report.</p>\n              </div>\n            )}\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* Last Update */}\n      {lastUpdate && (\n        <div className="text-xs text-center text-muted-foreground">\n          Last sync: {lastUpdate.toLocaleTimeString()}\n        </div>\n      )}\n    </div>\n  );\n};\n';export{e as default};
