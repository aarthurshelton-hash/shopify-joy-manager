const n="/**\n * Pattern Similarity Calculator\n */\n\nimport { ColorFlowSignature, StrategicArchetype } from '../colorFlowAnalysis';\nimport { PatternRecord } from './types';\n\nexport function calculateSimilarity(signature: ColorFlowSignature, pattern: PatternRecord): number {\n  const chars = pattern.characteristics;\n  let score = 0;\n\n  // Flow direction match (25 points)\n  if (signature.flowDirection === chars.flowDirection) {\n    score += 25;\n  } else if (areFlowsRelated(signature.flowDirection, chars.flowDirection)) {\n    score += 12;\n  }\n\n  // Intensity similarity (20 points)\n  const intensityDiff = Math.abs(signature.intensity - chars.intensity);\n  score += Math.max(0, 20 - intensityDiff / 2);\n\n  // Volatility similarity (15 points)\n  const volatilityDiff = Math.abs(signature.temporalFlow.volatility - chars.volatility);\n  score += Math.max(0, 15 - volatilityDiff / 3);\n\n  // Dominant side match (20 points)\n  if (signature.dominantSide === chars.dominantSide) {\n    score += 20;\n  } else if (signature.dominantSide === 'contested' || chars.dominantSide === 'contested') {\n    score += 10;\n  }\n\n  // Center control similarity (10 points)\n  const centerDiff = Math.abs(signature.quadrantProfile.center - chars.centerControl);\n  score += Math.max(0, 10 - centerDiff / 5);\n\n  // Side activity similarity (10 points)\n  const kingsideActivity = (signature.quadrantProfile.kingsideWhite + signature.quadrantProfile.kingsideBlack) / 2;\n  const kingsideDiff = Math.abs(kingsideActivity - chars.kingsideActivity);\n  score += Math.max(0, 5 - kingsideDiff / 10);\n\n  const queensideActivity = (signature.quadrantProfile.queensideWhite + signature.quadrantProfile.queensideBlack) / 2;\n  const queensideDiff = Math.abs(queensideActivity - chars.queensideActivity);\n  score += Math.max(0, 5 - queensideDiff / 10);\n\n  return Math.round(score);\n}\n\nexport function areFlowsRelated(a: string, b: string): boolean {\n  const related: Record<string, string[]> = {\n    kingside: ['central', 'diagonal'],\n    queenside: ['central', 'diagonal'],\n    central: ['kingside', 'queenside', 'balanced'],\n    balanced: ['central'],\n    diagonal: ['kingside', 'queenside'],\n  };\n  return related[a]?.includes(b) || false;\n}\n\nexport function getMatchingFactors(signature: ColorFlowSignature, pattern: PatternRecord): string[] {\n  const factors: string[] = [];\n  const chars = pattern.characteristics;\n\n  if (signature.flowDirection === chars.flowDirection) {\n    factors.push(`Same flow direction: ${signature.flowDirection}`);\n  }\n\n  if (signature.dominantSide === chars.dominantSide) {\n    factors.push(`Same dominant side: ${signature.dominantSide}`);\n  }\n\n  if (Math.abs(signature.intensity - chars.intensity) < 15) {\n    factors.push('Similar intensity level');\n  }\n\n  if (Math.abs(signature.temporalFlow.volatility - chars.volatility) < 20) {\n    factors.push('Similar game volatility');\n  }\n\n  if (factors.length === 0) {\n    factors.push('Structural pattern similarity');\n  }\n\n  return factors;\n}\n\nexport function getRelatedArchetypes(archetype: StrategicArchetype): StrategicArchetype[] {\n  const relations: Record<StrategicArchetype, StrategicArchetype[]> = {\n    kingside_attack: ['sacrificial_attack', 'open_tactical'],\n    queenside_expansion: ['positional_squeeze', 'closed_maneuvering'],\n    central_domination: ['piece_harmony', 'positional_squeeze'],\n    prophylactic_defense: ['closed_maneuvering', 'endgame_technique'],\n    pawn_storm: ['kingside_attack', 'opposite_castling'],\n    piece_harmony: ['central_domination', 'positional_squeeze'],\n    opposite_castling: ['kingside_attack', 'pawn_storm'],\n    closed_maneuvering: ['prophylactic_defense', 'positional_squeeze'],\n    open_tactical: ['sacrificial_attack', 'kingside_attack'],\n    endgame_technique: ['prophylactic_defense', 'positional_squeeze'],\n    sacrificial_attack: ['open_tactical', 'kingside_attack'],\n    positional_squeeze: ['central_domination', 'closed_maneuvering'],\n    unknown: [],\n  };\n  return relations[archetype] || [];\n}\n";export{n as default};
