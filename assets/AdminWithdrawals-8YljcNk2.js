import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as m,D as h,aB as p,aC as f,aD as w,aE as j,p as v,t as g,w as y,dy as b,dt as C,bo as N,dq as z,cZ as D,a1 as q,a2 as B,a3 as _,a4 as M,a5 as L,aW as A,bC as S,dz as I,b as U,y as W}from"./index-DxnJiuLa.js";import{C as J}from"./calendar-CDPBTH78.js";!function(){const e=K,t=P();for(;;)try{if(650633===-parseInt(e(594))/1+-parseInt(e(554))/2+-parseInt(e(562))/3*(parseInt(e(605))/4)+-parseInt(e(536))/5*(parseInt(e(604))/6)+-parseInt(e(570))/7*(parseInt(e(578))/8)+parseInt(e(557))/9*(-parseInt(e(596))/10)+parseInt(e(544))/11)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const H=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[K(582)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=K,t={};t[e(603)]=e(516)+"+$";const s=t;return H.toString()[e(615)](s[e(603)]).toString()[e(515)+"r"](H)[e(615)]("(((.+)+)+)+$")});function P(){const e=["AxnWBgf5x25HBq","DgLJyxrLza","mJm3nJy4mefQBufNyG","Bg9N","zf9Jzw50CYWGDa","ntC3ohDkDg5Lza","t1PrB28","yxbWCM92zwrFyW","CMvXDwvZDf9Pza","CMvQzwn0zwq","m2H6rw9bsq","zu1MDMO","rLfuA2u","ELbpDLa","DcbMB3vUzcbVCG","D2fYBG","CgvUzgLUz19HBq","x19WCM90B19F","mJftCerMEMi","DxnLCL9Pza","B3rHBf93AxrOza","cI0TlqO","BgvUz3rO","yur2z28","B3rHBf9LyxjUzq","Dg9tDhjPBMC","mJq3mJGYneHZs2LkAq","BKzcCg8","zgf0yq","uMvQzwn0Aw9Uia","yxbWBhK","CMrHuvy","ChjVDMvKihn0yq","rMTYDxq","DxbKyxrL","wfPjy24","CMvXDwLYzwq","v2fSBgv0ihvWza","y3jLyxrLzf9HDa","Cgf5B3v0x2rLDa","x3jLCxvLC3rZ","CMf3BL9Jzw50CW","ntC1oty3y1zAEvnL","zhjHD25Fy2vUDa","mJCWBhPgEKvy","C3rHDhvZ","C2LUz2XL","t0X6Ehy","vw5RBM93BIbvCW","Cu9Qqw4","q21qu3K","DxDesfm","nMLlCMnxzW","nde2mdqYngXWqNnIwq","r3jPD28","DxnLCL9PzcWGza","tM90igf1DgHLBG","B3vUDa","Aw52B2TL","C3vJy2vZCW","yxbWCM92zwrFyq","ywrTAw5FBM90zq","D2L0AgrYyxDHBa","C2vHCMnO","BMn0Aw9UkcKG","y29TCgXLDgvKxW","sxPLzKC","qMHir3i","CM4GDgHPCYiPka","CK13A2u","y29UC29Szq","vuP6wgC","CMvQzwn0zwrFyW","DNjXsNC","CgvUzgLUzW","DhjHy2u","C2vSzwn0","zwjfBKS","Bw91BNq","y29TCgXLDgvK","ig5VDcbPBIbHCa","CMv0DxjUicHMDq","CwHpEwG","y29UC3rYDwn0BW","kcGOlISPkYKRkq","zxHJzxb0Aw9U","uKDsuxK","s3D3zfq","yxv0Aa","wg5VB1a","CgvUzgLUz19JBW","yw1VDw50x2nLBG","ywXS","BwfW","Dg90ywXFD2L0Aa","Afrgwxu","B3jKzxi","zNvUy3rPB25Z","ChjVDg90ExbL","yxrLigvYCM9YoG","zNjVBq","yMLUza","uMvXDwvZDcbUBW","BffqBM8","mJG5nJC4me9zDw5dAG","vvnOsg4","yxbWCM92zwq","z2v0","zxjYB3i","zM9YrwfJAa","Dg9ju09tDhjPBG","DgHKCMf3ywW","ntq3nJK0otvOr0jSA2C","zwrFy2vUDhm","z2v0vxnLCG","DxnLCL93ywXSzq","DgfIBgu","BuPIrM8","DxnLCL9PzcWGDa","DhvZ"];return(P=function(){return e})()}function K(e,t){e-=496;const s=P();let n=s[e];if(void 0===K.LCJpzH){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};K.LnzxDW=r,K.SMRSoI={},K.LCJpzH=!0}const a=e+s[0],c=K.SMRSoI[a];if(c)n=c;else{const e=function(e){this.KlKpby=e,this.yQXOxj=[1,0,0],this.Bylgli=function(){return"newState"},this.tgNDoP="\\w+ *\\(\\) *{\\w+ *",this.CJQaSv="['|\"].+['|\"];? *}"};e.prototype.SUoIxF=function(){const e=new RegExp(this.tgNDoP+this.CJQaSv).test(this.Bylgli.toString())?--this.yQXOxj[1]:--this.yQXOxj[0];return this.triSiz(e)},e.prototype.triSiz=function(e){return Boolean(~e)?this.yxCagQ(this.KlKpby):e},e.prototype.yxCagQ=function(e){for(let t=0,s=this.yQXOxj.length;t<s;t++)this.yQXOxj.push(Math.round(Math.random())),s=this.yQXOxj.length;return e(this.yQXOxj[0])},new e(K).SUoIxF(),n=K.LnzxDW(n),K.SMRSoI[a]=n}return n}H();const G=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}();async function X(t){const s=K,n={};n[s(599)]=s(524),n[s(558)]=s(607)+s(552)+"e";const r=n;try{const n={ascending:!1};let a=e[s(532)](s(614)+s(592))[s(508)]("*")[s(528)](s(590),n);t&&t!==r[s(599)]&&(a=a.eq(s(597),t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[]).map(e=>e[s(571)]))],{data:l}=await e.from("profiles").select(r[s(558)]).in(s(571),o),{data:d}=await e[s(532)](s(547)+"ts").select(s(550)+s(576)+s(556)+s(572)+s(593)).in(s(571),o),u=new Map((null==l?void 0:l[s(525)](e=>[e[s(571)],e]))||[]),x=new Map((null==d?void 0:d[s(525)](e=>[e.user_id,e]))||[]),m=(c||[])[s(525)](e=>{var t,n,r;return{...e,payout_details:e[s(591)+"ails"],user_display_name:(null==(t=u[s(539)](e.user_id))?void 0:t.display_name)||s(600)+"er",wallet_total_earned:(null==(n=x[s(539)](e[s(571)]))?void 0:n["total_earn"+s(545)])||0,wallet_total_withdrawn:(null==(r=x.get(e[s(571)]))?void 0:r[s(526)+s(595)+"s"])||0}}),h={};return h.data=m,h[s(540)]=null,h}catch(a){const e={};return e[s(580)]=[],e.error=a,e}}async function k(){const t=K,s={};s[t(565)]=t(561),s.qEJyZ=t(614)+t(592);const n=s;try{const{data:s,error:r}=await e.from(n.qEJyZ).select("status, amount_cents");if(r)throw r;const a={};a[t(522)+"unt"]=0,a["pending_am"+t(609)]=0,a[t(559)+t(609)]=0,a[t(612)+t(510)]=0,a[t(497)+"total"]=0,a[t(504)+t(609)]=0;const c=a;(s||[])[t(541)](e=>{const s=t;switch(e[s(597)]){case s(506):c[s(522)+"unt"]++,c[s(568)+s(609)]+=e[s(523)+"ts"];break;case"approved":c.approved_count++,c[s(612)+s(510)]+=e.amount_cents;break;case s(511):c.completed_total+=e[s(523)+"ts"];break;case n[s(565)]:c[s(504)+s(609)]++}});const i={};return i[t(580)]=c,i[t(540)]=null,i}catch(r){const e={};return e[t(580)]=null,e[t(540)]=r,e}}G(void 0,function(){const e=K,t={XZIcn:function(e,t){return e(t)},mJbFo:e(513)+e(496),BhHGr:'{}.constructor("retu'+e(500)+" )",cQIvu:"info",rMwke:"error",CmPSy:e(507),AvXqk:function(e,t){return e<t}},s=function(){const s=e;let n;try{n=t[s(587)](Function,t[s(549)]+t[s(499)]+");")()}catch(r){"utDyV"===s(579)?_0x41309e[s(540)]("Wallet upd"+s(531),_0x334584):n=window}return n}(),n=s[e(502)]=s[e(502)]||{},r=[e(555),e(567),t.cQIvu,t[e(501)],e(517),e(548),t[e(602)]];for(let a=0;t.AvXqk(a,r[e(574)]);a++){const t=G.constructor.prototype[e(533)](G),s=r[a],c=n[s]||t;t[e(569)]=G[e(533)](G),t[e(577)]=c[e(577)][e(533)](c),n[s]=t}})(),function(){const e=E,t=Y();for(;;)try{if(724457===parseInt(e(404))/1*(parseInt(e(454))/2)+parseInt(e(443))/3*(parseInt(e(406))/4)+-parseInt(e(448))/5*(-parseInt(e(445))/6)+parseInt(e(400))/7+parseInt(e(412))/8*(parseInt(e(386))/9)+-parseInt(e(457))/10*(-parseInt(e(402))/11)+parseInt(e(429))/12*(-parseInt(e(431))/13))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const O=function(){const e=E,t={};t[e(389)]=function(e,t){return e===t},t.inCHM=e(430);const s=t;let n=!0;return function(t,r){const a=e,c={bDQUg:function(e,t){return s[E(389)](e,t)},YJvmE:s[a(382)]},i=n?function(){const e=a;if(r){if(!c[e(426)](e(451),c.YJvmE)){const e=r.apply(t,arguments);return r=null,e}{const t=_0x2007b3[e(403)+"r"][e(425)].bind(_0x50fe4e),s=_0x54bce9[_0xdfb34d],n=_0x1d862a[s]||t;t[e(444)]=_0x4ea1fc.bind(_0x4b278b),t[e(408)]=n[e(408)].bind(n),_0x25ed69[s]=t}}}:function(){};return n=!1,i}}()(void 0,function(){const e=E,t={};t[e(455)]=e(413)+"+$";const s=t;return O.toString()[e(435)](e(413)+"+$")[e(408)]()[e(403)+"r"](O).search(s[e(455)])});O();const R=function(){const e=E,t={};t[e(453)]=function(e,t){return e===t},t.jBbVR=e(447);const s=t;let n=!0;return function(e,t){const r=n?function(){const n=E;if(s[n(453)](s[n(398)],n(407))){const e={};return e[n(438)]=null,e[n(421)]=_0x210c04,e}if(t){const s=t[n(414)](e,arguments);return t=null,s}}:function(){};return n=!1,r}}();function E(e,t){e-=380;const s=Y();let n=s[e];if(void 0===E.wdHbRP){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};E.UVcJoz=r,E.MpbXGt={},E.wdHbRP=!0}const a=e+s[0],c=E.MpbXGt[a];if(c)n=c;else{const e=function(e){this.xnUYJg=e,this.AUXGeu=[1,0,0],this.jOjpbD=function(){return"newState"},this.dIdqoa="\\w+ *\\(\\) *{\\w+ *",this.sRyZEc="['|\"].+['|\"];? *}"};e.prototype.OSJQch=function(){const e=new RegExp(this.dIdqoa+this.sRyZEc).test(this.jOjpbD.toString())?--this.AUXGeu[1]:--this.AUXGeu[0];return this.MunEMF(e)},e.prototype.MunEMF=function(e){return Boolean(~e)?this.OsyIHA(this.xnUYJg):e},e.prototype.OsyIHA=function(e){for(let t=0,s=this.AUXGeu.length;t<s;t++)this.AUXGeu.push(Math.round(Math.random())),s=this.AUXGeu.length;return e(this.AUXGeu[0])},new e(E).OSJQch(),n=E.UVcJoz(n),E.MpbXGt[a]=n}return n}function Y(){const e=["C2fSzq","BgLTAxq","AezKtuW","mZK5mtvuwuTKvM0","Axz0zMS","zvbvs2i","suf2wK0","Cf9SAxn0Aw5NxW","D1zhrfa","q2LLtui","z2v0vxnLCG","Bg1JuM0","yxrLx3DHBgXLDa","BNnHy3rPB25Z","zxHJzxb0Aw9U","AKjIvLi","wMXQsvC","mtKXodqYmfL2s3HNwa","yMLUza","mtKXngDzBwjuyW","y29UC3rYDwn0BW","mJD3r0rvwxi","yxv0Aa","nte3mZi1mKrouhHSsW","whLct2q","Dg9tDhjPBMC","E30Uy29UC3rYDq","Cf91C2vYx2LK","y2vFy2vUDhm","otiWC3rqr3fI","kcGOlISPkYKRkq","yxbWBhK","tM90igf1DgHLBG","y3rVCIGICMv0Dq","z2v0x29Yx2nYzq","Bg9N","ANfPsKC","CM4GDgHPCYiPka","zxjYB3i","yxnJzw5KAw5N","D2fSBgv0x3rYyq","qMzkAuO","ChjVDg90ExbL","yKrrvwC","B3jKzxi","we9gwge","mJC3ote3otzQDgLWB3y","u0LdrLu","mJzzt0D2A0C","r21mEwO","y29UC29Szq","C2vSzwn0","C2vHCMnO","BMn0Aw9UkcKG","D2fYBG","zgf0yq","BvzQuva","DgLJyxrLza","Cf9IDxLLCL9Pza","CMv0DxjUicHMDq","m3b6ELnqDq","x19WCM90B19F","mZG0nZy1nLvRz21ZDG","DgfIBgu","svPyDg4","mtb0su9suhq","uwfkzgK","D2PAtuC","y2Lbv1K","CNbJ","wxHqrhG","nJu5nZHSu091yxO","tunesvy","DxnLCL9Pza","nJm1ntbgvKLeBva","DhjHy2u","Aw5MBW","zer0tNy","BNjUvfi","C3vJy2vZCW","Aw5dse0"];return(Y=function(){return e})()}function Q(e){const t={mVjQP:function(e,t){return e/t}};return"$"+t[E(439)](e,100).toFixed(2)}function Z(){var H,P;const{user:G}=t(),O=s(),[R,E]=n.useState(!1),[Y,Z]=n.useState(!0),[F,V]=n.useState([]),[T,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[G]);const oe=async()=>{if(!G)return void Z(!1);const{data:t}=await e.rpc("has_role",{_user_id:G.id,_role:"admin"});!0===t&&(E(!0),await le()),Z(!1)},le=async()=>{const[e,t]=await Promise.all([X(ee),k()]);e.data&&V(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(W,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(W,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(W,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(W,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(W,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(W,{variant:"outline",children:e})}};return Y?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):G&&R?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>O(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),T&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Q(T.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Q(T.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q(T.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(j,{value:ee,children:r.jsxs(c,{children:[r.jsxs(v,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===F.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(b,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(C,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:F.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(N,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(J,{className:"h-3 w-3"}),D(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",Q(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:Q(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(q,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(B,{children:[r.jsxs(_,{children:[r.jsxs(M,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(L,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(H=se.request.payout_details)?void 0:H.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:Q(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(A,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(S,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(P=se.request.payout_details)?void 0:P.email})]})]})]}),r.jsxs(I,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=K,r={};r[n(563)]="bpqnl",r[n(585)]="MouBy",r[n(521)]=n(608)+n(553),r[n(509)]=function(e,t){return e||t},r.UShHn=n(506);const a=r;try{if(a[n(563)]!==a[n(585)]){const{data:{user:r}}=await e.auth.getUser();if(!r)throw new Error(a[n(521)]);const{error:c}=await e[n(532)](n(614)+"_requests").update({status:n(538),admin_notes:a[n(509)](s,null),reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(n(597),a[n(537)]);if(c)throw c;const i={};return i[n(611)]=!0,i.error=null,i}{const e={data:null};return e.error=_0x1b8e98,e}}catch(c){const e={success:!1};return e[n(540)]=c,e}}(se.request.id,re),t.success&&U.success("Withdrawal approved");break;case"reject":if(!re.trim())return U.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=K,r={};r[n(564)]=n(581)+"reason is "+n(588),r[n(519)]="withdrawal_requests",r.UJzXg=n(561),r[n(505)]="status",r[n(498)]=n(506),r[n(527)]=n(518);const a=r;try{const{data:{user:r}}=await e[n(520)][n(546)]();if(!r)throw new Error(n(608)+n(553));if(!s)throw new Error(a.FQTke);const{error:c}=await e[n(532)](a[n(519)])[n(586)]({status:a[n(503)],admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(542)+"g"]()}).eq("id",t).eq(a[n(505)],a.IzefG);if(c)throw c;const i={};return i[n(611)]=!0,i[n(540)]=null,i}catch(c){if(a[n(527)]===n(518)){const e={success:!1};return e.error=c,e}{const e=_0x46f1cf[n(515)+"r"][n(530)][n(533)](_0x23e13f),t=_0x452d1a[_0x323f69],s=_0x300d3c[t]||e;e[n(569)]=_0x58157f.bind(_0x47721a),e[n(577)]=s.toString[n(533)](s),_0x2792a6[t]=e}}}(se.request.id,re),t.success&&U.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=K,r={};r[n(601)]="Not authenticated",r[n(606)]=n(614)+"_requests",r[n(514)]="status",r.NQOfd="approved",r.rdaQV=function(e,t){return e||t},r[n(535)]=n(534)+n(566)+n(512)+n(584)+n(551);const a=r;try{const{data:{user:r}}=await e[n(520)].getUser();if(!r)throw new Error(a.qOjAn);const{data:c,error:i}=await e.from(a[n(606)])[n(508)]("*").eq("id",t).eq(a[n(514)],a.NQOfd)[n(598)]();if(a[n(583)](i,!c))throw new Error(a[n(535)]);const{error:o}=await e.from(n(614)+n(592))[n(586)]({status:n(511),admin_notes:s?(c.admin_notes||"")+n(573)+s:c[n(613)+"s"],completed_at:(new Date)[n(542)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(560)]=t,l.user_id=c[n(571)],l[n(523)+"ts"]=c[n(523)+"ts"];const d={};d.body=l;const{error:u}=await e[n(529)][n(610)]("process-wi"+n(543),d);if(u&&"EMeKJ"===n(575)){const e=_0x3aad45?function(){if(_0x20e6df){const e=_0xcaa57b[n(582)](_0x97f8a7,arguments);return _0x29210c=null,e}}:function(){};return _0x28eec8=!1,e}const x={};return x[n(611)]=!0,x[n(540)]=null,x}catch(c){const e={};return e[n(611)]=!1,e[n(540)]=c,e}}(se.request.id,re),t.success&&U.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?U.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>O("/"),children:"Go Home"})]})})})}R(void 0,function(){const e=E,t={XOFXa:function(e,t){return e(t)},lmcRm:e(442)+e(436),nrnTR:function(e){return e()}};let s;try{const n=t[e(428)](Function,t[e(394)]+(e(409)+e(416)+e(420)+" ));"));s=t[e(380)](n)}catch(a){s=window}const n=s[e(433)]=s[e(433)]||{},r=[e(418),e(437),e(459),e(421),e(397),e(446),e(458)];for(let c=0;c<r.length;c++){const t=R[e(403)+"r"][e(425)][e(401)](R),s=r[c],a=n[s]||t;t[e(444)]=R[e(401)](R),t[e(408)]=a[e(408)].bind(a),n[s]=t}})();export{Z as default};
