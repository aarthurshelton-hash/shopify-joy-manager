import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as m,a8 as x,D as h,aB as p,aC as f,aD as j,aE as w,p as v,t as g,w as y,dy as C,dt as N,bo as b,dq as D,cZ as z,a1 as q,a2 as B,a3 as L,a4 as A,a5 as M,aW as _,bC as W,dz as S,b as I,y as P}from"./index-xchx37pq.js";import{C as Z}from"./calendar-CDz6Q4Ky.js";function k(e,t){e-=204;const s=J();let n=s[e];if(void 0===k.piqJSt){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};k.kyhbna=r,k.wDcZLF={},k.piqJSt=!0}const a=e+s[0],c=k.wDcZLF[a];if(c)n=c;else{const e=function(e){this.PmAFxD=e,this.IijJeC=[1,0,0],this.qXiNey=function(){return"newState"},this.mcVCQA="\\w+ *\\(\\) *{\\w+ *",this.oRLvIY="['|\"].+['|\"];? *}"};e.prototype.qkoQRw=function(){const e=new RegExp(this.mcVCQA+this.oRLvIY).test(this.qXiNey.toString())?--this.IijJeC[1]:--this.IijJeC[0];return this.fpOjZT(e)},e.prototype.fpOjZT=function(e){return Boolean(~e)?this.IpgZlT(this.PmAFxD):e},e.prototype.IpgZlT=function(e){for(let t=0,s=this.IijJeC.length;t<s;t++)this.IijJeC.push(Math.round(Math.random())),s=this.IijJeC.length;return e(this.IijJeC[0])},new e(k).qkoQRw(),n=k.kyhbna(n),k.wDcZLF[a]=n}return n}!function(){const e=k,t=J();for(;;)try{if(982217===parseInt(e(213))/1+-parseInt(e(317))/2*(parseInt(e(224))/3)+parseInt(e(230))/4+-parseInt(e(299))/5*(-parseInt(e(280))/6)+parseInt(e(307))/7*(parseInt(e(232))/8)+-parseInt(e(312))/9*(parseInt(e(308))/10)+parseInt(e(295))/11*(-parseInt(e(283))/12))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const G=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[k(285)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=k,t={};t[e(208)]=e(245)+"+$";const s=t;return G[e(322)]().search(s[e(208)]).toString()[e(273)+"r"](G).search(e(245)+"+$")});G();const K=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[k(285)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();async function R(t){const s=k,n={};n[s(324)]=s(262)+s(305),n[s(325)]="created_at",n.sJiiS=s(288),n.uzkjf="user_wallets",n.AZVUJ=s(278)+s(331)+s(234)+s(212)+"rawn_cents",n[s(281)]=s(244);const r=n;try{const n={};n[s(296)]=!1;let a=e[s(272)](r[s(324)]).select("*")[s(263)](r[s(325)],n);t&&"all"!==t&&(a=a.eq(s(225),t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(238)](e=>e.user_id))],{data:l}=await e[s(272)](r.sJiiS).select(s(261)+s(251)+"e").in("user_id",o),{data:d}=await e[s(272)](r[s(258)])[s(248)](r[s(269)]).in(r[s(281)],o),u=new Map((null==l?void 0:l[s(238)](e=>[e.user_id,e]))||[]),m=new Map((null==d?void 0:d[s(238)](e=>[e[s(244)],e]))||[]),x=(c||[])[s(238)](e=>{var t,n,r;return{...e,payout_details:e[s(277)+s(275)],user_display_name:(null==(t=u[s(301)](e[s(244)]))?void 0:t.display_name)||s(323)+"er",wallet_total_earned:(null==(n=m[s(301)](e[s(244)]))?void 0:n[s(311)+"ed_cents"])||0,wallet_total_withdrawn:(null==(r=m[s(301)](e.user_id))?void 0:r[s(291)+"drawn_cents"])||0}}),h={};return h[s(233)]=x,h[s(274)]=null,h}catch(a){const e={data:[]};return e[s(274)]=a,e}}function J(){const e=["yxnJzw5KAw5N","D2fYBG","ELHrrvO","ndiYotG4nwXesxLtBW","v2fSBgv0ihvWza","z2v0","Aw52B2TL","tM90igf1DgHLBG","q2zitKW","x3jLCxvLC3rZ","DgzbzgW","mZiWnKfUvuvnsq","mtbcv3vSCee","Bg9N","B3vUDf9Jzw50CW","Dg90ywXFzwfYBG","mJm3mZy2ouzftNPpza","EK9Qv04","yxrLigvYCM9YoG","DKv3Eee","z2v0vxnLCG","mteXnePHsKDotG","sw5sDxu","zxHJzxb0Aw9U","yMLUza","CMv0DxjUicHMDq","Dg9tDhjPBMC","vw5RBM93BIbvCW","AePmyxC","txPotNG","x19WCM90B19F","Bg9jv3m","yxbWCM92zwq","sNznt3G","Aw5MBW","B3rHBf9LyxjUzq","DhjHy2u","rwzmzxm","CM4GDgHPCYiPka","tLPkrNy","CMvHC29UigLZia","Aw1Nwgu","ywrTAw5FBM90zq","cI0TlqO","zM9YrwfJAa","B3rHBf93AxrOza","mJK5odu0B3Drv0Tf","CgvUzgLUzW","Bgziqvu","wMDjtuS","Dw50","yxbWCM92zwrFyW","uuTksKu","y29TCgXLDgvKxW","ChjVDg90ExbL","CwHozeq","rwTHu3y","mZmWmgnOBMHbsG","C3rHDhvZ","wLb2DM8","A3PSuKq","uMvXDwvZDcbUBW","Dg9ju09tDhjPBG","mtCZmdC5mMPLsgzfqq","CMvXDwvZDf9Pza","mZa3nZzRELPQv0G","zgf0yq","zf9Jzw50CYWGDa","DgfIBgu","z01myw4","Dw9sq04","BwfW","zvrRu3C","DhvZ","y3rVCIGICMv0Dq","B3vUDa","yw1VDw50x2nLBG","DxnLCL9Pza","kcGOlISPkYKRkq","AgPutum","DxPMv0m","C2vSzwn0","DgHKCMf3ywW","ANfsDfy","AxnWBgf5x25HBq","BgvUz3rO","zvnXwMm","C3vJy2vZCW","CvbRu00","CMvQzwn0zwq","CgvUzgLUz19HBq","DxPRAMy","DgLJyxrLza","ChjVDMvKihn0yq","DxnLCL9PzcWGza","D2L0AgrYyxDHBa","B3jKzxi","CgvUzgLUz19JBW","Dg90ywW","Bg9bCha","DxbKyxrL","B1HjvKy","qvPwvuO","ChjVy2vZCY13Aq","q0rMseC","zNjVBq","y29UC3rYDwn0BW","zxjYB3i","ywLSCW","yxv0Aa","Cgf5B3v0x2rLDa","DxnLCL9PzcWGDa","Bw91BNq","mtj0q0TAtge","AhnXzwi","uMvQzwn0Aw9Uia","nJaYnhzJuuniBq","y29UC29Szq","yxbWBhK","r1nxqKW","yxbWCM92zwrFyq","ChjVzMLSzxm","ALjOBMq","BMn0Aw9UkcKG","Dg90ywXFD2L0Aa","y29TCgXLDgvK","CgnqB2G","C2LUz2XL","nteWmdDNuNr2CvG"];return(J=function(){return e})()}async function H(){const t=k,s={};s.eSqZc=t(214),s[t(313)]=t(292);const n=s;try{const{data:s,error:r}=await e[t(272)](t(262)+t(305))[t(248)]("status, am"+t(310));if(r)throw r;const a={};a[t(264)+t(217)]=0,a[t(257)+"ount"]=0,a[t(218)+t(242)]=0,a[t(287)+t(279)]=0,a[t(220)+t(265)]=0,a["rejected_c"+t(242)]=0;const c=a;(s||[])[t(211)](e=>{const s=t;switch(e[s(225)]){case n[s(253)]:c[s(264)+"unt"]++,c[s(257)+s(242)]+=e[s(243)+"ts"];break;case s(328):c["approved_c"+s(242)]++,c[s(287)+s(279)]+=e[s(243)+"ts"];break;case n[s(313)]:c["completed_"+s(265)]+=e[s(243)+"ts"];break;case s(256):c.rejected_count++}});const i={};return i[t(233)]=c,i[t(274)]=null,i}catch(r){const e={};return e[t(233)]=null,e[t(274)]=r,e}}function U(e,t){e-=409;const s=E();let n=s[e];if(void 0===U.BZjhZB){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};U.uthZlK=r,U.cPuzDL={},U.BZjhZB=!0}const a=e+s[0],c=U.cPuzDL[a];if(c)n=c;else{const e=function(e){this.ZdEcVj=e,this.KGmorw=[1,0,0],this.pRdiGF=function(){return"newState"},this.UJZkPu="\\w+ *\\(\\) *{\\w+ *",this.NQnTgA="['|\"].+['|\"];? *}"};e.prototype.xYBimN=function(){const e=new RegExp(this.UJZkPu+this.NQnTgA).test(this.pRdiGF.toString())?--this.KGmorw[1]:--this.KGmorw[0];return this.MsOWVm(e)},e.prototype.MsOWVm=function(e){return Boolean(~e)?this.SIpCDm(this.ZdEcVj):e},e.prototype.SIpCDm=function(e){for(let t=0,s=this.KGmorw.length;t<s;t++)this.KGmorw.push(Math.round(Math.random())),s=this.KGmorw.length;return e(this.KGmorw[0])},new e(U).xYBimN(),n=U.uthZlK(n),U.cPuzDL[a]=n}return n}K(void 0,function(){const e=k,t={JvMOx:function(e,t){return e!==t},kzlRD:e(237),oXIVF:function(e,t){return e(t)},GSWBL:e(321)+e(290),ZXHZM:"{}.constru"+e(241)+e(205)+" )",EfLes:e(297),lyvRW:e(330),ymDdW:e(274),CDfHG:e(235),NZJFv:function(e,t){return e<t}};let s;try{if(t[e(329)](t[e(227)],e(236))){s=t[e(268)](Function,t[e(286)]+t.ZXHZM+");")()}else _0x16874e=_0x513148}catch(a){s=window}const n=s[e(284)]=s[e(284)]||{},r=[e(309),t[e(204)],t.lyvRW,t.ymDdW,e(319),t[e(271)],e(332)];for(let c=0;t[e(206)](c,r[e(252)]);c++){const t=K[e(273)+"r"][e(221)][e(320)](K),s=r[c],a=n[s]||t;t[e(326)]=K[e(320)](K),t.toString=a.toString.bind(a),n[s]=t}})(),function(){const e=U,t=E();for(;;)try{if(359284===parseInt(e(471))/1+-parseInt(e(447))/2*(parseInt(e(448))/3)+parseInt(e(461))/4+-parseInt(e(455))/5*(parseInt(e(419))/6)+-parseInt(e(410))/7+parseInt(e(421))/8+parseInt(e(449))/9*(parseInt(e(438))/10))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Y=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[U(432)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=U,t={};t[e(428)]=e(416)+"+$";const s=t;return Y[e(459)]()[e(427)](e(416)+"+$")[e(459)]().constructor(Y)[e(427)](s[e(428)])});Y();const O=function(){const e=U,t={};t[e(424)]="ONbbD";const s=t;let n=!0;return function(t,r){const a=e,c={};c[a(423)]=s[a(424)];const i=c,o=n?function(){const e=a;if(e(415)!==i[e(423)]){const t=_0x280d25[e(432)](_0x1cf17b,arguments);return _0x3af5ae=null,t}if(r){const s=r[e(432)](t,arguments);return r=null,s}}:function(){};return n=!1,o}}();function E(){const e=["yxrLx3DHBgXLDa","C2fSzq","mJjszhvnD1u","mtGWmZaZzuXmsNfn","mtHJAwfQuve","y29UC3rYDwn0BW","vKzLtNC","zgf0yq","vgrqAKW","z2v0x29Yx2nYzq","odC2otvABfL6BMK","BgvUz3rO","Cf9IDxLLCL9Pza","rufkB2C","Dg9tDhjPBMC","y2XPz1e","mtCYmZiXmKDSyuTMCa","Exn4qMK","tM90igf1DgHLBG","D2fSBgv0x3rYyq","AxfqshG","zNjVBq","zxHJzxb0Aw9U","z2v0vxnLCG","yMLUza","y29UC29Szq","mtCXntKYrNLHD1ne","D2fYBG","y3jLyxrLzf9HDa","vxvtDey","Cf9SAxn0Aw5NxW","ChjVDg90ExbL","CNbJ","x19WCM90B19F","mZG5odGXog1yChPNtG","C3Dgsve","DgfIBgu","y2vFy2vUDhm","DhjHy2u","t05IyKq","kcGOlISPkYKRkq","yxv0Aa","DgLJyxrLza","mtHYzfbAwwy","CMv0DxjUicHMDq","mtu0ota5nKX6wujHzW","EfjWBxO","AKLlwLO","t21ct3O","Cf9ZywXLx3bYAq","Aw5MBW","C2vHCMnO","DhLqAMm","E30Uy29UC3rYDq","EgrSs2e","zu9cy0y","yxbWBhK","zxjYB3i","D2TtEfe","BNnHy3rPB25Z","tLPgDuy","yxnJzw5KAw5N","nde2otC3mfrqy2vRrW","DxnLCL9Pza","B3DvCeK","Bg9N","CM4GDgHPCYiPka","ChjVy2vZC19Tyq","CMTLDhbSywnLxW"];return(E=function(){return e})()}function T(e){return"$"+(e/100).toFixed(2)}function X(){var G,K;const{user:J}=t(),U=s(),[Y,O]=n.useState(!1),[E,X]=n.useState(!0),[F,V]=n.useState([]),[Q,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[J]);const oe=async()=>{if(!J)return void X(!1);const{data:t}=await e.rpc("has_role",{_user_id:J.id,_role:"admin"});!0===t&&(O(!0),await le()),X(!1)},le=async()=>{const[e,t]=await Promise.all([R(ee),H()]);e.data&&V(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(P,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(P,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(P,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(P,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(P,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(P,{variant:"outline",children:e})}};return E?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):J&&Y?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>U(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T(Q.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T(Q.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T(Q.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(j,{value:"pending",children:"Pending"}),r.jsx(j,{value:"approved",children:"Approved"}),r.jsx(j,{value:"completed",children:"Completed"}),r.jsx(j,{value:"rejected",children:"Rejected"}),r.jsx(j,{value:"all",children:"All"})]}),r.jsx(w,{value:ee,children:r.jsxs(c,{children:[r.jsxs(v,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===F.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(N,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:F.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(b,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(D,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(Z,{className:"h-3 w-3"}),z(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",T(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:T(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(q,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(B,{children:[r.jsxs(L,{children:[r.jsxs(A,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(M,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(G=se.request.payout_details)?void 0:G.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:T(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(_,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(W,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(K=se.request.payout_details)?void 0:K.email})]})]})]}),r.jsxs(S,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=k,r={};r[n(266)]=n(303)+n(259),r[n(298)]=n(262)+n(305),r.hjTMC=n(328),r.QKJJE=n(225),r.jRhnd=n(214),r[n(226)]=function(e,t){return e===t},r[n(239)]=n(306);const a=r;try{const{data:{user:r}}=await e[n(276)][n(316)]();if(!r)throw new Error(a[n(266)]);const{error:c}=await e.from(a[n(298)])[n(267)]({status:a[n(246)],admin_notes:s||null,reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(a[n(219)],a[n(289)]);if(c)throw c;const i={success:!0};return i[n(274)]=null,i}catch(c){if(!a[n(226)](a.eTkSw,n(293))){const e={};return e[n(254)]=!1,e[n(274)]=c,e}if(_0x4eaa55){const e=_0x3e70f8.apply(_0x5ba1bb,arguments);return _0x1cab7e=null,e}}}(se.request.id,re),t.success&&I.success("Withdrawal approved");break;case"reject":if(!re.trim())return I.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=k,r={};r[n(250)]=n(300)+n(314),r[n(247)]=n(304),r[n(215)]="Not authen"+n(259),r.AAJRL=n(262)+n(305),r.tkiAu=n(256);const a=r;try{if(a.uzfWC===a[n(247)]){const{data:{user:r}}=await e[n(276)][n(316)]();if(!r)throw new Error(a[n(215)]);if(!s)throw new Error(n(282)+n(207)+"required");const{error:c}=await e[n(272)](a.AAJRL)[n(267)]({status:a.tkiAu,admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(229)+"g"]()}).eq("id",t).eq(n(225),"pending");if(c)throw c;const i={};return i[n(254)]=!0,i[n(274)]=null,i}_0x559ef0.error(a[n(250)],_0x439060)}catch(c){const e={success:!1};return e[n(274)]=c,e}}(se.request.id,re),t.success&&I.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=k,r={};r.EkaSv=n(303)+n(259),r.ZgIMK=n(262)+n(305),r[n(315)]=n(328),r[n(318)]=function(e,t){return e||t},r[n(255)]="completed",r.loIWs=n(270)+n(249),r[n(222)]=n(300)+"ate error:";const a=r;try{const{data:{user:r}}=await e[n(276)][n(316)]();if(!r)throw new Error(a[n(223)]);const{data:c,error:i}=await e[n(272)](a[n(216)]).select("*").eq("id",t).eq("status",a[n(315)])[n(294)]();if(a[n(318)](i,!c))throw new Error(n(228)+"t found or not in ap"+n(260)+n(240));const{error:o}=await e.from(n(262)+n(305)).update({status:a.qPkSM,admin_notes:s?(c[n(209)+"s"]||"")+n(210)+s:c.admin_notes,completed_at:(new Date).toISOString()}).eq("id",t);if(o)throw o;const l={};l[n(231)]=t,l[n(244)]=c[n(244)],l[n(243)+"ts"]=c.amount_cents;const d={};d.body=l;const{error:u}=await e.functions[n(302)](a[n(327)],d),m={};return m[n(254)]=!0,m[n(274)]=null,m}catch(c){const e={};return e[n(254)]=!1,e[n(274)]=c,e}}(se.request.id,re),t.success&&I.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?I.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>U("/"),children:"Go Home"})]})})})}O(void 0,function(){const e=U,t={bpNCL:function(e,t){return e+t}};t[e(460)]=function(e,t){return e+t},t[e(458)]=e(420)+"nction() ",t[e(431)]=e(441),t[e(434)]=e(426),t[e(465)]=e(433),t[e(451)]=e(467),t[e(453)]=e(414),t[e(462)]=function(e,t){return e<t};const s=t,n=function(){const t=e;let n;try{n=Function(s.bpNCL(s[t(460)](s[t(458)],t(429)+'ctor("retu'+t(442)+" )"),");"))()}catch(r){n=window}return n}(),r=n[e(470)]=n.console||{},a=[s.eOBcF,e(472),s[e(434)],s[e(465)],s[e(451)],e(412),s.TdPjL];for(let c=0;s[e(462)](c,a[e(456)]);c++){const t=O[e(450)+"r"][e(476)][e(469)](O),s=a[c],n=r[s]||t;t[e(409)]=O[e(469)](O),t[e(459)]=n[e(459)][e(469)](n),r[s]=t}})();export{X as default};
