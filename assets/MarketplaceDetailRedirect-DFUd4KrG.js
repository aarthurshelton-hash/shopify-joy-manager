import{d9 as e,a,r as t,j as i,aT as n,s,aH as r}from"./index-xchx37pq.js";const l=()=>{const{id:l}=e(),o=a(),[d,c]=t.useState(null);return t.useEffect(()=>{(async()=>{var e,a,t;if(l)try{const{data:i,error:n}=await s.from("visualization_listings").select("\n            visualization_id,\n            saved_visualizations (\n              pgn,\n              game_data\n            )\n          ").eq("id",l).maybeSingle();if(n)return void c("Failed to load listing");if(!i||!i.saved_visualizations)return void c("Listing not found");const d=i.saved_visualizations,u=d.pgn||(null==(e=d.game_data)?void 0:e.pgn)||"",m=r(u),v=null==(t=null==(a=d.game_data)?void 0:a.visualizationState)?void 0:t.paletteId,g=new URLSearchParams;v&&g.set("p",v),g.set("src","marketplace"),g.set("listing",l);const f=g.toString();o(`/g/${m}${f?`?${f}`:""}`,{replace:!0})}catch(i){c("Failed to redirect")}else c("Invalid listing ID")})()},[l,o]),d?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("h1",{className:"text-xl font-royal font-bold text-foreground",children:d}),i.jsx("button",{onClick:()=>o("/marketplace"),className:"text-primary hover:underline",children:"Return to Marketplace"})]})}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx(n.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-2 border-primary border-t-transparent rounded-full"})})};export{l as default};
