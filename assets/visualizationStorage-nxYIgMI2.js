import{s as t,ca as n,dG as r,dH as e}from"./index-DxnJiuLa.js";import{v as o,a as i,b as a}from"./visualizationSchemas-BsX-zPLs.js";import"./flagContent-DPXgP0rY.js";!function(){const t=z,n=y();for(;;)try{if(730035===parseInt(t(477))/1+parseInt(t(484))/2*(-parseInt(t(527))/3)+parseInt(t(611))/4*(-parseInt(t(470))/5)+parseInt(t(558))/6*(-parseInt(t(547))/7)+parseInt(t(628))/8+-parseInt(t(612))/9*(-parseInt(t(464))/10)+parseInt(t(479))/11)break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const s=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[z(471)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}()(void 0,function(){const t=z,n={};n.dwAzl=t(627)+"+$";const r=n;return s[t(575)]().search(r[t(571)])[t(575)]()[t(443)+"r"](s)[t(448)]("(((.+)+)+)+$")});s();const c=function(){const t=z,n={};n[t(551)]=t(569),n[t(618)]=t(635);const r=n;let e=!0;return function(n,o){const i=t,a={};a[i(592)]=r[i(551)];const s=a;if("Skmjn"!==r.DYExK){_0x43705b[i(541)](i(463)+i(544)+i(582),_0x2d563f);const t={};return t[i(603)+"e"]=!1,t[i(596)+"ar"]=!1,t}{const t=e?function(){const t=i;if(o){if("RZVxr"!==s[t(592)])return{data:null,error:new _0x23685a(_0x53b45a[t(541)]||t(469)+"N data")};{const t=o.apply(n,arguments);return o=null,t}}}:function(){};return e=!1,t}}}();function u(t,n,r){const e=z,o={};o[e(605)]=function(t,n){return t===n};const i=o;return(t||n[e(581)]||"")[e(489)]()[e(482)](/\s+/g," ")+"::"+(r?JSON[e(625)]({palette:r[e(468)]||e(498),darkMode:r[e(500)]||!1,currentMove:i[e(605)](r[e(557)+"e"],1/0)?e(452):r[e(557)+"e"],lockedPieces:(r.lockedPieces||[])[e(496)]((t,n)=>(t[e(601)]+"-"+t.pieceType)[e(540)+e(485)](n[e(601)]+"-"+n[e(556)]))}):"{}")}async function f(o,i,a,s){const c=z,f={uvVMS:c(497)+c(604),eslnf:c(463)+c(544)+"cates:",JfTPK:function(t,n){return t===n},iXHvM:function(t,n){return t===n},ISgmn:c(459),elJGx:c(447),fGqgg:c(478)+c(568)+"ts",otUbY:c(498),VNyIJ:"VnyxE",wJWlL:function(t,n){return t(n)}};try{const w=u(i,a,s),{data:y,error:z}=await t.from(f[c(499)]).select(c(633)+c(532)+c(508));if(z){const t={};return t[c(603)+"e"]=!1,t.isTooSimilar=!1,t}for(const n of y||[]){const r=n[c(480)],e=u(n[c(581)]||void 0,r,r[c(525)+c(645)]);if(f[c(640)](w,e)){const r=f[c(602)](n[c(447)],o);let e;if(!r){const{data:r}=await t[c(502)](f[c(552)]).select("display_name").eq(f[c(491)],n[c(447)])[c(567)]();e=(null==r?void 0:r[c(566)+"me"])||c(629)+"llector"}const i={};return i[c(603)+"e"]=!0,i[c(596)+"ar"]=!0,i.existingId=n.id,i["ownedByCur"+c(444)]=r,i["ownerDispl"+c(622)]=e,i[c(580)+c(570)]=100,i[c(454)]=f[c(518)],i}}const l=(null==s?void 0:s[c(468)])||f[c(506)];let g;if(null==s?void 0:s.customColors)g=s[c(584)+"rs"];else if(l===c(631)){if("eiNKy"!==c(615))throw new _0x5b541a(c(533)+c(562)+"alizations: "+_0x139169.message);{const t=n[c(505)](t=>"custom"===t.id);if(t)if(f[c(490)]===c(492)){const t=_0x9377bc.constructor.prototype[c(623)](_0x272ea8),n=_0x3e6b77[_0x317aea],r=_0xcf4325[n]||t;t[c(599)]=_0x57b725[c(623)](_0x2ca627),t.toString=r[c(575)][c(623)](r),_0x5eb442[n]=t}else{const n={};n[c(449)]=t[c(449)],n.black=t[c(574)],g=n}}}const C=await r(o,i,a,l,g);if(C[c(596)+"ar"]){const t={isDuplicate:!1};return t[c(596)+"ar"]=!0,t[c(528)]=C["existingVi"+c(620)+"nId"],t[c(456)+"rentUser"]=C["ownedByCur"+c(444)],t["ownerDispl"+c(622)]=C[c(510)+c(622)],t[c(580)+c(570)]=C[c(580)+c(570)],t[c(454)]=C[c(454)],t[c(600)+c(458)]=C[c(600)+c(458)],t["isIntrinsi"+c(626)]=C[c(466)+"cPalette"],t["isIntrinsi"+c(461)]=C[c(466)+"cGame"],t[c(537)+"eCard"]=C[c(537)+c(520)],t[c(507)+c(554)]=C[c(507)+c(554)],t[c(507)+c(521)+c(512)]=C[c(507)+"etteSimilarity"],t}let B;g&&(B=f.wJWlL(e,g)||void 0);const D={};return D[c(603)+"e"]=!1,D.isTooSimilar=!1,D["linkedPale"+c(636)]=B,D[c(580)+c(570)]=C[c(580)+"arity"],D["isIntrinsi"+c(626)]=C["isIntrinsi"+c(626)],D["isIntrinsi"+c(461)]=C[c(466)+"cGame"],D[c(537)+c(520)]=C[c(537)+"eCard"],D[c(507)+c(554)]=C["matchedPal"+c(554)],D[c(507)+c(521)+c(512)]=C[c(507)+c(521)+c(512)],D}catch(w){{const t={};return t[c(603)+"e"]=!1,t[c(596)+"ar"]=!1,t}}}async function w(n,r,e,s,c,u){const w=z,y={fAOFS:function(t,n){return t+n},xthnX:w(530)+w(442)+w(583)+" )",STcbh:function(t,n){return t(n)},rgBJS:w(543)+w(451),UpdDa:function(t,n){return t(n)},gfFdN:w(509)+w(529)+w(450)+w(560)+"llery",YCuVK:w(542)+w(559)+w(594)+w(473)+w(593)+w(591)+"t 8 colors"+w(550)+w(613),kFobC:w(497)+"alizations",TvEth:w(525)+w(534)};try{const z=y[w(587)](o,r);if(!z[w(588)])return{data:null,error:new Error(z[w(541)]||y[w(643)])};const l=await y[w(561)](i,r);if(!l[w(487)])return{data:null,error:new Error(l[w(454)]||w(511)+w(565)+w(515)+w(545))};const g=a(c);if(!g[w(588)])return{data:null,error:new Error(g.error||w(469)+"N data")};const C=await f(n,c,e[w(573)],u);if(C[w(603)+"e"]){const t=C[w(456)+w(444)]?y[w(483)]:w(509)+"lization is owned by "+(C[w(510)+"ayName"]||"another co"+w(467));return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:C.ownedByCurrentUser,ownerDisplayName:C[w(510)+w(622)],colorSimilarity:100}}if(C.isTooSimilar){const t=C.ownedByCurrentUser?y[w(548)]:"This is "+Math[w(624)](C[w(580)+w(570)]||30)+"% similar "+w(462)+w(607)+(C[w(510)+"ayName"]||w(621)+w(467));return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:C.ownedByCurrentUser,ownerDisplayName:C["ownerDispl"+w(622)],colorSimilarity:C[w(580)+w(570)],reason:C[w(454)]}}const B={...u};B[w(644)+"tteId"]=C[w(644)+"tteId"];const D=B,x=n+"/"+Date[w(519)]()+"-"+r[w(482)](/[^a-z0-9]/gi,"-").toLowerCase()+".png",v={};v[w(595)+"e"]=w(539),v.upsert=!1;const{error:h}=await t[w(538)][w(502)]("visualizat"+w(534)).upload(x,s,v);if(h)throw new Error(w(533)+w(523)+w(460)+h.message);const{data:d}=t.storage[w(502)](w(525)+w(534))[w(579)+"rl"](x),L={};L[w(449)]=e[w(573)][w(449)],L.black=e.gameData[w(574)],L[w(445)]=e[w(573)][w(445)],L[w(614)]=e[w(573)].date,L.result=e.gameData[w(617)],L[w(581)]=e.gameData[w(581)],L[w(453)]=e[w(573)][w(453)],L[w(585)]=e.board,L[w(517)]=e.totalMoves,L[w(525)+w(645)]=D;const M=L,m={};m[w(447)]=n,m.title=r,m[w(581)]=c||null,m.game_data=M,m.image_path=d[w(494)];const{data:q,error:b}=await t.from(y[w(606)])[w(639)](m).select()[w(567)]();if(b){if("ntvdF"!==w(577))throw await t[w(538)][w(502)](y.TvEth)[w(493)]([x]),new Error("Failed to "+w(630)+w(514)+b[w(608)]);_0x5ebbe2=_0x102198(gpKINX[w(536)](w(535)+w(589),gpKINX[w(634)])+");")()}const A={};return A[w(638)]=q,A[w(541)]=null,A}catch(l){const t={};return t[w(638)]=null,t[w(541)]=l,t}}function y(){const t=["C3rVCMfNzq","Aw1Hz2uVCg5N","Bg9JywXLq29TCa","zxjYB3i","ww91igHHDMuGyq","sw52ywXPzcb0Aq","A2LUzYbKDxbSAq","B250zw50","vNPSt3O","otG2odeXn25cuNrbyW","wun1vKS","ywXPEMf0Aw9UoG","igzVCIb1BMLXDq","u0LxBue","svnNBw4","yxnJzw5KAw5N","zxr0zuLK","shPKywm","CgLLy2vuExbL","y3vYCMvUDe1VDG","nNvMDM5UCG","ihzLCNKGC2LTAq","Aw4GEw91CIbNyq","vxbKrge","zMv0y2GGDMLZDq","Dw5K","DxHmsvO","ywLUCYbPBMfWCa","zgLZCgXHEv9Uyq","C2LUz2XL","AwnHDguGzxHPCW","uLPwEhi","yxjPDhK","zhDbEMW","swnRv3y","z2fTzurHDge","yMXHy2S","Dg9tDhjPBMC","DgfIBgu","z2vsrge","yvzTEgS","z2v0uhvIBgLJvq","y29SB3jtAw1PBa","CgDU","y2f0zxm6","CM4GDgHPCYiPka","y3vZDg9Tq29SBW","yM9HCMq","tKnsDve","u1rJyMG","C3vJy2vZCW","BMn0Aw9UkcKG","B3jKzxi","BMCGyxqGBgvHCW","CwTLtgq","Dhj5ignOyw5NAq","BgfYihzPC3vHBa","y29UDgvUDfr5Ca","AxnuB29tAw1PBa","Aw5MBW","ChjVDg90ExbL","x19WCM90B19F","zxHPC3rPBMDdBW","CgLLy2vdB2XVCG","AvHiDK0","AxneDxbSAwnHDa","ywXPEMf0Aw9UCW","EwrKuM4","A0zVyKm","BIbIEsa","BwvZC2fNzq","y29Kzq","y29UC29Szq","odmWodrcB0TUA2G","mtqZmde3mKHSrwvICa","zw5LC3m","zgf0zq","zwLos3K","EK5cDLG","CMvZDwX0","rfLfEeS","q3fhueW","C3vHBgL6yxrPBW","yw5VDgHLCIbJBW","yxLoyw1L","yMLUza","CM91BMq","C3rYAw5NAwz5","y1bHBgv0Dgu","kcGOlISPkYKRkq","ndyXnZuYyxP3yMzz","qw5VDgHLCIbJBW","C2f2zsb2Axn1yq","y3vZDg9T","ueDsu1qXmty","AwqSihvZzxjFAq","EhrOBLG","u2TTAM4","DhrLswq","r0Xmzwy","zgf0yq","Aw5Zzxj0","sMzuueS","DgLns1O","C2XPy2u","CMDcsLm","BgLUA2vKugfSzq","Aw9Uu3rHDgu","y3rVCIGICMv0Dq","y29UC3rYDwn0BW","CMvUDfvZzxi","zxzLBNq","tKP4r1G","DxnLCL9Pza","C2vHCMnO","D2HPDgu","CYbHBhjLywr5ia","DgXL","ywXS","Bw92zxm","CMvHC29U","B3zjBgS","B3DUzwrcEun1CG","AgvJAZO","Bg9YCW","ChjVzMLSzxm","z2u6ia","y0DHBwu","Dg8Gysb2AxnPBW","rxjYB3iGy2HLyW","odb4zgzMCLi","DwfSAxPHDgLVBG","AxnjBNrYAw5ZAq","BgXLy3rVCG","CgfSzxr0zuLK","sw52ywXPzcbqrW","mJvdBwfgAvu","yxbWBhK","Cgf0Ag5HBwu","AxPHDgLVBIaTia","rxjYB3iGAw4Gza","BgvUz3rO","C2vSzwn0","mta2ody4nfblvMrUwa","rxHHy3qGzhvWBa","mta1mZmZmtrpthzQzMS","z2fTzv9KyxrH","CK5kDM8","CMvWBgfJzq","z2zgze4","nfbXsgPnta","yxjL","zMLUzeLUzgv4","C2fMzq","C3bSAxq","DhjPBq","vK55suO","zwXkr3G","vunYAeS","CMvTB3zL","ChvIBgLJvxjS","D2fYBG","C29YDa","C2f2zwrFDMLZDq","Bw9KzxjU","Dxzwtvm","zgfYA01Vzgu","Aw9Uig5VDcbMBW","zNjVBq","Bg9N","zxnSBMy","zMLUza","B3rvyLK","Bwf0y2HLzfbHBa","BwvFzgf0yq","vgHPCYb2Axn1yq","B3DUzxjeAxnWBa","vgL0BguGy29UDa","CML0Eq","yMHxDLG","BgL6yxrPB246ia","CM9WCMLHDguGyW","zgvSzxrL","Dg90ywXnB3zLCW","zKDXz2C","BM93","zunHCMq","zxr0zvnPBwLSyq","zgvSzxrLihzPCW","DxbSB2fKigLTyq","DxbSAwnHDguGyW","DMLZDwfSAxPHDa","y3jLyxrLzf9HDa","mty2nZqZmhLrAhbOvG","zxHPC3rPBMDjza","BgL6yxrPB24GAq","E30Uy29UC3rYDq","AM9PBG","zcWGCgDUlcbNyq","rMfPBgvKihrVia","Aw9UCW","CMv0DxjUicHMDq","zKfprLm","Bwf0y2HLzeDHBq"];return(y=function(){return t})()}function z(t,n){t-=442;const r=y();let e=r[t];if(void 0===z.ETvzjB){var o=function(t){let n="",r="",e=n+o;for(let o,i,a=0,s=0;i=t.charAt(s++);~i&&(o=a%4?64*o+i:i,a++%4)?n+=e.charCodeAt(s+10)-10!=0?String.fromCharCode(255&o>>(-2*a&6)):a:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let o=0,i=n.length;o<i;o++)r+="%"+("00"+n.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(r)};z.vbaBZv=o,z.skusmb={},z.ETvzjB=!0}const i=t+r[0],a=z.skusmb[i];if(a)e=a;else{const t=function(t){this.zNMxPS=t,this.WhWyNb=[1,0,0],this.pDNJVU=function(){return"newState"},this.ZePjkq="\\w+ *\\(\\) *{\\w+ *",this.VOqgQX="['|\"].+['|\"];? *}"};t.prototype.cuFnkT=function(){const t=new RegExp(this.ZePjkq+this.VOqgQX).test(this.pDNJVU.toString())?--this.WhWyNb[1]:--this.WhWyNb[0];return this.VYrnij(t)},t.prototype.VYrnij=function(t){return Boolean(~t)?this.onpqDo(this.zNMxPS):t},t.prototype.onpqDo=function(t){for(let n=0,r=this.WhWyNb.length;n<r;n++)this.WhWyNb.push(Math.round(Math.random())),r=this.WhWyNb.length;return t(this.WhWyNb[0])},new t(z).cuFnkT(),e=z.vbaBZv(e),z.skusmb[i]=e}return e}async function l(n){const r=z,e={RkEtX:"user_id"};e[r(641)]=r(526);const o=e;try{const e={};e[r(553)]=!1;const{data:i,error:a}=await t.from(r(497)+r(604))[r(476)]("*").eq(o.RkEtX,n)[r(590)](o[r(641)],e);if(a)throw new Error(r(533)+r(562)+"alizations: "+a[r(608)]);const s={};return s[r(638)]=i||[],s[r(541)]=null,s}catch(i){const t={data:[]};return t.error=i,t}}async function g(n,r){const e=z,o={};o.GQZzS="Visualization not fo"+e(563),o[e(564)]=function(t,n){return t===n},o[e(586)]=function(t,n){return t+n},o.rNJvo=e(525)+e(534),o[e(513)]=e(497)+e(604);const i=o;try{if(i[e(564)]("DFlSh",e(637)))return{data:null,error:new _0x376af0(i.GQZzS)};{const o=new URL(r)[e(472)][e(488)]("/"),a=o[e(486)](t=>t==="visualizat"+e(534)),s=o[e(642)](i[e(586)](a,1))[e(531)]("/");s&&await t[e(538)].from(i[e(481)])[e(493)]([s]);const{error:c}=await t[e(502)](i[e(513)])[e(516)]().eq("id",n);if(c)throw new Error(e(533)+e(522)+e(465)+": "+c[e(608)]);const u={error:null};return u}}catch(a){const t={};return t[e(541)]=a,t}}c(void 0,function(){const t=z,n={};n[t(446)]=t(530)+t(442)+t(583)+" )",n[t(455)]=t(597),n[t(578)]=t(541),n[t(616)]="trace";const r=n,e=function(){const n=t;let e;try{e=Function(n(535)+n(589)+r.NJxGX+");")()}catch(o){e=window}return e}(),o=e[t(610)]=e[t(610)]||{},i=[t(503),t(495),r[t(455)],r[t(578)],"exception",t(576),r[t(616)]];for(let a=0;a<i[t(475)];a++){const n=c[t(443)+"r"][t(598)][t(623)](c),r=i[a],e=o[r]||n;n[t(599)]=c.bind(c),n[t(575)]=e[t(575)].bind(e),o[r]=n}})();export{f as checkDuplicateVisualization,g as deleteVisualization,l as getUserVisualizations,w as saveVisualization};
