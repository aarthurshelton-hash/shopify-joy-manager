const e='/**\n * Evolution Panel Component\n * Shows self-learning system status and evolution metrics\n */\n\nimport { motion } from \'framer-motion\';\nimport { \n  Dna, TrendingUp, TrendingDown, Sparkles, \n  Brain, Zap, Activity, Target\n} from \'lucide-react\';\nimport { Progress } from \'@/components/ui/progress\';\nimport { cn } from \'@/lib/utils\';\nimport type { EvolutionState } from \'@/lib/pensent-core/domains/finance/selfEvolvingSystem\';\n\ninterface EvolutionPanelProps {\n  state: EvolutionState;\n}\n\nfunction FitnessGauge({ value, label }: { value: number; label: string }) {\n  const percentage = value * 100;\n  const color = value >= 0.65 ? \'text-green-400\' : \n                value >= 0.5 ? \'text-yellow-400\' : \'text-red-400\';\n\n  return (\n    <div className="space-y-1">\n      <div className="flex justify-between text-xs">\n        <span className="text-muted-foreground">{label}</span>\n        <span className={cn("font-mono font-bold", color)}>\n          {percentage.toFixed(1)}%\n        </span>\n      </div>\n      <div className="h-2 bg-muted rounded-full overflow-hidden">\n        <motion.div\n          className={cn(\n            "h-full rounded-full",\n            value >= 0.65 ? "bg-green-500" : \n            value >= 0.5 ? "bg-yellow-500" : "bg-red-500"\n          )}\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ type: \'spring\', stiffness: 100 }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction GeneCard({ gene }: { gene: { name: string; value: number; impact: number } }) {\n  const isPositive = gene.impact > 0;\n  const isNegative = gene.impact < -0.02;\n  \n  // Format gene name for display\n  const displayName = gene.name\n    .replace(/([A-Z])/g, \' $1\')\n    .replace(/^./, str => str.toUpperCase())\n    .trim();\n\n  return (\n    <div className={cn(\n      "p-2 rounded-lg border text-xs",\n      isPositive && "border-green-500/30 bg-green-500/5",\n      isNegative && "border-red-500/30 bg-red-500/5",\n      !isPositive && !isNegative && "border-border/50 bg-card/50"\n    )}>\n      <div className="flex items-center justify-between mb-1">\n        <span className="font-medium truncate">{displayName}</span>\n        <span className={cn(\n          "font-mono",\n          isPositive && "text-green-400",\n          isNegative && "text-red-400"\n        )}>\n          {gene.value.toFixed(2)}\n        </span>\n      </div>\n      <div className="flex items-center gap-1">\n        {isPositive && <TrendingUp className="w-3 h-3 text-green-400" />}\n        {isNegative && <TrendingDown className="w-3 h-3 text-red-400" />}\n        <span className="text-muted-foreground">\n          Impact: {(gene.impact * 100).toFixed(1)}%\n        </span>\n      </div>\n    </div>\n  );\n}\n\nfunction PatternBadge({ pattern }: { pattern: { name: string; successRate: number; occurrences: number } }) {\n  return (\n    <div className="flex items-center justify-between p-2 rounded bg-muted/30">\n      <span className="text-xs truncate flex-1">{pattern.name}</span>\n      <div className="flex items-center gap-2">\n        <span className="text-[10px] text-muted-foreground">\n          {pattern.occurrences}x\n        </span>\n        <span className={cn(\n          "text-xs font-mono font-bold",\n          pattern.successRate >= 0.6 ? "text-green-400" : "text-yellow-400"\n        )}>\n          {(pattern.successRate * 100).toFixed(0)}%\n        </span>\n      </div>\n    </div>\n  );\n}\n\nexport function EvolutionPanel({ state }: EvolutionPanelProps) {\n  const { metrics, genes, patternLibrary } = state;\n  \n  const velocityIcon = metrics.learningVelocity > 0.02 ? TrendingUp : \n                       metrics.learningVelocity < -0.02 ? TrendingDown : Activity;\n  const VelocityIcon = velocityIcon;\n  \n  const velocityColor = metrics.learningVelocity > 0.02 ? \'text-green-400\' : \n                        metrics.learningVelocity < -0.02 ? \'text-red-400\' : \'text-muted-foreground\';\n\n  // Get top performing genes with mapped type\n  const topGenes = [...genes]\n    .sort((a, b) => Math.abs(b.performanceImpact) - Math.abs(a.performanceImpact))\n    .slice(0, 4)\n    .map(g => ({ name: g.name, value: g.value, impact: g.performanceImpact }));\n\n  // Get best patterns\n  const bestPatterns = [...patternLibrary]\n    .filter(p => p.occurrences >= 3)\n    .sort((a, b) => b.successRate * b.confidence - a.successRate * a.confidence)\n    .slice(0, 3);\n\n  return (\n    <div className="h-full flex flex-col gap-3 p-3 overflow-y-auto">\n      {/* Header with Generation */}\n      <div className="flex items-center justify-between">\n        <div className="flex items-center gap-2">\n          <Dna className="w-4 h-4 text-primary" />\n          <span className="text-sm font-medium">Self-Evolution</span>\n        </div>\n        <div className="flex items-center gap-1 text-xs">\n          <Sparkles className="w-3 h-3 text-primary" />\n          <span className="font-mono">Gen {metrics.generationNumber}</span>\n        </div>\n      </div>\n\n      {/* Fitness Metrics */}\n      <div className="p-3 rounded-lg border border-border/50 bg-card/50 space-y-3">\n        <FitnessGauge value={metrics.currentFitness} label="System Fitness" />\n        \n        <div className="grid grid-cols-2 gap-2 pt-2">\n          <div className="text-center p-2 rounded bg-muted/30">\n            <div className="text-[10px] text-muted-foreground mb-1">Peak Fitness</div>\n            <div className="text-sm font-mono font-bold text-primary">\n              {(metrics.peakFitness * 100).toFixed(1)}%\n            </div>\n          </div>\n          <div className="text-center p-2 rounded bg-muted/30">\n            <div className="text-[10px] text-muted-foreground mb-1">Predictions</div>\n            <div className="text-sm font-mono font-bold">\n              {metrics.totalPredictions}\n            </div>\n          </div>\n        </div>\n\n        {/* Learning Velocity */}\n        <div className="flex items-center justify-between pt-2 border-t border-border/30">\n          <div className="flex items-center gap-2">\n            <VelocityIcon className={cn("w-4 h-4", velocityColor)} />\n            <span className="text-xs text-muted-foreground">Learning Velocity</span>\n          </div>\n          <span className={cn("text-sm font-mono font-bold", velocityColor)}>\n            {metrics.learningVelocity > 0 ? \'+\' : \'\'}{(metrics.learningVelocity * 100).toFixed(2)}%\n          </span>\n        </div>\n      </div>\n\n      {/* Active Genes */}\n      <div className="space-y-2">\n        <div className="flex items-center gap-2">\n          <Brain className="w-4 h-4 text-primary" />\n          <span className="text-sm font-medium">Active Genes</span>\n        </div>\n        <div className="grid grid-cols-2 gap-2">\n          {topGenes.map(gene => (\n            <GeneCard key={gene.name} gene={gene} />\n          ))}\n        </div>\n      </div>\n\n      {/* Learned Patterns */}\n      <div className="flex-1 min-h-0 flex flex-col">\n        <div className="flex items-center justify-between mb-2">\n          <div className="flex items-center gap-2">\n            <Target className="w-4 h-4 text-yellow-400" />\n            <span className="text-sm font-medium">Learned Patterns</span>\n          </div>\n          <span className="text-xs text-muted-foreground">\n            {patternLibrary.length} total\n          </span>\n        </div>\n        \n        <div className="space-y-1 overflow-y-auto">\n          {bestPatterns.length > 0 ? (\n            bestPatterns.map((pattern, i) => (\n              <PatternBadge key={pattern.id || i} pattern={pattern} />\n            ))\n          ) : (\n            <div className="text-xs text-muted-foreground text-center py-4">\n              Learning patterns from market behavior...\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Adaptation Rate */}\n      <div className="p-2 rounded-lg border border-primary/30 bg-primary/5">\n        <div className="flex items-center justify-between">\n          <div className="flex items-center gap-2">\n            <Zap className="w-4 h-4 text-primary" />\n            <span className="text-xs font-medium">Adaptation Rate</span>\n          </div>\n          <span className="text-sm font-mono font-bold text-primary">\n            {(metrics.adaptationRate * 100).toFixed(0)}%\n          </span>\n        </div>\n        <Progress \n          value={metrics.adaptationRate * 100} \n          className="h-1 mt-2"\n        />\n      </div>\n    </div>\n  );\n}\n';export{e as default};
