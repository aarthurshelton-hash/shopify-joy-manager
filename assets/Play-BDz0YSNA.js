import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as M,bE as k,af as z,ag as D,ai as B,y as L,bF as q,bG as A,b6 as S,ae as H,bH as P,ah as I,bI as G,B as _,bJ as T,bK as U,bL as K,bM as Y,bN as E,bO as W,bP as O,bQ as V,bR as R,bS as Z,bT as J,bU as X,bV as F,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as Me,c6 as ke,c7 as ze,an as De,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Se,H as He,P as Pe,ca as Ie,b3 as Ge,bs as _e,be as Te,cb as Ue,aP as Ke,cc as Ye,d as Ee,b2 as We,a9 as Oe,cd as Ve,ce as Re,cf as Ze,al as Je,au as Xe}from"./index-Byyho7FJ.js";import{L as Fe}from"./LiveColorLegend-Cqf7dKqr.js";import{T as Qe}from"./trending-down-Bz0omMsx.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-Dvo7wExv.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=ht,t=dt();for(;;)try{if(773866===-parseInt(e(384))/1*(parseInt(e(374))/2)+-parseInt(e(344))/3*(-parseInt(e(338))/4)+parseInt(e(356))/5+parseInt(e(367))/6+-parseInt(e(351))/7*(parseInt(e(386))/8)+parseInt(e(361))/9*(parseInt(e(387))/10)+parseInt(e(346))/11*(parseInt(e(397))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){const e=ht;if(n){if("yRSaA"===e(342)){const s=n[e(349)](t,arguments);return n=null,s}{const t=_0x8bc438.constructor[e(377)][e(401)](_0x2ac450),n=_0x540d7b[_0x50672f],s=_0x36f9f8[n]||t;t[e(340)]=_0x3d70d2.bind(_0x542f7b),t[e(354)]=s[e(354)][e(401)](s),_0x4493cd[n]=t}}}:function(){};return e=!1,s}}()(void 0,function(){const e=ht,t={};t[e(389)]=e(352)+"+$";const n=t;return ut.toString()[e(382)](n.YYeZZ)[e(354)]()[e(399)+"r"](ut)[e(382)](e(352)+"+$")});function dt(){const e=["otG4mtmWBxvbtKHw","vgHYzwvMB2XKia","AwvUDe1HDgvYAq","yxbWBhK","t0zPvwq","ntC4ndmXvhfHqMfr","kcGOlISPkYKRkq","CMvHC29U","Dg9tDhjPBMC","BgfIBguU","nteWntu2nuHcr0rAyq","Cgv0AxrPB24U","BwvZC2fNzq","AxneCMf3","zxHJzxb0Aw9U","ovz6quTsyq","AxntDgfSzw1HDa","A1vYww4","DhjHy2u","CMvWzxrPDgLVBG","zMvU","odCZmJi4zLbKBwT2","yK11zhC","BgvUz3rO","rhjHDYbIEsb0Aa","v3HSvKS","rhjHDW","C3rHBgvTyxrL","ntHUExnxqKm","sw5ZDwzMAwnPzq","uvbwu1i","ChjVDg90ExbL","Bg9N","D2fYBG","zfjLCgv0AxrPBW","BNrFBwf0zxjPyq","C2vHCMnO","u3rHBgvTyxrLiq","mJiZndn3tgrADu0","s0DKv20","mtiWs2jIC0Lh","ntCYmtKWBML2Chfd","C3vMzMLJAwvUDa","wvLLwLO","CM4GDgHPCYiPka","uMvWzxrPDgLVBG","Dw5RBM93BG","y29UC29Szq","AxnuAhjLzwzVBa","ig1HDgvYAwfSlG","A3PjrM8","mty4sxL1Evb6","thnJtxC","y29UC3rYDwn0BW","C2HVCNrnzxnZyq","yMLUza","y3rVCIGICMv0Dq","BwfrALG","CMvLzM9SzcbYzq","DgfIBgu","x3j1Bgu","rvnmA0K","C3bSAxq","E30Uy29UC3rYDq","Bw92zxmGyxzHAq","rgfdsgS","ng5btw9nra","ntaTtw92zsbsDq","x19WCM90B19F","s1HIAem","Evjtyue","BMn0Aw9UkcKG","ntm5ndu0rMjovfvU","C0rlwfi"];return(dt=function(){return e})()}ut();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ht(349)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function xt(e){const t=ht,n={NsBCM:function(e,t){return e!==t},xPHuD:t(383),kUrYn:"insufficie"+t(381)+"l",DaCHk:t(375)+"nt Material",maQjX:function(e,t,n){return e(t,n)},WxlVK:"fifty_move"+t(332),ESLkI:t(392),LscMw:t(372)};if(e[t(362)+"e"]()){if(n.NsBCM(t(345),t(345))){const e=_0x1fb87d?function(){if(_0x279f01){const e=_0x41f4b5.apply(_0xb3905b,arguments);return _0x17e848=null,e}}:function(){};return _0x264464=!1,e}{const e={};return e[t(353)]=t(373),e[t(358)]="Stalemate! No legal "+t(336)+t(355),e[t(400)+"ge"]=n.xPHuD,e}}if(e[t(394)+t(380)+"n"]()){const e={};return e[t(353)]="threefold_"+t(365),e[t(358)]=t(370)+t(330)+t(357),e[t(400)+"ge"]=t(347)+t(391),e}if(e["isInsuffic"+t(348)+"al"]()){const e={};return e[t(353)]=n[t(363)],e.message="Draw by in"+t(388)+t(395),e[t(400)+"ge"]=n[t(337)],e}const s=e[t(366)]();if(n[t(403)](parseInt,s[t(334)](" ")[4],10)>=100){const e={};return e[t(353)]=n[t(371)],e.message=t(370)+"e fifty-move rule.",e[t(400)+"ge"]=t(339)+"le",e}const r={};return r.reason=n[t(333)],r[t(358)]="Game drawn!",r.shortMessage=n[t(398)],r}function ht(e,t){e-=330;const n=dt();let s=n[e];if(void 0===ht.hqvvdW){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ht.mySunm=r,ht.uAtLxH={},ht.hqvvdW=!0}const a=e+n[0],i=ht.uAtLxH[a];if(i)s=i;else{const e=function(e){this.SfHWtg=e,this.AVOsGr=[1,0,0],this.cmnlot=function(){return"newState"},this.tLUtOY="\\w+ *\\(\\) *{\\w+ *",this.SokbTU="['|\"].+['|\"];? *}"};e.prototype.bnjukq=function(){const e=new RegExp(this.tLUtOY+this.SokbTU).test(this.cmnlot.toString())?--this.AVOsGr[1]:--this.AVOsGr[0];return this.OfXGJd(e)},e.prototype.OfXGJd=function(e){return Boolean(~e)?this.pLdtqq(this.SfHWtg):e},e.prototype.pLdtqq=function(e){for(let t=0,n=this.AVOsGr.length;t<n;t++)this.AVOsGr.push(Math.round(Math.random())),n=this.AVOsGr.length;return e(this.AVOsGr[0])},new e(ht).bnjukq(),s=ht.mySunm(s),ht.uAtLxH[a]=s}return s}function pt(e){const t=ht;return{kzIFo:function(e,t){return e(t)}}[t(396)](xt,e)[t(358)]}mt(void 0,function(){const e=ht,t={sCuoj:function(e,t){return e(t)},KGdWm:function(e,t){return e+t},QPVSR:function(e,t){return e+t},akQye:e(335)+e(402)+e(390)+" )",OFiUd:e(379),OXzbA:"error",KXbhC:e(331),bMudw:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t.sCuoj(Function,t[n(385)](t[n(376)]("return (fu"+n(343),t.akQye),");"))()}catch(r){s=window}return s}(),s=n[e(393)]=n[e(393)]||{},r=[e(378),t[e(350)],"info",t.OXzbA,e(360),t[e(341)],e(364)];for(let a=0;t[e(368)](a,r[e(369)]);a++){const t=mt.constructor[e(377)].bind(mt),n=r[a],i=s[n]||t;t[e(340)]=mt[e(401)](mt),t.toString=i[e(354)][e(401)](i),s[n]=t}})(),function(){const e=yt,t=vt();for(;;)try{if(611570===parseInt(e(415))/1*(parseInt(e(409))/2)+-parseInt(e(346))/3*(-parseInt(e(448))/4)+parseInt(e(417))/5*(-parseInt(e(449))/6)+parseInt(e(368))/7+parseInt(e(431))/8*(-parseInt(e(389))/9)+parseInt(e(387))/10+parseInt(e(438))/11*(parseInt(e(420))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){const e=yt,t={};t[e(350)]=e(439),t.cpbKP=e(337)+"+$";const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(402)]=n[a(433)];const o=i,c=s?function(){const e=a;if("Qlwev"===n[e(350)])return _0x2a2d67[e(461)]().search(e(337)+"+$").toString().constructor(_0xc629e9).search(o[e(402)]);if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return s=!1,c}}()(void 0,function(){const e=yt,t={};t[e(432)]=e(337)+"+$";const n=t;return ft[e(461)]()[e(385)](n[e(432)])[e(461)]()[e(395)+"r"](ft).search(n[e(432)])});ft();const gt=function(){const e=yt,t={};t[e(455)]=e(442);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=yt;if(s(442)===n.Orrlw){if(t){const n=t.apply(e,arguments);return t=null,n}}else _0x5117fb[s(412)][s(422)]&&(_0x58c613[s(412)].gainNode[s(348)].value=_0x19252b)}:function(){};return s=!1,r}}();function vt(){const e=["E30Uy29UC3rYDq","y3jLyxrLqNvMzG","Dg9tDhjPBMC","BgvUz3rO","svLrrMK","kcGOlISPkYKRkq","Bw92zq","v2vIief1zgLVia","y3vYCMvUDfrPBq","CM1Aveu","zgvZDgLUyxrPBW","uw94Egq","zLzpqNK","uM9buvq","mtjtsvvozxm","ChbVCNrLza","z2fPBG","zNjLCxvLBMn5","u09Ny2S","vgLTzq","sujvy2K","tgvczg4","rgf0yq","C3f1yxjL","Cwf5z3K","DuHMv3O","DMfSDwu","C2f3Dg9VDgG","sNDWz0m","B1b4vuK","DMLJDg9YEq","yNvMzMvY","rePyuwW","DwvbDfrPBwu","D2fYBG","BgLUzwfYuMfTCa","ntCWmZuZA0zlu25s","y2HLy2S","y29UC29Szq","C2fTCgXLuMf0zq","quHTEfe","vu9LD3O","z2v0q2HHBM5LBa","tw5xCxK","CM4GDgHPCYiPka","y3jLyxrLt3nJAq","AvjJC3O","r1vICLq","zxHWB25LBNrPyq","ChjVDg90ExbL","C2v0vMfSDwvbDa","C3rVCa","uxjWyue","C2vHCMnO","z2fTzuvUza","mJi3ntGZmefIsNfivG","DhjPyw5NBgu","owvnu2rUDq","sLb6s3q","z2fTzvn0yxj0","CwrMqwu","v2jdwe0","EKvxB08","y29UC3rYDwn0BW","Aw5PDef1zgLV","x19WCM90B19F","CMfUzg9T","zuvbyum","uxrVqLa","y2HLy2TTyxrL","uwfnvee","qvbjig5VDcbZDq","Aw1L","CMv0DxjUicHMDq","rw1vCMq","EMnvvhG","BNzrC28","ndzsvvrzBw4","AwXSzwDHBa","zxHJzxb0Aw9U","y3vYCMvUDa","D2PhCNO","vg9wywX1zuf0va","mZCWnJrLquLcu1O","B0nVBNrLEhq","nta2nZq4nwHYExHPAq","y3jLyxrLr2fPBG","D2vIA2L0qxvKAq","nte2vfDnueHh","y2XVC2u","z2fPBK5Vzgu","C3rHCNq","BfjHBxbuB1zHBa","z1bov0G","yxbWBhK","y29UBMvJDa","y3rVCIGICMv0Dq","C2LUzq","thnlrNm","nJiXmtqZmKrgrLDUra","r1r5qMy","y3bIs1a","y2fWDhvYzq","BgXHDg9Y","qMDdq1K","DxzmzeK","ndq5ndzZBeLhEgG","uevIA3m","r2Dzr1O","wwv6wuS","txPNz0i","zhjHDW","yMrVuMy","sKrHAg0","BMn0Aw9UkcKG","qLjvC0C","mta2ndi2nfH3ANftBa","nM9TwwX5zW","zgvMzwf0","Bg93CgfZCW","qLftBfG","y29UDgv4Da","yKfbDgS","t3jYBhC","EfPvtNK","DhLWzq","wxzsDKe"];return(vt=function(){return e})()}gt(void 0,function(){const e=yt,t={oPxUI:function(e,t){return e!==t},BQSlX:e(343),uvLdI:function(e,t){return e(t)},LFyuj:function(e,t){return e+t},YvRvA:e(405)+"nction() ",qdfAe:e(459)+e(428)+e(376)+" )",RoAQT:"log",fVOBy:"info",gPNWH:"error",mHilu:e(411),JDahm:function(e,t){return e<t}},n=function(){const n=e;let s;try{if(!t[n(361)](n(400),t[n(452)])){const e=_0x546eb5[n(426)](_0x3670c9,arguments);return _0x3ca96f=null,e}s=t[n(437)](Function,t.LFyuj(t[n(458)],t[n(392)])+");")()}catch(r){s=window}return s}(),s=n[e(370)]=n[e(370)]||{},r=[t[e(345)],e(366),t[e(344)],t[e(425)],t.mHilu,"table","trace"];for(let a=0;t[e(445)](a,r[e(462)]);a++){const t=gt[e(395)+"r"][e(381)].bind(gt),n=r[a],i=s[n]||t;t[e(397)]=gt.bind(gt),t.toString=i[e(461)].bind(i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=yt,r={QrpaA:s(405)+s(446),AqmdL:s(406),tjOrU:function(e,t){return e===t},LsKFs:"SYfCC",MnWqy:function(e,t){return e||t},WbCXM:function(e,t){return e+t},JPzKt:function(e){return e()},iRcsz:function(e,t){return e*t},bAAtk:function(e,t){return e===t},GgYGZ:function(e,t){return e-t},YezYK:s(338),zcUTx:function(e,t,n,s,r,a){return e(t,n,s,r,a)},IYQFi:"triangle",LeBdn:s(434),AHmxQ:function(e,t,n){return e(t,n)},zEWoO:function(e,t,n,s,r,a){return e(t,n,s,r,a)},MLZeZ:"castle",JwpgC:function(e,t,n,s,r,a){return e(t,n,s,r,a)},qaygy:"sine",xZUNy:s(369),bdoRf:function(e,t,n,s,r,a){return e(t,n,s,r,a)},eEAaC:function(e,t,n){return e(t,n)},hklju:s(362),IBUci:function(e,t,n,s,r,a){return e(t,n,s,r,a)},rmZTE:function(e,t,n){return e(t,n)},UOewz:s(410),BgCCY:function(e,t,n,s,r,a){return e(t,n,s,r,a)},nvQso:s(359),BRUsG:function(e,t,n){return e(t,n)},LRYxn:function(e,t,n){return e(t,n)}},a={};a[s(453)]=null,a[s(422)]=null;const i=t.useRef(a),o=t.useCallback(()=>{const e=s;if(r[e(384)],e(406)===r.AqmdL){if(i[e(412)][e(453)])return;try{const t=new(window.AudioContext||window[e(419)+e(416)]),s=t.createGain();s[e(427)](t.destination),s.gain.value=n;const r={};r[e(453)]=t,r[e(422)]=s,i[e(412)]=r}catch(t){}}else _0xfb448c=eOAXIV[e(413)](_0xd6ca2d,eOAXIV.XVjAx+'{}.constructor("retu'+e(376)+" ));")()},[n]);r[s(447)](t.useEffect,()=>{const e=s,t={};t[e(357)]=e(339)+"API not su"+e(347);const a=t;r.tjOrU(e(364),r[e(430)])?_0x50d126[e(366)](a[e(357)]):i[e(412)][e(422)]&&(i[e(412)].gainNode.gain[e(358)]=n)},[n]);const c=r.LRYxn(t.useCallback,(t,n,a=s(429),c=.01,l=.1,u)=>{const d=s;if(!e)return;o();const{context:m,gainNode:x}=i[d(412)];if(r[d(375)](!m,!x))return;const h=m[d(377)+d(435)](),p=m[d(418)]();h[d(457)]=a,h[d(349)][d(382)+d(351)](t,m[d(340)+"e"]),u&&h.frequency[d(380)+d(424)+"ueAtTime"](u,r[d(393)](m[d(340)+"e"],n)),p[d(348)]["setValueAt"+d(351)](0,m[d(340)+"e"]),p[d(348)]["linearRampToValueAtT"+d(404)](1,m[d(340)+"e"]+c),p[d(348)][d(380)+"lRampToVal"+d(365)](.01,r[d(393)](m[d(340)+"e"],n)-l),p[d(348)][d(367)+d(414)+d(404)](0,m[d(340)+"e"]+n),h[d(427)](p),p.connect(x),h[d(423)](m[d(340)+"e"]),h[d(383)](m[d(340)+"e"]+n)},[e,o]),l=r[s(399)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r[a(390)](o);const{context:c,gainNode:l}=i[a(412)];if(!c||!l)return;const u=r[a(378)](c[a(371)],t),d=c[a(460)+"er"](1,u,c[a(371)]),m=d[a(374)+a(354)](0);for(let e=0;e<u;e++)if(r[a(454)]("GUbrT",a(379)))m[e]=r[a(440)](2*Math[a(398)](),1);else{const e=new(_0x3a83f4.AudioContext||_0x1d61da[a(419)+a(416)]),t=e[a(418)]();t[a(427)](e[a(342)+"n"]),t[a(348)][a(358)]=_0x53d427;const n={};n[a(453)]=e,n.gainNode=t,_0x1cbc7b.current=n}const x=c[a(460)+"erSource"]();x[a(363)]=d;const h=c.createBiquadFilter();h.type=a(451),h[a(349)].value=n;const p=c[a(418)]();p[a(348)][a(382)+"Time"](.3,c.currentTime),p[a(348)][a(380)+a(424)+"ueAtTime"](.01,c.currentTime+t),x[a(427)](h),h[a(427)](p),p[a(427)](l),x[a(423)](c[a(340)+"e"]),x[a(383)](c[a(340)+"e"]+t)},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(441)]:r[n(407)](c,800,.08,"sine",.005,.05),r[n(407)](c,400,.06,r[n(336)],.005,.04);break;case r[n(353)]:r[n(372)](l,.12,2e3),r[n(394)](c,300,.1,n(355),.005,.08),c(150,.15,"sine",.01,.1);break;case r.MLZeZ:r[n(360)](c,600,.06,r[n(356)],.005,.04),setTimeout(()=>c(700,.06,n(429),.005,.04),80);break;case r[n(456)]:r[n(444)](c,880,.15,r.IYQFi,.01,.1),setTimeout(()=>c(1100,.12,n(388),.01,.08),120);break;case n(401):c(880,.2,n(429),.01,.15),setTimeout(()=>c(660,.2,n(429),.01,.15),150),r[n(372)](setTimeout,()=>c(440,.3,n(429),.01,.2),300),r[n(372)](setTimeout,()=>c(330,.4,n(429),.01,.3),500);break;case n(391):c(523,.12,n(429),.01,.08),setTimeout(()=>c(659,.12,n(429),.01,.08),100),setTimeout(()=>c(784,.2,"sine",.01,.15),200);break;case n(386):r[n(444)](c,440,.15,n(388),.01,.1),r.eEAaC(setTimeout,()=>c(349,.25,"triangle",.01,.2),150);break;case r.hklju:c(523,.1,n(429),.01,.08),r.AHmxQ(setTimeout,()=>c(659,.1,n(429),.01,.08),100),r[n(372)](setTimeout,()=>c(784,.1,n(429),.01,.08),200),setTimeout(()=>c(1047,.3,n(429),.01,.25),300);break;case n(450):c(392,.2,r[n(356)],.02,.15),setTimeout(()=>c(349,.2,"sine",.02,.15),200),r[n(399)](setTimeout,()=>c(330,.3,n(429),.02,.25),400),setTimeout(()=>c(262,.4,"sine",.02,.35),650);break;case n(443):r[n(352)](c,440,.15,r[n(356)],.01,.1),setTimeout(()=>c(440,.15,n(429),.01,.1),180),r[n(341)](setTimeout,()=>c(523,.2,n(429),.01,.15),360);break;case r[n(373)]:r[n(436)](c,200,.1,n(355),.005,.08),c(150,.08,r[n(408)],.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=yt;i[e(412)][e(453)]&&i.current.context[e(421)]()},[]);const d={};return d.playSound=u,d[s(396)]=o,d};function yt(e,t){e-=336;const n=vt();let s=n[e];if(void 0===yt.qWZlpN){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};yt.eONoWc=r,yt.tGhYCx={},yt.qWZlpN=!0}const a=e+n[0],i=yt.tGhYCx[a];if(i)s=i;else{const e=function(e){this.HocTYH=e,this.ZZRYhM=[1,0,0],this.qCXKxx=function(){return"newState"},this.kdfpXf="\\w+ *\\(\\) *{\\w+ *",this.llONOL="['|\"].+['|\"];? *}"};e.prototype.MylnJc=function(){const e=new RegExp(this.kdfpXf+this.llONOL).test(this.qCXKxx.toString())?--this.ZZRYhM[1]:--this.ZZRYhM[0];return this.fsFzSg(e)},e.prototype.fsFzSg=function(e){return Boolean(~e)?this.fNijMW(this.HocTYH):e},e.prototype.fNijMW=function(e){for(let t=0,n=this.ZZRYhM.length;t<n;t++)this.ZZRYhM.push(Math.round(Math.random())),n=this.ZZRYhM.length;return e(this.ZZRYhM[0])},new e(yt).MylnJc(),s=yt.eONoWc(s),yt.tGhYCx[a]=s}return s}const wt=Ct;!function(){const e=Ct,t=Mt();for(;;)try{if(146628===parseInt(e(366))/1*(-parseInt(e(379))/2)+-parseInt(e(374))/3*(-parseInt(e(396))/4)+-parseInt(e(367))/5+parseInt(e(405))/6*(parseInt(e(387))/7)+parseInt(e(378))/8+-parseInt(e(409))/9*(parseInt(e(377))/10)+parseInt(e(403))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){const e=Ct,t={RfzWC:function(e,t){return e(t)},QPReM:function(e,t){return e+t},rirSU:e(395),zYcSQ:function(e,t){return e!==t},BDWJY:"XHHdv",zaKkY:e(407)};let n=!0;return function(s,r){const a=e,i={Jhgio:function(e,t){return e===t}};i[a(385)]=t[a(401)];const o=i;if(t[a(394)](t.BDWJY,t[a(369)])){const e=n?function(){const e=a;if(o[e(392)](o.EQIVc,e(373))){const t=_0x436ec8.constructor[e(393)][e(397)](_0x404a82),n=_0x54041c[_0x5cda1c],s=_0xaea86f[n]||t;t[e(410)]=_0x3398e2.bind(_0xbaeb47),t[e(390)]=s[e(390)][e(397)](s),_0x20c910[n]=t}else if(r){const t=r[e(375)](s,arguments);return r=null,t}}:function(){};return n=!1,e}{const e=t[a(371)](_0x590154,t.QPReM(t[a(380)](a(413)+a(400),a(391)+a(388)+a(399)+" )"),");"));_0x26024c=e()}}}()(void 0,function(){const e=Ct,t={};t.BRbWI=e(381)+"+$";const n=t;return jt[e(390)]()[e(372)](n.BRbWI)[e(390)]().constructor(jt)[e(372)](e(381)+"+$")});function Ct(e,t){e-=366;const n=Mt();let s=n[e];if(void 0===Ct.MSrikS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Ct.jFKgoE=r,Ct.WtZSUf={},Ct.MSrikS=!0}const a=e+n[0],i=Ct.WtZSUf[a];if(i)s=i;else{const e=function(e){this.WSPmbY=e,this.VUsQVG=[1,0,0],this.QoxHry=function(){return"newState"},this.cegXDy="\\w+ *\\(\\) *{\\w+ *",this.aVvJLo="['|\"].+['|\"];? *}"};e.prototype.OFyTGS=function(){const e=new RegExp(this.cegXDy+this.aVvJLo).test(this.QoxHry.toString())?--this.VUsQVG[1]:--this.VUsQVG[0];return this.yqPqhZ(e)},e.prototype.yqPqhZ=function(e){return Boolean(~e)?this.hSBoeL(this.WSPmbY):e},e.prototype.hSBoeL=function(e){for(let t=0,n=this.VUsQVG.length;t<n;t++)this.VUsQVG.push(Math.round(Math.random())),n=this.VUsQVG.length;return e(this.VUsQVG[0])},new e(Ct).OFyTGS(),s=Ct.jFKgoE(s),Ct.WtZSUf[a]=s}return s}jt();const Nt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Ct(375)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Mt(){const e=["uw96zMS","BMfTzq","CMv0DxjUicHMDq","mNHyr3bAvq","nZq2mZG1EwntzvfR","BgvUz3rO","EMflA1K","DgfIBgu","uMz6v0m","C2vHCMnO","BwLvCLa","ndHOCxvbvLm","yxbWBhK","y2HLC3mTC291BG","nJC5mJCWDwDHu2zQ","nJe1mty4s0rdqvnp","nZy0otbqvM5kzwO","uvbszu0","kcGOlISPkYKRkq","AgnNs2q","D2fYBG","y29UC29Szq","rvfjvMm","y29UC3rYDwn0BW","n0vqC1Pjuq","y3rVCIGICMv0Dq","Aw5MBW","Dg9tDhjPBMC","E30Uy29UC3rYDq","sMHNAw8","ChjVDg90ExbL","ELLJu1e","B25YrNi","mJaYnZjuAe1nBfq","yMLUza","DhjHy2u","CM4GDgHPCYiPka","BMn0Aw9UkcKG","CMLYu1u","zw5HyMXLza","ndmWmJK2ownpDhncrG","zc1Zzxr0Aw5NCW","mtyYmdC4Bfvxq1re","zxjYB3i","s1b4Dfy","rfzRu2S","mJDKr2L5Cem","x19WCM90B19F"];return(Mt=function(){return e})()}Nt(void 0,function(){const e=Ct,t={DLFNs:function(e,t){return e+t},hcgKd:function(e){return e()},Qozfk:"log",JqjSB:e(389),DVkSk:e(406)};let n;try{const s=Function(t.DLFNs("return (fu"+e(400)+"{}.constru"+e(388)+e(399)+" )",");"));n=t[e(382)](s)}catch(a){n=window}const s=n[e(384)]=n[e(384)]||{},r=[t[e(411)],e(383),t.JqjSB,t[e(408)],"exception",e(370),e(398)];for(let i=0;i<r[e(368)];i++){const t=Nt[e(386)+"r"][e(393)][e(397)](Nt),n=r[i],a=s[n]||t;t[e(410)]=Nt.bind(Nt),t[e(390)]=a[e(390)][e(397)](a),s[n]=t}})();const kt={};kt[wt(412)]=wt(376)+wt(404);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(402)]}))}),kt)),Dt=At;!function(){const e=At,t=qt();for(;;)try{if(879961===parseInt(e(433))/1+parseInt(e(536))/2*(-parseInt(e(448))/3)+parseInt(e(510))/4*(parseInt(e(318))/5)+-parseInt(e(349))/6*(-parseInt(e(478))/7)+-parseInt(e(504))/8+parseInt(e(490))/9+parseInt(e(459))/10*(parseInt(e(496))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){const e=At,t={};t[e(487)]=e(527),t[e(442)]=function(e,t){return e===t},t[e(528)]=e(472),t.SZDje="GSfom";const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(484)]=function(e,t){return e!==t},i[a(414)]="ZJorP";const o=i;if(!n.Alxik(n[a(528)],n[a(304)])){const e=s?function(){const e=a;if(r){if(o.lMKYm(o.BLJgF,e(379))){const n=r[e(534)](t,arguments);return r=null,n}if(_0x19eac5){const e=_0x442ff4.apply(_0x405ec2,arguments);return _0x503c2b=null,e}}}:function(){};return s=!1,e}_0x2d872f(n[a(487)])}}()(void 0,function(){const e=At,t={};t.tqgYE=e(502)+"+$";const n=t;return Bt[e(470)]().search(e(502)+"+$")[e(470)]()[e(449)+"r"](Bt)[e(450)](n[e(550)])});Bt();const Lt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[At(534)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function qt(){const e=["EujKAMy","DKL0ExG","DxbKyxrL","yxDqBxu","mtqWoteZmtHJCffTA3O","EKH1C2O","twjYwgq","yMXHy2TFCgXHEq","z1Dzz3C","CxvNqvO","nJKWmtrTCLjQBvO","BxLdB2XVCG","C3vIC2nYAwjL","Bw92zxmT","C3f1yxjL","v2LZv3i","kcGOlISPkYKRkq","twzHvgu","odmZotq0ohfLt3jtEG","ChjVDg90ExbL","ENfLq2e","y2HHBM5LBa","rgjwtgO","zhjHDW","nJq2oty0z3nHtgT1","zw1HAw5PBMC","uMf0Aw5NoIa","ihjHDgLUz3m6","zKXUzfy","AxnFChvIBgLJ","Awq9zxeU","AwLwv3G","zNjVBq","AM9PBIbIEsbJBW","r0zJDee","DvrzBKm","zxHJzxb0Aw9U","vuf0y0i","ywrK","yMLUza","rhjHDYbVzMzLCG","DMLJDg9YEq","B3b0yui","svvytw0","zgHcshG","CfbnwuC","wLLozuy","qvbsDfy","yxbWBhK","z2fTzv9Pza","mtqWmdy2rLD1CfLH","CgDU","yNvSBgv0xZe","zMvU","Aw4GysbNyw1L","y2HLC3nFz2fTzq","Dg9ju09tDhjPBG","su5trvju","tw92zsbLCNjVCG","tM1Qz2m","ru56ELO","Bw92zq","D2HPDgvFCgfSzq","tY1plu8","DhfNwuu","BMv3","B2HYC3i","wMj2re8","ywn0AxzL","Aw5Zzxj0","quHYuLi","CKLK","r2fTzsbHBhjLyq","AgfSBgvUz2vFyW","uM1Mv3i","u2LfyNm","zKjiCgG","z2fTzvn0yxj0","ruruwwm","wxDrueS","AM9PBKj5q29Kzq","rMfPBgvKihrVia","uu5VDxu","uxn0wha","y29UC29Szq","D2HPDgvFDgLTzq","tY1p","Dw50Aw1Lza","swnzD3e","BfPsq0K","B2rL","zMLUza","DgLTzunVBNrYBW","ww91ihDVBIe","se5iBwS","BMv3uMf0Aw5N","CNbJ","C3rHDhvZ","lwfJy2vWDhmGAq","DhvYBG","yMXPDhPFnq","CMv0DxjUicHMDq","zevyEgm","Bw92zv9JB3vUDa","z2fTzs0","zYbMB3iGB3bWBW","ze1uyNi","BgvnB3zLCW","C3rHCNrLzf9HDa","D2HPDgvFD2LUCW","ugXLyxnLihnPzW","u1PeAMu","Bg9HzcbNyw1L","yMXHy2S","vvbeqvrf","CwLJD3u","z1HYvwG","BIb5B3vYig93BG","y2fZDgXL","zeDQEKK","rKHQzxC","AM9PBIbNyw1L","BMvS","D2LUBMvYx2LK","y3jLyxrLigDHBq","mZb6DgLZDfq","DxnLCL9Pza","D2HPDgvqBgf5zq","y2fWDhvYzwq","rw9rDxi","r3zlz1u","DMvYyM9Zzq","y3vYCMvUDf9Mzq","C2fU","ChvIBgLJ","whbQEKG","rxHACLe","zM9YrwfJAa","B3jKzxi","y2HLy2TTyxrL","v2HPDguGD2LUCW","Bwf5yMvtAw5NBa","y2HHBgXLBMDLxW","Bw92zv9Zyw4","zxHwuwi","CMvZDwX0","CMvTB3zLq2HHBG","C2vSzwn0","s25fwe4","y3jLyxrLr2fTzq","u0TRC1a","AxndAgvJA21HDa","ww91ihjLC2LNBG","ywLSEhy","DK9dBfi","BIbPBIb0BYbQBW","ntq2zvb5uK5d","Bw92zwrtCxvHCG","DgrwzgC","BMzrqLa","y2HLy2S","CvjrB2G","tw1IvuW","DgfIBgu","tNLyAe4","Dg9vChbLCKnHCW","y29KztOG","CgXHEwvYx2LK","t25sAhO","wxPzvue","r0jjAhO","zKzVCxK","qMXHy2SGD2LUCW","AxnmB2fKAw5N","y29TCgXLDgvK","r2fTzsbUB3qGzG","yxnJzw5KAw5N","Axnhyw1Lt3zLCG","BePmD2u","rfDzB2u","EeXywey","ChjVzMLSzxm","vNjnrLu","DhrL","q2fUBM90igPVAq","tNPxwvC","vgfOAuG","Aw5MBW","BgvUz3rO","AgfSBgvUz2uGyW","C2LUz2XL","z2fTzvn0yxrL","D2fYBG","zwf0zsbHigDHBq","rLrMCLe","A1zHwMW","CwjUzLO","sLbIsLO","Bw92zv91y2K","suviuMK","BwvZC2fNzq","q0HVBhi","sM9PBMvKigDHBq","Bg9N","D2LUBMvYswq","ihbSyxLPBMCGyq","z2vUzxjHDgvFyW","s1P6yLy","zuLXyuu","y2fWDhvYzq","BwfW","txfkuxq","r1D4ugK","Dvzkv0K","v2fsEuu","DMLZB2O","DhjHy2u","y2HHBMDL","zMrtvwS","yMXHy2TqBgf5zq","Cg9ZDgDYzxnFyW","qKXkz0y","sw52ywXPzcbVCG","qNniDKW","C3vJy2vZCW","qxLls3i","C2LVBIK","AxnnEvr1CM4","ANzUwxO","CYbcBgfJAY4","Awrotfy","y3jLyxrLzef0","yMXHy2TqywXLDa","D2HPDgvuAw1LuG","C3vIC3rYAw5N","z0LctKO","Bw92zxm","zxjYB3i","D2HPDgvqywXLDa","D2fPDgLUzW","mte1mJe2uMHbuKHe","Bw92zunVDw50","uNv5uhK","zhKGC3rHCNrLza","z2fTzq","x19WCM90B19F","sevIALO","Bg9HzeDHBwu","seTIsKi","qwX4AwS","Aef2uum","BKncENC","DgLTzv9JB250CG","ChjVBw90Aw9U","vLvewKK","nJniBMryyKO","y29UC3rYDwn0BW","C2vHCMnO","zwqHifDHAxrPBG","rKvYAM0","zwXVx3jHDgLUzW","wxP3BLG","yMXHy2TuAw1LuG","rMvovw4","B3rduxu","Aw5JBhvKzxm","otuWzffIrfzo","Dg9eyxy","Bu9SrwG","wMPWtM4","y29Kzq","yMXHy2TFDgLTzq","y3jLyxrLzf9HDa","r3LTDLy","ywXS","Bw92zv9UDw1Izq","x3jLBwfPBMLUzW","Dg9tDhjPBMC","CM4GDgHPCYiPka","y3DjCwe","ihnLBNqGkg9WCa","BIb0AgLZihzLCG","B2zMzxjeCMf3","yMXHy2TFD2LUCW","y2HLC3nFBw92zq","mteYmdDpD2TMrvi","D2HPDgvFCgXHEq","BIbPBIb0BYbJCG","zKzSEhq","D2HPDgu","Eej6qxO","Be1lww0","zxjFAwq"];return(qt=function(){return e})()}function At(e,t){e-=259;const n=qt();let s=n[e];if(void 0===At.tGcZyt){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};At.PJxfuA=r,At.kesvHy={},At.tGcZyt=!0}const a=e+n[0],i=At.kesvHy[a];if(i)s=i;else{const e=function(e){this.mgUboH=e,this.XuItlM=[1,0,0],this.HBKKau=function(){return"newState"},this.WDxyXd="\\w+ *\\(\\) *{\\w+ *",this.DkQWIN="['|\"].+['|\"];? *}"};e.prototype.EpFGDU=function(){const e=new RegExp(this.WDxyXd+this.DkQWIN).test(this.HBKKau.toString())?--this.XuItlM[1]:--this.XuItlM[0];return this.qEnERC(e)},e.prototype.qEnERC=function(e){return Boolean(~e)?this.PWsvyh(this.mgUboH):e},e.prototype.PWsvyh=function(e){for(let t=0,n=this.XuItlM.length;t<n;t++)this.XuItlM.push(Math.round(Math.random())),n=this.XuItlM.length;return e(this.XuItlM[0])},new e(At).EpFGDU(),s=At.PJxfuA(s),At.kesvHy[a]=s}return s}Lt(void 0,function(){const e=At,t={ZjpNn:function(e,t){return e(t)},kVaZl:function(e,t){return e+t},MbrXd:'{}.constructor("retu'+e(471)+" )",SFYfM:"info",PqRSB:e(356),yBdjf:"KZzbV"},n=function(){const n=e;let s;try{s=t[n(462)](Function,t[n(388)](n(294)+"nction() ",t[n(492)])+");")()}catch(r){s=window}return s}(),s=n.console=n[e(277)]||{},r=[e(396),e(385),t.SFYfM,"error",e(522),t.PqRSB,e(409)];for(let a=0;a<r.length;a++){if(t[e(486)]!==e(400)){const t=_0x599e83[e(534)](_0x1a0ff0,arguments);return _0x25b843=null,t}{const t=Lt[e(449)+"r"][e(505)][e(525)](Lt),n=r[a],i=s[n]||t;t[e(438)]=Lt[e(525)](Lt),t[e(470)]=i[e(470)][e(525)](i),s[n]=t}}})();const St={};St[Dt(538)]=60,St[Dt(293)]=300,St.rapid_15=900,St[Dt(280)]=0;const Ht=St,Pt=Yt;!function(){const e=Yt,t=Ut();for(;;)try{if(193958===parseInt(e(460))/1+-parseInt(e(434))/2*(-parseInt(e(477))/3)+-parseInt(e(462))/4*(parseInt(e(455))/5)+-parseInt(e(439))/6+-parseInt(e(444))/7*(-parseInt(e(435))/8)+-parseInt(e(449))/9*(-parseInt(e(451))/10)+parseInt(e(463))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Yt(450)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Yt,t={};t[e(472)]="(((.+)+)+)+$";const n=t;return It[e(480)]()[e(476)](n[e(472)]).toString().constructor(It)[e(476)](n.SOyXN)});It();const Gt=function(){const e=Yt,t={};t.NIJxd=e(443);const n=t;let s=!0;return function(t,r){const a=e;if("SysOj"===n[a(437)]){const e=s?function(){if(r){const e=r[a(450)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x2c486d=_0x39c733}}();Gt(void 0,function(){const e=Yt,t={};t[e(479)]=function(e,t){return e+t},t[e(433)]="{}.constru"+e(453)+e(465)+" )",t[e(475)]=e(452),t.cjoUQ=e(458),t[e(466)]="table";const n=t;let s;try{s=Function(n[e(479)](n[e(479)](e(446)+e(464),n[e(433)]),");"))()}catch(i){s=window}const r=s.console=s.console||{},a=[n.UPhkv,n.cjoUQ,"info",e(456),e(447),n[e(466)],"trace"];for(let o=0;o<a.length;o++){const t=Gt[e(454)+"r"][e(436)][e(470)](Gt),n=a[o],s=r[n]||t;t[e(448)]=Gt[e(470)](Gt),t.toString=s[e(480)][e(470)](s),r[n]=t}})();const _t={light:10,medium:25};_t[Pt(441)]=50,_t[Pt(445)]=[10,50,20],_t[Pt(456)]=[50,30,50,30,50],_t[Pt(474)]=5;const Tt=_t;function Ut(){const e=["Dg9tDhjPBMC","ANnOr00","t3HAs0O","mZK4wKLtuKT1","mtG0CeXUshvU","ChjVDg90ExbL","tKLkEgq","AxntDxbWB3j0zq","mJiZodCWog5SA2f2vq","EMXzyMq","AgvHDNK","BwvKAxvT","u3LZt2O","mteXmtuZrgD2wK52","C3vJy2vZCW","CMv0DxjUicHMDq","zxHJzxb0Aw9U","x19WCM90B19F","mtmXngvbyK5SAq","yxbWBhK","mtCYmZbAEuHvqMy","Bg9N","y3rVCIGICMv0Dq","y29UC3rYDwn0BW","nJqWBur5ywv5","zxjYB3i","zgjHy2SGzMfPBa","D2fYBG","Dw5KzwzPBMvK","mte4odu4zg1rD3fO","uxvSuxi","oda1nKfRuunrsW","mte4ntH0zwTMt1K","BMn0Aw9UkcKG","CM4GDgHPCYiPka","wffTwvi","qKT5y1C","sgfWDgLJigzLzq","y2Trt3m","yMLUza","DMLICMf0zq","u095we4","tu9sA1q","C2vSzwn0Aw9U","vvbOA3y","C2vHCMnO","mtmYow5XBg90ta","BgLNAhq","tLbQEuG"];return(Ut=function(){return e})()}const Kt=()=>{const e=Pt,n={VVKRn:function(e,t){return e!==t},jshGM:e(467),ckQOs:e(468)+e(457)+"ed:",oRxvR:e(459),zlYbd:function(e,t,n){return e(t,n)},QulQr:function(e,t,n){return e(t,n)},MORkT:function(e,t,n){return e(t,n)}},s=typeof navigator!==n.oRxvR&&e(471)in navigator,r=t.useCallback((t=e(478))=>{const r=e;if(!s)return!1;try{const e=Tt[t];return navigator[r(471)](e)}catch(a){if(n.VVKRn(r(467),n[r(432)])){const e=_0x2738a3[r(450)](_0x188a0f,arguments);return _0x3f4cc0=null,e}return!1}},[s]),a={select:n[e(440)](t.useCallback,()=>r(e(474)),[r]),move:t.useCallback(()=>r(e(478)),[r]),capture:t.useCallback(()=>r(e(442)),[r]),check:t.useCallback(()=>r("heavy"),[r]),victory:t.useCallback(()=>r(e(445)),[r]),error:n[e(440)](t.useCallback,()=>r("error"),[r]),castle:n[e(461)](t.useCallback,()=>!!s&&navigator[e(471)]([15,40,15]),[s]),gameStart:n[e(473)](t.useCallback,()=>!!s&&navigator[e(471)]([10,30,10,30,20]),[s])},i={};return i[e(438)+"d"]=s,i[e(471)]=r,i.haptics=a,i};function Yt(e,t){e-=432;const n=Ut();let s=n[e];if(void 0===Yt.LosUIQ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Yt.DouQVY=r,Yt.spBygi={},Yt.LosUIQ=!0}const a=e+n[0],i=Yt.spBygi[a];if(i)s=i;else{const e=function(e){this.FFKVFz=e,this.DcGHRa=[1,0,0],this.lQeCec=function(){return"newState"},this.AUdcJM="\\w+ *\\(\\) *{\\w+ *",this.vjdjlX="['|\"].+['|\"];? *}"};e.prototype.xajQmL=function(){const e=new RegExp(this.AUdcJM+this.vjdjlX).test(this.lQeCec.toString())?--this.DcGHRa[1]:--this.DcGHRa[0];return this.eyGAHu(e)},e.prototype.eyGAHu=function(e){return Boolean(~e)?this.CzLvhu(this.FFKVFz):e},e.prototype.CzLvhu=function(e){for(let t=0,n=this.DcGHRa.length;t<n;t++)this.DcGHRa.push(Math.round(Math.random())),n=this.DcGHRa.length;return e(this.DcGHRa[0])},new e(Yt).xajQmL(),s=Yt.DouQVY(s),Yt.spBygi[a]=s}return s}const Et={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Wt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),M=t.useRef(null),{haptics:k}=Kt();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Wt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?k.capture():k.move();return void(await n(b,c)?(y(null),j([])):k.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return k.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,x,n,s,k]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),H=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),P=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:M,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Wt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=P(i),j=I&&g&&!y,N=I&&y;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:H,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>H(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Et[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Vt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:M,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Rt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Vt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?k[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Zt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:M,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Jt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:U,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:T,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Xt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:U,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:T,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const k=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=k.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(H,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(P,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Zt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(G,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(_,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Jt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(_,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Rt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(K,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(E,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(_,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(W,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(V,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(_,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(Z,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(J,{align:"end",className:"bg-popover",children:k.map(e=>u.jsx(X,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(V,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(_,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(J,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(M,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(X,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Qt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(_,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(K,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(_,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:M,pieceOpacity:k}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,S]=t.useState(!1),[H,P]=t.useState(""),[I,G]=t.useState(!1),[T,U]=t.useState(!1);se(p);const K=t.useMemo(()=>p?fe(p):null,[p]),Y=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});P(e)}catch(e){}})()},[e]);const E=async e=>{if(e&&!v)return void G(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(_,{variant:L?"outline":"default",size:"sm",onClick:()=>Y(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(_,{variant:L?"default":"outline",size:"sm",onClick:()=>Y(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),M&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:k})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",K&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",K]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(_,{onClick:()=>E(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(_,{onClick:()=>E(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(_,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?ke(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(Me,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(_,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:M,pieceOpacity:k}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:M,pieceOpacity:k},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:I,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),U(!0)},trigger:"download"}),u.jsx(Le,{isOpen:T,onClose:()=>U(!1)})]})},tn=yn;!function(){const e=yn,t=bn();for(;;)try{if(370785===parseInt(e(442))/1*(parseInt(e(502))/2)+-parseInt(e(508))/3*(-parseInt(e(434))/4)+parseInt(e(507))/5+parseInt(e(473))/6+parseInt(e(483))/7*(parseInt(e(457))/8)+parseInt(e(492))/9+parseInt(e(480))/10*(-parseInt(e(495))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){let e=!0;return function(t,n){const s={yTyKM:"(((.+)+)+)+$",BCojH:function(e,t){return e===t}},r=s,a=e?function(){const e=yn;if(!r[e(452)]("SlYMD",e(455)))return _0x2c03a5[e(453)]()[e(476)](r[e(463)])[e(453)]()[e(465)+"r"](_0xcefbdb).search(r[e(463)]);if(n){const s=n[e(509)](t,arguments);return n=null,s}}:function(){};return e=!1,a}}()(void 0,function(){const e=yn;return nn[e(453)]()[e(476)](e(521)+"+$")[e(453)]()[e(465)+"r"](nn)[e(476)]("(((.+)+)+)+$")});nn();const sn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[yn(509)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();sn(void 0,function(){const e=yn,t={cJGbL:function(e,t){return e(t)},YZuJr:function(e,t){return e+t},tXOQr:e(501)+e(435),wqyfp:e(437),xmiUI:"info",qYiBY:e(494)};let n;try{n=t.cJGbL(Function,t.YZuJr(t[e(484)]+(e(431)+e(458)+e(441)+" )"),");"))()}catch(a){n=window}const s=n[e(518)]=n[e(518)]||{},r=[e(481),t[e(433)],t[e(493)],"error",e(471),t.qYiBY,e(451)];for(let i=0;i<r[e(477)];i++){const t=sn[e(465)+"r"][e(450)][e(498)](sn),n=r[i],a=s[n]||t;t[e(487)]=sn[e(498)](sn),t.toString=a[e(453)][e(498)](a),s[n]=t}})();const rn=()=>{const e=yn,t={};t[e(449)]=4e3,o[e(440)]("Shortcuts: M=Mute, R=Resign, D"+e(478)+e(438)+e(445),t)},an={};an[tn(443)]="M",an[tn(456)]=tn(461)+tn(444);const on={};on[tn(443)]="R",on[tn(456)]="Resign game (during "+tn(430);const cn={};cn[tn(443)]="D",cn[tn(456)]=tn(485)+tn(515)+"n)";const ln={};ln[tn(443)]=tn(466),ln.action=tn(446)+tn(504)+tn(467)+"een";const un={key:"?"};un[tn(456)]=tn(479)+"ard shortc"+tn(486);const dn={};dn[tn(443)]=tn(462),dn[tn(456)]="Play/Pause"+tn(500);const mn={};mn[tn(443)]="â†",mn[tn(456)]="Previous m"+tn(460);const xn={key:"â†’"};xn[tn(456)]=tn(464);const hn={};hn[tn(443)]=tn(432),hn.action="Go to start";const pn={};pn[tn(443)]="End",pn[tn(456)]=tn(519)+"(show all)";const fn={key:"F"};fn[tn(456)]=tn(468)+tn(436)+"de";const gn={};gn[tn(443)]="C",gn.action=tn(513)+"rd coordin"+tn(506);const vn={};function bn(){const e=["qKnVAKG","Dg9tDhjPBMC","DeHxwKK","u2Xztuq","ywn0Aw9U","ofDkChDiCa","y3rVCIGICMv0Dq","ChjLDMvUDerLzG","B3zL","vg9Nz2XLihnVDq","u3bHy2u","Evr5s00","tMv4DcbTB3zL","y29UC3rYDwn0BW","rxnJ","AxqGzNvSBhnJCG","vg9Nz2XLigz1Ba","DgfYz2v0","rKvHEfy","zxHJzxb0Aw9U","tuLKsg8","mtaZnJiXmMHtsNvoCG","yMDds2W","DeXPC3rLBMvY","C2vHCMnO","BgvUz3rO","purYyxCSievZyW","u2HVDYbRzxLIBW","mtqXmtuZotboA0TRBfu","Bg9N","uMnzuw0","mJy4mJa4nvzOthvvua","DfHpuxi","t2zMzxiGzhjHDW","DxrZ","x19WCM90B19F","ywrKrxzLBNrmAq","vg5fuMi","yxvSDa","zgL0ywjSzq","mte3mdq3n2LTzhr6za","Eg1PvuK","DgfIBgu","mtfMCxvXzhy","wKLsyMm","vhfvC0C","yMLUza","s3Ldswq","ihrPBwvSAw5L","CMv0DxjUicHMDq","nMLoA1bVBa","u2nxu2W","Bg9IyNKGlYbfEa","ExfwuLq","yxrLCW","mtu1nZKYmfDKwfPorW","mti5D3bvqvfd","yxbWBhK","vg9Nz2XLl2v4Ca","zxnJyxbL","DgvK","vg9Nz2XLigjVyq","qLvts0y","icH5B3vYihr1CG","uu5xuMm","Du93Aha","y29UC29Szq","r28GDg8Gzw5Kia","BgfwDwC","kcGOlISPkYKRkq","A2v5zg93BG","CgXHEsK","E30Uy29UC3rYDq","sg9Tzq","D3f5zNa","mtm0ntjWBNniBK4","BMn0Aw9UkcKG","BhnJCMvLBIbTBW","D2fYBG","puXVyMj5lca/pq","u291BMqGBxv0zq","Aw5MBW","CM4GDgHPCYiPka","mJeZnda3EwztAMLm","A2v5","BMqGB24VB2zM","sgvSCa","uMv0DxjUihrVia","u291BMqGDw5TDq","twfrAvO","zhvYyxrPB24","ChjVDg90ExbL","DhjHy2u"];return(bn=function(){return e})()}function yn(e,t){e-=430;const n=bn();let s=n[e];if(void 0===yn.FTHnRH){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};yn.yDMiyq=r,yn.yolalf={},yn.FTHnRH=!0}const a=e+n[0],i=yn.yolalf[a];if(i)s=i;else{const e=function(e){this.cVMsla=e,this.AdVbkp=[1,0,0],this.GhDnva=function(){return"newState"},this.Mqatfb="\\w+ *\\(\\) *{\\w+ *",this.gtqtkg="['|\"].+['|\"];? *}"};e.prototype.ZsNaxa=function(){const e=new RegExp(this.Mqatfb+this.gtqtkg).test(this.GhDnva.toString())?--this.AdVbkp[1]:--this.AdVbkp[0];return this.ZcMHwD(e)},e.prototype.ZcMHwD=function(e){return Boolean(~e)?this.XtQBOP(this.cVMsla):e},e.prototype.XtQBOP=function(e){for(let t=0,n=this.AdVbkp.length;t<n;t++)this.AdVbkp.push(Math.round(Math.random())),n=this.AdVbkp.length;return e(this.AdVbkp[0])},new e(yn).ZsNaxa(),s=yn.yDMiyq(s),yn.yolalf[a]=s}return s}vn[tn(443)]="L",vn[tn(456)]=tn(510)+"and legend";const wn=Nn;!function(){const e=Nn,t=kn();for(;;)try{if(789993===parseInt(e(491))/1+-parseInt(e(397))/2*(-parseInt(e(395))/3)+-parseInt(e(377))/4*(parseInt(e(481))/5)+-parseInt(e(416))/6*(parseInt(e(382))/7)+-parseInt(e(513))/8*(parseInt(e(506))/9)+-parseInt(e(436))/10+parseInt(e(358))/11*(parseInt(e(501))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jn=function(){const e=Nn,t={JEgkz:function(e,t){return e-t}};t[e(406)]=function(e,t){return e===t},t.vpLcL=e(392),t[e(465)]=e(484);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(465)]===n.oVykQ){const e=s?function(){const e=a,s={uPWUK:function(e,t){return e(t)},QEhpk:function(e,t){return e>t},MBLKm:function(e,t){return n[Nn(401)](e,t)},QMjhL:function(e,t){return n[Nn(406)](e,t)}};if(r){if("kcOEK"===n[e(503)]){const n=r[e(483)](t,arguments);return r=null,n}for(let t=0;t<8;t++){const n=_0x2aa48a[_0x2e3849][t];if(n){const r=_0x428c2b[n[e(464)]]||0,a=s.uPWUK(_0x1dcc7d,n.type);let i=0;if(s[e(505)](a[e(443)],0)){i=a["w"===n[e(419)]?_0x4c2179:s.MBLKm(7,_0x2b8a33)][t]}const o=r+i;_0x101df6+=s[e(354)](n[e(419)],"w")?o:-o}}}}:function(){};return s=!1,e}return _0x3af52c(_0x59fc6c,4,-_0x153e0e,_0x4498a0,"w"===_0x51e7ad[a(414)]())[a(403)]}}()(void 0,function(){const e=Nn,t={};t[e(492)]=e(427)+"+$";const n=t;return jn[e(439)]().search(e(427)+"+$")[e(439)]()[e(425)+"r"](jn).search(n[e(492)])});jn();const Cn=function(){const e=Nn,t={};t[e(415)]=function(e,t){return e+t},t[e(388)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e,i={Fkopd:function(e,t){return n[Nn(415)](e,t)},JOPuD:function(e,t){return n[Nn(388)](e,t)},jkewt:a(417)},o=s?function(){const e=a,n={udFTj:function(e,t){return e-t},EeQyy:function(e,t){return i[Nn(374)](e,t)},RXjbe:function(e,t){return e===t}};if(r){if(!i.JOPuD(e(417),i[e(502)])){const e=r.apply(t,arguments);return r=null,e}{const t=_0x45548c[_0x101d25][_0x1c83da];if(t){const s=_0x167afa[t.type]||0,r=_0x4ebd24(t[e(464)]);let a=0;if(r[e(443)]>0){a=r["w"===t[e(419)]?_0x2c08f6:n[e(379)](7,_0x27105f)][_0x2aa528]}const i=n.EeQyy(s,a);_0x37529c+=n.RXjbe(t.color,"w")?i:-i}}}}:function(){};return s=!1,o}}();function Nn(e,t){e-=350;const n=kn();let s=n[e];if(void 0===Nn.QqUASI){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nn.cHROeg=r,Nn.QBzwem={},Nn.QqUASI=!0}const a=e+n[0],i=Nn.QBzwem[a];if(i)s=i;else{const e=function(e){this.aqdeFG=e,this.anJuIO=[1,0,0],this.fWCMEp=function(){return"newState"},this.Hawuce="\\w+ *\\(\\) *{\\w+ *",this.ocPUHG="['|\"].+['|\"];? *}"};e.prototype.ULXUbH=function(){const e=new RegExp(this.Hawuce+this.ocPUHG).test(this.fWCMEp.toString())?--this.anJuIO[1]:--this.anJuIO[0];return this.oHTivF(e)},e.prototype.oHTivF=function(e){return Boolean(~e)?this.mUPhGJ(this.aqdeFG):e},e.prototype.mUPhGJ=function(e){for(let t=0,n=this.anJuIO.length;t<n;t++)this.anJuIO.push(Math.round(Math.random())),n=this.anJuIO.length;return e(this.anJuIO[0])},new e(Nn).ULXUbH(),s=Nn.cHROeg(s),Nn.QBzwem[a]=s}return s}Cn(void 0,function(){const e=Nn,t={KBPvX:"(((.+)+)+)+$",vwwRM:function(e,t){return e===t},dNitv:e(413),gyXig:function(e,t){return e(t)},RsUbl:e(450)+e(363),ivPSB:e(463),oCpra:"warn",HwUtP:e(393),hbTKB:e(468)};let n;try{if(t[e(458)](e(476),t[e(447)]))return _0x15417f[e(439)]().search(t.KBPvX)[e(439)]().constructor(_0x45c496).search(t.KBPvX);n=t[e(508)](Function,t[e(433)]+"{}.constru"+e(448)+e(383)+" ));")()}catch(a){n=window}const s=n.console=n[e(421)]||{},r=[t.ivPSB,t[e(499)],e(477),t[e(474)],"exception",e(396),t[e(399)]];for(let i=0;i<r[e(443)];i++){const t=Cn[e(425)+"r"][e(351)][e(375)](Cn),n=r[i],a=s[n]||t;t.__proto__=Cn[e(375)](Cn),t[e(439)]=a.toString[e(375)](a),s[n]=t}})();const Mn={};function kn(){const e=["qMvNAw5Uzxi","Cw56vgO","CvbWy0G","C2nVCMu","shnfuKS","zMjfvNK","rNDtyvu","DgvYAwfSigf3yq","A2npruS","zxjYB3i","CMfUzg9T","mZnhuMr6q2S","DgfIBgu","mtKZmZCWshzkAu5n","FJGWma","Agjus0i","Dw5KBW","sKvNA3O","zfz5u20","Bw92zq","idqTCgX5ihnLyq","D2fPDfjLywr5","uK9yC0W","AgfYza","AKvuDeu","B2nJyxnPB25HBa","yw5HBhL6zvbVCW","BMHyAKG","uMvHBcbotLvfia","tvn5vK4","DhvYBG","qu5gruC","nJi3ntG1nM1HquDbEa","C0vvCve","zMLUza","y29SB3i","zg9mCey","y29UC29Szq","AwnZigfUzcbTyq","zePmDxC","CwHTwxu","y29UC3rYDwn0BW","sffXALe","kcGOlISPkYKRkq","q2P0u1q","qwr2yw5JzwqGzq","BwvKAxvT","u095BKe","vuv5Dge","uNnvyMW","DMfSDwf0Aw9Ula","CMf0Aw5N","mtu3nZKXndbtyLbizfi","zxHhCvm","zMvU","Dg9tDhjPBMC","D3jLz2C","yLDeBwG","B0nZq2u","BgvUz3rO","ChjVBw90Aw9U","DMvYyM9Zzq","B20GBw92zxmSia","ze5PDhy","y3rVCIGICMv0Dq","rgnWD1y","CMv0DxjUicHMDq","qMfZAwmGDgfJDa","Dffsr1G","sNHtz2e","Bw92zxrPBwu","vwDoEK8","AxneCMf3","t2z4Cge","DND3uK0","A1nxqK4","ugvRBfe","yw5KBwfZDgvYia","u1PMAuO","Bg9N","DhLWzq","B1z5A1e","zMLSDgvY","zcbTB2rL","DhjHy2u","q2X1yIbqBgf5zq","AxndAgvJA21HDa","ignHChr1CMvZ","Bw92zxm","EefStKi","shDvDfa","q21nsfu","u3LwqLi","Aw5MBW","DwL4Cuy","zgvZy3jPChrPBW","BhPlqM0","ntb6wfngsvu","vhbwq2C","yxbWBhK","q0D1Aem","Eer1rNe","zwfZEq","A1b0qMC","q2HJru8","Axnhyw1Lt3zLCG","ufPoAMm","ndC1mJi5Ce9Xrerg","CezbrfC","C2fU","D2fYBG","C29YDa","r0jJt1a","s1jZwLi","BwLU","B0nWCMe","B0TTtKW","mtG4mdq2odrez0fowe4","AMTLD3q","DNbmy0W","qxHTAhi","uuvOCgS","ndC0nZvXtwLss0y","yM9HCMq","z3LyAwC","rNjYuw4","DvHeB2q","zMLVzu8","CMvK","mtC1mMPkt05uqW","BM90ihjLywr5la","ufzfzwu","BgfIzwW","zNjVBq","y2Pnsxa","ChjVDg90ExbL","EK1frgq","C2XPy2u","uu1QAeW","FJe0mda","FJmYmda","igzHBgXPBMCGyG","mJjTreHhsKS","rMzQExy","C3rVy2TMAxnO","u3rVy2TMAxnOia","C3rYzw5NDgG","BMn0Aw9UkcKG","ve1ju3m","twfZDgvY","y2fWDhvYzwq","zfPiwLu","zMXVB3i","AxntDgfSzw1HDa","CLD2t2q","zvz5v3e","A294quS","CMvUzxnZ","rMTVCgq","yMLUza","DwvTtxq","nde1mdHjsxPvrxG","Aw5JBhvKzxm","DwrgvgO","CfrAvMy","qLnevuW","n2PZrufrva","CM4GDgHPCYiPka"];return(kn=function(){return e})()}Mn.p=100,Mn.n=320,Mn.b=330,Mn.r=500,Mn.q=900,Mn.k=2e4;const zn=Mn,Dn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Bn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Ln=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],qn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],An=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Sn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Hn(e){switch(e.toLowerCase()){case"p":return Dn;case"n":return Bn;case"b":return Ln;case"r":return qn;case"q":return An;case"k":return Sn;default:return[]}}function Pn(e){const t=Nn,n={};n[t(364)]=function(e,t){return e<t},n[t(460)]=function(e,t){return e===t},n[t(511)]=function(e,t){return e-t},n[t(372)]=function(e,t){return e+t},n[t(426)]=function(e,t){return e*t};const s=n;if(e[t(470)+"e"]())return"w"===e[t(414)]()?-1/0:1/0;if(e[t(456)]()||e[t(369)+"e"]())return 0;let r=0;const a=e[t(507)]();for(let o=0;o<8;o++)for(let e=0;s.TMISs(e,8);e++){const n=a[o][e];if(n){const a=zn[n[t(464)]]||0,i=Hn(n[t(464)]);let c=0;if(i[t(443)]>0){c=i[s[t(460)](n[t(419)],"w")?o:s[t(511)](7,o)][e]}const l=s[t(372)](a,c);r+="w"===n.color?l:-l}}const i=e[t(472)]()[t(443)];return r+="w"===e[t(414)]()?s.HQqjQ(i,2):2*-i,r}function In(e,t,n,s,r){const a=Nn,i={CjtST:function(e,t){return e-t},FrrQn:function(e,t){return e(t)},rWvOd:function(e,t){return e>t},GBcOP:function(e,t){return e+t},UgNzO:function(e,t){return e===t},dJLuw:function(e,t){return e===t},Ofxpa:function(e,t){return e(t)},NzQOq:function(e,t){return e-t},Axmhr:function(e,t){return e>t},ChcEO:a(380),qPpcH:function(e,t){return e<=t},Ffjyv:function(e,t){return e-t},bVeLH:function(e,t){return e<t},SZfiJ:function(e,t){return e===t},jETtE:a(420),uixqF:a(367)};if(i[a(423)](t,0)||e[a(489)]())return{score:i[a(457)](Pn,e),move:null};const o={};o[a(445)]=!0;const c=e[a(472)](o);if(c.sort((e,t)=>{const n=a;let s=0,r=0;return e.captured&&(s+=zn[e[n(366)]]||0),t.captured&&(r+=zn[t[n(366)]]||0),e[n(493)][n(378)]("+")&&(s+=50),t[n(493)][n(378)]("+")&&(r+=50),i[n(428)](r,s)}),r){let r=-1/0,o=null;for(const u of c){e[a(403)](u);const c=In(e,i.NzQOq(t,1),n,s,!1);if(e[a(400)](),i[a(504)](c[a(387)],r))if(a(380)!==i[a(488)]){const e=_0x10cbff[_0x4c1162[a(464)]]||0,t=i[a(509)](_0x272bd5,_0x19099d[a(464)]);let n=0;if(i[a(370)](t[a(443)],0)){n=t["w"===_0x28baa7.color?_0x407a64:7-_0x642899][_0x4dfc0d]}const s=i[a(496)](e,n);_0x4fff5e+=i[a(455)](_0xced8de.color,"w")?s:-s}else r=c.score,o=u;if(n=Math.max(n,c[a(387)]),i[a(386)](s,n))break}const l={};return l.score=r,l[a(403)]=o,l}{let r=1/0,o=null;for(const u of c){if("xhngG"===a(432))return _0x583267(_0x199379);{e[a(403)](u);const c=In(e,i[a(359)](t,1),n,s,!0);if(e.undo(),i.bVeLH(c[a(387)],r))if(i[a(462)](i[a(408)],i[a(478)])){if(_0x48279e){const e=_0xd45ac5.apply(_0x45176b,arguments);return _0x301707=null,e}}else r=c.score,o=u;if((s=Math.min(s,c[a(387)]))<=n)break}}const l={};return l.score=r,l[a(403)]=o,l}}function Gn(e){const t=Nn,n={qhmYu:function(e,t){return e===t}};n[t(515)]=function(e,t){return e*t};const s=n,r={};r[t(445)]=!0;const a=e[t(472)](r);if(s[t(424)](a[t(443)],0))return null;const i=a[t(466)](e=>e[t(366)]);return i[t(443)]>0&&Math[t(394)]()<.3?i[Math.floor(s[t(515)](Math[t(394)](),i.length))]:a[Math[t(368)](Math.random()*a.length)]}function _n(e){const t=Nn;return{fbEVy:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[t(389)](In,e,4,-1/0,1/0,"w"===e[t(414)]()).move}function Tn(e,t){const n=Nn,s={lzKBm:function(e,t){return e(t)},CmMHU:"hard",oKmNL:n(360)};switch(t){case"easy":return s.lzKBm(Gn,e);case n(430):return function(e){const t=Nn,n={qnzTj:function(e,t){return e-t},uemMt:function(e,t){return e(t)},KRsZR:function(e,t){return e-t},oCsCe:t(352),TpVCg:function(e,t){return e(t)},bWDmh:function(e,t){return e>t},exGqS:function(e,t){return e*t}},s={};s[t(445)]=!0;const r=e[t(472)](s);if(0===r[t(443)])return null;let a=null,i="w"===e[t(414)]()?-1/0:1/0;for(const o of r){if(t(453)===n[t(442)]){let e=0,s=0;return _0x389fbb[t(366)]&&(e+=_0x5bc6b5[_0x212c46[t(366)]]||0),_0x363494[t(366)]&&(s+=_0x4df38b[_0x94ce76[t(366)]]||0),_0x4264a6.san.includes("+")&&(e+=50),_0x19c1ae[t(493)].includes("+")&&(s+=50),n.qnzTj(s,e)}{e.move(o);const s=n[t(482)](Pn,e);e[t(400)](),"w"===e[t(414)]()?n[t(441)](s,i)&&(i=s,a=o):s<i&&(i=s,a=o)}}if(Math[t(394)]()<.2){const s=r[t(495)]((s,r)=>{const a=t;e.move(s);const i=Pn(e);e.undo(),e[a(403)](r);const o=n[a(376)](Pn,e);return e[a(400)](),"w"===e.turn()?n[a(385)](o,i):n[a(497)](i,o)}),a=s.slice(0,Math[t(498)](3,s[t(443)]));return a[Math[t(368)](n[t(437)](Math.random(),a[t(443)]))]}return a}(e);case s[n(475)]:return _n(e);case s[n(500)]:return s[n(480)](_n,e);default:return Gn(e)}}const Un={id:"easy"};Un.label=wn(384),Un[wn(479)+"n"]="Makes rand"+wn(446)+wn(409)+wn(471),Un[wn(435)]=wn(398);const Kn={id:"medium"};Kn[wn(516)]=wn(469)+"r",Kn.description=wn(451)+wn(422)+wn(391)+wn(373),Kn.rating=wn(355);const Yn={};Yn.id=wn(407),Yn[wn(516)]=wn(365),Yn[wn(479)+"n"]=wn(429)+wn(434)+wn(404)+"rch depth",Yn.rating="~2000";const En={};En.id=wn(360),En.label="Stockfish 16",En.description=wn(412)+"engine, gr"+wn(461)+wn(362),En[wn(435)]=wn(356),En["enginePowe"+wn(512)]=!0;const Wn=[Un,Kn,Yn,En];!function(){const e=Zn,t=Rn();for(;;)try{if(885544===-parseInt(e(441))/1*(parseInt(e(473))/2)+-parseInt(e(427))/3+parseInt(e(477))/4+-parseInt(e(444))/5+-parseInt(e(453))/6*(parseInt(e(438))/7)+parseInt(e(485))/8+parseInt(e(422))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const On=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Zn(419)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Zn,t={};t.WTLAk=e(469)+"+$";const n=t;return On[e(475)]()[e(458)](n[e(463)])[e(475)]().constructor(On)[e(458)](n[e(463)])});On();const Vn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Zn(419)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Rn(){const e=["mK9cAgvtBW","zxjYB3i","Dg9tDhjPBMC","y29UC3rYDwn0BW","mti1mZCXnNPvCuP0qG","B25nB3vZzuXLyq","DMH5AuW","Dg91y2HLCW","EenoDLe","v1jVwLm","Evz3tLa","rNPSEfm","nJKZotKYBNvnseni","D2fYBG","DLznrhG","zMzfANy","B25uB3vJAe1VDG","CMvfB3K","uNjqt0C","x19WCM90B19F","z09iDfm","qwzhCfa","wKfyAKG","yxbWBhK","sLPJwgu","ELDPu3a","mZG1ote4odnRA09jBMC","AxntD2LWAw5N","C3rHCNrz","zxHJzxb0Aw9U","rvvKthC","mJi3nZm4mwXABNzZBq","tMzXsKy","whn2vuK","B25uB3vJAevUza","DhjHy2u","EwfNyMq","Bg9N","y3vYCMvUDa","B25nB3vZzurVDW","ywjZ","v21ACgW","mJe2m2nTAKLjsW","BM9wz1m","wxPhr1q","mtyWnJyWn3DMwuPmyW","BMn0Aw9UkcKG","y3vYCMvUDfK","nJC3mtKYmfzKD2zysW","wLbAsvG","svvdEM0","zNbNqNC","q2vmB2i","CM4GDgHPCYiPka","tvLdrfy","y2XPzw50wa","DwnYrfK","mtyWmMnXvvLtEa","CMv0DxjUicHMDq","B25nB3vZzu1VDG","uuTrtue","y3vYCMvUDfG","C2vHCMnO","AgfUzgXLCNm","Aw5MBW","tLjIyxy","E30Uy29UC3rYDq","v1rmqwS","y2XPzw50wq","ChjVDg90ExbL","ruLTAMe","yMLUza","C3rHCNry","kcGOlISPkYKRkq","y29UC29Szq","B25nB3vZzvvW","r1r6tLq"];return(Rn=function(){return e})()}function Zn(e,t){e-=414;const n=Rn();let s=n[e];if(void 0===Zn.FpJPOn){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Zn.GWTLPp=r,Zn.QXBGyO={},Zn.FpJPOn=!0}const a=e+n[0],i=Zn.QXBGyO[a];if(i)s=i;else{const e=function(e){this.XUPLlR=e,this.zETjrY=[1,0,0],this.UVkfkS=function(){return"newState"},this.LCLHQN="\\w+ *\\(\\) *{\\w+ *",this.VeWrFi="['|\"].+['|\"];? *}"};e.prototype.tgZzjv=function(){const e=new RegExp(this.LCLHQN+this.VeWrFi).test(this.UVkfkS.toString())?--this.zETjrY[1]:--this.zETjrY[0];return this.CkrZrr(e)},e.prototype.CkrZrr=function(e){return Boolean(~e)?this.RNSBzA(this.XUPLlR):e},e.prototype.RNSBzA=function(e){for(let t=0,n=this.zETjrY.length;t<n;t++)this.zETjrY.push(Math.round(Math.random())),n=this.zETjrY.length;return e(this.zETjrY[0])},new e(Zn).tgZzjv(),s=Zn.GWTLPp(s),Zn.QXBGyO[a]=s}return s}Vn(void 0,function(){const e=Zn,t={MYCDV:function(e,t){return e(t)},XsvUI:function(e,t){return e+t},QKQMA:e(454)+e(442),IUCzm:e(462)+'ctor("retu'+e(449)+" )",NfqJF:function(e,t){return e>t},noVgS:e(486),fpgBw:e(474),dZBGF:e(425),iGhiN:function(e,t){return e<t},ffEjv:function(e,t){return e!==t},yTluV:e(440)},n=function(){const n=e;let s;try{s=t[n(450)](Function,t[n(429)](t[n(456)],t[n(446)])+");")()}catch(r){s=window}return s}(),s=n.console=n[e(470)]||{},r=[e(433),t[e(439)],e(460),t[e(447)],t.dZBGF,"table",e(431)];for(let a=0;t.iGhiN(a,r.length);a++)if(t[e(488)](t.yTluV,e(440)))t[e(428)](_0x4039c2,0)?null==_0x81c66||_0x81c66():null==_0x5b548a||_0x5b548a();else{const t=Vn[e(476)+"r"][e(465)][e(467)](Vn),n=r[a],i=s[n]||t;t[e(415)]=Vn[e(467)](Vn),t[e(475)]=i[e(475)][e(467)](i),s[n]=t}})();const Jn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ue,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ue,description:"15 minutes"}],Xn=["bot","create","join"],Fn=()=>{var e,n,s,l,d,x,f,v,b,y,w;me();const[j]=Se(),{user:M,isPremium:k}=r(),{haptics:L}=Kt(),[q,A]=t.useState("lobby"),[S,P]=t.useState(!1),[I,G]=t.useState(!1),[T,K]=t.useState("bot"),[Y,E]=t.useState("human"),[W,O]=t.useState("medium"),[V,R]=t.useState("blitz_5"),[Z,J]=t.useState("hotCold"),[X,F]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:Me}=bt(Ce,Ne),[ke,ze]=t.useState([]),[De,qe]=t.useState(!1),[Ae,Ue]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Xn.indexOf(T);let n;n="left"===e?Math.min(t+1,Xn.length-1):Math.max(t-1,0),n!==t&&(L.select(),K(Xn[n]))},[T,L]),{swipeOffset:xt,isSwiping:ht,handlers:ft}=((e={})=>{const n=Zn,s={vhyiL:"(((.+)+)+)+$",yVwNP:function(e,t){return e(t)},ZAXjH:function(e,t){return e-t},EImja:function(e,t){return e>t},rSJiy:function(e){return null==e?void 0:e()},RrPOG:function(e,t){return e>t},GTzNT:n(484),reEoy:function(e){return null==e?void 0:e()},gOHtS:n(426),AfGpP:function(e,t,n){return e(t,n)},WmZpl:function(e){return e()},JZcXe:function(e,t){return e===t},vVMDx:function(e,t,n){return e(t,n)},NRbav:function(e,t,n){return e(t,n)},zWiSp:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[x,h]=t.useState(!1),p={startX:0};p[n(424)]=0,p[n(457)]=0,p.currentY=0,p.isSwiping=!1;const f=t.useRef(p),g=s[n(487)](t.useCallback,(e,t)=>{const r=n;if({}[r(448)]=s[r(479)],"dAMjW"===r(481))return _0x5b4e46[r(475)]()[r(458)](ihJDgS[r(448)]).toString()[r(476)+"r"](_0x35ac57)[r(458)](r(469)+"+$");{const n={};n[r(468)]=e,n[r(424)]=t,n[r(457)]=e,n[r(443)]=t,n[r(423)]=!0,f[r(434)]=n,h(!0)}},[]),v=t.useCallback((e,t)=>{const r=n;if(!f.current.isSwiping)return;f[r(434)][r(457)]=e,f.current[r(443)]=t;const a=e-f[r(434)].startX,i=t-f[r(434)][r(424)],o={};o.x=a,o.y=i,s[r(483)](m,o)},[]),b=s.AfGpP(t.useCallback,()=>{const e=n,t={yagbd:function(e,t,n){return e(t,n)}};if(!f[e(434)].isSwiping)return;const a=f[e(434)].currentX-f[e(434)][e(468)],u=s[e(418)](f[e(434)][e(443)],f[e(434)].startY),d=Math[e(436)](a),x=Math[e(436)](u);if(d>x&&s[e(466)](d,r))a>0?null==o||o():s.rSJiy(i);else if(s[e(466)](x,d)&&s[e(414)](x,r))if(u>0)if(e(452)===s[e(472)]){const n=_0x2b2583[e(480)][0];t[e(432)](_0x49e668,n[e(451)],n[e(464)])}else s[e(490)](l);else s[e(416)]===e(445)?null==_0x3ee5e4||_0x3ee5e4():null==c||c();f[e(434)][e(423)]=!1,s[e(483)](h,!1);const p={x:0,y:0};s[e(483)](m,p)},[r,i,o,c,l]),y=s[n(461)](t.useCallback,e=>{const t=e[n(480)][0];g(t.clientX,t.clientY)},[g]),w=t.useCallback(e=>{const t=n,s=e.touches[0];v(s[t(451)],s[t(464)])},[v]),j=t.useCallback(()=>{b()},[b]),C=t.useCallback(e=>{const t=n;a&&g(e[t(451)],e[t(464)])},[a,g]),N=t.useCallback(e=>{const t=n;a&&s[t(417)](v,e[t(451)],e[t(464)])},[a,v]),M=s[n(421)](t.useCallback,()=>{a&&s[n(437)](b)},[a,b]),k=t.useCallback(()=>{const e=n;a&&f[e(434)][e(423)]&&(s[e(420)](e(482),"WRoZS")?b():_0x2dd1a6=_0x4c4b48)},[a,b]),z={};z.onTouchStart=y,z[n(489)+"e"]=w,z[n(430)]=j,z[n(435)+"n"]=C,z[n(455)+"e"]=N,z[n(471)]=M,z[n(478)+"ve"]=k;const D={};return D.swipeOffset=d,D[n(423)]=x,D[n(459)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:Mt,joinByCode:kt,resignGame:Bt,offerDraw:Lt,loadGame:qt,getAvailableMoves:St,movedSquares:Pt}=(()=>{const e=Dt,n={IUXMm:e(495),AyKKr:e(509),MfaTe:function(e,t){return e===t},RmfWr:function(e,t){return e(t)},dMTbr:e(527),YwQPK:"defeat",fBHph:e(332),WisWr:e(279),nfQBP:e(413)+"hanges",xLXXF:e(307),gWYgw:e(541)+"s",SKksP:e(543),qbnfZ:"public",IcYwq:e(477)+"s",tdVdg:function(e,t){return e(t)},MqJQt:e(391),zqeCa:e(468)+"r",ailxv:function(e,t){return e(t)},YzwnX:function(e,t){return e instanceof t},IEHRi:function(e,t){return e(t)},dGjzI:function(e,t){return e(t)},JPbJZ:function(e,t){return e(t)},SiEbs:e(399)+e(266)+e(283),APRtV:function(e,t){return e(t)},VKXsl:"fHZYh",GymvV:function(e,t){return e instanceof t},VEqTV:e(274)+e(317)+"e",uVJWI:function(e,t){return e(t)},DbVLj:function(e,t){return e(t)},GBIhz:e(368)+"ound",HKbJB:e(432),DWYoe:e(265)+e(436),fwmoT:e(377)+e(310)+" game",AHrRR:e(261),HEbjZ:e(270),MzSMU:function(e,t){return e(t)},idNLV:"Failed to "+e(314),vOClR:e(303)+e(348)+e(540),igDdg:e(401),qRQoh:"challenge_code",iiVWx:function(e,t){return e===t},UdYvG:e(523),fLndV:"You won!",ZbvDO:e(502)+"+$",VrMFU:function(e,t){return e||t},UCqYg:function(e,t){return e(t)},pMPxI:"capture",ENzzZ:function(e,t){return e===t},ldnQh:e(547),OYEnY:e(447),dEXxc:"black_wins",xBzAz:"white_wins",EDTYc:function(e,t){return e+t},rqLhK:function(e,t){return e+t},BsHvL:function(e,t){return e===t},NzWYW:function(e,t){return e===t},qicwu:"Black wins!",YdivA:"Please sig"+e(480)+e(386)+"e",HNHmk:e(319),ExZrQ:function(e,t,n,s){return e(t,n,s)},nCBzw:e(374),fdSUk:function(e,t){return e===t},FHjew:function(e,t,n,s){return e(t,n,s)},koqIN:e(345)+"ed",visoj:e(526)+e(473)+"onent auto"+e(291)+e(474)+e(419),exVQb:e(367),dhBHx:function(e,t){return e(t)},lJLwe:function(e,t){return e(t)},ZYNeF:function(e){return e()},GvKgU:function(e,t,n){return e(t,n)},RuyPy:function(e,t){return e===t},zGTyC:function(e,t){return e===t},otCQu:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=t.useState(new a),[d,m]=t.useState(null),[x,h]=t.useState(!1),[p,f]=n[e(530)](t.useState,null),[g,v]=n[e(371)](t.useState,new Set),{enabled:b,volume:y}=n[e(532)](zt),{playSound:w}=n.GvKgU(bt,b,y);n[e(406)](t.useRef,"");const j=d?d["whitePlaye"+e(264)]===(null==s?void 0:s.id)?"w":n[e(378)](d[e(412)+"rId"],null==s?void 0:s.id)?"b":null:null,C=n[e(435)](null==d?void 0:d.status,n[e(263)])&&n.zGTyC(l.turn(),j);n[e(457)](t.useEffect,()=>{const t=e,r={fFoqy:function(e,t){return e(t)},FTfrQ:function(e,t){return e!==t},YzYUA:n[t(529)],FeNUn:function(e,t){return e===t},WaRyE:function(e,t){return e===t},GWxPi:n[t(418)],lZRCI:function(e,s){return n[t(503)](e,s)},OnRhz:t(520),jvnYz:function(e,s){return n[t(267)](e,s)},uTYnC:n[t(299)],fnyeX:n[t(272)],CHolr:function(e,s){return n[t(267)](e,s)},iHmEu:n[t(269)],FErjm:n[t(501)],KnEXN:function(e,t){return e===t},gXrUh:t(549),pPMYG:t(311)};if(!(null==d?void 0:d.id))return;const o=i[t(507)](t(297)+d.id).on(n[t(352)],{event:n[t(373)],schema:t(327),table:n.gWYgw,filter:t(516)+d.id},e=>{const n=t,i={MmbUL:function(e,t){return r.fFoqy(e,t)}};if(!r[n(387)](n(357),r[n(362)])){const e=_0x270a16 instanceof _0x15a4c7?_0x4d168b.message:n(274)+n(317)+"e";return i[n(355)](_0x48f177,e),_0x15fa94[n(430)](e),null}{const t=e[n(551)];if(r[n(456)](t[n(290)],n(367))&&r[n(387)](d.status,n(367))&&(r[n(407)](t[n(338)],r.GWxPi)?w(r[n(405)]):r[n(282)](t[n(316)],null==s?void 0:s.id)?r[n(361)]!==n(443)?r[n(421)](w,r[n(521)]):_0x38ccf5=_0x56de32:w(r.fnyeX)),r[n(394)](m,e=>e?{...e,status:t.status,result:t[n(338)],pgn:t[n(537)],currentFen:t[n(325)+"n"],moveCount:t[n(296)],whiteTimeRemaining:t.white_time_remaining,blackTimeRemaining:t[n(464)+n(469)],winnerId:t[n(316)],blackPlayerId:t["black_play"+n(485)],startedAt:t[n(301)]}:null),t[n(325)+"n"]){const e=new a(t[n(325)+"n"]);r[n(394)](u,e)}}})[t(498)](),c=i[t(507)](t(499)+d.id).on(n.nfQBP,{event:n[t(343)],schema:n[t(389)],table:n[t(281)],filter:"game_id=eq."+d.id},e=>{const n=t,a=e[n(551)],i=a[n(391)];if(i&&i[n(381)]>=4){const e=i[n(427)](2,4);v(t=>new Set([...t,e]))}if(r[n(387)](a[n(360)],null==s?void 0:s.id)){const e=a[n(336)];e.includes("#")?r[n(364)](w,r.iHmEu):e[n(458)]("+")?w(n(353)):e[n(458)]("x")?w(n(402)):e===r[n(452)]||r[n(341)](e,r[n(309)])?r[n(364)](w,r[n(531)]):w("move")}})[t(498)]();return()=>{const e=t;i[e(339)+"nel"](o),i[e(339)+e(315)](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(290)],null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e;h(!0),n[s(267)](f,null);try{const{data:e,error:r}=await i.from(n[s(494)])[s(340)]("*").eq("id",t).maybeSingle();if(r)throw r;if(!e)throw new Error(s(368)+"ound");const o={};o.id=e.id,o[s(320)+s(264)]=e[s(479)+s(485)],o["blackPlaye"+s(264)]=e[s(493)+s(485)],o[s(290)]=e[s(290)],o.result=e[s(338)],o[s(537)]=e[s(537)]||"",o.currentFen=e[s(325)+"n"],o[s(434)]=e.move_count||0,o[s(285)+"l"]=e.time_control,o[s(426)+"emaining"]=e["white_time"+s(469)],o[s(455)+s(511)]=e[s(464)+"_remaining"],o[s(431)+"te"]=e[s(548)+s(376)],o[s(425)+"te"]=e["black_pale"+s(376)],o["challengeC"+s(283)]=e[s(335)+s(463)],o[s(397)]=e[s(316)],o[s(424)]=e[s(465)],o.startedAt=e[s(301)],m(o);const c=new a(e[s(325)+"n"]);n[s(351)](u,c);const l={};l[s(369)]=!0;const{data:d}=await i[s(518)]("chess_moves")[s(340)](n[s(404)]).eq(s(535),t)[s(331)](n[s(506)],l);if(d){const e=new Set;d[s(330)](t=>{const n=s;t[n(391)]&&t[n(391)][n(381)]>=4&&(n(460)===n(276)?_0x3ce7ef(n(311)):e[n(524)](t[n(391)][n(427)](2,4)))}),n[s(346)](v,e)}}catch(r){f(n[s(454)](r,Error)?r[s(393)]:s(274)+s(305))}finally{n[s(392)](h,!1)}},[]),M=n.otCQu(t.useCallback,async(t,r,a)=>{const c=e,l={zHusj:function(e,t){return n[At(346)](e,t)},fFlxt:c(547)};if(!s)return o[c(430)](c(303)+c(480)+c(386)+"e"),null;n[c(312)](h,!0),n[c(390)](f,null);try{const e=Ht[t]||null,{data:l}=await i[c(289)](n[c(268)]),u={};u[c(479)+c(485)]=s.id,u.status=c(432),u[c(445)+"ol"]=t,u[c(278)+c(469)]=e,u[c(464)+c(469)]=e,u.white_palette=a,u[c(515)]=r,u[c(335)+"code"]=l;const{data:d,error:m}=await i.from(c(541)+"s")[c(262)](u).select()[c(383)]();if(m)throw m;return o[c(417)](r?"Game creat"+c(451)+c(298)+"nent...":"Challenge "+c(359)+l),await n[c(533)](N,d.id),d.id}catch(u){if(c(545)!==n.VKXsl){const e=n.GymvV(u,Error)?u.message:n.VEqTV;return n[c(406)](f,e),o[c(430)](e),null}l[c(491)](_0x2683ba,l[c(481)])}finally{h(!1)}},[s,N]),k=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(430)](a(303)+"n in to jo"+a(540)),!1;n[a(508)](h,!0),f(null);try{const{data:e,error:c}=await i.from("chess_games")[a(340)]("*").eq("id",t)[a(334)+"e"]();if(c)throw c;if(!e)throw new Error(n[a(363)]);if(e[a(290)]!==n[a(441)])throw new Error(n[a(372)]);if(e["white_play"+a(485)]===s.id)throw new Error(n.fwmoT);const{error:l}=await i.from(n[a(494)])[a(488)]({black_player_id:s.id,black_palette:r,status:n.AHrRR,started_at:(new Date)[a(542)+"g"](),last_move_at:(new Date)[a(542)+"g"]()}).eq("id",t);if(l)throw l;return w(n[a(439)]),o.success(a(395)+"e! You are"+a(398)+a(422)),await n.MzSMU(N,t),!0}catch(c){const e=n[a(466)](c,Error)?c[a(393)]:n[a(423)];return n.ailxv(f,e),o[a(430)](e),!1}finally{h(!1)}},[s,N,w]),z=t.useCallback(async(t,r)=>{const a=e,c={};c[a(275)]=function(e,t){return e instanceof t};const l=c;if(!s)return o[a(430)](n[a(347)]),!1;h(!0),f(null);try{if(a(401)!==n.igDdg)return _0x423f3a[a(430)](n.vOClR),!1;{const{data:e,error:s}=await i[a(518)](n[a(494)])[a(340)]("id").eq(n[a(354)],t[a(358)+"e"]()).eq(a(290),n.HKbJB)[a(334)+"e"]();if(s)throw s;if(!e)throw new Error(a(415)+" expired c"+a(382)+a(283));return await k(e.id,r)}}catch(u){const e=u instanceof Error?u.message:a(274)+a(519)+"de";return f(e),o[a(430)](e),!1}finally{n[a(517)](n.UdYvG,a(523))?h(!1):_0x2d736e(l[a(275)](_0x51df01,_0x3a5a30)?_0x122ad1[a(393)]:"Failed to load game")}},[s,k]),D=t.useCallback(async(t,r,c)=>{const m=e,x={EoQur:function(e,t){return e(t)},QedVE:n[m(260)]};if(n[m(375)](!d,!s)||!C)return!1;try{const e={};e.from=t,e.to=r,e[m(446)]=c;const h=l[m(547)](e);if(!h)return n[m(351)](w,"illegal"),!1;l.isCheckmate()?n.UCqYg(w,n[m(269)]):l.isCheck()?n[m(390)](w,m(353)):h[m(321)]?w(n.pMPxI):h[m(326)]===n.WisWr||n[m(546)](h[m(326)],m(549))?w(m(311)):n[m(312)](w,n.ldnQh),n.JPbJZ(u,new a(l[m(539)]())),v(e=>new Set([...e,r]));const p=l.pgn(),f=l.fen();let g=null,b=null,y=m(261);return l[m(370)]()&&(y=m(367),l[m(344)+"e"]()?n.OYEnY===m(489)?_0xd0d753[m(417)]("b"===_0xece19d?n[m(514)]:m(365)+"!"):(g="w"===l.turn()?n.dEXxc:n[m(483)],b="w"===l[m(292)]()?d[m(412)+m(264)]:d["whitePlaye"+m(264)]):m(328)==m(328)?g=n[m(418)]:x[m(322)](_0x88be7b,!1)),await i[m(518)](n[m(281)]).insert({game_id:d.id,player_id:s.id,move_number:d[m(434)]+1,move_san:h[m(326)],move_uci:n[m(271)](n.rqLhK(t,r),c||""),fen_after:f}),await i[m(518)](m(541)+"s").update({pgn:p,current_fen:f,move_count:d[m(434)]+1,last_move_at:(new Date)[m(542)+"g"](),status:y,result:g,winner_id:b,completed_at:y===m(367)?(new Date)[m(542)+"g"]():null}).eq("id",d.id),"completed"===y&&g&&(await B(d["whitePlaye"+m(264)],d[m(412)+m(264)],g),g===m(509)?n[m(406)](w,m(509)):b===(null==s?void 0:s.id)?w(n[m(299)]):w("defeat"),n[m(416)](g,n[m(483)])?o[m(417)]("w"===j?"You won!":m(333)+"!"):n[m(378)](g,n[m(295)])?o[m(417)]("b"===j?m(286):n[m(308)]):o[m(380)](pt(l))),!0}catch(h){return"QjVZZ"===m(461)&&_0x32281a.toString()[m(450)](m(502)+"+$")[m(470)]()[m(449)+"r"](_0x222a8d)[m(450)](JDPvBR.QedVE)}},[l,d,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(t&&r&&"abandoned"!==a)try{const{data:e}=await i[l(518)](l(374))[l(340)]("user_id, elo_rating").in(n.HNHmk,[t,r]);if(!e||2!==e[l(381)])return;const u=e[l(284)](e=>e[l(319)]===t),d=e[l(284)](e=>e[l(319)]===r);if(!u||!d)return;const m=u[l(453)]||1200,x=d[l(453)]||1200,h="draw"===a?n[l(418)]:a,p=n[l(329)](c,m,x,h),f={};f.elo_rating=p[l(482)][l(288)];const g={};if(g[l(453)]=p[l(306)][l(288)],await Promise[l(467)]([i[l(518)](n[l(444)])[l(488)](f).eq(n[l(287)],t),i[l(518)](n[l(444)])[l(488)](g).eq(n.HNHmk,r)]),n.iiVWx(null==s?void 0:s.id,t)){if(l(428)!=l(428))return _0x50353a[l(430)](n.YdivA),null;{const e=p[l(482)][l(410)];o[l(380)](l(512)+p[l(482)][l(288)]+" ("+(e>=0?"+":"")+e+")")}}else if(n[l(411)](null==s?void 0:s.id,r)){const e=p.black[l(410)];o[l(380)]("Rating: "+p[l(306)][l(288)]+" ("+(e>=0?"+":"")+e+")")}}catch(u){}},[s]),L=n[e(457)](t.useCallback,async()=>{const t=e;if(n.VrMFU(!d,!s)||!j)return;const r=t("w"===j?476:302),a="w"===j?d["blackPlaye"+t(264)]:d[t(320)+"rId"];await i[t(518)](t(541)+"s")[t(488)]({status:t(367),result:r,winner_id:a,completed_at:(new Date).toISOString()}).eq("id",d.id),await n[t(313)](B,d[t(320)+t(264)],d[t(412)+t(264)],r),o[t(380)](n.koqIN)},[d,s,j,B]),q=n[e(323)](t.useCallback,async()=>{const t=e;if("ohrsr"!==t(259)){const e=_0x4af1c8?function(){if(_0x458463){const e=_0x1a76e2[t(534)](_0x30b590,arguments);return _0x449580=null,e}}:function(){};return _0x2c9b05=!1,e}o.info(n[t(408)]),d&&(await i[t(518)](t(541)+"s")[t(488)]({status:n[t(337)],result:n[t(418)],completed_at:(new Date)[t(542)+"g"]()}).eq("id",d.id),await B(d.whitePlayerId,d.blackPlayerId,n[t(418)]))},[d,B]),A=t.useCallback(t=>{const n=e,s={};return s[n(500)]=t,s[n(324)]=!0,l[n(429)](s)[n(403)](e=>e.to)},[l]),S={};return S[e(437)]=l,S[e(384)]=d,S[e(420)]=C,S[e(497)]=j,S[e(366)]=x,S[e(430)]=p,S.makeMove=D,S[e(342)]=M,S.joinGame=k,S[e(273)]=z,S.resignGame=L,S[e(475)]=q,S[e(440)]=N,S["getAvailab"+e(300)]=A,S[e(350)+"es"]=g,S})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=yn,s={QNWRc:function(e,t){return e+t},TnERb:n(501)+"nction() ",ZIRbc:function(e,t){return e===t},yqVRT:n(448),TqUsG:n(447)+n(512),RcYQm:n(470),XwbgN:"smRuF",uOwhp:function(e,t){return e===t},tHWZI:n(522),ArvKi:function(e){return e()}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=s.ArvKi(zt),m=t.useCallback(e=>{const t=n;if(s[t(489)],t(431),t(458),t(441),!s[t(496)](t(520),t(520))){const e=_0x45ae7a[t(509)](_0x590fdc,arguments);return _0x2437d9=null,e}{if(e[t(469)]instanceof HTMLInputElement||e[t(469)]instanceof HTMLTextAreaElement||e.target["isContentE"+t(491)]){if(s[t(505)]===s.yqVRT)return;{const e=_0x11515f(dqWxMz[t(499)](dqWxMz[t(474)](dqWxMz[t(514)],dqWxMz[t(472)]),");"));_0x3031d1=e()}}const n=e[t(443)].toLowerCase();switch(n){case"m":u(),o[t(440)](d?t(439)+"d":s[t(497)],{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":if(c&&r)if(s[t(482)]!==t(470)){const e=_0x1fc3b2[t(465)+"r"].prototype[t(498)](_0x43b82a),n=_0x404e57[_0x15502c],s=_0x7113a[n]||e;e[t(487)]=_0x57ec7f.bind(_0x435209),e[t(453)]=s[t(453)][t(498)](s),_0x302662[n]=e}else e["preventDef"+t(490)](),r();break;case"d":if(c&&l&&a){if(s.XwbgN===t(503)){const e=_0x3af684[t(509)](_0x499505,arguments);return _0x25c8e9=null,e}e[t(459)+t(490)](),a()}break;case t(511):i&&(e[t(459)+t(490)](),i());break;case"?":case"/":(!e.shiftKey||s[t(517)](n,"?"))&&(e[t(459)+t(490)](),rn())}}},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(488)+"stener"](s[e(454)],m),()=>window["removeEven"+e(475)](e(522),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==q?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&qt(e).then(()=>A("game"))},[j,qt]),t.useEffect(()=>{if(!M)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",M.id).single();(null==e?void 0:e.elo_rating)&&Ue(e.elo_rating)})()},[M]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&M){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",M.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ue(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,M]);const Gt=async()=>{if(!M)return void P(!0);if(!k)return void G(!0);const e=Ie.find(e=>e.id===Z),t=(null==e?void 0:e.white)||{};await Nt(V,X,t)&&A("waiting")},_t=async e=>{if(!M)return void P(!0);if(!k)return void G(!0);const t=Ie.find(e=>e.id===Z),n=(null==t?void 0:t.black)||{};await Mt(e,n)&&A("game")},Tt=()=>ke.length?ke.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Ut=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(Z);const n=Ie.filter(e=>e.id!==Z),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),Me("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Wn.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Yt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Et=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Yt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return Me("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(Me("checkmate"),L.victory()):ee.isCheck()?(Me("check"),L.check()):r.captured?(Me("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(Me("castle"),L.castle()):(Me("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),Me("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),Me("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=Nn,n={};n[t(381)]=t(486),n[t(449)]=function(e,t){return e+t},n.SOynA=t(430),n[t(411)]=function(e,t){return e*t},n[t(350)]=t(407),n.tQRGX=function(e,t){return e*t},n.uXDod=t(360);const s=n;switch(e){case s[t(381)]:return s.DcpwV(300,500*Math[t(394)]());case s[t(431)]:return 500+s[t(411)](Math[t(394)](),1e3);case s[t(350)]:return 800+s[t(452)](Math[t(394)](),1500);case s[t(510)]:return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=Tn(ee,W);if(c){const e=Yt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(Me("checkmate"),L.error()):ee.isCheck()?(Me("check"),L.check()):c.captured?(Me("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?Me("castle"):(Me("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),Me("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),Me("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,W,Me,L]),Wt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(He,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Qt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Xn.map(e=>u.jsx("button",{onClick:()=>{L.select(),K(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(T===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(_,{onClick:Ut,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Wn.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(Pe,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(Z===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ge,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(_e,{to:"/openings",children:u.jsxs(_,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Te,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(_e,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!k&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(_,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),M&&k&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(_,{onClick:async()=>{if(!M)return void P(!0);if(!k)return void G(!0);const e=Tt().filter(e=>e.white_player_id!==M.id);e.length>0?await _t(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Gt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Tt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Tt().filter(e=>e.white_player_id!==(null==M?void 0:M.id)).length," opponent",1!==Tt().filter(e=>e.white_player_id!==(null==M?void 0:M.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Jn.map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(Z===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ke,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(_,{onClick:Gt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!k,children:[!k&&u.jsx(Ee,{className:"h-4 w-4"}),"Create Game",u.jsx(We,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(_,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!M)return void P(!0);if(!k)return void G(!0);const e=Ie.find(e=>e.id===Z),t=(null==e?void 0:e.black)||{};await kt(Q.trim(),t)&&A("game")},disabled:jt||!k,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ke,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ke.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ke.map(e=>{var t;const n=e.white_elo||1200,s=M&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==M?void 0:M.id),a=M?Ve(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Jn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),u.jsx(_,{size:"sm",onClick:()=>_t(e.id),disabled:jt||!k||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!X&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(_,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Re,{className:"h-4 w-4"})})]})]}),u.jsx(_,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==M?void 0:M.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(_,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(_,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Ze,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:Pt,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Ft,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==M?void 0:M.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(_,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(_,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ye,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(_,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Wn.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=Wn.find(e=>e.id===W))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(_,{variant:"outline",size:"sm",onClick:()=>{le("loss"),Me("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Ze,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:Et,getAvailableMoves:Wt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===xe))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:(null==(d=Ie.find(e=>e.id===xe))?void 0:d.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===pe))?void 0:x.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:(null==(f=Ie.find(e=>e.id===xe))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Xt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(_,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(_,{variant:"outline",onClick:Ut,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(_,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Xe,{}),u.jsx(Le,{isOpen:S,onClose:()=>P(!1)}),u.jsx(Be,{isOpen:I,onClose:()=>G(!1),trigger:"general"}),u.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:we,whitePalette:"bot-game"===q?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===q?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=Wn.find(e=>e.id===W))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:we.length}})]})};export{Fn as default};
