const e='/**\n * Big Picture Panel Component\n * Shows cross-market correlations and unified market signals\n */\n\nimport { motion } from \'framer-motion\';\nimport { \n  Activity, \n  TrendingUp, \n  TrendingDown, \n  Zap, \n  Shield, \n  AlertTriangle,\n  ArrowRightLeft,\n  Sparkles,\n  Loader2\n} from \'lucide-react\';\nimport { Progress } from \'@/components/ui/progress\';\nimport type { BigPictureState, CrossMarketSignal } from \'@/lib/pensent-core/domains/finance/crossMarketEngine\';\nimport { cn } from \'@/lib/utils\';\n\ninterface BigPicturePanelProps {\n  state: BigPictureState | null | undefined;\n}\n\n// Default state for safe rendering\nconst DEFAULT_STATE: BigPictureState = {\n  marketSentiment: 0,\n  riskAppetite: 0,\n  volatilityIndex: 25,\n  trendAlignment: 0.5,\n  predictionBoost: 1.0,\n  correlations: [],\n  activeSignals: []\n};\n\nfunction SentimentGauge({ value, label }: { value: number; label: string }) {\n  const safeValue = typeof value === \'number\' && !isNaN(value) ? value : 0;\n  const normalized = (safeValue + 1) / 2 * 100;\n  const isPositive = safeValue > 0.1;\n  const isNegative = safeValue < -0.1;\n\n  return (\n    <div className="space-y-1">\n      <div className="flex justify-between text-xs">\n        <span className="text-muted-foreground">{label}</span>\n        <span className={cn(\n          "font-mono",\n          isPositive && "text-green-400",\n          isNegative && "text-red-400"\n        )}>\n          {safeValue > 0 ? \'+\' : \'\'}{(safeValue * 100).toFixed(1)}%\n        </span>\n      </div>\n      <div className="h-2 bg-muted rounded-full overflow-hidden relative">\n        <div className="absolute inset-0 flex">\n          <div className="w-1/2 bg-red-500/20" />\n          <div className="w-1/2 bg-green-500/20" />\n        </div>\n        <motion.div\n          className={cn(\n            "absolute top-0 bottom-0 w-1 rounded-full",\n            isPositive ? "bg-green-400" : isNegative ? "bg-red-400" : "bg-muted-foreground"\n          )}\n          style={{ left: `${normalized}%` }}\n          animate={{ left: `${normalized}%` }}\n          transition={{ type: \'spring\', stiffness: 200 }}\n        />\n        <div className="absolute top-0 bottom-0 left-1/2 w-px bg-border" />\n      </div>\n    </div>\n  );\n}\n\nfunction SignalBadge({ signal }: { signal: CrossMarketSignal }) {\n  const icons = {\n    divergence: AlertTriangle,\n    convergence: ArrowRightLeft,\n    leading: TrendingUp,\n    lagging: TrendingDown,\n    breakout: Zap,\n    reversal: Activity\n  };\n\n  const Icon = icons[signal.type] || Activity;\n  const age = Math.floor((Date.now() - (signal.timestamp || Date.now())) / 1000);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: -10 }}\n      animate={{ opacity: 1, x: 0 }}\n      className={cn(\n        "p-2 rounded-lg border bg-card/50",\n        (signal.strength || 0) > 0.7 ? "border-yellow-500/50" : "border-border/50"\n      )}\n    >\n      <div className="flex items-start gap-2">\n        <div className={cn(\n          "p-1 rounded",\n          (signal.strength || 0) > 0.7 ? "bg-yellow-500/20 text-yellow-400" : "bg-primary/20 text-primary"\n        )}>\n          <Icon className="w-3 h-3" />\n        </div>\n        <div className="flex-1 min-w-0">\n          <div className="flex items-center gap-1">\n            <span className="text-xs font-medium capitalize">{signal.type}</span>\n            <span className="text-[10px] text-muted-foreground">\n              {(signal.sourceMarkets || []).join(\' â†’ \')}\n            </span>\n          </div>\n          <p className="text-[10px] text-muted-foreground truncate">\n            {signal.description || \'Signal detected\'}\n          </p>\n        </div>\n        <div className="text-[10px] text-muted-foreground">\n          {age}s\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\nexport function BigPicturePanel({ state }: BigPicturePanelProps) {\n  // Use safe state with defaults\n  const safeState = state || DEFAULT_STATE;\n  \n  const predictionBoost = typeof safeState.predictionBoost === \'number\' && !isNaN(safeState.predictionBoost) \n    ? safeState.predictionBoost \n    : 1.0;\n  const marketSentiment = typeof safeState.marketSentiment === \'number\' && !isNaN(safeState.marketSentiment)\n    ? safeState.marketSentiment\n    : 0;\n  const riskAppetite = typeof safeState.riskAppetite === \'number\' && !isNaN(safeState.riskAppetite)\n    ? safeState.riskAppetite\n    : 0;\n  const volatilityIndex = typeof safeState.volatilityIndex === \'number\' && !isNaN(safeState.volatilityIndex)\n    ? safeState.volatilityIndex\n    : 25;\n  const trendAlignment = typeof safeState.trendAlignment === \'number\' && !isNaN(safeState.trendAlignment)\n    ? safeState.trendAlignment\n    : 0.5;\n  const correlations = Array.isArray(safeState.correlations) ? safeState.correlations : [];\n  const activeSignals = Array.isArray(safeState.activeSignals) ? safeState.activeSignals : [];\n\n  const boostColor = predictionBoost >= 1.2 ? \'text-green-400\' : \n                     predictionBoost <= 0.8 ? \'text-red-400\' : \'text-primary\';\n\n  // Show loading if no state yet\n  if (!state) {\n    return (\n      <div className="h-full flex flex-col items-center justify-center gap-3 p-6">\n        <Loader2 className="w-6 h-6 animate-spin text-primary" />\n        <span className="text-sm text-muted-foreground">Loading market data...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className="h-full flex flex-col gap-3 p-3">\n      {/* Prediction Boost */}\n      <div className="p-3 rounded-lg border border-border/50 bg-card/50">\n        <div className="flex items-center justify-between mb-2">\n          <div className="flex items-center gap-2">\n            <Sparkles className={cn("w-4 h-4", boostColor)} />\n            <span className="text-sm font-medium">Prediction Boost</span>\n          </div>\n          <motion.span \n            className={cn("text-lg font-bold font-mono", boostColor)}\n            key={predictionBoost.toFixed(2)}\n            initial={{ scale: 1.2 }}\n            animate={{ scale: 1 }}\n          >\n            {predictionBoost.toFixed(2)}x\n          </motion.span>\n        </div>\n        <p className="text-[10px] text-muted-foreground">\n          Cross-market alignment enhances prediction confidence\n        </p>\n      </div>\n\n      {/* Market Gauges */}\n      <div className="p-3 rounded-lg border border-border/50 bg-card/50 space-y-3">\n        <div className="flex items-center gap-2 mb-1">\n          <Activity className="w-4 h-4 text-primary" />\n          <span className="text-sm font-medium">Market Pulse</span>\n        </div>\n\n        <SentimentGauge value={marketSentiment} label="Sentiment" />\n        <SentimentGauge value={riskAppetite} label="Risk Appetite" />\n\n        <div className="space-y-1">\n          <div className="flex justify-between text-xs">\n            <span className="text-muted-foreground">Volatility Index</span>\n            <span className={cn(\n              "font-mono",\n              volatilityIndex > 50 ? "text-yellow-400" : "text-muted-foreground"\n            )}>\n              {volatilityIndex.toFixed(0)}\n            </span>\n          </div>\n          <Progress \n            value={Math.min(Math.max(volatilityIndex, 0), 100)} \n            className="h-1.5"\n          />\n        </div>\n\n        <div className="space-y-1">\n          <div className="flex justify-between text-xs">\n            <span className="text-muted-foreground">Trend Alignment</span>\n            <span className="font-mono text-muted-foreground">\n              {(trendAlignment * 100).toFixed(0)}%\n            </span>\n          </div>\n          <Progress \n            value={Math.min(Math.max(trendAlignment * 100, 0), 100)} \n            className="h-1.5"\n          />\n        </div>\n      </div>\n\n      {/* Active Signals */}\n      <div className="flex-1 min-h-0 flex flex-col">\n        <div className="flex items-center gap-2 mb-2">\n          <Zap className="w-4 h-4 text-yellow-400" />\n          <span className="text-sm font-medium">Cross-Market Signals</span>\n          {activeSignals.length > 0 && (\n            <span className="text-xs bg-yellow-500/20 text-yellow-400 px-1.5 py-0.5 rounded">\n              {activeSignals.length}\n            </span>\n          )}\n        </div>\n\n        <div className="flex-1 overflow-y-auto space-y-2">\n          {activeSignals.length > 0 ? (\n            activeSignals.map((signal, i) => (\n              <SignalBadge key={`${signal.type}-${signal.timestamp || i}-${i}`} signal={signal} />\n            ))\n          ) : (\n            <div className="flex items-center justify-center h-full text-xs text-muted-foreground">\n              <Shield className="w-4 h-4 mr-2" />\n              Markets aligned - no divergence signals\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Correlations Summary */}\n      {correlations.length > 0 && (\n        <div className="p-2 rounded-lg border border-border/30 bg-card/30">\n          <div className="text-[10px] text-muted-foreground mb-1">Active Correlations</div>\n          <div className="flex flex-wrap gap-1">\n            {correlations.slice(0, 4).map((corr, i) => (\n              <div \n                key={i}\n                className={cn(\n                  "text-[10px] px-1.5 py-0.5 rounded",\n                  corr.isInverted ? "bg-red-500/10 text-red-400" : "bg-green-500/10 text-green-400"\n                )}\n              >\n                {corr.market1}/{corr.market2}: {((corr.correlation || 0) * 100).toFixed(0)}%\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n';export{e as default};
