import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as q,bF as L,bG as A,b6 as S,ae as P,bH as H,ah as T,bI as G,B as K,bJ as _,bK as U,bL as I,bM as E,bN as W,bO as O,bP as Y,bQ as X,bR as Z,bS as R,bT as F,bU as V,bV as J,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as qe,c8 as Le,aM as Ae,c9 as Se,H as Pe,P as He,ca as Te,b3 as Ge,bs as Ke,be as _e,cb as Ue,aP as Ie,cc as Ee,d as We,b2 as Oe,a9 as Ye,cd as Xe,ce as Ze,cf as Re,al as Fe,au as Ve}from"./index-xchx37pq.js";import{L as Je}from"./LiveColorLegend-C05P8KGt.js";import{T as Qe}from"./trending-down-BzF1Hy7l.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-BFfPtb-Y.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=ht,t=xt();for(;;)try{if(123204===-parseInt(e(412))/1*(parseInt(e(407))/2)+parseInt(e(369))/3+-parseInt(e(403))/4*(-parseInt(e(383))/5)+-parseInt(e(365))/6*(parseInt(e(356))/7)+parseInt(e(348))/8*(parseInt(e(347))/9)+-parseInt(e(417))/10*(parseInt(e(404))/11)+parseInt(e(341))/12*(parseInt(e(355))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){const e=ht,t={};t[e(396)]=function(e,t){return e===t};const n=t;let s=!0;return function(t,r){const a=e,i={Mxayl:function(e,t){return n[ht(396)](e,t)},xITIb:a(387)},o=s?function(){const e=a;if(i[e(381)](i[e(361)],e(378))){return _0x7e0b46(_0x384ad2)[e(350)]}if(r){const n=r[e(366)](t,arguments);return r=null,n}}:function(){};return s=!1,o}}()(void 0,function(){const e=ht,t={};t[e(409)]=e(373)+"+$";const n=t;return ut[e(405)]()[e(388)](n.WQqOn)[e(405)]()[e(354)+"r"](ut).search(e(373)+"+$")});ut();const dt=function(){const e=ht,t={};t[e(406)]=function(e,t){return e!==t},t[e(400)]="VpBno";const n=t;let s=!0;return function(t,r){const a=e,i={IJcDI:function(e,t){return n[ht(406)](e,t)},CshsA:n[a(400)]},o=s?function(){const e=a;if(r){if(!i[e(371)](e(410),i[e(358)])){const n=r[e(366)](t,arguments);return r=null,n}if(_0x49bcf7){const e=_0x394f46.apply(_0x5c7fb6,arguments);return _0xa338a7=null,e}}}:function(){};return s=!1,o}}();function mt(e){const t=ht,n={amOLK:t(377),kDyAQ:"threefold_repetition",mTYXq:"Threefold "+t(363),ykWzJ:"insufficie"+t(395)+"l",tbPpv:"Draw by in"+t(351)+" material.",QGMed:function(e,t,n){return e(t,n)},tsOEK:"unknown",iGCll:t(352)};if(e[t(349)+"e"]()){const e={};return e[t(385)]="stalemate",e[t(350)]=t(377)+t(392)+"moves avai"+t(353),e[t(370)+"ge"]=n[t(359)],e}if(e[t(368)+"dRepetition"]()){const e={};return e[t(385)]=n[t(344)],e.message=t(375)+t(391)+t(413),e[t(370)+"ge"]=n[t(367)],e}if(e[t(398)+t(402)+"al"]()){const e={};return e[t(385)]=n[t(362)],e[t(350)]=n[t(414)],e[t(370)+"ge"]=t(408)+t(393)+"l",e}const s=e[t(379)]();if(n[t(380)](parseInt,s[t(342)](" ")[4],10)>=100){const e={};return e[t(385)]="fifty_move"+t(364),e.message=t(375)+t(360)+t(394),e[t(370)+"ge"]=t(357)+"le",e}const r={};return r[t(385)]=n[t(372)],r.message=t(376)+"!",r[t(370)+"ge"]=n.iGCll,r}function xt(){const e=["Dg9tDhjPBMC","vxLAAxu","mKDAyMPoDq","sw5ZDwzMAwnPzq","v1fXt24","vNbcBM8","AxneCMf3","mJmXnZGZuwvKv25n","Cgv0AxrPB24U","DgjqChy","D2rzDKi","CM4GDgHPCYiPka","mtbhvNDQuuW","t0zmt0m","zgXgs3u","ndu5mZmYng5IyKDXBG","C3bSAxq","BMn0Aw9UkcKG","A0r5qve","DhjHy2u","zxHJzxb0Aw9U","mZy3nJvAvLvwCxG","otzrwMnKtum","AxntDgfSzw1HDa","BwvZC2fNzq","C3vMzMLJAwvUDa","rhjHDW","BgfIBguU","y29UC3rYDwn0BW","mtnnBMrSufq","mtmZn1viBwzXzG","ntaTtw92zsbsDq","q3nOC0e","yw1pteS","zsbMAwz0Es1TBW","EeLuswi","EwTxEKO","uMvWzxrPDgLVBG","x3j1Bgu","mtyXnhH5s3Pirq","yxbWBhK","Bvrzwhe","AxnuAhjLzwzVBa","ndK3mZi1BejOwhrv","C2HVCNrnzxnZyq","suPJreK","DhnpruS","kcGOlISPkYKRkq","Aw5MBW","rhjHDYbIEsb0Aa","r2fTzsbKCMf3BG","u3rHBgvTyxrLiq","DurAEMK","zMvU","uuDnzwq","txHHEwW","y3rVCIGICMv0Dq","ntuXnvb2D2XrCW","DgfIBgu","CMvHC29U","AuPlBeq","BuntBLK","C2vHCMnO","y29UC29Szq","Bg9N","CMvLzM9SzcbYzq","ie5VigXLz2fSia","BNqGtwf0zxjPyq","DMuGCNvSzs4","BNrFBwf0zxjPyq","Dxrkww8","wKPeD2O","AxnjBNn1zMzPyW","D2fYBG","yKXxzva","yMLUza","AwvUDe1HDgvYAq","neXkz1jJAa","mJeXntm5oxnKrefUtW"];return(xt=function(){return e})()}function ht(e,t){e-=340;const n=xt();let s=n[e];if(void 0===ht.vRWTEe){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ht.zZsvpU=r,ht.nyduUQ={},ht.vRWTEe=!0}const a=e+n[0],i=ht.nyduUQ[a];if(i)s=i;else{const e=function(e){this.QbuBDR=e,this.sXUSgQ=[1,0,0],this.axqPuf=function(){return"newState"},this.YAFpve="\\w+ *\\(\\) *{\\w+ *",this.CORJWB="['|\"].+['|\"];? *}"};e.prototype.umwmuH=function(){const e=new RegExp(this.YAFpve+this.CORJWB).test(this.axqPuf.toString())?--this.sXUSgQ[1]:--this.sXUSgQ[0];return this.sWlLkt(e)},e.prototype.sWlLkt=function(e){return Boolean(~e)?this.yQmkIF(this.QbuBDR):e},e.prototype.yQmkIF=function(e){for(let t=0,n=this.sXUSgQ.length;t<n;t++)this.sXUSgQ.push(Math.round(Math.random())),n=this.sXUSgQ.length;return e(this.sXUSgQ[0])},new e(ht).umwmuH(),s=ht.zZsvpU(s),ht.nyduUQ[a]=s}return s}function pt(e){const t=ht;return{ZJDwj:function(e,t){return e(t)}}[t(397)](mt,e)[t(350)]}dt(void 0,function(){const e=ht,t={qRcWu:function(e,t){return e(t)},iJKlD:function(e,t){return e+t},wdYvB:"return (fu"+e(343),pbcPl:function(e){return e()},dlFKu:"error",AdIDv:e(346),OFLOC:function(e,t){return e<t}};let n;try{const s=t.qRcWu(Function,t[e(386)](t[e(386)](t[e(415)],"{}.constru"+e(382)+e(416)+" )"),");"));n=t.pbcPl(s)}catch(a){n=window}const s=n[e(389)]=n[e(389)]||{},r=[e(390),e(399),e(374),t[e(340)],t.AdIDv,e(384),e(345)];for(let i=0;t[e(418)](i,r.length);i++){const t=dt[e(354)+"r"].prototype[e(401)](dt),n=r[i],a=s[n]||t;t.__proto__=dt[e(401)](dt),t[e(405)]=a[e(405)][e(401)](a),s[n]=t}})(),function(){const e=bt,t=vt();for(;;)try{if(263407===parseInt(e(274))/1*(parseInt(e(222))/2)+parseInt(e(290))/3+-parseInt(e(286))/4+parseInt(e(252))/5*(-parseInt(e(201))/6)+-parseInt(e(266))/7+-parseInt(e(294))/8+parseInt(e(270))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[bt(240)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=bt,t={};t.hKcAj=e(285)+"+$";const n=t;return ft[e(250)]()[e(303)](n[e(257)]).toString()[e(299)+"r"](ft)[e(303)](n[e(257)])});ft();const gt=function(){const e=bt,t={BXHfm:function(e){return e()},AfxdM:function(e,t){return e*t},WtRGS:e(221),aUuYL:function(e,t){return e+t},RFwjF:function(e,t){return e===t},cbzZc:e(241),gclAZ:"zdiWl"};let n=!0;return function(s,r){const a=e,i={yrJgv:function(e,n){return t[bt(301)](e,n)},RxdAM:t[a(310)]};if(t[a(301)](a(210),t[a(217)])){const e=n?function(){const e=a;if(r){if(!i.yrJgv(e(211),i[e(235)])){const e=r.apply(s,arguments);return r=null,e}_0x5e55e3[e(272)][e(251)][e(319)]()}}:function(){};return n=!1,e}{if(!_0x3c78e2)return;t[a(246)](_0x3bac2e);const{context:e,gainNode:n}=_0x586762[a(272)];if(!e||!n)return;const s=t[a(315)](e[a(224)],_0x487861),r=e[a(265)+"er"](1,s,e[a(224)]),i=r[a(215)+a(254)](0);for(let u=0;u<s;u++)i[u]=t.AfxdM(_0x49902b[a(242)](),2)-1;const o=e[a(265)+a(268)]();o[a(282)]=r;const c=e["createBiqu"+a(199)]();c[a(234)]=t[a(256)],c.frequency[a(227)]=_0x34afa1;const l=e.createGain();l[a(245)][a(248)+a(207)](.3,e[a(275)+"e"]),l.gain["exponentia"+a(231)+a(238)](.01,t[a(258)](e.currentTime,_0x49fd23)),o[a(316)](c),c[a(316)](l),l.connect(n),o.start(e[a(275)+"e"]),o[a(244)](e[a(275)+"e"]+_0x10f48b)}}}();function vt(){const e=["wvzzDK0","Bg93CgfZCW","nda3mZKWDhzpq2Dt","shz5CfO","C2fTCgXLuMf0zq","ANfMzg8","BvrxA2y","DMfSDwu","BKHMEvG","C0HqEvG","E30Uy29UC3rYDq","BfjHBxbuB1zHBa","zxHWB25LBNrPyq","C3rHCNq","DhLWzq","uNHKqu0","Aw5MBW","y3jLyxrLqMLXDq","DwvbDfrPBwu","ChbVCNrLza","yxbWBhK","vvrVtwe","CMfUzg9T","A1jdv1G","C3rVCa","z2fPBG","qLHizM0","zNjLCxvLBMn5","C2v0vMfSDwvbDa","qvbjig5VDcbZDq","Dg9tDhjPBMC","y29UDgv4Da","mZvtvKrzEhm","zxjYB3i","rgf0yq","Bg9N","v3rsr1m","AeTJqwO","yvv1wuW","ywPuvhG","CefSrMS","CMv0DxjUicHMDq","zxHJzxb0Aw9U","Aw1L","BgvUz3rO","y3jLyxrLqNvMzG","mJm3mZq0og9cAxrLwG","CgXHEvnVDw5K","zxjtB3vYy2u","ueXot2y","mteYotK1odfYufvgyuC","C2LUzq","y3vYCMvUDa","vLPYzwy","mxDMAhr6uG","y3vYCMvUDfrPBq","wKT6v2G","vg9wywX1zuf0va","y3jLyxrLr2fPBG","y3jLyxrLt3nJAq","CwnmvfK","zgvMzwf0","yNvMzMvY","A0jWsNi","D2fYBG","kcGOlISPkYKRkq","mtG2mJC3mLPTzNjUrW","ufDctfq","rKnzsfq","Aw5PDef1zgLV","mJC3odKZA3n6ww9u","BMn0Aw9UkcKG","BxL2q2O","v2vIief1zgLVia","mtCXmJaYne5ZyxLWEG","rfvYyMq","z2fTzvn0yxj0","CM5dA3K","y2fWDhvYzq","y29UC3rYDwn0BW","Buvcwgi","uKz3AKy","uwjQBMK","C2vHCMnO","y3rVCIGICMv0Dq","y3bjwNK","rwHzz0W","z2fPBK5Vzgu","z1nKte0","q1fpse4","y2j6wMm","EgXQuvi","zgvZDgLUyxrPBW","CM4GDgHPCYiPka","zhjHDW","qwz4ze0","y29UBMvJDa","DgfIBgu","AwXSzwDHBa","y2XVC2u","D2vIA2L0qxvKAq","qNn0zg4","ywrgAwX0zxi","C3f1yxjL","mJmXmtq0A0PMq2Py","y2HLy2S","uxj4uKG","vvj0Chu","EgnszMG","C2f3Dg9VDgG","vgLTzq","B0nVBNrLEhq","ug1pqxG","EMrPv2W","BufMy3C","v1vmCgi","DhjPyw5NBgu","ChjVDg90ExbL","z2v0q2HHBM5LBa","su5psw0","z2nSqvO","yMLUza","y29UC29Szq"];return(vt=function(){return e})()}function bt(e,t){e-=197;const n=vt();let s=n[e];if(void 0===bt.uTDwbB){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};bt.AeJuas=r,bt.oRpFfd={},bt.uTDwbB=!0}const a=e+n[0],i=bt.oRpFfd[a];if(i)s=i;else{const e=function(e){this.resAIU=e,this.JNfcpa=[1,0,0],this.hQaNbl=function(){return"newState"},this.MmHDWh="\\w+ *\\(\\) *{\\w+ *",this.mGhTKq="['|\"].+['|\"];? *}"};e.prototype.wAzGPc=function(){const e=new RegExp(this.MmHDWh+this.mGhTKq).test(this.hQaNbl.toString())?--this.JNfcpa[1]:--this.JNfcpa[0];return this.JemamG(e)},e.prototype.JemamG=function(e){return Boolean(~e)?this.MdqPby(this.resAIU):e},e.prototype.MdqPby=function(e){for(let t=0,n=this.JNfcpa.length;t<n;t++)this.JNfcpa.push(Math.round(Math.random())),n=this.JNfcpa.length;return e(this.JNfcpa[0])},new e(bt).wAzGPc(),s=bt.AeJuas(s),bt.oRpFfd[a]=s}return s}gt(void 0,function(){const e=bt,t={};t[e(204)]=function(e,t){return e+t},t.xcRfh=function(e,t){return e+t},t[e(259)]=e(261)+e(291),t.ZKzWh=e(284),t[e(280)]=e(236),t[e(273)]=e(253),t.DUrbd=e(262),t[e(223)]=e(317),t[e(311)]="trace",t[e(212)]=function(e,t){return e<t},t[e(292)]=function(e,t){return e!==t};const n=t,s=function(){const t=e;let s;try{s=Function(n[t(204)](n[t(205)](n.ajTTx,t(230)+t(304)+t(313)+" )"),");"))()}catch(r){s=window}return s}(),r=s[e(219)]=s.console||{},a=[e(255),n[e(276)],n[e(280)],n.VZref,n[e(295)],n.HvypZ,n[e(311)]];for(let i=0;n[e(212)](i,a[e(264)]);i++)if(n.myvCj(e(198),e(198)))_0x4de12f[e(272)][e(307)].gain[e(227)]=_0x1de1ef;else{const t=gt.constructor[e(214)][e(218)](gt),n=a[i],s=r[n]||t;t.__proto__=gt[e(218)](gt),t[e(250)]=s[e(250)][e(218)](s),r[n]=t}})();const yt=(e=!0,n=.5)=>{const s=bt,r={cpIZy:function(e){return e()},PmOAx:function(e,t){return e||t},PWBLT:function(e,t){return e+t},pAlFk:function(e,t){return e-t},mEBXb:function(e,t){return e+t},YVYvM:function(e,t){return e||t},qqXHR:function(e,t){return e*t},gSdLM:function(e,t){return e<t},QrxRH:s(221),EhYgL:"move",mTWkf:s(271),ToPkw:function(e,t,n,s,r,a){return e(t,n,s,r,a)},XCOaK:s(298),INOIm:function(e,t,n,s,r,a){return e(t,n,s,r,a)},jqfdo:s(202),kBpJr:s(213),nHfyX:function(e,t,n){return e(t,n)},TnjHN:"checkmate",sHPyX:function(e,t,n){return e(t,n)},Qbjni:function(e,t,n,s,r,a){return e(t,n,s,r,a)},CQOHN:function(e,t,n){return e(t,n)},kRCWX:s(314),rnCky:function(e,t,n,s,r,a){return e(t,n,s,r,a)},FCYHT:s(206)},a={context:null};a[s(307)]=null;const i=t.useRef(a),o=t.useCallback(()=>{const e=s;if(!i.current[e(251)])try{const t=new(window.AudioContext||window[e(197)+e(208)]),s=t[e(278)]();s[e(316)](t[e(312)+"n"]),s[e(245)][e(227)]=n;const r={};r[e(251)]=t,r[e(307)]=s,i[e(272)]=r}catch(t){}},[n]);r[s(309)](t.useEffect,()=>{const e=s;i.current.gainNode&&(i[e(272)][e(307)][e(245)][e(227)]=n)},[n]);const c=r[s(229)](t.useCallback,(t,n,a=s(271),c=.01,l=.1,u)=>{const d=s;if(!e)return;r.cpIZy(o);const{context:m,gainNode:x}=i[d(272)];if(r[d(209)](!m,!x))return;const h=m[d(279)+"llator"](),p=m[d(278)]();h.type=a,h[d(247)][d(248)+d(207)](t,m[d(275)+"e"]),u&&h.frequency["exponentia"+d(231)+d(238)](u,r[d(287)](m[d(275)+"e"],n)),p[d(245)][d(248)+d(207)](0,m[d(275)+"e"]),p.gain.linearRampToValueAtTime(1,m[d(275)+"e"]+c),p[d(245)][d(232)+d(231)+d(238)](.01,r[d(260)](m[d(275)+"e"]+n,l)),p[d(245)]["linearRamp"+d(277)+d(263)](0,m.currentTime+n),h[d(316)](p),p[d(316)](x),h[d(233)](m[d(275)+"e"]),h[d(244)](r[d(300)](m.currentTime,n))},[e,o]),l=r[s(309)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r[a(305)](o);const{context:c,gainNode:l}=i.current;if(r[a(220)](!c,!l))return;const u=r.qqXHR(c[a(224)],t),d=c[a(265)+"er"](1,u,c[a(224)]),m=d[a(215)+a(254)](0);for(let e=0;r[a(308)](e,u);e++)m[e]=2*Math[a(242)]()-1;const x=c[a(265)+a(268)]();x.buffer=d;const h=c[a(237)+a(199)]();h[a(234)]=r[a(203)],h[a(247)][a(227)]=n;const p=c[a(278)]();p.gain["setValueAt"+a(207)](.3,c[a(275)+"e"]),p[a(245)][a(232)+"lRampToVal"+a(238)](.01,c[a(275)+"e"]+t),x.connect(h),h.connect(p),p[a(316)](l),x[a(233)](c.currentTime),x[a(244)](r[a(287)](c[a(275)+"e"],t))},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(306)]:c(800,.08,r[n(226)],.005,.05),r.ToPkw(c,400,.06,n(213),.005,.04);break;case r.XCOaK:l(.12,2e3),c(300,.1,n(200),.005,.08),c(150,.15,"sine",.01,.1);break;case"castle":r[n(216)](c,600,.06,"sine",.005,.04),setTimeout(()=>c(700,.06,"sine",.005,.04),80);break;case r[n(225)]:c(880,.15,r[n(283)],.01,.1),r[n(228)](setTimeout,()=>c(1100,.12,n(213),.01,.08),120);break;case r.TnjHN:c(880,.2,r[n(226)],.01,.15),r[n(229)](setTimeout,()=>c(660,.2,n(271),.01,.15),150),setTimeout(()=>c(440,.3,n(271),.01,.2),300),r[n(228)](setTimeout,()=>c(330,.4,n(271),.01,.3),500);break;case n(296):r[n(302)](c,523,.12,n(271),.01,.08),setTimeout(()=>c(659,.12,"sine",.01,.08),100),r[n(229)](setTimeout,()=>c(784,.2,n(271),.01,.15),200);break;case"gameEnd":c(440,.15,n(213),.01,.1),setTimeout(()=>c(349,.25,n(213),.01,.2),150);break;case"victory":c(523,.1,r[n(226)],.01,.08),r[n(309)](setTimeout,()=>c(659,.1,"sine",.01,.08),100),setTimeout(()=>c(784,.1,n(271),.01,.08),200),r[n(228)](setTimeout,()=>c(1047,.3,n(271),.01,.25),300);break;case n(281):c(392,.2,n(271),.02,.15),r[n(228)](setTimeout,()=>c(349,.2,n(271),.02,.15),200),setTimeout(()=>c(330,.3,n(271),.02,.25),400),r[n(228)](setTimeout,()=>c(262,.4,"sine",.02,.35),650);break;case r[n(243)]:c(440,.15,r[n(226)],.01,.1),setTimeout(()=>c(440,.15,n(271),.01,.1),180),setTimeout(()=>c(523,.2,n(271),.01,.15),360);break;case n(318):r[n(297)](c,200,.1,"square",.005,.08),c(150,.08,r[n(288)],.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=bt;i[e(272)][e(251)]&&i.current[e(251)][e(319)]()},[]);const d={};return d[s(267)]=u,d[s(289)]=o,d};function wt(e,t){e-=373;const n=kt();let s=n[e];if(void 0===wt.xbDqKN){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};wt.jQPWpS=r,wt.BANQxV={},wt.xbDqKN=!0}const a=e+n[0],i=wt.BANQxV[a];if(i)s=i;else{const e=function(e){this.FXhvkQ=e,this.UKgRSg=[1,0,0],this.aXCQTz=function(){return"newState"},this.SmcbTm="\\w+ *\\(\\) *{\\w+ *",this.RPIlgk="['|\"].+['|\"];? *}"};e.prototype.VeMMVU=function(){const e=new RegExp(this.SmcbTm+this.RPIlgk).test(this.aXCQTz.toString())?--this.UKgRSg[1]:--this.UKgRSg[0];return this.royUSk(e)},e.prototype.royUSk=function(e){return Boolean(~e)?this.URbpXY(this.FXhvkQ):e},e.prototype.URbpXY=function(e){for(let t=0,n=this.UKgRSg.length;t<n;t++)this.UKgRSg.push(Math.round(Math.random())),n=this.UKgRSg.length;return e(this.UKgRSg[0])},new e(wt).VeMMVU(),s=wt.jQPWpS(s),wt.BANQxV[a]=s}return s}const jt=wt;!function(){const e=wt,t=kt();for(;;)try{if(604775===parseInt(e(380))/1*(-parseInt(e(383))/2)+parseInt(e(382))/3+-parseInt(e(375))/4+parseInt(e(391))/5*(parseInt(e(387))/6)+parseInt(e(378))/7+parseInt(e(374))/8+-parseInt(e(386))/9*(parseInt(e(390))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ct=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[wt(397)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=wt,t={};t[e(384)]="(((.+)+)+)+$";const n=t;return Ct.toString()[e(388)](n[e(384)]).toString().constructor(Ct)[e(388)](n[e(384)])});Ct();const Nt=function(){const e={};e[wt(402)]=function(e,t){return e!==t};const t=e;let n=!0;return function(e,s){const r=n?function(){const n=wt;if(t[n(402)](n(392),n(398))){if(s){const t=s.apply(e,arguments);return s=null,t}}else if(_0x3b55b9){const e=_0x2f2dc6[n(397)](_0x154e97,arguments);return _0xcb4685=null,e}}:function(){};return n=!1,r}}();function kt(){const e=["Aw5MBW","Dg9tDhjPBMC","CNDwy20","CvDXyui","y2HLC3mTC291BG","y29UC3rYDwn0BW","CMv0DxjUicHMDq","ndKZmZaXnM5NBLruva","mJK1nZCYnfbJA3zVsq","BMn0Aw9UkcKG","y29UC29Szq","mZa4ntGZoezSA2vOCG","yMLUza","mJnXuerWwuG","zc1Zzxr0Aw5NCW","mJu0otC2nNzUr1bbzW","mZuZmdjgBK1gELq","EeTgu0e","Bg9N","mte3mJK3mdLIwgr0se4","nJG3nJu4mLL3B1bfqq","C2vHCMnO","D2fYBG","mtbXDLvTC1q","nxrsDNrsua","vgvxEwu","zxjYB3i","CM4GDgHPCYiPka","vfrLuhq","zw5HyMXLza","yxbWBhK","y3DHzem","E30Uy29UC3rYDq","yvHgrMm","DhjHy2u","qvnRExe"];return(kt=function(){return e})()}Nt(void 0,function(){const e=wt,t={TTePt:function(e,t){return e(t)},AVZQJ:function(e,t){return e+t},wnxkc:function(e){return e()},aXFFc:e(385),qWqaB:e(403),rwVcm:"table"};let n;try{const s=t[e(395)](Function,t.AVZQJ(e(373)+e(376)+(e(399)+'ctor("retu')+e(394)+" )",");"));n=t.wnxkc(s)}catch(a){n=window}const s=n[e(377)]=n.console||{},r=[t[e(400)],e(389),t[e(406)],e(393),"exception",t[e(405)],e(401)];for(let i=0;i<r.length;i++){const t=Nt[e(408)+"r"].prototype[e(379)](Nt),n=r[i],a=s[n]||t;t.__proto__=Nt[e(379)](Nt),t[e(404)]=a.toString[e(379)](a),s[n]=t}})();const Mt={};Mt.name=jt(407)+jt(381);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[jt(396)]}))}),Mt)),Dt=At;function Bt(){const e=["CK9tzNa","vgDyyLK","zez0yu0","AwXSzwDHBa","suzVreK","yMXHy2TFCgXHEq","tNDhvge","ndi1mJqWu01lrMP3","DezRBMq","B3vUza","CMvZDwX0","A0zWwvy","BK9kt3a","D2HPDgu","tu5nthG","Dg9vChbLCKnHCW","kcGOlISPkYKRkq","B2zMzxjeCMf3","uMTlzuq","swfLqxG","zM9YrwfJAa","rhfxExO","Awq9zxeU","zwr6zwq","AfzNDhG","A2zNB1O","CKLK","z2fTzq","DgfIBgu","Dvv2uwi","yMXHy2TuAw1LuG","DhrL","EvDltwK","AgfSBgvUz2vFyW","yMXHy2TFCgfSzq","DxnLCL9Pza","D2HPDgvFD2LUCW","ywjHBMrVBMvK","B2rL","z2fTzvn0yxrL","BMv3","y29UC29Szq","BMv3uMf0Aw5N","Ag9ZwhO","sKH4wM0","zxjFAwq","qLnNuLC","ChjVDg90ExbL","yxnJzw5KAw5N","C2vSzwn0","zM9Py0K","rhjHDYbVzMzLCG","tuzLuLi","ndm1nZaXseP5rer2","zhDIB0O","DxbKyxrLievmtW","yMXHy2TqywXLDa","z2vUzxjHDgvFyW","Ew5lruu","AhP1CMO","BwfW","Bfndy2e","BIb0AgLZihzLCG","yNvSBgv0xZe","Aw5MBW","AM9PBKDHBwu","DxnLCL9PzcWGzq","DgLTzv9JB250CG","Dg1pBvq","DKfQDMK","uvPWDM0","zw1HAw5PBMC","t254sxu","BMvS","z1bQs3K","rKTOvKC","rfD4thy","y3jLyxrLr2fTzq","y2HLy2S","sNLiuvK","t2v1DKu","CLfbANK","vxjQBvC","C3rHDhvZ","rLrRq2e","qM9Uufy","lwfJy2vWDhmGAq","BMn0Aw9UkcKG","DhvYBG","x19WCM90B19F","ihbSyxLPBMCGyq","C2LVBIK","uMX6swO","EwLrBvO","EM9kuxy","y29TCgXLDgvK","DwvsB3m","shzAyxG","Bw92zv91y2K","DLbWqMq","B3jKzxi","EMDcwee","v2HPDguGD2LUCW","ywXS","BLzmBNm","E30Uy29UC3rYDq","DvfSzeO","y2HHBgXLBMDLxW","Aw4GysbNyw1L","Bw92zv9JB3vUDa","BgvnB3zLCW","DMLJDg9YEq","u3jTyvq","Bg9FCMf0Aw5N","wuTPvgG","D2LUBMvYswq","vgTmDui","su5trvju","CK9tEK0","EvPHCKm","C3vIC2nYAwjL","zxHJzxb0Aw9U","DhjHy2u","Dg9tDhjPBMC","u2LIu1q","uwLcAMO","Cvrur2m","AM9PBIbIEsbJBW","D0nlwfe","igv4CgLYzwqGyW","wMTUwge","y2HLC3nFz2fTzq","yMXHy2TFD2LUCW","rKnkyKC","AevIEha","sw52ywXPzcbVCG","tNrhwwG","ChjVzMLSzxm","sxfZq0i","CMfWAwrFmtu","vvHHExu","zwqHifDHAxrPBG","s1L4tfq","EufuA2y","BwvZC2fNzq","txzWsw8","y2HHBM5LBa","y2HLy2TTyxrL","Axnhyw1Lt3zLCG","Cg9ZDgDYzxnFyW","C1nWAhm","EM9gAK0","AgfUz2vZ","C2LUz2XL","CgDU","vejKy0i","tw92zsbLCNjVCG","Ewrnvg0","BIbPBIb0BYbQBW","q0D5vei","B25LBNqGyxv0BW","q2HHBgXLBMDLia","zMvU","ww91ihjLC2LNBG","C2fU","y3vYCMvUDezLBG","svLuq0C","zgvMzwf0","ExDSDhK","vxjWDxu","AM9PBIbNyw1L","DfnLqLC","y2fWDhvYzq","CgXHEwvYx2LK","D2HPDgvqywXLDa","Bu10s3m","wgDwsfy","C2vHCMnO","CM4GDgHPCYiPka","ugXLyxnLihnPzW","D2HPDgvqBgf5zq","ihjHDgLUz3m6","Aw5JBhvKzxm","rwXdEKC","AM9PBKj5q29Kzq","Bwf5yMvtAw5NBa","CMv0DxjUicHMDq","y2HHBMDL","yMXHy2S","Au5Xrxe","AfP2A0S","ue9tt1y","zhjHDW","ww91ihDVBIe","shDfrfa","t0v3rg4","Cvrrwg0","AxndAgvJA21HDa","y2HHBgXLBMDLqW","wuvquMy","z1rxzvq","qKXHB2u","sxD5sg8","igDHBwu","tKXVEK8","vuPdCwy","C3rcr1K","nJK2ntnWEuvZuNi","yurvy0e","C3vIC3rYAw5N","ywrK","t1nYr3C","Bw92zq","vMvyse8","AMTzDvC","ChjVBw90Aw9U","y2fWDhvYzwq","BhvRy2u","zxjYB3i","zNjVBq","Aw5Zzxj0","BIb5B3vYig93BG","qw5gEMu","D3jivfG","y29KztOG","y0nfDNK","C3rHCNrLzf9HDa","AxndAgvJAW","uffhz0y","z2fTzv9Pza","C3rHCNrLzef0","y29UC3rYDwn0BW","y29Kzq","D2HPDgvFCgXHEq","y3jLyxrLigDHBq","nda3mZu4BM9bu3jh","tY1p","BvfIyvu","AxnmB2fKAw5N","vLDZBLq","Dg9ju09tDhjPBG","zujXD0m","yMXHy2TqBgf5zq","DLjJzei","zgzotfG","rMfPBgvKihrVia","y2fZDgXL","DffhwMS","B1zfwhK","EuLOsvO","x3jLBwfPBMLUzW","yMLUza","tMTXseK","vuDLtfG","y3rVCIGICMv0Dq","AxnnEvr1CM4","DxbKyxrL","yvbAuhK","tY1plu8","weDrEuO","yxbWBhK","C3f1yxjL","zMLUza","AxnFChvIBgLJ","yMjhALe","vKDRsNy","z2nPDwu","BgvUz3rO","mtq2mJmYnxn2EfzjDG","z2fTzvn0yxj0","yMXHy2TFDgLTzq","ufrZC3q","D2HPDgvFDgLTzq","z2fTzs0","CMvZAwDUr2fTzq","Bw92zxmT","sNrmtNe","oty0ntG4EhHrDu5S","Bg9N","zwXVx3jHDgLUzW","q1DlEvu","D3f1CuK","twrKvxO","qujoAgG","BIbPBIb0BYbJCG","q2fUBM90igPVAq","r2H0DeC","zhKGC3rHCNrLza","z2fTzv9Pzd1LCq","D2HPDgvFCgfSzq","uMf0Aw5NoIa","Bw92zwrtCxvHCG","C3vJy2vZCW","AvHXug8","wg5kvhG","tezLAuG","Dw50Aw1Lza","q3Dnu3G","t1r6yKK","r2fTzsbUB3qGzG","r2fTzsbHBhjLyq","D2fPDgLUzW","DMvYyM9Zzq","y3jLyxrLzf9HDa","AeT4tfi","EvLnCuO","ChvIBgLJ","CMvTB3zLq2HHBG","CwrAuKG","D2LUBMvYx2LK","CNbJ","wMfgzwq","ntm2mJaWwM55BKnZ","vvbeqvrf","Bw92zunVDw50","quv3Due","BxLdB2XVCG","D2fYBG","m0XUDwPNEa","DgLTzunVBNrYBW","CKDRww4","CxPiEvO","yvHRt2m","y3vYCMvUDf9Mzq","DenTueO","r0TcDu4"];return(Bt=function(){return e})()}!function(){const e=At,t=Bt();for(;;)try{if(258184===parseInt(e(647))/1+-parseInt(e(426))/2+parseInt(e(432))/3*(parseInt(e(717))/4)+parseInt(e(708))/5+-parseInt(e(675))/6+-parseInt(e(493))/7+parseInt(e(447))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const qt=function(){const e=At,t={};t[e(436)]=e(515);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(657)]=a(686);const o=i;if(n[a(436)]===a(515)){const e=s?function(){if(r){const e=r[a(700)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x481a51(o[a(657)])}}()(void 0,function(){const e=At,t={};t[e(516)]=e(456)+"+$";const n=t;return qt[e(563)]()[e(617)](n[e(516)]).toString()[e(671)+"r"](qt).search("(((.+)+)+)+$")});qt();const Lt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function At(e,t){e-=401;const n=Bt();let s=n[e];if(void 0===At.rYtYoz){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};At.cboxVB=r,At.yxsgLz={},At.rYtYoz=!0}const a=e+n[0],i=At.yxsgLz[a];if(i)s=i;else{const e=function(e){this.lvtxAp=e,this.axQiHU=[1,0,0],this.nmcYRH=function(){return"newState"},this.PkOxUR="\\w+ *\\(\\) *{\\w+ *",this.GDFEbb="['|\"].+['|\"];? *}"};e.prototype.jDpjJp=function(){const e=new RegExp(this.PkOxUR+this.GDFEbb).test(this.nmcYRH.toString())?--this.axQiHU[1]:--this.axQiHU[0];return this.AQWGvo(e)},e.prototype.AQWGvo=function(e){return Boolean(~e)?this.acyfHh(this.lvtxAp):e},e.prototype.acyfHh=function(e){for(let t=0,n=this.axQiHU.length;t<n;t++)this.axQiHU.push(Math.round(Math.random())),n=this.axQiHU.length;return e(this.axQiHU[0])},new e(At).jDpjJp(),s=At.cboxVB(s),At.yxsgLz[a]=s}return s}Lt(void 0,function(){const e=At,t={yYMqJ:function(e,t){return e+t},MvpIo:e(626)+e(527),AEwuA:function(e){return e()},PQGgF:"log",hrDmf:e(431),UXayu:e(468),kFpYV:function(e,t){return e<t}};let n;try{const s=Function(t[e(419)](t[e(419)](t[e(585)],e(545)+'ctor("retu'+e(618)+" )"),");"));n=t[e(429)](s)}catch(a){n=window}const s=n[e(481)]=n.console||{},r=[t[e(668)],t.hrDmf,"info",e(658),e(561),t[e(580)],e(562)];for(let i=0;t[e(451)](i,r[e(707)]);i++){const t=Lt[e(671)+"r"][e(487)].bind(Lt),n=r[i],a=s[n]||t;t[e(529)]=Lt[e(691)](Lt),t[e(563)]=a[e(563)].bind(a),s[n]=t}})();const St={};St[Dt(503)]=60,St.blitz_5=300,St[Dt(579)]=900,St[Dt(410)]=0;const Pt=St,Ht=Tt;function Tt(e,t){e-=231;const n=_t();let s=n[e];if(void 0===Tt.hjnZyT){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tt.tFbXYx=r,Tt.bZNKVc={},Tt.hjnZyT=!0}const a=e+n[0],i=Tt.bZNKVc[a];if(i)s=i;else{const e=function(e){this.yJBbMH=e,this.pRLZWf=[1,0,0],this.DGhuCQ=function(){return"newState"},this.rqXQfP="\\w+ *\\(\\) *{\\w+ *",this.lBDANB="['|\"].+['|\"];? *}"};e.prototype.LCecZS=function(){const e=new RegExp(this.rqXQfP+this.lBDANB).test(this.DGhuCQ.toString())?--this.pRLZWf[1]:--this.pRLZWf[0];return this.niDKjo(e)},e.prototype.niDKjo=function(e){return Boolean(~e)?this.pnkKCC(this.yJBbMH):e},e.prototype.pnkKCC=function(e){for(let t=0,n=this.pRLZWf.length;t<n;t++)this.pRLZWf.push(Math.round(Math.random())),n=this.pRLZWf.length;return e(this.pRLZWf[0])},new e(Tt).LCecZS(),s=Tt.tFbXYx(s),Tt.bZNKVc[a]=s}return s}!function(){const e=Tt,t=_t();for(;;)try{if(951767===parseInt(e(254))/1*(-parseInt(e(275))/2)+parseInt(e(295))/3*(-parseInt(e(282))/4)+parseInt(e(243))/5*(parseInt(e(238))/6)+-parseInt(e(231))/7*(-parseInt(e(263))/8)+parseInt(e(271))/9+parseInt(e(293))/10+parseInt(e(286))/11*(parseInt(e(290))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Gt=function(){const e=Tt,t={};t[e(284)]=function(e,t){return e!==t},t[e(242)]=e(248)+"+$";const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(245)]=n[a(242)];const o=i;if("povgv"===a(270))return _0x386cc0.toString()[a(232)](o[a(245)])[a(277)]().constructor(_0x2cbcf0)[a(232)](o[a(245)]);{const e=s?function(){const e=a;if(r){if(n.QPxHS(e(246),e(272))){const e=r.apply(t,arguments);return r=null,e}if(_0xfeebc3){const t=_0x104e69[e(269)](_0x3e3af5,arguments);return _0x503390=null,t}}}:function(){};return s=!1,e}}}()(void 0,function(){const e=Tt,t={};t.KzgBB=e(248)+"+$";const n=t;return Gt.toString()[e(232)](n.KzgBB)[e(277)]()[e(247)+"r"](Gt)[e(232)](n[e(251)])});Gt();const Kt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Tt(269)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function _t(){const e=["AgvHDNK","BeLgrfG","reP2sfe","r0D6s3e","mZbTEurKA0i","y3D5Cu4","ALfssvm","C3jOEMS","y29UC3rYDwn0BW","kcGOlISPkYKRkq","y29UC29Szq","Bg9N","s3PNqKi","uNrywfe","DgfIBgu","mwzwyvLWzW","t05YB0O","BgLNAhq","AxzSqM4","AxntDxbWB3j0zq","C2jdvNm","y3rVCIGICMv0Dq","y2rSCuC","DMLICMf0zq","mtmYnJG1nLHKrw9uCG","qMnlC1q","Aw5MBW","tLnHAhy","rwTfCMO","sfPQy0W","yxbWBhK","v0PKB2G","mti2ote5nJjHq21xBwu","CxvvEKK","BwvKAxvT","DLvKreS","mZe4ndm1ohfywLDArq","zgjHy2SGzMfPBa","Dg9tDhjPBMC","CMv0DxjUicHMDq","Ce55yvu","DhjHy2u","yMLUza","mte4ndy4wuflBw9c","BgvUz3rO","uvb4sfm","EKHUCxy","odHKuLrqBui","zxHJzxb0Aw9U","BMn0Aw9UkcKG","su51zem","mJi0ntjqEu52y24","zxjYB3i","E30Uy29UC3rYDq","mtaWnZKWodbNzfL3s0W","vu9Tv2m","ouncCKjhsW","n0j4v2nVqG","C2vHCMnO","AgfWDgLJCW","ChjVDg90ExbL","x19WCM90B19F","D2fYBG","A1LozeK","mZm4ndzPvKHzsu0"];return(_t=function(){return e})()}Kt(void 0,function(){const e=Tt,t={kYNdI:function(e,t){return e(t)},BcKsT:function(e,t){return e+t},RtXXQ:e(278)+e(288),vUdDK:e(292)+e(260)+'rn this")( )',ONroJ:function(e,t){return e===t},zHnqv:e(244),pNyaU:e(236),mSoEe:e(265),UOmWc:e(287),oRjTT:e(280),EkErj:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t[n(237)](Function,t[n(264)](t[n(252)],t[n(274)])+");")()}catch(r){if(t[n(255)](t[n(285)],n(266))){if(_0x27af46){const e=_0x3c6596[n(269)](_0x5c1717,arguments);return _0x4e6584=null,e}}else s=window}return s}(),s=n[e(249)]=n[e(249)]||{},r=[e(250),t[e(279)],t.mSoEe,e(291),t[e(294)],e(253),t.oRjTT];for(let a=0;t[e(267)](a,r[e(283)]);a++){const t=Kt[e(247)+"r"][e(234)][e(281)](Kt),n=r[a],i=s[n]||t;t[e(235)]=Kt.bind(Kt),t[e(277)]=i[e(277)].bind(i),s[n]=t}})();const Ut={};Ut[Ht(256)]=10,Ut[Ht(273)]=25,Ut[Ht(239)]=50,Ut.success=[10,50,20],Ut[Ht(291)]=[50,30,50,30,50],Ut.selection=5;const It=Ut,Et=()=>{const e=Ht,n={lIFDX:function(e,t){return e in t},HZjcL:e(262),sbCVs:function(e,t,n){return e(t,n)},ivlBn:function(e,t,n){return e(t,n)},cdlqG:function(e,t,n){return e(t,n)},INudC:function(e,t,n){return e(t,n)}},s="undefined"!=typeof navigator&&n[e(240)](n[e(268)],navigator),r=n[e(259)](t.useCallback,(t=e(256))=>{const n=e;if(!s)return!1;try{if("upwZV"===n(241)){const e=_0x2e023f?function(){if(_0x5452cb){const e=_0x1f1313[n(269)](_0x212f1c,arguments);return _0x4dfd52=null,e}}:function(){};return _0x2c2bcf=!1,e}{const e=It[t];return navigator[n(262)](e)}}catch(r){return!1}},[s]),a={select:n[e(259)](t.useCallback,()=>r("selection"),[r]),move:t.useCallback(()=>r("light"),[r]),capture:t.useCallback(()=>r(e(273)),[r]),check:t.useCallback(()=>r(e(239)),[r]),victory:n[e(257)](t.useCallback,()=>r("success"),[r]),error:n[e(261)](t.useCallback,()=>r(e(291)),[r]),castle:t.useCallback(()=>!!s&&navigator.vibrate([15,40,15]),[s]),gameStart:n[e(289)](t.useCallback,()=>!!s&&navigator[e(262)]([10,30,10,30,20]),[s])},i={};return i[e(258)+"d"]=s,i[e(262)]=r,i[e(233)]=a,i},Wt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Ot=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Et();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Ot(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,x,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,q]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),T=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Ot(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=H(i),j=T&&g&&!y,N=T&&y;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Xt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Zt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Xt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(L,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Rt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Ft={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:U,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:_,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Vt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:U,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:_,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(T,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Rt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(G,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Ft[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(K,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Zt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(I,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(E,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(W,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(O,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(Z,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(R,{className:"h-3 w-3"}),q]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(F,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(V,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(Z,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(F,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(J,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Jt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Qt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(K,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(I,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(K,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[q,L]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[T,G]=t.useState(!1),[_,U]=t.useState(!1);se(p);const I=t.useMemo(()=>p?fe(p):null,[p]),E=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const W=async e=>{if(e&&!v)return void G(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(K,{variant:q?"outline":"default",size:"sm",onClick:()=>E(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(K,{variant:q?"default":"outline",size:"sm",onClick:()=>E(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",I&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",I]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(K,{onClick:()=>W(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(K,{onClick:()=>W(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(K,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:T,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),U(!0)},trigger:"download"}),u.jsx(qe,{isOpen:_,onClose:()=>U(!1)})]})},tn=vn;!function(){const e=vn,t=gn();for(;;)try{if(126996===parseInt(e(502))/1*(parseInt(e(455))/2)+-parseInt(e(440))/3+-parseInt(e(464))/4+-parseInt(e(478))/5*(parseInt(e(487))/6)+-parseInt(e(485))/7+parseInt(e(468))/8*(parseInt(e(445))/9)+-parseInt(e(454))/10*(-parseInt(e(450))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){const e=vn,t={};t[e(517)]=function(e,t){return e!==t},t[e(438)]="nTkCc";const n=t;let s=!0;return function(t,r){const a=e;if(n[a(517)](n[a(438)],"BZSeR")){const e=s?function(){if(r){const e=r[a(516)](t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0x2e478a?function(){if(_0x2e59cb){const e=_0x7b4408[a(516)](_0x59cb1e,arguments);return _0x8aa7b6=null,e}}:function(){};return _0x4596fa=!1,e}}}()(void 0,function(){const e=vn,t={};t[e(444)]=e(459)+"+$";const n=t;return nn[e(436)]()[e(452)](e(459)+"+$")[e(436)]()[e(461)+"r"](nn)[e(452)](n[e(444)])});nn();const sn=function(){const e=vn,t={};t[e(420)]=e(491),t[e(421)]=function(e,t){return e===t},t.xGgjE=e(498),t[e(442)]=e(513);const n=t;let s=!0;return function(t,r){const a=e;if(!n[a(421)](n[a(451)],n[a(442)])){const e=s?function(){const e=a,s={iFcpv:e(477)+e(441),YvoKM:"{}.constru"+e(448)+e(433)+" )",cJURZ:function(e){return e()},gDIHQ:"log",lTEqM:n.VvzJk,benNr:e(446),ADFEW:e(515)};if("GujdC"!==e(458)){let t;try{const n=_0x53915a(s[e(489)]+s[e(456)]+");");t=s[e(505)](n)}catch(i){t=_0x2eac9a}const n=t[e(419)]=t[e(419)]||{},r=[s[e(486)],s[e(467)],e(519),s[e(521)],s.ADFEW,e(447),e(518)];for(let s=0;s<r[e(435)];s++){const t=_0x4ff266[e(461)+"r"][e(430)][e(453)](_0x130e3e),a=r[s],i=n[a]||t;t.__proto__=_0x1a0740[e(453)](_0x26bd71),t[e(436)]=i.toString[e(453)](i),n[a]=t}}else if(r){const n=r[e(516)](t,arguments);return r=null,n}}:function(){};return s=!1,e}_0x3ead75[a(496)+a(424)](),_0x32a080()}}();sn(void 0,function(){const e=vn,t={kQQoE:function(e,t){return e(t)},LbkNo:function(e,t){return e+t},ZqiSO:e(463)+e(448)+e(433)+" )",VMKgA:e(507),UXkhs:e(515),VTvVV:"table",ccVFQ:e(518)};let n;try{n=t[e(482)](Function,t[e(514)](e(477)+e(441),t.ZqiSO)+");")()}catch(a){n=window}const s=n[e(419)]=n.console||{},r=[t.VMKgA,e(491),"info",e(446),t.UXkhs,t[e(512)],t.ccVFQ];for(let i=0;i<r[e(435)];i++){const t=sn[e(461)+"r"][e(430)][e(453)](sn),n=r[i],a=s[n]||t;t[e(457)]=sn[e(453)](sn),t[e(436)]=a.toString[e(453)](a),s[n]=t}})();const rn=()=>{const e=vn,t={duration:4e3};o[e(519)](e(494)+e(471)+"=Resign, D"+e(510)+e(483)+e(506),t)},an={};an[tn(490)]="M",an.action=tn(425)+tn(495);const on={};on[tn(490)]="R",on[tn(472)]="Resign gam"+tn(475)+tn(449);const cn={};cn[tn(490)]="D",cn[tn(472)]=tn(434)+tn(500)+"n)";const ln={};ln[tn(490)]=tn(473),ln[tn(472)]=tn(460)+"lobby / Ex"+tn(479)+"een";const un={};un[tn(490)]="?",un[tn(472)]="Show keybo"+tn(499)+tn(443);const dn={};dn.key=tn(426),dn[tn(472)]=tn(493)+" timeline";const mn={};mn[tn(490)]="â†",mn[tn(472)]="Previous move";const xn={};xn[tn(490)]="â†’",xn[tn(472)]=tn(462);const hn={};hn[tn(490)]=tn(469),hn[tn(472)]=tn(439)+"t";const pn={};pn[tn(490)]=tn(423),pn[tn(472)]="Go to end (show all)";const fn={};function gn(){const e=["vNz6sMS","uMLTCxy","C3rLBMvY","rw5K","yxvSDa","vg9Nz2XLihnVDq","u3bHy2u","vfvTqMm","DgvK","terAyKO","ChjVDg90ExbL","yw5KigXLz2vUza","BhnJCMvLBIbTBW","CM4GDgHPCYiPka","t2zMzxiGzhjHDW","BgvUz3rO","Dg9tDhjPBMC","yxrLCW","AezOCMO","r28GDg8GC3rHCG","mZaXmdGWqu5Kz3Hw","BMn0Aw9UkcKG","Cxn4Chy","DxrZ","s3bgBgy","oxjgEunQEq","zxjYB3i","DgfIBgu","y3rVCIGICMv0Dq","CgXHEsK","nJi3nZDfBhL2z2m","EeDNAKu","C2vHCMnO","yMLUza","mJKWBgnNrK1u","mtzIBwjtCfq","wxzVs00","x19WCM90B19F","r3vQzem","kcGOlISPkYKRkq","uMv0DxjUihrVia","y29UC3rYDwn0BW","tMv4DcbTB3zL","E30Uy29UC3rYDq","mZmYmZy0DwT5uuTX","CMqGy29VCMrPBG","y0zXr2W","BfrfCu0","mtu2ndmWnhHNDLHjwG","sg9Tzq","EM9gvuK","ie09txv0zsWGuG","ywn0Aw9U","rxnJ","AxndB250zw50rq","zsaOzhvYAw5Nia","se1VtMW","CMv0DxjUicHMDq","mJbltK9NtNy","AxqGzNvSBhnJCG","z0XIC1K","u291BMqGDw5TDq","A1frB0u","puXVyMj5lca/pq","y0DLv3u","ntC2nZu4DLLmru1z","z0rjsfe","nde0odrZuxjeyxy","pvjLC2LNBIWGra","AuzJChy","A2v5","D2fYBG","qvnvwKm","ugXHEs9qyxvZzq","u2HVCNrJDxrZoG","BMqGB24VB2zM","ChjLDMvUDerLzG","vg9Nz2XLl2v4Ca","wwzOwK8","yxjKihnOB3j0yW","icH5B3vYihr1CG","vg9Nz2XLigjVyq","nZqZmKzUu1fQvG","DgfYz2v0","qKDgEwK","y0PvuLO","sgvSCa","Bg9N","CMvTB3zLrxzLBG","rKPStgi","purYyxCSievZyW","A2v5zg93BG","vLr2vLy","y1HJwLa","tgjRtM8","zxHJzxb0Aw9U","yxbWBhK","B1jRr2C","DhjHy2u","Aw5MBW","z2vxz1G","yMvUtNi","y29UC29Szq"];return(gn=function(){return e})()}function vn(e,t){e-=419;const n=gn();let s=n[e];if(void 0===vn.ZqDAwX){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};vn.PcTvsx=r,vn.qtTzht={},vn.ZqDAwX=!0}const a=e+n[0],i=vn.qtTzht[a];if(i)s=i;else{const e=function(e){this.oakXLd=e,this.pQaFSG=[1,0,0],this.WNgwHk=function(){return"newState"},this.ZrBrqY="\\w+ *\\(\\) *{\\w+ *",this.qerJjy="['|\"].+['|\"];? *}"};e.prototype.RzSQgU=function(){const e=new RegExp(this.ZrBrqY+this.qerJjy).test(this.WNgwHk.toString())?--this.pQaFSG[1]:--this.pQaFSG[0];return this.DvKFKv(e)},e.prototype.DvKFKv=function(e){return Boolean(~e)?this.dhHzum(this.oakXLd):e},e.prototype.dhHzum=function(e){for(let t=0,n=this.pQaFSG.length;t<n;t++)this.pQaFSG.push(Math.round(Math.random())),n=this.pQaFSG.length;return e(this.pQaFSG[0])},new e(vn).RzSQgU(),s=vn.PcTvsx(s),vn.qtTzht[a]=s}return s}fn[tn(490)]="F",fn[tn(472)]="Toggle ful"+tn(432)+"de";const bn={};bn[tn(490)]="C",bn.action=tn(501)+tn(465)+tn(437);const yn={};yn[tn(490)]="L",yn[tn(472)]=tn(497)+tn(431);const wn=In;!function(){const e=In,t=Cn();for(;;)try{if(544603===-parseInt(e(289))/1+parseInt(e(286))/2*(parseInt(e(326))/3)+parseInt(e(257))/4*(parseInt(e(346))/5)+parseInt(e(269))/6+parseInt(e(237))/7+parseInt(e(332))/8*(-parseInt(e(308))/9)+parseInt(e(307))/10*(-parseInt(e(305))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=In,t={};t[e(232)]=e(331)+"+$";const n=t;return jn.toString()[e(264)](n.Yalgw)[e(333)]()[e(355)+"r"](jn)[e(264)](n[e(232)])});function Cn(){const e=["zgvWDgG","B2nJyxnPB25HBa","y29UC29Szq","v3L5tMG","qwfXCwG","ALDirKO","qMfZAwmGDgfJDa","CMvK","CxPezha","C2XPy2u","BKzptfK","ywnRihrVigHHCG","AgfYza","AxntDgfSzw1HDa","twfZDgvY","CMv0DxjUicHMDq","uMvHBcbotLvfia","D2fYBG","AxrPB24","nfPwCxrIzW","sgDwCMi","DhLWzq","Ee9lq3e","svLeBLq","Bwf4","FJe0mda","C2vHCMnO","Axnhyw1Lt3zLCG","DhjHy2u","C3rVy2TMAxnO","idqTCgX5ihnLyq","ndq5odaYnNbUqMDNqG","zxHJzxb0Aw9U","Aw5JBhvKzxm","AwnZigfUzcbTyq","CMfUzg9T","ignHChr1CMvZ","AMv0ue8","DMvYyM9Zzq","zw5NAw5LlcbNCG","BM90ihjLywr5la","Dw5KBW","zwfZEq","shvRyvu","zNjVBq","y3LODvO","u3rVy2TMAxnOia","CMnOigrLChrO","nK9VDNPwyG","zwPLAve","r2v4EhC","mtiXmdeXzunpsefx","DgvYAwfSigf3yq","verWtfm","sfD2CNe","igzHBgXPBMCGyG","twfRzxmGCMfUza","tNjZvu0","yw5KBwfZDgvYia","whbvwMW","Bg9N","zcbTB2rL","yMLUza","yw5HBhL6zvbVCW","BgvUz3rO","BxHHDxC","zMLUza","mJi0ntfUD1fyufG","E30Uy29UC3rYDq","mtaYmtbSse9Rrxi","nJKZy2vSzgjj","AxndAgvJA21HDa","zLnHs3a","Bw92zxm","ChjVDg90ExbL","yM9rveu","C29YDa","De9izfK","ChjVBw90Aw9U","r0ntyxC","quHAyvC","yNniv2W","t0zOyKu","ywD2uhe","vxvOu3y","q2X1yIbqBgf5zq","C3rYzw5NDgG","FJiWmda","otC5ndq5zLvKthH2","CMf0Aw5N","Bw92zsbLCNjVCG","B20GBw92zxmSia","Bw92zq","kcGOlISPkYKRkq","nZCYmJrfvuDIEgW","Dg9tDhjPBMC","Du9iv1i","v29Rrxy","zMXVB3i","zLbqCxK","C2fU","y29SB3i","y3LuCfy","yM9HCMq","DMfSDwf0Aw9Ula","x19WCM90B19F","yxbWBhK","BwLU","nte0mZaXnvLQrK51BW","wMH2yuW","BwvKAxvT","EwPJqNO","zw5NAw5Lug93zq","reTMCKm","BMn0Aw9UkcKG","CMvUzxnZ","B1bdsu4","y29UC3rYDwn0BW","AxneCMf3","CM4GDgHPCYiPka","yMzVDhq","DgfIBgu","Aw5MBW","rgHbBvC","CNHTuNu","AKXkyu0","zMvU","BgfIzwW","C2nVCMu","DLPpC3O","EwnMqMm","zxjYB3i","zgvZy3jPChrPBW","wwfSz3C","ywHdvfi","rfLoCey","y2fWDhvYzwq","DhvYBG","nte0ntiZmxbpq0zLAG"];return(Cn=function(){return e})()}jn();const Nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[In(344)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Nn(void 0,function(){const e=In,t={GCSaw:function(e,t){return e(t)},gOtoy:e(230),Gexxw:e(270),uOHWR:e(359),ejeiQ:e(266),VUKTM:function(e,t){return e<t},NrsUM:function(e,t){return e===t},gIDtU:e(241)},n=function(){const n=e;let s;try{s=t[n(317)](Function,n(253)+n(352)+(n(306)+'ctor("retu')+n(357)+" ));")()}catch(r){s=window}return s}(),s=n[e(240)]=n[e(240)]||{},r=[e(298),e(255),e(360),t.gOtoy,t[e(288)],t[e(334)],t[e(287)]];for(let a=0;t.VUKTM(a,r.length);a++){if(!t[e(295)]("WyyNh",t.gIDtU)){const t=_0x5edf46?function(){if(_0x1ac2fd){const t=_0x3c5acc[e(344)](_0x11193e,arguments);return _0x45875e=null,t}}:function(){};return _0x2fb25e=!1,t}{const t=Nn[e(355)+"r"][e(312)][e(300)](Nn),n=r[a],i=s[n]||t;t[e(343)]=Nn[e(300)](Nn),t[e(333)]=i.toString[e(300)](i),s[n]=t}}})();const kn={p:100,n:320,b:330,r:500,q:900,k:2e4},Mn=kn,zn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Dn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Bn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],qn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Ln=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],An=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Sn(e){switch(e.toLowerCase()){case"p":return zn;case"n":return Dn;case"b":return Bn;case"r":return qn;case"q":return Ln;case"k":return An;default:return[]}}function Pn(e){const t=In,n={};n.ahCTR=t(228),n.boQTE="zKxmc",n[t(246)]=function(e,t){return e-t},n[t(320)]=function(e,t){return e+t},n.LJvVs=function(e,t){return e===t},n[t(358)]=function(e,t){return e===t},n[t(291)]=function(e,t){return e*t};const s=n;if(e[t(309)+"e"]()){if(s[t(233)]!==s[t(313)])return"w"===e[t(236)]()?-1/0:1/0;_0x33e7fd=_0x5cd5d7,_0xa4dcb1=_0x488c64}if(e[t(356)]()||e[t(251)+"e"]())return 0;let r=0;const a=e[t(341)]();for(let o=0;o<8;o++)for(let e=0;e<8;e++){const n=a[o][e];if(n){const a=Mn[n[t(259)]]||0,i=Sn(n.type);let c=0;if(i[t(302)]>0){c=i["w"===n[t(339)]?o:s[t(246)](7,o)][e]}const l=s[t(320)](a,c);r+=s.LJvVs(n[t(339)],"w")?l:-l}}const i=e[t(311)]()[t(302)];return r+=s[t(358)](e.turn(),"w")?s.TDpLS(i,2):s[t(291)](-i,2),r}function Hn(e,t,n,s,r){const a=In,i={uGFJX:function(e,t){return e-t},SCemW:function(e,t){return e(t)},jLJaM:function(e,t,n,s,r,a){return e(t,n,s,r,a)},fPPqy:function(e,t){return e>t},mxauw:function(e,t){return e<=t}};if(0===t||e[a(265)]())return{score:i.SCemW(Pn,e),move:null};const o={};o[a(276)]=!0;const c=e[a(311)](o);if(c[a(314)]((e,t)=>{const n=a;let s=0,r=0;return e.captured&&(s+=Mn[e.captured]||0),t[n(235)]&&(r+=Mn[t[n(235)]]||0),e[n(338)][n(271)]("+")&&(s+=50),t[n(338)].includes("+")&&(r+=50),i.uGFJX(r,s)}),r){let r=-1/0,o=null;for(const u of c){e[a(330)](u);const c=i[a(363)](Hn,e,t-1,n,s,!1);if(e[a(279)](),i[a(337)](c.score,r)){if("jXiCu"===a(340))return _0x729e3c(_0x5cf1a2);r=c[a(227)],o=u}if(n=Math[a(262)](n,c[a(227)]),i[a(303)](s,n))break}const l={};return l[a(227)]=r,l[a(330)]=o,l}{let r=1/0,i=null;for(const l of c){e[a(330)](l);const o=Hn(e,t-1,n,s,!0);if(e[a(279)](),o[a(227)]<r&&(r=o[a(227)],i=l),(s=Math[a(345)](s,o[a(227)]))<=n)break}const o={};return o[a(227)]=r,o[a(330)]=i,o}}function Tn(e){const t=In,n={};n[t(322)]=function(e,t){return e===t},n[t(335)]=function(e,t){return e>t},n[t(261)]=function(e,t){return e*t};const s=n,r={};r[t(276)]=!0;const a=e[t(311)](r);if(s.UuhSv(a[t(302)],0))return null;const i=a.filter(e=>e[t(235)]);return s[t(335)](i[t(302)],0)&&Math[t(273)]()<.3?i[Math[t(336)](s.IYDnT(Math[t(273)](),i[t(302)]))]:a[Math[t(336)](s[t(261)](Math.random(),a[t(302)]))]}function Gn(e){const t=In,n={oPCIN:function(e,t){return e===t},chibp:function(e,t){return e===t},Aaqqh:function(e,t){return e(t)},MGUOp:function(e,t){return e-t},DhAmW:function(e,t){return e===t},ZhvaL:function(e,t){return e===t},nFOLY:t(292),jetPO:t(349),DKfrC:t(258),fSaKp:function(e,t){return e*t}},s={verbose:!0},r=e[t(311)](s);if(n[t(361)](r[t(302)],0))return null;let a=null,i="w"===e[t(236)]()?-1/0:1/0;for(const o of r){e[t(330)](o);const s=Pn(e);if(e.undo(),"w"===e.turn()){if(s>i){if(n[t(347)](t(318),n[t(248)])){return _0x4b1cfe(_0x196fa1,4,-_0x547b80,_0x32a700,n.oPCIN(_0x1de1e3[t(236)](),"w"))[t(330)]}i=s,a=o}}else if(n[t(275)]===n[t(351)]){const e=n.chibp(_0x18848b[t(339)],"w")?_0x5a76a6:7-_0x10c0ac;_0x463ab4=_0x12102d[e][_0x4283ef]}else s<i&&(i=s,a=o)}if(Math.random()<.2){const s=r[t(314)]((s,r)=>{const a=t;e.move(s);const i=n[a(242)](Pn,e);e.undo(),e[a(330)](r);const o=Pn(e);return e[a(279)](),n[a(354)](e.turn(),"w")?n.MGUOp(o,i):n.MGUOp(i,o)}),a=s[t(247)](0,Math.min(3,s[t(302)]));return a[Math[t(336)](n[t(310)](Math[t(273)](),a.length))]}return a}function Kn(e){const t=In;return{HukaU:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[t(281)](Hn,e,4,-1/0,1/0,"w"===e[t(236)]())[t(330)]}const _n={};_n.id=wn(280),_n[wn(226)]="Beginner",_n.description=wn(294)+wn(329)+wn(239)+wn(274),_n[wn(327)]="~800";const Un={};function In(e,t){e-=225;const n=Cn();let s=n[e];if(void 0===In.xHeNHO){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};In.QWpLkH=r,In.WQsteQ={},In.xHeNHO=!0}const a=e+n[0],i=In.WQsteQ[a];if(i)s=i;else{const e=function(e){this.XvFqgF=e,this.IjIpTM=[1,0,0],this.sleIEn=function(){return"newState"},this.OQvEEl="\\w+ *\\(\\) *{\\w+ *",this.XZqGqz="['|\"].+['|\"];? *}"};e.prototype.gtJxOE=function(){const e=new RegExp(this.OQvEEl+this.XZqGqz).test(this.sleIEn.toString())?--this.IjIpTM[1]:--this.IjIpTM[0];return this.WUbhuv(e)},e.prototype.WUbhuv=function(e){return Boolean(~e)?this.iiUGQB(this.XvFqgF):e},e.prototype.iiUGQB=function(e){for(let t=0,n=this.IjIpTM.length;t<n;t++)this.IjIpTM.push(Math.round(Math.random())),n=this.IjIpTM.length;return e(this.IjIpTM[0])},new e(In).gtJxOE(),s=In.QWpLkH(s),In.WQsteQ[a]=s}return s}Un.id="medium",Un[wn(226)]=wn(323)+"r",Un[wn(231)+"n"]=wn(244)+wn(272)+wn(290)+wn(353),Un.rating=wn(263);const En={};En.id=wn(250),En[wn(226)]=wn(252),En[wn(231)+"n"]="Advanced e"+wn(342)+wn(268)+wn(285),En[wn(327)]=wn(325);const Wn={};Wn.id=wn(267),Wn[wn(226)]=wn(284)+"16",Wn[wn(231)+"n"]=wn(254)+wn(277)+wn(296)+wn(324),Wn[wn(327)]="~3200",Wn[wn(350)+wn(245)]=!0;const On=[_n,Un,En,Wn];!function(){const e=Zn,t=Rn();for(;;)try{if(676693===-parseInt(e(281))/1*(-parseInt(e(277))/2)+-parseInt(e(244))/3+parseInt(e(274))/4+-parseInt(e(270))/5+-parseInt(e(231))/6*(-parseInt(e(272))/7)+-parseInt(e(251))/8*(-parseInt(e(243))/9)+-parseInt(e(298))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Yn=function(){const e={kuRrI:function(e,t){return e(t)},HuBKY:"QrnCS"};let t=!0;return function(n,s){const r=Zn;{const a=t?function(){const t=r,a={WaNjF:function(t,n){return e[Zn(229)](t,n)}};if("QrnCS"===e[t(234)]){if(s){const e=s[t(282)](n,arguments);return s=null,e}}else{const e={};e.startX=_0x2d4e8e,e.startY=_0x4cd598,e[t(255)]=_0x3c92b5,e.currentY=_0x221966,e[t(261)]=!0,_0x3006f3[t(276)]=e,a[t(228)](_0x1f26ff,!0)}}:function(){};return t=!1,a}}}()(void 0,function(){const e=Zn,t={};t[e(224)]="(((.+)+)+)+$";const n=t;return Yn[e(242)]().search(n[e(224)])[e(242)]().constructor(Yn)[e(288)](e(289)+"+$")});Yn();const Xn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Zn(282)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Zn(e,t){e-=222;const n=Rn();let s=n[e];if(void 0===Zn.vHlUAY){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Zn.TKkEQL=r,Zn.DzBUqg={},Zn.vHlUAY=!0}const a=e+n[0],i=Zn.DzBUqg[a];if(i)s=i;else{const e=function(e){this.AAyTjP=e,this.ZUSlsC=[1,0,0],this.sFvqZq=function(){return"newState"},this.jiftxM="\\w+ *\\(\\) *{\\w+ *",this.VFXMzo="['|\"].+['|\"];? *}"};e.prototype.QFxbPs=function(){const e=new RegExp(this.jiftxM+this.VFXMzo).test(this.sFvqZq.toString())?--this.ZUSlsC[1]:--this.ZUSlsC[0];return this.uRwvQi(e)},e.prototype.uRwvQi=function(e){return Boolean(~e)?this.kwiEzG(this.AAyTjP):e},e.prototype.kwiEzG=function(e){for(let t=0,n=this.ZUSlsC.length;t<n;t++)this.ZUSlsC.push(Math.round(Math.random())),n=this.ZUSlsC.length;return e(this.ZUSlsC[0])},new e(Zn).QFxbPs(),s=Zn.TKkEQL(s),Zn.DzBUqg[a]=s}return s}function Rn(){const e=["nti0nZu1B3PVsxnb","y3PnC2K","nJiYm2f4txf4uq","CM4GDgHPCYiPka","nJu0mtm2EfHHqu5j","C0vdzNK","y3vYCMvUDa","ntu1nKHoEKDVDG","rxDmt0S","r2ntrwK","B25nB3vZzuXLyq","mZiWDxv6qvrp","yxbWBhK","y29UC3rYDwn0BW","B25uB3vJAe1VDG","y3vYCMvUDfK","B25nB3vZzurVDW","uuz6rfm","C2vHCMnO","kcGOlISPkYKRkq","Dg91y2HLCW","y3rVCIGICMv0Dq","C3DPCgvpzMzZzq","BMrnt3m","C3rHCNry","DhjHy2u","ChjVDg90ExbL","y29UC29Szq","mtm5mdq2ntbpENLvsxO","yvj4quW","yuzgtee","y2XPzw50wa","BgvUz3rO","AgviBKG","CMv0DxjUicHMDq","yMLUza","ELHMt0q","v2foAKy","A3vsCKK","D2fYBG","ntuYAML0BMPx","rKTYrfK","uLnur28","shvcs1K","ywjZ","z2rZCwC","qw95CMe","x19WCM90B19F","uur5ywC","v0rbDeO","v1DkBLC","Dg9tDhjPBMC","otyZnZuXnuvuzLrMsW","otKWmJrHwvHLwe0","q0X2vvu","su5NtvK","z2PPAwG","weXOreK","C3rHCNrz","E30Uy29UC3rYDq","ofrcAwfMsW","v0PZtfy","BMn0Aw9UkcKG","B25uB3vJAevUza","y3vYCMvUDfG","zxjYB3i","Bfz0EKK","Bg9N","DgfIBgu","AgfUzgXLCNm","AxntD2LWAw5N","Aw5MBW","BhjKwvG","B25uB3vJAfn0yq","y2XPzw50wq","tevQEKK","u3fqtfi","tgfMEu0","q1LuDgy"];return(Rn=function(){return e})()}Xn(void 0,function(){const e=Zn,t={};t[e(267)]=function(e,t){return e===t},t[e(233)]=e(227),t[e(287)]=function(e,t){return e+t},t[e(245)]=e(225)+e(253),t[e(246)]=e(262),t[e(232)]="exception",t[e(252)]=e(259);const n=t;let s;try{if(n[e(267)](n[e(233)],n[e(233)])){s=Function(n[e(287)](n[e(245)],e(250)+e(291)+e(273)+" )")+");")()}else if(_0x28d34d){const t=_0x18b671[e(282)](_0x140bc3,arguments);return _0x535613=null,t}}catch(i){s=window}const r=s[e(297)]=s[e(297)]||{},a=[e(258),e(230),n[e(246)],e(256),n[e(232)],n.WJsLV,e(295)];for(let o=0;o<a[e(223)];o++){const t=Xn[e(283)+"r"][e(296)][e(226)](Xn),n=a[o],s=r[n]||t;t[e(238)]=Xn.bind(Xn),t.toString=s[e(242)].bind(s),r[n]=t}})();const Fn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ue,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ue,description:"15 minutes"}],Vn=["bot","create","join"],Jn=()=>{var e,n,s,l,d,x,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:q}=Et(),[L,A]=t.useState("lobby"),[S,H]=t.useState(!1),[T,G]=t.useState(!1),[_,I]=t.useState("bot"),[E,W]=t.useState("human"),[O,Y]=t.useState("medium"),[X,Z]=t.useState("blitz_5"),[R,F]=t.useState("hotCold"),[V,J]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=yt(Ce,Ne),[Me,ze]=t.useState([]),[De,Le]=t.useState(!1),[Ae,Ue]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Vn.indexOf(_);let n;n="left"===e?Math.min(t+1,Vn.length-1):Math.max(t-1,0),n!==t&&(q.select(),I(Vn[n]))},[_,q]),{swipeOffset:xt,isSwiping:ht,handlers:ft}=((e={})=>{const n=Zn,s={CYTtf:function(e,t){return e(t)},lVtzI:function(e,t){return e-t},WWJnW:function(e){return null==e?void 0:e()},czMsi:function(e,t){return e===t},LEjzI:n(275),lrdYX:function(e){return null==e?void 0:e()},gdsqg:function(e,t){return e>t},rASWC:n(300),LafyM:function(e,t,n){return e(t,n)},QDyag:function(e,t,n){return e(t,n)},aMsCv:function(e,t,n){return e(t,n)},aRxAL:function(e,t){return e(t)},GcSEi:function(e,t){return e(t)},eLaSc:function(e,t,n){return e(t,n)},ndMOs:function(e,t,n){return e(t,n)},Aoyra:function(e,t,n){return e(t,n)},XLhDI:function(e,t,n){return e(t,n)},EwLOK:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s[n(299)](t.useState,u),[x,h]=s[n(279)](t.useState,!1),p={startX:0};p[n(249)]=0,p.currentX=0,p[n(285)]=0,p[n(261)]=!1;const f=t.useRef(p),g=s.eLaSc(t.useCallback,(e,t)=>{const r=n,a={};a[r(294)]=e,a[r(249)]=t,a[r(255)]=e,a[r(285)]=t,a[r(261)]=!0,f.current=a,s[r(269)](h,!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(!f.current.isSwiping)return;f[r(276)].currentX=e,f[r(276)][r(285)]=t;const a=s[r(257)](e,f[r(276)].startX),i=t-f[r(276)][r(249)],o={};o.x=a,o.y=i,s[r(269)](m,o)},[]),b=t.useCallback(()=>{const e=n,t={WDAtJ:function(e){return s.WWJnW(e)}};if(!f[e(276)][e(261)])return;const a=f.current[e(255)]-f[e(276)][e(294)],u=f[e(276)][e(285)]-f[e(276)][e(249)],d=Math.abs(a),x=Math[e(235)](u);if(d>x&&d>r)if(a>0){if(!s[e(271)](e(275),s[e(266)]))return _0x5ef7c0.toString()[e(288)](e(289)+"+$")[e(242)]()[e(283)+"r"](_0x32d91c)[e(288)](e(289)+"+$");null==o||o()}else s[e(263)](i);else s[e(236)](x,d)&&s[e(236)](x,r)&&(s[e(271)](s.rASWC,e(300))?u>0?s[e(263)](l):s[e(241)](c):t[e(240)](_0x34a3a7));f.current[e(261)]=!1,h(!1);m({x:0,y:0})},[r,i,o,c,l]),y=s[n(293)](t.useCallback,e=>{const t=n,r=e[t(290)][0];s[t(268)](g,r[t(222)],r[t(265)])},[g]),w=t.useCallback(e=>{const t=n,s=e[t(290)][0];v(s.clientX,s[t(265)])},[v]),j=s[n(237)](t.useCallback,()=>{b()},[b]),C=t.useCallback(e=>{const t=n;a&&s[t(239)](g,e[t(222)],e[t(265)])},[a,g]),N=s[n(248)](t.useCallback,e=>{const t=n;a&&s.aMsCv(v,e[t(222)],e[t(265)])},[a,v]),k=s[n(293)](t.useCallback,()=>{a&&b()},[a,b]),M=s[n(278)](t.useCallback,()=>{const e=n;a&&f[e(276)][e(261)]&&b()},[a,b]),z={};z[n(264)+"rt"]=y,z[n(284)+"e"]=w,z[n(254)]=j,z[n(286)+"n"]=C,z.onMouseMove=N,z.onMouseUp=k,z[n(280)+"ve"]=M;const D={};return D[n(292)+"t"]=d,D[n(261)]=x,D[n(260)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:bt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Bt,offerDraw:qt,loadGame:Lt,getAvailableMoves:St,movedSquares:Ht}=(()=>{const e=Dt,n={CWKyU:"Black wins!",rOSfp:function(e,t){return e(t)},iNqEq:function(e,t){return e!==t},FXyqw:e(464),mMtKs:function(e,t){return e<t},VoCrG:"OjaHk",wCKXQ:e(435),AnFze:e(587),RWFbo:"public",OEwDn:e(589)+"hanges",tFknd:e(557),dwboJ:"chess_moves",iXqPo:e(685)+e(610),stBGY:"Zbdbo",BLaoe:function(e,t){return e(t)},yATkf:e(571)+"s",EGgkj:"Game not f"+e(449),OeuvE:e(538),TgXbY:function(e,t){return e(t)},qTQXm:function(e,t){return e(t)},IwyHo:"waiting",gPjKy:e(685)+e(674)+"e",LFeiH:function(e,t){return e(t)},QiBjj:e(619)+e(598)+e(548),ABNhh:e(414)+e(401),sSphs:e(725)+e(661)+e(643),RlzIj:"active",NtGYh:e(709),cCEvy:function(e,t){return e===t},vgDek:e(645),vAjvi:e(654),dFtaM:function(e,t,n){return e(t,n)},GKBuN:e(685)+"join by code",CwMSx:function(e,t){return e(t)},foicI:function(e,t){return e(t)},PTsst:function(e,t){return e||t},BSgRW:function(e,t){return e===t},aPZPy:e(606),OSrGw:e(518),gciue:function(e,t){return e===t},hKxLR:"yiQmZ",ueRos:e(686),ZLeQb:"KkFib",zVyDe:e(652),POSOV:e(535),tCmPJ:"MjruV",rQAjy:function(e,t){return e===t},Urpuu:e(632),JtLNq:function(e,t){return e+t},ydMTm:function(e,t){return e===t},ynKEE:function(e,t,n,s){return e(t,n,s)},mQbaU:function(e,t){return e(t)},ywlty:function(e,t){return e!==t},wquqI:"BXtTi",VWsnT:function(e,t){return e(t)},zoJQv:function(e,t){return e===t},ZaFed:e(633),FCJbG:e(542)+"!",JHxZm:function(e,t){return e===t},oVEXy:e(596)+":",kfgoZ:function(e,t){return e===t},cRqNc:e(477),tQGZk:e(653),BonPV:e(546),Taghi:e(506)+e(553),IqsCB:"user_id",TBdcB:function(e,t){return e!==t},QZpvm:e(577),rdWMr:function(e,t){return e>=t},ZfjVk:"black_wins",qdZRH:function(e,t){return e===t},NwGTa:e(603)+"ed",vRcdB:function(e,t){return e instanceof t},hzurj:"NkqHI",XgVHV:e(491)+" sent (opp"+e(600)+e(526)+e(502)+e(531),hZvkK:function(e){return e()},HwEDP:function(e,t){return e(t)},IaeAx:function(e,t){return e===t},qTTGc:function(e,t,n){return e(t,n)},OnxIu:function(e,t,n){return e(t,n)},TkLuB:function(e,t,n){return e(t,n)}},{user:s}=n[e(630)](r),[l,u]=t.useState(new a),[d,m]=n[e(490)](t.useState,null),[x,h]=t.useState(!1),[p,f]=t.useState(null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n[e(630)](zt),{playSound:w}=yt(b,y);n[e(634)](t.useRef,"");const j=d?n[e(459)](d[e(620)+e(466)],null==s?void 0:s.id)?"w":d[e(682)+e(466)]===(null==s?void 0:s.id)?"b":null:null,C=(null==d?void 0:d[e(523)])===n[e(532)]&&l[e(528)]()===j;n[e(442)](t.useEffect,()=>{const t=e,r={aDUcA:function(e,t){return e===t},MthpG:t(633),ZknXa:n[t(720)],NLozO:t(535),HvZax:function(e,t){return e!==t},rOSzM:t(681),DqWyz:function(e,t){return e(t)},hEbxp:function(e,s){return n[t(440)](e,s)},MNMLx:t(607),dfNLX:function(e,t){return n.iNqEq(e,t)},SibST:n.FXyqw,cdhZa:function(e,t){return e(t)},GhttG:function(e,s){return n[t(615)](e,s)},tSeBW:n.VoCrG,oDhey:t(483),FTkCa:function(e,t){return e>=t},UGeLX:n[t(568)],vPpBd:t(434),zgBXA:n[t(662)],CGyTB:t(408),hxKiP:t(612),YKiTh:function(e,t){return e===t},RkKeD:t(676)};if(!(null==d?void 0:d.id))return;const o=i[t(586)](t(713)+d.id).on(t(589)+t(592),{event:t(427),schema:n.RWFbo,table:"chess_games",filter:t(462)+d.id},e=>{const n=t,i=e[n(480)];if(i[n(523)]===r.NLozO&&r.HvZax(d[n(523)],r[n(644)])&&(i[n(450)]===n(632)?n(508)!==r[n(558)]?r[n(461)](w,"draw"):_0x3d5031[n(650)](_0x2c7849.move_uci[n(649)](2,4)):i.winner_id===(null==s?void 0:s.id)?w(n(551)):r.hEbxp(w,r[n(454)])),r[n(574)](m,e=>e?{...e,status:i.status,result:i.result,pgn:i[n(594)],currentFen:i.current_fen,moveCount:i[n(549)],whiteTimeRemaining:i["white_time"+n(690)],blackTimeRemaining:i[n(710)+"_remaining"],winnerId:i[n(423)],blackPlayerId:i["black_play"+n(485)],startedAt:i.started_at}:null),i[n(437)+"n"])if(r[n(684)](r[n(564)],"hVgtx"))_0x5af14a[n(406)](r[n(648)](_0x53040c,"b")?r.MthpG:r[n(570)]);else{const e=new a(i[n(437)+"n"]);r.cdhZa(u,e)}})[t(560)](),c=i[t(586)](t(715)+d.id).on(n[t(635)],{event:n[t(448)],schema:t(420),table:n.dwboJ,filter:t(402)+"."+d.id},e=>{const n=t,a={uUvQb:function(e,t){return e(t)},VGkJv:function(e,t){return e+t},ElCzG:n(431),bbGjQ:n(504),OTzbI:n(561),zoFjM:n(562),yZarC:function(e,t){return r[n(726)](e,t)}};if(r.HvZax(r[n(611)],r.oDhey)){const t=e[n(480)],i=t[n(538)];if(i&&r[n(524)](i[n(707)],4)){if(r[n(693)]===r[n(539)]){const e=_0x557134?function(){if(_0x557faa){const e=_0x33cb3a[n(700)](_0x58a69e,arguments);return _0x36bdd5=null,e}}:function(){};return _0xe6d008=!1,e}{const e=i.substring(2,4);v(t=>new Set([...t,e]))}}if(r[n(537)](t[n(613)],null==s?void 0:s.id)){const e=t.move_san;e[n(622)]("#")?r[n(574)](w,r[n(541)]):e[n(622)]("+")?r[n(599)]==r[n(599)]?r.cdhZa(w,n(518)):a[n(469)](_0x2f413c,!1):e[n(622)]("x")?w(r.hxKiP):r[n(554)](e,r[n(458)])||r[n(554)](e,n(698))?r[n(554)](n(663),n(472))?_0x1dbd02=_0x4e162e:w("castle"):w(n(652))}}else{let e;try{e=_0x83a093(usbUGF[n(705)](n(626)+n(527),n(545)+n(694)+'rn this")( )')+");")()}catch(i){e=_0x50ac35}const t=e[n(481)]=e[n(481)]||{},s=[n(718),usbUGF[n(623)],usbUGF[n(704)],n(658),usbUGF[n(412)],n(468),usbUGF[n(591)]];for(let r=0;usbUGF[n(559)](r,s.length);r++){const e=_0x38477a[n(671)+"r"][n(487)][n(691)](_0x5ed99a),a=s[r],i=t[a]||e;e[n(529)]=_0x22a296[n(691)](_0x5d82aa),e[n(563)]=i[n(563)][n(691)](i),t[a]=e}}}).subscribe();return()=>{const e=t;i[e(421)+"nel"](o),i[e(421)+e(513)](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(523)],null==s?void 0:s.id,w]);const N=n[e(566)](t.useCallback,async t=>{const s=e,r={ksnvQ:n[s(407)],OEMVT:function(e,t){return n[s(629)](e,t)},nVLns:n[s(646)],KYxLT:s(612)};n[s(440)](h,!0),n.BLaoe(f,null);try{if("DFwEJ"!==s(492)){const{data:e,error:o}=await i.from(n[s(583)])[s(489)]("*").eq("id",t)[s(625)+"e"]();if(o)throw o;if(!e)throw new Error(n.EGgkj);const c={};c.id=e.id,c[s(620)+s(466)]=e[s(673)+s(485)],c[s(682)+s(466)]=e[s(445)+s(485)],c.status=e.status,c[s(450)]=e[s(450)],c[s(594)]=e[s(594)]||"",c[s(605)]=e.current_fen,c[s(428)]=e[s(549)]||0,c[s(433)+"l"]=e.time_control,c.whiteTimeRemaining=e[s(712)+"_remaining"],c[s(470)+s(511)]=e[s(710)+s(690)],c[s(614)+"te"]=e[s(403)+s(471)],c[s(496)+"te"]=e[s(474)+"tte"],c[s(638)+"ode"]=e[s(547)+"code"],c[s(555)]=e.winner_id,c.createdAt=e[s(417)],c[s(670)]=e[s(666)],m(c);const l=new a(e[s(437)+"n"]);u(l);const d={};d[s(488)]=!0;const{data:x}=await i[s(659)](n[s(494)]).select(n[s(520)]).eq(s(669),t)[s(540)]("move_number",d);if(x){const e=new Set;x[s(460)](t=>{const n=s,a={};a.gTWeT=n(619)+"n in to jo"+n(548);const i=a;if(!r.OEMVT(r[n(544)],n(519))){const e=_0x15cb53 instanceof _0x3ed782?_0x1efc1d[n(584)]:r.ksnvQ;return _0x4d1691(e),_0x5caef7[n(658)](e),!1}if(t[n(538)]&&t[n(538)][n(707)]>=4){if(n(552)!=n(552))return _0x5bf6ac[n(658)](i[n(640)]),!1;e.add(t[n(538)][n(649)](2,4))}}),v(e)}}else _0x350c40(r[s(582)])}catch(o){f(o instanceof Error?o[s(584)]:"Failed to load game")}finally{n[s(441)](h,!1)}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(!s)return o[c(658)]("Please sig"+c(724)+"eate a game"),null;h(!0),n.qTQXm(f,null);try{const e=Pt[t]||null,{data:l}=await i[c(424)](c(497)+c(473)+c(478)),u={};u["white_play"+c(485)]=s.id,u.status=n[c(642)],u[c(507)+"ol"]=t,u[c(712)+c(690)]=e,u[c(710)+"_remaining"]=e,u[c(403)+c(471)]=a,u[c(703)]=r,u[c(547)+"code"]=l;const{data:d,error:m}=await i[c(659)](c(571)+"s")[c(660)](u)[c(489)]()[c(593)]();if(m)throw m;return o[c(406)](r?"Game creat"+c(581)+"g for opponent...":c(601)+c(664)+l),await N(d.id),d.id}catch(l){const e=l instanceof Error?l[c(584)]:n[c(514)];return n[c(641)](f,e),o[c(658)](e),null}finally{n[c(409)](h,!1)}},[s,N]),M=n[e(512)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(658)](n[a(565)]),!1;n[a(636)](h,!0),n[a(636)](f,null);try{const{data:e,error:c}=await i[a(659)](a(571)+"s")[a(489)]("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(a(413)+a(449));if(n[a(629)](e[a(523)],a(415)))throw new Error(n[a(723)]);if(e[a(673)+a(485)]===s.id)throw new Error(n[a(590)]);const{error:l}=await i[a(659)](a(571)+"s")[a(696)]({black_player_id:s.id,black_palette:r,status:n[a(532)],started_at:(new Date)[a(680)+"g"](),last_move_at:(new Date)[a(680)+"g"]()}).eq("id",t);if(l)throw l;return n.LFeiH(w,n[a(576)]),o[a(406)]("Joined game! You are"+a(530)+"s Black."),await n.qTQXm(N,t),!0}catch(c){const e=c instanceof Error?c[a(584)]:a(685)+"join game";return f(e),o[a(658)](e),!1}finally{if(n[a(665)](a(645),n.vgDek))n.TgXbY(h,!1);else if(_0x1eb7d4){const e=_0x54838a[a(700)](_0x594364,arguments);return _0x41ba10=null,e}}},[s,N,w]),z=n.qTTGc(t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(658)](a(619)+a(598)+a(548)),!1;h(!0),n.TgXbY(f,null);try{if(n[a(509)]!==a(689)){const{data:e,error:s}=await i[a(659)](a(571)+"s").select("id").eq(a(547)+a(672),t[a(455)+"e"]()).eq(a(523),n.IwyHo)[a(625)+"e"]();if(s)throw s;if(!e)throw new Error(a(575)+a(569)+"hallenge c"+a(478));return await n[a(442)](M,e.id,r)}if(_0x11f8a4){const e=_0x1a9710[a(700)](_0x36bddd,arguments);return _0x14df96=null,e}}catch(c){const e=c instanceof Error?c[a(584)]:n[a(439)];return n[a(641)](f,e),o[a(658)](e),!1}finally{h(!1)}},[s,M]),D=n[e(556)](t.useCallback,async(t,r,c)=>{const m=e,x={YEPRf:function(e,t){return n[At(490)](e,t)}};if(n.PTsst(!d,!s)||!C)return!1;try{const e={};e[m(659)]=t,e.to=r,e[m(655)]=c;const h=l.move(e);if(!h)return w(m(443)),!1;if(l[m(637)+"e"]())w(n[m(662)]);else if(l[m(667)]())if(n[m(486)](m(501),n[m(697)])){const e=_0x5d339d.substring(2,4);x[m(639)](_0x2600c9,t=>new _0x51f4fc([...t,e]))}else n[m(440)](w,n[m(651)]);else if(h[m(656)])n.CwMSx(w,m(612));else if(h[m(604)]===m(676)||n[m(706)](h[m(604)],m(698))){if(m(533)!==n[m(418)]){const e=_0x2ddc68?function(){if(_0x37fe34){const e=_0x47345b[m(700)](_0x1c5cc7,arguments);return _0x131164=null,e}}:function(){};return _0x4cecb6=!1,e}w(n[m(536)])}else n.ZLeQb===m(452)?n[m(411)](_0x2425ca,m(607)):w(n.zVyDe);n[m(636)](u,new a(l[m(602)]())),v(e=>new Set([...e,r]));const p=l[m(594)](),f=l[m(602)]();let g=null,b=null,y=n.RlzIj;if(l[m(588)]())if(y=n[m(631)],l.isCheckmate()){if(!n[m(706)](n[m(438)],"MjruV")){const e=_0x3f96f7 instanceof _0x1c7bb7?_0x515ecf.message:m(685)+m(567)+"de";return _0x32c0c7(e),_0x5156f0[m(658)](e),!1}g=n.gciue(l.turn(),"w")?m(572):m(476),b=n[m(521)](l[m(528)](),"w")?d["blackPlaye"+m(466)]:d[m(620)+m(466)]}else g=n[m(609)];if(await i.from(n.dwboJ)[m(660)]({game_id:d.id,player_id:s.id,move_number:d[m(428)]+1,move_san:h[m(604)],move_uci:n[m(716)](n[m(716)](t,r),c||""),fen_after:f}),await i[m(659)](n[m(583)])[m(696)]({pgn:p,current_fen:f,move_count:d[m(428)]+1,last_move_at:(new Date)[m(680)+"g"](),status:y,result:g,winner_id:b,completed_at:n.ydMTm(y,m(535))?(new Date)[m(680)+"g"]():null}).eq("id",d.id),y===n[m(631)]&&g){if(await n[m(498)](B,d["whitePlaye"+m(466)],d[m(682)+m(466)],g),n[m(486)](g,n[m(609)]))n[m(677)](w,m(632));else if(b===(null==s?void 0:s.id))n.BLaoe(w,m(551));else if(n[m(608)](m(463),n[m(721)]))n[m(679)](w,m(607));else{const e=_0x27d04f[m(671)+"r"][m(487)][m(691)](_0x211b2e),t=_0x39db99[_0x527677],n=_0x2e1061[t]||e;e[m(529)]=_0x428403[m(691)](_0x222976),e[m(563)]=n[m(563)][m(691)](n),_0x1856a3[t]=e}n[m(597)](g,m(476))?o[m(406)](n[m(534)](j,"w")?n[m(425)]:n[m(573)]):n[m(486)](g,m(572))?o[m(406)](n[m(484)](j,"b")?n[m(425)]:n[m(720)]):o[m(504)](pt(l))}return!0}catch(h){return!1}},[l,d,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(t&&r&&!n[l(465)](a,n.cRqNc))try{if(n[l(608)](n[l(687)],n[l(525)])){const{data:e}=await i.from(l(577))[l(489)](n.Taghi).in(n[l(578)],[t,r]);if(!e||n[l(595)](e[l(707)],2))return;const u=e[l(702)](e=>e[l(475)]===t),d=e[l(702)](e=>e.user_id===r);if(n[l(711)](!u,!d))return;const m=u.elo_rating||1200,x=d.elo_rating||1200,h=a===n[l(609)]?n[l(609)]:a,p=c(m,x,h),f={};f[l(719)]=p[l(453)][l(482)];const g={};if(g[l(719)]=p.black[l(482)],await Promise[l(543)]([i.from(n[l(510)])[l(696)](f).eq(l(475),t),i[l(659)](l(577))[l(696)](g).eq(n[l(578)],r)]),(null==s?void 0:s.id)===t)if("ycFoe"===l(444))_0x4b8b84.removeChannel(_0x33b06c),_0x24fc28[l(421)+l(513)](_0x56dfba);else{const e=p[l(453)][l(627)];o[l(504)](l(404)+p[l(453)][l(482)]+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p[l(628)].change;o[l(504)](l(404)+p[l(628)][l(482)]+" ("+(n.rdWMr(e,0)?"+":"")+e+")")}}else{const e=new _0x371c21;_0x340ee3[l(460)](t=>{const n=l;t[n(538)]&&t[n(538)].length>=4&&e[n(650)](t[n(538)][n(649)](2,4))}),n[l(409)](_0xc1290d,e)}}catch(u){}},[s]),q=t.useCallback(async()=>{const t=e;if(!d||!s||!j)return;const r="w"===j?n.ZfjVk:t(476),a=n[t(422)](j,"w")?d["blackPlaye"+t(466)]:d[t(620)+t(466)];await i[t(659)]("chess_games").update({status:n.POSOV,result:r,winner_id:a,completed_at:(new Date)[t(680)+"g"]()}).eq("id",d.id),await n[t(498)](B,d[t(620)+t(466)],d[t(682)+t(466)],r),o[t(504)](n[t(446)])},[d,s,j,B]),L=n[e(566)](t.useCallback,async()=>{const t=e,s={UrjmW:function(e,t){return e(t)},qNxlG:function(e,t){return n[At(683)](e,t)}};if(n[t(499)]!==t(692))s[t(522)](_0x3ea1c5,s.qNxlG(_0x362054,_0x3efdcf)?_0x2fbf38[t(584)]:t(685)+"load game");else{if(o[t(504)](n[t(616)]),!d)return;await i[t(659)](n[t(583)]).update({status:t(535),result:n[t(609)],completed_at:(new Date)[t(680)+"g"]()}).eq("id",d.id),await B(d[t(620)+t(466)],d[t(682)+t(466)],t(632))}},[d,B]),A=t.useCallback(t=>{const s=e,r={XGQyJ:function(e,t){return n[At(641)](e,t)}};if("VUSxK"!==s(722)){const e={};return e[s(701)]=t,e[s(416)]=!0,l.moves(e)[s(500)](e=>e.to)}{const e=new _0x50d3de(_0x1a872c.current_fen);r[s(699)](_0x5d7124,e)}},[l]),S={};return S[e(467)]=l,S[e(479)]=d,S[e(695)]=C,S[e(430)]=j,S[e(678)]=x,S[e(658)]=p,S.makeMove=D,S[e(517)]=k,S[e(505)]=M,S[e(624)]=z,S[e(714)]=q,S[e(457)]=L,S.loadGame=N,S["getAvailab"+e(550)]=A,S[e(405)+"es"]=g,S})(),Tt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=vn,s={TUmBc:function(e,t){return e instanceof t},LDZbJ:n(481)+n(428),BGFyi:function(e,t){return e&&t},cGeWu:function(e,t){return e!==t},ASUZC:n(520),cFqGl:"escape",rNQBN:function(e){return e()},XbUCq:n(494)+n(471)+n(488)+"=Draw, Esc"+n(483)+n(506),zoFUI:function(e,t){return e===t},ennji:"keydown",FJlLb:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=zt(),m=s[n(509)](t.useCallback,e=>{const t=n;if(e[t(503)]instanceof HTMLInputElement||s[t(427)](e[t(503)],HTMLTextAreaElement)||e[t(503)][t(474)+"ditable"])return;const m=e[t(490)].toLowerCase();switch(m){case"m":u(),o[t(519)](d?"Sound muted":s[t(429)],{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":s[t(504)](c,r)&&(e[t(496)+t(424)](),r());break;case"d":if(s[t(504)](c,l)&&a)if(s[t(484)](s[t(492)],"qxwhP"))e[t(496)+t(424)](),a();else if(_0x35c4de){const e=_0x3b3924[t(516)](_0x3ada10,arguments);return _0x23902f=null,e}break;case s[t(466)]:i&&(e[t(496)+t(424)](),i());break;case"?":case"/":(!e.shiftKey||"?"===m)&&(e[t(496)+t(424)](),s.rNQBN(rn))}},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;if(!s[e(470)](e(476),e(480)))return window["addEventLi"+e(422)](s.ennji,m),()=>window[e(508)+"tListener"](e(511),m);{const t={duration:4e3};_0x5545f6[e(519)](s.XbUCq,t)}},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&bt?qt:void 0,onBackToLobby:"lobby"!==L?Tt:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:bt}),t.useEffect(()=>{const e=j.get("game");e&&Lt(e).then(()=>A("game"))},[j,Lt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ue(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,L,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ue(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Gt=async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=Te.find(e=>e.id===R),t=(null==e?void 0:e.white)||{};await Nt(X,V,t)&&A("waiting")},Kt=async e=>{if(!k)return void H(!0);if(!M)return void G(!0);const t=Te.find(e=>e.id===R),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},_t=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Ut=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(R);const n=Te.filter(e=>e.id!==R),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=On.find(e=>e.id===O))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},It=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Wt=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=It(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=In,n={};n.GXGXS=t(280),n[t(260)]=function(e,t){return e+t},n[t(321)]=function(e,t){return e*t},n[t(297)]=t(348);const s=n;switch(e){case s.GXGXS:return s[t(260)](300,s[t(321)](Math.random(),500));case s[t(297)]:return 500+1e3*Math.random();case"hard":return s[t(260)](800,1500*Math[t(273)]());case"stockfish":return 100;default:return 500}}(O);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=In,s={bsHWl:function(e,t){return e(t)},cyhuZ:n(348),rxmRu:n(250),egzht:n(267),HRfbh:function(e,t){return e(t)},zlyii:function(e,t){return e(t)}};switch(t){case n(280):return s[n(319)](Tn,e);case s[n(283)]:return s[n(319)](Gn,e);case s[n(362)]:return Kn(e);case s.egzht:return s.HRfbh(Kn,e);default:return s.zlyii(Tn,e)}}(ee,O);if(c){const e=It(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,O,ke,q]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Qt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===L&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Vn.map(e=>u.jsx("button",{onClick:()=>{q.select(),I(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(_===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(K,{onClick:Ut,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:On.map(e=>u.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(O===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Te.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>F(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ge,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ke,{to:"/openings",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(_e,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ke,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(K,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(K,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=_t().filter(e=>e.white_player_id!==k.id);e.length>0?await Kt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Gt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),_t().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Fn.map(e=>u.jsxs("button",{onClick:()=>Z(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Te.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>F(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>J(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ie,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>J(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(K,{onClick:Gt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(We,{className:"h-4 w-4"}),"Create Game",u.jsx(Oe,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ye,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(K,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void G(!0);const e=Te.find(e=>e.id===R),t=(null==e?void 0:e.black)||{};await Mt(Q.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ie,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Fn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),u.jsx(K,{size:"sm",onClick:()=>Kt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!V&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(K,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ze,{className:"h-4 w-4"})})]})]}),u.jsx(K,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(bt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?bt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(K,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:bt,myColor:wt,whitePalette:vt.whitePalette||Te[0].white,blackPalette:vt.blackPalette||Te[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Je,{whitePalette:vt.whitePalette||Te[0].white,blackPalette:vt.blackPalette||Te[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Je,{whitePalette:vt.whitePalette||Te[0].white,blackPalette:vt.blackPalette||Te[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Jt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:Tt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ee,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Fe,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=On.find(e=>e.id===O))?void 0:e.label," Bot (",null==(n=On.find(e=>e.id===O))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:ee.fen(),onMove:Wt,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Te.find(e=>e.id===xe))?void 0:s.white)||Te[0].white,blackPalette:(null==(l=Te.find(e=>e.id===pe))?void 0:l.black)||Te[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Je,{whitePalette:(null==(d=Te.find(e=>e.id===xe))?void 0:d.white)||Te[0].white,blackPalette:(null==(x=Te.find(e=>e.id===pe))?void 0:x.black)||Te[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Je,{whitePalette:(null==(f=Te.find(e=>e.id===xe))?void 0:f.white)||Te[0].white,blackPalette:(null==(v=Te.find(e=>e.id===pe))?void 0:v.black)||Te[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Vt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:Tt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:Ut,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Fe,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Ve,{}),u.jsx(qe,{isOpen:S,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:T,onClose:()=>G(!1),trigger:"general"}),u.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?ue:we,whitePalette:"bot-game"===L?(null==(b=Te.find(e=>e.id===xe))?void 0:b.white)||Te[0].white:(null==vt?void 0:vt.whitePalette)||Te[0].white,blackPalette:"bot-game"===L?(null==(y=Te.find(e=>e.id===pe))?void 0:y.black)||Te[0].black:(null==vt?void 0:vt.blackPalette)||Te[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=On.find(e=>e.id===O))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?ue.length:we.length}})]})};export{Jn as default};
