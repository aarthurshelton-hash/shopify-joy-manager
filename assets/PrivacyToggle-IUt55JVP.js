const n="/**\n * Privacy Toggle Component\n * \n * Allows users to toggle their visions between public and private.\n * Private visions are only visible to the owner and admins.\n */\n\nimport React, { useState } from 'react';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport { Globe, Lock, Loader2 } from 'lucide-react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { toast } from 'sonner';\n\ninterface PrivacyToggleProps {\n  visualizationId: string;\n  isPrivate: boolean;\n  onToggle?: (isPrivate: boolean) => void;\n  disabled?: boolean;\n  compact?: boolean;\n}\n\nconst PrivacyToggle: React.FC<PrivacyToggleProps> = ({\n  visualizationId,\n  isPrivate,\n  onToggle,\n  disabled = false,\n  compact = false,\n}) => {\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [currentPrivacy, setCurrentPrivacy] = useState(isPrivate);\n\n  const handleToggle = async (newValue: boolean) => {\n    setIsUpdating(true);\n    \n    try {\n      const { error } = await supabase\n        .from('saved_visualizations')\n        .update({ is_private: newValue })\n        .eq('id', visualizationId);\n      \n      if (error) throw error;\n      \n      setCurrentPrivacy(newValue);\n      onToggle?.(newValue);\n      \n      toast.success(newValue ? 'Vision is now private' : 'Vision is now public', {\n        description: newValue \n          ? 'Only you can see this vision' \n          : 'Others can now browse this vision',\n      });\n    } catch (error) {\n      console.error('Failed to update privacy:', error);\n      toast.error('Failed to update privacy setting');\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (compact) {\n    return (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <button\n              onClick={() => !disabled && !isUpdating && handleToggle(!currentPrivacy)}\n              disabled={disabled || isUpdating}\n              className={`\n                inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs\n                transition-colors\n                ${currentPrivacy \n                  ? 'bg-muted text-muted-foreground' \n                  : 'bg-primary/10 text-primary'\n                }\n                ${disabled || isUpdating ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:opacity-80'}\n              `}\n            >\n              {isUpdating ? (\n                <Loader2 className=\"h-3 w-3 animate-spin\" />\n              ) : currentPrivacy ? (\n                <Lock className=\"h-3 w-3\" />\n              ) : (\n                <Globe className=\"h-3 w-3\" />\n              )}\n              {currentPrivacy ? 'Private' : 'Public'}\n            </button>\n          </TooltipTrigger>\n          <TooltipContent>\n            {currentPrivacy \n              ? 'Only you can see this vision. Click to make public.' \n              : 'Anyone can browse this vision. Click to make private.'}\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    );\n  }\n\n  return (\n    <div className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/30 border border-border/50\">\n      <div className=\"flex-1 space-y-0.5\">\n        <Label className=\"text-sm font-medium flex items-center gap-2\">\n          {currentPrivacy ? (\n            <>\n              <Lock className=\"h-4 w-4 text-muted-foreground\" />\n              Private Vision\n            </>\n          ) : (\n            <>\n              <Globe className=\"h-4 w-4 text-primary\" />\n              Public Vision\n            </>\n          )}\n        </Label>\n        <p className=\"text-xs text-muted-foreground\">\n          {currentPrivacy \n            ? 'Only you and admins can view this vision' \n            : 'Others can browse and make offers on this vision'}\n        </p>\n      </div>\n      <Switch\n        checked={!currentPrivacy}\n        onCheckedChange={(checked) => handleToggle(!checked)}\n        disabled={disabled || isUpdating}\n      />\n      {isUpdating && <Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />}\n    </div>\n  );\n};\n\nexport default PrivacyToggle;\n";export{n as default};
