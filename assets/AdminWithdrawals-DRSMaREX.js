import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as l,B as o,A as d,cb as u,cR as x,a8 as m,D as h,aB as p,aC as f,aD as w,aE as j,p as v,t as g,w as y,dy as C,dt as N,bo as b,dq as q,cZ as D,a1 as z,a2 as B,a3 as L,a4 as M,a5 as _,aW as W,bC as A,dz as H,b as I,y as K}from"./index-DEc03Eh1.js";import{C as k}from"./calendar-By9lXD7j.js";!function(){const e=Y,t=P();for(;;)try{if(486016===parseInt(e(424))/1*(parseInt(e(460))/2)+-parseInt(e(367))/3*(-parseInt(e(372))/4)+parseInt(e(456))/5+-parseInt(e(477))/6+parseInt(e(480))/7*(parseInt(e(400))/8)+parseInt(e(483))/9+parseInt(e(470))/10*(-parseInt(e(397))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const U=function(){const e={SyMTD:function(e,t){return e===t}},t=e;let s=!0;return function(e,n){const r=Y;if(!t.SyMTD(r(472),r(463))){const t=s?function(){if(n){const t=n[r(471)](e,arguments);return n=null,t}}:function(){};return s=!1,t}_0x308ad0=_0x360a5d}}()(void 0,function(){const e=Y,t={};t[e(438)]=e(378)+"+$";const s=t;return U[e(364)]()[e(432)](s[e(438)])[e(364)]()[e(461)+"r"](U)[e(432)](s[e(438)])});U();const S=function(){const e=Y,t={};t[e(462)]=function(e,t){return e!==t},t[e(466)]="OEMPq";const s=t;let n=!0;return function(t,r){const a=e,c={ZGeFo:function(e,t){return s[Y(462)](e,t)},okrLQ:s[a(466)]},i=n?function(){const e=a;if(c[e(458)](c[e(412)],e(484))){const t={};return t[e(370)]=!1,t[e(441)]=_0xdccb8d,t}if(r){const s=r[e(471)](t,arguments);return r=null,s}}:function(){};return n=!1,i}}();function Y(e,t){e-=364;const s=P();let n=s[e];if(void 0===Y.cNhWBL){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Y.nXxsRF=r,Y.hhHtdW={},Y.cNhWBL=!0}const a=e+s[0],c=Y.hhHtdW[a];if(c)n=c;else{const e=function(e){this.BhwDFA=e,this.jkwarx=[1,0,0],this.YLBYVY=function(){return"newState"},this.cmBhuz="\\w+ *\\(\\) *{\\w+ *",this.uNxNzm="['|\"].+['|\"];? *}"};e.prototype.ktIvaS=function(){const e=new RegExp(this.cmBhuz+this.uNxNzm).test(this.YLBYVY.toString())?--this.jkwarx[1]:--this.jkwarx[0];return this.uZQtml(e)},e.prototype.uZQtml=function(e){return Boolean(~e)?this.IPReQQ(this.BhwDFA):e},e.prototype.IPReQQ=function(e){for(let t=0,s=this.jkwarx.length;t<s;t++)this.jkwarx.push(Math.round(Math.random())),s=this.jkwarx.length;return e(this.jkwarx[0])},new e(Y).ktIvaS(),n=Y.nXxsRF(n),Y.hhHtdW[a]=n}return n}async function G(t){const s=Y,n={};n[s(481)]=s(434),n[s(459)]="profiles",n[s(376)]=s(374);const r=n;try{const n={};n[s(379)]=!1;let a=e[s(442)](s(454)+s(485))[s(394)]("*")[s(450)]("created_at",n);t&&t!==r[s(481)]&&(a=a.eq("status",t));const{data:c,error:i}=await a;if(i)throw i;const l=[...new Set((c||[])[s(435)](e=>e[s(374)]))],{data:o}=await e[s(442)](r[s(459)])[s(394)](s(474)+s(464)+"e").in(r.MGgYQ,l),{data:d}=await e[s(442)]("user_wallets")[s(394)](s(396)+"otal_earne"+s(386)+s(417)+s(398)).in(r.MGgYQ,l),u=new Map((null==o?void 0:o[s(435)](e=>[e[s(374)],e]))||[]),x=new Map((null==d?void 0:d.map(e=>[e[s(374)],e]))||[]),m=(c||[]).map(e=>{var t,n,r;return{...e,payout_details:e[s(410)+s(479)],user_display_name:(null==(t=u[s(489)](e[s(374)]))?void 0:t[s(445)+"me"])||"Unknown User",wallet_total_earned:(null==(n=x[s(489)](e[s(374)]))?void 0:n.total_earned_cents)||0,wallet_total_withdrawn:(null==(r=x[s(489)](e[s(374)]))?void 0:r[s(487)+s(406)+"s"])||0}}),h={};return h[s(448)]=m,h.error=null,h}catch(a){const e={};return e[s(448)]=[],e[s(441)]=a,e}}function P(){const e=["EwjvuLe","mNP5vwjezq","y29UC3rYDwn0BW","DxrjqxO","uuzNreq","AxnWBgf5x25HBq","CgvUzgLUz19JBW","CLv1yMG","B3vUDa","t2rjCg8","Aw52B2TL","mZy0mgfJvhnVtq","yxbWBhK","s0feC1G","BwXcA2m","DxnLCL9PzcWGza","AxzSyMO","C2LUCgq","mZC4nJq4AMndq0Hg","sgHRAKi","ywLSCW","nJmXnJCZELf0s25x","qwDOzg8","CMvQzwn0zwrFyW","odeZmJa3nLDjDwnqta","t0vnuhe","x3jLCxvLC3rZ","CMv0DxjUicHMDq","Dg90ywXFD2L0Aa","CMvHC29UigLZia","z2v0","Dg9tDhjPBMC","Bg9N","Dw50","nteYn25pCMrpqG","Aw5MBW","ExblqM8","C3vJy2vZCW","CMvQzwn0zwq","mtq0nhHgt0rXqG","Cfb1uKq","DxnLCL9Pza","DhvZ","tuDNwve","B3vUDf9Jzw50CW","kcGOlISPkYKRkq","yxnJzw5KAw5N","cI0TlqO","vNnLzLG","yxrLigvYCM9YoG","yMLUza","DgHKCMf3ywW","C3rHDhvZ","zf9Jzw50CYWGDa","ChjVDg90ExbL","ChjVDMvKihn0yq","u2jNwu0","yM9KEq","yxv0Aa","Cxzezve","y29UC29Szq","C2vSzwn0","CMvXDwLYzwq","DxnLCL9PzcWGDa","ode2mZfQvwT0yKO","CMf3BL9Jzw50CW","BenKCNe","mJrjy2TXAhy","yw1VDw50x2nLBG","yxbWCM92zwrFyW","ELzcs3C","y29TCgXLDgvKxW","x19WCM90B19F","zhjHD25Fy2vUDa","BMrYCfq","E30Uy29UC3rYDq","v2fSBgv0ihvWza","Cgf5B3v0x2rLDa","Bw91BNq","B2TYtfe","uMvXDwvZDcbUBW","Dg9ju09tDhjPBG","Dg90ywW","EeXkD04","B3rHBf93AxrOza","DgXvDKO","DfDzuKC","D09Wrvu","sNH4ywG","DhjHy2u","DgLJyxrLza","nJC2mdi2D1H5zfLn","EKDnrui","C3rHDhvZlcbHBq","yxbWCM92zwq","tM90igf1DgHLBG","yxbWCM92zwrFyq","DMHMswK","CgvUzgLUz19HBq","C2vHCMnO","DgfIBgu","ywXS","BwfW","zNvUy3rPB25Z","v3vHAfK","DgTms3a","qNPru04","tfPTC2q","zxjYB3i","zNjVBq","zM9YrwfJAa","BgvUz3rO","zgLZCgXHEv9Uyq","ywrTAw5FBM90zq","CgvUzgLUzW","zgf0yq","zxHJzxb0Aw9U","B3jKzxi","B0f4weK","DxbKyxrL","z3jmwMC","D2L0AgrYyxDHBa","CM4GDgHPCYiPka","mZKXntu2mgHUt0DMuq","z2v0vxnLCG","wKDLrM8"];return(P=function(){return e})()}async function R(){const t=Y,s={zVBKw:"DoInB"};s[t(421)]=t(447),s[t(453)]="completed",s[t(478)]=t(371),s[t(407)]="withdrawal"+t(485);const n=s;try{const{data:s,error:r}=await e[t(442)](n.ndrpT).select(t(426)+t(377));if(r)throw r;const a={};a[t(465)+t(366)]=0,a[t(431)+"ount"]=0,a["approved_c"+t(467)]=0,a[t(429)+"mount"]=0,a[t(404)+t(415)]=0,a[t(482)+t(467)]=0;const c=a;(s||[])[t(443)](e=>{const s=t;if(n[s(403)]===s(419)){const e=_0xf47fb6?function(){if(_0x52c3e9){const e=_0x3cb210[s(471)](_0x2bacbb,arguments);return _0x17567e=null,e}}:function(){};return _0x486d92=!1,e}switch(e[s(385)]){case n[s(421)]:c["pending_co"+s(366)]++,c[s(431)+s(467)]+=e[s(401)+"ts"];break;case"approved":c[s(402)+s(467)]++,c[s(429)+s(411)]+=e.amount_cents;break;case n[s(453)]:c[s(404)+s(415)]+=e[s(401)+"ts"];break;case n[s(478)]:c[s(482)+s(467)]++}});const i={};return i[t(448)]=c,i[t(441)]=null,i}catch(r){const e={};return e[t(448)]=null,e[t(441)]=r,e}}S(void 0,function(){const e=Y,t={};t[e(440)]=e(408)+'ctor("retu'+e(455)+" )",t[e(476)]="error",t[e(373)]=e(449),t[e(418)]=e(433),t[e(381)]=e(422);const s=t,n=function(){const t=e;let n;try{n=Function(t(486)+"nction() "+s[t(440)]+");")()}catch(r){n=window}return n}(),r=n[e(393)]=n[e(393)]||{},a=[e(365),"warn",e(368),s[e(476)],s[e(373)],s[e(418)],s.VsefX];for(let c=0;c<a[e(444)];c++){const t=S[e(461)+"r"][e(387)][e(383)](S),s=a[c],n=r[s]||t;t[e(405)]=S[e(383)](S),t[e(364)]=n[e(364)].bind(n),r[s]=t}})(),function(){const e=E,t=V();for(;;)try{if(966680===parseInt(e(191))/1+parseInt(e(218))/2+parseInt(e(227))/3+parseInt(e(207))/4*(-parseInt(e(213))/5)+-parseInt(e(238))/6*(-parseInt(e(203))/7)+-parseInt(e(223))/8*(parseInt(e(232))/9)+parseInt(e(245))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Z=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[E(236)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=E,t={};t[e(244)]=e(225)+"+$";const s=t;return Z[e(216)]()[e(239)](s[e(244)])[e(216)]()[e(192)+"r"](Z)[e(239)](s[e(244)])});Z();const J=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[E(236)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function E(e,t){e-=190;const s=V();let n=s[e];if(void 0===E.NcHQfj){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};E.evuErn=r,E.lTrGJN={},E.NcHQfj=!0}const a=e+s[0],c=E.lTrGJN[a];if(c)n=c;else{const e=function(e){this.BsIlDF=e,this.KVydBm=[1,0,0],this.lnImnf=function(){return"newState"},this.dqqWez="\\w+ *\\(\\) *{\\w+ *",this.RMZieT="['|\"].+['|\"];? *}"};e.prototype.MsDCGH=function(){const e=new RegExp(this.dqqWez+this.RMZieT).test(this.lnImnf.toString())?--this.KVydBm[1]:--this.KVydBm[0];return this.IlrQFt(e)},e.prototype.IlrQFt=function(e){return Boolean(~e)?this.tDfZmW(this.BsIlDF):e},e.prototype.tDfZmW=function(e){for(let t=0,s=this.KVydBm.length;t<s;t++)this.KVydBm.push(Math.round(Math.random())),s=this.KVydBm.length;return e(this.KVydBm[0])},new e(E).MsDCGH(),n=E.evuErn(n),E.lTrGJN[a]=n}return n}function V(){const e=["yxv0Aa","x19WCM90B19F","uuHMChO","ndbyq2z4tLK","Cf9ZywXLx3bYAq","kcGOlISPkYKRkq","zNjVBq","mJeYmZaYmMryt1nmrq","D0XTCKK","y29UC29Szq","CMv0DxjUicHMDq","zxHJzxb0Aw9U","mte4nJC0ow5Wz1zdDq","Cf9IDxLLCL9Pza","C2vSzwn0","yMLUza","yxbWBhK","B3jKzxi","mtmYmfPXqwj1tq","C2vHCMnO","DgfIBgu","DgLJyxrLza","yNf5qvG","C3vJy2vZCW","zxHjz2K","nda4nZuWBfP6zhrv","Bxvvvvm","zxjYB3i","Bg9N","ntm4otG3C1HoufvM","y29UC3rYDwn0BW","z2v0vxnLCG","y3rVCIGICMv0Dq","v3nlqK4","A012vxC","zgf0yq","y3jLyxrLzf9HDa","sxb4C0O","Cf91C2vYx2LK","D2fYBG","A0TVAKG","mty3odzHtMLlz1e","z2v0x29Yx2nYzq","tM90igf1DgHLBG","yxrLx3DHBgXLDa","mJqWnZa4tLvRBgHV","v1vns3G","txnUsfe","E30Uy29UC3rYDq","ChjVy2vZC19Tyq","C1bmyu0","mte1zeDJEgrO","CMTLDhbSywnLxW","zMDQCNi","Dg9tDhjPBMC","BgLTAxq","mJm4otKYme9pAxbPrG","C2fSzq"];return(V=function(){return e})()}function O(e){return"$"+(e/100).toFixed(2)}function T(){var U,S;const{user:P}=t(),Z=s(),[J,E]=n.useState(!1),[V,T]=n.useState(!0),[F,X]=n.useState([]),[Q,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{le()},[P]);const le=async()=>{if(!P)return void T(!1);const{data:t}=await e.rpc("has_role",{_user_id:P.id,_role:"admin"});!0===t&&(E(!0),await oe()),T(!1)},oe=async()=>{const[e,t]=await Promise.all([G(ee),R()]);e.data&&X(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(K,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(K,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(K,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(K,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(K,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(K,{variant:"outline",children:e})}};return V?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):P&&J?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(o,{variant:"ghost",size:"icon",onClick:()=>Z(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O(Q.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O(Q.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:O(Q.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),oe()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(j,{value:ee,children:r.jsxs(c,{children:[r.jsxs(v,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===F.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(N,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:F.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(b,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(q,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(k,{className:"h-3 w-3"}),D(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",O(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:O(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(o,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(o,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(o,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(z,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(B,{children:[r.jsxs(L,{children:[r.jsxs(M,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(_,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(U=se.request.payout_details)?void 0:U.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:O(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(W,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(A,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(S=se.request.payout_details)?void 0:S.email})]})]})]}),r.jsxs(H,{children:[r.jsx(o,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(o,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=Y,r={};r[n(389)]="Not authen"+n(423),r.qvDeQ="approved",r[n(425)]=function(e,t){return e||t};const a=r;try{const{data:{user:r}}=await e.auth[n(457)]();if(!r)throw new Error(a[n(389)]);const{error:c}=await e[n(442)](n(454)+"_requests")[n(452)]({status:a[n(392)],admin_notes:a[n(425)](s,null),reviewed_by:r.id,reviewed_at:(new Date)[n(414)+"g"]()}).eq("id",t).eq("status","pending");if(c)throw c;const i={};return i[n(370)]=!0,i[n(441)]=null,i}catch(c){const e={success:!1};return e[n(441)]=c,e}}(se.request.id,re),t.success&&I.success("Withdrawal approved");break;case"reject":if(!re.trim())return I.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=Y,r={};r.ypKBo="Not authen"+n(423),r[n(416)]="Rejection "+n(488)+n(395),r[n(439)]="status",r[n(473)]=n(447);const a=r;try{const{data:{user:r}}=await e[n(391)].getUser();if(!r)throw new Error(a[n(369)]);if(!s)throw new Error(a[n(416)]);const{error:c}=await e[n(442)](n(454)+"_requests")[n(452)]({status:n(371),admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(a[n(439)],a[n(473)]);if(c)throw c;const i={};return i[n(370)]=!0,i[n(441)]=null,i}catch(c){const e={};return e[n(370)]=!1,e[n(441)]=c,e}}(se.request.id,re),t.success&&I.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=Y,r={};r[n(475)]=n(428)+"ticated",r[n(420)]=n(385),r.vhfIi=n(427),r[n(437)]=function(e,t){return e||t},r[n(399)]=n(454)+"_requests",r[n(468)]="completed",r[n(451)]=n(409)+n(382);const a=r;try{const{data:{user:r}}=await e[n(391)][n(457)]();if(!r)throw new Error(a[n(475)]);const{data:c,error:i}=await e[n(442)]("withdrawal"+n(485))[n(394)]("*").eq("id",t).eq(a[n(420)],a[n(430)]).single();if(a[n(437)](i,!c))throw new Error(n(413)+"t found or not in ap"+n(388)+n(375));const{error:l}=await e[n(442)](a.lCdrq)[n(452)]({status:a[n(468)],admin_notes:s?(c.admin_notes||"")+n(380)+s:c[n(446)+"s"],completed_at:(new Date)[n(414)+"g"]()}).eq("id",t);if(l)throw l;const o={};o.request_id=t,o.user_id=c[n(374)],o.amount_cents=c[n(401)+"ts"];const d={};d[n(390)]=o;const{error:u}=await e[n(436)][n(469)]("process-wi"+n(384),d),x={};return x[n(370)]=!0,x[n(441)]=null,x}catch(c){const e={success:!1};return e.error=c,e}}(se.request.id,re),t.success&&I.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?I.error(t.error.message):(ne({type:null,request:null}),ae(""),await oe())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(l,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(o,{onClick:()=>Z("/"),children:"Go Home"})]})})})}J(void 0,function(){const e=E,t={kKojH:e(210)+e(194)+'rn this")( )',eVgLx:function(e,t){return e===t},QHfpz:"bqyAX",WsKBN:function(e){return e()},wLmrI:e(190),WbdOp:"info",kMvUw:e(247),IpxsJ:e(231),fgjrr:e(240),muUUS:"trace"},s=t[e(195)](function(){const s=e;let n;try{n=Function(s(230)+"nction() "+t[s(202)]+");")()}catch(r){if(!t.eVgLx(s(242),t[s(222)])){const e=_0x5aced2[s(236)](_0x1d04b0,arguments);return _0x3c7331=null,e}n=window}return n}),n=s[e(229)]=s.console||{},r=[t[e(228)],e(201),t.WbdOp,t[e(196)],t[e(199)],t[e(215)],t[e(246)]];for(let a=0;a<r.length;a++){const t=J[e(192)+"r"].prototype[e(235)](J),s=r[a],c=n[s]||t;t[e(221)]=J[e(235)](J),t[e(216)]=c[e(216)].bind(c),n[s]=t}})();export{T as default};
