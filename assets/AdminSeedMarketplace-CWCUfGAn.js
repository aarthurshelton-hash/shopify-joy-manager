import{d6 as e,d7 as t,cp as n,a as s,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as f,C as x,x as h,D as p,B as v,A as g,p as w,t as j,cN as y,bC as C,S as b,a6 as z,P as N,y as M,bG as D,T as B,aq as A,z as L,cU as _,aj as q,aT as G,ca as E,b as S,d8 as W}from"./index-UWVR9Dcc.js";!function(){const e=U,t=J();for(;;)try{if(555020===parseInt(e(526))/1+-parseInt(e(504))/2+-parseInt(e(556))/3+-parseInt(e(543))/4*(-parseInt(e(428))/5)+-parseInt(e(463))/6*(parseInt(e(443))/7)+parseInt(e(453))/8*(-parseInt(e(386))/9)+parseInt(e(519))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const I=function(){const e=U,t={};t[e(468)]="QZqDL",t[e(377)]=e(347);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(468)]!==n.Gcbvx){const e=s?function(){if(r){const e=r[a(534)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x530cba[a(533)](_0x38d9da,_0x42cfef,_0x5d0310)}}()(void 0,function(){const e=U,t={};t.WrGYA=e(353)+"+$";const n=t;return I.toString()[e(447)](n[e(430)])[e(506)]()[e(326)+"r"](I)[e(447)](n[e(430)])});I();const Y=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function U(e,t){e-=325;const n=J();let s=n[e];if(void 0===U.IXfHEt){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};U.UVLfqC=r,U.eOpVsZ={},U.IXfHEt=!0}const a=e+n[0],i=U.eOpVsZ[a];if(i)s=i;else{const e=function(e){this.jAzHiX=e,this.JYzwAJ=[1,0,0],this.WMBVdI=function(){return"newState"},this.SBIpor="\\w+ *\\(\\) *{\\w+ *",this.jSnovA="['|\"].+['|\"];? *}"};e.prototype.utVhUw=function(){const e=new RegExp(this.SBIpor+this.jSnovA).test(this.WMBVdI.toString())?--this.JYzwAJ[1]:--this.JYzwAJ[0];return this.RRmCZG(e)},e.prototype.RRmCZG=function(e){return Boolean(~e)?this.zZfRlo(this.jAzHiX):e},e.prototype.zZfRlo=function(e){for(let t=0,n=this.JYzwAJ.length;t<n;t++)this.JYzwAJ.push(Math.round(Math.random())),n=this.JYzwAJ.length;return e(this.JYzwAJ[0])},new e(U).utVhUw(),s=U.UVLfqC(s),U.eOpVsZ[a]=s}return s}Y(void 0,function(){const e=U,t={oxvDx:function(e,t){return e(t)},VyaAR:function(e,t){return e+t},Qdowl:e(441)+e(331)+e(354)+" )",mtZBj:function(e){return e()},KKmgb:"log",nHmJG:e(390),GSQwT:"error",fSZxX:e(358),dgcEH:"trace",BkgWV:function(e,t){return e<t}},n=t[e(449)](function(){const n=e;let s;try{s=t[n(373)](Function,t[n(492)](n(528)+n(345)+t[n(327)],");"))()}catch(r){s=window}return s}),s=n.console=n[e(424)]||{},r=[t[e(446)],"warn",t[e(459)],t[e(476)],t.fSZxX,"table",t[e(380)]];for(let a=0;t[e(448)](a,r.length);a++){const t=Y[e(326)+"r"][e(498)][e(359)](Y),n=r[a],i=s[n]||t;t[e(527)]=Y[e(359)](Y),t.toString=i[e(506)].bind(i),s[n]=t}})();function H(n,s){const r=U,a={wQLfn:function(e,t){return e+t},oUTQK:function(e,t){return e<t},wkjfe:function(e,t){return e-t},pcqZv:function(e,t){return e*t},fdZCH:function(e,t,n){return e(t,n)},uLEgJ:function(e,t){return e<t},LqQgv:function(e,t){return e*t},CJYTG:function(e,t){return e+t},ppREf:function(e,t){return e+t}},i=s/8,o=.02*s,c=a[r(450)](s,2*o);let l=r(478)+r(465)+r(402)+r(470)+'width="'+c+r(376)+c+r(335)+'"0 0 '+c+" "+c+'">';l+=r(514)+'" y="0" wi'+r(375)+c+r(376)+c+r(403)+e[r(473)]+r(538);for(let u=0;a[r(356)](u,8);u++){const s=a[r(412)](7,u);for(let c=0;c<8;c++){const d=n[s][c],m=d[r(409)]?e[r(520)]:e[r(466)],f=o+c*i,x=o+u*i;if(l+=r(513)+f+r(427)+x+'" width="'+i+r(376)+i+r(403)+m+r(538),d.visits[r(357)]>0){const e=a[r(472)](i,.08),n=[];for(const i of d.visits){const e=a[r(521)](t,i.piece,i[r(475)]);!n[r(404)](e)&&n[r(515)](e)}const s=Math[r(405)](n.length,6),o=[];let c=i-2*e;const u=a[r(472)](c,.7)/s;for(let t=0;a[r(356)](t,s);t++){const e={};if(e[r(475)]=n[t],e[r(444)]=c,o[r(515)](e),c-=u,a.uLEgJ(c,a.LqQgv(i,.1)))break}for(const t of o){const e=a[r(412)](i,t.layerSize)/2;l+=r(513)+a[r(340)](f,e)+r(427)+a.ppREf(x,e)+'" width="'+t[r(444)]+r(376)+t[r(444)]+r(403)+t[r(475)]+'"/>'}}}}return l+=r(372),l}async function k(e){const t=U,n={};n.CYEoN=t(508)+t(406)+"m",n[t(368)]=t(352);const s=n;return(await import(t(397)))[t(371)][t(398)](s[t(433)],{width:200,margin:1,color:{dark:e?s[t(368)]:t(486),light:t(411)+"t"},errorCorrectionLevel:"M"})}async function K(){const e=U,t={};t[e(522)]=e(507);const s=t;return new Promise((t,r)=>{const a=e,i=new Image;i[a(550)+"n"]=s[a(522)],i[a(502)]=()=>t(i),i.onerror=r,i.src=n})}function J(){const e=["C3rYB2TLu3r5Ba","idiWChGGj0nVCG","CMvZDg9Yzq","qxjjwMi","z2v0q29UDgv4Da","zMLSBfjLy3q","B21lsKy","E30Uy29UC3rYDq","icdIGkiGia","n1Hns2jsDa","Bgf5zxjtAxPL","vgLTzxmGtMv3ia","s0TTz2i","C2vHCMnO","qMTNv1y","BxrAqMO","D1fmzM4","Dhntrxu","ve9zsvC","mZjezNriCKi","i2zHzMfMoq","sgPdwfi","nJaWideZChGGjW","z1DYC2K","uLfUugW","BKHTsKC","q2LUEMvSjYWGjW","uwLSBNK","zhjHD0LTywDL","mta4nZC0nMfOEgL4yq","quX3Cha","psjODhrWoI8VDW","zgfYAW","uM9Tyw4NlcbZzq","wujHDNa","Eg1So2nOyxjZzq","mJaWmc9ZDMCIia","C2nHBgu","CgnXwNy","yM9YzgvY","zw9Yz2LHlcbZzq","y29SB3i","r1nrD1q","ywXWAgfIzxrPyW","phn2zYb4BwXUCW","iZi5mJuYna","vw5RBM93BG","Bw92zxm","rKPctK8","wvrSC3y","y29T","A0HMCeO","iZfbmueXqq","AgvPz2H0","BgLUzvrV","qvLVBeS","pZ8/pY4/pY4/pW","y3rvuKW","vNLHqvi","wuz5s2O","Bw9Yyw50jYWGrW","yM9ftfK","Au5OtKK","z2XvzgS","ChjVDg90ExbL","y2vUDgvY","y3jLyxrLrwXLBq","AgLNAa","B25SB2fK","tLqG4PMA","mJa2nJuZngjhD0XXEq","AgLUz1f1ywXPDa","Dg9tDhjPBMC","yw5VBNLTB3vZ","Ahr0Chm6lY9LBG","ueLNEM0","zMLSBfn0EwXL","iZbbmeeWqq","D2LKDgG","phjLy3qGEd0I","phjLy3qGEd0Ima","ChvZAa","C3jJ","uMDQs08","vKzowfq","mJy5odi4mJbmEM5QAxG","BgLNAhq","zMrAq0G","t1jgA1i","sNrwre8","vfHjqLa","nJaWidi0ChGGjW","ntu1mZe4sxjREhLV","x19WCM90B19F","CMv0DxjUicHMDq","B25LCNjVCG","teDezwe","BgLUzvDPzhrO","sw1cv1C","zMLSBfrLEhq","yxbWBhK","qNncCKC","DK9iwxC","uejywgm","iI8+","vfvctue","uKTAuhK","C2f2zq","BgvMDa","mtq4otuYCe5fAwrP","A1rXr1C","qMXHy2S","z2HmtwC","BwvHC3vYzvrLEa","whDIwK0","sKnVsK0","y3jVC3npCMLNAq","Dgv4DejHC2vSAq","DhLWzq","rMfPBgvKihrVia","C3rYB2TL","Aw1Hz2vtBw9VDa","mtu5odC2mfrKA0ftua","Dgv4DefSAwDU","ExLhqxy","zM9UDa","y29UC3rYDwn0BW","uwrVD2W","iIb3Awr0Ad0I","i0zerKngqG","CM91BMrszwn0","y3rVCIGICMv0Dq","iZq0ndaZyW","C3vIC3rYAw5N","Bw92zvrV","iIb2Awv3qM94pq","iZC4nZe2yW","wxfKrKi","yMvNAw5qyxrO","zxzLBNq","q0PzveC","Dd11DgyToa","wvDXr0q","zMLSBa","uM9Tyw4NlcbuAq","BMn0Aw9UkcKG","sw50zxiNlcbZyq","suXtDKO","CMvKDwnL","nhWWFdj8mxWZ","EgLHC0y","CMDIysGYntuSia","i0zbrKfgqq","kcGOlISPkYKRkq","CM4GDgHPCYiPka","C09vu0C","B1vuuuS","BgvUz3rO","zxHJzxb0Aw9U","yMLUza","4PMuievoifbftLnf","vw1JAK4","BwLKzgXL","A3rtwxy","ywXS","vuLxAwq","zw50","Dg9vChbLCKnHCW","vgHzuwS","EunOBK4","r3HOA2m","zgvMyxvSDa","pc9ZDMC+","B3H2rhG","ndaWideXChGGjW","zhrOpsi","iIbOzwLNAhq9iG","r2nIDNG","C3bSAxq","ide4ChGGj0nVCG","zgDJruG","Aw1Hz2uVC3zNkW","CMvHzhK","i2e4yti5zq","Efz2zgq","D1DcA0e","mJiYmZC2nw1ur3zKtG","BNmTC2vYAwy","tNzeu1G","CM9Nyxi","Aw5MBW","BwvZlcbZzxjPzG","ndaWideWChGGjW","Bg9HzcbtvKC","AM9PBG","zgf0zq","tuDIwxa","CxjJB2rL","Dg9eyxrHvvjm","yMXHy2S","zwHHwM8","zM9UDhm","D3CUDZmUB3jNlW","iIbMAwXSpsi","Aw5JBhvKzxm","BwLU","CgvUC2vUDc5JBW","AfjjyMq","veLsz2u","AxnmAwDODa","ihzZia","DhjHBNnWyxjLBG","D2TQzMu","C1zJrKW","mxW0Fdn8mhWY","CMv2B2TLt2jQzq","tvz1vxm","D2HPDgu","ru4Guevou0vova","CMLM","AgLUz0vUywjSzq","y2fUDMfZ","zhrYqM8","BxnWv20","y29UC29Szq","C0jhEwm","y3jLyxrLt2jQzq","iIb5psi","nvbPq2XlCW","zw5Wzw5Zzw50lG","v3jhwue","AxrHBgLJiduWma","ntaWideXChGGjW","q1LfB04"];return(J=function(){return e})()}async function V(e,t,n={}){const s=U,r={indaj:function(e,t){return e-t},TIRge:function(e,t,n){return e(t,n)},mspWm:function(e,t){return e*t},glUdk:function(e,t){return e+t},FJBNO:function(e,t){return e*t},WjOkp:function(e,t){return e*t},TUBMA:function(e,t){return e+t},omKJF:"#e7e5e4",NvDSX:s(454),BsBrG:s(336),RQnPl:s(383),UIWid:function(e,t){return e/t},yChnN:function(e,t){return e+t},wWBkA:"White",xVvdd:s(525)+s(460)+s(445)+s(467)+s(419),boELY:s(431)+s(435)+s(494)+s(474)+s(419),YFyKj:function(e,t){return e+t},ArIZb:s(542),hGuId:function(e,t){return e!==t},JtVDO:s(480),ghLMg:"italic 500"+s(379)+"morant', G"+s(474)+s(419),rogar:s(499),eWjDc:"500 12px '"+s(346)+s(387),sVcFL:function(e,t){return e+t},rfQvm:function(e,t){return e*t},ALwpp:function(e,t){return e-t},sOUSG:function(e,t){return e+t},hRIbd:function(e,t){return e>t},yyGAv:function(e,t){return e-t},sBGyc:function(e,t){return e-t},lsGAI:function(e,t){return e+t},QKRxR:function(e,t){return e>t},VFNXT:function(e,t){return e>=t},PIgzm:function(e,t){return e<t},UmcjN:function(e,t){return e===t},kHfpJ:s(537),dnDoC:s(540),YTlsv:function(e,t){return e-t},vQURe:s(360)+s(503),JCoJM:function(e,t){return e+t},YWqGD:function(e,t){return e(t)},MVuUs:function(e){return e()},Qilny:function(e,t){return e-t},yvQGh:function(e,t){return e+t},tsSEu:function(e,t){return e/t},HjCXR:function(e,t){return e+t},YqdFB:function(e,t){return e+t},BjYrB:s(477),vOHYw:s(418),MGbYp:function(e,t){return e-t},AYolK:function(e,t){return e+t}};await async function(){const e=U,t={};t[e(496)]=function(e,t){return e===t};const n=t;if(document.fonts&&document[e(401)][e(382)])if(n[e(496)](e(524),e(400))){const t={};t[e(530)]=function(e,t){return e*t},t[e(422)]=e(553)+"load SVG";const n=t,s=new _0xcb5f91,r={};r.type=e(381)+e(469)+e(341);const a=new _0x276d55([_0x5e54cd],r),i=_0x1b0593[e(426)+e(491)](a);s[e(502)]=()=>{const t=e,r=_0x56ebe4["createElem"+t(366)](t(421));r.width=n[t(530)](_0x49cfd4,_0x1acee0),r[t(487)]=_0x30e038*_0x2b6bd4;const a=r[t(438)]("2d");a[t(471)](_0x1ca393,_0x1df5c8),a[t(462)](s,0,0,_0x317873,_0x1d5a5f),_0x5ba3fd[t(415)+t(491)](i),_0x5dacc6(r)},s[e(529)]=()=>{_0x4d51b2[e(415)+"ctURL"](i),_0x43b100(new _0x3dc49c(n.dtrBo))},s[e(516)]=i}else await document[e(401)].ready;await new Promise(e=>setTimeout(e,150))}();const{boardSize:a=600,darkMode:i=!1,withWatermark:o=!1,title:c}=n,l=r[s(408)](H,e,a),u=r[s(423)](a,.02),d=r[s(497)](a,2*u),m=await async function(e,t,n){const s=U,r={vznuL:function(e,t){return e!==t}};r.xiasF=s(421);const a=r;return new Promise((r,i)=>{const o=s,c={};c[o(532)]=o(414),c.gWrsi=o(499);const l=c,u=new Image,d={};d[o(552)]=o(381)+"xml;charse"+o(341);const m=new Blob([e],d),f=URL[o(426)+o(491)](m);u[o(502)]=()=>{const e=o;if(a.vznuL(e(548),e(517))){const s=document.createElement(a[e(350)]);s[e(512)]=5*t,s[e(487)]=5*n;const i=s[e(438)]("2d");i[e(471)](5,5),i[e(462)](u,0,0,t,n),URL["revokeObje"+e(491)](f),r(s)}else{const t=l[e(532)][e(378)]("|");let n=0;for(;;){switch(t[n++]){case"0":_0x427a09[e(533)](_0x2128f5[e(339)],_0x2e3772,_0xda30de);continue;case"1":_0x504df7[e(510)]=_0x5a6295;continue;case"2":_0x314fa8+=32;continue;case"3":_0x49905a.textAlign=l[e(457)];continue;case"4":_0x37a670[e(325)]=e(431)+e(379)+"morant', G"+e(474)+"rif";continue}break}}},u[o(529)]=()=>{const e=o;URL["revokeObje"+e(491)](f),i(new Error("Failed to "+e(393)))},u[o(516)]=f})}(l,d,d),f=60,x=r[s(497)](d,r[s(482)](f,2)),h=r[s(497)](r[s(497)](d,220)+60,r.WjOkp(f,2)),p=document[s(500)+s(366)]("canvas");p[s(512)]=5*x,p[s(487)]=5*h;const v=p[s(438)]("2d");v[s(471)](5,5),v[s(555)+s(420)+"d"]=!0,v[s(555)+s(505)+"y"]=s(501),v[s(510)]=s(i?511:329),v[s(439)](0,0,x,h),v[s(462)](m,0,0,m[s(512)],m.height,f,f,d,d);const g=r[s(539)](r.TUBMA(f,d),28);v[s(434)+"e"]=i?s(479):r[s(440)],v[s(531)]=1,v[s(338)](),v[s(334)](f,g),v[s(488)](x-f,g),v[s(554)]();const w=i?r[s(388)]:s(479),j=i?s(383):r[s(535)],y=i?r[s(535)]:s(383),C=i?r[s(535)]:r[s(458)],b=r[s(365)](x,2);let z=r.yChnN(g,55);const N=t[s(417)]||r[s(385)],M=t[s(399)]||s(545);v[s(551)+"ne"]=s(362),v[s(325)]=r[s(384)];const D=v[s(547)+"t"](N).width,B=v[s(547)+"t"](M)[s(512)];v.font=r[s(495)];const A=s(410),L=v[s(547)+"t"](A)[s(512)],_=b-r.YFyKj(r[s(369)](D,L),B)/2;if(v[s(325)]=r.xVvdd,v[s(510)]=w,v[s(557)]=r[s(437)],v[s(533)](N,_,z),v.font=r[s(495)],v[s(510)]=C,v[s(533)](A,_+D,z),v.font=r[s(384)],v[s(510)]=w,v[s(533)](M,_+D+L,z),z+=36,t[s(339)]&&r.hGuId(t[s(339)],r[s(523)])){const e=s(349)[s(378)]("|");let n=0;for(;;){switch(e[n++]){case"0":v[s(325)]=r[s(546)];continue;case"1":v[s(533)](t.event,b,z);continue;case"2":v.textAlign=r[s(389)];continue;case"3":z+=32;continue;case"4":v[s(510)]=j;continue}break}}const q=c,G=t[s(395)]||"";if(q||G)if(s(452)!==s(544)){v[s(510)]=y,v[s(325)]=r.eWjDc,v[s(557)]=r.rogar;let e="";q?(e=q[s(367)+"e"](),G&&(e+=r[s(413)](s(442),G))):e=G;const t=2,n=e[s(378)](""),a=n[s(348)]((e,t)=>e+v[s(547)+"t"](t).width,0),i=r.rfQvm(n[s(357)]-1,t);let o=r[s(464)](b,r[s(355)](a,i)/2);for(const c of n)v.textAlign=s(542),v.fillText(c,o,z),o+=r[s(369)](v.measureText(c)[s(512)],t);z+=28}else{const e=r.indaj(_0x4dfd2f,_0x2e4647[s(444)])/2;_0x4f2fde+='<rect x="'+(_0x20b9d1+e)+s(427)+(_0x10b6a2+e)+s(328)+_0x5091e5[s(444)]+s(376)+_0x430d0e[s(444)]+s(403)+_0x3e9c57.color+s(538)}if(t[s(481)]&&r[s(407)](t[s(481)][s(357)],0)){v.fillStyle=y,v.font=s(392)+s(445)+s(344)+s(391),v[s(557)]=r[s(389)];const e=t[s(481)][s(394)](" "),n=r.hRIbd(e[s(357)],400)?r[s(413)](e[s(333)](0,400),"..."):e,a=r.yyGAv(r[s(425)](x,120),40),i=n[s(378)](" ");let o="",c=z;const l=15,u=4;let d=0;for(const t of i){const e=r[s(493)](r.lsGAI(o,o?" ":""),t);if(r.QKRxR(v[s(547)+"t"](e)[s(512)],a)&&o){if(v[s(533)](o,b,c),o=t,c+=l,d++,r[s(518)](d,u))break}else o=e}o&&r[s(509)](d,u)&&(r[s(361)](r[s(485)],r.dnDoC)?_0x2b3506=_0x300915:v[s(533)](o,b,c))}const E=r[s(558)](r.YTlsv(h,f),20);v[s(510)]=y,v.font=s(432)+s(346)+"ns-serif",v.textAlign=r.rogar;const S=r.vQURe[s(378)](""),W=S[s(348)]((e,t)=>e+v[s(547)+"t"](t).width,0),I=r.JCoJM(W,r[s(423)](S[s(357)]-1,4));let Y=r[s(483)](b,I/2);for(const U of S)v.textAlign=s(542),v[s(533)](U,Y,E),Y+=v[s(547)+"t"](U)[s(512)]+4;if(o){const[e,t]=await Promise[s(364)]([r[s(342)](k,!1),r[s(416)](K)]),n=220,a=65,i=r[s(549)](f,d)-n-12,o=r[s(461)](r.yvQGh(f,d),a)-12;v[s(510)]=s(351)+"255, 255, 0.95)",v[s(338)](),v[s(330)](i,o,n,a,6),v[s(343)](),v[s(434)+"e"]=r[s(440)],v[s(531)]=1,v[s(554)]();const c=48,l=r[s(549)](i,12),u=o+r.UIWid(a-c,2);v[s(541)](),v.beginPath(),v.arc(l+r[s(451)](c,2),u+r[s(451)](c,2),r[s(365)](c,2),0,2*Math.PI),v.clip(),v[s(462)](t,l,u,c,c),v[s(436)]();const m=r[s(455)](r[s(337)](l,c),10);v[s(557)]=s(542),v[s(551)+"ne"]=r.BjYrB,v.fillStyle=s(332),v[s(325)]=s(456)+s(346)+s(387),v[s(533)](r[s(536)],m,o+28),v[s(510)]="#78716c",v.font=s(374)+"Inter', sa"+s(387),v.fillText(s(429)+s(484),m,o+46);const x=50,h=r[s(396)](r[s(461)](r[s(489)](i,n),x),10),p=r.glUdk(o,r[s(451)](a-x,2)),g=new Image;await new Promise(t=>{const n=s;g.onload=()=>{v.drawImage(g,h,p,x,x),t()},g[n(529)]=()=>t(),g.src=e})}return p}const Z=E.filter(e=>"custom"!==e.id);const O=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const T=()=>{const e=s(),{user:t,isLoading:n}=r(),[I,Y]=a.useState(null),[U,H]=a.useState(!1),[k,K]=a.useState(0),[J,T]=a.useState(""),[P,R]=a.useState([]),[X,F]=a.useState(50),[Q,$]=a.useState(!0),[ee,te]=a.useState(!1),[ne,se]=a.useState(null);a.useEffect(()=>{n||(async()=>{if(!t)return void Y(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});Y(!0===e)})()},[t,n]);const re=a.useCallback(async(e,n,s,r,a=!0)=>{try{const m=i(e.pgn),f=a?Z[Math.floor(Math.random()*Z.length)]:Z[s%Z.length],x=function(e,t){const n=E.find(e=>e.id===t)||E[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?n.white:n.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,f.id);o(f.id);const h=await V(x,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:n}),p=await new Promise((e,t)=>{h.toBlob(n=>{n?e(n):t(new Error("Failed to create blob"))},"image/png",.95)}),v=Date.now(),g=`${t.id}/${v}-${n.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(g,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:j}=c.storage.from("visualizations").getPublicUrl(g),y=l(e.pgn),C={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:x,totalMoves:m.totalMoves,visualizationState:{paletteId:f.id,paletteName:f.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?s+1:void 0,gameHash:y}},{data:b,error:z}=await c.from("saved_visualizations").insert({user_id:t.id,title:n,pgn:e.pgn,game_data:C,image_path:j.publicUrl}).select().single();if(z)throw z;const N=function(e,t){if(e){const e=99,n=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+n}return 199+Math.floor(600*Math.random())}(r,s),{data:M,error:D}=await u(b.id,N);if(D)throw D;const B=function(e,t){const n=e?1.5:1,s=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*n+5*s),hdDownloads:Math.floor(3*Math.random()*n),gifDownloads:Math.floor(2*Math.random()*n),tradeCount:e?Math.floor(2*Math.random()):0}}(r,s);for(let e=0;e<B.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:b.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const A=d(e.pgn),L=a?"premium":"genesis";return{title:n,success:!0,visualizationId:b.id,listingId:null==M?void 0:M.id,isExemplar:r,paletteId:f.id,paletteName:f.name,gameHash:y,tier:L,openingName:null==A?void 0:A.fullName}}catch(m){return{title:n,success:!1,error:m.message,isExemplar:r}}},[t]),ae=P.filter(e=>e.success).length,ie=P.filter(e=>!e.success).length;return P.filter(e=>e.success&&e.isExemplar).length,n||null===I?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})}):t&&I?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(v,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(g,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(x,{children:[m.jsx(w,{children:m.jsxs(j,{className:"flex items-center gap-3",children:[m.jsx(y,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(C,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",X," visions: ",Math.min(25,X)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,X-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:X,onChange:e=>F(Number(e.target.value)),disabled:U,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(b,{id:"use-official-palettes",checked:Q,onCheckedChange:$,disabled:U}),m.jsxs(z,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(N,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),Q&&m.jsxs(M,{variant:"secondary",className:"text-xs",children:[Z.length," palettes"]})]})]}),m.jsx(v,{onClick:async()=>{if(!t)return void S.error("You must be logged in as the CEO account");H(!0),R([]),K(0);const e=[],n=W.slice(0,Math.min(X,W.length)),s=[];for(let t=0;t<X;t++){const e=t%n.length,r=t<25,a=O[t]||`Vision ${t+1}`;s.push({game:n[e],title:a,isExemplar:r})}for(let t=0;t<s.length;t++){const{game:n,title:r,isExemplar:a}=s[t];T(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${s.length})`);const i=await re(n,r,t,a,Q);e.push(i),R([...e]),K((t+1)/s.length*100),await new Promise(e=>setTimeout(e,300))}H(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?S.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):S.error("Failed to create any visions")},disabled:U||!t,className:"w-full",size:"lg",children:U?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(B,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(v,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),se(null);try{const{data:e,error:n}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(n)throw n;if(!e||0===e.length)return S.info("No visions to delete"),void te(!1);const s=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",s);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=s.filter(e=>!i.has(e)),l=s.filter(e=>i.has(e));if(0===o.length)return S.info("All your visions have accrued natural value - none deleted"),se({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);se({deleted:o.length,preserved:l.length}),S.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){S.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||U||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(B,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),ne&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",ne.deleted," deleted"]}),ne.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",ne.preserved," preserved (has value)"]})]})})]}),U&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(A,{value:k,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:J})]}),P.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(L,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(_,{className:"h-4 w-4"}),P.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(q,{className:"h-4 w-4"}),P.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:P.map((e,t)=>m.jsxs(G.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(_,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(q,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(M,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(M,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(N,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(x,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(v,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{T as default};
