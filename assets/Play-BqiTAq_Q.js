import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as f,aV as p,aY as g,bA as v,b7 as b,bB as w,aZ as y,bC as j,ad as C,aj as N,bD as k,bE as z,af as M,ag as D,ai as B,y as q,bF as L,bG as S,b6 as P,ae as A,bH as H,ah as I,bI as T,B as G,bJ as K,bK as E,bL as U,bM as _,bN as W,bO as Y,bP as O,bQ as X,bR as V,bS as Z,bT as J,bU as F,bV as R,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as fe,c4 as pe,a1 as ge,a2 as ve,a3 as be,a4 as we,a5 as ye,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as ze,c7 as Me,an as De,av as Be,aw as qe,c8 as Le,aM as Se,c9 as Pe,H as Ae,P as He,ca as Ie,b3 as Te,bs as Ge,be as Ke,cb as Ee,aP as Ue,cc as _e,d as We,b2 as Ye,a9 as Oe,cd as Xe,ce as Ve,cf as Ze,al as Je,au as Fe}from"./index-Cppn2aUX.js";import{L as Re}from"./LiveColorLegend-D-RucUSj.js";import{T as $e}from"./trending-down-BAdE-Alh.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-dJNLTWTj.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=dt,t=ht();for(;;)try{if(260433===parseInt(e(317))/1+parseInt(e(323))/2+-parseInt(e(351))/3*(-parseInt(e(337))/4)+-parseInt(e(325))/5+parseInt(e(309))/6*(parseInt(e(328))/7)+parseInt(e(327))/8*(-parseInt(e(352))/9)+parseInt(e(318))/10*(-parseInt(e(319))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[dt(334)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=dt,t={jDRfq:"(((.+)+)+)+$"},n=t;return ut[e(321)]().search("(((.+)+)+)+$")[e(321)]()[e(373)+"r"](ut)[e(356)](n.jDRfq)});function dt(e,t){e-=306;const n=ht();let s=n[e];if(void 0===dt.VLuwuP){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};dt.zIUzDm=r,dt.luoEdS={},dt.VLuwuP=!0}const a=e+n[0],i=dt.luoEdS[a];if(i)s=i;else{const e=function(e){this.viFCfi=e,this.ZzzYGJ=[1,0,0],this.hXcDxL=function(){return"newState"},this.DQMenE="\\w+ *\\(\\) *{\\w+ *",this.UEZmJo="['|\"].+['|\"];? *}"};e.prototype.sWXEXm=function(){const e=new RegExp(this.DQMenE+this.UEZmJo).test(this.hXcDxL.toString())?--this.ZzzYGJ[1]:--this.ZzzYGJ[0];return this.icUoZs(e)},e.prototype.icUoZs=function(e){return Boolean(~e)?this.NGJchI(this.viFCfi):e},e.prototype.NGJchI=function(e){for(let t=0,n=this.ZzzYGJ.length;t<n;t++)this.ZzzYGJ.push(Math.round(Math.random())),n=this.ZzzYGJ.length;return e(this.ZzzYGJ[0])},new e(dt).sWXEXm(),s=dt.zIUzDm(s),dt.luoEdS[a]=s}return s}ut();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[dt(334)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function xt(e){const t=dt,n={PRORm:t(326),ASLkw:"threefold_repetition",EUwQq:"Threefold "+t(382),FhMHl:"Insufficie"+t(343)+"l",iJmSv:function(e,t,n){return e(t,n)},eIsmw:function(e,t){return e>=t},ncIEt:"fifty_move"+t(342),WmDSc:t(376)+"le",lDfgv:t(371),HrdWT:t(358)};if(e[t(311)+"e"]()){const e={};return e[t(365)]=t(307),e[t(336)]="Stalemate!"+t(320)+t(313)+t(348),e[t(338)+"ge"]=n[t(364)],e}if(e[t(380)+"dRepetition"]()){const e={};return e[t(365)]=n.ASLkw,e[t(336)]=t(331)+t(308)+t(361),e[t(338)+"ge"]=n[t(353)],e}if(e[t(349)+"ientMaterial"]()){const e={};return e[t(365)]=t(350)+t(375)+"l",e[t(336)]=t(354)+t(360)+" material.",e[t(338)+"ge"]=n[t(383)],e}const s=e[t(324)](),r=n[t(347)](parseInt,s[t(377)](" ")[4],10);if(n[t(381)](r,100)){const e={};return e[t(365)]=n[t(379)],e.message=t(331)+t(340)+t(355),e.shortMessage=n[t(341)],e}const a={};return a[t(365)]=n.lDfgv,a[t(336)]=t(372)+"!",a.shortMessage=n[t(366)],a}function ht(){const e=["zxHJzxb0Aw9U","yxbWBhK","AxneCMf3","BwvZC2fNzq","mtmYnfPcrND6ua","C2HVCNrnzxnZyq","CMv0DxjUicHMDq","zsbMAwz0Es1TBW","v21eu2m","x3j1Bgu","BNqGtwf0zxjPyq","zxjYB3i","u2nNugO","yMTgB3m","AuPTu3y","BgfIBguU","AxnjBNn1zMzPyW","Aw5ZDwzMAwnPzq","mZq1owXJuujstG","mJqZDwzgCMTj","rvv3uxe","rhjHDYbIEsbPBG","DMuGCNvSzs4","C2vHCMnO","ChjVDg90ExbL","rhjHDW","CM4GDgHPCYiPka","C3vMzMLJAwvUDa","Cgv0AxrPB24U","qKjYA1q","y29UC29Szq","ufjpuM0","CMvHC29U","shjKv1q","DgfIBgu","E30Uy29UC3rYDq","yMLUza","BMn0Aw9UkcKG","Dw5RBM93BG","r2fTzsbKCMf3BG","y29UC3rYDwn0BW","BxHIwxO","BNrFBwf0zxjPyq","ntaTtw92zsbsDq","C3bSAxq","BgvUz3rO","BMnjrxq","AxnuAhjLzwzVBa","zuLZBxC","uMvWzxrPDgLVBG","rMHnsgW","q3HRDxK","C3rHBgvTyxrL","CMvLzM9SzcbYzq","mtiWzuToDxPw","x19WCM90B19F","AxntDgfSzw1HDa","Aw5MBW","Bw92zxmGyxzHAq","t0HIAu4","DNHksxK","z0HbsNO","mJK3mZq4uMLOyNn6","mtqWr0fwr1fP","mti3mZKXEgzpDezI","ie5VigXLz2fSia","Dg9tDhjPBMC","tLvrA24","mJu4nMzOEuPcCa","zMvU","mJiYmJqXnxDQyuzYrG","u3rHBgvTyxrLiq","ody1nNrSruP0EG","nZu1otnqBfP1A1K","re1zzgm","Bg9N","rhjHDYbIEsb0Aa","yLr2Cwy"];return(ht=function(){return e})()}function ft(e){return xt(e).message}function pt(){const e=["zNjLCxvLBMn5","y3jLyxrLt3nJAq","yvHKuey","y2fZDgXL","mtaYmJq4sej1vu5b","y3jLyxrLqNvMzG","vgLTzq","vKnKEKO","BgvUz3rO","qxvKAw9dB250zq","r2fIzvK","zhjHDW","v2vIief1zgLVia","mZG4oti2nezPDgzoqG","nZeXnJa3nvjxy2LJuG","y29UC29Szq","C3rHCNq","DMLJDg9YEq","z2fPBG","vuLrvKm","ChjVDg90ExbL","DgfIBgu","qNLfvw0","Dg9tDhjPBMC","wuv1t3O","D2vIA2L0qxvKAq","sgjPEeO","y3rVCIGICMv0Dq","ndq4ntu5nxDiENfTvW","BMn0Aw9UkcKG","C3f1yxjL","thzUtNq","Aw5MBW","mteXndK0n2HUqLjJuW","yxbWBhK","C2LUzq","DMjUuhO","BK9quKe","CgXHEvnVDw5K","mtb5AejpCwm","x19WCM90B19F","AwXSzwDHBa","CMv0DxjUicHMDq","tNjIqwm","mtuZnta2mgL0B29zvq","vg9wywX1zuf0va","EwvnEMW","q2fwt2C","Bw92zq","C0jXu2G","Bg9N","Ce9QB1i","y29UBMvJDa","C2fTCgXLuMf0zq","y29UDgv4Da","ywrgAwX0zxi","vuTptuy","y29UC3rYDwn0BW","mtrZvuzUz2m","DhjHy2u","y3vYCMvUDfrPBq","B0nVBNrLEhq","C2v0vMfSDwvbDa","mtKYmZyZnLzktuXIDG","CM4GDgHPCYiPka","qwr5Cvm","C2vHCMnO","D2fYBG","C3rVCa","zxHWB25LBNrPyq","DhjPyw5NBgu","yNvMzMvY","suPMD2K","BgLUzwfYuMfTCa","Aw5PDef1zgLV","DgXfB3i","mLrNuK5OvW","BfjHBxbuB1zHBa","y3vYCMvUDa","wfj4wg4","DMfSDwu","y3jLyxrLr2fPBG","qNfjEue","DhLWzq","BgXHDg9Y","z2fPBK5Vzgu","z2fTzuvUza","y2XVC2u","y3jLyxrLqMLXDq","DwvbDfrPBwu","yMLUza","zgvZDgLUyxrPBW","kcGOlISPkYKRkq","CMfUzg9T","vLDQAxO","zxHJzxb0Aw9U","AMjdB1m"];return(pt=function(){return e})()}mt(void 0,function(){const e=dt,t={};t[e(316)]=function(e,t){return e+t},t.Cxkuy=e(339)+e(370),t[e(332)]=function(e,t){return e===t},t[e(345)]=e(322),t.mxbYz=e(315),t.OHbiN=e(312),t[e(329)]=e(344),t[e(362)]="trace",t[e(346)]=function(e,t){return e<t};const n=t;let s;try{s=Function(n[e(316)](n[e(306)]+(e(368)+'ctor("retu')+e(359)+" )",");"))()}catch(i){if(n[e(332)](n[e(345)],n[e(374)])){const t=_0x31398e[e(334)](_0xd9ac07,arguments);return _0x523fcf=null,t}s=window}const r=s[e(363)]=s.console||{},a=[e(330),"warn",n[e(314)],n[e(329)],e(333),e(367),n[e(362)]];for(let o=0;n[e(346)](o,a[e(378)]);o++){const t=mt[e(373)+"r"][e(357)][e(369)](mt),n=a[o],s=r[n]||t;t[e(310)]=mt[e(369)](mt),t[e(321)]=s.toString[e(369)](s),r[n]=t}})(),function(){const e=wt,t=pt();for(;;)try{if(675078===parseInt(e(285))/1*(-parseInt(e(310))/2)+-parseInt(e(339))/3+-parseInt(e(350))/4+parseInt(e(334))/5+parseInt(e(272))/6*(-parseInt(e(267))/7)+parseInt(e(319))/8+-parseInt(e(320))/9*(-parseInt(e(345))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[wt(340)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=wt,t={};t[e(355)]=e(301)+"+$";const n=t;return gt[e(329)]().search(e(301)+"+$")[e(329)]()[e(266)+"r"](gt)[e(275)](n[e(355)])});gt();const vt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[wt(340)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();vt(void 0,function(){const e=wt,t={ByEUm:function(e,t){return e(t)},LvnNt:function(e){return e()},VCdzJ:e(338),LnlTp:e(327),HbixJ:e(268),GabeY:function(e,t){return e<t}},n=t[e(337)](function(){const n=e;let s;try{s=t[n(328)](Function,n(348)+n(335)+"{}.constru"+n(333)+n(273)+" ));")()}catch(r){s=window}return s}),s=n[e(321)]=n.console||{},r=[e(356),e(276),t[e(313)],"error",e(304),t.LnlTp,t[e(332)]];for(let a=0;t[e(316)](a,r[e(314)]);a++){const t=vt[e(266)+"r"][e(326)].bind(vt),n=r[a],i=s[n]||t;t[e(346)]=vt[e(299)](vt),t[e(329)]=i.toString.bind(i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=wt,r={NrbAc:s(318)+"API not supported",tlEor:function(e){return e()},VWjiz:function(e,t){return e+t},CaVOg:function(e,t){return e-t},vbnPz:function(e,t){return e+t},odPtU:function(e,t){return e||t},OjACT:function(e,t,n,s,r,a){return e(t,n,s,r,a)},yeMzl:s(279),IJfwi:function(e,t,n,s,r,a){return e(t,n,s,r,a)},XRxXn:s(336),UKOMF:s(341),xOpsb:s(309),AdyqS:function(e,t,n){return e(t,n)},pOjoR:"checkmate",befFT:"gameStart",nOPRA:function(e,t,n,s,r,a){return e(t,n,s,r,a)},UIQVC:s(323),TXaKc:function(e,t,n,s,r,a){return e(t,n,s,r,a)},PZjxf:s(317),YEuOz:function(e,t,n,s,r,a){return e(t,n,s,r,a)},aXdPF:function(e,t,n){return e(t,n)},jbCoS:function(e,t,n){return e(t,n)},BqIyA:function(e,t,n){return e(t,n)}},a={};a[s(263)]=null,a[s(294)]=null;const i=t.useRef(a),o=t.useCallback(()=>{const e=s;if(!i.current[e(263)])try{const t=new(window[e(315)+"xt"]||window[e(331)+e(270)]),s=t[e(290)]();s[e(358)](t[e(300)+"n"]),s.gain[e(289)]=n;const r={};r.context=t,r[e(294)]=s,i.current=r}catch(t){}},[n]);r[s(305)](t.useEffect,()=>{const e=s;i[e(287)][e(294)]&&(i[e(287)][e(294)][e(324)][e(289)]=n)},[n]);const c=t.useCallback((t,n,a=s(341),c=.01,l=.1,u)=>{const d=s;if(!e)return;r[d(284)](o);const{context:m,gainNode:x}=i[d(287)];if(!m||!x)return;const h=m[d(307)+d(293)](),f=m[d(290)]();h[d(292)]=a,h[d(306)][d(271)+d(312)](t,m[d(269)+"e"]),u&&h[d(306)]["exponentia"+d(286)+d(298)](u,m.currentTime+n),f.gain[d(271)+"Time"](0,m[d(269)+"e"]),f[d(324)][d(282)+d(351)+"ime"](1,r[d(303)](m[d(269)+"e"],c)),f[d(324)][d(278)+d(286)+d(298)](.01,r[d(353)](m[d(269)+"e"]+n,l)),f.gain[d(282)+d(351)+"ime"](0,r[d(342)](m[d(269)+"e"],n)),h.connect(f),f[d(358)](x),h[d(322)](m[d(269)+"e"]),h[d(277)](r[d(303)](m[d(269)+"e"],n))},[e,o]),l=r[s(291)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(287)];if(r.odPtU(!c,!l))return;const u=c.sampleRate*t,d=c[a(311)+"er"](1,u,c[a(262)]),m=d.getChannelData(0);for(let e=0;e<u;e++)m[e]=2*Math[a(302)]()-1;const x=c.createBufferSource();x[a(280)]=d;const h=c[a(297)+a(264)]();h[a(292)]="lowpass",h[a(306)][a(289)]=n;const f=c[a(290)]();f[a(324)][a(271)+a(312)](.3,c.currentTime),f[a(324)][a(278)+a(286)+a(298)](.01,c[a(269)+"e"]+t),x[a(358)](h),h[a(358)](f),f[a(358)](l),x[a(322)](c[a(269)+"e"]),x[a(277)](c[a(269)+"e"]+t)},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case n(354):c(800,.08,n(341),.005,.05),r.OjACT(c,400,.06,r[n(352)],.005,.04);break;case"capture":l(.12,2e3),r[n(281)](c,300,.1,r[n(288)],.005,.08),c(150,.15,r[n(265)],.01,.1);break;case r.xOpsb:r.IJfwi(c,600,.06,r[n(265)],.005,.04),r[n(274)](setTimeout,()=>c(700,.06,"sine",.005,.04),80);break;case"check":r.IJfwi(c,880,.15,n(279),.01,.1),setTimeout(()=>c(1100,.12,"triangle",.01,.08),120);break;case r[n(357)]:c(880,.2,r[n(265)],.01,.15),setTimeout(()=>c(660,.2,n(341),.01,.15),150),setTimeout(()=>c(440,.3,n(341),.01,.2),300),setTimeout(()=>c(330,.4,n(341),.01,.3),500);break;case r.befFT:c(523,.12,r[n(265)],.01,.08),setTimeout(()=>c(659,.12,n(341),.01,.08),100),r[n(274)](setTimeout,()=>c(784,.2,"sine",.01,.15),200);break;case n(295):r[n(343)](c,440,.15,n(279),.01,.1),r[n(274)](setTimeout,()=>c(349,.25,n(279),.01,.2),150);break;case r[n(325)]:r.IJfwi(c,523,.1,r[n(265)],.01,.08),setTimeout(()=>c(659,.1,n(341),.01,.08),100),r.AdyqS(setTimeout,()=>c(784,.1,n(341),.01,.08),200),setTimeout(()=>c(1047,.3,n(341),.01,.25),300);break;case"defeat":r.TXaKc(c,392,.2,r[n(265)],.02,.15),setTimeout(()=>c(349,.2,n(341),.02,.15),200),r.AdyqS(setTimeout,()=>c(330,.3,n(341),.02,.25),400),setTimeout(()=>c(262,.4,n(341),.02,.35),650);break;case r.PZjxf:r[n(330)](c,440,.15,r[n(265)],.01,.1),r[n(308)](setTimeout,()=>c(440,.15,n(341),.01,.1),180),setTimeout(()=>c(523,.2,n(341),.01,.15),360);break;case n(347):c(200,.1,r.XRxXn,.005,.08),r[n(343)](c,150,.08,"sawtooth",.005,.06)}},[e,c,l]);r[s(305)](t.useEffect,()=>()=>{const e=wt;i[e(287)][e(263)]&&i[e(287)][e(263)][e(296)]()},[]);const d={};return d[s(344)]=u,d[s(283)]=o,d};function wt(e,t){e-=262;const n=pt();let s=n[e];if(void 0===wt.qSKRAi){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};wt.FwealY=r,wt.DIdAzk={},wt.qSKRAi=!0}const a=e+n[0],i=wt.DIdAzk[a];if(i)s=i;else{const e=function(e){this.wcogsT=e,this.CqdIKI=[1,0,0],this.TTsaaM=function(){return"newState"},this.XJHBay="\\w+ *\\(\\) *{\\w+ *",this.UmESNi="['|\"].+['|\"];? *}"};e.prototype.bdevZr=function(){const e=new RegExp(this.XJHBay+this.UmESNi).test(this.TTsaaM.toString())?--this.CqdIKI[1]:--this.CqdIKI[0];return this.KVajTs(e)},e.prototype.KVajTs=function(e){return Boolean(~e)?this.LGqKDA(this.wcogsT):e},e.prototype.LGqKDA=function(e){for(let t=0,n=this.CqdIKI.length;t<n;t++)this.CqdIKI.push(Math.round(Math.random())),n=this.CqdIKI.length;return e(this.CqdIKI[0])},new e(wt).bdevZr(),s=wt.FwealY(s),wt.DIdAzk[a]=s}return s}const yt=jt;function jt(e,t){e-=494;const n=Nt();let s=n[e];if(void 0===jt.mrkLer){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};jt.ihiivi=r,jt.xOVmCn={},jt.mrkLer=!0}const a=e+n[0],i=jt.xOVmCn[a];if(i)s=i;else{const e=function(e){this.lajMCz=e,this.SrZbvH=[1,0,0],this.uexyZY=function(){return"newState"},this.eDLdUf="\\w+ *\\(\\) *{\\w+ *",this.eqHjdP="['|\"].+['|\"];? *}"};e.prototype.FnhiEo=function(){const e=new RegExp(this.eDLdUf+this.eqHjdP).test(this.uexyZY.toString())?--this.SrZbvH[1]:--this.SrZbvH[0];return this.KNZmZs(e)},e.prototype.KNZmZs=function(e){return Boolean(~e)?this.chGyBD(this.lajMCz):e},e.prototype.chGyBD=function(e){for(let t=0,n=this.SrZbvH.length;t<n;t++)this.SrZbvH.push(Math.round(Math.random())),n=this.SrZbvH.length;return e(this.SrZbvH[0])},new e(jt).FnhiEo(),s=jt.ihiivi(s),jt.xOVmCn[a]=s}return s}!function(){const e=jt,t=Nt();for(;;)try{if(796953===-parseInt(e(501))/1*(-parseInt(e(510))/2)+parseInt(e(507))/3+parseInt(e(518))/4*(-parseInt(e(512))/5)+parseInt(e(514))/6+parseInt(e(494))/7+parseInt(e(520))/8*(parseInt(e(495))/9)+-parseInt(e(526))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ct=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[jt(500)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=jt,t={};t[e(502)]=e(527)+"+$";const n=t;return Ct[e(516)]()[e(525)](n[e(502)])[e(516)]().constructor(Ct)[e(525)](n[e(502)])});function Nt(){const e=["kcGOlISPkYKRkq","CM4GDgHPCYiPka","y3rVCIGICMv0Dq","ntaZoda2ofnmwNPMzq","mZyZmde5nwTuBxHLAW","zc1Zzxr0Aw5NCW","DhjHy2u","qNLkwvC","y2HLC3mTC291BG","yxbWBhK","mtDqz2LhEwm","ufLeD08","qNf0tMK","x19WCM90B19F","vMfltgq","D2fYBG","nZiWmZm5DuL3zNHI","BMfTzq","zxHJzxb0Aw9U","mJGZndjqAhvftK8","wfrtvgO","mtqWnZe4mhjiwujrvW","DgfIBgu","ntmZmZC3og9kzuHrqq","E30Uy29UC3rYDq","Dg9tDhjPBMC","BeHgyLK","mtjiENr3BM8","Bg9N","mJrSAe9kBwS","CMv0DxjUicHMDq","zxjYB3i","yMLUza","y29UC29Szq","C2vHCMnO","mty1oduXmtbJyNPeDe8"];return(Nt=function(){return e})()}Ct();const kt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();kt(void 0,function(){const e=jt,t={VaKLd:e(521)+"nction() ",eLTyH:function(e,t){return e!==t},VNags:"lHFbY",zhTJM:function(e){return e()},nzYYr:e(506),VfXnC:"info",XTSTj:e(497),ByJYW:function(e,t){return e<t}},n=t.zhTJM(function(){const n=e,s={};s[n(503)]=t[n(505)];const r=s;if(!t.eLTyH(t.VNags,n(517))){let e;try{e=Function(t[n(505)]+(n(515)+'ctor("retu')+n(528)+" ));")()}catch(a){e=window}return e}_0x1afb98=_0x52f01e(r.BqtNi+(n(515)+n(529)+n(528)+" ));"))()}),s=n.console=n[e(524)]||{},r=[e(519),t.nzYYr,t.VfXnC,e(522),e(509),e(513),t[e(511)]];for(let a=0;t[e(498)](a,r.length);a++){const t=kt.constructor.prototype[e(523)](kt),n=r[a],i=s[n]||t;t[e(504)]=kt[e(523)](kt),t.toString=i.toString[e(523)](i),s[n]=t}})();const zt={};zt[yt(508)]=yt(499)+yt(496);const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e.enabled}))}),zt)),Dt=Lt;!function(){const e=Lt,t=St();for(;;)try{if(925528===parseInt(e(573))/1*(parseInt(e(519))/2)+parseInt(e(604))/3+parseInt(e(599))/4+parseInt(e(354))/5*(-parseInt(e(489))/6)+-parseInt(e(480))/7+-parseInt(e(382))/8+parseInt(e(597))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){const e=Lt,t={};t[e(590)]=e(467);const n=t;let s=!0;return function(t,r){const a=e,i={bMVeu:function(e,t){return e(t)},nNdfi:function(e,t){return e===t},tIQcy:n[a(590)],wjPzF:a(399)},o=s?function(){const e=a,n=function(e,t){return i[Lt(389)](e,t)};if(r){if(!i[e(383)](i[e(607)],i[e(557)])){const n=r[e(592)](t,arguments);return r=null,n}n(_0x4273be,!1)}}:function(){};return s=!1,o}}()(void 0,function(){const e=Lt,t={};t[e(589)]=e(561)+"+$";const n=t;return Bt.toString()[e(403)]("(((.+)+)+)+$")[e(344)]().constructor(Bt)[e(403)](n[e(589)])});Bt();const qt=function(){const e=Lt,t={};t[e(630)]=function(e,t){return e!==t},t[e(339)]=e(371),t[e(342)]=e(632),t[e(497)]=function(e,t){return e===t},t.SzYpr=e(534),t.yVkmz="otDok";const n=t;let s=!0;return function(t,r){const a=e,i={ufoBM:function(e,t){return n[Lt(630)](e,t)},BFsKP:n[a(339)],bSFqf:n[a(342)]};if(!n.kkeTJ(n[a(359)],n[a(579)])){const e=s?function(){const e=a;if(!i.ufoBM(i[e(518)],i[e(580)])){const t={};t[e(386)]=_0x782ac,t[e(374)]=!0;return _0x44f14e[e(343)](t)[e(394)](e=>e.to)}if(r){const n=r[e(592)](t,arguments);return r=null,n}}:function(){};return s=!1,e}_0x56e058.move_uci&&_0x21dfaf[a(349)].length>=4&&_0x571204[a(347)](_0x4abe3b[a(349)][a(535)](2,4))}}();function Lt(e,t){e-=339;const n=St();let s=n[e];if(void 0===Lt.wCJVPf){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Lt.SsqgTI=r,Lt.WFZudS={},Lt.wCJVPf=!0}const a=e+n[0],i=Lt.WFZudS[a];if(i)s=i;else{const e=function(e){this.ueQQaX=e,this.uIObLx=[1,0,0],this.mUUJPD=function(){return"newState"},this.FqeDKN="\\w+ *\\(\\) *{\\w+ *",this.bsTGvY="['|\"].+['|\"];? *}"};e.prototype.IAabEa=function(){const e=new RegExp(this.FqeDKN+this.bsTGvY).test(this.mUUJPD.toString())?--this.uIObLx[1]:--this.uIObLx[0];return this.oHDeUG(e)},e.prototype.oHDeUG=function(e){return Boolean(~e)?this.sOHuSk(this.ueQQaX):e},e.prototype.sOHuSk=function(e){for(let t=0,n=this.uIObLx.length;t<n;t++)this.uIObLx.push(Math.round(Math.random())),n=this.uIObLx.length;return e(this.uIObLx[0])},new e(Lt).IAabEa(),s=Lt.SsqgTI(s),Lt.WFZudS[a]=s}return s}function St(){const e=["r2fTzsbUB3qGzG","D2LUBMvYx2LK","ww91ihDVBIe","AM9PBIbNyw1L","tY1plu8","qKfgsge","CgDU","Bw92zv9JB3vUDa","yMXPDhPFnq","C3vIC2nYAwjL","zwf0zsbHigDHBq","vvLvu0y","ExPLvvO","ywn0AxzL","DeXfu0i","tY1p","ywjHBMrVBMvK","u2zsBNu","y2HHBgXLBMDLxW","DLncsMe","C2LVBIK","C3rHDhvZ","ww91ihjLC2LNBG","Bw92zxmT","zseGww91igfYzq","yLvlCu0","CMvTB3zLq2HHBG","D2HPDgvFD2LUCW","zxjYB3i","zeLfA0C","B05eCg4","wgnmvNm","Bg9HzeDHBwu","vKThwLm","uhHAqNK","y29UC3rYDwn0BW","y3vYCMvUDf9Mzq","CMfWAwrFmtu","DhrL","zMLUza","y3vYCMvUDezLBG","z2fTzvn0yxj0","BMv3","D2HPDgu","Avj0uhG","y3jLyxrLr2fTzq","z2fTzv9Pza","B25LBNqGyxv0BW","re1ZwhO","igDHBwu","y2HLy2TTyxrL","teD2wgi","D0Pjwum","Aw5MBW","DxnLCL9Pza","ihnLBNqGkg9WCa","DhvYBG","mti1nJa0mJjuBhznweW","yxnJzw5KAw5N","DezyqvG","swDftLC","Bwf5yMvtAw5NBa","yMXHy2TqBgf5zq","rfzXDNq","Aw5JBhvKzxm","x3jLBwfPBMLUzW","nZG2mdqXnhHtDNDjDa","rMfPBgvKihrVia","v01kzKW","surXENC","rwDSDNu","q3D4tMO","vuvlA20","BMvUDc4UlG","A2TLveO","y29Kzq","v3znze0","tvPxt1y","tMrXA2G","y2HLC3nFz2fTzq","BMn0Aw9UkcKG","D2rcsfm","quLyChC","Dg9vChbLCKnHCW","CgXHEwvYx2LK","zhjHDW","y29TCgXLDgvK","wLzuwMW","zKHxEwW","BuzMqMe","y2HHBM5LBa","CKLK","v0X5C2y","D2LUBMvYswq","r2fTzsbJCMvHDa","qKzZs1a","mty3mJG4oeDYvwndzG","yMXHy2S","qLnADgG","AxndAgvJA21HDa","AgfJs0O","v3vKtei","tw92zsbLCNjVCG","Bg9HzcbNyw1L","Cu1Utuy","vvHWEMy","wvnRv1G","t05ZDgm","qNjlD0y","Bw92zq","AMriC1i","z1jcCum","C3vIC3rYAw5N","tLvKEMy","t0HtA3O","DMLJDg9YEq","ihjHDgLUz3m6","yLPyuge","B3jKzxi","qLDeEeC","D0XlwMC","AhznrM4","D2HPDgvuAw1LuG","vNHSrLi","Bhv5zge","y2HHBMDL","ChvIBgLJ","CYbcBgfJAY4","DgLTzv9JB250CG","z1HqB1u","D2fYBG","ihbSyxLPBMCGyq","zgvMzwf0","ChjVzMLSzxm","D2PqEKy","CNbJ","uNjptK0","shrSA0e","kcGOlISPkYKRkq","z2vUzxjHDgvFyW","uMf0Aw5NoIa","CMvZAwDUr2fTzq","CMvZDwX0","Bg9FCMf0Aw5N","B2zMzxjeCMf3","z2fTzvn0yxrL","y2HHBgXLBMDLqW","Bw92zwrtCxvHCG","ELHWqMW","ugHwCuC","mvPqC2rtta","r2fTzsbHBhjLyq","D2HPDgvqBgf5zq","Bw92zunVDw50","zxHJzxb0Aw9U","DxbKyxrLievmtW","EvzRBxO","yLngCwy","vMzvBvG","zwXVx3jHDgLUzW","q2fUBM90igPVAq","BMvS","DhjHy2u","vgvSvxK","AgfUz2vZ","lwfJy2vWDhmGAq","rvLhEK8","rgjsq3e","yMXHy2TFD2LUCW","yxbWBhK","zYbMB3iGB3bWBW","DxbKyxrL","y2fWDhvYzwq","AxnmB2fKAw5N","mti3mtyXodfMvKLfA2C","zMvU","nZa4mtG4ogXvv29WEq","Cuzlwvm","yMrWtMC","C3vJy2vZCW","z2fTzs0","mZm2ntu1ruHjtMXi","y3jLyxrLzef0","rxzlvge","DeLry3K","D2HPDgvFCgfSzq","C2vSzwn0","twTgvxe","y2fWDhvYzq","yMXHy2TFDgLTzq","y2fZDgXL","Dg9ju09tDhjPBG","B3vUza","BwvZC2fNzq","yMT5BhG","zwqHifDHAxrPBG","r01wy0G","y2HLC3nFBw92zq","s2nrAuq","D2HPDgvFDgLTzq","yMLUza","BgvUz3rO","s1Pqy3C","AxnFChvIBgLJ","y29UC29Szq","DxnLCL9PzcWGzq","BwfRzu1VDMu","B3LrwwS","z2fTzq","B0nHBNC","wwPMDvO","Bw92zv9UDw1Izq","BvPLEwS","AMH0Evm","z2fTzv9Pzd1LCq","y3jLyxrLzf9HDa","DevitLO","Bw92zxm","Dg9tDhjPBMC","Aw5Zzxj0","vw1zrxa","ywrK","AM9PBIbIEsbJBW","Bw92zv91y2K","u3v0tg0","qvHjAeO","BMv3uMf0Aw5N","ChjVDg90ExbL","nwvpBLPRvq","z0LPyNO","x19WCM90B19F","qwnZC3q","C25cBhG","u3PzChi","re9HA0y","C3rHCNrLzef0","zur2rM0","BxLdB2XVCG","t2DqD3i","y0LQuLy","ywXS","zNjVBq","y2HLy2S","q2HHBgXLBMDLia","AwrPvg8","DK1WtNa","wwrkrgG","B2rL","DMvYyM9Zzq","yMXHy2TFCgXHEq","AM9PBKDHBwu","BgvnB3zLCW","sK9zsum","v1DjzKG","svrPAKK","D2HPDgvFCgXHEq","ode2ntm2AKr0u09k","BK5KzMK","y2PXyxy","zxD3sKm","C3f1yxjL","zhKGC3rHCNrLza","uuXUrgy","yK1wzxu","DgfIBgu","zMLrvxK","D2fPDgLUzW","ugXLyxnLihnPzW","BwfW","CefpA3a","zK5Kuxu","Dw9Xy04","vLn1z3a","BMzVBw0","ugf2Avu","qLfRz3u","CM4GDgHPCYiPka","C2vHCMnO","Bw92zv9Zyw4","r1Potxu","Dw50Aw1Lza","rM1fzfG","yMXHy2TuAw1LuG","wKfctuu","BIbPBIb0BYbQBW","BfPjEvi","zxjFAwq","su5trvju","C3rHCNrLzf9HDa","wMXXruW","swjXrMC","C2fU","B0rbtLu","Axnhyw1Lt3zLCG","CM5AB04","BIbPBIb0BYbJCG","reXwEg0"];return(St=function(){return e})()}qt(void 0,function(){const e=Lt,t={AIXpw:function(e,t){return e(t)},WWIfH:"return (fu"+e(503),UYUSF:'{}.constructor("retu'+e(402)+" )",KZPcw:function(e,t){return e===t},yzeUZ:e(351),fHWyl:function(e,t){return e+t},IDqzw:function(e,t){return e+t},XcLVs:function(e){return e()},WMJfL:e(553),ITijI:e(476),cjqav:e(577),lEDKa:e(390),gIibz:function(e,t){return e<t},bdpNg:"YaRzX"};let n;try{if(t[e(625)](t[e(435)],"AXIhJ")){const s=t[e(505)](Function,t[e(511)](t[e(492)](t.WWIfH,t[e(434)]),");"));n=t[e(454)](s)}else{const n=t.AIXpw(_0x2f020a,t[e(379)]+t[e(434)]+");");_0x41c697=n()}}catch(a){n=window}const s=n.console=n[e(627)]||{},r=["log",t[e(491)],t[e(380)],e(451),t[e(384)],t.lEDKa,e(585)];for(let i=0;t[e(355)](i,r[e(624)]);i++){if("YaRzX"!==t[e(601)]){const t=_0x424c3f[e(592)](_0x5c38d,arguments);return _0x6525d4=null,t}{const t=qt[e(458)+"r"][e(353)][e(623)](qt),n=r[i],a=s[n]||t;t[e(356)]=qt[e(623)](qt),t[e(344)]=a[e(344)][e(623)](a),s[n]=t}}})();const Pt={bullet_1:60};Pt[Dt(431)]=300,Pt[Dt(460)]=900,Pt[Dt(406)]=0;const At=Pt;function Ht(e,t){e-=336;const n=Gt();let s=n[e];if(void 0===Ht.jFwMUK){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Ht.XDJGto=r,Ht.QpsFyD={},Ht.jFwMUK=!0}const a=e+n[0],i=Ht.QpsFyD[a];if(i)s=i;else{const e=function(e){this.ZOMhfA=e,this.BQNOto=[1,0,0],this.wgbieZ=function(){return"newState"},this.WZvCSE="\\w+ *\\(\\) *{\\w+ *",this.uWgRbF="['|\"].+['|\"];? *}"};e.prototype.NAimXg=function(){const e=new RegExp(this.WZvCSE+this.uWgRbF).test(this.wgbieZ.toString())?--this.BQNOto[1]:--this.BQNOto[0];return this.ZSzVzP(e)},e.prototype.ZSzVzP=function(e){return Boolean(~e)?this.XVncGM(this.ZOMhfA):e},e.prototype.XVncGM=function(e){for(let t=0,n=this.BQNOto.length;t<n;t++)this.BQNOto.push(Math.round(Math.random())),n=this.BQNOto.length;return e(this.BQNOto[0])},new e(Ht).NAimXg(),s=Ht.XDJGto(s),Ht.QpsFyD[a]=s}return s}const It=Ht;!function(){const e=Ht,t=Gt();for(;;)try{if(231053===-parseInt(e(337))/1+-parseInt(e(374))/2+-parseInt(e(386))/3*(-parseInt(e(362))/4)+-parseInt(e(344))/5*(-parseInt(e(397))/6)+parseInt(e(377))/7*(parseInt(e(343))/8)+parseInt(e(392))/9*(parseInt(e(372))/10)+-parseInt(e(387))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Tt=function(){const e=Ht,t={};t[e(361)]=e(345);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(384)]=function(e,t){return e!==t},i[a(366)]=a(360);const o=i;if(n[a(361)]==n[a(361)]){const e=s?function(){const e=a;if(o[e(384)](o[e(366)],"rJlRV")){const t=_0x4ea3fb[_0x93b5b7];return _0x5401d5[e(346)](t)}if(r){const n=r[e(339)](t,arguments);return r=null,n}}:function(){};return s=!1,e}if(_0x339be2){const e=_0x1884bf.apply(_0x5e35ad,arguments);return _0x10b239=null,e}}}()(void 0,function(){const e=Ht,t={};t[e(369)]=e(347)+"+$";const n=t;return Tt[e(380)]()[e(373)](n[e(369)])[e(380)]()[e(379)+"r"](Tt)[e(373)]("(((.+)+)+)+$")});function Gt(){const e=["DfrSwvy","CKPSuLy","Efvmqwi","ndeZmJb0y1bdDxa","r2rmyvq","CM4GDgHPCYiPka","AKrvwe0","q2nyEuO","Dw5KzwzPBMvK","D2fYBG","BKjdyMe","y3rVCIGICMv0Dq","rMnjBgO","odyWBuDqrNnN","C2vHCMnO","nZeZnJuWy3nfBNLu","AgvHDNK","u2DMs0i","mZK3nJC3wKX6sNvr","zxjYB3i","y29UC3rYDwn0BW","Dg9tDhjPBMC","Aw5MBW","y2f2uLy","A0TXu1C","CgzeC3K","y29UC29Szq","nZvuA3P4sgi","ndGYmZq0nwrZD1bYuW","s1bTtgW","BMn0Aw9UkcKG","CKTxr0y","zwq6","mZqXnZnIsg90zwm","zxHJzxb0Aw9U","Bg9N","E30Uy29UC3rYDq","BNH0Bhq","mtjOquHLs0S","zgjHy2SGzMfPBa","BwvKAxvT","DeLMEvm","C2vSzwn0Aw9U","odCZm3zKwwDyyq","CMv0DxjUicHMDq","yxbWBhK","r0XLzeG","DgfIBgu","x19WCM90B19F","mtzby0vuquW","odqXnZmWAezYEeDe","AwPcA1u","DMLICMf0zq","kcGOlISPkYKRkq","AgfWDgLJCW","BwPTu1m","q3jPCNy","yMLUza","C3vJy2vZCW","AxntDxbWB3j0zq","BgLNAhq","AwrwzhG","CxHeDgm","ChjVDg90ExbL","r3nmBvq"];return(Gt=function(){return e})()}Tt();const Kt=function(){const e=Ht,t={};t.cavRV=e(371),t[e(390)]=e(388);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(382)]===n.rKWGF){const e=_0x1766a6?function(){if(_0x52d82d){const e=_0x437a29[a(339)](_0x4dd718,arguments);return _0x5771f2=null,e}}:function(){};return _0x356b52=!1,e}{const e=s?function(){if(r){const e=r[a(339)](t,arguments);return r=null,e}}:function(){};return s=!1,e}}}();Kt(void 0,function(){const e=Ht,t={};t[e(376)]=function(e,t){return e!==t},t[e(358)]="XSPNY",t.Crirv=function(e,t){return e+t},t[e(365)]=function(e,t){return e+t},t[e(363)]=e(394),t.mjmSS=e(393),t[e(359)]=e(341),t.tIfyS="trace";const n=t,s=function(){const t=e;if(n[t(376)](t(356),n[t(358)])){let e;try{e=Function(n[t(350)](n[t(365)](t(338)+t(389),t(395)+t(370)+t(364)+" )"),");"))()}catch(s){e=window}return e}return!!_0x23f1bb&&_0x535cf5[t(346)]([10,30,10,30,20])}(),r=s[e(385)]=s[e(385)]||{},a=[n[e(363)],e(368),e(381),e(378),n[e(349)],n[e(359)],n[e(400)]];for(let i=0;i<a.length;i++){const t=Kt[e(379)+"r"][e(357)][e(351)](Kt),n=a[i],s=r[n]||t;t[e(342)]=Kt[e(351)](Kt),t[e(380)]=s[e(380)][e(351)](s),r[n]=t}})();const Et={};Et[It(354)]=10,Et[It(399)]=25,Et[It(375)]=50,Et[It(352)]=[10,50,20],Et[It(378)]=[50,30,50,30,50],Et[It(336)]=5;const Ut=Et,_t=()=>{const e=It,n={idVdx:"Haptic fee"+e(398)+e(391),iWNKS:function(e,t){return e!==t},GLedH:e(367),wxxfS:"vibrate",kKqSW:function(e,t,n){return e(t,n)},YsqYS:function(e,t,n){return e(t,n)},nxtlt:function(e,t,n){return e(t,n)}},s=n.iWNKS(typeof navigator,n[e(340)])&&n.wxxfS in navigator,r=n.kKqSW(t.useCallback,(t="light")=>{const n=e;if(!s)return!1;try{const e=Ut[t];return navigator[n(346)](e)}catch(r){return!1}},[s]),a={select:t.useCallback(()=>r("selection"),[r]),move:n.YsqYS(t.useCallback,()=>r(e(354)),[r]),capture:t.useCallback(()=>r(e(399)),[r]),check:n[e(383)](t.useCallback,()=>r(e(375)),[r]),victory:n.nxtlt(t.useCallback,()=>r(e(352)),[r]),error:n[e(396)](t.useCallback,()=>r(e(378)),[r]),castle:t.useCallback(()=>!!s&&navigator[e(346)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i[e(353)+"d"]=s,i[e(346)]=r,i[e(348)]=a,i},Wt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Yt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:f=!1,enPensentOpacity:p=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,w]=t.useState(null),[y,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:z}=_t();let M=null;try{M=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",S=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Yt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&y.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?z.capture():z.move();return void(await n(b,c)?(w(null),j([])):z.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return z.select(),w(c),void j(s(c))}w(null),j([])},[D,b,y,r,a,B,x,n,s,z]),P=t.useCallback(e=>{if(!(null==M?void 0:M.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?M.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):M.setHoveredSquare(null)},[M,q]),A=t.useCallback(()=>{(null==M?void 0:M.setHoveredSquare)&&M.setHoveredSquare(null)},[M]),H=t.useCallback(e=>{if(!M)return!1;const{highlightedPiece:t,lockedPieces:n}=M,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[M,g]),I=M&&(null!==M.highlightedPiece||M.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Yt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=y.includes(i);c.has(i);const p=C===i,g=q.has(i),w=H(i),j=I&&g&&!w,N=I&&w;return u.jsxs(m.div,{onClick:()=>S(e,t),onMouseEnter:()=>P(i),onMouseLeave:A,onTouchEnd:e=>{f&&g&&(e.stopPropagation(),P(i),setTimeout(()=>A(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${p?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&f?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:p,isEnabled:f,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[y.length," move",1!==y.length?"s":""," available"]})})]})},Xt={capture:{icon:y,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:y,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:w,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:p,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:f,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Vt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Xt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),f=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),p=t.useMemo(()=>h&&f?{moveNumber:e.moveNumber,san:e.move,piece:f,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,f,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(p&&c.setHoveredMove(p),f&&c.setHighlightedPiece(f))},[c,p,f]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),w=e.quality?z[e.quality]:null;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(L,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),w&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(q,{style:{backgroundColor:w.color},className:"text-white text-[10px]",children:[w.symbol," ",w.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(y,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Zt={capture:{icon:y,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Jt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:E,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Ft=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,f]=t.useState(500),[p,v]=t.useState(!1),[b,w]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:E,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),w(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),w(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),w(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const z=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=z.find(e=>e.value===x))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:p?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(S,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(P,{className:"w-3 h-3"})]}):u.jsx(A,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Zt[e],s=n.icon;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(T,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Jt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(G,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Vt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(_,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(W,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),w(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(Y,{className:"h-5 w-5"}):u.jsx(S,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(Z,{className:"h-3 w-3"}),q]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(J,{align:"end",className:"bg-popover",children:z.map(e=>u.jsx(F,{onClick:()=>f(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(J,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(R,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx($,{}),re.capture.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(y,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx($,{}),re.checkmate.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Rt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[f,p]=t.useState(!1),g=se(i),v=n-e,b=re(e),w=re(n),y=b.name!==w.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void p(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),p(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(y&&f?"text-primary":"text-muted-foreground"),animate:y&&f?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx($e,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:y&&f&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",w.name]})]})}),s&&f&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},$t=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(G,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(A,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(A,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(G,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:f=null})=>{const p=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:w}=xe(),{captureState:y,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:z}=he(),{setCapturedTimelineState:M,setReturningFromOrder:D}=fe(),B=t.useRef(null),[q,L]=t.useState(j),[S,P]=t.useState(!1),[A,H]=t.useState(""),[I,T]=t.useState(!1),[K,E]=t.useState(!1);se(f);const U=t.useMemo(()=>f?pe(f):null,[f]),_=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const W=async e=>{if(e&&!v)return void T(!0);if(!B.current)return;P(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{P(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(we,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(ye,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(G,{variant:q?"outline":"default",size:"sm",onClick:()=>_(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(G,{variant:q?"default":"outline",size:"sm",onClick:()=>_(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:z})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",U&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",U]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(G,{onClick:()=>W(!1),disabled:S,variant:"outline",className:"gap-2",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(G,{onClick:()=>W(!0),disabled:S,className:"gap-2 btn-luxury",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(G,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?ze(x,c.totalMoves):Me;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(G,{onClick:()=>{const e=y(s),t=`${c.white} vs ${c.black}`;M({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:z}),D(!0),w({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:z},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Se,{className:"w-4 h-4"})}),n(),p("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:I,onClose:()=>T(!1),onAuthRequired:()=>{T(!1),E(!0)},trigger:"download"}),u.jsx(qe,{isOpen:K,onClose:()=>E(!1)})]})},tn=cn;!function(){const e=cn,t=rn();for(;;)try{if(793826===-parseInt(e(490))/1+-parseInt(e(549))/2+parseInt(e(550))/3+-parseInt(e(472))/4*(parseInt(e(473))/5)+-parseInt(e(496))/6+parseInt(e(495))/7+parseInt(e(531))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){let e=!0;return function(t,n){const s=cn,r={};r[s(471)]=s(466);const a=r,i=e?function(){const e=s;if(a[e(471)]!=a[e(471)])_0x2b1c80[e(530)+e(553)](),_0xac7a4f();else if(n){const s=n[e(545)](t,arguments);return n=null,s}}:function(){};return e=!1,i}}()(void 0,function(){const e=cn,t={};t.ZQLkU=e(511)+"+$";const n=t;return nn.toString()[e(488)](n[e(518)])[e(529)]().constructor(nn)[e(488)](e(511)+"+$")});nn();const sn=function(){const e=cn,t={AKyQu:function(e,t){return e!==t}};t[e(503)]=e(515);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(552)]=a(483);const o=i;if(n[a(521)]("rdgKV",n[a(503)])){const e=_0x410b9b[a(545)](_0x300399,arguments);return _0x2db3b7=null,e}{const e=s?function(){const e=a;if(e(483)!==o[e(552)])_0x5baa65=_0x4f688c;else if(r){const n=r[e(545)](t,arguments);return r=null,n}}:function(){};return s=!1,e}}}();function rn(){const e=["vhvAwgq","B2TzA2W","ihrPBwvSAw5L","B3vPCvK","ne1qs2DHra","mJq0mti5mefNuwvyuW","y29UC29Szq","zhvYyxrPB24","zsaOzhvYAw5Nia","zxnJyxbL","u291BMqGBxv0zq","uhjLDMLVDxmGBq","vg9Nz2XLl2v4Ca","B3zL","AxqGzNvSBhnJCG","svDZsee","ie09txv0zsWGuG","EMjItMO","Bg9IyNKGlYbfEa","vMLxA3K","C2vHCMnO","rMjps1y","mteXoty1oevQvxfzEq","DgfIBgu","rgXTvwW","DgvK","uMvZAwDUigDHBq","ntiYnJy0ohrts2fMrG","mJG2nZCZmejztgTzBG","zgL0ywjSzq","u3bHy2u","yxrLCW","DhjHy2u","Dg9mB3DLCKnHCW","vg9Nz2XLihnVDq","DLPKwha","sgvSCa","DxrZ","u291BMqGDw5TDq","vNfmEhG","BMn0Aw9UkcKG","C2HPzNrlzxK","uMv0DxjUihrVia","kcGOlISPkYKRkq","ywn0Aw9U","zxHJzxb0Aw9U","Cxvev0W","CMrNs1y","t0HTEue","A2v5","wLfmA1u","DeXPC3rLBMvY","DevHDhu","quT5uxu","CgXHEsK","ugXHEs9qyxvZzq","r28GDg8GC3rHCG","x19WCM90B19F","CLPwzxK","icH5B3vYihr1CG","yMLUza","Dg9tDhjPBMC","ChjLDMvUDerLzG","mJm0nJmXmdrNrwLZvvq","vg9Nz2XLigz1Ba","CMv0DxjUicHMDq","DgfYz2v0","tMv4DcbTB3zL","CuP6qxy","zwvU","C3rLBMvY","BgvUz3rO","purYyxCSievZyW","u2HVDYbRzxLIBW","puXVyMj5lca/pq","khnOB3CGywXSkq","Aw5MBW","yxbWBhK","CMqGy29VCMrPBG","t2zMzxiGzhjHDW","zevMzuq","mJC3nZe0mKfjwhvNBq","mtC2nJe0ogzbywjTyW","qK93BgS","zxjItfC","yxvSDa","Bg9N","D2fYBG","zxjYB3i","EwvozLq","E30Uy29UC3rYDq","tw9fuNO","A2v5zg93BG","y3rVCIGICMv0Dq","yxjKihnOB3j0yW","ELriBu4","v2Torfe"];return(rn=function(){return e})()}sn(void 0,function(){const e=cn,t={tEatu:"(((.+)+)+)+$",zbbNj:function(e,t){return e(t)},WkNDQ:function(e,t){return e+t},ViWky:e(533)+e(508),qJzAv:e(548),quDWL:e(513),FbOKV:e(500)};let n;try{n=t[e(485)](Function,t[e(467)](t[e(487)],e(461)+e(464)+'rn this")( )')+");")()}catch(a){if(e(548)!==t[e(536)])return _0x1c55bc[e(529)]()[e(488)](t[e(520)])[e(529)]().constructor(_0x10567c).search(t[e(520)]);n=window}const s=n[e(474)]=n[e(474)]||{},r=[e(457),e(458),e(544),e(459),t[e(514)],e(491),t[e(489)]];for(let i=0;i<r[e(539)];i++){const t=sn.constructor.prototype.bind(sn),n=r[i],a=s[n]||t;t[e(525)]=sn[e(528)](sn),t[e(529)]=a[e(529)][e(528)](a),s[n]=t}})();const an=()=>{const e=cn,t={};t[e(460)]="Shortcuts:"+e(484)+"=Resign, D"+e(540)+e(542)+e(504);const n=t,s={};s[e(475)]=4e3,o[e(544)](n[e(460)],s)},on={};function cn(e,t){e-=457;const n=rn();let s=n[e];if(void 0===cn.jJcXkT){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};cn.sMxEKT=r,cn.ESHpIi={},cn.jJcXkT=!0}const a=e+n[0],i=cn.ESHpIi[a];if(i)s=i;else{const e=function(e){this.GNHuQC=e,this.GbfQHz=[1,0,0],this.GRJTMZ=function(){return"newState"},this.yvQhWa="\\w+ *\\(\\) *{\\w+ *",this.IuvUYf="['|\"].+['|\"];? *}"};e.prototype.ttrPic=function(){const e=new RegExp(this.yvQhWa+this.IuvUYf).test(this.GRJTMZ.toString())?--this.GbfQHz[1]:--this.GbfQHz[0];return this.ACqWRk(e)},e.prototype.ACqWRk=function(e){return Boolean(~e)?this.PHPBom(this.GNHuQC):e},e.prototype.PHPBom=function(e){for(let t=0,n=this.GbfQHz.length;t<n;t++)this.GbfQHz.push(Math.round(Math.random())),n=this.GbfQHz.length;return e(this.GbfQHz[0])},new e(cn).ttrPic(),s=cn.sMxEKT(s),cn.ESHpIi[a]=s}return s}on[tn(517)]="M",on[tn(512)]=tn(502)+"nd on/off";const ln={};ln[tn(517)]="R",ln.action=tn(494)+tn(476)+tn(522),tn(547),tn(527);const un={};un[tn(517)]="Esc",un.action=tn(510)+tn(486)+tn(482)+tn(537);const dn={};dn[tn(517)]="?",dn[tn(512)]=tn(541)+tn(465)+tn(505);const mn={};mn[tn(517)]=tn(498),mn[tn(512)]=tn(523)+tn(470);const xn={};xn[tn(517)]="â†",xn[tn(512)]=tn(479)+tn(481),tn(535);const hn={};hn[tn(517)]="Home",hn[tn(512)]=tn(524)+"t";const fn={};fn[tn(517)]="End",fn[tn(512)]="Go to end "+tn(543);const pn={};pn[tn(517)]="F",pn[tn(512)]=tn(532)+"lscreen mode";const gn={};gn[tn(517)]="C",gn.action="Toggle boa"+tn(546)+tn(499);const vn={};vn[tn(517)]="L",vn[tn(512)]=tn(480)+"and legend";const bn=En;!function(){const e=En,t=Pn();for(;;)try{if(442816===-parseInt(e(261))/1+-parseInt(e(251))/2+parseInt(e(220))/3*(-parseInt(e(244))/4)+parseInt(e(166))/5*(-parseInt(e(173))/6)+parseInt(e(242))/7+-parseInt(e(264))/8*(parseInt(e(262))/9)+parseInt(e(267))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wn=function(){const e=En,t={};t[e(160)]=function(e,t){return e===t},t[e(148)]=e(215);const n=t;let s=!0;return function(t,r){const a=e,i={WHkmv:function(e,t){return n[En(160)](e,t)},tOTgN:n[a(148)]},o=s?function(){const e=a;if(r){if(!i[e(123)](i[e(227)],"joHcK")){const n=r[e(240)](t,arguments);return r=null,n}if(_0x4890d7){const t=_0x220be0[e(240)](_0x22252f,arguments);return _0x57766a=null,t}}}:function(){};return s=!1,o}}()(void 0,function(){const e=En,t={};t[e(151)]="(((.+)+)+)+$";const n=t;return wn[e(209)]()[e(171)](n[e(151)]).toString()[e(263)+"r"](wn)[e(171)](e(143)+"+$")});wn();const yn=function(){const e=En,t={VSYto:function(e,t){return e!==t}};t[e(121)]="KdfFI";const n=t;let s=!0;return function(t,r){const a=e,i={ElLuw:function(e,t){return n[En(221)](e,t)},GEkPF:n[a(121)]},o=s?function(){const e=a;if(r){if(!i[e(169)](i[e(235)],i[e(235)])){const e=r.apply(t,arguments);return r=null,e}switch(_0x22e099.toLowerCase()){case"p":return _0x107b7b;case"n":return _0x404208;case"b":return _0x507964;case"r":return _0xff48c0;case"q":return _0x1f04ad;case"k":return _0x3e12e9;default:return[]}}}:function(){};return s=!1,o}}();yn(void 0,function(){const e=En,t={DSMfc:function(e,t,n){return e(t,n)},BLVPA:function(e,t,n,s,r,a){return e(t,n,s,r,a)},MsrpD:function(e,t){return e===t},QcCWf:function(e,t){return e===t},PhIfh:function(e,t){return e+t},pWvnt:function(e,t){return e+t},zqfsW:e(194),ETnqk:e(205),kqyRM:e(199),Nqkip:e(156),dxvFP:e(124),MqNdD:e(223),HKVCH:e(270),NkxPG:e(245),fOPaq:function(e,t){return e<t}},n=function(){const n=e,s={jUNbE:function(e,n,s){return t.DSMfc(e,n,s)},JFQDb:function(e,n,s,r,a,i){return t[En(174)](e,n,s,r,a,i)},VLXUf:function(e,n){return t.MsrpD(e,n)}};if(t[n(218)](n(150),"bUeWK"))return _0x286741===n(190)?_0x3b0b64(_0x250370):s[n(122)](_0x534ede,_0x297f47,_0x2798ed);{let e;try{e=Function(t.PhIfh(t[n(136)](n(162)+n(214),n(226)+n(231)+n(178)+" )"),");"))()}catch(r){if(t[n(193)]===t.ETnqk){return s[n(179)](_0x1e1644,_0x49a5d8,4,-_0x4b4470,_0x2ce130,s.VLXUf(_0x3d701b[n(233)](),"w"))[n(159)]}e=window}return e}}(),s=n[e(207)]=n[e(207)]||{},r=[t[e(168)],t[e(141)],t[e(172)],t[e(257)],t[e(203)],t[e(217)],e(211)];for(let a=0;t[e(224)](a,r[e(188)]);a++){const t=yn[e(263)+"r"][e(165)][e(175)](yn),n=r[a],i=s[n]||t;t[e(134)]=yn[e(175)](yn),t[e(209)]=i[e(209)][e(175)](i),s[n]=t}})();const jn={p:100,n:320,b:330,r:500,q:900,k:2e4},Cn=jn,Nn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],kn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],zn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Mn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Dn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Bn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function qn(e){switch(e[En(273)+"e"]()){case"p":return Nn;case"n":return kn;case"b":return zn;case"r":return Mn;case"q":return Dn;case"k":return Bn;default:return[]}}function Ln(e){const t=En,n={tcDKf:function(e,t){return e(t)},iSJTu:function(e,t){return e===t},Rufbb:function(e,t){return e-t},UYCWJ:function(e,t){return e+t},eNlRM:function(e,t){return e<t},uexpW:t(198),CykEL:function(e,t){return e-t},eiqht:function(e,t){return e*t}};if(e[t(243)+"e"]())return"w"===e[t(233)]()?-1/0:1/0;if(e[t(155)]()||e[t(130)+"e"]())return 0;let s=0;const r=e[t(206)]();for(let i=0;n[t(139)](i,8);i++)for(let e=0;e<8;e++){const a=r[i][e];if(a)if(n[t(208)](n[t(131)],t(198))){const r=Cn[a[t(219)]]||0,o=n[t(195)](qn,a.type);let c=0;if(o[t(188)]>0)if(n.iSJTu(t(253),t(253))){c=o[n[t(208)](a.color,"w")?i:n[t(153)](7,i)][e]}else{const e=_0x222a1f[_0x221cac][_0x134617];if(e){const s=_0x30f193[e.type]||0,r=n[t(195)](_0x44dc96,e.type);let a=0;if(r[t(188)]>0){a=r[n[t(208)](e[t(181)],"w")?_0x3a6a15:n[t(191)](7,_0x499669)][_0x1f08e7]}const i=n[t(271)](s,a);_0x57ae29+="w"===e[t(181)]?i:-i}}const l=n[t(271)](r,c);s+=n[t(208)](a[t(181)],"w")?l:-l}else _0x525d3d=_0x50c549}const a=e[t(192)]().length;return s+="w"===e[t(233)]()?n.eiqht(a,2):2*-a,s}function Sn(e,t,n,s,r){const a=En,i={VLtrg:function(e,t){return e===t},pMqYO:function(e,t,n,s,r,a){return e(t,n,s,r,a)},PTVEj:function(e,t){return e-t},xAKQI:function(e,t){return e>t},cBxGA:function(e,t){return e!==t},BfBuc:a(125),tLvIb:function(e,t,n,s,r,a){return e(t,n,s,r,a)},eKjYK:function(e,t){return e<=t}};if(i.VLtrg(t,0)||e.isGameOver())return{score:Ln(e),move:null};const o={};o[a(176)]=!0;const c=e.moves(o);if(c[a(252)]((e,t)=>{const n=a;let s=0,r=0;return e[n(187)]&&(s+=Cn[e[n(187)]]||0),t[n(187)]&&(r+=Cn[t[n(187)]]||0),e[n(230)][n(239)]("+")&&(s+=50),t[n(230)].includes("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const u of c){e[a(159)](u);const c=i[a(258)](Sn,e,i.PTVEj(t,1),n,s,!1);if(e[a(232)](),i[a(170)](c[a(152)],r))if(i[a(189)]("DeHRq",i[a(260)]))r=c[a(152)],o=u;else{const e=i[a(133)](_0x2b16da[a(181)],"w")?_0x3ecf1e:7-_0x549284;_0x205a83=_0x40343f[e][_0x37ad41]}if(s<=(n=Math.max(n,c[a(152)])))break}const l={};return l[a(152)]=r,l[a(159)]=o,l}{let r=1/0,o=null;for(const u of c){e.move(u);const c=i.tLvIb(Sn,e,t-1,n,s,!0);if(e[a(232)](),c[a(152)]<r&&(r=c[a(152)],o=u),s=Math[a(201)](s,c[a(152)]),i[a(185)](s,n))break}const l={};return l[a(152)]=r,l.move=o,l}}function Pn(){const e=["ALvoyKu","v0HRBxy","Aw5MBW","sgPdB04","twfRzxmGCMfUza","D2fPDfjLywr5","zw5NAw5Lug93zq","BNz0wLm","AxntDgfSzw1HDa","Dwv4CfC","zgvWDgG","vKX0CMC","x19WCM90B19F","qMfZAwmGDgfJDa","CfD2BNq","Bw92zxrPBwu","u3rVy2TMAxnOia","zu5SuK0","veDHv3e","tNfRAxa","qK5puei","kcGOlISPkYKRkq","yw5HBhL6zvbVCW","uM1XsMG","AgfYza","uxjPufi","Ehroq3y","igzHBgXPBMCGyG","DKjVs3e","A3PhsKi","C2nVCMu","q3LRruW","zMLUza","AxneCMf3","D2fYBG","zw5NAw5LlcbNCG","CMfUzg9T","Bw92zq","tu5OvLi","CMvUzxnZ","CMv0DxjUicHMDq","AxrPB24","swvvzvC","ChjVDg90ExbL","mZbkswLUsva","AvzTquS","A3f5uK0","rwXmDxC","EefluuK","C2vHCMnO","zhH2rLa","mZa3mdyYqKTTrKrO","qKXwuee","yMLUza","DMvYyM9Zzq","BM90ihjLywr5la","CM4GDgHPCYiPka","sKzrrgi","C0rvAfG","y29SB3i","yw5KBwfZDgvYia","ignHChr1CMvZ","DMfSDwf0Aw9Ula","zuTQwuS","zNjVBq","y2fWDhvYzwq","BgvUz3rO","y0j4r0e","C3rVy2TMAxnO","uNvMyMi","Bw92zxm","ENfMC1C","EMvkrgW","Dgnes2y","BgfIzwW","ruPIywW","ELDQsgC","Bg9N","ChjVBw90Aw9U","BwLU","BwvKAxvT","seTwq0G","z0PlExq","AhHwCgy","yM9HCMq","y29UC29Szq","Avnkvhu","Dg9tDhjPBMC","zcbTB2rL","DhjHy2u","Bw92zsbLCNjVCG","zgvZy3jPChrPBW","BMn0Aw9UkcKG","CuDlrxq","ywnRihrVigHHCG","tMT4ueC","uwndv2y","DhLWzq","ntq4oti1vgzws2f4","vLnzDg8","qwTMCg0","zxjYB3i","zK9qyxe","FJGWma","E30Uy29UC3rYDq","De9uz04","DxLVuui","zMXVB3i","C2fU","y3rVCIGICMv0Dq","Dw5KBW","DhvYBG","C3rYzw5NDgG","r0vRuey","qMDtsxq","idqTCgX5ihnLyq","CMf0Aw5N","Aw5JBhvKzxm","yxbWBhK","zMvU","mZmZotm1n01KChzgCG","AxndAgvJA21HDa","ohzct0Xzwq","DgfIBgu","zxL4A2i","whDnz2G","C2XPy2u","zwfZEq","yKflsLC","mti2nJi2mfjoCvLHDa","C29YDa","tfH4sxe","twfZDgvY","qMvNAw5Uzxi","DKzIwgm","txfozeq","Ce1Xwu8","qwr2yw5JzwqGzq","qMzcDwm","mJq4ndu5v014Bu1m","mJDtC29fqw0","y29UC3rYDwn0BW","mtmYntCWnhvWrvbjsG","FJe0mda","AwnZigfUzcbTyq","mJaXnZuWntb4txv4B0y","u1njrMe","CMvK","zxHJzxb0Aw9U","vvLdv0O","B20GBw92zxmSia","Dg9mB3DLCKnHCW","t3vSCgK","t2vcvem"];return(Pn=function(){return e})()}function An(e){const t=En,n={};n[t(197)]=function(e,t){return e>t},n.Oulpi=function(e,t){return e<t},n[t(164)]=function(e,t){return e*t},n[t(246)]=function(e,t){return e*t};const s=n,r={};r[t(176)]=!0;const a=e[t(192)](r);if(0===a[t(188)])return null;const i=a.filter(e=>e.captured);return s.EJbal(i.length,0)&&s[t(274)](Math[t(158)](),.3)?i[Math.floor(s[t(164)](Math.random(),i[t(188)]))]:a[Math[t(229)](s[t(246)](Math.random(),a.length))]}function Hn(e){const t=En,n={};n[t(247)]=function(e,t){return e===t},n[t(256)]=function(e,t){return e-t},n[t(147)]=function(e,t){return e===t},n[t(129)]=function(e,t){return e>t},n.BNOPB=function(e,t){return e*t};const s=n,r={};r[t(176)]=!0;const a=e[t(192)](r);if(s[t(147)](a.length,0))return null;let i=null,o="w"===e[t(233)]()?-1/0:1/0;for(const c of a){e[t(159)](c);const n=Ln(e);e[t(232)](),"w"===e.turn()?s[t(129)](n,o)&&(o=n,i=c):n<o&&(o=n,i=c)}if(Math[t(158)]()<.2){const n=a[t(252)]((n,r)=>{const a=t;e[a(159)](n);const i=Ln(e);e.undo(),e[a(159)](r);const o=Ln(e);return e[a(232)](),s.XwMgh(e[a(233)](),"w")?s.vFbXc(o,i):i-o}),r=n.slice(0,Math[t(201)](3,n[t(188)]));return r[Math[t(229)](s[t(142)](Math[t(158)](),r.length))]}return i}function In(e){const t=En;var n,s,r,a,i,o;return(n=Sn,s=e,r=4,a=-1/0,i=1/0,o="w"===e[t(233)](),n(s,r,a,i,o))[t(159)]}const Tn={};Tn.id=bn(249),Tn.label=bn(255),Tn[bn(213)+"n"]=bn(126)+bn(272)+"occasional"+bn(183),Tn[bn(238)]=bn(225);const Gn={};Gn.id=bn(202),Gn[bn(196)]="Club Player",Gn[bn(213)+"n"]=bn(135)+bn(266)+"terial awa"+bn(161),Gn[bn(238)]=bn(265);const Kn={};function En(e,t){e-=121;const n=Pn();let s=n[e];if(void 0===En.hOGDCo){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};En.HzzHCz=r,En.dmEhYa={},En.hOGDCo=!0}const a=e+n[0],i=En.dmEhYa[a];if(i)s=i;else{const e=function(e){this.TVHeBZ=e,this.YEhlVV=[1,0,0],this.DIPYzn=function(){return"newState"},this.obnqhx="\\w+ *\\(\\) *{\\w+ *",this.sXAMhe="['|\"].+['|\"];? *}"};e.prototype.DcbAdc=function(){const e=new RegExp(this.obnqhx+this.sXAMhe).test(this.DIPYzn.toString())?--this.YEhlVV[1]:--this.YEhlVV[0];return this.GKmZpg(e)},e.prototype.GKmZpg=function(e){return Boolean(~e)?this.AlbeTi(this.TVHeBZ):e},e.prototype.AlbeTi=function(e){for(let t=0,n=this.YEhlVV.length;t<n;t++)this.YEhlVV.push(Math.round(Math.random())),n=this.YEhlVV.length;return e(this.YEhlVV[0])},new e(En).DcbAdc(),s=En.HzzHCz(s),En.dmEhYa[a]=s}return s}Kn.id="hard",Kn[bn(196)]=bn(254),Kn.description=bn(259)+bn(184)+bn(237)+"rch depth",Kn[bn(238)]="~2000";const Un={};Un.id=bn(190),Un[bn(196)]=bn(138)+"16",Un[bn(213)+"n"]="Real NNUE "+bn(157)+bn(182)+bn(234),Un[bn(238)]="~3200",Un[bn(128)+bn(269)]=!0;const _n=[Tn,Gn,Kn,Un];!function(){const e=On,t=Yn();for(;;)try{if(192581===parseInt(e(582))/1*(parseInt(e(521))/2)+-parseInt(e(567))/3+-parseInt(e(498))/4*(-parseInt(e(530))/5)+parseInt(e(493))/6*(parseInt(e(550))/7)+-parseInt(e(573))/8+parseInt(e(515))/9+-parseInt(e(543))/10*(-parseInt(e(500))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Wn=function(){const e=On,t={};t.cZKLp=e(537);const n=t;let s=!0;return function(t,r){const a=e;if(a(537)===n[a(559)]){const e=s?function(){if(r){const e=r[a(534)](t,arguments);return r=null,e}}:function(){};return s=!1,e}if(_0x4a0df5){const e=_0x319c35[a(534)](_0x4707ab,arguments);return _0x2dee19=null,e}}}()(void 0,function(){const e=On;return Wn.toString().search(e(525)+"+$")[e(566)]()[e(577)+"r"](Wn)[e(518)](e(525)+"+$")});function Yn(){const e=["y3vYCMvUDa","C3rHCNry","wgfHyvm","vhzRBKy","x19WCM90B19F","mtqZmhbMzM9AqG","yLjSzNm","wejlzgy","ywjZ","y3rVCIGICMv0Dq","tMXWAK8","ChjVDg90ExbL","mJG5otC1AejUCKfy","CfrQs0i","zxHJzxb0Aw9U","BKDSBfu","C3DPCgvpzMzZzq","rxzAvwS","Dg91y2HLCW","zwjnre8","B25nB3vZzuXLyq","y1Pltha","zxjYB3i","yMLUza","A2PAEwq","B25uB3vJAevUza","D0jhB2G","rhfgwLy","Dg9tDhjPBMC","nJa1nJaXAxzKyxvn","sKrtsfG","y0j3twy","z2jHve4","svvLr0W","zNflBg0","mJi1nZa2ne9vwuzuDW","uLL6rLG","B25nB3vZzu1VDG","tezRzuW","y29UC3rYDwn0BW","BMn0Aw9UkcKG","zuPABgC","v2v3s2q","BgvUz3rO","n0DtzfPrta","z3jzD20","CM4GDgHPCYiPka","D2fYBG","mtj1rvnUrhi","C0LQuxi","B25uB3vJAe1VDG","y3vYCMvUDfK","B1Pgu1K","ndeYr0Pvuwrh","DgfIBgu","otiYourUBMDHqW","y2XPzw50wa","tg5cu0q","sNrnzwG","y29UC29Szq","vLHJEha","Ae9yCuO","EhbABxK","wNLzuNe","C3rHCNrz","ywfvtNu","q0TTteu","y2XPzw50wq","B25uB3vJAfn0yq","E30Uy29UC3rYDq","otK4otCZC0XJzLvf","y29ruLa","DhjHy2u","C2vHCMnO","AgXdq0O","yLf6Cwy","nZC5nNDetgX2va","Aw5MBW","B25nB3vZzvvW","CxfOsfu","kcGOlISPkYKRkq","B0XPuMq","Bg9N","AxntD2LWAw5N","shnXCLu","mtyYodvtwxPtAvq","CMv0DxjUicHMDq","zfLMr3a","weTyBxG","yxbWBhK","vMnYwKO","ExDRyLG","zKzeCxK"];return(Yn=function(){return e})()}function On(e,t){e-=490;const n=Yn();let s=n[e];if(void 0===On.dsQFXr){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};On.NVpCzw=r,On.oIdDft={},On.dsQFXr=!0}const a=e+n[0],i=On.oIdDft[a];if(i)s=i;else{const e=function(e){this.wVwcwC=e,this.HblFmf=[1,0,0],this.PIfSQb=function(){return"newState"},this.gMXgqt="\\w+ *\\(\\) *{\\w+ *",this.rAOjyr="['|\"].+['|\"];? *}"};e.prototype.XItOpl=function(){const e=new RegExp(this.gMXgqt+this.rAOjyr).test(this.PIfSQb.toString())?--this.HblFmf[1]:--this.HblFmf[0];return this.lUUIVc(e)},e.prototype.lUUIVc=function(e){return Boolean(~e)?this.weefTQ(this.wVwcwC):e},e.prototype.weefTQ=function(e){for(let t=0,n=this.HblFmf.length;t<n;t++)this.HblFmf.push(Math.round(Math.random())),n=this.HblFmf.length;return e(this.HblFmf[0])},new e(On).XItOpl(),s=On.NVpCzw(s),On.oIdDft[a]=s}return s}Wn();const Xn=function(){const e=On,t={aKgkh:function(e,t){return e!==t},fJQPi:e(571),LFkeL:e(568),Rxaas:"SjRuv",nGllU:e(508),RYzFX:function(e,t,n){return e(t,n)}};let n=!0;return function(e,s){const r={xpZmy:function(e,n,s){return t[On(574)](e,n,s)}},a=n?function(){const n=On;if(!t.aKgkh(t.fJQPi,t[n(576)]))return _0x3b2cfa[n(566)]()[n(518)](n(525)+"+$")[n(566)]()[n(577)+"r"](_0x1576e8)[n(518)](n(525)+"+$");if(s){if(t.Rxaas!==t[n(553)]){const t=s[n(534)](e,arguments);return s=null,t}if(!_0x3a886c)return;r[n(507)](_0x55a80e,_0x393874[n(501)],_0x166cd4.clientY)}}:function(){};return n=!1,a}}();Xn(void 0,function(){const e=On,t={HsqrU:function(e,t){return e(t)},pTjKB:function(e,t){return e+t},coQRP:e(531)+e(578),oLiRd:e(514)+e(547)+e(491)+" )",bQzqf:function(e){return e()},EJATW:e(492),gbaTN:e(560),qatMw:e(552),TvknF:e(499),LnBSD:function(e,t){return e<t}};let n;try{const s=t[e(529)](Function,t[e(551)](t[e(516)],t[e(526)])+");");n=t[e(520)](s)}catch(a){n=window}const s=n[e(504)]=n[e(504)]||{},r=[e(527),t.EJATW,e(522),t[e(570)],t.qatMw,t[e(541)],e(517)];for(let i=0;t[e(502)](i,r[e(581)]);i++){const t=Xn[e(577)+"r"][e(549)][e(561)](Xn),n=r[i],a=s[n]||t;t[e(542)]=Xn.bind(Xn),t[e(566)]=a[e(566)][e(561)](a),s[n]=t}})();const Vn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ee,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ee,description:"15 minutes"}],Zn=["bot","create","join"],Jn=()=>{var e,n,s,l,d,x,p,v,b,w,y;me();const[j]=Pe(),{user:k,isPremium:z}=r(),{haptics:q}=_t(),[L,S]=t.useState("lobby"),[P,H]=t.useState(!1),[I,T]=t.useState(!1),[K,U]=t.useState("bot"),[_,W]=t.useState("human"),[Y,O]=t.useState("medium"),[X,V]=t.useState("blitz_5"),[Z,J]=t.useState("hotCold"),[F,R]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[fe,pe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,we]=t.useState(!0),[ye,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=bt(Ce,Ne),[ze,Me]=t.useState([]),[De,Le]=t.useState(!1),[Se,Ee]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Zn.indexOf(K);let n;n="left"===e?Math.min(t+1,Zn.length-1):Math.max(t-1,0),n!==t&&(q.select(),U(Zn[n]))},[K,q]),{swipeOffset:xt,isSwiping:ht,handlers:pt}=((e={})=>{const n=On,s={sIjQr:function(e,t){return e-t},JtMeh:function(e,t){return e-t},WewKd:function(e,t){return e(t)},XBKdf:function(e,t){return e-t},fqKlm:function(e,t){return e>t},kjZyd:function(e,t){return e>t},XaaaS:n(511),bRlfs:"NlcKP",ywkbX:function(e,t){return e===t},hlCCJ:n(505),hOXqJ:function(e){return null==e?void 0:e()},qqhHU:function(e,t){return e(t)},grYwm:function(e,t,n){return e(t,n)},XKXmx:function(e,t,n){return e(t,n)},VcrZJ:function(e,t){return e!==t},IKKnd:n(497),dYfGp:n(569),ebMDO:n(579),DqFZV:function(e,t){return e(t)},XuLxC:function(e,t,n){return e(t,n)},EvZUk:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[x,h]=s[n(580)](t.useState,!1),f={};f[n(539)]=0,f[n(509)]=0,f.currentX=0,f.currentY=0,f.isSwiping=!1;const p=s[n(565)](t.useRef,f),g=s.XuLxC(t.useCallback,(e,t)=>{const s=n,r={};r[s(539)]=e,r[s(509)]=t,r.currentX=e,r[s(496)]=t,r[s(528)]=!0,p[s(538)]=r,h(!0)},[]),v=s.grYwm(t.useCallback,(e,t)=>{const r=n;if(!p[r(538)][r(528)])return;p[r(538)].currentX=e,p[r(538)].currentY=t;const a=s[r(494)](e,p.current.startX),i=s[r(503)](t,p[r(538)][r(509)]),o={};o.x=a,o.y=i,s[r(580)](m,o)},[]),b=t.useCallback(()=>{const e=n;if(!p.current.isSwiping)return;const t=s[e(545)](p.current.currentX,p[e(538)].startX),a=p[e(538)].currentY-p[e(538)][e(509)],u=Math[e(546)](t),d=Math[e(546)](a);if(s[e(572)](u,d)&&s[e(572)](u,r))s[e(562)](t,0)?null==o||o():s[e(540)]!==s[e(544)]?null==i||i():_0x405a1b();else if(s[e(572)](d,u)&&d>r)if(a>0)null==l||l();else if(s[e(536)](s[e(519)],"HaKRp")){const t=_0x291c5c[e(577)+"r"].prototype[e(561)](_0x5b0697),n=_0x549ea6[_0x23e746],s=_0x3b3dbd[n]||t;t[e(542)]=_0x5f5909.bind(_0x297f8a),t.toString=s[e(566)][e(561)](s),_0xbdedd0[n]=t}else s[e(506)](c);p.current[e(528)]=!1,s[e(524)](h,!1);m({x:0,y:0})},[r,i,o,c,l]),w=t.useCallback(e=>{const t=n,r=e[t(556)][0];s[t(490)](g,r[t(501)],r[t(512)])},[g]),y=s[n(533)](t.useCallback,e=>{const t=e.touches[0];v(t.clientX,t.clientY)},[v]),j=t.useCallback(()=>{const e=n;s[e(536)]("aaUNu",e(510))?b():null==_0x59f100||_0x59f100()},[b]),C=s[n(533)](t.useCallback,e=>{const t=n;a&&s[t(533)](g,e[t(501)],e[t(512)])},[a,g]),N=s[n(490)](t.useCallback,e=>{const t=n,r=function(e){return e()};if(s[t(535)](s.IKKnd,s[t(532)])){if(!a)return;v(e[t(501)],e.clientY)}else{if(!_0x4d740c)return;r(_0x2d2221)}},[a,v]),k=t.useCallback(()=>{const e=n;if(s[e(557)]===e(548))({wBGoh:function(e){return null==e?void 0:e()}})[e(564)](_0x14a8f6);else{if(!a)return;b()}},[a,b]),z=s[n(555)](t.useCallback,()=>{const e=n;a&&p[e(538)][e(528)]&&b()},[a,b]),M={};M[n(513)+"rt"]=w,M[n(495)+"e"]=y,M[n(563)]=j,M.onMouseDown=C,M[n(575)+"e"]=N,M[n(523)]=k,M[n(558)+"ve"]=z;const D={};return D[n(554)+"t"]=d,D.isSwiping=x,D.handlers=M,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:wt,myColor:yt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:zt,resignGame:Bt,offerDraw:qt,loadGame:St,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=Dt,n={gXPoU:e(508),fNdQu:function(e,t){return e!==t},vSBJa:e(398),eDvFm:function(e,t){return e(t)},UmYEp:e(473),DVqvt:function(e,t){return e!==t},YjfuZ:e(368),pAOkp:function(e,t){return e!==t},VjScL:e(610),adBaZ:e(515),EvKTa:function(e,t){return e===t},LGvXb:e(438),wVeXT:function(e,t){return e!==t},EdBRs:e(411),qFKYS:e(532),QRihW:e(537),DMsXz:e(549),ZlqEL:e(502)+"s",VjjNH:"postgres_c"+e(587),PkGhx:e(413),hvMFn:e(620)+"s",VKGZS:function(e,t){return e>=t},ewwJC:e(423)+e(615),bUKqM:function(e,t){return e(t)},VxlFR:"Please sig"+e(421)+e(433)+"e",YSkWX:e(392),BWDxG:function(e,t){return e instanceof t},FmEdX:e(393)+e(410)+"in a game",luyda:"uoqcN",PKxBq:e(574)+e(387),CbQrm:e(436),Eglvu:e(464),DOakF:"Joined gam"+e(447)+e(554)+e(550),WvMdM:function(e,t){return e instanceof t},xWLGV:e(490)+e(426),mFfBa:function(e,t){return e(t)},pDoOY:e(441)+e(498),NUdzf:e(444),ZABME:function(e,t){return e(t)},GMVcH:function(e,t){return e(t)},BSZth:"castle",RrONM:function(e,t){return e||t},MZWOV:e(388),YUWjf:"illegal",fXUPl:function(e,t){return e(t)},JOYIC:e(427),ZVTZl:e(494),oDANU:"RGbQM",OgPwr:e(509),IbqFg:"PaviU",qMnMF:e(591),wfWtS:function(e,t){return e+t},wJIYC:function(e,t){return e+t},wLKZg:function(e,t){return e===t},UEKkm:"victory",oGFIG:e(555),BQkgu:function(e,t){return e===t},DLVxm:e(450),UXpzf:e(425),mFcgE:"White wins!",hacKJ:"Black wins!",VfUmX:function(e,t){return e(t)},SkRYc:e(621),BAFHa:"Failed to "+e(578)+e(539),maurl:function(e,t){return e||t},SutLm:e(501),jdHsR:function(e,t,n,s){return e(t,n,s)},Acsst:function(e,t){return e===t},bkylx:function(e,t){return e===t},wdBHS:function(e,t){return e===t},HtlkA:function(e,t){return e(t)},idiTo:function(e){return e()},xkQNv:function(e,t,n){return e(t,n)},TelUy:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=n.GMVcH(t.useState,new a),[d,m]=t.useState(null),[x,h]=n[e(560)](t.useState,!1),[f,p]=t.useState(null),[g,v]=n.mFfBa(t.useState,new Set),{enabled:b,volume:w}=n[e(370)](Mt),{playSound:y}=bt(b,w);n[e(581)](t.useRef,"");const j=d?d[e(575)+"rId"]===(null==s?void 0:s.id)?"w":d[e(485)+"rId"]===(null==s?void 0:s.id)?"b":null:null,C=(null==d?void 0:d[e(444)])===e(436)&&l[e(479)]()===j;n.xkQNv(t.useEffect,()=>{const t=e,r={icfvP:function(e,t){return e===t},qXuFY:t(509),tLESB:function(e,t){return e!==t},PxZBy:function(e,s){return n[t(606)](e,s)},WudLB:t(508),rnZoN:"cIjRV",SfRnu:t(538),fiQUy:function(e,t){return n.pAOkp(e,t)},soYaV:t(540),PhVqG:function(e,t){return n.eDvFm(e,t)}};if(!n[t(396)](t(537),n.QRihW)){if(!(null==d?void 0:d.id))return;const e=i.channel(t(603)+d.id).on("postgres_c"+t(587),{event:"UPDATE",schema:n.DMsXz,table:n[t(415)],filter:"id=eq."+d.id},e=>{const n=t,i=e[n(465)];if(r.icfvP(i[n(444)],r.qXuFY)&&r[n(437)](d.status,n(509))&&(n(358)!==n(531)?r[n(457)](i[n(565)],r[n(524)])?y("draw"):i[n(424)]===(null==s?void 0:s.id)?r[n(437)](n(365),r[n(420)])?_0x123178=n(508):y(r[n(440)]):r[n(391)](n(540),r.soYaV)?_0x1b14f5("defeat"):y(n(555)):(_0x324a96["removeChan"+n(584)](_0x279903),_0x141ad3[n(449)+n(584)](_0x4dd965))),r[n(572)](m,e=>e?{...e,status:i.status,result:i[n(565)],pgn:i[n(429)],currentFen:i[n(459)+"n"],moveCount:i[n(430)],whiteTimeRemaining:i[n(622)+n(488)],blackTimeRemaining:i["black_time"+n(488)],winnerId:i[n(424)],blackPlayerId:i[n(375)+"er_id"],startedAt:i.started_at}:null),i[n(459)+"n"]){const e=new a(i[n(459)+"n"]);r.PhVqG(u,e)}})[t(432)](),o=i[t(513)](t(446)+d.id).on(n.VjjNH,{event:n.PkGhx,schema:n[t(471)],table:n[t(544)],filter:t(340)+"."+d.id},e=>{const a=t,i={};i.YCgRJ=n.gXPoU;const o=i;if(n[a(396)](n[a(442)],a(453))){const t=e.new,r=t.move_uci;if(r&&r[a(624)]>=4){const e=r[a(535)](2,4);v(t=>new Set([...t,e]))}if(t[a(507)]!==(null==s?void 0:s.id)){const e=t[a(404)];if(e.includes("#"))n[a(362)](y,n[a(346)]);else if(e[a(487)]("+")){if(n[a(486)](a(372),a(372))){const e=_0x6a3635?function(){if(_0x391e1e){const e=_0x138ad9[a(592)](_0x2b4f28,arguments);return _0x3edc7e=null,e}}:function(){};return _0x346acd=!1,e}y(n[a(633)])}else if(e[a(487)]("x")){if(!n[a(395)](n.VjScL,n.adBaZ)){const e=_0x11f2ac.apply(_0xaffd41,arguments);return _0x3121e1=null,e}y(a(611))}else n[a(606)](e,n[a(474)])||e===a(427)?n.wVeXT(a(411),n.EdBRs)?_0x5cb1d1(o.YCgRJ):y(a(613)):n[a(362)](y,n.qFKYS)}}else r[a(572)](_0x378e59,!1)})[t(432)]();return()=>{const n=t;i[n(449)+n(584)](e),i[n(449)+n(584)](o)}}if(_0x36bbeb){const e=_0xf6d2ec[t(592)](_0x2d8d98,arguments);return _0x300cbe=null,e}},[null==d?void 0:d.id,null==d?void 0:d.status,null==s?void 0:s.id,y]);const N=t.useCallback(async t=>{const s=e,r={tFXAX:function(e,t){return n[Lt(456)](e,t)}};h(!0),n[s(362)](p,null);try{const{data:e,error:o}=await i.from(n[s(415)])[s(609)]("*").eq("id",t)[s(484)+"e"]();if(o)throw o;if(!e)throw new Error(n[s(385)]);const c={};c.id=e.id,c[s(575)+s(514)]=e[s(381)+"er_id"],c["blackPlaye"+s(514)]=e["black_play"+s(412)],c.status=e[s(444)],c.result=e.result,c.pgn=e[s(429)]||"",c[s(463)]=e[s(459)+"n"],c[s(576)]=e[s(430)]||0,c.timeControl=e.time_control,c[s(545)+"emaining"]=e["white_time"+s(488)],c[s(408)+"emaining"]=e[s(612)+s(488)],c.whitePalette=e[s(608)+s(461)],c.blackPalette=e.black_palette,c[s(569)+s(373)]=e["challenge_"+s(498)],c[s(516)]=e[s(424)],c[s(605)]=e[s(341)],c[s(361)]=e[s(414)],n[s(362)](m,c);const l=new a(e.current_fen);u(l);const d={};d[s(481)]=!0;const{data:x}=await i[s(367)](s(620)+"s")[s(609)](s(349)).eq(s(469),t)[s(541)](s(634)+"r",d);if(x){const e=new Set;x.forEach(t=>{const n=s;t[n(349)]&&r[n(482)](t[n(349)][n(624)],4)&&e[n(347)](t[n(349)].substring(2,4))}),n[s(448)](v,e)}}catch(o){p(o instanceof Error?o[s(616)]:"Failed to "+s(526))}finally{h(!1)}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(!s)return o[c(451)](n[c(546)]),null;h(!0),p(null);try{const e=At[t]||null,{data:l}=await i[c(558)](c(562)+"hallenge_c"+c(373)),u={};u[c(381)+c(412)]=s.id,u[c(444)]=n[c(529)],u[c(551)+"ol"]=t,u[c(622)+c(488)]=e,u[c(612)+c(488)]=e,u[c(608)+c(461)]=a,u[c(626)]=r,u["challenge_"+c(498)]=l;const{data:d,error:m}=await i[c(367)]("chess_games")[c(345)](u)[c(609)]().single();if(m)throw m;return o[c(602)](r?c(517)+c(618)+c(593)+c(496):c(369)+"code: "+l),await n[c(362)](N,d.id),d.id}catch(l){const e=n[c(542)](l,Error)?l[c(616)]:"Failed to create game";return n[c(448)](p,e),o[c(451)](e),null}finally{n[c(448)](h,!1)}},[s,N]),z=n[e(586)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(451)](n[a(407)]),!1;h(!0),p(null);try{if(!n[a(486)](n[a(547)],a(397))){const{data:e,error:c}=await i.from(n[a(415)])[a(609)]("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(a(423)+a(615));if(e[a(444)]!==a(392))throw new Error(n.PKxBq);if(e[a(381)+a(412)]===s.id)throw new Error(a(583)+"n your own"+a(472));const{error:l}=await i.from(a(502)+"s").update({black_player_id:s.id,black_palette:r,status:n.CbQrm,started_at:(new Date)[a(614)+"g"](),last_move_at:(new Date).toISOString()}).eq("id",t);if(l)throw l;return n[a(448)](y,n[a(493)]),o[a(602)](n[a(360)]),await N(t),!0}if(_0x2ff606){const e=_0x2d85c6[a(592)](_0x67111d,arguments);return _0x353e24=null,e}}catch(c){const e=n[a(499)](c,Error)?c[a(616)]:n.xWLGV;return p(e),o[a(451)](e),!1}finally{n[a(512)](h,!1)}},[s,N,y]),M=n[e(586)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(451)](n[a(407)]),!1;n[a(362)](h,!0),n[a(512)](p,null);try{const{data:e,error:s}=await i.from(n[a(415)])[a(609)]("id").eq(n.pDoOY,t[a(506)+"e"]()).eq(n[a(536)],a(392)).maybeSingle();if(s)throw s;if(!e)throw new Error("Invalid or expired challenge c"+a(373));return await z(e.id,r)}catch(c){const e=n[a(499)](c,Error)?c[a(616)]:a(490)+a(348)+"de";return p(e),o[a(451)](e),!1}finally{n[a(409)](h,!1)}},[s,z]),D=t.useCallback(async(t,r,c)=>{const m=e,x={dIEkG:function(e,t){return n.GMVcH(e,t)},vntoe:"check",IgENW:n[m(521)]};if(n[m(559)](!d,!s)||!C)return!1;try{if(n[m(606)](m(388),n[m(500)])){const e={};e[m(367)]=t,e.to=r,e.promotion=c;const h=l[m(532)](e);if(!h)return y(n.YUWjf),!1;l.isCheckmate()?n.fXUPl(y,n[m(346)]):l.isCheck()?y(m(368)):h[m(595)]?y("capture"):h[m(417)]===m(438)||h[m(417)]===n[m(378)]?m(405)===n[m(510)]?_0x5c22c2[m(347)](_0x13a9bd[m(349)][m(535)](2,4)):n[m(409)](y,"castle"):y(n[m(600)]),u(new a(l[m(598)]())),n[m(619)](v,e=>new Set([...e,r]));const f=l[m(429)](),p=l[m(598)]();let g=null,b=null,w="active";return l[m(419)]()&&(n.EvKTa(n[m(418)],m(635))?x[m(452)](_0x8f007f,x.vntoe):(w=n[m(364)],l[m(522)+"e"]()?m(400)===n[m(416)]?(g="w"===l[m(479)]()?n[m(527)]:m(450),b="w"===l[m(479)]()?d[m(485)+m(514)]:d[m(575)+m(514)]):_0x2d08f9(x[m(483)]):g=n[m(552)])),await i[m(367)](m(620)+"s")[m(345)]({game_id:d.id,player_id:s.id,move_number:d[m(576)]+1,move_san:h.san,move_uci:n.wfWtS(n[m(475)](t,r),c||""),fen_after:p}),await i[m(367)]("chess_games")[m(594)]({pgn:f,current_fen:p,move_count:n[m(475)](d[m(576)],1),last_move_at:(new Date).toISOString(),status:w,result:g,winner_id:b,completed_at:w===m(509)?(new Date).toISOString():null}).eq("id",d.id),n[m(606)](w,n[m(364)])&&g&&(m(530)===m(571)?_0x5c96c2(n.UmYEp):(await B(d[m(575)+m(514)],d[m(485)+m(514)],g),g===m(508)?y(n[m(552)]):n[m(543)](b,null==s?void 0:s.id)?y(n[m(495)]):y(n.oGFIG),n[m(401)](g,n[m(422)])?o.success("w"===j?n.UXpzf:n.mFcgE):g===n[m(527)]?o.success("b"===j?n[m(528)]:n[m(523)]):o[m(476)](n[m(581)](ft,l)))),!0}_0x55b7be(!1)}catch(h){if(!n[m(395)](m(621),n.SkRYc))return!1;_0x123f7a[m(476)](_0x4da842(_0x25857e))}},[l,d,s,C,j,y]),B=t.useCallback(async(t,r,a)=>{const l=e;if(!n.maurl(!t,!r)&&!n[l(401)](a,l(439)))try{if(l(501)!==n[l(350)])_0x58b00f[l(451)](n.BAFHa,_0x393d40);else{const{data:e}=await i[l(367)](l(556))[l(609)](l(628)+l(566)).in(l(477),[t,r]);if(!e||n[l(396)](e[l(624)],2))return;const u=e.find(e=>e[l(477)]===t),d=e[l(462)](e=>e[l(477)]===r);if(n[l(559)](!u,!d))return;const m=u.elo_rating||1200,x=d.elo_rating||1200,h="draw"===a?n[l(552)]:a,f=n[l(533)](c,m,x,h),p={};p[l(582)]=f.white[l(352)];const g={};if(g.elo_rating=f[l(520)].newRating,await Promise[l(366)]([i.from(l(556))[l(594)](p).eq(l(477),t),i[l(367)](l(556)).update(g).eq("user_id",r)]),n[l(357)](null==s?void 0:s.id,t)){const e=f[l(466)].change;o.info(l(563)+f[l(466)].newRating+" ("+(n.VKGZS(e,0)?"+":"")+e+")")}else if(n[l(617)](null==s?void 0:s.id,r)){const e=f[l(520)][l(548)];o.info(l(563)+f[l(520)][l(352)]+" ("+(e>=0?"+":"")+e+")")}}}catch(u){}},[s]),q=t.useCallback(async()=>{const t=e;if(n.RrONM(!d,!s)||!j)return;const r=n[t(504)](j,"w")?n[t(527)]:t(450),a=n[t(617)](j,"w")?d[t(485)+t(514)]:d[t(575)+t(514)];await i.from(t(502)+"s")[t(594)]({status:n[t(364)],result:r,winner_id:a,completed_at:(new Date).toISOString()}).eq("id",d.id),await B(d[t(575)+t(514)],d.blackPlayerId,r),o.info(t(445)+"ed")},[d,s,j,B]),L=t.useCallback(async()=>{const t=e;o.info("Draw offer"+t(478)+t(470)+t(588)+"n this ver"+t(443)),d&&(await i[t(367)](n[t(415)])[t(594)]({status:n.OgPwr,result:n.gXPoU,completed_at:(new Date)[t(614)+"g"]()}).eq("id",d.id),await n[t(533)](B,d[t(575)+t(514)],d[t(485)+t(514)],n[t(552)]))},[d,B]),S=t.useCallback(t=>{const n=e,s={};return s[n(386)]=t,s.verbose=!0,l[n(343)](s)[n(394)](e=>e.to)},[l]),P={};return P[e(631)]=l,P[e(568)]=d,P.isMyTurn=C,P[e(363)]=j,P[e(596)]=x,P.error=f,P[e(629)]=D,P[e(468)]=k,P[e(376)]=z,P.joinByCode=M,P[e(564)]=q,P[e(567)]=L,P[e(455)]=N,P["getAvailab"+e(377)]=S,P[e(570)+"es"]=g,P})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),S("lobby")};((e={})=>{const n=cn,s={rZVey:function(e,t){return e instanceof t},BOwlk:function(e,t){return e instanceof t},TuZXd:function(e){return e()},WyoOG:function(e,t){return e&&t},MoERz:function(e){return e()},QMhbN:function(e,t){return e===t},VqLxx:function(e){return e()},okYkl:n(463),OHmyA:function(e){return e()},DlmUl:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=s[n(516)](Mt),m=t.useCallback(e=>{const t=n;if(s[t(526)](e[t(534)],HTMLInputElement)||s[t(551)](e[t(534)],HTMLTextAreaElement)||e.target["isContentE"+t(497)])return;const m=e[t(517)][t(501)+"e"]();switch(m){case"m":s[t(468)](u),o[t(544)](d?t(478)+"d":t(506)+t(493),{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":s.WyoOG(c,r)&&(e[t(530)+"ault"](),s.TuZXd(r));break;case"d":c&&l&&a&&(e[t(530)+t(553)](),s[t(462)](a));break;case t(477):i&&(e[t(530)+t(553)](),i());break;case"?":case"/":(!e[t(509)]||s.QMhbN(m,"?"))&&(e[t(530)+t(553)](),s[t(507)](an))}},[u,d,r,a,i,c,l]);s[n(492)](t.useEffect,()=>{const e=n;return window["addEventLi"+e(538)](s[e(469)],m),()=>window["removeEven"+e(519)](e(463),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&wt?qt:void 0,onBackToLobby:"lobby"!==L?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:wt}),t.useEffect(()=>{const e=j.get("game");e&&St(e).then(()=>S("game"))},[j,St]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ee(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));Me(r)}else Me([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(S("game"),null===et&&tt(Se))},[null==vt?void 0:vt.status,L,Se,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ee(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Tt=async()=>{if(!k)return void H(!0);if(!z)return void T(!0);const e=Ie.find(e=>e.id===Z),t=(null==e?void 0:e.white)||{};await Nt(X,F,t)&&S("waiting")},Gt=async e=>{if(!k)return void H(!0);if(!z)return void T(!0);const t=Ie.find(e=>e.id===Z),n=(null==t?void 0:t.black)||{};await kt(e,n)&&S("game")},Kt=()=>ze.length?ze.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Se)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Se)-Math.abs((t.white_elo||1200)-Se)):[],Et=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(Z);const n=Ie.filter(e=>e.id!==Z),s=n[Math.floor(Math.random()*n.length)];pe(s.id),S("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=_n.find(e=>e.id===Y))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Ut=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Wt=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Ut(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ft(ee))),!0;oe(!0);const i=function(e){const t=En,n={TGaWq:function(e,t){return e+t}};n[t(145)]=function(e,t){return e*t},n.uOHLs=t(146),n[t(228)]=function(e,t){return e+t},n.BgSIt=t(190);const s=n;switch(e){case"easy":return s[t(140)](300,s[t(145)](Math[t(158)](),500));case t(202):return 500+1e3*Math[t(158)]();case s.uOHLs:return s[t(228)](800,1500*Math[t(158)]());case s[t(236)]:return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=En,s={gJKyt:function(e,t){return e(t)},iVmAK:function(e,t){return e(t)},QTnIO:function(e,t){return e(t)}};switch(t){case n(249):return s[n(204)](An,e);case n(202):return s[n(167)](Hn,e);case n(146):case n(190):return In(e);default:return s.QTnIO(An,e)}}(ee,Y);if(c){const e=Ut(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ft(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,Y,ke,q]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Ae,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx($t,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(f,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===L&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Zn.map(e=>u.jsx("button",{onClick:()=>{q.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(G,{onClick:Et,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(f,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:_n.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(Z===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Te,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ge,{to:"/openings",children:u.jsxs(G,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ke,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ge,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!z&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(G,{onClick:()=>T(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&z&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Se).color} text-white font-display text-base sm:text-lg`,children:Se}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Se).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(G,{onClick:async()=>{if(!k)return void H(!0);if(!z)return void T(!0);const e=Kt().filter(e=>e.white_player_id!==k.id);e.length>0?await Gt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Tt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Kt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(f,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Vn.map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(Z===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>R(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>R(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(G,{onClick:Tt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!z,children:[!z&&u.jsx(We,{className:"h-4 w-4"}),"Create Game",u.jsx(Ye,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(G,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!z)return void T(!0);const e=Ie.find(e=>e.id===Z),t=(null==e?void 0:e.black)||{};await zt($.trim(),t)&&S("game")},disabled:jt||!z,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ze.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ze.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Se)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Se,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Vn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(A,{children:u.jsxs(M,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Se+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Se+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Se+a.loss]})]})]})]})}),u.jsx(G,{size:"sm",onClick:()=>Gt(e.id),disabled:jt||!z||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(f,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!F&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(G,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ve,{className:"h-4 w-4"})})]})]}),u.jsx(G,{variant:"outline",onClick:()=>{S("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(wt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?wt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===yt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ye.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(G,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Ze,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:wt,myColor:yt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:ye,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Re,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:ye,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Re,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:ye,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Rt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(G,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(G,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(_e,{className:"h-4 w-4"}),"Share Game"]}),ge&&ye.length>0&&u.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=_n.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=_n.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),!ce&&u.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Ze,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:Wt,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===xe))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===fe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Re,{whitePalette:(null==(d=Ie.find(e=>e.id===xe))?void 0:d.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===fe))?void 0:x.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Re,{whitePalette:(null==(p=Ie.find(e=>e.id===xe))?void 0:p.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===fe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Ft,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(G,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(G,{variant:"outline",onClick:Et,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Fe,{}),u.jsx(qe,{isOpen:P,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:I,onClose:()=>T(!1),trigger:"general"}),u.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?ue:ye,whitePalette:"bot-game"===L?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===L?(null==(w=Ie.find(e=>e.id===fe))?void 0:w.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===L||"w"===yt?"You":"Opponent",black:"bot-game"===L?`${null==(y=_n.find(e=>e.id===Y))?void 0:y.label} Bot`:"b"===yt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?ue.length:ye.length}})]})};export{Jn as default};
