const n="/**\n * Profit-Based Royalty System\n * \n * IMPORTANT: Visions earn 17% of PROFIT, not revenue.\n * \n * Revenue Flow:\n * 1. Customer pays order total (e.g., $49 for print)\n * 2. Platform pays fulfillment costs (Printify, shipping, fees)\n * 3. Remaining = Gross Profit\n * 4. 17% of Gross Profit → Value Appreciation Pool\n * 5. 83% of Gross Profit → Platform operations\n * \n * Value Appreciation Pool Distribution:\n * - Creator Royalties: 40%\n * - Education Fund: 25%\n * - Palette Pool: 20%\n * - Gamecard Pool: 15%\n */\n\nexport interface OrderCosts {\n  /** Gross revenue from order */\n  grossRevenueCents: number;\n  /** Printify/Lulu fulfillment cost */\n  fulfillmentCostCents: number;\n  /** Stripe/Shopify platform fees (~3%) */\n  platformFeesCents: number;\n  /** Shipping cost (if applicable) */\n  shippingCostCents: number;\n}\n\nexport interface ProfitDistribution {\n  /** Gross profit after all costs */\n  grossProfitCents: number;\n  /** Total going to value appreciation (17% of profit) */\n  valueAppreciationPoolCents: number;\n  /** Creator royalty share (40% of pool) */\n  creatorRoyaltyCents: number;\n  /** Education fund share (25% of pool) */\n  educationFundCents: number;\n  /** Palette pool share (20% of pool) */\n  palettePoolCents: number;\n  /** Gamecard pool share (15% of pool) */\n  gamecardPoolCents: number;\n  /** Platform retention (83% of profit) */\n  platformRetentionCents: number;\n  /** Profit margin percentage */\n  profitMarginPercent: number;\n}\n\n// Core economic constants\nexport const PROFIT_ECONOMICS = {\n  // Value appreciation rate - 17% of PROFIT (not revenue)\n  valueAppreciationRate: 0.17,\n  \n  // Platform retention - 83% of profit covers operations\n  platformRetentionRate: 0.83,\n  \n  // Value Appreciation Pool distribution (from print orders)\n  poolDistribution: {\n    creatorRoyalty: 0.40,    // 40% to creator\n    educationFund: 0.25,     // 25% to education\n    palettePool: 0.20,       // 20% to palette appreciation\n    gamecardPool: 0.15,      // 15% to legendary game cards\n  },\n  \n  // Marketplace 5% Fee Distribution\n  // When a vision is sold, new value = sale price - 5%\n  // 25% of fee = company cash reserve (extractable profit)\n  // 75% of fee = reinvested into attribution value pools\n  marketplaceFeeDistribution: {\n    companyProfit: 0.25,     // 25% company cash reserve (real money profit pool)\n    gamecardPool: 0.25,      // 25% to game attribution value\n    palettePool: 0.25,       // 25% to palette attribution value  \n    openingPool: 0.15,       // 15% to opening attribution value\n    platformOps: 0.10,       // 10% to platform operations\n  },\n  \n  // Opening bonus values (percentage increase for recognized book openings)\n  openingBonuses: {\n    gambit: 15,              // Gambits get +15% value bonus\n    famous: 10,              // Openings with 3+ famous players get +10%\n    standard: 5,             // Any recognized opening gets +5%\n  },\n  \n  // Estimated fulfillment costs by product type\n  estimatedCosts: {\n    print: {\n      '8x10': { fulfillment: 1200, shipping: 500 },\n      '11x14': { fulfillment: 1500, shipping: 600 },\n      '16x20': { fulfillment: 2200, shipping: 800 },\n      '18x24': { fulfillment: 2800, shipping: 900 },\n      '24x36': { fulfillment: 4000, shipping: 1200 },\n    } as Record<string, { fulfillment: number; shipping: number }>,\n    framedPrint: {\n      '8x10': { fulfillment: 3000, shipping: 1000 },\n      '11x14': { fulfillment: 3800, shipping: 1200 },\n      '16x20': { fulfillment: 5000, shipping: 1500 },\n      '18x24': { fulfillment: 6200, shipping: 1800 },\n      '24x36': { fulfillment: 8500, shipping: 2500 },\n    } as Record<string, { fulfillment: number; shipping: number }>,\n    book: {\n      standard: { fulfillment: 2500, shipping: 800 },\n      largeFormat: { fulfillment: 3500, shipping: 1000 },\n    },\n    infoCard: {\n      single: { fulfillment: 200, shipping: 100 },\n    },\n  },\n  \n  // Platform transaction fees (~3% Stripe + variable Shopify)\n  transactionFeeRate: 0.035, // 3.5% average\n  \n  // Marketplace fee on vision sales - 5% reinvested into value pools\n  marketplaceFee: 0.05, // 5%\n  \n  // Subscription contribution rate\n  subscriptionContributionRate: 0.17, // 17% of $7 = $1.19/month\n};\n\n/**\n * Calculate marketplace fee distribution for a sale\n * The 5% fee is reinvested into games/palettes/openings attribution\n */\nexport function calculateMarketplaceFeeReinvestment(salePriceCents: number): {\n  totalFeeCents: number;\n  sellerReceivesCents: number;\n  companyProfitCents: number;  // Raw cash reserve (extractable)\n  gamecardPoolCents: number;\n  palettePoolCents: number;\n  openingPoolCents: number;\n  platformOpsCents: number;\n  reinvestedCents: number;     // Total reinvested into value pools\n} {\n  const totalFeeCents = Math.round(salePriceCents * PROFIT_ECONOMICS.marketplaceFee);\n  const sellerReceivesCents = salePriceCents - totalFeeCents;\n  \n  const dist = PROFIT_ECONOMICS.marketplaceFeeDistribution;\n  const companyProfitCents = Math.round(totalFeeCents * dist.companyProfit);\n  const gamecardPoolCents = Math.round(totalFeeCents * dist.gamecardPool);\n  const palettePoolCents = Math.round(totalFeeCents * dist.palettePool);\n  const openingPoolCents = Math.round(totalFeeCents * dist.openingPool);\n  const platformOpsCents = Math.round(totalFeeCents * dist.platformOps);\n  \n  // Reinvested = everything except company profit\n  const reinvestedCents = gamecardPoolCents + palettePoolCents + openingPoolCents + platformOpsCents;\n  \n  return {\n    totalFeeCents,\n    sellerReceivesCents,\n    companyProfitCents,\n    gamecardPoolCents,\n    palettePoolCents,\n    openingPoolCents,\n    platformOpsCents,\n    reinvestedCents,\n  };\n}\n\n/**\n * Calculate profit distribution for an order\n */\nexport function calculateProfitDistribution(costs: OrderCosts): ProfitDistribution {\n  const totalCosts = costs.fulfillmentCostCents + costs.platformFeesCents + costs.shippingCostCents;\n  const grossProfitCents = Math.max(0, costs.grossRevenueCents - totalCosts);\n  \n  // 17% of profit goes to value appreciation\n  const valueAppreciationPoolCents = Math.round(grossProfitCents * PROFIT_ECONOMICS.valueAppreciationRate);\n  \n  // Distribute the pool\n  const dist = PROFIT_ECONOMICS.poolDistribution;\n  const creatorRoyaltyCents = Math.round(valueAppreciationPoolCents * dist.creatorRoyalty);\n  const educationFundCents = Math.round(valueAppreciationPoolCents * dist.educationFund);\n  const palettePoolCents = Math.round(valueAppreciationPoolCents * dist.palettePool);\n  const gamecardPoolCents = Math.round(valueAppreciationPoolCents * dist.gamecardPool);\n  \n  // Platform keeps 83%\n  const platformRetentionCents = grossProfitCents - valueAppreciationPoolCents;\n  \n  // Calculate margin\n  const profitMarginPercent = costs.grossRevenueCents > 0 \n    ? (grossProfitCents / costs.grossRevenueCents) * 100 \n    : 0;\n  \n  return {\n    grossProfitCents,\n    valueAppreciationPoolCents,\n    creatorRoyaltyCents,\n    educationFundCents,\n    palettePoolCents,\n    gamecardPoolCents,\n    platformRetentionCents,\n    profitMarginPercent,\n  };\n}\n\n/**\n * Estimate order costs for a given product\n */\nexport function estimateOrderCosts(\n  productType: 'print' | 'framedPrint' | 'book' | 'infoCard',\n  size: string,\n  priceCents: number\n): OrderCosts {\n  const costs = PROFIT_ECONOMICS.estimatedCosts;\n  \n  let fulfillmentCostCents = 2000; // Default $20\n  let shippingCostCents = 800;     // Default $8\n  \n  if (productType === 'print' && costs.print[size]) {\n    fulfillmentCostCents = costs.print[size].fulfillment;\n    shippingCostCents = costs.print[size].shipping;\n  } else if (productType === 'framedPrint' && costs.framedPrint[size]) {\n    fulfillmentCostCents = costs.framedPrint[size].fulfillment;\n    shippingCostCents = costs.framedPrint[size].shipping;\n  } else if (productType === 'book') {\n    const bookSize = size === 'large' ? 'largeFormat' : 'standard';\n    fulfillmentCostCents = costs.book[bookSize].fulfillment;\n    shippingCostCents = costs.book[bookSize].shipping;\n  } else if (productType === 'infoCard') {\n    fulfillmentCostCents = costs.infoCard.single.fulfillment;\n    shippingCostCents = costs.infoCard.single.shipping;\n  }\n  \n  // Platform fees (Stripe + Shopify)\n  const platformFeesCents = Math.round(priceCents * PROFIT_ECONOMICS.transactionFeeRate);\n  \n  return {\n    grossRevenueCents: priceCents,\n    fulfillmentCostCents,\n    platformFeesCents,\n    shippingCostCents,\n  };\n}\n\n/**\n * Calculate creator royalty for an example order\n * This is what we show users as potential earnings\n */\nexport function calculateExampleRoyalty(orderPriceDollars: number, productType: 'print' | 'framedPrint' = 'print', size: string = '16x20'): {\n  grossProfit: number;\n  creatorRoyalty: number;\n  educationContribution: number;\n  profitMargin: number;\n} {\n  const priceCents = Math.round(orderPriceDollars * 100);\n  const costs = estimateOrderCosts(productType, size, priceCents);\n  const distribution = calculateProfitDistribution(costs);\n  \n  return {\n    grossProfit: distribution.grossProfitCents / 100,\n    creatorRoyalty: distribution.creatorRoyaltyCents / 100,\n    educationContribution: distribution.educationFundCents / 100,\n    profitMargin: distribution.profitMarginPercent,\n  };\n}\n\n/**\n * Format profit-based royalty explanation for UI\n */\nexport function getRoyaltyExplanation(): {\n  headline: string;\n  bullets: string[];\n  example: { price: number; profit: number; royalty: number };\n} {\n  const example = calculateExampleRoyalty(49, 'print', '16x20');\n  \n  return {\n    headline: '17% of profit adds to vision value',\n    bullets: [\n      'Based on actual profit after fulfillment costs',\n      'Not raw revenue—honest, sustainable economics',\n      `Avg. $${example.creatorRoyalty.toFixed(2)} per $49 print order`,\n      'Sell on marketplace to realize accumulated value',\n    ],\n    example: {\n      price: 49,\n      profit: example.grossProfit,\n      royalty: example.creatorRoyalty,\n    },\n  };\n}\n\n/**\n * Calculate estimated gross margins by product category\n * For investor materials\n */\nexport function getGrossMarginsByCategory(): {\n  category: string;\n  margin: number;\n  description: string;\n}[] {\n  return [\n    {\n      category: 'Digital Downloads',\n      margin: 95,\n      description: 'Near-zero marginal cost for HD/GIF exports',\n    },\n    {\n      category: 'Unframed Prints',\n      margin: 55,\n      description: 'After Printify fulfillment and shipping',\n    },\n    {\n      category: 'Framed Canvas',\n      margin: 35,\n      description: 'Premium product with higher fulfillment costs',\n    },\n    {\n      category: 'Coffee Table Books',\n      margin: 40,\n      description: 'Lulu print-on-demand hardcover production',\n    },\n    {\n      category: 'Premium Memberships',\n      margin: 98,\n      description: 'Recurring SaaS with minimal delivery costs',\n    },\n    {\n      category: 'Marketplace Fees',\n      margin: 100,\n      description: '5% transaction fee on peer-to-peer sales',\n    },\n  ];\n}\n";export{n as default};
