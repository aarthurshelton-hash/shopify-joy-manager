import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as m,D as h,aB as p,aC as f,aD as v,aE as j,p as w,t as y,w as g,dy as C,dt as N,bo as b,dq as z,cZ as D,a1 as q,a2 as L,a3 as M,a4 as B,a5 as _,aW as A,bC as W,dz as H,b as K,y as U}from"./index-Byyho7FJ.js";import{C as J}from"./calendar-D7nu8es0.js";!function(){const e=k,t=P();for(;;)try{if(630935===parseInt(e(266))/1+parseInt(e(339))/2*(parseInt(e(317))/3)+parseInt(e(331))/4*(parseInt(e(315))/5)+parseInt(e(352))/6+-parseInt(e(270))/7+parseInt(e(253))/8+-parseInt(e(258))/9*(parseInt(e(344))/10))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const G=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[k(349)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=k,t={};t[e(278)]=e(332)+"+$";const s=t;return G.toString()[e(347)](s[e(278)])[e(341)]()[e(370)+"r"](G)[e(347)](s[e(278)])});G();const S=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function P(){const e=["zwrFy2vUDhm","nhbmu2LcsW","CMvXDwvZDf9Pza","Dg9tDhjPBMC","ChjVDMvKihn0yq","veH5CMy","mtG4nJqYmgvdsgDMzG","AxnWBgf5x25HBq","zujVzuS","C2vHCMnO","A05lD2W","yxbWBhK","sMnTCvm","B3jKzxi","ntCWmJe3mLz1Axv4zG","DgLJyxrLza","BMn0Aw9UkcKG","yMLUza","E30Uy29UC3rYDq","CgvUzgLUzW","Bw91BNq","D2fYBG","wMLuD2K","zeHWC1m","cI0TlqO","ywLSCW","DxbKyxrL","C3vJy2vZCW","zf9Jzw50CYWGDa","CgvUzgLUz19JBW","yxnJzw5KAw5N","B3vUDa","y29UC3rYDwn0BW","CMvXDwLYzwq","CMvQzwn0zwq","y3jxDLG","sgzSu1C","otu2nZq0rNvJt1vL","yxr0uu8","u2DqsMO","v2fSBgv0ihvWza","DxnLCL93ywXSzq","odfmuuXAAuq","whnpwNC","x3jLCxvLC3rZ","zLfoz0K","BgvUz3rO","DhjHy2u","EKHQtMy","z2v0","otyXnZa0qLzlwu5t","ChjVDg90ExbL","Dg90ywXFzwfYBG","C3rHDhvZ","mZK1nJKXoe9pBKHTEG","DuvnA04","Aw5MBW","C2vSzwn0","zxjYB3i","y29TCgXLDgvKxW","Dg9ju09tDhjPBG","wMHUqum","Dwj4tfu","yxrLigvYCM9YoG","ChjVzMLSzxm","uMvQzwn0Aw9Uia","z2v0vxnLCG","yw1VDw50x2nLBG","zNjVBq","Bg9N","Cgf5B3v0x2rLDa","yxbWCM92zwrFyW","Cu5zDKG","BwfW","B3vUDf9Jzw50CW","y3jLyxrLzf9HDa","C2LUz2XL","AgzKCNG","ChjVy2vZCY13Aq","tM90igf1DgHLBG","yM9KEq","C3rHDhvZlcbHBq","se5ZzfC","CMf3BL9Jzw50CW","CwztyuW","zM9YrwfJAa","zLHQywK","D1jLCgG","zNvUy3rPB25Z","z1zzrNe","y29UC29Szq","zgf0yq","B3rHBf9LyxjUzq","yxbWCM92zwq","yxv0Aa","CM4GDgHPCYiPka","y29TCgXLDgvK","CMvHC29UigLZia","zgLZCgXHEv9Uyq","nZi2odKWz1HVwKrL","D2L0AgrYyxDHBa","mJaZmtu3uvvfrLrV","rwXZrve","Dvz5uKu","tK1MthG","Aw52B2TL","AKvPu28","ig5VDcbPBIbHCa","Dw50","DxnLCL9PzcWGza","CMv0DxjUicHMDq","tgfhCe8","DgfIBgu","DxnLCL9PzcWGDa","CgvUzgLUz19HBq","mJbfAMHhBuC","kcGOlISPkYKRkq","v2nPAMC","vw5RBM93BIbvCW","EgzQte8","DxnLCL9Pza","Dg90ywXFD2L0Aa"];return(P=function(){return e})()}async function E(t){const s=k,n={};n[s(360)]=s(316)+s(260),n[s(322)]=function(e,t){return e!==t},n.ripAO="all",n[s(277)]=s(325)+s(345)+"e",n[s(259)]=s(336);const r=n;try{const n={};n[s(368)]=!1;let a=e[s(284)](r[s(360)])[s(273)]("*")[s(351)](s(291),n);t&&r[s(322)](t,r.ripAO)&&(a=a.eq("status",t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(289)](e=>e[s(336)]))],{data:l}=await e[s(284)](s(280))[s(273)](r[s(277)]).in(r[s(259)],o),{data:d}=await e[s(284)](s(257)+"ts")[s(273)](s(329)+s(308)+s(366)+"otal_withd"+s(299)).in(r[s(259)],o),u=new Map((null==l?void 0:l[s(289)](e=>[e[s(336)],e]))||[]),x=new Map((null==d?void 0:d[s(289)](e=>[e.user_id,e]))||[]),m=(c||[])[s(289)](e=>{var t,n,r;return{...e,payout_details:e[s(286)+s(363)],user_display_name:(null==(t=u[s(265)](e[s(336)]))?void 0:t[s(314)+"me"])||s(334)+"er",wallet_total_earned:(null==(n=x.get(e[s(336)]))?void 0:n[s(268)+s(338)])||0,wallet_total_withdrawn:(null==(r=x[s(265)](e[s(336)]))?void 0:r[s(337)+"drawn_cents"])||0}}),h={};return h[s(307)]=m,h.error=null,h}catch(a){const e={};return e[s(307)]=[],e[s(274)]=a,e}}function k(e,t){e-=252;const s=P();let n=s[e];if(void 0===k.cxnmzl){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};k.AfivuB=r,k.tosMzH={},k.cxnmzl=!0}const a=e+s[0],c=k.tosMzH[a];if(c)n=c;else{const e=function(e){this.EarfOL=e,this.vxxfJs=[1,0,0],this.TCBBFQ=function(){return"newState"},this.lByosn="\\w+ *\\(\\) *{\\w+ *",this.dkUpNi="['|\"].+['|\"];? *}"};e.prototype.emWgJa=function(){const e=new RegExp(this.lByosn+this.dkUpNi).test(this.TCBBFQ.toString())?--this.vxxfJs[1]:--this.vxxfJs[0];return this.XBYPwa(e)},e.prototype.XBYPwa=function(e){return Boolean(~e)?this.KcKEAU(this.EarfOL):e},e.prototype.KcKEAU=function(e){for(let t=0,s=this.vxxfJs.length;t<s;t++)this.vxxfJs.push(Math.round(Math.random())),s=this.vxxfJs.length;return e(this.vxxfJs[0])},new e(k).emWgJa(),n=k.AfivuB(n),k.tosMzH[a]=n}return n}async function I(){const t=k,s={};s.attQO=t(269),s[t(303)]=t(357),s[t(271)]=t(312),s[t(255)]=function(e,t){return e!==t},s.lcHye="crWvX",s.NMfLx=t(297)+t(290);const n=s;try{if(!n[t(255)](t(373),n.lcHye)){const{data:s,error:r}=await e[t(284)](t(316)+t(260))[t(273)](n[t(320)]);if(r)throw r;const a={};a[t(367)+t(324)]=0,a[t(330)+t(369)]=0,a[t(287)+"ount"]=0,a.approved_amount=0,a.completed_total=0,a["rejected_c"+t(369)]=0;const c=a;(s||[])[t(301)](e=>{const s=t;switch(e[s(269)]){case n[s(303)]:c["pending_co"+s(324)]++,c["pending_am"+s(369)]+=e[s(283)+"ts"];break;case s(309):c[s(287)+s(369)]++,c["approved_a"+s(358)]+=e[s(283)+"ts"];break;case n[s(271)]:c[s(275)+"total"]+=e[s(283)+"ts"];break;case s(372):c["rejected_c"+s(369)]++}});const i={};return i.data=c,i[t(274)]=null,i}_0x280642=_0x1f2997.eq(n[t(254)],_0x1e25b7)}catch(r){const e={data:null};return e.error=r,e}}S(void 0,function(){const e=k,t={};t[e(335)]=function(e,t){return e+t},t.JcmqS=e(326)+e(354),t[e(288)]=e(285),t[e(318)]=e(359),t[e(264)]=e(274),t[e(305)]=function(e,t){return e<t};const s=t,n=function(){const t=e;let n;try{n=Function(s[t(335)](s[t(350)],t(356)+'ctor("retu'+t(311)+" )")+");")()}catch(r){n=window}return n}(),r=n.console=n[e(306)]||{},a=[s[e(288)],s[e(318)],e(272),s.zHjNf,"exception",e(328),e(263)];for(let c=0;s[e(305)](c,a[e(262)]);c++){const t=S[e(370)+"r"][e(267)].bind(S),s=a[c],n=r[s]||t;t.__proto__=S.bind(S),t[e(341)]=n[e(341)][e(355)](n),r[s]=t}})(),function(){const e=R,t=X();for(;;)try{if(130639===parseInt(e(150))/1+parseInt(e(174))/2*(-parseInt(e(175))/3)+parseInt(e(149))/4*(-parseInt(e(121))/5)+parseInt(e(122))/6+-parseInt(e(147))/7+parseInt(e(182))/8+parseInt(e(143))/9)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Y=function(){const e=R,t={};t[e(111)]=e(109);const s=t;let n=!0;return function(t,r){const a=e,c={};c[a(145)]=function(e,t){return e/t},c[a(173)]=function(e,t){return e===t};const i=c;if("oYSWt"===s[a(111)])return"$"+i[a(145)](_0x2a690d,100)[a(153)](2);{const e=n?function(){const e=a;if(r){if(i[e(173)](e(171),e(165))){const t=_0x45e948[e(166)](_0x3e03e3,arguments);return _0x2af844=null,t}{const s=r[e(166)](t,arguments);return r=null,s}}}:function(){};return n=!1,e}}}()(void 0,function(){const e=R,t={};t.pjTjC=e(152)+"+$";const s=t;return Y[e(120)]()[e(184)](s.pjTjC)[e(120)]()[e(164)+"r"](Y)[e(184)](e(152)+"+$")});function X(){const e=["Dg9gAxHLza","Cf9IDxLLCL9Pza","BgvUz3rO","wfjqCfq","BKnvuvm","CMv0DxjUicHMDq","s1PUsMO","zxHJzxb0Aw9U","yNbjwuC","Cf9SAxn0Aw5NxW","z3rMs3q","y29UC3rYDwn0BW","Bxzpuey","yxbWBhK","y29UC29Szq","tvjrq3O","BMn0Aw9UkcKG","AxLRCeO","EK1bsxm","rMHeCK4","zNnuzKy","nJi2mZHXr0D4DNq","ovfyquvOra","Aufwy28","CM4GDgHPCYiPka","y2vFy2vUDhm","DxnLCL9Pza","Bg9N","z2v0x29Yx2nYzq","mtG0nJG4wxPmzNzL","zxjYB3i","C2vHCMnO","whfAEvu","Cf91C2vYx2LK","AvDXD0e","x19WCM90B19F","B3jKzxi","D2fYBG","yxv0Aa","CMTLDhbSywnLxW","C2fSzq","D2fSBgv0x3rYyq","Aw5MBW","Dg9tDhjPBMC","mJa2nZviyMDVEfm","mZe4nJeYqNL5ELHN","yxnJzw5KAw5N","u3bpEfu","tM90igf1DgHLBG","BNnHy3rPB25Z","ChjVy2vZC19Tyq","ChjVDg90ExbL","yxrLx3DHBgXLDa","tKj3EgC","C3vJy2vZCW","rwj0tMK","DMPeB1y","DgLJyxrLza","EwDwAxO","r1bPzM8","zgf0yq","yu1TvMm","yMLUza","qKvbtui","vLLpA24","z2v0vxnLCG","mJuXmJKXn1LJEhzcEG","vwvOt0m","v1n2zxO","CNbJ","ntm1nJGYDhfnyNfp","E30Uy29UC3rYDq","mta4sKX6vfHK","ntCZnJzJvu1Zuxq","y3rVCIGICMv0Dq","kcGOlISPkYKRkq"];return(X=function(){return e})()}Y();const O=function(){const e=R,t={};t[e(157)]=e(136);const s=t;let n=!0;return function(t,r){const a=e,c={};c.Igoyn=s[a(157)];const i=c,o=n?function(){const e=a;if(r){if(i.Igoyn!==e(124)){const s=r[e(166)](t,arguments);return r=null,s}{const t=_0x4ce765[e(166)](_0x4fb5cc,arguments);return _0x32f077=null,t}}}:function(){};return n=!1,o}}();function R(e,t){e-=109;const s=X();let n=s[e];if(void 0===R.YAtUhC){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};R.HWcXrN=r,R.DNStju={},R.YAtUhC=!0}const a=e+s[0],c=R.DNStju[a];if(c)n=c;else{const e=function(e){this.XEOpVo=e,this.XpMTde=[1,0,0],this.blmZiy=function(){return"newState"},this.amzfnH="\\w+ *\\(\\) *{\\w+ *",this.PypbJQ="['|\"].+['|\"];? *}"};e.prototype.ahRnOU=function(){const e=new RegExp(this.amzfnH+this.PypbJQ).test(this.blmZiy.toString())?--this.XpMTde[1]:--this.XpMTde[0];return this.GpZrny(e)},e.prototype.GpZrny=function(e){return Boolean(~e)?this.iqfWzB(this.XEOpVo):e},e.prototype.iqfWzB=function(e){for(let t=0,s=this.XpMTde.length;t<s;t++)this.XpMTde.push(Math.round(Math.random())),s=this.XpMTde.length;return e(this.XpMTde[0])},new e(R).ahRnOU(),n=R.HWcXrN(n),R.DNStju[a]=n}return n}function Z(e){const t=R,s={};s[t(138)]=function(e,t){return e/t};return"$"+s.aMmVc(e,100)[t(153)](2)}function T(){var G,S;const{user:P}=t(),Y=s(),[X,O]=n.useState(!1),[R,T]=n.useState(!0),[V,F]=n.useState([]),[Q,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[P]);const oe=async()=>{if(!P)return void T(!1);const{data:t}=await e.rpc("has_role",{_user_id:P.id,_role:"admin"});!0===t&&(O(!0),await le()),T(!1)},le=async()=>{const[e,t]=await Promise.all([E(ee),I()]);e.data&&F(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(U,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(U,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(U,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(U,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(U,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(U,{variant:"outline",children:e})}};return R?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):P&&X?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Y(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Z(Q.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Z(Q.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Z(Q.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(v,{value:"pending",children:"Pending"}),r.jsx(v,{value:"approved",children:"Approved"}),r.jsx(v,{value:"completed",children:"Completed"}),r.jsx(v,{value:"rejected",children:"Rejected"}),r.jsx(v,{value:"all",children:"All"})]}),r.jsx(j,{value:ee,children:r.jsxs(c,{children:[r.jsxs(w,{children:[r.jsx(y,{children:"Withdrawal Requests"}),r.jsxs(g,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===V.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(N,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:V.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(b,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(J,{className:"h-3 w-3"}),D(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",Z(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:Z(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(q,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(L,{children:[r.jsxs(M,{children:[r.jsxs(B,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(_,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(G=se.request.payout_details)?void 0:G.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:Z(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(A,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(W,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(S=se.request.payout_details)?void 0:S.email})]})]})]}),r.jsxs(H,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=k,r={};r[n(293)]=n(295)+n(353),r.fQNgI=n(316)+n(260),r[n(333)]="status";const a=r;try{const{data:{user:r}}=await e[n(310)][n(282)]();if(!r)throw new Error(a[n(293)]);const{error:c}=await e[n(284)](a[n(261)])[n(364)]({status:"approved",admin_notes:s||null,reviewed_by:r.id,reviewed_at:(new Date)[n(276)+"g"]()}).eq("id",t).eq(a[n(333)],n(357));if(c)throw c;const i={success:!0};return i[n(274)]=null,i}catch(c){const e={};return e[n(365)]=!1,e[n(274)]=c,e}}(se.request.id,re),t.success&&K.success("Withdrawal approved");break;case"reject":if(!re.trim())return K.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=k,r={};r[n(298)]=n(281)+n(313)+n(371),r[n(327)]=n(372),r[n(348)]=n(269),r[n(302)]=function(e,t){return e===t},r[n(252)]="rMEsI";const a=r;try{const{data:{user:r}}=await e[n(310)][n(282)]();if(!r)throw new Error(n(295)+"ticated");if(!s)throw new Error(a.HNsdW);const{error:c}=await e[n(284)](n(316)+n(260))[n(364)]({status:a.LaGpO,admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(276)+"g"]()}).eq("id",t).eq(a[n(348)],"pending");if(c)throw c;const i={};return i[n(365)]=!0,i.error=null,i}catch(c){if(!a[n(302)](n(361),a[n(252)])){const e={success:!1};return e.error=c,e}if(_0x414b60){const e=_0x5d5fe3[n(349)](_0x1a7e87,arguments);return _0x290d27=null,e}}}(se.request.id,re),t.success&&K.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=k,r={};r[n(343)]=n(269),r[n(300)]=n(309),r[n(319)]="Request not found or"+n(323)+n(342)+"tus",r[n(346)]="completed";const a=r;try{const{data:{user:r}}=await e[n(310)][n(282)]();if(!r)throw new Error(n(295)+n(353));const{data:c,error:i}=await e[n(284)](n(316)+n(260)).select("*").eq("id",t).eq(a.THyrf,a[n(300)])[n(292)]();if(i||!c)throw new Error(a[n(319)]);const{error:o}=await e[n(284)](n(316)+n(260))[n(364)]({status:a[n(346)],admin_notes:s?(c.admin_notes||"")+n(362)+s:c.admin_notes,completed_at:(new Date)[n(276)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(340)]=t,l[n(336)]=c.user_id,l[n(283)+"ts"]=c[n(283)+"ts"];const d={};d[n(296)]=l;const{error:u}=await e[n(304)][n(321)](n(294)+"thdrawal",d),x={success:!0};return x[n(274)]=null,x}catch(c){const e={success:!1};return e[n(274)]=c,e}}(se.request.id,re),t.success&&K.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?K.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>Y("/"),children:"Go Home"})]})})})}O(void 0,function(){const e=R,t={bpIYG:e(170),FhDrN:function(e,t){return e+t},gtfKt:function(e,t){return e+t},CwyMk:e(148)+e(151)+e(177)+" )",ayGRA:function(e,t){return e===t},KZnJj:e(144),nesRq:function(e){return e()},vjDoV:e(114),aCpbt:e(119),TLWWn:"table",VYOkn:function(e,t){return e<t}},s=t.nesRq(function(){const s=e;let n;try{if(t[s(161)]===s(170))n=Function(t[s(172)](t[s(163)](s(158)+s(169),t.CwyMk),");"))();else if(_0xacc74){const e=_0x59819f[s(166)](_0x3f0df4,arguments);return _0x222ae3=null,e}}catch(r){if(!t.ayGRA(t[s(159)],t[s(159)])){const e={};return e[s(131)]=!1,e[s(183)]=_0x23aa79,e}n=window}return n}),n=s[e(167)]=s[e(167)]||{},r=[e(180),t[e(133)],t.aCpbt,e(183),e(160),t.TLWWn,"trace"];for(let a=0;t[e(141)](a,r[e(155)]);a++){const t=O[e(164)+"r"][e(128)][e(139)](O),s=r[a],c=n[s]||t;t[e(112)]=O.bind(O),t[e(120)]=c.toString.bind(c),n[s]=t}})();export{T as default};
