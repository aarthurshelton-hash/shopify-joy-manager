import{s as t,ca as n,dG as r,dH as e}from"./index-xchx37pq.js";import{v as o,a as i,b as a}from"./visualizationSchemas-kRCRnyyo.js";import"./flagContent-BsJ94lKe.js";!function(){const t=s,n=z();for(;;)try{if(400231===parseInt(t(556))/1+parseInt(t(432))/2*(-parseInt(t(488))/3)+parseInt(t(598))/4+-parseInt(t(530))/5*(parseInt(t(542))/6)+parseInt(t(442))/7*(parseInt(t(572))/8)+parseInt(t(433))/9+-parseInt(t(537))/10)break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const c=function(){const t=s,n={};n[t(590)]=function(t,n){return t!==n},n[t(447)]=t(463);const r=n;let e=!0;return function(n,o){const i=t;if(r[i(590)](r[i(447)],i(468))){const t=e?function(){if(o){const t=o[i(461)](n,arguments);return o=null,t}}:function(){};return e=!1,t}{const t=_0x2aca78?function(){if(_0x3b2356){const t=_0x286e62[i(461)](_0x395b70,arguments);return _0x104173=null,t}}:function(){};return _0x4a401a=!1,t}}}()(void 0,function(){const t=s,n={};n[t(524)]="(((.+)+)+)+$";const r=n;return c[t(486)]()[t(596)](r[t(524)])[t(486)]().constructor(c)[t(596)](r.IhIHY)});c();const u=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[s(461)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}();function s(t,n){t-=418;const r=z();let e=r[t];if(void 0===s.OuliJz){var o=function(t){let n="",r="",e=n+o;for(let o,i,a=0,c=0;i=t.charAt(c++);~i&&(o=a%4?64*o+i:i,a++%4)?n+=e.charCodeAt(c+10)-10!=0?String.fromCharCode(255&o>>(-2*a&6)):a:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let o=0,i=n.length;o<i;o++)r+="%"+("00"+n.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(r)};s.HPYMiy=o,s.TaKyTC={},s.OuliJz=!0}const i=t+r[0],a=s.TaKyTC[i];if(a)e=a;else{const t=function(t){this.EehqqJ=t,this.meEMeF=[1,0,0],this.jmUicn=function(){return"newState"},this.zuYcEl="\\w+ *\\(\\) *{\\w+ *",this.NlVaYr="['|\"].+['|\"];? *}"};t.prototype.WcgiaY=function(){const t=new RegExp(this.zuYcEl+this.NlVaYr).test(this.jmUicn.toString())?--this.meEMeF[1]:--this.meEMeF[0];return this.AeUQHb(t)},t.prototype.AeUQHb=function(t){return Boolean(~t)?this.Zxmkct(this.EehqqJ):t},t.prototype.Zxmkct=function(t){for(let n=0,r=this.meEMeF.length;n<r;n++)this.meEMeF.push(Math.round(Math.random())),r=this.meEMeF.length;return t(this.meEMeF[0])},new t(s).WcgiaY(),e=s.HPYMiy(e),s.TaKyTC[i]=e}return e}function f(t,n,r){const e=s,o={};o[e(514)]=e(523),o[e(497)]=function(t,n){return t===n};const i=o;return(t||n[e(465)]||"")[e(609)]()[e(543)](/\s+/g," ")+"::"+(r?JSON[e(426)]({palette:r[e(589)]||i.QckMA,darkMode:r[e(494)]||!1,currentMove:i[e(497)](r[e(580)+"e"],1/0)?e(549):r[e(580)+"e"],lockedPieces:(r[e(569)+"es"]||[])[e(515)]((t,n)=>(t[e(521)]+"-"+t.pieceType)["localeComp"+e(435)](n.pieceColor+"-"+n[e(565)]))}):"{}")}async function l(o,i,a,c){const u=s,l={opQZc:function(t,n){return t(n)},lxAWC:function(t,n){return t+n},FFZCx:function(t,n,r,e){return t(n,r,e)},GcGHZ:u(505)+u(464),wVIlL:u(564)+u(462)+u(581),iBObA:u(500)+u(548)+u(561),IPCTO:function(t,n){return t===n},BsgSg:u(446),RnkpJ:"user_id",ldRcZ:u(472)+u(546)+"ts",sxMaX:u(484)+"uplicate c"+u(457)};try{const s=l[u(594)](f,i,a,c),{data:w,error:y}=await t.from(l[u(547)]).select(l.wVIlL);if(y){const t={};return t[u(485)+"e"]=!1,t.isTooSimilar=!1,t}for(const n of w||[]){const r=n[u(507)];if(s===f(n[u(465)]||void 0,r,r[u(553)+u(511)])){const r=n[u(504)]===o;let e;if(!r){if(l[u(480)]("oIJmv",l[u(606)])){let t;try{t=hkCCcI.opQZc(_0x546176,hkCCcI[u(483)]("return (fu"+u(469)+u(599)+'ctor("retu'+u(459)+" )",");"))()}catch(C){t=_0xb370e1}return t}{const{data:r}=await t[u(503)]("profiles")[u(479)](u(526)+"me").eq(l[u(456)],n[u(504)])[u(422)]();e=(null==r?void 0:r[u(526)+"me"])||u(557)+"llector"}}const i={isDuplicate:!0};return i[u(502)+"ar"]=!0,i.existingId=n.id,i[u(491)+u(603)]=r,i[u(592)+u(539)]=e,i[u(424)+"arity"]=100,i[u(532)]=l[u(487)],i}}const z=(null==c?void 0:c[u(589)])||u(523);let g;if(null==c?void 0:c[u(423)+"rs"])g=c[u(423)+"rs"];else if("custom"===z){const t=n[u(582)](t=>t.id===u(481));if(t){const n={};n[u(490)]=t.white,n[u(551)]=t[u(551)],g=n}}const x=await r(o,i,a,z,g);if(x[u(502)+"ar"]){const t={};return t[u(485)+"e"]=!1,t.isTooSimilar=!0,t[u(570)]=x["existingVisualizatio"+u(510)],t["ownedByCur"+u(603)]=x[u(491)+"rentUser"],t[u(592)+u(539)]=x[u(592)+u(539)],t.colorSimilarity=x[u(424)+u(421)],t[u(532)]=x[u(532)],t["existingCo"+u(453)]=x["existingCo"+u(453)],t[u(616)+"cPalette"]=x[u(616)+u(474)],t[u(616)+u(455)]=x[u(616)+u(455)],t[u(444)+u(601)]=x[u(444)+u(601)],t["matchedPal"+u(470)]=x[u(427)+u(470)],t["matchedPaletteSimila"+u(611)]=x[u(427)+u(434)+u(611)],t}let B;g&&(B=e(g)||void 0);const h={};return h[u(485)+"e"]=!1,h[u(502)+"ar"]=!1,h[u(573)+u(473)]=B,h[u(424)+u(421)]=x[u(424)+u(421)],h[u(616)+"cPalette"]=x[u(616)+u(474)],h[u(616)+"cGame"]=x["isIntrinsi"+u(455)],h[u(444)+u(601)]=x["matchedGam"+u(601)],h[u(427)+u(470)]=x["matchedPal"+u(470)],h["matchedPal"+u(434)+u(611)]=x[u(427)+u(434)+u(611)],h}catch(w){const t={isDuplicate:!1};return t[u(502)+"ar"]=!1,t}}async function C(n,r,e,c,u,f){const C=s,w={LsnCH:function(t,n){return t(n)},pfbIL:function(t,n){return t(n)},SUzhT:C(535)+C(498)+C(440)+C(587),vrwXn:C(541)+"N data",xUrSG:C(429)+C(430)+C(428)+C(437)+"llery",qYEnQ:"You have a"+C(418)+C(533)+C(501)+C(544)+C(527)+C(466)+C(610)+"eness",SLIxc:C(553)+C(607),pZZXP:function(t,n){return t!==n},WCTLG:C(615),fbomL:function(t,n){return t!==n},xsuIQ:C(528)};try{const s=w[C(477)](o,r);if(!s[C(492)])return{data:null,error:new Error(s[C(451)]||C(588)+C(449))};const y=await w[C(578)](i,r);if(!y.safe)return{data:null,error:new Error(y[C(532)]||w[C(458)])};const z=w.LsnCH(a,u);if(!z[C(492)])return{data:null,error:new Error(z[C(451)]||w[C(593)])};const g=await l(n,u,e[C(600)],f);if(g[C(485)+"e"]){const t=g[C(491)+"rentUser"]?w[C(586)]:C(429)+C(430)+C(509)+" "+(g[C(592)+C(539)]||C(608)+"llector");return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:g[C(491)+"rentUser"],ownerDisplayName:g[C(592)+C(539)],colorSimilarity:100}}if(g.isTooSimilar){const t=g[C(491)+C(603)]?w[C(562)]:C(438)+Math[C(571)](g[C(424)+C(421)]||30)+"% similar "+C(495)+C(583)+(g[C(592)+C(539)]||C(608)+C(518));return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:g.ownedByCurrentUser,ownerDisplayName:g[C(592)+"ayName"],colorSimilarity:g[C(424)+C(421)],reason:g[C(532)]}}const x={...f};x[C(573)+C(473)]=g["linkedPale"+C(473)];const B=x,h=n+"/"+Date[C(591)]()+"-"+r[C(543)](/[^a-z0-9]/gi,"-")[C(460)+"e"]()+C(538),D={contentType:"image/png",upsert:!1},{error:L}=await t[C(450)][C(503)](w.SLIxc).upload(h,c,D);if(L){if(w[C(475)](w[C(558)],w[C(558)])){const t=_0x137a72.apply(_0x3404a0,arguments);return _0x391428=null,t}throw new Error(C(420)+C(520)+C(540)+L[C(441)])}const{data:v}=t.storage.from("visualizat"+C(607))[C(554)+"rl"](h),m={};m[C(490)]=e[C(600)][C(490)],m[C(551)]=e[C(600)][C(551)],m.event=e.gameData[C(534)],m[C(559)]=e.gameData.date,m[C(448)]=e[C(600)][C(448)],m[C(465)]=e[C(600)][C(465)],m[C(439)]=e[C(600)][C(439)],m[C(612)]=e[C(612)],m.totalMoves=e[C(443)],m[C(553)+"ionState"]=B;const q=m,d={};d[C(504)]=n,d.title=r,d[C(465)]=u||null,d.game_data=q,d[C(531)]=v.publicUrl;const{data:A,error:M}=await t[C(503)](C(505)+C(464)).insert(d).select()[C(422)]();if(M)throw await t.storage[C(503)](C(553)+C(607)).remove([h]),new Error(C(420)+C(555)+"lization: "+M[C(441)]);const H={};return H[C(431)]=A,H[C(451)]=null,H}catch(y){if(w.fbomL(w.xsuIQ,C(452))){const t={};return t[C(431)]=null,t[C(451)]=y,t}{const t={};t[C(490)]=_0x229ef0[C(490)],t[C(551)]=_0x1627e7[C(551)],_0x44a69c=t}}}async function w(n){const r=s,e={};e[r(563)]=r(595),e[r(454)]=r(504);const o=e;try{if(o[r(563)]==o[r(563)]){const e={};e[r(419)]=!1;const{data:i,error:a}=await t[r(503)](r(505)+r(464))[r(479)]("*").eq(o[r(454)],n).order(r(489),e);if(a)throw new Error(r(420)+r(575)+r(464)+": "+a[r(441)]);const c={};return c[r(431)]=i||[],c[r(451)]=null,c}_0x172d53=_0x12bbef[r(423)+"rs"]}catch(i){const t={data:[]};return t[r(451)]=i,t}}async function y(n,r){const e=s,o={};o[e(519)]=function(t,n){return t+n};const i=o;try{const o=new URL(r).pathname[e(425)]("/"),a=o[e(467)](t=>t===e(553)+e(607)),c=o[e(512)](i[e(519)](a,1)).join("/");if(c){if(e(496)===e(552))return{data:null,error:new _0x4f4c24("Visualizat"+e(471)+"und")};await t[e(450)][e(503)](e(553)+e(607))[e(513)]([c])}const{error:u}=await t[e(503)](e(505)+e(464))[e(613)]().eq("id",n);if(u)throw new Error(e(420)+e(550)+"ualization: "+u.message);const s={};return s[e(451)]=null,s}catch(a){const t={};return t[e(451)]=a,t}}function z(){const t=["CMv0DxjUicHMDq","CMvUDfvZzxi","rfnqrhm","rurZCLe","qNnNu2C","Aw9UCW","yw5VDgHLCIbJBW","DhjPBq","igzVCIb1BMLXDq","CML0Eq","yM9HCMq","zgvSzxrL","y29UC29Szq","BeLfEhO","AxnjBNrYAw5ZAq","ihzLCNKGC2LTAq","yxnJzw5KAw5N","rMfPBgvKihrVia","yxjPDhK","C2LUz2XL","y3vZDg9Tq29SBW","y29SB3jtAw1PBa","C3bSAxq","C3rYAw5NAwz5","Bwf0y2HLzfbHBa","CYbHBhjLywr5ia","vgHPCYb2Axn1yq","BgL6yxrPB24GAq","zgf0yq","oezqv2T0AG","nJm2mZyYmxjfANbhtq","zxr0zvnPBwLSyq","yxjL","tuTXrhq","Aw4GEw91CIbNyq","vgHPCYbPCYa","Bw92zxm","CM9WCMLHDguGyW","BwvZC2fNzq","nde0nJCZq0nrzwrH","Dg90ywXnB3zLCW","Bwf0y2HLzeDHBq","y3rVCIGICMv0Dq","svnRz3O","rxLht0e","CMvZDwX0","DgXL","C3rVCMfNzq","zxjYB3i","wKDIweC","Bg9YCW","q1jguhC","y0DHBwu","uM5RCeO","AgvJAZO","u1v6Afq","CM4GDgHPCYiPka","Dg9mB3DLCKnHCW","yxbWBhK","zcWGCgDUlcbNyq","r3HhwgK","ywXPEMf0Aw9UCW","CgDU","Dca4ignVBg9YCW","zMLUzeLUzgv4","B2PyEKS","BMn0Aw9UkcKG","zxr0zuLK","Aw9Uig5VDcbMBW","rxHHy3qGzhvWBa","DhrLswq","y1bHBgv0Dgu","CfPAwfa","y29Kzq","thnUq0G","D2fYBG","C2vSzwn0","svbdve8","y3vZDg9T","r2Pnufe","BhHbv0m","rxjYB3iGAw4Gza","AxneDxbSAwnHDa","Dg9tDhjPBMC","Bgrsy1O","mZa4mZC5AfPIDvHs","y3jLyxrLzf9HDa","D2HPDgu","B3DUzwrcEun1CG","C3vJy2vZCW","C3HnyvG","zgfYA01Vzgu","Dg8Gysb2AxnPBW","Aefdqwu","whHOCxi","ywLUCYbPBMfWCa","Bg9N","rxjYB3iGy2HLyW","AxPHDgLVBIaTia","AxnuB29tAw1PBa","zNjVBq","DxnLCL9Pza","C2f2zwrFDMLZDq","ChjVDg90ExbL","z2fTzv9KyxrH","AujpyKe","CYbVD25LzcbIEq","BKLK","Aw9Uu3rHDgu","C2XPy2u","CMvTB3zL","uwnRtue","C29YDa","sgneugu","zxHJzxb0Aw9U","BgXLy3rVCG","B3jtCM0","DxbSB2fKigLTyq","CgLLy2vdB2XVCG","BLHHC3K","Bw9KzxjU","swHjsfK","ExDjque","zgLZCgXHEv9Uyq","BMCGyxqGBgvHCW","qNfnBLK","x19WCM90B19F","ndCXmtq1sKvLD2f4","Aw1Hz2vFCgf0Aa","CMvHC29U","BgfYihzPC3vHBa","zxzLBNq","vgL0BguGy29UDa","BgvUz3rO","ndC3mJe0mgzZwxLNAW","lNbUzW","yxLoyw1L","z2u6ia","sw52ywXPzcbqrW","mJrbs0Heu0m","CMvWBgfJzq","Dhj5ignOyw5NAq","DgfIBgu","AwnHDguGzxHPCW","r2nhsfO","A2LUzYbKDxbSAq","ywXS","zgvSzxrLihzPCW","yMXHy2S","se1ytw4","DMLZDwfSAxPHDa","z2v0uhvIBgLJvq","C2f2zsb2Axn1yq","mZm2ntq1twHQB01I","qw5VDgHLCIbJBW","v0nuteC","zgf0zq","vMLZDwfSAxPHDa","y2f0zxm6","CvLfBLe","B1PUt0i","AwqSihvZzxjFAq","CgLLy2vuExbL","ywXPEMf0Aw9UoG","Dw5K","wwjkBKe","Bg9JA2vKugLLyW","zxHPC3rPBMDjza","CM91BMq","ndHyrvbcy2m","BgLUA2vKugfSzq","DNv0AxK","zMv0y2GGDMLZDq","yMLUza","y29UC3rYDwn0BW","CgzIsuW","ueDsu1qXmty","y3vYCMvUDe1VDG","BwvFzgf0yq","zMLUza","BIbIEsa","turNEeq","Aw5MBW","EfvYu0C","B250zw50","sw52ywXPzcb0Aq","CgfSzxr0zuLK","BxL0v0e","BM93","B3DUzxjeAxnWBa","DNj3wg4","rKzAq3G","D05WAK4","C2vHCMnO","u2rLCK8","mta2ntK0mfPhEvzprq","E30Uy29UC3rYDq","z2fTzurHDge","zunHCMq"];return(z=function(){return t})()}u(void 0,function(){const t=s,n={SderO:function(t,n){return t!==n},HcDPe:function(t,n){return t(n)},EDsrQ:function(t,n){return t+n},qUKpa:function(t,n){return t+n},nXasy:t(602)+t(469),GjMPQ:function(t){return t()},fJJQw:t(585),MKqDt:t(517),ywIAA:t(545),GTGXn:function(t,n){return t<n}},r=n[t(482)](function(){const r=t;if(!n[r(597)](r(568),"YbJnA")){let t;try{t=n[r(516)](Function,n[r(605)](n.qUKpa(n[r(522)],r(599)+r(445)+r(459)+" )"),");"))()}catch(e){t=window}return t}if(_0x205d22){const t=_0x26e906[r(461)](_0x4187ce,arguments);return _0x39d752=null,t}}),e=r[t(614)]=r[t(614)]||{},o=[t(499),t(478),n.fJJQw,t(451),n[t(436)],n[t(525)],"trace"];for(let i=0;n.GTGXn(i,o[t(536)]);i++){const n=u[t(577)+"r"][t(506)][t(576)](u),r=o[i],a=e[r]||n;n[t(529)]=u[t(576)](u),n[t(486)]=a[t(486)][t(576)](a),e[r]=n}})();export{l as checkDuplicateVisualization,y as deleteVisualization,w as getUserVisualizations,C as saveVisualization};
