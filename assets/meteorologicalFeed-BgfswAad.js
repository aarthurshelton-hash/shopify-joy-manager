const e="/**\n * Meteorological Live Data Connector - REAL DATA ONLY\n * Connects meteorologicalAdapter to OpenWeatherMap API\n * \n * For Alec Arthur Shelton - The Artist\n * \n * REQUIRES: VITE_OPENWEATHER_API_KEY environment variable\n */\n\nimport { meteorologicalAdapter, type MeteorologicalEvent } from './meteorologicalAdapter';\nimport { liveDataCoordinator, getAPIKey } from '../../../liveData';\n\nexport interface WeatherData {\n  location: {\n    lat: number;\n    lon: number;\n    city: string;\n    country: string;\n  };\n  current: {\n    temp: number; // Celsius\n    feelsLike: number;\n    humidity: number; // 0-100\n    pressure: number; // hPa\n    windSpeed: number; // m/s\n    windDeg: number;\n    clouds: number; // 0-100%\n    visibility: number; // meters\n    weatherId: number;\n    weatherMain: string;\n    weatherDesc: string;\n  };\n  forecast?: {\n    timestamp: number;\n    temp: number;\n    pressure: number;\n    humidity: number;\n    windSpeed: number;\n    pop: number; // Probability of precipitation\n  }[];\n}\n\nexport class MeteorologicalDataFeed {\n  private apiKey: string | null = null;\n  private isRunning = false;\n\n  constructor() {\n    this.apiKey = getAPIKey('openWeatherMap') || null;\n  }\n\n  validateConfig(): void {\n    if (!this.apiKey) {\n      throw new Error(\n        '[MeteorologicalFeed] VITE_OPENWEATHER_API_KEY not configured. ' +\n        'Get a free API key at https://openweathermap.org/api'\n      );\n    }\n  }\n\n  async fetchCurrentWeather(lat: number = 40.7128, lon: number = -74.0060): Promise<WeatherData> {\n    this.validateConfig();\n\n    const response = await fetch(\n      `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${this.apiKey}&units=metric`\n    );\n\n    if (!response.ok) {\n      throw new Error(`Weather API error: ${response.status} - ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    \n    return {\n      location: {\n        lat: data.coord.lat,\n        lon: data.coord.lon,\n        city: data.name,\n        country: data.sys.country\n      },\n      current: {\n        temp: data.main.temp,\n        feelsLike: data.main.feels_like,\n        humidity: data.main.humidity,\n        pressure: data.main.pressure,\n        windSpeed: data.wind.speed,\n        windDeg: data.wind.deg || 0,\n        clouds: data.clouds.all,\n        visibility: data.visibility || 10000,\n        weatherId: data.weather[0].id,\n        weatherMain: data.weather[0].main,\n        weatherDesc: data.weather[0].description\n      }\n    };\n  }\n\n  processToEvent(data: WeatherData): MeteorologicalEvent {\n    const { current } = data;\n    \n    // Calculate derived metrics\n    const pressureTrend = (current.pressure - 1013) / 50; // Normalized around 1013 hPa\n    const tempAnomaly = current.temp - 20; // Assume 20°C baseline\n    const stormIntensity = this.calculateStormIntensity(current);\n    \n    return {\n      timestamp: Date.now(),\n      pressureTrend,\n      temperatureAnomaly: tempAnomaly,\n      humidityLevel: current.humidity,\n      windSpeed: current.windSpeed * 2.237, // Convert to mph\n      precipitationProbability: 0, // Would need forecast data\n      stormIntensity,\n      forecastAccuracy: 0.85, // Base assumption\n      climateOscillationPhase: 0 // Would need historical analysis\n    };\n  }\n\n  private calculateStormIntensity(current: WeatherData['current']): number {\n    // Simple storm intensity calculation\n    let intensity = 0;\n    \n    // Wind contribution\n    if (current.windSpeed > 20) intensity += 3;\n    else if (current.windSpeed > 10) intensity += 1;\n    \n    // Pressure contribution (low pressure = storm potential)\n    if (current.pressure < 990) intensity += 4;\n    else if (current.pressure < 1000) intensity += 2;\n    \n    // Weather condition contribution\n    const severeCodes = [200, 201, 202, 210, 211, 212, 221, 230, 231, 232]; // Thunderstorm\n    if (severeCodes.includes(current.weatherId)) intensity += 3;\n    \n    return Math.min(intensity, 10);\n  }\n\n  async start(lat?: number, lon?: number): Promise<void> {\n    if (this.isRunning) return;\n    \n    this.validateConfig();\n    this.isRunning = true;\n\n    liveDataCoordinator.registerFeed({\n      adapter: 'meteorological',\n      source: 'OpenWeatherMap',\n      endpoint: 'https://api.openweathermap.org/data/2.5/weather',\n      apiKey: this.apiKey!,\n      rateLimit: 60,\n      updateInterval: 600000,\n      retryAttempts: 3,\n      timeout: 10000\n    });\n\n    const weather = await this.fetchCurrentWeather(lat, lon);\n    const event = this.processToEvent(weather);\n    meteorologicalAdapter.processRawData(event);\n    console.log('[MeteorologicalFeed] ✓ Real weather data processed');\n\n    await liveDataCoordinator.startFeed('meteorological');\n    console.log('[MeteorologicalFeed] Started with REAL DATA');\n  }\n\n  stop(): void {\n    liveDataCoordinator.stopFeed('meteorological');\n    this.isRunning = false;\n    console.log('[MeteorologicalFeed] Stopped');\n  }\n}\n\n// Export singleton\nexport const meteorologicalDataFeed = new MeteorologicalDataFeed();\n\nconsole.log('[MeteorologicalFeed] Module loaded - REAL DATA MODE');\n";export{e as default};
