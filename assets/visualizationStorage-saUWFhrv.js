import{s as t,ca as n,dG as r,dH as e}from"./index-UzGFh8Yo.js";import{v as o,a as i,b as a}from"./visualizationSchemas-BbaldU1Z.js";import"./flagContent-0M-UjHaL.js";function s(t,n){t-=278;const r=C();let e=r[t];if(void 0===s.sDVNDw){var o=function(t){let n="",r="",e=n+o;for(let o,i,a=0,s=0;i=t.charAt(s++);~i&&(o=a%4?64*o+i:i,a++%4)?n+=e.charCodeAt(s+10)-10!=0?String.fromCharCode(255&o>>(-2*a&6)):a:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let o=0,i=n.length;o<i;o++)r+="%"+("00"+n.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(r)};s.UVJjpm=o,s.VPxXKI={},s.sDVNDw=!0}const i=t+r[0],a=s.VPxXKI[i];if(a)e=a;else{const t=function(t){this.XhvHbP=t,this.XMfPWG=[1,0,0],this.vLITzW=function(){return"newState"},this.VamPnr="\\w+ *\\(\\) *{\\w+ *",this.JaicZp="['|\"].+['|\"];? *}"};t.prototype.cxqQgM=function(){const t=new RegExp(this.VamPnr+this.JaicZp).test(this.vLITzW.toString())?--this.XMfPWG[1]:--this.XMfPWG[0];return this.LhNJBK(t)},t.prototype.LhNJBK=function(t){return Boolean(~t)?this.DrspSt(this.XhvHbP):t},t.prototype.DrspSt=function(t){for(let n=0,r=this.XMfPWG.length;n<r;n++)this.XMfPWG.push(Math.round(Math.random())),r=this.XMfPWG.length;return t(this.XMfPWG[0])},new t(s).cxqQgM(),e=s.UVJjpm(e),s.VPxXKI[i]=e}return e}!function(){const t=s,n=C();for(;;)try{if(186392===parseInt(t(480))/1*(parseInt(t(390))/2)+-parseInt(t(402))/3+-parseInt(t(385))/4*(parseInt(t(342))/5)+parseInt(t(475))/6+-parseInt(t(487))/7*(-parseInt(t(397))/8)+-parseInt(t(490))/9*(parseInt(t(438))/10)+-parseInt(t(465))/11*(parseInt(t(440))/12))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const c=function(){const t={LbptR:function(t,n){return t(n)},PyPFu:s(477)};let n=!0;return function(r,e){const o=n?function(){const n=s,o={meWAJ:function(n,r){return t[s(307)](n,r)},HKyIF:n(384)+n(447)+'rn this")( )'};if(t[n(335)]!==n(298)){if(e){const t=e[n(391)](r,arguments);return e=null,t}}else _0x998b5f=o[n(473)](_0x339973,n(303)+n(294)+o.HKyIF+");")()}:function(){};return n=!1,o}}()(void 0,function(){const t=s;return c[t(302)]()[t(494)](t(461)+"+$")[t(302)]()[t(360)+"r"](c)[t(494)]("(((.+)+)+)+$")});c();const u=function(){const t=s,n={};n[t(297)]=t(448),n.jUebU=function(t,n){return t!==n};const r=n;let e=!0;return function(n,o){const i=t,a={JCTKr:r[i(297)],JIqTI:function(t,n){return r.jUebU(t,n)},ZGNFc:i(446)},s=e?function(){const t=i,r={};r[t(421)]=function(t,n){return t===n};const e=r;if("LkDya"===a[t(432)])throw new _0x4c4ef3("Failed to fetch visu"+t(479)+": "+_0x608009[t(399)]);if(o){if(a.JIqTI(a[t(386)],t(429))){const t=o.apply(n,arguments);return o=null,t}if(e[t(421)](_0xf5c88f.code,t(285)))return{data:null,error:new _0x2157fa(t(418)+t(357)+t(405))};throw new _0x3337ff("Failed to "+t(424)+t(491)+" "+_0x1c8962[t(399)])}}:function(){};return e=!1,s}}();function f(t,n,r){const e=s,o={};o.ZnxZD=e(336),o[e(414)]=e(394);const i=o;return(t||n[e(291)]||"")[e(314)]()[e(358)](/\s+/g," ")+"::"+(r?JSON[e(332)]({palette:r[e(454)]||i.ZnxZD,darkMode:r[e(398)]||!1,currentMove:r[e(362)+"e"]===1/0?i[e(414)]:r.currentMove,lockedPieces:(r[e(356)+"es"]||[])[e(481)]((t,n)=>(t[e(472)]+"-"+t[e(467)])["localeComp"+e(395)](n[e(472)]+"-"+n[e(467)]))}):"{}")}async function w(o,i,a,c){const u=s,w={Zimvr:u(423)+u(369),oIiwn:u(394),STJSc:u(376)+u(430)+u(411),nlAot:u(410),bjYAW:function(t,n,r,e){return t(n,r,e)},RdAtk:function(t,n){return t===n},MHbPp:u(363),LRhms:u(435)+u(347),ENjeP:"Exact dupl"+u(354)+"ts",BMwsJ:function(t,n){return t===n},rmAaC:function(t,n){return t!==n},xqYuf:"DVbsq",cspKf:u(403)+u(456)+u(468)};try{const s=f(i,a,c),{data:l,error:x}=await t[u(289)](u(370)+"alizations").select(w[u(452)]);if(x){const t={};return t[u(337)+"e"]=!1,t[u(441)+"ar"]=!1,t}for(const n of l||[]){if(u(410)!==w[u(396)])return{data:null,error:new _0x31f18a(_0x47556c[u(404)]||w[u(301)])};{const r=n[u(373)],e=w.bjYAW(f,n[u(291)]||void 0,r,r[u(282)+"ionState"]);if(w[u(284)](s,e)){if(u(296)!==w[u(355)]){const r=n[u(377)]===o;let e;if(!r){const{data:r}=await t[u(289)](u(471))[u(379)](u(436)+"me").eq(u(377),n[u(377)])[u(486)]();e=(null==r?void 0:r.display_name)||w[u(292)]}const i={};return i[u(337)+"e"]=!0,i[u(441)+"ar"]=!0,i[u(393)]=n.id,i[u(341)+u(371)]=r,i[u(348)+u(412)]=e,i.colorSimilarity=100,i[u(281)]=w[u(382)],i}if(_0x3c8b0b){const t=_0x3ec4a0[u(391)](_0x55dc9f,arguments);return _0x7c6698=null,t}}}}const D=(null==c?void 0:c[u(454)])||"modern";let C;if(null==c?void 0:c[u(493)+"rs"])C=c[u(493)+"rs"];else if(w.BMwsJ(D,u(380))){const t=n[u(387)](t=>"custom"===t.id);if(t){if(!w[u(279)]("BxomG",w[u(470)])){const t=(_0x5730ba||_0x14103b[u(291)]||"")[u(314)]()[u(358)](/\s+/g," ");return t+"::"+(_0x6284ef?_0x4aeddd[u(332)]({palette:_0x5738b5[u(454)]||u(336),darkMode:_0x3ca244[u(398)]||!1,currentMove:_0x4a4822[u(362)+"e"]===_0x3e386a?w.oIiwn:_0xc8f959[u(362)+"e"],lockedPieces:(_0x589ffc[u(356)+"es"]||[])[u(481)]((t,n)=>(t[u(472)]+"-"+t[u(467)])[u(478)+u(395)](n[u(472)]+"-"+n[u(467)]))}):"{}")}{const n={};n.white=t.white,n[u(427)]=t[u(427)],C=n}}}const y=await r(o,i,a,D,C);if(y[u(441)+"ar"]){const t={};return t[u(337)+"e"]=!1,t[u(441)+"ar"]=!0,t[u(393)]=y[u(458)+"sualizatio"+u(343)],t[u(341)+"rentUser"]=y[u(341)+u(371)],t[u(348)+u(412)]=y[u(348)+u(412)],t[u(346)+"arity"]=y[u(346)+u(278)],t[u(281)]=y.reason,t[u(466)+u(349)]=y[u(466)+"lors"],t[u(326)+"cPalette"]=y.isIntrinsicPalette,t[u(326)+u(315)]=y[u(326)+u(315)],t["matchedGam"+u(286)]=y[u(400)+u(286)],t["matchedPal"+u(415)]=y[u(416)+u(415)],t[u(416)+u(328)+u(367)]=y[u(416)+"etteSimila"+u(367)],t}let g;C&&(g=e(C)||void 0);const z={};return z[u(337)+"e"]=!1,z[u(441)+"ar"]=!1,z[u(304)+"tteId"]=g,z[u(346)+u(278)]=y[u(346)+u(278)],z.isIntrinsicPalette=y[u(326)+u(426)],z.isIntrinsicGame=y["isIntrinsi"+u(315)],z["matchedGam"+u(286)]=y["matchedGam"+u(286)],z["matchedPal"+u(415)]=y[u(416)+u(415)],z[u(416)+u(328)+"rity"]=y[u(416)+u(328)+u(367)],z}catch(l){const t={};return t[u(337)+"e"]=!1,t[u(441)+"ar"]=!1,t}}async function l(n,r,e,c,u,f){const l=s,x={CiTSe:l(361),iIkJa:function(t,n){return t(n)},IkISW:"Title contains inapp"+l(450)+l(383),HdeFF:l(433)+l(347),ZkylJ:function(t,n){return t!==n},AxCHK:l(316),DZAlp:l(300)+l(417)+l(437)+l(392)+"try changi"+l(305)+l(352)+l(325)+"eness",TPXPs:l(280),wZVcY:l(370)+l(479)};try{if(l(464)!==x[l(327)]){const s=x[l(375)](o,r);if(!s[l(345)])return{data:null,error:new Error(s.error||l(423)+l(369))};const D=await x[l(375)](i,r);if(!D[l(489)])return{data:null,error:new Error(D.reason||x[l(330)])};const C=a(u);if(!C.success)return{data:null,error:new Error(C[l(404)]||"Invalid PG"+l(449))};const y=await w(n,u,e[l(287)],f);if(y[l(337)+"e"]){const t=y["ownedByCur"+l(371)]?l(389)+l(311)+l(492)+l(485)+l(408):l(389)+"lization i"+l(482)+" "+(y[l(348)+l(412)]||x[l(431)]);return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:y[l(341)+l(371)],ownerDisplayName:y["ownerDispl"+l(412)],colorSimilarity:100}}if(y[l(441)+"ar"]){if(x.ZkylJ(x[l(320)],x[l(320)])){const t=_0x5cbbae?function(){if(_0x14e4de){const t=_0x1aa8b[l(391)](_0x2f9bcb,arguments);return _0x5edbb1=null,t}}:function(){};return _0x43bbbf=!1,t}{const t=y[l(341)+l(371)]?x[l(434)]:l(321)+Math[l(474)](y.colorSimilarity||30)+(l(334)+l(443)+l(331))+(y.ownerDisplayName||l(433)+l(347));return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:y[l(341)+l(371)],ownerDisplayName:y[l(348)+l(412)],colorSimilarity:y[l(346)+l(278)],reason:y[l(281)]}}}const g={...f};g[l(304)+l(323)]=y[l(304)+l(323)];const z=g,B=n+"/"+Date[l(422)]()+"-"+r.replace(/[^a-z0-9]/gi,"-")[l(460)+"e"]()+l(442),v={};v[l(310)+"e"]=x[l(463)],v[l(306)]=!1;const{error:d}=await t.storage.from("visualizations").upload(B,c,v);if(d)throw new Error(l(365)+"upload ima"+l(488)+d[l(399)]);const{data:h}=t[l(324)].from(l(282)+l(288))[l(483)+"rl"](B),L={};L[l(364)]=e[l(287)].white,L[l(427)]=e[l(287)][l(427)],L[l(295)]=e.gameData[l(295)],L[l(462)]=e.gameData[l(462)],L[l(388)]=e[l(287)][l(388)],L[l(291)]=e[l(287)][l(291)],L[l(351)]=e[l(287)][l(351)],L[l(290)]=e[l(290)],L[l(329)]=e[l(329)],L[l(282)+l(374)]=z;const M=L,q={};q.user_id=n,q[l(419)]=r,q[l(291)]=u||null,q[l(373)]=M,q[l(445)]=h[l(439)];const{data:m,error:A}=await t.from(x[l(401)])[l(378)](q)[l(379)]()[l(486)]();if(A)throw await t.storage[l(289)](l(282)+l(288)).remove([B]),new Error(l(365)+"save visua"+l(428)+A[l(399)]);const b={};return b[l(413)]=m,b[l(404)]=null,b}{const t=_0xd56fc8.find(t=>t.id===l(380));if(t){const n={};n.white=t[l(364)],n.black=t[l(427)],_0x4525b5=n}}}catch(D){const t={data:null};return t[l(404)]=D,t}}async function x(n){const r=s,e={};e[r(407)]=r(370)+"alizations",e[r(459)]="created_at";const o=e;try{const e={};e[r(366)]=!1;const{data:i,error:a}=await t[r(289)](o[r(407)])[r(379)]("*").eq("user_id",n)[r(409)](o.LTZeb,e);if(a)throw new Error("Failed to fetch visu"+r(479)+": "+a[r(399)]);const s={};return s[r(413)]=i||[],s[r(404)]=null,s}catch(i){const t={};return t[r(413)]=[],t[r(404)]=i,t}}async function D(n,r){const e=s,o={ClMPf:function(t,n){return t===n}};o[e(283)]=e(484),o[e(308)]=e(370)+e(479);const i=o;try{if(i[e(372)](e(451),i[e(283)])){const t=_0x4e1ea2?function(){if(_0x18b05a){const t=_0x131454[e(391)](_0x1b2e4b,arguments);return _0x136833=null,t}}:function(){};return _0x4f55d3=!1,t}{const o=new URL(r)[e(359)][e(420)]("/"),a=o[e(333)](t=>t===e(282)+e(288)),s=o.slice(a+1).join("/");s&&await t.storage.from("visualizat"+e(288))[e(340)]([s]);const{error:c}=await t[e(289)](i[e(308)])[e(425)]().eq("id",n);if(c)throw new Error(e(365)+"delete vis"+e(453)+": "+c[e(399)]);const u={};return u[e(404)]=null,u}}catch(a){const t={};return t[e(404)]=a,t}}function C(){const t=["DwfSAxPHDgLVBG","CgfSzxr0zuLK","y29UC29Szq","DxbSAwnHDguGyW","thDZq1C","zxHPC3rPBMDwAq","tfrAzwi","Dg9mB3DLCKnHCW","kcGOlISPkYKRkq","zgf0zq","vfbyuhm","zu14sKK","nZDds05Ptxu","zxHPC3rPBMDdBW","CgLLy2vuExbL","AgvJAZO","y3nWs2y","EhfzDwy","ChjVzMLSzxm","CgLLy2vdB2XVCG","BwvxquO","CM91BMq","mJaYmde5nfDzuwDeAq","EK5jDK4","yK9pvLm","Bg9JywXLq29TCa","ywXPEMf0Aw9UCW","mwTgvgngDW","C29YDa","CYbVD25LzcbIEq","z2v0uhvIBgLJvq","DfHqrum","Aw4GEw91CIbNyq","C2LUz2XL","n1vmvxH4uG","z2u6ia","C2fMzq","oxr4t0r6rW","ywXPEMf0Aw9UoG","CYbHBhjLywr5ia","y3vZDg9Tq29SBW","C2vHCMnO","yxjPDhK","CM1byum","Aw1Hz2uVCg5N","CMvHC29U","DMLZDwfSAxPHDa","wLLLBKu","uMrbDgS","ueDsu1qXmty","zunHCMq","z2fTzurHDge","Aw9UCW","zNjVBq","yM9HCMq","CgDU","tfjOBxm","q0fqChG","BMn0Aw9UkcKG","zxzLBNq","rhrfALG","C21srKS","seLAquu","BgvUz3rO","ww91igHHDMuGyq","wMLTDNi","Dg9tDhjPBMC","CMv0DxjUicHMDq","BgLUA2vKugfSzq","BMCGyxqGBgvHCW","DxbZzxj0","tgjWDfi","CfLruuy","zg9zsKy","y29UDgvUDfr5Ca","BgL6yxrPB24GAq","DhjHy2u","Bg9N","DhjPBq","y0DHBwu","ALLvz3q","x19WCM90B19F","ruPSBMy","y29Kzq","qxHdseS","vgHPCYbPCYa","ANrhuwW","DhrLswq","C3rVCMfNzq","igzVCIb1BMLXDq","AxnjBNrYAw5ZAq","q2Luu2u","zxr0zvnPBwLSyq","Dg90ywXnB3zLCW","swTju1C","BIbIEsa","C3rYAw5NAwz5","zMLUzeLUzgv4","jsbZAw1PBgfYia","uhLqrNu","Bw9KzxjU","AxneDxbSAwnHDa","A2LUzYbKDxbSAq","CM4GDgHPCYiPka","CMvTB3zL","B3DUzwrcEun1CG","mtm4nurOyMXQwq","BKLK","yMLUza","C3vJy2vZCW","y29SB3jtAw1PBa","BgXLy3rVCG","B3DUzxjeAxnWBa","Bg9YCW","y2f0zxm6","Bw92zxm","Dca4ignVBg9YCW","rxjYB3iGy2HLyW","AwnHDguGzxHPCW","tuHIuha","Bg9JA2vKugLLyW","Aw9Uig5VDcbMBW","CMvWBgfJzq","Cgf0Ag5HBwu","y29UC3rYDwn0BW","q2Dntfm","y3vYCMvUDe1VDG","y2vrt2W","D2HPDgu","rMfPBgvKihrVia","yxnJzw5KAw5N","CML0Eq","DhHdDM8","DgXL","C2f2zwrFDMLZDq","CMvUDfvZzxi","q2Xnugy","z2fTzv9KyxrH","Aw9Uu3rHDgu","AuLRsMe","AwqSihvZzxjFAq","DxnLCL9Pza","Aw5Zzxj0","C2vSzwn0","y3vZDg9T","EhPxtLe","ru5Qzva","B250zw50","E30Uy29UC3rYDq","ntm0ohvOyKLqyW","wKDorMm","zMLUza","CMvZDwX0","vgHPCYb2Axn1yq","ndm1ndKWtKXzv1bH","yxbWBhK","AxPHDgLVBIaTia","zxHPC3rPBMDjza","ywXS","yxjL","BMXbB3q","mJCZodu2ofj4EvncDa","zgfYA01Vzgu","BwvZC2fNzq","Bwf0y2HLzeDHBq","D1Pwy1K","ndy0ndKWt3HpsvHA","rxjYB3iGAw4Gza","zxjYB3i","Dw5K","DgfIBgu","DM1LtMy","BgXLCNK","B3jKzxi","BMLUAwG","BwvFzgf0yq","yxLoyw1L","zgf0yq","Afj1vxC","zxr0zuLK","Bwf0y2HLzfbHBa","ihzLCNKGC2LTAq","vMLZDwfSAxPHDa","DgL0Bgu","C3bSAxq","tKncufa","BM93","sw52ywXPzcb0Aq","zMv0y2GGDMLZDq","zgvSzxrL","y1bHBgv0Dgu","yMXHy2S","BgL6yxrPB246ia","vg1cqKi","zcWGCgDUlcbNyq","sgrLrKy","sKnus3i","yw5VDgHLCIbJBW","rfPbBha","qw5VDgHLCIbJBW","zgLZCgXHEv9Uyq","BgfYihzPC3vHBa","mtqXodm2mfbMq05mDW","ChvIBgLJvxjS","nZqZmJHLCw1vuuC","AxnuB29tAw1PBa","lNbUzW","Dg8Gysb2AxnPBW","ChjVDg90ExbL","Aw1Hz2vFCgf0Aa","uwHJvMC","y3rVCIGICMv0Dq","BuDJsxO","tIbKyxrH","CM9WCMLHDguGyW","quvgDLC","u1rku2m"];return(C=function(){return t})()}u(void 0,function(){const t=s,n={jtGQl:function(t,n){return t(n)},CRoxD:function(t,n){return t+n},LwsCW:t(303)+t(294),CAPpx:"exception",zNIvN:t(406)},r=function(){const r=t;let e;try{e=n[r(322)](Function,n.CRoxD(n[r(457)],r(384)+r(447)+r(339)+" )")+");")()}catch(o){e=window}return e}(),e=r[t(455)]=r[t(455)]||{},o=[t(313),"warn","info","error",n[t(293)],n[t(476)],t(312)];for(let i=0;i<o[t(299)];i++){const n=u[t(360)+"r"][t(444)][t(344)](u),r=o[i],a=e[r]||n;n[t(317)]=u.bind(u),n.toString=a[t(302)][t(344)](a),e[r]=n}})();export{w as checkDuplicateVisualization,D as deleteVisualization,x as getUserVisualizations,l as saveVisualization};
