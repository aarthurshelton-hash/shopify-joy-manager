import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as L,bF as q,bG as A,b6 as S,ae as P,bH as H,ah as I,bI as T,B as K,bJ as G,bK as _,bL as W,bM as E,bN as U,bO as O,bP as Y,bQ as J,bR as V,bS as R,bT as X,bU as Z,bV as F,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Se,H as Pe,P as He,ca as Ie,b3 as Te,bs as Ke,be as Ge,cb as _e,aP as We,cc as Ee,d as Ue,b2 as Oe,a9 as Ye,cd as Je,ce as Ve,cf as Re,al as Xe,au as Ze}from"./index-UWVR9Dcc.js";import{L as Fe}from"./LiveColorLegend-C1Xm2aet.js";import{T as $e}from"./trending-down-CO04I8Qb.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-xfx_pR8q.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=mt,t=xt();for(;;)try{if(826049===parseInt(e(143))/1+parseInt(e(157))/2*(-parseInt(e(162))/3)+-parseInt(e(171))/4+-parseInt(e(190))/5+-parseInt(e(123))/6+parseInt(e(133))/7*(parseInt(e(142))/8)+-parseInt(e(186))/9*(-parseInt(e(184))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){{const s=e?function(){if(n){const e=n[mt(136)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}}()(void 0,function(){const e=mt,t={};t.WeicR=e(172)+"+$";const n=t;return ut.toString()[e(187)](n[e(121)])[e(134)]().constructor(ut).search(e(172)+"+$")});ut();const dt=function(){const e=mt,t={};t.XjKWx=e(131),t.spBnm=e(170);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=mt;if(n[s(153)]!=n[s(153)]){const e=_0x247225?function(){if(_0x9b3971){const e=_0x8ee46b[s(136)](_0x21218f,arguments);return _0x445141=null,e}}:function(){};return _0x560d85=!1,e}if(t){if(n[s(140)]===s(170)){const n=t[s(136)](e,arguments);return t=null,n}{const e=_0x32dd2f[s(154)+"r"][s(165)][s(126)](_0x2d38d7),t=_0x1ab3ba[_0x54d13f],n=_0x41760c[t]||e;e[s(164)]=_0x906082[s(126)](_0x2a0fc5),e[s(134)]=n[s(134)][s(126)](n),_0x351691[t]=e}}}:function(){};return s=!1,r}}();function mt(e,t){e-=116;const n=xt();let s=n[e];if(void 0===mt.DyoBta){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};mt.zoktsj=r,mt.sEYmPL={},mt.DyoBta=!0}const a=e+n[0],i=mt.sEYmPL[a];if(i)s=i;else{const e=function(e){this.uShFrB=e,this.DoZmhT=[1,0,0],this.duuLHJ=function(){return"newState"},this.hWepwX="\\w+ *\\(\\) *{\\w+ *",this.ReXPri="['|\"].+['|\"];? *}"};e.prototype.CCnsOT=function(){const e=new RegExp(this.hWepwX+this.ReXPri).test(this.duuLHJ.toString())?--this.DoZmhT[1]:--this.DoZmhT[0];return this.TbyonJ(e)},e.prototype.TbyonJ=function(e){return Boolean(~e)?this.CyRorZ(this.uShFrB):e},e.prototype.CyRorZ=function(e){for(let t=0,n=this.DoZmhT.length;t<n;t++)this.DoZmhT.push(Math.round(Math.random())),n=this.DoZmhT.length;return e(this.DoZmhT[0])},new e(mt).CCnsOT(),s=mt.zoktsj(s),mt.sEYmPL[a]=s}return s}function xt(){const e=["y29UC29Szq","Bw92zxmGyxzHAq","sNrTzhe","E30Uy29UC3rYDq","zsbMAwz0Es1TBW","C2HVCNrnzxnZyq","Cgv0AxrPB24U","t0fZwM0","CMv0DxjUicHMDq","uMvWzxrPDgLVBG","ntiZodb6AfrvBuy","q21AuK0","nZq1mMrnB1bssW","C2vHCMnO","BwvZC2fNzq","BMn0Aw9UkcKG","ntm2ndy4mfbxuffvCq","u3rHBgvTyxrLiq","r2fTzsbKCMf3BG","C3rHBgvTyxrL","ie5VigXLz2fSia","Bwz5rKm","AxneCMf3","CMvWzxrPDgLVBG","v2vPy1i","CMvHC29U","mJu5odi4mNnVCKPisG","AxntDgfSzw1HDa","ufzVD00","yMLUza","zxHJzxb0Aw9U","ntaTtw92zsbsDq","Dw5RBM93BG","AxnuAhjLzwzVBa","D1vHqMS","DhjHy2u","mtGYmtrTBMPeywW","Dg9tDhjPBMC","BNqGtwf0zxjPyq","yxbWBhK","zMLMDhLFBw92zq","x3j1Bgu","yuDLBK0","C3bcBM0","zfjLCgv0AxrPBW","mtuYveziz2jU","mtiXmJy5oevOq2PSEa","BNrFBwf0zxjPyq","zMvU","u2nUC2G","C3bSAxq","EfPsrxy","BgfIBguU","rhjHDW","EeHTqxm","sgfqDhq","wgPlv3G","y29UC3rYDwn0BW","sxvYz2O","z1jkz0O","nZK0nKTNwLLTDa","DgHYzwvMB2XKxW","Aw5MBW","D2fYBG","y3rVCIGICMv0Dq","mtiYmwn4vMruzG","DfPsy1C","x19WCM90B19F","ChjVDg90ExbL","CM4GDgHPCYiPka","rhjHDYbIEsb0Aa","DgfIBgu","BgvUz3rO","z1rZB2m","nJyWmdyYohDOCLzbzq","kcGOlISPkYKRkq","q3bYzLG"];return(xt=function(){return e})()}function ht(e){const t=mt;return function(e){const t=mt,n={ncGbJ:t(191)+t(117)+t(175)+t(149),CmZRM:"Threefold "+t(183),xZREv:"insufficie"+t(144)+"l",CprfX:"Draw by insufficient material.",aGenM:"Insufficie"+t(135)+"l",HaPtt:function(e,t,n){return e(t,n)},jHkCj:t(167)+t(178)+"ve rule.",Scnsh:t(129),tZRcW:t(192)+"!"};if(e[t(124)+"e"]()){const e={};return e.reason=t(116),e.message=n.ncGbJ,e.shortMessage=t(191),e}if(e[t(130)+t(141)+"n"]()){const e={};return e[t(122)]=t(158)+t(120),e[t(188)]="Draw by threefold re"+t(180),e.shortMessage=n[t(185)],e}if(e.isInsufficientMaterial()){const e={};return e[t(122)]=n[t(148)],e[t(188)]=n[t(173)],e[t(179)+"ge"]=n[t(139)],e}const s=e[t(145)]();if(n[t(152)](parseInt,s[t(147)](" ")[4],10)>=100){const e={};return e[t(122)]=t(137)+t(138),e[t(188)]=n.jHkCj,e[t(179)+"ge"]=t(128)+"le",e}const r={};return r[t(122)]=n[t(146)],r[t(188)]=n[t(163)],r[t(179)+"ge"]=t(150),r}(e)[t(188)]}dt(void 0,function(){const e=mt,t={Jtmdq:function(e,t){return e+t},gRJgJ:e(182)+e(189),Iurgj:e(177)+e(161)+e(166)+" )",OAsZm:function(e){return e()},BZJpe:"log",AOoMQ:"error",mfyFC:e(127),PVowM:e(168),xHmAs:e(132),NsuET:function(e,t){return e<t}};let n;try{const s=Function(t[e(176)](t[e(156)],t[e(155)])+");");n=t[e(181)](s)}catch(a){n=window}const s=n[e(174)]=n[e(174)]||{},r=[t.BZJpe,e(160),e(159),t.AOoMQ,t[e(118)],t[e(125)],t[e(151)]];for(let i=0;t.NsuET(i,r[e(169)]);i++){const t=dt[e(154)+"r"].prototype[e(126)](dt),n=r[i],a=s[n]||t;t[e(164)]=dt.bind(dt),t.toString=a[e(134)].bind(a),s[n]=t}})(),function(){const e=bt,t=gt();for(;;)try{if(565028===parseInt(e(136))/1+parseInt(e(215))/2*(-parseInt(e(196))/3)+parseInt(e(130))/4*(parseInt(e(198))/5)+parseInt(e(183))/6*(-parseInt(e(137))/7)+-parseInt(e(226))/8*(parseInt(e(206))/9)+parseInt(e(187))/10*(parseInt(e(193))/11)+-parseInt(e(172))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){const e=bt,t={VeURf:function(e,t){return e!==t}};t[e(144)]=e(161);const n=t;let s=!0;return function(t,r){const a=e;if(!n[a(203)](n.DiGLG,"laSpr")){const e=s?function(){if(r){const e=r[a(122)](t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0x27d501.constructor[a(157)][a(147)](_0x54932c),t=_0x53d346[_0x133219],n=_0xf0face[t]||e;e[a(176)]=_0x8a03a2[a(147)](_0x7479ea),e[a(167)]=n[a(167)].bind(n),_0x573157[t]=e}}}()(void 0,function(){const e=bt,t={};t[e(113)]=e(225)+"+$";const n=t;return pt[e(167)]()[e(181)](n.lWTAb).toString().constructor(pt).search(e(225)+"+$")});pt();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[bt(122)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function gt(){const e=["BgLUzwfYuMfTCa","AefMswi","CNv5Cuy","y3vYCMvUDfrPBq","Aw1L","zxjtB3vYy2u","vKL5BNu","CLjzBgW","kcGOlISPkYKRkq","ndu3mdr0rgXMqKu","AgPnzxO","rfjwr3u","DwvbDfrPBwu","sgzpruO","z2fTzuvUza","BfDuqwi","DhjHy2u","C2v0vMfSDwvbDa","C2HhsKq","Bg93CgfZCW","y29UC29Szq","zNjLCxvLBMn5","qxvKAw9dB250zq","zgvMzwf0","yxbWBhK","CgTSAuS","C2LUzq","y29UC3rYDwn0BW","ExDwAhq","sgjIyxu","z2fPBG","zgvZDgLUyxrPBW","ndG1mNrgz1DPBa","wgHLCM0","reDNCwK","vvbptxO","DMfSDwu","Aw5MBW","nZuZntKXqxfKBuXX","ndm1mdaXu2Prwwni","Aw5PDef1zgLV","y2HLy2TTyxrL","qKH1y2C","DhLWzq","qLzmyKW","sgjJALC","rgLhteC","D2vIA2L0qxvKAq","Bg9N","yMLUza","vg9wywX1zuf0va","DhjPyw5NBgu","DwzbB1a","BgXHDg9Y","y2XVC2u","v29wCLu","zxjYB3i","y3jLyxrLr2fPBG","BfjHBxbuB1zHBa","ChjVDg90ExbL","DevyDK0","C3rHCNq","Bw92zq","BgftChi","z2fPBK5Vzgu","DgfIBgu","y3jLyxrLqMLXDq","y3jLyxrLt3nJAq","y29UDgv4Da","Dg9tDhjPBMC","suX3wNm","y3rVCIGICMv0Dq","zxHWB25LBNrPyq","uMDjB04","nZq0ndG0ogfIBM1oBa","v2vIief1zgLVia","C2fTCgXLuMf0zq","zgfAA0S","x19WCM90B19F","ufrqDge","ufH3BuS","zxHJzxb0Aw9U","vK1Ks0W","C2vHCMnO","CMv0DxjUicHMDq","mtHKrfLRzNK","ywrgAwX0zxi","zxLSBLq","B0nVBNrLEhq","mJiZmde4me9jB0PJyG","AwXSzwDHBa","qvbjig5VDcbZDq","whv1CMC","y3vYCMvUDa","ENDkyLi","mJjHreHNDxa","rgf0yq","DwzjDxq","nZq3nJi3CM5HvLvZ","C3f1yxjL","nda0nvjdyMjNDG","uMXlBvC","zhjHDW","C3rVCa","EgXny0S","vMvvuMy","y2HLy2S","CM4GDgHPCYiPka","odGYsxnLAgrq","y29UBMvJDa","t0PrteG","CMfUzg9T","EMLwEfm","y3jLyxrLqNvMzG","qM5LELi","z2fTzvn0yxj0","vgLTzq","mNrKqKDjuq","D2fYBG"];return(gt=function(){return e})()}ft(void 0,function(){const e=bt,t={hAfIb:function(e,t){return e+t},DRVGu:function(e){return e()},BAPAH:e(146),ExjOm:e(216),DgETC:e(179)};let n;try{const s=Function(t[e(218)](t.hAfIb(e(182)+"nction() ","{}.constru"+e(169)+e(205)+" )"),");"));n=t[e(228)](s)}catch(a){n=window}const s=n[e(118)]=n[e(118)]||{},r=[t.BAPAH,t.ExjOm,e(135),e(154),t.DgETC,e(163),e(114)];for(let i=0;i<r.length;i++){const t=ft[e(125)+"r"].prototype[e(147)](ft),n=r[i],a=s[n]||t;t.__proto__=ft[e(147)](ft),t[e(167)]=a[e(167)][e(147)](a),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=bt,r={DGgqi:function(e,t){return e===t},pkliK:s(208),UPOMz:s(173)+s(189)+"pported",xbSgr:function(e,t){return e||t},daZkK:function(e,t){return e+t},PXwmK:function(e,t){return e+t},ufAoP:function(e,t){return e+t},eylnT:function(e){return e()},JMEec:function(e,t){return e||t},ziVxS:function(e,t){return e<t},BHucg:s(202),Hbbau:function(e,t){return e-t},tEXvM:function(e,t){return e*t},ILwZs:s(117),ywVht:function(e,t){return e+t},hjMez:s(160),VMdKL:s(124),BnezR:function(e,t,n,s,r,a){return e(t,n,s,r,a)},wSKuv:"capture",RlKmW:function(e,t,n){return e(t,n)},HbcjW:function(e,t,n,s,r,a){return e(t,n,s,r,a)},YRNeT:"castle",shGJD:s(149),zwJbR:function(e,t,n){return e(t,n)},Xherm:s(213),PTPta:function(e,t,n,s,r,a){return e(t,n,s,r,a)},VIynu:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ufIut:function(e,t,n){return e(t,n)},UxPii:function(e,t,n){return e(t,n)},WoVrU:s(200),WIWci:function(e,t,n){return e(t,n)},kWLMB:s(197),gnIDA:"sawtooth",BVLbL:s(171),nNKIp:s(190),rRYll:function(e,t){return e(t)},HfOEJ:function(e,t,n){return e(t,n)}},a={};a[s(166)]=null,a[s(162)]=null;const i=r[s(224)](t.useRef,a),o=t.useCallback(()=>{const e=s;if(!i[e(191)][e(166)])try{const t=new(window[e(120)+"xt"]||window[e(145)+e(186)]),s=t[e(155)]();s[e(207)](t[e(129)+"n"]),s[e(128)][e(134)]=n;const r={};r[e(166)]=t,r.gainNode=s,i[e(191)]=r}catch(t){if(r[e(132)]("OJQLH",r[e(123)]));else if(_0x5ba28f){const t=_0x5e605b[e(122)](_0x59864d,arguments);return _0x3b0caf=null,t}}},[n]);t.useEffect(()=>{const e=s;i.current[e(162)]&&(i[e(191)][e(162)][e(128)].value=n)},[n]);const c=r[s(192)](t.useCallback,(t,n,a=s(124),c=.01,l=.1,u)=>{const d=s;{if(!e)return;o();const{context:s,gainNode:m}=i[d(191)];if(!s||!m)return;const x=s["createOsci"+d(151)](),h=s[d(155)]();x.type=a,x.frequency[d(115)+"Time"](t,s.currentTime),u&&x.frequency[d(170)+"lRampToVal"+d(229)](u,r[d(178)](s[d(220)+"e"],n)),h.gain[d(115)+"Time"](0,s[d(220)+"e"]),h.gain[d(217)+d(148)+d(221)](1,s[d(220)+"e"]+c),h[d(128)][d(170)+d(156)+"ueAtTime"](.01,s[d(220)+"e"]+n-l),h[d(128)][d(217)+d(148)+"ime"](0,s[d(220)+"e"]+n),x.connect(h),h.connect(m),x[d(159)](s[d(220)+"e"]),x[d(201)](r[d(150)](s[d(220)+"e"],n))}},[e,o]),l=r[s(111)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r[a(185)](o);const{context:c,gainNode:l}=i[a(191)];if(r.JMEec(!c,!l))return;const u=c[a(174)]*t,d=c[a(211)+"er"](1,u,c.sampleRate),m=d["getChannel"+a(194)](0);for(let e=0;r[a(210)](e,u);e++)r[a(140)]==r[a(140)]?m[e]=r[a(127)](r[a(158)](Math[a(209)](),2),1):_0xa05e60.current[a(166)][a(152)]();const x=c[a(211)+a(222)]();x.buffer=d;const h=c[a(164)+a(184)]();h[a(141)]=r[a(168)],h[a(119)].value=n;const p=c[a(155)]();p[a(128)][a(115)+"Time"](.3,c.currentTime),p[a(128)][a(170)+a(156)+"ueAtTime"](.01,r[a(150)](c[a(220)+"e"],t)),x.connect(h),h[a(207)](p),p[a(207)](l),x[a(159)](c[a(220)+"e"]),x[a(201)](r[a(126)](c[a(220)+"e"],t))},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(227)]:c(800,.08,r[n(180)],.005,.05),r[n(212)](c,400,.06,n(149),.005,.04);break;case r.wSKuv:r[n(199)](l,.12,2e3),r.BnezR(c,300,.1,"square",.005,.08),r[n(143)](c,150,.15,n(124),.01,.1);break;case r.YRNeT:r.HbcjW(c,600,.06,r[n(180)],.005,.04),r[n(199)](setTimeout,()=>c(700,.06,n(124),.005,.04),80);break;case n(204):c(880,.15,r.shGJD,.01,.1),r[n(199)](setTimeout,()=>c(1100,.12,n(149),.01,.08),120);break;case n(139):c(880,.2,r[n(180)],.01,.15),r[n(192)](setTimeout,()=>c(660,.2,n(124),.01,.15),150),setTimeout(()=>c(440,.3,"sine",.01,.2),300),setTimeout(()=>c(330,.4,n(124),.01,.3),500);break;case r[n(131)]:r[n(177)](c,523,.12,n(124),.01,.08),r[n(192)](setTimeout,()=>c(659,.12,"sine",.01,.08),100),r[n(199)](setTimeout,()=>c(784,.2,"sine",.01,.15),200);break;case n(112):r.HbcjW(c,440,.15,r[n(116)],.01,.1),setTimeout(()=>c(349,.25,n(149),.01,.2),150);break;case"victory":r[n(223)](c,523,.1,r[n(180)],.01,.08),r[n(195)](setTimeout,()=>c(659,.1,n(124),.01,.08),100),setTimeout(()=>c(784,.1,n(124),.01,.08),200),r[n(192)](setTimeout,()=>c(1047,.3,n(124),.01,.25),300);break;case n(121):c(392,.2,r[n(180)],.02,.15),setTimeout(()=>c(349,.2,"sine",.02,.15),200),setTimeout(()=>c(330,.3,n(124),.02,.25),400),r.UxPii(setTimeout,()=>c(262,.4,n(124),.02,.35),650);break;case r[n(153)]:r[n(223)](c,440,.15,r[n(180)],.01,.1),setTimeout(()=>c(440,.15,n(124),.01,.1),180),r.WIWci(setTimeout,()=>c(523,.2,n(124),.01,.15),360);break;case n(188):r.PTPta(c,200,.1,r.kWLMB,.005,.08),c(150,.08,r.gnIDA,.005,.06)}},[e,c,l]);t.useEffect(()=>{const e=s;if(e(190)!==r.nNKIp){const t=_0x18d5b0?function(){if(_0x84f1a8){const t=_0x23649f[e(122)](_0x7ff6cc,arguments);return _0x242fca=null,t}}:function(){};return _0x15f61f=!1,t}return()=>{const t=e;"mPAEz"===r[t(142)]?_0x19fbd3[_0x5e9c35]=2*_0x405c81[t(209)]()-1:i.current[t(166)]&&i[t(191)][t(166)].close()}},[]);const d={};return d.playSound=u,d[s(138)]=o,d};function bt(e,t){e-=111;const n=gt();let s=n[e];if(void 0===bt.CykGcg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};bt.RLHObD=r,bt.WKrcnt={},bt.CykGcg=!0}const a=e+n[0],i=bt.WKrcnt[a];if(i)s=i;else{const e=function(e){this.lMhLFf=e,this.fEbsHo=[1,0,0],this.JzUQga=function(){return"newState"},this.PwnlYW="\\w+ *\\(\\) *{\\w+ *",this.INtsgV="['|\"].+['|\"];? *}"};e.prototype.ByyzJm=function(){const e=new RegExp(this.PwnlYW+this.INtsgV).test(this.JzUQga.toString())?--this.fEbsHo[1]:--this.fEbsHo[0];return this.EdKxAy(e)},e.prototype.EdKxAy=function(e){return Boolean(~e)?this.QBedEU(this.lMhLFf):e},e.prototype.QBedEU=function(e){for(let t=0,n=this.fEbsHo.length;t<n;t++)this.fEbsHo.push(Math.round(Math.random())),n=this.fEbsHo.length;return e(this.fEbsHo[0])},new e(bt).ByyzJm(),s=bt.RLHObD(s),bt.WKrcnt[a]=s}return s}const yt=wt;function wt(e,t){e-=332;const n=Nt();let s=n[e];if(void 0===wt.pBQVOg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};wt.ILEHkM=r,wt.oVQLgQ={},wt.pBQVOg=!0}const a=e+n[0],i=wt.oVQLgQ[a];if(i)s=i;else{const e=function(e){this.KJHEos=e,this.SdUVUD=[1,0,0],this.bkrKaz=function(){return"newState"},this.QhWbYt="\\w+ *\\(\\) *{\\w+ *",this.ogYdYM="['|\"].+['|\"];? *}"};e.prototype.pXQtGs=function(){const e=new RegExp(this.QhWbYt+this.ogYdYM).test(this.bkrKaz.toString())?--this.SdUVUD[1]:--this.SdUVUD[0];return this.rpvVIu(e)},e.prototype.rpvVIu=function(e){return Boolean(~e)?this.TYSKlw(this.KJHEos):e},e.prototype.TYSKlw=function(e){for(let t=0,n=this.SdUVUD.length;t<n;t++)this.SdUVUD.push(Math.round(Math.random())),n=this.SdUVUD.length;return e(this.SdUVUD[0])},new e(wt).pXQtGs(),s=wt.ILEHkM(s),wt.oVQLgQ[a]=s}return s}!function(){const e=wt,t=Nt();for(;;)try{if(800119===-parseInt(e(340))/1*(-parseInt(e(345))/2)+-parseInt(e(337))/3*(-parseInt(e(338))/4)+-parseInt(e(341))/5*(parseInt(e(349))/6)+-parseInt(e(362))/7+parseInt(e(347))/8+parseInt(e(346))/9*(-parseInt(e(342))/10)+parseInt(e(352))/11*(parseInt(e(365))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[wt(366)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=wt,t={};t.eGgkM=e(355)+"+$";const n=t;return jt[e(343)]().search(e(355)+"+$")[e(343)]()[e(361)+"r"](jt)[e(351)](n[e(357)])});jt();const Ct=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[wt(366)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Nt(){const e=["mtjmAKrrsfK","mtaYmdu0me5TC2D4rG","AwLuAMG","mtu5mJi4uLrTww5M","ndiWr0HgrvDV","nJu5otbnzu5ruMe","Dg9tDhjPBMC","DhjHy2u","mtjLsgT1Dve","mtC5muHMuvzTBq","otGYmJC3nKTLq0DUqW","shbPvuO","otm2ndjbquTAzMG","yM13Dfu","C2vHCMnO","mtf2C0LTEeS","y29UC29Szq","BMn0Aw9UkcKG","kcGOlISPkYKRkq","Bg9N","zuDNA00","zw5HyMXLza","yMLUza","y2HLC3mTC291BG","y29UC3rYDwn0BW","otm3odK3oefpshPdDG","BMfTzq","DgfIBgu","mtG3mJq4odrUzwHKExm","yxbWBhK","E30Uy29UC3rYDq","y3rVCIGICMv0Dq","zxHJzxb0Aw9U","zc1Zzxr0Aw5NCW","D2fYBG","BgvUz3rO","zxjYB3i","Aw5MBW","CgzjrMS","CM4GDgHPCYiPka","DeXdBNi","yKvPrgi"];return(Nt=function(){return e})()}Ct(void 0,function(){const e=wt,t={bEiDb:function(e,t){return e(t)},YBitB:function(e,t){return e+t},bmwtU:"return (fu"+e(354),HpiUJ:function(e){return e()},iiTjh:e(356),pfIFk:e(364),tLCnr:e(344)},n=t[e(348)](function(){const n=e;let s;try{s=t[n(336)](Function,t.YBitB(t[n(350)]+(n(367)+n(368)+n(334)+" )"),");"))()}catch(r){s=window}return s}),s=n[e(353)]=n[e(353)]||{},r=[t[e(339)],e(371),e(332),e(373),e(369),t[e(333)],t[e(335)]];for(let a=0;a<r[e(372)];a++){const t=Ct[e(361)+"r"].prototype.bind(Ct),n=r[a],i=s[n]||t;t.__proto__=Ct[e(359)](Ct),t[e(343)]=i[e(343)][e(359)](i),s[n]=t}})();const kt={};kt[yt(363)]=yt(360)+yt(370);const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[yt(358)]}))}),kt));function zt(){const e=["y2HHBMDL","sNbmvvO","ntqXodqYn3nvBuzPsW","uMf0Aw5NoIa","zfzAzwS","vfnlEwK","AxnnEvr1CM4","y29TCgXLDgvK","yKPbqKm","DwD4uLC","CKLK","x3jLBwfPBMLUzW","z3Lst2W","z2fTzv9Pzd1LCq","y2HLy2S","BeTwvw4","D2LUBMvYx2LK","y29UC29Szq","BIb5B3vYig93BG","B2rL","s211Dxy","Cun0wgS","y2fZDgXL","qNPLzhG","D2HPDgvFDgLTzq","DxLyDuu","C3f1yxjL","AgfSBgvUz2vFyW","D2HPDgvqywXLDa","zNjVBq","BNHyCwC","BMLvzxi","yMXHy2TFCgfSzq","s1n2Afy","B3jUvLm","yMXHy2TqywXLDa","AxndAgvJA21HDa","y3jLyxrLr2fTzq","zxzOqKy","CM4GDgHPCYiPka","y3jLyxrLzef0","wevLA0u","yLDYq3O","ywjHBMrVBMvK","y3rVCIGICMv0Dq","Dg9vChbLCKnHCW","Bw92zunVDw50","BMT3vNa","zwf0zsbHigDHBq","C3vstu8","wvjHwuC","tY1p","Bw92zwrtCxvHCG","C3LPu0W","sLrMu00","svztrNa","BMv3uMf0Aw5N","AvjOsuO","rhjHDYbVzMzLCG","ELHeCgK","y2HLC3nFBw92zq","ihjHDgLUz3m6","B1P4rgG","CKzxBxy","CgDU","ngLbwwPsBW","BLr3tKu","A1jOv2u","y3vYCMvUDezLBG","y2zXs0G","z2v0qxzHAwXHyG","CKvxELO","zxHJzxb0Aw9U","odC5mJmYoen1uKn4sW","BMvUDc4UlG","wvzLEu0","lwfJy2vWDhmGAq","vuTnA1O","mJGYnJyYnZflrwHTBKW","DxbKyxrL","AeXMB1G","yNvSBgv0xZe","y29KztOG","CgXHEwvYx2LK","yMLUza","C1nhvwq","C3rHCNrLzf9HDa","vvbeqvrf","CNbJ","zM9YrwfJAa","q2HHBgXLBMDLia","ugnJu1y","zg9Nzwm","BwfW","zgvMzwf0","DgfIBgu","B1vgEfK","oda1nJa1m25wwwzbzq","BgvUz3rO","t1P1sNi","zeHpz1y","yMXHy2TFD2LUCW","D2HPDgu","CMv0DxjUicHMDq","Bw92zv91y2K","ChjVzMLSzxm","D2HPDgvFCgfSzq","Dvnuu2y","Aw5JBhvKzxm","sKTgsKS","C2fU","D2HPDgvFCgXHEq","zxjYB3i","AM9PBKDHBwu","v212yMy","zhjWDhy","BwvZC2fNzq","x19WCM90B19F","EKPKExq","Dg9rsMq","qu1nCxm","vvfOsuC","DxrgEK4","DxDXywm","nde0mdy2nMf5CvvXEa","y3vYCMvUDf9Mzq","D2fvwfu","B2zMzxjeCMf3","y05NCfO","ihbSyxLPBMCGyq","zgrVyMC","r2fTzsbJCMvHDa","wfDyuLC","D2HPDgvFD2LUCW","zw1HAw5PBMC","wM9czKq","AgfSBgvUz2uGyW","y2fWDhvYzq","z2fTzq","whvPAg0","CMfWAwrFmtu","q0LPzM4","Bwf5yMvtAw5NBa","DhvYBG","ywn0AxzL","q1rLweG","yMXHy2TuAw1LuG","B25LBNqGyxv0BW","y29UC3rYDwn0BW","sMTwvuu","rwXOwwm","D2fPDgLUzW","r2fTzsbUB3qGzG","wKf2CMO","ugTrBe0","B2X2vLm","CNriqLO","ChjVDg90ExbL","B2jjuNG","wvPgsfG","sMf2vg4","BMvS","Axnhyw1Lt3zLCG","DMLJDg9YEq","s3nJtu8","tvPdywG","Au52seq","yMXHy2TqBgf5zq","y2HHBgXLBMDLxW","sM9PBMvKigDHBq","u2jJq3u","y3jLyxrLzf9HDa","C2vSzwn0","ihnLBNqGkg9WCa","CMvTB3zLq2HHBG","BIbPBIb0BYbQBW","AM9PBIbNyw1L","D2LUBMvYswq","ze9frgS","AwXSzwDHBa","Aw4GysbNyw1L","z2fTzv9Pza","Bg9N","zwXVx3jHDgLUzW","wKPyChu","tY1plu8","uurlqKC","Dw50Aw1Lza","y3jLyxrLigDHBq","D2HPDgvuAw1LuG","y2HLy2TTyxrL","Aw5MBW","Bw92zv9UDw1Izq","DwHyr0e","C3vJy2vZCW","BxLdB2XVCG","C2vHCMnO","Bw92zxmT","C2LVBIK","u0j0r08","v1LUv0i","su5trvju","zLLPv1i","igv4CgLYzwqGyW","DhH1CNu","B3jKzxi","DK1NwuO","mJa3nZCYChziBKzO","rMfPBgvKihrVia","ntrpq2T2B2S","AePWzMy","BhbWCw8","y2fWDhvYzwq","EwrrAeK","z2fTzvn0yxrL","wvrlv0C","AM9PBIbIEsbJBW","AMr5wuq","u2TWre8","zMvU","yxnJzw5KAw5N","ndi0ndi5yKr1DKvm","C2LUz2XL","B3DUBLu","B25XDwm","yuzOr3q","zxjFAwq","z2fTzvn0yxj0","BMn0Aw9UkcKG","zMLUza","mtbvBuPzEMG","zu1NEKq","wvLQDfi","Dg9ju09tDhjPBG","EKfKseG","Dw5JCxG","nw9bq0HYsa","igDHBwu","re1vDuu","DxnLCL9PzcWGzq","ywrK","BwfRzu1VDMu","D2zStg4","t2P1qNi","DxHSzxK","zwjIAw4","CNHrt3G","zhjHDW","D2HPDgvqBgf5zq","C3rHDhvZ","z0zizLa","vKH4uhi","Bg9FCMf0Aw5N","DxnLCL9Pza","su5Azvq","q0n1vgK","Dg9tDhjPBMC","y2HLC3nFz2fTzq","ChvIBgLJ","zYbMB3iGB3bWBW","C3rHCNrLzef0","DxjquNG","y2HHBM5LBa","yMXHy2TFCgXHEq","AxnmB2fKAw5N","DhrL","ww91ihDVBIe","CMvZDwX0","C3vIC3rYAw5N","kcGOlISPkYKRkq","E30Uy29UC3rYDq","ww91ihjLC2LNBG","y29Kzq","zhKGC3rHCNrLza","Aw5Zzxj0","BMv3","Egn1uxy","DgLTzv9JB250CG","DxbKyxrLievmtW","AgfUz2vZ","q2fUBM90igPVAq","yxbWBhK","rvLpwKO","CYbcBgfJAY4","B0jsseq","BIbPBIb0BYbJCG","wKPby2u","yMXHy2S","svDguNy","ugjeEKC","BM55sK0","Bw92zq","C3vIC2nYAwjL","y2HHBgXLBMDLqW","ugXLyxnLihnPzW"];return(zt=function(){return e})()}const Dt=qt;!function(){const e=qt,t=zt();for(;;)try{if(665855===parseInt(e(433))/1*(-parseInt(e(572))/2)+-parseInt(e(421))/3*(parseInt(e(419))/4)+-parseInt(e(448))/5*(parseInt(e(336))/6)+parseInt(e(509))/7+-parseInt(e(580))/8+parseInt(e(309))/9+-parseInt(e(442))/10*(-parseInt(e(585))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(493)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=qt,t={};t[e(564)]="(((.+)+)+)+$";const n=t;return Bt[e(468)]()[e(408)](e(481)+"+$")[e(468)]()[e(360)+"r"](Bt).search(n.iRhIJ)});Bt();const Lt=function(){const e=qt,t={};t[e(458)]=e(391),t.cNgpZ=e(333);const n=t;let s=!0;return function(t,r){const a=e;if(a(333)===n[a(340)]){const e=s?function(){if(r){const e=r[a(493)](t,arguments);return r=null,e}}:function(){};return s=!1,e}return _0x35ef1d(n[a(458)]),!1}}();function qt(e,t){e-=307;const n=zt();let s=n[e];if(void 0===qt.kHZgxf){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.AhROgr=r,qt.ZuqESt={},qt.kHZgxf=!0}const a=e+n[0],i=qt.ZuqESt[a];if(i)s=i;else{const e=function(e){this.ALTmfA=e,this.NJQYDd=[1,0,0],this.ilOwWi=function(){return"newState"},this.oLMFcE="\\w+ *\\(\\) *{\\w+ *",this.iCnYAJ="['|\"].+['|\"];? *}"};e.prototype.mWwQUs=function(){const e=new RegExp(this.oLMFcE+this.iCnYAJ).test(this.ilOwWi.toString())?--this.NJQYDd[1]:--this.NJQYDd[0];return this.JUFweI(e)},e.prototype.JUFweI=function(e){return Boolean(~e)?this.FWDRkh(this.ALTmfA):e},e.prototype.FWDRkh=function(e){for(let t=0,n=this.NJQYDd.length;t<n;t++)this.NJQYDd.push(Math.round(Math.random())),n=this.NJQYDd.length;return e(this.NJQYDd[0])},new e(qt).mWwQUs(),s=qt.AhROgr(s),qt.ZuqESt[a]=s}return s}Lt(void 0,function(){const e=qt,t={HSNnR:function(e,t){return e+t},QkopA:e(315)+e(440),VHxPr:e(482)+e(551)+e(546)+" )",ddobg:function(e){return e()},kRhWe:e(394),ornVS:"warn",bRCKC:"trace",OZuJr:function(e,t){return e<t}};let n;try{const s=Function(t.HSNnR(t.QkopA+t[e(463)],");"));n=t[e(342)](s)}catch(a){n=window}const s=n[e(524)]=n[e(524)]||{},r=[t[e(574)],t[e(541)],e(403),e(324),e(579),e(307),t.bRCKC];for(let i=0;t[e(311)](i,r[e(310)]);i++){const t=Lt[e(360)+"r"][e(369)][e(591)](Lt),n=r[i],a=s[n]||t;t[e(329)]=Lt[e(591)](Lt),t[e(468)]=a.toString.bind(a),s[n]=t}})();const At={};At[Dt(588)]=60,At.blitz_5=300,At[Dt(352)]=900,At[Dt(399)]=0;const St=At;function Pt(e,t){e-=371;const n=Ht();let s=n[e];if(void 0===Pt.yqzoTb){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Pt.KXKjVk=r,Pt.BMyXLK={},Pt.yqzoTb=!0}const a=e+n[0],i=Pt.BMyXLK[a];if(i)s=i;else{const e=function(e){this.OpYRdl=e,this.rdvdFs=[1,0,0],this.GJHtbK=function(){return"newState"},this.QMAotE="\\w+ *\\(\\) *{\\w+ *",this.bSKZuj="['|\"].+['|\"];? *}"};e.prototype.ZIUfBM=function(){const e=new RegExp(this.QMAotE+this.bSKZuj).test(this.GJHtbK.toString())?--this.rdvdFs[1]:--this.rdvdFs[0];return this.bvoaQe(e)},e.prototype.bvoaQe=function(e){return Boolean(~e)?this.sbYnbf(this.OpYRdl):e},e.prototype.sbYnbf=function(e){for(let t=0,n=this.rdvdFs.length;t<n;t++)this.rdvdFs.push(Math.round(Math.random())),n=this.rdvdFs.length;return e(this.rdvdFs[0])},new e(Pt).ZIUfBM(),s=Pt.KXKjVk(s),Pt.BMyXLK[a]=s}return s}function Ht(){const e=["D2fYBG","AgfWDgLJCW","mtC1ntLNuLjNwLK","BgvUz3rO","yMLUza","whzOC1K","CNrfDLy","zgjHy2SGzMfPBa","y2rgCMy","AxLbEwq","mJu1mZG4D3btDePw","BwvKAxvT","DgfIBgu","ru9Lzem","r2jbtem","E30Uy29UC3rYDq","Aw5MBW","yxbWBhK","nZe3ode5m3vMrxLPra","suPiCxe","y3rVCIGICMv0Dq","Bg9N","kcGOlISPkYKRkq","mZe0ndi4wurWwwvy","zxjYB3i","mZj1Du5NtMy","D1b5DLa","DLHrsei","C2vHCMnO","odbYyvrsrw8","tMX0zM0","ELnlvNa","C2vSzwn0Aw9U","BgLNAhq","zxHJzxb0Aw9U","AevftKS","r2rNy0S","Dg9tDhjPBMC","mtu0mdHQsw5cueO","ru1hAwm","ndC0zhPuD2rk","mtaWrLbxAKDb","CM4GDgHPCYiPka","t1nJDxi","y29UC3rYDwn0BW","wuPPvNi","AxntDxbWB3j0zq","DMLICMf0zq","Dw5KzwzPBMvK","sgfWDgLJigzLzq","BMn0Aw9UkcKG","x19WCM90B19F","oteXndzNt0zArwi","DePxu2W","AgvHDNK","mJiYntbxrKLQEwW","y29UC29Szq","BefMAeC","CMv0DxjUicHMDq","tfH2BgO"];return(Ht=function(){return e})()}const It=Pt;!function(){const e=Pt,t=Ht();for(;;)try{if(211416===-parseInt(e(430))/1*(-parseInt(e(383))/2)+-parseInt(e(397))/3+parseInt(e(428))/4+-parseInt(e(400))/5*(parseInt(e(385))/6)+parseInt(e(415))/7*(-parseInt(e(374))/8)+parseInt(e(407))/9*(-parseInt(e(386))/10)+parseInt(e(423))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Tt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Pt,t={};t.YJiVr=e(427)+"+$";const n=t;return Tt.toString()[e(373)](n[e(390)]).toString()[e(389)+"r"](Tt)[e(373)](e(427)+"+$")});Tt();const Kt=function(){const e=Pt,t={LXvlj:function(e,t){return e(t)},tJWSl:function(e,t){return e+t},EMGic:e(419)};let n=!0;return function(s,r){const a=e;if(t[a(384)]==t[a(384)]){const e=n?function(){if(r){const e=r[a(422)](s,arguments);return r=null,e}}:function(){};return n=!1,e}_0x74e90a=t[a(404)](_0x479d12,t[a(398)](a(403)+a(395)+(a(420)+a(425)+a(387)+" )"),");"))()}}();Kt(void 0,function(){const e=Pt,t={iyAyd:function(e,t){return e(t)},tiwce:function(e,t){return e+t},sxdju:function(e,t){return e+t},lAfhG:function(e){return e()},vXQHB:e(405),ZPQtr:e(421),OScur:e(379),XvhsY:e(417),EOedC:function(e,t){return e===t},cdFrf:e(376)},n=t[e(402)](function(){const n=e;let s;try{s=t[n(414)](Function,t.tiwce(t.sxdju(n(403)+"nction() ",n(420)+'ctor("retu'+n(387)+" )"),");"))()}catch(r){s=window}return s}),s=n[e(401)]=n.console||{},r=[e(426),t[e(372)],t.ZPQtr,e(429),t[e(388)],t[e(410)],"trace"];for(let a=0;a<r[e(408)];a++){if(t[e(418)](t[e(413)],"JWSYn")){const e=_0x337c5f.apply(_0x536f17,arguments);return _0x5094ab=null,e}{const t=Kt[e(389)+"r"].prototype[e(409)](Kt),n=r[a],i=s[n]||t;t[e(396)]=Kt[e(409)](Kt),t[e(382)]=i[e(382)][e(409)](i),s[n]=t}}})();const Gt={};Gt[It(378)]=10,Gt[It(416)]=25,Gt[It(399)]=50,Gt.success=[10,50,20],Gt[It(429)]=[50,30,50,30,50],Gt[It(377)]=5;const _t=Gt,Wt=()=>{const e=It,n={GdgcK:e(394)+e(412)+"ed:",Nltfm:function(e,t){return e!==t},IJHqq:"vibrate",rtEvV:function(e,t,n){return e(t,n)},wPyvP:function(e,t,n){return e(t,n)},hEENK:function(e,t,n){return e(t,n)},wwAUe:function(e,t,n){return e(t,n)}},s=n[e(375)](typeof navigator,e(393))&&n[e(424)]in navigator,r=n[e(411)](t.useCallback,(t="light")=>{const n=e;if(!s)return!1;try{const e=_t[t];return navigator[n(392)](e)}catch(r){return!1}},[s]),a={select:t.useCallback(()=>r(e(377)),[r]),move:t.useCallback(()=>r(e(378)),[r]),capture:n.wPyvP(t.useCallback,()=>r(e(416)),[r]),check:t.useCallback(()=>r(e(399)),[r]),victory:n[e(380)](t.useCallback,()=>r("success"),[r]),error:n[e(371)](t.useCallback,()=>r("error"),[r]),castle:n.wwAUe(t.useCallback,()=>!!s&&navigator[e(392)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator[e(392)]([10,30,10,30,20]),[s])},i={};return i[e(391)+"d"]=s,i[e(392)]=r,i[e(406)]=a,i},Et={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Ut=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Wt();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Ut(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,x,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Ut(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=H(i),j=I&&g&&!y,N=I&&y;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Et[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Yt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Jt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Yt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Vt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Rt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:_,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:G,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Xt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:_,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:G,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Vt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(T,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Rt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(K,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Jt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(W,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(E,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(U,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(O,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(J,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(R,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(X,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(Z,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(J,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(X,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx($,{}),re.capture.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx($,{}),re.checkmate.map((e,t)=>u.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Zt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx($e,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Ft=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(K,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(W,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(K,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},Qt=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[I,T]=t.useState(!1),[G,_]=t.useState(!1);se(p);const W=t.useMemo(()=>p?fe(p):null,[p]),E=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const U=async e=>{if(e&&!v)return void T(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(K,{variant:L?"outline":"default",size:"sm",onClick:()=>E(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(K,{variant:L?"default":"outline",size:"sm",onClick:()=>E(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",W&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",W]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(K,{onClick:()=>U(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(K,{onClick:()=>U(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(K,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:I,onClose:()=>T(!1),onAuthRequired:()=>{T(!1),_(!0)},trigger:"download"}),u.jsx(Le,{isOpen:G,onClose:()=>_(!1)})]})},en=dn;function tn(){const e=["rw5K","mtmYmdq5mhPPyKzADq","yxvSDa","mtG0otu2u3PWD3zj","wKTJvK4","odHVvLbJy0i","icH5B3vYihr1CG","A2v5","zxjYB3i","nefWBNrzzq","A2v5zg93BG","AeT6De0","z3jizgi","tMv4DcbTB3zL","u291BMqGBxv0zq","y29UC3rYDwn0BW","uMvZAwDUigDHBq","khnOB3CGywXSkq","CMqGy29VCMrPBG","u2HVCNrJDxrZoG","qLPTAwu","r28GDg8GC3rHCG","mZziy09RA3a","CMvTB3zLrxzLBG","ChjVDg90ExbL","y3rVCIGICMv0Dq","BhnJCMvLBIbTBW","sgvSCa","ihrPBwvSAw5L","Aw5MBW","Bg9N","Evj3wxy","sNj0Dxq","vg9Nz2XLihnVDq","vg9Nz2XLigjVyq","x19WCM90B19F","qxbrDxi","C0jwwfC","AxndB250zw50rq","C2vHCMnO","vg9Nz2XLl2v4Ca","A1PArM4","tunsvhy","sujHrLy","yMLUza","rxnJ","DgfYz2v0","DgH6qKG","ugXHEs9qyxvZzq","puXVyMj5lca/pq","C3rLBMvY","u0POtfy","r2zcugG","kcGOlISPkYKRkq","DgfIBgu","yxrLCW","zwvU","vMPHD2e","nJu2nJC5vgfoqvHR","CgXHEsK","yxbWBhK","AxqGzNvSBhnJCG","zxnJyxbL","mtaWntuYtuXlzgrR","vg9Nz2XLigz1Ba","DeXPC3rLBMvY","Bg9IyNKGlYbfEa","nJe2odiYyMvcveTQ","zhvYyxrPB24","ChjLDMvUDerLzG","mZe2mZm1qLfruvzy","wfLTzgG","yw5KigXLz2vUza","purYyxCSievZyW","ENPttxC","DfbiwMq","BgvUz3rO","ywn0Aw9U","DgLkvxm","zsaOzhvYAw5Nia","DxrZ","ywrKrxzLBNrmAq","uhjLDMLVDxmGBq","mJyXyLvJCfDK","mJu2mJa1nNjct25dwa","zgL0ywjSzq","CfneEuy","C2HPzNrlzxK","Dg9tDhjPBMC","uMv0DxjUihrVia","qMHzA1O","BMqGB24VB2zM","t2zMzxiGzhjHDW","BMn0Aw9UkcKG","y29UC29Szq"];return(tn=function(){return e})()}!function(){const e=dn,t=tn();for(;;)try{if(337272===-parseInt(e(194))/1+parseInt(e(136))/2*(parseInt(e(185))/3)+-parseInt(e(149))/4*(parseInt(e(197))/5)+parseInt(e(130))/6+-parseInt(e(116))/7+parseInt(e(190))/8*(parseInt(e(115))/9)+parseInt(e(128))/10*(parseInt(e(132))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){const e={ApQur:function(e){return e()},csiVt:function(e,t){return e!==t}};let t=!0;return function(n,s){const r=dn,a={kZZFn:function(t){return e[dn(163)](t)}};if(e.csiVt(r(110),"pJWIE")){const e=t?function(){if(s){const e=s.apply(n,arguments);return s=null,e}}:function(){};return t=!1,e}_0x40a1c2[r(196)+r(129)](),a[r(168)](_0x1bf560)}}()(void 0,function(){const e=dn,t={};t.SJhLV=e(180)+"+$";const n=t;return nn.toString()[e(166)](n[e(178)])[e(120)]()[e(142)+"r"](nn)[e(166)](e(180)+"+$")});nn();const sn=function(){const e=dn,t={};t[e(174)]=function(e,t){return e===t},t[e(198)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e;if(n[a(198)](a(184),a(184))){const e=_0x50370f?function(){if(_0x3597ee){const e=_0x29f924[a(187)](_0x3ca62b,arguments);return _0x568f94=null,e}}:function(){};return _0x4cb45a=!1,e}{const e=s?function(){const e=a;if(r){if(n[e(174)](e(164),e(164))){const n=r[e(187)](t,arguments);return r=null,n}_0x503aad["preventDef"+e(129)](),_0x461541()}}:function(){};return s=!1,e}}}();sn(void 0,function(){const e=dn,t={};t[e(138)]="return (fu"+e(125),t.zzSMw="warn",t[e(122)]=e(156),t[e(179)]=e(135),t[e(118)]="exception",t[e(147)]="trace",t[e(169)]=function(e,t){return e<t};const n=t;let s;try{s=Function(n[e(138)]+"{}.constru"+e(152)+'rn this")( ));')()}catch(i){s=window}const r=s[e(126)]=s[e(126)]||{},a=[e(157),n[e(106)],n[e(122)],n[e(179)],n[e(118)],e(181),n[e(147)]];for(let o=0;n[e(169)](o,a[e(108)]);o++){const t=sn.constructor[e(151)][e(171)](sn),n=a[o],s=r[n]||t;t[e(162)]=sn.bind(sn),t.toString=s[e(120)][e(171)](s),r[n]=t}})();const rn=()=>{const e=dn,t={};t[e(170)]=e(146)+" M=Mute, R=Resign, D"+e(105)+e(176)+e(154);const n=t,s={};s[e(195)]=4e3,o[e(156)](n[e(170)],s)},an={};an[en(134)]="M",an[en(109)]=en(160)+en(123);const on={key:"R"};on[en(109)]=en(143)+en(111)+en(186);const cn={};cn[en(134)]="D",cn[en(109)]=en(124)+en(133)+"n)";const ln={};ln[en(134)]=en(172),ln.action=en(121)+en(193)+en(188)+en(183);const un={};function dn(e,t){e-=104;const n=tn();let s=n[e];if(void 0===dn.bzlOlx){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};dn.mUMlff=r,dn.tyqLqG={},dn.bzlOlx=!0}const a=e+n[0],i=dn.tyqLqG[a];if(i)s=i;else{const e=function(e){this.xVihiG=e,this.zAfWAx=[1,0,0],this.OuwrBj=function(){return"newState"},this.KAlDzy="\\w+ *\\(\\) *{\\w+ *",this.oQkIdo="['|\"].+['|\"];? *}"};e.prototype.jIrFMn=function(){const e=new RegExp(this.KAlDzy+this.oQkIdo).test(this.OuwrBj.toString())?--this.zAfWAx[1]:--this.zAfWAx[0];return this.tqkrIy(e)},e.prototype.tqkrIy=function(e){return Boolean(~e)?this.FaMwzh(this.xVihiG):e},e.prototype.FaMwzh=function(e){for(let t=0,n=this.zAfWAx.length;t<n;t++)this.zAfWAx.push(Math.round(Math.random())),n=this.zAfWAx.length;return e(this.zAfWAx[0])},new e(dn).jIrFMn(),s=dn.mUMlff(s),dn.tyqLqG[a]=s}return s}un[en(134)]="?",un[en(109)]="Show keyboard shortc"+en(112);const mn={};mn[en(134)]="Space",mn[en(109)]=en(175)+en(155),en(114);const xn={};xn[en(134)]="â†’",xn[en(109)]=en(140);const hn={};hn[en(134)]="Home",hn[en(109)]=en(148)+"t";const pn={};pn[en(134)]=en(127),pn[en(109)]="Go to end "+en(144);const fn={};fn[en(134)]="F",fn[en(109)]=en(191)+en(153)+"de";const gn={};gn[en(134)]="C",gn.action=en(161)+en(145)+en(182);const vn={key:"L"};vn[en(109)]=en(167)+en(104);const bn=qn;!function(){const e=qn,t=Tn();for(;;)try{if(173474===-parseInt(e(589))/1*(parseInt(e(473))/2)+parseInt(e(557))/3*(-parseInt(e(558))/4)+-parseInt(e(538))/5+parseInt(e(531))/6+parseInt(e(460))/7*(-parseInt(e(501))/8)+parseInt(e(495))/9+parseInt(e(542))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const yn=function(){const e={oXCOu:function(e,t){return e!==t}},t=e;let n=!0;return function(e,s){const r=qn;if(t.oXCOu("TEPnM",r(535))){const t=n?function(){if(s){const t=s[r(499)](e,arguments);return s=null,t}}:function(){};return n=!1,t}_0x2f2b7a=_0x2cab92[r(510)],_0x527a97=_0xe355ee}}()(void 0,function(){const e=qn,t={};t.ASpED=e(583)+"+$";const n=t;return yn.toString()[e(504)](n.ASpED).toString()[e(553)+"r"](yn).search(n[e(516)])});yn();const wn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qn(499)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();wn(void 0,function(){const e=qn,t={iJsky:function(e,t){return e+t},uaOyS:e(484)+e(567),sbKDR:function(e,t){return e===t},eCXhI:function(e){return e()},RVNDZ:e(581),kVUdt:"table",KgDwY:e(530),jvqHD:function(e,t){return e<t},EzpAb:function(e,t){return e!==t},VZgMD:"bqPGn"},n=t[e(479)](function(){const n=e;let s;try{s=Function(t[n(591)](t[n(514)]+"{}.constru"+n(594)+'rn this")( )',");"))()}catch(r){s=window}return s}),s=n[e(555)]=n[e(555)]||{},r=[e(534),e(529),t[e(513)],"error","exception",t[e(525)],t[e(556)]];for(let a=0;t[e(559)](a,r.length);a++){if(!t[e(492)](t[e(470)],e(528)))return t.sbKDR(_0x21e2c5[e(502)](),"w")?-_0x2f87fd:_0x405bd8;{const t=wn[e(553)+"r"][e(548)][e(500)](wn),n=r[a],i=s[n]||t;t.__proto__=wn.bind(wn),t.toString=i[e(565)].bind(i),s[n]=t}}})();const jn={p:100,n:320,b:330,r:500,q:900,k:2e4},Cn=jn,Nn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],kn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Mn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],zn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Dn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Bn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Ln(e){switch(e.toLowerCase()){case"p":return Nn;case"n":return kn;case"b":return Mn;case"r":return zn;case"q":return Dn;case"k":return Bn;default:return[]}}function qn(e,t){e-=459;const n=Tn();let s=n[e];if(void 0===qn.obSoDz){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qn.pwReuS=r,qn.pCKCsN={},qn.obSoDz=!0}const a=e+n[0],i=qn.pCKCsN[a];if(i)s=i;else{const e=function(e){this.lVfgtU=e,this.WVRIOQ=[1,0,0],this.YxWwsj=function(){return"newState"},this.mRFgdu="\\w+ *\\(\\) *{\\w+ *",this.TMNqJt="['|\"].+['|\"];? *}"};e.prototype.hZBVft=function(){const e=new RegExp(this.mRFgdu+this.TMNqJt).test(this.YxWwsj.toString())?--this.WVRIOQ[1]:--this.WVRIOQ[0];return this.upqJwZ(e)},e.prototype.upqJwZ=function(e){return Boolean(~e)?this.JNpPgn(this.lVfgtU):e},e.prototype.JNpPgn=function(e){for(let t=0,n=this.WVRIOQ.length;t<n;t++)this.WVRIOQ.push(Math.round(Math.random())),n=this.WVRIOQ.length;return e(this.WVRIOQ[0])},new e(qn).hZBVft(),s=qn.pwReuS(s),qn.pCKCsN[a]=s}return s}function An(e){const t=qn,n={KnWAm:function(e,t){return e(t)},FKjgI:function(e,t){return e<t},JrqiJ:function(e,t){return e===t},GujmF:t(474),yAGfc:function(e,t){return e<t},dlnbi:function(e,t){return e===t},zmzyj:function(e,t){return e*t},VOptu:function(e,t){return e*t}};if(e[t(466)+"e"]())return"w"===e[t(502)]()?-1/0:1/0;if(e[t(547)]()||e[t(461)+"e"]())return 0;let s=0;const r=e[t(544)]();for(let i=0;n[t(550)](i,8);i++){if(!n[t(507)](t(474),n[t(536)]))return{score:n[t(532)](_0x4cc10d,_0x5849dc),move:null};for(let e=0;n[t(522)](e,8);e++){const a=r[i][e];if(a){const r=Cn[a.type]||0,o=Ln(a.type);let c=0;if(o.length>0){c=o[n[t(596)](a[t(518)],"w")?i:7-i][e]}const l=r+c;s+=n.JrqiJ(a[t(518)],"w")?l:-l}}}const a=e[t(561)]()[t(508)];return s+="w"===e[t(502)]()?n.zmzyj(a,2):n[t(462)](-a,2),s}function Sn(e,t,n,s,r){const a=qn,i={cdWGf:function(e,t){return e(t)},ZJIVU:function(e,t){return e(t)},JWejC:function(e,t){return e===t},IyBwm:function(e,t){return e!==t},azSCJ:a(506),dWKff:function(e,t){return e>t},KlNVf:a(527),kfBze:function(e,t){return e<=t},ZoOqf:function(e,t){return e-t},tYzZx:function(e,t){return e!==t}};if(i[a(569)](t,0)||e[a(523)]())return{score:An(e),move:null};const o={verbose:!0},c=e[a(561)](o);if(c.sort((e,t)=>{const n=a;let s=0,r=0;return e[n(537)]&&(s+=Cn[e.captured]||0),t[n(537)]&&(r+=Cn[t.captured]||0),e[n(554)][n(459)]("+")&&(s+=50),t[n(554)][n(459)]("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const u of c){if(i.IyBwm(i.azSCJ,i[a(552)])){let e=0,t=0;return _0x7f8eb3[a(537)]&&(e+=_0x3917ee[_0x4c3efb.captured]||0),_0xaed8d8.captured&&(t+=_0x4bc3bd[_0x3b3f34[a(537)]]||0),_0x8e164d[a(554)][a(459)]("+")&&(e+=50),_0x71265a[a(554)].includes("+")&&(t+=50),t-e}{e.move(u);const c=Sn(e,t-1,n,s,!1);if(e[a(483)](),i[a(511)](c.score,r)&&(i[a(464)]===a(527)?(r=c[a(510)],o=u):(_0x4c5c93=_0x40bd27,_0x51b54a=_0x354cb1)),n=Math[a(584)](n,c[a(510)]),i.kfBze(s,n))break}}const l={};return l.score=r,l.move=o,l}{let r=1/0,o=null;for(const u of c){e[a(564)](u);const c=Sn(e,i.ZoOqf(t,1),n,s,!0);if(e[a(483)](),c[a(510)]<r)if(i[a(463)](a(494),"QnIyO"))switch(_0x250819){case a(541):return _0x124af2(_0x83edcd);case a(476):return i.cdWGf(_0x703646,_0x2abb15);case a(560):return _0x2cce6b(_0x622ff7);case a(524):return _0x3280f4(_0x490a7c);default:return i[a(577)](_0x4629f5,_0x2bbf54)}else r=c[a(510)],o=u;if((s=Math[a(585)](s,c[a(510)]))<=n)break}const l={};return l[a(510)]=r,l[a(564)]=o,l}}function Pn(e){const t=qn,n={rTDSC:function(e,t){return e===t},OtOgX:function(e,t){return e>t}};n[t(540)]=function(e,t){return e<t};const s=n,r={};r[t(496)]=!0;const a=e[t(561)](r);if(s.rTDSC(a.length,0))return null;const i=a[t(549)](e=>e.captured);return s[t(512)](i[t(508)],0)&&s[t(540)](Math[t(488)](),.3)?i[Math[t(570)](Math.random()*i[t(508)])]:a[Math[t(570)](Math[t(488)]()*a.length)]}function Hn(e){const t=qn,n={keJfC:function(e,t){return e===t},ALaRF:function(e,t){return e-t},XOuAF:function(e,t){return e(t)},paVyl:t(579),AxmFX:function(e,t){return e<t},AKBjT:function(e,t){return e*t}},s={};s[t(496)]=!0;const r=e[t(561)](s);if(n[t(519)](r[t(508)],0))return null;let a=null,i="w"===e[t(502)]()?-1/0:1/0;for(const o of r){e[t(564)](o);const s=n[t(576)](An,e);if(e[t(483)](),n[t(519)](e[t(502)](),"w")){if(s>i){if(t(480)===t(571)){const e=_0x293097[t(499)](_0x461eac,arguments);return _0x42510b=null,e}i=s,a=o}}else t(587)===n[t(505)]?_0x31015f>_0x296a3f&&(_0x590897=_0x4cf05c,_0x55e8dd=_0x36caba):n[t(486)](s,i)&&(i=s,a=o)}if(Math.random()<.2){const s=r[t(592)]((s,r)=>{const a=t;e.move(s);const i=An(e);e[a(483)](),e.move(r);const o=An(e);return e[a(483)](),n[a(519)](e[a(502)](),"w")?o-i:n[a(582)](i,o)}),a=s[t(572)](0,Math[t(585)](3,s[t(508)]));return a[Math[t(570)](n[t(573)](Math[t(488)](),a.length))]}return a}function In(e){const t=qn;return function(e,t,n,s,r,a){return e(t,n,s,r,a)}(Sn,e,4,-1/0,1/0,function(e,t){return e===t}(e[t(502)](),"w"))[t(564)]}function Tn(){const e=["BgfIzwW","AxneCMf3","ChjVDg90ExbL","zMLSDgvY","rKTQz0K","Avjhy0O","yxPtq0O","y29UC3rYDwn0BW","C2fU","y29UC29Szq","s2DeD1K","mJy3mZi0tgrkwurN","ofjmwxnOBG","ANzXseq","AgfYza","Bw92zxm","twfZDgvY","AxrPB24","Bw92zq","Dg9tDhjPBMC","igzHBgXPBMCGyG","BMn0Aw9UkcKG","B2nJyxnPB25HBa","sLDLAKm","zMXVB3i","ruH0wMS","C2XPy2u","quTcALq","v2vTvNi","zw5NAw5LlcbNCG","we91quy","wKPjvLu","wxfmq2O","ue9mreW","Bw92zsbLCNjVCG","Aw5MBW","quXHuKy","kcGOlISPkYKRkq","Bwf4","BwLU","CMvK","qKPHDwO","ignHChr1CMvZ","mwDyvufmrG","Bw92zxrPBwu","AuPZA3K","C29YDa","qMvNAw5Uzxi","y3rVCIGICMv0Dq","q2X1yIbqBgf5zq","zgXUyMK","D1zfu2i","D2fPDfjLywr5","Aw5JBhvKzxm","mtG0odK4z2LYDuz1","AxntDgfSzw1HDa","vK9WDhu","DfL6wNG","s2XovMy","zujiwxu","AxndAgvJA21HDa","zgvZy3jPChrPBW","AM9yD3K","AwnZigfUzcbTyq","vLPNtuq","zgvWDgG","zw5NAw5Lug93zq","mJG0mZmYzuPNs2fT","qwvOD1C","vKrLCMO","BwvKAxvT","DMfSDwf0Aw9Ula","CMf0Aw5N","zunyAeK","t09QrhO","FJe0mda","thjLrwO","Dw5KBW","CMv0DxjUicHMDq","ChjVBw90Aw9U","qxHTrLG","FJmYmda","CMfUzg9T","zNjVBq","zxjYB3i","yw5KBwfZDgvYia","rxPWqwi","u3rVy2TMAxnOia","uw5jEu8","mJGWmJyWmfbyvvbhzW","DMvYyM9Zzq","yvfkA28","uNngzgW","yxbWBhK","yMLUza","mZjuC1b1Cfe","DhvYBG","FJGWma","C2vHCMnO","CgfwEwW","wxbNuKi","sNjXAuO","BgvUz3rO","zMvU","C2nVCMu","zfDlzMy","t3rpz1G","uLzorfO","DwfpEvm","CvjMwvG","qvnWruq","CMvUzxnZ","y29SB3i","A2vkzKm","zfPyq3q","yMvZDe1VDMu","EufhzMm","Axnhyw1Lt3zLCG","C3rVy2TMAxnO","A1zvzhq","FJiWmda","vMLNzgq","BeTWveq","D2fYBG","DhjHy2u","mtuXnJuZnLrIwvDitG","s25xqw0","twfRzxmGCMfUza","Bg9N","B3nPsxa","r3vQBuy","y2fWDhvYzwq","nZa4mJq1BxrXv25m","Awnru3q","A3Hgtfy","zwfZEq","mtC3mda1mef0DNzbwa","ywnRihrVigHHCG","yM9HCMq","C1LrrM8"];return(Tn=function(){return e})()}const Kn={};Kn.id=bn(541),Kn[bn(546)]=bn(593),Kn[bn(467)+"n"]=bn(533)+"om moves, "+bn(568)+bn(588),Kn[bn(478)]=bn(503);const Gn={id:"medium"};Gn[bn(546)]=bn(595)+"r",Gn[bn(467)+"n"]="Basic tact"+bn(469)+"terial awa"+bn(517),Gn.rating=bn(481);const _n={};_n.id=bn(560),_n[bn(546)]=bn(562),_n[bn(467)+"n"]="Advanced e"+bn(477)+" 4-ply search depth",_n[bn(478)]=bn(526);const Wn={id:"stockfish"};Wn[bn(546)]=bn(493)+"16",Wn[bn(467)+"n"]="Real NNUE "+bn(575)+bn(491)+"strength",Wn[bn(478)]=bn(487),Wn[bn(472)+bn(586)]=!0;const En=[Kn,Gn,_n,Wn];!function(){const e=Jn,t=Yn();for(;;)try{if(902631===-parseInt(e(283))/1*(parseInt(e(296))/2)+parseInt(e(245))/3*(parseInt(e(249))/4)+-parseInt(e(257))/5+-parseInt(e(248))/6+parseInt(e(289))/7*(parseInt(e(275))/8)+parseInt(e(281))/9+parseInt(e(288))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Un=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Jn,t={};t[e(246)]="(((.+)+)+)+$";const n=t;return Un[e(293)]().search(n.rNwtP).toString().constructor(Un).search(e(282)+"+$")});Un();const On=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Jn(251)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Yn(){const e=["CMv0DxjUicHMDq","zg9lA3y","CNnkENa","BgvUz3rO","t2nWrhy","B25uB3vJAfn0yq","nJG3mde1mKnLsgr0rq","qxvYDwW","C3rHCNry","y3rVCIGICMv0Dq","D2jxuNq","D2fYBG","otaXmZaYm2Xnt2jMAa","kcGOlISPkYKRkq","nKvTAKnHAW","y3vYCMvUDfK","DhjHy2u","y3vYCMvUDa","EKXyBuC","mti4nJyZmJbbueXIvw0","n09IBe9Vuq","E30Uy29UC3rYDq","yMLUza","vMHcveu","Dg9tDhjPBMC","BxzuzNy","DgfIBgu","ndi5mJm2EuvXBuHM","BMrUr20","y3vYCMvUDfG","yxDvwu4","Dg91y2HLCW","q05pq2i","yxLPDfe","nZuWotbzt0PQDgm","CK53Dfa","y29UC29Szq","ody1nJa5mLH6uMHcqq","odHhq2Poz3K","zgDItvK","yxbWBhK","DLH6CKG","y2XPzw50wq","tgDOu0G","tM9Qv3O","ChjVDg90ExbL","mZiYndm1txP2wvvX","B25nB3vZzvvW","B25uB3vJAe1VDG","r1rxEey","x19WCM90B19F","C3rHCNrz","AgfUzgXLCNm","y2XPzw50wa","AxntD2LWAw5N","zxHJzxb0Aw9U","rgfPtwK","ywjZ"];return(Yn=function(){return e})()}function Jn(e,t){e-=245;const n=Yn();let s=n[e];if(void 0===Jn.aFiFTV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Jn.dtIteV=r,Jn.oHyKxy={},Jn.aFiFTV=!0}const a=e+n[0],i=Jn.oHyKxy[a];if(i)s=i;else{const e=function(e){this.eGAXTl=e,this.zBZVOZ=[1,0,0],this.Tvfbpz=function(){return"newState"},this.sxmdfI="\\w+ *\\(\\) *{\\w+ *",this.CrqRkH="['|\"].+['|\"];? *}"};e.prototype.MrZIZi=function(){const e=new RegExp(this.sxmdfI+this.CrqRkH).test(this.Tvfbpz.toString())?--this.zBZVOZ[1]:--this.zBZVOZ[0];return this.vNwBAN(e)},e.prototype.vNwBAN=function(e){return Boolean(~e)?this.YfJXhC(this.eGAXTl):e},e.prototype.YfJXhC=function(e){for(let t=0,n=this.zBZVOZ.length;t<n;t++)this.zBZVOZ.push(Math.round(Math.random())),n=this.zBZVOZ.length;return e(this.zBZVOZ[0])},new e(Jn).MrZIZi(),s=Jn.dtIteV(s),Jn.oHyKxy[a]=s}return s}On(void 0,function(){const e=Jn,t={CNOCb:function(e,t){return e+t},DaiMi:function(e,t){return e+t},vzroA:e(269)+"nction() ",LghSH:e(290)+e(278)+'rn this")( )',mvTfv:function(e,t){return e===t},GTWxF:function(e){return e()},bWVdB:"log",rsJzp:e(295)},n=t[e(260)](function(){const n=e;let s;try{s=Function(t[n(301)](t[n(267)](t.vzroA,t[n(254)]),");"))()}catch(r){t[n(294)](n(302),n(302))?s=window:_0x112b9a()}return s}),s=n[e(247)]=n[e(247)]||{},r=[t.bWVdB,e(280),"info","error",e(266),t[e(271)],e(285)];for(let a=0;a<r[e(272)];a++){const t=On.constructor[e(256)][e(291)](On),n=r[a],i=s[n]||t;t[e(261)]=On[e(291)](On),t.toString=i[e(293)][e(291)](i),s[n]=t}})();const Vn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:_e,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:_e,description:"15 minutes"}],Rn=["bot","create","join"],Xn=()=>{var e,n,s,l,d,x,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:L}=Wt(),[q,A]=t.useState("lobby"),[S,H]=t.useState(!1),[I,T]=t.useState(!1),[G,W]=t.useState("bot"),[E,U]=t.useState("human"),[O,Y]=t.useState("medium"),[J,V]=t.useState("blitz_5"),[R,X]=t.useState("hotCold"),[Z,F]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=vt(Ce,Ne),[Me,ze]=t.useState([]),[De,qe]=t.useState(!1),[Ae,_e]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Rn.indexOf(G);let n;n="left"===e?Math.min(t+1,Rn.length-1):Math.max(t-1,0),n!==t&&(L.select(),W(Rn[n]))},[G,L]),{swipeOffset:xt,isSwiping:pt,handlers:ft}=((e={})=>{const n=Jn,s={ErLgX:function(e,t){return e-t},OcpDv:function(e,t){return e(t)},NojWz:function(e,t){return e>t},dgbMY:"srytK",VhBTE:function(e,t){return e(t)},Aurul:function(e,t,n){return e(t,n)},awUYN:function(e){return e()},wbWRt:function(e,t,n){return e(t,n)},vXzrH:function(e,t,n){return e(t,n)},doKkv:function(e){return e()},KRSRE:function(e,t,n){return e(t,n)},zLXmG:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s.OcpDv(t.useState,u),[x,h]=s[n(292)](t.useState,!1),p={startX:0,startY:0};p[n(298)]=0,p.currentY=0,p[n(265)]=!1;const f=s[n(292)](t.useRef,p),g=t.useCallback((e,t)=>{const s=n,r={};r.startX=e,r[s(262)]=t,r[s(298)]=e,r[s(284)]=t,r[s(265)]=!0,f[s(286)]=r,h(!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(!f[r(286)].isSwiping)return;f[r(286)].currentX=e,f[r(286)][r(284)]=t;const a=s.ErLgX(e,f.current[r(277)]),i=t-f[r(286)][r(262)],o={};o.x=a,o.y=i,s[r(273)](m,o)},[]),b=t.useCallback(()=>{const e=n;if(!f[e(286)][e(265)])return;const t=f.current[e(298)]-f[e(286)][e(277)],a=f[e(286)][e(284)]-f[e(286)][e(262)],u=Math[e(268)](t),d=Math.abs(a);if(s[e(255)](u,d)&&u>r)t>0?null==o||o():null==i||i();else if(d>u&&s[e(255)](d,r)){if(e(297)===s[e(250)]){const t=_0x45aba9[e(251)](_0x529a22,arguments);return _0x657fa2=null,t}s[e(255)](a,0)?null==l||l():null==c||c()}f[e(286)][e(265)]=!1,h(!1);const x={x:0,y:0};s.VhBTE(m,x)},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n,r=e.touches[0];s[t(276)](g,r[t(264)],r[t(253)])},[g]),w=t.useCallback(e=>{const t=n,s=e[t(300)][0];v(s[t(264)],s[t(253)])},[v]),j=s.KRSRE(t.useCallback,()=>{s[n(299)](b)},[b]),C=t.useCallback(e=>{const t=n;a&&s[t(279)](g,e[t(264)],e[t(253)])},[a,g]),N=s[n(287)](t.useCallback,e=>{a&&s.vXzrH(v,e.clientX,e.clientY)},[a,v]),k=s[n(252)](t.useCallback,()=>{a&&b()},[a,b]),M=t.useCallback(()=>{const e=n;a&&f.current[e(265)]&&s[e(270)](b)},[a,b]),z={};z[n(274)+"rt"]=y,z[n(259)+"e"]=w,z.onTouchEnd=j,z.onMouseDown=C,z.onMouseMove=N,z[n(258)]=k,z.onMouseLeave=M;const D={};return D.swipeOffset=d,D.isSwiping=x,D[n(263)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:zt,resignGame:Bt,offerDraw:Lt,loadGame:At,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=Dt,n={WYnWB:function(e,t){return e(t)},niUer:function(e,t){return e!==t},IWFRv:function(e,t){return e===t},SkpDO:e(459),ZGDbx:"jvLiR",YTKWG:e(375),eMgzD:e(444),rFWmv:e(521),CCuTi:e(351),FRndw:function(e,t){return e===t},obIRx:e(469)+"s",uJuTB:"postgres_c"+e(491),drptv:e(413),ownnU:function(e,t){return e(t)},YZFHX:e(364)+"ound",bWrCz:e(567)+"s",cpnLC:"move_uci",ugxRW:function(e,t){return e instanceof t},JTfSM:e(420)+"load game",urPRx:function(e,t){return e===t},WEZfX:e(522),iNvHD:function(e,t){return e(t)},JpLUZ:e(363),kGfFd:e(343)+"ed! Waitin"+e(471)+e(581),nxXqg:function(e,t){return e(t)},ArMYX:e(420)+e(400)+"e",IxCUZ:function(e,t){return e(t)},hJpff:function(e,t){return e!==t},DMUuE:function(e,t){return e(t)},aFhGt:e(381)+"e! You are"+e(341)+e(495),MZCah:e(506)+e(387)+e(392),uhXGA:e(380)+e(484),Wmvbf:e(461),zJdyt:"Invalid or"+e(415)+e(348)+"ode",YRaYG:function(e,t){return e instanceof t},ydQhI:function(e,t){return e(t)},waUXU:function(e,t){return e(t)},PbDzG:e(349),EYOZJ:e(558),evhBF:function(e,t){return e===t},Bzedx:e(397),INZeT:e(503),syiSL:e(356),dogec:e(514),uSTSf:function(e,t){return e===t},uyXuE:e(313),txuru:function(e,t){return e+t},hLfoX:function(e,t){return e+t},QDKBG:function(e,t){return e||t},toQJd:function(e,t){return e!==t},SBtGO:"rNcAO",rEWzZ:function(e,t,n,s){return e(t,n,s)},ZAvrj:function(e,t){return e===t},utFzN:"JavTn",CTeXH:"white_wins",oodFD:"White wins!",uxley:e(478),zXDpi:"Black wins!",nLaSA:function(e,t){return e(t)},uncqx:function(e,t){return e(t)},Kmuuv:e(511),nTwNE:e(317),kFUnB:e(451)+e(464),wBnMt:"user_id",dHOgV:function(e,t){return e!==t},JkVUE:function(e,t){return e>=t},fYiWR:function(e,t){return e===t},cfqKH:"YtKDU",XWXRW:function(e,t){return e===t},jgAWV:function(e,t,n,s){return e(t,n,s)},OjuBr:function(e,t){return e===t},GpCQO:e(362),gFHfP:function(e){return e()},NtHRx:function(e,t){return e(t)},suRMO:function(e,t){return e(t)},xcuQv:function(e,t,n){return e(t,n)},nkwVp:function(e,t){return e===t},sSGUd:function(e,t,n){return e(t,n)},oBRHD:function(e,t,n){return e(t,n)}},{user:s}=n[e(462)](r),[l,u]=n[e(412)](t.useState,new a),[d,m]=n.NtHRx(t.useState,null),[x,h]=n[e(556)](t.useState,!1),[p,f]=t.useState(null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n.gFHfP(Mt),{playSound:w}=n[e(488)](vt,b,y);t.useRef("");const j=d?n[e(455)](d[e(460)+e(517)],null==s?void 0:s.id)?"w":n.evhBF(d[e(379)+"rId"],null==s?void 0:s.id)?"b":null:null,C=n[e(344)](null==d?void 0:d[e(461)],n[e(560)])&&n[e(554)](l[e(355)](),j);n[e(488)](t.useEffect,()=>{const t=e,r={rLMPj:function(e,t){return n[qt(412)](e,t)},CIifn:function(e,t){return n[qt(412)](e,t)},uwqac:function(e,t){return e===t},AMMqs:t(514),xmugc:function(e,s){return n[t(538)](e,s)},evEhl:function(e,t){return n.IWFRv(e,t)},zAdHH:n[t(430)],IVSFp:function(e,t){return e(t)},rtHBZ:function(e,s){return n[t(500)](e,s)},qCtXk:n.ZGDbx,ZJXpu:t(418),PkQlM:function(e,t){return e(t)},ZoBfD:function(e,t){return e===t},jdyYD:function(e,t){return e(t)},onquc:n[t(427)],pVdgn:t(376),oUFxY:function(e,t){return e(t)},wflLn:n[t(443)],dOEDk:function(e,t){return e(t)},gyROl:n.rFWmv,nnyJM:function(e,s){return n[t(500)](e,s)},UKMkZ:n[t(467)],xPxbM:function(e,t){return n.FRndw(e,t)},DJvDY:"O-O",ZJAce:t(529),ebbin:t(503)};if(!(null==d?void 0:d.id))return;const o=i[t(474)]("game-"+d.id).on("postgres_c"+t(491),{event:t(594),schema:t(470),table:n[t(370)],filter:"id=eq."+d.id},e=>{const n=t,i=function(e,t){return r[qt(353)](e,t)},o=e[n(487)];if(r[n(335)](o[n(461)],r[n(332)])&&r.xmugc(d[n(461)],r[n(332)]))if(r.evEhl(o[n(479)],r.zAdHH))r[n(562)](w,r[n(446)]);else if(r[n(368)](o[n(523)],null==s?void 0:s.id))w(n(375));else if(r[n(528)]!==r[n(396)])r[n(562)](w,n(601));else if(_0x71c05){const e=_0x5edd2d[n(493)](_0x5be077,arguments);return _0x3f9c62=null,e}if(m(e=>e?{...e,status:o[n(461)],result:o.result,pgn:o[n(571)],currentFen:o[n(337)+"n"],moveCount:o.move_count,whiteTimeRemaining:o[n(531)+n(518)],blackTimeRemaining:o.black_time_remaining,winnerId:o[n(523)],blackPlayerId:o[n(475)+n(438)],startedAt:o[n(593)]}:null),o[n(337)+"n"])if(r[n(335)]("XEekE",n(548))){const e=new a(o[n(337)+"n"]);u(e)}else i(_0xcf6926,n(601))})[t(504)](),c=i.channel(t(409)+d.id).on(n.uJuTB,{event:n[t(327)],schema:t(470),table:t(567)+"s",filter:t(520)+"."+d.id},e=>{const n=t,a=e[n(487)],i=a[n(316)];if(i&&i[n(310)]>=4){const e=i[n(480)](2,4);v(t=>new Set([...t,e]))}if(a[n(590)]!==(null==s?void 0:s.id))if(r.pVdgn===n(376)){const e=a.move_san;if(e[n(320)]("#"))r[n(308)](w,n(402));else if(e[n(320)]("+"))if(r[n(454)]===n(444))r[n(390)](w,r[n(519)]);else{const e=_0x98257d[n(480)](2,4);r[n(353)](_0x1fcf59,t=>new _0x4e6f6b([...t,e]))}else e[n(320)]("x")?r[n(502)](n(351),r[n(584)])?w(n(349)):_0x24917e[n(479)]===r[n(446)]?r[n(366)](_0x146ebc,n(459)):r[n(347)](_0x4d192a[n(523)],null==_0x4286a2?void 0:_0x4286a2.id)?r[n(429)](_0x3bb562,r[n(436)]):_0x5a9c58(n(601)):r.xPxbM(e,r.DJvDY)||e===n(397)?r[n(562)](w,r[n(498)]):w(r[n(457)])}else{const e=_0x4f4969.black[n(507)];_0x26665a[n(403)](n(510)+_0x1431e0[n(499)][n(563)]+" ("+(e>=0?"+":"")+e+")")}})[t(504)]();return()=>{const e=t;i[e(386)+e(373)](o),i[e(386)+"nel"](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(461)],null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e;n[s(435)](h,!0),f(null);try{const{data:e,error:r}=await i[s(536)](n[s(370)])[s(384)]("*").eq("id",t)[s(354)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(371)]);const o={};o.id=e.id,o[s(460)+s(517)]=e[s(323)+s(438)],o[s(379)+s(517)]=e[s(475)+s(438)],o[s(461)]=e.status,o[s(479)]=e.result,o[s(571)]=e[s(571)]||"",o[s(575)]=e[s(337)+"n"],o[s(553)]=e.move_count||0,o.timeControl=e[s(489)+"ol"],o[s(401)+"emaining"]=e[s(531)+"_remaining"],o[s(358)+s(346)]=e["black_time"+s(518)],o[s(535)+"te"]=e[s(318)+s(477)],o[s(542)+"te"]=e[s(539)+s(477)],o[s(505)+s(526)]=e[s(380)+s(484)],o[s(389)]=e[s(523)],o[s(547)]=e[s(383)],o[s(472)]=e.started_at,m(o);const c=new a(e.current_fen);u(c);const l={};l[s(432)]=!0;const{data:d}=await i[s(536)](n[s(549)])[s(384)](n.cpnLC).eq(s(393),t)[s(417)](s(404)+"r",l);if(d){const e=new Set;d[s(596)](t=>{const n=s;t[n(316)]&&t.move_uci.length>=4&&e[n(452)](t[n(316)].substring(2,4))}),n.WYnWB(v,e)}}catch(r){n.ownnU(f,n[s(516)](r,Error)?r.message:n[s(561)])}finally{if(!n[s(473)]("lKVUn",n.WEZfX)){const e=_0x10ab84[s(493)](_0x381d6d,arguments);return _0x2b3378=null,e}h(!1)}},[]),k=n[e(592)](t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o[c(324)](c(506)+c(497)+"eate a game"),null;n[c(378)](h,!0),f(null);try{const e=St[t]||null,{data:l}=await i[c(595)]("generate_c"+c(534)+c(526)),u={};u["white_play"+c(438)]=s.id,u.status=n[c(508)],u[c(489)+"ol"]=t,u[c(531)+c(518)]=e,u["black_time"+c(518)]=e,u[c(318)+c(477)]=a,u.is_public=r,u[c(380)+c(484)]=l;const{data:d,error:m}=await i[c(536)]("chess_games")[c(486)](u)[c(384)]()[c(434)]();if(m)throw m;return o[c(406)](r?n.kGfFd:c(597)+c(589)+l),await n[c(537)](N,d.id),d.id}catch(l){const e=l instanceof Error?l[c(328)]:n.ArMYX;return n.IxCUZ(f,e),o[c(324)](e),null}finally{h(!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e;if(n[a(422)](a(569),a(569)))_0x5ade59(a(402));else{if(!s)return o.error(a(506)+"n in to jo"+a(392)),!1;h(!0),n[a(450)](f,null);try{const{data:e,error:c}=await i.from(n[a(370)])[a(384)]("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(n.YZFHX);if("waiting"!==e[a(461)])throw new Error("Game alrea"+a(485));if(e[a(323)+a(438)]===s.id)throw new Error(a(492)+a(525)+a(449));const{error:l}=await i[a(536)](n.obIRx).update({black_player_id:s.id,black_palette:r,status:a(356),started_at:(new Date)[a(445)+"g"](),last_move_at:(new Date)[a(445)+"g"]()}).eq("id",t);if(l)throw l;return n.DMUuE(w,a(439)),o[a(406)](n[a(437)]),await N(t),!0}catch(c){const e=n[a(516)](c,Error)?c[a(328)]:"Failed to "+a(388);return n[a(378)](f,e),o[a(324)](e),!1}finally{h(!1)}}},[s,N,w]),z=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(324)](n[a(377)]),!1;h(!0),f(null);try{const{data:e,error:s}=await i.from(a(469)+"s")[a(384)]("id").eq(n[a(405)],t[a(552)+"e"]()).eq(n[a(326)],n.JpLUZ)[a(354)+"e"]();if(s)throw s;if(!e)throw new Error(n[a(330)]);return await M(e.id,r)}catch(c){const e=n[a(557)](c,Error)?c.message:a(420)+a(428)+"de";return n[a(425)](f,e),o[a(324)](e),!1}finally{h(!1)}},[s,M]),D=t.useCallback(async(t,r,c)=>{const m=e,x={PccSV:function(e,t){return e(t)}};if(!d||!s||!C)return!1;try{const e={};e[m(536)]=t,e.to=r,e.promotion=c;const h=l[m(503)](e);if(!h)return w(m(391)),!1;l[m(543)+"e"]()?n[m(537)](w,m(402)):l.isCheck()?w(n[m(570)]):h[m(424)]?n[m(338)](w,n[m(501)]):h[m(322)]===n[m(494)]||n[m(545)](h[m(322)],n[m(530)])?n[m(425)](w,"castle"):n[m(378)](w,n[m(466)]),u(new a(l[m(431)]())),v(e=>new Set([...e,r]));const p=l[m(571)](),f=l[m(431)]();let g=null,b=null,y=n[m(560)];if(l[m(374)]()&&(y=n[m(599)],l[m(543)+"e"]()?(g=n[m(319)](l[m(355)](),"w")?n.uyXuE:m(345),b=n[m(473)](l.turn(),"w")?d[m(379)+"rId"]:d[m(460)+"rId"]):g=n[m(430)]),await i[m(536)](m(567)+"s")[m(486)]({game_id:d.id,player_id:s.id,move_number:d[m(553)]+1,move_san:h[m(322)],move_uci:n[m(416)](n[m(587)](t,r),n[m(398)](c,"")),fen_after:f}),await i.from(m(469)+"s")[m(586)]({pgn:p,current_fen:f,move_count:d[m(553)]+1,last_move_at:(new Date).toISOString(),status:y,result:g,winner_id:b,completed_at:y===n[m(599)]?(new Date).toISOString():null}).eq("id",d.id),y===n[m(599)]&&g)if(n[m(331)](m(382),n[m(411)])){if(await n[m(578)](B,d[m(460)+"rId"],d[m(379)+"rId"],g),n[m(365)](g,m(459)))if(m(372)!==n[m(334)]){const e={JKFJK:function(e,t){return e>=t}},t=new _0xef613e;_0x2bd3b4.forEach(n=>{const s=m;n[s(316)]&&e[s(321)](n[s(316)][s(310)],4)&&t.add(n[s(316)][s(480)](2,4))}),_0x8a8682(t)}else w("draw");else n.IWFRv(b,null==s?void 0:s.id)?w(n[m(427)]):n[m(378)](w,m(601));n[m(545)](g,n[m(357)])?o[m(406)]("w"===j?m(478):n.oodFD):"black_wins"===g?o[m(406)]("b"===j?n[m(456)]:n[m(566)]):o[m(403)](n.nLaSA(ht,l))}else x[m(598)](_0x16b09a,m(503));return!0}catch(h){return!1}},[l,d,s,C,j,w]),B=n[e(488)](t.useCallback,async(t,r,a)=>{const l=e,u={TSKyi:function(e,t){return n[qt(447)](e,t)},lppqo:l(402)};if(l(582)!==n[l(527)]){if(!t||!r||a===l(550))return;try{const{data:e}=await i[l(536)](n[l(573)])[l(384)](n.kFUnB).in(n.wBnMt,[t,r]);if(!e||n[l(312)](e[l(310)],2))return;const u=e[l(441)](e=>e[l(465)]===t),d=e.find(e=>e[l(465)]===r);if(!u||!d)return;const m=u[l(395)]||1200,x=d[l(395)]||1200,h=a===n[l(430)]?n[l(430)]:a,p=c(m,x,h),f={};f[l(395)]=p[l(314)].newRating;const g={};if(g[l(395)]=p[l(499)][l(563)],await Promise.all([i[l(536)]("profiles").update(f).eq(l(465),t),i[l(536)](n.nTwNE)[l(586)](g).eq("user_id",r)]),(null==s?void 0:s.id)===t){const e=p.white.change;o.info("Rating: "+p[l(314)][l(563)]+" ("+(n[l(361)](e,0)?"+":"")+e+")")}else if(n[l(414)](null==s?void 0:s.id,r)){const e=p[l(499)].change;o.info("Rating: "+p[l(499)][l(563)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){"YtKDU"===n[l(576)]||_0x1d9923[l(316)]&&_0x362e51[l(316)][l(310)]>=4&&_0x1206cf[l(452)](_0x4aa7a6[l(316)][l(480)](2,4))}}else u[l(512)](_0x567f9b,u[l(423)])},[s]),L=t.useCallback(async()=>{const t=e;if("olvVS"!==t(367))return _0x2e36f0[t(324)]("Please sig"+t(497)+t(555)+"e"),null;{if(!d||!s||!j)return;const e=n[t(344)](j,"w")?n[t(532)]:n[t(357)],r="w"===j?d[t(379)+t(517)]:d[t(460)+t(517)];await i[t(536)](t(469)+"s")[t(586)]({status:t(514),result:e,winner_id:r,completed_at:(new Date)[t(445)+"g"]()}).eq("id",d.id),await B(d[t(460)+t(517)],d[t(379)+t(517)],e),o[t(403)](t(483)+"ed")}},[d,s,j,B]),q=n[e(496)](t.useCallback,async()=>{const t=e;o.info(t(565)+t(385)+t(359)+t(583)+"n this ver"+t(410)),d&&(await i.from("chess_games")[t(586)]({status:t(514),result:"draw",completed_at:(new Date)[t(445)+"g"]()}).eq("id",d.id),await n.jgAWV(B,d[t(460)+t(517)],d.blackPlayerId,n[t(430)]))},[d,B]),A=n.oBRHD(t.useCallback,t=>{const s=e;if(!n[s(455)](n.GpCQO,s(515))){const e={};return e[s(533)]=t,e.verbose=!0,l.moves(e)[s(600)](e=>e.to)}_0x378e0f.info(_0x444da2(_0x493937))},[l]),S={};return S[e(350)]=l,S[e(426)]=d,S[e(513)]=C,S[e(407)]=j,S[e(476)]=x,S[e(324)]=p,S[e(453)]=D,S[e(544)]=k,S[e(325)]=M,S.joinByCode=z,S.resignGame=L,S[e(339)]=q,S.loadGame=N,S[e(577)+"leMoves"]=A,S[e(559)+"es"]=g,S})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=dn,s={ZKcVN:function(e){return e()},tPHZd:"Sound unmuted",qXXlW:function(e,t){return e&&t},grHdb:n(189),cANto:function(e,t){return e===t},yRwYv:function(e){return e()},LJjeX:"keydown",Jrtut:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=Mt(),m=s.Jrtut(t.useCallback,e=>{const t=n;if(e.target instanceof HTMLInputElement||e[t(173)]instanceof HTMLTextAreaElement||e[t(173)][t(165)+t(117)])return;const m=e[t(134)].toLowerCase();switch(m){case"m":s[t(131)](u),o.info(d?t(141)+"d":s[t(107)],{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":c&&r&&(e[t(196)+t(129)](),r());break;case"d":s.qXXlW(c,l)&&a&&(e["preventDef"+t(129)](),a());break;case s[t(139)]:i&&(e["preventDef"+t(129)](),i());break;case"?":case"/":(!e[t(119)]||s.cANto(m,"?"))&&(e["preventDef"+t(129)](),s[t(158)](rn))}},[u,d,r,a,i,c,l]);s[n(159)](t.useEffect,()=>{const e=n;return window[e(113)+e(177)](s.LJjeX,m),()=>window[e(150)+e(192)](e(137),m)},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Bt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==q?It:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&_e(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==bt?void 0:bt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),_e(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const Tt=async()=>{if(!k)return void H(!0);if(!M)return void T(!0);const e=Ie.find(e=>e.id===R),t=(null==e?void 0:e.white)||{};await Nt(J,Z,t)&&A("waiting")},Kt=async e=>{if(!k)return void H(!0);if(!M)return void T(!0);const t=Ie.find(e=>e.id===R),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Gt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],_t=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(R);const n=Ie.filter(e=>e.id!==R),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=En.find(e=>e.id===O))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Et=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Ut=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Et(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ht(ee))),!0;oe(!0);const i=function(e){const t=qn,n={};n[t(475)]=function(e,t){return e*t},n[t(515)]=function(e,t){return e+t},n[t(497)]=t(560),n[t(482)]=t(524);const s=n;switch(e){case t(541):return 300+s.VDerj(Math[t(488)](),500);case t(476):return s[t(515)](500,1e3*Math[t(488)]());case s[t(497)]:return 800+1500*Math[t(488)]();case s[t(482)]:return 100;default:return 500}}(O);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=qn,s={icQSt:function(e,t){return e(t)},dZXCt:n(476),iRGcJ:function(e,t){return e(t)},sYQFo:n(560),WemVr:n(524)};switch(t){case"easy":return s[n(539)](Pn,e);case s[n(520)]:return s[n(551)](Hn,e);case s[n(545)]:return s.iRGcJ(In,e);case s[n(574)]:return s[n(539)](In,e);default:return s[n(551)](Pn,e)}}(ee,O);if(c){const e=Et(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ht(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,O,ke,L]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Ft,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Rn.map(e=>u.jsx("button",{onClick:()=>{L.select(),W(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(G===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(K,{onClick:_t,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:En.map(e=>u.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(O===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Te,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ke,{to:"/openings",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ge,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ke,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(K,{onClick:()=>T(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(K,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void T(!0);const e=Gt().filter(e=>e.white_player_id!==k.id);e.length>0?await Kt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Tt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Gt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Vn.map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(K,{onClick:Tt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(Ue,{className:"h-4 w-4"}),"Create Game",u.jsx(Oe,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ye,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(K,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void T(!0);const e=Ie.find(e=>e.id===R),t=(null==e?void 0:e.black)||{};await zt($.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Je(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Vn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),u.jsx(K,{size:"sm",onClick:()=>Kt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!Z&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),u.jsx(K,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ve,{className:"h-4 w-4"})})]})]}),u.jsx(K,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&bt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(K,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(_,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,movedSquares:Ht,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&u.jsx(Zt,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ee,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=En.find(e=>e.id===O))?void 0:e.label," Bot (",null==(n=En.find(e=>e.id===O))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(_,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:Ut,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===xe))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:(null==(d=Ie.find(e=>e.id===xe))?void 0:d.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===pe))?void 0:x.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:(null==(f=Ie.find(e=>e.id===xe))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Xt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:_t,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Ze,{}),u.jsx(Le,{isOpen:S,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:I,onClose:()=>T(!1),trigger:"general"}),u.jsx(Qt,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:we,whitePalette:"bot-game"===q?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==bt?void 0:bt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===q?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==bt?void 0:bt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=En.find(e=>e.id===O))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:we.length}})]})};export{Xn as default};
