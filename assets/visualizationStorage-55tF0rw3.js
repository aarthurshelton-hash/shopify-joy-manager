import{s as t,ca as n,dG as r,dH as e}from"./index-DodN4URN.js";import{v as o,a as i,b as a}from"./visualizationSchemas-BnDNrcid.js";import"./flagContent-DLa5mBa6.js";!function(){const t=u,n=f();for(;;)try{if(876581===parseInt(t(466))/1*(-parseInt(t(438))/2)+parseInt(t(441))/3*(parseInt(t(523))/4)+parseInt(t(360))/5+parseInt(t(356))/6+parseInt(t(379))/7*(parseInt(t(454))/8)+parseInt(t(381))/9+-parseInt(t(476))/10*(parseInt(t(459))/11))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const s=function(){let t=!0;return function(n,r){const e=t?function(){if(r){const t=r[u(368)](n,arguments);return r=null,t}}:function(){};return t=!1,e}}()(void 0,function(){const t=u,n={AbLDq:"(((.+)+)+)+$"},r=n;return s[t(421)]()[t(519)](r.AbLDq)[t(421)]()[t(507)+"r"](s)[t(519)](t(500)+"+$")});s();const c=function(){let t=!0;return function(n,r){const e=u,o={};o.TmgZO=e(450)+e(393)+e(401);const i=o,a=t?function(){const t=e;if(r){if(t(496)==t(496)){const e=r[t(368)](n,arguments);return r=null,e}{_0x5b2fc5[t(494)](i[t(448)],_0x34e46b);const n={isDuplicate:!1};return n[t(443)+"ar"]=!1,n}}}:function(){};return t=!1,a}}();function u(t,n){t-=352;const r=f();let e=r[t];if(void 0===u.kAWDZx){var o=function(t){let n="",r="",e=n+o;for(let o,i,a=0,s=0;i=t.charAt(s++);~i&&(o=a%4?64*o+i:i,a++%4)?n+=e.charCodeAt(s+10)-10!=0?String.fromCharCode(255&o>>(-2*a&6)):a:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let o=0,i=n.length;o<i;o++)r+="%"+("00"+n.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(r)};u.sEbCcI=o,u.kRUdzX={},u.kAWDZx=!0}const i=t+r[0],a=u.kRUdzX[i];if(a)e=a;else{const t=function(t){this.hNPpEQ=t,this.xsdLLk=[1,0,0],this.pHvAHB=function(){return"newState"},this.bqYoLK="\\w+ *\\(\\) *{\\w+ *",this.QjkSeE="['|\"].+['|\"];? *}"};t.prototype.fFIehV=function(){const t=new RegExp(this.bqYoLK+this.QjkSeE).test(this.pHvAHB.toString())?--this.xsdLLk[1]:--this.xsdLLk[0];return this.iDMhiW(t)},t.prototype.iDMhiW=function(t){return Boolean(~t)?this.CRgFjR(this.hNPpEQ):t},t.prototype.CRgFjR=function(t){for(let n=0,r=this.xsdLLk.length;n<r;n++)this.xsdLLk.push(Math.round(Math.random())),r=this.xsdLLk.length;return t(this.xsdLLk[0])},new t(u).fFIehV(),e=u.sEbCcI(e),u.kRUdzX[i]=e}return e}function f(){const t=["mtmWBKP1vgTf","ueDsu1qXmty","D2fYBG","v052B3y","vgHPCYb2Axn1yq","AxPHDgLVBIaTia","yxjPDhK","Bg9YCW","x19WCM90B19F","vLPZz0q","C3bSAxq","AxnjBNrYAw5ZAq","qxvxzuu","zMv0y2GGDMLZDq","y1bHBgv0Dgu","CgfSzxr0zuLK","DNHzu3i","z2fTzurHDge","zxjYB3i","DxbSB2fK","s3PnEfu","yMXHy2S","vgHPCYbPCYa","igzVCIb1BMLXDq","kcGOlISPkYKRkq","Aw5Zzxj0","zxr0zvnPBwLSyq","BgXLCNK","zxHPC3rPBMDjza","B3DUzwrcEun1CG","C3rYAw5NAwz5","y29UC3rYDwn0BW","zunHCMq","vMLZDwfSAxPHDa","y2DMq1q","Aw9UCW","yxjL","y3vZDg9T","A2r5rNy","C2f2zwrFDMLZDq","A2PKswW","BgvUz3rO","AwnHDguGzxHPCW","C2vHCMnO","BwvZC2fNzq","BwvFzgf0yq","uuDsDvC","mZaYmdC2Buv5vLDV","CM9WCMLHDguGyW","CMvTB3zL","vMvcENm","Bwf0y2HLzfbHBa","zffcs3y","yxLoyw1L","BMn0Aw9UkcKG","C3rVCMfNzq","yw5VDgHLCIbJBW","Bwf0y2HLzeDHBq","zxzLBNq","B3jKzxi","z1z2B1a","zxHJzxb0Aw9U","CMvHC29U","yMLUza","vgPgzeK","y29SB3jtAw1PBa","vgL0BguGy29UDa","mJaWmJiZmhnKEgTQDa","rMfPBgvKihrVia","CML0Eq","zgf0zq","nZmZodi3meLiA1rxua","zMLUza","DhjHy2u","yM9HCMq","rfvkufa","tKLYy2G","DxbZzxj0","y3vZDg9Tq29SBW","yxbWBhK","Bg9JA2vKugLLyW","CMvZDwX0","DxnLCL9Pza","BKLK","qvntBMO","DxbSAwnHDguGyW","svfruxG","Aw9Uig5VDcbMBW","DgXL","D2HPDgu","mZuWvuXvBvfR","AM9PBG","ody1nZm0m05by0zKsa","C3vHBgL6yxrPBW","Dg8Gysb2AxnPBW","rxjYB3iGAw4Gza","ChjVDg90ExbL","y3jLyxrLzf9HDa","B3DUzxjeAxnWBa","C2XPy2u","y29Kzq","BMLkBMi","zNjVBq","tNb2tNq","A2LUzYbKDxbSAq","BgL6yxrPB24GAq","AwqSihvZzxjFAq","q2fYtNO","z2u6ia","z2fTzv9KyxrH","DxjIzKS","CgLLy2vuExbL","y2f0zxm6","BgL6yxrPB246ia","ywXS","sw52ywXPzcb0Aq","tvH3su0","yxnJzw5KAw5N","Bw92zxm","ywXPEMf0Aw9UoG","BMCGyxqGBgvHCW","zgvSzxrL","Aw9Uu3rHDgu","C2fMzq","Dg9mB3DLCKnHCW","y3vYCMvUDe1VDG","BurcCK8","ChjVzMLSzxm","DhrLswq","Dca4ignVBg9YCW","DgL0Bgu","Dg90ywXnB3zLCW","Dg9tDhjPBMC","ywXPEMf0Aw9UCW","Dw5K","lNbUzW","zgvSzxrLihzPCW","y3rVCIGICMv0Dq","sw52ywXPzcbqrW","DwfSAxPHDgLVBG","E30Uy29UC3rYDq","zMLUzeLUzgv4","CgDU","Aw4GEw91CIbNyq","CM91BMq","C3vJy2vZCW","Bg9N","v0TVzfO","qw5VDgHLCIbJBW","mNzsvNzVra","AxneDxbSAwnHDa","DMLZDwfSAxPHDa","mJf6q3DYvKW","C2LUz2XL","AxnuB29tAw1PBa","zgXqDMe","CMvWBgfJzq","CYbHBhjLywr5ia","D0DvtwW","vg1NwK8","y0DHBwu","rxjYB3iGy2HLyW","CYbVD25LzcbIEq","BIbIEsa","C09Iyxm","mJm0ndi0DuzxzND6","Dhj5ignOyw5NAq","y29UC29Szq","zxHPC3rPBMDdBW","wfrqz0u","mJCYmdCWn0fqEfbkta","C2vSzwn0","Aw1Hz2vFCgf0Aa","BgLUA2vKugfSzq","CgLLy2vdB2XVCG","CMvUDfvZzxi","DgfIBgu","nJy1mta3AK1byKvM","zxr0zuLK","BKDurLK","ufncEfi","BgXLy3rVCG","zgf0yq","Bw9KzxjU","B25Lt3a","Cgf0Ag5HBwu","rxHHy3qGzhvWBa"];return(f=function(){return t})()}function l(t,n,r){const e=u,o={};o[e(436)]=e(403);const i=o;return(t||n[e(431)]||"").trim()[e(445)](/\s+/g," ")+"::"+(r?JSON[e(506)]({palette:r[e(491)]||e(472),darkMode:r.darkMode||!1,currentMove:r[e(414)+"e"]===1/0?i[e(436)]:r[e(414)+"e"],lockedPieces:(r[e(369)+"es"]||[]).sort((t,n)=>(t[e(463)]+"-"+t[e(400)])["localeComp"+e(512)](n[e(463)]+"-"+n.pieceType))}):"{}")}async function x(o,i,a,s){const c=u,f={EPVdn:"saved_visualizations",AymEn:c(450)+c(393)+c(401),NpvNt:function(t,n,r,e){return t(n,r,e)},sObas:function(t,n){return t===n},mDBrO:c(371),oneOp:c(475)+c(518)+"ts",gVvoP:c(472),EdCLv:function(t,n){return t===n},TjFdI:c(513),IQQQx:c(447),ASSnj:function(t,n,r,e,o,i){return t(n,r,e,o,i)},XTPgE:function(t,n){return t(n)}};try{const u=l(i,a,s),{data:x,error:w}=await t[c(391)](f.EPVdn)[c(460)](c(395)+"d, pgn, ga"+c(521));if(w){const t={isDuplicate:!1};return t[c(443)+"ar"]=!1,t}for(const n of x||[]){const r=n[c(398)],e=f[c(392)](l,n[c(431)]||void 0,r,r[c(440)+c(411)]);if(f[c(453)](u,e)){const r=n[c(371)]===o;let e;if(!r){const{data:r}=await t.from(c(416))[c(460)]("display_name").eq(f[c(415)],n[c(371)])[c(442)]();e=(null==r?void 0:r.display_name)||c(437)+"llector"}const i={};return i[c(439)+"e"]=!0,i[c(443)+"ar"]=!0,i[c(504)]=n.id,i[c(505)+c(464)]=r,i[c(387)+"ayName"]=e,i[c(354)+c(482)]=100,i[c(538)]=f[c(473)],i}}const D=(null==s?void 0:s.paletteId)||f[c(536)];let d;if(null==s?void 0:s[c(367)+"rs"])d=s[c(367)+"rs"];else if(f.EdCLv(D,f[c(353)])){const t=n[c(361)](t=>"custom"===t.id);if(t){if("okYvZ"===f[c(375)])throw new _0x2eb030(c(357)+c(425)+c(428)+": "+_0x406348.message);{const n={};n.white=t[c(378)],n[c(497)]=t.black,d=n}}}const y=await f[c(373)](r,o,i,a,D,d);if(y[c(443)+"ar"]){const t={};return t[c(439)+"e"]=!1,t[c(443)+"ar"]=!0,t.existingId=y["existingVi"+c(382)+c(372)],t.ownedByCurrentUser=y[c(505)+c(464)],t[c(387)+c(529)]=y[c(387)+c(529)],t[c(354)+c(482)]=y[c(354)+c(482)],t[c(538)]=y.reason,t[c(457)+"lors"]=y[c(457)+c(483)],t[c(487)+c(490)]=y[c(487)+c(490)],t[c(487)+c(449)]=y["isIntrinsi"+c(449)],t[c(533)+"eCard"]=y[c(533)+"eCard"],t.matchedPaletteId=y[c(527)+c(467)],t[c(527)+c(502)+c(358)]=y[c(527)+c(502)+c(358)],t}let z;d&&(z=f[c(458)](e,d)||void 0);const g={};return g[c(439)+"e"]=!1,g[c(443)+"ar"]=!1,g[c(462)+c(417)]=z,g[c(354)+"arity"]=y[c(354)+"arity"],g[c(487)+c(490)]=y[c(487)+"cPalette"],g[c(487)+c(449)]=y[c(487)+c(449)],g["matchedGam"+c(508)]=y[c(533)+c(508)],g[c(527)+c(467)]=y[c(527)+c(467)],g[c(527)+"etteSimila"+c(358)]=y[c(527)+"etteSimilarity"],g}catch(x){const t={};return t[c(439)+"e"]=!1,t[c(443)+"ar"]=!1,t}}async function w(n,r,e,s,c,f){const l=u,w={niJnb:l(427)+"N data",MDuaS:function(t,n){return t(n)},cIiQe:l(364),MXwIM:l(404)+l(377),NIrch:l(355)+"ains inapp"+l(524)+"ontent",ERnvX:function(t,n){return t(n)},kjdIl:function(t,n){return t===n},WNvov:l(514),vxYSr:"You have a very similar visual"+l(481)+l(455)+l(409)+l(418)+l(499)+"eness",uRVVS:"image/png",cgfCT:l(440)+l(511)};try{if("DUJPP"===w.cIiQe){const u=o(r);if(!u[l(434)])return{data:null,error:new Error(u.error||w[l(405)])};const D=await i(r);if(!D[l(412)])return{data:null,error:new Error(D[l(538)]||w[l(365)])};const d=w.ERnvX(a,c);if(!d[l(434)])return w[l(516)](w[l(479)],w[l(479)])?{data:null,error:new Error(d[l(494)]||w.niJnb)}:{data:null,error:new _0xda22e4(_0xd724be[l(494)]||w[l(390)])};const y=await x(n,c,e[l(493)],f);if(y.isDuplicate){const t=y[l(505)+l(464)]?l(480)+"lization i"+l(446)+l(432)+l(503):l(480)+l(394)+l(451)+" "+(y["ownerDispl"+l(529)]||l(532)+l(470));return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:y[l(505)+l(464)],ownerDisplayName:y["ownerDispl"+l(529)],colorSimilarity:100}}if(y.isTooSimilar){const t=y[l(505)+l(464)]?w[l(492)]:l(498)+Math[l(433)](y[l(354)+l(482)]||30)+"% similar "+l(383)+l(452)+(y["ownerDispl"+l(529)]||l(532)+l(470));return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:y[l(505)+l(464)],ownerDisplayName:y[l(387)+l(529)],colorSimilarity:y[l(354)+l(482)],reason:y.reason}}const z={...f};z["linkedPale"+l(417)]=y[l(462)+l(417)];const g=z,C=n+"/"+Date.now()+"-"+r[l(445)](/[^a-z0-9]/gi,"-")[l(413)+"e"]()+l(424),v={};v.contentType=w.uRVVS,v[l(366)]=!1;const{error:B}=await t[l(531)].from(l(440)+l(511))[l(495)](C,s,v);if(B)throw new Error("Failed to upload ima"+l(397)+B[l(520)]);const{data:L}=t[l(531)].from(w[l(510)]).getPublicUrl(C),h={};h[l(378)]=e[l(493)][l(378)],h[l(497)]=e[l(493)].black,h[l(534)]=e.gameData[l(534)],h.date=e[l(493)][l(359)],h.result=e[l(493)][l(370)],h[l(431)]=e.gameData[l(431)],h[l(407)]=e[l(493)][l(407)],h[l(363)]=e[l(363)],h[l(420)]=e[l(420)],h[l(440)+l(411)]=g;const m=h,q={};q.user_id=n,q[l(419)]=r,q[l(431)]=c||null,q.game_data=m,q[l(461)]=L.publicUrl;const{data:A,error:M}=await t[l(391)](l(515)+l(422))[l(501)](q).select().single();if(M)throw await t[l(531)][l(391)](w[l(510)])[l(525)]([C]),new Error(l(357)+"save visua"+l(402)+M[l(520)]);const p={};return p[l(471)]=A,p[l(494)]=null,p}_0x728fd7=w.MDuaS(_0x59204c,_0x19b2dd)||void 0}catch(D){const t={};return t[l(471)]=null,t[l(494)]=D,t}}async function D(n){const r=u,e={};e.dQBKv=r(396),e[r(468)]=r(515)+r(422),e.sIddX=r(371);const o=e;try{if(o[r(528)]!==r(396)){const t=_0x48e23c?function(){if(_0x55b483){const t=_0x3cd75d[r(368)](_0x1e20a7,arguments);return _0x9cafc=null,t}}:function(){};return _0x4150fc=!1,t}{const e={};e[r(406)]=!1;const{data:i,error:a}=await t[r(391)](o[r(468)]).select("*").eq(o.sIddX,n)[r(535)](r(386),e);if(a)throw new Error(r(357)+"fetch visu"+r(422)+": "+a.message);const s={};return s.data=i||[],s.error=null,s}}catch(i){const t={data:[]};return t[r(494)]=i,t}}async function d(n,r){const e=u,o={};o[e(399)]=e(440)+"ions",o[e(488)]=e(515)+e(422);const i=o;try{const o=new URL(r)[e(474)][e(486)]("/"),a=o[e(430)](t=>t===e(440)+e(511)),s=o[e(388)](a+1)[e(380)]("/");s&&await t[e(531)][e(391)](i[e(399)])[e(525)]([s]);const{error:c}=await t.from(i[e(488)])[e(410)]().eq("id",n);if(c)throw new Error(e(357)+e(425)+e(428)+": "+c[e(520)]);const u={error:null};return u}catch(a){const t={};return t[e(494)]=a,t}}c(void 0,function(){const t=u,n={};n[t(485)]=function(t,n){return t!==n},n[t(522)]=function(t,n){return t+n};const r=n,e=function(){const n=t;let e;try{if(r[n(485)](n(469),n(469))){const t={};return t[n(439)+"e"]=!1,t[n(443)+"ar"]=!0,t.existingId=_0x2ecab9["existingVi"+n(382)+n(372)],t["ownedByCur"+n(464)]=_0x4730ce[n(505)+n(464)],t[n(387)+n(529)]=_0x19c40f["ownerDispl"+n(529)],t["colorSimil"+n(482)]=_0x36607c[n(354)+n(482)],t[n(538)]=_0x28037d[n(538)],t[n(457)+"lors"]=_0x5521ea[n(457)+n(483)],t[n(487)+n(490)]=_0x2f5790[n(487)+n(490)],t[n(487)+n(449)]=_0xa26e5d[n(487)+n(449)],t[n(533)+n(508)]=_0x29a754[n(533)+"eCard"],t[n(527)+n(467)]=_0x2c0543[n(527)+n(467)],t[n(527)+n(502)+n(358)]=_0x460a0f["matchedPal"+n(502)+n(358)],t}e=Function(r[n(522)]("return (fu"+n(530)+(n(429)+n(426))+'rn this")( )',");"))()}catch(o){e=window}return e}(),o=e[t(456)]=e[t(456)]||{},i=[t(435),t(478),"info",t(494),t(537),t(465),t(362)];for(let a=0;a<i[t(517)];a++){const n=c[t(507)+"r"][t(385)][t(352)](c),r=i[a],e=o[r]||n;n[t(484)]=c[t(352)](c),n.toString=e.toString[t(352)](e),o[r]=n}})();export{x as checkDuplicateVisualization,d as deleteVisualization,D as getUserVisualizations,w as saveVisualization};
