import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as w,aZ as y,bC as j,ad as C,aj as N,bD as k,bE as M,af as D,ag as z,ai as B,y as L,bF as q,bG as A,b6 as P,ae as S,bH as H,ah as K,bI as _,B as I,bJ as T,bK as E,bL as G,bM as W,bN as U,bO as Y,bP as O,bQ as J,bR as R,bS as X,bT as V,bU as F,bV as Z,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as we,a5 as ye,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as De,an as ze,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Pe,H as Se,P as He,ca as Ke,b3 as _e,bs as Ie,be as Te,cb as Ee,aP as Ge,cc as We,d as Ue,b2 as Ye,a9 as Oe,cd as Je,ce as Re,cf as Xe,al as Ve,au as Fe}from"./index-C_PxF1MG.js";import{L as Ze}from"./LiveColorLegend-DVi7tAqX.js";import{T as Qe}from"./trending-down-CwVHwJwI.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-Dnpt6L01.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=dt,t=xt();for(;;)try{if(861329===parseInt(e(366))/1*(-parseInt(e(354))/2)+parseInt(e(332))/3+parseInt(e(336))/4+-parseInt(e(344))/5+-parseInt(e(330))/6+-parseInt(e(333))/7*(parseInt(e(392))/8)+-parseInt(e(370))/9*(-parseInt(e(352))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){const e=dt,t={};t[e(322)]=e(364)+"+$",t[e(388)]=function(e,t){return e!==t},t.JoczY=e(325);const n=t;let s=!0;return function(t,r){const a=e;if(a(349)==a(349)){const e=s?function(){const e=a,s={};s[e(382)]=n.aGyFE;const i=s;if(r){if(n[e(388)](n[e(372)],e(325)))return _0x933d3d[e(356)]().search(e(364)+"+$")[e(356)]()[e(324)+"r"](_0x47f446).search(i[e(382)]);{const n=r[e(318)](t,arguments);return r=null,n}}}:function(){};return s=!1,e}return _0x4f8f22[a(334)]()||_0x5d4e87[a(391)+"e"]()}}()(void 0,function(){const e=dt,t={};t.LRcMh=e(364)+"+$";const n=t;return ut[e(356)]()[e(329)](n[e(389)])[e(356)]().constructor(ut).search(n.LRcMh)});function dt(e,t){e-=310;const n=xt();let s=n[e];if(void 0===dt.RPlogY){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};dt.Lnolmd=r,dt.qiVFcq={},dt.RPlogY=!0}const a=e+n[0],i=dt.qiVFcq[a];if(i)s=i;else{const e=function(e){this.pzxYKL=e,this.KWsgQt=[1,0,0],this.fGKHFt=function(){return"newState"},this.uHnDmH="\\w+ *\\(\\) *{\\w+ *",this.PxLTPZ="['|\"].+['|\"];? *}"};e.prototype.ikmiAb=function(){const e=new RegExp(this.uHnDmH+this.PxLTPZ).test(this.fGKHFt.toString())?--this.KWsgQt[1]:--this.KWsgQt[0];return this.VhPiAe(e)},e.prototype.VhPiAe=function(e){return Boolean(~e)?this.nqXaQr(this.pzxYKL):e},e.prototype.nqXaQr=function(e){for(let t=0,n=this.KWsgQt.length;t<n;t++)this.KWsgQt.push(Math.round(Math.random())),n=this.KWsgQt.length;return e(this.KWsgQt[0])},new e(dt).ikmiAb(),s=dt.Lnolmd(s),dt.qiVFcq[a]=s}return s}ut();const mt=function(){const e=dt,t={};t[e(342)]=function(e,t){return e===t},t[e(323)]="kcaQi";const n=t;let s=!0;return function(e,t){const r=s?function(){const s=dt,r={jWafn:function(e,t){return e(t)},xUuJX:s(351)+s(347)+s(311)+" )"};if(n[s(342)](s(381),s(381))){if(t){if("poysJ"!==n[s(323)]){const n=t.apply(e,arguments);return t=null,n}{const e=_0x4a698c[s(324)+"r"][s(317)].bind(_0x51f136),t=_0x501e29[_0xcf3045],n=_0x29cf31[t]||e;e.__proto__=_0x3e4066[s(350)](_0x3ddebc),e[s(356)]=n.toString.bind(n),_0x1072f2[t]=e}}}else _0x214d05=r[s(373)](_0x479b1f,s(369)+"nction() "+r[s(314)]+");")()}:function(){};return s=!1,r}}();function xt(){const e=["Dg9tDhjPBMC","D0nuBw4","vgHYzwvMB2XKia","s1rHDKi","C3bSAxq","AwvUDe1HDgvYAq","Aw5MBW","C3vMzMLJAwvUDa","kcGOlISPkYKRkq","BgvUz3rO","nZu2BMnKrM5y","y1b1y1m","BNqGtwf0zxjPyq","CMv0DxjUicHMDq","ow5hEeXZDa","C213Du4","sM9JELK","ALDHzM4","DuXPquW","teP1s20","ig1HDgvYAwfSlG","vvryrNm","Dw5RBM93BG","vLzUrMC","zxHJzxb0Aw9U","y2XPt1a","rhzvruW","y29UC29Szq","rhjHDW","Bg9N","zfjLCgv0AxrPBW","Bw92zxmGyxzHAq","C2fzAhy","tfjJtwG","ie5VigXLz2fSia","AxntDgfSzw1HDa","mJK2teXdDLLf","C2HVCNrnzxnZyq","CMvHC29U","CM4GDgHPCYiPka","BgfIBguU","BNrFBwf0zxjPyq","Efv1sLG","uwzKCMW","DhjHy2u","ChjVDg90ExbL","yxbWBhK","rhjHDYbIEsb0Aa","ntaTtw92zsbsDq","qu5Ir2S","yuD5rKu","yujmueO","y29UC3rYDwn0BW","qKjhAuu","CMvWzxrPDgLVBG","rhjHDYbIEsbPBG","x3j1Bgu","C2vHCMnO","odiWnJmZmMTqDLbVyq","yM9Js0m","mJi5nda3nNrJqwfzyW","mtCXnduXzKzjAvLU","AxneCMf3","zsbMAwz0Es1TBW","mtm0otuYnhD3vNj3AG","AxnuAhjLzwzVBa","r3b2s2K","zxjYB3i","DgfIBgu","AxnjBNn1zMzPyW","ChLxBvq","Aw5ZDwzMAwnPzq","mJy2nJKZmhHZAfvbra","BwvZC2fNzq","x19WCM90B19F","y3rVCIGICMv0Dq","u3rHBgvTyxrLiq","wu9QCeC","yMLUza","E30Uy29UC3rYDq","mJC2mty1mZbMwLH2yMS","D2fYBG","nte2r0Tisvb4","sLzRBxi"];return(xt=function(){return e})()}function ht(e){const t=dt;return function(e){const t=dt,n={VVnFg:t(327)+t(363)+t(376),jtsSE:"stalemate",bocKC:"threefold_"+t(326),smwuN:t(319)+"reefold repetition.",XcjSR:"Insufficie"+t(368)+"l",sZolS:function(e,t,n){return e(t,n)},KTavB:function(e,t){return e>=t},ANbGk:t(338),mILVW:"fifty_move"+t(328),Jtwiz:t(319)+t(335)+"ve rule.",zmGSG:t(378),JVkmr:"Game drawn!"};if(e[t(391)+"e"]()){const e={};return e.reason=n.jtsSE,e[t(345)]="Stalemate!"+t(390)+t(387)+t(312),e[t(393)+"ge"]=t(348),e}if(e[t(337)+t(386)+"n"]()){const e={};return e[t(310)]=n[t(331)],e[t(345)]=n[t(371)],e[t(393)+"ge"]=t(358)+"Repetition",e}if(e[t(341)+t(361)+"al"]()){const e={};return e[t(310)]=t(343)+t(313)+"l",e[t(345)]=n[t(379)],e[t(393)+"ge"]=n.XcjSR,e}const s=e.fen(),r=n.sZolS(parseInt,s[t(360)](" ")[4],10);if(n[t(359)](r,100)){if("sXTwQ"!==n[t(321)]){const e={};return e[t(310)]=n.mILVW,e[t(345)]=n.Jtwiz,e.shortMessage=t(320)+"le",e}{const e={};return e[t(310)]=t(343)+t(313)+"l",e.message=n.VVnFg,e[t(393)+"ge"]="Insufficie"+t(368)+"l",e}}const a={};return a[t(310)]=n.zmGSG,a[t(345)]=n[t(355)],a[t(393)+"ge"]=t(384),a}(e)[t(345)]}function pt(e,t){e-=193;const n=ft();let s=n[e];if(void 0===pt.eCNnnH){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};pt.YRpQDL=r,pt.LwEeYJ={},pt.eCNnnH=!0}const a=e+n[0],i=pt.LwEeYJ[a];if(i)s=i;else{const e=function(e){this.TZLJpZ=e,this.BchLKB=[1,0,0],this.rmugQt=function(){return"newState"},this.YQWhnM="\\w+ *\\(\\) *{\\w+ *",this.SmXcwJ="['|\"].+['|\"];? *}"};e.prototype.VOpZEM=function(){const e=new RegExp(this.YQWhnM+this.SmXcwJ).test(this.rmugQt.toString())?--this.BchLKB[1]:--this.BchLKB[0];return this.PpCyZF(e)},e.prototype.PpCyZF=function(e){return Boolean(~e)?this.SoDSyH(this.TZLJpZ):e},e.prototype.SoDSyH=function(e){for(let t=0,n=this.BchLKB.length;t<n;t++)this.BchLKB.push(Math.round(Math.random())),n=this.BchLKB.length;return e(this.BchLKB[0])},new e(pt).VOpZEM(),s=pt.YRpQDL(s),pt.LwEeYJ[a]=s}return s}function ft(){const e=["CMv0DxjUicHMDq","yMLUza","rgf0yq","Dgf0uum","yNvMzMvY","y3vYCMvUDfrPBq","vwLZAhm","z2fTzvn0yxj0","ywrgAwX0zxi","z2fPBG","CM4GDgHPCYiPka","E30Uy29UC3rYDq","tNHwqLO","BfjHBxbuB1zHBa","zxjtB3vYy2u","y3jLyxrLr2fPBG","B0nVBNrLEhq","zgXPyuC","C2f3Dg9VDgG","uLbYC2e","Aw5PDef1zgLV","Bg5nBhu","BePkr1i","zxjYB3i","qxvKAw9dB250zq","zgvMzwf0","uuTYwvy","y2HLy2S","mJmZmZmZnNnqwKXjBq","DgfIBgu","Aw5MBW","kcGOlISPkYKRkq","EKXiq3u","C3rHCNq","Afr6swu","qxrIt1O","oteWnvbqDM5Nrq","qKLvA2q","wvvkquu","EKHcr1G","qvbjig5VDcbZDq","DMfSDwu","y3jLyxrLt3nJAq","D2vIA2L0qxvKAq","mty4odu5mhvsA3D6zq","BgLUzwfYuMfTCa","C3f1yxjL","z2fTzuvUza","s0n5qNm","qKLbAvq","mJG3mJq3nNLNAK55qq","s1Dlwuq","rePhDu8","uvvMr1q","ChbVCNrLza","y29UDgv4Da","DhH5vfi","AwXSzwDHBa","yxbWBhK","BMn0Aw9UkcKG","y3jLyxrLqNvMzG","nZi3mJqXnfzIvhb2Ea","mtGWB1HKqwHI","DhjHy2u","qLLQsMq","C2vHCMnO","mteYodqYogjeCMfIqW","y29UBMvJDa","x19WCM90B19F","vgLTzq","tvD1Agq","zxHJzxb0Aw9U","sK5lu1y","Cvv6De4","ue94DeS","wfvfDLy","BgvUz3rO","y2XVC2u","ChjVDg90ExbL","zNjLCxvLBMn5","y2fWDhvYzq","DhjPyw5NBgu","rhj0B24","C2v0vMfSDwvbDa","AgvnuKi","mJK2nZKWBKnPt2jN","vg9wywX1zuf0va","Aw1L","Bw92zq","Au1JzMS","CLLHwNC","y2HLy2TTyxrL","Bg9N","D2fYBG","y2fZDgXL","y3vYCMvUDa","CvjMB2i","oezQEwPXDW","y29UC3rYDwn0BW","EKn5y3a","zxHWB25LBNrPyq","nwTyyNbdBW","DhLWzq","y3rVCIGICMv0Dq","zgvZDgLUyxrPBW","CMfUzg9T","CK9ODge","y3jLyxrLqMLXDq","mtfkBKPbBu8","D21eveW","z2fPBK5Vzgu","BgXHDg9Y","sNffzem","Dg9tDhjPBMC","C3rVCa","DwvbDfrPBwu","C2LUzq","s0vkBg4","A21Zvey"];return(ft=function(){return e})()}mt(void 0,function(){const e=dt,t={UTXFs:function(e,t){return e(t)},wCTmn:function(e,t){return e+t},LJuKm:e(369)+"nction() ",Qfdrl:function(e){return e()},FCNmt:e(385),uLiAL:e(339),cPucS:e(316)},n=t[e(315)](function(){const n=e;let s;try{s=t[n(377)](Function,t[n(357)](t[n(375)]+(n(351)+n(347)+n(311)+" )"),");"))()}catch(r){s=window}return s}),s=n.console=n[e(383)]||{},r=[t.FCNmt,e(353),e(362),t[e(374)],e(380),e(340),t[e(367)]];for(let a=0;a<r[e(365)];a++){const t=mt[e(324)+"r"][e(317)].bind(mt),n=r[a],i=s[n]||t;t[e(346)]=mt[e(350)](mt),t.toString=i[e(356)][e(350)](i),s[n]=t}})(),function(){const e=pt,t=ft();for(;;)try{if(522177===parseInt(e(204))/1*(-parseInt(e(230))/2)+parseInt(e(253))/3+parseInt(e(196))/4*(parseInt(e(269))/5)+-parseInt(e(218))/6+parseInt(e(234))/7+-parseInt(e(265))/8*(-parseInt(e(229))/9)+-parseInt(e(212))/10*(-parseInt(e(276))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=pt;return gt[e(281)]().search(e(199)+"+$")[e(281)]()[e(266)+"r"](gt)[e(233)](e(199)+"+$")});gt();const vt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();vt(void 0,function(){const e=pt,t={JqEdC:function(e,t){return e+t},zCycp:function(e,t){return e+t},qUztN:function(e){return e()},KEJln:e(239),MWuhd:e(231)},n=t[e(241)](function(){const n=e;let s;try{s=Function(t[n(280)](t[n(267)](n(287)+n(227),n(298)+n(271)+n(297)+" )"),");"))()}catch(r){s=window}return s}),s=n.console=n.console||{},r=[e(260),e(261),e(198),e(310),t[e(285)],e(197),t[e(238)]];for(let a=0;a<r[e(244)];a++){const t=vt[e(266)+"r"][e(246)][e(288)](vt),n=r[a],i=s[n]||t;t[e(236)]=vt.bind(vt),t[e(281)]=i[e(281)][e(288)](i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=pt,r={KCyBs:s(277),Uishs:function(e,t){return e!==t},txyTR:s(308),dliaG:function(e,t){return e+t},hTzIe:function(e,t){return e+t},JNKSV:function(e,t){return e+t},XUEvV:function(e){return e()},BYjJd:function(e,t){return e*t},qRfob:function(e,t){return e<t},BIUkd:function(e,t){return e!==t},YUJAE:s(203),rOhta:s(248),NxVBZ:function(e,t,n){return e(t,n)},BIAiT:function(e,t,n,s,r,a){return e(t,n,s,r,a)},zHBGX:s(214),rYaZw:function(e,t,n){return e(t,n)},zLHCu:"triangle",betOa:s(259),QKrYV:function(e,t,n,s,r,a){return e(t,n,s,r,a)},heMRB:s(284),RPrsa:function(e,t,n){return e(t,n)},DJGuO:function(e,t,n){return e(t,n)},cPiYk:s(294),HKynA:function(e,t,n,s,r,a){return e(t,n,s,r,a)},iMcfk:"victory",vrdDW:function(e,t,n){return e(t,n)},kmsTF:function(e,t,n,s,r,a){return e(t,n,s,r,a)},POxtK:function(e,t,n,s,r,a){return e(t,n,s,r,a)},Drton:s(225),lJJGR:function(e,t,n,s,r,a){return e(t,n,s,r,a)},QUfGT:function(e,t,n){return e(t,n)},uEXbA:function(e,t,n){return e(t,n)}},a={};a[s(223)]=null,a.gainNode=null;const i=t.useRef(a),o=r[s(306)](t.useCallback,()=>{const e=s;if(!i[e(263)][e(223)])try{const t=new(window[e(311)+"xt"]||window[e(211)+e(303)]),s=t[e(302)]();s.connect(t[e(272)+"n"]),s[e(296)][e(209)]=n;const r={};r[e(223)]=t,r.gainNode=s,i[e(263)]=r}catch(t){}},[n]);r[s(221)](t.useEffect,()=>{const e=s;if(i[e(263)][e(278)]){if(r[e(216)]===e(290)){const t=_0x36c804[e(226)](_0x1fecd4,arguments);return _0x14360d=null,t}i[e(263)][e(278)][e(296)].value=n}},[n]);const c=t.useCallback((t,n,a=s(284),c=.01,l=.1,u)=>{const d=s;if(r[d(293)](r[d(224)],r[d(224)])){const e=new(_0xfeec1f.AudioContext||_0x48932f.webkitAudioContext),t=e[d(302)]();t[d(235)](e.destination),t[d(296)][d(209)]=_0x23ffb8;const n={};n[d(223)]=e,n[d(278)]=t,_0x54d7dc[d(263)]=n}else{if(!e)return;o();const{context:s,gainNode:m}=i.current;if(!s||!m)return;const x=s[d(210)+d(279)](),h=s[d(302)]();x[d(270)]=a,x[d(247)]["setValueAt"+d(237)](t,s[d(292)+"e"]),u&&x[d(247)][d(268)+d(300)+d(283)](u,s[d(292)+"e"]+n),h[d(296)][d(251)+"Time"](0,s[d(292)+"e"]),h[d(296)]["linearRamp"+d(254)+d(255)](1,r[d(304)](s[d(292)+"e"],c)),h[d(296)][d(268)+d(300)+"ueAtTime"](.01,r[d(202)](s[d(292)+"e"],n)-l),h[d(296)][d(213)+d(254)+d(255)](0,s[d(292)+"e"]+n),x[d(235)](h),h[d(235)](m),x[d(201)](s[d(292)+"e"]),x[d(282)](r[d(240)](s[d(292)+"e"],n))}},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;r[a(243)](o);const{context:c,gainNode:l}=i.current;if(!c||!l)return;const u=r[a(232)](c.sampleRate,t),d=c[a(228)+"er"](1,u,c.sampleRate),m=d["getChannel"+a(289)](0);for(let e=0;r[a(264)](e,u);e++){if("KWKYD"!==a(219)){const e=_0x2f8a77.apply(_0x51b8fd,arguments);return _0x54a065=null,e}m[e]=2*Math[a(273)]()-1}const x=c[a(228)+a(301)]();x[a(291)]=d;const h=c[a(275)+a(295)]();h[a(270)]="lowpass",h[a(247)][a(209)]=n;const p=c.createGain();p[a(296)]["setValueAt"+a(237)](.3,c[a(292)+"e"]),p.gain[a(268)+a(300)+a(283)](.01,c[a(292)+"e"]+t),x[a(235)](h),h[a(235)](p),p[a(235)](l),x[a(201)](c[a(292)+"e"]),x[a(282)](r.hTzIe(c[a(292)+"e"],t))},[e,o]),u=r[s(220)](t.useCallback,t=>{const n=s;if(r[n(205)](r[n(206)],r.YUJAE))_0x472dad[n(263)][n(223)]&&_0x43b333.current[n(223)][n(245)]();else{if(!e)return;switch(t){case n(256):c(800,.08,n(284),.005,.05),c(400,.06,"triangle",.005,.04);break;case r[n(274)]:r.NxVBZ(l,.12,2e3),r[n(217)](c,300,.1,r[n(207)],.005,.08),c(150,.15,"sine",.01,.1);break;case n(262):r.BIAiT(c,600,.06,"sine",.005,.04),r[n(258)](setTimeout,()=>c(700,.06,n(284),.005,.04),80);break;case n(195):c(880,.15,r[n(200)],.01,.1),setTimeout(()=>c(1100,.12,n(249),.01,.08),120);break;case r.betOa:r[n(194)](c,880,.2,r[n(252)],.01,.15),r[n(306)](setTimeout,()=>c(660,.2,n(284),.01,.15),150),setTimeout(()=>c(440,.3,n(284),.01,.2),300),r.DJGuO(setTimeout,()=>c(330,.4,n(284),.01,.3),500);break;case r.cPiYk:r.HKynA(c,523,.12,n(284),.01,.08),setTimeout(()=>c(659,.12,"sine",.01,.08),100),setTimeout(()=>c(784,.2,n(284),.01,.15),200);break;case n(215):c(440,.15,r[n(200)],.01,.1),setTimeout(()=>c(349,.25,n(249),.01,.2),150);break;case r[n(257)]:c(523,.1,n(284),.01,.08),r.vrdDW(setTimeout,()=>c(659,.1,n(284),.01,.08),100),setTimeout(()=>c(784,.1,n(284),.01,.08),200),setTimeout(()=>c(1047,.3,n(284),.01,.25),300);break;case n(193):r[n(286)](c,392,.2,n(284),.02,.15),setTimeout(()=>c(349,.2,n(284),.02,.15),200),setTimeout(()=>c(330,.3,n(284),.02,.25),400),setTimeout(()=>c(262,.4,n(284),.02,.35),650);break;case"draw":r[n(242)](c,440,.15,n(284),.01,.1),r[n(299)](setTimeout,()=>c(440,.15,n(284),.01,.1),180),r[n(220)](setTimeout,()=>c(523,.2,n(284),.01,.15),360);break;case r[n(250)]:r[n(309)](c,200,.1,n(214),.005,.08),c(150,.08,n(305),.005,.06)}}},[e,c,l]);r.uEXbA(t.useEffect,()=>()=>{const e=pt;i[e(263)][e(223)]&&i[e(263)][e(223)][e(245)]()},[]);const d={};return d.playSound=u,d[s(307)]=o,d},wt=yt;function yt(e,t){e-=289;const n=Nt();let s=n[e];if(void 0===yt.fgvije){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};yt.SRFaQD=r,yt.XxbPzU={},yt.fgvije=!0}const a=e+n[0],i=yt.XxbPzU[a];if(i)s=i;else{const e=function(e){this.cYnPGj=e,this.iMgVRw=[1,0,0],this.dytdgP=function(){return"newState"},this.vNtmen="\\w+ *\\(\\) *{\\w+ *",this.zhkyYH="['|\"].+['|\"];? *}"};e.prototype.CKDEXI=function(){const e=new RegExp(this.vNtmen+this.zhkyYH).test(this.dytdgP.toString())?--this.iMgVRw[1]:--this.iMgVRw[0];return this.rDNvws(e)},e.prototype.rDNvws=function(e){return Boolean(~e)?this.afjuuS(this.cYnPGj):e},e.prototype.afjuuS=function(e){for(let t=0,n=this.iMgVRw.length;t<n;t++)this.iMgVRw.push(Math.round(Math.random())),n=this.iMgVRw.length;return e(this.iMgVRw[0])},new e(yt).CKDEXI(),s=yt.SRFaQD(s),yt.XxbPzU[a]=s}return s}!function(){const e=yt,t=Nt();for(;;)try{if(317534===parseInt(e(307))/1+-parseInt(e(327))/2+-parseInt(e(316))/3*(-parseInt(e(310))/4)+-parseInt(e(297))/5*(parseInt(e(301))/6)+-parseInt(e(296))/7*(-parseInt(e(308))/8)+parseInt(e(303))/9+parseInt(e(323))/10*(-parseInt(e(313))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=yt,t={};t[e(302)]="(((.+)+)+)+$";const n=t;return jt.toString()[e(304)](e(299)+"+$").toString()[e(295)+"r"](jt).search(n.ZlJeU)});jt();const Ct=function(){const e=yt,t={};t.llhyL=e(322);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=yt;if(t){if(s(322)===n[s(311)]){const n=t[s(309)](e,arguments);return t=null,n}_0x3f9269=_0x3f8858}}:function(){};return s=!1,r}}();function Nt(){const e=["E30Uy29UC3rYDq","DgfIBgu","BgvUz3rO","zKzhzw4","q3bnBfa","y29UC3rYDwn0BW","nZe0nJiZrMTKz2fW","mtqWmfbXs2jotG","yMLUza","kcGOlISPkYKRkq","zNvLt08","odm1ogX0Ahbcuq","wMXkzvu","nde5nJC4mwjiq29dsW","C2vHCMnO","D2fYBG","x19WCM90B19F","nty5otG2uwPQEhHQ","ohbLu0D2qG","yxbWBhK","mtq4t3fXz3bo","BgXOEuW","Dg9tDhjPBMC","mJeYm2n0BMfbrG","ChjVDg90ExbL","u3vMAu0","mZy0mdjtu3zZuNO","z0zYD3K","y29UC29Szq","uMzVv28","Bg9N","DhjHy2u","wLjACMG","mJuZmtbTvfLns3y","rxDtuxK","DvnZDKC","y2HLC3mTC291BG","nZGYntCWsvnMDfDf","CMv0DxjUicHMDq","BMfTzq"];return(Nt=function(){return e})()}Ct(void 0,function(){const e=yt,t={fueOO:function(e,t){return e===t},CpMlP:e(324),gFrwy:function(e,t){return e(t)},fakWV:function(e,t){return e+t},fFGen:e(290)+'ctor("return this")( )',RfoWo:function(e){return e()},SufiM:e(321)};let n;try{if(t[e(300)](t[e(294)],e(325))){const t=_0x4aa1ea?function(){if(_0x66af77){const t=_0x21197e[e(309)](_0x4c7fee,arguments);return _0x2f737a=null,t}}:function(){};return _0x3763c3=!1,t}{const s=t[e(317)](Function,t.fakWV(e(328)+"nction() ",t[e(293)])+");");n=t[e(319)](s)}}catch(a){n=window}const s=n[e(318)]=n[e(318)]||{},r=[e(320),e(305),"info","error","exception",e(291),t[e(315)]];for(let i=0;i<r[e(292)];i++){const t=Ct.constructor[e(314)].bind(Ct),n=r[i],a=s[n]||t;t[e(306)]=Ct.bind(Ct),t.toString=a[e(312)][e(298)](a),s[n]=t}})();const kt={};kt[wt(289)]=wt(326)+"d-settings";const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e.enabled}))}),kt)),Dt=qt;!function(){const e=qt,t=Lt();for(;;)try{if(345757===-parseInt(e(677))/1+-parseInt(e(586))/2+parseInt(e(591))/3+parseInt(e(663))/4*(-parseInt(e(571))/5)+-parseInt(e(712))/6+-parseInt(e(441))/7*(parseInt(e(638))/8)+parseInt(e(555))/9*(parseInt(e(714))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const zt=function(){const e=qt,t={AdxoF:function(e,t){return e(t)},rejsW:function(e,t){return e!==t},JuEAY:e(475),kJIqv:e(621),sqdXd:"DshKN"};let n=!0;return function(s,r){const a=e,i={iwFNf:function(e,n){return t[qt(604)](e,n)},XGddY:t[a(609)],nNSTv:t[a(469)]};if("jlKEC"!==t[a(707)]){const e=n?function(){const e=a;if(i[e(642)](i[e(489)],i.nNSTv)){if(r){const e=r.apply(s,arguments);return r=null,e}}else _0x3c0f8a[e(577)]("Failed to "+e(704)+e(709),_0xa9d0c0)}:function(){};return n=!1,e}_0x3bec3a[a(445)](t[a(491)](_0x35fe5a,_0x273a4a))}}()(void 0,function(){const e=qt;return zt[e(685)]()[e(508)]("(((.+)+)+)+$").toString()[e(573)+"r"](zt)[e(508)]("(((.+)+)+)+$")});zt();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(516)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Lt(){const e=["ihjHDgLUz3m6","Bw92zq","DxHstgm","ndy3otq2D1LuCLbR","yMXHy2S","mte1ntbjvLLLv0m","Bw92zv9JB3vUDa","q0riCvm","Bg9N","CMvTB3zLq2HHBG","rxDkuM0","B2rL","zseGww91igfYzq","BwvZC2fNzq","igv4CgLYzwqGyW","rwvIwxO","D2LUBMvYx2LK","C0zMrwG","DhjHy2u","yMXHy2TFD2LUCW","Auv6t1q","zxHJzxb0Aw9U","zwqHifDHAxrPBG","ota5mJuXCfLKA1P2","D2fPDgLUzW","C2LUz2XL","v2HPDguGD2LUCW","Aw5MBW","rMLAD2e","Bw92zv91y2K","yu9LEui","yMvmquy","s2fkq2O","EeLdzeq","u1fpC3e","y29Kzq","C3rHDhvZ","D05ICe8","DhrL","D2HPDgvFD2LUCW","zhjHDW","Bg9FCMf0Aw5N","BwfW","DMvYyM9Zzq","seDHBxa","Dg9vChbLCKnHCW","u1zSANa","vKL1ruW","AxnmB2fKAw5N","B2fUyKu","DMLJDg9YEq","A0PjCxy","vvHdr3G","AwXSzwDHBa","uhDwvwW","yxnJzw5KAw5N","uuTbD0q","wLnOCLa","qMPrAKe","vM9XBNm","DgfIBgu","C2LVBIK","igDHBwu","uuDTBw8","zNjVBq","y2HLC3nFBw92zq","yMXHy2TFCgXHEq","y2HLC3nFz2fTzq","s2Luwfy","B0T3t2O","Awq9zxeU","weDKzfK","sM9PBMvKigDHBq","qwr4B0y","yMXHy2TFCgfSzq","zwXVx3jHDgLUzW","we1oze4","zw1PDge","yNvSBgv0xZe","we5dzxi","y29KztOG","z2fTzvn0yxj0","DMDHBey","x3jLBwfPBMLUzW","werztNu","Aw5JBhvKzxm","y2HHBgXLBMDLqW","v09sAve","z2fTzs0","BMv3uMf0Aw5N","C2vHCMnO","BxLdB2XVCG","zMDetxC","r2fTzsbUB3qGzG","z0HisKq","ywjHBMrVBMvK","DgLTzv9JB250CG","vMD4tfm","yxbWBhK","y3vYCMvUDezLBG","A1vKwKO","DhvYBG","Ew5fAw4","tY1plu8","DxbKyxrL","BgvUz3rO","qxfsvNm","Cfr1qK8","zhKGC3rHCNrLza","A3HAsgm","Bg9HzeDHBwu","AKv1tum","DgjWqum","serNyxa","CM4GDgHPCYiPka","C1n4DhC","ENbgCNe","ugXLyxnLihnPzW","y3vYCMvUDf9Mzq","zxHxuLq","zMvU","zxfpBhG","vxDMCg0","AxndAgvJAW","rMfPBgvKihrVia","wwPgwKi","rgveD0S","zxjFAwq","z1fpC1e","uxzIvxq","ihnLBNqGkg9WCa","yMLUza","C3vJy2vZCW","AM9PBIbIEsbJBW","y2HHBMDL","yMXHy2TqywXLDa","C2vSzwn0","mtq1odLUCxbtDM8","BNnhtgm","Aw5Zzxj0","tY1p","BwfRzu1VDMu","C3vIC2nYAwjL","txbRtwG","D1zbshu","BIb0AgLZihzLCG","ChjVBw90Aw9U","BIb5B3vYig93BG","vLbTrLq","C2fU","D2HPDgu","DhvsDMi","ww91ihjLC2LNBG","mJCYmdvXCwToD00","y2HHBgXLBMDLxW","y29UC3rYDwn0BW","BNvMsgK","uMf0Aw5NoIa","BMvUDc4UlG","zxjYB3i","zwf0zsbHigDHBq","su5trvju","BhfwAfy","zgvMzwf0","yMXHy2TFDgLTzq","A0PmCKS","z2fTzv9Pza","D012rNa","oty3mZH3y1vtvwC","s1j4Ce8","tePgsem","CMvZDwX0","y2fWDhvYzq","mtm5mJaWyK55vNP5","Bw92zxmT","BMvS","Bg9HzcbNyw1L","Cvn4u2q","Dg9ju09tDhjPBG","C3rHCNrLzef0","u1LqzMW","EwvLueq","y29TCgXLDgvK","sxzht3K","Axnhyw1Lt3zLCG","y2fZDgXL","CMvQC1C","AxndAgvJA21HDa","q2ztwMq","CKLK","BfLct1m","sNvfqvK","r2fTzsbHBhjLyq","BuL2tfO","Bw92zv9Zyw4","r2fTzsbJCMvHDa","DhPoquu","zMLUza","uKPTt0K","t0vZCMS","zYbMB3iGB3bWBW","uhPfuKi","y2HHBM5LBa","vgjrCxy","C3rHCNrLzf9HDa","ywjevg4","y3jLyxrLigDHBq","y2HLy2TTyxrL","z2fTzvn0yxrL","C0nrDui","Aw4GysbNyw1L","ywrK","CgDU","tu9KBu4","ChjVzMLSzxm","yMXHy2TuAw1LuG","AM9PBKDHBwu","AgfUz2vZ","D2HPDgvFCgXHEq","BMv3","ndbkv05guue","yMXHy2TqBgf5zq","sLbWyuS","sfz2BKe","AxDgtMy","EwHVtK8","yuXjqLC","ywn0AxzL","lwfJy2vWDhmGAq","CYbcBgfJAY4","y3rVCIGICMv0Dq","r3PezLi","C3vIC3rYAw5N","uxvbuei","D2HPDgvFCgfSzq","D2HPDgvFDgLTzq","x19WCM90B19F","t1nlALq","AxnnEvr1CM4","ChjVDg90ExbL","vMTkuxy","CgTsDeW","BhHVrgm","E30Uy29UC3rYDq","CNbJ","mJq4s3z5z2fm","y2HLy2S","ChvIBgLJ","BIbPBIb0BYbJCG","rM9puhu","rxvZB2u","zw1HAw5PBMC","CgnWt2u","D2fYBG","DxnLCL9Pza","Cg9ZDgDYzxnFyW","C3jvs1i","y29UC29Szq","EePdzu8","ndu5nZmXDunlz2TT","AxD1zKy","B2zMzxjeCMf3","yMXPDhPFnq","tw92zsbLCNjVCG","CMfWAwrFmtu","Bwf5yMvtAw5NBa","CMv0DxjUicHMDq","Dg9tDhjPBMC","y2fWDhvYzwq","Dw50Aw1Lza","quPyuMu","uwLUC0m","rhnUtKC","ww91ihDVBIe","uvnRv1y","C1Lzy04","AM9PBKj5q29Kzq","D2HPDgvqBgf5zq","BMn0Aw9UkcKG","zNbRuu0","zM9YrwfJAa","Bw92zunVDw50","z2fTzv9Pzd1LCq","u3PSsNu","t3vytwC","sw52ywXPzcbVCG","DxbKyxrLievmtW","ruX4q2G","BIbPBIb0BYbQBW","C3fKwgq","tMXgywm"];return(Lt=function(){return e})()}function qt(e,t){e-=428;const n=Lt();let s=n[e];if(void 0===qt.iWtnlM){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.XLUYPE=r,qt.KTGqnJ={},qt.iWtnlM=!0}const a=e+n[0],i=qt.KTGqnJ[a];if(i)s=i;else{const e=function(e){this.GaUcCb=e,this.cGOMDt=[1,0,0],this.vYwcHY=function(){return"newState"},this.NndvQj="\\w+ *\\(\\) *{\\w+ *",this.izeteE="['|\"].+['|\"];? *}"};e.prototype.TvPeJR=function(){const e=new RegExp(this.NndvQj+this.izeteE).test(this.vYwcHY.toString())?--this.cGOMDt[1]:--this.cGOMDt[0];return this.gKJOYM(e)},e.prototype.gKJOYM=function(e){return Boolean(~e)?this.NQfXEB(this.GaUcCb):e},e.prototype.NQfXEB=function(e){for(let t=0,n=this.cGOMDt.length;t<n;t++)this.cGOMDt.push(Math.round(Math.random())),n=this.cGOMDt.length;return e(this.cGOMDt[0])},new e(qt).TvPeJR(),s=qt.XLUYPE(s),qt.KTGqnJ[a]=s}return s}Bt(void 0,function(){const e=qt,t={LuzXb:e(661)+e(648)+'rn this")( )',YZgWX:function(e){return e()},iEzOT:e(717),NlFac:e(445),SzlJu:e(439),jLTtd:e(436)};let n;try{const s=Function(e(684)+e(696)+t.LuzXb+");");n=t.YZgWX(s)}catch(a){n=window}const s=n[e(675)]=n[e(675)]||{},r=[t[e(438)],e(671),t[e(708)],"error",t[e(701)],e(478),t.jLTtd];for(let i=0;i<r[e(523)];i++){const t=Bt[e(573)+"r"][e(657)][e(549)](Bt),n=r[i],a=s[n]||t;t[e(654)]=Bt[e(549)](Bt),t[e(685)]=a[e(685)][e(549)](a),s[n]=t}})();const At={};At[Dt(496)]=60,At[Dt(680)]=300,At[Dt(682)]=900,At[Dt(687)]=0;const Pt=At,St=Tt;!function(){const e=Tt,t=It();for(;;)try{if(355726===parseInt(e(323))/1*(parseInt(e(360))/2)+-parseInt(e(346))/3+-parseInt(e(332))/4+parseInt(e(341))/5*(-parseInt(e(339))/6)+-parseInt(e(310))/7+-parseInt(e(327))/8+parseInt(e(317))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ht=function(){let e=!0;return function(t,n){const s=e?function(){const e=Tt;if("VAewJ"!==e(367)){const t=_0x5c959f?function(){if(_0x187c77){const t=_0x1fde21[e(322)](_0x3dbb9e,arguments);return _0x549d65=null,t}}:function(){};return _0x1955a6=!1,t}if(n){const s=n[e(322)](t,arguments);return n=null,s}}:function(){};return e=!1,s}}()(void 0,function(){const e=Tt;return Ht.toString()[e(343)](e(361)+"+$")[e(351)]()[e(335)+"r"](Ht)[e(343)](e(361)+"+$")});Ht();const Kt=function(){let e=!0;return function(t,n){const s=Tt;if("djBjA"===s(334)){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}{const e=_0x1d37e6[_0x184c58];return _0x3ce604[s(308)](e)}}}();Kt(void 0,function(){const e=Tt,t={ZuoFu:function(e,t){return e(t)},pWXlq:"warn",Uxukl:e(348),IITpq:e(362),BFjAh:function(e,t){return e<t},rJEKz:"WpFSl",dmuIx:e(306),iolOC:function(e,t){return e+t},QyWPm:e(357)+"nction() ",tYkeJ:e(328),UvYfw:e(324),vXevh:e(363)};let n;try{if(t[e(345)]!==t[e(371)]){n=Function(t[e(311)](t[e(321)],"{}.constru"+e(333)+e(309)+" )")+");")()}else{let n;try{n=t[e(364)](_0x3fb9b1,e(357)+e(313)+(e(331)+'ctor("retu')+e(309)+" ));")()}catch(a){n=_0x64baaf}const s=n[e(326)]=n[e(326)]||{},r=["log",t[e(342)],t.Uxukl,"error",e(324),t[e(358)],"trace"];for(let a=0;t[e(329)](a,r.length);a++){const t=_0x4b9074[e(335)+"r"][e(338)][e(347)](_0x34af77),n=r[a],i=s[n]||t;t[e(336)]=_0x36e366[e(347)](_0x54cdc1),t[e(351)]=i[e(351)].bind(i),s[n]=t}}}catch(i){n=window}const s=n.console=n.console||{},r=[e(340),e(352),t[e(319)],t.tYkeJ,t[e(368)],"table",t[e(359)]];for(let o=0;o<r[e(307)];o++){const t=Kt.constructor.prototype[e(347)](Kt),n=r[o],a=s[n]||t;t[e(336)]=Kt.bind(Kt),t[e(351)]=a[e(351)][e(347)](a),s[n]=t}})();const _t={};function It(){const e=["Dg9tDhjPBMC","D2fYBG","C2vSzwn0Aw9U","BwvKAxvT","y3HkC2K","thvoBMG","CMv0DxjUicHMDq","suLuChe","DLHLDMG","mJa1mduYu3HzAeXk","kcGOlISPkYKRkq","DgfIBgu","DhjHy2u","wNvVrNu","AgfWDgLJCW","AfHzrha","vKfLD0O","vxzzzNC","se9trvO","C3vJy2vZCW","zg11sxG","Dw5KzwzPBMvK","zgj6Cvi","BgvUz3rO","DMLICMf0zq","CM4GDgHPCYiPka","mtiWmJm5rxzgzeDi","Aw9St0m","z0X6t1q","BMn0Aw9UkcKG","BgLNAhq","sgfWDgLJigzLzq","y1D6EKq","mJmXmZGYmJzpvMrvyxO","A3LNExm","vxH1A2W","zwq6","uxLxug0","yxbWBhK","mxrKCw1IBW","zxHJzxb0Aw9U","t2H0BgW","y29UC29Szq","mZu2ntG5nKDpsfbXzq","zxjYB3i","qKzQqwG","AgvHDNK","E30Uy29UC3rYDq","mJC2otCZmNPpCMPgvW","y3rVCIGICMv0Dq","zgPcAKe","y29UC3rYDwn0BW","x19WCM90B19F","qKvpsu0","ChjVDg90ExbL","nZi2mZz2qLLlEeK","Bg9N","mJm1u0HwwNL3","CfDyBhe","C2vHCMnO","AxntDxbWB3j0zq","CKPfs3O","mtC4mde1nwD4wg1yzW","yMLUza","Aw5MBW","C25cvfq","ueDRu08"];return(It=function(){return e})()}function Tt(e,t){e-=306;const n=It();let s=n[e];if(void 0===Tt.iLchDU){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tt.jUZxQu=r,Tt.QiMzTE={},Tt.iLchDU=!0}const a=e+n[0],i=Tt.QiMzTE[a];if(i)s=i;else{const e=function(e){this.SUZsWx=e,this.vnMUnJ=[1,0,0],this.xuYHOZ=function(){return"newState"},this.fnjGIj="\\w+ *\\(\\) *{\\w+ *",this.JMwNFE="['|\"].+['|\"];? *}"};e.prototype.qvIoJX=function(){const e=new RegExp(this.fnjGIj+this.JMwNFE).test(this.xuYHOZ.toString())?--this.vnMUnJ[1]:--this.vnMUnJ[0];return this.QuXZov(e)},e.prototype.QuXZov=function(e){return Boolean(~e)?this.LGrHWA(this.SUZsWx):e},e.prototype.LGrHWA=function(e){for(let t=0,n=this.vnMUnJ.length;t<n;t++)this.vnMUnJ.push(Math.round(Math.random())),n=this.vnMUnJ.length;return e(this.vnMUnJ[0])},new e(Tt).qvIoJX(),s=Tt.jUZxQu(s),Tt.QiMzTE[a]=s}return s}_t[St(314)]=10,_t[St(354)]=25,_t[St(330)]=50,_t.success=[10,50,20],_t[St(328)]=[50,30,50,30,50],_t.selection=5;const Et=_t,Gt=()=>{const e=St,n={PGkSO:e(355),Ohtll:e(315)+"dback fail"+e(320),HOSEZ:function(e,t){return e!==t},euugW:e(372),LuNnh:function(e,t){return e in t},hXYDp:function(e,t,n){return e(t,n)},gLzOT:function(e,t,n){return e(t,n)},cWzzD:function(e,t,n){return e(t,n)},kygys:function(e,t,n){return e(t,n)}},s=n[e(369)](typeof navigator,n.euugW)&&n[e(356)](e(308),navigator),r=n[e(366)](t.useCallback,(t=e(314))=>{const r=e;if(r(355)===n[r(350)]){if(!s)return!1;try{const e=Et[t];return navigator.vibrate(e)}catch(a){return!1}}else if(_0x456456){const e=_0x41e692[r(322)](_0x411009,arguments);return _0x375438=null,e}},[s]),a={select:t.useCallback(()=>r(e(353)),[r]),move:n[e(366)](t.useCallback,()=>r(e(314)),[r]),capture:n[e(312)](t.useCallback,()=>r(e(354)),[r]),check:n[e(316)](t.useCallback,()=>r(e(330)),[r]),victory:n.kygys(t.useCallback,()=>r(e(370)),[r]),error:n[e(312)](t.useCallback,()=>r(e(328)),[r]),castle:t.useCallback(()=>!!s&&navigator[e(308)]([15,40,15]),[s]),gameStart:n[e(318)](t.useCallback,()=>{const t=e;if(t(349)!==t(337))return!!s&&navigator[t(308)]([10,30,10,30,20]);{const e=_0x542a20[t(322)](_0x1e4c48,arguments);return _0x4520c6=null,e}},[s])},i={};return i[e(344)+"d"]=s,i.vibrate=r,i[e(365)]=a,i},Wt={K:"‚ôî",Q:"‚ôï",R:"‚ôñ",B:"‚ôó",N:"‚ôò",P:"‚ôô",k:"‚ôö",q:"‚ôõ",r:"‚ôú",b:"‚ôù",n:"‚ôû",p:"‚ôü"},Ut=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,w]=t.useState(null),[y,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Gt();let D=null;try{D=l()}catch{}const z=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Ut(B?7-e:e,B?7-t:t),l=null==(i=z[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&y.includes(c)){!!(null==(o=z[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(w(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),w(c),void j(s(c))}w(null),j([])},[z,b,y,r,a,B,x,n,s,M]),P=t.useCallback(e=>{if(!(null==D?void 0:D.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?D.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):D.setHoveredSquare(null)},[D,L]),S=t.useCallback(()=>{(null==D?void 0:D.setHoveredSquare)&&D.setHoveredSquare(null)},[D]),H=t.useCallback(e=>{if(!D)return!1;const{highlightedPiece:t,lockedPieces:n}=D,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[D,g]),K=D&&(null!==D.highlightedPiece||D.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Ut(s,a),o=null==(n=z[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=y.includes(i);c.has(i);const f=C===i,g=L.has(i),w=H(i),j=K&&g&&!w,N=K&&w;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>P(i),onMouseLeave:S,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),P(i),setTimeout(()=>S(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[y.length," move",1!==y.length?"s":""," available"]})})]})},Ot={capture:{icon:y,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"‚ö°"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"üëë"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"üè∞"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"üíé"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"‚ú®"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"‚ö†Ô∏è"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"‚ùå"},inaccuracy:{icon:y,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"‚ö™"},fork:{icon:w,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"üî±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"üìå"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"üìç"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"üéØ"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"üí´"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"‚ö°"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"üë∏"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"üèÜ"}};const Jt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Ot[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),w=e.quality?M[e.quality]:null;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),w&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:w.color},className:"text-white text-[10px]",children:[w.symbol," ",w.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(y,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Rt={capture:{icon:y,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"‚ö°"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"üëë"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"üè∞"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"‚ú®"}},Xt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:E,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:T,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Vt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,w]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:E,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:T,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),w(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),w(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),w(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(P,{className:"w-3 h-3"})]}):u.jsx(S,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(K,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Rt[e],s=n.icon;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(_,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Xt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(I,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Jt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(G,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(W,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Complete visions have higher collector value"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(U,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use ‚Üê arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Watch patterns emerge in reverse"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),w(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(Y,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"‚å®Ô∏è Press Space to toggle"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use ‚Üí arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Each move adds new layers to the art"})]})})]}),u.jsxs(J,{children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(X,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(V,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(F,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(J,{children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(V,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(Z,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(y,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause ‚Ä¢ ‚Üê/‚Üí: Step ‚Ä¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),w=re(n),y=b.name!==w.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(y&&p?"text-primary":"text-muted-foreground"),animate:y&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:y&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," ‚Üí ",w.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Zt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(I,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(G,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(S,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(S,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(I,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:w}=xe(),{captureState:y,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:D,setReturningFromOrder:z}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,P]=t.useState(!1),[S,H]=t.useState(""),[K,_]=t.useState(!1),[T,E]=t.useState(!1);se(p);const G=t.useMemo(()=>p?fe(p):null,[p]),W=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const U=async e=>{if(e&&!v)return void _(!0);if(!B.current)return;P(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{P(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(we,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(ye,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(I,{variant:L?"outline":"default",size:"sm",onClick:()=>W(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(I,{variant:L?"default":"outline",size:"sm",onClick:()=>W(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves ‚Ä¢ ",c.result||"Game Finished",G&&u.jsxs("span",{className:"ml-2 text-primary",children:["‚Ä¢ ",G]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"‚ôî En Pensent ‚ôö"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(I,{onClick:()=>U(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(I,{onClick:()=>U(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(I,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):De;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(I,{onClick:()=>{const e=y(s),t=`${c.white} vs ${c.black}`;D({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),z(!0),w({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(ze,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:K,onClose:()=>_(!1),onAuthRequired:()=>{_(!1),E(!0)},trigger:"download"}),u.jsx(Le,{isOpen:T,onClose:()=>E(!1)})]})};function en(){const e=["ihrPBwvSAw5L","zxjYB3i","mtjiBhflrNK","A2v5","rwj4Agy","AxqGzNvSBhnJCG","C3rLBMvY","yxjKihnOB3j0yW","CgXHEsK","z2vJEgO","BgvUz3rO","y29UC3rYDwn0BW","u3bHy2u","y29UC29Szq","u2HVDYbRzxLIBW","A2v5zg93BG","t2zMzxiGzhjHDW","u291BMqGBxv0zq","r28GDg8Gzw5Kia","ugXHEs9qyxvZzq","kcGOlISPkYKRkq","icH5B3vYihr1CG","nwPqyNbhsa","mJaYmJq4nfrKrwrdBq","zwvU","mZGWndCWmNnnAwPHwq","y0PrCLi","ywn0Aw9U","ie09txv0zsWGuG","sgvSCa","z2rzsgu","Aw5MBW","tMv4DcbTB3zL","uMv0DxjUihrVia","purYyxCSievZyW","ntC0mZjkAKDAv2i","vg9Nz2XLihnVDq","mJu0odyYD0veu21s","Bg9N","yxvSDa","zsaOzhvYAw5Nia","uhjLDMLVDxmGBq","yxbWBhK","sePcu1C","vg9Nz2XLigz1Ba","zhvYyxrPB24","yMLUza","x19WCM90B19F","y3rVCIGICMv0Dq","AxndB250zw50rq","Dg9mB3DLCKnHCW","nda5mJG4me12uuTpCG","D2fYBG","u291BMqGDw5TDq","DgfYz2v0","BMn0Aw9UkcKG","DgfIBgu","DM9utMK","DxrZ","Bg9IyNKGlYbfEa","vNbtB3O","pvjLC2LNBIWGra","uMvZAwDUigDHBq","rw5K","BMqGB24VB2zM","ywrKrxzLBNrmAq","ndLiDeHLz2u","vg9Nz2XLl2v4Ca","puXVyMj5lca/pq","sg9Tzq","mJaZnJHsC3z0rNe","DgvK","svPuAvi","Dg9tDhjPBMC","C2vHCMnO","tu5pzhu","yNDTCNO","C2HPzNrlzxK","zxHJzxb0Aw9U","mJbzBuDkEwG","mZeWnurWBLvJEq","nJm3mtHVqvbnA3u","ChjLDMvUDerLzG","rxnJ","qMTyrxC","BhnJCMvLBIbTBW","yxrLCW","DeXPC3rLBMvY","vg9Nz2XLigjVyq","CMLKCe4","E30Uy29UC3rYDq"];return(en=function(){return e})()}const tn=rn;!function(){const e=rn,t=en();for(;;)try{if(478960===parseInt(e(358))/1+-parseInt(e(356))/2*(parseInt(e(312))/3)+-parseInt(e(391))/4*(parseInt(e(390))/5)+-parseInt(e(314))/6*(-parseInt(e(343))/7)+-parseInt(e(347))/8*(-parseInt(e(357))/9)+-parseInt(e(328))/10+-parseInt(e(393))/11*(-parseInt(e(370))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[rn(319)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=rn;return nn.toString()[e(351)](e(388)+"+$")[e(350)]()[e(379)+"r"](nn)[e(351)](e(388)+"+$")});nn();const sn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();sn(void 0,function(){const e=rn,t={bwmrz:e(377),oYeou:function(e,t){return e(t)},MNOdu:function(e,t){return e+t},ridpN:function(e,t){return e===t},gdYHe:e(320),OPkBW:function(e){return e()},Ebxhf:e(315),fpaYH:e(355),IZTiR:function(e,t){return e<t}},n=t.OPkBW(function(){const n=e;let s;try{if(t[n(353)]===n(377))s=t.oYeou(Function,t[n(352)]("return (fu"+n(332)+(n(367)+n(325))+'rn this")( )',");"))();else if(_0x8cf8b){const e=_0x435273.apply(_0x5b8179,arguments);return _0x126263=null,e}}catch(r){if(t[n(366)](n(320),t[n(398)]))s=window;else if(_0x36ff7d){const e=_0x3c4645[n(319)](_0x37dfa2,arguments);return _0xcae94a=null,e}}return s}),s=n[e(381)]=n[e(381)]||{},r=[t[e(372)],e(329),"info",e(369),t.fpaYH,e(333),"trace"];for(let a=0;t[e(349)](a,r[e(378)]);a++){const t=sn[e(379)+"r"].prototype.bind(sn),n=r[a],i=s[n]||t;t[e(324)]=sn[e(323)](sn),t[e(350)]=i[e(350)][e(323)](i),s[n]=t}})();function rn(e,t){e-=312;const n=en();let s=n[e];if(void 0===rn.lwczcg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};rn.nprpxF=r,rn.qXbXAl={},rn.lwczcg=!0}const a=e+n[0],i=rn.qXbXAl[a];if(i)s=i;else{const e=function(e){this.JgDhsT=e,this.AnhSjk=[1,0,0],this.wsBiFQ=function(){return"newState"},this.rIjtRd="\\w+ *\\(\\) *{\\w+ *",this.uAFLNb="['|\"].+['|\"];? *}"};e.prototype.ERPDVd=function(){const e=new RegExp(this.rIjtRd+this.uAFLNb).test(this.wsBiFQ.toString())?--this.AnhSjk[1]:--this.AnhSjk[0];return this.HnihRT(e)},e.prototype.HnihRT=function(e){return Boolean(~e)?this.EdrCXK(this.JgDhsT):e},e.prototype.EdrCXK=function(e){for(let t=0,n=this.AnhSjk.length;t<n;t++)this.AnhSjk.push(Math.round(Math.random())),n=this.AnhSjk.length;return e(this.AnhSjk[0])},new e(rn).ERPDVd(),s=rn.nprpxF(s),rn.qXbXAl[a]=s}return s}const an=()=>{const e=rn,t={};t[e(322)]=4e3,o.info("Shortcuts:"+e(396)+e(338)+e(402)+e(345)+e(397),t)},on={};on[tn(371)]="M",on[tn(395)]=tn(313)+tn(341);const cn={};cn[tn(371)]="R",cn[tn(395)]=tn(339)+tn(317)+tn(376);const ln={key:"D"};ln[tn(395)]=tn(384)+tn(389)+"n)";const un={};un[tn(371)]=tn(360),un[tn(395)]=tn(401)+tn(336)+tn(373)+tn(392);const dn={};dn[tn(371)]="?",dn[tn(395)]=tn(382)+tn(375)+tn(335);const mn={};mn[tn(371)]=tn(380),mn[tn(395)]=tn(387)+tn(368);const xn={};xn[tn(371)]="‚Üê",xn[tn(395)]=tn(318)+"ove";const hn={};hn[tn(371)]="‚Üí",hn[tn(395)]=tn(400);const pn={};pn[tn(371)]=tn(346),pn[tn(395)]="Go to start";const fn={};fn[tn(371)]=tn(340),fn[tn(395)]=tn(386)+"(show all)";const gn={};gn[tn(371)]="F",gn[tn(395)]=tn(321)+tn(362)+"de";const vn={key:"C"};vn[tn(395)]=tn(365)+"rd coordin"+tn(363);const bn={};bn[tn(371)]="L",bn.action=tn(344)+"and legend";const wn=Kn;!function(){const e=Kn,t=Gn();for(;;)try{if(547808===parseInt(e(275))/1*(-parseInt(e(246))/2)+parseInt(e(217))/3+parseInt(e(274))/4*(parseInt(e(176))/5)+-parseInt(e(262))/6+parseInt(e(162))/7+-parseInt(e(197))/8*(-parseInt(e(264))/9)+-parseInt(e(163))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const yn=function(){const e=Kn,t={};t[e(267)]=function(e,t){return e===t},t[e(190)]=e(206),t[e(203)]="TwZAR";const n=t;let s=!0;return function(t,r){const a=e;if(!n[a(267)](n.ZJBIO,n[a(203)])){const e=s?function(){if(r){const e=r[a(177)](t,arguments);return r=null,e}}:function(){};return s=!1,e}switch(_0x42e48b[a(214)+"e"]()){case"p":return _0x3e042a;case"n":return _0x12c1e2;case"b":return _0x55d56c;case"r":return _0xe84c85;case"q":return _0x3b6239;case"k":return _0x285a1c;default:return[]}}}()(void 0,function(){const e=Kn,t={};t[e(230)]=e(221)+"+$";const n=t;return yn[e(179)]()[e(240)](n[e(230)])[e(179)]()[e(198)+"r"](yn)[e(240)](e(221)+"+$")});yn();const jn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Kn(177)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();jn(void 0,function(){const e=Kn,t={kxysy:function(e,t){return e(t)},fnoLH:function(e,t){return e+t},BeAcE:e(187)+e(280),uZtRk:function(e){return e()},CRJlx:e(207),EQeLy:e(205),loZWe:e(182),RLdow:e(211),HFviV:e(273)},n=t[e(210)](function(){const n=e;let s;try{s=t[n(250)](Function,t[n(266)](t[n(251)]+'{}.constructor("retu'+n(168)+" )",");"))()}catch(r){s=window}return s}),s=n[e(248)]=n[e(248)]||{},r=[t[e(254)],t.EQeLy,t.loZWe,"error",t[e(238)],e(175),t[e(165)]];for(let a=0;a<r[e(278)];a++){const t=jn[e(198)+"r"][e(272)].bind(jn),n=r[a],i=s[n]||t;t[e(194)]=jn.bind(jn),t[e(179)]=i[e(179)][e(189)](i),s[n]=t}})();const Cn={p:100,n:320,b:330,r:500,q:900,k:2e4},Nn=Cn,kn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Mn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Dn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],zn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Bn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Ln=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function qn(e){switch(e.toLowerCase()){case"p":return kn;case"n":return Mn;case"b":return Dn;case"r":return zn;case"q":return Bn;case"k":return Ln;default:return[]}}function An(e){const t=Kn,n={rgHCL:function(e,t){return e(t)},IbuYi:function(e,t){return e<t},AXufH:function(e,t){return e!==t},zmqKL:"OozNR",fLRPM:function(e,t){return e===t},xhQEC:function(e,t){return e===t},kwUzI:function(e,t){return e*t}};if(e[t(276)+"e"]())return"w"===e[t(225)]()?-1/0:1/0;if(e[t(156)]()||e[t(242)+"e"]())return 0;let s=0;const r=e[t(255)]();for(let i=0;i<8;i++)for(let e=0;n[t(185)](e,8);e++){const a=r[i][e];if(a){const r=Nn[a[t(224)]]||0,o=qn(a[t(224)]);let c=0;if(o[t(278)]>0)if(n.AXufH(t(219),n.zmqKL)){c=o[n[t(192)](a[t(233)],"w")?i:7-i][e]}else _0x5ab2bb=_0x13e4ab;const l=r+c;s+=n[t(192)](a.color,"w")?l:-l}}const a=e.moves()[t(278)];return s+=n.xhQEC(e[t(225)](),"w")?n[t(252)](a,2):2*-a,s}function Pn(e,t,n,s,r){const a=Kn,i={ZQxUm:function(e,t){return e-t},TRwVW:function(e,t){return e(t)},prpPt:function(e,t){return e!==t},OzsKL:function(e,t,n,s,r,a){return e(t,n,s,r,a)},iqDTa:function(e,t){return e>t},sdxcF:function(e,t){return e<=t}};if(0===t||e[a(216)]())return{score:i[a(208)](An,e),move:null};const o={};o[a(166)]=!0;const c=e[a(288)](o);if(c[a(236)]((e,t)=>{const n=a;let s=0,r=0;return e.captured&&(s+=Nn[e[n(160)]]||0),t[n(160)]&&(r+=Nn[t.captured]||0),e.san[n(245)]("+")&&(s+=50),t[n(200)].includes("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const u of c)if(i.prpPt(a(232),a(232))){const e="w"===_0x4eafa9[a(233)]?_0x4554fb:i[a(229)](7,_0x473635);_0x367d43=_0x1d12be[e][_0x47b2e6]}else{e[a(193)](u);const c=i[a(167)](Pn,e,t-1,n,s,!1);if(e.undo(),i[a(279)](c[a(191)],r)&&(r=c[a(191)],o=u),n=Math[a(235)](n,c.score),i.sdxcF(s,n))break}const l={};return l[a(191)]=r,l.move=o,l}{let r=1/0,i=null;for(const l of c){e[a(193)](l);const o=Pn(e,t-1,n,s,!0);if(e[a(161)](),o[a(191)]<r&&(r=o.score,i=l),(s=Math[a(283)](s,o.score))<=n)break}const o={};return o.score=r,o[a(193)]=i,o}}function Sn(e){const t=Kn,n={};n[t(269)]=function(e,t){return e<t},n[t(239)]=function(e,t){return e*t};const s=n,r={};r[t(166)]=!0;const a=e.moves(r);if(0===a[t(278)])return null;const i=a[t(222)](e=>e[t(160)]);return i[t(278)]>0&&s[t(269)](Math[t(227)](),.3)?i[Math[t(228)](s[t(239)](Math.random(),i[t(278)]))]:a[Math.floor(s[t(239)](Math[t(227)](),a[t(278)]))]}function Hn(e){const t=Kn;return{WnCCO:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[t(247)](Pn,e,4,-1/0,1/0,"w"===e[t(225)]())[t(193)]}function Kn(e,t){e-=155;const n=Gn();let s=n[e];if(void 0===Kn.nECSSz){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Kn.eRAJay=r,Kn.RVWnlE={},Kn.nECSSz=!0}const a=e+n[0],i=Kn.RVWnlE[a];if(i)s=i;else{const e=function(e){this.gfNRrP=e,this.HjRKDD=[1,0,0],this.tciwNG=function(){return"newState"},this.YsbBkH="\\w+ *\\(\\) *{\\w+ *",this.peBrzw="['|\"].+['|\"];? *}"};e.prototype.WoPEGE=function(){const e=new RegExp(this.YsbBkH+this.peBrzw).test(this.tciwNG.toString())?--this.HjRKDD[1]:--this.HjRKDD[0];return this.KEMzvO(e)},e.prototype.KEMzvO=function(e){return Boolean(~e)?this.zYYYxe(this.gfNRrP):e},e.prototype.zYYYxe=function(e){for(let t=0,n=this.HjRKDD.length;t<n;t++)this.HjRKDD.push(Math.round(Math.random())),n=this.HjRKDD.length;return e(this.HjRKDD[0])},new e(Kn).WoPEGE(),s=Kn.eRAJay(s),Kn.RVWnlE[a]=s}return s}function _n(e,t){const n=Kn,s={cexNB:n(164),cLxyQ:n(195),erTdn:n(263),EXvnB:n(171),loLKj:function(e,t){return e(t)}};switch(t){case s[n(184)]:return Sn(e);case s.cLxyQ:return function(e){const t=Kn,n={Tiows:function(e,t){return e*t},Vqsuo:function(e,t){return e(t)},lwgyx:t(223)},s={};s[t(166)]=!0;const r=e[t(288)](s);if(0===r.length)return null;let a=null,i="w"===e[t(225)]()?-1/0:1/0;for(const o of r){e[t(193)](o);const s=n[t(271)](An,e);if(e[t(161)](),"w"===e.turn()){if(s>i){if("Jlmtq"!==n[t(186)])return _0x49aaa1[_0x2bec3f.floor(n[t(215)](_0x4fcb95[t(227)](),_0x157586[t(278)]))];i=s,a=o}}else s<i&&(i=s,a=o)}if(Math.random()<.2){const n=r.sort((n,s)=>{const r=t;e[r(193)](n);const a=An(e);e[r(161)](),e[r(193)](s);const i=An(e);return e.undo(),"w"===e[r(225)]()?i-a:a-i}),s=n[t(169)](0,Math[t(283)](3,n[t(278)]));return s[Math[t(228)](Math[t(227)]()*s.length)]}return a}(e);case s[n(158)]:return Hn(e);case s[n(157)]:return s[n(172)](Hn,e);default:return Sn(e)}}const In={};In.id=wn(164),In.label=wn(285),In[wn(287)+"n"]="Makes random moves, occasional"+wn(170),In[wn(199)]=wn(183);const Tn={};Tn.id=wn(195),Tn.label=wn(286)+"r",Tn.description=wn(244)+wn(174)+wn(241)+wn(260),Tn[wn(199)]=wn(212);const En={};function Gn(){const e=["Bg9ms2O","zw5NAw5Lug93zq","AwnZigfUzcbTyq","DgfIBgu","mZe0mdK1nwv5r25zua","yxbWBhK","yw5KBwfZDgvYia","Dg9tDhjPBMC","vM5Pu28","yMvZDe1VDMu","Aw5MBW","FJGWma","y2v4tKi","swj1wwK","BhDNExG","CMv0DxjUicHMDq","igzHBgXPBMCGyG","yMLUza","wKPcsu8","C2nVCMu","zKXsue0","Bw92zq","x19WCM90B19F","BwvKAxvT","rvL0uKW","mZm2mdC3nNbbtNfKBW","y29UC3rYDwn0BW","CMf0Aw5N","C2fU","zw5NAw5LlcbNCG","FJmYmda","AxbLCfK","DMfSDwf0Aw9Ula","D2fYBG","tvbVzuW","Bg9N","vfj3vLC","zcbTB2rL","DvP0uMS","zxHJzxb0Aw9U","FJe0mda","Bw92zxrPBwu","Dg9mB3DLCKnHCW","vgLVD3m","Axnhyw1Lt3zLCG","mJuYodi3mvfewuPlDq","qujbA1i","yMzPsKK","u3rVy2TMAxnOia","kcGOlISPkYKRkq","zMLSDgvY","sMXTDhe","DhLWzq","DhvYBG","idqTCgX5ihnLyq","CMfUzg9T","zMXVB3i","wLf4vw0","uLbLtMe","D2fPDfjLywr5","yNPsuge","y29SB3i","C3rYzw5NDgG","Bwf4","C29YDa","r0Pvsxu","uKXKB3C","thLNqLm","C2vHCMnO","DgvYAwfSigf3yq","AxntDgfSzw1HDa","ExnArfi","qMfZAwmGDgfJDa","Aw5JBhvKzxm","mtbcqMPcuKK","v25dq08","y29UC29Szq","A3vuAMi","A3H5C3K","qMvby0u","A3DvEKK","B2rmAMq","q1jkBhG","yM9HCMq","CMDiq0W","AxrPB24","zMvU","sLbIDNG","CMvUzxnZ","yw5HBhL6zvbVCW","ntK3mZqXne1fug5Wsq","AgfYza","oxD6CMjsvG","CMvK","zM5VteG","yvfRwuW","qwr2yw5JzwqGzq","qNPtqMS","zxjlsMi","vNfZDw8","ChjVDg90ExbL","DhjHy2u","ne1lC1r0ua","ody2mZvssNjzt2i","AxndAgvJA21HDa","BgfIzwW","BgvUz3rO","Axfevge","BMn0Aw9UkcKG","Bw92zsbLCNjVCG","Dxr0ww4","BwLU","Afboyvi","qMvNAw5Uzxi","q2X1yIbqBgf5zq","zgvZy3jPChrPBW","Bw92zxm","BM90ihjLywr5la","AxneCMf3","rvH2BKi","zxjuzg4","zxjYB3i","y2fWDhvYzwq","Dw5KBW","nda1nZq0nuzsruDtuW","ndK0mti4mfvJs1jLDa","zwfZEq","sez2Avy","DMvYyM9Zzq","t3PZs0W","CM4GDgHPCYiPka","C2XPy2u","ignHChr1CMvZ","C3rVy2TMAxnO"];return(Gn=function(){return e})()}En.id="hard",En[wn(277)]="Master",En[wn(287)+"n"]=wn(268)+wn(204)+wn(226)+"rch depth",En[wn(199)]="~2000";const Wn={id:"stockfish"};Wn[wn(277)]=wn(220)+"16",Wn[wn(287)+"n"]="Real NNUE "+wn(201)+wn(178)+wn(234),Wn.rating=wn(202),Wn[wn(173)+wn(265)]=!0;const Un=[In,Tn,En,Wn];!function(){const e=Rn,t=On();for(;;)try{if(152642===parseInt(e(527))/1+parseInt(e(501))/2+-parseInt(e(475))/3*(-parseInt(e(562))/4)+-parseInt(e(533))/5+-parseInt(e(565))/6+parseInt(e(479))/7*(-parseInt(e(472))/8)+parseInt(e(495))/9*(parseInt(e(555))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Yn=function(){const e={};e[Rn(540)]=function(e,t){return e===t};const t=e;let n=!0;return function(e,s){const r={UqDHh:function(e,n){return t[Rn(540)](e,n)}},a=n?function(){const t=Rn;if(r[t(496)](t(491),t(487)))return _0x1c81b5[t(544)]()[t(549)](t(469)+"+$").toString()[t(521)+"r"](_0x53e7b3)[t(549)](t(469)+"+$");if(s){const n=s[t(510)](e,arguments);return s=null,n}}:function(){};return n=!1,a}}()(void 0,function(){const e=Rn,t={};t[e(515)]=e(469)+"+$";const n=t;return Yn[e(544)]().search(n[e(515)])[e(544)]()[e(521)+"r"](Yn)[e(549)](n.ofBIN)});function On(){const e=["x19WCM90B19F","zxHJzxb0Aw9U","C3DPCgvpzMzZzq","rKzmEMW","y2XPzw50wa","y3rVCIGICMv0Dq","tKTKu0m","BMn0Aw9UkcKG","DhjHy2u","zxDdEKq","rhDMDLC","AfbZsLG","sNneExq","B25uB3vJAe1VDG","nJK1n0f0DNHdvW","vxfesgG","DffqsMO","shvurhO","uLfgDhe","qMzeEuK","mJa2otyWvNLSDKTV","CMv0DxjUicHMDq","u1rMDfu","wLHYAve","swrxCMO","t3Det2y","DevktuS","y2XPzw50wq","Dg91y2HLCW","yxbWBhK","sKzSCfm","EwjWy2m","B25uB3vJAevUza","yMLUza","B2zcsu4","y3vYCMvUDfK","ChjVDg90ExbL","E30Uy29UC3rYDq","y3vYCMvUDfG","AuztsMG","y29UC3rYDwn0BW","yM1TCei","z0PRBxK","Eu5NqxG","B25nB3vZzuXLyq","wwnJswe","mtKZnZuXswPAEhfA","C3rHCNrz","C255AvG","r3rjsvu","AxntD2LWAw5N","u292s2y","mtm4mtiXmfLoBeDTrG","CKrovNq","t0PtqLq","Bg9N","B25nB3vZzvvW","y29Tu1u","tezwDeO","uxrey1e","y29UC29Szq","y3vYCMvUDa","B25nB3vZzurVDW","Dg9tDhjPBMC","t0P1rKe","B25nB3vZzu1VDG","Aw5MBW","AgfUzgXLCNm","C2vHCMnO","D1vYDxC","zhr3r2C","sLrbtuq","B25uB3vJAfn0yq","ywjZ","ndm2meXtCLHzuW","q3bRv1u","qvD5shi","uLnPA24","r2PPt04","tKvKvu0","twv4vvG","ngXjEeX3Eq","zxjYB3i","tg1ezK8","ode4ntG2s3n2wu5s","BKr3vM0","kcGOlISPkYKRkq","BwzNBLy","AgvyCwu","ofHZEffYtG","BgvUz3rO","C3rHCNry","ndm1mdyZBg1xs1fe","uwDNBeS","wgDvq2q","DgfIBgu","mtq5nZC1nxr2t3LhtW","zeTkquu"];return(On=function(){return e})()}Yn();const Jn=function(){const e=Rn,t={};t[e(566)]="FHeqV",t.gJkmy=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(505)]=n.nDwVm;const o=i;if(n[a(523)]("vbLkA",a(497))){const e=s?function(){const e=a;if(e(512)===o[e(505)]){const t=_0x3ff9c5?function(){if(_0x535b2d){const t=_0x1c5008[e(510)](_0x5cd6f5,arguments);return _0x38e083=null,t}}:function(){};return _0x26bde8=!1,t}if(r){const n=r[e(510)](t,arguments);return r=null,n}}:function(){};return s=!1,e}{const e=_0x284b2d?function(){if(_0x16855b){const e=_0x538669.apply(_0x462935,arguments);return _0x6dd195=null,e}}:function(){};return _0x5c2d98=!1,e}}}();Jn(void 0,function(){const e=Rn,t={};t[e(522)]=function(e,t){return e+t},t.knakA=e(502)+e(488),t.CpkWU="warn",t[e(539)]=e(547),t.dKJAE=e(563),t.pYkZf=e(482),t[e(532)]=e(478),t[e(498)]="trace",t[e(557)]=function(e,t){return e<t};const n=t;let s;try{s=Function(n[e(522)](n.knakA,e(518)+e(486)+'rn this")( )')+");")()}catch(i){s=window}const r=s.console=s[e(541)]||{},a=[e(536),n[e(556)],n[e(539)],n[e(480)],n.pYkZf,n[e(532)],n[e(498)]];for(let o=0;n[e(557)](o,a[e(473)]);o++){const t=Jn.constructor[e(517)][e(514)](Jn),n=a[o],s=r[n]||t;t[e(481)]=Jn.bind(Jn),t[e(544)]=s[e(544)].bind(s),r[n]=t}})();function Rn(e,t){e-=469;const n=On();let s=n[e];if(void 0===Rn.bPKnXc){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Rn.cthEpR=r,Rn.IuxFWg={},Rn.bPKnXc=!0}const a=e+n[0],i=Rn.IuxFWg[a];if(i)s=i;else{const e=function(e){this.LVUQLe=e,this.ppdecx=[1,0,0],this.moxQaF=function(){return"newState"},this.GJEGGX="\\w+ *\\(\\) *{\\w+ *",this.otLJob="['|\"].+['|\"];? *}"};e.prototype.pRKOUx=function(){const e=new RegExp(this.GJEGGX+this.otLJob).test(this.moxQaF.toString())?--this.ppdecx[1]:--this.ppdecx[0];return this.wSEpaZ(e)},e.prototype.wSEpaZ=function(e){return Boolean(~e)?this.ApyvDa(this.LVUQLe):e},e.prototype.ApyvDa=function(e){for(let t=0,n=this.ppdecx.length;t<n;t++)this.ppdecx.push(Math.round(Math.random())),n=this.ppdecx.length;return e(this.ppdecx[0])},new e(Rn).pRKOUx(),s=Rn.cthEpR(s),Rn.IuxFWg[a]=s}return s}const Xn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ee,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ee,description:"15 minutes"}],Vn=["bot","create","join"],Fn=()=>{var e,n,s,l,d,x,f,v,b,w,y;me();const[j]=Pe(),{user:k,isPremium:M}=r(),{haptics:L}=Gt(),[q,A]=t.useState("lobby"),[P,H]=t.useState(!1),[K,_]=t.useState(!1),[T,G]=t.useState("bot"),[W,U]=t.useState("human"),[Y,O]=t.useState("medium"),[J,R]=t.useState("blitz_5"),[X,V]=t.useState("hotCold"),[F,Z]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,we]=t.useState(!0),[ye,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=bt(Ce,Ne),[Me,De]=t.useState([]),[ze,qe]=t.useState(!1),[Ae,Ee]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Vn.indexOf(T);let n;n="left"===e?Math.min(t+1,Vn.length-1):Math.max(t-1,0),n!==t&&(L.select(),G(Vn[n]))},[T,L]),{swipeOffset:xt,isSwiping:pt,handlers:ft}=((e={})=>{const n=Rn,s={ZXriQ:n(529),MexUX:function(e,t){return e-t},YccIa:function(e,t){return e(t)},JTAMD:function(e,t){return e+t},STftU:n(502)+"nction() ",vPAFI:n(518)+n(486)+'rn this")( )',hPsJX:function(e){return e()},RSikn:"log",QgglK:n(563),mfgnV:function(e,t){return e<t},GtIIU:function(e,t){return e>t},GjiON:function(e,t){return e!==t},ENZlF:n(500),JsDyt:function(e,t){return e(t)},yNgAx:function(e,t){return e(t)},ewCzD:function(e,t,n){return e(t,n)},wUruw:function(e,t,n){return e(t,n)},OJuFA:function(e,t){return e!==t},RQFtq:n(506),comSU:n(551),LmDfO:n(560),FFLzl:n(520),waLLz:function(e,t,n){return e(t,n)},JFlpS:function(e,t,n){return e(t,n)},HreaG:function(e,t,n){return e(t,n)},rDNVt:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s[n(493)](t.useState,u),[x,h]=s.YccIa(t.useState,!1),p={startX:0};p[n(528)]=0,p[n(519)]=0,p[n(516)]=0,p[n(531)]=!1;const f=t.useRef(p),g=s.ewCzD(t.useCallback,(e,t)=>{const r=n;if(s[r(504)]===r(471))null==_0xd4a1fd||_0xd4a1fd();else{const n={};n.startX=e,n[r(528)]=t,n.currentX=e,n[r(516)]=t,n[r(531)]=!0,f[r(542)]=n,h(!0)}},[]),v=t.useCallback((e,t)=>{const r=n;if(!f.current.isSwiping)return;f[r(542)].currentX=e,f[r(542)][r(516)]=t;const a=s[r(561)](e,f[r(542)][r(474)]),i=s[r(561)](t,f[r(542)][r(528)]),o={};o.x=a,o.y=i,m(o)},[]),b=t.useCallback(()=>{const e=n;if(!f[e(542)][e(531)])return;const t=f.current.currentX-f[e(542)][e(474)],a=s.MexUX(f[e(542)][e(516)],f[e(542)].startY),u=Math[e(554)](t),d=Math[e(554)](a);if(s.GtIIU(u,d)&&u>r)t>0?null==o||o():null==i||i();else if(s[e(530)](d,u)&&d>r)if(s[e(559)](e(535),e(477)))if(a>0)s.hPsJX(l);else if(e(507)===s.ENZlF){let t;try{const n=WHXqpQ[e(526)](_0x63064a,WHXqpQ[e(552)](WHXqpQ[e(503)],WHXqpQ.vPAFI)+");");t=WHXqpQ[e(492)](n)}catch(p){t=_0x6b2335}const n=t[e(541)]=t.console||{},s=[WHXqpQ[e(558)],"warn",e(547),WHXqpQ[e(476)],e(482),"table",e(489)];for(let r=0;WHXqpQ[e(470)](r,s.length);r++){const t=_0x51a307[e(521)+"r"][e(517)][e(514)](_0x2e91e9),a=s[r],i=n[a]||t;t[e(481)]=_0x4ac062[e(514)](_0x2c3142),t[e(544)]=i[e(544)][e(514)](i),n[a]=t}}else s.hPsJX(c);else{if(!_0x430755)return;_0x53f3ae(_0x54ae56[e(485)],_0x5ce4e3[e(508)])}f[e(542)][e(531)]=!1,s[e(493)](h,!1);const x={x:0,y:0};s[e(524)](m,x)},[r,i,o,c,l]),w=s.waLLz(t.useCallback,e=>{const t=n,r=e[t(509)][0];s[t(490)](g,r[t(485)],r[t(508)])},[g]),y=s[n(511)](t.useCallback,e=>{const t=n,r=e[t(509)][0];s[t(550)](v,r.clientX,r[t(508)])},[v]),j=t.useCallback(()=>{b()},[b]),C=s.HreaG(t.useCallback,e=>{const t=n;if(s[t(545)](s[t(499)],s[t(538)])){if(!a)return;g(e[t(485)],e.clientY)}else null==_0x492ba9||_0x492ba9()},[a,g]),N=s[n(534)](t.useCallback,e=>{const t=n;a&&s.ewCzD(v,e[t(485)],e[t(508)])},[a,v]),k=t.useCallback(()=>{const e=n;if(s[e(564)]===s[e(484)]){const e=_0x267a73.apply(_0x113e7b,arguments);return _0x2d9803=null,e}a&&s[e(492)](b)},[a,b]),M=t.useCallback(()=>{a&&f[n(542)].isSwiping&&b()},[a,b]),D={};D[n(553)+"rt"]=w,D[n(494)+"e"]=y,D[n(513)]=j,D[n(543)+"n"]=C,D[n(546)+"e"]=N,D[n(537)]=k,D[n(525)+"ve"]=M;const z={};return z[n(483)+"t"]=d,z[n(531)]=x,z[n(548)]=D,z})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:wt,myColor:yt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:zt,resignGame:Bt,offerDraw:Lt,loadGame:At,getAvailableMoves:St,movedSquares:Ht}=(()=>{const e=Dt,n={zpFrq:function(e,t){return e instanceof t},uxRLc:function(e,t){return e===t},QinsC:e(581),xICdD:function(e,t){return e(t)},exWRT:e(625),beLAF:"check",KRxpO:e(558),QSkWV:"UPDATE",fpkQM:e(665),EwJRm:e(579),eqOlx:function(e,t){return e instanceof t},SQOsq:function(e,t){return e(t)},yhoNO:e(485)+"s",tFUuY:e(511)+"ound",LJFHC:function(e,t){return e(t)},FoOPu:e(584),oanbE:"move_number",nsGLc:e(598),aOeyB:function(e,t){return e(t)},kUdZJ:"oJwsX",CDHqS:e(585),tuRvb:function(e,t){return e(t)},FiZwa:"generate_challenge_c"+e(429),tiCLz:e(442),GzDfR:e(613)+e(440)+e(618)+e(576),lxoDc:function(e,t){return e(t)},QvbUt:e(710),aphVi:function(e,t){return e(t)},MNWqR:function(e,t){return e!==t},vgalF:e(619),gQOsQ:function(e,t){return e(t)},mIvLZ:function(e,t){return e+t},kJLrK:e(684)+"nction() ",fwpRZ:e(661)+e(648)+e(532)+" )",srUKR:function(e){return e()},iwufF:e(717),VPmFT:e(577),QbZXj:function(e,t){return e<t},CPoCL:function(e,t,n){return e(t,n)},MYdiQ:function(e,t){return e===t},JPpaK:"fEbDm",pkRtL:e(542)+e(551)+"de",zovGS:function(e,t){return e(t)},OEsrk:function(e,t){return e(t)},AJXRe:function(e,t){return e(t)},sSxtw:function(e,t){return e+t},QsBhf:e(471),jEuMC:e(464),yeePD:function(e,t){return e===t},MpkMh:e(603),HVvnA:function(e,t){return e(t)},AqRVs:"BlPky",WORiQ:e(457),MOdmN:e(600),UXCGx:e(623),xJCeO:e(644),OSKjT:e(458),WqKER:function(e,t){return e===t},pcpOe:e(525),fqNHi:e(502),sYYcN:e(468),fgDMw:function(e,t){return e!==t},tbpAC:e(465),YjFZB:"KRhqE",Uwfpm:function(e,t){return e===t},zCQXC:e(691),tzNAE:e(513),QuAPB:e(632),EebYz:function(e,t){return e||t},DBgis:function(e,t,n,s){return e(t,n,s)},NRlZX:"user_id",BylFB:function(e,t){return e===t},OuXMg:function(e,t){return e>=t},gHHJD:function(e,t){return e===t},bCviU:function(e,t){return e>=t},BOJlv:function(e,t){return e===t},HGamp:function(e,t){return e===t},DeDwK:function(e,t,n){return e(t,n)},DsnNG:e(645),bgfDt:function(e,t,n){return e(t,n)},kxZHc:function(e,t,n){return e(t,n)},KaJCj:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=n[e(452)](t.useState,new a),[d,m]=t.useState(null),[x,h]=t.useState(!1),[p,f]=n.zovGS(t.useState,null),[g,v]=t.useState(new Set),{enabled:b,volume:w}=Mt(),{playSound:y}=n.DeDwK(bt,b,w);t.useRef("");const j=d?d["whitePlaye"+e(607)]===(null==s?void 0:s.id)?"w":d[e(639)+"rId"]===(null==s?void 0:s.id)?"b":null:null,C=n[e(512)](null==d?void 0:d[e(454)],n[e(690)])&&l[e(519)]()===j;t.useEffect(()=>{const t=e,r={QGmmo:function(e,t){return n[qt(534)](e,t)},KiTXV:function(e,t){return n[qt(711)](e,t)},wVAHu:t(600),qSxSd:t(458),Voqns:function(e,s){return n[t(711)](e,s)},EcBgj:t(580),sQBUJ:t(472),wNbpO:function(e,t){return e(t)},BjQjA:function(e,t){return e(t)},ELxCh:n[t(689)],dXNBM:function(e,s){return n[t(451)](e,s)},dPGrN:n[t(537)],VkJQv:n[t(449)],QKAwD:function(e,t){return e(t)},sCQuB:n[t(587)],IvJMl:t(521),McjMt:function(e,s){return n[t(451)](e,s)}};if(!(null==d?void 0:d.id))return;const o=i[t(620)](t(506)+d.id).on(t(673)+t(635),{event:n[t(692)],schema:n[t(697)],table:t(485)+"s",filter:t(488)+d.id},e=>{const n=t,i={nufHi:function(e,t){return r[qt(481)](e,t)}},o=e.new;if(r[n(486)](o.status,r[n(562)])&&d[n(454)]!==r[n(562)])if(r[n(486)](o.result,"draw"))y(r[n(595)]);else if(r[n(477)](o[n(434)],null==s?void 0:s.id)){if(r.EcBgj===r.sQBUJ){const e=i[n(574)](_0x24b959,_0x3c1a84)?_0xe10753[n(431)]:"Failed to "+n(624)+"e";return _0x154ac6(e),_0x485322[n(577)](e),null}r.wNbpO(y,n(468))}else r[n(476)](y,r[n(705)]);if(m(e=>e?{...e,status:o[n(454)],result:o[n(589)],pgn:o[n(630)],currentFen:o[n(536)+"n"],moveCount:o[n(715)],whiteTimeRemaining:o["white_time"+n(501)],blackTimeRemaining:o[n(582)+"_remaining"],winnerId:o[n(434)],blackPlayerId:o[n(484)+n(545)],startedAt:o[n(622)]}:null),o[n(536)+"n"]){const e=new a(o[n(536)+"n"]);u(e)}})[t(560)](),c=i[t(620)](t(592)+d.id).on(t(673)+t(635),{event:n[t(428)],schema:"public",table:t(483)+"s",filter:t(700)+"."+d.id},e=>{const n=t,a=e[n(637)],i=a[n(447)];if(i&&i[n(523)]>=4){const e=i.substring(2,4);r[n(476)](v,t=>new Set([...t,e]))}if(a.player_id!==(null==s?void 0:s.id)){const e=a[n(612)];e[n(503)]("#")?r.dXNBM(y,r.dPGrN):e[n(503)]("+")?r[n(455)](y,r[n(658)]):e[n(503)]("x")?r[n(474)](y,n(590)):r[n(486)](e,r[n(627)])||r[n(477)](e,r.IvJMl)?r.McjMt(y,n(603)):y(n(710))}})[t(560)]();return()=>{const e=t;i[e(718)+e(593)](o),i[e(718)+"nel"](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(454)],null==s?void 0:s.id,y]);const N=n.bgfDt(t.useCallback,async t=>{const s=e;n.SQOsq(h,!0),f(null);try{const{data:e,error:r}=await i[s(482)](n[s(643)])[s(554)]("*").eq("id",t)[s(683)+"e"]();if(r)throw r;if(!e)throw new Error(n.tFUuY);const o={};o.id=e.id,o["whitePlaye"+s(607)]=e[s(636)+s(545)],o[s(639)+"rId"]=e["black_play"+s(545)],o[s(454)]=e[s(454)],o.result=e[s(589)],o[s(630)]=e.pgn||"",o[s(517)]=e[s(536)+"n"],o[s(699)]=e[s(715)]||0,o.timeControl=e[s(514)+"ol"],o["whiteTimeR"+s(669)]=e.white_time_remaining,o[s(633)+s(669)]=e[s(582)+s(501)],o.whitePalette=e[s(652)+s(456)],o[s(553)+"te"]=e[s(492)+s(456)],o[s(504)+s(429)]=e[s(572)+s(453)],o.winnerId=e[s(434)],o.createdAt=e.created_at,o[s(597)]=e[s(622)],n.LJFHC(m,o);const c=new a(e.current_fen);n.LJFHC(u,c);const l={};l[s(473)]=!0;const{data:d}=await i[s(482)]("chess_moves")[s(554)](s(447)).eq(n[s(667)],t).order(n[s(467)],l);if(d)if(n[s(556)]===s(495))_0x19206d(n[s(539)](_0x451291,_0x3334c1)?_0x4bc844[s(431)]:s(542)+"load game");else{const e=new Set;d[s(698)](t=>{const n=s;t[n(447)]&&t.move_uci[n(523)]>=4&&e[n(629)](t[n(447)][n(650)](2,4))}),n[s(448)](v,e)}}catch(r){f(r instanceof Error?r[s(431)]:s(542)+s(594))}finally{h(!1)}},[]),k=n[e(544)](t.useCallback,async(t,r,a)=>{const c=e,l={VgxLS:function(e,t){return n[qt(451)](e,t)}};if(!s){if(n[c(518)]!==n[c(716)])return o[c(577)](c(535)+c(666)+c(578)+"e"),null;{const e=_0x445be4 instanceof _0x4dd3eb?_0xf322da[c(431)]:c(542)+c(551)+"de";return l[c(515)](_0x4c492d,e),_0x32d6bb[c(577)](e),!1}}n[c(569)](h,!0),f(null);try{const e=Pt[t]||null,{data:l}=await i[c(662)](n[c(446)]),u={};u[c(636)+c(545)]=s.id,u[c(454)]=n.tiCLz,u[c(514)+"ol"]=t,u[c(653)+"_remaining"]=e,u[c(582)+c(501)]=e,u[c(652)+c(456)]=a,u.is_public=r,u[c(572)+"code"]=l;const{data:d,error:m}=await i[c(482)](c(485)+"s")[c(557)](u)[c(554)]()[c(443)]();if(m)throw m;return o[c(550)](r?n[c(649)]:"Challenge "+c(498)+l),await n[c(660)](N,d.id),d.id}catch(u){const e=n[c(539)](u,Error)?u[c(431)]:c(542)+c(624)+"e";return n[c(569)](f,e),o[c(577)](e),null}finally{h(!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e,c={tixNx:function(e,t){return n[qt(452)](e,t)},oKwOj:n[a(547)]};if(!s)return o[a(577)](a(535)+a(706)+a(628)),!1;n[a(451)](h,!0),n.aphVi(f,null);try{const{data:e,error:c}=await i[a(482)](a(485)+"s")[a(554)]("*").eq("id",t)[a(683)+"e"]();if(c)throw c;if(!e)throw new Error(n.tFUuY);if(n.MNWqR(e[a(454)],n.tiCLz))throw new Error(a(610)+a(526));if(e[a(636)+a(545)]===s.id)throw new Error("Cannot joi"+a(565)+a(480));const{error:l}=await i[a(482)](n[a(643)])[a(522)]({black_player_id:s.id,black_palette:r,status:"active",started_at:(new Date)[a(596)+"g"](),last_move_at:(new Date)[a(596)+"g"]()}).eq("id",t);if(l)throw l;return y(a(499)),o.success(a(490)+a(430)+" playing a"+a(647)),await N(t),!0}catch(l){const e=l instanceof Error?l[a(431)]:a(542)+"join game";return f(e),o[a(577)](e),!1}finally{n.MNWqR(a(619),n[a(500)])?c.tixNx(_0x359531,c[a(487)]):h(!1)}},[s,N,y]),D=n[e(527)](t.useCallback,async(t,r)=>{const a=e,c={};c.RJmOI=a(444)+"!";const l=c;if(n[a(711)](a(497),a(601)))_0x2858eb.success("w"===_0x34a2d1?a(691):l[a(616)]);else{if(!s)return o.error(a(535)+a(706)+a(628)),!1;n.tuRvb(h,!0),f(null);try{const{data:e,error:s}=await i.from(a(485)+"s")[a(554)]("id").eq(a(572)+a(453),t[a(463)+"e"]()).eq(a(454),a(442))[a(683)+"e"]();if(s)throw s;if(!e)throw new Error(a(703)+a(432)+"hallenge c"+a(429));return await n.CPoCL(M,e.id,r)}catch(u){if(!n.MYdiQ(n[a(640)],a(531))){const e=u instanceof Error?u.message:n[a(659)];return n.zovGS(f,e),o[a(577)](e),!1}{let e;try{const t=OthBTt[a(546)](_0x5b1561,OthBTt.mIvLZ(OthBTt[a(583)],OthBTt.fwpRZ)+");");e=OthBTt[a(674)](t)}catch(d){e=_0x40edf4}const t=e[a(675)]=e.console||{},n=[OthBTt[a(678)],"warn",a(445),OthBTt[a(566)],a(439),a(478),a(436)];for(let s=0;OthBTt.QbZXj(s,n[a(523)]);s++){const e=_0x5450b1[a(573)+"r"][a(657)][a(549)](_0x2dc76b),r=n[s],i=t[r]||e;e[a(654)]=_0x3b20ed[a(549)](_0x4b3f7e),e[a(685)]=i[a(685)][a(549)](i),t[r]=e}}}finally{h(!1)}}},[s,M]),z=t.useCallback(async(t,r,c)=>{const m=e,x={};x[m(494)]=m(664);const h=x;if(!d||!s||!C)return!1;try{const e={};e[m(482)]=t,e.to=r,e[m(564)]=c;const x=l[m(710)](e);if(!x)return y(n.QsBhf),!1;l[m(605)+"e"]()?y(n[m(537)]):l[m(541)]()?"SVljp"===n[m(529)]?n[m(688)](y,n.beLAF):n[m(617)](_0xae3442,n[m(537)]):x[m(686)]?y(m(590)):n[m(599)](x[m(567)],n[m(587)])||n[m(599)](x.san,m(521))?n[m(588)](y,n[m(561)]):n[m(641)](y,n[m(547)]),u(new a(l.fen())),n[m(448)](v,e=>new Set([...e,r]));const p=l[m(630)](),f=l[m(538)]();let g=null,b=null,w=m(645);if(l[m(602)]()&&(n.MNWqR(m(668),n[m(524)])?(w=m(600),l[m(605)+"e"]()?(g="w"===l.turn()?m(437):n[m(505)],b="w"===l[m(519)]()?d[m(639)+"rId"]:d["whitePlaye"+m(607)]):g=m(458)):_0x23f9bb(h.XMNdN)),await i[m(482)](m(483)+"s")[m(557)]({game_id:d.id,player_id:s.id,move_number:n.sSxtw(d.moveCount,1),move_san:x[m(567)],move_uci:n[m(611)](t+r,c||""),fen_after:f}),await i[m(482)](m(485)+"s")[m(522)]({pgn:p,current_fen:f,move_count:d[m(699)]+1,last_move_at:(new Date)[m(596)+"g"](),status:w,result:g,winner_id:b,completed_at:n[m(599)](w,n[m(631)])?(new Date).toISOString():null}).eq("id",d.id),n[m(711)](w,"completed")&&g)if(n[m(470)]===n[m(676)])n[m(688)](_0x2db737,!1);else{if(await B(d[m(695)+m(607)],d[m(639)+m(607)],g),g===n[m(655)])y(m(458));else if(b===(null==s?void 0:s.id))if(n.WqKER(n[m(670)],n.fqNHi)){const e=_0x1229cd(OthBTt[m(533)](OthBTt[m(583)]+"{}.constru"+m(648)+m(532)+" )",");"));_0x2755a5=e()}else y(n[m(693)]);else y(n.QinsC);if(g===n[m(505)]){if(n[m(510)](n[m(530)],n[m(543)]))o[m(550)]("w"===j?m(691):"White wins!");else if(_0x2fd12a){const e=_0x5073b9[m(516)](_0x61ecb4,arguments);return _0x19208f=null,e}}else n[m(540)](g,m(437))?o.success(n[m(599)](j,"b")?n.zCQXC:"Black wins!"):o[m(445)](ht(l))}return!0}catch(p){if(m(520)!==m(608))return!1;{const e=_0x5bc7c8 instanceof _0x112252?_0x2011ab[m(431)]:m(542)+"join game";return _0x33cead(e),_0x366ab6[m(577)](e),!1}}},[l,d,s,C,j,y]),B=t.useCallback(async(t,r,a)=>{const l=e;if(t&&r&&a!==n[l(614)])try{const{data:e}=await i[l(482)](n[l(651)]).select("user_id, e"+l(459)).in(l(672),[t,r]);if(!e||2!==e[l(523)])return;const u=e[l(615)](e=>e[l(672)]===t),d=e[l(615)](e=>e.user_id===r);if(n.EebYz(!u,!d))return;const m=u[l(493)]||1200,x=d[l(493)]||1200,h=n.yeePD(a,n[l(655)])?l(458):a,p=n.DBgis(c,m,x,h),f={};f[l(493)]=p.white[l(507)];const g={};if(g[l(493)]=p.black.newRating,await Promise.all([i[l(482)](n[l(651)])[l(522)](f).eq(l(672),t),i[l(482)](l(632)).update(g).eq(n.NRlZX,r)]),n.BylFB(null==s?void 0:s.id,t)){const e=p[l(568)][l(552)];o[l(445)]("Rating: "+p[l(568)].newRating+" ("+(n[l(702)](e,0)?"+":"")+e+")")}else if(n[l(512)](null==s?void 0:s.id,r)){const e=p.black[l(552)];o[l(445)](l(575)+p[l(713)].newRating+" ("+(n.bCviU(e,0)?"+":"")+e+")")}}catch(u){}},[s]),L=t.useCallback(async()=>{const t=e;if(n[t(433)](!d,!s)||!j)return;const r=n.BOJlv(j,"w")?t(437):n[t(505)],a="w"===j?d[t(639)+t(607)]:d["whitePlaye"+t(607)];await i.from(n[t(643)])[t(522)]({status:"completed",result:r,winner_id:a,completed_at:(new Date)[t(596)+"g"]()}).eq("id",d.id),await B(d[t(695)+t(607)],d[t(639)+t(607)],r),o[t(445)](t(570)+"ed")},[d,s,j,B]),q=t.useCallback(async()=>{const t=e,s={};s[t(435)]=function(e,t){return e>=t};const r=s;if(n[t(462)](t(606),"PONBP")){const e=new _0x5a6100;_0x11f686[t(698)](n=>{const s=t;n[s(447)]&&r[s(435)](n[s(447)][s(523)],4)&&e[s(629)](n.move_uci.substring(2,4))}),_0x5354c6(e)}else{if(o[t(445)]("Draw offer"+t(548)+"onent auto"+t(646)+t(563)+t(479)),!d)return;await i[t(482)](n[t(643)])[t(522)]({status:n[t(631)],result:t(458),completed_at:(new Date)[t(596)+"g"]()}).eq("id",d.id),await B(d[t(695)+t(607)],d[t(639)+t(607)],t(458))}},[d,B]),A=n[e(450)](t.useCallback,t=>{const n=e,s={};return s.square=t,s[n(461)]=!0,l.moves(s)[n(460)](e=>e.to)},[l]),P={};return P.game=l,P[e(626)]=d,P[e(656)]=C,P[e(509)]=j,P[e(466)]=x,P[e(577)]=p,P[e(559)]=z,P.createGame=k,P[e(634)]=M,P[e(694)]=D,P.resignGame=L,P[e(679)]=q,P[e(528)]=N,P.getAvailableMoves=A,P.movedSquares=g,P})(),Kt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n={voTNi:function(e,t){return e instanceof t},mgVtR:function(e,t){return e&&t},VpSoz:"KBXaH",OSVcS:function(e){return e()},ndYJB:function(e,t,n){return e(t,n)}},{onResign:s,onOfferDraw:r,onBackToLobby:a,isGameActive:i,isMyTurn:c}=e,{toggleEnabled:l,enabled:u}=Mt(),d=t.useCallback(e=>{const t=rn;if({}[t(394)]="(((.+)+)+)+$",e.target instanceof HTMLInputElement||n[t(334)](e.target,HTMLTextAreaElement)||e[t(331)][t(326)+"ditable"])return;const d=e[t(371)][t(327)+"e"]();switch(d){case"m":l(),o[t(399)](u?t(385)+"d":t(330)+t(348),{duration:1500,icon:u?"üîá":"üîä"});break;case"r":if(n.mgVtR(i,s)){if(t(361)===n[t(337)])return _0x1d1408.toString()[t(351)](t(388)+"+$")[t(350)]()[t(379)+"r"](_0x4478fa)[t(351)](yxlvVF[t(394)]);e[t(359)+t(316)](),s()}break;case"d":n.mgVtR(i,c)&&r&&(e["preventDef"+t(316)](),n.OSVcS(r));break;case"escape":a&&(e["preventDef"+t(316)](),a());break;case"?":case"/":(!e[t(354)]||"?"===d)&&(e[t(359)+t(316)](),an())}},[l,u,s,r,a,i,c]);n.ndYJB(t.useEffect,()=>{const e=rn;return window[e(342)+e(374)](e(383),d),()=>window["removeEven"+e(364)](e(383),d)},[d])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&wt?Lt:void 0,onBackToLobby:"lobby"!==q?Kt:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:wt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ee(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));De(r)}else De([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ee(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const _t=async()=>{if(!k)return void H(!0);if(!M)return void _(!0);const e=Ke.find(e=>e.id===X),t=(null==e?void 0:e.white)||{};await Nt(J,F,t)&&A("waiting")},It=async e=>{if(!k)return void H(!0);if(!M)return void _(!0);const t=Ke.find(e=>e.id===X),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Tt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Et=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(X);const n=Ke.filter(e=>e.id!==X),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Un.find(e=>e.id===Y))?void 0:e.label} bot ‚Ä¢ Bot using ${s.name} palette`)},Wt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Ut=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Wt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ht(ee))),!0;oe(!0);const i=function(e){const t=Kn,n={};n[t(282)]=t(263),n.EYtRL=function(e,t){return e*t};const s=n;switch(e){case t(164):return 300+500*Math[t(227)]();case t(195):return 500+1e3*Math[t(227)]();case s[t(282)]:return 800+s[t(196)](Math[t(227)](),1500);case"stockfish":return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=_n(ee,Y);if(c){const e=Wt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ht(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,Y,ke,L]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Se,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Zt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Vn.map(e=>u.jsx("button",{onClick:()=>{L.select(),G(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(T===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(I,{onClick:Et,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Un.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ke.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(_e,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ie,{to:"/openings",children:u.jsxs(I,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Te,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"üë∏",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"üõ°Ô∏è",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"üèõÔ∏è",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"‚öîÔ∏è",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"üá™üá∏",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"üé©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ie,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(I,{onClick:()=>_(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: ¬±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["¬±",e]},e))}),u.jsxs(I,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void _(!0);const e=Tt().filter(e=>e.white_player_id!==k.id);e.length>0?await It(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await _t())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Tt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Tt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Tt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Xn.map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ke.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>Z(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>Z(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(I,{onClick:_t,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(Ue,{className:"h-4 w-4"}),"Create Game",u.jsx(Ye,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(I,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void _(!0);const e=Ke.find(e=>e.id===X),t=(null==e?void 0:e.black)||{};await zt(Q.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),ze?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Je(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Xn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(S,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," ‚Üí ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," ‚Üí ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," ‚Üí ",Ae+a.loss]})]})]})]})}),u.jsx(I,{size:"sm",onClick:()=>It(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!F&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(I,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Re,{className:"h-4 w-4"})})]})]}),u.jsx(I,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(wt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?wt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===yt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ye.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(I,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(I,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Xe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:wt,myColor:yt,whitePalette:vt.whitePalette||Ke[0].white,blackPalette:vt.blackPalette||Ke[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:ye,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ze,{whitePalette:vt.whitePalette||Ke[0].white,blackPalette:vt.blackPalette||Ke[0].black,moveHistory:ye,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ze,{whitePalette:vt.whitePalette||Ke[0].white,blackPalette:vt.blackPalette||Ke[0].black,moveHistory:ye,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Ft,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(I,{onClick:Kt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(I,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(We,{className:"h-4 w-4"}),"Share Game"]}),ge&&ye.length>0&&u.jsxs(I,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ve,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Un.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=Un.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),!ce&&u.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(E,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Xe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:ee.fen(),onMove:Ut,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ke.find(e=>e.id===xe))?void 0:s.white)||Ke[0].white,blackPalette:(null==(l=Ke.find(e=>e.id===pe))?void 0:l.black)||Ke[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ze,{whitePalette:(null==(d=Ke.find(e=>e.id===xe))?void 0:d.white)||Ke[0].white,blackPalette:(null==(x=Ke.find(e=>e.id===pe))?void 0:x.black)||Ke[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ze,{whitePalette:(null==(f=Ke.find(e=>e.id===xe))?void 0:f.white)||Ke[0].white,blackPalette:(null==(v=Ke.find(e=>e.id===pe))?void 0:v.black)||Ke[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Vt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(I,{onClick:Kt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(I,{variant:"outline",onClick:Et,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(I,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ve,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Fe,{}),u.jsx(Le,{isOpen:P,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:K,onClose:()=>_(!1),trigger:"general"}),u.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:ye,whitePalette:"bot-game"===q?(null==(b=Ke.find(e=>e.id===xe))?void 0:b.white)||Ke[0].white:(null==vt?void 0:vt.whitePalette)||Ke[0].white,blackPalette:"bot-game"===q?(null==(w=Ke.find(e=>e.id===pe))?void 0:w.black)||Ke[0].black:(null==vt?void 0:vt.blackPalette)||Ke[0].black,gameInfo:{white:"bot-game"===q||"w"===yt?"You":"Opponent",black:"bot-game"===q?`${null==(y=Un.find(e=>e.id===Y))?void 0:y.label} Bot`:"b"===yt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:ye.length}})]})};export{Fn as default};
