const n="/**\n * ELO Rating Calculator\n * Uses standard FIDE K-factor logic\n */\n\n// K-factor determines how much ratings can change per game\n// Higher K = more volatile ratings (good for new players)\n// Lower K = more stable ratings (good for established players)\nconst getKFactor = (rating: number, gamesPlayed: number): number => {\n  // New players get higher K-factor for faster adjustment\n  if (gamesPlayed < 30) return 40;\n  // Under 2400 rating\n  if (rating < 2400) return 20;\n  // Master level players\n  return 10;\n};\n\n/**\n * Calculate expected score based on ratings\n * @param playerRating - The player's current rating\n * @param opponentRating - The opponent's current rating\n * @returns Expected score between 0 and 1\n */\nexport const getExpectedScore = (playerRating: number, opponentRating: number): number => {\n  return 1 / (1 + Math.pow(10, (opponentRating - playerRating) / 400));\n};\n\n/**\n * Calculate new ELO rating after a game\n * @param playerRating - Current player rating\n * @param opponentRating - Opponent's rating\n * @param actualScore - 1 for win, 0.5 for draw, 0 for loss\n * @param gamesPlayed - Number of games the player has completed (for K-factor)\n * @returns New rating (rounded to nearest integer)\n */\nexport const calculateNewRating = (\n  playerRating: number,\n  opponentRating: number,\n  actualScore: 0 | 0.5 | 1,\n  gamesPlayed: number = 30\n): number => {\n  const expectedScore = getExpectedScore(playerRating, opponentRating);\n  const kFactor = getKFactor(playerRating, gamesPlayed);\n  \n  const newRating = playerRating + kFactor * (actualScore - expectedScore);\n  \n  // Ensure rating doesn't go below 100\n  return Math.max(100, Math.round(newRating));\n};\n\n/**\n * Calculate rating changes for both players after a game\n * @param whiteRating - White player's current rating\n * @param blackRating - Black player's current rating\n * @param result - 'white_wins' | 'black_wins' | 'draw'\n * @param whiteGamesPlayed - White's total games (for K-factor)\n * @param blackGamesPlayed - Black's total games (for K-factor)\n * @returns Object with new ratings and changes for both players\n */\nexport const calculateGameRatingChanges = (\n  whiteRating: number,\n  blackRating: number,\n  result: 'white_wins' | 'black_wins' | 'draw',\n  whiteGamesPlayed: number = 30,\n  blackGamesPlayed: number = 30\n): {\n  white: { newRating: number; change: number };\n  black: { newRating: number; change: number };\n} => {\n  let whiteScore: 0 | 0.5 | 1;\n  let blackScore: 0 | 0.5 | 1;\n  \n  switch (result) {\n    case 'white_wins':\n      whiteScore = 1;\n      blackScore = 0;\n      break;\n    case 'black_wins':\n      whiteScore = 0;\n      blackScore = 1;\n      break;\n    case 'draw':\n      whiteScore = 0.5;\n      blackScore = 0.5;\n      break;\n  }\n  \n  const newWhiteRating = calculateNewRating(whiteRating, blackRating, whiteScore, whiteGamesPlayed);\n  const newBlackRating = calculateNewRating(blackRating, whiteRating, blackScore, blackGamesPlayed);\n  \n  return {\n    white: {\n      newRating: newWhiteRating,\n      change: newWhiteRating - whiteRating,\n    },\n    black: {\n      newRating: newBlackRating,\n      change: newBlackRating - blackRating,\n    },\n  };\n};\n\n/**\n * Get rating tier/title based on ELO rating\n */\nexport const getRatingTier = (rating: number): { name: string; color: string } => {\n  if (rating >= 2700) return { name: 'Super GM', color: 'from-yellow-400 to-amber-500' };\n  if (rating >= 2500) return { name: 'Grandmaster', color: 'from-purple-500 to-violet-600' };\n  if (rating >= 2400) return { name: 'Int. Master', color: 'from-blue-500 to-cyan-500' };\n  if (rating >= 2200) return { name: 'FIDE Master', color: 'from-teal-500 to-emerald-500' };\n  if (rating >= 2000) return { name: 'Expert', color: 'from-green-500 to-lime-500' };\n  if (rating >= 1800) return { name: 'Class A', color: 'from-yellow-600 to-orange-500' };\n  if (rating >= 1600) return { name: 'Class B', color: 'from-orange-500 to-red-500' };\n  if (rating >= 1400) return { name: 'Class C', color: 'from-rose-500 to-pink-500' };\n  if (rating >= 1200) return { name: 'Class D', color: 'from-gray-400 to-slate-500' };\n  return { name: 'Beginner', color: 'from-gray-300 to-gray-400' };\n};\n\n/**\n * Preview potential ELO changes before accepting a match\n * @param myRating - Your current rating\n * @param opponentRating - Opponent's current rating\n * @param myGamesPlayed - Your total games played (for K-factor)\n * @returns Object with potential changes for win, draw, and loss\n */\nexport const previewEloChanges = (\n  myRating: number,\n  opponentRating: number,\n  myGamesPlayed: number = 30\n): {\n  win: number;\n  draw: number;\n  loss: number;\n} => {\n  const winChange = calculateNewRating(myRating, opponentRating, 1, myGamesPlayed) - myRating;\n  const drawChange = calculateNewRating(myRating, opponentRating, 0.5, myGamesPlayed) - myRating;\n  const lossChange = calculateNewRating(myRating, opponentRating, 0, myGamesPlayed) - myRating;\n  \n  return {\n    win: winChange,\n    draw: drawChange,\n    loss: lossChange,\n  };\n};\n";export{n as default};
