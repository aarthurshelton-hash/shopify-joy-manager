const e="import React, { useEffect, useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { whitePieceColors, blackPieceColors, PieceType } from '@/lib/chess/pieceColors';\nimport { useEnPensentPatterns } from '@/hooks/useEnPensentPatterns';\nimport { TemporalSignature, TemporalFlow, QuadrantProfile } from '@/lib/pensent-core/types/core';\n\ninterface ChessLoadingAnimationProps {\n  onComplete?: () => void;\n  totalMoves?: number;\n  signature?: TemporalSignature | null;\n}\n\nconst ANIMATION_SEQUENCE: Array<{ square: string; piece: PieceType; isWhite: boolean }> = [\n  { square: 'e2', piece: 'p', isWhite: true },\n  { square: 'e4', piece: 'p', isWhite: true },\n  { square: 'e7', piece: 'p', isWhite: false },\n  { square: 'e5', piece: 'p', isWhite: false },\n  { square: 'g1', piece: 'n', isWhite: true },\n  { square: 'f3', piece: 'n', isWhite: true },\n  { square: 'b8', piece: 'n', isWhite: false },\n  { square: 'c6', piece: 'n', isWhite: false },\n  { square: 'f1', piece: 'b', isWhite: true },\n  { square: 'b5', piece: 'b', isWhite: true },\n  { square: 'a7', piece: 'p', isWhite: false },\n  { square: 'a6', piece: 'p', isWhite: false },\n  { square: 'b5', piece: 'b', isWhite: true },\n  { square: 'a4', piece: 'b', isWhite: true },\n  { square: 'g8', piece: 'n', isWhite: false },\n  { square: 'f6', piece: 'n', isWhite: false },\n  { square: 'e1', piece: 'k', isWhite: true },\n  { square: 'g1', piece: 'k', isWhite: true },\n  { square: 'f1', piece: 'r', isWhite: true },\n  { square: 'd8', piece: 'q', isWhite: false },\n  { square: 'e7', piece: 'q', isWhite: false },\n  { square: 'd2', piece: 'p', isWhite: true },\n  { square: 'd4', piece: 'p', isWhite: true },\n  { square: 'c8', piece: 'b', isWhite: false },\n  { square: 'g4', piece: 'b', isWhite: false },\n  { square: 'c1', piece: 'b', isWhite: true },\n  { square: 'e3', piece: 'b', isWhite: true },\n  { square: 'h7', piece: 'p', isWhite: false },\n  { square: 'h6', piece: 'p', isWhite: false },\n  { square: 'd1', piece: 'q', isWhite: true },\n  { square: 'd3', piece: 'q', isWhite: true },\n];\n\nconst ChessLoadingAnimation: React.FC<ChessLoadingAnimationProps> = ({ \n  onComplete,\n  totalMoves = ANIMATION_SEQUENCE.length,\n  signature\n}) => {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [visitedSquares, setVisitedSquares] = useState<Map<string, Array<{ color: string; piece: PieceType }>>>(new Map());\n  const [isComplete, setIsComplete] = useState(false);\n  \n  const pattern = useEnPensentPatterns(signature);\n  \n  // Calculate temporal flow phase based on progress\n  const temporalPhase = useMemo(() => {\n    const progress = currentStep / ANIMATION_SEQUENCE.length;\n    if (progress < 0.33) return 'opening';\n    if (progress < 0.66) return 'middle';\n    return 'ending';\n  }, [currentStep]);\n\n  useEffect(() => {\n    const baseSpeed = 80;\n    const intensityVal = pattern.intensity ?? 0.5;\n    const speedMultiplier = intensityVal > 0.7 ? 0.7 : intensityVal < 0.3 ? 1.3 : 1;\n    \n    const interval = setInterval(() => {\n      if (currentStep < ANIMATION_SEQUENCE.length) {\n        const move = ANIMATION_SEQUENCE[currentStep];\n        const { piece, isWhite } = move;\n        const color = isWhite ? whitePieceColors[piece] : blackPieceColors[piece];\n        \n        setVisitedSquares(prev => {\n          const newMap = new Map(prev);\n          const existing = newMap.get(move.square) || [];\n          newMap.set(move.square, [...existing, { color, piece }]);\n          return newMap;\n        });\n        \n        setCurrentStep(prev => prev + 1);\n      } else {\n        setIsComplete(true);\n        clearInterval(interval);\n        setTimeout(() => onComplete?.(), 500);\n      }\n    }, baseSpeed * speedMultiplier);\n\n    return () => clearInterval(interval);\n  }, [currentStep, onComplete, pattern.intensity]);\n\n  const renderBoard = () => {\n    const squares = [];\n    for (let rank = 7; rank >= 0; rank--) {\n      for (let file = 0; file < 8; file++) {\n        const squareName = String.fromCharCode(97 + file) + (rank + 1);\n        const visits = visitedSquares.get(squareName) || [];\n        const isLight = (file + rank) % 2 === 1;\n        \n        // Quadrant-based intensity from En Pensent\n        const quadrantKey = file < 4 ? (rank < 4 ? 'q3' : 'q1') : (rank < 4 ? 'q4' : 'q2') as 'q1' | 'q2' | 'q3' | 'q4';\n        const quadrantWeight: number = pattern.quadrantWeights[quadrantKey] ?? 0.25;\n        \n        squares.push(\n          <motion.div\n            key={squareName}\n            className=\"relative aspect-square\"\n            style={{\n              backgroundColor: isLight ? '#FAFAF9' : '#2C2C2C',\n            }}\n            animate={{\n              boxShadow: visits.length > 0 && signature \n                ? `inset 0 0 ${quadrantWeight * 20}px ${pattern.dominantColor}30`\n                : 'none'\n            }}\n          >\n            {visits.map((visit, index) => (\n              <motion.div\n                key={`${squareName}-${index}`}\n                className=\"absolute inset-0\"\n                initial={{ scale: 0, opacity: 0 }}\n                animate={{ scale: 1 - index * 0.15, opacity: 0.85 }}\n                transition={{ duration: 0.2, ease: 'easeOut' }}\n                style={{\n                  backgroundColor: visit.color,\n                  zIndex: index,\n                }}\n              />\n            ))}\n          </motion.div>\n        );\n      }\n    }\n    return squares;\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center space-y-8 py-12 animate-fade-in\">\n      <div className=\"relative\">\n        <motion.div \n          className=\"grid grid-cols-8 gap-0 shadow-2xl rounded-sm overflow-hidden\"\n          style={{ width: 280, height: 280 }}\n          animate={{\n            boxShadow: signature \n              ? `0 0 ${30 * pattern.intensity}px ${pattern.dominantColor}40`\n              : '0 0 30px rgba(180, 140, 100, 0.3)'\n          }}\n        >\n          {renderBoard()}\n        </motion.div>\n        \n        {/* En Pensent temporal flow indicator */}\n        {signature && (\n          <motion.div\n            className=\"absolute -bottom-6 left-0 right-0 h-1 rounded-full overflow-hidden\"\n            style={{ backgroundColor: `${pattern.secondaryColor}30` }}\n          >\n            <motion.div\n              className=\"h-full\"\n              style={{ backgroundColor: pattern.dominantColor }}\n              animate={{ width: `${(currentStep / ANIMATION_SEQUENCE.length) * 100}%` }}\n            />\n          </motion.div>\n        )}\n      </div>\n\n      <div className=\"text-center space-y-3\">\n        <div className=\"flex items-center justify-center gap-2\">\n          <motion.div \n            className=\"w-2 h-2 rounded-full\"\n            style={{ backgroundColor: pattern.dominantColor }}\n            animate={{ scale: [1, 1.2, 1], opacity: [1, 0.7, 1] }}\n            transition={{ duration: 1, repeat: Infinity }}\n          />\n          <span className=\"text-sm font-medium text-muted-foreground\">\n            {isComplete ? 'Finalizing...' : `Replaying ${temporalPhase} phase`}\n          </span>\n          <motion.div \n            className=\"w-2 h-2 rounded-full\"\n            style={{ backgroundColor: pattern.secondaryColor }}\n            animate={{ scale: [1, 1.2, 1], opacity: [1, 0.7, 1] }}\n            transition={{ duration: 1, repeat: Infinity, delay: 0.3 }}\n          />\n        </div>\n        \n        <div className=\"w-48 h-1 bg-muted rounded-full overflow-hidden mx-auto\">\n          <motion.div\n            className=\"h-full transition-all duration-100 ease-out\"\n            style={{ \n              width: `${(currentStep / ANIMATION_SEQUENCE.length) * 100}%`,\n              background: `linear-gradient(90deg, ${pattern.dominantColor}, ${pattern.secondaryColor})`\n            }}\n          />\n        </div>\n        \n        <p className=\"text-xs text-muted-foreground font-serif\">\n          Move {Math.min(currentStep, ANIMATION_SEQUENCE.length)} of {totalMoves}\n          {signature && <span className=\"ml-2 opacity-50\">â€¢ {pattern.archetype}</span>}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default ChessLoadingAnimation;\n";export{e as default};
