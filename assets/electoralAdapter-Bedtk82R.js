const n="/**\n * Electoral Adapter - Democratic Processes & Voting Patterns\n * \n * Polling dynamics, voter turnout, swing states, electoral college mathematics,\n * campaign momentum, and democratic legitimacy patterns.\n * \n * For Alec Arthur Shelton - The Artist\n * Democracy is the heartbeat of collective will.\n */\n\nimport type { DomainAdapter, UniversalSignal, DomainSignature } from '../types';\n\n// ELECTORAL SYSTEMS\nconst ELECTORAL_SYSTEMS = {\n  firstPastThePost: {\n    description: 'Single winner, plurality voting',\n    effects: ['Two party dominance', 'Strategic voting', 'Wasted votes'],\n    examples: ['US House', 'UK Parliament'],\n    marketAnalogy: 'Winner-take-all markets'\n  },\n  \n  proportional: {\n    description: 'Seats allocated by vote share',\n    effects: ['Multi-party systems', 'Coalition governments', 'Policy compromise'],\n    examples: ['Germany', 'Netherlands', 'Israel'],\n    marketAnalogy: 'Diversified portfolios'\n  },\n  \n  rankedChoice: {\n    description: 'Instant runoff, preference ranking',\n    effects: ['Reduced spoiler effect', 'Majority winners', 'Complex ballots'],\n    examples: ['Australia', 'Maine (US)', 'NYC'],\n    marketAnalogy: 'Preference-based allocation'\n  },\n  \n  electoralCollege: {\n    description: 'Indirect election via state delegates',\n    effects: ['Swing state focus', 'Popular vote mismatch', 'Small state advantage'],\n    examples: ['US Presidential'],\n    marketAnalogy: 'Weighted voting rights'\n  }\n};\n\n// POLLING DYNAMICS\nconst POLLING_PATTERNS = {\n  // Types of polls\n  trackingPoll: {\n    frequency: 'Daily rolling average',\n    volatility: 'High',\n    use: 'Momentum detection'\n  },\n  \n  likelyVoter: {\n    screen: 'Filters by turnout probability',\n    accuracy: 'Higher near election',\n    bias: 'May miss surge voters'\n  },\n  \n  exitPoll: {\n    timing: 'Election day',\n    value: 'Demographic breakdown',\n    risk: 'Early release affects turnout'\n  },\n  \n  // Polling errors\n  shyToryFactor: {\n    description: 'Social desirability bias',\n    effect: 'Underestimate controversial candidates',\n    examples: ['2016 US', '2019 UK']\n  },\n  \n  marginOfError: {\n    formula: '±1.96 × sqrt(p(1-p)/n)',\n    typical: '±3% for 1000 sample',\n    compound: 'Error grows for subgroups'\n  }\n};\n\n// CAMPAIGN DYNAMICS\nconst CAMPAIGN_CYCLES = {\n  primary: {\n    phase: 'Party nomination',\n    dynamics: 'Base mobilization, ideological positioning',\n    volatility: 'High, multi-candidate'\n  },\n  \n  convention: {\n    phase: 'Post-primary bounce',\n    dynamics: 'Unity display, VP selection',\n    effect: 'Temporary 5-10 point boost'\n  },\n  \n  general: {\n    phase: 'Head-to-head campaign',\n    dynamics: 'Persuasion vs mobilization',\n    critical: 'Undecided voters, turnout'\n  },\n  \n  debate: {\n    phase: 'Direct confrontation',\n    dynamics: 'Expectations game, gaffes',\n    lastingImpact: 'Usually minimal'\n  },\n  \n  finalPush: {\n    phase: 'Get out the vote',\n    dynamics: 'Ground game, advertising saturation',\n    effect: 'Turnout determines outcome'\n  }\n};\n\n// SWING STATE MATHEMATICS\nconst SWING_ANALYSIS = {\n  tippingPoint: {\n    definition: 'State that puts winner over 270',\n    calculation: 'Sort states by margin, find median',\n    importance: 'Campaign resource allocation'\n  },\n  \n  battleground: {\n    criteria: 'Polling within margin of error',\n    typical: '5-10 states per cycle',\n    focus: '90%+ of campaign spending'\n  },\n  \n  lean: {\n    safe: '>10 point advantage',\n    likely: '5-10 points',\n    lean: '3-5 points',\n    tossup: '<3 points'\n  }\n};\n\n// VOTER TURNOUT\nconst TURNOUT_DYNAMICS = {\n  presidential: {\n    usAverage: '60% of VAP, 70% of VEP',\n    drivers: ['Competitiveness', 'Education', 'Age', 'Race']\n  },\n  \n  midterm: {\n    pattern: 'Presidential - 15-20 points',\n    electorate: 'Older, whiter, more educated'\n  },\n  \n  special: {\n    pattern: 'Lower still',\n    volatility: 'Extreme, unpredictable'\n  },\n  \n  registration: {\n    automatic: 'Increases turnout 3-5%',\n    sameDay: 'Increases turnout 5-7%',\n    strictID: 'Decreases turnout 1-3%'\n  }\n};\n\ninterface ElectoralEvent {\n  timestamp: number;\n  pollMargin: number; // Positive = leading, negative = trailing\n  pollVolume: number; // Number of polls in field\n  voterEnthusiasm: number; // 0-10\n  turnoutModel: number; // Expected turnout %\n  undecided: number; // % undecided\n  swingStateStatus: number; // 0-1 competitiveness\n  campaignSpending: number; // Relative to opponent\n  mediaCoverage: number; // Sentiment-weighted volume\n  debatePerformance: number; // 0-10\n}\n\nclass ElectoralAdapter implements DomainAdapter<ElectoralEvent> {\n  domain = 'soul' as const;\n  name = 'Electoral Dynamics & Democratic Processes';\n  isActive = false;\n  lastUpdate = 0;\n  \n  private signalBuffer: UniversalSignal[] = [];\n  private readonly BUFFER_SIZE = 1000;\n  \n  async initialize(): Promise<void> {\n    this.isActive = true;\n    this.lastUpdate = Date.now();\n    console.log('[ElectoralAdapter] Initialized - Democracy pulse active');\n  }\n  \n  processRawData(event: ElectoralEvent): UniversalSignal {\n    const { timestamp, pollMargin, voterEnthusiasm, turnoutModel, undecided, swingStateStatus } = event;\n    \n    // Frequency encodes polling velocity\n    const frequency = Math.min(event.pollVolume / 10, 1);\n    \n    // Intensity = electoral volatility\n    const intensity = (1 - undecided / 50) * swingStateStatus * Math.abs(pollMargin) / 10;\n    \n    // Phase encodes enthusiasm vs turnout alignment\n    const phase = (voterEnthusiasm / 10 + turnoutModel / 100) / 2 * Math.PI;\n    \n    const harmonics = [\n      Math.abs(pollMargin) / 10,\n      voterEnthusiasm / 10,\n      turnoutModel / 100,\n      1 - undecided / 50,\n      swingStateStatus,\n      event.debatePerformance / 10\n    ];\n    \n    const signal: UniversalSignal = {\n      domain: 'soul',\n      timestamp,\n      intensity,\n      frequency,\n      phase,\n      harmonics,\n      rawData: [pollMargin, voterEnthusiasm, turnoutModel, undecided, swingStateStatus]\n    };\n    \n    this.signalBuffer.push(signal);\n    if (this.signalBuffer.length > this.BUFFER_SIZE) {\n      this.signalBuffer.shift();\n    }\n    \n    this.lastUpdate = timestamp;\n    return signal;\n  }\n  \n  extractSignature(signals: UniversalSignal[]): DomainSignature {\n    if (signals.length === 0) {\n      return this.getDefaultSignature();\n    }\n    \n    const recent = signals.slice(-50);\n    \n    const avgMargin = recent.reduce((sum, s) => sum + s.rawData[0], 0) / recent.length;\n    const avgEnthusiasm = recent.reduce((sum, s) => sum + s.rawData[1], 0) / recent.length;\n    const avgTurnout = recent.reduce((sum, s) => sum + s.rawData[2], 0) / recent.length;\n    const avgUndecided = recent.reduce((sum, s) => sum + s.rawData[3], 0) / recent.length;\n    const avgSwing = recent.reduce((sum, s) => sum + s.rawData[4], 0) / recent.length;\n    \n    const quadrantProfile = {\n      aggressive: avgMargin > 5 ? 0.7 : 0.3,\n      defensive: avgUndecided > 15 ? 0.7 : 0.2,\n      tactical: avgSwing > 0.7 ? 0.8 : 0.3,\n      strategic: avgTurnout > 65 ? 0.6 : 0.4\n    };\n    \n    const temporalFlow = {\n      early: avgUndecided > 20 ? 0.8 : 0.2,\n      mid: avgUndecided > 10 && avgUndecided <= 20 ? 0.7 : 0.2,\n      late: avgUndecided <= 10 ? 0.8 : 0.2\n    };\n    \n    return {\n      domain: 'soul',\n      quadrantProfile,\n      temporalFlow,\n      intensity: Math.abs(avgMargin) / 10,\n      momentum: avgMargin > 0 ? 1 : -1,\n      volatility: avgSwing,\n      dominantFrequency: 1 - avgUndecided / 50,\n      harmonicResonance: avgEnthusiasm / 10,\n      phaseAlignment: avgTurnout / 100,\n      extractedAt: Date.now()\n    };\n  }\n  \n  private getDefaultSignature(): DomainSignature {\n    return {\n      domain: 'soul',\n      quadrantProfile: { aggressive: 0.25, defensive: 0.25, tactical: 0.25, strategic: 0.25 },\n      temporalFlow: { early: 0.5, mid: 0.3, late: 0.2 },\n      intensity: 0.5,\n      momentum: 0,\n      volatility: 0.5,\n      dominantFrequency: 0.5,\n      harmonicResonance: 0.5,\n      phaseAlignment: 0.5,\n      extractedAt: Date.now()\n    };\n  }\n  \n  // Calculate win probability from polling\n  calculateWinProbability(pollMargin: number, undecided: number, daysToElection: number): number {\n    // Simplified model - margin divided by uncertainty\n    const uncertainty = 3 + undecided * 0.1 + daysToElection * 0.05;\n    const zScore = pollMargin / uncertainty;\n    // Convert to probability using normal CDF approximation\n    return 1 / (1 + Math.exp(-0.64 * zScore));\n  }\n  \n  // Estimate electoral votes from state polls\n  projectElectoralVotes(stateMargins: Record<string, number>): { dem: number; gop: number } {\n    const evMap: Record<string, number> = {\n      CA: 54, TX: 40, FL: 30, NY: 28, PA: 19, // ... full map would be here\n    };\n    \n    let dem = 0;\n    let gop = 0;\n    \n    for (const [state, margin] of Object.entries(stateMargins)) {\n      const ev = evMap[state] || 0;\n      if (margin > 0) dem += ev;\n      else gop += ev;\n    }\n    \n    return { dem, gop };\n  }\n}\n\nexport const electoralAdapter = new ElectoralAdapter();\nexport { ELECTORAL_SYSTEMS, POLLING_PATTERNS, CAMPAIGN_CYCLES, SWING_ANALYSIS, TURNOUT_DYNAMICS };\nexport type { ElectoralEvent };\n";export{n as default};
