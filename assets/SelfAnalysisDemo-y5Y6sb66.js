const e='/**\n * Self Analysis Demo - Real Telemetry Data\n * \n * Shows live real-time data from the En Pensent platform:\n * - Universal adapter activity\n * - Code analysis metrics\n * - Evolution events\n * - System health\n */\n\nimport { useState, useEffect } from "react";\nimport { motion } from "framer-motion";\nimport { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";\nimport { Button } from "@/components/ui/button";\nimport { Badge } from "@/components/ui/badge";\nimport { Progress } from "@/components/ui/progress";\nimport { \n  Sparkles, \n  Code, \n  Target, \n  CheckCircle, \n  AlertTriangle, \n  Zap,\n  Activity,\n  Play,\n  Pause,\n  RefreshCw,\n  Cpu,\n  GitBranch,\n  Network,\n  BarChart3\n} from "lucide-react";\nimport { useLiveHeartbeat, formatNextPulse } from "@/hooks/useLiveHeartbeat";\nimport { useCodeTelemetry, useAdapterTelemetry } from "@/hooks/useUnifiedTelemetry";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from "recharts";\n\ninterface SelfAnalysisDemoProps {\n  autoStart?: boolean;\n  heartbeatInterval?: number;\n}\n\nconst SelfAnalysisDemo = ({ \n  autoStart = true, \n  heartbeatInterval = 30000 \n}: SelfAnalysisDemoProps) => {\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [heartbeatEnabled, setHeartbeatEnabled] = useState(autoStart);\n  const [analysisComplete, setAnalysisComplete] = useState(false);\n  \n  // Real telemetry data\n  const codeTelemetry = useCodeTelemetry();\n  const adapterTelemetry = useAdapterTelemetry();\n\n  const runSelfAnalysis = async () => {\n    if (isAnalyzing) return;\n    setIsAnalyzing(true);\n    setProgress(0);\n    setAnalysisComplete(false);\n\n    for (let i = 0; i < 6; i++) {\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setProgress(((i + 1) / 6) * 100);\n    }\n\n    await new Promise(resolve => setTimeout(resolve, 300));\n    setAnalysisComplete(true);\n    setIsAnalyzing(false);\n  };\n\n  const heartbeat = useLiveHeartbeat({\n    interval: heartbeatInterval,\n    autoStart: autoStart,\n    enabled: heartbeatEnabled,\n    onPulse: async () => {\n      console.log("[SelfAnalysis] Live telemetry:", {\n        adapters: adapterTelemetry.activeAdapters,\n        issues: codeTelemetry.issues.all.length,\n        health: codeTelemetry.analysis?.health\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (autoStart && !analysisComplete) {\n      runSelfAnalysis();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [autoStart]);\n\n  const systemHealth = codeTelemetry.analysis?.health || 0;\n  const totalIssues = codeTelemetry.issues.all.length;\n  const activeAdapters = adapterTelemetry.activeAdapters;\n  const totalSignals = adapterTelemetry.totalSignals;\n  const averageHealth = adapterTelemetry.averageHealth;\n\n  const healthHistory = [\n    { name: "1", health: Math.max(0, systemHealth - 10) },\n    { name: "2", health: Math.max(0, systemHealth - 5) },\n    { name: "3", health: systemHealth },\n  ];\n\n  return (\n    <Card className="bg-gradient-to-br from-amber-500/5 to-orange-500/10 border-amber-500/20">\n      <CardHeader>\n        <div className="flex items-center justify-between">\n          <div>\n            <CardTitle className="flex items-center gap-2">\n              <Sparkles className="w-5 h-5 text-amber-500" />\n              Live Meta-Analysis: Real Telemetry Data\n            </CardTitle>\n            <p className="text-sm text-muted-foreground mt-1">\n              Real-time data from {activeAdapters} active universal adapters\n            </p>\n          </div>\n          \n          <div className="flex items-center gap-2 p-2 rounded-lg bg-muted/30">\n            <motion.div\n              animate={heartbeat.isAlive ? { scale: [1, 1.2, 1], opacity: [1, 0.8, 1] } : {}}\n              transition={{ duration: 1, repeat: Infinity, ease: "easeInOut" }}\n              className={`relative w-5 h-5 rounded-full flex items-center justify-center ${\n                heartbeat.isAlive ? \'bg-amber-500/20\' : \'bg-muted\'\n              }`}\n            >\n              <Activity className={`w-3 h-3 ${heartbeat.isAlive ? \'text-amber-500\' : \'text-muted-foreground\'}`} />\n              {heartbeat.isAlive && (\n                <motion.div\n                  animate={{ scale: [1, 2], opacity: [0.5, 0] }}\n                  transition={{ duration: 1.5, repeat: Infinity, ease: "easeOut" }}\n                  className="absolute inset-0 rounded-full border-2 border-amber-500"\n                />\n              )}\n            </motion.div>\n            \n            <Badge \n              variant={heartbeat.isAlive ? "default" : "secondary"} \n              className={`text-xs ${heartbeat.isAlive ? \'bg-amber-500/20 text-amber-400\' : \'\'}`}\n            >\n              {heartbeat.isAlive ? \'LIVE\' : \'PAUSED\'}\n            </Badge>\n            \n            {heartbeat.isAlive && (\n              <span className="text-xs text-muted-foreground">{formatNextPulse(heartbeat.nextPulseIn)}</span>\n            )}\n            \n            <Button\n              variant="ghost"\n              size="icon"\n              className="h-6 w-6"\n              onClick={() => {\n                setHeartbeatEnabled(!heartbeatEnabled);\n                if (!heartbeatEnabled) heartbeat.start();\n                else heartbeat.stop();\n              }}\n            >\n              {heartbeat.isAlive ? <Pause className="h-3 w-3" /> : <Play className="h-3 w-3" />}\n            </Button>\n            <Button\n              variant="ghost"\n              size="icon"\n              className="h-6 w-6"\n              onClick={runSelfAnalysis}\n              disabled={isAnalyzing}\n            >\n              <RefreshCw className={`h-3 w-3 ${isAnalyzing ? \'animate-spin\' : \'\'}`} />\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className="space-y-6">\n        {!analysisComplete && !isAnalyzing && (\n          <div className="text-center py-8">\n            <Code className="w-16 h-16 mx-auto mb-4 text-muted-foreground" />\n            <p className="text-muted-foreground mb-6">\n              Watch En Pensent analyze live telemetry from its own systems\n            </p>\n            <Button size="lg" onClick={runSelfAnalysis} className="gap-2">\n              <Zap className="w-4 h-4" />\n              Start Live Analysis\n            </Button>\n          </div>\n        )}\n\n        {isAnalyzing && (\n          <div className="space-y-4 py-8">\n            <div className="text-center">\n              <motion.div\n                animate={{ rotate: 360 }}\n                transition={{ duration: 2, repeat: Infinity, ease: "linear" }}\n                className="w-16 h-16 mx-auto mb-4"\n              >\n                <Sparkles className="w-16 h-16 text-amber-500" />\n              </motion.div>\n              <p className="font-medium">Gathering live telemetry...</p>\n            </div>\n            <Progress value={progress} className="h-2" />\n            <p className="text-center text-sm text-muted-foreground">\n              {progress < 20 && "Connecting to telemetry hub..."}\n              {progress >= 20 && progress < 40 && "Reading adapter states..."}\n              {progress >= 40 && progress < 60 && "Fetching code analysis metrics..."}\n              {progress >= 60 && progress < 80 && "Aggregating evolution events..."}\n              {progress >= 80 && progress < 100 && "Calculating system health..."}\n              {progress >= 100 && "Complete!"}\n            </p>\n          </div>\n        )}\n\n        {analysisComplete && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className="space-y-6"\n          >\n            <div className="flex items-center justify-between">\n              <div>\n                <h3 className="text-xl font-bold">En Pensent Hybrid Intelligence Platform</h3>\n                <p className="text-sm text-muted-foreground font-mono">\n                  EP-LIVE-{Date.now().toString(36).toUpperCase()}\n                </p>\n                <p className="text-xs text-muted-foreground mt-1">\n                  Last update: {new Date().toLocaleTimeString()}\n                </p>\n              </div>\n              <Badge className={`text-lg px-4 py-2 ${\n                systemHealth > 80 ? \'bg-green-500/20 text-green-500\' :\n                systemHealth > 60 ? \'bg-yellow-500/20 text-yellow-500\' :\n                \'bg-red-500/20 text-red-500\'\n              }`}>\n                {Math.round(systemHealth)}% Health\n              </Badge>\n            </div>\n\n            <div className="grid grid-cols-2 md:grid-cols-4 gap-3">\n              <Card className="bg-background/50">\n                <CardContent className="p-3 text-center">\n                  <Cpu className="w-5 h-5 mx-auto mb-2 text-violet-500" />\n                  <div className="text-2xl font-bold">{activeAdapters}</div>\n                  <div className="text-xs text-muted-foreground">Active Adapters</div>\n                </CardContent>\n              </Card>\n              <Card className="bg-background/50">\n                <CardContent className="p-3 text-center">\n                  <Network className="w-5 h-5 mx-auto mb-2 text-blue-500" />\n                  <div className="text-2xl font-bold">{adapterTelemetry.resonances.length}</div>\n                  <div className="text-xs text-muted-foreground">Resonance Pairs</div>\n                </CardContent>\n              </Card>\n              <Card className="bg-background/50">\n                <CardContent className="p-3 text-center">\n                  <GitBranch className="w-5 h-5 mx-auto mb-2 text-amber-500" />\n                  <div className="text-2xl font-bold">{totalSignals}</div>\n                  <div className="text-xs text-muted-foreground">Total Signals</div>\n                </CardContent>\n              </Card>\n              <Card className="bg-background/50">\n                <CardContent className="p-3 text-center">\n                  <AlertTriangle className="w-5 h-5 mx-auto mb-2 text-red-500" />\n                  <div className="text-2xl font-bold">{totalIssues}</div>\n                  <div className="text-xs text-muted-foreground">Issues Detected</div>\n                </CardContent>\n              </Card>\n            </div>\n\n            <div>\n              <h4 className="font-medium mb-3">Platform Activity by Domain</h4>\n              <div className="grid grid-cols-2 md:grid-cols-4 gap-2">\n                {adapterTelemetry.topDomains.map((domain) => (\n                  <div key={domain.domain} className="bg-muted/30 rounded-lg p-3 text-center">\n                    <div className="text-xs text-muted-foreground uppercase">{domain.domain}</div>\n                    <div className="text-lg font-bold">{domain.count}</div>\n                    <div className="text-xs text-muted-foreground">{domain.signals} signals</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <Card className="bg-background/50">\n              <CardHeader className="pb-2">\n                <CardTitle className="text-sm flex items-center gap-2">\n                  <BarChart3 className="w-4 h-4" />\n                  System Health Trend\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className="h-32">\n                  <ResponsiveContainer width="100%" height="100%">\n                    <LineChart data={healthHistory}>\n                      <CartesianGrid strokeDasharray="3 3" opacity={0.3} />\n                      <XAxis dataKey="name" hide />\n                      <YAxis domain={[0, 100]} hide />\n                      <Tooltip \n                        contentStyle={{ backgroundColor: \'var(--background)\', border: \'1px solid var(--border)\' }}\n                        labelStyle={{ display: \'none\' }}\n                      />\n                      <Line type="monotone" dataKey="health" stroke="#10b981" strokeWidth={2} dot={false} />\n                    </LineChart>\n                  </ResponsiveContainer>\n                </div>\n              </CardContent>\n            </Card>\n\n            {codeTelemetry.analysis && (\n              <Card className="bg-background/50">\n                <CardContent className="p-4 space-y-3">\n                  <div className="flex items-center justify-between">\n                    <span className="text-sm text-muted-foreground">Pattern Density</span>\n                    <span className="font-medium">{codeTelemetry.analysis.patternDensity.toFixed(1)}%</span>\n                  </div>\n                  <Progress value={codeTelemetry.analysis.patternDensity} className="h-2" />\n                  \n                  <div className="flex items-center justify-between">\n                    <span className="text-sm text-muted-foreground">Files Analyzed</span>\n                    <span className="font-medium">{codeTelemetry.analysis.fileCount}</span>\n                  </div>\n                  \n                  <div className="flex items-center justify-between">\n                    <span className="text-sm text-muted-foreground">Lines of Code</span>\n                    <span className="font-medium">{codeTelemetry.analysis.linesOfCode.toLocaleString()}</span>\n                  </div>\n                  \n                  <div className="flex items-center justify-between">\n                    <span className="text-sm text-muted-foreground">Archetype</span>\n                    <Badge variant="outline">{codeTelemetry.analysis.archetype}</Badge>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {(codeTelemetry.issues.counts.critical > 0 || codeTelemetry.issues.counts.high > 0) && (\n              <Card className="bg-red-500/5 border-red-500/20">\n                <CardHeader className="pb-2">\n                  <CardTitle className="text-sm flex items-center gap-2 text-red-400">\n                    <AlertTriangle className="w-4 h-4" />\n                    Issues Requiring Attention\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className="grid grid-cols-4 gap-2">\n                    <div className="text-center p-2 rounded bg-red-500/10">\n                      <div className="text-lg font-bold text-red-400">{codeTelemetry.issues.counts.critical}</div>\n                      <div className="text-xs text-muted-foreground">Critical</div>\n                    </div>\n                    <div className="text-center p-2 rounded bg-orange-500/10">\n                      <div className="text-lg font-bold text-orange-400">{codeTelemetry.issues.counts.high}</div>\n                      <div className="text-xs text-muted-foreground">High</div>\n                    </div>\n                    <div className="text-center p-2 rounded bg-yellow-500/10">\n                      <div className="text-lg font-bold text-yellow-400">{codeTelemetry.issues.counts.medium}</div>\n                      <div className="text-xs text-muted-foreground">Medium</div>\n                    </div>\n                    <div className="text-center p-2 rounded bg-blue-500/10">\n                      <div className="text-lg font-bold text-blue-400">{codeTelemetry.issues.counts.low}</div>\n                      <div className="text-xs text-muted-foreground">Low</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            <Card className="bg-gradient-to-r from-amber-500/10 to-orange-500/10 border-amber-500/30">\n              <CardContent className="p-4">\n                <div className="flex gap-3">\n                  <Target className="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5" />\n                  <div>\n                    <h4 className="font-bold mb-1">Live System Insight</h4>\n                    <p className="text-sm text-muted-foreground">\n                      This analysis is generated from real-time telemetry data flowing through {activeAdapters} active universal adapters \n                      with {Math.round(averageHealth * 100)}% average health. The system continuously monitors its own \n                      codebase, detecting {totalIssues} issues across {codeTelemetry.analysis?.fileCount || 0} files. \n                      Cross-domain resonance is actively learning from {adapterTelemetry.topDomains.length} different domains.\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card className={`${\n              systemHealth > 70 ? \'bg-green-500/10 border-green-500/30\' : \'bg-yellow-500/10 border-yellow-500/30\'\n            }`}>\n              <CardContent className="p-4">\n                <div className="flex gap-3">\n                  <CheckCircle className={`w-5 h-5 flex-shrink-0 mt-0.5 ${\n                    systemHealth > 70 ? \'text-green-500\' : \'text-yellow-500\'\n                  }`} />\n                  <div>\n                    <h4 className="font-bold mb-1">Prediction: {systemHealth > 70 ? \'STRONG\' : \'MODERATE\'}</h4>\n                    <p className="text-sm text-muted-foreground">\n                      Based on live telemetry: {activeAdapters} adapters active, {totalSignals} signals processed, \n                      {totalIssues} issues detected. System health at {Math.round(systemHealth)}% indicates \n                      {systemHealth > 70 ? \'robust operation with effective self-monitoring.\' : \'areas needing attention.\'}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </motion.div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SelfAnalysisDemo;\n';export{e as default};
