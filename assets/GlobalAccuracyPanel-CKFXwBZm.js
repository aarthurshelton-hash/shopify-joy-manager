const e='/**\n * Global Accuracy Panel\n * Live, persistent accuracy tracking across all sessions\n * Auto-updates with realtime subscriptions\n */\n\nimport React, { useEffect, useState } from \'react\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { \n  Target, TrendingUp, TrendingDown, Activity, Zap, \n  Brain, Crosshair, Clock, BarChart3, Flame, \n  Award, AlertTriangle, Wifi, WifiOff\n} from \'lucide-react\';\nimport { Card, CardContent, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Progress } from \'@/components/ui/progress\';\nimport { cn } from \'@/lib/utils\';\nimport { useTradingSessionStore, GlobalAccuracy } from \'@/stores/tradingSessionStore\';\nimport { useRealtimeAccuracy } from \'@/hooks/useRealtimeAccuracy\';\n\ninterface AccuracyGaugeProps {\n  value: number;\n  label: string;\n  icon: React.ReactNode;\n  showTrend?: boolean;\n  trendValue?: number;\n}\n\nconst AccuracyGauge: React.FC<AccuracyGaugeProps> = ({ \n  value, label, icon, showTrend = false, trendValue = 0 \n}) => {\n  const getColor = (v: number) => {\n    if (v >= 70) return \'text-green-400\';\n    if (v >= 55) return \'text-yellow-400\';\n    return \'text-red-400\';\n  };\n  \n  const getProgressColor = (v: number) => {\n    if (v >= 70) return \'bg-green-500\';\n    if (v >= 55) return \'bg-yellow-500\';\n    return \'bg-red-500\';\n  };\n  \n  return (\n    <div className="space-y-1">\n      <div className="flex items-center justify-between text-xs">\n        <span className="flex items-center gap-1 text-muted-foreground">\n          {icon}\n          {label}\n        </span>\n        <span className={cn("font-mono font-bold", getColor(value))}>\n          {value.toFixed(1)}%\n          {showTrend && trendValue !== 0 && (\n            <span className={cn(\n              "ml-1 text-[10px]",\n              trendValue > 0 ? "text-green-400" : "text-red-400"\n            )}>\n              {trendValue > 0 ? \'‚Üë\' : \'‚Üì\'}\n            </span>\n          )}\n        </span>\n      </div>\n      <div className="h-1.5 bg-muted rounded-full overflow-hidden">\n        <motion.div\n          className={cn("h-full rounded-full", getProgressColor(value))}\n          initial={{ width: 0 }}\n          animate={{ width: `${Math.min(100, value)}%` }}\n          transition={{ duration: 0.5 }}\n        />\n      </div>\n    </div>\n  );\n};\n\ninterface StreakIndicatorProps {\n  currentStreak: number;\n  bestStreak: number;\n}\n\nconst StreakIndicator: React.FC<StreakIndicatorProps> = ({ currentStreak, bestStreak }) => {\n  const isPositive = currentStreak > 0;\n  const absStreak = Math.abs(currentStreak);\n  \n  return (\n    <div className={cn(\n      "flex items-center gap-2 px-3 py-2 rounded-lg",\n      isPositive ? "bg-green-500/10 border border-green-500/20" : "bg-red-500/10 border border-red-500/20"\n    )}>\n      {isPositive ? (\n        <Flame className="w-4 h-4 text-orange-400 animate-pulse" />\n      ) : (\n        <AlertTriangle className="w-4 h-4 text-red-400" />\n      )}\n      <div>\n        <div className={cn(\n          "text-sm font-bold",\n          isPositive ? "text-green-400" : "text-red-400"\n        )}>\n          {isPositive ? `${absStreak} Win Streak` : `${absStreak} Loss Streak`}\n        </div>\n        <div className="text-[10px] text-muted-foreground">\n          Best: {bestStreak} wins\n        </div>\n      </div>\n    </div>\n  );\n};\n\ninterface GlobalAccuracyPanelProps {\n  compact?: boolean;\n  showStreak?: boolean;\n}\n\nexport const GlobalAccuracyPanel: React.FC<GlobalAccuracyPanelProps> = ({ \n  compact = false,\n  showStreak = true\n}) => {\n  const { globalAccuracy, evolutionState, liveMetrics, syncEvolutionState } = useTradingSessionStore();\n  const { isConnected, lastUpdate, updateCount } = useRealtimeAccuracy(true);\n  const [pulseCount, setPulseCount] = useState(0);\n  \n  // Sync evolution state continuously with realtime updates\n  useEffect(() => {\n    const interval = setInterval(() => {\n      syncEvolutionState();\n      setPulseCount(c => c + 1);\n    }, 500); // Faster updates for realtime feel\n    return () => clearInterval(interval);\n  }, [syncEvolutionState]);\n  \n  const isLive = liveMetrics.isStreaming || isConnected;\n  \n  if (compact) {\n    return (\n      <div className="flex items-center gap-4 px-3 py-2 bg-card/50 rounded-lg border border-primary/20">\n        <div className="flex items-center gap-2">\n          <motion.div\n            animate={{ \n              scale: isLive ? [1, 1.2, 1] : 1,\n              opacity: isLive ? 1 : 0.5\n            }}\n            transition={{ duration: 1, repeat: isLive ? Infinity : 0 }}\n          >\n            <Target className={cn(\n              "w-4 h-4",\n              isLive ? "text-green-400" : "text-muted-foreground"\n            )} />\n          </motion.div>\n          <span className="text-xs text-muted-foreground">Global Accuracy</span>\n        </div>\n        \n        <div className="flex items-center gap-3">\n          <div className="text-center">\n            <div className={cn(\n              "text-sm font-mono font-bold",\n              globalAccuracy.accuracy >= 55 ? "text-green-400" : \n              globalAccuracy.accuracy >= 45 ? "text-yellow-400" : "text-red-400"\n            )}>\n              {globalAccuracy.accuracy.toFixed(1)}%\n            </div>\n            <div className="text-[10px] text-muted-foreground">Overall</div>\n          </div>\n          \n          <div className="text-center">\n            <div className="text-sm font-mono text-primary">\n              {globalAccuracy.totalPredictions}\n            </div>\n            <div className="text-[10px] text-muted-foreground">Predictions</div>\n          </div>\n          \n          {showStreak && globalAccuracy.currentStreak !== 0 && (\n            <Badge \n              variant="outline"\n              className={cn(\n                "text-xs",\n                globalAccuracy.currentStreak > 0 \n                  ? "border-green-500/30 text-green-400" \n                  : "border-red-500/30 text-red-400"\n              )}\n            >\n              {globalAccuracy.currentStreak > 0 ? \'üî•\' : \'‚ùÑÔ∏è\'} \n              {Math.abs(globalAccuracy.currentStreak)}\n            </Badge>\n          )}\n        </div>\n        \n        <div className="flex items-center gap-2 ml-auto">\n          <Brain className="w-3 h-3 text-primary" />\n          <span className="text-xs text-muted-foreground">Gen</span>\n          <span className="text-xs font-mono text-primary">\n            {evolutionState.metrics.generationNumber}\n          </span>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <Card className="bg-card/50 backdrop-blur border-primary/20">\n      <CardHeader className="pb-2">\n        <div className="flex items-center justify-between">\n          <CardTitle className="flex items-center gap-2 text-lg">\n            <motion.div\n              animate={{ \n                rotate: isLive ? [0, 360] : 0\n              }}\n              transition={{ duration: 3, repeat: isLive ? Infinity : 0, ease: "linear" }}\n            >\n              <Target className={cn(\n                "w-5 h-5",\n                isLive ? "text-primary" : "text-muted-foreground"\n              )} />\n            </motion.div>\n            Global Accuracy\n          </CardTitle>\n          \n          <div className="flex items-center gap-2">\n            {isConnected && (\n              <Badge \n                variant="outline" \n                className="text-xs border-blue-500/30 text-blue-400"\n              >\n                <Wifi className="w-3 h-3 mr-1" />\n                SYNCED\n              </Badge>\n            )}\n            <Badge \n              variant="outline" \n              className={cn(\n                "text-xs",\n                isLive ? "border-green-500/30 text-green-400" : "border-muted"\n              )}\n            >\n              {isLive ? \'‚óè LIVE\' : \'‚óã PAUSED\'}\n            </Badge>\n            <Badge variant="outline" className="text-xs">\n              Gen {evolutionState.metrics.generationNumber}\n            </Badge>\n          </div>\n        </div>\n      </CardHeader>\n      \n      <CardContent className="space-y-4">\n        {/* Main Accuracy Display */}\n        <div className="flex items-center justify-between p-4 bg-muted/30 rounded-lg">\n          <div className="text-center">\n            <div className={cn(\n              "text-4xl font-mono font-bold",\n              globalAccuracy.accuracy >= 55 ? "text-green-400" : \n              globalAccuracy.accuracy >= 45 ? "text-yellow-400" : "text-red-400"\n            )}>\n              {globalAccuracy.accuracy.toFixed(1)}%\n            </div>\n            <div className="text-sm text-muted-foreground">Overall Accuracy</div>\n          </div>\n          \n          <div className="text-center">\n            <div className="text-2xl font-mono text-primary">\n              {globalAccuracy.correctPredictions}\n            </div>\n            <div className="text-xs text-muted-foreground">\n              of {globalAccuracy.totalPredictions} correct\n            </div>\n          </div>\n          \n          {showStreak && (\n            <StreakIndicator \n              currentStreak={globalAccuracy.currentStreak}\n              bestStreak={globalAccuracy.bestStreak}\n            />\n          )}\n        </div>\n        \n        {/* Multi-Level Accuracy */}\n        <div className="space-y-3">\n          <div className="text-xs font-medium text-muted-foreground flex items-center gap-1">\n            <BarChart3 className="w-3 h-3" />\n            Multi-Level Accuracy\n          </div>\n          \n          <div className="grid gap-2">\n            <AccuracyGauge\n              value={globalAccuracy.directionAccuracy}\n              label="Direction"\n              icon={<Crosshair className="w-3 h-3" />}\n              showTrend\n              trendValue={evolutionState.metrics.learningVelocity}\n            />\n            <AccuracyGauge\n              value={globalAccuracy.magnitudeAccuracy}\n              label="Magnitude"\n              icon={<TrendingUp className="w-3 h-3" />}\n            />\n            <AccuracyGauge\n              value={globalAccuracy.timingAccuracy}\n              label="Timing"\n              icon={<Clock className="w-3 h-3" />}\n            />\n            <AccuracyGauge\n              value={globalAccuracy.confidenceCalibration}\n              label="Calibration"\n              icon={<Activity className="w-3 h-3" />}\n            />\n          </div>\n        </div>\n        \n        {/* Evolution Fitness */}\n        <div className="space-y-2">\n          <div className="flex items-center justify-between text-xs">\n            <span className="flex items-center gap-1 text-muted-foreground">\n              <Brain className="w-3 h-3" />\n              Evolution Fitness\n            </span>\n            <span className={cn(\n              "font-mono",\n              evolutionState.metrics.learningVelocity > 0 ? "text-green-400" : "text-red-400"\n            )}>\n              {evolutionState.metrics.learningVelocity > 0 ? \'+\' : \'\'}\n              {(evolutionState.metrics.learningVelocity * 100).toFixed(2)}% velocity\n            </span>\n          </div>\n          \n          <div className="flex gap-1">\n            {Array.from({ length: 10 }).map((_, i) => {\n              const threshold = (i + 1) * 0.1;\n              const active = evolutionState.metrics.currentFitness >= threshold;\n              return (\n                <motion.div\n                  key={i}\n                  className={cn(\n                    "h-6 flex-1 rounded-sm",\n                    active ? "bg-primary" : "bg-muted"\n                  )}\n                  animate={{\n                    opacity: active ? [0.7, 1, 0.7] : 0.3\n                  }}\n                  transition={{\n                    duration: 1.5,\n                    repeat: Infinity,\n                    delay: i * 0.1\n                  }}\n                />\n              );\n            })}\n          </div>\n          \n          <div className="flex justify-between text-[10px] text-muted-foreground">\n            <span>Current: {(evolutionState.metrics.currentFitness * 100).toFixed(0)}%</span>\n            <span>Peak: {(evolutionState.metrics.peakFitness * 100).toFixed(0)}%</span>\n          </div>\n        </div>\n        \n        {/* Learned Patterns Summary */}\n        <div className="flex items-center justify-between p-3 bg-muted/20 rounded-lg">\n          <div className="flex items-center gap-2">\n            <Zap className="w-4 h-4 text-yellow-400" />\n            <span className="text-sm">Learned Patterns</span>\n          </div>\n          <div className="text-right">\n            <div className="text-sm font-mono text-primary">\n              {evolutionState.patternLibrary.length}\n            </div>\n            <div className="text-[10px] text-muted-foreground">\n              {evolutionState.patternLibrary.filter(p => p.successRate > 0.6).length} high accuracy\n            </div>\n          </div>\n        </div>\n        \n        {/* Live Metrics */}\n        <AnimatePresence>\n          {isLive && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \'auto\' }}\n              exit={{ opacity: 0, height: 0 }}\n              className="grid grid-cols-3 gap-2 text-center"\n            >\n              <div className="p-2 bg-muted/20 rounded">\n                <div className="text-xs text-muted-foreground">Ticks</div>\n                <div className="text-sm font-mono">{liveMetrics.ticksProcessed}</div>\n              </div>\n              <div className="p-2 bg-muted/20 rounded">\n                <div className="text-xs text-muted-foreground">Predictions</div>\n                <div className="text-sm font-mono">{liveMetrics.predictionsMade}</div>\n              </div>\n              <div className="p-2 bg-muted/20 rounded">\n                <div className="text-xs text-muted-foreground">Symbol</div>\n                <div className="text-sm font-mono">{liveMetrics.currentSymbol}</div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </CardContent>\n    </Card>\n  );\n};\n';export{e as default};
