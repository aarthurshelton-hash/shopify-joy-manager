const n='import React from \'react\';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Button } from \'@/components/ui/button\';\nimport { Switch } from \'@/components/ui/switch\';\nimport { Slider } from \'@/components/ui/slider\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { ScrollArea } from \'@/components/ui/scroll-area\';\nimport { \n  Heart, \n  Zap, \n  AlertTriangle, \n  CheckCircle2, \n  Clock, \n  Play,\n  Pause,\n  RefreshCw,\n  Sparkles,\n  Shield,\n  TrendingUp\n} from \'lucide-react\';\nimport { useAutoHealSystem, CodeIssue } from \'@/hooks/useAutoHealSystem\';\nimport { motion, AnimatePresence } from \'framer-motion\';\n\ninterface AutoHealPanelProps {\n  issues?: CodeIssue[];\n  onScanComplete?: () => void;\n}\n\nexport const AutoHealPanel: React.FC<AutoHealPanelProps> = ({ \n  issues = [],\n  onScanComplete \n}) => {\n  const {\n    config,\n    setConfig,\n    stats,\n    isRunning,\n    lastScan,\n    pendingFixes,\n    detectIssues,\n    applyFix,\n    toggleEnabled,\n    fetchStats\n  } = useAutoHealSystem();\n\n  const handleScan = async () => {\n    await detectIssues(issues);\n    onScanComplete?.();\n  };\n\n  const healthScore = stats \n    ? Math.max(0, 100 - (stats.critical_issues * 20) - (stats.unresolved_issues * 2))\n    : 100;\n\n  const getHealthColor = (score: number) => {\n    if (score >= 80) return \'text-green-500\';\n    if (score >= 60) return \'text-yellow-500\';\n    if (score >= 40) return \'text-orange-500\';\n    return \'text-red-500\';\n  };\n\n  return (\n    <Card className="bg-gradient-to-br from-background to-muted/30 border-primary/20">\n      <CardHeader className="pb-3">\n        <div className="flex items-center justify-between">\n          <div className="flex items-center gap-2">\n            <motion.div\n              animate={config.enabled ? { scale: [1, 1.2, 1] } : {}}\n              transition={{ duration: 2, repeat: Infinity }}\n            >\n              <Heart className={`h-5 w-5 ${config.enabled ? \'text-red-500 fill-red-500\' : \'text-muted-foreground\'}`} />\n            </motion.div>\n            <CardTitle className="text-lg">Self-Healing System</CardTitle>\n          </div>\n          <div className="flex items-center gap-2">\n            <span className="text-xs text-muted-foreground">\n              {config.enabled ? \'Active\' : \'Paused\'}\n            </span>\n            <Switch\n              checked={config.enabled}\n              onCheckedChange={toggleEnabled}\n            />\n          </div>\n        </div>\n        <CardDescription>\n          Continuous code analysis with auto-fix capabilities\n        </CardDescription>\n      </CardHeader>\n\n      <CardContent className="space-y-4">\n        {/* Health Score */}\n        <div className="flex items-center justify-between p-3 rounded-lg bg-muted/50">\n          <div className="flex items-center gap-3">\n            <Shield className={`h-8 w-8 ${getHealthColor(healthScore)}`} />\n            <div>\n              <p className="text-sm font-medium">Codebase Health</p>\n              <p className={`text-2xl font-bold ${getHealthColor(healthScore)}`}>\n                {healthScore}%\n              </p>\n            </div>\n          </div>\n          <Button \n            variant="outline" \n            size="sm"\n            onClick={fetchStats}\n            disabled={isRunning}\n          >\n            <RefreshCw className={`h-4 w-4 mr-1 ${isRunning ? \'animate-spin\' : \'\'}`} />\n            Refresh\n          </Button>\n        </div>\n\n        {/* Stats Grid */}\n        {stats && (\n          <div className="grid grid-cols-2 gap-2">\n            <div className="p-2 rounded bg-red-500/10 border border-red-500/20">\n              <div className="flex items-center gap-1 text-red-500">\n                <AlertTriangle className="h-3 w-3" />\n                <span className="text-xs">Critical</span>\n              </div>\n              <p className="text-xl font-bold">{stats.critical_issues}</p>\n            </div>\n            <div className="p-2 rounded bg-yellow-500/10 border border-yellow-500/20">\n              <div className="flex items-center gap-1 text-yellow-500">\n                <Clock className="h-3 w-3" />\n                <span className="text-xs">Pending</span>\n              </div>\n              <p className="text-xl font-bold">{stats.pending_fixes}</p>\n            </div>\n            <div className="p-2 rounded bg-green-500/10 border border-green-500/20">\n              <div className="flex items-center gap-1 text-green-500">\n                <CheckCircle2 className="h-3 w-3" />\n                <span className="text-xs">Applied</span>\n              </div>\n              <p className="text-xl font-bold">{stats.applied_fixes}</p>\n            </div>\n            <div className="p-2 rounded bg-blue-500/10 border border-blue-500/20">\n              <div className="flex items-center gap-1 text-blue-500">\n                <Sparkles className="h-3 w-3" />\n                <span className="text-xs">High Conf.</span>\n              </div>\n              <p className="text-xl font-bold">{stats.high_confidence_fixes}</p>\n            </div>\n          </div>\n        )}\n\n        {/* Auto-Apply Threshold */}\n        <div className="space-y-2">\n          <div className="flex items-center justify-between">\n            <label className="text-sm font-medium">Auto-Apply Threshold</label>\n            <span className="text-sm text-muted-foreground">\n              {(config.autoApplyThreshold * 100).toFixed(0)}%\n            </span>\n          </div>\n          <Slider\n            value={[config.autoApplyThreshold * 100]}\n            onValueChange={([value]) => setConfig(c => ({ ...c, autoApplyThreshold: value / 100 }))}\n            min={70}\n            max={99}\n            step={1}\n            className="w-full"\n          />\n          <p className="text-xs text-muted-foreground">\n            Fixes with confidence â‰¥ {(config.autoApplyThreshold * 100).toFixed(0)}% will be auto-applied\n          </p>\n        </div>\n\n        {/* Pending Fixes */}\n        {pendingFixes.length > 0 && (\n          <div className="space-y-2">\n            <h4 className="text-sm font-medium flex items-center gap-2">\n              <Zap className="h-4 w-4 text-yellow-500" />\n              Pending Fixes ({pendingFixes.length})\n            </h4>\n            <ScrollArea className="h-32">\n              <div className="space-y-2">\n                <AnimatePresence>\n                  {pendingFixes.map((fix) => (\n                    <motion.div\n                      key={fix.id}\n                      initial={{ opacity: 0, x: -20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      exit={{ opacity: 0, x: 20 }}\n                      className="flex items-center justify-between p-2 rounded bg-muted/50 text-sm"\n                    >\n                      <div className="flex-1 min-w-0">\n                        <p className="truncate font-mono text-xs">{fix.file_path}</p>\n                        <div className="flex items-center gap-2 mt-1">\n                          <Badge variant="outline" className="text-xs">\n                            {(fix.confidence * 100).toFixed(0)}%\n                          </Badge>\n                          <Badge \n                            variant={fix.status === \'generated\' ? \'default\' : \'secondary\'}\n                            className="text-xs"\n                          >\n                            {fix.status}\n                          </Badge>\n                        </div>\n                      </div>\n                      <Button\n                        size="sm"\n                        variant="ghost"\n                        onClick={() => applyFix(fix.id)}\n                        className="ml-2"\n                      >\n                        <CheckCircle2 className="h-4 w-4" />\n                      </Button>\n                    </motion.div>\n                  ))}\n                </AnimatePresence>\n              </div>\n            </ScrollArea>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className="flex gap-2">\n          <Button \n            onClick={handleScan}\n            disabled={isRunning || issues.length === 0}\n            className="flex-1"\n          >\n            {isRunning ? (\n              <>\n                <RefreshCw className="h-4 w-4 mr-2 animate-spin" />\n                Analyzing...\n              </>\n            ) : (\n              <>\n                <TrendingUp className="h-4 w-4 mr-2" />\n                Scan & Store Issues\n              </>\n            )}\n          </Button>\n          <Button\n            variant={config.enabled ? \'destructive\' : \'default\'}\n            onClick={toggleEnabled}\n          >\n            {config.enabled ? (\n              <Pause className="h-4 w-4" />\n            ) : (\n              <Play className="h-4 w-4" />\n            )}\n          </Button>\n        </div>\n\n        {/* Last Scan */}\n        {lastScan && (\n          <p className="text-xs text-muted-foreground text-center">\n            Last scan: {lastScan.toLocaleTimeString()}\n          </p>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n';export{n as default};
