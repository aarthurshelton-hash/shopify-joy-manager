const e="import React, { useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  Crown, \n  Clock,\n  Zap,\n  Trophy,\n  MapPin,\n  CheckCircle,\n  Sparkles,\n  CreditCard,\n  Feather,\n} from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { PieceType, PieceColor, getActivePalette } from '@/lib/chess/pieceColors';\nimport { SquareData } from '@/lib/chess/gameSimulator';\nimport { MoveHistoryEntry } from '@/components/chess/EnPensentOverlay';\nimport enPensentLogo from '@/assets/en-pensent-logo-new.png';\nimport { getGamePoetry, GamePoetry } from '@/lib/chess/gamePoetry';\n\ninterface VisionInfoCardPreviewProps {\n  board?: SquareData[][];\n  gameData?: {\n    white?: string;\n    black?: string;\n    event?: string;\n    date?: string;\n    result?: string;\n  };\n  moveHistory?: MoveHistoryEntry[];\n  totalMoves: number;\n  whitePalette: Record<string, string>;\n  blackPalette: Record<string, string>;\n  darkMode?: boolean;\n  showSpecs?: boolean;\n  gameId?: string;\n}\n\nconst PIECE_SYMBOLS: Record<PieceType, { w: string; b: string }> = {\n  k: { w: '‚ôö', b: '‚ôî' },\n  q: { w: '‚ôõ', b: '‚ôï' },\n  r: { w: '‚ôú', b: '‚ôñ' },\n  b: { w: '‚ôù', b: '‚ôó' },\n  n: { w: '‚ôû', b: '‚ôò' },\n  p: { w: '‚ôü', b: '‚ôô' },\n};\n\nconst PIECE_NAMES: Record<PieceType, string> = {\n  k: 'King', q: 'Queen', r: 'Rook', b: 'Bishop', n: 'Knight', p: 'Pawn'\n};\n\nexport const VisionInfoCardPreview: React.FC<VisionInfoCardPreviewProps> = ({\n  board,\n  gameData: rawGameData,\n  moveHistory = [],\n  totalMoves,\n  whitePalette,\n  blackPalette,\n  darkMode = false,\n  showSpecs = true,\n  gameId,\n}) => {\n  const palette = getActivePalette();\n  const theme = palette.legendTheme;\n  \n  // Default game data for preview\n  const gameData = rawGameData || {\n    white: 'Player 1',\n    black: 'Player 2',\n    event: 'Chess Game',\n    date: new Date().toLocaleDateString(),\n    result: '1-0',\n  };\n\n  // Get poetry for this game if available\n  const poetry: GamePoetry | null = useMemo(() => {\n    if (gameId) {\n      return getGamePoetry(gameId);\n    }\n    // Try to match by player names\n    if (gameData.white && gameData.black) {\n      const searchKey = `${gameData.white.toLowerCase()}-${gameData.black.toLowerCase()}`;\n      return getGamePoetry(searchKey);\n    }\n    return null;\n  }, [gameId, gameData]);\n\n  // Calculate piece activity statistics\n  const pieceStats = useMemo(() => {\n    const stats = new Map<string, { \n      moves: number; \n      squares: Set<string>; \n      captures: number;\n      checks: number;\n    }>();\n    \n    const pieceTypes: PieceType[] = ['k', 'q', 'r', 'b', 'n', 'p'];\n    const colors: PieceColor[] = ['w', 'b'];\n    \n    // If no move history, provide sample data for preview\n    if (moveHistory.length === 0) {\n      const sampleMoves: Record<string, number> = {\n        'w-k': 4, 'w-q': 12, 'w-r': 8, 'w-b': 6, 'w-n': 7, 'w-p': 14,\n        'b-k': 5, 'b-q': 10, 'b-r': 7, 'b-b': 5, 'b-n': 6, 'b-p': 13,\n      };\n      \n      for (const color of colors) {\n        for (const piece of pieceTypes) {\n          const key = `${color}-${piece}`;\n          stats.set(key, { \n            moves: sampleMoves[key] || 0, \n            squares: new Set(), \n            captures: 0,\n            checks: 0,\n          });\n        }\n      }\n      return stats;\n    }\n    \n    for (const color of colors) {\n      for (const piece of pieceTypes) {\n        stats.set(`${color}-${piece}`, { \n          moves: 0, \n          squares: new Set(), \n          captures: 0,\n          checks: 0,\n        });\n      }\n    }\n    \n    for (const move of moveHistory) {\n      const key = `${move.color}-${move.piece}`;\n      const stat = stats.get(key);\n      if (stat) {\n        stat.moves++;\n        stat.squares.add(move.square);\n      }\n    }\n    \n    return stats;\n  }, [moveHistory]);\n\n  // Find MVP piece\n  const mvpPiece = useMemo(() => {\n    let maxActivity = 0;\n    let mvp: { piece: PieceType; color: PieceColor; moves: number } | null = null;\n    \n    pieceStats.forEach((stat, key) => {\n      if (stat.moves > maxActivity) {\n        maxActivity = stat.moves;\n        const [color, piece] = key.split('-') as [PieceColor, PieceType];\n        mvp = { piece, color, moves: stat.moves };\n      }\n    });\n    \n    // Default to white pawn if no data\n    if (!mvp && moveHistory.length === 0) {\n      mvp = { piece: 'p', color: 'w', moves: 14 };\n    }\n    \n    return mvp;\n  }, [pieceStats, moveHistory]);\n\n  // Calculate territory control\n  const territoryStats = useMemo(() => {\n    // If no board data, return sample values for preview\n    if (!board || board.length === 0) {\n      return {\n        white: 28,\n        black: 24,\n        whitePercent: 44,\n        blackPercent: 38,\n      };\n    }\n\n    let whiteSquares = 0;\n    let blackSquares = 0;\n    \n    for (const rank of board) {\n      for (const square of rank) {\n        const whiteVisits = square.visits.filter((v: any) => v.piece?.color === 'w' || v.color === 'w').length;\n        const blackVisits = square.visits.filter((v: any) => v.piece?.color === 'b' || v.color === 'b').length;\n        \n        if (whiteVisits > blackVisits) whiteSquares++;\n        else if (blackVisits > whiteVisits) blackSquares++;\n      }\n    }\n    \n    return {\n      white: whiteSquares,\n      black: blackSquares,\n      whitePercent: Math.round((whiteSquares / 64) * 100),\n      blackPercent: Math.round((blackSquares / 64) * 100),\n    };\n  }, [board]);\n\n  // Game phase analysis\n  const phaseAnalysis = useMemo(() => {\n    const opening = Math.min(10, totalMoves);\n    const middlegame = totalMoves > 10 ? Math.min(30, totalMoves) - 10 : 0;\n    const endgame = totalMoves > 40 ? totalMoves - 40 : 0;\n    \n    return { opening, middlegame, endgame, total: totalMoves };\n  }, [totalMoves]);\n\n  // Render color palette row\n  const renderPaletteRow = (color: PieceColor) => {\n    const pal = color === 'w' ? whitePalette : blackPalette;\n    const pieceTypes: PieceType[] = ['k', 'q', 'r', 'b', 'n', 'p'];\n    \n    return (\n      <div className=\"flex items-center gap-0.5\">\n        {pieceTypes.map(piece => {\n          const key = `${color}-${piece}`;\n          const stat = pieceStats.get(key);\n          const isMvp = mvpPiece?.piece === piece && mvpPiece?.color === color;\n          const hexColor = pal[piece] || '#888';\n          \n          return (\n            <div \n              key={key}\n              className={`relative flex flex-col items-center transition-all ${\n                isMvp ? 'scale-110' : ''\n              }`}\n            >\n              <div\n                className={`w-3.5 h-3.5 rounded-sm shadow-sm ${isMvp ? 'ring-1 ring-amber-400' : ''}`}\n                style={{ backgroundColor: hexColor }}\n                title={`${PIECE_NAMES[piece]}: ${stat?.moves || 0} moves`}\n              />\n              {isMvp && (\n                <span className=\"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center\">\n                  <Crown className=\"w-1.5 h-1.5 text-white\" />\n                </span>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  // Truncate poetry for card display\n  const truncatedPoetry = useMemo(() => {\n    if (!poetry) return null;\n    const lines = poetry.poem.split('\\n');\n    return lines.slice(0, 2).join(' / ');\n  }, [poetry]);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Specifications Banner */}\n      {showSpecs && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"flex flex-wrap items-center justify-center gap-2\"\n        >\n          <Badge variant=\"secondary\" className=\"gap-1 text-xs\">\n            <CreditCard className=\"w-3 h-3\" />\n            3.5\" √ó 2\" Premium Card\n          </Badge>\n          <Badge variant=\"secondary\" className=\"gap-1 text-xs\">\n            <Sparkles className=\"w-3 h-3\" />\n            400gsm Matte Finish\n          </Badge>\n          <Badge variant=\"secondary\" className=\"gap-1 text-xs\">\n            <CheckCircle className=\"w-3 h-3\" />\n            UV Resistant Ink\n          </Badge>\n        </motion.div>\n      )}\n\n      {/* Card Preview Container - Premium Collectible Design */}\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ delay: 0.1 }}\n        className=\"flex justify-center\"\n      >\n        <div className=\"relative\">\n          {/* Premium ambient glow */}\n          <div className=\"absolute inset-0 bg-gradient-to-br from-amber-500/30 via-primary/20 to-amber-600/30 rounded-2xl blur-3xl transform translate-y-4 scale-95 opacity-60\" />\n          \n          {/* The Collectible Vision Card */}\n          <Card \n            className={`relative overflow-hidden shadow-2xl transform hover:scale-[1.02] transition-all duration-500 ${\n              darkMode \n                ? 'bg-gradient-to-br from-stone-950 via-stone-900 to-stone-950 text-stone-100' \n                : 'bg-gradient-to-br from-stone-50 via-white to-stone-100 text-stone-900'\n            }`}\n            style={{ \n              width: 320,\n              aspectRatio: '3.5/2',\n              borderRadius: 16,\n              border: '2px solid transparent',\n              backgroundClip: 'padding-box',\n            }}\n          >\n            {/* Gold border effect */}\n            <div \n              className=\"absolute inset-0 rounded-[14px] pointer-events-none\"\n              style={{\n                border: '2px solid transparent',\n                background: 'linear-gradient(135deg, #d4af37 0%, #f4e4bc 25%, #d4af37 50%, #b8860b 75%, #d4af37 100%) border-box',\n                mask: 'linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0)',\n                WebkitMask: 'linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0)',\n                maskComposite: 'exclude',\n                WebkitMaskComposite: 'xor',\n              }}\n            />\n            \n            {/* Subtle luxury texture */}\n            <div className=\"absolute inset-0 opacity-[0.02] pointer-events-none\"\n              style={{\n                backgroundImage: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E\")`,\n              }}\n            />\n            \n            <CardContent className=\"p-0 h-full flex flex-col relative\">\n              {/* Golden Seal Logo - Top Right Corner */}\n              <div className=\"absolute top-2 right-2 z-10\">\n                <div className=\"relative\">\n                  <div className=\"absolute inset-0 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 blur-sm opacity-60\" />\n                  <img \n                    src={enPensentLogo} \n                    alt=\"En Pensent Seal\" \n                    className=\"relative w-10 h-10 rounded-full ring-2 ring-amber-400/50 shadow-lg\"\n                  />\n                </div>\n              </div>\n\n              {/* Header with Fancy Brand Logo */}\n              <div className={`px-4 py-2 flex items-center gap-3 ${\n                darkMode \n                  ? 'bg-gradient-to-r from-stone-900/80 to-transparent' \n                  : 'bg-gradient-to-r from-stone-100/80 to-transparent'\n              }`}>\n                <div className=\"flex flex-col\">\n                  <span \n                    className=\"text-[11px] font-bold tracking-[0.25em] uppercase\"\n                    style={{\n                      fontVariant: 'small-caps',\n                      background: 'linear-gradient(135deg, #d4af37 0%, #f4e4bc 50%, #d4af37 100%)',\n                      WebkitBackgroundClip: 'text',\n                      WebkitTextFillColor: 'transparent',\n                      textShadow: '0 1px 2px rgba(0,0,0,0.1)',\n                    }}\n                  >\n                    En Pensent\n                  </span>\n                  <span className=\"text-[7px] tracking-[0.15em] uppercase opacity-50\">\n                    Vision Data Card\n                  </span>\n                </div>\n              </div>\n              \n              {/* Main Content */}\n              <div className=\"flex-1 px-3 py-1.5 grid grid-cols-5 gap-2\">\n                {/* Left Column - Game Identity & Poetry (3 cols) */}\n                <div className=\"col-span-3 space-y-1.5\">\n                  {/* Game Title - Elegant Typography */}\n                  <div>\n                    <h3 \n                      className=\"font-serif font-bold text-sm leading-tight\"\n                      style={{ fontVariant: 'small-caps' }}\n                    >\n                      {gameData.white || 'White'}\n                    </h3>\n                    <div className=\"flex items-center gap-1 my-0.5\">\n                      <div className=\"h-px flex-1 bg-gradient-to-r from-amber-500/50 to-transparent\" />\n                      <span className=\"text-[8px] opacity-50 italic\">vs</span>\n                      <div className=\"h-px flex-1 bg-gradient-to-l from-amber-500/50 to-transparent\" />\n                    </div>\n                    <h3 \n                      className=\"font-serif font-bold text-sm leading-tight\"\n                      style={{ fontVariant: 'small-caps' }}\n                    >\n                      {gameData.black || 'Black'}\n                    </h3>\n                  </div>\n                  \n                  {/* Event & Date */}\n                  <div className=\"flex items-center justify-between text-[7px] opacity-60\">\n                    <span className=\"truncate max-w-[120px]\">{gameData.event || 'Chess Match'}</span>\n                    <span>{gameData.date || ''}</span>\n                  </div>\n                  \n                  {/* Poetry Section */}\n                  {truncatedPoetry ? (\n                    <div className={`p-2 rounded-lg ${\n                      darkMode ? 'bg-stone-800/50' : 'bg-amber-50/50'\n                    } border border-amber-500/20`}>\n                      <div className=\"flex items-center gap-1 mb-1\">\n                        <Feather className=\"w-2.5 h-2.5 text-amber-500\" />\n                        <span className=\"text-[6px] uppercase tracking-wider text-amber-600 dark:text-amber-400\">\n                          {poetry?.style || 'poetry'}\n                        </span>\n                      </div>\n                      <p className=\"text-[8px] italic leading-relaxed opacity-80 line-clamp-2\">\n                        \"{truncatedPoetry}...\"\n                      </p>\n                    </div>\n                  ) : (\n                    /* MVP Section if no poetry */\n                    mvpPiece && (\n                      <div className={`p-2 rounded-lg ${\n                        darkMode \n                          ? 'bg-gradient-to-r from-amber-900/30 to-orange-900/30 border border-amber-500/20' \n                          : 'bg-gradient-to-r from-amber-100/80 to-orange-100/80 border border-amber-300'\n                      }`}>\n                        <div className=\"flex items-center gap-2\">\n                          <div \n                            className=\"w-7 h-7 rounded flex items-center justify-center text-base shadow-lg ring-1 ring-amber-400/50\"\n                            style={{ \n                              backgroundColor: (mvpPiece.color === 'w' ? whitePalette : blackPalette)[mvpPiece.piece],\n                            }}\n                          >\n                            {PIECE_SYMBOLS[mvpPiece.piece][mvpPiece.color]}\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-1\">\n                              <Trophy className=\"w-2.5 h-2.5 text-amber-500\" />\n                              <span className=\"text-[7px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wider\">\n                                Most Valuable Piece\n                              </span>\n                            </div>\n                            <p className=\"text-[8px] font-medium\">\n                              {mvpPiece.color === 'w' ? 'White' : 'Black'} {PIECE_NAMES[mvpPiece.piece]} ‚Ä¢ {mvpPiece.moves} moves\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    )\n                  )}\n                  \n                  {/* Color Palette Legend */}\n                  <div className=\"space-y-1\">\n                    <div className=\"flex items-center gap-1\">\n                      <Sparkles className=\"w-2 h-2 text-primary\" />\n                      <span className=\"text-[6px] uppercase tracking-wider opacity-60\">\n                        {palette.name} Palette\n                      </span>\n                    </div>\n                    <div className=\"flex items-center justify-between gap-2\">\n                      <div className=\"flex items-center gap-1.5\">\n                        <span className=\"text-[7px] text-sky-400\">\n                          {theme?.whiteEmoji || '‚ùÑÔ∏è'}\n                        </span>\n                        {renderPaletteRow('w')}\n                      </div>\n                      <div className=\"flex items-center gap-1.5\">\n                        <span className=\"text-[7px] text-rose-400\">\n                          {theme?.blackEmoji || 'üî•'}\n                        </span>\n                        {renderPaletteRow('b')}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Right Column - Stats (2 cols) */}\n                <div className=\"col-span-2 space-y-1.5\">\n                  {/* Result Badge */}\n                  {gameData.result && (\n                    <div className=\"text-center\">\n                      <Badge \n                        className=\"bg-gradient-to-r from-amber-500 to-amber-600 text-white border-0 font-bold px-3\"\n                      >\n                        {gameData.result}\n                      </Badge>\n                    </div>\n                  )}\n                  \n                  {/* Territory Control */}\n                  <div className={`rounded-lg p-1.5 ${darkMode ? 'bg-stone-800/60' : 'bg-stone-200/60'}`}>\n                    <div className=\"flex items-center gap-1 mb-1\">\n                      <MapPin className=\"w-2 h-2 text-primary\" />\n                      <span className=\"text-[6px] uppercase tracking-wider opacity-70\">Territory</span>\n                    </div>\n                    <div className=\"space-y-0.5\">\n                      <div className=\"flex items-center gap-1\">\n                        <span className=\"text-[7px] w-3 text-sky-400\">‚ôî</span>\n                        <div className=\"flex-1 h-1.5 rounded-full overflow-hidden bg-stone-300/30\">\n                          <div \n                            className=\"h-full bg-gradient-to-r from-sky-400 to-sky-500\"\n                            style={{ width: `${territoryStats.whitePercent}%` }}\n                          />\n                        </div>\n                        <span className=\"text-[6px] font-mono w-5 text-right\">{territoryStats.whitePercent}%</span>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <span className=\"text-[7px] w-3 text-rose-400\">‚ôö</span>\n                        <div className=\"flex-1 h-1.5 rounded-full overflow-hidden bg-stone-300/30\">\n                          <div \n                            className=\"h-full bg-gradient-to-r from-rose-400 to-rose-500\"\n                            style={{ width: `${territoryStats.blackPercent}%` }}\n                          />\n                        </div>\n                        <span className=\"text-[6px] font-mono w-5 text-right\">{territoryStats.blackPercent}%</span>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Game Phases */}\n                  <div className={`rounded-lg p-1.5 ${darkMode ? 'bg-stone-800/60' : 'bg-stone-200/60'}`}>\n                    <div className=\"flex items-center gap-1 mb-1\">\n                      <Clock className=\"w-2 h-2 text-primary\" />\n                      <span className=\"text-[6px] uppercase tracking-wider opacity-70\">Phases</span>\n                    </div>\n                    <div className=\"flex items-center gap-0.5 h-2 rounded-full overflow-hidden\">\n                      <div \n                        className=\"h-full bg-gradient-to-r from-emerald-400 to-emerald-500\"\n                        style={{ flex: phaseAnalysis.opening || 1 }}\n                      />\n                      <div \n                        className=\"h-full bg-gradient-to-r from-amber-400 to-amber-500\"\n                        style={{ flex: phaseAnalysis.middlegame || 1 }}\n                      />\n                      <div \n                        className=\"h-full bg-gradient-to-r from-violet-400 to-violet-500\"\n                        style={{ flex: phaseAnalysis.endgame || 1 }}\n                      />\n                    </div>\n                    <div className=\"flex justify-between mt-0.5\">\n                      <span className=\"text-[5px] text-emerald-400\">Open</span>\n                      <span className=\"text-[5px] text-amber-400\">Mid</span>\n                      <span className=\"text-[5px] text-violet-400\">End</span>\n                    </div>\n                  </div>\n                  \n                  {/* Move Counter */}\n                  <div className=\"text-center\">\n                    <div className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${\n                      darkMode ? 'bg-stone-800' : 'bg-stone-200'\n                    }`}>\n                      <Zap className=\"w-2 h-2 text-primary\" />\n                      <span className=\"text-[8px] font-mono font-bold\">{totalMoves}</span>\n                      <span className=\"text-[6px] opacity-60\">moves</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Footer - Elegant Branding */}\n              <div className={`px-3 py-1.5 flex items-center justify-between ${\n                darkMode ? 'bg-stone-900/80' : 'bg-stone-100/80'\n              }`}>\n                <span className=\"text-[6px] tracking-[0.2em] uppercase opacity-40\">\n                  enpensent.com\n                </span>\n                <span \n                  className=\"text-[7px] tracking-[0.15em]\"\n                  style={{\n                    fontVariant: 'small-caps',\n                    background: 'linear-gradient(90deg, #d4af37, #f4e4bc, #d4af37)',\n                    WebkitBackgroundClip: 'text',\n                    WebkitTextFillColor: 'transparent',\n                  }}\n                >\n                  ‚ôî Certified Vision ‚ôö\n                </span>\n                <span className=\"text-[6px] tracking-wider opacity-40\">\n                  #{String(totalMoves).padStart(3, '0')}\n                </span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </motion.div>\n\n      {/* Card Features */}\n      {showSpecs && (\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"grid grid-cols-2 gap-2 text-xs text-center\"\n        >\n          <div className=\"p-2 rounded-lg bg-accent/30\">\n            <p className=\"font-medium\">Front Side</p>\n            <p className=\"text-[10px] text-muted-foreground\">Full game analytics</p>\n          </div>\n          <div className=\"p-2 rounded-lg bg-accent/30\">\n            <p className=\"font-medium\">Back Side</p>\n            <p className=\"text-[10px] text-muted-foreground\">QR to digital vision</p>\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default VisionInfoCardPreview;\n";export{e as default};
