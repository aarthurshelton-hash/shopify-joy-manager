import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as D,bE as k,af as M,ag as z,ai as B,y as q,bF as L,bG as P,b6 as S,ae as A,bH as H,ah as G,bI as I,B as O,bJ as K,bK as U,bL as _,bM as T,bN as E,bO as Y,bP as W,bQ as X,bR as R,bS as Z,bT as F,bU as J,bV as V,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as De,c6 as ke,c7 as Me,an as ze,av as Be,aw as qe,c8 as Le,aM as Pe,c9 as Se,H as Ae,P as He,ca as Ge,b3 as Ie,bs as Oe,be as Ke,cb as Ue,aP as _e,cc as Te,d as Ee,b2 as Ye,a9 as We,cd as Xe,ce as Re,cf as Ze,al as Fe,au as Je}from"./index-Ddz_gr3U.js";import{L as Ve}from"./LiveColorLegend-C7J9thiC.js";import{T as $e}from"./trending-down-CNfnujx6.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CNoryBnd.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function ut(){const e=["rNP1qNy","odi3nZa0tLfRqMvQ","zMvU","Dwjxy2G","u3rHBgvTyxrLiq","sxrMvui","rhjHDYbIEsbPBG","vgHYzwvMB2XKia","ie5VigXLz2fSia","CMvWzxrPDgLVBG","DhjHy2u","zvPduuK","AxneCMf3","B1bny0e","owD4tgziCq","mJuZnZG5nMPYDMDOBa","ig1HDgvYAwfSlG","uKPjEfK","uNH1vxK","DMuGCNvSzs4","y3Dwquq","uuLgCNq","rhjHDYbIEsb0Aa","C2HVCNrnzxnZyq","BgfIBguU","uMvWzxrPDgLVBG","Aw5ZDwzMAwnPzq","qujszfu","y29UC3rYDwn0BW","EwXLC04","C3rHBgvTyxrL","x3j1Bgu","zfjLCgv0AxrPBW","EwDKBgi","AxnjBNn1zMzPyW","Cwv0z0G","DgfIBgu","nJe4odGYrLrjuunq","BMn0Aw9UkcKG","rhjHDW","CM4GDgHPCYiPka","t2XSuNq","sK9pt1K","kcGOlISPkYKRkq","qLjYBuW","Aw5MBW","EKHHDLG","yMfKyve","DgHYzwvMB2XKxW","CMvLzM9SzcbYzq","zxjYB3i","y3rVCIGICMv0Dq","nNDpzgXUuG","AxntDgfSzw1HDa","y29UC29Szq","ChjVDg90ExbL","z0jmsNy","ntaTtw92zsbsDq","mta0mtKXnxDzEwPquq","BNqGtwf0zxjPyq","u2D5yvu","sunWBKu","x19WCM90B19F","CMvHC29U","yMLUza","mtyYodG2rhHjswTr","CMv0DxjUicHMDq","zMLMDhLFBw92zq","AwvUDe1HDgvYAq","BgvUz3rO","ANDAB1i","ue5VEwm","E30Uy29UC3rYDq","D2fYBG","Afbwuha","Dg9tDhjPBMC","odm4ode4BgvureXT","yxbWBhK","Bw92zxmGyxzHAq","BMn0q2W","mZu0nteWufDItxz3","u0PmBvK","BwvZC2fNzq","rejJDKC","C3bSAxq"];return(ut=function(){return e})()}!function(){const e=mt,t=ut();for(;;)try{if(209392===parseInt(e(432))/1+parseInt(e(489))/2+-parseInt(e(504))/3*(-parseInt(e(453))/4)+-parseInt(e(447))/5+-parseInt(e(443))/6+-parseInt(e(510))/7+parseInt(e(467))/8*(-parseInt(e(466))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){const e=mt,t={PNoyc:function(e,t){return e(t)},Nbnoy:e(508)};let n=!0;return function(s,r){const a=e,i={OllRt:function(e,n){return t[mt(438)](e,n)},cwVAD:function(e,t){return e+t},RxuUy:a(439)+a(503)+a(492)+" )",DBcvG:t.Nbnoy},o=n?function(){const e=a;if("gBLJv"===i[e(450)]){if(r){const e=r.apply(s,arguments);return r=null,e}}else _0x205da1=i[e(493)](_0x386cee,i[e(472)](e(433)+e(490),i[e(470)])+");")()}:function(){};return n=!1,o}}()(void 0,function(){const e=mt;return dt[e(442)]().search(e(495)+"+$")[e(442)]()[e(480)+"r"](dt).search(e(495)+"+$")});function mt(e,t){e-=431;const n=ut();let s=n[e];if(void 0===mt.fhuPdL){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};mt.TMFfQG=r,mt.AfoQKH={},mt.fhuPdL=!0}const a=e+n[0],i=mt.AfoQKH[a];if(i)s=i;else{const e=function(e){this.WXOZYh=e,this.DnqJuI=[1,0,0],this.giGxab=function(){return"newState"},this.hDfLQy="\\w+ *\\(\\) *{\\w+ *",this.YgdJAJ="['|\"].+['|\"];? *}"};e.prototype.WuUMIf=function(){const e=new RegExp(this.hDfLQy+this.YgdJAJ).test(this.giGxab.toString())?--this.DnqJuI[1]:--this.DnqJuI[0];return this.yHCavq(e)},e.prototype.yHCavq=function(e){return Boolean(~e)?this.aDFmeQ(this.WXOZYh):e},e.prototype.aDFmeQ=function(e){for(let t=0,n=this.DnqJuI.length;t<n;t++)this.DnqJuI.push(Math.round(Math.random())),n=this.DnqJuI.length;return e(this.DnqJuI[0])},new e(mt).WuUMIf(),s=mt.TMFfQG(s),mt.AfoQKH[a]=s}return s}dt();const ht=function(){const e=mt,t={};t[e(513)]=function(e,t){return e===t},t.qetgH=e(499);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(513)](a(499),n[a(487)])){const e=s?function(){const e=a;if(r){if(e(463)==e(463)){const n=r[e(444)](t,arguments);return r=null,n}{const t=_0x1cb07c[e(444)](_0x3ac93c,arguments);return _0x500c2c=null,t}}}:function(){};return s=!1,e}return _0x10ae48[a(464)]()||_0x4b5316[a(505)+"e"]()}}();function xt(e){return function(e){const t=mt,n={};n[t(481)]="stalemate",n[t(457)]=t(456)+t(460)+"moves available.",n[t(452)]=t(474)+t(501)+"petition.",n[t(455)]=function(e,t){return e!==t},n.JOOOY=t(478)+"nt_material",n[t(446)]=t(458)+"sufficient"+t(468),n[t(465)]="Insufficie"+t(511)+"l",n.VAXSb=t(509)+"le",n[t(441)]="unknown";const s=n;if(e[t(505)+"e"]()){const e={};return e[t(515)]=s[t(481)],e[t(449)]=s[t(457)],e[t(475)+"ge"]=t(456),e}if(e["isThreefol"+t(484)+"n"]()){const e={};return e[t(515)]=t(500)+t(461),e.message=s[t(452)],e[t(475)+"ge"]=t(459)+t(477),e}if(e[t(486)+t(435)+"al"]()){if(s.ubWch(t(469),"jLSkg")){const e={};return e[t(515)]=s[t(494)],e[t(449)]=s[t(446)],e.shortMessage=s[t(465)],e}_0x87abb4=_0x444d89}const r=e[t(454)]();if(parseInt(r[t(451)](" ")[4],10)>=100){const e={};return e.reason=t(434)+t(483),e[t(449)]="Draw by the fifty-mo"+t(471),e.shortMessage=s.VAXSb,e}const a={};return a.reason=s[t(441)],a[t(449)]="Game drawn!",a.shortMessage=t(491),a}(e).message}ht(void 0,function(){const e=mt,t={ABRdU:e(482),QIFrt:"Stalemate!",jwZoR:function(e,t){return e(t)},BRrmL:function(e,t){return e+t},ygdlb:e(433)+e(490),XkhmR:e(502),SJLmY:"exception",dkXSO:e(488),SgyaU:function(e,t){return e<t}},n=function(){const n=e;let s;try{if("nAfCw"===n(498)){const e={};return e[n(515)]=t[n(479)],e[n(449)]="Stalemate!"+n(460)+n(445)+n(476),e.shortMessage=t[n(473)],e}s=t[n(437)](Function,t[n(496)](t[n(485)]+(n(439)+n(503)+n(492)+" )"),");"))()}catch(r){s=window}return s}(),s=n[e(506)]=n[e(506)]||{},r=["log",e(440),e(497),t.XkhmR,t[e(448)],t.dkXSO,e(462)];for(let a=0;t[e(512)](a,r[e(436)]);a++){const t=ht[e(480)+"r"][e(507)][e(431)](ht),n=r[a],i=s[n]||t;t[e(514)]=ht[e(431)](ht),t[e(442)]=i[e(442)][e(431)](i),s[n]=t}})(),function(){const e=gt,t=ft();for(;;)try{if(993578===-parseInt(e(285))/1*(parseInt(e(257))/2)+parseInt(e(235))/3+parseInt(e(275))/4+parseInt(e(271))/5+parseInt(e(292))/6+-parseInt(e(302))/7+parseInt(e(304))/8*(-parseInt(e(248))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(204)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=gt;return pt[e(252)]()[e(266)]("(((.+)+)+)+$")[e(252)]()[e(286)+"r"](pt)[e(266)]("(((.+)+)+)+$")});function ft(){const e=["shvPyMq","yMLUza","wvDsrgW","C2LUzq","y3jLyxrLqNvMzG","DwvbDfrPBwu","mZuXndm4m3r3zvDczG","B0nVBNrLEhq","DhLWzq","C3rVCa","Dg9tDhjPBMC","y29UC29Szq","r2HWuNK","t21sv3q","D1vrDvO","odi0otmYru9tB1DL","B0LzqwG","zxHJzxb0Aw9U","q3HOCNm","A1vmCLy","DMfSDwu","y3rVCIGICMv0Dq","zMfUBg0","zxjYB3i","C2vHCMnO","kcGOlISPkYKRkq","z2fPBK5Vzgu","Bg93CgfZCW","qK1mBMO","otm2mJCXnu1trfP5wG","DLDVBw0","AKfqBKS","z2fTzvn0yxj0","mJyYmtaYnhzTsu1qzG","AfncvMS","uND3DfC","ChbVCNrLza","uwzMDeW","rM5Lr0q","BgLUzwfYuMfTCa","C0vAzwG","vg9wywX1zuf0va","y3jLyxrLqMLXDq","ngrTquTyCa","y29UC3rYDwn0BW","z2v0q2HHBM5LBa","DhjPyw5NBgu","y2XVC2u","yvn2EwS","z2fPBG","ndK0mtiXnKr0tMz1BW","y29UDgv4Da","D2fYBG","C3rHCNq","y2HLy2TTyxrL","DMLJDg9YEq","yNvMzMvY","Aw5PDef1zgLV","CMv0DxjUicHMDq","zNjLCxvLBMn5","ntC1mJa0n1fMyM1esG","qLHlz1a","mtzfqKvRwxq","zxHWB25LBNrPyq","quTUuLi","t2vZBe8","DwfvDKO","BfffyK0","y3jLyxrLt3nJAq","zgvZDgLUyxrPBW","qvbjig5VDcbZDq","BMn0Aw9UkcKG","zKz0AeK","yxbWBhK","Bg9N","wLfts3m","y2fWDhvYzq","u2P0rvO","DhjHy2u","vgLTzq","ze14rMy","y3vYCMvUDfrPBq","Ew5sCuS","zKLlEwK","q3nbt1i","C3bvwgy","qNz3t3y","C2fTCgXLuMf0zq","EePwCeS","CMfUzg9T","C2f3Dg9VDgG","rwnTz0W","uhjOAfq","EgrWCLa","zw5Xs08","tLrmq0y","y3jLyxrLr2fPBG","v2vIief1zgLVia","D3HXrxO","zxjtB3vYy2u","y29UBMvJDa","y3vYCMvUDa","yMvbD0O","EuDNuha","mJy4ndqWnNzuA3Pywa","C2v0vMfSDwvbDa","z2fTzuvUza","Aw5MBW","CgXHEvnVDw5K","BfjHBxbuB1zHBa","Aw1L"];return(ft=function(){return e})()}function gt(e,t){e-=203;const n=ft();let s=n[e];if(void 0===gt.LztNki){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.mGMRZb=r,gt.lBPGAf={},gt.LztNki=!0}const a=e+n[0],i=gt.lBPGAf[a];if(i)s=i;else{const e=function(e){this.gmuNTA=e,this.XZjOGL=[1,0,0],this.DHOeKC=function(){return"newState"},this.zzrHJT="\\w+ *\\(\\) *{\\w+ *",this.sdztsj="['|\"].+['|\"];? *}"};e.prototype.GpDlEj=function(){const e=new RegExp(this.zzrHJT+this.sdztsj).test(this.DHOeKC.toString())?--this.XZjOGL[1]:--this.XZjOGL[0];return this.PXjEaz(e)},e.prototype.PXjEaz=function(e){return Boolean(~e)?this.chFXml(this.gmuNTA):e},e.prototype.chFXml=function(e){for(let t=0,n=this.XZjOGL.length;t<n;t++)this.XZjOGL.push(Math.round(Math.random())),n=this.XZjOGL.length;return e(this.XZjOGL[0])},new e(gt).GpDlEj(),s=gt.mGMRZb(s),gt.lBPGAf[a]=s}return s}pt();const vt=function(){const e=gt,t={};t[e(222)]=e(261);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(222)]==n[a(222)]){const e=s?function(){if(r){const e=r[a(204)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x1a6afd[a(294)](a(228)+a(312)+a(278))}}();vt(void 0,function(){const e=gt,t={NChos:function(e,t){return e+t},Cxhrs:function(e){return e()},BMLnj:"warn",GhpRy:e(238),NTLCF:e(265),xJVpK:e(259),fanlm:function(e,t){return e!==t},wUQuZ:e(309)};let n;try{const s=Function(t.NChos(e(300)+e(313)+"{}.constru"+e(263)+'rn this")( )',");"));n=t[e(260)](s)}catch(a){n=window}const s=n[e(253)]=n[e(253)]||{},r=[e(205),t[e(270)],t[e(254)],t[e(226)],t[e(219)],"table",e(209)];for(let i=0;i<r.length;i++)if(t[e(264)](t[e(256)],"cOEhU")){const t=vt[e(286)+"r"].prototype[e(243)](vt),n=r[i],a=s[n]||t;t.__proto__=vt[e(243)](vt),t[e(252)]=a[e(252)][e(243)](a),s[n]=t}else _0x16eab6=_0x5c6846})();const bt=(e=!0,n=.5)=>{const s=gt,r={LhTUx:"Web Audio API not su"+s(278),AKnRR:function(e,t){return e===t},SjtEZ:function(e,t){return e||t},uaUvJ:function(e,t){return e+t},ynRqK:function(e,t){return e-t},DAYSS:function(e){return e()},RwwtW:function(e,t){return e||t},wxqEz:function(e,t){return e*t},oIYAh:function(e,t){return e<t},sEZeh:function(e,t){return e-t},OmRWt:"move",enqKO:"sine",hSBVk:function(e,t,n,s,r,a){return e(t,n,s,r,a)},OeslO:function(e,t,n){return e(t,n)},yGgPp:function(e,t,n,s,r,a){return e(t,n,s,r,a)},spUXf:"square",vWomm:"castle",dMxFf:function(e,t,n,s,r,a){return e(t,n,s,r,a)},fFthI:"check",xdprP:s(296),FneGD:function(e,t,n){return e(t,n)},Huibd:function(e,t,n){return e(t,n)},QDifb:s(237),ZQSKs:function(e,t,n,s,r,a){return e(t,n,s,r,a)},beAwJ:function(e,t,n,s,r,a){return e(t,n,s,r,a)},BvwOv:function(e,t,n){return e(t,n)},BXKgP:"illegal",fIKyi:s(221),qPDTp:function(e,t){return e!==t},QfftL:s(244),CsAOR:function(e,t){return e(t)},PrhhT:function(e,t,n){return e(t,n)}},a={};a[s(293)]=null,a[s(268)]=null;const i=r[s(215)](t.useRef,a),o=t.useCallback(()=>{const e=s;if(!i.current[e(293)])try{const t=new(window.AudioContext||window["webkitAudi"+e(249)]),s=t[e(227)]();s[e(231)](t[e(311)+"n"]),s[e(291)][e(262)]=n;const r={};r[e(293)]=t,r[e(268)]=s,i[e(232)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;if(!r[e(306)](e(290),"aSvyk"))return _0x2210d5.toString()[e(266)]("(((.+)+)+)+$")[e(252)]().constructor(_0xa563fe).search(e(267)+"+$");i[e(232)][e(268)]&&(i[e(232)][e(268)][e(291)][e(262)]=n)},[n]);const c=t.useCallback((t,n,a=s(245),c=.01,l=.1,u)=>{const d=s;if(!e)return;o();const{context:m,gainNode:h}=i[d(232)];if(r[d(208)](!m,!h))return;const x=m[d(310)+"llator"](),p=m[d(227)]();x[d(250)]=a,x.frequency[d(236)+"Time"](t,m[d(212)+"e"]),u&&x[d(301)]["exponentialRampToVal"+d(247)](u,r[d(308)](m.currentTime,n)),p[d(291)][d(236)+d(210)](0,m[d(212)+"e"]),p[d(291)][d(281)+d(283)+"ime"](1,r[d(308)](m[d(212)+"e"],c)),p.gain[d(305)+d(240)+d(247)](.01,r[d(213)](m[d(212)+"e"]+n,l)),p[d(291)][d(281)+"ToValueAtT"+d(241)](0,m[d(212)+"e"]+n),x[d(231)](p),p[d(231)](h),x[d(295)](m[d(212)+"e"]),x[d(251)](m[d(212)+"e"]+n)},[e,o]),l=r[s(223)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r.DAYSS(o);const{context:c,gainNode:l}=i[a(232)];if(r[a(277)](!c,!l))return;const u=r[a(229)](c.sampleRate,t),d=c[a(246)+"er"](1,u,c[a(218)]),m=d[a(287)+"Data"](0);for(let e=0;r[a(258)](e,u);e++)m[e]=r[a(282)](r.wxqEz(Math[a(220)](),2),1);const h=c[a(246)+a(230)]();h[a(298)]=d;const x=c[a(284)+"adFilter"]();x[a(250)]=a(269),x[a(301)].value=n;const p=c[a(227)]();p[a(291)][a(236)+a(210)](.3,c[a(212)+"e"]),p[a(291)]["exponentia"+a(240)+"ueAtTime"](.01,c[a(212)+"e"]+t),h.connect(x),x.connect(p),p.connect(l),h[a(295)](c[a(212)+"e"]),h.stop(r[a(308)](c.currentTime,t))},[e,o]),u=r[s(242)](t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(255)]:c(800,.08,r[n(225)],.005,.05),r[n(276)](c,400,.06,"triangle",.005,.04);break;case n(207):r[n(307)](l,.12,2e3),r[n(234)](c,300,.1,r.spUXf,.005,.08),r[n(234)](c,150,.15,n(245),.01,.1);break;case r[n(272)]:r.dMxFf(c,600,.06,n(245),.005,.04),r[n(307)](setTimeout,()=>c(700,.06,"sine",.005,.04),80);break;case r[n(203)]:r[n(211)](c,880,.15,n(288),.01,.1),setTimeout(()=>c(1100,.12,n(288),.01,.08),120);break;case r[n(224)]:c(880,.2,r[n(225)],.01,.15),setTimeout(()=>c(660,.2,n(245),.01,.15),150),r[n(307)](setTimeout,()=>c(440,.3,"sine",.01,.2),300),r[n(280)](setTimeout,()=>c(330,.4,n(245),.01,.3),500);break;case n(274):c(523,.12,r[n(225)],.01,.08),setTimeout(()=>c(659,.12,n(245),.01,.08),100),r[n(242)](setTimeout,()=>c(784,.2,n(245),.01,.15),200);break;case r.QDifb:r.hSBVk(c,440,.15,n(288),.01,.1),setTimeout(()=>c(349,.25,"triangle",.01,.2),150);break;case n(297):c(523,.1,r[n(225)],.01,.08),setTimeout(()=>c(659,.1,n(245),.01,.08),100),setTimeout(()=>c(784,.1,n(245),.01,.08),200),r[n(307)](setTimeout,()=>c(1047,.3,n(245),.01,.25),300);break;case"defeat":r[n(206)](c,392,.2,n(245),.02,.15),setTimeout(()=>c(349,.2,n(245),.02,.15),200),setTimeout(()=>c(330,.3,"sine",.02,.25),400),setTimeout(()=>c(262,.4,n(245),.02,.35),650);break;case"draw":r[n(233)](c,440,.15,r[n(225)],.01,.1),r[n(217)](setTimeout,()=>c(440,.15,n(245),.01,.1),180),setTimeout(()=>c(523,.2,"sine",.01,.15),360);break;case r[n(303)]:c(200,.1,r[n(216)],.005,.08),r[n(276)](c,150,.08,r[n(214)],.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=gt;i[e(232)].context&&(r.qPDTp(r[e(279)],r[e(279)])?_0x3e2144[e(232)][e(293)].close():i[e(232)][e(293)][e(289)]())},[]);const d={};return d[s(239)]=u,d[s(299)]=o,d};function yt(){const e=["sNroDxi","y3rVCIGICMv0Dq","zw5HyMXLza","BgvUz3rO","yxbWBhK","DgfIBgu","z2Hcq08","r0nlD3K","CM4GDgHPCYiPka","x19WCM90B19F","wKXSBeO","AMPiEwS","mtvsC2jntKi","C2P6wNi","y29UC29Szq","mJq4nte2CevdD3rM","y2HLC3mTC291BG","ntq5mJqYnffsDK9OEG","CwTrvvu","DhDqrxe","wwzWyKG","kcGOlISPkYKRkq","Dg9tDhjPBMC","Aw5MBW","nNnfwxPkCG","C2vHCMnO","ChjVDg90ExbL","z3vIz0S","zxjYB3i","wMjSt2q","zc1Zzxr0Aw5NCW","BenmCMe","nJKZotaWy1bxDu5i","ndK4mZKZu3rgA3LH","odu3ntqYDw1HyuTZ","E30Uy29UC3rYDq","otLRqufAtw8","BMfTzq","y2nLDuG","rvvREK4","yMLUza","zxHJzxb0Aw9U","CMv0DxjUicHMDq","EfPqChC","v3bhD08","ANHJrhm","y29UC3rYDwn0BW","vunHDvC","BMn0Aw9UkcKG","ntGZnZeWwKDprMve","mtm3mdqYBgLHsMfQ"];return(yt=function(){return e})()}const wt=Nt;!function(){const e=Nt,t=yt();for(;;)try{if(356630===-parseInt(e(525))/1+parseInt(e(507))/2+parseInt(e(508))/3+-parseInt(e(490))/4*(parseInt(e(487))/5)+-parseInt(e(499))/6*(-parseInt(e(509))/7)+parseInt(e(492))/8+parseInt(e(511))/9*(-parseInt(e(524))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){let e=!0;return function(t,n){const s=Nt,r={};r[s(494)]=function(e,t){return e+t};const a=r,i=e?function(){const e=s,r={JtNur:function(e,t){return a.twPEq(e,t)},WpGwO:"return (function() ",sjzZr:"{}.constru"+e(527)+e(483)+" )"};if(n){if("kNacD"!==e(520)){const s=n[e(479)](t,arguments);return n=null,s}_0x556c88=_0x3b2ac9(r[e(526)](r[e(519)]+r[e(488)],");"))()}}:function(){};return e=!1,i}}()(void 0,function(){const e=Nt,t={};t[e(518)]=e(496)+"+$";const n=t;return jt[e(497)]()[e(500)](n.xZPpw)[e(497)]()[e(521)+"r"](jt)[e(500)](n[e(518)])});jt();const Ct=function(){const e=Nt,t={cBURd:function(e,t){return e!==t}};t[e(504)]=e(502),t[e(482)]="OzbmL";const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(513)]=function(e,t){return e+t};const o=i;if("cJtbu"===a(514)){let e;try{e=_0x14207f(o[a(513)]("return (fu"+a(523)+(a(510)+a(527)+a(483))+" )",");"))()}catch(c){e=_0x1b38ab}return e}{const e=s?function(){const e=a;if(r){if(n.cBURd(n.ZblOd,n[e(482)])){const e=r.apply(t,arguments);return r=null,e}{const t=_0x5c9235[e(479)](_0x219a4b,arguments);return _0x5947f3=null,t}}}:function(){};return s=!1,e}}}();function Nt(e,t){e-=477;const n=yt();let s=n[e];if(void 0===Nt.vyZYYF){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.jsGlvR=r,Nt.LjBRNa={},Nt.vyZYYF=!0}const a=e+n[0],i=Nt.LjBRNa[a];if(i)s=i;else{const e=function(e){this.CQKNgB=e,this.jlrXyh=[1,0,0],this.jXjRvk=function(){return"newState"},this.rnfLzY="\\w+ *\\(\\) *{\\w+ *",this.LyVmdo="['|\"].+['|\"];? *}"};e.prototype.AIJzNw=function(){const e=new RegExp(this.rnfLzY+this.LyVmdo).test(this.jXjRvk.toString())?--this.jlrXyh[1]:--this.jlrXyh[0];return this.ZLMKJn(e)},e.prototype.ZLMKJn=function(e){return Boolean(~e)?this.rvixMZ(this.CQKNgB):e},e.prototype.rvixMZ=function(e){for(let t=0,n=this.jlrXyh.length;t<n;t++)this.jlrXyh.push(Math.round(Math.random())),n=this.jlrXyh.length;return e(this.jlrXyh[0])},new e(Nt).AIJzNw(),s=Nt.jsGlvR(s),Nt.LjBRNa[a]=s}return s}Ct(void 0,function(){const e=Nt,t={lCLra:function(e,t){return e+t},UCauW:function(e){return e()},jjHyk:"log",qkQUU:"warn",YfpbH:e(498),ghBCO:e(503),ZLllJ:function(e,t){return e<t}},n=t[e(522)](function(){const n=e;let s;try{s=Function(t[n(506)](n(517)+n(523)+(n(510)+n(527)+n(483)+" )"),");"))()}catch(r){s=window}return s}),s=n[e(489)]=n.console||{},r=[t[e(486)],t[e(493)],t[e(495)],t[e(481)],e(516),e(480),"trace"];for(let a=0;t[e(485)](a,r[e(478)]);a++){const t=Ct[e(521)+"r"][e(501)][e(515)](Ct),n=r[a],i=s[n]||t;t[e(484)]=Ct[e(515)](Ct),t[e(497)]=i[e(497)].bind(i),s[n]=t}})();const Dt={};Dt[wt(512)]=wt(491)+wt(505);const kt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(477)]}))}),Dt)),Mt=qt;!function(){const e=qt,t=Lt();for(;;)try{if(967714===parseInt(e(295))/1*(-parseInt(e(383))/2)+-parseInt(e(399))/3*(-parseInt(e(479))/4)+parseInt(e(353))/5*(-parseInt(e(452))/6)+parseInt(e(208))/7*(parseInt(e(405))/8)+parseInt(e(282))/9*(-parseInt(e(253))/10)+parseInt(e(433))/11*(parseInt(e(239))/12)+-parseInt(e(449))/13)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const zt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(462)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=qt,t={};t[e(472)]=e(328)+"+$";const n=t;return zt[e(434)]()[e(228)](n.useJX)[e(434)]().constructor(zt)[e(228)](n[e(472)])});zt();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(462)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function qt(e,t){e-=207;const n=Lt();let s=n[e];if(void 0===qt.RIejuo){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.umgObh=r,qt.XUDrLN={},qt.RIejuo=!0}const a=e+n[0],i=qt.XUDrLN[a];if(i)s=i;else{const e=function(e){this.sjVtWo=e,this.FURtOl=[1,0,0],this.NFYrBZ=function(){return"newState"},this.DtdqyO="\\w+ *\\(\\) *{\\w+ *",this.oGnuHJ="['|\"].+['|\"];? *}"};e.prototype.MfdAHl=function(){const e=new RegExp(this.DtdqyO+this.oGnuHJ).test(this.NFYrBZ.toString())?--this.FURtOl[1]:--this.FURtOl[0];return this.DDiBrk(e)},e.prototype.DDiBrk=function(e){return Boolean(~e)?this.mGDKLB(this.sjVtWo):e},e.prototype.mGDKLB=function(e){for(let t=0,n=this.FURtOl.length;t<n;t++)this.FURtOl.push(Math.round(Math.random())),n=this.FURtOl.length;return e(this.FURtOl[0])},new e(qt).MfdAHl(),s=qt.umgObh(s),qt.XUDrLN[a]=s}return s}function Lt(){const e=["D2HPDgvFDgLTzq","mtuYBNHKC1DU","Dff5r1u","q2fUBM90igPVAq","D2LUBMvYx2LK","qKHouNa","CfDwBMu","C3rHCNrLzf9HDa","CgDU","mJa3ntaXsuzbC0Lh","ufP0vNC","y2HLy2S","zhKGC3rHCNrLza","v2HPDguGD2LUCW","BLDStNq","C1nrC1m","Bw92zv9JB3vUDa","AgfUz2vZ","Awq9zxeU","rfvJrxe","Axnhyw1Lt3zLCG","CwnKr2K","D2HPDgvqBgf5zq","tw92zsbLCNjVCG","BMv3uMf0Aw5N","x3jLBwfPBMLUzW","BIb5B3vYig93BG","z2vUzxjHDgvFyW","s2zNugu","C2vHCMnO","tfrguKG","lwfJy2vWDhmGAq","CMvTB3zLq2HHBG","y2jvzfy","DxnLCL9Pza","zxjFAwq","Bw92zv9UDw1Izq","AvDpvKC","BxLdB2XVCG","DxbKyxrL","nJm3oty5mKPeBMXQuW","y2HLy2TTyxrL","DgfIBgu","D2HPDgvFD2LUCW","t01Qs3u","uKngDKy","rwXzwvm","D2fYBG","DhrL","Dw50Aw1Lza","AxnmB2fKAw5N","zezZue4","qM5ovKK","vgn6Dfa","ndGZndGXmefhC3Pfyq","B2nHEMq","tM9ysLG","E30Uy29UC3rYDq","CMvZDwX0","BwvZC2fNzq","igv4CgLYzwqGyW","uu5LAxq","shvxA2y","wxzeuhy","DMLJDg9YEq","EKDQrxq","rMfPBgvKihrVia","Bw92zq","vhjeqK0","qLbUBwu","z1jrwfO","C3rHDhvZ","Bw92zunVDw50","vvbeqvrf","zMvU","y3jLyxrLzf9HDa","BMn0Aw9UkcKG","ExHgy3i","D2HPDgvFCgXHEq","AuXsEeu","AM9PBIbNyw1L","z2fTzvn0yxj0","CKLK","owLovuHuAG","t0DTww8","t1z4D2W","ue5TrKW","zKDvAxu","y29KztOG","ywHhr2e","y1Htthq","C2LUz2XL","CMvZAwDUr2fTzq","C3vJy2vZCW","yvjUt1m","Bw92zv91y2K","mJuXsgzNv0P0","ywn0AxzL","zMLUza","y2fWDhvYzq","CMfWAwrFmtu","tY1p","AM9PBKj5q29Kzq","s0fMAuS","y2Tyt1q","z2fTzvn0yxrL","wMrvD1y","y3jLyxrLigDHBq","y3vYCMvUDezLBG","rMfszwi","zhjHDW","y2HHBMDL","DxnLCL9PzcWGzq","rK13D24","y29Kzq","zM9YrwfJAa","y2fZDgXL","shbUB1u","yMXHy2TuAw1LuG","B3vUza","suvgEwi","yNvSBgv0xZe","uxbiD0W","A2DPzhi","q3n1v3a","Bg9FCMf0Aw5N","yMXHy2TFDgLTzq","tfjAEwq","BK1yDeK","kcGOlISPkYKRkq","Bg9N","u2rOrLG","Au9urxe","zwf0zsbHigDHBq","sgDYDgi","Bw5wu2y","yMXHy2TqywXLDa","yMXHy2TFCgXHEq","BxHNy3C","DxbKyxrLievmtW","C3rHCNrLzef0","ywrK","EuD6Agu","yMLUza","B2rL","z2fTzv9Pza","zseGww91igfYzq","C2P6wuW","Aw5MBW","AM1htgi","B2zMzxjeCMf3","AxndAgvJAW","y3jLyxrLzef0","y29UC29Szq","nte3nZaWwwj5teHu","vejezuq","y2HLC3nFBw92zq","AM9PBIbIEsbJBW","AKPoAwG","zKrhAKu","zgH6swG","AfvywgC","B0L0CNq","BIbPBIb0BYbJCG","z2v0qxzHAwXHyG","ChjUyu0","rxDQD3q","zwrvAfu","BMv3","r2fTzsbHBhjLyq","ywXS","uej0A24","EfjvueK","C2vSzwn0","AM9PBKDHBwu","yMXHy2TFD2LUCW","CMv0DxjUicHMDq","sw10rfy","y29TCgXLDgvK","Dg9ju09tDhjPBG","yMXPDhPFnq","sM9PBMvKigDHBq","zNjVBq","vgjzwhK","mZmWoePxvhPMCa","Dg9vChbLCKnHCW","uMzJuNy","CNbJ","C3vIC2nYAwjL","Ce1Azvm","Aw5Zzxj0","wgvpCeW","Cg9ZDgDYzxnFyW","D2HPDgvFCgfSzq","zxjYB3i","zwqHifDHAxrPBG","BMvS","DwrVywi","D2HPDgvqywXLDa","z0r5ufq","odCXnZDLuwjrywi","DhvYBG","y2HHBgXLBMDLxW","CgXHEwvYx2LK","zw1HAw5PBMC","yxnJzw5KAw5N","mJaWruXNA3Dk","BMPpCgi","y3vYCMvUDf9Mzq","BK9ZEge","r2fTzsbUB3qGzG","BgvUz3rO","DMvYyM9Zzq","yw5RthC","zYbMB3iGB3bWBW","sLHKuhK","y2HLC3nFz2fTzq","zwXVx3jHDgLUzW","AgfSBgvUz2uGyW","u2HiAg8","ihjHDgLUz3m6","rvLiuMm","sw52ywXPzcbVCG","z2fTzv9Pzd1LCq","D2HPDgvuAw1LuG","zg9XDha","C0zUCNO","shnPsha","x19WCM90B19F","AxndAgvJA21HDa","AgfSBgvUz2vFyW","tY1plu8","C3f1yxjL","B2zUDva","mtfMyLHJweG","Dg9tDhjPBMC","BIbPBIb0BYbQBW","y3jLyxrLr2fTzq","D25qyLO","vLPXveK","ww91ihjLC2LNBG","s2fJrNK","s21wDKq","CwT5Awu","C3vIC3rYAw5N","Bg9HzcbNyw1L","Aw5JBhvKzxm","D2HPDgu","Cgzkwwu","zxHJzxb0Aw9U","mJu5otG1n2zhwKnxva","r2fTzsbJCMvHDa","Aw4GysbNyw1L","mtHHvLrdDeq","Bwf5yMvtAw5NBa","ww91ihDVBIe","ihnLBNqGkg9WCa","y2fWDhvYzwq","C2fU","rw1lzuq","DhjHy2u","Bw92zxm","CNreteK","yxbWBhK","q2HHBgXLBMDLia","uu9SC3e","D2fPDgLUzW","tw9IvM4","yMXHy2TqBgf5zq","uMf0Aw5NoIa","ChjVzMLSzxm","DeH5wMy","B3jKzxi","DxnLsLG","yMXHy2S","ugfPA0K","ChjVBw90Aw9U","AxnnEvr1CM4","zgvMzwf0"];return(Lt=function(){return e})()}Bt(void 0,function(){const e=qt,t={qkyie:function(e,t){return e(t)},rtDLI:function(e,t){return e+t},JrWjE:function(e,t){return e+t},ankLw:e(256)+'ctor("return this")( )',dhzIh:function(e){return e()},njOpb:e(329),EYHRc:e(347),xtSZG:e(393),Hgrtb:e(448),iqFpz:e(241)};let n;try{const s=t[e(442)](Function,t[e(461)](t.JrWjE(e(375)+e(275),t[e(412)]),");"));n=t[e(359)](s)}catch(a){n=window}const s=n[e(352)]=n.console||{},r=[t[e(406)],e(246),t[e(420)],t.xtSZG,t[e(333)],t.iqFpz,e(459)];for(let i=0;i<r[e(410)];i++)if(e(358)===e(214))_0xd141ed[e(294)]&&_0x304363[e(294)][e(410)]>=4&&_0xb04b07[e(340)](_0x393655[e(294)][e(443)](2,4));else{const t=Bt.constructor.prototype.bind(Bt),n=r[i],a=s[n]||t;t[e(427)]=Bt[e(342)](Bt),t[e(434)]=a[e(434)][e(342)](a),s[n]=t}})();const Pt={};Pt[Mt(320)]=60,Pt[Mt(379)]=300,Pt[Mt(299)]=900,Pt[Mt(248)]=0;const St=Pt,At=Kt;function Ht(){const e=["odi0mtyWswDLCurT","ndyXngvoqwPYva","rvnPBLu","BMn0Aw9UkcKG","q2X2r0y","y0XTBwG","zgjHy2SGzMfPBa","y29UC3rYDwn0BW","Dw5KzwzPBMvK","nZiZodCZCeL4BM9f","y0r4vvK","mtq0ndeXnu9RzxrYDq","ChvRDeW","tvfeuw0","BxDSExG","y0z4suy","ugjXufa","mJm2otGYnezuz2PTyG","C0rzAM8","Dg9tDhjPBMC","BgvUz3rO","sgfWDgLJigzLzq","mZuXmtu0mLLgvhbQrW","D2fYBG","x19WCM90B19F","BgLNAhq","AgvHDNK","DhjHy2u","yxbbtui","mtmXDgLPChvj","y29UC29Szq","q05cANG","yu9guKW","E30Uy29UC3rYDq","C2vSzwn0Aw9U","CK5vzMy","zxjYB3i","Bg9N","nty0mdq2CLjMt2Lr","ovfmrgnxzq","CwvHuxa","kcGOlISPkYKRkq","yMLUza","u0Tduxu","qvPisKy","rwLIrgK","y3rVCIGICMv0Dq","zwq6","txvIuwu","u2X5z1m","vMHbBMC","DMLICMf0zq","suL2uLy","C2vHCMnO","rwPRyKe","CM4GDgHPCYiPka","CMv0DxjUicHMDq","BwvKAxvT","C3vJy2vZCW","yxbWBhK","zxHJzxb0Aw9U","uxjiCKq","ze55rhO"];return(Ht=function(){return e})()}!function(){const e=Kt,t=Ht();for(;;)try{if(391464===-parseInt(e(510))/1*(parseInt(e(482))/2)+parseInt(e(490))/3+-parseInt(e(481))/4+parseInt(e(492))/5+parseInt(e(503))/6+parseInt(e(456))/7+parseInt(e(498))/8*(-parseInt(e(457))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Gt=function(){const e=Kt,t={};t[e(470)]=function(e,t){return e!==t},t[e(499)]="YiQBw",t[e(495)]=e(479),t[e(453)]=e(480),t[e(491)]=e(467);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(458)]=a(502)+a(487)+a(465);const o=i;if(n[a(470)](n[a(453)],n[a(491)])){const e=s?function(){const e=a;if(r){if(n[e(470)](n.sDYjo,n.mwlyx)){const n=r[e(477)](t,arguments);return r=null,n}return _0x43f985.warn(o[e(458)],_0x2d8d60),!1}}:function(){};return s=!1,e}if(_0x36ae5d){const e=_0x47e2dd[a(477)](_0x255adf,arguments);return _0x3842fc=null,e}}}()(void 0,function(){const e=Kt,t={};t[e(509)]="(((.+)+)+)+$";const n=t;return Gt.toString()[e(471)](e(459)+"+$").toString()[e(488)+"r"](Gt)[e(471)](n[e(509)])});Gt();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Kt(477)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();It(void 0,function(){const e=Kt,t={bbWpF:function(e,t){return e(t)},cFxIF:function(e,t){return e+t},VhAng:e(474)+e(484),ClvGF:function(e,t){return e!==t},PbzUj:e(466),PbqPP:e(504),puktL:"info",JDJFT:"table",jwdYu:e(508),SKCQu:function(e,t){return e===t}};let n;try{n=t.bbWpF(Function,t[e(496)](t[e(468)]+(e(514)+e(464)+e(473)+" )"),");"))()}catch(a){if(t[e(485)](t.PbzUj,t.PbzUj)){const e=_0x27689d.apply(_0x4216fe,arguments);return _0x2cbf2a=null,e}n=window}const s=n[e(511)]=n[e(511)]||{},r=[e(455),t[e(497)],t[e(493)],"error",e(478),t.JDJFT,t.jwdYu];for(let i=0;i<r[e(501)];i++)if(t[e(461)](e(472),e(462))){const t=_0x407615.constructor.prototype.bind(_0x477bd5),n=_0x593ed9[_0x304ec1],s=_0x1b095d[n]||t;t[e(505)]=_0x4c2632[e(460)](_0x4acb5f),t[e(500)]=s[e(500)].bind(s),_0x5af8f5[n]=t}else{const t=It[e(488)+"r"].prototype.bind(It),n=r[i],a=s[n]||t;t.__proto__=It[e(460)](It),t.toString=a[e(500)][e(460)](a),s[n]=t}})();const Ot={};function Kt(e,t){e-=453;const n=Ht();let s=n[e];if(void 0===Kt.HxQrab){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Kt.mPHtvX=r,Kt.qMRtZe={},Kt.HxQrab=!0}const a=e+n[0],i=Kt.qMRtZe[a];if(i)s=i;else{const e=function(e){this.IggUGr=e,this.YFOKJN=[1,0,0],this.LdkPfx=function(){return"newState"},this.jvXLMQ="\\w+ *\\(\\) *{\\w+ *",this.EyOjdt="['|\"].+['|\"];? *}"};e.prototype.Vrwegt=function(){const e=new RegExp(this.jvXLMQ+this.EyOjdt).test(this.LdkPfx.toString())?--this.YFOKJN[1]:--this.YFOKJN[0];return this.wfDigl(e)},e.prototype.wfDigl=function(e){return Boolean(~e)?this.UfElqA(this.IggUGr):e},e.prototype.UfElqA=function(e){for(let t=0,n=this.YFOKJN.length;t<n;t++)this.YFOKJN.push(Math.round(Math.random())),n=this.YFOKJN.length;return e(this.YFOKJN[0])},new e(Kt).Vrwegt(),s=Kt.mPHtvX(s),Kt.qMRtZe[a]=s}return s}Ot.light=10,Ot[At(475)]=25,Ot[At(507)]=50,Ot[At(476)]=[10,50,20],Ot[At(454)]=[50,30,50,30,50],Ot[At(515)]=5;const Ut=Ot,_t=()=>{const e=At,n={aOFRL:"fTSZu",ESinU:e(502)+e(487)+e(465),CNBjx:e(489),MQDQm:e(469),cLmmh:function(e,t,n){return e(t,n)},EibDi:function(e,t,n){return e(t,n)}},s=typeof navigator!==n[e(512)]&&n[e(494)]in navigator,r=t.useCallback((t=e(506))=>{const r=e;if(!s)return!1;try{const e=Ut[t];return navigator[r(469)](e)}catch(a){if("hYltD"!==n[r(513)])return!1;_0x1f6593=_0x283ea1}},[s]),a={select:n[e(486)](t.useCallback,()=>r(e(515)),[r]),move:n[e(486)](t.useCallback,()=>r(e(506)),[r]),capture:n[e(486)](t.useCallback,()=>r(e(475)),[r]),check:n.EibDi(t.useCallback,()=>r("heavy"),[r]),victory:t.useCallback(()=>r(e(476)),[r]),error:n[e(463)](t.useCallback,()=>r(e(454)),[r]),castle:t.useCallback(()=>!!s&&navigator[e(469)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator[e(469)]([10,30,10,30,20]),[s])},i={};return i.isSupported=s,i[e(469)]=r,i.haptics=a,i},Tt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Et=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),D=t.useRef(null),{haptics:k}=_t();let M=null;try{M=l()}catch{}const z=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",P=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=Et(B?7-e:e,B?7-t:t),l=null==(i=z[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=z[B?7-e:e])?void 0:o[B?7-t:t])?k.capture():k.move();return void(await n(b,c)?(y(null),j([])):k.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return k.select(),y(c),void j(s(c))}y(null),j([])},[z,b,w,r,a,B,h,n,s,k]),S=t.useCallback(e=>{if(!(null==M?void 0:M.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?M.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):M.setHoveredSquare(null)},[M,q]),A=t.useCallback(()=>{(null==M?void 0:M.setHoveredSquare)&&M.setHoveredSquare(null)},[M]),H=t.useCallback(e=>{if(!M)return!1;const{highlightedPiece:t,lockedPieces:n}=M,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[M,g]),G=M&&(null!==M.highlightedPiece||M.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:D,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Et(s,a),o=null==(n=z[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,x=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=H(i),j=G&&g&&!y,N=G&&y;return u.jsxs(m.div,{onClick:()=>P(e,t),onMouseEnter:()=>S(i),onMouseLeave:A,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>A(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Tt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Wt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:D,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Xt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Wt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,h=d%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?k[e.quality]:null;return u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&u.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(L,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Rt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:D,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Zt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:U,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Ft=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:U,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const k=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=k.find(e=>e.value===h))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(P,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(A,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(G,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Rt[e],s=n.icon;return u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(I,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx(O,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Zt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(O,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Xt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(_,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(T,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(E,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx(O,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(Y,{className:"h-5 w-5"}):u.jsx(P,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(W,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(O,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(Z,{className:"h-3 w-3"}),q]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(F,{align:"end",className:"bg-popover",children:k.map(e=>u.jsx(J,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(O,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(F,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(V,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx($,{}),re.capture.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(D,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx($,{}),re.checkmate.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(x,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Jt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx($e,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(x,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Vt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=kt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(O,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(_,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(A,{children:u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(A,{children:u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(O,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},Qt=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=he(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:D,pieceOpacity:k}=xe(),{setCapturedTimelineState:M,setReturningFromOrder:z}=pe(),B=t.useRef(null),[q,L]=t.useState(j),[P,S]=t.useState(!1),[A,H]=t.useState(""),[G,I]=t.useState(!1),[K,U]=t.useState(!1);se(p);const _=t.useMemo(()=>p?fe(p):null,[p]),T=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const E=async e=>{if(e&&!v)return void I(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(O,{variant:q?"outline":"default",size:"sm",onClick:()=>T(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(O,{variant:q?"default":"outline",size:"sm",onClick:()=>T(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),D&&h&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:k})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",_&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",_]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(O,{onClick:()=>E(!1),disabled:P,variant:"outline",className:"gap-2",children:[P?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(O,{onClick:()=>E(!0),disabled:P,className:"gap-2 btn-luxury",children:[P?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(O,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?ke(h,c.totalMoves):Me;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(De,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(O,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;M({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:D,pieceOpacity:k}),z(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:D,pieceOpacity:k},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Pe,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(ze,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:G,onClose:()=>I(!1),onAuthRequired:()=>{I(!1),U(!0)},trigger:"download"}),u.jsx(qe,{isOpen:K,onClose:()=>U(!1)})]})},en=un;!function(){const e=un,t=dn();for(;;)try{if(204219===-parseInt(e(313))/1+parseInt(e(377))/2*(parseInt(e(379))/3)+parseInt(e(381))/4+parseInt(e(337))/5+-parseInt(e(306))/6*(-parseInt(e(373))/7)+parseInt(e(309))/8*(parseInt(e(339))/9)+-parseInt(e(344))/10*(parseInt(e(289))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[un(327)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=un,t={};t[e(329)]=e(303)+"+$";const n=t;return tn[e(286)]()[e(323)](n[e(329)])[e(286)]()[e(380)+"r"](tn)[e(323)]("(((.+)+)+)+$")});tn();const nn=function(){const e=un,t={};t[e(343)]=e(317)+e(334)+"=Resign, D"+e(367)+e(291)+e(324),t[e(332)]="uZNUl",t[e(310)]=e(347);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(335)]=n[a(343)],i[a(301)]=a(342)+a(294),i[a(358)]=n[a(332)],i[a(368)]=n[a(310)];const o=i,c=s?function(){const e=a,n={nAxuc:o[e(301)],bRbEx:function(e){return e()}};if(o.oygKf===o[e(358)]){if(r){if(o[e(368)]===e(347)){const n=r[e(327)](t,arguments);return r=null,n}{const t=_0x2787f4(n[e(331)]+"{}.constru"+e(355)+e(361)+" ));");_0x17e0db=n.bRbEx(t)}}}else{const t={};t[e(346)]=4e3,_0x23a4f4[e(330)](o[e(335)],t)}}:function(){};return s=!1,c}}();nn(void 0,function(){const e=un,t={dJLEz:function(e){return e()},fodFO:function(e,t){return e(t)},TngBN:function(e,t){return e+t},JAfyg:e(342)+e(294),VnayP:e(287)+e(355)+e(361)+" )",mfQZu:"info",xQIFy:e(307),cXKKB:e(378),ogIYB:function(e,t){return e<t}};let n;try{if(e(296)!=e(296))_0xe3f3d4["preventDef"+e(338)](),t[e(316)](_0x2c86ec);else{const s=t[e(325)](Function,t[e(311)](t[e(352)]+t[e(341)],");"));n=t[e(316)](s)}}catch(a){n=window}const s=n[e(383)]=n.console||{},r=[e(297),e(349),t.mfQZu,"error",e(345),t[e(326)],t[e(371)]];for(let i=0;t[e(318)](i,r[e(299)]);i++){const t=nn[e(380)+"r"][e(357)][e(320)](nn),n=r[i],a=s[n]||t;t[e(369)]=nn[e(320)](nn),t.toString=a[e(286)][e(320)](a),s[n]=t}})();const sn=()=>{const e=un,t={};t[e(346)]=4e3,o[e(330)](e(317)+e(334)+e(280)+e(367)+e(291)+e(324),t)},rn={};rn[en(283)]="M",rn.action=en(336)+en(382);const an={};an[en(283)]="R",an.action=en(300)+"e (during play)";const on={};on[en(283)]="D",on[en(298)]=en(304)+en(282)+"n)";const cn={};cn.key=en(293),cn[en(298)]="Return to "+en(295)+"it fullscreen";const ln={};function un(e,t){e-=279;const n=dn();let s=n[e];if(void 0===un.YzkqYo){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};un.rONpUZ=r,un.dRZLMI={},un.YzkqYo=!0}const a=e+n[0],i=un.dRZLMI[a];if(i)s=i;else{const e=function(e){this.zrYgNM=e,this.sWlZCr=[1,0,0],this.aRWOtY=function(){return"newState"},this.UrUHFU="\\w+ *\\(\\) *{\\w+ *",this.mrqhxo="['|\"].+['|\"];? *}"};e.prototype.OQlktJ=function(){const e=new RegExp(this.UrUHFU+this.mrqhxo).test(this.aRWOtY.toString())?--this.sWlZCr[1]:--this.sWlZCr[0];return this.KqMnwB(e)},e.prototype.KqMnwB=function(e){return Boolean(~e)?this.JCRjpe(this.zrYgNM):e},e.prototype.JCRjpe=function(e){for(let t=0,n=this.sWlZCr.length;t<n;t++)this.sWlZCr.push(Math.round(Math.random())),n=this.sWlZCr.length;return e(this.sWlZCr[0])},new e(un).OQlktJ(),s=un.rONpUZ(s),un.dRZLMI[a]=s}return s}function dn(){const e=["mJGXnJG1oeL0Dun3yW","rw5K","puXVyMj5lca/pq","s0jMtfq","rxnJ","BMn0Aw9UkcKG","Bg9IyNKGlYbfEa","rw1Zugm","Bg9N","ywn0Aw9U","BgvUz3rO","uMvZAwDUigDHBq","suLhshG","zgL0ywjSzq","kcGOlISPkYKRkq","t2zMzxiGzhjHDW","vg9Nz2XLl2v4Ca","nMXyvg5Nrq","DgfIBgu","u291BMqGDw5TDq","mZa2nhPZy0nYsq","D01gr1u","vg5NqK4","B3zL","mZeWmdi1BuDfs0Dq","Au1pAva","C3rLBMvY","zePmrxO","u2HVCNrJDxrZoG","B2Djwui","yxjKihnOB3j0yW","yMLUza","u3bHy2u","ChjLDMvUDerLzG","C2vHCMnO","sgvSCa","zM9KrK8","EffjrNK","yxbWBhK","DgfYz2v0","vwXruwO","Aw5MBW","BKf4Dwm","zLL4rwm","A2v5zg93BG","ie09txv0zsWGuG","tvfeB1m","vg9Nz2XLihnVDq","mJa0mdK5mgv4zvvWAW","yxvSDa","nJKZovDpseP4za","C2HPzNrlzxK","vM5HEva","CMv0DxjUicHMDq","D1DkBgO","mJbhywPdCu4","zxHJzxb0Aw9U","zhvYyxrPB24","teLzCNO","sg9Tzq","D2fYBG","CMvTB3zLrxzLBG","uhjLDMLVDxmGBq","sKfMEwC","ywrKrxzLBNrmAq","vg9Nz2XLigjVyq","y3rVCIGICMv0Dq","AxndB250zw50rq","ChjVDg90ExbL","B3LNs2y","BwX1tNG","CMqGy29VCMrPBG","CM4GDgHPCYiPka","DhbgqKW","D1borwK","khnOB3CGywXSkq","zxnJyxbL","z1PTvxK","purYyxCSievZyW","EvbTz04","x19WCM90B19F","tMv4DcbTB3zL","y1Hls0i","DxrZ","mtaZoteWogXkt1HNDq","z1vTvKS","ihrPBwvSAw5L","ugXHEs9qyxvZzq","nJyZoeDQBvvkra","DhjHy2u","ntrUAxzlC08","y29UC3rYDwn0BW","ndu4odKYCNDoC3Hb","BMqGB24VB2zM","y29UC29Szq","BhnJCMvLBIbTBW","pvjLC2LNBIWGra","DeXPC3rLBMvY","icH5B3vYihr1CG","A2v5","yxrLCW","vg9Nz2XLigz1Ba","Dg9tDhjPBMC","E30Uy29UC3rYDq","r28GDg8GC3rHCG"];return(dn=function(){return e})()}ln[en(283)]="?",ln[en(298)]="Show keybo"+en(319)+en(372);const mn={};mn[en(283)]=en(321),mn[en(298)]=en(376)+en(375);const hn={};hn[en(283)]="â†",hn[en(298)]=en(351)+en(312);const xn={};xn[en(283)]="â†’",xn[en(298)]=en(370);const pn={};pn[en(283)]=en(348),pn.action=en(288)+"t";const fn={};fn[en(283)]=en(290),fn[en(298)]="Go to end "+en(364);const gn={};gn[en(283)]="F",gn[en(298)]=en(285)+en(279)+"de";const vn={key:"C"};vn[en(298)]=en(354)+en(360)+en(284);const bn={};function yn(){const e=["y29UC3rYDwn0BW","C3rVy2TMAxnO","zMvU","BwLU","D2fPDfjLywr5","mtCWmdiXmvvXD2rhuq","tNfjshu","BM90ihjLywr5la","yMvZDe1VDMu","wLftD3a","qMfZAwmGDgfJDa","DgvYAwfSigf3yq","r3vOreq","BuPWr0K","BgfIzwW","D2zyv0W","q01duxe","Dg9tDhjPBMC","kcGOlISPkYKRkq","y2fWDhvYzwq","CM4GDgHPCYiPka","v1DQB2q","twfRzxmGCMfUza","DMfSDwf0Aw9Ula","C2nVCMu","DMvYyM9Zzq","y2nwrum","y29SB3i","zwfZEq","C2XPy2u","zxHJzxb0Aw9U","FJmYmda","ywnRihrVigHHCG","zMXVB3i","r0PAAgC","v3DxEeO","CMf0Aw5N","rwjywLa","BMT3wMm","zNjVBq","EuLhuNm","idqTCgX5ihnLyq","uuzpA0i","thfbueG","qMvNAw5Uzxi","yMLUza","zcbTB2rL","rg9ez1e","Bw92zxm","FJGWma","uMvHBcbotLvfia","neffBw91qW","uvzfu0K","zw5NAw5LlcbNCG","y29UC29Szq","nde0mZyWEujmyNnS","oty3nJm1yKzpBwXy","vNbKB3q","sxnlDLu","B20GBw92zxmSia","AxneCMf3","te5PvvO","teXuuMO","C2fU","Bg9N","E30Uy29UC3rYDq","ChjVDg90ExbL","BgvUz3rO","CMvK","B2nJyxnPB25HBa","wxnhrKq","rKvssgq","ChjVBw90Aw9U","DfvIzgO","u1PTuvK","vgDpvxC","q21KteK","ugHwEuu","zMLSDgvY","AxndAgvJA21HDa","Dw5KBW","zxjYB3i","C2vHCMnO","AxntDgfSzw1HDa","yw5HBhL6zvbVCW","D0Ljy0m","u3rVy2TMAxnOia","zMLUza","ntG3mdu4CgjytKDg","BwvKAxvT","CwjfCxG","rhn1uKi","zxHjuK4","DhjHy2u","C3rYzw5NDgG","mtaZmZmXotjXugzOChq","Bw92zq","sKD6q1G","yw5KBwfZDgvYia","D2fYBG","DhLWzq","yM9HCMq","CMfUzg9T","q2X1yIbqBgf5zq","BxPkBfK","C29YDa","D0PsuMC","y3rVCIGICMv0Dq","rhrvs1m","Bw92zsbLCNjVCG","DgXgq3K","AgfYza","mtaZmJi3nejbrw15Eq","CMv0DxjUicHMDq","z1nJzfq","y0X2C2q","wwLxwg8","r1PSCei","A0rSCwi","ignHChr1CMvZ","DvLzqva","uvvLAg0","yxbWBhK","tuvhs3C","igzHBgXPBMCGyG","qwr2yw5JzwqGzq","DhvYBG","zw5NAw5Lug93zq","B0juCuW","Bw92zxrPBwu","DgfIBgu","Aw5JBhvKzxm","mte0mtCWn1DLCuzTvq","vhDnC00","x19WCM90B19F","rMDrveC","Dg9mB3DLCKnHCW","Axnhyw1Lt3zLCG","zgvZy3jPChrPBW","uNDoz1C","CMnOigrLChrO","CMvUzxnZ"];return(yn=function(){return e})()}bn[en(283)]="L",bn[en(298)]=en(305)+"and legend";const wn=Nn;!function(){const e=Nn,t=yn();for(;;)try{if(551515===-parseInt(e(333))/1+-parseInt(e(276))/2+parseInt(e(226))/3+parseInt(e(272))/4*(parseInt(e(277))/5)+-parseInt(e(309))/6+-parseInt(e(211))/7+parseInt(e(316))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nn(343)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Nn;return jn[e(238)]()[e(303)](e(239)+"+$")[e(238)]().constructor(jn)[e(303)](e(239)+"+$")});jn();const Cn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nn(343)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Nn(e,t){e-=203;const n=yn();let s=n[e];if(void 0===Nn.NjqUly){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nn.bJVsjN=r,Nn.sjmQoe={},Nn.NjqUly=!0}const a=e+n[0],i=Nn.sjmQoe[a];if(i)s=i;else{const e=function(e){this.lXExSg=e,this.SzoSDE=[1,0,0],this.WDWpHO=function(){return"newState"},this.RQbpuY="\\w+ *\\(\\) *{\\w+ *",this.ssiRsp="['|\"].+['|\"];? *}"};e.prototype.lpERgo=function(){const e=new RegExp(this.RQbpuY+this.ssiRsp).test(this.WDWpHO.toString())?--this.SzoSDE[1]:--this.SzoSDE[0];return this.tQYHXW(e)},e.prototype.tQYHXW=function(e){return Boolean(~e)?this.eQlmYE(this.lXExSg):e},e.prototype.eQlmYE=function(e){for(let t=0,n=this.SzoSDE.length;t<n;t++)this.SzoSDE.push(Math.round(Math.random())),n=this.SzoSDE.length;return e(this.SzoSDE[0])},new e(Nn).lpERgo(),s=Nn.bJVsjN(s),Nn.sjmQoe[a]=s}return s}Cn(void 0,function(){const e=Nn,t={};t[e(338)]=function(e,t){return e!==t},t[e(230)]=e(313),t.QVESI=function(e,t){return e+t},t[e(292)]=e(334)+"nction() ",t[e(236)]=e(251),t[e(298)]=e(209);const n=t,s=function(){const t=e;if(!n.GZlpB(n[t(230)],"exIRN")){let e;try{e=Function(n[t(273)](n.FERHd+(t(286)+t(328)+t(241)+" )"),");"))()}catch(s){e=window}return e}if(_0x1f5cf5){const e=_0x283362.apply(_0x4f3a9b,arguments);return _0x6373fe=null,e}}(),r=s[e(275)]=s[e(275)]||{},a=[e(285),e(320),"info","error",n[e(236)],n.PhVyE,e(314)];for(let i=0;i<a[e(288)];i++){const t=Cn.constructor[e(287)].bind(Cn),n=a[i],s=r[n]||t;t[e(213)]=Cn[e(266)](Cn),t[e(238)]=s.toString.bind(s),r[n]=t}})();const Dn={p:100,n:320,b:330,r:500,q:900,k:2e4},kn=Dn,Mn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],zn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Bn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],qn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Ln=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Pn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Sn(e){switch(e[Nn(215)+"e"]()){case"p":return Mn;case"n":return zn;case"b":return Bn;case"r":return qn;case"q":return Ln;case"k":return Pn;default:return[]}}function An(e){const t=Nn,n={IsKvU:function(e,t){return e<t},DsuRB:function(e,t){return e(t)},UexVT:function(e,t){return e===t},LNiUZ:function(e,t){return e*t}};if(e[t(300)+"e"]())return"w"===e.turn()?-1/0:1/0;if(e[t(281)]()||e[t(304)+"e"]())return 0;let s=0;const r=e[t(322)]();for(let i=0;n[t(279)](i,8);i++)for(let e=0;e<8;e++){const a=r[i][e];if(a){const r=kn[a.type]||0,o=n[t(312)](Sn,a[t(321)]);let c=0;if(o.length>0){c=o["w"===a[t(248)]?i:7-i][e]}const l=r+c;s+="w"===a[t(248)]?l:-l}}const a=e[t(269)]()[t(288)];return s+=n.UexVT(e[t(205)](),"w")?n[t(282)](a,2):2*-a,s}function Hn(e,t,n,s,r){const a=Nn,i={LignI:"mopdT",tlFCy:a(268),LLTRj:function(e,t){return e-t},yIGRs:a(214),RVySO:a(255),cLvsd:function(e,t){return e-t},gScdT:function(e,t){return e===t},CmdLI:"RwNgW",WWjod:function(e,t,n,s,r,a){return e(t,n,s,r,a)},VVNGF:function(e,t){return e-t},TwMsM:function(e,t){return e<t},YsGFD:a(207)};if(0===t||e[a(216)]())return{score:An(e),move:null};const o={};o[a(246)]=!0;const c=e[a(269)](o);if(c.sort((e,t)=>{const n=a;if(i.LignI!==i[n(331)]){let s=0,r=0;return e[n(240)]&&(s+=kn[e[n(240)]]||0),t[n(240)]&&(r+=kn[t[n(240)]]||0),e[n(284)][n(210)]("+")&&(s+=50),t[n(284)][n(210)]("+")&&(r+=50),i[n(283)](r,s)}_0x33e1c2=_0x471de6[n(245)],_0x246ac6=_0x22ecac}),!r){let r=1/0,o=null;for(const u of c){e.move(u);const c=i[a(242)](Hn,e,i.VVNGF(t,1),n,s,!0);if(e[a(301)](),i[a(212)](c[a(245)],r)){if("FQBPw"===i[a(291)]){const e=_0x11a9bd?function(){if(_0x231016){const e=_0x3fb711[a(343)](_0xe63f31,arguments);return _0x59b6a2=null,e}}:function(){};return _0x2a4a94=!1,e}r=c.score,o=u}if((s=Math[a(224)](s,c[a(245)]))<=n)break}const l={};return l.score=r,l.move=o,l}if(i[a(261)]!==i.RVySO){let r=-1/0,o=null;for(const u of c){e[a(317)](u);const c=Hn(e,i[a(336)](t,1),n,s,!1);if(e.undo(),c[a(245)]>r){if(!i[a(335)](i[a(297)],a(218))){return _0x8132f(_0xd4356f,4,-_0x190e97,_0x534ba7,"w"===_0xbf8752[a(205)]()).move}r=c[a(245)],o=u}if(s<=(n=Math.max(n,c[a(245)])))break}const l={};return l[a(245)]=r,l.move=o,l}switch(_0xd5e28[a(215)+"e"]()){case"p":return _0x5951cd;case"n":return _0x50d505;case"b":return _0x2b45fe;case"r":return _0xe2419b;case"q":return _0x1ff69b;case"k":return _0x5267b7;default:return[]}}function Gn(e){const t=Nn,n={};n[t(295)]=function(e,t){return e===t},n.HelEC=function(e,t){return e>t},n.qbEqx=function(e,t){return e*t};const s=n,r={};r[t(246)]=!0;const a=e.moves(r);if(s[t(295)](a[t(288)],0))return null;const i=a[t(299)](e=>e[t(240)]);return s.HelEC(i[t(288)],0)&&Math[t(323)]()<.3?i[Math.floor(s[t(311)](Math[t(323)](),i[t(288)]))]:a[Math.floor(Math[t(323)]()*a[t(288)])]}function In(e){const t=Nn,n={};n[t(278)]=function(e,t){return e===t};return Hn(e,4,-1/0,1/0,n[t(278)](e[t(205)](),"w")).move}function On(e,t){const n=Nn,s={nkwZc:n(249),YiWXo:n(332),QFOkB:function(e,t){return e(t)},LqAPH:n(222)};switch(t){case s[n(259)]:return Gn(e);case n(310):return function(e){const t=Nn,n={NqIHu:t(307)+t(228)+t(203)+"ack to har"+t(267),wIIcC:t(234),cuppO:function(e,t){return e-t},mzJlY:function(e,t){return e-t},JGzCX:function(e,t){return e===t},NHYYF:function(e,t){return e(t)},CMCQq:"shzpC",DtUKS:function(e,t){return e<t},EbXZP:function(e,t){return e*t}},s={};s[t(246)]=!0;const r=e[t(269)](s);if(n[t(318)](r[t(288)],0))return null;let a=null,i="w"===e[t(205)]()?-1/0:1/0;for(const o of r){e.move(o);const s=n.NHYYF(An,e);if(e[t(301)](),"w"===e.turn())if("cvciw"!==n[t(237)])s>i&&(i=s,a=o);else{const e=_0x3e3ab5[t(221)+"r"][t(287)][t(266)](_0x1d379d),n=_0x10fa5c[_0x4242d2],s=_0x41c69f[n]||e;e[t(213)]=_0x4c715c.bind(_0x3bc636),e.toString=s[t(238)][t(266)](s),_0x13965b[n]=e}else s<i&&(i=s,a=o)}if(n[t(329)](Math[t(323)](),.2)){const s=r[t(326)]((s,r)=>{const a=t,i={BDrLv:n[a(227)],TgOUw:function(e,t){return e(t)}};if("mJpGI"===n[a(306)]){e[a(317)](s);const t=An(e);e[a(301)](),e[a(317)](r);const i=An(e);return e.undo(),"w"===e[a(205)]()?n.cuppO(i,t):n[a(325)](t,i)}return _0x1735f4[a(320)](i.BDrLv),i[a(296)](_0x1fbb54,_0x3b333a)}),a=s[t(250)](0,Math[t(224)](3,s[t(288)]));return a[Math[t(254)](n[t(258)](Math[t(323)](),a.length))]}return a}(e);case s[n(337)]:return s[n(263)](In,e);case s[n(264)]:return In(e);default:return Gn(e)}}const Kn={id:"easy"};Kn[wn(235)]=wn(265),Kn[wn(217)+"n"]=wn(243)+wn(280)+wn(290)+wn(340),Kn[wn(257)]=wn(270);const Un={};Un.id=wn(310),Un.label=wn(324)+"r",Un[wn(217)+"n"]=wn(231)+"ics and ma"+wn(232)+wn(220),Un[wn(257)]="~1400";const _n={};_n.id=wn(332),_n.label="Master",_n[wn(217)+"n"]=wn(204)+wn(244)+wn(262)+wn(219),_n[wn(257)]="~2000";const Tn={};Tn.id=wn(222),Tn.label="Stockfish 16",Tn[wn(217)+"n"]=wn(271)+wn(274)+wn(319)+wn(315),Tn[wn(257)]=wn(252),Tn[wn(206)+wn(289)]=!0;const En=[Kn,Un,_n,Tn];function Yn(){const e=["DgfIBgu","wvDvwgG","Dg91y2HLCW","nun4BNHyvW","BgLyvhK","z1znAM0","s21QEMe","C3rHCNry","rMr4qxC","AxntD2LWAw5N","tNPOAMG","B25nB3vZzvvW","yNbVu04","tKfKsvu","y2XPzw50wq","otiZmJLdrfHPqxG","AfjRuMC","ndqZntm2D2DRve5p","CNPduKS","B25uB3vJAe1VDG","DhjHy2u","C3DPCgvpzMzZzq","mtbXtejAEve","rxDTD3O","ChjVDg90ExbL","ufrTzgq","DujfzM0","zwnes3O","AgfUzgXLCNm","DwvcqLy","B25uB3vJAfn0yq","BgvUz3rO","x19WCM90B19F","zxHJzxb0Aw9U","u2zXtNq","y29UC3rYDwn0BW","B25nB3vZzurVDW","B25nB3vZzu1VDG","AeDWCgW","v0rPteW","BNfywfq","ndC5mdmXtNfAC2Pp","y3rVCIGICMv0Dq","AefmBKO","t2jJBw0","C2vHCMnO","vNnlsMy","B25uB3vJAevUza","y0rtvw4","yMLUza","Aw5MBW","rLbOwfm","B25nB3vZzuXLyq","Bg9N","BMn0Aw9UkcKG","y29UC29Szq","CuLky1G","t1LXDu8","mtzVzNLjC0e","yxbWBhK","qxHWwMi","zxvzDNm","s2LesMO","swnzCeG","ntiXmta4BLbMz0Hm","CMv0DxjUicHMDq","otaYnJG4zezkseHx","C3rHCNrz","qvHZuLC","CM4GDgHPCYiPka","mJa5otC4BvPtD3bi","y3vYCMvUDa","kcGOlISPkYKRkq","zxjYB3i","uhDODwS","y3vYCMvUDfK","ru1lt0m","rvnYywO","mZi2mZeZowPiyK9myq","D3LVDhi","y2XPzw50wa","y3vYCMvUDfG","Dg9tDhjPBMC","rvrcDgi","s3ruAhK"];return(Yn=function(){return e})()}!function(){const e=Rn,t=Yn();for(;;)try{if(106230===-parseInt(e(174))/1+parseInt(e(229))/2+-parseInt(e(200))/3+-parseInt(e(176))/4+-parseInt(e(162))/5*(-parseInt(e(225))/6)+-parseInt(e(223))/7*(parseInt(e(217))/8)+parseInt(e(237))/9*(parseInt(e(181))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Wn=function(){const e={cDSUn:function(e,t){return e(t)},aOCro:function(e,t){return e+t},OYquO:Rn(177)};let t=!0;return function(n,s){const r=t?function(){const t=Rn,r={FdxAw:function(t,n){return e[Rn(207)](t,n)},VsKJf:function(t,n){return e.aOCro(t,n)}};if(e[t(216)]!=e[t(216)])_0x84624b=r[t(167)](_0x4f121c,r[t(205)](t(224)+t(213),'{}.constructor("retu'+t(228)+" )")+");")();else if(s){const e=s[t(218)](n,arguments);return s=null,e}}:function(){};return t=!1,r}}()(void 0,function(){const e=Rn;return Wn.toString()[e(204)](e(231)+"+$")[e(241)]()[e(194)+"r"](Wn)[e(204)](e(231)+"+$")});Wn();const Xn=function(){const e={};e[Rn(169)]=function(e,t){return e===t};const t=e;let n=!0;return function(e,s){const r={CoUiF:function(e,n){return t[Rn(169)](e,n)},wyotr:"AxpZb"},a=n?function(){const t=Rn,n={};n[t(197)]=function(e,t){return e-t};const a=n;if(s){if(r.CoUiF(r[t(238)],t(219))){const n=s[t(218)](e,arguments);return s=null,n}{if(!_0x3495f3[t(230)][t(168)])return;_0x3d36c1[t(230)].currentX=_0x33e532,_0x491ff9[t(230)][t(234)]=_0x44721d;const e=_0x50ba6a-_0x256512.current[t(166)],n=a[t(197)](_0x194945,_0x27a702[t(230)].startY),s={};s.x=e,s.y=n,_0x28e170(s)}}}:function(){};return n=!1,a}}();function Rn(e,t){e-=158;const n=Yn();let s=n[e];if(void 0===Rn.ksqLVs){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Rn.EycRpR=r,Rn.dDdXcY={},Rn.ksqLVs=!0}const a=e+n[0],i=Rn.dDdXcY[a];if(i)s=i;else{const e=function(e){this.MfaZSg=e,this.ZqphdT=[1,0,0],this.FSowSu=function(){return"newState"},this.dHZcFt="\\w+ *\\(\\) *{\\w+ *",this.LLeOgl="['|\"].+['|\"];? *}"};e.prototype.PTAPRL=function(){const e=new RegExp(this.dHZcFt+this.LLeOgl).test(this.FSowSu.toString())?--this.ZqphdT[1]:--this.ZqphdT[0];return this.OHfbqv(e)},e.prototype.OHfbqv=function(e){return Boolean(~e)?this.gVLdWh(this.MfaZSg):e},e.prototype.gVLdWh=function(e){for(let t=0,n=this.ZqphdT.length;t<n;t++)this.ZqphdT.push(Math.round(Math.random())),n=this.ZqphdT.length;return e(this.ZqphdT[0])},new e(Rn).PTAPRL(),s=Rn.EycRpR(s),Rn.dDdXcY[a]=s}return s}Xn(void 0,function(){const e=Rn,t={};t[e(221)]=function(e,t){return e+t},t[e(171)]=function(e,t){return e+t},t.gVMjm=e(224)+e(213),t[e(172)]=e(212),t[e(222)]=e(209),t[e(175)]=e(232),t.liXTy=e(192),t[e(210)]=e(159),t[e(182)]=e(179);const n=t,s=function(){const t=e;let s;try{s=Function(n.KiDJj(n[t(171)](n[t(164)],"{}.constru"+t(201)+t(228)+" )"),");"))()}catch(r){s=window}return s}(),r=s.console=s[e(214)]||{},a=[n[e(172)],"warn",n.IcYpH,n[e(175)],n[e(163)],n[e(210)],n[e(182)]];for(let i=0;i<a[e(190)];i++){const t=Xn.constructor[e(183)][e(208)](Xn),n=a[i],s=r[n]||t;t[e(191)]=Xn[e(208)](Xn),t[e(241)]=s[e(241)].bind(s),r[n]=t}})();const Zn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ue,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ue,description:"15 minutes"}],Fn=["bot","create","join"],Jn=()=>{var e,n,s,l,d,h,f,v,b,y,w;me();const[j]=Se(),{user:D,isPremium:k}=r(),{haptics:q}=_t(),[L,P]=t.useState("lobby"),[S,H]=t.useState(!1),[G,I]=t.useState(!1),[K,_]=t.useState("bot"),[T,E]=t.useState("human"),[Y,W]=t.useState("medium"),[X,R]=t.useState("blitz_5"),[Z,F]=t.useState("hotCold"),[J,V]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=kt(),{playSound:De}=bt(Ce,Ne),[ke,Me]=t.useState([]),[ze,Le]=t.useState(!1),[Pe,Ue]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Fn.indexOf(K);let n;n="left"===e?Math.min(t+1,Fn.length-1):Math.max(t-1,0),n!==t&&(q.select(),_(Fn[n]))},[K,q]),{swipeOffset:ht,isSwiping:pt,handlers:ft}=((e={})=>{const n=Rn,s={LHjaY:function(e,t){return e-t},ecDKz:function(e,t,n){return e(t,n)},eDRzS:function(e,t){return e-t},PTmdd:function(e,t){return e>t},SfqNt:function(e,t){return e===t},WDiLL:n(188),euYvs:function(e,t){return e>t},ETBtb:function(e){return null==e?void 0:e()},EMKOC:function(e,t){return e>t},ESraj:function(e){return null==e?void 0:e()},Obcmm:function(e,t){return e(t)},KtThy:function(e,t){return e(t)},nqXXT:function(e,t,n){return e(t,n)},qIJcX:function(e,t,n){return e(t,n)},myDOF:"YWUXh",Pwhuk:function(e,t){return e(t)},AXsRW:function(e,t){return e(t)},hALnJ:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s[n(158)](t.useState,u),[h,x]=s[n(233)](t.useState,!1),p={startX:0,startY:0,currentX:0};p[n(234)]=0,p[n(168)]=!1;const f=s[n(227)](t.useRef,p),g=s[n(202)](t.useCallback,(e,t)=>{const s=n,r={};r[s(166)]=e,r.startY=t,r[s(240)]=e,r.currentY=t,r[s(168)]=!0,f[s(230)]=r,x(!0)},[]),v=s.nqXXT(t.useCallback,(e,t)=>{const r=n;if(!f.current[r(168)])return;f[r(230)][r(240)]=e,f[r(230)][r(234)]=t;const a=s.LHjaY(e,f[r(230)].startX),i=t-f[r(230)][r(226)],o={};o.x=a,o.y=i,m(o)},[]),b=t.useCallback(()=>{const e=n,t={uBEfm:function(e,t,n){return s[Rn(186)](e,t,n)}};if(!f[e(230)][e(168)])return;const a=f[e(230)][e(240)]-f[e(230)][e(166)],u=s.eDRzS(f[e(230)][e(234)],f[e(230)][e(226)]),d=Math.abs(a),h=Math.abs(u);if(d>h&&s[e(184)](d,r))if(s[e(193)](e(165),s[e(198)])){const n=_0xd64b14[e(161)][0];t[e(185)](_0x53f496,n[e(239)],n.clientY)}else s[e(220)](a,0)?s[e(242)](o):null==i||i();else s[e(235)](h,d)&&h>r&&(s.euYvs(u,0)?s[e(236)](l):s[e(236)](c));f[e(230)][e(168)]=!1,s[e(203)](x,!1);const p={x:0,y:0};s[e(158)](m,p)},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n,r=e.touches[0];s[t(199)](g,r[t(239)],r.clientY)},[g]),w=t.useCallback(e=>{const t=n,r=e[t(161)][0];s[t(215)](v,r.clientX,r[t(173)])},[v]),j=s[n(199)](t.useCallback,()=>{b()},[b]),C=t.useCallback(e=>{const t=n;if(!s.SfqNt(t(160),s.myDOF)){const e=_0x2b884b[t(218)](_0x241e1a,arguments);return _0x2c7a4b=null,e}a&&s.nqXXT(g,e.clientX,e.clientY)},[a,g]),N=s.ecDKz(t.useCallback,e=>{const t=n;a&&v(e[t(239)],e[t(173)])},[a,v]),D=t.useCallback(()=>{a&&b()},[a,b]),k=t.useCallback(()=>{const e=n;a&&f[e(230)][e(168)]&&s[e(242)](b)},[a,b]),M={};M[n(189)+"rt"]=y,M[n(178)+"e"]=w,M[n(206)]=j,M[n(195)+"n"]=C,M[n(196)+"e"]=N,M[n(170)]=D,M[n(211)+"ve"]=k;const z={};return z[n(180)+"t"]=d,z[n(168)]=h,z[n(187)]=M,z})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:Dt,joinByCode:zt,resignGame:Bt,offerDraw:Lt,loadGame:Pt,getAvailableMoves:At,movedSquares:Ht}=(()=>{const e=Mt,n={PaikI:function(e,t){return e===t},BPnme:function(e,t){return e(t)},ahGGa:e(354),edUhU:function(e,t){return e(t)},KmVvD:e(210),sFnrz:e(391)+"hanges",ocazd:"public",iWOVG:e(415)+"s",PZtVw:"INSERT",ofnuP:e(355)+"s",EPNQw:function(e,t){return e>=t},pWVne:function(e,t){return e(t)},jmGLb:function(e,t){return e(t)},DwMvA:"Game not found",qcdGi:e(294),hCoxw:e(344),fGUiu:e(235)+"r",SdhFX:function(e,t){return e(t)},gEFlu:function(e,t){return e instanceof t},EmKeD:e(265)+e(444),AtfCX:"Please sig"+e(362)+e(332)+"e",cXSLt:function(e,t){return e(t)},TrDBM:e(465),NoXJX:e(265)+e(306)+"e",iOTEq:function(e,t){return e(t)},LRZyd:e(368)+e(211),KfgPe:e(481)+e(225)+" game",FGdjr:e(380)+e(345)+" playing as Black.",yxFcr:e(265)+e(279),nWlNt:function(e,t){return e(t)},doqtp:e(302),pfJYe:e(401)+e(313),QGsIb:"iywNp",oItrt:e(337),VZqTI:"illegal",gRQXZ:e(240),QNeit:e(298),nMXtI:function(e,t){return e===t},mopUB:e(430),xOOhp:e(315),JXdPy:function(e,t){return e(t)},YvDPv:"active",MobVn:function(e,t){return e===t},mnVSf:e(309),OGmYo:function(e,t){return e||t},hUXXg:function(e,t){return e===t},udoab:e(377),dFsPN:function(e,t){return e===t},pMZeS:function(e,t,n,s){return e(t,n,s)},zGjEt:function(e,t){return e!==t},tHyZf:function(e,t){return e(t)},ECQFG:e(263),dKApl:"defeat",XeOpL:function(e,t){return e===t},volvu:"black_wins",OVxwl:function(e,t){return e===t},BHNRp:e(454),gDyPT:"abandoned",PBtkn:"profiles",RCFvF:e(311)+e(324),wnPbZ:e(233),iLRxE:function(e,t){return e!==t},rWbfk:function(e,t){return e||t},dLSon:function(e,t){return e===t},QOlsq:function(e,t){return e>=t},ZdUwV:e(265)+e(338)+e(419),CRyGO:e(265)+e(356)+"de",Mevtm:e(371),QpHwL:function(e,t){return e||t},FMwwn:"white_wins",nOsxa:function(e,t,n,s){return e(t,n,s)},fvZDi:e(439)+"ed",cbUdV:function(e){return e()},Ewjwt:function(e){return e()},IEFyb:function(e,t,n){return e(t,n)},RfcRv:function(e,t){return e===t},TbYXy:function(e,t){return e===t},kVaBB:function(e,t,n){return e(t,n)},tQyGU:function(e,t,n){return e(t,n)},ImtDV:function(e,t,n){return e(t,n)}},{user:s}=n[e(232)](r),[l,u]=t.useState(new a),[d,m]=n[e(348)](t.useState,null),[h,x]=t.useState(!1),[p,f]=t.useState(null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n[e(365)](kt),{playSound:w}=n[e(319)](bt,b,y);t.useRef("");const j=d?n[e(385)](d[e(221)+e(281)],null==s?void 0:s.id)?"w":n[e(327)](d[e(467)+e(281)],null==s?void 0:s.id)?"b":null:null,C=(null==d?void 0:d.status)===n[e(262)]&&n[e(382)](l.turn(),j);t.useEffect(()=>{const t=e,r={HuWkf:function(e,t){return n[qt(474)](e,t)},PNmFL:function(e,t){return n[qt(474)](e,t)},OMjKu:function(e,t){return n[qt(268)](e,t)},ShHho:t(308),aRnOS:n[t(288)],prnaM:function(e,t){return e>=t},HpnoU:t(240),KacFy:function(e,s){return n[t(474)](e,s)},HsiHp:function(e,s){return n[t(366)](e,s)},jJNih:n[t(441)],atDeu:"capture",BnNVI:"O-O-O",kgidr:t(315)};if(!(null==d?void 0:d.id))return;const o=i.channel("game-"+d.id).on(n[t(425)],{event:t(272),schema:n.ocazd,table:n[t(236)],filter:t(217)+d.id},e=>{const n=t,i=e[n(367)];if(r[n(261)](i[n(270)],"completed")&&"completed"!==d[n(270)]&&(r.PNmFL(i[n(257)],n(309))?w(n(309)):i[n(482)]===(null==s?void 0:s.id)?r.OMjKu(w,"victory"):w(n(477))),m(e=>e?{...e,status:i[n(270)],result:i[n(257)],pgn:i[n(207)],currentFen:i.current_fen,moveCount:i.move_count,whiteTimeRemaining:i[n(478)+"_remaining"],blackTimeRemaining:i[n(325)+n(224)],winnerId:i[n(482)],blackPlayerId:i[n(336)+"er_id"],startedAt:i[n(485)]}:null),i.current_fen){const e=new a(i.current_fen);u(e)}})[t(387)](),c=i.channel("moves-"+d.id).on(t(391)+t(216),{event:n[t(209)],schema:n[t(254)],table:n.ofnuP,filter:t(422)+"."+d.id},e=>{const n=t,a={LTFRH:function(e,t){return e(t)}};if(r[n(418)]===r[n(293)])_0x117969(n(210));else{const t=e[n(367)],i=t[n(294)];if(i&&r[n(364)](i[n(410)],4)){const e=i[n(443)](2,4);r[n(243)](v,t=>new Set([...t,e]))}if(t[n(402)]!==(null==s?void 0:s.id)){const e=t.move_san;e.includes("#")?r[n(243)](w,r[n(316)]):e[n(445)]("+")?r[n(440)](n(303),n(303))?r[n(426)](w,r[n(357)]):_0x5a2fed.info(a[n(229)](_0x14264c,_0x54907c)):e[n(445)]("x")?w(r.atDeu):r[n(285)](e,n(300))||e===r[n(251)]?w(r[n(322)]):w(n(266))}}})[t(387)]();return()=>{const e=t;i[e(231)+e(395)](o),i[e(231)+e(395)](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(270)],null==s?void 0:s.id,w]);const N=n.kVaBB(t.useCallback,async t=>{const s=e;n[s(484)](x,!0),n[s(348)](f,null);try{const{data:e,error:r}=await i[s(381)](n[s(236)])[s(372)]("*").eq("id",t).maybeSingle();if(r)throw r;if(!e)throw new Error(n.DwMvA);const o={};o.id=e.id,o[s(221)+s(281)]=e[s(277)+s(234)],o[s(467)+"rId"]=e[s(336)+"er_id"],o[s(270)]=e[s(270)],o[s(257)]=e[s(257)],o.pgn=e[s(207)]||"",o[s(307)]=e.current_fen,o.moveCount=e[s(215)]||0,o.timeControl=e.time_control,o[s(423)+"emaining"]=e[s(478)+"_remaining"],o[s(317)+s(403)]=e[s(325)+"_remaining"],o[s(397)+"te"]=e[s(392)+"tte"],o[s(335)+"te"]=e["black_pale"+s(247)],o.challengeCode=e[s(401)+s(313)],o.winnerId=e.winner_id,o[s(351)]=e[s(274)],o[s(339)]=e.started_at,m(o);const c=new a(e[s(407)+"n"]);u(c);const l={};l[s(404)]=!0;const{data:d}=await i[s(381)]("chess_moves")[s(372)](n[s(220)]).eq(n.hCoxw,t)[s(471)](n[s(286)],l);if(d){const e=new Set;d[s(314)](t=>{const r=s;t[r(294)]&&n.EPNQw(t[r(294)][r(410)],4)&&e[r(340)](t[r(294)][r(443)](2,4))}),v(e)}}catch(r){n[s(330)](f,n.gEFlu(r,Error)?r[s(258)]:n[s(458)])}finally{x(!1)}},[]),D=t.useCallback(async(t,r,a)=>{const c=e;if(!s)return o[c(393)](n.AtfCX),null;x(!0),n[c(289)](f,null);try{const e=St[t]||null,{data:l}=await i[c(386)](c(226)+c(429)+c(343)),{data:u,error:d}=await i[c(381)](n.iWOVG)[c(389)]({white_player_id:s.id,status:n.TrDBM,time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l})[c(372)]()[c(290)]();if(d)throw d;return o[c(292)](r?c(450)+c(394)+c(413)+"nent...":c(463)+c(287)+l),await n[c(366)](N,u.id),u.id}catch(l){const e=l instanceof Error?l[c(258)]:n[c(255)];return n[c(331)](f,e),o[c(393)](e),null}finally{x(!1)}},[s,N]),k=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(393)]("Please sign in to jo"+a(451)),!1;x(!0),n[a(268)](f,null);try{const{data:e,error:c}=await i.from(a(415)+"s")[a(372)]("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(a(409)+a(318));if(e[a(270)]!==a(465))throw new Error(n[a(326)]);if(e["white_play"+a(234)]===s.id)throw new Error(n[a(227)]);const{error:l}=await i[a(381)](n.iWOVG)[a(238)]({black_player_id:s.id,black_palette:r,status:a(296),started_at:(new Date)[a(378)+"g"](),last_move_at:(new Date)[a(378)+"g"]()}).eq("id",t);if(l)throw l;return w(a(280)),o.success(n.FGdjr),await N(t),!0}catch(c){const e=c instanceof Error?c[a(258)]:n[a(276)];return n[a(213)](f,e),o[a(393)](e),!1}finally{if(n[a(474)](n[a(424)],a(346))){const e=_0x44757e?function(){if(_0x44e464){const e=_0x34e8dc[a(462)](_0x4a8dd3,arguments);return _0x2f2126=null,e}}:function(){};return _0x157764=!1,e}n[a(289)](x,!1)}},[s,N,w]),M=t.useCallback(async(t,r)=>{const a=e;if(!s)return o.error("Please sig"+a(435)+a(451)),!1;n[a(484)](x,!0),n[a(213)](f,null);try{const{data:e,error:s}=await i[a(381)](n[a(236)])[a(372)]("id").eq(n[a(447)],t[a(384)+"e"]()).eq(a(270),n[a(267)])[a(453)+"e"]();if(s)throw s;if(!e)throw new Error(a(421)+a(259)+a(417)+a(343));return await k(e.id,r)}catch(c){const e=c instanceof Error?c[a(258)]:a(265)+a(356)+"de";return f(e),o[a(393)](e),!1}finally{n[a(348)](x,!1)}},[s,k]),z=t.useCallback(async(t,r,c)=>{const m=e,h={DUcEq:function(e,t){return e(t)}};if(!d||!s||!C)return!1;try{if(n.QGsIb!==n[m(361)]){const e={};e[m(381)]=t,e.to=r,e[m(475)]=c;const x=l[m(266)](e);if(!x)return w(n[m(438)]),!1;l[m(428)+"e"]()?w(n[m(269)]):l[m(350)]()?w(n.KmVvD):x[m(456)]?w(n[m(260)]):n[m(327)](x[m(457)],m(300))||n[m(474)](x.san,n.mopUB)?w(n.xOOhp):n[m(484)](w,m(266)),u(new a(l[m(273)]())),n.JXdPy(v,e=>new Set([...e,r]));const p=l.pgn(),f=l[m(273)]();let g=null,b=null,y=n[m(262)];if(l[m(219)]()&&(y=m(377),l[m(428)+"e"]()?(g=n[m(327)](l[m(400)](),"w")?m(374):m(242),b=n[m(466)](l[m(400)](),"w")?d[m(467)+m(281)]:d[m(221)+m(281)]):g=n[m(334)]),await i[m(381)](n[m(432)])[m(389)]({game_id:d.id,player_id:s.id,move_number:d[m(271)]+1,move_san:x.san,move_uci:t+r+n[m(283)](c,""),fen_after:f}),await i[m(381)](n[m(236)]).update({pgn:p,current_fen:f,move_count:d.moveCount+1,last_move_at:(new Date).toISOString(),status:y,result:g,winner_id:b,completed_at:n[m(360)](y,m(377))?(new Date).toISOString():null}).eq("id",d.id),y===n[m(396)]&&g)if(n[m(250)](m(341),m(323))){const e=new _0x190167;_0x5c4ad3[m(314)](t=>{const n=m;t.move_uci&&t.move_uci[n(410)]>=4&&e[n(340)](t[n(294)][n(443)](2,4))}),h[m(218)](_0x2d0347,e)}else{if(await n.pMZeS(B,d[m(221)+m(281)],d[m(467)+m(281)],g),g===m(309))w(m(309));else if(b===(null==s?void 0:s.id))if(n[m(264)](m(252),m(252))){const e=new _0x3b06fe(_0x1558d5[m(407)+"n"]);h[m(218)](_0x2f80cf,e)}else n[m(470)](w,n.ECQFG);else w(n.dKApl);n[m(466)](g,"white_wins")?o[m(292)]("w"===j?"You won!":m(212)+"!"):n[m(390)](g,n.volvu)?o[m(292)](n[m(284)](j,"b")?n[m(483)]:"Black wins!"):o.info(n[m(414)](xt,l))}return!0}_0x2a8a9d(!1)}catch(x){return!1}},[l,d,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(!n[l(283)](!t,!r)&&!n[l(474)](a,n[l(398)]))try{const{data:e}=await i[l(381)](n[l(370)])[l(372)](n[l(244)]).in(n[l(437)],[t,r]);if(!e||n[l(278)](e[l(410)],2))return;const u=e[l(297)](e=>e[l(233)]===t),d=e[l(297)](e=>e[l(233)]===r);if(n.rWbfk(!u,!d))return;const m=u[l(416)]||1200,h=d[l(416)]||1200,x=n.dLSon(a,n[l(334)])?l(309):a,p=n[l(388)](c,m,h,x),f={};f[l(416)]=p[l(446)].newRating;const g={};if(g.elo_rating=p.black[l(223)],await Promise[l(369)]([i[l(381)](l(469))[l(238)](f).eq(l(233),t),i.from(n.PBtkn).update(g).eq(n[l(437)],r)]),(null==s?void 0:s.id)===t){const e=p.white[l(310)];o[l(347)]("Rating: "+p[l(446)][l(223)]+" ("+(n[l(464)](e,0)?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p[l(473)].change;o[l(347)](l(468)+p[l(473)][l(223)]+" ("+(e>=0?"+":"")+e+")")}}catch(u){}},[s]),q=n[e(480)](t.useCallback,async()=>{const t=e;if(!n.iLRxE(n.Mevtm,t(245))){const e=_0x548fe4 instanceof _0x368374?_0x3a503b.message:n.CRyGO;return _0x1648e8(e),_0x3ba16d.error(e),!1}{if(n[t(321)](!d,!s)||!j)return;const e="w"===j?t(374):n[t(312)],r="w"===j?d[t(467)+t(281)]:d["whitePlaye"+t(281)];await i[t(381)](n.iWOVG)[t(238)]({status:n[t(396)],result:e,winner_id:r,completed_at:(new Date).toISOString()}).eq("id",d.id),await n[t(408)](B,d[t(221)+t(281)],d[t(467)+t(281)],e),o[t(347)](n.fvZDi)}},[d,s,j,B]),L=n[e(376)](t.useCallback,async()=>{const t=e;o.info("Draw offer"+t(455)+"onent auto"+t(230)+"n this version)"),d&&(await i[t(381)](n.iWOVG)[t(238)]({status:n.udoab,result:n[t(334)],completed_at:(new Date)[t(378)+"g"]()}).eq("id",d.id),await B(d[t(221)+t(281)],d[t(467)+t(281)],n[t(334)]))},[d,B]),P=n[e(319)](t.useCallback,t=>{const n=e,s={};return s[n(431)]=t,s[n(411)]=!0,l[n(460)](s).map(e=>e.to)},[l]),S={};return S.game=l,S[e(304)]=d,S[e(476)]=C,S[e(237)]=j,S[e(249)]=h,S[e(393)]=p,S.makeMove=z,S[e(436)]=D,S[e(373)]=k,S[e(301)]=M,S[e(291)]=q,S[e(349)]=L,S.loadGame=N,S[e(363)+"leMoves"]=P,S.movedSquares=g,S})(),Gt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),P("lobby")};((e={})=>{const n=un,s={aZCjK:"(((.+)+)+)+$",kEoNG:function(e,t){return e instanceof t},wPNEi:function(e){return e()},IYFOt:n(365),iMOiP:function(e,t){return e===t},mluNx:n(362),gZmUy:function(e){return e()},gUmVK:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=kt(),m=s[n(374)](t.useCallback,e=>{const t=n;if({}[t(292)]=s.aZCjK,s.kEoNG(e[t(328)],HTMLInputElement)||e[t(328)]instanceof HTMLTextAreaElement||e[t(328)][t(356)+t(302)])return;const m=e[t(283)].toLowerCase();switch(m){case"m":s[t(363)](u),o[t(330)](d?"Sound muted":t(308)+"ted",{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":c&&r&&(e[t(322)+"ault"](),r());break;case"d":c&&l&&a&&(e["preventDef"+t(338)](),a());break;case s.IYFOt:if(i){if(!s[t(314)](s[t(359)],s[t(359)]))return _0x4f403a.toString()[t(323)](t(303)+"+$").toString()[t(380)+"r"](_0x2c5f7c)[t(323)](jMZcfl.KBfLT);e["preventDef"+t(338)](),s[t(366)](i)}break;case"?":case"/":(!e[t(340)]||"?"===m)&&(e[t(322)+t(338)](),sn())}},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(353)+e(315)](e(333),m),()=>window[e(350)+e(281)](e(333),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==L?Gt:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&Pt(e).then(()=>P("game"))},[j,Pt]),t.useEffect(()=>{if(!D)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",D.id).single();(null==e?void 0:e.elo_rating)&&Ue(e.elo_rating)})()},[D]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));Me(r)}else Me([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(P("game"),null===et&&tt(Pe))},[null==vt?void 0:vt.status,L,Pe,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&D){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",D.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ue(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,D]);const It=async()=>{if(!D)return void H(!0);if(!k)return void I(!0);const e=Ge.find(e=>e.id===Z),t=(null==e?void 0:e.white)||{};await Nt(X,J,t)&&P("waiting")},Ot=async e=>{if(!D)return void H(!0);if(!k)return void I(!0);const t=Ge.find(e=>e.id===Z),n=(null==t?void 0:t.black)||{};await Dt(e,n)&&P("game")},Kt=()=>ke.length?ke.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Pe)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Pe)-Math.abs((t.white_elo||1200)-Pe)):[],Ut=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),xe(Z);const n=Ge.filter(e=>e.id!==Z),s=n[Math.floor(Math.random()*n.length)];fe(s.id),P("bot-game"),De("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=En.find(e=>e.id===Y))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Tt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Et=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Tt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return De("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(De("checkmate"),q.victory()):ee.isCheck()?(De("check"),q.check()):r.captured?(De("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(De("castle"),q.castle()):(De("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),De("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),De("draw"),o.info(xt(ee))),!0;oe(!0);const i=function(e){const t=Nn,n={};n[t(256)]=function(e,t){return e+t},n[t(327)]=function(e,t){return e*t},n[t(247)]="stockfish";const s=n;switch(e){case t(249):return 300+500*Math[t(323)]();case t(310):return s[t(256)](500,1e3*Math[t(323)]());case"hard":return 800+s[t(327)](Math[t(323)](),1500);case s[t(247)]:return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=On(ee,Y);if(c){const e=Tt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(De("checkmate"),q.error()):ee.isCheck()?(De("check"),q.check()):c.captured?(De("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?De("castle"):(De("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),De("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),De("draw"),o.info(xt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,Y,De,q]),Wt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Ae,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Vt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===L&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Fn.map(e=>u.jsx("button",{onClick:()=>{q.select(),_(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(O,{onClick:Ut,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:En.map(e=>u.jsxs("button",{onClick:()=>W(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ge.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>F(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(Z===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ie,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Oe,{to:"/openings",children:u.jsxs(O,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ke,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Oe,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!k&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(O,{onClick:()=>I(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),D&&k&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Pe).color} text-white font-display text-base sm:text-lg`,children:Pe}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Pe).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(O,{onClick:async()=>{if(!D)return void H(!0);if(!k)return void I(!0);const e=Kt().filter(e=>e.white_player_id!==D.id);e.length>0?await Ot(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Kt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Kt().filter(e=>e.white_player_id!==(null==D?void 0:D.id)).length," opponent",1!==Kt().filter(e=>e.white_player_id!==(null==D?void 0:D.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Zn.map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ge.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>F(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(Z===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>V(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>V(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Te,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(O,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!k,children:[!k&&u.jsx(Ee,{className:"h-4 w-4"}),"Create Game",u.jsx(Ye,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Te,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(We,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(O,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!D)return void H(!0);if(!k)return void I(!0);const e=Ge.find(e=>e.id===Z),t=(null==e?void 0:e.black)||{};await zt($.trim(),t)&&P("game")},disabled:jt||!k,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),ze?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ke.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ke.map(e=>{var t;const n=e.white_elo||1200,s=D&&Math.abs(n-Pe)<=$e,r=e.white_player_id===(null==D?void 0:D.id),a=D?Xe(Pe,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Zn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(A,{children:u.jsxs(M,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Pe+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Pe+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Pe+a.loss]})]})]})]})}),u.jsx(O,{size:"sm",onClick:()=>Ot(e.id),disabled:jt||!k||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!J&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(O,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Re,{className:"h-4 w-4"})})]})]}),u.jsx(O,{variant:"outline",onClick:()=>{P("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==D?void 0:D.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(O,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(O,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Ze,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:At,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ve,{whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ve,{whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Jt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==D?void 0:D.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(O,{onClick:Gt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(O,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Te,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(O,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Fe,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=En.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=En.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(O,{variant:"outline",size:"sm",onClick:()=>{le("loss"),De("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Ze,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:ee.fen(),onMove:Et,getAvailableMoves:Wt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ge.find(e=>e.id===he))?void 0:s.white)||Ge[0].white,blackPalette:(null==(l=Ge.find(e=>e.id===pe))?void 0:l.black)||Ge[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ve,{whitePalette:(null==(d=Ge.find(e=>e.id===he))?void 0:d.white)||Ge[0].white,blackPalette:(null==(h=Ge.find(e=>e.id===pe))?void 0:h.black)||Ge[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ve,{whitePalette:(null==(f=Ge.find(e=>e.id===he))?void 0:f.white)||Ge[0].white,blackPalette:(null==(v=Ge.find(e=>e.id===pe))?void 0:v.black)||Ge[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Ft,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(O,{onClick:Gt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(O,{variant:"outline",onClick:Ut,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(O,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Fe,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Je,{}),u.jsx(qe,{isOpen:S,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:G,onClose:()=>I(!1),trigger:"general"}),u.jsx(Qt,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?ue:we,whitePalette:"bot-game"===L?(null==(b=Ge.find(e=>e.id===he))?void 0:b.white)||Ge[0].white:(null==vt?void 0:vt.whitePalette)||Ge[0].white,blackPalette:"bot-game"===L?(null==(y=Ge.find(e=>e.id===pe))?void 0:y.black)||Ge[0].black:(null==vt?void 0:vt.blackPalette)||Ge[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=En.find(e=>e.id===Y))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?ue.length:we.length}})]})};export{Jn as default};
