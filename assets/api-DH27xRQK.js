const n="import { toast } from 'sonner';\n\n// Shopify Storefront API Configuration\nconst SHOPIFY_API_VERSION = '2025-07';\nconst SHOPIFY_STORE_PERMANENT_DOMAIN = 'printify-shop-manager-fs4kw.myshopify.com';\nconst SHOPIFY_STOREFRONT_URL = `https://${SHOPIFY_STORE_PERMANENT_DOMAIN}/api/${SHOPIFY_API_VERSION}/graphql.json`;\nconst SHOPIFY_STOREFRONT_TOKEN = 'a0ffa036b52f6150e7e1bfaf4b307ff4';\n\nexport interface ShopifyProduct {\n  node: {\n    id: string;\n    title: string;\n    description: string;\n    handle: string;\n    priceRange: {\n      minVariantPrice: {\n        amount: string;\n        currencyCode: string;\n      };\n    };\n    images: {\n      edges: Array<{\n        node: {\n          url: string;\n          altText: string | null;\n        };\n      }>;\n    };\n    variants: {\n      edges: Array<{\n        node: {\n          id: string;\n          title: string;\n          price: {\n            amount: string;\n            currencyCode: string;\n          };\n          availableForSale: boolean;\n          selectedOptions: Array<{\n            name: string;\n            value: string;\n          }>;\n        };\n      }>;\n    };\n    options: Array<{\n      name: string;\n      values: string[];\n    }>;\n  };\n}\n\nconst STOREFRONT_QUERY = `\n  query GetProducts($first: Int!) {\n    products(first: $first) {\n      edges {\n        node {\n          id\n          title\n          description\n          handle\n          priceRange {\n            minVariantPrice {\n              amount\n              currencyCode\n            }\n          }\n          images(first: 5) {\n            edges {\n              node {\n                url\n                altText\n              }\n            }\n          }\n          variants(first: 10) {\n            edges {\n              node {\n                id\n                title\n                price {\n                  amount\n                  currencyCode\n                }\n                availableForSale\n                selectedOptions {\n                  name\n                  value\n                }\n              }\n            }\n          }\n          options {\n            name\n            values\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst PRODUCT_BY_HANDLE_QUERY = `\n  query GetProductByHandle($handle: String!) {\n    productByHandle(handle: $handle) {\n      id\n      title\n      description\n      handle\n      priceRange {\n        minVariantPrice {\n          amount\n          currencyCode\n        }\n      }\n      images(first: 10) {\n        edges {\n          node {\n            url\n            altText\n          }\n        }\n      }\n      variants(first: 20) {\n        edges {\n          node {\n            id\n            title\n            price {\n              amount\n              currencyCode\n            }\n            availableForSale\n            selectedOptions {\n              name\n              value\n            }\n          }\n        }\n      }\n      options {\n        name\n        values\n      }\n    }\n  }\n`;\n\nexport async function storefrontApiRequest(query: string, variables: Record<string, unknown> = {}) {\n  const response = await fetch(SHOPIFY_STOREFRONT_URL, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Shopify-Storefront-Access-Token': SHOPIFY_STOREFRONT_TOKEN\n    },\n    body: JSON.stringify({\n      query,\n      variables,\n    }),\n  });\n\n  if (response.status === 402) {\n    toast.error(\"Shopify: Payment required\", {\n      description: \"Shopify API access requires an active billing plan.\"\n    });\n    return null;\n  }\n\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  const data = await response.json();\n  \n  if (data.errors) {\n    throw new Error(`Shopify error: ${data.errors.map((e: { message: string }) => e.message).join(', ')}`);\n  }\n\n  return data;\n}\n\n// Simple in-memory cache for products\nlet productsCache: { data: ShopifyProduct[]; timestamp: number } | null = null;\nconst CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\nexport async function fetchProducts(limit = 10): Promise<ShopifyProduct[]> {\n  // Check cache first\n  if (productsCache && Date.now() - productsCache.timestamp < CACHE_TTL) {\n    return productsCache.data;\n  }\n  \n  const data = await storefrontApiRequest(STOREFRONT_QUERY, { first: limit });\n  if (!data) return [];\n  \n  const products = data.data.products.edges || [];\n  \n  // Cache the results\n  productsCache = { data: products, timestamp: Date.now() };\n  \n  return products;\n}\n\nexport async function fetchProductByHandle(handle: string): Promise<ShopifyProduct['node'] | null> {\n  const data = await storefrontApiRequest(PRODUCT_BY_HANDLE_QUERY, { handle });\n  if (!data) return null;\n  return data.data.productByHandle;\n}";export{n as default};
