const n='/**\n * Position Tracker Component\n * Live simulated $1000 positions with correlative data\n */\n\nimport React, { useEffect, useCallback, useRef } from \'react\';\nimport { Card, CardContent, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Button } from \'@/components/ui/button\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { \n  TrendingUp, \n  TrendingDown, \n  DollarSign, \n  Target,\n  ArrowUpRight,\n  ArrowDownRight,\n  XCircle,\n  Activity,\n  Link,\n  Zap\n} from \'lucide-react\';\nimport { SimulatedPosition, PositionStats } from \'@/hooks/useSimulatedPositions\';\nimport { cn } from \'@/lib/utils\';\n\ninterface PositionTrackerProps {\n  openPositions: SimulatedPosition[];\n  closedPositions: SimulatedPosition[];\n  stats: PositionStats;\n  currentSymbol: string;\n  currentPrice: number;\n  correlatedPrices: Map<string, number>;\n  onOpenPosition: (symbol: string, direction: \'long\' | \'short\', price: number, correlatedPrices: Map<string, number>) => void;\n  onClosePosition: (positionId: string, closePrice: number) => void;\n  onUpdatePosition: (positionId: string, currentPrice: number, correlatedPrices: Map<string, number>) => void;\n}\n\nexport function PositionTracker({\n  openPositions,\n  closedPositions,\n  stats,\n  currentSymbol,\n  currentPrice,\n  correlatedPrices,\n  onOpenPosition,\n  onClosePosition,\n  onUpdatePosition\n}: PositionTrackerProps) {\n  const updateIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  \n  // Update open positions with latest prices\n  useEffect(() => {\n    if (openPositions.length === 0) return;\n    \n    openPositions.forEach(pos => {\n      if (pos.symbol === currentSymbol) {\n        onUpdatePosition(pos.id, currentPrice, correlatedPrices);\n      }\n    });\n  }, [currentPrice, currentSymbol, openPositions, correlatedPrices, onUpdatePosition]);\n  \n  const handleOpenLong = useCallback(() => {\n    onOpenPosition(currentSymbol, \'long\', currentPrice, correlatedPrices);\n  }, [currentSymbol, currentPrice, correlatedPrices, onOpenPosition]);\n  \n  const handleOpenShort = useCallback(() => {\n    onOpenPosition(currentSymbol, \'short\', currentPrice, correlatedPrices);\n  }, [currentSymbol, currentPrice, correlatedPrices, onOpenPosition]);\n  \n  const formatPnl = (pnl: number) => {\n    const formatted = Math.abs(pnl).toFixed(2);\n    return pnl >= 0 ? `+$${formatted}` : `-$${formatted}`;\n  };\n  \n  const formatPercent = (percent: number) => {\n    const formatted = Math.abs(percent).toFixed(2);\n    return percent >= 0 ? `+${formatted}%` : `-${formatted}%`;\n  };\n\n  const currentPosition = openPositions.find(p => p.symbol === currentSymbol);\n\n  return (\n    <div className="space-y-4">\n      {/* Entry Controls */}\n      <Card className="border-primary/20 bg-card/50">\n        <CardHeader className="pb-2">\n          <CardTitle className="text-sm flex items-center gap-2">\n            <DollarSign className="w-4 h-4 text-primary" />\n            Simulated $1,000 Entry\n          </CardTitle>\n        </CardHeader>\n        <CardContent className="space-y-3">\n          <div className="flex items-center justify-between text-sm">\n            <span className="text-muted-foreground">Current Symbol:</span>\n            <Badge variant="outline" className="font-mono">{currentSymbol}</Badge>\n          </div>\n          <div className="flex items-center justify-between text-sm">\n            <span className="text-muted-foreground">Entry Price:</span>\n            <span className="font-mono font-bold">${currentPrice.toFixed(2)}</span>\n          </div>\n          <div className="flex items-center justify-between text-sm">\n            <span className="text-muted-foreground">Shares @ $1000:</span>\n            <span className="font-mono">{(1000 / currentPrice).toFixed(4)}</span>\n          </div>\n          \n          {!currentPosition ? (\n            <div className="grid grid-cols-2 gap-2 pt-2">\n              <Button \n                onClick={handleOpenLong}\n                className="bg-emerald-600 hover:bg-emerald-700 text-white"\n              >\n                <ArrowUpRight className="w-4 h-4 mr-1" />\n                Long $1K\n              </Button>\n              <Button \n                onClick={handleOpenShort}\n                className="bg-red-600 hover:bg-red-700 text-white"\n              >\n                <ArrowDownRight className="w-4 h-4 mr-1" />\n                Short $1K\n              </Button>\n            </div>\n          ) : (\n            <Button \n              onClick={() => onClosePosition(currentPosition.id, currentPrice)}\n              variant="destructive"\n              className="w-full"\n            >\n              <XCircle className="w-4 h-4 mr-1" />\n              Close Position\n            </Button>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Active Position with Correlative Data */}\n      {currentPosition && (\n        <Card className={cn(\n          "border-2",\n          currentPosition.pnl >= 0 ? "border-emerald-500/50 bg-emerald-950/20" : "border-red-500/50 bg-red-950/20"\n        )}>\n          <CardHeader className="pb-2">\n            <CardTitle className="text-sm flex items-center justify-between">\n              <div className="flex items-center gap-2">\n                <Activity className="w-4 h-4 text-primary animate-pulse" />\n                Live Position: {currentPosition.symbol}\n                <Badge variant={currentPosition.direction === \'long\' ? \'default\' : \'destructive\'}>\n                  {currentPosition.direction.toUpperCase()}\n                </Badge>\n              </div>\n              <span className={cn(\n                "font-mono font-bold text-lg",\n                currentPosition.pnl >= 0 ? "text-emerald-400" : "text-red-400"\n              )}>\n                {formatPnl(currentPosition.pnl)}\n              </span>\n            </CardTitle>\n          </CardHeader>\n          <CardContent className="space-y-4">\n            {/* Main Position Stats */}\n            <div className="grid grid-cols-3 gap-3 text-xs">\n              <div className="p-2 bg-background/50 rounded">\n                <div className="text-muted-foreground">Entry</div>\n                <div className="font-mono font-bold">${currentPosition.entryPrice.toFixed(2)}</div>\n              </div>\n              <div className="p-2 bg-background/50 rounded">\n                <div className="text-muted-foreground">Current</div>\n                <div className="font-mono font-bold">${currentPosition.currentPrice.toFixed(2)}</div>\n              </div>\n              <div className="p-2 bg-background/50 rounded">\n                <div className="text-muted-foreground">Return</div>\n                <div className={cn(\n                  "font-mono font-bold",\n                  currentPosition.pnlPercent >= 0 ? "text-emerald-400" : "text-red-400"\n                )}>\n                  {formatPercent(currentPosition.pnlPercent)}\n                </div>\n              </div>\n            </div>\n            \n            {/* Peak/Trough */}\n            <div className="flex items-center justify-between text-xs">\n              <div className="flex items-center gap-1">\n                <TrendingUp className="w-3 h-3 text-emerald-400" />\n                <span className="text-muted-foreground">Peak:</span>\n                <span className="font-mono text-emerald-400">{formatPnl(currentPosition.peakPnl)}</span>\n              </div>\n              <div className="flex items-center gap-1">\n                <TrendingDown className="w-3 h-3 text-red-400" />\n                <span className="text-muted-foreground">Trough:</span>\n                <span className="font-mono text-red-400">{formatPnl(currentPosition.troughPnl)}</span>\n              </div>\n            </div>\n\n            {/* Correlative Assets */}\n            {currentPosition.correlatedAssets.length > 0 && (\n              <div className="space-y-2">\n                <div className="flex items-center gap-2 text-xs text-muted-foreground">\n                  <Link className="w-3 h-3" />\n                  Correlated Markets (if $1K was here instead)\n                </div>\n                <div className="space-y-1">\n                  {currentPosition.correlatedAssets.map(asset => (\n                    <div \n                      key={asset.symbol}\n                      className={cn(\n                        "flex items-center justify-between p-2 rounded text-xs",\n                        asset.isAligned ? "bg-primary/10" : "bg-yellow-500/10"\n                      )}\n                    >\n                      <div className="flex items-center gap-2">\n                        <Badge variant="outline" className="font-mono text-xs">\n                          {asset.symbol}\n                        </Badge>\n                        <span className="text-muted-foreground truncate max-w-24">\n                          {asset.name}\n                        </span>\n                        <span className={cn(\n                          "text-xs px-1 rounded",\n                          asset.correlation > 0 ? "bg-emerald-500/20 text-emerald-400" : "bg-red-500/20 text-red-400"\n                        )}>\n                          {asset.correlation > 0 ? \'+\' : \'\'}{(asset.correlation * 100).toFixed(0)}%\n                        </span>\n                      </div>\n                      <div className="flex items-center gap-3">\n                        <span className="font-mono text-muted-foreground">\n                          ${asset.currentPrice.toFixed(2)}\n                        </span>\n                        <span className={cn(\n                          "font-mono font-bold",\n                          asset.hypotheticalPnl >= 0 ? "text-emerald-400" : "text-red-400"\n                        )}>\n                          {formatPnl(asset.hypotheticalPnl)}\n                        </span>\n                        {!asset.isAligned && (\n                          <Zap className="w-3 h-3 text-yellow-400" />\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Session Stats */}\n      <Card className="border-muted bg-card/30">\n        <CardHeader className="pb-2">\n          <CardTitle className="text-sm flex items-center gap-2">\n            <Target className="w-4 h-4 text-primary" />\n            Session Performance\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className="grid grid-cols-2 gap-2 text-xs">\n            <div className="p-2 bg-background/50 rounded">\n              <div className="text-muted-foreground">Total Trades</div>\n              <div className="font-mono font-bold">{stats.totalTrades}</div>\n            </div>\n            <div className="p-2 bg-background/50 rounded">\n              <div className="text-muted-foreground">Win Rate</div>\n              <div className={cn(\n                "font-mono font-bold",\n                stats.winRate >= 50 ? "text-emerald-400" : "text-red-400"\n              )}>\n                {stats.winRate.toFixed(1)}%\n              </div>\n            </div>\n            <div className="p-2 bg-background/50 rounded">\n              <div className="text-muted-foreground">Total P&L</div>\n              <div className={cn(\n                "font-mono font-bold",\n                stats.totalPnl >= 0 ? "text-emerald-400" : "text-red-400"\n              )}>\n                {formatPnl(stats.totalPnl)}\n              </div>\n            </div>\n            <div className="p-2 bg-background/50 rounded">\n              <div className="text-muted-foreground">Open P&L</div>\n              <div className={cn(\n                "font-mono font-bold",\n                stats.currentOpenPnl >= 0 ? "text-emerald-400" : "text-red-400"\n              )}>\n                {formatPnl(stats.currentOpenPnl)}\n              </div>\n            </div>\n            <div className="p-2 bg-background/50 rounded">\n              <div className="text-muted-foreground">Best Trade</div>\n              <div className="font-mono font-bold text-emerald-400">\n                {formatPnl(stats.bestTrade)}\n              </div>\n            </div>\n            <div className="p-2 bg-background/50 rounded">\n              <div className="text-muted-foreground">Worst Trade</div>\n              <div className="font-mono font-bold text-red-400">\n                {formatPnl(stats.worstTrade)}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Recent Closed Positions */}\n      {closedPositions.length > 0 && (\n        <Card className="border-muted bg-card/30">\n          <CardHeader className="pb-2">\n            <CardTitle className="text-sm">Recent Closed Positions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className="space-y-1 max-h-32 overflow-y-auto">\n              {closedPositions.slice(-5).reverse().map(pos => (\n                <div \n                  key={pos.id}\n                  className="flex items-center justify-between text-xs p-1 rounded bg-background/30"\n                >\n                  <div className="flex items-center gap-2">\n                    <Badge variant={pos.direction === \'long\' ? \'default\' : \'destructive\'} className="text-xs">\n                      {pos.direction[0].toUpperCase()}\n                    </Badge>\n                    <span className="font-mono">{pos.symbol}</span>\n                  </div>\n                  <span className={cn(\n                    "font-mono font-bold",\n                    (pos.closePnl || 0) >= 0 ? "text-emerald-400" : "text-red-400"\n                  )}>\n                    {formatPnl(pos.closePnl || 0)}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n';export{n as default};
