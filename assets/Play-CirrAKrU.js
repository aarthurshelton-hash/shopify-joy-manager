import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as w,aZ as y,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as q,bF as A,bG as L,b6 as S,ae as P,bH as H,ah as I,bI as _,B as G,bJ as T,bK as W,bL as U,bM as E,bN as K,bO as O,bP as Y,bQ as X,bR as R,bS as J,bT as Z,bU as F,bV as V,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as we,a5 as ye,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as qe,c8 as Ae,aM as Le,c9 as Se,H as Pe,P as He,ca as Ie,b3 as _e,bs as Ge,be as Te,cb as We,aP as Ue,cc as Ee,d as Ke,b2 as Oe,a9 as Ye,cd as Xe,ce as Re,cf as Je,al as Ze,au as Fe}from"./index-DxnJiuLa.js";import{L as Ve}from"./LiveColorLegend-CySO4vCZ.js";import{T as Qe}from"./trending-down-DOywwDZV.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-D658wtA_.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=xt,t=mt();for(;;)try{if(110358===parseInt(e(297))/1+parseInt(e(325))/2+-parseInt(e(322))/3*(-parseInt(e(337))/4)+parseInt(e(313))/5+parseInt(e(339))/6+-parseInt(e(273))/7+-parseInt(e(286))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[xt(303)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=xt,t={};t[e(293)]=e(340)+"+$";const n=t;return ut[e(287)]()[e(329)](n[e(293)])[e(287)]()[e(278)+"r"](ut)[e(329)](n.uuvdP)});ut();const dt=function(){const e=xt,t={};t[e(323)]=function(e,t){return e===t},t[e(301)]=e(327),t.ItfQn=e(333)+"nt_material",t[e(274)]=e(290);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(292)]=n[a(302)],i[a(279)]="Insufficie"+a(288)+"l";const o=i;if(n[a(323)]("dVXkH",n[a(274)]))return _0x26f7bf[a(309)]()||_0x25a9cb[a(312)+"e"]();{const e=s?function(){const e=a;if(!n[e(323)]("COWsP",n[e(301)])){const t={};return t[e(326)]=o[e(292)],t[e(281)]=e(299)+e(308)+" material.",t[e(318)+"ge"]=o.peBno,t}if(r){const n=r[e(303)](t,arguments);return r=null,n}}:function(){};return s=!1,e}}}();function mt(){const e=["ng1zA3rmwa","CMvLzM9SzcbYzq","mJy5ndeYDhvuu1bR","kcGOlISPkYKRkq","zxHJzxb0Aw9U","y3rVCIGICMv0Dq","rhjHDYbIEsb0Aa","AxnjBNn1zMzPyW","BgvUz3rO","sw5ZDwzMAwnPzq","DMuGCNvSzs4","mtaXmJqYnefWt1HOAW","ze92zxy","ywTeAMC","rhjHDW","BMn0Aw9UkcKG","y29UC3rYDwn0BW","CgvcBM8","Bw92zxmGyxzHAq","BwvZC2fNzq","zxjYB3i","x3j1Bgu","wffKD0y","yMLUza","mtmWodGWmg9htxrRva","Dg9tDhjPBMC","BNqGtwf0zxjPyq","Dw5RBM93BG","Dxrkt2m","CM4GDgHPCYiPka","C1n6uhC","Dxv2zfa","Cgv0AxrPB24U","x19WCM90B19F","Dgn3yMS","mtyZodKXsvDvDgnK","C3bSAxq","rhjHDYbIEsbPBG","ie5VigXLz2fSia","rgzeAhq","sxrMuw4","yxbWBhK","AwvUDe1HDgvYAq","uefztgG","C3rHBgvTyxrL","whPQtMe","C3vMzMLJAwvUDa","AxneCMf3","Aw5MBW","zfjLCgv0AxrPBW","AxntDgfSzw1HDa","odq1otvmtKvewvi","r2nSAfe","thbxt1m","DuHiC2S","uMvWzxrPDgLVBG","C2HVCNrnzxnZyq","y2ryAu8","D2fYBG","CMvWzxrPDgLVBG","mZu1odq4BwTjtK5X","s3fhs1a","BgfIBguU","mtq4nti0vgPJBvDg","CMvHC29U","q09xC1a","y2T4r1G","C2vHCMnO","DgfIBgu","vgHYzwvMB2XKia","y29UC29Szq","Aw5ZDwzMAwnPzq","wKz3yKm","AxnuAhjLzwzVBa","CMv0DxjUicHMDq"];return(mt=function(){return e})()}function xt(e,t){e-=270;const n=mt();let s=n[e];if(void 0===xt.iELeYS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};xt.AOZwbW=r,xt.cEhpXv={},xt.iELeYS=!0}const a=e+n[0],i=xt.cEhpXv[a];if(i)s=i;else{const e=function(e){this.jgzodB=e,this.fBXuGb=[1,0,0],this.BjUSQy=function(){return"newState"},this.XzGhTg="\\w+ *\\(\\) *{\\w+ *",this.AjJTCZ="['|\"].+['|\"];? *}"};e.prototype.bOBvkk=function(){const e=new RegExp(this.XzGhTg+this.AjJTCZ).test(this.BjUSQy.toString())?--this.fBXuGb[1]:--this.fBXuGb[0];return this.RnJlXW(e)},e.prototype.RnJlXW=function(e){return Boolean(~e)?this.PBmBjB(this.jgzodB):e},e.prototype.PBmBjB=function(e){for(let t=0,n=this.fBXuGb.length;t<n;t++)this.fBXuGb.push(Math.round(Math.random())),n=this.fBXuGb.length;return e(this.fBXuGb[0])},new e(xt).bOBvkk(),s=xt.AOZwbW(s),xt.cEhpXv[a]=s}return s}function ht(e){const t=xt;return function(e){const t=xt,n={};n[t(328)]="Stalemate!"+t(300)+t(280)+t(324),n[t(275)]="threefold_"+t(321),n[t(305)]=t(343)+t(338)+t(294),n[t(296)]=function(e,t){return e>=t},n[t(315)]="fifty_move"+t(283),n[t(334)]=t(289);const s=n;if(e[t(312)+"e"]()){const e={};return e[t(326)]=t(306),e[t(281)]=s[t(328)],e[t(318)+"ge"]="Stalemate!",e}if(e[t(335)+t(311)+"n"]()){const e={};return e[t(326)]=s[t(275)],e[t(281)]=s[t(305)],e[t(318)+"ge"]=t(331)+t(317),e}if(e[t(344)+t(304)+"al"]()){const e={};return e[t(326)]=t(333)+"nt_material",e[t(281)]=t(299)+t(308)+" material.",e[t(318)+"ge"]=t(271)+t(288)+"l",e}const r=e.fen(),a=parseInt(r[t(298)](" ")[4],10);if(s.tcwbk(a,100)){const e={};return e[t(326)]=s[t(315)],e[t(281)]=t(343)+"e fifty-mo"+t(272),e.shortMessage="50-Move Rule",e}const i={};return i[t(326)]=s.ZFwbC,i[t(281)]="Game drawn!",i[t(318)+"ge"]=t(276),i}(e)[t(281)]}dt(void 0,function(){const e=xt,t={mQNiD:function(e,t){return e(t)},uHHsk:function(e,t){return e+t},cdXiO:"{}.constru"+e(342)+e(291)+" )",XzjNa:function(e){return e()},GclhQ:e(310),XQdwF:e(282)};let n;try{const s=t.mQNiD(Function,t[e(316)](e(336)+e(277),t[e(319)])+");");n=t[e(307)](s)}catch(a){n=window}const s=n[e(332)]=n[e(332)]||{},r=["log",e(320),t[e(314)],t[e(284)],e(341),e(330),"trace"];for(let i=0;i<r[e(270)];i++){const t=dt[e(278)+"r"].prototype[e(285)](dt),n=r[i],a=s[n]||t;t[e(295)]=dt[e(285)](dt),t[e(287)]=a[e(287)][e(285)](a),s[n]=t}})(),function(){const e=ft,t=bt();for(;;)try{if(619845===-parseInt(e(315))/1*(parseInt(e(262))/2)+-parseInt(e(277))/3+parseInt(e(361))/4+-parseInt(e(331))/5+-parseInt(e(327))/6*(-parseInt(e(301))/7)+-parseInt(e(298))/8+-parseInt(e(303))/9*(-parseInt(e(369))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){const e=ft,t={lDMRr:function(e){return e()},WlHrz:e(294),XZXxH:e(368)};let n=!0;return function(s,r){const a=e;if(t[a(343)]===a(354)){const e=_0x19ced0[a(314)](_0xb18a05,arguments);return _0x175e00=null,e}{const e=n?function(){const e=a,n={lKcEf:function(e,t){return e(t)},iHCIo:function(e,t){return e+t},qdoMe:e(278)+e(268)+e(323)+" )",REqra:function(n){return t[e(318)](n)},apYIP:"warn",pkoiz:e(309),xgvBB:e(310)};if(t[e(291)]===e(358)){let t;try{const s=n[e(382)](_0x28bab6,n.iHCIo(e(378)+e(308),n.qdoMe)+");");t=n.REqra(s)}catch(i){t=_0x11a84b}const s=t[e(311)]=t.console||{},r=[e(340),n[e(360)],n[e(356)],"error",e(375),e(374),n.xgvBB];for(let n=0;n<r[e(316)];n++){const t=_0x17187a.constructor[e(364)][e(377)](_0x40c2ca),a=r[n],i=s[a]||t;t.__proto__=_0x43903a.bind(_0x3b556b),t.toString=i[e(385)].bind(i),s[a]=t}}else if(r){const t=r[e(314)](s,arguments);return r=null,t}}:function(){};return n=!1,e}}}()(void 0,function(){const e=ft,t={};t[e(342)]=e(259)+"+$";const n=t;return pt[e(385)]()[e(337)](n[e(342)])[e(385)]()[e(336)+"r"](pt).search(e(259)+"+$")});function ft(e,t){e-=254;const n=bt();let s=n[e];if(void 0===ft.EMXbLs){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ft.kYCQUw=r,ft.OWQtbx={},ft.EMXbLs=!0}const a=e+n[0],i=ft.OWQtbx[a];if(i)s=i;else{const e=function(e){this.tiLkjL=e,this.WnRvrA=[1,0,0],this.eVMUcn=function(){return"newState"},this.UklkTZ="\\w+ *\\(\\) *{\\w+ *",this.gUoapE="['|\"].+['|\"];? *}"};e.prototype.MSxeEN=function(){const e=new RegExp(this.UklkTZ+this.gUoapE).test(this.eVMUcn.toString())?--this.WnRvrA[1]:--this.WnRvrA[0];return this.JgusMS(e)},e.prototype.JgusMS=function(e){return Boolean(~e)?this.fPztpx(this.tiLkjL):e},e.prototype.fPztpx=function(e){for(let t=0,n=this.WnRvrA.length;t<n;t++)this.WnRvrA.push(Math.round(Math.random())),n=this.WnRvrA.length;return e(this.WnRvrA[0])},new e(ft).MSxeEN(),s=ft.kYCQUw(s),ft.OWQtbx[a]=s}return s}pt();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();gt(void 0,function(){const e=ft,t={ySiBf:function(e,t){return e(t)},knvmX:function(e,t){return e+t},nUnrN:e(278)+e(268)+e(323)+" )",DYKtS:function(e,t){return e===t},gixZh:e(371),hwEHu:e(340),qRYwZ:function(e,t){return e<t}};let n;try{n=t[e(350)](Function,t[e(359)](e(378)+e(308),t[e(300)])+");")()}catch(a){t[e(292)](t[e(275)],"msBiN")?_0x28e7b8[e(295)][e(269)][e(299)]():n=window}const s=n[e(311)]=n.console||{},r=[t[e(332)],e(267),"info",e(352),e(375),"table",e(310)];for(let i=0;t[e(272)](i,r[e(316)]);i++){const t=gt[e(336)+"r"][e(364)].bind(gt),n=r[i],a=s[n]||t;t[e(302)]=gt[e(377)](gt),t[e(385)]=a[e(385)][e(377)](a),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=ft,r={yFKAj:function(e,t){return e!==t},iLdbt:s(357),QnxYh:s(324),kUXbi:s(258),RtkcW:"Web Audio "+s(370)+s(330),YkxDa:function(e,t){return e===t},JCJTm:s(254),eKCoZ:function(e){return e()},NURFZ:function(e,t){return e||t},VdZyI:function(e,t){return e+t},sBgdR:function(e,t){return e+t},mUBIW:function(e,t){return e!==t},MQubr:"BQBzR",ybfgu:function(e,t){return e<t},TgYRu:function(e,t){return e-t},TIdWY:s(328),zKYqH:s(286),FbHqH:function(e,t,n,s,r,a){return e(t,n,s,r,a)},RaMNW:"sine",ikaei:function(e,t,n){return e(t,n)},pdkoP:function(e,t,n){return e(t,n)},zlEBZ:s(282),Ugnlb:function(e,t,n,s,r,a){return e(t,n,s,r,a)},powWe:"triangle",PgllK:function(e,t,n,s,r,a){return e(t,n,s,r,a)},FUqaY:s(319),nxNxi:function(e,t,n,s,r,a){return e(t,n,s,r,a)},HlSpp:function(e,t,n,s,r,a){return e(t,n,s,r,a)},FaOsY:function(e,t,n){return e(t,n)},DfsRK:s(380),ZdDXy:s(279),LfPcJ:function(e,t){return e(t)},JStpm:function(e,t,n){return e(t,n)},GdJYK:function(e,t,n){return e(t,n)},vSGpu:function(e,t,n){return e(t,n)}},a={};a[s(269)]=null,a[s(265)]=null;const i=r[s(348)](t.useRef,a),o=r.JStpm(t.useCallback,()=>{const e=s;if(!i[e(295)][e(269)])try{if(r[e(325)](r[e(347)],r[e(338)])){const t=new(window.AudioContext||window["webkitAudi"+e(344)]),s=t[e(305)]();s[e(313)](t.destination),s.gain.value=n;const r={};r.context=t,r[e(265)]=s,i[e(295)]=r}else if(_0x5c288f){const t=_0xdf0168[e(314)](_0x287b76,arguments);return _0x18e90b=null,t}}catch(t){if(e(258)!==r[e(255)])return()=>{const t=e;_0x3abc19.current[t(269)]&&_0x27d882[t(295)][t(269)][t(299)]()}}},[n]);r.GdJYK(t.useEffect,()=>{const e=s;if({}[e(335)]=e(259)+"+$",i[e(295)].gainNode){if(r.YkxDa(r.JCJTm,e(379)))return _0x260c74[e(385)]()[e(337)](kdmHfi[e(335)])[e(385)]()[e(336)+"r"](_0x3c5b4f)[e(337)](kdmHfi[e(335)]);i[e(295)][e(265)][e(345)][e(329)]=n}},[n]);const c=t.useCallback((t,n,a=s(304),c=.01,l=.1,u)=>{const d=s;if(!e)return;r[d(273)](o);const{context:m,gainNode:x}=i[d(295)];if(r.NURFZ(!m,!x))return;const h=m["createOsci"+d(296)](),p=m.createGain();h[d(355)]=a,h[d(321)][d(257)+d(322)](t,m[d(266)+"e"]),u&&h[d(321)][d(307)+d(306)+"ueAtTime"](u,r.VdZyI(m[d(266)+"e"],n)),p.gain[d(257)+d(322)](0,m[d(266)+"e"]),p[d(345)]["linearRamp"+d(339)+"ime"](1,m[d(266)+"e"]+c),p.gain[d(307)+d(306)+d(372)](.01,m[d(266)+"e"]+n-l),p[d(345)][d(373)+d(339)+d(274)](0,r[d(276)](m[d(266)+"e"],n)),h[d(313)](p),p[d(313)](x),h[d(326)](m.currentTime),h[d(365)](r.sBgdR(m[d(266)+"e"],n))},[e,o]),l=r[s(333)](t.useCallback,(t,n=1e3)=>{const a=s;if(!r[a(381)](a(288),r[a(312)])){const e=_0x748695?function(){if(_0x4918c4){const e=_0x2f8f6d[a(314)](_0x589982,arguments);return _0x534004=null,e}}:function(){};return _0x52d702=!1,e}{if(!e)return;o();const{context:s,gainNode:c}=i[a(295)];if(!s||!c)return;const l=s[a(387)]*t,u=s.createBuffer(1,l,s[a(387)]),d=u[a(271)+a(363)](0);for(let e=0;r[a(362)](e,l);e++)d[e]=r.TgYRu(2*Math[a(297)](),1);const m=s[a(280)+a(256)]();m[a(260)]=u;const x=s[a(353)+a(270)]();x[a(355)]=r.TIdWY,x[a(321)][a(329)]=n;const h=s[a(305)]();h[a(345)][a(257)+a(322)](.3,s[a(266)+"e"]),h[a(345)][a(307)+a(306)+a(372)](.01,r[a(276)](s.currentTime,t)),m.connect(x),x[a(313)](h),h.connect(c),m[a(326)](s[a(266)+"e"]),m[a(365)](s[a(266)+"e"]+t)}},[e,o]),u=r[s(341)](t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(264)]:r.FbHqH(c,800,.08,r[n(334)],.005,.05),r[n(384)](c,400,.06,n(320),.005,.04);break;case n(287):r[n(333)](l,.12,2e3),c(300,.1,"square",.005,.08),c(150,.15,r[n(334)],.01,.1);break;case"castle":c(600,.06,r.RaMNW,.005,.04),r.pdkoP(setTimeout,()=>c(700,.06,n(304),.005,.04),80);break;case r.zlEBZ:r[n(383)](c,880,.15,r[n(293)],.01,.1),setTimeout(()=>c(1100,.12,n(320),.01,.08),120);break;case"checkmate":r[n(261)](c,880,.2,n(304),.01,.15),setTimeout(()=>c(660,.2,n(304),.01,.15),150),setTimeout(()=>c(440,.3,n(304),.01,.2),300),setTimeout(()=>c(330,.4,"sine",.01,.3),500);break;case n(284):c(523,.12,r[n(334)],.01,.08),r.pdkoP(setTimeout,()=>c(659,.12,n(304),.01,.08),100),r[n(283)](setTimeout,()=>c(784,.2,n(304),.01,.15),200);break;case n(367):r[n(261)](c,440,.15,r[n(293)],.01,.1),r[n(283)](setTimeout,()=>c(349,.25,n(320),.01,.2),150);break;case r[n(376)]:r[n(346)](c,523,.1,n(304),.01,.08),setTimeout(()=>c(659,.1,n(304),.01,.08),100),setTimeout(()=>c(784,.1,n(304),.01,.08),200),setTimeout(()=>c(1047,.3,n(304),.01,.25),300);break;case n(281):r[n(317)](c,392,.2,n(304),.02,.15),r[n(349)](setTimeout,()=>c(349,.2,n(304),.02,.15),200),setTimeout(()=>c(330,.3,n(304),.02,.25),400),r.pdkoP(setTimeout,()=>c(262,.4,n(304),.02,.35),650);break;case r[n(263)]:c(440,.15,r[n(334)],.01,.1),r[n(349)](setTimeout,()=>c(440,.15,n(304),.01,.1),180),setTimeout(()=>c(523,.2,n(304),.01,.15),360);break;case n(290):r[n(261)](c,200,.1,r[n(351)],.005,.08),r[n(261)](c,150,.08,n(285),.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=ft;i.current[e(269)]&&i[e(295)][e(269)][e(299)]()},[]);const d={};return d[s(386)]=u,d[s(366)]=o,d};function bt(){const e=["tgzqy0O","rMfpC1K","EvnPqMy","wMrewhK","zxjYB3i","y3jLyxrLqMLXDq","B1PcDwG","DhLWzq","CgTVAxO","AhLqy2S","BgfwAuy","A252BvG","yxbzsva","mJuZntu0ohLbz0zOsG","EwjMz3u","rgf0yq","ChjVDg90ExbL","C3rVCa","Aw5PDef1zgLV","z2fTzuvUza","z2nIAgu","mtb4z2LxEu0","qvbjig5VDcbZDq","rLjHAwG","DwvbDfrPBwu","BgLUzwfYuMfTCa","DgfIBgu","zxHJzxb0Aw9U","rLvXyvK","yMLUza","CMv0DxjUicHMDq","rMzIqxG","zhjHDW","BvvcsvC","BeTJrwy","vwDUBgi","rMjiCuG","Dg9tDhjPBMC","CgXHEvnVDw5K","C2fTCgXLuMf0zq","runevxy","A1vyyMK","zxjtB3vYy2u","C2v0vMfSDwvbDa","zgTTBhq","kcGOlISPkYKRkq","yNvMzMvY","ugDSBeS","ndK1mZrnrgrYu3q","rgzZuKS","EKTzCuG","z2fPBK5Vzgu","y3vYCMvUDfrPBq","D2fYBG","y3rVCIGICMv0Dq","y29UDgv4Da","ywrgAwX0zxi","z2v0q2HHBM5LBa","CvjzD1O","zuTdB1O","Aw1L","z2L4wMG","vMrAEuK","mJCYmJq5muDHzvnZyG","E30Uy29UC3rYDq","C3f1yxjL","y3jLyxrLqNvMzG","zgvMzwf0","y2HLy2S","CgrRB1a","z2fTzvn0yxj0","C2f3Dg9VDgG","Bw92zq","y2fWDhvYzq","CwDTuhe","uNrRy1C","AwXSzwDHBa","v2XiCNO","rfLlDfm","Cg93v2u","sLnOAum","y3vYCMvUDa","BgXHDg9Y","CMfUzg9T","mJmXmJG2ne9wr3zNsG","y2XVC2u","BLvUCK4","ndCXntGZBe9Ts1be","x19WCM90B19F","mtu4otu1mdnWA3PXzwy","C2LUzq","y3jLyxrLr2fPBG","BfjHBxbuB1zHBa","zxHWB25LBNrPyq","BMn0Aw9UkcKG","Aw5MBW","DhjHy2u","y29UC29Szq","tvf1yNi","y29UBMvJDa","yxbWBhK","mNHqtKPhAa","BgvUz3rO","sgXtCha","BernuNi","DMLJDg9YEq","DhjPyw5NBgu","zNjLCxvLBMn5","vgLTzq","CM4GDgHPCYiPka","Evnyyw4","EuzlqwO","C3rHCNq","mtHwEfrfyu0","Bg93CgfZCW","DMfSDwu","ChbVCNrLza","mZy4mdG4nvLHvuf2uq","AhDfshu","AwTHzwK","uMfntLC","uNrPuKW","y29UC3rYDwn0BW","C2vHCMnO","uw54wwG","vg9wywX1zuf0va","Bg9N","DLnhChu","wLDkEK0","wfPyEeG","B0nVBNrLEhq","z2fPBG","BNHoEgK","AuXKyNq"];return(bt=function(){return e})()}const wt=Nt;!function(){const e=Nt,t=kt();for(;;)try{if(446351===-parseInt(e(183))/1+parseInt(e(202))/2*(parseInt(e(204))/3)+parseInt(e(192))/4+parseInt(e(175))/5*(-parseInt(e(207))/6)+parseInt(e(214))/7*(-parseInt(e(213))/8)+-parseInt(e(176))/9*(-parseInt(e(188))/10)+-parseInt(e(211))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const yt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nt(216)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Nt,t={};t[e(212)]=e(185)+"+$";const n=t;return yt[e(187)]()[e(186)](n.KPjyP)[e(187)]()[e(193)+"r"](yt)[e(186)](n[e(212)])});yt();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();jt(void 0,function(){const e=Nt,t={};t[e(180)]=e(209)+e(177),t[e(179)]=e(205)+e(181)+e(210)+" )",t[e(203)]=e(194),t.ujMCn="warn",t[e(184)]=e(189),t.tobtN=e(199),t[e(201)]=function(e,t){return e<t},t[e(208)]=function(e,t){return e===t},t.YoWnW=e(195);const n=t;let s;try{s=Function(n[e(180)]+n[e(179)]+");")()}catch(i){s=window}const r=s[e(178)]=s[e(178)]||{},a=[n[e(203)],n[e(200)],"info",n[e(184)],e(219),"table",n[e(191)]];for(let o=0;n[e(201)](o,a[e(206)]);o++){if(n[e(208)](e(218),n[e(190)])){const e=_0x20423f?function(){if(_0x2b9f07){const e=_0x1168e0.apply(_0x2a4622,arguments);return _0x59f610=null,e}}:function(){};return _0x420e4e=!1,e}{const t=jt[e(193)+"r"].prototype[e(215)](jt),n=a[o],s=r[n]||t;t[e(196)]=jt.bind(jt),t.toString=s[e(187)][e(215)](s),r[n]=t}}})();const Ct={};function Nt(e,t){e-=175;const n=kt();let s=n[e];if(void 0===Nt.ifmohf){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.xxOVFu=r,Nt.lsbqyG={},Nt.ifmohf=!0}const a=e+n[0],i=Nt.lsbqyG[a];if(i)s=i;else{const e=function(e){this.crENJx=e,this.BfAyDn=[1,0,0],this.mxEKUW=function(){return"newState"},this.fgpRoE="\\w+ *\\(\\) *{\\w+ *",this.nacAQR="['|\"].+['|\"];? *}"};e.prototype.hyOadT=function(){const e=new RegExp(this.fgpRoE+this.nacAQR).test(this.mxEKUW.toString())?--this.BfAyDn[1]:--this.BfAyDn[0];return this.UhFSFZ(e)},e.prototype.UhFSFZ=function(e){return Boolean(~e)?this.hAFmAB(this.crENJx):e},e.prototype.hAFmAB=function(e){for(let t=0,n=this.BfAyDn.length;t<n;t++)this.BfAyDn.push(Math.round(Math.random())),n=this.BfAyDn.length;return e(this.BfAyDn[0])},new e(Nt).hyOadT(),s=Nt.xxOVFu(s),Nt.lsbqyG[a]=s}return s}function kt(){const e=["x19WCM90B19F","y2HLC3mTC291BG","zc1Zzxr0Aw5NCW","DhjHy2u","DwPnq24","se5UALa","nhHYDKLZEq","uKjdALm","mti3nZK2mwzbuhL3yW","E30Uy29UC3rYDq","BgvUz3rO","nZq4mJy2EwzYAhzz","yu5lANq","CMv0DxjUicHMDq","CM4GDgHPCYiPka","nZeYmdq4n1LRuw9gCG","s1bQEva","oeXzC1rrEG","otaZnJnKt3DUt2S","yMLUza","yxbWBhK","zw5HyMXLza","vffIEKe","zxHJzxb0Aw9U","mJveA0Tqr04","nde0y1rVve1Y","BMn0Aw9UkcKG","y29UC29Szq","wwHns0e","uwTxt3a","y3rVCIGICMv0Dq","BMfTzq","ntm3ntyXC2vzswfZ","tezVve4","kcGOlISPkYKRkq","C2vHCMnO","Dg9tDhjPBMC","mtG4ntmWvhLVtgzf","zxjYB3i","ww9xBLC","Dg9IDe4","mJe5mZKYngnLquDrDq","y29UC3rYDwn0BW","Bg9N","AwjsDfe"];return(kt=function(){return e})()}Ct[wt(182)]=wt(197)+wt(198);const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(217)]}))}),Ct)),zt=Dt;function Dt(e,t){e-=149;const n=At();let s=n[e];if(void 0===Dt.mULPHv){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Dt.zoUizp=r,Dt.YyyDSx={},Dt.mULPHv=!0}const a=e+n[0],i=Dt.YyyDSx[a];if(i)s=i;else{const e=function(e){this.jNRZJo=e,this.ebksdF=[1,0,0],this.VEkjiT=function(){return"newState"},this.BwMKII="\\w+ *\\(\\) *{\\w+ *",this.kzxzYq="['|\"].+['|\"];? *}"};e.prototype.ScgoiU=function(){const e=new RegExp(this.BwMKII+this.kzxzYq).test(this.VEkjiT.toString())?--this.ebksdF[1]:--this.ebksdF[0];return this.AIvdmR(e)},e.prototype.AIvdmR=function(e){return Boolean(~e)?this.pnFgMe(this.jNRZJo):e},e.prototype.pnFgMe=function(e){for(let t=0,n=this.ebksdF.length;t<n;t++)this.ebksdF.push(Math.round(Math.random())),n=this.ebksdF.length;return e(this.ebksdF[0])},new e(Dt).ScgoiU(),s=Dt.zoUizp(s),Dt.YyyDSx[a]=s}return s}!function(){const e=Dt,t=At();for(;;)try{if(543718===-parseInt(e(303))/1*(-parseInt(e(231))/2)+-parseInt(e(326))/3*(-parseInt(e(324))/4)+parseInt(e(210))/5+parseInt(e(279))/6*(parseInt(e(267))/7)+-parseInt(e(204))/8+-parseInt(e(191))/9*(parseInt(e(332))/10)+parseInt(e(247))/11*(-parseInt(e(357))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){const e=Dt,t={};t.YdVvO=e(190),t[e(299)]=function(e,t){return e===t},t[e(289)]=e(359),t[e(286)]=e(442),t.uJKCZ=e(287);const n=t;let s=!0;return function(t,r){const a=e;if(a(287)===n[a(306)]){const e=s?function(){if(r){const e=r[a(453)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x530130=n.YdVvO,_0x32d61a[a(396)+"e"]()?(_0x20b56d=n[a(299)](_0x33ee09[a(202)](),"w")?n.mycyz:n[a(286)],_0x249bf1=n[a(299)](_0x3a61e8[a(202)](),"w")?_0x3599aa[a(293)+"rId"]:_0x256724.whitePlayerId):_0x4d1d37=a(337)}}()(void 0,function(){const e=Dt;return Bt[e(318)]()[e(334)](e(238)+"+$")[e(318)]()[e(257)+"r"](Bt)[e(334)](e(238)+"+$")});Bt();const qt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Dt(453)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function At(){const e=["DgfIBgu","CYbcBgfJAY4","AxndAgvJAW","C3rHCNrLzef0","uMf0Aw5NoIa","y2HHBgXLBMDLxW","CM4GDgHPCYiPka","zKXzEuK","C2vSzwn0","Dg9ju09tDhjPBG","wuXgCvO","zwnmr08","AvHdqwC","vevOBNG","r2fTzsbUB3qGzG","r09AyLG","CKLK","ChvIBgLJ","Aw4GysbNyw1L","Cg9ZDgDYzxnFyW","D2fPDgLUzW","ChjVzMLSzxm","BgvUz3rO","wxL2D1e","B3nxwMO","AgfSBgvUz2vFyW","Bwf5yMvtAw5NBa","y29UC29Szq","CMv0DxjUicHMDq","rMjorwe","BK1fEg0","C3vIC2nYAwjL","t1H1B3C","Axnhyw1Lt3zLCG","y3vYCMvUDezLBG","DvrfD1a","D2HPDgvFD2LUCW","Bw92zv9JB3vUDa","s0PHwMq","BxLdB2XVCG","wNfTEha","yMXHy2S","Agfrue4","r1Pnzei","rMfPBgvKihrVia","DMvYyM9Zzq","y2fWDhvYzq","yxbWBhK","Dg9vChbLCKnHCW","y29Kzq","AwXSzwDHBa","y2HLy2TTyxrL","Awq9zxeU","Aw5JBhvKzxm","tvzLAve","AhDpvfi","y2fZDgXL","qwjsvey","tY1plu8","zwz4ruq","C3vJy2vZCW","zwXVx3jHDgLUzW","AgfSBgvUz2uGyW","Cxv3DMS","ChntyKO","tfrev20","yMXPDhPFnq","v2HPDguGD2LUCW","y2HHBM5LBa","igDHBwu","q3nOB28","DgLTzv9JB250CG","v2f3z1e","AgfUz2vZ","BMv3uMf0Aw5N","CgDU","zMLUza","s0HQBvK","sw52ywXPzcbVCG","CMfWAwrFmtu","uKjbrKq","y2HHBgXLBMDLqW","qMPbA0e","zgvMzwf0","ywjHBMrVBMvK","r3Ppwhi","z2HlsNm","C3vIC3rYAw5N","DxnLCL9Pza","A2jQCM8","BfPhreW","y2HLy2S","y29TCgXLDgvK","mtK0nfnyu1bMvq","q3PTyM4","DxbKyxrL","B2rL","AM9PBIbIEsbJBW","z3jnvLu","z2fTzs0","tMLrzwi","rhzvree","DgXQCu8","BMvS","DhvYBG","DxbKyxrLievmtW","ntuYoda4ofrTAwXiAW","rvLyD3e","vK5Mq0m","EgTjshe","ww91ihjLC2LNBG","zxHJzxb0Aw9U","ndK0nJe2nxLKyxbcra","D2LUBMvYx2LK","Bw92zq","rhjQCKi","wujJAha","wNPIwgC","C2fU","y3jLyxrLzf9HDa","Bw92zv91y2K","zNjVBq","D2HPDgvFDgLTzq","v1fbtwq","qMXHy2SGD2LUCW","ww91ihDVBIe","B2vOBKm","wu5jtvC","CMvZDwX0","y2HHBMDL","B3jKzxi","r2fTzsbHBhjLyq","u3j3t1u","mtuWmtHTzwf4u0u","CMvTB3zLq2HHBG","AM9PBIbNyw1L","ihnLBNqGkg9WCa","EKniAKe","t1fQtfq","zxjYB3i","kcGOlISPkYKRkq","uMLVzMe","uKTvALe","AxnnEvr1CM4","D2HPDgvFCgfSzq","zxzhAem","DhjHy2u","z2fTzq","BMjuB0m","mty0mda0mtDRr1LrAKK","yMLUza","tw92zsbLCNjVCG","D2HPDgvuAw1LuG","z2fTzvn0yxrL","BMvUDc4UlG","CuX6uNK","Bw92zxm","DMLJDg9YEq","yMXHy2TFCgfSzq","y29UC3rYDwn0BW","D2HPDgvqBgf5zq","zwf0zsbHigDHBq","Ae9ysMe","yMXHy2TFCgXHEq","ChjVBw90Aw9U","ihbSyxLPBMCGyq","qwjmzuG","zvDbEeW","yuj1qvq","n0DqvfPerW","Bw92zunVDw50","yMXHy2TFDgLTzq","yMXHy2TqywXLDa","zfDnBMq","u2vZrLi","D2HPDgvFCgXHEq","vwXpwLG","BuTXDg0","u0TzsMy","vvbeqvrf","B2zMzxjeCMf3","ndGYodyYnKPMAeT6BW","BMn0Aw9UkcKG","Bg9N","Bg9HzcbNyw1L","Bw92zv9UDw1Izq","zKfIwe4","tuf3DgK","ELjtAe4","yLPdzKS","x19WCM90B19F","BxLJExO","CLneA3u","Bw92zxmT","E30Uy29UC3rYDq","yMXHy2TqBgf5zq","CgXHEwvYx2LK","BMjwrgW","C2XfvwC","y3Huu2y","zxjWqKq","qvrxuei","q2HHBgXLBMDLia","z2fTzv9Pzd1LCq","zwqHifDHAxrPBG","mte4z29iq0jw","Bw92zv9Zyw4","zseGww91igfYzq","DuPlq1O","ChjVDg90ExbL","u0TVqwy","DxPXEuq","s1rKvhC","BIbPBIb0BYbQBW","DNHuBfu","wM9AtLG","DvDICeS","y3rVCIGICMv0Dq","AM9PBKj5q29Kzq","u01QvfC","Dg9tDhjPBMC","BIbPBIb0BYbJCG","t3jYBwu","vMziCeG","C3f1yxjL","ywXS","ofbxEvjduG","wgH0vg8","mtmYntG1ouncuK9mEq","vwfoz3C","yLDmDuW","y3vYCMvUDf9Mzq","D2HPDgvqywXLDa","DhrL","mZG4mtblsvvzA2C","DLfLDKO","C2vHCMnO","C2LUz2XL","CgfIteK","zhjHDW","yxbpyNO","ugXLyxnLihnPzW","q1Pzt2i","Aw5XCxy","r3rpq20","Aw5MBW","DxnLCL9PzcWGzq","uMvYq28","D2HPDgu","teLIANO","BwvZC2fNzq","svryv2W","v1DUvLu","quTpDxe","BwfW","vKrTDvu","zxjFAwq","C3rHDhvZ","rhjHDYbVzMzLCG","mtjhvu1qBKu","zMvUx2fMDgvY","yMXHy2TFD2LUCW","rMHIEM8","ExbOtfm","sKXIrvi","yvPUCve","x3jLBwfPBMLUzW","z2fTzv9Pza","y2HLC3nFBw92zq","q25cveO","CK5NB1K","y2HLC3nFz2fTzq","rgj5rgC","ywn0AxzL","BNPsy3O","AxnmB2fKAw5N","BgvnB3zLCW","AxnFChvIBgLJ","su5trvju","rvrwBw0","lwfJy2vWDhmGAq","vurpueq","CMvZAwDUr2fTzq","D2LUBMvYswq","yNvSBgv0xZe","sunVwgm","z2v0qxzHAwXHyG","zhb2z2O","zw1HAw5PBMC","uuLODhm","wMr5r2W","B3vUza","DgLTzunVBNrYBW","sNvPtuS","Bg9HzeDHBwu","DNfJv1y","t3DOte8","zYbMB3iGB3bWBW","AxndAgvJA21HDa","B1Ddzg8","thj6A20","zg1TrvC","zMvU","ywrK","D1rPzuG","BIb5B3vYig93BG","zM9YrwfJAa","Dw50Aw1Lza"];return(At=function(){return e})()}qt(void 0,function(){const e=Dt,t={Fhbzo:function(e,t){return e(t)},ZzbXg:function(e,t){return e(t)},oWCdo:e(434)+e(280),nbVDl:"warn",UTmZP:"exception"};let n;try{if(e(351)!==e(240)){n=t[e(215)](Function,t[e(397)]+(e(292)+e(315)+'rn this")( ));'))()}else{const n=new _0x105c55(_0x208251[e(329)+"n"]);t[e(360)](_0x5caafa,n)}}catch(a){n=window}const s=n[e(433)]=n[e(433)]||{},r=[e(281),t[e(295)],e(343),e(237),t.UTmZP,e(406),e(244)];for(let i=0;i<r[e(428)];i++){const t=qt[e(257)+"r"][e(307)].bind(qt),n=r[i],a=s[n]||t;t[e(288)]=qt[e(248)](qt),t[e(318)]=a[e(318)][e(248)](a),s[n]=t}})();const Lt={};Lt[zt(382)]=60,Lt[zt(164)]=300,Lt[zt(177)]=900,Lt[zt(405)]=0;const St=Lt,Pt=_t;!function(){const e=_t,t=Tt();for(;;)try{if(685565===parseInt(e(302))/1*(-parseInt(e(329))/2)+-parseInt(e(297))/3*(-parseInt(e(290))/4)+parseInt(e(301))/5+parseInt(e(287))/6*(parseInt(e(337))/7)+parseInt(e(274))/8*(-parseInt(e(336))/9)+-parseInt(e(311))/10+-parseInt(e(303))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ht=function(){let e=!0;return function(t,n){const s=_t,r={};r[s(281)]=s(305),r.pQyzI="cubfk";const a=r,i=e?function(){const e=s;if(a[e(281)]!=a[e(281)]){if(!_0x48ba4a)return!1;try{const t=_0x166cc5[_0x375dc7];return _0x10cdd1[e(322)](t)}catch(r){return _0x20183f[e(294)](e(341)+"dback failed:",r),!1}}else if(n){if(a[e(326)]===a.pQyzI){const s=n[e(333)](t,arguments);return n=null,s}{const t=_0x195e5a.constructor[e(280)].bind(_0x476f75),n=_0x3eda60[_0x30c5ec],s=_0x114546[n]||t;t[e(323)]=_0x267bfd[e(313)](_0x122240),t[e(295)]=s[e(295)][e(313)](s),_0x27da3c[n]=t}}}:function(){};return e=!1,i}}()(void 0,function(){const e=_t,t={};t.KcXnz=e(320)+"+$";const n=t;return Ht[e(295)]()[e(285)](n[e(319)])[e(295)]()[e(277)+"r"](Ht)[e(285)](n.KcXnz)});Ht();const It=function(){const e=_t,t={};t[e(306)]=function(e,t){return e!==t},t[e(309)]=function(e,t){return e===t},t[e(342)]=e(275),t[e(284)]=e(328);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(342)]!==n.jAWwN){const e=s?function(){const e=a;if(n.eQpuF(e(298),e(298))){const t=_0x3df224?function(){if(_0x21d9d2){const t=_0x158dbb[e(333)](_0x826078,arguments);return _0x3db9cd=null,t}}:function(){};return _0x23820e=!1,t}if(r){if(!n[e(309)](e(312),e(308))){const n=r[e(333)](t,arguments);return r=null,n}_0x3ced8d=_0x520519}}:function(){};return s=!1,e}{const e=_0x2bb6a7[a(333)](_0x38e4f1,arguments);return _0x1e17c=null,e}}}();function _t(e,t){e-=274;const n=Tt();let s=n[e];if(void 0===_t.GasUTO){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};_t.BNzMKQ=r,_t.repkwp={},_t.GasUTO=!0}const a=e+n[0],i=_t.repkwp[a];if(i)s=i;else{const e=function(e){this.qZYnQS=e,this.Cwjuhz=[1,0,0],this.XmoAOH=function(){return"newState"},this.mMulOc="\\w+ *\\(\\) *{\\w+ *",this.IHOMUe="['|\"].+['|\"];? *}"};e.prototype.cAIdGc=function(){const e=new RegExp(this.mMulOc+this.IHOMUe).test(this.XmoAOH.toString())?--this.Cwjuhz[1]:--this.Cwjuhz[0];return this.ZhoQiF(e)},e.prototype.ZhoQiF=function(e){return Boolean(~e)?this.BGwvfX(this.qZYnQS):e},e.prototype.BGwvfX=function(e){for(let t=0,n=this.Cwjuhz.length;t<n;t++)this.Cwjuhz.push(Math.round(Math.random())),n=this.Cwjuhz.length;return e(this.Cwjuhz[0])},new e(_t).cAIdGc(),s=_t.BNzMKQ(s),_t.repkwp[a]=s}return s}It(void 0,function(){const e=_t,t={YuzNJ:function(e,t){return e===t},nIgfg:"COhlo",yGfBk:function(e,t){return e(t)},kKsxx:function(e,t){return e+t},qjpyD:e(283)+e(314),PlDmd:e(288)+e(291)+'rn this")( )',XUpsH:function(e){return e()},itFuK:e(294),hRXdZ:e(276),RTnPw:e(316),qzSfo:e(345),FQEwD:e(334)},n=t[e(318)](function(){const n=e;if(t[n(325)](n(279),t[n(331)])){let e;try{e=t[n(315)](Function,t[n(339)](t[n(338)]+t[n(310)],");"))()}catch(s){e=window}return e}{const e=_0x2b5340?function(){if(_0xea4d2b){const e=_0x4bddca.apply(_0x3d9888,arguments);return _0x520950=null,e}}:function(){};return _0x130cb7=!1,e}}),s=n[e(344)]=n[e(344)]||{},r=["log",t[e(293)],t[e(296)],t[e(299)],t[e(317)],t[e(327)],"trace"];for(let a=0;a<r[e(292)];a++){if(e(304)!=e(304))return!!_0x35d44c&&_0x52ca74[e(322)]([10,30,10,30,20]);{const t=It[e(277)+"r"][e(280)][e(313)](It),n=r[a],i=s[n]||t;t[e(323)]=It.bind(It),t[e(295)]=i.toString.bind(i),s[n]=t}}})();const Gt={};function Tt(){const e=["mtHWC2n4Ce4","AvbYAMu","uLrUuhC","Cw5tC1a","ntG2mJCZmgLMyNjoua","murqyxDJvq","mZyXmJC4nuLPteLOqW","wwDcsgO","C2r6EvG","zvfWDuy","AgfWDgLJCW","s1bsq3m","EuLQCM4","ugXeBwq","nJaWmtGZmgTKvffwzW","r0T4ChO","yMLUza","BMn0Aw9UkcKG","EuDMqMS","zxjYB3i","CxPtzM8","wfvWC0G","s2nyBNO","kcGOlISPkYKRkq","Dw5KzwzPBMvK","DMLICMf0zq","x19WCM90B19F","AfbnD3K","wxv6tKO","Cff5EKK","rLffD0q","z0rAzMu","mtaXodi4DMnHz3fM","C2vSzwn0Aw9U","BKLNzMC","vM1gtKm","yxbWBhK","DgfIBgu","AgvHDNK","mJa0mteXtMfSywrT","n1jWyxfwCG","CwPWEuq","A0TZEhG","z01MseG","sgfWDgLJigzLzq","vgjUy0y","AxntDxbWB3j0zq","y29UC29Szq","zxHJzxb0Aw9U","r0j4z0u","mJrktgnMyue","q2Lqt3a","Aw5MBW","y29UC3rYDwn0BW","u2Hjvei","q09OBg8","ChjVDg90ExbL","u3zmAxO","BgLNAhq","CMv0DxjUicHMDq","AKfxD04","C2vHCMnO","C3vJy2vZCW","mJmZota0thrnwgrI","E30Uy29UC3rYDq","BwvKAxvT","mZq3nZm2uhrsuunZ","y3rVCIGICMv0Dq","BgvUz3rO","AxrgDuS","D2fYBG","Dg9tDhjPBMC","AfjyzfO"];return(Tt=function(){return e})()}Gt[Pt(282)]=10,Gt[Pt(289)]=25,Gt[Pt(335)]=50,Gt[Pt(286)]=[10,50,20],Gt[Pt(316)]=[50,30,50,30,50],Gt[Pt(330)]=5;const Wt=Gt,Ut=()=>{const e=Pt,n={pnnvL:function(e,t){return e!==t},ShITB:function(e,t,n){return e(t,n)},qnSsP:function(e,t,n){return e(t,n)},hPMwy:function(e,t,n){return e(t,n)},gMfHH:function(e,t,n){return e(t,n)},VmFNC:function(e,t,n){return e(t,n)},rWiIA:function(e,t,n){return e(t,n)},GBxgE:function(e,t,n){return e(t,n)}},s=n.pnnvL(typeof navigator,e(321))&&e(322)in navigator,r=n[e(278)](t.useCallback,(e="light")=>{if(!s)return!1;try{const t=Wt[e];return navigator.vibrate(t)}catch(t){return!1}},[s]),a={select:t.useCallback(()=>r(e(330)),[r]),move:n[e(300)](t.useCallback,()=>r(e(282)),[r]),capture:n[e(324)](t.useCallback,()=>r("medium"),[r]),check:n[e(340)](t.useCallback,()=>r(e(335)),[r]),victory:n[e(332)](t.useCallback,()=>r("success"),[r]),error:n.rWiIA(t.useCallback,()=>r(e(316)),[r]),castle:n[e(346)](t.useCallback,()=>!!s&&navigator[e(322)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator[e(322)]([10,30,10,30,20]),[s])},i={};return i[e(343)+"d"]=s,i[e(322)]=r,i[e(307)]=a,i},Et={K:"‚ôî",Q:"‚ôï",R:"‚ôñ",B:"‚ôó",N:"‚ôò",P:"‚ôô",k:"‚ôö",q:"‚ôõ",r:"‚ôú",b:"‚ôù",n:"‚ôû",p:"‚ôü"},Kt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,w]=t.useState(null),[y,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Ut();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),A=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",L=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Kt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&y.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(w(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),w(c),void j(s(c))}w(null),j([])},[D,b,y,r,a,B,x,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,q]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Kt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=y.includes(i);c.has(i);const f=C===i,g=q.has(i),w=H(i),j=I&&g&&!w,N=I&&w;return u.jsxs(m.div,{onClick:()=>L(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:A(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Et[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[y.length," move",1!==y.length?"s":""," available"]})})]})},Yt={capture:{icon:y,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"‚ö°"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"üëë"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"üè∞"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"üíé"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"‚ú®"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"‚ö†Ô∏è"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"‚ùå"},inaccuracy:{icon:y,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"‚ö™"},fork:{icon:w,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"üî±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"üìå"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"üìç"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"üéØ"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"üí´"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"‚ö°"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"üë∏"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"üèÜ"}};const Xt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Yt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),w=e.quality?M[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(A,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),w&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(q,{style:{backgroundColor:w.color},className:"text-white text-[10px]",children:[w.symbol," ",w.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(y,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Rt={capture:{icon:y,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"‚ö°"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"üëë"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"üè∞"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"‚ú®"}},Jt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:W,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:T,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Zt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,w]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:W,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:T,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),w(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),w(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),w(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",A=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(L,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),A&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===A?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Rt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(_,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Jt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(G,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Xt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(E,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(K,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use ‚Üê arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),w(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(O,{className:"h-5 w-5"}):u.jsx(L,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"‚å®Ô∏è Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use ‚Üí arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(J,{className:"h-3 w-3"}),q]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(Z,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(F,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(Z,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(V,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(y,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause ‚Ä¢ ‚Üê/‚Üí: Step ‚Ä¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),w=re(n),y=b.name!==w.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(y&&p?"text-primary":"text-muted-foreground"),animate:y&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:y&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," ‚Üí ",w.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Vt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(G,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(G,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:w}=xe(),{captureState:y,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[q,A]=t.useState(j),[L,S]=t.useState(!1),[P,H]=t.useState(""),[I,_]=t.useState(!1),[T,W]=t.useState(!1);se(p);const U=t.useMemo(()=>p?fe(p):null,[p]),E=t.useCallback(e=>{A(e),C(e)},[C]);t.useEffect(()=>{e&&A(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const K=async e=>{if(e&&!v)return void _(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Ae(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(we,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(ye,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(G,{variant:q?"outline":"default",size:"sm",onClick:()=>E(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(G,{variant:q?"default":"outline",size:"sm",onClick:()=>E(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves ‚Ä¢ ",c.result||"Game Finished",U&&u.jsxs("span",{className:"ml-2 text-primary",children:["‚Ä¢ ",U]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"‚ôî En Pensent ‚ôö"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(G,{onClick:()=>K(!1),disabled:L,variant:"outline",className:"gap-2",children:[L?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(G,{onClick:()=>K(!0),disabled:L,className:"gap-2 btn-luxury",children:[L?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(G,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(G,{onClick:()=>{const e=y(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),D(!0),w({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Le,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:I,onClose:()=>_(!1),onAuthRequired:()=>{_(!1),W(!0)},trigger:"download"}),u.jsx(qe,{isOpen:T,onClose:()=>W(!1)})]})},en=sn;!function(){const e=sn,t=on();for(;;)try{if(313093===parseInt(e(459))/1*(parseInt(e(427))/2)+parseInt(e(422))/3*(parseInt(e(355))/4)+-parseInt(e(456))/5*(parseInt(e(405))/6)+-parseInt(e(420))/7*(-parseInt(e(397))/8)+parseInt(e(463))/9+parseInt(e(356))/10*(-parseInt(e(401))/11)+-parseInt(e(380))/12*(parseInt(e(391))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){const e=sn,t={};t[e(452)]=function(e,t){return e!==t},t[e(363)]=e(439);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=sn;if(n[s(452)](n[s(363)],n[s(363)])){const e=_0x268618.constructor[s(414)][s(431)](_0x836b5d),t=_0x421f33[_0x21280a],n=_0x3172c9[t]||e;e[s(367)]=_0x578c9f[s(431)](_0x582790),e[s(400)]=n.toString.bind(n),_0x2bab81[t]=e}else if(t){const n=t[s(417)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}()(void 0,function(){const e=sn,t={};t[e(364)]="(((.+)+)+)+$";const n=t;return tn.toString()[e(436)](e(394)+"+$")[e(400)]()[e(437)+"r"](tn).search(n[e(364)])});tn();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[sn(417)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function sn(e,t){e-=352;const n=on();let s=n[e];if(void 0===sn.fMROSV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};sn.laGBlV=r,sn.OXvXWf={},sn.fMROSV=!0}const a=e+n[0],i=sn.OXvXWf[a];if(i)s=i;else{const e=function(e){this.psttkm=e,this.IDWOsu=[1,0,0],this.MuEcjj=function(){return"newState"},this.pRErfq="\\w+ *\\(\\) *{\\w+ *",this.rnwoqx="['|\"].+['|\"];? *}"};e.prototype.atFAfi=function(){const e=new RegExp(this.pRErfq+this.rnwoqx).test(this.MuEcjj.toString())?--this.IDWOsu[1]:--this.IDWOsu[0];return this.iGzAcS(e)},e.prototype.iGzAcS=function(e){return Boolean(~e)?this.vefBjg(this.psttkm):e},e.prototype.vefBjg=function(e){for(let t=0,n=this.IDWOsu.length;t<n;t++)this.IDWOsu.push(Math.round(Math.random())),n=this.IDWOsu.length;return e(this.IDWOsu[0])},new e(sn).atFAfi(),s=sn.laGBlV(s),sn.OXvXWf[a]=s}return s}nn(void 0,function(){const e=sn,t={pDJEU:function(e,t){return e(t)},xmdaJ:"return (function() ",KeRtQ:e(379),Fyqqo:"info",yGOrT:e(369),IiaXB:e(374),npFry:e(424),oOhQm:function(e,t){return e+t},fhiGL:function(e,t){return e!==t},XYgjA:e(398),OqvlZ:e(409)};let n;try{n=t.pDJEU(Function,t.oOhQm(t[e(453)](t[e(366)],e(438)+e(352)+e(443)+" )"),");"))()}catch(a){if(t[e(447)](t[e(411)],e(382)))n=window;else{let n;try{n=t[e(457)](_0x5780fc,t[e(366)]+(e(438)+e(352)+e(443)+" ));"))()}catch(i){n=_0x16deca}const s=n[e(375)]=n[e(375)]||{},r=[e(399),t[e(383)],t[e(359)],t[e(419)],t[e(440)],t[e(446)],e(406)];for(let t=0;t<r[e(404)];t++){const n=_0x5fb032[e(437)+"r"][e(414)][e(431)](_0x11f8e4),a=r[t],i=s[a]||n;n[e(367)]=_0xb920a7[e(431)](_0x5ce033),n.toString=i.toString[e(431)](i),s[a]=n}}}const s=n[e(375)]=n.console||{},r=[e(399),"warn",t[e(359)],e(369),"exception","table","trace"];for(let o=0;o<r[e(404)];o++){if("cJouv"===t[e(462)]){const t=_0x4d363b?function(){if(_0x818e69){const t=_0x4f3007[e(417)](_0x33b3fa,arguments);return _0x41099d=null,t}}:function(){};return _0x1d6f37=!1,t}{const t=nn[e(437)+"r"][e(414)][e(431)](nn),n=r[o],a=s[n]||t;t[e(367)]=nn[e(431)](nn),t[e(400)]=a[e(400)][e(431)](a),s[n]=t}}})();const rn=()=>{const e=sn,t={};t[e(395)]=4e3,o[e(412)]("Shortcuts:"+e(430)+e(451)+e(435)+e(393)+"Help",t)},an={};function on(){const e=["yxbWBhK","sMvur2q","EuDpCLq","mJKXnJyYwLnyq3nY","CMqGy29VCMrPBG","ntDArhrpCxe","vNDUv0G","DgfIBgu","zgL0ywjSzq","C3rLBMvY","mKfsEvL6rq","yxbsCe0","ugXHEs9qyxvZzq","ie09txv0zsWGuG","yMLUza","vvzuCKy","zwvU","CgXHEsK","purYyxCSievZyW","C2vHCMnO","y29UC3rYDwn0BW","E30Uy29UC3rYDq","D1nozMq","swLHwei","yxjKihnOB3j0yW","BLDwCeK","CM4GDgHPCYiPka","zvDbBLK","yw5KigXLz2vUza","BNbgCNK","zMHPr0W","vg9Nz2XLl2v4Ca","AxqGzNvSBhnJCG","u291BMqGDw5TDq","pvjLC2LNBIWGra","v0LLz0e","B09Ouw0","DxrZ","icH5B3vYihr1CG","oteWyKj2zNfl","Cerkrvu","Bg9IyNKGlYbfEa","mJe3nZuZwgfVsuLS","txjyuhe","u3bHy2u","t3f2BfO","ntm1ndG1nMPABMH1sG","y3rVCIGICMv0Dq","DgvK","yM51zKK","nde2mJHACLDbuNq","mtm4mJeYmfDQv29lwq","s2XOCuW","uMv0DxjUihrVia","rNLXCw8","A2v5","q2fKrg4","wxLIDxy","A3vRDgy","v1nlt1e","r28GDg8Gzw5Kia","Eg1KyuO","x19WCM90B19F","rxnJ","zxjYB3i","yxvSDa","rw5K","zxnJyxbL","DeXPC3rLBMvY","zxHJzxb0Aw9U","y29UC29Szq","BhnJCMvLBIbTBW","zsaOzhvYAw5Nia","sgvSCa","D2fYBG","mte2nJi0ngTVCeH0sq","vg9Nz2XLihnVDq","tufsAhm","s2vsDfe","DgfYz2v0","ywn0Aw9U","A2v5zg93BG","tKPHywS","khnOB3CGywXSkq","r0DxveW","ihrPBwvSAw5L","mtnXCvjJrxK","vg9Nz2XLigjVyq","puXVyMj5lca/pq","kcGOlISPkYKRkq","zhvYyxrPB24","wvvswu4","nJrdBef2D2S","uMDKExG","Bg9N","Dg9tDhjPBMC","mZnvBK13teC","CMvTB3zLrxzLBG","EKzIugO","BgvUz3rO","mtCXmdznswvgtfq","DhjHy2u","u2HVDYbRzxLIBW","C2HPzNrlzxK","zxD6s2m","AxndB250zw50rq","wfLNAKe","Aw5MBW","r28GDg8GC3rHCG","ChjVDg90ExbL","ChjLDMvUDerLzG","EwjXBvi"];return(on=function(){return e})()}an[en(360)]="M",an[en(385)]=en(381)+"nd on/off";const cn={key:"R"};cn[en(385)]="Resign gam"+en(377)+en(434);const ln={};ln[en(360)]="D",ln[en(385)]="Offer draw"+en(455)+"n)",en(368),en(358),en(458),en(449),en(433);const un={};un[en(360)]="?",un[en(385)]=en(407)+en(441)+en(454);const dn={};dn[en(360)]=en(461),dn[en(385)]=en(429)+en(390);const mn={};mn[en(360)]="‚Üê",mn[en(385)]="Previous move";const xn={};xn[en(360)]="Home",xn[en(385)]=en(413)+"t";const hn={};hn[en(360)]=en(371),hn[en(385)]=en(365)+en(388);const pn={};pn[en(360)]="F",pn[en(385)]="Toggle ful"+en(376)+"de";const fn={};fn[en(360)]="C",fn[en(385)]=en(392)+en(421)+"ates";const gn={};function vn(){const e=["sLjYsem","ALjxsey","DerUtfO","v0vkBgW","DgTduKO","zNjVBq","zMLUza","DhjHy2u","uMvHBcbotLvfia","CMfUzg9T","BMn0Aw9UkcKG","qMvwrK0","C2XPy2u","C2vHCMnO","CMf0Aw5N","zwfZEq","seDdDfu","AgfYza","BgvUz3rO","y3rVCIGICMv0Dq","tevZywO","uw9eCvm","Bwf4","zgvUCKG","wMzLCNm","BwHKDwW","EuLcDxa","C1Lcr0i","DfzszMe","y29UC3rYDwn0BW","q2vlCMi","BgfIzwW","zw5NAw5LlcbNCG","ntG5ntyZB1PdEeXf","nJa3mZu2BenoCMnu","C2fU","oejkAfnsrG","swLZtKC","nvLUtvzhvW","C2z6shq","ALzItei","C2nVCMu","idqTCgX5ihnLyq","t01twxy","Eejdre0","Bw92zsbLCNjVCG","CMvK","vLHjtfq","zxHJzxb0Aw9U","AxntDgfSzw1HDa","shjUBMe","zevNCgW","Bw92zxrPBwu","zMLSDgvY","Dg9tDhjPBMC","DMfSDwf0Aw9Ula","ChjVDg90ExbL","CNnIrfC","y2fWDhvYzwq","Cg9twwW","igzHBgXPBMCGyG","E30Uy29UC3rYDq","Bw92zxm","DgvYAwfSigf3yq","AfbAzhq","yM9HCMq","Bw92zq","t3jcCMq","B20GBw92zxmSia","zgvZy3jPChrPBW","zwDcs2m","y29SB3i","whb0zgO","DMvYyM9Zzq","Dw5KBW","C3rYzw5NDgG","zxjYB3i","zw5NAw5Lug93zq","AxndAgvJA21HDa","ELDyqMW","C29YDa","FJe0mda","mteWtLHmC3H5","zKnzBKO","yw5HBhL6zvbVCW","BwLU","ChjVBw90Aw9U","vhfhDue","Aw5MBW","Bg9N","zg1bshy","y29UC29Szq","zMvU","vgDtseq","ywTNqvC","v0DZvw0","yMvZDe1VDMu","FJGWma","B2nJyxnPB25HBa","yMLUza","BK1St3O","C3rVy2TMAxnO","r1zkueq","vhLKEKy","zgvWDgG","CM4GDgHPCYiPka","BfzozxK","ue1xCuO","DgfIBgu","yxbWBhK","Aw5JBhvKzxm","mJG0mJG4mgHSr2HbsW","AxrPB24","u3rVy2TMAxnOia","DhLWzq","DhvYBG","mJy0nZK5mNP4DeL2sG","ntvMD0rRwMS","BM90ihjLywr5la","kcGOlISPkYKRkq","q2X1yIbqBgf5zq","uxDxthe","zMD6C3m","EMnVD2W","C1PsBfO","ntuXodq0Bu5qqKHz","rNz5Eha","zw9tu0G","mty3mJG3ngrcrKPmua","wND5D0y","uxrJuhq","yw1xsNG","BwvKAxvT","u3rSCgS","EM5QBLC","A29MA2m","D2fYBG","Axnhyw1Lt3zLCG","vgXNDeu","yMXXEMu","DePuruK","ntu1mZbSBLbiCKK","qMfZAwmGDgfJDa","DKvXAgK","zMXVB3i","oxzZtMLIwa","FJmYmda","twfRzxmGCMfUza","twfZDgvY","BerIAvi","ENLVqKC","t0PdrK0","vuPVCuW","DuToEhO"];return(vn=function(){return e})()}gn[en(360)]="L",gn[en(385)]=en(448)+en(445);const bn=Gn;!function(){const e=Gn,t=vn();for(;;)try{if(379621===parseInt(e(187))/1*(-parseInt(e(183))/2)+parseInt(e(321))/3+-parseInt(e(307))/4*(-parseInt(e(234))/5)+parseInt(e(312))/6+-parseInt(e(324))/7*(parseInt(e(232))/8)+parseInt(e(229))/9*(-parseInt(e(278))/10)+parseInt(e(313))/11*(parseInt(e(230))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Gn(305)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Gn,t={};t[e(303)]=e(315)+"+$";const n=t;return wn[e(250)]()[e(209)](n.PMWqJ)[e(250)]()[e(225)+"r"](wn)[e(209)](e(315)+"+$")});wn();const yn=function(){const e={};e[Gn(233)]=function(e,t){return e>t};const t=e;let n=!0;return function(e,s){const r=n?function(){const n=Gn,r={Zfers:function(e,n){return t[Gn(233)](e,n)}};if(s){if("lDbiR"===n(191)){const t=s[n(305)](e,arguments);return s=null,t}r[n(220)](_0x1a6e67,_0x333607)&&(_0x48c425=_0x35306c,_0x27e48f=_0x3b4b20)}}:function(){};return n=!1,r}}();yn(void 0,function(){const e=Gn,t={};t[e(219)]=e(221),t[e(320)]=function(e,t){return e+t},t.nMlOz=e(257)+e(215)+e(301)+" )",t.fQqlX=e(285),t[e(240)]=e(284),t.ZwywF="error",t[e(323)]=e(244),t[e(196)]=e(203);const n=t;let s;try{if("JvGAt"===n[e(219)])return 0;s=Function(n.sZRlZ("return (fu"+e(206)+n[e(296)],");"))()}catch(i){s=window}const r=s[e(287)]=s.console||{},a=[n.fQqlX,e(178),n[e(240)],n[e(171)],n[e(323)],e(304),n[e(196)]];for(let o=0;o<a.length;o++){const t=yn[e(225)+"r"][e(252)][e(295)](yn),n=a[o],s=r[n]||t;t.__proto__=yn.bind(yn),t[e(250)]=s[e(250)][e(295)](s),r[n]=t}})();const jn={p:100,n:320,b:330,r:500,q:900,k:2e4},Cn=jn,Nn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],kn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Mn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],zn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Dn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Bn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function qn(e){switch(e.toLowerCase()){case"p":return Nn;case"n":return kn;case"b":return Mn;case"r":return zn;case"q":return Dn;case"k":return Bn;default:return[]}}function An(e){const t=Gn,n={kofkc:function(e,t){return e===t},TgSHD:function(e,t){return e<t},sYBGB:t(197),GVJPD:"ZWRQh",PjGPW:function(e,t){return e(t)},ZaiWR:function(e,t){return e>t},fgzss:function(e,t){return e===t},tkCRJ:function(e,t){return e-t},TAGHs:function(e,t){return e*t},WeqbR:function(e,t){return e*t}};if(e[t(274)+"e"]())return n.kofkc(e.turn(),"w")?-1/0:1/0;if(e.isDraw()||e[t(245)+"e"]())return 0;let s=0;const r=e[t(261)]();for(let i=0;i<8;i++)for(let e=0;n[t(289)](e,8);e++)if(n.kofkc(n[t(223)],n[t(298)]))_0xc28200=_0x35e1a0;else{const a=r[i][e];if(a){const r=Cn[a.type]||0,o=n.PjGPW(qn,a[t(310)]);let c=0;if(n.ZaiWR(o[t(214)],0)){c=o[n[t(318)](a[t(267)],"w")?i:n[t(200)](7,i)][e]}const l=r+c;s+=n[t(177)](a[t(267)],"w")?l:-l}}const a=e[t(258)]().length;return s+="w"===e[t(311)]()?n.TAGHs(a,2):n.WeqbR(-a,2),s}function Ln(e,t,n,s,r){const a=Gn,i={jVbLB:function(e,t){return e-t},zWXBl:function(e,t){return e(t)},YaupM:function(e,t){return e>t},OrBrd:function(e,t){return e<t},amWJx:function(e,t){return e<=t}};if(0===t||e[a(179)]())return{score:i[a(275)](An,e),move:null};const o={};o[a(269)]=!0;const c=e[a(258)](o);if(c[a(276)]((e,t)=>{const n=a;let s=0,r=0;return e[n(254)]&&(s+=Cn[e.captured]||0),t[n(254)]&&(r+=Cn[t[n(254)]]||0),e.san[n(306)]("+")&&(s+=50),t[n(231)][n(306)]("+")&&(r+=50),i[n(236)](r,s)}),r){let r=-1/0,o=null;for(const u of c){e.move(u);const c=Ln(e,i.jVbLB(t,1),n,s,!1);if(e[a(270)](),i.YaupM(c[a(237)],r)&&(r=c[a(237)],o=u),s<=(n=Math[a(218)](n,c[a(237)])))break}const l={};return l[a(237)]=r,l.move=o,l}{let r=1/0,o=null;for(const u of c){e[a(262)](u);const c=Ln(e,t-1,n,s,!0);if(e[a(270)](),i[a(263)](c[a(237)],r)&&(r=c[a(237)],o=u),s=Math[a(281)](s,c[a(237)]),i[a(173)](s,n))break}const l={};return l[a(237)]=r,l.move=o,l}}function Sn(e){const t=Gn,n={};n[t(199)]=function(e,t){return e<t},n.tVRfa=function(e,t){return e*t},n[t(198)]=function(e,t){return e*t};const s=n,r={};r[t(269)]=!0;const a=e[t(258)](r);if(0===a.length)return null;const i=a[t(249)](e=>e.captured);return i[t(214)]>0&&s[t(199)](Math[t(205)](),.3)?i[Math[t(186)](s[t(224)](Math[t(205)](),i[t(214)]))]:a[Math[t(186)](s[t(198)](Math[t(205)](),a[t(214)]))]}function Pn(e){const t=Gn,n={TydzF:function(e,t){return e===t},ypljs:function(e,t){return e>t},zyBYE:function(e,t){return e*t},CeKrb:"Stockfish move error:",vEqhi:function(e,t){return e(t)},yffZi:function(e,t){return e-t},zFOhR:function(e,t){return e-t},lZUYv:t(222),OJCFM:function(e,t){return e(t)},rsbDW:function(e,t){return e===t},lVNey:function(e,t){return e>t},QwWLq:t(290),uKNxz:function(e,t){return e<t},UJoqL:function(e,t){return e*t}},s={};s[t(269)]=!0;const r=e[t(258)](s);if(0===r.length)return null;let a=null,i="w"===e[t(311)]()?-1/0:1/0;for(const o of r){if("ScKzN"===n.lZUYv){const e={};e[t(269)]=!0;const s=_0x3a3777.moves(e);if(n[t(299)](s[t(214)],0))return null;const r=s[t(249)](e=>e[t(254)]);return n.ypljs(r.length,0)&&_0x1ad73d[t(205)]()<.3?r[_0x59a55f[t(186)](_0x4a55b7.random()*r.length)]:s[_0x61b780[t(186)](n.zyBYE(_0x4d8459[t(205)](),s[t(214)]))]}{e[t(262)](o);const s=n[t(193)](An,e);if(e[t(270)](),n[t(253)](e[t(311)](),"w")){if(n[t(302)](s,i)){if(t(175)===n[t(317)])return _0x2f6c78[t(272)](n[t(226)],_0x3c6e8e),_0x235113(_0x417d03);i=s,a=o}}else s<i&&(i=s,a=o)}}if(n[t(195)](Math[t(205)](),.2)){const s=r[t(276)]((s,r)=>{const a=t;e[a(262)](s);const i=n[a(185)](An,e);e[a(270)](),e.move(r);const o=n.vEqhi(An,e);return e[a(270)](),"w"===e[a(311)]()?n.yffZi(o,i):n.zFOhR(i,o)}),a=s[t(208)](0,Math[t(281)](3,s[t(214)]));return a[Math[t(186)](n[t(194)](Math[t(205)](),a[t(214)]))]}return a}function Hn(e){const t=Gn;return Ln(e,4,-1/0,1/0,"w"===e[t(311)]())[t(262)]}const In={};In.id=bn(211),In[bn(227)]="Beginner",In[bn(265)+"n"]=bn(189)+bn(264)+bn(294)+" captures",In[bn(210)]=bn(293);const _n={};function Gn(e,t){e-=171;const n=vn();let s=n[e];if(void 0===Gn.rMHeKP){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Gn.BMDubP=r,Gn.nnPWsW={},Gn.rMHeKP=!0}const a=e+n[0],i=Gn.nnPWsW[a];if(i)s=i;else{const e=function(e){this.YdACyj=e,this.XAFpqg=[1,0,0],this.hLLGYW=function(){return"newState"},this.CLUotV="\\w+ *\\(\\) *{\\w+ *",this.bDPasN="['|\"].+['|\"];? *}"};e.prototype.bMpDwu=function(){const e=new RegExp(this.CLUotV+this.bDPasN).test(this.hLLGYW.toString())?--this.XAFpqg[1]:--this.XAFpqg[0];return this.ktuNCb(e)},e.prototype.ktuNCb=function(e){return Boolean(~e)?this.WJYmJg(this.YdACyj):e},e.prototype.WJYmJg=function(e){for(let t=0,n=this.XAFpqg.length;t<n;t++)this.XAFpqg.push(Math.round(Math.random())),n=this.XAFpqg.length;return e(this.XAFpqg[0])},new e(Gn).bMpDwu(),s=Gn.BMDubP(s),Gn.nnPWsW[a]=s}return s}_n.id="medium",_n[bn(227)]=bn(316)+"r",_n[bn(265)+"n"]=bn(184)+"ics and ma"+bn(259)+"reness",_n[bn(210)]=bn(277);const Tn={id:"hard"};Tn[bn(227)]=bn(190),Tn[bn(265)+"n"]="Advanced e"+bn(251)+bn(238)+"rch depth",Tn.rating="~2000";const Wn={id:"stockfish"};Wn[bn(227)]=bn(309)+"16",Wn[bn(265)+"n"]=bn(204)+bn(228)+"andmaster "+bn(271),Wn[bn(210)]=bn(188),Wn[bn(273)+bn(242)]=!0;const Un=[In,_n,Tn,Wn];!function(){const e=Yn,t=On();for(;;)try{if(284523===parseInt(e(186))/1*(parseInt(e(218))/2)+-parseInt(e(189))/3*(parseInt(e(194))/4)+parseInt(e(181))/5+-parseInt(e(244))/6+parseInt(e(203))/7+-parseInt(e(204))/8+parseInt(e(222))/9*(parseInt(e(180))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const En=function(){let e=!0;return function(t,n){const s=Yn,r={};r[s(251)]=function(e,t){return e===t},r[s(225)]=s(233),r[s(197)]="detpS";const a=r,i=e?function(){const e=s;if(n){if(!a[e(251)](a[e(225)],a.neuKD)){const s=n[e(192)](t,arguments);return n=null,s}if(!_0x43fa82)return;_0x360aed(_0x28d159[e(259)],_0x4f8d7d[e(212)])}}:function(){};return e=!1,i}}()(void 0,function(){const e=Yn,t={};t[e(220)]=e(195)+"+$";const n=t;return En[e(227)]()[e(185)](e(195)+"+$").toString().constructor(En)[e(185)](n[e(220)])});En();const Kn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Yn(192)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function On(){const e=["mJi1yu9jEvf3","CwfewMG","veL4EMS","BeHtEM0","v0PJC1u","Dg9tDhjPBMC","yMLUza","sNzTBwG","qMzQAM4","ywjZ","BMn0Aw9UkcKG","DxfvyKm","B25uB3vJAfn0yq","ChjVDg90ExbL","DhjHy2u","u0jtzeW","y3vYCMvUDfG","B25uB3vJAe1VDG","y3vYCMvUDa","AgfUzgXLCNm","yNHeAKC","C3rHCNrz","mti0mdqYmMDYvwfJtW","zxHJzxb0Aw9U","CM4GDgHPCYiPka","BgvUz3rO","y3rVCIGICMv0Dq","DML1C08","Dg91y2HLCW","q2rRvLe","Aef0AMy","DgDRz2O","tLnsENq","y29UC3rYDwn0BW","DgfIBgu","D2fYBG","DfLxrvC","y2XPzw50wa","y1HbrNe","vuLHsKC","mJe4meDxs1HAzW","mtKYnti1nu12BuHxta","DfHIDwi","tevwqxy","y29UC29Szq","C2vHCMnO","nZfbwKLqqui","zxjYB3i","uxjsBfO","mJy1odLNqw1IDgO","weP0wMe","y3vYCMvUDfK","yxbWBhK","v01dvu8","odHcAu9QD2i","kcGOlISPkYKRkq","CMv0DxjUicHMDq","BMv1s0q","t052zxO","B25uB3vJAevUza","A0XQq3a","vwXAv0m","zw5LAK4","mtKYndG5nwTbugPhua","mtqWntu3nLrjrunUEa","Bg9N","B25nB3vZzvvW","AxntD2LWAw5N","EhzirM4","rMPuDfe","E30Uy29UC3rYDq","qwn0CNy","y2XPzw50wq","x19WCM90B19F","B25nB3vZzu1VDG","C3rHCNry","Aw5MBW","sKzwEwG","ntuZngLRqunguG","B25nB3vZzurVDW","qxbrAuy","CLDlA2O"];return(On=function(){return e})()}function Yn(e,t){e-=180;const n=On();let s=n[e];if(void 0===Yn.RbZqid){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Yn.lrsLLU=r,Yn.LbpFTH={},Yn.RbZqid=!0}const a=e+n[0],i=Yn.LbpFTH[a];if(i)s=i;else{const e=function(e){this.lHzmhz=e,this.TKsnxU=[1,0,0],this.jOrpNp=function(){return"newState"},this.isHfsP="\\w+ *\\(\\) *{\\w+ *",this.pJcjvg="['|\"].+['|\"];? *}"};e.prototype.jpukcJ=function(){const e=new RegExp(this.isHfsP+this.pJcjvg).test(this.jOrpNp.toString())?--this.TKsnxU[1]:--this.TKsnxU[0];return this.LWhvpE(e)},e.prototype.LWhvpE=function(e){return Boolean(~e)?this.WipAdq(this.lHzmhz):e},e.prototype.WipAdq=function(e){for(let t=0,n=this.TKsnxU.length;t<n;t++)this.TKsnxU.push(Math.round(Math.random())),n=this.TKsnxU.length;return e(this.TKsnxU[0])},new e(Yn).jpukcJ(),s=Yn.lrsLLU(s),Yn.LbpFTH[a]=s}return s}Kn(void 0,function(){const e=Yn,t={kLjCp:function(e,t){return e===t},UlZWC:"WJcsU",LEVAv:function(e,t){return e(t)},Actrv:"return (fu"+e(232),liKOt:e(205),xvHFn:function(e,t){return e<t},UIaJG:e(202)},n=function(){const n=e;let s;try{t[n(200)](n(226),t[n(201)])?s=t[n(183)](Function,t[n(211)]+"{}.constru"+n(248)+n(246)+" ));")():null==_0x43522a||_0x43522a()}catch(r){s=window}return s}(),s=n.console=n[e(184)]||{},r=[t.liKOt,e(257),e(216),e(187),e(245),e(256),e(236)];for(let a=0;t[e(208)](a,r[e(247)]);a++)if(t[e(261)]!=t[e(261)]){if(!_0x63c5a4)return;_0x32b164()}else{const t=Kn[e(255)+"r"][e(235)][e(228)](Kn),n=r[a],i=s[n]||t;t[e(213)]=Kn.bind(Kn),t.toString=i[e(227)][e(228)](i),s[n]=t}})();const Xn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:We,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:We,description:"15 minutes"}],Rn=["bot","create","join"],Jn=()=>{var e,n,s,l,d,x,f,v,b,w,y;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:q}=Ut(),[A,L]=t.useState("lobby"),[S,H]=t.useState(!1),[I,_]=t.useState(!1),[T,U]=t.useState("bot"),[E,K]=t.useState("human"),[O,Y]=t.useState("medium"),[X,R]=t.useState("blitz_5"),[J,Z]=t.useState("hotCold"),[F,V]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,we]=t.useState(!0),[ye,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=vt(Ce,Ne),[Me,ze]=t.useState([]),[De,Ae]=t.useState(!1),[Le,We]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Rn.indexOf(T);let n;n="left"===e?Math.min(t+1,Rn.length-1):Math.max(t-1,0),n!==t&&(q.select(),U(Rn[n]))},[T,q]),{swipeOffset:xt,isSwiping:pt,handlers:ft}=((e={})=>{const n=Yn,s={cXAFq:function(e,t){return e(t)},Jvmmh:n(196)+"nction() ",wDvLR:function(e,t){return e-t},viusO:function(e,t){return e-t},NSRzt:function(e,t){return e>t},JFVyh:function(e,t){return e!==t},sdNAa:"uafoK",qaDZh:function(e){return null==e?void 0:e()},Bfjjn:function(e,t){return e>t},tYWEW:n(221),pnnQy:function(e,t){return e(t)},FjTtQ:function(e,t,n){return e(t,n)},SBSdL:function(e,t){return e===t},QrRlZ:n(253),WMCUO:function(e){return e()},ONvez:function(e,t){return e(t)},TIxzk:n(182),HQWPC:function(e,t){return e(t)},XJtZa:function(e,t){return e(t)},bxDjG:function(e,t,n){return e(t,n)},mrsPG:function(e,t,n){return e(t,n)},hAtjf:function(e,t,n){return e(t,n)},ZRBWB:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s.HQWPC(t.useState,u),[x,h]=s[n(190)](t.useState,!1),p={startX:0,startY:0};p[n(238)]=0,p[n(191)]=0,p[n(207)]=!1;const f=t.useRef(p),g=s.FjTtQ(t.useCallback,(e,t)=>{const r=n,a={};a[r(215)]=e,a[r(243)]=t,a[r(238)]=e,a[r(191)]=t,a[r(207)]=!0,f[r(240)]=a,s[r(260)](h,!0)},[]),v=s[n(209)](t.useCallback,(e,t)=>{const r=n;if(!f[r(240)].isSwiping)return;f[r(240)].currentX=e,f[r(240)][r(191)]=t;const a=e-f[r(240)][r(215)],i=t-f[r(240)][r(243)],o={};o.x=a,o.y=i,s.cXAFq(m,o)},[]),b=t.useCallback(()=>{const e=n;if(!f[e(240)][e(207)])return;const t=s.wDvLR(f.current[e(238)],f.current.startX),a=s[e(249)](f.current[e(191)],f.current[e(243)]),u=Math.abs(t),d=Math[e(231)](a);if(u>d&&s[e(254)](u,r))if(s[e(217)](s.sdNAa,"uafoK")){const t=_0x35eb52[e(255)+"r"][e(235)][e(228)](_0x4e41b8),n=_0x5d12af[_0x2f7772],s=_0x1af5c7[n]||t;t[e(213)]=_0x28566b[e(228)](_0x421896),t[e(227)]=s[e(227)][e(228)](s),_0x51ec3f[n]=t}else t>0?null==o||o():s[e(223)](i);else s[e(230)](d,u)&&s[e(230)](d,r)&&(a>0?s[e(217)](e(221),s[e(258)])?_0x79b136=_0x12ae4a(fWwLiH[e(229)]+(e(210)+e(248)+'rn this")( ));'))():s[e(223)](l):null==c||c());f[e(240)][e(207)]=!1,s[e(260)](h,!1);const x={x:0,y:0};s.pnnQy(m,x)},[r,i,o,c,l]),w=t.useCallback(e=>{const t=n,r=e.touches[0];s[t(209)](g,r.clientX,r[t(212)])},[g]),y=s[n(242)](t.useCallback,e=>{const t=n,s=e[t(250)][0];v(s[t(259)],s.clientY)},[v]),j=s.mrsPG(t.useCallback,()=>{b()},[b]),C=t.useCallback(e=>{const t=n;if(s[t(237)](s.QrRlZ,s[t(188)])){if(!a)return;g(e[t(259)],e[t(212)])}else{if(!_0x1f4789)return;_0x5a3d34[t(240)][t(207)]&&s[t(223)](_0x50a77f)}},[a,g]),N=t.useCallback(e=>{const t=n;a&&s[t(209)](v,e[t(259)],e[t(212)])},[a,v]),k=s[n(252)](t.useCallback,()=>{a&&s[n(193)](b)},[a,b]),M=s.ZRBWB(t.useCallback,()=>{const e=n;if(s[e(224)]==s[e(224)]){if(!a)return;f[e(240)][e(207)]&&b()}else{const t={};t[e(215)]=_0x5f0598,t[e(243)]=_0x57fde9,t.currentX=_0xae5d7f,t[e(191)]=_0x213d2d,t[e(207)]=!0,_0x41042d[e(240)]=t,s[e(198)](_0x1e5788,!0)}},[a,b]),z={};z[n(234)+"rt"]=w,z[n(239)+"e"]=y,z[n(199)]=j,z[n(219)+"n"]=C,z[n(214)+"e"]=N,z[n(206)]=k,z.onMouseLeave=M;const D={};return D.swipeOffset=d,D[n(207)]=x,D[n(241)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:wt,myColor:yt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Bt,resignGame:qt,offerDraw:At,loadGame:Lt,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=zt,n={kbjro:function(e,t){return e===t},inqqv:"completed",XhtTo:function(e,t){return e(t)},hOXJa:e(337),OXuow:function(e,t){return e!==t},Orrme:function(e,t){return e+t},ETVmm:"return (fu"+e(280),KJaZd:"warn",GzOXr:e(406),Jnrlf:e(178),dWMnd:function(e,t){return e>=t},RerCo:function(e,t){return e(t)},WQAMd:"checkmate",aZnqQ:e(189),Riofa:e(452),SrwOU:"O-O",SMjTW:e(154),mKqtm:"move",WawgQ:e(266),fLYyI:function(e,t){return e(t)},slEUg:e(425)+"hanges",uCCtc:e(277),MVeiQ:e(369)+"s",LTDWm:"public",BHUea:"hwOTR",Czmbn:e(420)+"ound",EEbUZ:e(218),lTgaE:e(365),KHjmY:e(236),lZGDL:e(450)+e(282),GZMdB:function(e,t){return e!==t},evGhC:e(272),Cshoo:e(339)+e(319)+e(259)+"e",DmrfF:"generate_c"+e(431)+e(194),UlOZX:"Game creat"+e(302)+e(395)+e(252),rSDku:function(e,t){return e(t)},ZdyGl:function(e,t){return e(t)},vQevJ:e(426),Zqmxp:e(229)+"dy started",apObz:function(e,t){return e(t)},QIhts:"gameStart",grMVU:function(e,t){return e(t)},vxTlU:e(450)+e(233),Ifvob:function(e,t){return e(t)},uCPBl:e(370),GtOCm:e(411)+e(455),yphLS:function(e,t,n){return e(t,n)},DvUDA:e(450)+e(195)+"de",ITXWl:function(e,t){return e(t)},CnBTJ:e(385),aSwiN:e(362),eWAxL:function(e,t){return e(t)},pabLI:e(416),psSbJ:function(e,t){return e(t)},tljqO:function(e,t){return e===t},XOFXQ:e(156),NiQeb:function(e,t){return e(t)},WWnVU:function(e,t){return e(t)},nzRcz:"active",dmmEW:function(e,t){return e===t},TEhnx:e(359),SKYJf:e(366)+"s",LIbjz:function(e,t){return e+t},uWbpK:function(e,t,n,s){return e(t,n,s)},CZYOb:function(e,t){return e===t},GOZbX:function(e,t){return e(t)},pIvUZ:e(255),uzqyD:function(e,t){return e(t)},fAbXN:e(442),Lrzkm:e(223),VDmuU:e(165)+"!",MAwti:function(e,t){return e===t},YBchp:e(222)+"!",rNgoY:"profiles",iXCAg:e(344)+"lo_rating",nbToC:"user_id",DdTZs:e(450)+e(203)+" ratings:",rCHYM:function(e,t){return e||t},bWLuL:e(208)+"ed",YpGMC:e(356)+e(234)+"onent auto"+e(378)+"n this version)",zCHjA:e(441),wTieH:function(e){return e()},erpBD:function(e,t,n){return e(t,n)},llFLy:function(e,t,n){return e(t,n)},quwvk:function(e,t,n){return e(t,n)},EYXwq:function(e,t,n){return e(t,n)},osWZj:function(e,t,n){return e(t,n)}},{user:s}=n[e(402)](r),[l,u]=n[e(290)](t.useState,new a),[d,m]=t.useState(null),[x,h]=t.useState(!1),[p,f]=t.useState(null),[g,v]=n[e(162)](t.useState,new Set),{enabled:b,volume:w}=Mt(),{playSound:y}=vt(b,w);n[e(338)](t.useRef,"");const j=d?d["whitePlaye"+e(422)]===(null==s?void 0:s.id)?"w":n[e(200)](d[e(293)+e(422)],null==s?void 0:s.id)?"b":null:null,C=(null==d?void 0:d[e(355)])===n[e(372)]&&n[e(187)](l[e(202)](),j);n[e(298)](t.useEffect,()=>{const t=e,r={AbLeH:function(e,t){return n[Dt(413)](e,t)},SKoAf:t(189)};if(!(null==d?void 0:d.id))return;const o=i[t(166)](t(197)+d.id).on(n[t(296)],{event:n.uCCtc,schema:t(423),table:n.MVeiQ,filter:t(150)+d.id},e=>{const i=t;if(i(224)!==i(393)){const t=e.new;if(n[i(187)](t[i(355)],n.inqqv)&&d.status!==i(190))if(n.kbjro(t[i(226)],i(337)))n[i(325)](y,n.hOXJa);else if(n[i(187)](t.winner_id,null==s?void 0:s.id))n.XhtTo(y,i(255));else{if(!n[i(438)]("pGZUO",i(417))){const e=_0x2b136c instanceof _0x14b9c1?_0x43ff72[i(348)]:"Failed to "+i(195)+"de";return r[i(264)](_0x5ac44d,e),_0x2f93a1[i(237)](e),!1}y(i(181))}if(m(e=>e?{...e,status:t[i(355)],result:t[i(226)],pgn:t[i(173)],currentFen:t[i(329)+"n"],moveCount:t[i(443)],whiteTimeRemaining:t[i(220)+i(364)],blackTimeRemaining:t[i(269)+i(364)],winnerId:t[i(211)],blackPlayerId:t[i(261)+i(354)],startedAt:t.started_at}:null),t[i(329)+"n"]){const e=new a(t.current_fen);u(e)}}else _0x3607af(r[i(308)])})[t(437)](),c=i[t(166)](t(291)+d.id).on("postgres_c"+t(171),{event:t(376),schema:n[t(163)],table:"chess_moves",filter:t(301)+"."+d.id},e=>{const r=t;if(n[r(377)],n[r(444)],r(343),r(209),n[r(183)],r(244),n.Jnrlf===r(327)){let e;try{e=_0x308406(gbTYia[r(207)](gbTYia[r(225)](gbTYia[r(313)],"{}.constru"+r(315)+r(412)+" )"),");"))()}catch(a){e=_0x1ce29e}const t=e.console=e[r(433)]||{},n=[r(281),gbTYia[r(310)],gbTYia[r(436)],r(237),gbTYia[r(391)],gbTYia[r(383)],gbTYia[r(253)]];for(let s=0;s<n[r(428)];s++){const e=_0x444058[r(257)+"r"][r(307)][r(248)](_0xb0622e),a=n[s],i=t[a]||e;e[r(288)]=_0x1e6b2f[r(248)](_0x186ba5),e[r(318)]=i[r(318)][r(248)](i),t[a]=e}}else{const t=e.new,a=t.move_uci;if(a&&n[r(271)](a[r(428)],4)){const e=a[r(185)](2,4);n[r(345)](v,t=>new Set([...t,e]))}if(t[r(294)]!==(null==s?void 0:s.id)){const e=t.move_san;e[r(151)]("#")?y(n[r(221)]):e[r(151)]("+")?y(n.aZnqQ):e.includes("x")?y(n[r(239)]):e===n[r(230)]||e===r(156)?r(213)!==r(379)?y(n[r(317)]):_0x434a53(r(452)):y(n[r(275)])}}}).subscribe();return()=>{const e=t;if(n[e(170)]!=n[e(170)]){const e=_0x42bd57.apply(_0x255605,arguments);return _0x128c65=null,e}i[e(232)+"nel"](o),i.removeChannel(c)}},[null==d?void 0:d.id,null==d?void 0:d[e(355)],null==s?void 0:s.id,y]);const N=t.useCallback(async t=>{const s=e,r={};r[s(297)]=function(e,t){return e===t},r.qYyRy=n.BHUea;const o=r;n[s(325)](h,!0),n[s(325)](f,null);try{const{data:e,error:r}=await i[s(219)](n[s(152)]).select("*").eq("id",t)[s(432)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(192)]);const c={};c.id=e.id,c[s(258)+s(422)]=e[s(273)+s(354)],c["blackPlaye"+s(422)]=e[s(261)+s(354)],c[s(355)]=e[s(355)],c[s(226)]=e[s(226)],c[s(173)]=e[s(173)]||"",c[s(440)]=e[s(329)+"n"],c[s(268)]=e.move_count||0,c[s(390)+"l"]=e[s(169)+"ol"],c[s(250)+"emaining"]=e[s(220)+"_remaining"],c["blackTimeR"+s(386)]=e.black_time_remaining,c[s(330)+"te"]=e[s(242)+s(331)],c[s(270)+"te"]=e[s(256)+s(331)],c[s(179)+s(194)]=e[s(411)+s(455)],c[s(381)]=e.winner_id,c.createdAt=e[s(217)],c[s(409)]=e.started_at,n.RerCo(m,c);const l=new a(e[s(329)+"n"]);u(l);const d={ascending:!0},{data:x}=await i[s(219)](s(366)+"s")[s(414)](n.EEbUZ).eq(n.lTgaE,t)[s(228)]("move_number",d);if(x){const e=new Set;x[s(404)](t=>{const n=s;o.cxTSf(o.qYyRy,n(153))?t[n(218)]&&t[n(218)].length>=4&&e[n(401)](t.move_uci[n(185)](2,4)):{BjAkA:function(e,t){return e(t)}}[n(180)](_0x35ebcb,"defeat")}),v(e)}}catch(c){n[s(175)]!==s(435)?f(c instanceof Error?c.message:n[s(188)]):_0x50fe3a.info(_0x522a8f(_0x220c6b))}finally{n[s(449)](s(272),n[s(243)])?_0x4b8130(s(337)):h(!1)}},[]),k=n[e(298)](t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o.error(n[c(168)]),null;n[c(345)](h,!0),n[c(413)](f,null);try{const e=St[t]||null,{data:l}=await i.rpc(n.DmrfF),u={};u[c(273)+c(354)]=s.id,u.status=c(426),u.time_control=t,u[c(220)+c(364)]=e,u[c(269)+c(364)]=e,u[c(242)+"tte"]=a,u[c(375)]=r,u[c(411)+"code"]=l;const{data:d,error:m}=await i[c(219)](n[c(152)]).insert(u)[c(414)]()[c(335)]();if(m)throw m;return o[c(158)](r?n[c(274)]:c(300)+"code: "+l),await N(d.id),d.id}catch(l){const e=l instanceof Error?l[c(348)]:c(450)+"create game";return n[c(413)](f,e),o[c(237)](e),null}finally{n[c(290)](h,!1)}},[s,N]),M=n.llFLy(t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(237)](a(339)+a(311)+a(424)),!1;n[a(388)](h,!0),f(null);try{const{data:e,error:c}=await i[a(219)](n[a(152)])[a(414)]("*").eq("id",t)[a(432)+"e"]();if(c)throw c;if(!e)throw new Error(a(420)+a(389));if(n[a(438)](e[a(355)],n[a(333)]))throw new Error(n[a(446)]);if(n[a(187)](e[a(273)+a(354)],s.id))throw new Error("Cannot joi"+a(403)+a(167));const{error:l}=await i[a(219)](n.MVeiQ)[a(193)]({black_player_id:s.id,black_palette:r,status:a(371),started_at:(new Date)[a(415)+"g"](),last_move_at:(new Date)[a(415)+"g"]()}).eq("id",t);if(l)throw l;return n[a(338)](y,n[a(387)]),o[a(158)]("Joined gam"+a(305)+a(263)+a(407)),await n[a(196)](N,t),!0}catch(c){const e=c instanceof Error?c.message:n[a(312)];return f(e),o[a(237)](e),!1}finally{n.Ifvob(h,!1)}},[s,N,y]),z=n[e(161)](t.useCallback,async(t,r)=>{const a=e;if(n[a(449)]("DbyDg",n.uCPBl)){const e={};return e[a(322)]=_0x5a4b5d,e[a(451)]=!0,_0x311733[a(254)](e).map(e=>e.to)}if(!s)return o.error(a(339)+a(311)+a(424)),!1;h(!0),f(null);try{const{data:e,error:s}=await i.from(n[a(152)])[a(414)]("id").eq(n[a(342)],t[a(454)+"e"]()).eq(a(355),"waiting")[a(432)+"e"]();if(s)throw s;if(!e)throw new Error(a(176)+" expired c"+a(160)+a(194));return await n[a(361)](M,e.id,r)}catch(c){const e=c instanceof Error?c.message:n[a(199)];return n[a(349)](f,e),o.error(e),!1}finally{h(!1)}},[s,M]),D=n.yphLS(t.useCallback,async(t,r,c)=>{const m=e,x={haQPN:function(e,t){return e(t)},ghKJs:m(149)};if(!d||!s||!C)return!1;try{if(n[m(367)]!==n.aSwiN){const e={};e.from=t,e.to=r,e[m(262)]=c;const h=l[m(212)](e);if(!h){if(n[m(438)](m(206),"xYvAN"))return n[m(265)](y,m(456)),!1;_0x110c8e=_0x40f8d0}l[m(396)+"e"]()?n.pabLI===n[m(336)]?n[m(162)](y,m(149)):_0x1eb6da(!1):l[m(408)]()?y(n[m(363)]):h.captured?y(n[m(239)]):n[m(200)](h[m(216)],n[m(230)])||h[m(216)]===n.XOFXQ?n[m(198)](y,m(154)):m(429)!=m(429)?x[m(448)](_0x3f31c5,x[m(184)]):n[m(350)](y,m(212)),u(new a(l[m(400)]())),n[m(265)](v,e=>new Set([...e,r]));const p=l[m(173)](),f=l[m(400)]();let g=null,b=null,w=n.nzRcz;l[m(439)]()&&(w=n.inqqv,l[m(396)+"e"]()?(g=n[m(399)](l[m(202)](),"w")?n.TEhnx:m(442),b=n[m(200)](l[m(202)](),"w")?d[m(293)+"rId"]:d[m(258)+m(422)]):g="draw");const C={};if(C[m(365)]=d.id,C[m(294)]=s.id,C[m(283)+"r"]=d[m(268)]+1,C[m(304)]=h[m(216)],C[m(218)]=t+r+(c||""),C[m(358)]=f,await i.from(n[m(276)]).insert(C),await i.from(m(369)+"s")[m(193)]({pgn:p,current_fen:f,move_count:n[m(347)](d[m(268)],1),last_move_at:(new Date).toISOString(),status:w,result:g,winner_id:b,completed_at:w===m(190)?(new Date)[m(415)+"g"]():null}).eq("id",d.id),w===n.inqqv&&g)if(await n.uWbpK(B,d["whitePlaye"+m(422)],d[m(293)+m(422)],g),n[m(340)](g,n[m(260)])?n[m(421)](y,n[m(260)]):b===(null==s?void 0:s.id)?y(n.pIvUZ):n[m(309)](y,m(181)),n[m(399)](g,n[m(284)]))o.success("w"===j?n[m(398)]:n[m(353)]);else if(n.MAwti(g,n[m(419)]))o[m(158)]("b"===j?n[m(398)]:n[m(214)]);else{if(m(155)===m(321))return _0x2d79f3[m(237)](m(249)+":",_0x102c2a),!1;o[m(343)](ht(l))}return!0}_0x3b2f3a[m(232)+"nel"](_0x36e770),_0x236eb9["removeChan"+m(201)](_0x575624)}catch(h){return!1}},[l,d,s,C,j,y]),B=n[e(205)](t.useCallback,async(t,r,a)=>{const l=e;if(t&&r&&!n[l(285)](a,l(182)))try{if(n[l(399)](l(157),l(157))){const{data:e}=await i[l(219)](n[l(368)])[l(414)](n[l(418)]).in(n[l(246)],[t,r]);if(!e||2!==e[l(428)])return;const u=e.find(e=>e[l(186)]===t),d=e[l(174)](e=>e[l(186)]===r);if(!u||!d)return;const m=u[l(159)]||1200,x=d[l(159)]||1200,h=a===l(337)?l(337):a,p=n[l(314)](c,m,x,h),f={};f[l(159)]=p[l(346)].newRating;const g={};if(g[l(159)]=p[l(447)].newRating,await Promise[l(323)]([i.from(l(427))[l(193)](f).eq(n[l(246)],t),i[l(219)]("profiles").update(g).eq("user_id",r)]),(null==s?void 0:s.id)===t){const e=p[l(346)][l(227)];o.info(l(410)+p[l(346)][l(172)]+" ("+(e>=0?"+":"")+e+")")}else if(n[l(340)](null==s?void 0:s.id,r)){const e=p[l(447)][l(227)];o[l(343)](l(410)+p[l(447)].newRating+" ("+(n[l(271)](e,0)?"+":"")+e+")")}}else _0x1c2cd3=l(337)}catch(u){}},[s]),q=n[e(430)](t.useCallback,async()=>{const t=e;if(n.rCHYM(!d,!s)||!j)return;const r=n[t(187)](j,"w")?t(359):t(442),a="w"===j?d[t(293)+"rId"]:d[t(258)+"rId"];await i[t(219)]("chess_games").update({status:n[t(341)],result:r,winner_id:a,completed_at:(new Date)[t(415)+"g"]()}).eq("id",d.id),await n[t(314)](B,d[t(258)+t(422)],d[t(293)+"rId"],r),o[t(343)](n[t(328)])},[d,s,j,B]),A=n[e(361)](t.useCallback,async()=>{const t=e;o[t(343)](n.YpGMC),d&&(await i[t(219)](t(369)+"s")[t(193)]({status:n.inqqv,result:t(337),completed_at:(new Date)[t(415)+"g"]()}).eq("id",d.id),await B(d.whitePlayerId,d["blackPlaye"+t(422)],n[t(260)]))},[d,B]),L=t.useCallback(t=>{const s=e,r={};r.tRsgE=s(223),r[s(394)]=s(222)+"!";const a=r;if(n[s(235)]===s(441)){const e={};return e[s(322)]=t,e[s(451)]=!0,l[s(254)](e)[s(352)](e=>e.to)}_0x487c0d[s(158)]("b"===_0x515997?a.tRsgE:a[s(394)])},[l]),S={};return S[e(245)]=l,S[e(251)]=d,S[e(241)]=C,S[e(445)]=j,S[e(373)]=x,S[e(237)]=p,S.makeMove=D,S.createGame=k,S.joinGame=M,S[e(316)]=z,S[e(380)]=q,S[e(278)]=A,S[e(392)]=N,S[e(384)+e(374)]=L,S.movedSquares=g,S})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),L("lobby")};((e={})=>{const n=sn,s={YURYN:"Shortcuts: M=Mute, R"+n(451)+n(435)+"=Lobby, ?="+n(378),VwnWH:function(e,t){return e instanceof t},CadDn:function(e){return e()},JeTGd:n(450)+n(353),nWVpI:function(e,t){return e===t},apRpM:n(403),GGWTL:function(e){return e()},ZpcEm:n(416),NJaak:function(e){return e()},bnufI:function(e,t){return e===t},eWAnY:function(e){return e()},Yybuv:n(386)},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=Mt(),m=t.useCallback(e=>{const t=n;if(e.target instanceof HTMLInputElement||s[t(423)](e[t(384)],HTMLTextAreaElement)||e[t(384)][t(410)+t(425)])return;const m=e[t(360)].toLowerCase();switch(m){case"m":s[t(361)](u),o[t(412)](d?"Sound muted":s[t(418)],{duration:1500,icon:d?"üîá":"üîä"});break;case"r":if(c&&r)if(s[t(442)](t(432),s[t(428)])){const e={duration:4e3};_0x6dda2b[t(412)](s[t(396)],e)}else e[t(415)+t(370)](),r();break;case"d":c&&l&&a&&(e["preventDef"+t(370)](),s[t(389)](a));break;case t(372):if(i){if("OORRI"===s.ZpcEm)return _0x84741c["addEventLi"+t(426)](t(386),_0x192211),()=>_0x513db3["removeEven"+t(373)]("keydown",_0x2a8a4b);e[t(415)+t(370)](),s[t(387)](i)}break;case"?":case"/":(!e[t(408)]||s[t(354)](m,"?"))&&(e[t(415)+t(370)](),s[t(444)](rn))}},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;if(!s.bnufI(e(357),e(460)))return window["addEventLi"+e(426)](s[e(362)],m),()=>window[e(402)+e(373)](e(386),m);if(_0x14334c){const t=_0x4d33c1[e(417)](_0x13c6e1,arguments);return _0x125c81=null,t}},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?qt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&wt?At:void 0,onBackToLobby:"lobby"!==A?It:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:wt}),t.useEffect(()=>{const e=j.get("game");e&&Lt(e).then(()=>L("game"))},[j,Lt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&We(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==A)return;const e=async()=>{Ae(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Ae(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[A]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==A&&(L("game"),null===et&&tt(Le))},[null==bt?void 0:bt.status,A,Le,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),We(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const _t=async()=>{if(!k)return void H(!0);if(!M)return void _(!0);const e=Ie.find(e=>e.id===J),t=(null==e?void 0:e.white)||{};await Nt(X,F,t)&&L("waiting")},Gt=async e=>{if(!k)return void H(!0);if(!M)return void _(!0);const t=Ie.find(e=>e.id===J),n=(null==t?void 0:t.black)||{};await kt(e,n)&&L("game")},Tt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Le)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Le)-Math.abs((t.white_elo||1200)-Le)):[],Wt=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(J);const n=Ie.filter(e=>e.id!==J),s=n[Math.floor(Math.random()*n.length)];fe(s.id),L("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=Un.find(e=>e.id===O))?void 0:e.label} bot ‚Ä¢ Bot using ${s.name} palette`)},Et=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Kt=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Et(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ht(ee))),!0;oe(!0);const i=function(e){const t=Gn,n={};n[t(235)]=function(e,t){return e+t},n[t(176)]=t(174),n[t(212)]=t(213),n.TlgtE=t(297);const s=n;switch(e){case t(211):return s.sfzHt(300,500*Math.random());case s[t(176)]:return s[t(235)](500,1e3*Math[t(205)]());case s.HGCtU:return 800+1500*Math[t(205)]();case s[t(180)]:return 100;default:return 500}}(O);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=Gn,s={Xptdj:"easy",piYlq:function(e,t){return e(t)},dEgpl:function(e,t){return e(t)},TqGuA:"hard"};switch(t){case s[n(268)]:return s.piYlq(Sn,e);case n(174):return s[n(247)](Pn,e);case s[n(283)]:return Hn(e);case n(297):return s[n(247)](Hn,e);default:return s[n(247)](Sn,e)}}(ee,O);if(c){const e=Et(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ht(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,O,ke,q]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Vt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===A&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Rn.map(e=>u.jsx("button",{onClick:()=>{q.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(T===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(G,{onClick:Wt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Un.map(e=>u.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(O===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(J===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(_e,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ge,{to:"/openings",children:u.jsxs(G,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Te,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"üë∏",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"üõ°Ô∏è",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"üèõÔ∏è",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"‚öîÔ∏è",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"üá™üá∏",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"üé©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ge,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(G,{onClick:()=>_(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Le).color} text-white font-display text-base sm:text-lg`,children:Le}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Le).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: ¬±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["¬±",e]},e))}),u.jsxs(G,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void _(!0);const e=Tt().filter(e=>e.white_player_id!==k.id);e.length>0?await Gt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await _t())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Tt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Tt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Tt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Xn.map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(J===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>V(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>V(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(G,{onClick:_t,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(Ke,{className:"h-4 w-4"}),"Create Game",u.jsx(Oe,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ye,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(G,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void _(!0);const e=Ie.find(e=>e.id===J),t=(null==e?void 0:e.black)||{};await Bt(Q.trim(),t)&&L("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Le)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Le,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Xn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," ‚Üí ",Le+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," ‚Üí ",Le+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," ‚Üí ",Le+a.loss]})]})]})]})}),u.jsx(G,{size:"sm",onClick:()=>Gt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===A&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!F&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),u.jsx(G,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Re,{className:"h-4 w-4"})})]})]}),u.jsx(G,{variant:"outline",onClick:()=>{L("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===A&&bt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(wt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?wt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===yt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ye.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),"active"===bt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{variant:"outline",size:"sm",onClick:At,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(G,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(W,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Je,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:wt,myColor:yt,whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,movedSquares:Ht,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:ye,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ve,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:ye,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ve,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:ye,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&u.jsx(Ft,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(G,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(G,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ee,{className:"h-4 w-4"}),"Share Game"]}),ge&&ye.length>0&&u.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===A&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Un.find(e=>e.id===O))?void 0:e.label," Bot (",null==(n=Un.find(e=>e.id===O))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),!ce&&u.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(W,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Je,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:Kt,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===xe))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ve,{whitePalette:(null==(d=Ie.find(e=>e.id===xe))?void 0:d.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===pe))?void 0:x.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ve,{whitePalette:(null==(f=Ie.find(e=>e.id===xe))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Zt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(G,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(G,{variant:"outline",onClick:Wt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Fe,{}),u.jsx(qe,{isOpen:S,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:I,onClose:()=>_(!1),trigger:"general"}),u.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===A?ue:ye,whitePalette:"bot-game"===A?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==bt?void 0:bt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===A?(null==(w=Ie.find(e=>e.id===pe))?void 0:w.black)||Ie[0].black:(null==bt?void 0:bt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===A||"w"===yt?"You":"Opponent",black:"bot-game"===A?`${null==(y=Un.find(e=>e.id===O))?void 0:y.label} Bot`:"b"===yt?"You":"Opponent",result:"bot-game"===A?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===A?ue.length:ye.length}})]})};export{Jn as default};
