import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as z,af as M,ag as B,ai as D,y as L,bF as q,bG as S,b6 as A,ae as P,bH as I,ah as H,bI as T,B as _,bJ as K,bK as G,bL as E,bM as U,bN as Y,bO as W,bP as O,bQ as V,bR as J,bS as X,bT as R,bU as F,bV as Z,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as ze,c7 as Me,an as Be,av as De,aw as Le,c8 as qe,aM as Se,c9 as Ae,H as Pe,P as Ie,ca as He,b3 as Te,bs as _e,be as Ke,cb as Ge,aP as Ee,cc as Ue,d as Ye,b2 as We,a9 as Oe,cd as Ve,ce as Je,cf as Xe,al as Re,au as Fe}from"./index-ckGSTu6A.js";import{L as Ze}from"./LiveColorLegend-X0rv4SpQ.js";import{T as Qe}from"./trending-down-C6JpEyxO.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-Dw9T_hNi.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=xt,t=mt();for(;;)try{if(149747===parseInt(e(335))/1+parseInt(e(357))/2*(-parseInt(e(327))/3)+-parseInt(e(365))/4+-parseInt(e(354))/5+-parseInt(e(378))/6*(parseInt(e(351))/7)+-parseInt(e(328))/8*(parseInt(e(390))/9)+parseInt(e(387))/10*(parseInt(e(343))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=xt,r={};r[s(348)]="yMPgH";const a=r,i=e?function(){const e=s;if(n){if(a[e(348)]!==e(389)){const s=n[e(393)](t,arguments);return n=null,s}if(_0x47ab27){const e=_0x49e0ee.apply(_0x298c98,arguments);return _0x374a98=null,e}}}:function(){};return e=!1,i}}()(void 0,function(){const e=xt,t={};t[e(383)]=e(325)+"+$";const n=t;return ut[e(380)]().search(n.YbElT)[e(380)]()[e(324)+"r"](ut)[e(323)](e(325)+"+$")});ut();const dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function mt(){const e=["ode3nte1BKLcs1nY","Dun3zMm","DKzZBfi","mtq1nJHdt1ryuKS","rhjHDYbIEsb0Aa","E30Uy29UC3rYDq","yMLUza","ueviBem","z2DRwLC","AxntDgfSzw1HDa","CMv0DxjUicHMDq","ndKXnJaWsgnzDxzY","zxjYB3i","D2fYBG","Bg9N","Aunntvq","CMvLzM9SzcbYzq","rgPsqve","B1bbs0i","Bvvmu2e","A3zJsui","ie5VigXLz2fSia","CM4GDgHPCYiPka","DgHYzwvMB2XKxW","nZHTyK5jrge","rhjHDYbIEsbPBG","Dg9tDhjPBMC","q3HtzuK","qKfoz3u","wwjfBfq","BgfIBguU","zfjLCgv0AxrPBW","wuTXqwG","mtC3nZbmr25qqM8","DhjHy2u","t2rWsKe","ouXZyxHPAa","u3rHBgvTyxrLiq","CMvWzxrPDgLVBG","yxbWBhK","ntaTtw92zsbsDq","BMn0Aw9UkcKG","AxnuAhjLzwzVBa","BKj1qNa","sw5ZDwzMAwnPzq","Dw5RBM93BG","zsbMAwz0Es1TBW","DhLruxG","C2HVCNrnzxnZyq","zMvU","EhPJB1m","zNv1AuS","zxHJzxb0Aw9U","x3j1Bgu","rNDQzKW","vMTpwwK","uMvWzxrPDgLVBG","Bw92zxmGyxzHAq","C2vHCMnO","y29UC3rYDwn0BW","kcGOlISPkYKRkq","s0LtteG","otzRC2PfwvK","mtK4ntyYneDhvgXKrq","CMvHC29U","BgvUz3rO","DMuGCNvSzs4","ChjVDg90ExbL","BwvZC2fNzq","DvfPDu8","mJq3mJuZt0rIrvPn","y29UC29Szq","BNrFBwf0zxjPyq","Cgv0AxrPB24U","DgfIBgu","zMLMDhLFBw92zq","yNDJAKu","sM5iCvu","nti1ofP5r1jMvG","C3rHBgvTyxrL","C3vMzMLJAwvUDa","BeL0uLi","BgrPyxu","B0joDuS","Aurxsxe","Aw5ZDwzMAwnPzq","oty1mdjpsw5nyNa","y3rVCIGICMv0Dq","AxnjBNn1zMzPyW"];return(mt=function(){return e})()}function xt(e,t){e-=312;const n=mt();let s=n[e];if(void 0===xt.gqBJWz){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};xt.JVnZbx=r,xt.PXNeYj={},xt.gqBJWz=!0}const a=e+n[0],i=xt.PXNeYj[a];if(i)s=i;else{const e=function(e){this.huXFwz=e,this.toRegl=[1,0,0],this.amVwZe=function(){return"newState"},this.tNSmJk="\\w+ *\\(\\) *{\\w+ *",this.GiFmYL="['|\"].+['|\"];? *}"};e.prototype.ErGtzk=function(){const e=new RegExp(this.tNSmJk+this.GiFmYL).test(this.amVwZe.toString())?--this.toRegl[1]:--this.toRegl[0];return this.hxQDHI(e)},e.prototype.hxQDHI=function(e){return Boolean(~e)?this.logJtw(this.huXFwz):e},e.prototype.logJtw=function(e){for(let t=0,n=this.toRegl.length;t<n;t++)this.toRegl.push(Math.round(Math.random())),n=this.toRegl.length;return e(this.toRegl[0])},new e(xt).ErGtzk(),s=xt.JVnZbx(s),xt.PXNeYj[a]=s}return s}function ht(e){const t=xt;return function(e){const t=xt,n={};n[t(326)]=t(344),n[t(320)]=t(391)+t(375)+"moves available.",n[t(369)]="PEHlC",n[t(316)]=function(e,t){return e>=t},n[t(312)]=t(394)+"le",n[t(356)]=t(399),n.JnHqU="Game drawn!";const s=n;if(e.isStalemate()){const e={};return e[t(329)]=s[t(326)],e[t(333)]=s[t(320)],e.shortMessage=t(391),e}if(e[t(396)+t(385)+"n"]()){const e={};return e[t(329)]=t(377)+t(392),e.message=t(358)+t(370)+t(338),e.shortMessage="Threefold "+t(321),e}if(e[t(353)+"ientMaterial"]()){if(s[t(369)]!==t(361))return _0x6ee9b3(_0x837c7a)[t(333)];{const e={};return e.reason=t(350)+t(337)+"l",e[t(333)]=t(379)+t(345)+" material.",e[t(313)+"ge"]=t(398)+"nt Material",e}}const r=e[t(314)](),a=parseInt(r.split(" ")[4],10);if(s.fuuiK(a,100)){const e={};return e.reason=t(340)+t(318),e[t(333)]="Draw by th"+t(400)+t(331),e[t(313)+"ge"]=s[t(312)],e}const i={};return i.reason=s[t(356)],i.message=s[t(342)],i[t(313)+"ge"]="Draw",i}(e)[t(333)]}dt(void 0,function(){const e=xt,t={YKqAh:function(e,t){return e(t)},lItRR:function(e,t){return e+t},VUWdR:e(349),bwcjE:e(381),BANgu:e(364)+e(395),sambs:e(344),hKLfN:e(391)+e(375)+e(322)+e(384),xzcoS:function(e){return e()},mULSa:e(368),kvcIB:e(367),FmPfx:e(366),FwjfL:e(339),ysVCn:e(388),uQiuO:function(e,t){return e<t},DjRAQ:function(e,t){return e===t},EORDy:"uvVxl"},n=t[e(315)](function(){const n=e,s={uCwfc:function(e,n){return t[xt(386)](e,n)},ggkZW:function(e,n){return t[xt(346)](e,n)},nBuBp:function(e,t){return e+t},oPAKB:n(364)+n(395),ldiau:n(359)+n(352)+n(376)+" )"};if(t.VUWdR!==t[n(341)]){let e;try{e=Function(t[n(382)]+(n(359)+n(352)+'rn this")( ));'))()}catch(r){e=window}return e}_0x20ec6a=s[n(355)](_0x573de2,s[n(362)](s[n(397)](s[n(372)],s[n(347)]),");"))()}),s=n[e(336)]=n[e(336)]||{},r=[t[e(373)],t[e(374)],"info",t.FmPfx,e(317),t[e(319)],t.ysVCn];for(let a=0;t[e(334)](a,r[e(330)]);a++){if(t[e(371)]("xpkCI",t.EORDy)){const n={};return n[e(329)]=t.sambs,n[e(333)]=t.hKLfN,n[e(313)+"ge"]=e(391),n}{const t=dt[e(324)+"r"][e(332)][e(360)](dt),n=r[a],i=s[n]||t;t.__proto__=dt[e(360)](dt),t[e(380)]=i[e(380)].bind(i),s[n]=t}}})(),function(){const e=vt,t=gt();for(;;)try{if(793997===-parseInt(e(536))/1+-parseInt(e(503))/2*(-parseInt(e(533))/3)+parseInt(e(488))/4*(-parseInt(e(491))/5)+-parseInt(e(457))/6*(parseInt(e(443))/7)+-parseInt(e(548))/8+parseInt(e(490))/9*(parseInt(e(462))/10)+parseInt(e(552))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=vt,t={};t[e(518)]=e(551)+"+$";const n=t;return pt[e(476)]()[e(541)](e(551)+"+$")[e(476)]().constructor(pt)[e(541)](n[e(518)])});pt();const ft=function(){const e=vt,t={};t[e(519)]=e(475);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=vt;if("fLyPb"!==n.Olzqw){const e=_0x454215?function(){if(_0x27346c){const e=_0x256fc0[vt(471)](_0xe3e879,arguments);return _0x3cc1e0=null,e}}:function(){};return _0x2a4678=!1,e}if(t){const n=t[s(471)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}();function gt(){const e=["z2fPBK5Vzgu","z21lzu8","D2vIA2L0qxvKAq","C3rHCNq","rgf0yq","zhjHDW","zgvMzwf0","Bw92zq","mtm4mJyXBwr5rKjq","y29UC29Szq","Aw1L","mtmZmZCXmNLQD1nSCW","Aw5PDef1zgLV","y2HLy2TTyxrL","y2fZDgXL","zNjLCxvLBMn5","C2vHCMnO","vg9wywX1zuf0va","vxjHu2K","C3rVCa","zM9NCMC","y3jLyxrLqNvMzG","C3f1yxjL","odu3nZe3nMfiCKzWqW","y3vYCMvUDa","AejHvwy","kcGOlISPkYKRkq","ndGZnJKXntzlB0novxC","DeXtz2G","u2r6ENi","n29zDMP5Cq","vKDtr3i","y0zttNC","DMfSDwu","Bg9N","z2fTzvn0yxj0","zxHWB25LBNrPyq","y3jLyxrLt3nJAq","ChjVDg90ExbL","y29UBMvJDa","zgvZDgLUyxrPBW","x19WCM90B19F","y29UDgv4Da","EgzmAwS","nJq5oduXnM9JCxPJwG","q1zbrLe","vvPzrvi","AwXSzwDHBa","uNHRrLu","nZbgvwT1s0K","C2LUzq","z2fTzuvUza","Cxfct2e","B0nVBNrLEhq","z2v0q2HHBM5LBa","CgXHEvnVDw5K","zxjtB3vYy2u","ChbVCNrLza","yxbWBhK","v2vIief1zgLVia","C2f3Dg9VDgG","BMn0Aw9UkcKG","zKX5ugi","Dg9tDhjPBMC","C2fTCgXLuMf0zq","Bg93CgfZCW","y29UC3rYDwn0BW","CMfUzg9T","DhjPyw5NBgu","BgLUzwfYuMfTCa","BMzYDui","DhLWzq","CMv0DxjUicHMDq","y3vYCMvUDfrPBq","yMLUza","mtzNuvLkwvK","qxvKAw9dB250zq","nta0odaXtLfLyuPe","mtyXmJK0nwforfzyuG","y3jLyxrLqMLXDq","zxjYB3i","A3nbswK","shbpruS","y3rVCIGICMv0Dq","D2fYBG","Aw94zuC","y1PxDhC","thztuw8","swXHr1q","C2v0vMfSDwvbDa","mZroz0PYtxG","thPgzNa","CLLwwKe","ELPRq1m","AKrNr3u","y3jLyxrLr2fPBG","z2fPBG","zfPTBKS","E30Uy29UC3rYDq","uuPtv0e","yLrHALC","yNvMzMvY","AvvQv0y","Aw5MBW","rvz3ree","ufP6quC","t2X6CxC","DMLJDg9YEq","vgLTzq","tMDZAM0","uhf5wNK","AKTIy1m"];return(gt=function(){return e})()}function vt(e,t){e-=442;const n=gt();let s=n[e];if(void 0===vt.iVTAjQ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};vt.lguzWF=r,vt.IiCCcC={},vt.iVTAjQ=!0}const a=e+n[0],i=vt.IiCCcC[a];if(i)s=i;else{const e=function(e){this.VqMBWb=e,this.hBpQMC=[1,0,0],this.pCHBID=function(){return"newState"},this.LPSEVd="\\w+ *\\(\\) *{\\w+ *",this.ouJIMF="['|\"].+['|\"];? *}"};e.prototype.JqqBIO=function(){const e=new RegExp(this.LPSEVd+this.ouJIMF).test(this.pCHBID.toString())?--this.hBpQMC[1]:--this.hBpQMC[0];return this.VURjsb(e)},e.prototype.VURjsb=function(e){return Boolean(~e)?this.NcODeN(this.VqMBWb):e},e.prototype.NcODeN=function(e){for(let t=0,n=this.hBpQMC.length;t<n;t++)this.hBpQMC.push(Math.round(Math.random())),n=this.hBpQMC.length;return e(this.hBpQMC[0])},new e(vt).JqqBIO(),s=vt.lguzWF(s),vt.IiCCcC[a]=s}return s}ft(void 0,function(){const e=vt,t={UZYER:function(e,t){return e(t)},JyhXi:e(511)+e(496)+'rn this")( )',QJSWA:e(493),RxkFU:"exception"},n=function(){const n=e;let s;try{s=t[n(459)](Function,n(485)+n(474)+t.JyhXi+");")()}catch(r){s=window}return s}(),s=n[e(534)]=n[e(534)]||{},r=[e(447),"warn",e(516),t[e(512)],t[e(461)],"table","trace"];for(let a=0;a<r.length;a++){const t=ft[e(479)+"r"][e(451)][e(487)](ft),n=r[a],i=s[n]||t;t[e(454)]=ft[e(487)](ft),t[e(476)]=i[e(476)][e(487)](i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=vt,r={VGSGr:s(501),LvSQo:s(472)+"API not su"+s(470),HpOEK:s(499),EXKRT:function(e){return e()},ioxeG:function(e,t){return e+t},hBaUf:function(e,t){return e+t},xdqVQ:function(e,t){return e*t},gmKeO:function(e,t){return e<t},qqBOa:function(e,t){return e-t},nfruB:s(532),ksAIi:s(481),tLSgh:"capture",xfLik:function(e,t,n,s,r,a){return e(t,n,s,r,a)},fogrg:s(547),bTajW:s(539),dZmnK:s(538),rYVZA:s(463),cFSNw:function(e,t,n){return e(t,n)},KHScE:s(464),jKbcS:function(e,t,n,s,r,a){return e(t,n,s,r,a)},PqyZy:function(e,t,n){return e(t,n)},UraSi:s(460),lkCfm:function(e,t,n,s,r,a){return e(t,n,s,r,a)},zZkCS:function(e,t){return e(t)},iUjWF:function(e,t,n){return e(t,n)}},a={};a[s(455)]=null,a[s(525)]=null;const i=r[s(506)](t.useRef,a),o=t.useCallback(()=>{const e=s;if(!i[e(549)][e(455)])try{if("FeCba"===r[e(444)]){const t=_0x442b94[e(471)](_0x2fed1f,arguments);return _0x235ae4=null,t}{const t=new(window[e(489)+"xt"]||window["webkitAudi"+e(466)]),s=t[e(508)]();s[e(452)](t[e(453)+"n"]),s[e(509)][e(446)]=n;const r={};r.context=t,r[e(525)]=s,i[e(549)]=r}}catch(t){}},[n]);r[s(445)](t.useEffect,()=>{const e=s;i[e(549)].gainNode&&(i.current.gainNode[e(509)].value=n)},[n]);const c=t.useCallback((t,n,a=s(463),c=.01,l=.1,u)=>{const d=s;if(d(504)===r[d(495)])return _0x26e78f[d(476)]()[d(541)]("(((.+)+)+)+$")[d(476)]().constructor(_0x2a7154)[d(541)]("(((.+)+)+)+$");{if(!e)return;r.EXKRT(o);const{context:s,gainNode:m}=i[d(549)];if(!s||!m)return;const x=s[d(450)+"llator"](),h=s[d(508)]();x[d(484)]=a,x[d(540)][d(502)+d(521)](t,s[d(486)+"e"]),u&&x[d(540)][d(449)+"lRampToValueAtTime"](u,r.ioxeG(s[d(486)+"e"],n)),h[d(509)].setValueAtTime(0,s[d(486)+"e"]),h[d(509)][d(482)+d(542)+d(535)](1,r.hBaUf(s[d(486)+"e"],c)),h[d(509)][d(449)+"lRampToValueAtTime"](.01,s[d(486)+"e"]+n-l),h[d(509)][d(482)+"ToValueAtTime"](0,s[d(486)+"e"]+n),x.connect(h),h.connect(m),x.start(s[d(486)+"e"]),x[d(544)](r[d(498)](s.currentTime,n))}},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i.current;if(!c||!l)return;const u=r.xdqVQ(c.sampleRate,t),d=c[a(546)+"er"](1,u,c[a(477)]),m=d[a(467)+a(529)](0);for(let e=0;r[a(526)](e,u);e++)m[e]=r[a(465)](2*Math[a(480)](),1);const x=c[a(546)+a(469)]();x[a(514)]=d;const h=c[a(492)+"adFilter"]();h[a(484)]=a(478),h[a(540)][a(446)]=n;const p=c.createGain();p.gain[a(502)+a(521)](.3,c.currentTime),p.gain[a(449)+"lRampToValueAtTime"](.01,c.currentTime+t),x.connect(h),h.connect(p),p[a(452)](l),x[a(528)](c[a(486)+"e"]),x[a(544)](r[a(550)](c.currentTime,t))},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(483)]:c(800,.08,n(463),.005,.05),c(400,.06,r[n(494)],.005,.04);break;case r[n(553)]:l(.12,2e3),r[n(456)](c,300,.1,r[n(545)],.005,.08),r[n(456)](c,150,.15,n(463),.01,.1);break;case r[n(513)]:r[n(456)](c,600,.06,n(463),.005,.04),setTimeout(()=>c(700,.06,"sine",.005,.04),80);break;case"check":r[n(456)](c,880,.15,r[n(494)],.01,.1),setTimeout(()=>c(1100,.12,n(481),.01,.08),120);break;case r[n(510)]:r.xfLik(c,880,.2,n(463),.01,.15),setTimeout(()=>c(660,.2,n(463),.01,.15),150),setTimeout(()=>c(440,.3,n(463),.01,.2),300),setTimeout(()=>c(330,.4,n(463),.01,.3),500);break;case n(448):c(523,.12,r[n(505)],.01,.08),setTimeout(()=>c(659,.12,n(463),.01,.08),100),r[n(445)](setTimeout,()=>c(784,.2,n(463),.01,.15),200);break;case r.KHScE:c(440,.15,n(481),.01,.1),r.cFSNw(setTimeout,()=>c(349,.25,n(481),.01,.2),150);break;case n(520):r[n(456)](c,523,.1,"sine",.01,.08),r[n(445)](setTimeout,()=>c(659,.1,"sine",.01,.08),100),r[n(445)](setTimeout,()=>c(784,.1,n(463),.01,.08),200),r[n(445)](setTimeout,()=>c(1047,.3,"sine",.01,.25),300);break;case n(531):r[n(524)](c,392,.2,"sine",.02,.15),r[n(523)](setTimeout,()=>c(349,.2,"sine",.02,.15),200),setTimeout(()=>c(330,.3,n(463),.02,.25),400),r[n(445)](setTimeout,()=>c(262,.4,n(463),.02,.35),650);break;case n(530):c(440,.15,n(463),.01,.1),setTimeout(()=>c(440,.15,n(463),.01,.1),180),setTimeout(()=>c(523,.2,n(463),.01,.15),360);break;case r[n(543)]:c(200,.1,r[n(545)],.005,.08),r.lkCfm(c,150,.08,n(473),.005,.06)}},[e,c,l]);r[s(515)](t.useEffect,()=>{const e=s,t={};t[e(517)]=function(e,t){return e!==t},t[e(458)]=e(442);const n=t;if("Ngsjm"===e(522))return()=>{const t=e;if(n[t(517)](n.CVAFQ,t(507)))i[t(549)][t(455)]&&i[t(549)].context.close();else if(_0x111f66){const e=_0x1c6e96[t(471)](_0x2702e6,arguments);return _0x28e830=null,e}};if(!_0x1b6c54[e(549)][e(455)])try{const t=new(_0x3103c6[e(489)+"xt"]||_0x58c703[e(527)+e(466)]),n=t.createGain();n[e(452)](t[e(453)+"n"]),n[e(509)].value=_0x5e756c;const s={};s[e(455)]=t,s[e(525)]=n,_0x5bbfec[e(549)]=s}catch(r){_0x2efe86.warn("Web Audio API not supported")}},[]);const d={};return d[s(468)]=u,d[s(537)]=o,d},yt=Ct;!function(){const e=Ct,t=Nt();for(;;)try{if(945868===parseInt(e(342))/1+-parseInt(e(358))/2+-parseInt(e(354))/3*(parseInt(e(343))/4)+parseInt(e(388))/5*(parseInt(e(352))/6)+parseInt(e(361))/7*(parseInt(e(344))/8)+parseInt(e(374))/9*(-parseInt(e(376))/10)+parseInt(e(370))/11*(parseInt(e(377))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wt=function(){const e=Ct,t={};t[e(348)]=function(e,t){return e!==t},t[e(387)]=e(363);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Ct;if(t){if(n.Dsihy(n[s(387)],s(386))){const n=t[s(366)](e,arguments);return t=null,n}if(_0x3dba7a){const e=_0x3b8bdf.apply(_0x16a874,arguments);return _0x273b43=null,e}}}:function(){};return s=!1,r}}()(void 0,function(){const e=Ct,t={};t[e(359)]=e(355)+"+$";const n=t;return wt.toString().search(n[e(359)]).toString().constructor(wt)[e(347)](n[e(359)])});wt();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Ct(366)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Ct(e,t){e-=342;const n=Nt();let s=n[e];if(void 0===Ct.APcvKV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Ct.jblCqf=r,Ct.IuINTG={},Ct.APcvKV=!0}const a=e+n[0],i=Ct.IuINTG[a];if(i)s=i;else{const e=function(e){this.svxSVB=e,this.ixohxW=[1,0,0],this.bOKOhI=function(){return"newState"},this.peemBC="\\w+ *\\(\\) *{\\w+ *",this.qkCJVS="['|\"].+['|\"];? *}"};e.prototype.VAbrug=function(){const e=new RegExp(this.peemBC+this.qkCJVS).test(this.bOKOhI.toString())?--this.ixohxW[1]:--this.ixohxW[0];return this.DcinxN(e)},e.prototype.DcinxN=function(e){return Boolean(~e)?this.MrStTk(this.svxSVB):e},e.prototype.MrStTk=function(e){for(let t=0,n=this.ixohxW.length;t<n;t++)this.ixohxW.push(Math.round(Math.random())),n=this.ixohxW.length;return e(this.ixohxW[0])},new e(Ct).VAbrug(),s=Ct.jblCqf(s),Ct.IuINTG[a]=s}return s}function Nt(){const e=["EK1bzhy","BKTstxG","C0rzswy","y3rVCIGICMv0Dq","yxbWBhK","BMn0Aw9UkcKG","ChjVDg90ExbL","y29UC3rYDwn0BW","ndrMChz4Bwu","zc1Zzxr0Aw5NCW","Cuvmyxq","BwTQDxK","mtq4otm3ngvADMjxCW","yMLUza","otbpANbcswe","nJiWotyXnKnOExDytG","Aw5MBW","Eu1su3K","zw5HyMXLza","yNLcDuy","CM4GDgHPCYiPka","y2HLC3mTC291BG","Dg9tDhjPBMC","zxHJzxb0Aw9U","yKXeBMO","BxHev2q","nxPxzuL0va","mta3mda3nw1hChbxCa","nfLdrvb4ra","ndGWru9iyunK","y29UC29Szq","uNPgEMu","C2vHCMnO","rhnPAhK","DgfIBgu","BgvUz3rO","zxjYB3i","ntG3nJqZnKv3CK9NvW","D2fYBG","mJuZmZyXn2L0EhLcBW","kcGOlISPkYKRkq","Bg9N","BKvOAvy","mJa5mtGYnhDqzgzNzG","sfrUB2e","CKv1yMW","mJqWnZnxAerUy2S"];return(Nt=function(){return e})()}jt(void 0,function(){const e=Ct,t={Phshx:function(e,t){return e!==t},DvCnS:e(379),qELat:function(e,t){return e(t)},byBuF:function(e,t){return e+t},Qwslu:function(e,t){return e+t},zMAdv:"return (fu"+e(367),rEubl:"{}.constru"+e(365)+e(382)+" )",xQBAG:e(356),mkjuy:e(378),RzFze:e(351),nEhiV:e(349),sDYIf:function(e,t){return e<t}};let n;try{if(t.Phshx(t.DvCnS,"yMRSy")){const t=_0x2703e8[e(366)](_0xc9d8c8,arguments);return _0x5627e9=null,t}n=t[e(372)](Function,t[e(381)](t.Qwslu(t[e(362)],t[e(360)]),");"))()}catch(a){n=window}const s=n.console=n[e(345)]||{},r=[t.xQBAG,e(353),t[e(373)],t[e(346)],e(385),t[e(357)],"trace"];for(let i=0;t[e(364)](i,r[e(350)]);i++){const t=jt[e(369)+"r"][e(368)][e(375)](jt),n=r[i],a=s[n]||t;t.__proto__=jt.bind(jt),t[e(384)]=a[e(384)][e(375)](a),s[n]=t}})();const kt={};kt.name=yt(383)+yt(371);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[yt(380)]}))}),kt)),Mt=Dt;!function(){const e=Dt,t=qt();for(;;)try{if(162608===parseInt(e(384))/1+parseInt(e(587))/2+-parseInt(e(495))/3+-parseInt(e(673))/4*(-parseInt(e(454))/5)+-parseInt(e(610))/6*(-parseInt(e(582))/7)+parseInt(e(618))/8*(-parseInt(e(636))/9)+-parseInt(e(508))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Dt(518)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Dt,t={};t[e(607)]=e(516)+"+$";const n=t;return Bt[e(488)]()[e(621)](n[e(607)])[e(488)]()[e(418)+"r"](Bt)[e(621)](n[e(607)])});function Dt(e,t){e-=382;const n=qt();let s=n[e];if(void 0===Dt.znybaH){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Dt.YkUvZA=r,Dt.bYSJmE={},Dt.znybaH=!0}const a=e+n[0],i=Dt.bYSJmE[a];if(i)s=i;else{const e=function(e){this.XHTLiF=e,this.cLTDht=[1,0,0],this.CiJTqc=function(){return"newState"},this.ivWPJy="\\w+ *\\(\\) *{\\w+ *",this.fJESzR="['|\"].+['|\"];? *}"};e.prototype.VopDOR=function(){const e=new RegExp(this.ivWPJy+this.fJESzR).test(this.CiJTqc.toString())?--this.cLTDht[1]:--this.cLTDht[0];return this.GVbmld(e)},e.prototype.GVbmld=function(e){return Boolean(~e)?this.hEGzBr(this.XHTLiF):e},e.prototype.hEGzBr=function(e){for(let t=0,n=this.cLTDht.length;t<n;t++)this.cLTDht.push(Math.round(Math.random())),n=this.cLTDht.length;return e(this.cLTDht[0])},new e(Dt).VopDOR(),s=Dt.YkUvZA(s),Dt.bYSJmE[a]=s}return s}Bt();const Lt=function(){const e=Dt,t={};t[e(424)]="castle";const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(536)]=n[a(424)],i[a(590)]=a(410);const o=i,c=s?function(){const e=a,n={};n[e(612)]=o.yxwnb;const s=n;if(r){if(o[e(590)]===e(410)){const n=r[e(518)](t,arguments);return r=null,n}_0x49a3a4(s[e(612)])}}:function(){};return s=!1,c}}();function qt(){const e=["y2HLy2S","Eu5brxy","rwjZu3u","q2fUBM90igPVAq","zxjYB3i","v2H5D0G","yvv5u0e","D2HPDgvFDgLTzq","B3jKzxi","z2fTzv9Pzd1LCq","wfrjy0S","C2vSzwn0","q01VC3e","BwfSzKK","Bg9FCMf0Aw5N","D2HPDgvqBgf5zq","z2fTzvn0yxj0","C3vIC3rYAw5N","C3rHCNrLzef0","D2HPDgvuAw1LuG","AM9PBKDHBwu","yMXHy2TFCgXHEq","wLb5r0q","z2fTzs0","r0v1CvK","BwfRzu1VDMu","zxjFAwq","AM9PBKj5q29Kzq","yvnQB1m","ugLHDNi","y29UC3rYDwn0BW","C2LUz2XL","Bg9HzcbNyw1L","AgfSBgvUz2uGyW","ywXS","y3vYCMvUDf9Mzq","vgzgsfq","D2LUBMvYswq","AgfUz2vZ","EgDdAvC","DxbKyxrL","tNvLEMK","z0Xyqva","BMvS","yNvSBgv0xZe","swLxuMq","q2HHBgXLBMDLia","D2HPDgu","Bw92zunVDw50","rvPHEuy","BMv3uMf0Aw5N","s3b3wKS","z2v0qxzHAwXHyG","DxjUuuy","ww91ihjLC2LNBG","D2HPDgvFCgXHEq","uNPQvwS","Awq9zxeU","BvrqEKy","BMn0Aw9UkcKG","rwjqAe4","CgDU","C3vIC2nYAwjL","qMXMqM8","wxLqy0m","AxndAgvJA21HDa","mta1mJy1z2DgsxDA","DMLJDg9YEq","vwvYzgG","wfnlBhy","z2jzveS","y29UC29Szq","tenZrwi","rhroB2C","wgz5tvq","D0Xgthq","DvHqA08","vMfADNi","CgXHEwvYx2LK","zseGww91igfYzq","Dg9ju09tDhjPBG","y2fZDgXL","Aw5Zzxj0","D2fYBG","ChvIBgLJ","CNbJ","su5trvju","ww91ihDVBIe","CMvZDwX0","AwXSzwDHBa","zhKGC3rHCNrLza","BwfW","wLPsvxu","rhjHDYbVzMzLCG","zMTyDuG","vvbeqvrf","qMvMvgq","Bw92zv9UDw1Izq","C3f1yxjL","vLLdBKm","Dg9tDhjPBMC","DhvYBG","wfjfz0i","Aw5JBhvKzxm","D1L4CeW","zgvMzwf0","y1PvAeq","nte1nda2vgDzr0D3","svnwvuC","vfDhsMS","CMDtANC","uvPgsuC","rK14t0K","Eufmzvy","BIb5B3vYig93BG","D2HPDgvFCgfSzq","DxbKyxrLievmtW","vhjLtey","BwvZC2fNzq","Ee1SD2S","mZeWotKWBvvwEMPs","AxnnEvr1CM4","y2H1Eu0","qMn0te4","t1DkBum","ChjVzMLSzxm","ywrhq1q","qNHitvy","kcGOlISPkYKRkq","Aw4GysbNyw1L","yxbWBhK","BffhrKW","igv4CgLYzwqGyW","ufzzDhm","vvnIt1O","tvjAEem","BgXzvwy","zwXVx3jHDgLUzW","v2joz20","rvbewMC","Axnhyw1Lt3zLCG","yK5IBvi","Bwf5yMvtAw5NBa","y2HHBgXLBMDLxW","zYbMB3iGB3bWBW","D2HPDgvFD2LUCW","CM4GDgHPCYiPka","zw1HAw5PBMC","ExH3BMi","u1PtuuO","BgngDui","y29TCgXLDgvK","z1zTquu","DgLTzunVBNrYBW","A2f6A2e","sLvsA3O","z2vUzxjHDgvFyW","Bw92zv91y2K","Bw92zq","x19WCM90B19F","yMXPDhPFnq","u3vet0K","AM9PBIbIEsbJBW","Aw5MBW","zxHJzxb0Aw9U","Bw92zxmT","yMXHy2TuAw1LuG","y2HLC3nFz2fTzq","q050yuq","C3rHDhvZ","rMv6DLC","z2fTzvn0yxrL","A3btBw4","yMLUza","BMvUDc4UlG","rvP0rKe","zhjHDW","BMv3","tfjlzNq","ruXYAvO","A216vNG","y2fWDhvYzq","DhrL","C3vJy2vZCW","y3jLyxrLzf9HDa","DgfIBgu","zM9YrwfJAa","CMvZAwDUr2fTzq","rLnLDey","yMXHy2TFDgLTzq","AfzPD3G","y3vYCMvUDezLBG","zMXMD2S","Dw50Aw1Lza","ntG3m2DdBfPYqW","tY1plu8","rvzkBha","C3rHCNrLzf9HDa","y2HLy2TTyxrL","ntu2mduYruDHvhbx","B2rL","zwf0zsbHigDHBq","qwvzC04","BgvUz3rO","yMXHy2TqBgf5zq","B01ODw0","r2fTzsbUB3qGzG","sw52ywXPzcbVCG","BgvnB3zLCW","AgfSBgvUz2vFyW","BxLdB2XVCG","yMXHy2TFCgfSzq","y2fWDhvYzwq","igDHBwu","zMvU","y3jLyxrLr2fTzq","tNvyt28","ChjVBw90Aw9U","r3roDvm","sMXSwMK","yMXHy2TqywXLDa","AM1rz0i","odu4DM5AtwLj","DMvYyM9Zzq","v3fhA0G","wuXqD1a","CMzMC2i","v2fws2u","zfnAtM0","Dhjmufe","mtm5nJmYtMvIBLrr","uMf0Aw5NoIa","BIb0AgLZihzLCG","C2vHCMnO","sK5hy24","CMvTB3zLq2HHBG","tw92zsbLCNjVCG","uLHtAKi","vefyv1C","C2fU","rMfPBgvKihrVia","y2HHBM5LBa","z2fTzv9Pza","Bw92zwrtCxvHCG","DhnOBfy","yxnJzw5KAw5N","y2HHBgXLBMDLqW","ywrK","mta4wgv2AKP1","BIbPBIb0BYbQBW","Bw92zxm","ywjHBMrVBMvK","y29KztOG","y29Kzq","t1zozeO","x3jLBwfPBMLUzW","CKLK","y2HHBMDL","zfnOq0S","Bw92zv9JB3vUDa","ugXLyxnLihnPzW","t2rcteq","r2fTzsbJCMvHDa","ugXNsgK","venQshm","rhPkuNK","DgLTzv9JB250CG","zMLUza","DxnLCL9Pza","BIbPBIb0BYbJCG","yMXHy2S","A0PlvK4","ywn0AxzL","tLPhwuC","zNjVBq","y3jLyxrLigDHBq","AM9PBIbNyw1L","wfrbC1u","D2fPDgLUzW","sNjAt0m","v2HPDguGD2LUCW","sgT5qvq","r2fTzsbHBhjLyq","sM9PBMvKigDHBq","CMv0DxjUicHMDq","mJHMy2r2Ahi","uKn4zgW","z3fIDwq","mJK1odndq3vlz2G","CvLls3q","yMXHy2TFD2LUCW","B3jjCge"];return(qt=function(){return e})()}Lt(void 0,function(){const e=Dt,t={dShCK:function(e,t){return e(t)},gqbud:"checkmate",WbNgm:function(e,t){return e+t},OdBLD:e(672)+e(447),bxSQw:function(e){return e()},MRZxC:e(667),xgCiW:"log",qYKKt:e(552),QZFIG:"trace",BctLN:function(e,t){return e<t}};let n;try{const s=t[e(646)](Function,t[e(526)](t[e(649)],'{}.constructor("retu'+e(534)+" )")+");");n=t.bxSQw(s)}catch(a){t[e(523)]!==e(556)?n=window:t[e(646)](_0x3e1d0b,t[e(383)])}const s=n[e(459)]=n[e(459)]||{},r=[t[e(427)],e(471),e(551),"error",t[e(385)],e(573),t[e(499)]];for(let i=0;t[e(511)](i,r.length);i++){const t=Lt[e(418)+"r"].prototype[e(561)](Lt),n=r[i],a=s[n]||t;t[e(547)]=Lt.bind(Lt),t[e(488)]=a[e(488)][e(561)](a),s[n]=t}})();const St={};St[Mt(432)]=60,St[Mt(548)]=300,St.rapid_15=900,St[Mt(581)]=0;const At=St,Pt=Kt;!function(){const e=Kt,t=Ht();for(;;)try{if(991013===-parseInt(e(496))/1+parseInt(e(534))/2+parseInt(e(499))/3*(parseInt(e(538))/4)+-parseInt(e(509))/5+-parseInt(e(522))/6+parseInt(e(525))/7*(parseInt(e(535))/8)+-parseInt(e(505))/9*(-parseInt(e(532))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Kt,t={};t.rWVrq=e(518)+"+$";const n=t;return It.toString()[e(529)](n[e(501)])[e(503)]()[e(533)+"r"](It)[e(529)](e(518)+"+$")});function Ht(){const e=["ndbPDwnkAvC","y29UC3rYDwn0BW","mtiXmdaYmefdtxfWsa","mteYy2DWvw9g","AxntDxbWB3j0zq","D2fYBG","ndrrueHctgW","tenpuLK","z2T1zxi","y3rVCIGICMv0Dq","DhjHy2u","BgLNAhq","thPYyxq","AgfWDgLJCW","Dw5KzwzPBMvK","mte3nZy0mfzRBvjmyG","DgfIBgu","DKzcvhO","mJCWntmXDfHSzvDO","Aw5MBW","CLDwCNe","BMn0Aw9UkcKG","Dg9tDhjPBMC","zxjYB3i","nty4odu0ow1PsenvzG","x19WCM90B19F","zKXqyMe","yMLUza","mZK0mda4nxbqEK9Mza","C2vSzwn0Aw9U","DMLICMf0zq","Efvkz3u","C3vJy2vZCW","sMnlzwe","yxbWBhK","sgfWDgLJigzLzq","E30Uy29UC3rYDq","kcGOlISPkYKRkq","y29UC29Szq","C0fWD3i","zgjHy2SGzMfPBa","mta1ndu1nZbkwMPWzNG","Bg9N","BgvUz3rO","mJK0ntmYyKfzr1vK","CuLTsha","wfHdteG","BwvKAxvT","C2vHCMnO","vwvlCvq","zwq6"];return(Ht=function(){return e})()}It();const Tt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Kt(515)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Tt(void 0,function(){const e=Kt,t={gkuer:"CSdyU",fLPba:function(e,t){return e+t},qImHp:"return (fu"+e(502),sApwr:function(e){return e()},Lzrat:"error",xUJgu:e(542)};let n;try{if(t[e(540)]!=t[e(540)]){const t=_0x54236d[e(515)](_0x433682,arguments);return _0x2e183d=null,t}{const s=Function(t[e(507)](t[e(526)]+(e(517)+e(541)+'rn this")( )'),");"));n=t[e(520)](s)}}catch(a){n=window}const s=n.console=n[e(519)]||{},r=[e(523),e(537),e(500),t[e(544)],"exception",e(497),t[e(512)]];for(let i=0;i<r[e(524)];i++){const t=Tt[e(533)+"r"].prototype[e(508)](Tt),n=r[i],a=s[n]||t;t[e(506)]=Tt[e(508)](Tt),t[e(503)]=a[e(503)][e(508)](a),s[n]=t}})();const _t={};function Kt(e,t){e-=496;const n=Ht();let s=n[e];if(void 0===Kt.GgUGan){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Kt.QLDggN=r,Kt.EQoiiK={},Kt.GgUGan=!0}const a=e+n[0],i=Kt.EQoiiK[a];if(i)s=i;else{const e=function(e){this.qSSHza=e,this.YNgIkj=[1,0,0],this.oVnurF=function(){return"newState"},this.DzsMBo="\\w+ *\\(\\) *{\\w+ *",this.JlfJTe="['|\"].+['|\"];? *}"};e.prototype.qmfQCY=function(){const e=new RegExp(this.DzsMBo+this.JlfJTe).test(this.oVnurF.toString())?--this.YNgIkj[1]:--this.YNgIkj[0];return this.BXAALJ(e)},e.prototype.BXAALJ=function(e){return Boolean(~e)?this.kqraCe(this.qSSHza):e},e.prototype.kqraCe=function(e){for(let t=0,n=this.YNgIkj.length;t<n;t++)this.YNgIkj.push(Math.round(Math.random())),n=this.YNgIkj.length;return e(this.YNgIkj[0])},new e(Kt).qmfQCY(),s=Kt.QLDggN(s),Kt.EQoiiK[a]=s}return s}_t.light=10,_t[Pt(528)]=25,_t.heavy=50,_t[Pt(513)]=[10,50,20],_t[Pt(504)]=[50,30,50,30,50],_t.selection=5;const Gt=_t,Et=()=>{const e=Pt,n={CFuBa:function(e,t){return e!==t},yqDDM:function(e,t,n){return e(t,n)},LCORY:function(e,t,n){return e(t,n)},JHKCn:function(e,t,n){return e(t,n)},JcKea:function(e,t,n){return e(t,n)},XXCLH:function(e,t,n){return e(t,n)},VpXka:function(e,t,n){return e(t,n)},vFBTz:function(e,t,n){return e(t,n)},UeKqT:function(e,t,n){return e(t,n)}},s=n.CFuBa(typeof navigator,e(546))&&e(511)in navigator,r=n.yqDDM(t.useCallback,(t=e(543))=>{const n=e;if(!s)return!1;try{const e=Gt[t];return navigator[n(511)](e)}catch(r){return!1}},[s]),a={select:n[e(539)](t.useCallback,()=>r(e(510)),[r]),move:n.JHKCn(t.useCallback,()=>r("light"),[r]),capture:t.useCallback(()=>r("medium"),[r]),check:n[e(514)](t.useCallback,()=>r("heavy"),[r]),victory:n[e(527)](t.useCallback,()=>r(e(513)),[r]),error:n.VpXka(t.useCallback,()=>r(e(504)),[r]),castle:n[e(498)](t.useCallback,()=>!!s&&navigator[e(511)]([15,40,15]),[s]),gameStart:n[e(530)](t.useCallback,()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i[e(536)+"d"]=s,i[e(511)]=r,i[e(545)]=a,i},Ut={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Yt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Wt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:z}=Et();let M=null;try{M=l()}catch{}const B=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),D="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",S=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Yt(D?7-e:e,D?7-t:t),l=null==(i=B[D?7-e:e])?void 0:i[D?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=B[D?7-e:e])?void 0:o[D?7-t:t])?z.capture():z.move();return void(await n(b,c)?(y(null),j([])):z.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return z.select(),y(c),void j(s(c))}y(null),j([])},[B,b,w,r,a,D,x,n,s,z]),A=t.useCallback(e=>{if(!(null==M?void 0:M.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?M.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):M.setHoveredSquare(null)},[M,L]),P=t.useCallback(()=>{(null==M?void 0:M.setHoveredSquare)&&M.setHoveredSquare(null)},[M]),I=t.useCallback(e=>{if(!M)return!1;const{highlightedPiece:t,lockedPieces:n}=M,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[M,g]),H=M&&(null!==M.highlightedPiece||M.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=D?7-e:e,a=D?7-t:t,i=Yt(s,a),o=null==(n=B[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=I(i),j=H&&g&&!y,N=H&&y;return u.jsxs(m.div,{onClick:()=>S(e,t),onMouseEnter:()=>A(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),A(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Ut[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:D})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Ot={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Vt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Ot[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?z[e.quality]:null;return u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(D,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Jt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Xt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:G,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Rt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:G,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const z=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=z.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(S,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(A,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(I,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(H,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Jt[e],s=n.icon;return u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(D,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(T,{className:"w-3 h-3"})})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx(_,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Xt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(_,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(D,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Vt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(E,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(U,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx(_,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(W,{className:"h-5 w-5"}):u.jsx(S,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(V,{children:[u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx(J,{asChild:!0,children:u.jsxs(_,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(X,{className:"h-3 w-3"}),L]})})}),u.jsx(D,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(R,{align:"end",className:"bg-popover",children:z.map(e=>u.jsx(F,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(V,{children:[u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsx(J,{asChild:!0,children:u.jsxs(_,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(D,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(R,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(Z,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Zt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(_,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(E,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(D,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(_,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(D,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:z}=he(),{setCapturedTimelineState:M,setReturningFromOrder:B}=pe(),D=t.useRef(null),[L,q]=t.useState(j),[S,A]=t.useState(!1),[P,I]=t.useState(""),[H,T]=t.useState(!1),[K,G]=t.useState(!1);se(p);const E=t.useMemo(()=>p?fe(p):null,[p]),U=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});I(e)}catch(e){}})()},[e]);const Y=async e=>{if(e&&!v)return void T(!0);if(!D.current)return;A(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(D.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{A(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(_,{variant:L?"outline":"default",size:"sm",onClick:()=>U(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(_,{variant:L?"default":"outline",size:"sm",onClick:()=>U(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:D,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:z})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",E&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",E]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(_,{onClick:()=>Y(!1),disabled:S,variant:"outline",className:"gap-2",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(_,{onClick:()=>Y(!0),disabled:S,className:"gap-2 btn-luxury",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(_,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?ze(x,c.totalMoves):Me;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(_,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;M({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:z}),B(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:z},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Se,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(Be,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(De,{isOpen:H,onClose:()=>T(!1),onAuthRequired:()=>{T(!1),G(!0)},trigger:"download"}),u.jsx(Le,{isOpen:K,onClose:()=>G(!1)})]})},en=ln;!function(){const e=ln,t=an();for(;;)try{if(391558===parseInt(e(306))/1*(parseInt(e(307))/2)+parseInt(e(263))/3*(parseInt(e(338))/4)+parseInt(e(276))/5*(-parseInt(e(249))/6)+parseInt(e(335))/7+-parseInt(e(298))/8*(-parseInt(e(253))/9)+-parseInt(e(328))/10*(parseInt(e(260))/11)+parseInt(e(280))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ln(264)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ln,t={};t[e(242)]=e(325)+"+$";const n=t;return tn.toString()[e(295)](n.qtREJ)[e(287)]()[e(270)+"r"](tn).search(e(325)+"+$")});tn();const nn=function(){const e=ln,t={};t[e(316)]="iOmSc",t[e(332)]=function(e,t){return e!==t},t[e(299)]=e(278);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(332)](a(300),n.GipfU)){const e=s?function(){const e=a;if(r){if(e(311)===n.bBBtW){const e=_0x26f2e1?function(){if(_0x1730c9){const e=_0x16363f.apply(_0x54ac2c,arguments);return _0x36938e=null,e}}:function(){};return _0x2a5567=!1,e}{const n=r[e(264)](t,arguments);return r=null,n}}}:function(){};return s=!1,e}{const e=_0x19c6c4[a(270)+"r"][a(243)][a(289)](_0x4ff241),t=_0x236717[_0x12625c],n=_0x2c87ba[t]||e;e[a(286)]=_0x1cc788[a(289)](_0x5ab2c7),e[a(287)]=n[a(287)][a(289)](n),_0x5c91e7[t]=e}}}();nn(void 0,function(){const e=ln,t={YBPKb:function(e,t){return e(t)},JGzvb:function(e,t){return e+t},TrKgS:function(e){return e()},PJqBY:e(315),HDYgH:e(257),vuTNN:e(283),NBBCm:function(e,t){return e<t}};let n;try{const s=t[e(329)](Function,t.JGzvb(e(240)+e(309)+"{}.constru"+e(294)+e(252)+" )",");"));n=t[e(267)](s)}catch(a){if(e(315)!==t[e(326)]){const t=_0x55576f?function(){if(_0x549a65){const t=_0x57992f[e(264)](_0x419d66,arguments);return _0xeefde7=null,t}}:function(){};return _0x3e849b=!1,t}n=window}const s=n[e(265)]=n[e(265)]||{},r=[t.HDYgH,t[e(259)],e(319),e(272),e(274),e(336),"trace"];for(let i=0;t[e(254)](i,r[e(277)]);i++){const t=nn[e(270)+"r"][e(243)][e(289)](nn),n=r[i],a=s[n]||t;t[e(286)]=nn.bind(nn),t.toString=a[e(287)].bind(a),s[n]=t}})();const sn=()=>{const e=ln,t={};t[e(323)]=e(248)+" M=Mute, R"+e(239)+e(324)+e(312)+e(333);const n=t,s={};s[e(318)]=4e3,o[e(319)](n[e(323)],s)},rn={};function an(){const e=["AxqGzNvSBhnJCG","mZngB21Hsge","ndCYnLbOvgzXAG","BhnJCMvLBIbTBW","BMn0Aw9UkcKG","tez1weq","DLDks3K","puXVyMj5lca/pq","ywrKrxzLBNrmAq","zgL0ywjSzq","rMnozM0","yKjcDfC","uhjLDMLVDxmGBq","zhvYyxrPB24","Aw5MBW","Bg9IyNKGlYbfEa","CgXHEsK","tMv4DcbTB3zL","whzdBgu","purYyxCSievZyW","kcGOlISPkYKRkq","uePXqLK","rxnJ","nZqXmtKWC1zMuKXu","wujqs2i","C2HPzNrlzxK","t2zMzxiGzhjHDW","tffwzfm","sgvSCa","ChjLDMvUDerLzG","nJCYotG3z3LACejY","DgfIBgu","BMqGB24VB2zM","mJuYngjdv0TzDG","pvjLC2LNBIWGra","CMv0DxjUicHMDq","u3bHy2u","CxrsruO","ChjVDg90ExbL","zsaOzhvYAw5Nia","A2v5","DeXPC3rLBMvY","zxnJyxbL","u2HVCNrJDxrZoG","nLbrAhzjDq","sg9Tzq","yxjKihnOB3j0yW","CM4GDgHPCYiPka","ndvvvKr1D2O","tKjcq20","icH5B3vYihr1CG","AxndB250zw50rq","Bg9N","u2HVDYbRzxLIBW","DNvutK4","mteWwhjwu3zu","uMvZAwDUigDHBq","DgvK","mta3ngnVrNnQBW","yxbWBhK","y29UC29Szq","B3zL","vhjlz1m","wNveEMC","DgfYz2v0","y29UC3rYDwn0BW","DgnoCe0","zxjYB3i","C3rLBMvY","zxHJzxb0Aw9U","ugXHEs9qyxvZzq","nty0odm1CMHuA0Xc","BgvUz3rO","qKfAr1m","CMvTB3zLrxzLBG","nta4nZqYngTvsuHVvG","yxrLCW","A2v5zg93BG","D2fYBG","u291BMqGBxv0zq","EgjSwhC","x19WCM90B19F","Dg9tDhjPBMC","DxrZ","yMLUza","rw5K","ihrPBwvSAw5L","r28GDg8GC3rHCG","Dg9mB3DLCKnHCW","y3rVCIGICMv0Dq","C2vHCMnO","CKjPzMK","ywn0Aw9U","nJC0nZKYD2TUEu9v","r2LWzLu","AfLtEKS","vg9Nz2XLigz1Ba","vg9Nz2XLl2v4Ca","yxvSDa","uMv0DxjUihrVia"];return(an=function(){return e})()}rn[en(245)]="M",rn[en(297)]="Toggle sou"+en(337);const on={};on[en(245)]="R",on[en(297)]=en(261)+en(244)+en(321);const cn={};function ln(e,t){e-=239;const n=an();let s=n[e];if(void 0===ln.LMFmnR){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ln.bnsXvE=r,ln.pChRWQ={},ln.LMFmnR=!0}const a=e+n[0],i=ln.pChRWQ[a];if(i)s=i;else{const e=function(e){this.CcTFrX=e,this.sZneNR=[1,0,0],this.YsauJO=function(){return"newState"},this.xAJptn="\\w+ *\\(\\) *{\\w+ *",this.KUJrTJ="['|\"].+['|\"];? *}"};e.prototype.FTmxvy=function(){const e=new RegExp(this.xAJptn+this.KUJrTJ).test(this.YsauJO.toString())?--this.sZneNR[1]:--this.sZneNR[0];return this.VEYVNS(e)},e.prototype.VEYVNS=function(e){return Boolean(~e)?this.canSvq(this.CcTFrX):e},e.prototype.canSvq=function(e){for(let t=0,n=this.sZneNR.length;t<n;t++)this.sZneNR.push(Math.round(Math.random())),n=this.sZneNR.length;return e(this.sZneNR[0])},new e(ln).FTmxvy(),s=ln.bnsXvE(s),ln.pChRWQ[a]=s}return s}cn[en(245)]="D",cn[en(297)]=en(331)+en(255)+"n)";const un={};un[en(245)]=en(327),un[en(297)]=en(304)+en(320)+en(305)+"een";const dn={};dn[en(245)]="?",dn[en(297)]=en(258)+en(251)+en(288);const mn={};mn[en(245)]=en(241),mn[en(297)]=en(275)+en(291);const xn={};xn[en(245)]="â†",xn[en(297)]=en(317)+en(266),en(322);const hn={};hn[en(245)]=en(250),hn.action=en(292)+"t",en(290);const pn={};pn[en(245)]="F",pn[en(297)]=en(301)+en(308)+"de";const fn={};fn[en(245)]="C",fn.action="Toggle board coordin"+en(281);const gn={key:"L"};gn[en(297)]=en(302)+"and legend";const vn=In;!function(){const e=In,t=Kn();for(;;)try{if(439634===parseInt(e(334))/1+parseInt(e(430))/2*(-parseInt(e(332))/3)+-parseInt(e(395))/4+parseInt(e(345))/5+-parseInt(e(460))/6*(-parseInt(e(410))/7)+-parseInt(e(319))/8+parseInt(e(435))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const bn=function(){const e=In,t={MuTjm:function(e,t){return e!==t},fpvWe:e(380),ihCAE:function(e,t){return e(t)},OIlhk:e(446)};let n=!0;return function(s,r){const a=e;if("UwJTa"===t[a(371)]){const e=n?function(){const e=a;if(r){if(!t[e(368)](t.fpvWe,e(380))){const t=r[e(452)](s,arguments);return r=null,t}_0x4f3b90<_0x349a98&&(_0x548adc=_0x318e77,_0x3d9c61=_0x404f8c)}}:function(){};return n=!1,e}return t.ihCAE(_0x4ba83c,_0x388b6d)}}()(void 0,function(){const e=In,t={};t.NlEBv=e(327)+"+$";const n=t;return bn[e(347)]()[e(440)](n[e(387)])[e(347)]()[e(360)+"r"](bn)[e(440)](n[e(387)])});bn();const yn=function(){const e=In,t={};t[e(379)]=e(409),t[e(381)]=e(422),t[e(397)]=function(e,t){return e!==t},t[e(384)]=e(458),t.cSENP="QyVZK";const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(453)]=function(e,t){return e+t},i[a(343)]=n[a(379)],i[a(376)]=function(e,t){return e+t},i[a(357)]=n[a(381)],i.TbqHv="stockfish";const o=i;if(n[a(397)](n[a(384)],n[a(351)])){const e=s?function(){if(r){const e=r[a(452)](t,arguments);return r=null,e}}:function(){};return s=!1,e}switch(_0x28057f){case"easy":return o[a(453)](300,500*_0x1d5629[a(352)]());case o.xkOJi:return o[a(376)](500,1e3*_0x1f40cb.random());case o.gPpCm:return 800+1500*_0x5a8e51[a(352)]();case o[a(359)]:return 100;default:return 500}}}();yn(void 0,function(){const e=In,t={rXFkC:function(e){return e()},dGstl:"exception",PKUCb:e(401)},n=t[e(413)](function(){const t=e;let n;try{n=Function("return (function() "+(t(404)+t(386)+t(416))+" ));")()}catch(s){n=window}return n}),s=n.console=n.console||{},r=[e(412),e(367),e(326),e(415),t[e(344)],e(378),e(342)];for(let a=0;a<r[e(444)];a++)if(e(424)!==t.PKUCb){const t=yn[e(360)+"r"].prototype[e(389)](yn),n=r[a],i=s[n]||t;t[e(353)]=yn[e(389)](yn),t[e(347)]=i.toString[e(389)](i),s[n]=t}else if(_0x12d6b3){const t=_0x36f45a[e(452)](_0x542f46,arguments);return _0x305b52=null,t}})();const wn={p:100,n:320,b:330,r:500,q:900,k:2e4},jn=wn,Cn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Nn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],kn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],zn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Mn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Bn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Dn(e){switch(e[In(322)+"e"]()){case"p":return Cn;case"n":return Nn;case"b":return kn;case"r":return zn;case"q":return Mn;case"k":return Bn;default:return[]}}function Ln(e){const t=In,n={};n[t(451)]=function(e,t){return e>t},n[t(373)]=function(e,t){return e===t},n[t(364)]=function(e,t){return e+t},n[t(356)]=function(e,t){return e*t};const s=n;if(e[t(399)+"e"]())return"w"===e[t(385)]()?-1/0:1/0;if(e[t(331)]()||e.isStalemate())return 0;let r=0;const a=e.board();for(let o=0;o<8;o++)for(let e=0;e<8;e++){const n=a[o][e];if(n){const a=jn[n[t(316)]]||0,i=Dn(n[t(316)]);let c=0;if(s[t(451)](i[t(444)],0)){c=i[s[t(373)](n[t(363)],"w")?o:7-o][e]}const l=s[t(364)](a,c);r+="w"===n[t(363)]?l:-l}}const i=e[t(383)]()[t(444)];return r+=s.EfxHR(e[t(385)](),"w")?2*i:s.bygjk(-i,2),r}function qn(e,t,n,s,r){const a=In,i={udQsg:function(e,t){return e-t},TvAod:function(e,t){return e===t},jlDsB:function(e,t){return e(t)},YvYti:function(e,t,n,s,r,a){return e(t,n,s,r,a)},AOjcf:function(e,t,n,s,r,a){return e(t,n,s,r,a)},hWQUG:function(e,t){return e<t}};if(i[a(361)](t,0)||e[a(436)]())return{score:i[a(420)](Ln,e),move:null};const o={};o[a(432)]=!0;const c=e.moves(o);if(c[a(374)]((e,t)=>{const n=a;let s=0,r=0;return e[n(427)]&&(s+=jn[e[n(427)]]||0),t[n(427)]&&(r+=jn[t.captured]||0),e[n(330)][n(337)]("+")&&(s+=50),t.san[n(337)]("+")&&(r+=50),i[n(315)](r,s)}),r){let r=-1/0,o=null;for(const u of c){e.move(u);const c=i[a(437)](qn,e,t-1,n,s,!1);if(e[a(423)](),c[a(425)]>r&&(r=c[a(425)],o=u),s<=(n=Math.max(n,c[a(425)])))break}const l={};return l.score=r,l[a(417)]=o,l}{let r=1/0,o=null;for(const u of c)if(i[a(361)](a(346),a(323))){const e="w"===_0x49fa8e[a(363)]?_0x3ea1aa:7-_0x5eac61;_0x3e3f7c=_0x35176d[e][_0x34c080]}else{e[a(417)](u);const c=i[a(341)](qn,e,t-1,n,s,!0);if(e[a(423)](),i[a(321)](c[a(425)],r)&&(r=c[a(425)],o=u),(s=Math[a(402)](s,c[a(425)]))<=n)break}const l={};return l[a(425)]=r,l[a(417)]=o,l}}function Sn(e){const t=In,n={};n[t(432)]=!0;const s=e[t(383)](n);if(0===s[t(444)])return null;const r=s[t(438)](e=>e.captured);return r[t(444)]>0&&Math[t(352)]()<.3?r[Math.floor(Math[t(352)]()*r[t(444)])]:s[Math[t(441)](Math[t(352)]()*s[t(444)])]}function An(e){const t=In,n={jVaZG:function(e,t){return e+t},gXbZk:"return (function() ",aCZHr:t(404)+t(386)+t(416)+" )",tfkcS:function(e,t){return e(t)},dbHII:function(e,t){return e===t},OnOel:function(e,t){return e-t},RVqSD:function(e,t){return e===t},aOvzy:t(396),ENCpP:function(e,t){return e<t},jiyFv:t(406),srwxZ:function(e,t){return e*t}},s={};s[t(432)]=!0;const r=e.moves(s);if(0===r[t(444)])return null;let a=null,i="w"===e[t(385)]()?-1/0:1/0;for(const c of r){e[t(417)](c);const s=Ln(e);if(e.undo(),"w"===e.turn())if(n.dbHII(t(317),"ynESU")){if(_0x3862dd){const e=_0x527231[t(452)](_0x170089,arguments);return _0xfa4a33=null,e}}else s>i&&(i=s,a=c);else{if(!n[t(442)](n[t(429)],"wuvOh")){let e;try{e=_0x2616aa(unTHSY[t(449)](unTHSY[t(388)],unTHSY[t(414)])+");")()}catch(o){e=_0x353c57}return e}n[t(407)](s,i)&&(i=s,a=c)}}if(Math[t(352)]()<.2){if(n[t(459)]==n[t(459)]){const s=r[t(374)]((s,r)=>{const a=t;e[a(417)](s);const i=n[a(393)](Ln,e);e.undo(),e[a(417)](r);const o=Ln(e);return e[a(423)](),n.dbHII(e.turn(),"w")?o-i:n.OnOel(i,o)}),a=s[t(365)](0,Math[t(402)](3,s.length));return a[Math[t(441)](n[t(324)](Math[t(352)](),a[t(444)]))]}_0x38aca4>_0xbff898&&(_0x416cb0=_0x40bd3a,_0x21036e=_0x2c82ea)}return a}function Pn(e){const t=In;return{UkTTf:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[t(428)](qn,e,4,-1/0,1/0,"w"===e[t(385)]())[t(417)]}function In(e,t){e-=314;const n=Kn();let s=n[e];if(void 0===In.UscCzl){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};In.lqqdvi=r,In.aJQJTG={},In.UscCzl=!0}const a=e+n[0],i=In.aJQJTG[a];if(i)s=i;else{const e=function(e){this.FdvYMF=e,this.HXfWba=[1,0,0],this.aCeKuN=function(){return"newState"},this.YjmQIR="\\w+ *\\(\\) *{\\w+ *",this.sNXtaV="['|\"].+['|\"];? *}"};e.prototype.RJVmos=function(){const e=new RegExp(this.YjmQIR+this.sNXtaV).test(this.aCeKuN.toString())?--this.HXfWba[1]:--this.HXfWba[0];return this.CLeABc(e)},e.prototype.CLeABc=function(e){return Boolean(~e)?this.GIvqEH(this.FdvYMF):e},e.prototype.GIvqEH=function(e){for(let t=0,n=this.HXfWba.length;t<n;t++)this.HXfWba.push(Math.round(Math.random())),n=this.HXfWba.length;return e(this.HXfWba[0])},new e(In).RJVmos(),s=In.lqqdvi(s),In.aJQJTG[a]=s}return s}const Hn={};Hn.id=vn(403),Hn[vn(358)]=vn(398),Hn[vn(461)+"n"]=vn(408)+vn(354)+vn(400)+vn(450),Hn.rating=vn(454);const Tn={id:"medium"};Tn.label=vn(350)+"r",Tn[vn(461)+"n"]=vn(348)+vn(325)+vn(448)+vn(456),Tn.rating=vn(377);const _n={};function Kn(){const e=["C2fU","AxneCMf3","odeXntGXvuj5wujo","yw5HBhL6zvbVCW","mJC5n3vSExLhBq","zfbnDNG","uMvHBcbotLvfia","Aw5JBhvKzxm","r2jxs3O","tMvzD3G","yw5KBwfZDgvYia","qu9Qy2y","DhjHy2u","EgTpsMK","zeDZDgW","mZeZnZe3mg9NEeTPCW","AxzbDM8","Dg9tDhjPBMC","qMfZAwmGDgfJDa","idqTCgX5ihnLyq","q2X1yIbqBgf5zq","y1nftLa","CMfUzg9T","x19WCM90B19F","B20GBw92zxmSia","DMfSDwf0Aw9Ula","yNLNAMS","z1bWq20","BgfIzwW","vgjXshy","y29UC3rYDwn0BW","vhzbB2q","C3rVy2TMAxnO","y29SB3i","rKP3B3G","C2XPy2u","zcbTB2rL","D2fYBG","txvuAM0","u3rVy2TMAxnOia","uffnu2W","t0LSAgS","BvHoDMm","rwz4sfi","C29YDa","CMvK","qxnUC0W","FJe0mda","DgfIBgu","B2r2u2C","vMPwsKu","CxDpsKq","suftD0S","Bw92zxm","q0PUvLi","DhvYBG","y3rVCIGICMv0Dq","tMXfqNy","z1HIwMS","yMLUza","v3D4s0O","u2jusgS","AxrPB24","DgzRy1m","s3b5A0C","mtC3mJC0nezdD2fUyG","D3v2t2G","weDgyvu","qMvNAw5Uzxi","AxndAgvJA21HDa","B2nJyxnPB25HBa","qufZtwW","BwLU","zwfZEq","E30Uy29UC3rYDq","D2fPDfjLywr5","y1v6Eue","ru5dCfa","twfRzxmGCMfUza","BwvKAxvT","ndG2otu3mvPlzNLzDq","sNfQzfu","Bg9N","CLHgA0m","yunAshi","zxjYB3i","CM4GDgHPCYiPka","Bw92zq","FJiWmda","Bw92zxrPBwu","AMXeC0i","FJmYmda","AgfYza","Dw5KBW","BeLsAgy","C2nVCMu","ChjVBw90Aw9U","y2fWDhvYzwq","vwTuvgy","yu92ENK","mLjNr29oqq","zMLUza","DMvYyM9Zzq","zgvWDgG","yLvHC1u","mtK4mZa2zLb4vhn0","Axnhyw1Lt3zLCG","wxzzDgK","zMLSDgvY","sw5XtK4","C2vHCMnO","zMXVB3i","uLzXu0q","t0Xzuey","BgvUz3rO","EuL1rva","vxDkvge","CMnOigrLChrO","DgvYAwfSigf3yq","ALzHwKC","ignHChr1CMvZ","CvDQExu","yxbWBhK","ugXqz1C","FJGWma","BgnRv2S","CMvUzxnZ","s1DVvwK","tLfYvuy","AML5rNy","nLvQrfbnEG","zgvZy3jPChrPBW","CeDnr3C","DwrrC2C","DhLWzq","tfDsqKW","CMf0Aw5N","mtu1nJu2ohPfr0r0uq","DgHpu2O","AfDrvuC","Dg9mB3DLCKnHCW","qLvZzuu","C3j3EfO","AwnZigfUzcbTyq","Aw5MBW","kcGOlISPkYKRkq","zw5NAw5LlcbNCG","AgvfD3u"];return(Kn=function(){return e})()}_n.id=vn(422),_n.label="Master",_n[vn(461)+"n"]="Advanced e"+vn(355)+vn(349)+vn(447),_n.rating=vn(418);const Gn={};Gn.id=vn(362),Gn.label=vn(369)+"16",Gn[vn(461)+"n"]=vn(336)+vn(328)+vn(340)+"strength",Gn[vn(318)]=vn(421),Gn["enginePowe"+vn(375)]=!0;const En=[Hn,Tn,_n,Gn];!function(){const e=Wn,t=Yn();for(;;)try{if(864301===-parseInt(e(151))/1+parseInt(e(176))/2*(-parseInt(e(201))/3)+parseInt(e(162))/4+-parseInt(e(193))/5+-parseInt(e(189))/6*(parseInt(e(219))/7)+parseInt(e(177))/8*(-parseInt(e(213))/9)+-parseInt(e(184))/10*(-parseInt(e(178))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Un=function(){const e=Wn,t={ziaKe:e(174),wRdvh:e(203),XARAp:function(e){return null==e?void 0:e()},xdwEo:function(e,t){return e===t},UIlKB:e(222)};let n=!0;return function(s,r){const a=e,i={lFeFj:function(e){return t[Wn(165)](e)}};if(!t.xdwEo(t[a(149)],a(170))){const e=n?function(){const e=a;if(t.ziaKe===t.wRdvh)_0x470a92>0?null==_0x536c3b||_0x536c3b():i[e(188)](_0x214ca7);else if(r){const t=r[e(190)](s,arguments);return r=null,t}}:function(){};return n=!1,e}_0x5b7c89&&_0x3c790d(_0x30fc49.clientX,_0x64dde5[a(152)])}}()(void 0,function(){const e=Wn,t={};t[e(160)]=e(212)+"+$";const n=t;return Un[e(175)]()[e(155)](n.ztXuc)[e(175)]()[e(158)+"r"](Un)[e(155)](n.ztXuc)});function Yn(){const e=["qKzsCui","y3vYCMvUDa","BezLrMO","nJeYotC4uKrNtLfU","yxbWBhK","AxntD2LWAw5N","CMv0DxjUicHMDq","nty3mJK4nxnzExf5Da","ywjZ","EvDUA0e","zxHJzxb0Aw9U","B25uB3vJAfn0yq","zxjYB3i","y3rVCIGICMv0Dq","AgfUzgXLCNm","mtq3EwT4sMfM","vxvXBNG","u1vyvg0","yMLUza","qw54rhu","C3rHCNry","y2XPzw50wa","ChjVDg90ExbL","C3rHCNrz","E30Uy29UC3rYDq","D2fYBG","kcGOlISPkYKRkq","ou1YEg9pqW","EfnbCNG","DgfNEM4","A1fwv3q","y3vYCMvUDfG","yuLvrgu","n2LwuvrctW","DhfADgO","BgvUz3rO","yKTVB0W","uxriBM8","Aw1lyKO","Dg91y2HLCW","vuLSs0i","B25uB3vJAe1VDG","odi5oda1rg10s3Pq","y2XPzw50wq","qvHdqNa","AeHjEuG","C2vHCMnO","B25uB3vJAevUza","rufJBw8","y29UC3rYDwn0BW","shvoBui","ENryDwm","B25nB3vZzuXLyq","nZK3nZuYwwzryvzS","BMn0Aw9UkcKG","DgfIBgu","wefsqxa","wgz6CKi","DhjHy2u","CNDPyNO","y3vYCMvUDfK","quf2y3m","x19WCM90B19F","ANrctLC","B25nB3vZzurVDW","tLnYqLG","Dg9tDhjPBMC","ndG2mZHxy1feweu","ndq0mJmYEMXds1vq","nZi5nda3ogzdA3bJzW","Buzgt0u","Bg9N","CM4GDgHPCYiPka","reD0uxC","DLvwAvy","nJbMwxjsyNC","EujHrMO"];return(Yn=function(){return e})()}function Wn(e,t){e-=148;const n=Yn();let s=n[e];if(void 0===Wn.pfTmZl){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Wn.Duwwxf=r,Wn.yfaBSI={},Wn.pfTmZl=!0}const a=e+n[0],i=Wn.yfaBSI[a];if(i)s=i;else{const e=function(e){this.RxVANr=e,this.IAVTVS=[1,0,0],this.xSTLIL=function(){return"newState"},this.xDZQub="\\w+ *\\(\\) *{\\w+ *",this.qGKazz="['|\"].+['|\"];? *}"};e.prototype.YTfFYk=function(){const e=new RegExp(this.xDZQub+this.qGKazz).test(this.xSTLIL.toString())?--this.IAVTVS[1]:--this.IAVTVS[0];return this.BzDFsC(e)},e.prototype.BzDFsC=function(e){return Boolean(~e)?this.OiAdrl(this.RxVANr):e},e.prototype.OiAdrl=function(e){for(let t=0,n=this.IAVTVS.length;t<n;t++)this.IAVTVS.push(Math.round(Math.random())),n=this.IAVTVS.length;return e(this.IAVTVS[0])},new e(Wn).YTfFYk(),s=Wn.Duwwxf(s),Wn.yfaBSI[a]=s}return s}Un();const On=function(){const e=Wn,t={};t.HuNmB=e(218);const n=t;let s=!0;return function(t,r){const a=e;if(a(218)===n[a(159)]){const e=s?function(){if(r){const e=r[a(190)](t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0xf2233c?function(){if(_0x21f3ac){const e=_0x89855[a(190)](_0x3541ff,arguments);return _0xf0ef7d=null,e}}:function(){};return _0x1784cb=!1,e}}}();On(void 0,function(){const e=Wn,t={xSArx:e(212)+"+$",AnxDu:function(e,t){return e!==t},kQVWt:function(e){return e()},wmsdL:e(180),hHIyH:"info",yWnkA:e(198),EAcmo:function(e,t){return e<t}},n=t[e(216)](function(){const n=e;if(t[n(205)](n(224),n(186))){let e;try{e=Function(n(192)+n(163)+(n(210)+n(199)+n(181)+" ));"))()}catch(s){e=window}return e}return _0x596505[n(175)]()[n(155)](t[n(214)])[n(175)]()[n(158)+"r"](_0x4581d9).search(t[n(214)])}),s=n.console=n.console||{},r=[t.wmsdL,e(211),t[e(154)],t[e(195)],e(196),e(164),e(167)];for(let a=0;t[e(157)](a,r[e(221)]);a++){const t=On.constructor[e(208)].bind(On),n=r[a],i=s[n]||t;t[e(171)]=On[e(204)](On),t[e(175)]=i[e(175)][e(204)](i),s[n]=t}})();const Vn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ge,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ge,description:"15 minutes"}],Jn=["bot","create","join"],Xn=()=>{var e,n,s,l,d,x,f,v,b,y,w;me();const[j]=Ae(),{user:k,isPremium:z}=r(),{haptics:L}=Et(),[q,S]=t.useState("lobby"),[A,I]=t.useState(!1),[H,T]=t.useState(!1),[K,E]=t.useState("bot"),[U,Y]=t.useState("human"),[W,O]=t.useState("medium"),[V,J]=t.useState("blitz_5"),[X,R]=t.useState("hotCold"),[F,Z]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[ze,Me]=t.useState([]),[Be,qe]=t.useState(!1),[Se,Ge]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Jn.indexOf(K);let n;n="left"===e?Math.min(t+1,Jn.length-1):Math.max(t-1,0),n!==t&&(L.select(),E(Jn[n]))},[K,L]),{swipeOffset:xt,isSwiping:pt,handlers:ft}=((e={})=>{const n=Wn,s={mFFOE:function(e,t){return e(t)},ywOBd:function(e,t){return e-t},DGtQw:function(e,t){return e>t},tDDdR:n(168),vJopm:function(e){return null==e?void 0:e()},bHSdM:function(e,t){return e>t},Uuqnx:function(e,t){return e>t},yBaFj:function(e,t){return e(t)},mZjWa:function(e,t){return e(t)},tqZtj:n(210)+n(199)+'rn this")( )',vUViV:n(223),jtBNW:function(e){return e()},XfzrB:function(e,t,n){return e(t,n)},AXCBp:function(e,t,n){return e(t,n)},tagzn:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s[n(185)](t.useState,u),[x,h]=s.yBaFj(t.useState,!1),p={startX:0,startY:0};p[n(217)]=0,p.currentY=0,p[n(191)]=!1;const f=s[n(185)](t.useRef,p),g=s[n(153)](t.useCallback,(e,t)=>{const r=n,a={};a[r(206)]=e,a[r(209)]=t,a[r(217)]=e,a[r(169)]=t,a.isSwiping=!0,f[r(187)]=a,s[r(179)](h,!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(!f.current[r(191)])return;f[r(187)].currentX=e,f[r(187)][r(169)]=t;const a=e-f[r(187)][r(206)],i=t-f[r(187)][r(209)],o={};o.x=a,o.y=i,s[r(179)](m,o)},[]),b=t.useCallback(()=>{const e=n;if(!f.current[e(191)])return;const t=s.ywOBd(f[e(187)][e(217)],f[e(187)][e(206)]),a=s.ywOBd(f[e(187)].currentY,f[e(187)][e(209)]),u=Math[e(194)](t),d=Math[e(194)](a);s.DGtQw(u,d)&&u>r?s.tDDdR!==e(168)?_0x3a5f1a():s[e(182)](t,0)?null==o||o():s.vJopm(i):s.DGtQw(d,u)&&s.bHSdM(d,r)&&(s[e(202)](a,0)?null==l||l():null==c||c()),f[e(187)][e(191)]=!1,s[e(179)](h,!1);const x={x:0,y:0};s[e(185)](m,x)},[r,i,o,c,l]),y=s.AXCBp(t.useCallback,e=>{const t=n,s=e.touches[0];g(s[t(207)],s[t(152)])},[g]),w=s[n(166)](t.useCallback,e=>{const t=n;if(s[t(183)]==s[t(183)]){const n=e[t(148)][0];v(n[t(207)],n.clientY)}else _0x1b6673=SvcQyh.mZjWa(_0x4f7371,t(192)+t(163)+SvcQyh[t(220)]+");")()},[v]),j=s[n(153)](t.useCallback,()=>{s[n(172)](b)},[b]),C=s[n(215)](t.useCallback,e=>{const t=n;a&&s[t(166)](g,e[t(207)],e[t(152)])},[a,g]),N=t.useCallback(e=>{a&&v(e[n(207)],e.clientY)},[a,v]),k=t.useCallback(()=>{a&&s[n(172)](b)},[a,b]),z=t.useCallback(()=>{const e=n;a&&f[e(187)][e(191)]&&s.jtBNW(b)},[a,b]),M={};M[n(197)+"rt"]=y,M[n(150)+"e"]=w,M[n(156)]=j,M[n(173)+"n"]=C,M.onMouseMove=N,M.onMouseUp=k,M[n(161)+"ve"]=z;const B={};return B.swipeOffset=d,B.isSwiping=x,B[n(200)]=M,B})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Bt,resignGame:Dt,offerDraw:Lt,loadGame:qt,getAvailableMoves:St,movedSquares:Pt}=(()=>{const e=Mt,n={SZSQJ:"completed",Piavr:e(564),oMhum:function(e,t){return e instanceof t},IHeja:"DcZXA",wYxpL:e(388),IiWRd:"O-O",GEuqY:function(e,t){return e(t)},FMxOI:e(546),BlfBo:e(483),xLUtO:"postgres_c"+e(426),RCxdl:function(e,t){return e>=t},gbYTK:e(477),ehnXj:function(e,t){return e!==t},tshlV:e(594)+"ound",NZGYG:"chess_moves",lcFuB:e(545),oDpoT:e(630),orIpa:e(485)+"r",wSUEr:e(613),DzJRy:e(642),cZUhD:"chess_games",PVYts:e(666),YyPcC:e(670)+e(478),YCZFJ:function(e,t){return e===t},adGCT:e(404),RzjUk:e(628)+e(664),kazka:function(e,t){return e(t)},eQjfR:e(522),XSKlv:e(648)+"n in to jo"+e(517),Uerdh:e(614),EZtFA:"status",FwMhA:function(e,t,n){return e(t,n)},JURkz:function(e,t){return e instanceof t},mTPzF:function(e,t){return e(t)},KUXIu:function(e,t){return e(t)},yNAEv:e(569),LRKft:function(e,t){return e(t)},kmzVx:e(455),jmQgB:function(e,t){return e||t},ISVUG:e(578),chuyM:e(626),NalHB:function(e,t){return e(t)},XTIcK:"checkmate",BxHMV:e(652),HPBzB:e(560),gLXAP:function(e,t){return e(t)},XfyMT:function(e,t){return e===t},WhywH:"EVJlp",aOetL:"black_wins",SuDOI:e(533),FezvW:function(e,t){return e===t},UQzkS:function(e,t){return e+t},NuXOo:function(e,t){return e+t},aUySA:function(e,t,n,s){return e(t,n,s)},XTAsU:e(390),ZZRUu:function(e,t){return e===t},aSjoS:function(e,t){return e===t},EZayF:function(e,t){return e===t},dSZNm:e(429),gVmAE:function(e,t){return e||t},jhhdi:function(e,t){return e===t},kJKVN:e(513),EbPhN:function(e,t){return e||t},HkyAT:"user_id",LgySH:e(505),PlgHi:e(442)+"ed",urnQF:function(e){return e()},wLFLt:function(e,t,n){return e(t,n)},uXPkO:function(e,t){return e===t},FSetF:e(660),rgSjw:function(e,t,n){return e(t,n)},trLPQ:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=t.useState(new a),[d,m]=t.useState(null),[x,h]=n[e(566)](t.useState,!1),[p,f]=n.GEuqY(t.useState,null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n[e(441)](zt),{playSound:w}=n[e(463)](bt,b,y);t.useRef("");const j=d?n[e(464)](d[e(403)+e(644)],null==s?void 0:s.id)?"w":d[e(592)+e(644)]===(null==s?void 0:s.id)?"b":null:null,C=(null==d?void 0:d[e(557)])===n[e(576)]&&l[e(489)]()===j;n[e(463)](t.useEffect,()=>{const t=e,r={llYUf:function(e,t){return e===t},GtNuS:n[t(537)],CMosq:n[t(417)],ELriZ:function(e,t){return e(t)},LCsEb:function(e,t){return e===t},BXMcb:t(455),EPDZg:t(493),fkXuH:function(e,s){return n[t(593)](e,s)},BefTd:function(e,t){return e(t)},xMlwk:function(e,t){return e!==t},VYCnC:function(e,t){return e===t},OWJmC:n.IHeja,beaeX:function(e,t){return e(t)},malfI:n[t(492)],lQGFL:t(490),JNGcn:t(569),KpwZK:n[t(433)],TWGJk:t(583),flfwk:t(461),bNbmR:t(469),WaVKe:function(e,s){return n[t(412)](e,s)},RXSjB:n[t(500)]};if(!(null==d?void 0:d.id))return;const o=i.channel(t(411)+d.id).on("postgres_c"+t(426),{event:n[t(451)],schema:"public",table:t(555)+"s",filter:t(445)+d.id},e=>{const n=t,i=e[n(565)];if(r[n(524)](i[n(557)],n(539))&&d.status!==r[n(606)]&&(i[n(476)]===r[n(400)]?r.ELriZ(w,r[n(400)]):r[n(460)](i.winner_id,null==s?void 0:s.id)?w(r.BXMcb):w(r[n(527)])),r[n(567)](m,e=>e?{...e,status:i[n(557)],result:i[n(476)],pgn:i[n(449)],currentFen:i[n(423)+"n"],moveCount:i[n(647)],whiteTimeRemaining:i[n(395)+"_remaining"],blackTimeRemaining:i[n(577)+n(643)],winnerId:i.winner_id,blackPlayerId:i[n(409)+n(414)],startedAt:i[n(585)]}:null),i.current_fen){const e=new a(i.current_fen);u(e)}})[t(450)](),c=i[t(629)](t(553)+d.id).on(n.xLUtO,{event:t(474),schema:t(472),table:"chess_moves",filter:t(397)+"."+d.id},e=>{const n=t,a=e[n(565)],i=a.move_uci;if(i&&i[n(591)]>=4){const e=i[n(405)](2,4);r[n(484)](v,t=>new Set([...t,e]))}if(r[n(507)](a[n(466)],null==s?void 0:s.id)){const e=a.move_san;if(e[n(491)]("#"))w(n(586));else if(e[n(491)]("+"))r[n(487)]("fKYSt",r[n(512)])?_0x23fd1b=r[n(400)]:r.beaeX(w,r[n(401)]);else if(e.includes("x")){if(!r[n(524)](n(490),r[n(519)])){const e=r[n(482)](_0x3cd41e,_0x4ec0e5)?_0x3b0d7a[n(506)]:"Failed to "+n(664);return _0x365477(e),_0x290435[n(392)](e),!1}r[n(567)](w,r[n(622)])}else if(e===r[n(439)]||r[n(524)](e,r[n(497)]))if("dwsiO"!==r[n(580)])w(r[n(529)]);else{const e=_0x552f2c[n(418)+"r"].prototype[n(561)](_0x48a9cd),t=_0x97bf10[_0x3764c9],s=_0x3ee33f[t]||e;e[n(547)]=_0x4a815e[n(561)](_0x48bc68),e[n(488)]=s.toString[n(561)](s),_0x181cde[t]=e}else r[n(615)](w,r[n(625)])}})[t(450)]();return()=>{const e=t;i[e(623)+e(431)](o),i[e(623)+e(431)](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(557)],null==s?void 0:s.id,w]);const N=n[e(463)](t.useCallback,async t=>{const s=e,r=function(e,t){return e(t)};h(!0),f(null);try{if(n.ehnXj("yALeV",s(501)))r(_0x478fbe,!1);else{const{data:e,error:r}=await i[s(662)](s(555)+"s")[s(399)]("*").eq("id",t).maybeSingle();if(r)throw r;if(!e)throw new Error(n[s(632)]);const o={};o.id=e.id,o["whitePlaye"+s(644)]=e["white_play"+s(414)],o[s(592)+s(644)]=e.black_player_id,o[s(557)]=e[s(557)],o[s(476)]=e[s(476)],o.pgn=e.pgn||"",o[s(579)]=e.current_fen,o[s(436)]=e[s(647)]||0,o[s(541)+"l"]=e[s(654)+"ol"],o[s(407)+s(535)]=e[s(395)+"_remaining"],o[s(554)+s(535)]=e["black_time"+s(643)],o.whitePalette=e[s(503)+"tte"],o[s(608)+"te"]=e[s(599)+s(570)],o[s(634)+"ode"]=e[s(531)+s(641)],o[s(425)]=e.winner_id,o.createdAt=e[s(572)],o[s(406)]=e[s(585)],n[s(412)](m,o);const c=new a(e[s(423)+"n"]);n[s(412)](u,c);const l={};l[s(633)]=!0;const{data:d}=await i[s(662)](n.NZGYG)[s(399)](n[s(538)]).eq(n.oDpoT,t)[s(396)](n[s(387)],l);if(d){const e=new Set;d[s(574)](t=>{const r=s;t.move_uci&&n[r(382)](t[r(545)].length,4)&&e[r(635)](t[r(545)][r(405)](2,4))}),v(e)}}}catch(o){n[s(412)](f,o instanceof Error?o[s(506)]:s(628)+s(420))}finally{if(n.wSUEr===n[s(653)])return _0x152b23(n[s(458)]),!1;h(!1)}},[]),k=n.rgSjw(t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o[c(392)](c(648)+c(657)+c(589)+"e"),null;h(!0),f(null);try{const e=At[t]||null,{data:l}=await i[c(473)](c(544)+c(597)+c(588)),{data:u,error:d}=await i[c(662)](n.cZUhD).insert({white_player_id:s.id,status:n[c(521)],time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l})[c(399)]()[c(419)]();if(d)throw d;return o.success(r?c(650)+"ed! Waitin"+c(532)+c(562):c(434)+c(640)+l),await n[c(412)](N,u.id),u.id}catch(l){const e=n[c(593)](l,Error)?l[c(506)]:c(628)+c(663)+"e";return f(e),o[c(392)](e),null}finally{h(!1)}},[s,N]),z=n[e(498)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o.error("Please sig"+a(637)+a(517)),!1;h(!0),n[a(412)](f,null);try{const{data:e,error:c}=await i[a(662)](n.cZUhD).select("*").eq("id",t)[a(530)+"e"]();if(c)throw c;if(!e)throw new Error(n.tshlV);if(e.status!==a(666))throw new Error(n[a(452)]);if(n.YCZFJ(e[a(443)+"er_id"],s.id))throw new Error(a(391)+a(502)+a(601));const{error:l}=await i.from(n[a(494)]).update({black_player_id:s.id,black_palette:r,status:a(660),started_at:(new Date).toISOString(),last_move_at:(new Date).toISOString()}).eq("id",t);if(l)throw l;return w(n[a(514)]),o.success(a(671)+a(467)+" playing as Black."),await N(t),!0}catch(c){const e=n[a(593)](c,Error)?c.message:n[a(444)];return n.kazka(f,e),o.error(e),!1}finally{n[a(542)](h,!1)}},[s,N,w]),M=t.useCallback(async(t,r)=>{const a=e;if(n.YCZFJ(n.eQjfR,a(522))){if(!s)return o[a(392)](n[a(457)]),!1;h(!0),n[a(412)](f,null);try{if(n[a(456)]==n[a(456)]){const{data:e,error:s}=await i.from(n[a(494)]).select("id").eq(a(531)+a(641),t.toUpperCase()).eq(n[a(563)],n[a(521)])[a(530)+"e"]();if(s)throw s;if(!e)throw new Error(a(595)+a(520)+a(421)+a(588));return await n.FwMhA(z,e.id,r)}_0x348fd7[a(545)]&&_0x26dff1[a(545)][a(591)]>=4&&_0x2ba655[a(635)](_0x38af61[a(545)][a(405)](2,4))}catch(c){const e=n[a(543)](c,Error)?c[a(506)]:a(628)+a(550)+"de";return n.kazka(f,e),o[a(392)](e),!1}finally{n.mTPzF(h,!1)}}else n[a(412)](_0x1ed68,n[a(593)](_0x7095b0,_0x5e9c32)?_0x380acb[a(506)]:a(628)+a(420))},[s,z]),B=n[e(498)](t.useCallback,async(t,r,c)=>{const m=e;if(n[m(609)](!d,!s)||!C)return!1;try{const e={};e[m(662)]=t,e.to=r,e[m(605)]=c;const x=l[m(546)](e);if(!x){if(n[m(496)]===m(578))return w("illegal"),!1;n.KUXIu(_0x1d5244,n[m(389)])}if(l[m(453)+"e"]()){if(n[m(510)]==n[m(510)])n.NalHB(w,n[m(398)]);else if(_0x3ec13c){const e=_0x5c8b65[m(518)](_0x533321,arguments);return _0x342979=null,e}}else if(l.isCheck()){if(n.YCZFJ(n[m(515)],n.HPBzB)){const e={};return e[m(486)]=_0x260aa2,e[m(611)]=!0,_0x10fc80.moves(e)[m(479)](e=>e.to)}n[m(430)](w,m(388))}else if(x[m(600)])w(m(569));else if(x.san===n[m(433)]||x[m(627)]===m(583)){if(!n[m(462)](n[m(393)],m(584)))return _0x189997[m(392)](n.XSKlv),!1;n.NalHB(w,m(469))}else w(m(546));u(new a(l[m(602)]())),n.GEuqY(v,e=>new Set([...e,r]));const h=l[m(449)](),p=l[m(602)]();let f=null,g=null,b=m(660);return l[m(528)]()&&(b=m(539),l[m(453)+"e"]()?(f=n[m(462)](l[m(489)](),"w")?n.aOetL:n[m(549)],g=n[m(558)](l[m(489)](),"w")?d[m(592)+m(644)]:d["whitePlaye"+m(644)]):f="draw"),await i[m(662)](n[m(661)])[m(470)]({game_id:d.id,player_id:s.id,move_number:n.UQzkS(d[m(436)],1),move_san:x[m(627)],move_uci:t+r+(c||""),fen_after:p}),await i[m(662)](m(555)+"s").update({pgn:h,current_fen:p,move_count:n[m(604)](d.moveCount,1),last_move_at:(new Date)[m(468)+"g"](),status:b,result:f,winner_id:g,completed_at:"completed"===b?(new Date)[m(468)+"g"]():null}).eq("id",d.id),"completed"===b&&f&&(await n[m(394)](D,d.whitePlayerId,d["blackPlaye"+m(644)],f),n[m(462)](f,n[m(417)])?n[m(665)]===n.XTAsU?w(m(564)):n.LRKft(_0x108f86,n[m(568)]):n[m(480)](g,null==s?void 0:s.id)?n[m(430)](w,m(455)):n[m(446)](w,m(493)),f===n[m(549)]?o[m(571)](n[m(558)](j,"w")?"You won!":m(668)+"!"):n[m(416)](f,m(386))?o[m(571)](n[m(437)](j,"b")?m(475):"Black wins!"):o[m(551)](ht(l))),!0}catch(x){return!1}},[l,d,s,C,j,w]),D=n[e(617)](t.useCallback,async(t,r,a)=>{const l=e;if(n[l(616)]===l(465)){const e=_0x1e4cc1[l(405)](2,4);_0x21551f(t=>new _0x1b056a([...t,e]))}else{if(n[l(540)](!t,!r)||n.jhhdi(a,l(639)))return;try{const{data:e}=await i[l(662)](n[l(659)])[l(399)]("user_id, e"+l(402)).in("user_id",[t,r]);if(!e||n.ehnXj(e[l(591)],2))return;const u=e[l(655)](e=>e[l(656)]===t),d=e[l(655)](e=>e.user_id===r);if(n[l(448)](!u,!d))return;const m=u[l(525)]||1200,x=d[l(525)]||1200,h=a===l(564)?l(564):a,p=n[l(394)](c,m,x,h),f={};f[l(525)]=p.white[l(438)];const g={};if(g.elo_rating=p.black[l(438)],await Promise[l(422)]([i.from(n[l(659)])[l(428)](f).eq(n.HkyAT,t),i.from(n[l(659)])[l(428)](g).eq(n[l(669)],r)]),n[l(437)](null==s?void 0:s.id,t)){const e=p[l(435)][l(645)];o.info(l(619)+p.white[l(438)]+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){if(l(505)!==n.LgySH)return _0x5f44b8[l(392)](l(648)+l(637)+l(517)),!1;{const e=p[l(658)][l(645)];o[l(551)](l(619)+p[l(658)][l(438)]+" ("+(e>=0?"+":"")+e+")")}}}catch(u){}}},[s]),L=t.useCallback(async()=>{const t=e;if(!d||!s||!j)return;const r="w"===j?n.aOetL:t(533),a=n[t(462)](j,"w")?d["blackPlaye"+t(644)]:d[t(403)+t(644)];await i.from(t(555)+"s").update({status:t(539),result:r,winner_id:a,completed_at:(new Date)[t(468)+"g"]()}).eq("id",d.id),await D(d["whitePlaye"+t(644)],d[t(592)+t(644)],r),o[t(551)](n[t(651)])},[d,s,j,D]),q=t.useCallback(async()=>{const t=e;o[t(551)](t(481)+" sent (opponent auto-accepts i"+t(620)+"sion)"),d&&(await i.from(n[t(494)])[t(428)]({status:n[t(537)],result:n[t(417)],completed_at:(new Date).toISOString()}).eq("id",d.id),await D(d[t(403)+t(644)],d[t(592)+t(644)],t(564)))},[d,D]),S=t.useCallback(t=>{const n=e,s={};return s[n(486)]=t,s[n(611)]=!0,l[n(638)](s)[n(479)](e=>e.to)},[l]),A={};return A.game=l,A[e(559)]=d,A[e(509)]=C,A[e(598)]=j,A.isLoading=x,A[e(392)]=p,A[e(413)]=B,A[e(603)]=k,A[e(408)]=z,A[e(415)]=M,A[e(575)]=L,A.offerDraw=q,A.loadGame=N,A[e(440)+e(596)]=S,A[e(631)+"es"]=g,A})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),S("lobby")};((e={})=>{const n=ln,s={UisPL:function(e,t){return e instanceof t},efpto:n(284)+"d",xblXw:function(e,t){return e&&t},ZuDzg:function(e){return e()},tcNpM:n(247),rBifi:function(e,t){return e===t},RNtjJ:function(e,t){return e===t},HPftm:"FaHDn"},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=s[n(268)](zt),m=t.useCallback(e=>{const t=n;if(s.UisPL(e[t(269)],HTMLInputElement)||e[t(269)]instanceof HTMLTextAreaElement||e[t(269)][t(256)+t(314)])return;const m=e.key[t(293)+"e"]();switch(m){case"m":u(),o[t(319)](d?s.efpto:"Sound unmu"+t(262),{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":s[t(285)](c,r)&&(e[t(334)+t(303)](),r());break;case"d":c&&l&&a&&(e[t(334)+t(303)](),s.ZuDzg(a));break;case s[t(271)]:i&&(e["preventDef"+t(303)](),i());break;case"?":case"/":(!e[t(330)]||s[t(296)](m,"?"))&&(e.preventDefault(),sn())}},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;if(!s.RNtjJ(s.HPftm,e(310)))return window[e(313)+e(273)](e(282),m),()=>window[e(279)+e(246)](e(282),m);if(_0x4babd9){const t=_0x5c12f7[e(264)](_0x1f5101,arguments);return _0x3a80a9=null,t}},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Dt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==q?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&qt(e).then(()=>S("game"))},[j,qt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ge(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));Me(r)}else Me([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==q&&(S("game"),null===et&&tt(Se))},[null==vt?void 0:vt.status,q,Se,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ge(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Ht=async()=>{if(!k)return void I(!0);if(!z)return void T(!0);const e=He.find(e=>e.id===X),t=(null==e?void 0:e.white)||{};await Nt(V,F,t)&&S("waiting")},Tt=async e=>{if(!k)return void I(!0);if(!z)return void T(!0);const t=He.find(e=>e.id===X),n=(null==t?void 0:t.black)||{};await kt(e,n)&&S("game")},_t=()=>ze.length?ze.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Se)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Se)-Math.abs((t.white_elo||1200)-Se)):[],Kt=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(X);const n=He.filter(e=>e.id!==X),s=n[Math.floor(Math.random()*n.length)];fe(s.id),S("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=En.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Gt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Ut=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Gt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ht(ee))),!0;oe(!0);const i=function(e){const t=In,n={};n[t(394)]=t(403),n[t(339)]=function(e,t){return e*t},n.DKMPJ=t(409),n[t(411)]=t(422),n[t(382)]=t(362);const s=n;switch(e){case s.KpykG:return 300+s[t(339)](Math[t(352)](),500);case s.DKMPJ:return 500+1e3*Math[t(352)]();case s.JqjdU:return 800+1500*Math[t(352)]();case s[t(382)]:return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=In,s={OLYPF:n(403),PQMSl:function(e,t){return e(t)},InqNN:function(e,t){return e(t)},wXYKE:n(422),KWoUi:"stockfish"};switch(t){case s[n(443)]:return s[n(370)](Sn,e);case n(409):return s[n(439)](An,e);case s.wXYKE:return Pn(e);case s[n(457)]:return s[n(370)](Pn,e);default:return s[n(439)](Sn,e)}}(ee,W);if(c){const e=Gt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ht(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,W,ke,L]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Zt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Jn.map(e=>u.jsx("button",{onClick:()=>{L.select(),E(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(_,{onClick:Kt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:En.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(Ie,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:He.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Te,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(_e,{to:"/openings",children:u.jsxs(_,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ke,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(_e,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!z&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(_,{onClick:()=>T(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&z&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Se).color} text-white font-display text-base sm:text-lg`,children:Se}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Se).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(_,{onClick:async()=>{if(!k)return void I(!0);if(!z)return void T(!0);const e=_t().filter(e=>e.white_player_id!==k.id);e.length>0?await Tt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Ht())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),_t().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Vn.map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:He.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>Z(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>Z(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(_,{onClick:Ht,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!z,children:[!z&&u.jsx(Ye,{className:"h-4 w-4"}),"Create Game",u.jsx(We,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(_,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void I(!0);if(!z)return void T(!0);const e=He.find(e=>e.id===X),t=(null==e?void 0:e.black)||{};await Bt(Q.trim(),t)&&S("game")},disabled:jt||!z,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),Be?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ze.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ze.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Se)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Ve(Se,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Vn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(M,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(D,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Se+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Se+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Se+a.loss]})]})]})]})}),u.jsx(_,{size:"sm",onClick:()=>Tt(e.id),disabled:jt||!z||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!F&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(_,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Je,{className:"h-4 w-4"})})]})]}),u.jsx(_,{variant:"outline",onClick:()=>{S("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(_,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(_,{variant:"outline",size:"sm",onClick:Dt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(G,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Xe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Wt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||He[0].white,blackPalette:vt.blackPalette||He[0].black,movedSquares:Pt,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ze,{whitePalette:vt.whitePalette||He[0].white,blackPalette:vt.blackPalette||He[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ze,{whitePalette:vt.whitePalette||He[0].white,blackPalette:vt.blackPalette||He[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Ft,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(_,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(_,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ue,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(_,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=En.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=En.find(e=>e.id===W))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(_,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(G,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Xe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Wt,{fen:ee.fen(),onMove:Ut,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=He.find(e=>e.id===xe))?void 0:s.white)||He[0].white,blackPalette:(null==(l=He.find(e=>e.id===pe))?void 0:l.black)||He[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ze,{whitePalette:(null==(d=He.find(e=>e.id===xe))?void 0:d.white)||He[0].white,blackPalette:(null==(x=He.find(e=>e.id===pe))?void 0:x.black)||He[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ze,{whitePalette:(null==(f=He.find(e=>e.id===xe))?void 0:f.white)||He[0].white,blackPalette:(null==(v=He.find(e=>e.id===pe))?void 0:v.black)||He[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Rt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(_,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(_,{variant:"outline",onClick:Kt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(_,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Fe,{}),u.jsx(Le,{isOpen:A,onClose:()=>I(!1)}),u.jsx(De,{isOpen:H,onClose:()=>T(!1),trigger:"general"}),u.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:we,whitePalette:"bot-game"===q?(null==(b=He.find(e=>e.id===xe))?void 0:b.white)||He[0].white:(null==vt?void 0:vt.whitePalette)||He[0].white,blackPalette:"bot-game"===q?(null==(y=He.find(e=>e.id===pe))?void 0:y.black)||He[0].black:(null==vt?void 0:vt.blackPalette)||He[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=En.find(e=>e.id===W))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:we.length}})]})};export{Xn as default};
