import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as D,ag as z,ai as B,y as L,bF as q,bG as A,b6 as S,ae as P,bH as H,ah as E,bI as K,B as I,bJ as _,bK as T,bL as G,bM as W,bN as U,bO as Y,bP as O,bQ as X,bR as J,bS as F,bT as V,bU as R,bV as Z,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as De,an as ze,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Se,H as Pe,P as He,ca as Ee,b3 as Ke,bs as Ie,be as _e,cb as Te,aP as Ge,cc as We,d as Ue,b2 as Ye,a9 as Oe,cd as Xe,ce as Je,cf as Fe,al as Ve,au as Re}from"./index-C3fhkH_G.js";import{L as Ze}from"./LiveColorLegend-B6dm60Py.js";import{T as $e}from"./trending-down-lbG30IP0.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-Ckdr7uhR.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function ut(){const e=["AxnjBNn1zMzPyW","mZK3se52qw5m","Bxv6rwO","Dg9tDhjPBMC","uMvWzxrPDgLVBG","y3Pevw4","sw5ZDwzMAwnPzq","uxDeyvm","sw9brfq","C3vMzMLJAwvUDa","EhrHs0W","DgHYzwvMB2XKxW","zsbMAwz0Es1TBW","vfvewKS","BNz1A3u","ig1HDgvYAwfSlG","yKfXrgq","zMvU","t3Ljswm","ChjVDg90ExbL","CMvLzM9SzcbYzq","rhjHDW","BNqGtwf0zxjPyq","DhjHy2u","CMv0DxjUicHMDq","y3rVCIGICMv0Dq","wvjjAMu","mJiYndbiyNPyvfm","ndjxA1bNyNu","vgHYzwvMB2XKia","AxntDgfSzw1HDa","r2fTzsbKCMf3BG","AxneCMf3","u3rHBgvTyxrLiq","D01Kq3m","D2fYBG","thLryvu","rhjHDYbIEsbPBG","u3Lqs3q","yMLUza","C2HVCNrnzxnZyq","Cgv0AxrPB24U","BgvUz3rO","AxnuAhjLzwzVBa","DgfIBgu","zMLMDhLFBw92zq","E30Uy29UC3rYDq","DMuGCNvSzs4","yxbWBhK","AgHxAfC","BMn0Aw9UkcKG","uLrHEha","zurxteO","q0DkrMm","zezHBei","uhnNuK0","rLPTvuq","B0nVEve","mZqWmZi3ne1XwfPJvG","oeHXqMvyDq","q2furLK","mtbqBuDZte4","BNrFBwf0zxjPyq","wuvgCu0","Bw92zxmGyxzHAq","y29UC3rYDwn0BW","CMvWzxrPDgLVBG","ie5VigXLz2fSia","nJa1mJHVy1rjvvm","CfD0z0C","nvHVCgn0Bq","kcGOlISPkYKRkq","Dw5RBM93BG","y1D5zgu","mJy2ntC0nLzvEK54Aq","x19WCM90B19F","AKPAD3e","wvvcDwO","CMvHC29U","rhjHDYbIEsb0Aa","CM4GDgHPCYiPka","tgTTyKS","mZK3ntu3mhzdEKTvwG","ndyWofPuEhrVCG","zuXuDxy","EgzUqLe","zfjLCgv0AxrPBW","C2vHCMnO","q3fYEfa","BwvZC2fNzq","C3nguNG","tMHXzey","mtGWmJG3ogXbEKvtzq","AwvUDe1HDgvYAq","otuYtNDqsfLU","y29UC29Szq","D1bkDe4","zxjYB3i","Aw5MBW"];return(ut=function(){return e})()}!function(){const e=xt,t=ut();for(;;)try{if(362935===parseInt(e(484))/1*(parseInt(e(478))/2)+parseInt(e(511))/3*(-parseInt(e(510))/4)+parseInt(e(454))/5*(-parseInt(e(458))/6)+parseInt(e(442))/7*(-parseInt(e(443))/8)+parseInt(e(466))/9*(-parseInt(e(445))/10)+-parseInt(e(476))/11+parseInt(e(467))/12*(parseInt(e(452))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[xt(432)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=xt,t={};t[e(444)]="(((.+)+)+)+$";const n=t;return dt[e(486)]().search(e(455)+"+$")[e(486)]().constructor(dt)[e(471)](n[e(444)])});dt();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[xt(432)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function xt(e,t){e-=419;const n=ut();let s=n[e];if(void 0===xt.tcitks){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};xt.bVEUNi=r,xt.reVKtD={},xt.tcitks=!0}const a=e+n[0],i=xt.reVKtD[a];if(i)s=i;else{const e=function(e){this.WHRscT=e,this.PyuMVx=[1,0,0],this.YYprMv=function(){return"newState"},this.xpfkco="\\w+ *\\(\\) *{\\w+ *",this.FpWpHa="['|\"].+['|\"];? *}"};e.prototype.ZCfisF=function(){const e=new RegExp(this.xpfkco+this.FpWpHa).test(this.YYprMv.toString())?--this.PyuMVx[1]:--this.PyuMVx[0];return this.vHInRe(e)},e.prototype.vHInRe=function(e){return Boolean(~e)?this.ASBxlF(this.WHRscT):e},e.prototype.ASBxlF=function(e){for(let t=0,n=this.PyuMVx.length;t<n;t++)this.PyuMVx.push(Math.round(Math.random())),n=this.PyuMVx.length;return e(this.PyuMVx[0])},new e(xt).ZCfisF(),s=xt.bVEUNi(s),xt.reVKtD[a]=s}return s}function ht(e){const t=xt;return function(e){const t=xt,n={SyPKt:t(489)+t(505)+"l",oCoyQ:function(e,t){return e(t)},TUDZK:function(e,t){return e+t},eDWLJ:t(507)+"nction() ",OyIIc:function(e,t){return e===t},QwDaS:t(516)+t(451)+t(448)+"lable.",hhWhW:t(516),LyQaU:t(512)+t(487),IStAg:function(e,t){return e!==t},wPJtN:"insufficie"+t(446)+"l",cWyde:t(421)+t(492)+t(498),IoADT:function(e,t,n){return e(t,n)},YRIje:t(429)+"_rule",CqrxP:t(463)+t(495)+t(431),hWwqo:"50-Move Rule",jJZwq:t(456),pWtgG:t(514)+"!",YUBuj:t(504)};if(e[t(513)+"e"]()){if(n[t(501)](t(439),t(474))){const e={};return e[t(462)]="insufficie"+t(446)+"l",e[t(473)]=t(421)+t(492)+t(498),e[t(424)+"ge"]=n[t(422)],e}{const e={reason:"stalemate"};return e[t(473)]=n[t(490)],e[t(424)+"ge"]=n[t(433)],e}}if(e[t(427)+t(470)+"n"]()){const e={};return e[t(462)]=t(494)+t(450),e[t(473)]=t(463)+t(503)+t(425),e[t(424)+"ge"]=n[t(420)],e}if(e[t(483)+t(477)+"al"]()){if(n.IStAg(t(437),t(437))){let e;try{e=sEiEMF[t(441)](_0x5d9394,sEiEMF[t(496)](sEiEMF[t(496)](sEiEMF[t(436)],t(430)+t(508)+t(464)+" )"),");"))()}catch(a){e=_0x48b688}return e}{const e={};return e[t(462)]=n[t(480)],e.message=n[t(457)],e[t(424)+"ge"]=t(489)+"nt Material",e}}const s=e[t(500)]();if(n[t(491)](parseInt,s.split(" ")[4],10)>=100){const e={};return e[t(462)]=n[t(509)],e.message=n[t(472)],e[t(424)+"ge"]=n.hWwqo,e}const r={};return r[t(462)]=n[t(460)],r[t(473)]=n[t(453)],r[t(424)+"ge"]=n[t(461)],r}(e)[t(473)]}mt(void 0,function(){const e=xt,t={xfnBQ:function(e,t){return e+t},nvuku:e(507)+e(434),FZmUD:e(430)+e(508)+'rn this")( )',TdwIS:function(e,t){return e(t)},qkDAM:e(517),YEFqM:"TDYHJ",hIRff:function(e){return e()},bAqDd:"log",LkmbK:e(419),dFalB:e(481),RTaxp:"exception",czDUn:function(e,t){return e<t}},n=t.hIRff(function(){const n=e,s={cgMiQ:function(e,n){return t[xt(469)](e,n)},xtaKL:t[n(497)],eLTuv:t[n(440)]};if("uLstC"!==n(485)){let e;try{if("NhqdF"!==n(475)){const e=_0x53e8ab?function(){if(_0x4de677){const e=_0x2b4126.apply(_0x4d2571,arguments);return _0x166c14=null,e}}:function(){};return _0xd15a95=!1,e}e=t.TdwIS(Function,t[n(469)](t.xfnBQ(t[n(497)],t[n(440)]),");"))()}catch(r){t.qkDAM===t[n(447)]?_0x3a4685=_0x293ec4:e=window}return e}_0x3c91d2=_0x1a81a9(s.cgMiQ(s[n(493)]+s[n(468)],");"))()}),s=n[e(479)]=n[e(479)]||{},r=[t[e(499)],t[e(465)],e(482),t[e(438)],t[e(435)],e(428),e(506)];for(let a=0;t[e(488)](a,r[e(426)]);a++){const t=mt[e(449)+"r"][e(502)][e(423)](mt),n=r[a],i=s[n]||t;t[e(459)]=mt.bind(mt),t[e(486)]=i[e(486)].bind(i),s[n]=t}})(),function(){const e=gt,t=bt();for(;;)try{if(132913===parseInt(e(315))/1+-parseInt(e(329))/2*(-parseInt(e(395))/3)+-parseInt(e(370))/4+parseInt(e(358))/5*(-parseInt(e(326))/6)+-parseInt(e(373))/7+parseInt(e(375))/8+-parseInt(e(396))/9*(parseInt(e(414))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){const e={YZRxc:function(e,t){return e===t}},t=e;let n=!0;return function(e,s){const r=gt,a={zXFLu:function(e,t){return e+t},kokBy:"Khrsj",odAdW:function(e,n){return t.YZRxc(e,n)},yGqFR:r(402)},i=n?function(){const t=r,n={xzWGA:function(e){return e()},WBMpC:function(e,t){return e||t},kcsBe:function(e,t){return a[gt(365)](e,t)}};if(a.kokBy!==t(338)){if(s){if(a[t(348)](t(402),a[t(368)])){const t=s.apply(e,arguments);return s=null,t}_0x590211[t(377)](t(374)+"API not su"+t(405))}}else{if(!_0x50d183)return;n[t(390)](_0x406b84);const{context:e,gainNode:s}=_0x33af61[t(391)];if(n.WBMpC(!e,!s))return;const r=e["createOsci"+t(360)](),a=e.createGain();r[t(354)]=_0x4abd28,r[t(359)][t(342)+"Time"](_0x1700b0,e[t(364)+"e"]),_0x2d1dcd&&r[t(359)][t(362)+t(324)+t(325)](_0x424da2,n[t(343)](e[t(364)+"e"],_0x4433ec)),a.gain["setValueAt"+t(332)](0,e[t(364)+"e"]),a[t(406)][t(323)+t(384)+t(371)](1,n[t(343)](e[t(364)+"e"],_0x3e53e3)),a[t(406)]["exponentia"+t(324)+t(325)](.01,e.currentTime+_0x2bb3c9-_0x5ec627),a[t(406)][t(323)+t(384)+t(371)](0,e[t(364)+"e"]+_0x25d254),r[t(357)](a),a[t(357)](s),r.start(e.currentTime),r[t(408)](e[t(364)+"e"]+_0x14accb)}}:function(){};return n=!1,i}}()(void 0,function(){const e=gt,t={};t[e(355)]="(((.+)+)+)+$";const n=t;return pt[e(369)]()[e(361)](n[e(355)]).toString().constructor(pt)[e(361)](e(346)+"+$")});pt();const ft=function(){const e=gt,t={};t[e(426)]=function(e,t){return e!==t},t[e(417)]=e(339);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=gt;if(n.pTwiU(n.UbNWe,s(363))){if(t){const n=t[s(367)](e,arguments);return t=null,n}}else _0x3d15a5[s(391)][s(421)][s(399)]()}:function(){};return s=!1,r}}();function gt(e,t){e-=315;const n=bt();let s=n[e];if(void 0===gt.OfeEWt){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.XOjxMd=r,gt.QpwYBC={},gt.OfeEWt=!0}const a=e+n[0],i=gt.QpwYBC[a];if(i)s=i;else{const e=function(e){this.fNjCkl=e,this.heduSk=[1,0,0],this.gIptWr=function(){return"newState"},this.TBGtAE="\\w+ *\\(\\) *{\\w+ *",this.spFrKV="['|\"].+['|\"];? *}"};e.prototype.dRfgKv=function(){const e=new RegExp(this.TBGtAE+this.spFrKV).test(this.gIptWr.toString())?--this.heduSk[1]:--this.heduSk[0];return this.BGPYBp(e)},e.prototype.BGPYBp=function(e){return Boolean(~e)?this.FusVpL(this.fNjCkl):e},e.prototype.FusVpL=function(e){for(let t=0,n=this.heduSk.length;t<n;t++)this.heduSk.push(Math.round(Math.random())),n=this.heduSk.length;return e(this.heduSk[0])},new e(gt).dRfgKv(),s=gt.XOjxMd(s),gt.QpwYBC[a]=s}return s}ft(void 0,function(){const e=gt,t={LRisC:function(e,t){return e+t},JwlbJ:function(e,t){return e+t},TrTJX:e(392)+e(349),volqA:function(e){return e()},tAolt:e(376),bwOkr:e(319)},n=t[e(334)](function(){const n=e;let s;try{s=Function(t[n(397)](t[n(420)](t.TrTJX,n(372)+n(381)+n(413)+" )"),");"))()}catch(r){s=window}return s}),s=n.console=n.console||{},r=[t.tAolt,"warn",t[e(410)],"error","exception","table",e(378)];for(let a=0;a<r[e(328)];a++){const t=ft.constructor[e(412)].bind(ft),n=r[a],i=s[n]||t;t[e(425)]=ft[e(347)](ft),t[e(369)]=i.toString.bind(i),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=gt,r={xIInf:function(e,t){return e!==t},bUomq:function(e){return e()},lOdzu:s(430),SwgBa:function(e,t){return e+t},ubZmb:function(e,t){return e*t},rSjSH:function(e,t){return e<t},QPoBz:function(e,t){return e-t},lpEWZ:"move",BQsfO:function(e,t,n,s,r,a){return e(t,n,s,r,a)},skTit:"sine",iCAUs:s(403),HcXHG:function(e,t,n){return e(t,n)},NnIGr:s(341),qtCbE:"check",xBwOd:s(432),TdHFH:function(e,t,n,s,r,a){return e(t,n,s,r,a)},aZeVi:function(e,t,n){return e(t,n)},DqjEs:"gameEnd",mpwYV:s(317),vLPSt:s(422),YZsGQ:function(e,t){return e(t)},FneCN:function(e,t,n){return e(t,n)}},a={};a[s(421)]=null,a[s(336)]=null;const i=r[s(333)](t.useRef,a),o=r[s(337)](t.useCallback,()=>{const e=s;if(!i[e(391)][e(421)])try{const t=new(window[e(380)+"xt"]||window.webkitAudioContext),s=t[e(389)]();s[e(357)](t[e(366)+"n"]),s[e(406)][e(416)]=n;const r={};r[e(421)]=t,r[e(336)]=s,i[e(391)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;if(e(393)===e(350))return()=>{const t=e;_0x3a35c8[t(391)][t(421)]&&_0x355348[t(391)][t(421)].close()};i[e(391)][e(336)]&&(i[e(391)].gainNode[e(406)][e(416)]=n)},[n]);const c=r[s(321)](t.useCallback,(t,n,a=s(423),c=.01,l=.1,u)=>{const d=s;if(r[d(379)](d(331),d(322))){if(!e)return;r.bUomq(o);const{context:s,gainNode:m}=i[d(391)];if(!s||!m)return;const x=s["createOsci"+d(360)](),h=s.createGain();x[d(354)]=a,x[d(359)][d(342)+d(332)](t,s[d(364)+"e"]),u&&(d(352)===r[d(327)]?_0x260474[d(391)].gainNode[d(406)][d(416)]=_0x3de7f6:x[d(359)]["exponentialRampToVal"+d(325)](u,r[d(398)](s[d(364)+"e"],n))),h[d(406)][d(342)+d(332)](0,s[d(364)+"e"]),h.gain[d(323)+d(384)+d(371)](1,s[d(364)+"e"]+c),h.gain[d(362)+"lRampToValueAtTime"](.01,s[d(364)+"e"]+n-l),h.gain[d(323)+d(384)+d(371)](0,s[d(364)+"e"]+n),x[d(357)](h),h.connect(m),x.start(s[d(364)+"e"]),x[d(408)](s[d(364)+"e"]+n)}else _0x368384.current.gainNode&&(_0x2b84e0[d(391)][d(336)][d(406)][d(416)]=_0x407b2f)},[e,o]),l=r[s(321)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(391)];if(!c||!l)return;const u=r[a(400)](c[a(386)],t),d=c[a(330)+"er"](1,u,c[a(386)]),m=d[a(418)+a(382)](0);for(let e=0;r[a(404)](e,u);e++)if(a(411)!=a(411)){if(_0x6c7eae[a(391)][a(421)])return;try{const e=new(_0x1ff5a2[a(380)+"xt"]||_0x30c5e7[a(344)+a(415)]),t=e[a(389)]();t[a(357)](e[a(366)+"n"]),t.gain.value=_0x213c8c;const n={};n.context=e,n[a(336)]=t,_0x3add88.current=n}catch(f){_0x2dcfb5[a(377)](a(374)+a(356)+a(405))}}else m[e]=r[a(433)](2*Math[a(345)](),1);const x=c[a(330)+a(316)]();x[a(428)]=d;const h=c["createBiqu"+a(409)]();h.type=a(394),h[a(359)].value=n;const p=c[a(389)]();p[a(406)][a(342)+a(332)](.3,c[a(364)+"e"]),p[a(406)][a(362)+a(324)+a(325)](.01,c.currentTime+t),x[a(357)](h),h[a(357)](p),p[a(357)](l),x.start(c[a(364)+"e"]),x[a(408)](r[a(398)](c.currentTime,t))},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(434)]:r[n(383)](c,800,.08,r.skTit,.005,.05),r[n(383)](c,400,.06,r[n(427)],.005,.04);break;case n(340):r[n(337)](l,.12,2e3),c(300,.1,r[n(401)],.005,.08),c(150,.15,n(423),.01,.1);break;case"castle":c(600,.06,n(423),.005,.04),setTimeout(()=>c(700,.06,"sine",.005,.04),80);break;case r[n(419)]:c(880,.15,r.iCAUs,.01,.1),r[n(337)](setTimeout,()=>c(1100,.12,n(403),.01,.08),120);break;case r[n(431)]:r[n(429)](c,880,.2,r[n(388)],.01,.15),r.aZeVi(setTimeout,()=>c(660,.2,"sine",.01,.15),150),setTimeout(()=>c(440,.3,n(423),.01,.2),300),setTimeout(()=>c(330,.4,n(423),.01,.3),500);break;case n(318):r[n(383)](c,523,.12,r[n(388)],.01,.08),r[n(353)](setTimeout,()=>c(659,.12,n(423),.01,.08),100),r[n(353)](setTimeout,()=>c(784,.2,"sine",.01,.15),200);break;case r[n(335)]:r[n(429)](c,440,.15,r[n(427)],.01,.1),setTimeout(()=>c(349,.25,n(403),.01,.2),150);break;case r.mpwYV:r[n(429)](c,523,.1,n(423),.01,.08),setTimeout(()=>c(659,.1,n(423),.01,.08),100),setTimeout(()=>c(784,.1,"sine",.01,.08),200),setTimeout(()=>c(1047,.3,n(423),.01,.25),300);break;case n(320):r[n(429)](c,392,.2,r[n(388)],.02,.15),setTimeout(()=>c(349,.2,n(423),.02,.15),200),setTimeout(()=>c(330,.3,"sine",.02,.25),400),setTimeout(()=>c(262,.4,"sine",.02,.35),650);break;case n(407):r[n(383)](c,440,.15,n(423),.01,.1),r.aZeVi(setTimeout,()=>c(440,.15,n(423),.01,.1),180),setTimeout(()=>c(523,.2,n(423),.01,.15),360);break;case r[n(351)]:c(200,.1,r.NnIGr,.005,.08),r[n(429)](c,150,.08,n(387),.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=gt;i[e(391)][e(421)]&&i[e(391)][e(421)][e(399)]()},[]);const d={};return d[s(385)]=u,d[s(424)]=o,d};function bt(){const e=["r2LIr2u","DKXqu3q","BwjTAMq","yvPLvMK","DhLWzq","Dhj3zNK","qvbjig5VDcbZDq","y29UBMvJDa","mtmXmfDWuNzzyG","zNjLCxvLBMn5","BgXHDg9Y","C2vHCMnO","zxHWB25LBNrPyq","zLnit2e","y3vYCMvUDfrPBq","ELHgthu","zgvZDgLUyxrPBW","yxbWBhK","EuDXrLi","Dg9tDhjPBMC","nti2ntaWshHxz3bz","Aw1L","E30Uy29UC3rYDq","ntq1mZu2Afv2uuPx","v2vIief1zgLVia","mtaYntm0ngDgrLznzW","Bg9N","D2fYBG","DhjHy2u","EeLjBMy","qxvKAw9dB250zq","y3rVCIGICMv0Dq","rgf0yq","qLfZzK8","vg9wywX1zuf0va","CgXHEvnVDw5K","C2fTCgXLuMf0zq","C2f3Dg9VDgG","C2TuAxq","y3jLyxrLr2fPBG","EhPxr0e","y3vYCMvUDa","CMv0DxjUicHMDq","v3frshu","Bg93CgfZCW","mte0ou5Nz1btsq","ntCZndCXB0nHrgr1","tfjPC0m","u3DNqMe","y2XVC2u","DwjABwi","tM5jr3i","thPKu3u","DhjPyw5NBgu","CLnQu0G","ChbVCNrLza","z2fPBG","zhjHDW","C3rVCa","ywrgAwX0zxi","yNDpA3i","AKXYt0u","ChjVDg90ExbL","CM4GDgHPCYiPka","mZbZtwLmwvK","B0nVBNrLEhq","DMfSDwu","vwjov2u","z2v0q2HHBM5LBa","CxrdyKu","sNDSyKO","y29UDgv4Da","AwXSzwDHBa","C2LUzq","Aw5PDef1zgLV","x19WCM90B19F","Cfr3Avu","Aunbvxm","yNvMzMvY","vgrirKG","sMrNwha","Eej3t2q","y2HLy2TTyxrL","uvbVqNO","Bhbfv1O","mJyWnZy3vg5VCLH3","zxjtB3vYy2u","DMLJDg9YEq","z2fTzvn0yxj0","Aw5MBW","zgvMzwf0","rM5Lq04","AKzyBue","BgLUzwfYuMfTCa","BfjHBxbuB1zHBa","DwvbDfrPBwu","mtCWnePuBw1buG","Be9KENu","BgvUz3rO","mte0nePxAgzHuq","y3jLyxrLqNvMzG","y2zKwge","vgLTzq","wvPZr1e","DM9SCue","rhfQrxm","z2fPBK5Vzgu","sgnyseC","uwjrCwO","vxzjuwW","y2fWDhvYzq","C3f1yxjL","C2v0vMfSDwvbDa","A2nZqMu","D2vIA2L0qxvKAq","CMfUzg9T","kcGOlISPkYKRkq","yMLUza","B2rbzfC","BMn0Aw9UkcKG"];return(bt=function(){return e})()}const yt=Ct;!function(){const e=Ct,t=kt();for(;;)try{if(847481===parseInt(e(456))/1+parseInt(e(480))/2*(-parseInt(e(470))/3)+-parseInt(e(488))/4+parseInt(e(486))/5*(-parseInt(e(483))/6)+-parseInt(e(454))/7*(parseInt(e(477))/8)+-parseInt(e(450))/9*(parseInt(e(458))/10)+-parseInt(e(460))/11*(-parseInt(e(448))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Ct(487)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Ct;return wt[e(467)]()[e(465)](e(455)+"+$")[e(467)]().constructor(wt)[e(465)](e(455)+"+$")});wt();const jt=function(){let e=!0;return function(t,n){const s=Ct,r={};r[s(476)]=s(452);const a=r,i=e?function(){const e=s;if("AHYJr"!==a[e(476)]){const t=_0x369473[e(487)](_0x16bb55,arguments);return _0x54ce04=null,t}if(n){const s=n[e(487)](t,arguments);return n=null,s}}:function(){};return e=!1,i}}();function Ct(e,t){e-=445;const n=kt();let s=n[e];if(void 0===Ct.GBzlOV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Ct.EDLnkq=r,Ct.rfrQEI={},Ct.GBzlOV=!0}const a=e+n[0],i=Ct.rfrQEI[a];if(i)s=i;else{const e=function(e){this.JbzyfC=e,this.KLpBFh=[1,0,0],this.ZSwxXE=function(){return"newState"},this.ggXSYH="\\w+ *\\(\\) *{\\w+ *",this.IEoQYT="['|\"].+['|\"];? *}"};e.prototype.XtMSpc=function(){const e=new RegExp(this.ggXSYH+this.IEoQYT).test(this.ZSwxXE.toString())?--this.KLpBFh[1]:--this.KLpBFh[0];return this.gfbRBX(e)},e.prototype.gfbRBX=function(e){return Boolean(~e)?this.anCEuR(this.JbzyfC):e},e.prototype.anCEuR=function(e){for(let t=0,n=this.KLpBFh.length;t<n;t++)this.KLpBFh.push(Math.round(Math.random())),n=this.KLpBFh.length;return e(this.KLpBFh[0])},new e(Ct).XtMSpc(),s=Ct.EDLnkq(s),Ct.rfrQEI[a]=s}return s}jt(void 0,function(){const e=Ct,t={XLPTb:function(e,t){return e(t)},mZZTc:function(e,t){return e+t},XNXvH:e(459)+e(446),fdzfY:function(e){return e()},Ldwsh:function(e,t){return e===t},CGoGg:e(485),bssLa:e(474),FWtmF:e(451),rcdrQ:"exception"};let n;try{const s=t.XLPTb(Function,t[e(464)](t[e(461)],'{}.constructor("retu'+e(468)+" )")+");");n=t.fdzfY(s)}catch(a){if(t[e(466)](e(485),t[e(484)]))n=window;else{const t=_0x5df34a[e(449)+"r"].prototype[e(445)](_0x240c0d),n=_0x15f9f7[_0x108760],s=_0x5f0ecf[n]||t;t[e(469)]=_0x366664[e(445)](_0x262127),t.toString=s[e(467)].bind(s),_0x41130a[n]=t}}const s=n.console=n[e(478)]||{},r=[t[e(447)],e(453),t[e(481)],e(462),t[e(471)],e(475),e(457)];for(let i=0;i<r[e(463)];i++){const t=jt[e(449)+"r"][e(482)][e(445)](jt),n=r[i],a=s[n]||t;t[e(469)]=jt.bind(jt),t.toString=a[e(467)][e(445)](a),s[n]=t}})();const Nt={};function kt(){const e=["otm5mti3Au5it2rL","kcGOlISPkYKRkq","mtuZmJy1mwHWz29dCW","DhjHy2u","nZe1mdyWyxDmswfN","CMv0DxjUicHMDq","mJG1ndC1odv3y01Rt08","we5yDKG","zxjYB3i","BgvUz3rO","BvPAvgm","C2vHCMnO","tgr3C2G","Dg9tDhjPBMC","CM4GDgHPCYiPka","x19WCM90B19F","mtjkA3rMAeW","CMnKCLe","BMfTzq","zc1Zzxr0Aw5NCW","Bg9N","DgfIBgu","Ew9dr1G","ogPZrLfVCq","y29UC29Szq","y2HLC3mTC291BG","mtm4mJi2AKfZwgnb","rLD0Buy","ChjVDg90ExbL","mte3nJG4ogPJEhvvuq","q0DVr2C","teLWrM0","mJb0D2P5wgi","yxbWBhK","mJa0odi3mLDvswPKCq","yMLUza","BMn0Aw9UkcKG","yNnZtge","mtjivMrbv1m","y29UC3rYDwn0BW","mtK4wgzvAgzO","Aw5MBW","quHzsNi","D2fYBG"];return(kt=function(){return e})()}Nt[yt(472)]=yt(479)+yt(473);const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e.enabled}))}),Nt));function Dt(e,t){e-=373;const n=qt();let s=n[e];if(void 0===Dt.YXJXao){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Dt.xNSxpo=r,Dt.MfHYTi={},Dt.YXJXao=!0}const a=e+n[0],i=Dt.MfHYTi[a];if(i)s=i;else{const e=function(e){this.ZAxoji=e,this.jqrxNs=[1,0,0],this.ZhLgPe=function(){return"newState"},this.Bgfibd="\\w+ *\\(\\) *{\\w+ *",this.QTwJVA="['|\"].+['|\"];? *}"};e.prototype.lHUVEN=function(){const e=new RegExp(this.Bgfibd+this.QTwJVA).test(this.ZhLgPe.toString())?--this.jqrxNs[1]:--this.jqrxNs[0];return this.SjXyeg(e)},e.prototype.SjXyeg=function(e){return Boolean(~e)?this.HunaxK(this.ZAxoji):e},e.prototype.HunaxK=function(e){for(let t=0,n=this.jqrxNs.length;t<n;t++)this.jqrxNs.push(Math.round(Math.random())),n=this.jqrxNs.length;return e(this.jqrxNs[0])},new e(Dt).lHUVEN(),s=Dt.xNSxpo(s),Dt.MfHYTi[a]=s}return s}const zt=Dt;!function(){const e=Dt,t=qt();for(;;)try{if(548312===parseInt(e(620))/1*(parseInt(e(645))/2)+parseInt(e(559))/3+parseInt(e(534))/4*(-parseInt(e(455))/5)+parseInt(e(523))/6*(parseInt(e(558))/7)+-parseInt(e(485))/8+-parseInt(e(595))/9*(parseInt(e(592))/10)+parseInt(e(432))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Dt,t={nFVyl:"(((.+)+)+)+$"},n=t;return Bt.toString()[e(463)](n.nFVyl)[e(639)]()[e(556)+"r"](Bt)[e(463)](n[e(510)])});Bt();const Lt=function(){const e=Dt,t={};t.FOxjs=e(503)+":";const n=t;let s=!0;return function(t,r){const a=e;if(a(590)!==a(611)){const e=s?function(){if(r){const e=r[a(549)](t,arguments);return r=null,e}}:function(){};return s=!1,e}return _0x5469b0[a(470)](n[a(633)],_0x2644d3),!1}}();function qt(){const e=["y29UC29Szq","z2fTzq","DeX3rNe","C3vIC2nYAwjL","tKnmuNq","y2HHBgXLBMDLqW","zMvU","zM9YrwfJAa","nZuWmZm2mejjyMHIBW","vezwvfe","A0j4tuq","qMXHy2SGD2LUCW","surQzM0","y29Kzq","BMv3uMf0Aw5N","zwXVx3jHDgLUzW","AxnFChvIBgLJ","E30Uy29UC3rYDq","Bg9HzcbNyw1L","y2HLC3nFz2fTzq","C3n6tvK","v2HPDguGD2LUCW","BIb0AgLZihzLCG","AgfSBgvUz2uGyW","y2HHBM5LBa","zMfqAKi","tw92zsbLCNjVCG","q2HHBgXLBMDLia","uLH3EwO","vgv1vge","AM9PBIbNyw1L","CKPfrKq","Bw92zv9UDw1Izq","BKzwEwW","Bg9HzeDHBwu","Aw5MBW","DxnLCL9Pza","ww91ihDVBIe","Bw92zq","Bg9N","Awq9zxeU","BIb5B3vYig93BG","yKLyBfm","yMXHy2S","zgvMzwf0","BMv3","mtHrv2fSzLq","vMrbBMu","sNHTtNm","txHnyvK","AxndAgvJA21HDa","rMDNtve","y3jLyxrLzef0","x3jLBwfPBMLUzW","tfv6suu","s2Lhwu0","Bw92zxmT","mtqWnZCXnNjbD3bjuW","D2fYBG","uMf0Aw5NoIa","ywn0AxzL","y0Hjzwi","qwLtwMm","Eun4v00","uLDUCKG","u2P3CLu","AxnnEvr1CM4","x19WCM90B19F","vvbeqvrf","tY1plu8","AM9PBKj5q29Kzq","D2LUBMvYx2LK","yxbWBhK","DMLJDg9YEq","BffLsei","Dg9ju09tDhjPBG","A2Lbu3i","tgTqy3O","C3vJy2vZCW","y29UC3rYDwn0BW","BMvS","nJeWmdC4A0P5qMLv","mtG5nJK1n2jmBLzctq","sKrRvw4","DgfkqLC","BeDbq0m","B0v0tKO","Dw5vEMC","AM9PBIbIEsbJBW","ueHTweq","C3f1yxjL","DhvYBG","r2fTzsbUB3qGzG","D2fPDgLUzW","BMvZzwu","CMv0DxjUicHMDq","Bw92zwrtCxvHCG","t2zfEhq","D2vTBKi","sLvfCgm","D2HPDgvqywXLDa","AMLLCNm","Eujsy28","DxnLCL9PzcWGzq","v21wwhe","zK1vEwW","A1zJuwC","Bw92zxm","DxbKyxrL","AM9PBKDHBwu","rKHHBgu","D2HPDgvFD2LUCW","quP2ugS","z2LIrwO","BwfRzu1VDMu","mJmWnZiZmgL2wKXIDa","uK9KthO","Bw92zv91y2K","mZzKEerWDKK","EfvHyw0","AhbRBui","CYbcBgfJAY4","yMXPDhPFnq","AxnmB2fKAw5N","yMXHy2TuAw1LuG","y3rVCIGICMv0Dq","Bw92zv9Zyw4","AwXSzwDHBa","v1LKrK4","u3rgy3O","DhrL","C3rHCNrLzf9HDa","CgDU","ww91ihjLC2LNBG","De9pA0q","zg1dv0G","BgvnB3zLCW","B25LBNqGyxv0BW","ChjVDg90ExbL","rhjHDYbVzMzLCG","z2fTzv9Pza","CuHUyKS","ugXLyxnLihnPzW","nJe5B2X1EvjQ","ChvIBgLJ","B3fnEuO","z2v0qxzHAwXHyG","EePVENq","zxHJzxb0Aw9U","z2fTzvn0yxrL","y2HHBMDL","CKLK","ihjHDgLUz3m6","DgLTzv9JB250CG","swPyChC","z2fTzvn0yxj0","rK94ANm","uMLTALO","yMXHy2TqBgf5zq","ChPxBe0","DgfIBgu","zwznsNy","Dg9tDhjPBMC","wMTbC0y","y3jLyxrLzf9HDa","rw5tBhm","Axnhyw1Lt3zLCG","yvrlsvi","mtK2mNPHDNDSyW","B2rL","z2vUzxjHDgvFyW","vuv2qLi","y2HHBgXLBMDLxW","DgP6rgu","z1nlqui","BgvUz3rO","DuPqEw4","y29TCgXLDgvK","rfreA2S","C2LVBIK","CMfWAwrFmtu","Cg9ZDgDYzxnFyW","BMvUDc4UlG","DhjHy2u","y29KztOG","D2HPDgvFDgLTzq","yMLUza","rg55DMm","CgXHEwvYx2LK","C1zfww0","zseGww91igfYzq","Evfxuwe","Bw92zunVDw50","y2fWDhvYzwq","rMzithC","BIbPBIb0BYbQBW","AurkBgW","yvr3yvG","yMXHy2TFDgLTzq","Dw50Aw1Lza","y0Pprxm","C3rHDhvZ","zMLUza","D2LUBMvYswq","CMvTB3zLq2HHBG","DhbvCwi","tY1p","CNrVufy","Bwf5yMvtAw5NBa","CMvZAwDUr2fTzq","ywrK","y2HLy2S","wgfyzwq","yNvSBgv0xZe","tMrnrxi","u0T2tKS","AxndAgvJAW","ChjVzMLSzxm","CMvZDwX0","ueTzt0K","ENrsuvC","zxjFAwq","C3HpC24","D2HPDgvFCgXHEq","q3fmsLa","B3zgruu","Ce5LwMe","su5trvju","zhjHDW","CLrbv0K","yxnJzw5KAw5N","DgLTzunVBNrYBW","rMfPBgvKihrVia","y3vYCMvUDf9Mzq","zwqHifDHAxrPBG","C3vYvuC","yMXHy2TFCgXHEq","CM4GDgHPCYiPka","uuDss3C","sgzxteW","D2HPDgu","rM1Wvfe","D2HPDgvFCgfSzq","y1roDNa","q2fUBM90igPVAq","EgPcC3q","D2HPDgvqBgf5zq","mtC3mZe1odjLywnezeW","Cufqz3m","zfHSvhC","DMvYyM9Zzq","zw1HAw5PBMC","zwf0zsbHigDHBq","DgXzAMq","Bw92zv9JB3vUDa","BMn0Aw9UkcKG","y3jLyxrLigDHBq","Bwrtu2O","B0jYEMO","BxLdB2XVCG","wgLWvwe","BwvZC2fNzq","C2vSzwn0","BwXpuw8","yMXHy2TqywXLDa","t0T4rwu","ugrLwg4","y2HLC3nFBw92zq","tvLjANm","y2fZDgXL","mtbntw5hvfC","AxjLtfy","C2fU","zvznDuC","y2fWDhvYzq","yMzytgC","y3jLyxrLr2fTzq","DxbKyxrLievmtW","C2vHCMnO","C3vIC3rYAw5N","yMXHy2TFCgfSzq","qufMAhm","yMXHy2TFD2LUCW","Bg9FCMf0Aw5N","B3jKzxi","zxjYB3i","u2v1Dfm","Aw5Zzxj0","AgfSBgvUz2vFyW","Aw5JBhvKzxm","zNjVBq","swTbAxa"];return(qt=function(){return e})()}Lt(void 0,function(){const e=Dt,t={QGRKw:function(e,t){return e+t},hpkmB:function(e){return e()},kVcQg:e(516),IjBxM:e(535),Dnyvc:"info",uJPyn:e(637),efMJv:e(660)},n=t[e(597)](function(){const n=e;let s;try{s=Function(t[n(423)](n(572)+n(440)+(n(494)+n(602)+n(422)+" )"),");"))()}catch(r){s=window}return s}),s=n[e(477)]=n[e(477)]||{},r=[t[e(583)],t.IjBxM,t[e(664)],e(470),e(625),t[e(653)],t[e(638)]];for(let a=0;a<r.length;a++){const t=Lt[e(556)+"r"][e(615)][e(663)](Lt),n=r[a],i=s[n]||t;t[e(544)]=Lt.bind(Lt),t[e(639)]=i[e(639)][e(663)](i),s[n]=t}})();const At={};At[zt(398)]=60,At[zt(599)]=300,At[zt(657)]=900,At[zt(384)]=0;const St=At,Pt=It;!function(){const e=It,t=Et();for(;;)try{if(247515===parseInt(e(364))/1*(parseInt(e(416))/2)+-parseInt(e(359))/3+parseInt(e(394))/4+parseInt(e(407))/5+-parseInt(e(366))/6*(-parseInt(e(382))/7)+parseInt(e(401))/8+parseInt(e(378))/9*(-parseInt(e(398))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ht=function(){const e=It,t={gBRNV:function(e,t){return e===t}};t[e(376)]=e(400);const n=t;let s=!0;return function(t,r){const a=e,i={EqLFd:function(e,t){return n[It(399)](e,t)},lnIOe:n.KWGda,oAPXZ:a(397)},o=s?function(){const e=a;if(r){if(i[e(388)](i.lnIOe,i[e(384)]))return!!_0x48b3af&&_0x4ac1c4[e(386)]([15,40,15]);{const e=r.apply(t,arguments);return r=null,e}}}:function(){};return s=!1,o}}()(void 0,function(){const e=It;return Ht.toString().search(e(408)+"+$").toString()[e(391)+"r"](Ht)[e(413)](e(408)+"+$")});function Et(){const e=["C2vSzwn0Aw9U","Be9xrhe","renJwfO","yMLUza","zMHWtgC","otqZmte1B0HhrhLJ","kcGOlISPkYKRkq","CM5ptgG","CKLszei","BwvKAxvT","zxjYB3i","C2vHCMnO","y29UC29Szq","BunqwxC","otuWmdjIu3bJvey","Dg9tDhjPBMC","E30Uy29UC3rYDq","mtm3nZyWv2XuvNPT","yxzVBLe","D2fYBG","BMn0Aw9UkcKG","vujKtvy","mKXNzKnnva","qLDruNq","mZG3nZHQyMvcq20","wuPXCNK","zgjHy2SGzMfPBa","CM4GDgHPCYiPka","BgLNAhq","yxbWBhK","CMv0DxjUicHMDq","DhjHy2u","v2XfwMu","x19WCM90B19F","s1Dhzge","C3vJy2vZCW","oxbKsvHYqW","AgvHDNK","ueTVExO","tev5u2G","ndm0zK1VthvS","rLzlz00","B0fqwfO","zxHJzxb0Aw9U","DMLICMf0zq","AuLPA0W","rxfmrMq","zwq6","t3LowNG","y29UC3rYDwn0BW","vvzNENq","EfbYCwy","mte4mdyZnM9MuLruEa","DgfIBgu","uLbss2u","yLv4u0K","mta2mZiXntbYwMfNsKm","z0jstLy","vxPhzLC","mZaXnZi4mejUtK5huG"];return(Et=function(){return e})()}Ht();const Kt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[It(371)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function It(e,t){e-=359;const n=Et();let s=n[e];if(void 0===It.PPNamJ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};It.Mwqrae=r,It.mPACNm={},It.PPNamJ=!0}const a=e+n[0],i=It.mPACNm[a];if(i)s=i;else{const e=function(e){this.OrXKtJ=e,this.oSJNNf=[1,0,0],this.uFDGbe=function(){return"newState"},this.AiWehy="\\w+ *\\(\\) *{\\w+ *",this.NBQDPM="['|\"].+['|\"];? *}"};e.prototype.fGovdz=function(){const e=new RegExp(this.AiWehy+this.NBQDPM).test(this.uFDGbe.toString())?--this.oSJNNf[1]:--this.oSJNNf[0];return this.BUtDUx(e)},e.prototype.BUtDUx=function(e){return Boolean(~e)?this.sbOYUH(this.OrXKtJ):e},e.prototype.sbOYUH=function(e){for(let t=0,n=this.oSJNNf.length;t<n;t++)this.oSJNNf.push(Math.round(Math.random())),n=this.oSJNNf.length;return e(this.oSJNNf[0])},new e(It).fGovdz(),s=It.Mwqrae(s),It.mPACNm[a]=s}return s}Kt(void 0,function(){const e=It,t={BWgpa:function(e,t){return e(t)},mCPYw:e(372)+e(362),PKoyz:e(418)+'ctor("retu'+e(369)+" )",rnOLh:e(381),iIikL:e(361),jcilC:"info",YJqry:e(412),DCcXZ:e(395),WlEZe:e(373),RPRKe:function(e,t){return e<t}};let n;try{n=t.BWgpa(Function,t[e(415)]+t[e(380)]+");")()}catch(a){"CxOEm"!==t[e(409)]?n=window:_0x1a29e4=_0x470811}const s=n[e(414)]=n[e(414)]||{},r=["log",t[e(387)],t.jcilC,t[e(367)],e(385),t[e(404)],t[e(374)]];for(let i=0;t[e(396)](i,r.length);i++){const t=Kt[e(391)+"r"].prototype.bind(Kt),n=r[i],a=s[n]||t;t[e(375)]=Kt[e(405)](Kt),t[e(417)]=a[e(417)][e(405)](a),s[n]=t}})();const _t={};_t[Pt(370)]=10,_t.medium=25,_t[Pt(379)]=50,_t[Pt(377)]=[10,50,20],_t[Pt(412)]=[50,30,50,30,50],_t[Pt(402)]=5;const Tt=_t,Gt=()=>{const e=Pt,n={avonQ:"BWQRt",lOWDq:e(408)+"+$",UVgzt:"sWjky",UBdMV:function(e,t){return e!==t},OyNZx:function(e,t){return e in t},FVKgM:function(e,t,n){return e(t,n)},CggmF:function(e,t,n){return e(t,n)},fhpLg:function(e,t,n){return e(t,n)},bJdor:function(e,t,n){return e(t,n)}},s=n[e(363)](typeof navigator,"undefined")&&n[e(390)](e(386),navigator),r=n[e(383)](t.useCallback,(t=e(370))=>{const r=e,a={};a[r(410)]="Haptic fee"+r(368)+"ed:";const i=a;if(!s)return!1;try{if(r(365)===n[r(360)]){const e=Tt[t];return navigator[r(386)](e)}if(!_0x1c8589)return!1;try{const e=_0x547c68[_0x99e02e];return _0x2ead85[r(386)](e)}catch(o){return _0x1cfaef[r(361)](i[r(410)],o),!1}}catch(c){return!1}},[s]),a={select:t.useCallback(()=>r(e(402)),[r]),move:n[e(383)](t.useCallback,()=>r(e(370)),[r]),capture:n[e(383)](t.useCallback,()=>r(e(411)),[r]),check:n.CggmF(t.useCallback,()=>r(e(379)),[r]),victory:t.useCallback(()=>r("success"),[r]),error:n[e(406)](t.useCallback,()=>r(e(412)),[r]),castle:n[e(406)](t.useCallback,()=>{const t=e;return t(393)!==n[t(392)]?!!s&&navigator[t(386)]([15,40,15]):_0x347172[t(417)]()[t(413)](t(408)+"+$").toString()[t(391)+"r"](_0x27b320)[t(413)](xUUwjV[t(403)])},[s]),gameStart:n.bJdor(t.useCallback,()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i.isSupported=s,i[e(386)]=r,i.haptics=a,i},Wt={K:"‚ôî",Q:"‚ôï",R:"‚ôñ",B:"‚ôó",N:"‚ôò",P:"‚ôô",k:"‚ôö",q:"‚ôõ",r:"‚ôú",b:"‚ôù",n:"‚ôû",p:"‚ôü"},Ut=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Gt();let D=null;try{D=l()}catch{}const z=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Ut(B?7-e:e,B?7-t:t),l=null==(i=z[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=z[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[z,b,w,r,a,B,x,n,s,M]),S=t.useCallback(e=>{if(!(null==D?void 0:D.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?D.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):D.setHoveredSquare(null)},[D,L]),P=t.useCallback(()=>{(null==D?void 0:D.setHoveredSquare)&&D.setHoveredSquare(null)},[D]),H=t.useCallback(e=>{if(!D)return!1;const{highlightedPiece:t,lockedPieces:n}=D,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[D,g]),E=D&&(null!==D.highlightedPiece||D.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Ut(s,a),o=null==(n=z[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=H(i),j=E&&g&&!y,N=E&&y;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Ot={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"‚ö°"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"üëë"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"üè∞"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"üíé"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"‚ú®"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"‚ö†Ô∏è"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"‚ùå"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"‚ö™"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"üî±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"üìå"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"üìç"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"üéØ"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"üí´"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"‚ö°"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"üë∏"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"üèÜ"}};const Xt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Ot[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Jt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"‚öîÔ∏è"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"‚ö°"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"üëë"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"üè∞"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"‚ú®"}},Ft={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:T,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:_,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Vt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:T,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:_,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(E,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Jt[e],s=n.icon;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(K,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Ft[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(I,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Xt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(G,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(W,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Complete visions have higher collector value"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(U,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use ‚Üê arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Watch patterns emerge in reverse"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(Y,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"‚å®Ô∏è Press Space to toggle"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use ‚Üí arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"üí° Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(J,{asChild:!0,children:u.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(F,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(V,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(R,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(J,{asChild:!0,children:u.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(V,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(Z,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx($,{}),re.capture.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx($,{}),re.checkmate.map((e,t)=>u.jsxs(R,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause ‚Ä¢ ‚Üê/‚Üí: Step ‚Ä¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Rt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx($e,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," ‚Üí ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Zt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(I,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(G,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(I,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},Qt=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:D,setReturningFromOrder:z}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[E,K]=t.useState(!1),[_,T]=t.useState(!1);se(p);const G=t.useMemo(()=>p?fe(p):null,[p]),W=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const U=async e=>{if(e&&!v)return void K(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(I,{variant:L?"outline":"default",size:"sm",onClick:()=>W(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(I,{variant:L?"default":"outline",size:"sm",onClick:()=>W(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves ‚Ä¢ ",c.result||"Game Finished",G&&u.jsxs("span",{className:"ml-2 text-primary",children:["‚Ä¢ ",G]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"‚ôî En Pensent ‚ôö"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(I,{onClick:()=>U(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(I,{onClick:()=>U(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(I,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):De;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(I,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;D({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),z(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(ze,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:E,onClose:()=>K(!1),onAuthRequired:()=>{K(!1),T(!0)},trigger:"download"}),u.jsx(Le,{isOpen:_,onClose:()=>T(!1)})]})},en=on;!function(){const e=on,t=sn();for(;;)try{if(246093===parseInt(e(203))/1*(-parseInt(e(186))/2)+-parseInt(e(159))/3*(parseInt(e(240))/4)+-parseInt(e(190))/5*(-parseInt(e(214))/6)+parseInt(e(215))/7+parseInt(e(231))/8*(-parseInt(e(181))/9)+-parseInt(e(230))/10*(-parseInt(e(170))/11)+parseInt(e(168))/12*(parseInt(e(173))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){const e=on,t={};t[e(246)]=function(e,t){return e===t},t[e(197)]=e(199);const n=t;let s=!0;return function(t,r){const a=e,i={czrLO:function(e,t){return n[on(246)](e,t)},oHoHo:n[a(197)]},o=s?function(){const e=a;if(r){if(i.czrLO(e(183),i[e(188)]))return;{const n=r[e(153)](t,arguments);return r=null,n}}}:function(){};return s=!1,o}}()(void 0,function(){const e=on;return tn.toString()[e(217)](e(220)+"+$").toString()[e(232)+"r"](tn).search(e(220)+"+$")});tn();const nn=function(){let e=!0;return function(t,n){const s=e?function(){const e=on;if(n){if("DPeqh"!==e(221)){const s=n[e(153)](t,arguments);return n=null,s}if(_0x3ca532){const t=_0x848f6[e(153)](_0x6a4437,arguments);return _0x76bdd5=null,t}}}:function(){};return e=!1,s}}();function sn(){const e=["t2zMzxiGzhjHDW","Dg9mB3DLCKnHCW","ntG3mxHUDLf2Ca","yxrLCW","u3bHy2u","CM4GDgHPCYiPka","B3zL","D2j0swi","C2HPzNrlzxK","ruPyDvK","vwrQu1q","nJb3u2XHweW","BMqGB24VB2zM","ody5AxPlCvLZ","khnOB3CGywXSkq","E30Uy29UC3rYDq","otuWodq2yKPXuM1q","ChjLDMvUDerLzG","C3rLBMvY","puXVyMj5lca/pq","u291BMqGBxv0zq","vg9Nz2XLihnVDq","rw5K","ywn0Aw9U","ndvus0zjsg0","ugXHEs9qyxvZzq","rgvWD0O","x19WCM90B19F","zxjYB3i","mtzIB21uB2O","yw5KigXLz2vUza","B0HVsg8","Aw5MBW","mJbcu0PWyui","zxnJyxbL","Bg9N","BhnJCMvLBIbTBW","purYyxCSievZyW","DgfIBgu","tMv4DcbTB3zL","uKDhD0i","yMLUza","v1rpywi","u2HVDYbRzxLIBW","yvvls0u","sg9Tzq","ntKZmtnzwwLMwhq","rw1Wt3a","zsaOzhvYAw5Nia","wevxyMi","A3rKAwG","ihrPBwvSAw5L","yxjKihnOB3j0yW","vg9Nz2XLigjVyq","uMv0DxjUihrVia","C1PLuvC","A2v5zg93BG","nJe5mZu2D3PoD3re","mZaXoty4ogHqthrKra","icH5B3vYihr1CG","C2vHCMnO","Bg9IyNKGlYbfEa","ChjVDg90ExbL","kcGOlISPkYKRkq","Aw9pB2u","Dg9tDhjPBMC","zu5zrxO","ie09txv0zsWGuG","uhjLDMLVDxmGBq","ywrKrxzLBNrmAq","whHvA0e","zhvYyxrPB24","s3PJEhm","mtuZmtbQDxv4uvK","ndKXmJi0z2P6zM94","y29UC3rYDwn0BW","s1DxB0K","DgvK","rxnJ","AxndB250zw50rq","DxrZ","z0LUA1i","CMvTB3zLrxzLBG","nJiWEfPmA0zS","r28GDg8Gzw5Kia","DgfYz2v0","vg9Nz2XLl2v4Ca","vg9Nz2XLigz1Ba","zxHJzxb0Aw9U","t0njvKK","A2v5","DhjHy2u","qxvfBKC","ru1tEuu","yxbWBhK","uMvZAwDUigDHBq","pvjLC2LNBIWGra","yxvSDa"];return(sn=function(){return e})()}nn(void 0,function(){const e=on,t={};t[e(204)]=function(e,t){return e+t},t[e(167)]=function(e,t){return e+t},t[e(238)]=e(172)+'ctor("retu'+e(162)+" )",t[e(207)]=e(189),t[e(166)]=e(245),t[e(212)]=e(195),t[e(229)]=function(e,t){return e<t};const n=t,s=function(){const t=e;let s;try{s=Function(n.EmpOp(n[t(167)]("return (function() ",n[t(238)]),");"))()}catch(r){s=window}return s}(),r=s.console=s.console||{},a=[e(192),"warn",n[e(207)],e(185),n[e(166)],n[e(212)],e(248)];for(let i=0;n[e(229)](i,a.length);i++){const t=nn.constructor[e(219)][e(198)](nn),n=a[i],s=r[n]||t;t[e(184)]=nn.bind(nn),t[e(222)]=s[e(222)][e(198)](s),r[n]=t}})();const rn=()=>{const e=on,t={};t[e(223)]="Shortcuts:"+e(224)+e(155)+e(194)+e(176)+"Help";const n=t,s={};s[e(228)]=4e3,o[e(189)](n[e(223)],s)};en(178),en(169);const an={};function on(e,t){e-=152;const n=sn();let s=n[e];if(void 0===on.NyDZkP){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};on.TJrqNG=r,on.SVRxZA={},on.NyDZkP=!0}const a=e+n[0],i=on.SVRxZA[a];if(i)s=i;else{const e=function(e){this.acPXEu=e,this.nYdXDx=[1,0,0],this.hCumbt=function(){return"newState"},this.gbdlUX="\\w+ *\\(\\) *{\\w+ *",this.nDoiYx="['|\"].+['|\"];? *}"};e.prototype.wtKayr=function(){const e=new RegExp(this.gbdlUX+this.nDoiYx).test(this.hCumbt.toString())?--this.nYdXDx[1]:--this.nYdXDx[0];return this.XGfVZF(e)},e.prototype.XGfVZF=function(e){return Boolean(~e)?this.ztXhpa(this.acPXEu):e},e.prototype.ztXhpa=function(e){for(let t=0,n=this.nYdXDx.length;t<n;t++)this.nYdXDx.push(Math.round(Math.random())),n=this.nYdXDx.length;return e(this.nYdXDx[0])},new e(on).wtKayr(),s=on.TJrqNG(s),on.SVRxZA[a]=s}return s}an[en(247)]="R",an.action=en(154)+en(205)+"play)";const cn={};cn[en(247)]="D",cn[en(180)]=en(157)+en(216)+"n)";const ln={};ln[en(247)]=en(235),ln[en(180)]=en(211)+en(218)+"it fullscreen";const un={};un[en(247)]="?",un[en(180)]=en(200)+en(209)+en(237);const dn={};dn[en(247)]=en(161),dn[en(180)]=en(182)+en(208);const mn={};mn[en(247)]="‚Üê",mn[en(180)]=en(225)+en(163);const xn={};xn[en(247)]="‚Üí",xn[en(180)]=en(196);const hn={};hn[en(247)]=en(202),hn.action="Go to start";const pn={};pn.key=en(179),pn[en(180)]=en(241)+en(171);const fn={key:"F"};fn[en(180)]=en(244)+en(193)+"de";const gn={};gn[en(247)]="C",gn[en(180)]=en(210)+"rd coordin"+en(160);const vn={};vn[en(247)]="L",vn[en(180)]=en(243)+en(187);const bn=Kn;!function(){const e=Kn,t=En();for(;;)try{if(257465===-parseInt(e(618))/1*(-parseInt(e(529))/2)+parseInt(e(520))/3+parseInt(e(526))/4*(parseInt(e(612))/5)+-parseInt(e(499))/6*(parseInt(e(518))/7)+-parseInt(e(558))/8+-parseInt(e(498))/9*(-parseInt(e(507))/10)+parseInt(e(577))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Kn,t={};t.nqEEN=e(540)+"+$";const n=t;return yn[e(602)]()[e(500)](n.nqEEN).toString()[e(492)+"r"](yn).search(n[e(494)])});yn();const wn=function(){const e=Kn,t={vHXGZ:function(e,t){return e===t}};t.ZRWnX=e(611);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Kn,r={};r[s(495)]="Stockfish "+s(554)+":";const a=r;if(t){if(n[s(575)](s(557),n[s(490)]))return _0x4bacd3[s(569)](a[s(495)],_0x25723d),_0x24b2dc(_0x1825db);{const n=t[s(584)](e,arguments);return t=null,n}}}:function(){};return s=!1,r}}();wn(void 0,function(){const e=Kn,t={btxfi:function(e,t){return e(t)},abwIo:function(e,t){return e+t},yfxXr:e(562)+e(607),UzXkf:e(535),QHOUN:e(547),JqrpX:e(586),OSSzg:function(e,t){return e<t}};let n;try{n=t[e(536)](Function,t[e(531)](t[e(527)]+(e(522)+e(565)+e(503)+" )"),");"))()}catch(a){n=window}const s=n[e(524)]=n.console||{},r=["log",e(631),t[e(513)],e(569),e(504),t[e(591)],t.JqrpX];for(let i=0;t[e(501)](i,r.length);i++){const t=wn[e(492)+"r"].prototype.bind(wn),n=r[i],a=s[n]||t;t.__proto__=wn[e(556)](wn),t[e(602)]=a.toString[e(556)](a),s[n]=t}})();const jn={p:100,n:320,b:330,r:500,q:900,k:2e4},Cn=jn,Nn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],kn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Mn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Dn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],zn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Bn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Ln(e){switch(e[Kn(610)+"e"]()){case"p":return Nn;case"n":return kn;case"b":return Mn;case"r":return Dn;case"q":return zn;case"k":return Bn;default:return[]}}function qn(e){const t=Kn,n={};n[t(552)]=function(e,t){return e<t},n[t(593)]=t(525),n[t(628)]=function(e,t){return e>t},n[t(580)]=function(e,t){return e===t},n.jOMIv=function(e,t){return e===t};const s=n;if(e[t(614)+"e"]())return"w"===e[t(613)]()?-1/0:1/0;if(e[t(609)]()||e[t(581)+"e"]())return 0;let r=0;const a=e[t(530)]();for(let o=0;s[t(552)](o,8);o++)for(let e=0;s[t(552)](e,8);e++)if(t(525)===s[t(593)]){const n=a[o][e];if(n){const a=Cn[n[t(506)]]||0,i=Ln(n[t(506)]);let c=0;if(s[t(628)](i[t(583)],0)){c=i[s[t(580)](n[t(549)],"w")?o:7-o][e]}const l=a+c;r+="w"===n.color?l:-l}}else switch(_0x1a9cdf.toLowerCase()){case"p":return _0x9763cc;case"n":return _0x5dcbf4;case"b":return _0x2c4b0d;case"r":return _0x3aedf6;case"q":return _0x24642c;case"k":return _0x402fa8;default:return[]}const i=e[t(585)]()[t(583)];return r+=s[t(570)](e.turn(),"w")?2*i:2*-i,r}function An(e,t,n,s,r){const a=Kn,i={uuGSm:function(e,t){return e(t)},bSfzs:"OqAnw",AHQcY:function(e,t){return e-t},hOkmT:function(e,t){return e===t},pBSyG:function(e,t){return e(t)},jPuwv:function(e,t,n,s,r,a){return e(t,n,s,r,a)},VQjLG:function(e,t){return e-t},VZNvJ:function(e,t){return e<t}};if(i.hOkmT(t,0)||e.isGameOver())return{score:i[a(572)](qn,e),move:null};const o={};o[a(493)]=!0;const c=e[a(585)](o);if(c[a(542)]((e,t)=>{const n=a,s={aBAnJ:function(e,t){return e(t)},hUnEP:function(e,t){return i.uuGSm(e,t)}};if(i[n(573)]==i[n(573)]){let s=0,r=0;return e[n(595)]&&(s+=Cn[e[n(595)]]||0),t[n(595)]&&(r+=Cn[t[n(595)]]||0),e[n(515)].includes("+")&&(s+=50),t.san[n(489)]("+")&&(r+=50),i[n(546)](r,s)}switch(_0x1fd8c7){case n(633):return _0x16672e(_0x2d7476);case n(532):return _0x5dc191(_0x140456);case"hard":return s[n(619)](_0x3b753a,_0x410a03);case n(521):return s[n(615)](_0x4f0403,_0x188f46);default:return s[n(619)](_0x5bb3b7,_0x3fee7f)}}),r){let r=-1/0,o=null;for(const u of c){e[a(541)](u);const c=i[a(623)](An,e,i[a(533)](t,1),n,s,!1);if(e.undo(),c[a(514)]>r&&(r=c.score,o=u),s<=(n=Math[a(627)](n,c[a(514)])))break}const l={};return l[a(514)]=r,l[a(541)]=o,l}{let r=1/0,o=null;for(const u of c){e[a(541)](u);const c=An(e,t-1,n,s,!0);if(e[a(502)](),i[a(616)](c[a(514)],r)&&(r=c[a(514)],o=u),(s=Math.min(s,c[a(514)]))<=n)break}const l={};return l[a(514)]=r,l.move=o,l}}function Sn(e){const t=Kn,n={};n[t(564)]=function(e,t){return e===t},n[t(625)]=function(e,t){return e>t},n.fBfmb=function(e,t){return e<t},n[t(534)]=function(e,t){return e!==t},n[t(563)]="oENwf",n.qgmYR=function(e,t){return e*t};const s=n,r={};r[t(493)]=!0;const a=e[t(585)](r);if(s[t(564)](a[t(583)],0))return null;const i=a[t(630)](e=>e[t(595)]);if(s.rESPx(i[t(583)],0)&&s[t(561)](Math[t(578)](),.3)){if(!s[t(534)](s[t(563)],t(505)))return i[Math[t(545)](Math.random()*i.length)];_0x474c62=_0x4adec3}return a[Math.floor(s[t(604)](Math[t(578)](),a[t(583)]))]}function Pn(e){const t=Kn,n={SoXUz:function(e,t){return e(t)},UrIPc:function(e,t){return e-t},dcjFp:function(e,t){return e===t},VESEr:function(e,t){return e<t}},s={};s[t(493)]=!0;const r=e[t(585)](s);if(n[t(487)](r[t(583)],0))return null;let a=null,i=n[t(487)](e[t(613)](),"w")?-1/0:1/0;for(const o of r){e[t(541)](o);const n=qn(e);e[t(502)](),"w"===e.turn()?n>i&&(i=n,a=o):n<i&&(i=n,a=o)}if(n[t(548)](Math.random(),.2)){const s=r.sort((s,r)=>{const a=t;e.move(s);const i=n[a(594)](qn,e);e[a(502)](),e[a(541)](r);const o=qn(e);return e[a(502)](),"w"===e[a(613)]()?n[a(510)](o,i):i-o}),a=s[t(590)](0,Math.min(3,s[t(583)]));return a[Math.floor(Math[t(578)]()*a[t(583)])]}return a}function Hn(e){const t=Kn,n={EThmR:function(e,t){return e===t}};return An(e,4,-1/0,1/0,n[t(512)](e[t(613)](),"w"))[t(541)]}function En(){const e=["CM4GDgHPCYiPka","zxHJzxb0Aw9U","B0voD2y","DhLWzq","mJbrqM5itfy","sKTytLG","EejKr2G","vxjjugm","uMvHBcbotLvfia","rvrOBvi","vxPyA2y","C2nVCMu","C2fU","C3rYzw5NDgG","idqTCgX5ihnLyq","mtr2q2vIvKq","yuH0s2G","nZe2mtG3wuDJt2Lp","C3rVy2TMAxnO","E30Uy29UC3rYDq","uxfyAwy","y29UC29Szq","twPvDhe","mJC2ofL6BhnzCG","Ewz4whi","EvrpufK","odK0mdGYCxj4EhLs","yM9HCMq","ywj3sw8","BwvKAxvT","vLfQteC","sLvqB3C","Aw5MBW","yNr4zMK","CMXxz0u","yLPKtLy","z1rftvu","kcGOlISPkYKRkq","Bw92zq","C29YDa","t2LzuM0","AxrPB24","zMXVB3i","quHry1K","DgfIBgu","vKvtrxi","y29SB3i","uMftzNy","uLDzuMC","AxHKzNi","FJGWma","Bw92zsbLCNjVCG","zcbTB2rL","yMLUza","q3LJwMm","mZC5nZm0nhPID2Twuq","zgvWDgG","CMvUzxnZ","zKjMBwi","CMv0DxjUicHMDq","zLj6uLe","thnjD3G","y3rVCIGICMv0Dq","zgvZy3jPChrPBW","DgvYAwfSigf3yq","y2nwufi","zxjYB3i","AK9nsxy","twfZDgvY","CejtEuC","yLnMENm","zNjVBq","DKHyr1O","yw5KBwfZDgvYia","mtKXodqXmu1nA2LbuW","CMfUzg9T","r0PPCvO","vvjoz20","AxntDgfSzw1HDa","zgPSuwG","BgvUz3rO","yxbWBhK","Bw92zxm","DhjHy2u","AwnZigfUzcbTyq","DMn0uxy","wu9WsMm","C2XPy2u","uuHpvu4","v1fqA2y","B2LAwKq","u29yvxO","y2fWDhvYzwq","ywnRihrVigHHCG","FJiWmda","CgjADeG","DMfSDwf0Aw9Ula","twfRzxmGCMfUza","FJmYmda","Dg9tDhjPBMC","DKDSwxe","CwDTwvi","FJe0mda","CMvK","BMn0Aw9UkcKG","AgfYza","AxneCMf3","Dg9mB3DLCKnHCW","DfHwv2i","ntbXyLP1DKq","DhvYBG","AxndAgvJA21HDa","AfvUrva","vLPoDKO","ignHChr1CMvZ","mu9yqNfxBW","yujbBKO","ug1cBfC","D2z5BhG","AeXRz1m","ALb1D3y","thHKExu","CKvtuhG","EgnkBMK","Bwf4","z1nUzxq","quLKyK8","zMLSDgvY","D2fYBG","B20GBw92zxmSia","zwfZEq","qMvNAw5Uzxi","B2nJyxnPB25HBa","zgnQrNa","u3rVy2TMAxnOia","Aw5JBhvKzxm","wLjxBLG","yw5HBhL6zvbVCW","y29UC3rYDwn0BW","DMvYyM9Zzq","BNffru4","Ew5ryNy","CMf0Aw5N","BgfIzwW","mJq3otmYtKPmr29j","ntCWmtyYswTluMT2","C2vHCMnO","t1ntEMC","Dw5KBW"];return(En=function(){return e})()}function Kn(e,t){e-=485;const n=En();let s=n[e];if(void 0===Kn.kJRpZT){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Kn.wZFhHx=r,Kn.fDGLtw={},Kn.kJRpZT=!0}const a=e+n[0],i=Kn.fDGLtw[a];if(i)s=i;else{const e=function(e){this.UwaFxL=e,this.HFDCCp=[1,0,0],this.HGDMaQ=function(){return"newState"},this.sRlSal="\\w+ *\\(\\) *{\\w+ *",this.mvFgCE="['|\"].+['|\"];? *}"};e.prototype.vnkEOB=function(){const e=new RegExp(this.sRlSal+this.mvFgCE).test(this.HGDMaQ.toString())?--this.HFDCCp[1]:--this.HFDCCp[0];return this.KnSLgl(e)},e.prototype.KnSLgl=function(e){return Boolean(~e)?this.VFJJrJ(this.UwaFxL):e},e.prototype.VFJJrJ=function(e){for(let t=0,n=this.HFDCCp.length;t<n;t++)this.HFDCCp.push(Math.round(Math.random())),n=this.HFDCCp.length;return e(this.HFDCCp[0])},new e(Kn).vnkEOB(),s=Kn.wZFhHx(s),Kn.fDGLtw[a]=s}return s}const In={id:"easy"};In[bn(497)]=bn(485),In[bn(566)+"n"]=bn(600)+bn(632)+bn(486)+bn(617),In[bn(496)]=bn(553);const _n={};_n.id=bn(532),_n[bn(497)]="Club Player",_n[bn(566)+"n"]="Basic tact"+bn(587)+bn(567)+bn(560),_n[bn(496)]=bn(605);const Tn={};Tn.id=bn(608),Tn[bn(497)]=bn(571),Tn[bn(566)+"n"]="Advanced e"+bn(599)+bn(517)+"rch depth",Tn[bn(496)]=bn(597);const Gn={id:"stockfish"};Gn[bn(497)]=bn(488)+"16",Gn.description=bn(511)+"engine, gr"+bn(576)+bn(516),Gn[bn(496)]=bn(601),Gn["enginePowe"+bn(606)]=!0;const Wn=[In,_n,Tn,Gn];function Un(){const e=["kcGOlISPkYKRkq","yvH1Afm","vMn5AhO","AxntD2LWAw5N","zxjYB3i","y2XPzw50wq","ywjZ","u29yzgS","y3vYCMvUDa","mtiWDvHtwxr6","DgfIBgu","yxDfyuW","BKnQzM0","C3DPCgvpzMzZzq","mJm3ndu4wvPMs01S","yxbWBhK","y3vYCMvUDfG","y2XPzw50wa","y29UC3rYDwn0BW","CwvZDvy","vhDHDMu","mtaXmta2odb0tKLLENm","yNHxzva","quXmEe0","x19WCM90B19F","nJm4me1NzejWyG","zxDoDue","mJK5mJqXsgrnvKrl","D2fYBG","C2vHCMnO","nM12AKXNyG","mteWmtHsA1fsugC","mteZnJKYmdbJquLOA04","zg9ADuW","DhjIA2m","Bg9N","DLzfqKO","uhLmsMe","B25nB3vZzvvW","C3rHCNrz","uMDAB3G","B25nB3vZzuXLyq","vwTXr3y","BgvUz3rO","C3rHCNry","rwnMB2G","qLbVv1O","ndy4ntuXnevXCLrjCW","C0PMDKq","CM4GDgHPCYiPka","y29UC29Szq","sLvnBMm","DhjHy2u","B25uB3vJAe1VDG","B25uB3vJAfn0yq","yMLUza","sKrYqMK","BMTJsg8","r3brCvq","y3vYCMvUDfK","ndK2ofjor0nAAq","Ehj0B3e","y3rVCIGICMv0Dq","DwDcy2W","ENLeq0m","yxbWwui","ChjVDg90ExbL","yw9ivKS","C2nKAvi","BMn0Aw9UkcKG","q05Hvhi","CKPiu00","CMv0DxjUicHMDq","DNvdyKS","sfrZAwy","Dg9tDhjPBMC","Dg91y2HLCW"];return(Un=function(){return e})()}!function(){const e=Xn,t=Un();for(;;)try{if(915554===parseInt(e(263))/1*(parseInt(e(247))/2)+parseInt(e(280))/3+-parseInt(e(242))/4*(-parseInt(e(258))/5)+parseInt(e(293))/6*(-parseInt(e(264))/7)+-parseInt(e(254))/8+parseInt(e(260))/9+parseInt(e(265))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Yn=function(){const e=Xn,t={};t[e(300)]=function(e,t){return e!==t},t[e(267)]=e(255),t[e(306)]=e(273);const n=t;let s=!0;return function(e,t){const r={xrtoq:function(e,t,n){return e(t,n)}},a=s?function(){const s=Xn;if(n[s(300)](n[s(267)],n[s(306)])){if(t){const n=t[s(248)](e,arguments);return t=null,n}}else{if(!_0x1a0f12)return;r[s(294)](_0x3e382e,_0x13d9fb[s(250)],_0x43788b[s(238)])}}:function(){};return s=!1,a}}()(void 0,function(){const e=Xn,t={};t.HTsif=e(233)+"+$";const n=t;return Yn[e(231)]().search(n.HTsif).toString()[e(251)+"r"](Yn)[e(262)](n[e(230)])});Yn();const On=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();On(void 0,function(){const e=Xn,t={tqOCb:function(e,t){return e+t},wThdG:function(e,t){return e+t},ALLxM:function(e){return e()},eqKzc:e(268),SoXdk:"info",qesuV:e(237),roCnQ:e(243),oWuGq:e(285),LDtAH:function(e,t){return e<t},Twave:e(298)},n=t[e(256)](function(){const n=e;let s;try{s=Function(t.tqOCb(t.wThdG(n(305)+n(302),"{}.constru"+n(295)+n(282)+" )"),");"))()}catch(r){s=window}return s}),s=n[e(283)]=n[e(283)]||{},r=[t.eqKzc,e(261),t[e(240)],t[e(252)],"exception",t.roCnQ,t.oWuGq];for(let a=0;t.LDtAH(a,r[e(276)]);a++)if(t[e(253)]===e(298)){const t=On.constructor.prototype[e(288)](On),n=r[a],i=s[n]||t;t[e(257)]=On[e(288)](On),t.toString=i.toString[e(288)](i),s[n]=t}else{const t=_0x877bc3[e(251)+"r"][e(299)][e(288)](_0x50477b),n=_0x2105ac[_0x13cbcd],s=_0x264ba9[n]||t;t[e(257)]=_0x29b321.bind(_0x3bae87),t[e(231)]=s.toString[e(288)](s),_0x4c7d51[n]=t}})();function Xn(e,t){e-=230;const n=Un();let s=n[e];if(void 0===Xn.YpOBcm){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Xn.RbNFMu=r,Xn.pGGXzM={},Xn.YpOBcm=!0}const a=e+n[0],i=Xn.pGGXzM[a];if(i)s=i;else{const e=function(e){this.RipUTS=e,this.DKzfEN=[1,0,0],this.QKnxMS=function(){return"newState"},this.ZFXJjB="\\w+ *\\(\\) *{\\w+ *",this.uyWEFD="['|\"].+['|\"];? *}"};e.prototype.GVjSRC=function(){const e=new RegExp(this.ZFXJjB+this.uyWEFD).test(this.QKnxMS.toString())?--this.DKzfEN[1]:--this.DKzfEN[0];return this.HyXvDK(e)},e.prototype.HyXvDK=function(e){return Boolean(~e)?this.myopMt(this.RipUTS):e},e.prototype.myopMt=function(e){for(let t=0,n=this.DKzfEN.length;t<n;t++)this.DKzfEN.push(Math.round(Math.random())),n=this.DKzfEN.length;return e(this.DKzfEN[0])},new e(Xn).GVjSRC(),s=Xn.RbNFMu(s),Xn.pGGXzM[a]=s}return s}const Jn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Te,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Te,description:"15 minutes"}],Fn=["bot","create","join"],Vn=()=>{var e,n,s,l,d,x,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:L}=Gt(),[q,A]=t.useState("lobby"),[S,H]=t.useState(!1),[E,K]=t.useState(!1),[_,G]=t.useState("bot"),[W,U]=t.useState("human"),[Y,O]=t.useState("medium"),[X,J]=t.useState("blitz_5"),[F,V]=t.useState("hotCold"),[R,Z]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=vt(Ce,Ne),[Me,De]=t.useState([]),[ze,qe]=t.useState(!1),[Ae,Te]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Fn.indexOf(_);let n;n="left"===e?Math.min(t+1,Fn.length-1):Math.max(t-1,0),n!==t&&(L.select(),G(Fn[n]))},[_,L]),{swipeOffset:xt,isSwiping:pt,handlers:ft}=((e={})=>{const n=Xn,s={awEaL:function(e,t){return e-t},GpQqT:function(e,t){return e(t)},ugBcl:function(e,t){return e>t},nCjfm:function(e){return null==e?void 0:e()},JUMnc:function(e,t){return e-t},zyDCC:"DBzyl",Vcyhz:function(e,t){return e>t},rJHSM:function(e,t){return e>t},aXuhS:function(e,t){return e===t},faJZf:n(278),JDrBi:function(e,t,n){return e(t,n)},sViYg:n(281),PyLJa:n(303),doZuL:function(e){return e()},scdiR:function(e,t){return e(t)},ewNuA:function(e,t,n){return e(t,n)},BPoWZ:function(e,t,n){return e(t,n)},jhvqu:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s[n(301)](t.useState,u),[x,h]=s[n(291)](t.useState,!1),p={};p[n(277)]=0,p[n(272)]=0,p[n(249)]=0,p[n(292)]=0,p.isSwiping=!1;const f=t.useRef(p),g=s[n(289)](t.useCallback,(e,t)=>{const s=n,r={};r.startX=e,r[s(272)]=t,r[s(249)]=e,r[s(292)]=t,r[s(236)]=!0,f.current=r,h(!0)},[]),v=s[n(259)](t.useCallback,(e,t)=>{const r=n;if(!f[r(241)].isSwiping)return;f[r(241)][r(249)]=e,f[r(241)][r(292)]=t;const a=e-f.current[r(277)],i=s.awEaL(t,f[r(241)].startY),o={};o.x=a,o.y=i,s.GpQqT(m,o)},[]),b=t.useCallback(()=>{const e=n,t={nkcHo:function(e,t){return s.JUMnc(e,t)}};if("LQrKf"===s[e(297)]){if(!_0x78aa3d[e(241)][e(236)])return;_0x4a0751[e(241)][e(249)]=_0x101163,_0xeb2945[e(241)][e(292)]=_0x24fb16;const n=t[e(290)](_0x5a94db,_0xacf022[e(241)][e(277)]),s=_0x23ea62-_0x3844e0[e(241)].startY,r={};r.x=n,r.y=s,_0x312cfe(r)}else{if(!f.current[e(236)])return;const t=s[e(244)](f[e(241)][e(249)],f[e(241)][e(277)]),n=s[e(284)](f.current[e(292)],f[e(241)][e(272)]),a=Math[e(239)](t),u=Math.abs(n);a>u&&s[e(296)](a,r)?s[e(235)](t,0)?s[e(245)](o):s[e(245)](i):u>a&&s[e(304)](u,r)&&(n>0?s[e(234)](e(278),s.faJZf)?null==l||l():s[e(296)](_0x2f0ca2,0)?s.nCjfm(_0x413c2b):s[e(245)](_0x20a359):null==c||c()),f[e(241)].isSwiping=!1,h(!1);m({x:0,y:0})}},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n,s=e[t(232)][0];g(s.clientX,s[t(238)])},[g]),w=t.useCallback(e=>{const t=n,r=e.touches[0];s[t(289)](v,r.clientX,r[t(238)])},[v]),j=s[n(289)](t.useCallback,()=>{b()},[b]),C=s[n(279)](t.useCallback,e=>{const t=n;a&&g(e[t(250)],e[t(238)])},[a,g]),N=s[n(289)](t.useCallback,e=>{const t=n;if(s.sViYg===t(281)){if(!a)return;v(e[t(250)],e.clientY)}else({vVEBJ:function(e){return null==e?void 0:e()}})[t(269)](_0x52f522)},[a,v]),k=t.useCallback(()=>{const e=n;if(e(275)!==s[e(270)]){if(!a)return;s[e(266)](b)}else _0x1aa693()},[a,b]),M=s.jhvqu(t.useCallback,()=>{const e=n;a&&f[e(241)][e(236)]&&b()},[a,b]),D={};D[n(287)+"rt"]=y,D[n(286)+"e"]=w,D.onTouchEnd=j,D.onMouseDown=C,D.onMouseMove=N,D[n(271)]=k,D[n(274)+"ve"]=M;const z={};return z[n(246)+"t"]=d,z[n(236)]=x,z.handlers=D,z})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Bt,resignGame:Lt,offerDraw:qt,loadGame:At,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=zt,n={UEvBR:function(e,t){return e(t)},XipUa:function(e,t){return e!==t},LkPcz:function(e,t){return e(t)},HfWLL:function(e,t){return e===t},pNeZa:e(414),YrIAI:function(e,t){return e(t)},lQeHB:e(396),lGACC:function(e,t){return e(t)},IjXpw:e(459),xjBst:function(e,t){return e===t},SKvNK:"taJBW",bIXlS:function(e,t){return e!==t},iDJll:e(413),fOLgm:function(e,t){return e(t)},jiers:"KDdVO",tpUqb:"LYkTw",ztRQW:e(417)+e(462)+e(629),EnSls:e(460),AiSZc:e(621),qAPgs:e(496)+"s",JDkUn:e(658)+"hanges",FmpTQ:e(412),CqLJP:function(e,t){return e!==t},DTDkk:function(e,t){return e(t)},MYIjs:function(e,t){return e(t)},ROdLz:e(452)+"s",FfHLw:e(617),oqMyJ:function(e,t){return e instanceof t},faPjB:e(417)+e(495),yCxWM:function(e,t){return e>=t},XaXed:e(589),JxmNs:e(647)+e(473)+e(646),aTKIR:e(454),nesee:e(619)+e(380)+"in a game",HCTUj:e(429)+e(518)+" game",BmLDg:"active",oBrzj:e(632),PwCsA:"Joined gam"+e(375)+" playing a"+e(598),oLQYt:function(e,t){return e instanceof t},dXlTw:function(e,t){return e(t)},JUEpc:function(e,t){return e(t)},NCLRt:"challenge_"+e(490),IkAip:function(e,t){return e(t)},mdSSj:function(e,t){return e(t)},LUzIE:function(e,t){return e>=t},rtoPV:function(e,t){return e(t)},ovFEE:function(e,t){return e(t)},yBRco:function(e,t){return e instanceof t},SeutS:function(e,t){return e!==t},FggMQ:e(574),SjwrU:e(450),ShtlW:function(e,t){return e(t)},RXwyj:"checkmate",kXLAg:e(546),PHmXD:function(e,t){return e(t)},dDDEG:function(e,t){return e(t)},unUzg:function(e,t){return e===t},StFcz:function(e,t){return e===t},RGTWg:function(e,t){return e+t},surUG:e(654),cTNvp:function(e,t,n,s){return e(t,n,s)},MxMaY:e(582),dmCWH:function(e,t){return e(t)},ireLV:e(575),tLwFq:function(e,t){return e(t)},omlxY:e(514),cJOEs:"cnwtX",gSKAB:function(e,t){return e!==t},sVEYm:"profiles",NdMEr:"user_id",tjzDe:function(e,t){return e===t},cHIeb:e(467),uzdtU:e(588),TeuTa:e(610)+"ed",ZuJCQ:e(616)+" sent (opp"+e(614)+"-accepts i"+e(499)+e(656),EADso:e(508),kiASr:function(e,t,n){return e(t,n)},WYdFN:function(e,t){return e===t},VdAne:function(e,t,n){return e(t,n)},qHnbK:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=t.useState(new a),[d,m]=n[e(479)](t.useState,null),[x,h]=n.LkPcz(t.useState,!1),[p,f]=t.useState(null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=Mt(),{playSound:w}=n[e(553)](vt,b,y);t.useRef("");const j=d?d[e(431)+e(628)]===(null==s?void 0:s.id)?"w":d[e(635)+"rId"]===(null==s?void 0:s.id)?"b":null:null,C=n[e(424)](null==d?void 0:d[e(386)],e(537))&&n[e(605)](l[e(568)](),j);n[e(553)](t.useEffect,()=>{const t=e,r={kgaZf:function(e,t){return n[Dt(519)](e,t)},lqGUO:n.iDJll,PdeXn:"wynyO",sxOsn:function(e,t){return n.fOLgm(e,t)},KiGYM:n[t(578)],xJozt:n[t(390)],xUaam:function(e,t){return e(t)},PKYOI:n[t(405)],AAfhs:t(487),eVMuG:n[t(642)]};if(!(null==d?void 0:d.id))return;const o=i[t(501)]("game-"+d.id).on(t(658)+"hanges",{event:t(545),schema:n[t(539)],table:n.qAPgs,filter:t(517)+d.id},e=>{const n=t,i=e.new;if(i.status===n(654)&&r.kgaZf(d[n(386)],n(654))&&(i.result===r.lqGUO?n(587)===r[n(451)]?_0x9456f3=_0x4f4970:w(n(413)):i[n(548)]===(null==s?void 0:s.id)?r[n(407)](w,n(550)):r[n(532)]===r[n(624)]?(_0x30e2f0[n(389)+n(557)](_0x468618),_0x21ce9b["removeChan"+n(557)](_0x3ca95b)):w(n(521))),m(e=>e?{...e,status:i[n(386)],result:i[n(403)],pgn:i[n(609)],currentFen:i[n(418)+"n"],moveCount:i[n(439)],whiteTimeRemaining:i[n(662)+n(530)],blackTimeRemaining:i["black_time"+n(530)],winnerId:i[n(548)],blackPlayerId:i[n(421)+n(406)],startedAt:i[n(608)]}:null),i[n(418)+"n"]){const e=new a(i.current_fen);u(e)}})[t(480)](),c=i[t(501)](t(533)+d.id).on(n[t(560)],{event:n[t(426)],schema:t(621),table:"chess_moves",filter:"game_id=eq."+d.id},e=>{const a=t,i=e[a(522)],o=i[a(594)];if(o&&o[a(652)]>=4){const e=o[a(464)](2,4);n[a(648)](v,t=>new Set([...t,e]))}if(n[a(445)](i[a(373)],null==s?void 0:s.id)){const e=i[a(603)];e[a(474)]("#")?n.LkPcz(w,"checkmate"):e[a(474)]("+")?n[a(424)](n[a(411)],"wkuwy")?r[a(596)](_0x578f3c,!1):n.YrIAI(w,n[a(551)]):e[a(474)]("x")?n[a(562)](w,n[a(631)]):n.HfWLL(e,"O-O")||n[a(424)](e,a(546))?w(a(454)):n[a(430)](a(561),n[a(400)])?n[a(648)](w,"move"):_0x419048[a(470)](r[a(404)],_0x4186d6)}})[t(480)]();return()=>{const e=t;if({}[e(489)]=e(572)+e(440),r[e(466)]===r[e(458)]){let t;try{t=_0x1ec5e2(wVzhoE[e(489)]+"{}.constru"+e(602)+e(422)+" ));")()}catch(n){t=_0x1d6a67}return t}i[e(389)+e(557)](o),i[e(389)+e(557)](c)}},[null==d?void 0:d.id,null==d?void 0:d.status,null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={oEtNJ:function(e,t){return e(t)},aTwaX:function(e,t){return n[Dt(409)](e,t)},WmVXq:s(636),RimjZ:function(e,t){return e>=t}};n[s(655)](h,!0),f(null);try{const{data:e,error:o}=await i[s(475)](n[s(433)]).select("*").eq("id",t)[s(393)+"e"]();if(o)throw o;if(!e)throw new Error(s(569)+"ound");const c={};c.id=e.id,c[s(431)+s(628)]=e[s(408)+s(406)],c[s(635)+s(628)]=e[s(421)+s(406)],c[s(386)]=e[s(386)],c[s(403)]=e.result,c[s(609)]=e[s(609)]||"",c.currentFen=e[s(418)+"n"],c[s(377)]=e[s(439)]||0,c[s(416)+"l"]=e[s(630)+"ol"],c["whiteTimeR"+s(436)]=e[s(662)+s(530)],c[s(601)+s(436)]=e[s(383)+s(530)],c[s(577)+"te"]=e[s(427)+s(607)],c[s(449)+"te"]=e[s(465)+"tte"],c[s(482)+s(646)]=e[s(649)+s(490)],c[s(388)]=e[s(548)],c[s(529)]=e[s(641)],c.startedAt=e[s(608)],n.MYIjs(m,c);const l=new a(e[s(418)+"n"]);u(l);const d={};d[s(415)]=!0;const{data:x}=await i[s(475)](n[s(593)])[s(447)](s(594)).eq(n[s(379)],t)[s(469)](s(509)+"r",d);if(x){const e=new Set;x[s(484)](t=>{const n=s,a={ZkAsF:function(e,t){return r[Dt(563)](e,t)}};r[n(382)](n(636),r[n(581)])?a[n(640)](_0x639b4e,!1):t[n(594)]&&r[n(634)](t[n(594)].length,4)&&e[n(395)](t.move_uci[n(464)](2,4))}),n[s(453)](v,e)}}catch(o){n.fOLgm(f,n[s(622)](o,Error)?o.message:n.faPjB)}finally{h(!1)}},[]),k=t.useCallback(async(t,r,a)=>{const c=e,l=function(e,t){return n[Dt(540)](e,t)};if(!s){if(c(589)===n[c(397)])return o[c(470)](c(619)+"n in to cr"+c(437)+"e"),null;{const e=_0x4c98ed[c(425)][c(627)];_0x142f52[c(512)](c(536)+_0x1267d4[c(425)][c(491)]+" ("+(l(e,0)?"+":"")+e+")")}}h(!0),f(null);try{const e=St[t]||null,{data:l}=await i.rpc(n[c(525)]),u={};u[c(408)+c(406)]=s.id,u[c(386)]=c(570),u.time_control=t,u.white_time_remaining=e,u[c(383)+c(530)]=e,u[c(427)+"tte"]=a,u[c(493)]=r,u["challenge_"+c(490)]=l;const{data:d,error:m}=await i[c(475)]("chess_games")[c(472)](u)[c(447)]().single();if(m)throw m;return o.success(r?"Game creat"+c(419)+"g for oppo"+c(659):c(504)+c(661)+l),await N(d.id),d.id}catch(u){const e=n[c(622)](u,Error)?u[c(446)]:"Failed to "+c(441)+"e";return n[c(562)](f,e),o[c(470)](e),null}finally{n[c(554)](h,!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e,c={};c.mlOQo=n[a(644)];const l=c;if(!s)return o[a(470)](n[a(571)]),!1;h(!0),n.fOLgm(f,null);try{const{data:e,error:c}=await i[a(475)]("chess_games")[a(447)]("*").eq("id",t)[a(393)+"e"]();if(c)throw c;if(!e)throw new Error(a(569)+"ound");if(n[a(519)](e[a(386)],a(570)))throw new Error("Game already started");if(e["white_play"+a(406)]===s.id)throw new Error(n.HCTUj);const{error:l}=await i[a(475)]("chess_games")[a(585)]({black_player_id:s.id,black_palette:r,status:n.BmLDg,started_at:(new Date)[a(552)+"g"](),last_move_at:(new Date).toISOString()}).eq("id",t);if(l)throw l;return n[a(453)](w,n[a(443)]),o.success(n.PwCsA),await N(t),!0}catch(u){if("tlYjd"===a(438)){const e=n.oLQYt(u,Error)?u.message:a(417)+a(507);return n[a(434)](f,e),o[a(470)](e),!1}_0x406b7b(l[a(448)])}finally{n.fOLgm(h,!1)}},[s,N,w]),D=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(470)](n[a(571)]),!1;n[a(576)](h,!0),f(null);try{const{data:e,error:s}=await i[a(475)](a(496)+"s")[a(447)]("id").eq(n[a(481)],t.toUpperCase()).eq(a(386),a(570))[a(393)+"e"]();if(s)throw s;if(!e)throw new Error("Invalid or expired c"+a(500)+a(646));return await M(e.id,r)}catch(c){const e=c instanceof Error?c[a(446)]:"Failed to "+a(565)+"de";return n[a(476)](f,e),o[a(470)](e),!1}finally{n[a(442)](h,!1)}},[s,M]),z=n[e(524)](t.useCallback,async(t,r,c)=>{const m=e,x={};x[m(376)]="draw";const h=x;if(!d||!s||!C)return!1;try{if(n[m(471)](n[m(528)],n[m(542)])){const e={};e[m(475)]=t,e.to=r,e.promotion=c;const x=l[m(515)](e);if(!x)return n.ShtlW(w,m(604)),!1;if(l[m(527)+"e"]())w(n[m(505)]);else if(l[m(401)]())w(m(396));else if(x[m(378)])n[m(476)](w,n[m(631)]);else if(x[m(457)]===m(391)||n[m(430)](x[m(457)],n.kXLAg))w(n.aTKIR);else if("sszMY"!==m(497)){const e={RWnrH:function(e,t){return n[m(531)](e,t)}},t=new _0x22e732;_0x290118[m(484)](n=>{const s=m;n[s(594)]&&e[s(541)](n[s(594)][s(652)],4)&&t[s(395)](n.move_uci.substring(2,4))}),n[m(392)](_0xa02156,t)}else n[m(566)](w,m(515));n.dDDEG(u,new a(l[m(483)]())),v(e=>new Set([...e,r]));const p=l.pgn(),f=l[m(483)]();let g=null,b=null,y=n.BmLDg;if(l[m(643)]()&&(y="completed",l[m(527)+"e"]()?(g=n[m(564)](l.turn(),"w")?"black_wins":m(588),b=n[m(606)](l.turn(),"w")?d[m(635)+m(628)]:d[m(431)+m(628)]):g=n[m(381)]),await i[m(475)](n[m(593)]).insert({game_id:d.id,player_id:s.id,move_number:d.moveCount+1,move_san:x[m(457)],move_uci:n.RGTWg(t+r,c||""),fen_after:f}),await i[m(475)](m(496)+"s")[m(585)]({pgn:p,current_fen:f,move_count:d[m(377)]+1,last_move_at:(new Date)[m(552)+"g"](),status:y,result:g,winner_id:b,completed_at:y===n.surUG?(new Date)[m(552)+"g"]():null}).eq("id",d.id),n.unUzg(y,m(654))&&g){if(await n[m(428)](B,d["whitePlaye"+m(628)],d[m(635)+m(628)],g),g===m(413))w(m(413));else if(b===(null==s?void 0:s.id)){if(!n[m(409)](m(486),n[m(526)])){const e=_0x546b9a?function(){if(_0x2ee99e){const e=_0x2bc693.apply(_0x1e123b,arguments);return _0x1aca38=null,e}}:function(){};return _0x5eb5bb=!1,e}n[m(612)](w,m(550))}else n[m(456)]===m(575)?n[m(479)](w,m(521)):_0x52f07d=m(413);g===m(588)?o[m(555)](n[m(424)](j,"w")?n.omlxY:m(498)+"!"):"black_wins"===g?o[m(555)]("b"===j?m(514):m(488)+"!"):n[m(385)]==n[m(385)]?o[m(512)](ht(l)):_0xfa5458(h[m(376)])}return!0}n[m(410)](_0xb1d4a,n[m(579)](_0x5d1347,_0x4da117)?_0x242bad[m(446)]:n[m(502)])}catch(p){return!1}},[l,d,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(t&&r&&"abandoned"!==a)try{const{data:e}=await i[l(475)]("profiles")[l(447)](l(580)+l(468)).in("user_id",[t,r]);if(!e||n[l(651)](e.length,2))return;const u=e[l(387)](e=>e.user_id===t),d=e[l(387)](e=>e[l(513)]===r);if(!u||!d)return;const m=u[l(492)]||1200,x=d[l(492)]||1200,h=a===n.iDJll?n[l(381)]:a,p=n[l(428)](c,m,x,h),f={};f[l(492)]=p[l(425)][l(491)];const g={};if(g.elo_rating=p[l(520)].newRating,await Promise.all([i[l(475)](l(402))[l(585)](f).eq(l(513),t),i[l(475)](n[l(374)])[l(585)](g).eq(n[l(399)],r)]),n[l(650)](null==s?void 0:s.id,t)){const e=p.white.change;o.info("Rating: "+p.white[l(491)]+" ("+(n[l(531)](e,0)?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p.black[l(627)];o[l(512)](l(536)+p.black[l(491)]+" ("+(e>=0?"+":"")+e+")")}}catch(u){}},[s]),L=n[e(553)](t.useCallback,async()=>{const t=e;if(!d||!s||!j)return;const r="w"===j?n[t(538)]:n.uzdtU,a="w"===j?d["blackPlaye"+t(628)]:d[t(431)+t(628)];await i[t(475)](n[t(433)])[t(585)]({status:n[t(420)],result:r,winner_id:a,completed_at:(new Date).toISOString()}).eq("id",d.id),await n[t(428)](B,d[t(431)+"rId"],d[t(635)+t(628)],r),o[t(512)](n[t(506)])},[d,s,j,B]),q=n[e(618)](t.useCallback,async()=>{const t=e;o.info(n.ZuJCQ),d&&(await i[t(475)](t(496)+"s")[t(585)]({status:n[t(420)],result:n[t(381)],completed_at:(new Date).toISOString()}).eq("id",d.id),await B(d[t(431)+t(628)],d[t(635)+t(628)],n[t(381)]))},[d,B]),A=t.useCallback(t=>{const s=e;if(!n[s(651)](n.EADso,"rJEFD")){const e={};return e[s(567)]=t,e[s(435)]=!0,l[s(584)](e).map(e=>e.to)}{const e=_0x17de97[s(556)+"r"][s(615)][s(663)](_0x27364d),t=_0x91f2c0[_0x1ceaa9],n=_0xe2d08[t]||e;e.__proto__=_0x4b00cd[s(663)](_0x251840),e[s(639)]=n[s(639)][s(663)](n),_0x3ba750[t]=e}},[l]),S={};return S[e(478)]=l,S[e(626)]=d,S[e(543)]=C,S[e(444)]=j,S[e(600)]=x,S[e(470)]=p,S[e(591)]=z,S[e(461)]=k,S[e(586)]=M,S[e(547)]=D,S[e(394)]=L,S.offerDraw=q,S[e(511)]=N,S[e(623)+e(613)]=A,S[e(573)+"es"]=g,S})(),Et=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=on,s={XEWbb:function(e){return e()},AuEnG:function(e,t){return e instanceof t},XxUkA:n(177)+"d",KWWoI:n(191),aUKKE:function(e,t){return e===t}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=s[n(206)](Mt),m=t.useCallback(e=>{const t=n;if(s[t(249)](e[t(242)],HTMLInputElement)||s.AuEnG(e.target,HTMLTextAreaElement)||e.target[t(236)+"ditable"])return;const m=e[t(247)][t(158)+"e"]();switch(m){case"m":u(),o[t(189)](d?s[t(227)]:"Sound unmu"+t(234),{duration:1500,icon:d?"üîá":"üîä"});break;case"r":c&&r&&(e[t(174)+t(156)](),s[t(206)](r));break;case"d":c&&l&&a&&(t(164)!==t(152)?(e[t(174)+t(156)](),a()):(_0x5ecee9[t(174)+"ault"](),s[t(206)](_0x1155d2)));break;case s[t(233)]:i&&(e[t(174)+t(156)](),s.XEWbb(i));break;case"?":case"/":(!e[t(165)]||s[t(201)](m,"?"))&&(e["preventDef"+t(156)](),rn())}},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(226)+e(175)]("keydown",m),()=>window[e(239)+"tListener"](e(213),m)},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Lt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?qt:void 0,onBackToLobby:"lobby"!==q?Et:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Te(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));De(r)}else De([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==bt?void 0:bt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Te(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const Kt=async()=>{if(!k)return void H(!0);if(!M)return void K(!0);const e=Ee.find(e=>e.id===F),t=(null==e?void 0:e.white)||{};await Nt(X,R,t)&&A("waiting")},It=async e=>{if(!k)return void H(!0);if(!M)return void K(!0);const t=Ee.find(e=>e.id===F),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},_t=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Tt=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(F);const n=Ee.filter(e=>e.id!==F),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Wn.find(e=>e.id===Y))?void 0:e.label} bot ‚Ä¢ Bot using ${s.name} palette`)},Wt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Ut=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Wt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ht(ee))),!0;oe(!0);const i=function(e){const t=Kn,n={};n[t(592)]=t(633),n[t(582)]="medium",n[t(537)]=function(e,t){return e+t},n.ccVPR=t(608),n.JKXNX=function(e,t){return e+t},n[t(629)]=function(e,t){return e*t},n[t(620)]="stockfish";const s=n;switch(e){case s[t(592)]:return 300+500*Math[t(578)]();case s[t(582)]:return s[t(537)](500,1e3*Math.random());case s[t(568)]:return s[t(508)](800,s[t(629)](Math.random(),1500));case s[t(620)]:return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=Kn,s={gTEMU:n(532),RaSfv:function(e,t){return e(t)},xcJni:n(521)};switch(t){case n(633):return Sn(e);case s[n(539)]:return s[n(550)](Pn,e);case n(608):case s[n(626)]:return Hn(e);default:return s.RaSfv(Sn,e)}}(ee,Y);if(c){const e=Wt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ht(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,Y,ke,L]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Zt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Fn.map(e=>u.jsx("button",{onClick:()=>{L.select(),G(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(_===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(I,{onClick:Tt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Wn.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ee.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ke,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ie,{to:"/openings",children:u.jsxs(I,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(_e,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"üë∏",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"üõ°Ô∏è",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"üèõÔ∏è",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"‚öîÔ∏è",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"üá™üá∏",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"üé©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ie,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(I,{onClick:()=>K(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: ¬±",$e," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["¬±",e]},e))}),u.jsxs(I,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void K(!0);const e=_t().filter(e=>e.white_player_id!==k.id);e.length>0?await It(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Kt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),_t().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Jn.map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ee.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>Z(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>Z(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(I,{onClick:Kt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(Ue,{className:"h-4 w-4"}),"Create Game",u.jsx(Ye,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(I,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void K(!0);const e=Ee.find(e=>e.id===F),t=(null==e?void 0:e.black)||{};await Bt($.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),ze?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Jn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," ‚Üí ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," ‚Üí ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," ‚Üí ",Ae+a.loss]})]})]})]})}),u.jsx(I,{size:"sm",onClick:()=>It(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!R&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),u.jsx(I,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Je,{className:"h-4 w-4"})})]})]}),u.jsx(I,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&bt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(I,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(I,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Fe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||Ee[0].white,blackPalette:bt.blackPalette||Ee[0].black,movedSquares:Ht,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ze,{whitePalette:bt.whitePalette||Ee[0].white,blackPalette:bt.blackPalette||Ee[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ze,{whitePalette:bt.whitePalette||Ee[0].white,blackPalette:bt.blackPalette||Ee[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&u.jsx(Rt,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(I,{onClick:Et,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(I,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(We,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(I,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ve,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Wn.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=Wn.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Fe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:ee.fen(),onMove:Ut,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ee.find(e=>e.id===xe))?void 0:s.white)||Ee[0].white,blackPalette:(null==(l=Ee.find(e=>e.id===pe))?void 0:l.black)||Ee[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ze,{whitePalette:(null==(d=Ee.find(e=>e.id===xe))?void 0:d.white)||Ee[0].white,blackPalette:(null==(x=Ee.find(e=>e.id===pe))?void 0:x.black)||Ee[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ze,{whitePalette:(null==(f=Ee.find(e=>e.id===xe))?void 0:f.white)||Ee[0].white,blackPalette:(null==(v=Ee.find(e=>e.id===pe))?void 0:v.black)||Ee[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Vt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(I,{onClick:Et,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(I,{variant:"outline",onClick:Tt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(I,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ve,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Re,{}),u.jsx(Le,{isOpen:S,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:E,onClose:()=>K(!1),trigger:"general"}),u.jsx(Qt,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:we,whitePalette:"bot-game"===q?(null==(b=Ee.find(e=>e.id===xe))?void 0:b.white)||Ee[0].white:(null==bt?void 0:bt.whitePalette)||Ee[0].white,blackPalette:"bot-game"===q?(null==(y=Ee.find(e=>e.id===pe))?void 0:y.black)||Ee[0].black:(null==bt?void 0:bt.blackPalette)||Ee[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=Wn.find(e=>e.id===Y))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:we.length}})]})};export{Vn as default};
