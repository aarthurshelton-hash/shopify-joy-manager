import{d6 as e,d7 as t,cp as s,a as n,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as h,C as x,x as f,D as p,B as v,A as g,p as w,t as j,cN as y,bC as b,S as N,a6 as z,P as C,y as M,bG as D,T as L,aq as B,z as E,cU as _,aj as q,aT as S,ca as A,b as W,d8 as k}from"./index-DBmMOexX.js";!function(){const e=K,t=H();for(;;)try{if(687863===parseInt(e(535))/1+parseInt(e(507))/2+-parseInt(e(509))/3*(parseInt(e(488))/4)+-parseInt(e(427))/5+-parseInt(e(553))/6*(parseInt(e(533))/7)+parseInt(e(365))/8*(parseInt(e(489))/9)+-parseInt(e(450))/10*(-parseInt(e(380))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const G=function(){const e=K,t={};t[e(421)]=function(e,t){return e!==t},t.IKqzZ="yZGWz";const s=t;let n=!0;return function(t,r){const a=e;if(s.qoUQt("HEDPr",s[a(445)])){const e=n?function(){if(r){const e=r[a(485)](t,arguments);return r=null,e}}:function(){};return n=!1,e}_0xaa07e3.drawImage(_0x500d3c,_0x2f7968,_0x2a5d1d,_0x44c067,_0x2e952c),_0x2de9d3()}}()(void 0,function(){const e=K;return G[e(554)]().search(e(417)+"+$")[e(554)]()[e(539)+"r"](G).search(e(417)+"+$")});G();const I=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function K(e,t){e-=331;const s=H();let n=s[e];if(void 0===K.sUOMro){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};K.KeJzRa=r,K.PPbcin={},K.sUOMro=!0}const a=e+s[0],i=K.PPbcin[a];if(i)n=i;else{const e=function(e){this.LyAoNW=e,this.lEjohO=[1,0,0],this.nuRhXV=function(){return"newState"},this.yhpqRm="\\w+ *\\(\\) *{\\w+ *",this.hdJNEN="['|\"].+['|\"];? *}"};e.prototype.JBNxdH=function(){const e=new RegExp(this.yhpqRm+this.hdJNEN).test(this.nuRhXV.toString())?--this.lEjohO[1]:--this.lEjohO[0];return this.IlJpDH(e)},e.prototype.IlJpDH=function(e){return Boolean(~e)?this.rURmSm(this.LyAoNW):e},e.prototype.rURmSm=function(e){for(let t=0,s=this.lEjohO.length;t<s;t++)this.lEjohO.push(Math.round(Math.random())),s=this.lEjohO.length;return e(this.lEjohO[0])},new e(K).JBNxdH(),n=K.KeJzRa(n),K.PPbcin[a]=n}return n}I(void 0,function(){const e=K,t={WPHpM:function(e,t){return e(t)},NXcFl:function(e,t){return e+t},pwAoV:e(532)+e(419)+'rn this")( )',rFJpb:"FUoIA",Wzgoi:function(e){return e()},iZbXE:e(506),kbMPi:e(395),Wbuax:e(451),cukpC:e(398)},s=t[e(515)](function(){const s=e;let n;try{n=t[s(442)](Function,t.NXcFl(s(360)+s(510)+t[s(536)],");"))()}catch(r){if(t[s(438)]!==t.rFJpb)return new _0xd15127((e,t)=>{const n=s,r=new _0x1278bd;r[n(516)+"n"]=n(479),r.onload=()=>e(r),r[n(366)]=t,r.src=_0xb343cb});n=window}return n}),n=s.console=s[e(431)]||{},r=[e(363),"warn",t[e(433)],e(494),t[e(378)],"table",t.Wbuax];for(let a=0;a<r[e(414)];a++){if("OSjFV"===t[e(372)])return _0x323ea9;{const t=I[e(539)+"r"][e(468)].bind(I),s=r[a],i=n[s]||t;t.__proto__=I[e(461)](I),t[e(554)]=i[e(554)][e(461)](i),n[s]=t}}})();function P(s,n){const r=K,a={BLbkC:function(e,t){return e-t},KXYAq:function(e,t){return e+t}};a[r(498)]=function(e,t){return e*t},a.kiDrk=function(e,t){return e+t},a.XRCkc=function(e,t){return e*t},a[r(385)]=function(e,t){return e<t},a[r(409)]=function(e,t){return e+t},a.IWFjw=function(e,t){return e/t},a[r(381)]=function(e,t){return e===t},a[r(542)]=function(e,t){return e-t};const i=a,o=n/8,c=i[r(498)](n,.02),l=i[r(503)](n,i[r(428)](c,2));let u=r(499)+r(377)+r(411)+'2000/svg" '+r(383)+l+'" height="'+l+r(336)+'"0 0 '+l+" "+l+'">';u+=r(376)+r(355)+r(454)+l+r(441)+l+r(476)+e[r(490)]+'"/>';for(let d=0;d<8;d++){const n=7-d;for(let a=0;i[r(385)](a,8);a++){const l=s[n][a],m=l.isLight?e[r(493)]:e.dark,h=i[r(409)](c,i[r(498)](a,o)),x=c+i[r(498)](d,o);if(u+='<rect x="'+h+'" y="'+x+r(545)+o+r(441)+o+r(476)+m+r(504),l[r(460)][r(414)]>0){const e=.08*o,s=[];for(const i of l.visits){const e=t(i[r(530)],i.color);!s[r(491)](e)&&s.push(e)}const n=Math[r(389)](s.length,6),a=[];let c=i[r(462)](o,2*e);const d=i[r(359)](i[r(428)](c,.7),n);for(let t=0;i.CvFGN(t,n);t++){const e={};if(e[r(546)]=s[t],e[r(423)]=c,a[r(402)](e),c-=d,c<.1*o)break}for(const t of a)if(i[r(381)]("jVivK","jVivK")){const e=i[r(542)](o,t[r(423)])/2;u+=r(412)+(h+e)+'" y="'+(x+e)+r(545)+t[r(423)]+r(441)+t.layerSize+r(476)+t[r(546)]+'"/>'}else{const e=i.BLbkC(_0x517bb1,_0x4679ae[r(423)])/2;_0x5099a2+=r(412)+i[r(548)](_0x1c4352,e)+r(413)+(_0x50712b+e)+r(545)+_0x363649.layerSize+r(441)+_0x1036ca[r(423)]+r(476)+_0x59ef16[r(546)]+r(504)}}}}return u+=r(447),u}function H(){const e=["ENfhrw0","D2LKDgG","BwLKzgXL","ENzctg8","DMLZAxrZ","yMLUza","qKXIA0m","i2zHzMfMoq","CKvjv3K","Dd11DgyToa","D2HPDgu","Ahr0Chm6lY9LBG","ChjVDg90ExbL","Dgv4DefSAwDU","revKwuW","rMfPBgvKihrVia","zMLSBfjLy3q","ndaWideXChGGjW","y2XPCa","CMvHzhK","iIbMAwXSpsi","rKrSzeC","y3jLyxrLrwXLBq","yw5VBNLTB3vZ","CgvUC2vUDc5JBW","vK5Nvfm","pZ8/pY4/pY4/pW","BwvHC3vYzvrLEa","qKrTCfm","yxbWBhK","idiWChGGj0nVCG","iZfbmueXqq","mte0ogTWs3nfEq","ow9lAMLvqG","yM9YzgvY","Aw5JBhvKzxm","zMLSBfrLEhq","BgLNAhq","zxjYB3i","EuT2y20","rNLsC1y","Dg9eyxrHvvjm","zwfID1y","phn2zYb4BwXUCW","qMPRvhO","icdIGkiGia","DhLWzq","A2LeCMS","iI8+","C3rYB2TLu3r5Ba","Aw5MBW","mte2ntaYnNbKA0HprG","ELjwsfq","odyZnhH0s0DNAq","BMn0Aw9UkcKG","Dujkwxe","tezsEvu","mJu1lcaYntuSia","z2v0q29UDgv4Da","v3PNB2K","y3jVC3npCMLNAq","i2u3ztvLna","C2f2zq","BgLUzvDPzhrO","lI4U","zxjYB3jdB3jYzq","zM9UDhm","q2LUEMvSjYWGjW","yMvNAw5qyxrO","BNmTC2vYAwy","AgLUz1f1ywXPDa","suzNv3y","uM9Tyw4NlcbZzq","ru4Guevou0vova","CgLLy2u","iZbbmeeWqq","E30Uy29UC3rYDq","nde2nJeYr2nqvK9v","v2HPDgu","mJe0odi1u3j3vhrp","ChDbB1y","BgvMDa","y29T","y29UC3rYDwn0BW","Aw1Hz2uVC3zNkW","zw50","s0Xut3y","vw5RBM93BG","CNrdCxK","iIb3Awr0Ad0I","y29SB3i","vxjPBMO","s1Hzqxe","thfqzee","AM9PBG","yMXHy2S","BM5qwKi","mti2Bhrss09l","Dg9tDhjPBMC","ntaWideYChGGjW","i0zbrKfgqq","C3vIC3rYAw5N","y2fUDMfZ","iZq0ndaZyW","mc45nsK","nJaWideZChGGjW","D3vmDeS","iIb2Awv3qM94pq","CMLM","ALDwt3O","zhvMC0e","vuXYtgC","EwXdENa","ihzZia","v3jOyMy","zxzLBNq","BKHQvMq","zM9UDa","y2vUDgvY","yxjJ","y3rvuKW","CMv2B2TLt2jQzq","Dg9vChbLCKnHCW","vgLTzxmGtMv3ia","DhjHBNnWyxjLBG","zw9Yz2LHlcbZzq","iIb5psiWiIb3Aq","C3Lkr1K","nJaWidi0ChGGjW","C3bSAxq","svDgANC","CMv0DxjUicHMDq","we9tvwy","AgvPz2H0","Bg9N","zgf0zq","nZe0otC1mK9Uzu1LsG","B25LCNjVCG","y3jLyxrLt2jQzq","C3jJ","D3zLvNm","tLqG4PMA","i2e4yti5zq","y3vRCem","ywXS","Eg1So2nOyxjZzq","qLbVENu","phjLy3qGEd0Ima","psjODhrWoI8VDW","A2jnugK","zgvMyxvSDa","mtG3vvnluvDK","C3vuB24","v1PLs2C","D2LKDgG9iG","ywX5q2q","q3zgr04","D2nhC0m","Bw92zvrV","z3z2sNe","BwLU","ywXWAgfIzxrPyW","BwnQsMi","uuzoufm","Bg9HzcbtvKC","BufPzKq","zxHJzxb0Aw9U","y3rPB25mzxzLBa","EgzfrKq","z1fVr0K","uM9Tyw4NlcbuAq","rxnwtMq","B25SB2fK","ChvZAa","rM9HrNe","Bw9Yyw50jYWGrW","B3fTvfC","CMvZDg9Yzq","AxrHBgLJiduWma","iZC4nZe2yW","Bfj5uLO","C05xEKS","D3CUDZmUB3jNlW","phjLy3qGEd0I","iIb5psi","BgvUz3rO","C2nHBgu","CMvKDwnL","kcGOlISPkYKRkq","AuHzt28","y3rVCIGICMv0Dq","BgLUzvrV","Cw9vuxq","vvDOzNi","Bgf5zxjtAxPL","BwfYz2LU","C3rYB2TL","wNLRDhe","nte0nJm0nuXmsLrsyW","wfjdA2m","z3nVzvK","tg5Vt3m","y29UC29Szq","DuvLvxO","AvPIweu","vhfqvu4","zMLSBfn0EwXL","sw50zxiNlcbZyq","vMjrq1O","CKzkCgi","vgHxuvm","Dgv4DejHC2vSAq","iIbOzwLNAhq9iG","v1biCe0","B0TKBLG","qKHXzMC","suTXELO","zhjHD0LTywDL","pc9ZDMC+","Bw92zxm","sNnHENG","mtiZnJqXmhbrtKHHza","DhjHy2u","4PMuievoifbftLnf","CK11uw0","zhrOpsi","EePRsvC"];return(H=function(){return e})()}async function O(e){const t=K,s={};s[t(512)]="qrcode",s[t(394)]=t(556),s[t(361)]=t(353)+"t";const n=s,r=(await import(n[t(512)]))[t(379)],a={};a.dark=e?n[t(394)]:t(487),a[t(493)]=n[t(361)];const i={};return i[t(457)]=200,i[t(424)]=1,i.color=a,i[t(521)+t(396)]="M",r[t(497)](t(467)+t(480)+"m",i)}async function U(){const e=K,t={};t[e(544)]=e(540)+e(374)+e(465),t[e(392)]=e(471)+"load SVG",t.oqmTW=e(343);const n=t;return new Promise((t,r)=>{const a=e,i={};i[a(511)]=function(e,t){return e*t},i[a(422)]=n[a(544)],i[a(464)]=n.QFNPS;const o=i;if("inHtm"===n[a(405)]){const e={};e[a(434)]=o[a(464)];const t=e;return new _0xfcdcd((e,s)=>{const n=a,r={BDmpS:function(e,t){return o[K(511)](e,t)}},i=new _0x161d90,c={};c[n(502)]=o[n(422)];const l=new _0x3000aa([_0x413c98],c),u=_0x49744c["createObje"+n(349)](l);i.onload=()=>{const t=n,s=_0x3a2a05["createElem"+t(541)]("canvas");s[t(457)]=_0x2b20b0*_0x11134d,s.height=r[t(484)](_0x1751d5,_0xc2bc04);const a=s[t(514)]("2d");a[t(415)](_0x3de5c8,_0x7c3062),a[t(446)](i,0,0,_0x5f56c5,_0x5211fc),_0x5bdede["revokeObje"+t(349)](u),e(s)},i[n(366)]=()=>{const e=n;_0x24b2a0[e(350)+e(349)](u),s(new _0x30357d(t[e(434)]))},i[n(368)]=u})}{const e=new Image;e[a(516)+"n"]=a(479),e[a(401)]=()=>t(e),e[a(366)]=r,e[a(368)]=s}})}async function T(e,t,s={}){const n=K,r={xfEFD:function(e,t,s){return e(t,s)},ylCzp:function(e,t){return e*t},wcGsC:function(e,t){return e*t},Urinj:"high",zqGEm:"#FDFCFB",LnoOs:function(e,t){return e+t},FoaFq:"#292524",IFgWv:"#e7e5e4",dufsA:n(371),DEdYL:n(408),SCcvB:n(534),Jsazx:"Black",jWVOz:n(458),eWGuK:n(357)+n(523)+"Times New Roman', se"+n(337),zRVHT:function(e,t){return e+t},orizu:function(e,t){return e-t},syJGY:n(407)+n(486)+n(404)+n(354)+n(337),alyCd:n(543),EsVNd:n(347),VNgTS:function(e,t){return e+t},rMuQm:n(501),sNWzK:function(e,t){return e-t},LqPdA:function(e,t){return e/t},nHjVd:function(e,t){return e+t},xJkIW:"left",iHYOo:function(e,t){return e+t},ThWQS:n(520),MLnLw:function(e,t){return e>t},FyRsV:function(e,t){return e>=t},BPozu:function(e,t){return e===t},nnPZB:function(e,t){return e<t},VbQCZ:function(e,t){return e(t)},WZeKg:function(e){return e()},wuLtK:function(e,t){return e/t},SfSAf:function(e,t){return e-t},wveVs:function(e,t){return e+t},Zyktq:function(e,t){return e/t},gvvJq:function(e,t){return e/t},BjkTz:n(332),jyCDL:n(473)+n(436)+"ns-serif",BHqfg:"enpensent."+n(538),mcjJb:function(e,t){return e+t},aAImg:function(e,t){return e-t}};await async function(){const e=K;document.fonts&&document[e(522)][e(475)]&&await document[e(522)].ready,await new Promise(e=>setTimeout(e,150))}();const{boardSize:a=600,darkMode:i=!1,withWatermark:o=!1,title:c}=s,l=r[n(397)](P,e,a),u=a+2*r[n(341)](a,.02),d=await async function(e,t,s){const n=K,r={};r[n(443)]=function(e,t){return e*t},r[n(432)]=n(471)+n(393),r[n(459)]=n(540)+"xml;charset=utf-8";const a=r;return new Promise((r,i)=>{const o=n,c=new Image,l={};l[o(502)]=a[o(459)];const u=new Blob([e],l),d=URL[o(367)+o(349)](u);c[o(401)]=()=>{const e=o,n=document["createElem"+e(541)](e(331));n[e(457)]=5*t,n[e(362)]=a.oKdnX(s,5);const i=n[e(514)]("2d");i.scale(5,5),i[e(446)](c,0,0,t,s),URL[e(350)+e(349)](d),r(n)},c[o(366)]=()=>{const e=o;URL["revokeObje"+e(349)](d),i(new Error(a[e(432)]))},c[o(368)]=d})}(l,u,u),m=60,h=u+r[n(386)](m,2),x=u+220+60+120,f=document[n(478)+"ent"](n(331));f[n(457)]=r[n(341)](h,5),f[n(362)]=5*x;const p=f[n(514)]("2d");p[n(415)](5,5),p.imageSmoothingEnabled=!0,p["imageSmoot"+n(526)+"y"]=r[n(547)],p[n(435)]=i?n(531):r[n(456)],p[n(472)](0,0,h,x),p[n(446)](d,0,0,d[n(457)],d[n(362)],m,m,u,u);const v=r[n(430)](r.LnoOs(m,u),28);p[n(505)+"e"]=i?r[n(403)]:r[n(527)],p[n(519)]=1,p[n(524)](),p[n(387)](m,v),p[n(420)](h-m,v),p[n(425)]();const g=i?n(463):r[n(403)],w=i?r[n(339)]:n(408),j=i?r[n(470)]:n(371),y=i?n(408):r[n(339)],b=h/2;let N=v+55;const z=t[n(466)]||r.SCcvB,C=t[n(551)]||r[n(449)];p[n(440)+"ne"]=r[n(338)],p[n(346)]=r.eWGuK;const M=p[n(483)+"t"](z)[n(457)],D=p[n(483)+"t"](C)[n(457)];p[n(346)]=n(407)+n(486)+"morant', G"+n(354)+n(337);const L=n(342),B=p[n(483)+"t"](L).width,E=r[n(508)](M,B)+D,_=r.orizu(b,E/2);p[n(346)]=n(357)+n(523)+n(352)+n(528)+n(337),p[n(435)]=g,p.textAlign=n(537),p[n(492)](z,_,N),p.font=r[n(356)],p.fillStyle=y,p[n(492)](L,_+M,N),p[n(346)]=n(357)+n(523)+n(352)+n(528)+n(337),p[n(435)]=g,p[n(492)](C,r[n(508)](_+M,B),N),N+=36,t[n(344)]&&t[n(344)]!==r[n(384)]&&(p[n(435)]=w,p[n(346)]="italic 500 18px 'Cormorant', Georgia, se"+n(337),p[n(469)]=n(347),p.fillText(t.event,b,N),N+=32);const q=c,S=t[n(364)]||"";if(q||S){p[n(435)]=j,p[n(346)]=n(555)+n(436)+n(525),p[n(469)]=r[n(400)];let e="";q?(e=q[n(351)+"e"](),S&&(e+=r.VNgTS(r[n(453)],S))):e=S;const t=2,s=e[n(358)](""),a=s.reduce((e,t)=>e+p[n(483)+"t"](t)[n(457)],0),i=(s[n(414)]-1)*t;let o=r[n(410)](b,r[n(549)](r[n(345)](a,i),2));for(const c of s)p.textAlign=r.xJkIW,p.fillText(c,o,N),o+=p[n(483)+"t"](c)[n(457)]+t;N+=28}if(t[n(448)]&&t[n(448)][n(414)]>0){p.fillStyle=j,p[n(346)]="400 10px 'Times New "+n(399)+"mes, serif",p[n(469)]=r[n(400)];const e=t[n(448)][n(550)](" "),s=e[n(414)]>400?r[n(418)](e[n(557)](0,400),r[n(439)]):e,a=r[n(410)](h-120,40),i=s[n(358)](" ");let o="",c=N;const l=15,u=4;let d=0;for(const t of i){const e=r[n(430)](o+(o?" ":""),t);if(r.MLnLw(p[n(483)+"t"](e)[n(457)],a)&&o){if(p[n(492)](o,b,c),o=t,c+=l,d++,r[n(496)](d,u))break}else r[n(375)](n(477),n(340))?(_0x586549=_0x3d2f2d[n(351)+"e"](),_0x5acb0b&&(_0x13e572+=n(501)+_0x515b7a)):o=e}o&&r[n(552)](d,u)&&p[n(492)](o,b,c)}const A=x-m-20;p[n(435)]=j,p[n(346)]="500 11px '"+n(436)+n(525),p[n(469)]=r[n(400)];const W=(n(452)+n(370))[n(358)](""),k=W[n(416)]((e,t)=>e+p[n(483)+"t"](t).width,0),G=r[n(481)](k,4*(W[n(414)]-1));let I=b-r[n(549)](G,2);for(const K of W)p[n(469)]=r[n(455)],p[n(492)](K,I,A),I+=p[n(483)+"t"](K).width+4;if(o){const[e,t]=await Promise[n(373)]([r[n(437)](O,!1),r[n(382)](U)]),s=220,a=65,i=r[n(410)](r[n(410)](m+u,s),12),o=m+u-a-12;p.fillStyle="rgba(255, "+n(513)+n(333),p[n(524)](),p.roundRect(i,o,s,a,6),p.fill(),p[n(505)+"e"]=n(517),p[n(519)]=1,p[n(425)]();const c=48,l=i+12,d=o+r[n(335)](r.SfSAf(a,c),2);p[n(518)](),p[n(524)](),p[n(348)](l+c/2,r[n(369)](d,r[n(426)](c,2)),r[n(388)](c,2),0,2*Math.PI),p[n(474)](),p[n(446)](t,l,d,c,c),p[n(406)]();const h=r.iHYOo(l+c,10);p[n(469)]=r[n(455)],p[n(440)+"ne"]=n(390),p[n(435)]=r[n(500)],p.font=n(334)+n(436)+n(525),p[n(492)](n(529),h,o+28),p[n(435)]=r[n(470)],p[n(346)]=r.jyCDL,p[n(492)](r[n(444)],h,o+46);const x=50,f=r[n(410)](r[n(391)](i,s)-x,10),v=o+r.aAImg(a,x)/2,g=new Image;await new Promise(t=>{const s=n;g[s(401)]=()=>{p[s(446)](g,f,v,x,x),t()},g[s(366)]=()=>t(),g[s(368)]=e})}return f}const V=A.filter(e=>"custom"!==e.id);const Y=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const F=()=>{const e=n(),{user:t,isLoading:s}=r(),[G,I]=a.useState(null),[K,P]=a.useState(!1),[H,O]=a.useState(0),[U,F]=a.useState(""),[Z,J]=a.useState([]),[R,X]=a.useState(50),[$,Q]=a.useState(!0),[ee,te]=a.useState(!1),[se,ne]=a.useState(null);a.useEffect(()=>{s||(async()=>{if(!t)return void I(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});I(!0===e)})()},[t,s]);const re=a.useCallback(async(e,s,n,r,a=!0)=>{try{const m=i(e.pgn),h=a?V[Math.floor(Math.random()*V.length)]:V[n%V.length],x=function(e,t){const s=A.find(e=>e.id===t)||A[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?s.white:s.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,h.id);o(h.id);const f=await T(x,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:s}),p=await new Promise((e,t)=>{f.toBlob(s=>{s?e(s):t(new Error("Failed to create blob"))},"image/png",.95)}),v=Date.now(),g=`${t.id}/${v}-${s.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(g,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:j}=c.storage.from("visualizations").getPublicUrl(g),y=l(e.pgn),b={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:x,totalMoves:m.totalMoves,visualizationState:{paletteId:h.id,paletteName:h.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?n+1:void 0,gameHash:y}},{data:N,error:z}=await c.from("saved_visualizations").insert({user_id:t.id,title:s,pgn:e.pgn,game_data:b,image_path:j.publicUrl}).select().single();if(z)throw z;const C=function(e,t){if(e){const e=99,s=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+s}return 199+Math.floor(600*Math.random())}(r,n),{data:M,error:D}=await u(N.id,C);if(D)throw D;const L=function(e,t){const s=e?1.5:1,n=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*s+5*n),hdDownloads:Math.floor(3*Math.random()*s),gifDownloads:Math.floor(2*Math.random()*s),tradeCount:e?Math.floor(2*Math.random()):0}}(r,n);for(let e=0;e<L.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:N.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const B=d(e.pgn),E=a?"premium":"genesis";return{title:s,success:!0,visualizationId:N.id,listingId:null==M?void 0:M.id,isExemplar:r,paletteId:h.id,paletteName:h.name,gameHash:y,tier:E,openingName:null==B?void 0:B.fullName}}catch(m){return{title:s,success:!1,error:m.message,isExemplar:r}}},[t]),ae=Z.filter(e=>e.success).length,ie=Z.filter(e=>!e.success).length;return Z.filter(e=>e.success&&e.isExemplar).length,s||null===G?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(h,{className:"h-8 w-8 animate-spin text-primary"})}):t&&G?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(v,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(g,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(x,{children:[m.jsx(w,{children:m.jsxs(j,{className:"flex items-center gap-3",children:[m.jsx(y,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(f,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(b,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",R," visions: ",Math.min(25,R)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,R-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:R,onChange:e=>X(Number(e.target.value)),disabled:K,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(N,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:K}),m.jsxs(z,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(C,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(M,{variant:"secondary",className:"text-xs",children:[V.length," palettes"]})]})]}),m.jsx(v,{onClick:async()=>{if(!t)return void W.error("You must be logged in as the CEO account");P(!0),J([]),O(0);const e=[],s=k.slice(0,Math.min(R,k.length)),n=[];for(let t=0;t<R;t++){const e=t%s.length,r=t<25,a=Y[t]||`Vision ${t+1}`;n.push({game:s[e],title:a,isExemplar:r})}for(let t=0;t<n.length;t++){const{game:s,title:r,isExemplar:a}=n[t];F(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${n.length})`);const i=await re(s,r,t,a,$);e.push(i),J([...e]),O((t+1)/n.length*100),await new Promise(e=>setTimeout(e,300))}P(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?W.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):W.error("Failed to create any visions")},disabled:K||!t,className:"w-full",size:"lg",children:K?m.jsxs(m.Fragment,{children:[m.jsx(h,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(L,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(v,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),ne(null);try{const{data:e,error:s}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(s)throw s;if(!e||0===e.length)return W.info("No visions to delete"),void te(!1);const n=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",n);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=n.filter(e=>!i.has(e)),l=n.filter(e=>i.has(e));if(0===o.length)return W.info("All your visions have accrued natural value - none deleted"),ne({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);ne({deleted:o.length,preserved:l.length}),W.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){W.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||K||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(h,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(L,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),se&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",se.deleted," deleted"]}),se.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",se.preserved," preserved (has value)"]})]})})]}),K&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(B,{value:H,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:U})]}),Z.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(E,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(_,{className:"h-4 w-4"}),Z.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(q,{className:"h-4 w-4"}),Z.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:Z.map((e,t)=>m.jsxs(S.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(_,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(q,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(M,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(M,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(C,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(x,{className:"max-w-md",children:m.jsxs(f,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(v,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{F as default};
