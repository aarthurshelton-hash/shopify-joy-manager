import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as q,bF as L,bG as A,b6 as S,ae as P,bH as H,ah as I,bI as G,B as K,bJ as _,bK as T,bL as U,bM as E,bN as O,bO as W,bP as Y,bQ as R,bR as J,bS as X,bT as Z,bU as V,bV as F,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as qe,c8 as Le,aM as Ae,c9 as Se,H as Pe,P as He,ca as Ie,b3 as Ge,bs as Ke,be as _e,cb as Te,aP as Ue,cc as Ee,d as Oe,b2 as We,a9 as Ye,cd as Re,ce as Je,cf as Xe,al as Ze,au as Ve}from"./index-BsQTe2MU.js";import{L as Fe}from"./LiveColorLegend-B0WgW24I.js";import{T as $e}from"./trending-down-CfbAuP8e.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{a as et}from"./browser-D7bYB7HG.js";import{S as tt,M as nt}from"./sun-IHyZJsaW.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=xt,t=ut();for(;;)try{if(708317===parseInt(e(548))/1*(parseInt(e(497))/2)+-parseInt(e(555))/3*(-parseInt(e(515))/4)+-parseInt(e(542))/5*(parseInt(e(517))/6)+parseInt(e(536))/7+-parseInt(e(514))/8+-parseInt(e(543))/9+parseInt(e(495))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[xt(493)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=xt;return dt[e(535)]()[e(521)]("(((.+)+)+)+$")[e(535)]()[e(511)+"r"](dt).search("(((.+)+)+)+$")});function ut(){const e=["Eu5Zrw4","teDlDfi","C2HVCNrnzxnZyq","Aw5ZDwzMAwnPzq","svz5qK0","AxztwKm","Bw92zxmGyxzHAq","Dg9tDhjPBMC","nZa3nZiXmhzUr3Lhtq","Cgv0AxrPB24U","rhjHDYbIEsb0Aa","zxjYB3i","AxntDgfSzw1HDa","sLfrA0i","nJvIt21KyNO","nJmWnZe0nNPKvgvtCG","D2fYBG","CMvLzM9SzcbYzq","BNrFBwf0zxjPyq","BgvUz3rO","mJyYD3zQvLjt","Dw5RBM93BG","BwvZC2fNzq","BNqGtwf0zxjPyq","r2DZtKu","AxneCMf3","C3vMzMLJAwvUDa","mZi2ngnWq2DcrG","y01Xt0y","CMv0DxjUicHMDq","yMLUza","yxbWBhK","r2fTzsbKCMf3BG","mtiZnJeXmZb6vKHIBg0","CM4GDgHPCYiPka","mZqYmLH0tvDmCa","C3bSAxq","BuLZuha","BMnOyva","x3j1Bgu","u01Jtgu","DgfIBgu","DgHYzwvMB2XKxW","zxHJzxb0Aw9U","AxnuAhjLzwzVBa","BgfIBguU","ntaTtw92zsbsDq","y29UC29Szq","u0DgugG","y29UC3rYDwn0BW","ie5VigXLz2fSia","u3rHBgvTyxrLiq","ndK2nJq3mNrpCwjdrq","ndeYzg9fqwrg","y3rVCIGICMv0Dq","mZu4odC4BgjmB3bl","E30Uy29UC3rYDq","CMvHC29U","uMvWzxrPDgLVBG","C2vHCMnO","ChjVDg90ExbL","rhjHDW","r01wuxO","zMvU","DhjHy2u","ywXuqxG"];return(ut=function(){return e})()}dt();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[xt(493)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function ht(e){const t=xt,n={};n[t(532)]="stalemate",n[t(528)]=t(513)+t(512)+t(534)+t(507),n.mIsPp=t(513),n[t(527)]="Threefold "+t(520),n[t(500)]="Draw by in"+t(554)+" material.",n[t(502)]="Insufficie"+t(551)+"l",n[t(510)]=t(538)+"e fifty-move rule.",n[t(533)]=t(508)+"le",n.GMVQz=t(494)+"!";const s=n;if(e.isStalemate()){const e={};return e[t(519)]=s[t(532)],e[t(550)]=s.yNsEn,e[t(530)+"ge"]=s[t(499)],e}if(e[t(506)+"dRepetition"]()){const e={};return e[t(519)]=t(504)+"repetition",e[t(550)]="Draw by th"+t(545)+t(537),e.shortMessage=s.alTAx,e}if(e.isInsufficientMaterial()){const e={};return e.reason=t(531)+t(546)+"l",e.message=s[t(500)],e.shortMessage=s[t(502)],e}const r=e[t(525)]();if(parseInt(r[t(498)](" ")[4],10)>=100){const e={};return e[t(519)]="fifty_move"+t(501),e.message=s.SGFPh,e[t(530)+"ge"]=s.ivSZC,e}const a={};return a.reason=t(549),a.message=s[t(524)],a[t(530)+"ge"]=t(523),a}function xt(e,t){e-=492;const n=ut();let s=n[e];if(void 0===xt.JCnRsO){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};xt.yKudHW=r,xt.pYTaJr={},xt.JCnRsO=!0}const a=e+n[0],i=xt.pYTaJr[a];if(i)s=i;else{const e=function(e){this.lnxGFt=e,this.ecUkdW=[1,0,0],this.HHBKDF=function(){return"newState"},this.BvTowd="\\w+ *\\(\\) *{\\w+ *",this.kqoDFa="['|\"].+['|\"];? *}"};e.prototype.PoDmCB=function(){const e=new RegExp(this.BvTowd+this.kqoDFa).test(this.HHBKDF.toString())?--this.ecUkdW[1]:--this.ecUkdW[0];return this.HIOkwg(e)},e.prototype.HIOkwg=function(e){return Boolean(~e)?this.OuYOPj(this.lnxGFt):e},e.prototype.OuYOPj=function(e){for(let t=0,n=this.ecUkdW.length;t<n;t++)this.ecUkdW.push(Math.round(Math.random())),n=this.ecUkdW.length;return e(this.ecUkdW[0])},new e(xt).PoDmCB(),s=xt.yKudHW(s),xt.pYTaJr[a]=s}return s}function pt(e){return{LGKtR:function(e,t){return e(t)}}[xt(529)](ht,e).message}mt(void 0,function(){const e=xt,t={GgsNE:function(e,t){return e+t},ZGWnv:e(557)+"nction() ",ejLqC:function(e){return e()},cMqOF:"log",JQQkB:e(544)};let n;try{const s=Function(t[e(552)](t.ZGWnv,e(518)+e(516)+e(496)+" )")+");");n=t.ejLqC(s)}catch(a){n=window}const s=n.console=n[e(509)]||{},r=[t[e(556)],t[e(541)],"info",e(539),e(505),e(503),e(526)];for(let i=0;i<r[e(547)];i++){const t=mt[e(511)+"r"][e(522)][e(492)](mt),n=r[i],a=s[n]||t;t.__proto__=mt[e(492)](mt),t[e(535)]=a[e(535)][e(492)](a),s[n]=t}})(),function(){const e=vt,t=yt();for(;;)try{if(677512===parseInt(e(339))/1*(parseInt(e(264))/2)+parseInt(e(325))/3*(-parseInt(e(329))/4)+-parseInt(e(251))/5+-parseInt(e(355))/6*(parseInt(e(269))/7)+parseInt(e(304))/8+-parseInt(e(336))/9+-parseInt(e(260))/10*(-parseInt(e(318))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[vt(259)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=vt,t={LUPrk:"(((.+)+)+)+$"},n=t;return ft[e(249)]()[e(243)](n.LUPrk)[e(249)]()[e(254)+"r"](ft).search("(((.+)+)+)+$")});ft();const gt=function(){const e=vt,t={};t.SQedx=e(358);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=vt;if(n.SQedx!==s(358))_0x5cae36[s(278)].gainNode[s(317)][s(299)]=_0x45c6e3;else if(t){const n=t[s(259)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}();function vt(e,t){e-=241;const n=yt();let s=n[e];if(void 0===vt.bvWrli){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};vt.EnoRIv=r,vt.UXNaDy={},vt.bvWrli=!0}const a=e+n[0],i=vt.UXNaDy[a];if(i)s=i;else{const e=function(e){this.keuARz=e,this.mdDcru=[1,0,0],this.oyMnIK=function(){return"newState"},this.ZIYyFe="\\w+ *\\(\\) *{\\w+ *",this.wxdCuJ="['|\"].+['|\"];? *}"};e.prototype.SgqvGa=function(){const e=new RegExp(this.ZIYyFe+this.wxdCuJ).test(this.oyMnIK.toString())?--this.mdDcru[1]:--this.mdDcru[0];return this.znLyGH(e)},e.prototype.znLyGH=function(e){return Boolean(~e)?this.AfAacZ(this.keuARz):e},e.prototype.AfAacZ=function(e){for(let t=0,n=this.mdDcru.length;t<n;t++)this.mdDcru.push(Math.round(Math.random())),n=this.mdDcru.length;return e(this.mdDcru[0])},new e(vt).SgqvGa(),s=vt.EnoRIv(s),vt.UXNaDy[a]=s}return s}gt(void 0,function(){const e=vt,t={};t[e(296)]=function(e,t){return e===t},t[e(261)]="DVtjj",t[e(241)]=e(332)+e(295),t.vwoNJ=e(340)+e(303)+'rn this")( )',t[e(274)]=e(292),t[e(302)]=e(257),t[e(334)]=e(273),t.FSJlv=e(283),t.LcXNq=function(e,t){return e<t},t[e(306)]=function(e,t){return e===t},t[e(328)]=e(361);const n=t;let s;try{if(!n[e(296)](n[e(261)],n.RSYrE)){const t=_0x661686[e(259)](_0x5cf321,arguments);return _0x5d06f8=null,t}s=Function(n[e(241)]+n[e(322)]+");")()}catch(i){s=window}const r=s[e(271)]=s[e(271)]||{},a=[n[e(274)],e(363),n.YZUqZ,"error",e(258),n[e(334)],n.FSJlv];for(let o=0;n[e(310)](o,a[e(345)]);o++)if(n.leqGP("IZlRp",n[e(328)])){if(_0x436b4c){const t=_0x99f143[e(259)](_0x5d85e5,arguments);return _0x446d6b=null,t}}else{const t=gt[e(254)+"r"].prototype[e(347)](gt),n=a[o],s=r[n]||t;t[e(354)]=gt[e(347)](gt),t.toString=s[e(249)][e(347)](s),r[n]=t}})();const bt=(e=!0,n=.5)=>{const s=vt,r={KksmE:function(e){return e()},pMcep:function(e,t){return e||t},VPcjq:s(311),Xkpos:s(350),aodlz:function(e,t){return e+t},wUsXu:function(e,t){return e-t},Blwuy:function(e,t){return e<t},ueOTa:function(e,t){return e-t},Xvcci:function(e,t){return e*t},eaDzw:function(e,t,n,s,r,a){return e(t,n,s,r,a)},UcIqq:s(313),nkAmx:s(256),giuSS:"castle",hUzgG:function(e,t,n,s,r,a){return e(t,n,s,r,a)},vPzQr:function(e,t,n){return e(t,n)},wtMst:s(333),vaSqj:s(255),HiwOT:function(e,t,n){return e(t,n)},MXKbK:s(314),SoeIi:function(e,t,n){return e(t,n)},SRxkX:s(270),iMxww:"triangle",YeYFQ:function(e,t,n){return e(t,n)},iGEXt:function(e,t,n,s,r,a){return e(t,n,s,r,a)},XGRJg:s(343),FwqSq:function(e,t,n){return e(t,n)},sqQXo:function(e,t,n){return e(t,n)},geqSt:s(276),DAFGS:function(e,t,n){return e(t,n)},wErZu:function(e,t,n,s,r,a){return e(t,n,s,r,a)},VazIY:s(312),Tdlim:s(331),zdjkq:function(e,t){return e(t)},qlquC:function(e,t,n){return e(t,n)}},a={context:null};a[s(351)]=null;const i=r.zdjkq(t.useRef,a),o=r.SoeIi(t.useCallback,()=>{const e=s;if(!i[e(278)][e(252)])try{const t=new(window[e(300)+"xt"]||window[e(298)+e(324)]),s=t[e(356)]();s[e(244)](t.destination),s.gain[e(299)]=n;const r={};r.context=t,r[e(351)]=s,i[e(278)]=r}catch(t){}},[n]);r[s(284)](t.useEffect,()=>{const e=s;if(i[e(278)][e(351)])if(e(250)===e(307)){const t=_0x3dc445(e(332)+"nction() "+(e(340)+e(303)+e(279))+" ));");_0x4b860d=t()}else i[e(278)][e(351)][e(317)][e(299)]=n},[n]);const c=r[s(359)](t.useCallback,(t,n,a=s(313),c=.01,l=.1,d)=>{const u=s;if(!e)return;r[u(323)](o);const{context:m,gainNode:h}=i[u(278)];if(r[u(290)](!m,!h))return;const x=m[u(301)+u(245)](),p=m[u(356)]();if(x.type=a,x.frequency["setValueAt"+u(267)](t,m[u(321)+"e"]),d){if(r.VPcjq===r[u(335)]){const e=_0x497221[u(259)](_0x4d1f69,arguments);return _0x3b3c16=null,e}x[u(319)][u(293)+u(357)+u(330)](d,m[u(321)+"e"]+n)}p[u(317)][u(275)+"Time"](0,m[u(321)+"e"]),p[u(317)]["linearRamp"+u(263)+u(360)](1,r[u(327)](m.currentTime,c)),p[u(317)][u(293)+"lRampToVal"+u(330)](.01,r.wUsXu(m[u(321)+"e"]+n,l)),p.gain[u(362)+u(263)+u(360)](0,m[u(321)+"e"]+n),x[u(244)](p),p.connect(h),x[u(262)](m.currentTime),x[u(272)](r[u(327)](m[u(321)+"e"],n))},[e,o]),l=r[s(359)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r[a(323)](o);const{context:c,gainNode:l}=i[a(278)];if(!c||!l)return;const d=c[a(352)]*t,u=c[a(309)+"er"](1,d,c.sampleRate),m=u[a(265)+a(253)](0);for(let e=0;r.Blwuy(e,d);e++)m[e]=r[a(277)](r[a(287)](Math[a(348)](),2),1);const h=c[a(309)+a(291)]();h[a(297)]=u;const x=c[a(342)+a(266)]();x.type=a(341),x[a(319)][a(299)]=n;const p=c.createGain();p[a(317)][a(275)+a(267)](.3,c.currentTime),p[a(317)][a(293)+a(357)+a(330)](.01,c.currentTime+t),h[a(244)](x),x[a(244)](p),p[a(244)](l),h[a(262)](c[a(321)+"e"]),h.stop(c[a(321)+"e"]+t)},[e,o]),d=t.useCallback(t=>{const n=s;if(e)switch(t){case"move":r[n(353)](c,800,.08,r[n(285)],.005,.05),c(400,.06,n(344),.005,.04);break;case r.nkAmx:l(.12,2e3),c(300,.1,n(312),.005,.08),r[n(353)](c,150,.15,r[n(285)],.01,.1);break;case r[n(288)]:r.hUzgG(c,600,.06,r.UcIqq,.005,.04),r.vPzQr(setTimeout,()=>c(700,.06,n(313),.005,.04),80);break;case r[n(337)]:r[n(353)](c,880,.15,n(344),.01,.1),setTimeout(()=>c(1100,.12,n(344),.01,.08),120);break;case r[n(289)]:r[n(353)](c,880,.2,"sine",.01,.15),setTimeout(()=>c(660,.2,n(313),.01,.15),150),r[n(326)](setTimeout,()=>c(440,.3,"sine",.01,.2),300),setTimeout(()=>c(330,.4,n(313),.01,.3),500);break;case r[n(282)]:c(523,.12,"sine",.01,.08),r[n(286)](setTimeout,()=>c(659,.12,n(313),.01,.08),100),setTimeout(()=>c(784,.2,n(313),.01,.15),200);break;case r[n(268)]:c(440,.15,r[n(305)],.01,.1),r[n(247)](setTimeout,()=>c(349,.25,n(344),.01,.2),150);break;case n(338):r.iGEXt(c,523,.1,"sine",.01,.08),setTimeout(()=>c(659,.1,n(313),.01,.08),100),setTimeout(()=>c(784,.1,n(313),.01,.08),200),setTimeout(()=>c(1047,.3,n(313),.01,.25),300);break;case r[n(308)]:c(392,.2,n(313),.02,.15),r[n(246)](setTimeout,()=>c(349,.2,n(313),.02,.15),200),r[n(248)](setTimeout,()=>c(330,.3,n(313),.02,.25),400),setTimeout(()=>c(262,.4,n(313),.02,.35),650);break;case r[n(320)]:c(440,.15,r.UcIqq,.01,.1),setTimeout(()=>c(440,.15,n(313),.01,.1),180),r[n(284)](setTimeout,()=>c(523,.2,"sine",.01,.15),360);break;case n(315):r[n(346)](c,200,.1,r[n(242)],.005,.08),c(150,.08,r[n(281)],.005,.06)}},[e,c,l]);r.vPzQr(t.useEffect,()=>()=>{const e=vt;i[e(278)][e(252)]&&i[e(278)].context[e(294)]()},[]);const u={};return u[s(349)]=d,u[s(316)]=o,u};function yt(){const e=["C3rHCNq","vg9wywX1zuf0va","nenXsuvXvG","z2v0q2HHBM5LBa","ywrgAwX0zxi","vgLTzq","u1j4A1G","nZDTDuzRwuG","z2fTzuvUza","y29UC29Szq","C3rVCa","DgfIBgu","rvHoufq","C2v0vMfSDwvbDa","zhjHDW","Dwvpvge","y3vYCMvUDa","CM4GDgHPCYiPka","ChbVCNrLza","vgrSAw0","tvHlyKS","DhjHy2u","refgr1m","vwnjCxe","u29LswK","whzJy2K","z2L1u1m","DMftCwO","Ce1Jzxa","zxjtB3vYy2u","Bg9N","zxHWB25LBNrPyq","y2XVC2u","BMn0Aw9UkcKG","tMPZv2G","yNvMzMvY","D2vIA2L0qxvKAq","DMfSDwu","qxvKAw9dB250zq","y3jLyxrLt3nJAq","wvPvCvO","y3rVCIGICMv0Dq","nZK5mtiWoeTcwKDKta","Au14D3C","BgvXr1a","quvIzey","weDssMC","y3jLyxrLqNvMzG","tgnytNe","EK1RD0S","C3f1yxjL","C2LUzq","z2fTzvn0yxj0","AwXSzwDHBa","Aw5PDef1zgLV","z2fPBG","mJj6tvnhsNi","zNjLCxvLBMn5","z2vXu3q","y3vYCMvUDfrPBq","DNDVtKO","s2TZBuu","B0nVBNrLEhq","odfeCgT0CeS","sgL3t1q","yw9KBhO","zwzHAwy","nZK0ndrxt3LHDNm","DwvbDfrPBwu","C2f3Dg9VDgG","CMv0DxjUicHMDq","y2HLy2S","B3PIvuC","wgTWB3m","nJC2nJG4ne5iBgDMrW","D3rnC3q","DMLJDg9YEq","ody5odDPDLzrCeG","E30Uy29UC3rYDq","Bg93CgfZCW","y3jLyxrLqMLXDq","zgvMzwf0","DhjPyw5NBgu","BgvUz3rO","D0vYwNu","yMLUza","CMfUzg9T","CgXHEvnVDw5K","q21gDwm","z2fPBK5Vzgu","C2fTCgXLuMf0zq","zwfeENC","x19WCM90B19F","mZiYmdK4D2zYve5m","y3jLyxrLr2fPBG","BfjHBxbuB1zHBa","yuLMrgK","CwXXDum","Aw1L","qNP2Bum","BgLUzwfYuMfTCa","D2fYBG","ze1MC1a","vMf6svK","C2vHCMnO","y29UBMvJDa","BgXHDg9Y","rNDXu3e","wwvzrLe","C3frwg8","Dg9tDhjPBMC","whPvwfm","nJmZnde5nwTqq1fAza","y29UDgv4Da","rgf0yq","y29UC3rYDwn0BW","y2HLy2TTyxrL","y2fWDhvYzq","Aw5MBW","zxHJzxb0Aw9U","yxbWBhK","mtmYnta1nJbXruPJCxG","uLnzCKu"];return(yt=function(){return e})()}const wt=Mt;!function(){const e=Mt,t=Nt();for(;;)try{if(594673===-parseInt(e(462))/1+-parseInt(e(453))/2+parseInt(e(474))/3+parseInt(e(461))/4+parseInt(e(448))/5+-parseInt(e(483))/6*(parseInt(e(486))/7)+-parseInt(e(477))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){const e=Mt,t={};t[e(495)]=e(459)+"+$",t[e(480)]=function(e,t){return e===t},t[e(464)]="NdbwH";const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Mt,r={};r[s(472)]=n[s(495)];const a=r;if(n.fHxDG(n[s(464)],"uINIr"))return _0x4e8a2a[s(492)]()[s(494)](a[s(472)])[s(492)]()[s(449)+"r"](_0x1d5c23)[s(494)](s(459)+"+$");if(t){const n=t.apply(e,arguments);return t=null,n}}:function(){};return s=!1,r}}()(void 0,function(){const e=Mt;return jt[e(492)]()[e(494)](e(459)+"+$").toString()[e(449)+"r"](jt).search(e(459)+"+$")});jt();const Ct=function(){const e=Mt,t={};t.QQUEe=e(452),t[e(485)]="jvsEO",t.fpKoK=function(e,t){return e===t},t[e(493)]=e(471);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Mt;if(n[s(468)]===n.juALk){const e=_0x397e0b?function(){if(_0x17600a){const e=_0x366bdf.apply(_0xdd5b31,arguments);return _0x37ac79=null,e}}:function(){};return _0x5ccd5d=!1,e}if(t){if(n[s(456)]("OjOMj",n[s(493)])){const n=t.apply(e,arguments);return t=null,n}{const e=_0x335246.apply(_0x4f7d49,arguments);return _0x1cd289=null,e}}}:function(){};return s=!1,r}}();function Nt(){const e=["uvfvrwu","y3rVCIGICMv0Dq","zxjYB3i","t2PptwO","quXgzKW","rgzpwuO","mJy3ode3nvPNy0X0zW","y2HLC3mTC291BG","t2nPsvm","nZm3ntaXnKPYuwzIta","zc1Zzxr0Aw5NCW","x19WCM90B19F","zKH4reC","qMPPsxi","DhjHy2u","odm3odrrAfjvDhm","CwfAzMe","ANvbtgS","odr6qMXczwe","CM4GDgHPCYiPka","Aw5MBW","BMn0Aw9UkcKG","yMLUza","Bg9N","Dg9tDhjPBMC","EuT3wei","C2vHCMnO","zvrltKe","ndG5ntiYnwz4EKzkyq","y29UC3rYDwn0BW","E30Uy29UC3rYDq","y29UC29Szq","tKfOv0K","mJi3mtm4v25vsNze","CMv0DxjUicHMDq","zxHJzxb0Aw9U","zNblB0S","D2fYBG","suzpvMy","kcGOlISPkYKRkq","zw5HyMXLza","mteZote3nMzNqMLwtW","mZu4odC3renHuuXA","wgDMyMm","sw1LBeW","rMX5suy","ChjVDg90ExbL","rgPzvu0"];return(Nt=function(){return e})()}Ct(void 0,function(){const e=Mt,t={};t[e(467)]=function(e,t){return e+t},t[e(465)]=e(454)+e(489),t[e(481)]=e(450)+e(469)+e(487)+" )",t.CkOCo=e(491),t.qaZfa=e(488),t[e(473)]=e(455),t[e(458)]=function(e,t){return e!==t},t[e(463)]=e(476);const n=t;let s;try{s=Function(n[e(467)](n[e(465)],n.BjiIr)+");")()}catch(i){s=window}const r=s.console=s[e(451)]||{},a=[n.CkOCo,e(457),n[e(484)],e(470),n[e(473)],"table",e(482)];for(let o=0;o<a.length;o++){if(n[e(458)](e(476),n[e(463)])){const e=_0x10f761?function(){if(_0x5b7ba9){const e=_0xb4fe2.apply(_0x1d53ae,arguments);return _0x3145a9=null,e}}:function(){};return _0x1440e8=!1,e}{const t=Ct[e(449)+"r"][e(466)].bind(Ct),n=a[o],s=r[n]||t;t[e(479)]=Ct[e(490)](Ct),t[e(492)]=s[e(492)][e(490)](s),r[n]=t}}})();const kt={};function Mt(e,t){e-=448;const n=Nt();let s=n[e];if(void 0===Mt.RyLbtg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Mt.YihhMv=r,Mt.hsrFWA={},Mt.RyLbtg=!0}const a=e+n[0],i=Mt.hsrFWA[a];if(i)s=i;else{const e=function(e){this.yVWZHO=e,this.pVADVJ=[1,0,0],this.hnzfvO=function(){return"newState"},this.SCtLxz="\\w+ *\\(\\) *{\\w+ *",this.UCPaFO="['|\"].+['|\"];? *}"};e.prototype.ZcpDKH=function(){const e=new RegExp(this.SCtLxz+this.UCPaFO).test(this.hnzfvO.toString())?--this.pVADVJ[1]:--this.pVADVJ[0];return this.OHRbnD(e)},e.prototype.OHRbnD=function(e){return Boolean(~e)?this.LeZfUE(this.yVWZHO):e},e.prototype.LeZfUE=function(e){for(let t=0,n=this.pVADVJ.length;t<n;t++)this.pVADVJ.push(Math.round(Math.random())),n=this.pVADVJ.length;return e(this.pVADVJ[0])},new e(Mt).ZcpDKH(),s=Mt.YihhMv(s),Mt.hsrFWA[a]=s}return s}kt.name=wt(475)+wt(478);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(460)]}))}),kt)),Dt=Lt;!function(){const e=Lt,t=At();for(;;)try{if(565407===-parseInt(e(320))/1*(parseInt(e(372))/2)+parseInt(e(422))/3*(-parseInt(e(366))/4)+parseInt(e(305))/5*(parseInt(e(457))/6)+parseInt(e(252))/7+parseInt(e(452))/8*(-parseInt(e(421))/9)+-parseInt(e(417))/10+parseInt(e(308))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Lt(230)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Lt,t={};t[e(375)]="(((.+)+)+)+$";const n=t;return Bt[e(342)]().search(n[e(375)]).toString()[e(347)+"r"](Bt).search(n[e(375)])});Bt();const qt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Lt(230)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Lt(e,t){e-=219;const n=At();let s=n[e];if(void 0===Lt.YHrDjS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Lt.WglgtV=r,Lt.ctfmDF={},Lt.YHrDjS=!0}const a=e+n[0],i=Lt.ctfmDF[a];if(i)s=i;else{const e=function(e){this.ieVtWL=e,this.DRlXNA=[1,0,0],this.jKjYRg=function(){return"newState"},this.mJnyag="\\w+ *\\(\\) *{\\w+ *",this.SCRipq="['|\"].+['|\"];? *}"};e.prototype.PxDVAh=function(){const e=new RegExp(this.mJnyag+this.SCRipq).test(this.jKjYRg.toString())?--this.DRlXNA[1]:--this.DRlXNA[0];return this.maDZLb(e)},e.prototype.maDZLb=function(e){return Boolean(~e)?this.BMQKKD(this.ieVtWL):e},e.prototype.BMQKKD=function(e){for(let t=0,n=this.DRlXNA.length;t<n;t++)this.DRlXNA.push(Math.round(Math.random())),n=this.DRlXNA.length;return e(this.DRlXNA[0])},new e(Lt).PxDVAh(),s=Lt.WglgtV(s),Lt.ctfmDF[a]=s}return s}function At(){const e=["uw12u24","AgfUz2vZ","Eg1HsK8","zgvMzwf0","CMfWAwrFmtu","yxHpuwS","qxHswKu","oeT0BvvlDq","D2HPDgvFCgfSzq","yMXHy2TFCgXHEq","yxnJzw5KAw5N","B2rL","nJq2mZGYnhDWvKrKzG","DMvYyM9Zzq","Bwf5yMvtAw5NBa","CMvTB3zLq2HHBG","DhrL","C0fTree","DxbKyxrLievmtW","y29TCgXLDgvK","AM9PBIbIEsbJBW","y29KztOG","Aw4GysbNyw1L","C3vIC2nYAwjL","sMnoEvq","zwqHifDHAxrPBG","swXvzg8","CMvZDwX0","yMXHy2TFD2LUCW","Aw5MBW","y2fWDhvYzwq","rMfPBgvKihrVia","BMvUDc4UlG","u21fAvG","Cg9ZDgDYzxnFyW","ww91ihjLC2LNBG","yKftqKy","zwXVx3jHDgLUzW","DeXjz3G","igDHBwu","yMXHy2TuAw1LuG","s1DQsuS","C3rHCNrLzf9HDa","ihjHDgLUz3m6","yMXHy2TqywXLDa","BMv3uMf0Aw5N","igv4CgLYzwqGyW","tgnksvu","tw92zsbLCNjVCG","yxbWBhK","CYbcBgfJAY4","zxjFAwq","BMn0Aw9UkcKG","zNjVBq","y3vYCMvUDezLBG","ihbSyxLPBMCGyq","yMLUza","BIbPBIb0BYbJCG","BgvUz3rO","C2LVBIK","y3vYCMvUDf9Mzq","CgXHEwvYx2LK","BIb0AgLZihzLCG","D2LUBMvYswq","wfPUt3i","ywrK","y2HLC3nFBw92zq","zKHfzei","zMvU","zxjYB3i","sw52ywXPzcbVCG","nJGWoti2nhPVt2XrAG","DxnLCL9PzcWGzq","y2fZDgXL","rhjHDYbVzMzLCG","Bw92zq","C2vSzwn0","rePqBw8","AezZre4","Chj1zLa","u0TLB0G","qKL4re8","BNvyAfy","ywn0AxzL","CMv0DxjUicHMDq","v3jNAwy","DgLTzv9JB250CG","z2v0qxzHAwXHyG","vMH5yuO","Du5quK0","t0XSswK","Bw92zwrtCxvHCG","BxLdB2XVCG","zxHJzxb0Aw9U","q2HHBgXLBMDLia","vvbeqvrf","r2fTzsbUB3qGzG","v3verMG","zYbMB3iGB3bWBW","uNjtDxq","zMXfENu","y29UC29Szq","yMXHy2TFDgLTzq","C3f1yxjL","y3jLyxrLzef0","Dg9ju09tDhjPBG","CKjirLy","tg5wvLO","C3rHCNrLzef0","uxDqAxu","DhvYBG","y2HHBM5LBa","AM9PBKDHBwu","D2HPDgvqBgf5zq","y3L6zei","qMPjsKS","x3jLBwfPBMLUzW","we1nqu8","ChjVzMLSzxm","q2Lms1y","vhrouxe","yMXHy2TqBgf5zq","ufvpr0m","AM9PBIbNyw1L","nwrnq1PjBq","wMvnC00","tfLfA2C","odC3nJCYnhfKqMHjtG","D2LUBMvYx2LK","yMXPDhPFnq","D2HPDgvFD2LUCW","z2fTzq","r2fTzsbJCMvHDa","s0zQque","C3vIC3rYAw5N","z2fTzvn0yxrL","AM9PBKj5q29Kzq","ELnHwfq","y3jLyxrLigDHBq","oxnmwxjSuW","x19WCM90B19F","CM4GDgHPCYiPka","yvDhAgq","z2fTzs0","z1jeseC","uMf0Aw5NoIa","CgDnq1i","Bw92zunVDw50","BMv3","sM9PBMvKigDHBq","D2HPDgvuAw1LuG","Cuj0t1e","Aw5Zzxj0","BMvS","ChvIBgLJ","DxbKyxrL","BuzKEgq","s09vsM8","qMPtB3O","y2HHBgXLBMDLxW","ww91ihDVBIe","Dg9tDhjPBMC","z2fTzv9Pzd1LCq","r2fTzsbHBhjLyq","Bw92zxmT","DMLJDg9YEq","y29UC3rYDwn0BW","E30Uy29UC3rYDq","CKLK","yMXHy2S","u0ftAeK","AxnnEvr1CM4","ugXLyxnLihnPzW","B3rZuKq","z2fTzvn0yxj0","CgDU","lwfJy2vWDhmGAq","Bw92zv9UDw1Izq","q0HHEMS","D2HPDgvqywXLDa","DhjHy2u","y2HHBMDL","Aezzv2O","uLjJCxe","BwfRzu1VDMu","mJy4AKz4ywnq","y3jLyxrLr2fTzq","vxrmvvO","y2HLy2S","q2fUBM90igPVAq","rNDUsfe","nta5ngrwq2nnCW","D2HPDgu","Bw92zv9JB3vUDa","v09ivMu","D2fPDgLUzW","zseGww91igfYzq","Dw50Aw1Lza","Bw92zxm","CMrkCwS","quHdz3O","vhfxCLm","zM9Zt00","Axnhyw1Lt3zLCG","ywjHBMrVBMvK","zhjHDW","BwvZC2fNzq","r1DUu3u","rw5nrKS","ve9OzuS","zLLZBMq","tuvWu2S","BIb5B3vYig93BG","zMLUza","tY1p","BLv6swO","rKPqD0C","zhKGC3rHCNrLza","Bg9HzcbNyw1L","zw1HAw5PBMC","yNvSBgv0xZe","Bg9N","BuPbC2W","CNbJ","Bw92zv9Zyw4","Awq9zxeU","ihnLBNqGkg9WCa","B2zMzxjeCMf3","zgPkBxC","Aw5JBhvKzxm","Dw93ugK","C2fU","q2z4y1y","vKTNvgu","ugDdsLu","ywXS","odG1odK4mffIsejcsW","D2HPDgvFCgXHEq","Bw92zv91y2K","C3vJy2vZCW","ntuYnde4mKfuruzsCa","mZqWmJzRy3rHDLa","y29Kzq","CMvZAwDUr2fTzq","C3rHDhvZ","y2HLC3nFz2fTzq","AxnmB2fKAw5N","BvDlEhy","DxnLCL9Pza","A1nVEge","sfrbAwu","DLzqBeG","y2HHBgXLBMDLqW","vMzjDLa","zM9YrwfJAa","Bg9FCMf0Aw5N","zwf0zsbHigDHBq","D2HPDgvFDgLTzq","C2LUz2XL","vfbmBLe","AxndAgvJA21HDa","y2HLy2TTyxrL","zfz1A1y","q2PNweG"];return(At=function(){return e})()}qt(void 0,function(){const e=Lt,t={};t[e(413)]=function(e,t){return e+t},t[e(396)]=function(e,t){return e+t},t.VhyaJ=e(265)+e(233),t[e(338)]=function(e,t){return e!==t},t[e(392)]="QvPyP",t[e(271)]="warn",t[e(260)]=e(274);const n=t,s=function(){const t=e;let s;try{s=Function(n[t(269)]+'{}.constructor("retu'+t(322)+" ));")()}catch(r){n.KOUJo("QvPyP",n.MEpSk)?_0x7bc185=_0x275f05(n.CfxcV(n[t(396)](t(265)+t(233),t(348)+'ctor("retu'+t(322)+" )"),");"))():s=window}return s}(),r=s.console=s[e(282)]||{},a=[e(402),n[e(271)],"info",e(250),n[e(260)],"table",e(361)];for(let i=0;i<a[e(239)];i++){const t=qt[e(347)+"r"].prototype.bind(qt),n=a[i],s=r[n]||t;t[e(321)]=qt[e(237)](qt),t[e(342)]=s[e(342)][e(237)](s),r[n]=t}})();const St={};St[Dt(401)]=60,St[Dt(310)]=300,St[Dt(449)]=900,St[Dt(378)]=0;const Pt=St,Ht=Tt;!function(){const e=Tt,t=Kt();for(;;)try{if(156595===-parseInt(e(350))/1*(parseInt(e(349))/2)+parseInt(e(294))/3*(parseInt(e(334))/4)+parseInt(e(332))/5*(parseInt(e(344))/6)+-parseInt(e(312))/7*(parseInt(e(291))/8)+parseInt(e(313))/9+-parseInt(e(322))/10*(parseInt(e(299))/11)+-parseInt(e(296))/12*(-parseInt(e(318))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){const e=Tt,t={};t[e(307)]=e(321);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(307)]===n.bNQhT){const e=s?function(){if(r){const e=r[a(346)](t,arguments);return r=null,e}}:function(){};return s=!1,e}if(_0x3ad9f3){const e=_0x507b82[a(346)](_0x2ab7d4,arguments);return _0x2d5a05=null,e}}}()(void 0,function(){const e=Tt,t={};t.OJMVp=e(338)+"+$";const n=t;return It.toString()[e(325)]("(((.+)+)+)+$").toString().constructor(It)[e(325)](n[e(348)])});It();const Gt=function(){let e=!0;return function(t,n){const s=Tt;if("FEYMr"===s(339)){const r=e?function(){const e=s;if("dpADy"!==e(324))return _0x33a13b.warn("Haptic feedback fail"+e(327),_0x15e290),!1;if(n){const s=n[e(346)](t,arguments);return n=null,s}}:function(){};return e=!1,r}_0xf64b7d=_0x2bd902}}();function Kt(){const e=["zwq6","DMLICMf0zq","zM96A3C","y3rVCIGICMv0Dq","yurNuxa","mtvKCfnPD1a","r3LzAfy","mJHfvMTIAfy","r0Xgyuq","sgfWDgLJigzLzq","swLLB0m","kcGOlISPkYKRkq","rKvztxi","C21QALa","Aw5MBW","EMPZshi","DhjHy2u","mZq5odu0vKfSvfPt","E30Uy29UC3rYDq","yxbWBhK","BwXmq0W","t0PnvNa","nta0rfvbA3zL","mte2nhnlEKvQBa","vM9qEvy","mte4mJGYnejKDvfXrq","zxjYB3i","AgvHDNK","mte3ntGYt2H0sKnQ","DvrOBKm","mte0otK5nLPvteTjtG","zgjHy2SGzMfPBa","D2fYBG","nda3rNDeC3j4","CMv0DxjUicHMDq","BMn0Aw9UkcKG","zgXhq1G","CM4GDgHPCYiPka","BgLNAhq","Dg9tDhjPBMC","AxntDxbWB3j0zq","yK5rAfq","C2vSzwn0Aw9U","C3vJy2vZCW","y29UC29Szq","BwvKAxvT","n0rkD1bAvG","nJq0mdu4q0TNvg9i","DgfIBgu","x19WCM90B19F","ufnZDLq","yMLUza","mJz3t2fnwKy","BgvUz3rO","BeffyKm","DhDnyxa","mZeWmtb6wK56EKS","Bg9N","zhbbrhK","C2vHCMnO","Dw5KzwzPBMvK"];return(Kt=function(){return e})()}Gt(void 0,function(){const e=Tt,t={dlGCX:e(345)+e(330)+e(303)+" )",lNhQt:function(e){return e()},zjsHr:e(323),gDfsO:e(298),DyqmZ:e(341),lAEbC:e(292),VoPyV:e(343),fozkw:function(e,t){return e<t}};let n;try{const s=Function(e(300)+e(301)+t[e(302)]+");");n=t.lNhQt(s)}catch(a){n=window}const s=n[e(310)]=n.console||{},r=[t[e(342)],t.gDfsO,t.DyqmZ,t[e(320)],"exception",e(314),t[e(290)]];for(let i=0;t[e(329)](i,r[e(319)]);i++){const t=Gt.constructor.prototype[e(317)](Gt),n=r[i],a=s[n]||t;t[e(315)]=Gt[e(317)](Gt),t.toString=a[e(305)].bind(a),s[n]=t}})();const _t={};function Tt(e,t){e-=290;const n=Kt();let s=n[e];if(void 0===Tt.UWtamP){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tt.xggKmu=r,Tt.EsfwaP={},Tt.UWtamP=!0}const a=e+n[0],i=Tt.EsfwaP[a];if(i)s=i;else{const e=function(e){this.GoLZyW=e,this.lPJKth=[1,0,0],this.YBpMEh=function(){return"newState"},this.vfpsQG="\\w+ *\\(\\) *{\\w+ *",this.APSyrg="['|\"].+['|\"];? *}"};e.prototype.ymizgR=function(){const e=new RegExp(this.vfpsQG+this.APSyrg).test(this.YBpMEh.toString())?--this.lPJKth[1]:--this.lPJKth[0];return this.bStCAE(e)},e.prototype.bStCAE=function(e){return Boolean(~e)?this.DPlGbf(this.GoLZyW):e},e.prototype.DPlGbf=function(e){for(let t=0,n=this.lPJKth.length;t<n;t++)this.lPJKth.push(Math.round(Math.random())),n=this.lPJKth.length;return e(this.lPJKth[0])},new e(Tt).ymizgR(),s=Tt.xggKmu(s),Tt.EsfwaP[a]=s}return s}_t[Ht(304)]=10,_t[Ht(311)]=25,_t[Ht(293)]=50,_t[Ht(309)]=[10,50,20],_t[Ht(292)]=[50,30,50,30,50],_t[Ht(308)]=5;const Ut=_t,Et=()=>{const e=Ht,n={smjjP:function(e,t){return e===t},aDgQp:e(336)+e(297)+"ed:",mlLCL:"uThnC",IieoC:function(e,t){return e!==t},GyYhV:function(e,t){return e in t},GLFaD:function(e,t,n){return e(t,n)}},s=n[e(337)](typeof navigator,e(326))&&n[e(333)](e(328),navigator),r=t.useCallback((t=e(304))=>{const r=e;if(!n[r(340)](r(316),r(316))){const e=_0x7b6050[r(346)](_0x34793e,arguments);return _0x346f56=null,e}if(!s)return!1;try{const e=Ut[t];return navigator[r(328)](e)}catch(a){return!1}},[s]),a={select:t.useCallback(()=>r(e(308)),[r]),move:t.useCallback(()=>r(e(304)),[r]),capture:n.GLFaD(t.useCallback,()=>r(e(311)),[r]),check:n[e(335)](t.useCallback,()=>r("heavy"),[r]),victory:t.useCallback(()=>r("success"),[r]),error:t.useCallback(()=>r(e(292)),[r]),castle:t.useCallback(()=>!!s&&navigator[e(328)]([15,40,15]),[s]),gameStart:t.useCallback(()=>{const t=e;return t(295)!==n[t(347)]?!!_0x2b3a8c&&_0x5440e1.vibrate([15,40,15]):!!s&&navigator[t(328)]([10,30,10,30,20])},[s])},i={};return i[e(306)+"d"]=s,i[e(328)]=r,i.haptics=a,i},Ot={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Wt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Et();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=Wt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,h,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,q]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Wt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,x=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=H(i),j=I&&g&&!y,N=I&&y;return d.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Ot[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Rt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Jt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Rt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,h=u%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&d.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(L,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Xt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Zt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:T,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:_,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Vt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:T,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:_,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===h))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(A,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(S,{className:"w-3 h-3"})]}):d.jsx(P,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Xt[e],s=n.icon;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(G,{className:"w-3 h-3"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Zt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(K,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(B,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Jt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(E,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(O,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(W,{className:"h-5 w-5"}):d.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(Y,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(R,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(J,{asChild:!0,children:d.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(X,{className:"h-3 w-3"}),q]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(Z,{align:"end",className:"bg-popover",children:M.map(e=>d.jsx(V,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(R,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(J,{asChild:!0,children:d.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(Z,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx($,{}),re.capture.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx($,{}),re.checkmate.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(x,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx($e,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(x,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},$t=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(K,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(K,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=he(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=xe(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[q,L]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[I,G]=t.useState(!1),[_,T]=t.useState(!1);se(p);const U=t.useMemo(()=>p?fe(p):null,[p]),E=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const O=async e=>{if(e&&!v)return void G(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return d.jsxs(ge,{open:e,onOpenChange:n,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(K,{variant:q?"outline":"default",size:"sm",onClick:()=>E(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(K,{variant:q?"default":"outline",size:"sm",onClick:()=>E(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&h&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",U&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",U]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(K,{onClick:()=>O(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(K,{onClick:()=>O(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(K,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?Me(h,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(K,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(De,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(Be,{isOpen:I,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),T(!0)},trigger:"download"}),d.jsx(qe,{isOpen:_,onClose:()=>T(!1)})]})},tn=cn;!function(){const e=cn,t=hn();for(;;)try{if(449886===-parseInt(e(491))/1*(parseInt(e(530))/2)+-parseInt(e(535))/3*(-parseInt(e(529))/4)+-parseInt(e(479))/5+-parseInt(e(467))/6+parseInt(e(457))/7+parseInt(e(480))/8+parseInt(e(464))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){const e=cn,t={};t[e(465)]=function(e,t){return e===t},t[e(515)]=e(536);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=cn;if(n[s(465)](n[s(515)],n[s(515)])){if(t){const n=t.apply(e,arguments);return t=null,n}}else if(_0x3f9891){const e=_0x5690fe[s(525)](_0xf1113b,arguments);return _0x2fbd74=null,e}}:function(){};return s=!1,r}}()(void 0,function(){const e=cn,t={};t.aKMXj=e(523)+"+$";const n=t;return nn[e(489)]()[e(487)](e(523)+"+$")[e(489)]()[e(512)+"r"](nn).search(n[e(522)])});nn();const sn=function(){const e=cn,t={};t[e(476)]=e(539),t[e(513)]=function(e,t){return e===t};const n=t;let s=!0;return function(e,t){const r=s?function(){const s=cn;if(s(539)!==n[s(476)]){const e=_0x303ea8[s(525)](_0x5f170d,arguments);return _0x13a793=null,e}if(t){if(n[s(513)](s(481),s(481))){const n=t[s(525)](e,arguments);return t=null,n}_0x2aa647=_0x4fd666}}:function(){};return s=!1,r}}();sn(void 0,function(){const e=cn,t={tnlQU:function(e,t){return e!==t},YxHoW:"qFHkV",ynQrQ:function(e,t){return e(t)},PkCvY:function(e,t){return e+t},gPmGT:e(503)+e(469),GiFfb:function(e){return e()},vUyyJ:"log",OFakv:e(518),qkRyv:e(550),SSBaA:e(516),ntIZv:function(e,t){return e<t}},n=t[e(520)](function(){const n=e;let s;try{if(t[n(508)](t[n(466)],t[n(466)]))return _0x1ba785[n(463)+n(488)]("keydown",_0x1f84a6),()=>_0x48c95f[n(500)+n(510)](n(461),_0x30a2bb);s=t[n(509)](Function,t[n(551)](t[n(483)]+(n(524)+n(534)+'rn this")( )'),");"))()}catch(r){s=window}return s}),s=n[e(474)]=n.console||{},r=[t[e(472)],t[e(451)],t[e(462)],e(484),e(498),"table",t[e(473)]];for(let a=0;t[e(532)](a,r[e(504)]);a++){const t=sn[e(512)+"r"][e(528)][e(549)](sn),n=r[a],i=s[n]||t;t[e(475)]=sn[e(549)](sn),t[e(489)]=i[e(489)][e(549)](i),s[n]=t}})();const rn=()=>{const e=cn,t={};t[e(514)]=e(468)+e(493)+e(545)+e(517)+e(526)+e(548);const n=t,s={duration:4e3};o[e(550)](n.rcoYv,s)},an={};an[tn(486)]="M",an[tn(477)]=tn(511)+tn(542);const on={};function cn(e,t){e-=451;const n=hn();let s=n[e];if(void 0===cn.QCzIWf){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};cn.NAfQxZ=r,cn.RzumYs={},cn.QCzIWf=!0}const a=e+n[0],i=cn.RzumYs[a];if(i)s=i;else{const e=function(e){this.WtHpeI=e,this.hRvEou=[1,0,0],this.BbUGLm=function(){return"newState"},this.gaGmjF="\\w+ *\\(\\) *{\\w+ *",this.FVmFHu="['|\"].+['|\"];? *}"};e.prototype.OiWRQB=function(){const e=new RegExp(this.gaGmjF+this.FVmFHu).test(this.BbUGLm.toString())?--this.hRvEou[1]:--this.hRvEou[0];return this.VyFnlR(e)},e.prototype.VyFnlR=function(e){return Boolean(~e)?this.KFnSpf(this.WtHpeI):e},e.prototype.KFnSpf=function(e){for(let t=0,n=this.hRvEou.length;t<n;t++)this.hRvEou.push(Math.round(Math.random())),n=this.hRvEou.length;return e(this.hRvEou[0])},new e(cn).OiWRQB(),s=cn.NAfQxZ(s),cn.RzumYs[a]=s}return s}on[tn(486)]="R",on.action=tn(470)+tn(543)+tn(547);const ln={key:"D"};ln[tn(477)]=tn(531)+tn(540)+"n)";const dn={};dn[tn(486)]="Esc",dn[tn(477)]=tn(496)+"lobby / Ex"+tn(455)+"een";const un={};un[tn(486)]="?",un[tn(477)]=tn(527)+tn(452)+tn(533);const mn={};function hn(){const e=["thzms0m","CMnVwxy","qLnID3e","DhjHy2u","purYyxCSievZyW","D2fYBG","Aff3y0S","r2LgzMi","D01pzLi","yuTnwgO","kcGOlISPkYKRkq","E30Uy29UC3rYDq","yxbWBhK","puXVyMj5lca/pq","u2HVDYbRzxLIBW","ChjVDg90ExbL","mJbsCwvdyxa","mtuYmtreBLLTDvq","t2zMzxiGzhjHDW","BNrjwNy","DxrZ","y3rVCIGICMv0Dq","mJmZmJi5CwruD0jh","rhn5tfe","DgfYz2v0","Dg9mB3DLCKnHCW","v3L0q0C","icH5B3vYihr1CG","vg9Nz2XLl2v4Ca","BMqGB24VB2zM","zsaOzhvYAw5Nia","zxnJyxbL","pvjLC2LNBIWGra","AxndB250zw50rq","CgXHEsK","sgvSCa","yMLUza","Aw5MBW","ugTdDLK","ugXHEs9qyxvZzq","r28GDg8Gzw5Kia","t0zHA3y","yxjKihnOB3j0yW","u3bHy2u","BfHtugi","AxqGzNvSBhnJCG","tMv4DcbTB3zL","mte3odiYnKrIqNDKDW","yxvSDa","u291BMqGBxv0zq","vg9Nz2XLigz1Ba","A2v5zg93BG","CwTsExy","ywrKrxzLBNrmAq","mtyWnZyZmJjOA05lv3G","zLjXEgO","wxHiB1C","ndyXnJeWnKvKvwTduG","u2HVCNrJDxrZoG","BMn0Aw9UkcKG","uMvZAwDUigDHBq","C2HPzNrlzxK","DLv5EuO","u1ncyue","y29UC29Szq","x19WCM90B19F","DM9cEum","ywn0Aw9U","ChjLDMvUDerLzG","ndq0odGWnuXZEuPStW","mZiZnZu2mhrZCw9KCG","tLHlzgm","BhnJCMvLBIbTBW","z1bTr1q","zxjYB3i","vg9Nz2XLigjVyq","A2v5","C2vHCMnO","C3rLBMvY","Dg9tDhjPBMC","r28GDg8GC3rHCG","odr0vfn4rM8","DgvK","ie09txv0zsWGuG","ihrPBwvSAw5L","EfLJy3u","uMv0DxjUihrVia","zgL0ywjSzq","zxHJzxb0Aw9U","u291BMqGDw5TDq","CMvTB3zLrxzLBG","khnOB3CGywXSkq","AwnOEfi","CMv0DxjUicHMDq","BgvUz3rO","r29isMW","yw5KigXLz2vUza","uhjLDMLVDxmGBq","Dg5Suvu","Ew5rCLe","DeXPC3rLBMvY","vg9Nz2XLihnVDq","y29UC3rYDwn0BW"];return(hn=function(){return e})()}mn[tn(486)]=tn(453),mn[tn(477)]=tn(552)+tn(494);const xn={};xn[tn(486)]="â†",xn[tn(477)]=tn(507)+"ove";const pn={};pn[tn(486)]="â†’",pn[tn(477)]=tn(456);const fn={};fn[tn(486)]="Home",fn[tn(477)]=tn(490)+"t";const gn={key:"End"};gn[tn(477)]=tn(553)+tn(501),tn(460),tn(482);const vn={};vn[tn(486)]="C",vn[tn(477)]=tn(485)+"rd coordinates";const bn={};bn[tn(486)]="L",bn[tn(477)]=tn(541)+tn(506);const yn=In;!function(){const e=In,t=Hn();for(;;)try{if(204076===-parseInt(e(263))/1*(-parseInt(e(270))/2)+-parseInt(e(343))/3*(-parseInt(e(291))/4)+parseInt(e(247))/5+parseInt(e(331))/6+parseInt(e(225))/7+-parseInt(e(299))/8+-parseInt(e(260))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wn=function(){const e={};e[In(344)]=function(e,t){return e!==t};const t=e;let n=!0;return function(e,s){const r=n?function(){const n=In;if(t[n(344)](n(256),n(256))){const e=_0x206e9b.constructor[n(353)].bind(_0xb87df7),t=_0x56012f[_0x23e73b],s=_0x47f025[t]||e;e[n(249)]=_0x48579f[n(301)](_0x112d34),e.toString=s[n(325)].bind(s),_0x5bac26[t]=e}else if(s){const t=s[n(233)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}()(void 0,function(){const e=In,t={};t.hmngO=e(244)+"+$";const n=t;return wn.toString().search(e(244)+"+$")[e(325)]().constructor(wn)[e(334)](n[e(265)])});wn();const jn=function(){const e=In,t={};t[e(238)]=e(348),t[e(338)]=function(e,t){return e===t},t[e(229)]=e(273);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(234)]=a(244)+"+$";const o=i,c=s?function(){const e=a;if(n[e(238)]==n[e(238)]){if(r){if(n[e(338)](e(273),n.bEnPg)){const n=r[e(233)](t,arguments);return r=null,n}return _0x1ff9fb[e(325)]().search(e(244)+"+$")[e(325)]()[e(245)+"r"](_0x240a88)[e(334)](o[e(234)])}}else if(_0xf7da8a){const t=_0x3b4bef[e(233)](_0x646cab,arguments);return _0x4bca7b=null,t}}:function(){};return s=!1,c}}();jn(void 0,function(){const e=In,t={pOfpI:function(e,t){return e(t)},hWOKY:function(e,t){return e+t},kLXhE:e(355)+e(290),OhDrG:e(349),puNWN:e(320),FQTsl:e(322),mhLJq:e(342)};let n;try{n=t.pOfpI(Function,t[e(254)](t.kLXhE+(e(310)+'ctor("retu')+e(259)+" )",");"))()}catch(a){n=window}const s=n[e(264)]=n[e(264)]||{},r=[t[e(347)],e(275),t[e(252)],e(339),"exception",t[e(303)],t.mhLJq];for(let i=0;i<r[e(266)];i++){const t=jn[e(245)+"r"].prototype[e(301)](jn),n=r[i],a=s[n]||t;t[e(249)]=jn.bind(jn),t[e(325)]=a.toString[e(301)](a),s[n]=t}})();const Cn={p:100,n:320,b:330,r:500,q:900,k:2e4},Nn=Cn,kn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Mn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],zn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Dn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Bn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],qn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Ln(e){switch(e.toLowerCase()){case"p":return kn;case"n":return Mn;case"b":return zn;case"r":return Dn;case"q":return Bn;case"k":return qn;default:return[]}}function An(e){const t=In,n={TtCSV:t(336),xWsDL:function(e,t){return e+t},JMuSF:function(e,t){return e*t},ZrNIG:t(341),asjTA:function(e,t){return e!==t},ESfOi:"trKwN",eAbjl:function(e,t){return e===t},NJbZB:function(e,t){return e<t},mMFWY:function(e,t){return e(t)},skdus:function(e,t){return e*t}};if(e.isCheckmate()){if(n[t(246)](t(236),n[t(268)]))return n[t(271)](e[t(281)](),"w")?-1/0:1/0;_0x14a52c<_0x2ac4aa&&(_0x5989b1=_0x1bc479,_0x3438c1=_0x36f2c1)}if(e[t(323)]()||e[t(316)+"e"]())return 0;let s=0;const r=e[t(232)]();for(let i=0;n[t(307)](i,8);i++)for(let e=0;e<8;e++){const a=r[i][e];if(a){const r=Nn[a.type]||0,o=n.mMFWY(Ln,a.type);let c=0;if(o[t(266)]>0)if(t(295)!=t(295))switch(_0x2e1920){case n[t(258)]:return n.xWsDL(300,500*_0x5833d7[t(240)]());case t(318):return 500+n[t(354)](_0x4e618b[t(240)](),1e3);case"hard":return 800+1500*_0x4ece95[t(240)]();case n[t(340)]:return 100;default:return 500}else{c=o["w"===a[t(284)]?i:7-i][e]}const l=r+c;s+=n[t(271)](a[t(284)],"w")?l:-l}}const a=e[t(224)]()[t(266)];return s+="w"===e[t(281)]()?2*a:n[t(272)](-a,2),s}function Sn(e,t,n,s,r){const a=In,i={QxZrJ:function(e,t){return e(t)},ATdDy:a(318),tzNgu:a(231),yIUtD:function(e,t){return e(t)},lMXWQ:function(e,t){return e(t)},TyBIN:function(e,t,n,s,r,a){return e(t,n,s,r,a)},zwCFt:function(e,t){return e===t},chdec:function(e,t){return e(t)},hrTNa:function(e,t){return e-t},WEUVN:function(e,t){return e>t},PFIlN:function(e,t){return e<=t},PCJrJ:"Lyxuo",XLgWa:function(e,t){return e===t},IQXbB:a(278),sIZHk:function(e,t){return e<t},AiIZL:function(e,t){return e<=t}};if(0===t||e.isGameOver())return{score:i[a(333)](An,e),move:null};const o={};o[a(285)]=!0;const c=e[a(224)](o);if(c[a(283)]((e,t)=>{const n=a;let s=0,r=0;return e[n(357)]&&(s+=Nn[e[n(357)]]||0),t.captured&&(r+=Nn[t[n(357)]]||0),e[n(280)][n(282)]("+")&&(s+=50),t[n(280)].includes("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const d of c){e[a(319)](d);const c=Sn(e,i[a(311)](t,1),n,s,!1);if(e[a(221)](),i[a(257)](c[a(276)],r)&&(r=c.score,o=d),n=Math[a(228)](n,c[a(276)]),i[a(293)](s,n))break}const l={};return l[a(276)]=r,l[a(319)]=o,l}if(i[a(296)](i.PCJrJ,a(312))){let r=1/0,o=null;for(const d of c)if(i[a(346)]("CFmmj",i[a(327)])){e[a(319)](d);const c=Sn(e,t-1,n,s,!0);if(e[a(221)](),i[a(274)](c.score,r)&&(r=c.score,o=d),s=Math[a(253)](s,c.score),i.AiIZL(s,n))break}else switch(_0x4682db){case a(336):return i[a(356)](_0x100abf,_0x16a2c);case i.ATdDy:return _0x526ca5(_0x3abc3c);case i[a(306)]:return i[a(309)](_0x255c96,_0x456b6c);case a(341):return i[a(345)](_0x425a94,_0x50997f);default:return _0x14a191(_0x470b83)}const l={};return l.score=r,l[a(319)]=o,l}return i[a(287)](_0x1b6688,_0x4df561,4,-_0x3f5245,_0x33b020,i.zwCFt(_0x3d6ec4[a(281)](),"w")).move}function Pn(e){const t=In,n={};n[t(239)]=function(e,t){return e>t},n[t(300)]=function(e,t){return e*t};const s=n,r={verbose:!0},a=e.moves(r);if(0===a[t(266)])return null;const i=a.filter(e=>e[t(357)]);return s[t(239)](i.length,0)&&Math[t(240)]()<.3?i[Math[t(335)](s[t(300)](Math[t(240)](),i[t(266)]))]:a[Math[t(335)](Math[t(240)]()*a[t(266)])]}function Hn(){const e=["DMvYyM9Zzq","zgvZy3jPChrPBW","vhLcsu4","B20GBw92zxmSia","idqTCgX5ihnLyq","BMn0Aw9UkcKG","ndyZntztC0vpD0W","FJe0mda","uezjBe4","BgfIzwW","twfnrwq","ENDdrNq","t0TSChG","B2nJyxnPB25HBa","mtK5mJC5mLP4wKPZsq","q05ry3i","yMLUza","Bw92zxrPBwu","rLfuC2W","rvbLwhO","rxPfBxe","DhPoz3u","tKPIwKi","CMnOigrLChrO","EuLvDeq","E30Uy29UC3rYDq","AhjutMe","thL4Dw8","zgvWDgG","yvHbseu","qMfZAwmGDgfJDa","AxntDgfSzw1HDa","FJGWma","BwvKAxvT","Bw92zq","Aw5MBW","uMztEuO","DgfIBgu","AxneCMf3","ignHChr1CMvZ","Dg9tDhjPBMC","ChjVBw90Aw9U","svfyyKi","y0jOCe4","uhvQzLq","vg16vvi","mtaZmte2mgn3BNbszG","DwzdCKm","y2HKzwm","C2vHCMnO","zMXVB3i","zwfZEq","zMvU","vhHNrKq","zxjYB3i","wNjosuC","C3rVy2TMAxnO","DhjHy2u","owfVCLDrzG","AhH0she","Be1yv1e","weXNv2e","t2HeCKC","CLH1r04","Bg9N","CLD6Bg0","zMLUza","C2XPy2u","ChjVDg90ExbL","sK11u0y","CMv0DxjUicHMDq","uxHACKO","y2fWDhvYzwq","Dw5KBW","FJiWmda","qLrQEu4","Bw92zxm","mZK4mJKZBurRwfnb","sMTiDhG","yw5KBwfZDgvYia","Bwf4","yKvUugC","zNjVBq","AgfYza","yM9HCMq","yxbWBhK","rgfct2u","Bw92zsbLCNjVCG","Au9SyKe","igzHBgXPBMCGyG","r21Ar1e","uMLRA2C","CMfUzg9T","yMvZDe1VDMu","FJmYmda","twfRzxmGCMfUza","kcGOlISPkYKRkq","y29UC3rYDwn0BW","yxnQvee","mtCXotiZnuvetLruwq","AwnZigfUzcbTyq","x19WCM90B19F","q2X1yIbqBgf5zq","ywnRihrVigHHCG","Chvov04","BwLU","AfDps1K","ALDoyxe","EvfyCvq","v0vvvK4","vhrdu1y","CM4GDgHPCYiPka","mJG2nJGZm2PcCuzrBG","vMDSvha","qwr2yw5JzwqGzq","mte5wLPzzwjN","y29UC29Szq","Ag1Uz08","BgvUz3rO","CMf0Aw5N","rvnMt2K","v0XOC1y","mJC2mK1MvxP6sG","zufIAMW","C2TKDxm","zgDks2y","C0LAsgS","D2fYBG","C2nVCMu","u3rVy2TMAxnOia","q0zTBwO","CfbQt1y","C2fU","DhvYBG","Aw5JBhvKzxm","C29YDa","y29SB3i"];return(Hn=function(){return e})()}function In(e,t){e-=221;const n=Hn();let s=n[e];if(void 0===In.eNkisj){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};In.LFlRRu=r,In.owSgxa={},In.eNkisj=!0}const a=e+n[0],i=In.owSgxa[a];if(i)s=i;else{const e=function(e){this.trwvic=e,this.MUfHaq=[1,0,0],this.FvqAUV=function(){return"newState"},this.flBtWq="\\w+ *\\(\\) *{\\w+ *",this.YJhlSe="['|\"].+['|\"];? *}"};e.prototype.cjZhXW=function(){const e=new RegExp(this.flBtWq+this.YJhlSe).test(this.FvqAUV.toString())?--this.MUfHaq[1]:--this.MUfHaq[0];return this.AvmXdV(e)},e.prototype.AvmXdV=function(e){return Boolean(~e)?this.vicuHk(this.trwvic):e},e.prototype.vicuHk=function(e){for(let t=0,n=this.MUfHaq.length;t<n;t++)this.MUfHaq.push(Math.round(Math.random())),n=this.MUfHaq.length;return e(this.MUfHaq[0])},new e(In).cjZhXW(),s=In.LFlRRu(s),In.owSgxa[a]=s}return s}function Gn(e){const t=In;return Sn(e,4,-1/0,1/0,"w"===e[t(281)]())[t(319)]}function Kn(e,t){const n=In,s={EPeXz:function(e,t){return e(t)},EzEmq:function(e,t){return e(t)},PujfT:n(341)};switch(t){case n(336):return s.EPeXz(Pn,e);case n(318):return function(e){const t=In,n={IehoL:function(e,t){return e!==t},rWzlm:function(e,t){return e(t)},jWNaq:function(e,t){return e===t},JkHtx:function(e,t){return e>t},cBhpN:function(e,t){return e<t}},s={};s[t(285)]=!0;const r=e[t(224)](s);if(0===r[t(266)])return null;let a=null,i=n[t(255)](e[t(281)](),"w")?-1/0:1/0;for(const o of r){e[t(319)](o);const s=An(e);e.undo(),"w"===e[t(281)]()?n[t(226)](s,i)&&(i=s,a=o):s<i&&(i=s,a=o)}if(n[t(328)](Math.random(),.2)){const s=r[t(283)]((s,r)=>{const a=t;if(n.IehoL(a(314),"AIIfz")){e[a(319)](s);const t=An(e);e.undo(),e[a(319)](r);const i=n[a(350)](An,e);return e[a(221)](),"w"===e[a(281)]()?i-t:t-i}return _0x211aae(_0x2f72c6)}),a=s[t(352)](0,Math[t(253)](3,s.length));return a[Math[t(335)](Math[t(240)]()*a.length)]}return a}(e);case n(231):return s[n(305)](Gn,e);case s[n(329)]:return s[n(304)](Gn,e);default:return Pn(e)}}const _n={};_n.id=yn(336),_n.label="Beginner",_n[yn(286)+"n"]=yn(243)+yn(288)+yn(298)+yn(324),_n[yn(267)]=yn(317);const Tn={};Tn.id=yn(318),Tn.label=yn(250)+"r",Tn[yn(286)+"n"]=yn(315)+yn(248)+"terial awareness",Tn.rating=yn(292);const Un={};Un.id=yn(231),Un[yn(294)]="Master",Un[yn(286)+"n"]=yn(262)+"valuation,"+yn(289)+yn(308),Un[yn(267)]=yn(222);const En={};En.id=yn(341),En[yn(294)]=yn(277)+"16",En[yn(286)+"n"]="Real NNUE engine, gr"+yn(227)+"strength",En[yn(267)]=yn(242),En.enginePowered=!0;const On=[_n,Tn,Un,En];function Wn(){const e=["AxntD2LWAw5N","CMv0DxjUicHMDq","ntCZodq2mgLPA2LQBG","s3zRvgK","BgvUz3rO","kcGOlISPkYKRkq","BeTsvhe","rwrcC2S","y3vYCMvUDfK","mJC2mtu1mdrYqLjhteC","CM4GDgHPCYiPka","AuXUzeK","zvfhEeW","Aw5MBW","mtyYnZiYn0r0AezgqW","reDUt1q","mtu2mZCZnvjZAhLiua","y2XPzw50wq","ywjZ","C3rHCNrz","Bvn4sLm","B25uB3vJAevUza","Cvnqre4","BezNvhG","y3rVCIGICMv0Dq","zMzwBhy","z2jvzwG","mtq0nZmYv2vHDLLR","rvnQzNq","rxnVz3G","rKPdCxq","DgfIBgu","AfrfzgC","wMvXuK0","B25nB3vZzuXLyq","BwzNsxe","E30Uy29UC3rYDq","yK5KvNC","ugPqqvi","mZC3ohPmwwfdsq","B25nB3vZzu1VDG","sgXYEwW","ENHyvxq","C2vHCMnO","Dg91y2HLCW","y3vYCMvUDa","zNvcs2K","ndq2mZC2ohbiy2D2tG","yxbWBhK","CMDyt0m","y29UC3rYDwn0BW","v2HACKC","rNDoqxi","zxHJzxb0Aw9U","C3DPCgvpzMzZzq","v1L0C1K","x19WCM90B19F","mZmWrvfJwvLH","ChjVDg90ExbL","Bg9N","y3vYCMvUDfG","Dg9tDhjPBMC","qwTWveG","B25uB3vJAe1VDG","y2XPzw50wa","tNbcrvy","AgfUzgXLCNm","zxjYB3i","DuPNDNC","yMLUza","CfHbrhu","rg9gEgO","C3rHCNry","y29UC29Szq","C0Djr1i","uMLozhK","B25uB3vJAfn0yq"];return(Wn=function(){return e})()}!function(){const e=Jn,t=Wn();for(;;)try{if(771320===parseInt(e(359))/1+parseInt(e(371))/2*(-parseInt(e(312))/3)+-parseInt(e(302))/4+-parseInt(e(348))/5+-parseInt(e(334))/6+-parseInt(e(346))/7+parseInt(e(341))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Yn=function(){const e=Jn,t={};t[e(370)]=function(e,t){return e===t},t[e(304)]=e(343),t[e(360)]="xGCoq";const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Jn,r={};r[s(364)]=s(337)+"+$";const a=r;if(n[s(370)](n.rgXOC,n[s(360)]))return _0x5410dd.toString()[s(375)](a[s(364)]).toString()[s(305)+"r"](_0x7a5f23).search(a.hTEdg);if(t){const n=t[s(303)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}()(void 0,function(){const e=Jn,t={};t[e(326)]="(((.+)+)+)+$";const n=t;return Yn[e(316)]().search(n[e(326)]).toString()[e(305)+"r"](Yn)[e(375)](e(337)+"+$")});Yn();const Rn=function(){let e=!0;return function(t,n){const s=Jn,r={bNdVw:function(e,t,n){return e(t,n)},FJCqt:s(310)},a=e?function(){const e=s;if(r[e(362)]==r[e(362)]){if(n){const s=n[e(303)](t,arguments);return n=null,s}}else{if(!_0x52efe5)return;r[e(369)](_0x4d17c6,_0xf80d74.clientX,_0x27c55c[e(349)])}}:function(){};return e=!1,a}}();Rn(void 0,function(){const e=Jn,t={KvkTi:function(e,t){return e(t)},wDfmL:function(e,t){return e+t},DGnOT:function(e){return e()},ZNpta:"warn"};let n;try{const s=t[e(335)](Function,t.wDfmL(e(333)+"nction() "+(e(368)+e(356)+e(342))+" )",");"));n=t[e(347)](s)}catch(a){n=window}const s=n[e(328)]=n[e(328)]||{},r=[e(314),t.ZNpta,e(345),e(322),e(308),e(363),"trace"];for(let i=0;i<r[e(336)];i++){const t=Rn.constructor[e(313)][e(324)](Rn),n=r[i],a=s[n]||t;t[e(311)]=Rn[e(324)](Rn),t[e(316)]=a.toString[e(324)](a),s[n]=t}})();function Jn(e,t){e-=300;const n=Wn();let s=n[e];if(void 0===Jn.NjLynV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Jn.moeABh=r,Jn.nUDhnK={},Jn.NjLynV=!0}const a=e+n[0],i=Jn.nUDhnK[a];if(i)s=i;else{const e=function(e){this.ZSYaTo=e,this.avRarM=[1,0,0],this.vNuMtL=function(){return"newState"},this.fHGvqs="\\w+ *\\(\\) *{\\w+ *",this.tBDxNO="['|\"].+['|\"];? *}"};e.prototype.EaDpHG=function(){const e=new RegExp(this.fHGvqs+this.tBDxNO).test(this.vNuMtL.toString())?--this.avRarM[1]:--this.avRarM[0];return this.jYYsTI(e)},e.prototype.jYYsTI=function(e){return Boolean(~e)?this.bNIbDZ(this.ZSYaTo):e},e.prototype.bNIbDZ=function(e){for(let t=0,n=this.avRarM.length;t<n;t++)this.avRarM.push(Math.round(Math.random())),n=this.avRarM.length;return e(this.avRarM[0])},new e(Jn).EaDpHG(),s=Jn.moeABh(s),Jn.nUDhnK[a]=s}return s}const Xn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Te,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Te,description:"15 minutes"}],Zn=["bot","create","join"],Vn=()=>{var e,n,s,l,u,h,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:q}=Et(),[L,A]=t.useState("lobby"),[S,H]=t.useState(!1),[I,G]=t.useState(!1),[_,U]=t.useState("bot"),[E,O]=t.useState("human"),[W,Y]=t.useState("medium"),[R,J]=t.useState("blitz_5"),[X,Z]=t.useState("hotCold"),[V,F]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[Me,ze]=t.useState([]),[De,Le]=t.useState(!1),[Ae,Te]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Zn.indexOf(_);let n;n="left"===e?Math.min(t+1,Zn.length-1):Math.max(t-1,0),n!==t&&(q.select(),U(Zn[n]))},[_,q]),{swipeOffset:ht,isSwiping:xt,handlers:ft}=((e={})=>{const n=Jn,s={WhZrG:function(e,t){return e-t},SMpJI:function(e,t){return e-t},pXADu:function(e,t){return e>t},lKRTq:function(e,t){return e>t},AqUHK:n(357),Esogx:function(e){return null==e?void 0:e()},sGIGR:function(e,t){return e(t)},zxXUt:function(e){return e()},mSxJS:function(e,t){return e===t},SKpTX:n(323),ESedB:"xdxYZ",fuBKi:function(e,t,n){return e(t,n)},lFgTx:function(e,t){return e===t},Hlryl:"qSPDN",gbUeh:function(e,t){return e!==t},hAuYQ:n(320),EdBsk:function(e){return e()},ZeqRM:function(e,t){return e(t)},FwNAr:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=s[n(365)](t.useState,d),[h,x]=t.useState(!1),p={startX:0,startY:0,currentX:0,currentY:0};p[n(332)]=!1;const f=t.useRef(p),g=s[n(301)](t.useCallback,(e,t)=>{const s=n,r={};r.startX=e,r.startY=t,r[s(315)]=e,r[s(340)]=t,r[s(332)]=!0,f.current=r,x(!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(!f[r(300)][r(332)])return;f.current.currentX=e,f.current[r(340)]=t;const a=e-f[r(300)][r(327)],i=s[r(306)](t,f[r(300)][r(351)]),o={};o.x=a,o.y=i,m(o)},[]),b=s[n(307)](t.useCallback,()=>{const e=n;if(!f[e(300)][e(332)])return;const t=s[e(306)](f.current[e(315)],f[e(300)][e(327)]),a=s.SMpJI(f[e(300)][e(340)],f[e(300)].startY),d=Math[e(350)](t),u=Math[e(350)](a);s[e(325)](d,u)&&d>r?t>0?null==o||o():null==i||i():u>d&&u>r&&(s[e(338)](a,0)?e(330)!==s.AqUHK?null==l||l():_0x1fc6bc():s[e(361)](c)),f.current[e(332)]=!1,s.sGIGR(x,!1);const h={x:0,y:0};s[e(329)](m,h)},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n,s=e[t(376)][0];g(s[t(319)],s.clientY)},[g]),w=s.FwNAr(t.useCallback,e=>{const t=n,s=e.touches[0];v(s[t(319)],s[t(349)])},[v]),j=t.useCallback(()=>{s[n(374)](b)},[b]),C=s[n(307)](t.useCallback,e=>{a&&g(e[n(319)],e.clientY)},[a,g]),N=s[n(307)](t.useCallback,e=>{const t=n;if(s[t(352)](s.SKpTX,t(367)))_0x5ad5a8=_0xb006b6;else{if(!a)return;v(e[t(319)],e[t(349)])}},[a,v]),k=t.useCallback(()=>{const e=n,t={AkpTH:function(e){return s[Jn(361)](e)}};if(s[e(352)](e(344),s.ESedB))t[e(317)](_0x49eedd);else{if(!a)return;b()}},[a,b]),M=s[n(301)](t.useCallback,()=>{const e=n;if(s[e(355)](s[e(373)],e(354))){if(!a)return;if(f.current[e(332)])if(s[e(358)](e(320),s.hAuYQ)){if(!_0x29b11e)return;s.fuBKi(_0x2dc5b9,_0xdbb475[e(319)],_0x352bed[e(349)])}else s[e(339)](b)}else null==_0x320188||_0x320188()},[a,b]),z={};z[n(331)+"rt"]=y,z[n(318)+"e"]=w,z[n(353)]=j,z.onMouseDown=C,z[n(372)+"e"]=N,z.onMouseUp=k,z[n(366)+"ve"]=M;const D={};return D[n(309)+"t"]=u,D[n(332)]=h,D[n(321)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Bt,offerDraw:qt,loadGame:At,getAvailableMoves:St,movedSquares:Ht}=(()=>{const e=Dt,n={TOheK:function(e,t){return e>=t},EnMFK:function(e,t){return e(t)},nTfMM:e(369),aWGhd:"O-O",dVukV:function(e,t){return e===t},sAmDA:e(448),uNPRM:function(e,t){return e===t},gRDHG:function(e,t){return e!==t},CjgXH:"FwnHQ",vjzKi:e(479)+e(446),RRcqq:e(335),axOQk:"chess_games",UtLUZ:"chess_moves",FJPwG:function(e,t){return e instanceof t},mFdxd:function(e,t){return e(t)},BjSoz:function(e,t){return e(t)},SmEiX:function(e,t){return e(t)},DJPmo:e(376),fYsnd:e(313)+e(470)+e(279)+e(477),rdJqk:e(263),QmvSn:e(414),AxRZE:function(e,t){return e(t)},LcJIU:e(370)+e(393)+e(220),TtNQq:e(355),fHEdB:e(330)+e(377)+e(236)+e(231),SKeoH:function(e,t){return e(t)},cyzdB:function(e,t){return e(t)},hFYWj:"Please sign in to join a game",uyvqe:e(340)+e(423),Lsgos:e(476)+e(465)+"de",knARa:function(e,t){return e||t},Wrgif:function(e,t){return e===t},raBYx:"Xdzbi",kSoxa:function(e,t){return e(t)},JcNyT:"illegal",qBtOQ:function(e,t){return e(t)},uowPi:e(442),SfLvB:function(e,t){return e!==t},VqenH:"capture",GWnSu:function(e,t){return e(t)},BIxDO:e(256),mJAsl:function(e,t){return e(t)},VfIvP:e(264),KWjIK:e(311),KRJDt:e(318),TqWrS:function(e,t){return e+t},flEzu:function(e,t){return e+t},djJmw:e(464),QwPiu:e(415),TPLnQ:function(e,t,n,s){return e(t,n,s)},lxTYX:function(e,t){return e(t)},QahZN:function(e,t){return e(t)},KFjAA:function(e,t){return e!==t},CiLKV:e(341),GAMJy:"black_wins",oDGjc:e(432),AHCgz:e(351),mWKxv:e(429),LnVVZ:function(e,t){return e===t},hMWww:e(299),RrSut:function(e,t){return e===t},HTAie:e(476)+e(463)+e(224),rBHFV:e(278),LYEkg:e(480)+"ed",xmaJO:function(e){return e()},bASBF:function(e,t,n){return e(t,n)},BjIJK:function(e,t,n){return e(t,n)}},{user:s}=n[e(447)](r),[l,d]=t.useState(new a),[u,m]=n[e(403)](t.useState,null),[h,x]=t.useState(!1),[p,f]=t.useState(null),[g,v]=n[e(261)](t.useState,new Set),{enabled:b,volume:y}=zt(),{playSound:w}=n.bASBF(bt,b,y);n[e(388)](t.useRef,"");const j=u?n[e(288)](u[e(294)+e(349)],null==s?void 0:s.id)?"w":u["blackPlaye"+e(349)]===(null==s?void 0:s.id)?"b":null:null,C="active"===(null==u?void 0:u[e(425)])&&n[e(266)](l[e(291)](),j);t.useEffect(()=>{const t=e,r={ZeMsM:function(e,t){return n.EnMFK(e,t)},pgMCR:n[t(462)],XMMAO:function(e,s){return n[t(270)](e,s)},CHazk:function(e,s){return n[t(325)](e,s)},IlUdo:n[t(444)]};if(!(null==u?void 0:u.id))return;const o=i[t(292)](t(324)+u.id).on(n.vjzKi,{event:t(276),schema:n[t(364)],table:n[t(450)],filter:t(406)+u.id},e=>{const n=t,i=e[n(329)];if(r[n(298)](i[n(425)],"completed")&&r[n(359)](u.status,n(464))&&(i.result===n(386)?w(n(386)):r.XMMAO(i[n(309)],null==s?void 0:s.id)?w(n(346)):r[n(298)](n(371),r[n(471)])?w(n(448)):r[n(306)](_0x2fd1dc,r[n(327)])),m(e=>e?{...e,status:i[n(425)],result:i[n(472)],pgn:i[n(356)],currentFen:i[n(241)+"n"],moveCount:i[n(374)],whiteTimeRemaining:i[n(438)+n(297)],blackTimeRemaining:i[n(283)+n(297)],winnerId:i[n(309)],blackPlayerId:i[n(454)+n(232)],startedAt:i[n(223)]}:null),i[n(241)+"n"]){const e=new a(i[n(241)+"n"]);d(e)}})[t(468)](),c=i[t(292)](t(345)+u.id).on("postgres_changes",{event:"INSERT",schema:"public",table:n.UtLUZ,filter:t(343)+"."+u.id},e=>{const r=t,a=e.new,i=a.move_uci;if(i&&n[r(390)](i[r(239)],4)){const e=i[r(315)](2,4);n[r(389)](v,t=>new Set([...t,e]))}if(a[r(242)]!==(null==s?void 0:s.id)){const e=a[r(405)];e[r(410)]("#")?w(r(442)):e[r(410)]("+")?n[r(389)](w,n.nTfMM):e[r(410)]("x")?n[r(389)](w,"capture"):e===n[r(323)]||n.dVukV(e,"O-O-O")?w("castle"):w(r(256))}})[t(468)]();return()=>{const e=t;i["removeChan"+e(334)](o),i[e(460)+e(334)](c)}},[null==u?void 0:u.id,null==u?void 0:u[e(425)],null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={PUOGC:function(e,t){return n[Lt(390)](e,t)}};n[s(389)](x,!0),f(null);try{const{data:e,error:o}=await i[s(234)]("chess_games").select("*").eq("id",t).maybeSingle();if(o)throw o;if(!e)throw new Error(s(277)+"ound");const c={};c.id=e.id,c[s(294)+s(349)]=e[s(418)+s(232)],c[s(302)+"rId"]=e[s(454)+s(232)],c.status=e[s(425)],c[s(472)]=e[s(472)],c[s(356)]=e.pgn||"",c[s(235)]=e[s(241)+"n"],c.moveCount=e[s(374)]||0,c.timeControl=e[s(267)+"ol"],c[s(331)+s(400)]=e["white_time"+s(297)],c[s(221)+s(400)]=e[s(283)+s(297)],c[s(360)+"te"]=e[s(453)+"tte"],c[s(225)+"te"]=e["black_pale"+s(461)],c[s(433)+s(456)]=e["challenge_"+s(423)],c[s(244)]=e[s(309)],c[s(285)]=e.created_at,c[s(289)]=e.started_at,m(c);const l=new a(e[s(241)+"n"]);n[s(389)](d,l);const u={};u[s(455)]=!0;const{data:h}=await i[s(234)](s(247)+"s")[s(257)](s(419)).eq("game_id",t).order(s(358)+"r",u);if(h){const e=new Set;h[s(435)](t=>{const n=s;t[n(419)]&&r[n(303)](t.move_uci[n(239)],4)&&e[n(246)](t[n(419)].substring(2,4))}),n.EnMFK(v,e)}}catch(o){f(n[s(397)](o,Error)?o[s(387)]:"Failed to "+s(399))}finally{n[s(337)](x,!1)}},[]),k=n[e(481)](t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o.error(c(353)+c(238)+c(437)+"e"),null;n[c(339)](x,!0),n[c(478)](f,null);try{const e=Pt[t]||null,{data:l}=await i[c(404)]("generate_challenge_c"+c(456)),{data:d,error:u}=await i[c(234)](n[c(450)])[c(333)]({white_player_id:s.id,status:n.DJPmo,time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l})[c(257)]()[c(439)]();if(u)throw u;return o[c(420)](r?n[c(391)]:c(275)+c(466)+l),await N(d.id),d.id}catch(l){if(n[c(380)]!==n[c(445)]){const e=l instanceof Error?l[c(387)]:c(476)+c(319)+"e";return f(e),o[c(250)](e),null}_0x4744b7("defeat")}finally{x(!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e;if(!s)return o.error(a(353)+"n in to jo"+a(467)),!1;x(!0),n[a(451)](f,null);try{const{data:e,error:c}=await i[a(234)](n[a(450)]).select("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(a(277)+"ound");if(e.status!==n[a(258)])throw new Error(a(344)+a(398));if(e[a(418)+a(232)]===s.id)throw new Error(n[a(228)]);const{error:l}=await i[a(234)](n[a(450)])[a(336)]({black_player_id:s.id,black_palette:r,status:"active",started_at:(new Date).toISOString(),last_move_at:(new Date)[a(286)+"g"]()}).eq("id",t);if(l)throw l;return w(n[a(301)]),o.success(n[a(248)]),await n[a(261)](N,t),!0}catch(c){const e=n[a(397)](c,Error)?c[a(387)]:a(476)+a(304);return n[a(295)](f,e),o[a(250)](e),!1}finally{x(!1)}},[s,N,w]),z=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(250)](n[a(363)]),!1;n[a(451)](x,!0),n[a(339)](f,null);try{const{data:e,error:s}=await i[a(234)](n[a(450)])[a(257)]("id").eq(n.uyvqe,t.toUpperCase()).eq("status",n.DJPmo)[a(459)+"e"]();if(s)throw s;if(!e)throw new Error(a(251)+a(227)+"hallenge c"+a(456));return await M(e.id,r)}catch(c){const e=c instanceof Error?c[a(387)]:n.Lsgos;return n[a(451)](f,e),o[a(250)](e),!1}finally{x(!1)}},[s,M]),D=t.useCallback(async(t,r,c)=>{const m=e,h={XZnOr:function(e,t){return e(t)}};if(n.knARa(!u,!s)||!C)return!1;try{if(!n[m(266)]("eeWDK",n.raBYx)){const e={};e.from=t,e.to=r,e.promotion=c;const x=l.move(e);if(!x)return n[m(430)](w,n[m(469)]),!1;l[m(441)+"e"]()?n[m(332)](w,n[m(411)]):l.isCheck()?n.SfLvB(m(354),"otsRD")?_0x5ca5ab(!1):w(n.nTfMM):x[m(475)]?w(n.VqenH):n[m(443)](x[m(412)],m(395))||"O-O-O"===x[m(412)]?n[m(389)](w,m(254)):n.GWnSu(w,n[m(262)]),d(new a(l[m(249)]())),n[m(403)](v,e=>new Set([...e,r]));const p=l[m(356)](),f=l[m(249)]();let g=null,b=null,y=n[m(434)];if(l[m(384)]()&&(y="completed",l[m(441)+"e"]()?(g=n[m(266)](l[m(291)](),"w")?"black_wins":n[m(222)],b="w"===l[m(291)]()?u[m(302)+m(349)]:u["whitePlaye"+m(349)]):n.SfLvB(n.KRJDt,m(259))?g=m(386):_0x131b94[m(474)](_0x262654(_0x264950))),await i[m(234)](n[m(368)])[m(333)]({game_id:u.id,player_id:s.id,move_number:u[m(328)]+1,move_san:x.san,move_uci:n[m(382)](n[m(281)](t,r),c||""),fen_after:f}),await i[m(234)]("chess_games")[m(336)]({pgn:p,current_fen:f,move_count:n.TqWrS(u[m(328)],1),last_move_at:(new Date)[m(286)+"g"](),status:y,result:g,winner_id:b,completed_at:"completed"===y?(new Date)[m(286)+"g"]():null}).eq("id",u.id),y===n[m(409)]&&g)if(n[m(290)]!=n[m(290)])h[m(245)](_0xaeb10a,m(256));else if(await n[m(440)](B,u["whitePlaye"+m(349)],u[m(302)+"rId"],g),g===m(386)?n.lxTYX(w,m(386)):b===(null==s?void 0:s.id)?n.QahZN(w,m(346)):n.SmEiX(w,m(448)),"white_wins"===g){if(n[m(314)]("tLIgx",m(219))){const e=_0x5f2043.apply(_0x5a35ba,arguments);return _0x4c1847=null,e}o.success(n[m(266)](j,"w")?n[m(300)]:"White wins!")}else g===n.GAMJy?o[m(420)](n[m(443)](j,"b")?"You won!":"Black wins!"):o[m(474)](pt(l));return!0}{const e=_0x8b20b9[m(350)][m(362)];_0x36a4e0[m(474)]("Rating: "+_0x52fa91.black.newRating+" ("+(e>=0?"+":"")+e+")")}}catch(x){if(n.oDGjc!==n[m(381)])return!1;{const e=_0x4cd74d instanceof _0x245481?_0x1c4644.message:m(476)+m(304);return n[m(478)](_0x395a35,e),_0x2e016e[m(250)](e),!1}}},[l,u,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(t&&r&&!n[l(443)](a,l(385)))try{const{data:e}=await i[l(234)](l(299)).select(l(253)+l(436)).in(n[l(428)],[t,r]);if(!e||n[l(314)](e.length,2))return;const d=e[l(394)](e=>e[l(429)]===t),u=e[l(394)](e=>e[l(429)]===r);if(!d||!u)return;const m=d.elo_rating||1200,h=u[l(482)]||1200,x=n.LnVVZ(a,l(386))?l(386):a,p=c(m,h,x),f={};f.elo_rating=p[l(373)][l(226)];const g={};if(g[l(482)]=p.black[l(226)],await Promise[l(416)]([i[l(234)](l(299))[l(336)](f).eq(l(429),t),i[l(234)](n.hMWww).update(g).eq(n[l(428)],r)]),n[l(280)](null==s?void 0:s.id,t)){const e=p[l(373)][l(362)];o.info("Rating: "+p[l(373)][l(226)]+" ("+(e>=0?"+":"")+e+")")}else if(n[l(270)](null==s?void 0:s.id,r)){const e=p[l(350)].change;o.info(l(326)+p[l(350)][l(226)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){}},[s]),q=n.BjIJK(t.useCallback,async()=>{const t=e;if(n[t(287)]===t(383))_0x5e32b5.add(_0x5bb776.move_uci.substring(2,4));else{if(!u||!s||!j)return;const e=n[t(280)](j,"w")?t(473):n.KWjIK,r="w"===j?u["blackPlaye"+t(349)]:u[t(294)+t(349)];await i[t(234)](t(426)+"s")[t(336)]({status:t(464),result:e,winner_id:r,completed_at:(new Date)[t(286)+"g"]()}).eq("id",u.id),await B(u[t(294)+t(349)],u["blackPlaye"+t(349)],e),o[t(474)](n[t(307)])}},[u,s,j,B]),L=n[e(481)](t.useCallback,async()=>{const t=e;o[t(474)](t(255)+t(407)+"onent auto"+t(357)+t(243)+t(240)),u&&(await i.from("chess_games").update({status:n[t(409)],result:t(386),completed_at:(new Date)[t(286)+"g"]()}).eq("id",u.id),await n.TPLnQ(B,u[t(294)+t(349)],u[t(302)+"rId"],t(386)))},[u,B]),A=n[e(296)](t.useCallback,t=>{const n=e,s={};return s[n(284)]=t,s[n(458)]=!0,l[n(379)](s).map(e=>e.to)},[l]),S={};return S[e(312)]=l,S[e(316)]=u,S[e(352)]=C,S[e(273)]=j,S[e(427)]=h,S[e(250)]=p,S[e(365)]=D,S[e(367)]=k,S[e(293)]=M,S[e(317)]=z,S[e(424)]=q,S[e(408)]=L,S.loadGame=N,S[e(268)+"leMoves"]=A,S[e(272)+"es"]=g,S})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),A("lobby")};((e={})=>{const n=cn,s={wMOfR:function(e,t){return e instanceof t},lXSPb:function(e){return e()},hQwcK:n(459)+"d",ichxR:n(499)+n(492),xYccu:function(e,t){return e&&t},GoHJl:n(544),xOvUi:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:d,enabled:u}=zt(),m=s.xOvUi(t.useCallback,e=>{const t=n;if(e[t(537)]instanceof HTMLInputElement||s[t(521)](e[t(537)],HTMLTextAreaElement)||e[t(537)][t(546)+t(497)])return;const m=e.key[t(538)+"e"]();switch(m){case"m":s[t(454)](d),o[t(550)](u?s[t(519)]:s[t(502)],{duration:1500,icon:u?"ðŸ”‡":"ðŸ”Š"});break;case"r":s[t(495)](c,r)&&(e[t(478)+t(458)](),s[t(454)](r));break;case"d":s[t(495)](c,l)&&a&&(e["preventDef"+t(458)](),a());break;case s[t(505)]:i&&(e[t(478)+t(458)](),i());break;case"?":case"/":(!e[t(471)]||"?"===m)&&(e[t(478)+t(458)](),s.lXSPb(rn))}},[d,u,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(463)+e(488)](e(461),m),()=>window[e(500)+"tListener"](e(461),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?qt:void 0,onBackToLobby:"lobby"!==L?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Te(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,L,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Te(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Gt=async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=Ie.find(e=>e.id===X),t=(null==e?void 0:e.white)||{};await Nt(R,V,t)&&A("waiting")},Kt=async e=>{if(!k)return void H(!0);if(!M)return void G(!0);const t=Ie.find(e=>e.id===X),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},_t=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Tt=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),xe(X);const n=Ie.filter(e=>e.id!==X),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=On.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Ut=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Ot=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Ut(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=In,n={pPjOV:function(e,t){return e*t},OKlpx:function(e,t){return e*t}};switch(e){case t(336):return 300+n[t(279)](Math.random(),500);case t(318):return 500+1e3*Math.random();case t(231):return 800+n[t(297)](Math[t(240)](),1500);case t(341):return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=Kn(ee,W);if(c){const e=Ut(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,W,ke,q]),Wt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(Pe,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx($t,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===L&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Zn.map(e=>d.jsx("button",{onClick:()=>{q.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(_===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(K,{onClick:Tt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:On.map(e=>d.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ge,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Ke,{to:"/openings",children:d.jsxs(K,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(_e,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Ke,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(K,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(K,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=_t().filter(e=>e.white_player_id!==k.id);e.length>0?await Kt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Gt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),_t().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Xn.map(e=>d.jsxs("button",{onClick:()=>J(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(K,{onClick:Gt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&d.jsx(Oe,{className:"h-4 w-4"}),"Create Game",d.jsx(We,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ye,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(K,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void G(!0);const e=Ie.find(e=>e.id===X),t=(null==e?void 0:e.black)||{};await Mt($.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Re(Ae,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Xn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(B,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),d.jsx(K,{size:"sm",onClick:()=>Kt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!V&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),d.jsx(K,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Je,{className:"h-4 w-4"})})]})]}),d.jsx(K,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(K,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(K,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Xe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Yt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&d.jsx(Ft,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(K,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(K,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Ee,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=On.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=On.find(e=>e.id===W))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Xe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Yt,{fen:ee.fen(),onMove:Ot,getAvailableMoves:Wt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===he))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Fe,{whitePalette:(null==(u=Ie.find(e=>e.id===he))?void 0:u.white)||Ie[0].white,blackPalette:(null==(h=Ie.find(e=>e.id===pe))?void 0:h.black)||Ie[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Fe,{whitePalette:(null==(f=Ie.find(e=>e.id===he))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Vt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(K,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(K,{variant:"outline",onClick:Tt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Ve,{}),d.jsx(qe,{isOpen:S,onClose:()=>H(!1)}),d.jsx(Be,{isOpen:I,onClose:()=>G(!1),trigger:"general"}),d.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?de:we,whitePalette:"bot-game"===L?(null==(b=Ie.find(e=>e.id===he))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===L?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=On.find(e=>e.id===W))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?de.length:we.length}})]})};export{Vn as default};
