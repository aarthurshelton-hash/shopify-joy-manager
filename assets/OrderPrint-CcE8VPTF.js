import{ap as e,r as a,e2 as s,e3 as t,j as r,a5 as i,a6 as l,bS as n,bV as c,bW as d,bX as o,ct as m,bY as x,e4 as p,B as h,D as u,x as g,bC as f,aE as j,e5 as v,e6 as b,b as N,s as y,e7 as w,ah as k,ao as P,I as C,aL as M,c7 as S,e8 as D,p as I,a4 as F,a8 as $,Z as H,e9 as z,X as T,b5 as E,E as A,d as q,cj as V,ck as O,cl as B,cm as R,u as G,ea as L,eb as U,ec as W,L as Y,af as Q,ag as X,db as K,ed as Z,O as J,ee as _,c1 as ee,c2 as ae,a as se,bM as te,dl as re,ef as ie,eg as le,eh as ne,ei as ce,ej as de,ce as oe,H as me,z as xe,P as pe,bv as he,A as ue,cf as ge,ek as fe,el as je,bT as ve,Y as be}from"./index-1k5cZzy0.js";import{generateCleanPrintImage as Ne}from"./printImageGenerator-yhMAt_WZ.js";import{B as ye}from"./briefcase-BZAygRsP.js";import{S as we,M as ke}from"./sun-D5z4W9t9.js";import"./browser-DhmD84ER.js";const Pe=e("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),Ce=({selectedSize:e,onFrameSelect:N,selectedFrame:y,framedItemCount:w})=>{const k=a.useMemo(()=>s(e),[e]),P=a.useMemo(()=>t(e),[e]),[C,M]=a.useState(!1),S=w>=b,D=b-w;return r.jsx(i,{className:"overflow-hidden",children:r.jsxs(l,{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(n,{className:"h-5 w-5 text-primary"}),r.jsx("span",{className:"font-medium",children:"Add Matching Frame"})]}),r.jsx(c,{children:r.jsxs(d,{children:[r.jsx(o,{asChild:!0,children:r.jsx("button",{className:"p-1 rounded-full hover:bg-accent/50 transition-colors",children:r.jsx(m,{className:"h-4 w-4 text-muted-foreground"})})}),r.jsxs(x,{className:"max-w-xs",children:[r.jsx("p",{className:"text-sm",children:"Premium wooden frames, ready to hang. Perfectly sized for your print."}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Frames add ",S?"FREE shipping":`$${p} shipping`," (heavier package)."]})]})]})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(h,{variant:null===y?"default":"outline",size:"sm",onClick:()=>N(null),className:"flex-1",children:"No Frame"}),r.jsxs(h,{variant:null!==y?"default":"outline",size:"sm",onClick:()=>{null===y&&k.length>0&&N(k[0]),M(!0)},className:"flex-1 gap-2",children:[r.jsx(n,{className:"h-3 w-3"}),"Add Frame +$",P.toFixed(2)]})]}),r.jsx(u,{children:(null!==y||C)&&r.jsx(g.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:r.jsxs("div",{className:"space-y-3 pt-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose your frame style:"}),r.jsx("p",{className:"text-[10px] text-muted-foreground/70",children:"Prices vary by size"})]}),r.jsx("div",{className:"grid grid-cols-5 gap-2",children:k.map(e=>{const a=(null==y?void 0:y.id)===e.id,s=e.price-P;return r.jsx(c,{children:r.jsxs(d,{children:[r.jsx(o,{asChild:!0,children:r.jsxs("button",{onClick:()=>N(e),className:`\n                                relative p-2 rounded-lg border-2 transition-all duration-200 flex flex-col items-center gap-1\n                                ${a?"border-primary bg-primary/5 shadow-md":"border-border hover:border-primary/50 hover:bg-muted/50"}\n                              `,children:[r.jsx("div",{className:"w-8 h-8 rounded border-2 shadow-inner",style:{borderColor:e.colorHex,backgroundColor:"white"===e.id?"#fafafa":"transparent"},children:r.jsx("div",{className:"w-full h-full rounded-sm bg-gradient-to-br from-muted/50 to-muted"})}),r.jsx("span",{className:"text-[10px] font-medium text-center leading-tight",children:e.color}),s>.5&&r.jsxs("span",{className:"text-[8px] text-primary",children:["+$",s.toFixed(0)]}),a&&r.jsx(g.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-primary flex items-center justify-center",children:r.jsx(f,{className:"h-2.5 w-2.5 text-primary-foreground"})})]})}),r.jsxs(x,{children:[r.jsx("p",{className:"font-medium",children:e.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:e.description}),r.jsxs("p",{className:"text-xs font-bold mt-1",children:["+$",e.price.toFixed(2)]})]})]})},e.id)})}),r.jsx("div",{className:"flex items-center gap-2 p-2 rounded-lg text-xs "+(S?"bg-green-500/10 border border-green-500/20 text-green-600 dark:text-green-400":"bg-amber-500/10 border border-amber-500/20 text-amber-600 dark:text-amber-400"),children:S?r.jsxs(r.Fragment,{children:[r.jsx(j,{className:"h-4 w-4"}),r.jsxs("span",{children:[r.jsx("span",{className:"font-bold",children:"FREE frame shipping!"})," You have ",w,"+ framed prints."]})]}):r.jsxs(r.Fragment,{children:[r.jsx(v,{className:"h-4 w-4"}),r.jsxs("span",{children:["Frames add ",r.jsxs("span",{className:"font-bold",children:["$",p]})," shipping.",D>0&&r.jsxs(r.Fragment,{children:[" Add ",r.jsxs("span",{className:"font-bold",children:[D," more"]})," framed print",D>1?"s":""," for FREE shipping!"]})]})]})}),y&&r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Frame add-on (",e,"):"]}),r.jsxs("span",{className:"font-bold text-primary",children:["+$",y.price.toFixed(2)]})]})]})})})]})})};let Me=null;async function Se(e=10){if(Me&&Date.now()-Me.timestamp<3e5)return Me.data;const a=await async function(e,a={}){const s=await fetch("https://printify-shop-manager-fs4kw.myshopify.com/api/2025-07/graphql.json",{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":"a0ffa036b52f6150e7e1bfaf4b307ff4"},body:JSON.stringify({query:e,variables:a})});if(402===s.status)return N.error("Shopify: Payment required",{description:"Shopify API access requires an active billing plan."}),null;if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();if(t.errors)throw new Error(`Shopify error: ${t.errors.map(e=>e.message).join(", ")}`);return t}("\n  query GetProducts($first: Int!) {\n    products(first: $first) {\n      edges {\n        node {\n          id\n          title\n          description\n          handle\n          priceRange {\n            minVariantPrice {\n              amount\n              currencyCode\n            }\n          }\n          images(first: 5) {\n            edges {\n              node {\n                url\n                altText\n              }\n            }\n          }\n          variants(first: 10) {\n            edges {\n              node {\n                id\n                title\n                price {\n                  amount\n                  currencyCode\n                }\n                availableForSale\n                selectedOptions {\n                  name\n                  value\n                }\n              }\n            }\n          }\n          options {\n            name\n            values\n          }\n        }\n      }\n    }\n  }\n",{first:e});if(!a)return[];const s=a.data.products.edges||[];return Me={data:s,timestamp:Date.now()},s}const De={k:{w:"â™š",b:"â™”"},q:{w:"â™›",b:"â™•"},r:{w:"â™œ",b:"â™–"},b:{w:"â™",b:"â™—"},n:{w:"â™ž",b:"â™˜"},p:{w:"â™Ÿ",b:"â™™"}},Ie={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},Fe=({board:e,gameData:s,moveHistory:t=[],totalMoves:n,whitePalette:c,blackPalette:d,darkMode:o=!1,showSpecs:m=!0,gameId:x})=>{const p=z(),h=p.legendTheme,u=s||{white:"Player 1",black:"Player 2",event:"Chess Game",date:(new Date).toLocaleDateString(),result:"1-0"},f=a.useMemo(()=>{if(x)return w(x);if(u.white&&u.black){const e=`${u.white.toLowerCase()}-${u.black.toLowerCase()}`;return w(e)}return null},[x,u]),j=a.useMemo(()=>{const e=new Map,a=["k","q","r","b","n","p"],s=["w","b"];if(0===t.length){const t={"w-k":4,"w-q":12,"w-r":8,"w-b":6,"w-n":7,"w-p":14,"b-k":5,"b-q":10,"b-r":7,"b-b":5,"b-n":6,"b-p":13};for(const r of s)for(const s of a){const a=`${r}-${s}`;e.set(a,{moves:t[a]||0,squares:new Set,captures:0,checks:0})}return e}for(const t of s)for(const s of a)e.set(`${t}-${s}`,{moves:0,squares:new Set,captures:0,checks:0});for(const r of t){const a=`${r.color}-${r.piece}`,s=e.get(a);s&&(s.moves++,s.squares.add(r.square))}return e},[t]),v=a.useMemo(()=>{let e=0,a=null;return j.forEach((s,t)=>{if(s.moves>e){e=s.moves;const[r,i]=t.split("-");a={piece:i,color:r,moves:s.moves}}}),a||0!==t.length||(a={piece:"p",color:"w",moves:14}),a},[j,t]),b=a.useMemo(()=>{if(!e||0===e.length)return{white:28,black:24,whitePercent:44,blackPercent:38};let a=0,s=0;for(const t of e)for(const e of t){const t=e.visits.filter(e=>{var a;return"w"===(null==(a=e.piece)?void 0:a.color)||"w"===e.color}).length,r=e.visits.filter(e=>{var a;return"b"===(null==(a=e.piece)?void 0:a.color)||"b"===e.color}).length;t>r?a++:r>t&&s++}return{white:a,black:s,whitePercent:Math.round(a/64*100),blackPercent:Math.round(s/64*100)}},[e]),N=a.useMemo(()=>({opening:Math.min(10,n),middlegame:n>10?Math.min(30,n)-10:0,endgame:n>40?n-40:0,total:n}),[n]),y=e=>{const a="w"===e?c:d;return r.jsx("div",{className:"flex items-center gap-0.5",children:["k","q","r","b","n","p"].map(s=>{const t=`${e}-${s}`,i=j.get(t),l=(null==v?void 0:v.piece)===s&&(null==v?void 0:v.color)===e,n=a[s]||"#888";return r.jsxs("div",{className:"relative flex flex-col items-center transition-all "+(l?"scale-110":""),children:[r.jsx("div",{className:"w-3.5 h-3.5 rounded-sm shadow-sm "+(l?"ring-1 ring-amber-400":""),style:{backgroundColor:n},title:`${Ie[s]}: ${(null==i?void 0:i.moves)||0} moves`}),l&&r.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:r.jsx(T,{className:"w-1.5 h-1.5 text-white"})})]},t)})})},E=a.useMemo(()=>{if(!f)return null;return f.poem.split("\n").slice(0,2).join(" / ")},[f]);return r.jsxs("div",{className:"space-y-4",children:[m&&r.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-wrap items-center justify-center gap-2",children:[r.jsxs(k,{variant:"secondary",className:"gap-1 text-xs",children:[r.jsx(P,{className:"w-3 h-3"}),'3.5" Ã— 2" Premium Card']}),r.jsxs(k,{variant:"secondary",className:"gap-1 text-xs",children:[r.jsx(C,{className:"w-3 h-3"}),"400gsm Matte Finish"]}),r.jsxs(k,{variant:"secondary",className:"gap-1 text-xs",children:[r.jsx(M,{className:"w-3 h-3"}),"UV Resistant Ink"]})]}),r.jsx(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"flex justify-center",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/30 via-primary/20 to-amber-600/30 rounded-2xl blur-3xl transform translate-y-4 scale-95 opacity-60"}),r.jsxs(i,{className:"relative overflow-hidden shadow-2xl transform hover:scale-[1.02] transition-all duration-500 "+(o?"bg-gradient-to-br from-stone-950 via-stone-900 to-stone-950 text-stone-100":"bg-gradient-to-br from-stone-50 via-white to-stone-100 text-stone-900"),style:{width:320,aspectRatio:"3.5/2",borderRadius:16,border:"2px solid transparent",backgroundClip:"padding-box"},children:[r.jsx("div",{className:"absolute inset-0 rounded-[14px] pointer-events-none",style:{border:"2px solid transparent",background:"linear-gradient(135deg, #d4af37 0%, #f4e4bc 25%, #d4af37 50%, #b8860b 75%, #d4af37 100%) border-box",mask:"linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0)",WebkitMask:"linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0)",maskComposite:"exclude",WebkitMaskComposite:"xor"}}),r.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E\")"}}),r.jsxs(l,{className:"p-0 h-full flex flex-col relative",children:[r.jsx("div",{className:"absolute top-2 right-2 z-10",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 blur-sm opacity-60"}),r.jsx("img",{src:S,alt:"En Pensent Seal",className:"relative w-10 h-10 rounded-full ring-2 ring-amber-400/50 shadow-lg"})]})}),r.jsx("div",{className:"px-4 py-2 flex items-center gap-3 "+(o?"bg-gradient-to-r from-stone-900/80 to-transparent":"bg-gradient-to-r from-stone-100/80 to-transparent"),children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[11px] font-bold tracking-[0.25em] uppercase",style:{fontVariant:"small-caps",background:"linear-gradient(135deg, #d4af37 0%, #f4e4bc 50%, #d4af37 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:"En Pensent"}),r.jsx("span",{className:"text-[7px] tracking-[0.15em] uppercase opacity-50",children:"Vision Data Card"})]})}),r.jsxs("div",{className:"flex-1 px-3 py-1.5 grid grid-cols-5 gap-2",children:[r.jsxs("div",{className:"col-span-3 space-y-1.5",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-serif font-bold text-sm leading-tight",style:{fontVariant:"small-caps"},children:u.white||"White"}),r.jsxs("div",{className:"flex items-center gap-1 my-0.5",children:[r.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-amber-500/50 to-transparent"}),r.jsx("span",{className:"text-[8px] opacity-50 italic",children:"vs"}),r.jsx("div",{className:"h-px flex-1 bg-gradient-to-l from-amber-500/50 to-transparent"})]}),r.jsx("h3",{className:"font-serif font-bold text-sm leading-tight",style:{fontVariant:"small-caps"},children:u.black||"Black"})]}),r.jsxs("div",{className:"flex items-center justify-between text-[7px] opacity-60",children:[r.jsx("span",{className:"truncate max-w-[120px]",children:u.event||"Chess Match"}),r.jsx("span",{children:u.date||""})]}),E?r.jsxs("div",{className:`p-2 rounded-lg ${o?"bg-stone-800/50":"bg-amber-50/50"} border border-amber-500/20`,children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(D,{className:"w-2.5 h-2.5 text-amber-500"}),r.jsx("span",{className:"text-[6px] uppercase tracking-wider text-amber-600 dark:text-amber-400",children:(null==f?void 0:f.style)||"poetry"})]}),r.jsxs("p",{className:"text-[8px] italic leading-relaxed opacity-80 line-clamp-2",children:['"',E,'..."']})]}):v&&r.jsx("div",{className:"p-2 rounded-lg "+(o?"bg-gradient-to-r from-amber-900/30 to-orange-900/30 border border-amber-500/20":"bg-gradient-to-r from-amber-100/80 to-orange-100/80 border border-amber-300"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-7 h-7 rounded flex items-center justify-center text-base shadow-lg ring-1 ring-amber-400/50",style:{backgroundColor:("w"===v.color?c:d)[v.piece]},children:De[v.piece][v.color]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(I,{className:"w-2.5 h-2.5 text-amber-500"}),r.jsx("span",{className:"text-[7px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wider",children:"Most Valuable Piece"})]}),r.jsxs("p",{className:"text-[8px] font-medium",children:["w"===v.color?"White":"Black"," ",Ie[v.piece]," â€¢ ",v.moves," moves"]})]})]})}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(C,{className:"w-2 h-2 text-primary"}),r.jsxs("span",{className:"text-[6px] uppercase tracking-wider opacity-60",children:[p.name," Palette"]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"text-[7px] text-sky-400",children:(null==h?void 0:h.whiteEmoji)||"â„ï¸"}),y("w")]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"text-[7px] text-rose-400",children:(null==h?void 0:h.blackEmoji)||"ðŸ”¥"}),y("b")]})]})]})]}),r.jsxs("div",{className:"col-span-2 space-y-1.5",children:[u.result&&r.jsx("div",{className:"text-center",children:r.jsx(k,{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white border-0 font-bold px-3",children:u.result})}),r.jsxs("div",{className:"rounded-lg p-1.5 "+(o?"bg-stone-800/60":"bg-stone-200/60"),children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(F,{className:"w-2 h-2 text-primary"}),r.jsx("span",{className:"text-[6px] uppercase tracking-wider opacity-70",children:"Territory"})]}),r.jsxs("div",{className:"space-y-0.5",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-[7px] w-3 text-sky-400",children:"â™”"}),r.jsx("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden bg-stone-300/30",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-sky-400 to-sky-500",style:{width:`${b.whitePercent}%`}})}),r.jsxs("span",{className:"text-[6px] font-mono w-5 text-right",children:[b.whitePercent,"%"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-[7px] w-3 text-rose-400",children:"â™š"}),r.jsx("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden bg-stone-300/30",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-rose-400 to-rose-500",style:{width:`${b.blackPercent}%`}})}),r.jsxs("span",{className:"text-[6px] font-mono w-5 text-right",children:[b.blackPercent,"%"]})]})]})]}),r.jsxs("div",{className:"rounded-lg p-1.5 "+(o?"bg-stone-800/60":"bg-stone-200/60"),children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx($,{className:"w-2 h-2 text-primary"}),r.jsx("span",{className:"text-[6px] uppercase tracking-wider opacity-70",children:"Phases"})]}),r.jsxs("div",{className:"flex items-center gap-0.5 h-2 rounded-full overflow-hidden",children:[r.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-400 to-emerald-500",style:{flex:N.opening||1}}),r.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-amber-500",style:{flex:N.middlegame||1}}),r.jsx("div",{className:"h-full bg-gradient-to-r from-violet-400 to-violet-500",style:{flex:N.endgame||1}})]}),r.jsxs("div",{className:"flex justify-between mt-0.5",children:[r.jsx("span",{className:"text-[5px] text-emerald-400",children:"Open"}),r.jsx("span",{className:"text-[5px] text-amber-400",children:"Mid"}),r.jsx("span",{className:"text-[5px] text-violet-400",children:"End"})]})]}),r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full "+(o?"bg-stone-800":"bg-stone-200"),children:[r.jsx(H,{className:"w-2 h-2 text-primary"}),r.jsx("span",{className:"text-[8px] font-mono font-bold",children:n}),r.jsx("span",{className:"text-[6px] opacity-60",children:"moves"})]})})]})]}),r.jsxs("div",{className:"px-3 py-1.5 flex items-center justify-between "+(o?"bg-stone-900/80":"bg-stone-100/80"),children:[r.jsx("span",{className:"text-[6px] tracking-[0.2em] uppercase opacity-40",children:"enpensent.com"}),r.jsx("span",{className:"text-[7px] tracking-[0.15em]",style:{fontVariant:"small-caps",background:"linear-gradient(90deg, #d4af37, #f4e4bc, #d4af37)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"â™” Certified Vision â™š"}),r.jsxs("span",{className:"text-[6px] tracking-wider opacity-40",children:["#",String(n).padStart(3,"0")]})]})]})]})]})}),m&&r.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-2 gap-2 text-xs text-center",children:[r.jsxs("div",{className:"p-2 rounded-lg bg-accent/30",children:[r.jsx("p",{className:"font-medium",children:"Front Side"}),r.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Full game analytics"})]}),r.jsxs("div",{className:"p-2 rounded-lg bg-accent/30",children:[r.jsx("p",{className:"font-medium",children:"Back Side"}),r.jsx("p",{className:"text-[10px] text-muted-foreground",children:"QR to digital vision"})]})]})]})},$e=9.99,He=({isPremium:e,onAddInfoCard:s,includeInfoCard:t,onUpgradePremium:n,board:p,gameData:j,moveHistory:v,totalMoves:b=0,whitePalette:N,blackPalette:y,darkMode:w=!1})=>{const[k,P]=a.useState(!1),[M,S]=a.useState(!1),D=N&&y;return r.jsxs(r.Fragment,{children:[r.jsx(i,{className:"overflow-hidden border-primary/20",children:r.jsxs(l,{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:r.jsx(E,{className:"h-4 w-4 text-primary"})}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-sm",children:"Vision Data Card"}),r.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Printed companion piece"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[D&&r.jsx(c,{children:r.jsxs(d,{children:[r.jsx(o,{asChild:!0,children:r.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-primary/10",onClick:()=>S(!0),children:r.jsx(A,{className:"h-4 w-4 text-primary"})})}),r.jsx(x,{children:r.jsx("p",{children:"Preview your Vision Card"})})]})}),r.jsx(c,{children:r.jsxs(d,{children:[r.jsx(o,{asChild:!0,children:r.jsx("button",{onClick:()=>P(!k),className:"p-1 rounded-full hover:bg-accent/50 transition-colors",children:r.jsx(m,{className:"h-4 w-4 text-muted-foreground"})})}),r.jsxs(x,{className:"max-w-xs",children:[r.jsx("p",{className:"text-sm font-medium",children:"Vision Data Card"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'A beautiful 3.5Ã—2" printed card with all the game data, color legend, piece statistics, and territory analysis from your visualization.'}),r.jsx("p",{className:"text-xs text-primary mt-1 font-medium",children:"Perfect for including with your print order!"})]})]})})]})]}),r.jsx(u,{children:k&&r.jsx(g.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 space-y-2 text-xs",children:[r.jsx("p",{className:"font-medium",children:"Includes:"}),r.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(C,{className:"h-3 w-3 text-primary"}),"Full color legend with piece activity stats"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(C,{className:"h-3 w-3 text-primary"}),"Territory control analysis"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(C,{className:"h-3 w-3 text-primary"}),"Game phase timeline breakdown"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(C,{className:"h-3 w-3 text-primary"}),"MVP piece highlight"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(C,{className:"h-3 w-3 text-primary"}),'Premium matte 3.5Ã—2" cardstock']})]}),D&&r.jsxs(h,{variant:"outline",size:"sm",onClick:()=>S(!0),className:"w-full mt-2 gap-2",children:[r.jsx(A,{className:"h-3 w-3"}),"Preview Your Card"]})]})})}),e?r.jsxs("div",{className:"flex gap-2",children:[r.jsx(h,{variant:t?"outline":"default",size:"sm",onClick:()=>s(!1),className:"flex-1",children:"No Card"}),r.jsxs(h,{variant:t?"default":"outline",size:"sm",onClick:()=>s(!0),className:"flex-1 gap-2",children:[t&&r.jsx(f,{className:"h-3 w-3"}),"Add Card +$",$e]})]}):r.jsxs(h,{variant:"outline",size:"sm",onClick:n,className:"w-full gap-2 border-primary/30 text-primary hover:bg-primary/10",children:[r.jsx(q,{className:"h-3 w-3"}),r.jsx("span",{children:"Visionary Exclusive"}),r.jsx(T,{className:"h-3 w-3"})]}),D&&r.jsxs(h,{variant:"outline",size:"sm",onClick:()=>S(!0),className:"w-full gap-2 border-primary/20 hover:border-primary/50 hover:bg-primary/5",children:[r.jsx(A,{className:"h-4 w-4 text-primary"}),"Preview Your Vision Card"]}),t&&e&&r.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-between pt-2 border-t",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Info Card add-on:"}),r.jsxs("span",{className:"font-bold text-primary",children:["+$",$e]})]}),!e&&r.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"Upgrade to Visionary Premium to unlock this collector's add-on"})]})}),r.jsx(V,{open:M,onOpenChange:S,children:r.jsxs(O,{className:"max-w-md",children:[r.jsx(B,{children:r.jsxs(R,{className:"flex items-center gap-2",children:[r.jsx(E,{className:"h-5 w-5 text-primary"}),"Vision Data Card Preview"]})}),D&&N&&y&&r.jsx(Fe,{board:p,gameData:j,moveHistory:v,totalMoves:b||50,whitePalette:N,blackPalette:y,darkMode:w,showSpecs:!0}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(h,{variant:"outline",onClick:()=>S(!1),className:"flex-1",children:"Close"}),e&&!t&&r.jsxs(h,{onClick:()=>{s(!0),S(!1)},className:"flex-1 gap-2",children:[r.jsx(f,{className:"h-4 w-4"}),"Add to Order +$",$e]})]})]})})]})},ze=$e;const Te=({customPrintData:e,simulation:s,shareId:t,capturedState:c,enPensentData:d,onAddedToCart:o})=>{var m,x,p,u,g,j,v,b,w,k,P;const[C,M]=a.useState([]),[S,D]=a.useState(!0),[I,F]=a.useState(null),[$,H]=a.useState(""),[T,E]=a.useState(null),[A,q]=a.useState("living"),[V,O]=a.useState(!1),[B,R]=a.useState(!1),[se,te]=a.useState(null),[re,ie]=a.useState(!1),[le,ne]=a.useState(!1),[ce,de]=a.useState(!1),{user:oe,isPremium:me}=G(),xe=L(e=>e.addItem),pe=L(e=>e.items),{formatPrice:he,selectedCurrency:ue}=U(),ge=a.useMemo(()=>pe.filter(e=>{var a;return null==(a=e.customPrintData)?void 0:a.frameStyle}).length+(se?1:0),[pe,se]),fe=a.useMemo(()=>pe.filter(a=>{var s,t;return(null==(s=a.customPrintData)?void 0:s.gameHash)===e.gameHash&&(null==(t=a.customPrintData)?void 0:t.paletteId)===e.paletteId}),[pe,e.gameHash,e.paletteId]).length>0;a.useEffect(()=>{je()},[]);const je=async()=>{var e,a;try{const s=await Se(10);M(s);const t=s.find(e=>e.node.handle.includes("chess")||e.node.title.toLowerCase().includes("chess"));t?(F(t),H((null==(e=t.node.variants.edges[0])?void 0:e.node.id)||"")):s.length>0&&(F(s[0]),H((null==(a=s[0].node.variants.edges[0])?void 0:a.node.id)||""))}catch(s){}finally{D(!1)}},ve=null==(m=null==I?void 0:I.node.variants.edges.find(e=>e.node.id===$))?void 0:m.node,be=null==(x=null==I?void 0:I.node.variants.edges.find(e=>e.node.id===(T||$)))?void 0:x.node,we=a.useMemo(()=>{return s?c&&c.currentMove!==1/0&&c.currentMove>0?(e=s.board,(a=c.currentMove)===1/0||a<=0?e:e.map(e=>e.map(e=>({...e,visits:e.visits.filter(e=>e.moveNumber<=a)})))):s.board:null;var e,a},[s,c]),{infoCardPalettes:ke,infoCardMoveHistory:Me}=a.useMemo(()=>{if(d)return{infoCardPalettes:{white:d.whitePalette,black:d.blackPalette},infoCardMoveHistory:d.moveHistory};const e=z();return{infoCardPalettes:{white:e.white,black:e.black},infoCardMoveHistory:void 0}},[d]),De=(null==c?void 0:c.darkMode)||!1,Ie=a.useMemo(()=>{if(c&&c.lockedPieces&&c.lockedPieces.length>0)return{lockedPieces:c.lockedPieces.map(e=>({pieceType:e.pieceType,pieceColor:"white"===e.pieceColor?"w":"black"===e.pieceColor?"b":e.pieceColor})),compareMode:c.compareMode||!1}},[c]),Fe=a.useMemo(()=>d?r.jsx(W,{gameData:{white:d.gameInfo.white,black:d.gameInfo.black,result:d.gameInfo.result,event:"Chess Game"},enPensentData:{moveHistory:d.moveHistory,whitePalette:d.whitePalette,blackPalette:d.blackPalette},size:80,darkMode:De,compact:!0}):we&&s?r.jsx(W,{board:we,gameData:s.gameData,size:80,darkMode:De,compact:!0,highlightState:Ie}):null,[we,s,d,De,Ie]),$e=e=>{const a=parseFloat(e);return he(a)},Te=[{id:"living",label:"Living Room",icon:Pe},{id:"office",label:"Office",icon:ye},{id:"gallery",label:"Gallery",icon:J}];return S?r.jsx(i,{className:"border-dashed",children:r.jsxs(l,{className:"py-8 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r.jsx(Y,{className:"h-5 w-5 animate-spin text-primary"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading print options..."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-24 bg-muted/30 rounded-lg animate-pulse"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx("div",{className:"h-16 bg-muted/20 rounded animate-pulse"}),r.jsx("div",{className:"h-16 bg-muted/20 rounded animate-pulse"}),r.jsx("div",{className:"h-16 bg-muted/20 rounded animate-pulse"})]})]})]})}):0===C.length?r.jsx(i,{className:"border-dashed",children:r.jsx(l,{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No products available yet."})})}):r.jsxs(i,{className:fe?"ring-2 ring-primary/30 ring-offset-2 ring-offset-background":"",children:[r.jsx(Q,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(X,{className:"text-lg flex items-center gap-2",children:[r.jsx(K,{className:"h-5 w-5"}),"Order Your Print"]}),fe&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-primary/10 text-primary border border-primary/20",children:[r.jsx(f,{className:"h-3 w-3"}),"In Cart"]})]}),r.jsx(Z,{compact:!0})]})}),r.jsxs(l,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Preview Setting"}),r.jsx("div",{className:"flex gap-2",children:Te.map(e=>{const a=e.icon,s=A===e.id;return r.jsxs("button",{onClick:()=>q(e.id),className:`\n                    flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all\n                    ${s?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"}\n                  `,children:[r.jsx(a,{className:"h-3 w-3"}),e.label]},e.id)})})]}),be&&r.jsx("div",{className:"flex justify-center py-6 bg-muted/20 rounded-xl",children:r.jsx(_,{sizeLabel:be.title,roomSetting:A,visualizationElement:Fe,selectedFrame:se})}),I&&I.node.variants.edges.length>1&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(n,{className:"h-4 w-4 text-muted-foreground"}),"Select Size"]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:I.node.variants.edges.map(({node:e})=>{const a=e.id===$;return r.jsxs("button",{onClick:()=>H(e.id),onMouseEnter:()=>E(e.id),onMouseLeave:()=>E(null),className:`\n                      relative p-3 rounded-lg border-2 transition-all duration-200 text-left\n                      ${a?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-muted/50"}\n                    `,children:[r.jsx("div",{className:"font-medium text-sm",children:e.title}),r.jsx("div",{className:"text-xs "+(a?"text-primary":"text-muted-foreground"),children:$e(e.price.amount)}),a&&r.jsx("div",{className:"absolute top-1 right-1",children:r.jsx(f,{className:"h-3 w-3 text-primary"})})]},e.id)})})]}),ve&&r.jsx(Ce,{selectedSize:ve.title,onFrameSelect:te,selectedFrame:se,framedItemCount:ge}),r.jsx(He,{isPremium:me,onAddInfoCard:ie,includeInfoCard:re,onUpgradePremium:()=>{oe?ne(!0):de(!0)},board:we||void 0,gameData:(null==s?void 0:s.gameData)||(null==d?void 0:d.gameInfo)?{white:(null==(p=null==s?void 0:s.gameData)?void 0:p.white)||(null==(u=null==d?void 0:d.gameInfo)?void 0:u.white),black:(null==(g=null==s?void 0:s.gameData)?void 0:g.black)||(null==(j=null==d?void 0:d.gameInfo)?void 0:j.black),event:null==(v=null==s?void 0:s.gameData)?void 0:v.event,date:null==(b=null==s?void 0:s.gameData)?void 0:b.date,result:(null==(w=null==s?void 0:s.gameData)?void 0:w.result)||(null==(k=null==d?void 0:d.gameInfo)?void 0:k.result)}:void 0,moveHistory:Me,totalMoves:(null==(P=null==d?void 0:d.moveHistory)?void 0:P.length)||(null==s?void 0:s.totalMoves)||0,whitePalette:ke.white,blackPalette:ke.black,darkMode:null==c?void 0:c.darkMode}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[r.jsx("div",{children:ve&&r.jsxs("div",{children:[r.jsx("span",{className:"text-2xl font-bold",children:he((()=>{if(!ve)return 0;return parseFloat(ve.price.amount)+((null==se?void 0:se.price)||0)+(re?ze:0)})())}),(se||re)&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:["Base: $",parseFloat(ve.price.amount).toFixed(2),se&&` + Frame: $${se.price}`,re&&" + Card: $9.99"]}),"USD"!==ue.code&&!se&&!re&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:["â‰ˆ $",parseFloat(ve.price.amount).toFixed(2)," USD"]})]})}),r.jsx(h,{onClick:async()=>{if(I&&ve){R(!0);try{let i,l;if(e.previewImageBase64)i=e.previewImageBase64;else if(s)try{i=await Ne(s,{darkMode:(null==c?void 0:c.darkMode)||!1,includeQR:!!t,shareId:t||void 0,capturedState:c})}catch(a){N.error("Failed to generate print image. Adding to cart without image.")}if(i)try{const s=await async function(e,s){try{const a=e.includes("base64,")?e.split("base64,")[1]:e,t=atob(a),r=new Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);const i=new Uint8Array(r),l=new Blob([i],{type:"image/png"}),n=Date.now(),c=`print-orders/${s.replace(/[^a-zA-Z0-9]/g,"-").toLowerCase().substring(0,50)}-${n}.png`,{data:d,error:o}=await y.storage.from("print-images").upload(c,l,{contentType:"image/png",upsert:!1});if(o)return null;const{data:m}=y.storage.from("print-images").getPublicUrl(c);return m.publicUrl}catch(a){return null}}(i,e.gameTitle);s&&(l=s)}catch(r){}const n=parseFloat(ve.price.amount),d=(null==se?void 0:se.price)||0,m=n+d+(re?ze:0),x={product:I,variantId:ve.id,variantTitle:se?`${ve.title} + ${se.name} Frame${re?" + Info Card":""}`:re?`${ve.title} + Info Card`:ve.title,price:{amount:m.toFixed(2),currencyCode:ve.price.currencyCode},quantity:1,selectedOptions:ve.selectedOptions,customPrintData:{pgn:e.pgn,gameTitle:e.gameTitle,previewImageBase64:i,printImageUrl:l,frameStyle:null==se?void 0:se.id,includeInfoCard:re,gameHash:e.gameHash,gameId:e.gameId,paletteId:e.paletteId,gameData:e.gameData,capturedState:c?{currentMove:c.currentMove,lockedPieces:c.lockedPieces,compareMode:c.compareMode,darkMode:c.darkMode,showPieces:c.showPieces,pieceOpacity:c.pieceOpacity}:void 0}};xe(x),O(!0),null==o||o(),te(null),ie(!1),setTimeout(()=>O(!1),3e3)}finally{R(!1)}}},disabled:!ve||V||B,className:"gap-2",size:"lg",children:B?r.jsxs(r.Fragment,{children:[r.jsx(Y,{className:"h-4 w-4 animate-spin"}),"Preparing..."]}):V?r.jsxs(r.Fragment,{children:[r.jsx(f,{className:"h-4 w-4"}),"Added!"]}):fe?r.jsxs(r.Fragment,{children:[r.jsx(K,{className:"h-4 w-4"}),"Add Another"]}):r.jsxs(r.Fragment,{children:[r.jsx(K,{className:"h-4 w-4"}),"Add to Cart"]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Museum-quality archival paper â€¢ Vibrant fade-resistant inks â€¢ Ships worldwide"}),r.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-primary",children:[r.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-primary animate-pulse"}),r.jsx("span",{children:"Buy more, save more â€” up to 35% off bulk orders!"})]})]})]}),r.jsx(ee,{isOpen:le,onClose:()=>ne(!1),onAuthRequired:()=>{ne(!1),de(!0)},trigger:"infocard"}),r.jsx(ae,{isOpen:ce,onClose:()=>de(!1)})]})};const Ee=()=>{var e,s,t;const n=se(),c=te(),{orderData:d,setOrderData:o,clearOrderData:m}=re(),[x,p]=a.useState(!1),j=c.state,v=a.useMemo(()=>{if(d)return d;if((null==j?void 0:j.fromMarketplace)&&j.title){return{visualizationId:j.visualizationId,imagePath:j.imageUrl,title:j.title||"Chess Visualization",gameData:{white:"White",black:"Black"},returnPath:`/marketplace/${j.visualizationId}`}}return null},[d,j]);if(a.useEffect(()=>{v||n("/",{replace:!0})},[v,n]),!v)return null;const b=v.moveHistory&&v.whitePalette&&v.blackPalette,N=!!v.simulation,y=!!v.imagePath,w=v.simulation,P=a.useMemo(()=>{if(!v.simulation)return null;const e=v.capturedState;return e&&e.currentMove!==1/0&&e.currentMove>0?(a=v.simulation.board,(s=e.currentMove)===1/0||s<=0?a:a.map(e=>e.map(e=>({...e,visits:e.visits.filter(e=>e.moveNumber<=s)})))):v.simulation.board;var a,s},[v.simulation,v.capturedState]),M=a.useMemo(()=>ie(v.paletteId),[v.paletteId]),S=a.useMemo(()=>le(v.paletteId),[v.paletteId]),D=a.useMemo(()=>ne(v.paletteId),[v.paletteId]),I=a.useMemo(()=>{if(v.gameId){const e=ce(v.gameId);if(e)return e}if(v.pgn){const e=de(v.pgn);if(e.isMatch&&e.matchedGame)return ce(e.matchedGame.id)}return null},[v.gameId,v.pgn]),F=a.useMemo(()=>v.pgn?de(v.pgn):null,[v.pgn]),$=a.useMemo(()=>v.pgn?oe(v.pgn):null,[v.pgn]),H=L(e=>e.items);a.useMemo(()=>H.some(e=>{var a,s;return(null==(a=e.customPrintData)?void 0:a.gameHash)===v.gameHash&&(null==(s=e.customPrintData)?void 0:s.paletteId)===v.paletteId}),[H,v.gameHash,v.paletteId]);const z=a.useMemo(()=>H.filter(e=>{var a;return(null==(a=e.customPrintData)?void 0:a.gameHash)===v.gameHash}).reduce((e,a)=>e+a.quantity,0),[H,v.gameHash]);return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(me,{}),r.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[r.jsx(u,{children:(I||M)&&r.jsxs(g.div,{className:"relative h-32 md:h-40 -mx-4 mb-6 overflow-hidden rounded-xl mx-0",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[r.jsx("img",{src:I||M,alt:"Vision Banner",className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-black/50 to-transparent"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),r.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex items-end justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[(null==F?void 0:F.isMatch)&&F.matchedGame&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xe,{className:"h-4 w-4 text-white/90"}),r.jsx("span",{className:"text-sm font-medium text-white/90",children:"Famous Game Card"}),r.jsx(k,{className:"bg-amber-500/90 text-stone-900 text-[10px] px-1.5",children:"exact"===F.matchType?"Exact Match":"Partial Match"})]}),M&&S&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pe,{className:"h-4 w-4 text-white/90"}),r.jsxs("span",{className:"text-sm font-medium text-white/90",children:[S," Palette"]}),D&&r.jsx(k,{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-stone-900 text-[10px] px-1.5 border-0",children:"Premium"})]}),$&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(he,{className:"h-4 w-4 text-white/90"}),r.jsx("span",{className:"text-sm font-medium text-white/90",children:$.fullName}),r.jsx(k,{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white text-[10px] px-1.5 border-0",children:"Book Opening"})]})]}),z>0&&r.jsxs(g.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-primary text-primary-foreground text-xs font-medium shadow-lg",children:[r.jsx(K,{className:"h-3.5 w-3.5"}),r.jsxs("span",{children:[z," in cart"]}),r.jsx(f,{className:"h-3 w-3"})]})]})]})}),r.jsxs(g.div,{className:"mb-8",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[r.jsxs(h,{variant:"ghost",onClick:()=>{v.returnPath?n(v.returnPath):n(-1)},className:"mb-4 -ml-2",children:[r.jsx(ue,{className:"h-4 w-4 mr-2"}),"Return"]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center shadow-lg shadow-amber-500/20",children:r.jsx(ge,{className:"h-6 w-6 text-stone-900"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold",children:"Order Premium Print"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Turn your chess art into museum-quality wall art"})]})]}),z>0&&!(I||M)&&r.jsxs(g.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/30 text-primary text-xs font-medium",children:[r.jsx(K,{className:"h-3.5 w-3.5"}),r.jsx("span",{children:z})]})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[r.jsxs(g.div,{className:"space-y-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[r.jsx(i,{className:"overflow-hidden",children:r.jsxs(l,{className:"p-4 sm:p-6",children:[b&&r.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[r.jsxs(h,{variant:x?"outline":"default",size:"sm",onClick:()=>p(!1),className:"gap-2 text-xs",children:[r.jsx(we,{className:"h-3 w-3"}),"Light"]}),r.jsxs(h,{variant:x?"default":"outline",size:"sm",onClick:()=>p(!0),className:"gap-2 text-xs",children:[r.jsx(ke,{className:"h-3 w-3"}),"Dark"]})]}),r.jsx("div",{className:"flex justify-center",children:N&&P?r.jsx(W,{board:P,gameData:{...v.simulation.gameData,moves:v.simulation.gameData.moves},size:400,darkMode:(null==(e=v.capturedState)?void 0:e.darkMode)??x,title:v.title,compact:!1,pgn:v.pgn,highlightState:(null==(s=v.capturedState)?void 0:s.lockedPieces)&&v.capturedState.lockedPieces.length>0?{lockedPieces:v.capturedState.lockedPieces.map(e=>({pieceType:e.pieceType,pieceColor:"white"===e.pieceColor?"w":"black"===e.pieceColor?"b":e.pieceColor})),compareMode:v.capturedState.compareMode||!1}:void 0,piecesState:(null==(t=v.capturedState)?void 0:t.showPieces)?{showPieces:!0,pieceOpacity:v.capturedState.pieceOpacity??.7,currentMoveNumber:v.capturedState.currentMove}:void 0}):b?r.jsx(W,{enPensentData:{moveHistory:v.moveHistory,whitePalette:v.whitePalette,blackPalette:v.blackPalette},gameData:{white:v.gameData.white,black:v.gameData.black,event:v.gameData.event||"Chess Game",date:v.gameData.date||"",result:v.gameData.result||""},size:400,darkMode:x,title:v.title,compact:!1}):y?r.jsxs("div",{className:"p-6 rounded-lg border shadow-xl "+(x?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),children:[r.jsx("img",{src:v.imagePath,alt:v.title,className:"w-72 h-72 sm:w-80 sm:h-80 object-contain"}),r.jsx(fe,{gameData:{white:v.gameData.white,black:v.gameData.black,event:v.gameData.event||"Chess Game",date:v.gameData.date||"",result:v.gameData.result||"",moves:[],pgn:""},darkMode:x}),r.jsx("p",{className:"text-center text-[10px] tracking-[0.3em] uppercase mt-4 "+(x?"text-stone-600":"text-stone-400"),children:"â™” En Pensent â™š"})]}):r.jsx("div",{className:"w-64 h-64 sm:w-80 sm:h-80 flex items-center justify-center bg-muted/20 rounded",children:r.jsx(J,{className:"h-12 w-12 text-muted-foreground"})})}),r.jsxs("div",{className:"mt-6 text-center space-y-2",children:[r.jsx("h2",{className:"text-lg font-display font-semibold",children:v.title}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[r.jsx(C,{className:"h-3 w-3"}),r.jsx("span",{children:"Unique chess art visualization"})]})]})]})}),r.jsx(i,{className:"border-primary/20 bg-primary/5",children:r.jsxs(l,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(T,{className:"h-4 w-4 text-primary"}),r.jsx("span",{className:"text-sm font-medium",children:"Premium Print Features"})]}),r.jsxs("ul",{className:"space-y-2 text-xs text-muted-foreground",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"Museum-quality archival paper (100+ year color guarantee)"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"Vibrant, fade-resistant giclÃ©e inks"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"Worldwide shipping with tracking"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),"Optional artistic QR code linking to game replay"]})]})]})}),$&&r.jsx(je,{opening:$,showValue:!0})]}),r.jsx(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:r.jsx(Te,{customPrintData:{pgn:v.pgn||"",gameTitle:v.title,previewImageBase64:v.imagePath,gameHash:v.gameHash,gameId:v.gameId,paletteId:v.paletteId,gameData:v.gameData},simulation:w,shareId:v.shareId,capturedState:v.capturedState?{...v.capturedState,darkMode:x}:{currentMove:1/0,selectedPhase:"all",lockedPieces:[],compareMode:!1,displayMode:"standard",darkMode:x,showTerritory:!1,showHeatmaps:!1,showPieces:!1,pieceOpacity:.7,capturedAt:new Date},enPensentData:b?{moveHistory:v.moveHistory,whitePalette:v.whitePalette,blackPalette:v.blackPalette,gameInfo:v.gameData}:void 0,onAddedToCart:()=>{}})})]}),r.jsx(g.section,{className:"mt-16 pt-12 border-t border-border/50",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:r.jsx(ve,{showTitle:!0})})]}),r.jsx(be,{})]})};export{Ee as default};
