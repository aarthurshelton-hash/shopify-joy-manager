const n="/**\n * Live Data Infrastructure - Universal Adapter Data Feed System\n * \n * Provides real-time data connections for all 55 domain adapters\n * from external APIs, WebSockets, and streaming sources.\n * \n * For Alec Arthur Shelton - The Artist\n */\n\nexport interface DataFeedConfig {\n  adapter: string;\n  source: string;\n  endpoint: string;\n  apiKey?: string;\n  rateLimit: number; // requests per minute\n  updateInterval: number; // milliseconds\n  retryAttempts: number;\n  timeout: number;\n}\n\nexport interface LiveDataEvent {\n  adapter: string;\n  timestamp: number;\n  data: unknown;\n  source: string;\n  latency: number; // ms\n  confidence: number; // 0-1\n}\n\nexport interface FeedStatus {\n  adapter: string;\n  connected: boolean;\n  lastUpdate: number;\n  eventsReceived: number;\n  errors: number;\n  averageLatency: number;\n}\n\nexport class LiveDataCoordinator {\n  private feeds: Map<string, DataFeedConfig> = new Map();\n  private statuses: Map<string, FeedStatus> = new Map();\n  private eventHandlers: Map<string, ((event: LiveDataEvent) => void)[]> = new Map();\n  private intervals: Map<string, NodeJS.Timeout> = new Map();\n\n  // API Configuration Registry\n  static API_CONFIGS: Record<string, Partial<DataFeedConfig>> = {\n    // Weather & Climate\n    openWeatherMap: {\n      source: 'OpenWeatherMap',\n      endpoint: 'https://api.openweathermap.org/data/2.5',\n      rateLimit: 60,\n      updateInterval: 600000, // 10 minutes\n      retryAttempts: 3,\n      timeout: 10000\n    },\n    noaa: {\n      source: 'NOAA',\n      endpoint: 'https://api.weather.gov',\n      rateLimit: 120,\n      updateInterval: 300000, // 5 minutes\n      retryAttempts: 3,\n      timeout: 15000\n    },\n    \n    // Space & Astronomy\n    nasaAPOD: {\n      source: 'NASA APOD',\n      endpoint: 'https://api.nasa.gov/planetary/apod',\n      rateLimit: 60,\n      updateInterval: 86400000, // 24 hours\n      retryAttempts: 3,\n      timeout: 10000\n    },\n    nasaNeoWS: {\n      source: 'NASA NEO',\n      endpoint: 'https://api.nasa.gov/neo/rest/v1',\n      rateLimit: 60,\n      updateInterval: 3600000, // 1 hour\n      retryAttempts: 3,\n      timeout: 10000\n    },\n    \n    // News & Media\n    newsAPI: {\n      source: 'NewsAPI',\n      endpoint: 'https://newsapi.org/v2',\n      rateLimit: 100,\n      updateInterval: 900000, // 15 minutes\n      retryAttempts: 3,\n      timeout: 10000\n    },\n    gnews: {\n      source: 'GNews',\n      endpoint: 'https://gnews.io/api/v4',\n      rateLimit: 100,\n      updateInterval: 900000,\n      retryAttempts: 3,\n      timeout: 10000\n    },\n    \n    // Sports\n    espn: {\n      source: 'ESPN',\n      endpoint: 'https://site.api.espn.com/apis/site/v2/sports',\n      rateLimit: 120,\n      updateInterval: 300000, // 5 minutes\n      retryAttempts: 3,\n      timeout: 10000\n    },\n    apiFootball: {\n      source: 'API-Football',\n      endpoint: 'https://v3.football.api-sports.io',\n      rateLimit: 100,\n      updateInterval: 600000,\n      retryAttempts: 3,\n      timeout: 10000\n    }\n  };\n\n  constructor() {\n    console.log('[LiveDataCoordinator] Initialized');\n  }\n\n  registerFeed(config: DataFeedConfig): void {\n    this.feeds.set(config.adapter, config);\n    this.statuses.set(config.adapter, {\n      adapter: config.adapter,\n      connected: false,\n      lastUpdate: 0,\n      eventsReceived: 0,\n      errors: 0,\n      averageLatency: 0\n    });\n    console.log(`[LiveDataCoordinator] Registered feed for ${config.adapter}`);\n  }\n\n  async startFeed(adapterName: string): Promise<void> {\n    const config = this.feeds.get(adapterName);\n    if (!config) {\n      throw new Error(`No feed configuration found for ${adapterName}`);\n    }\n\n    // Start polling interval\n    const interval = setInterval(async () => {\n      await this.fetchData(adapterName);\n    }, config.updateInterval);\n\n    this.intervals.set(adapterName, interval);\n    \n    // Immediate first fetch\n    await this.fetchData(adapterName);\n    \n    console.log(`[LiveDataCoordinator] Started feed for ${adapterName}`);\n  }\n\n  private async fetchData(adapterName: string): Promise<void> {\n    const config = this.feeds.get(adapterName);\n    const status = this.statuses.get(adapterName);\n    if (!config || !status) return;\n\n    const startTime = Date.now();\n    \n    try {\n      const response = await fetch(config.endpoint, {\n        headers: config.apiKey ? { 'Authorization': `Bearer ${config.apiKey}` } : {},\n        signal: AbortSignal.timeout(config.timeout)\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      const latency = Date.now() - startTime;\n\n      const event: LiveDataEvent = {\n        adapter: adapterName,\n        timestamp: Date.now(),\n        data,\n        source: config.source,\n        latency,\n        confidence: 0.9 // Base confidence for successful API calls\n      };\n\n      // Update status\n      status.connected = true;\n      status.lastUpdate = Date.now();\n      status.eventsReceived++;\n      status.averageLatency = (status.averageLatency * (status.eventsReceived - 1) + latency) / status.eventsReceived;\n\n      // Notify handlers\n      this.notifyHandlers(event);\n\n    } catch (error) {\n      status.errors++;\n      console.error(`[LiveDataCoordinator] Fetch error for ${adapterName}:`, error);\n    }\n  }\n\n  onData(adapter: string, handler: (event: LiveDataEvent) => void): void {\n    if (!this.eventHandlers.has(adapter)) {\n      this.eventHandlers.set(adapter, []);\n    }\n    this.eventHandlers.get(adapter)!.push(handler);\n  }\n\n  private notifyHandlers(event: LiveDataEvent): void {\n    const handlers = this.eventHandlers.get(event.adapter) || [];\n    handlers.forEach(handler => {\n      try {\n        handler(event);\n      } catch (error) {\n        console.error(`[LiveDataCoordinator] Handler error:`, error);\n      }\n    });\n  }\n\n  getStatus(adapter: string): FeedStatus | undefined {\n    return this.statuses.get(adapter);\n  }\n\n  getAllStatuses(): FeedStatus[] {\n    return Array.from(this.statuses.values());\n  }\n\n  stopFeed(adapter: string): void {\n    const interval = this.intervals.get(adapter);\n    if (interval) {\n      clearInterval(interval);\n      this.intervals.delete(adapter);\n      console.log(`[LiveDataCoordinator] Stopped feed for ${adapter}`);\n    }\n  }\n\n  stopAll(): void {\n    this.intervals.forEach((interval, adapter) => {\n      clearInterval(interval);\n      console.log(`[LiveDataCoordinator] Stopped feed for ${adapter}`);\n    });\n    this.intervals.clear();\n  }\n}\n\n// Export singleton\nexport const liveDataCoordinator = new LiveDataCoordinator();\n\n// Environment variable helper\nexport function getAPIKey(service: string): string | undefined {\n  const keyMap: Record<string, string> = {\n    openWeatherMap: 'VITE_OPENWEATHER_API_KEY',\n    nasa: 'VITE_NASA_API_KEY',\n    newsAPI: 'VITE_NEWSAPI_KEY',\n    gnews: 'VITE_GNEWS_API_KEY',\n    espn: 'VITE_ESPN_API_KEY',\n    apiFootball: 'VITE_API_FOOTBALL_KEY'\n  };\n  \n  const envVar = keyMap[service];\n  return envVar ? (import.meta.env[envVar] as string) : undefined;\n}\n\nconsole.log('[LiveData] Universal data feed system ready');\n";export{n as default};
