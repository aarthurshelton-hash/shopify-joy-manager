const e='/**\n * Edge Function Monitor Dashboard Component\n * \n * Real-time monitoring dashboard for Supabase Edge Functions health,\n * performance metrics, and operational status.\n */\n\nimport { useState } from \'react\';\nimport { useEdgeFunctionMonitor } from \'@/hooks/useEdgeFunctionMonitor\';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Button } from \'@/components/ui/button\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \'@/components/ui/tabs\';\nimport { Skeleton } from \'@/components/ui/skeleton\';\nimport { ScrollArea } from \'@/components/ui/scroll-area\';\nimport {\n  Activity,\n  AlertCircle,\n  CheckCircle,\n  Clock,\n  RefreshCw,\n  Server,\n  Zap,\n  TrendingUp,\n  AlertTriangle,\n  XCircle,\n} from \'lucide-react\';\n\ninterface EdgeFunctionMonitorProps {\n  className?: string;\n}\n\nexport function EdgeFunctionMonitor({ className }: EdgeFunctionMonitorProps) {\n  const [activeTab, setActiveTab] = useState(\'overview\');\n  \n  const {\n    results,\n    isLoading,\n    lastUpdated,\n    systemStatus,\n    error,\n    checkHealth,\n    checkSingleFunction,\n    healthyCount,\n    warningCount,\n    errorCount,\n    totalCount,\n    getAllMetrics,\n  } = useEdgeFunctionMonitor({\n    autoRefresh: true,\n    refreshInterval: 30_000,\n  });\n\n  const metrics = getAllMetrics();\n\n  // Status color mapping\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \'healthy\':\n        return \'bg-emerald-500\';\n      case \'warning\':\n        return \'bg-amber-500\';\n      case \'error\':\n      case \'unhealthy\':\n        return \'bg-red-500\';\n      default:\n        return \'bg-gray-500\';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \'healthy\':\n        return <CheckCircle className="h-4 w-4 text-emerald-500" />;\n      case \'warning\':\n        return <AlertTriangle className="h-4 w-4 text-amber-500" />;\n      case \'error\':\n      case \'unhealthy\':\n        return <XCircle className="h-4 w-4 text-red-500" />;\n      default:\n        return <Activity className="h-4 w-4 text-gray-500" />;\n    }\n  };\n\n  const getSystemStatusBadge = () => {\n    switch (systemStatus) {\n      case \'healthy\':\n        return (\n          <Badge className="bg-emerald-500/10 text-emerald-500 border-emerald-500/20">\n            <CheckCircle className="h-3 w-3 mr-1" />\n            Healthy\n          </Badge>\n        );\n      case \'warning\':\n        return (\n          <Badge className="bg-amber-500/10 text-amber-500 border-amber-500/20">\n            <AlertTriangle className="h-3 w-3 mr-1" />\n            Warning\n          </Badge>\n        );\n      case \'critical\':\n        return (\n          <Badge className="bg-red-500/10 text-red-500 border-red-500/20">\n            <AlertCircle className="h-3 w-3 mr-1" />\n            Critical\n          </Badge>\n        );\n      default:\n        return (\n          <Badge variant="secondary">\n            <Activity className="h-3 w-3 mr-1" />\n            Unknown\n          </Badge>\n        );\n    }\n  };\n\n  return (\n    <div className={className}>\n      <Card className="w-full">\n        <CardHeader className="pb-3">\n          <div className="flex items-center justify-between">\n            <div className="flex items-center gap-2">\n              <Server className="h-5 w-5 text-primary" />\n              <div>\n                <CardTitle className="text-lg">Edge Function Monitor</CardTitle>\n                <CardDescription>\n                  Real-time health monitoring for Supabase Edge Functions\n                </CardDescription>\n              </div>\n            </div>\n            <div className="flex items-center gap-2">\n              {getSystemStatusBadge()}\n              <Button\n                variant="outline"\n                size="sm"\n                onClick={() => checkHealth()}\n                disabled={isLoading}\n              >\n                <RefreshCw className={`h-4 w-4 ${isLoading ? \'animate-spin\' : \'\'}`} />\n              </Button>\n            </div>\n          </div>\n          {lastUpdated && (\n            <p className="text-xs text-muted-foreground mt-2">\n              Last updated: {new Date(lastUpdated).toLocaleTimeString()}\n            </p>\n          )}\n          {error && (\n            <div className="flex items-center gap-2 mt-2 text-red-500 text-sm">\n              <AlertCircle className="h-4 w-4" />\n              <span>{error}</span>\n            </div>\n          )}\n        </CardHeader>\n        <CardContent>\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className="grid w-full grid-cols-3">\n              <TabsTrigger value="overview">\n                <Activity className="h-4 w-4 mr-2" />\n                Overview\n              </TabsTrigger>\n              <TabsTrigger value="functions">\n                <Server className="h-4 w-4 mr-2" />\n                Functions\n              </TabsTrigger>\n              <TabsTrigger value="metrics">\n                <TrendingUp className="h-4 w-4 mr-2" />\n                Metrics\n              </TabsTrigger>\n            </TabsList>\n\n            {/* Overview Tab */}\n            <TabsContent value="overview" className="space-y-4">\n              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">\n                <Card>\n                  <CardContent className="p-4">\n                    <div className="flex items-center justify-between">\n                      <div>\n                        <p className="text-sm text-muted-foreground">Total</p>\n                        <p className="text-2xl font-bold">{totalCount}</p>\n                      </div>\n                      <Server className="h-8 w-8 text-muted-foreground" />\n                    </div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardContent className="p-4">\n                    <div className="flex items-center justify-between">\n                      <div>\n                        <p className="text-sm text-muted-foreground">Healthy</p>\n                        <p className="text-2xl font-bold text-emerald-500">{healthyCount}</p>\n                      </div>\n                      <CheckCircle className="h-8 w-8 text-emerald-500" />\n                    </div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardContent className="p-4">\n                    <div className="flex items-center justify-between">\n                      <div>\n                        <p className="text-sm text-muted-foreground">Warning</p>\n                        <p className="text-2xl font-bold text-amber-500">{warningCount}</p>\n                      </div>\n                      <AlertTriangle className="h-8 w-8 text-amber-500" />\n                    </div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardContent className="p-4">\n                    <div className="flex items-center justify-between">\n                      <div>\n                        <p className="text-sm text-muted-foreground">Error</p>\n                        <p className="text-2xl font-bold text-red-500">{errorCount}</p>\n                      </div>\n                      <XCircle className="h-8 w-8 text-red-500" />\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {isLoading ? (\n                <div className="space-y-2">\n                  <Skeleton className="h-12 w-full" />\n                  <Skeleton className="h-12 w-full" />\n                  <Skeleton className="h-12 w-full" />\n                </div>\n              ) : results.length > 0 ? (\n                <div className="space-y-2">\n                  {results.map((result) => (\n                    <div\n                      key={result.functionName}\n                      className="flex items-center justify-between p-3 rounded-lg border bg-card"\n                    >\n                      <div className="flex items-center gap-3">\n                        {getStatusIcon(result.status)}\n                        <div>\n                          <p className="font-medium">{result.functionName}</p>\n                          <p className="text-xs text-muted-foreground">\n                            {result.status} • {Math.round(result.responseTime)}ms\n                          </p>\n                        </div>\n                      </div>\n                      <div className="flex items-center gap-2">\n                        <div className={`h-2 w-2 rounded-full ${getStatusColor(result.status)}`} />\n                        <Button\n                          variant="ghost"\n                          size="sm"\n                          onClick={() => checkSingleFunction(result.functionName)}\n                          disabled={isLoading}\n                        >\n                          <RefreshCw className="h-3 w-3" />\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className="text-center py-8 text-muted-foreground">\n                  <Activity className="h-12 w-12 mx-auto mb-4 opacity-50" />\n                  <p>No functions monitored yet</p>\n                  <Button\n                    variant="outline"\n                    onClick={() => checkHealth()}\n                    className="mt-4"\n                    disabled={isLoading}\n                  >\n                    Start Monitoring\n                  </Button>\n                </div>\n              )}\n            </TabsContent>\n\n            {/* Functions Tab */}\n            <TabsContent value="functions" className="space-y-4">\n              <ScrollArea className="h-[400px]">\n                {isLoading ? (\n                  <div className="space-y-2">\n                    {[...Array(5)].map((_, i) => (\n                      <Skeleton key={i} className="h-20 w-full" />\n                    ))}\n                  </div>\n                ) : results.length > 0 ? (\n                  <div className="space-y-2">\n                    {results.map((result) => (\n                      <Card key={result.functionName}>\n                        <CardContent className="p-4">\n                          <div className="flex items-start justify-between">\n                            <div className="flex items-start gap-3">\n                              {getStatusIcon(result.status)}\n                              <div>\n                                <p className="font-medium">{result.functionName}</p>\n                                <div className="flex items-center gap-2 mt-1 text-xs text-muted-foreground">\n                                  <Clock className="h-3 w-3" />\n                                  <span>{Math.round(result.responseTime)}ms response</span>\n                                  <span>•</span>\n                                  <span>\n                                    Checked: {new Date(result.lastChecked).toLocaleTimeString()}\n                                  </span>\n                                </div>\n                                {result.error && (\n                                  <p className="text-xs text-red-500 mt-1">{result.error}</p>\n                                )}\n                              </div>\n                            </div>\n                            <Badge variant={result.status === \'healthy\' ? \'default\' : \'destructive\'}>\n                              {result.status}\n                            </Badge>\n                          </div>\n                          {result.details && Object.keys(result.details).length > 0 && (\n                            <div className="mt-3 pt-3 border-t">\n                              <p className="text-xs text-muted-foreground mb-2">Details:</p>\n                              <pre className="text-xs bg-muted p-2 rounded overflow-x-auto">\n                                {JSON.stringify(result.details, null, 2)}\n                              </pre>\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                ) : (\n                  <div className="text-center py-8 text-muted-foreground">\n                    <Server className="h-12 w-12 mx-auto mb-4 opacity-50" />\n                    <p>No function details available</p>\n                  </div>\n                )}\n              </ScrollArea>\n            </TabsContent>\n\n            {/* Metrics Tab */}\n            <TabsContent value="metrics" className="space-y-4">\n              <ScrollArea className="h-[400px]">\n                {metrics.length > 0 ? (\n                  <div className="space-y-2">\n                    {metrics.map((metric) => (\n                      <Card key={metric.functionName}>\n                        <CardContent className="p-4">\n                          <div className="flex items-center justify-between mb-3">\n                            <div className="flex items-center gap-2">\n                              <Zap className="h-4 w-4 text-primary" />\n                              <p className="font-medium">{metric.functionName}</p>\n                            </div>\n                            <Badge variant="outline">\n                              {metric.totalInvocations} calls\n                            </Badge>\n                          </div>\n                          <div className="grid grid-cols-3 gap-4 text-sm">\n                            <div>\n                              <p className="text-muted-foreground text-xs">Avg Response</p>\n                              <p className="font-medium">{Math.round(metric.averageResponseTime)}ms</p>\n                            </div>\n                            <div>\n                              <p className="text-muted-foreground text-xs">P95 Response</p>\n                              <p className="font-medium">{Math.round(metric.p95ResponseTime)}ms</p>\n                            </div>\n                            <div>\n                              <p className="text-muted-foreground text-xs">P99 Response</p>\n                              <p className="font-medium">{Math.round(metric.p99ResponseTime)}ms</p>\n                            </div>\n                          </div>\n                          {metric.errorRate > 0 && (\n                            <div className="mt-3 pt-3 border-t">\n                              <p className="text-xs text-red-500">\n                                Error Rate: {(metric.errorRate * 100).toFixed(1)}%\n                              </p>\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                ) : (\n                  <div className="text-center py-8 text-muted-foreground">\n                    <TrendingUp className="h-12 w-12 mx-auto mb-4 opacity-50" />\n                    <p>No metrics available yet</p>\n                    <p className="text-xs mt-2">\n                      Metrics are collected as functions are invoked\n                    </p>\n                  </div>\n                )}\n              </ScrollArea>\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport default EdgeFunctionMonitor;\n';export{e as default};
