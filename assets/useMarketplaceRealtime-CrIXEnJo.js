import{r as e,s as n}from"./index-BRnl98aa.js";function s({onListingChange:s,onScoreChange:a,enabled:i=!0}={}){const l=e.useCallback(e=>{null==s||s(e)},[s]),t=e.useCallback(e=>{null==a||a(e)},[a]);e.useEffect(()=>{if(!i)return;const e=n.channel("marketplace-realtime").on("postgres_changes",{event:"*",schema:"public",table:"visualization_listings"},l).on("postgres_changes",{event:"*",schema:"public",table:"vision_scores"},t).subscribe();return()=>{n.removeChannel(e)}},[i,l,t])}function a({userId:s,onVisualizationChange:a,onScoreChange:i,enabled:l=!0}={}){e.useEffect(()=>{if(!l||!s)return;const e=n.channel(`my-vision-${s}`).on("postgres_changes",{event:"*",schema:"public",table:"saved_visualizations",filter:`user_id=eq.${s}`},()=>{null==a||a()}).on("postgres_changes",{event:"*",schema:"public",table:"vision_scores"},e=>{var n;const s=null==(n=e.new)?void 0:n.visualization_id;s&&(null==i||i(s))}).on("postgres_changes",{event:"*",schema:"public",table:"visualization_listings",filter:`seller_id=eq.${s}`},()=>{null==a||a()}).subscribe();return()=>{n.removeChannel(e)}},[l,s,a,i])}export{s as a,a as u};
