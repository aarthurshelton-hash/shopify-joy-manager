const n="import { useState, useEffect, useCallback } from 'react';\n\ninterface UseImageLoaderOptions {\n  src: string;\n  placeholderSrc?: string;\n  onLoad?: () => void;\n  onError?: () => void;\n}\n\nexport function useImageLoader({ src, placeholderSrc, onLoad, onError }: UseImageLoaderOptions) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const [currentSrc, setCurrentSrc] = useState(placeholderSrc || '');\n\n  useEffect(() => {\n    if (!src) {\n      setHasError(true);\n      setIsLoading(false);\n      return;\n    }\n\n    setIsLoading(true);\n    setHasError(false);\n\n    const img = new Image();\n    \n    img.onload = () => {\n      setCurrentSrc(src);\n      setIsLoading(false);\n      onLoad?.();\n    };\n\n    img.onerror = () => {\n      setHasError(true);\n      setIsLoading(false);\n      onError?.();\n    };\n\n    img.src = src;\n\n    // If image is cached, onload might not fire\n    if (img.complete) {\n      setCurrentSrc(src);\n      setIsLoading(false);\n      onLoad?.();\n    }\n\n    return () => {\n      img.onload = null;\n      img.onerror = null;\n    };\n  }, [src, placeholderSrc, onLoad, onError]);\n\n  const retry = useCallback(() => {\n    setIsLoading(true);\n    setHasError(false);\n    \n    const img = new Image();\n    img.onload = () => {\n      setCurrentSrc(src);\n      setIsLoading(false);\n      onLoad?.();\n    };\n    img.onerror = () => {\n      setHasError(true);\n      setIsLoading(false);\n      onError?.();\n    };\n    img.src = src;\n  }, [src, onLoad, onError]);\n\n  return { isLoading, hasError, currentSrc, retry };\n}\n\n// Preload critical images\nexport function preloadImages(srcs: string[]): Promise<void[]> {\n  return Promise.all(\n    srcs.map(src => {\n      return new Promise<void>((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve();\n        img.onerror = () => reject();\n        img.src = src;\n      });\n    })\n  );\n}\n\n// Image with loading skeleton\ninterface LazyImageProps extends React.ImgHTMLAttributes<HTMLImageElement> {\n  src: string;\n  alt: string;\n  className?: string;\n  containerClassName?: string;\n  placeholderColor?: string;\n}\n\nexport function LazyImage({ \n  src, \n  alt, \n  className = '',\n  containerClassName = '',\n  placeholderColor = 'bg-muted',\n  ...props \n}: LazyImageProps) {\n  const { isLoading, hasError, currentSrc, retry } = useImageLoader({ src });\n\n  return (\n    <div className={`relative ${containerClassName}`}>\n      {isLoading && (\n        <div className={`absolute inset-0 ${placeholderColor} animate-pulse`} />\n      )}\n      {hasError ? (\n        <div \n          className=\"absolute inset-0 bg-muted flex items-center justify-center cursor-pointer\"\n          onClick={retry}\n        >\n          <span className=\"text-xs text-muted-foreground\">Failed to load. Click to retry.</span>\n        </div>\n      ) : (\n        <img\n          src={currentSrc || src}\n          alt={alt}\n          className={`${className} ${isLoading ? 'opacity-0' : 'opacity-100'} transition-opacity duration-300`}\n          loading=\"lazy\"\n          {...props}\n        />\n      )}\n    </div>\n  );\n}\n";export{n as default};
