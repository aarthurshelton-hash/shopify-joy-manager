import{aL as e,r as t,bx as n,by as s,u as r,bz as a,s as i,b as o,bA as c,bB as l,j as d,bC as u,aV as m,bk as h,q as x,bt as p,aX as f,a_ as g,bD as v,b9 as b,bE as y,a$ as w,bF as j,ad as C,aj as N,bG as k,bH as M,af as D,ag as z,ai as B,y as q,bI as L,bJ as S,b8 as A,ae as P,bK as H,ah as I,bL as G,B as U,bM as T,bN as K,bO as W,bP as O,bQ as E,bR as Y,bS as _,bT as X,bU as Z,bV as R,bW as F,bX as V,bY as J,bZ as Q,b_ as $,b$ as ee,c0 as te,aW as ne,c1 as se,bs as re,bv as ae,bw as ie,c2 as oe,c3 as ce,c4 as le,S as de,am as ue,c5 as me,a as he,ar as xe,c6 as pe,as as fe,c7 as ge,a1 as ve,a2 as be,a3 as ye,a4 as we,a5 as je,c8 as Ce,L as Ne,ax as ke,b3 as Me,c9 as De,ca as ze,an as Be,av as qe,aw as Le,cb as Se,aO as Ae,cc as Pe,H as He,P as Ie,cd as Ge,b5 as Ue,bu as Te,bg as Ke,ce as We,aR as Oe,cf as Ee,d as Ye,b4 as _e,a9 as Xe,cg as Ze,ch as Re,ci as Fe,al as Ve,au as Je}from"./index-CiI6UKiY.js";import{L as Qe}from"./LiveColorLegend-DK7PthsP.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-Cu19rffb.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=ht,t=mt();for(;;)try{if(508225===parseInt(e(519))/1*(parseInt(e(534))/2)+-parseInt(e(524))/3*(-parseInt(e(550))/4)+parseInt(e(531))/5*(parseInt(e(527))/6)+parseInt(e(507))/7+-parseInt(e(543))/8+-parseInt(e(554))/9+-parseInt(e(502))/10*(parseInt(e(511))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ht(548)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ht,t={};t[e(533)]=e(500)+"+$";const n=t;return dt[e(499)]()[e(520)](n[e(533)])[e(499)]()[e(529)+"r"](dt)[e(520)](e(500)+"+$")});dt();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ht(548)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function mt(){const e=["BNrFBwf0zxjPyq","x19WCM90B19F","yMLUza","CMvLzM9SzcbYzq","D2fYBG","AxnjBNn1zMzPyW","CMvHC29U","mJG2ndLisNzryMm","C2vHCMnO","y2PnsuC","v29eyue","ie5VigXLz2fSia","nJyXndDzBeruuLq","CM4GDgHPCYiPka","vfPotum","ndCXmhDlsxHerq","C3bSAxq","y29UC3rYDwn0BW","zfjLCgv0AxrPBW","mty4nufRvgvqsG","AxnuAhjLzwzVBa","CMrczgC","mZzHA3fuBvK","CMv0DxjUicHMDq","sw5ZDwzMAwnPzq","u3rHBgvTyxrLiq","CM1wrLq","rhjHDYbIEsbPBG","C3rHBgvTyxrL","x3j1Bgu","t2zSBuq","mJGYmJm4nerjC3z3Da","ntaTtw92zsbsDq","AxneCMf3","AwvUDe1HDgvYAq","AxntDgfSzw1HDa","yxbWBhK","zsbMAwz0Es1TBW","mJHwqvj6AMq","vgHYzwvMB2XKia","E30Uy29UC3rYDq","y3rVCIGICMv0Dq","nJmYmdCXoevpuKf0uq","Bg9N","Dw5RBM93BG","Cgv0AxrPB24U","DgHYzwvMB2XKxW","Bw92zxmGyxzHAq","DwjOt1m","BNqGtwf0zxjPyq","CMvWzxrPDgLVBG","C2HVCNrnzxnZyq","CgjRtKC","vvLWq2K","y29UC29Szq","rhjHDYbIEsb0Aa","Dg9tDhjPBMC","kcGOlISPkYKRkq","BMn0Aw9UkcKG","mJeXmJy4mgvotuXeua","zxjYB3i","C3vMzMLJAwvUDa","EKHLrLG","BwvZC2fNzq","ntG4mde2mufPB1bYyG","DMuGCNvSzs4","rhjHDW","zMvU","mtfkru1yrNK"];return(mt=function(){return e})()}function ht(e,t){e-=486;const n=mt();let s=n[e];if(void 0===ht.OqqSWU){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ht.fJLMmi=r,ht.dtKPzt={},ht.OqqSWU=!0}const a=e+n[0],i=ht.dtKPzt[a];if(i)s=i;else{const e=function(e){this.xjMYxC=e,this.Ncheyk=[1,0,0],this.AXQdvo=function(){return"newState"},this.sABIpZ="\\w+ *\\(\\) *{\\w+ *",this.NniDoz="['|\"].+['|\"];? *}"};e.prototype.GOgWvm=function(){const e=new RegExp(this.sABIpZ+this.NniDoz).test(this.AXQdvo.toString())?--this.Ncheyk[1]:--this.Ncheyk[0];return this.UEoMlw(e)},e.prototype.UEoMlw=function(e){return Boolean(~e)?this.UUcDBl(this.xjMYxC):e},e.prototype.UUcDBl=function(e){for(let t=0,n=this.Ncheyk.length;t<n;t++)this.Ncheyk.push(Math.round(Math.random())),n=this.Ncheyk.length;return e(this.Ncheyk[0])},new e(ht).GOgWvm(),s=ht.fJLMmi(s),ht.dtKPzt[a]=s}return s}function xt(e){const t=ht;return function(e){const t=ht,n={nQIxM:t(537),geMBq:t(489)+t(493),UYpCi:t(498)+t(515)+t(488),afzhd:"insufficie"+t(512)+"l",uBapq:function(e,t,n){return e(t,n)},XUUuQ:t(498)+t(549)+t(508)};if(e[t(547)+"e"]()){const e={};return e.reason=t(540),e.message=t(537)+t(523)+t(490)+"lable.",e[t(494)+"ge"]=n.nQIxM,e}if(e[t(532)+t(530)+"n"]()){const e={};return e[t(518)]=n.geMBq,e[t(506)]=n[t(496)],e.shortMessage=t(551)+"Repetition",e}if(e[t(517)+t(546)+"al"]()){const e={};return e[t(518)]=n.afzhd,e[t(506)]=t(539)+t(504)+" material.",e[t(494)+"ge"]=t(536)+t(492)+"l",e}const s=e[t(510)]();if(n.uBapq(parseInt,s[t(528)](" ")[4],10)>=100){const e={};return e[t(518)]="fifty_move"+t(541),e[t(506)]=n.XUUuQ,e.shortMessage=t(544)+"le",e}const r={};return r[t(518)]=t(487),r.message="Game drawn!",r[t(494)+"ge"]=t(509),r}(e)[t(506)]}ut(void 0,function(){const e=ht,t={OflmD:function(e,t){return e===t}};t[e(505)]="wosvC",t[e(491)]=function(e,t){return e+t},t[e(526)]=e(486),t[e(538)]=e(516),t.WoDaA=e(503),t.cjMIG="exception",t.kZIsF="table";const n=t;let s;try{if(n[e(542)](e(495),n[e(505)])){const t=_0x13610d?function(){if(_0xe4b579){const t=_0x54873b[e(548)](_0x3eeed3,arguments);return _0xe493d1=null,t}}:function(){};return _0x2bf557=!1,t}s=Function(n[e(491)](e(535)+e(501),e(552)+e(553)+e(525)+" )")+");")()}catch(i){s=window}const r=s[e(497)]=s[e(497)]||{},a=[n.TZNMC,n[e(538)],"info",n[e(522)],n[e(521)],n.kZIsF,"trace"];for(let o=0;o<a.length;o++){const t=ut[e(529)+"r"].prototype[e(514)](ut),n=a[o],s=r[n]||t;t[e(513)]=ut[e(514)](ut),t[e(499)]=s.toString.bind(s),r[n]=t}})(),function(){const e=gt,t=vt();for(;;)try{if(162978===-parseInt(e(369))/1+parseInt(e(418))/2+-parseInt(e(417))/3*(-parseInt(e(326))/4)+parseInt(e(321))/5+parseInt(e(397))/6+-parseInt(e(356))/7*(parseInt(e(414))/8)+-parseInt(e(337))/9*(parseInt(e(357))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){const e={};e[gt(395)]=function(e,t){return e!==t};const t=e;let n=!0;return function(e,s){const r=n?function(){const n=gt;if(t[n(395)](n(353),n(353)))_0x818d0c[n(343)][n(419)]&&(_0x59f3ef[n(343)][n(419)].gain[n(431)]=_0x2f678d);else if(s){const t=s[n(390)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}()(void 0,function(){const e=gt,t={};t[e(371)]=e(350)+"+$";const n=t;return pt.toString()[e(324)](n[e(371)])[e(408)]()[e(331)+"r"](pt)[e(324)](n.cJafs)});pt();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function gt(e,t){e-=321;const n=vt();let s=n[e];if(void 0===gt.NfnCbc){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.LaQgrS=r,gt.fobiSg={},gt.NfnCbc=!0}const a=e+n[0],i=gt.fobiSg[a];if(i)s=i;else{const e=function(e){this.WXgNrX=e,this.enWxJr=[1,0,0],this.zaUqLw=function(){return"newState"},this.OdwZwk="\\w+ *\\(\\) *{\\w+ *",this.hkhRko="['|\"].+['|\"];? *}"};e.prototype.jNLTve=function(){const e=new RegExp(this.OdwZwk+this.hkhRko).test(this.zaUqLw.toString())?--this.enWxJr[1]:--this.enWxJr[0];return this.cuHASw(e)},e.prototype.cuHASw=function(e){return Boolean(~e)?this.RZslip(this.WXgNrX):e},e.prototype.RZslip=function(e){for(let t=0,n=this.enWxJr.length;t<n;t++)this.enWxJr.push(Math.round(Math.random())),n=this.enWxJr.length;return e(this.enWxJr[0])},new e(gt).jNLTve(),s=gt.LaQgrS(s),gt.fobiSg[a]=s}return s}function vt(){const e=["ndmYodiWtMrABxvm","z2fPBK5Vzgu","t21nyNq","ywrgAwX0zxi","y3rVCIGICMv0Dq","DhjPyw5NBgu","zNjLCxvLBMn5","AwXSzwDHBa","y3jLyxrLqNvMzG","y29UC29Szq","y3vYCMvUDfrPBq","qKHPAuO","y29UDgv4Da","DMfSDwu","z2fPBG","sKXtuuy","Bg9N","z2fTzuvUza","mtqWmtq4mg1PsLbUqW","zwrkvgK","A0HmCwy","C2vHCMnO","BfjHBxbuB1zHBa","mtaXnMnWCwX1zq","BMn0Aw9UkcKG","yNvMzMvY","vfPtCe8","zxjYB3i","y29UC3rYDwn0BW","qKzPD2S","uxn3rhy","x19WCM90B19F","C2f3Dg9VDgG","v2vIief1zgLVia","mZG1mZHpr1HIDxG","sxjYC3i","s1fOyvG","zxHJzxb0Aw9U","y2XVC2u","CMv0DxjUicHMDq","y3vYCMvUDa","vg9wywX1zuf0va","vxrrD3K","wejbEuq","DhHbrgm","ru96yvu","tK1RANO","kcGOlISPkYKRkq","zgvMzwf0","EwjqyMy","zeLywxe","yvLSD20","whnWrMO","n1DAyMXQrW","mJeWq2nhvKvK","y3jLyxrLr2fPBG","Aw5MBW","AvbVCMO","vKfqALK","C2LUzq","DgrwBgS","twPxsfy","t05oz1e","y2fZDgXL","rwzWvKS","zxHWB25LBNrPyq","mJq3nZe5BvjbDe9J","Aw1L","y0PHzNm","CMfUzg9T","rgf0yq","DhjHy2u","vhrgseW","Bg93CgfZCW","yNH4yKC","BgLUzwfYuMfTCa","Bw92zq","D2fYBG","tuH3zvC","Aw5PDef1zgLV","zfHqwg0","D2vIA2L0qxvKAq","CgXHEvnVDw5K","C3rVCa","D09muxq","BgXHDg9Y","zxjtB3vYy2u","yxbWBhK","D2jgCvG","qvbjig5VDcbZDq","C2fTCgXLuMf0zq","vgLTzq","CgTqufC","vhndu3G","ndGXmJK2zwvbsNru","DhLWzq","C2v0vMfSDwvbDa","qwPYqNa","Ew5gu2W","y2fWDhvYzq","yMLUza","tK92rei","qxvKAw9dB250zq","B0nVBNrLEhq","ChbVCNrLza","Dg9tDhjPBMC","y2HLy2TTyxrL","DMLJDg9YEq","DwvbDfrPBwu","C3rHCNq","CgHishe","mJiXnZCZnMDXChPuyG","y29UBMvJDa","sgXfv1u","mJm3m054qwDOwa"];return(vt=function(){return e})()}ft(void 0,function(){const e=gt,t={};t[e(375)]=function(e,t){return e+t},t[e(348)]="{}.constru"+e(422)+'rn this")( )',t[e(404)]=function(e,t){return e===t},t.wbFqX=e(346),t[e(367)]=e(434),t[e(383)]=e(374),t[e(364)]=function(e,t){return e<t},t.ybPbf="sZfhj";const n=t;let s;try{s=Function(n[e(375)](e(342)+e(327),n[e(348)])+");")()}catch(i){n[e(404)](n[e(391)],e(416))?_0x4dbb8e[e(343)][e(430)].close():s=window}const r=s[e(427)]=s[e(427)]||{},a=[n[e(367)],e(380),e(359),e(330),e(340),"table",n[e(383)]];for(let o=0;n[e(364)](o,a.length);o++)if(n.NOvDB(e(429),n[e(352)]))_0x391963[e(343)][e(419)][e(432)].value=_0x491c90;else{const t=ft[e(331)+"r"].prototype[e(403)](ft),n=a[o],s=r[n]||t;t[e(334)]=ft.bind(ft),t.toString=s[e(408)][e(403)](s),r[n]=t}})();const bt=(e=!0,n=.5)=>{const s=gt,r={gbTfA:s(336)+s(392)+s(407),Irrsr:function(e,t){return e!==t},aMohq:"kLrqQ",tdVlk:function(e){return e()},wOLQt:function(e,t){return e+t},VAPjY:function(e,t){return e+t},phHHq:function(e){return e()},KQhaX:function(e,t){return e||t},fjaGt:function(e,t){return e-t},ZpYlf:function(e,t){return e*t},MHweW:s(376),BFiwk:s(362),QswDv:function(e,t,n,s,r,a){return e(t,n,s,r,a)},edJTi:s(423),TZSpO:s(402),UtQwy:function(e,t,n){return e(t,n)},ynFSl:function(e,t,n,s,r,a){return e(t,n,s,r,a)},NMkjz:function(e,t,n,s,r,a){return e(t,n,s,r,a)},AjrBp:function(e,t,n,s,r,a){return e(t,n,s,r,a)},kHLqf:function(e,t,n,s,r,a){return e(t,n,s,r,a)},XspFj:function(e,t,n){return e(t,n)},TsCSx:function(e,t,n){return e(t,n)},txADc:s(425),ONNgQ:s(433),zRbGI:function(e,t){return e(t)}},a={};a[s(430)]=null,a[s(419)]=null;const i=r.zRbGI(t.useRef,a),o=r[s(396)](t.useCallback,()=>{const e=s;if(!i[e(343)][e(430)])try{const t=new(window[e(405)+"xt"]||window[e(384)+e(406)]),s=t.createGain();s.connect(t.destination),s.gain[e(431)]=n;const r={};r[e(430)]=t,r[e(419)]=s,i[e(343)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;i[e(343)][e(419)]&&(i.current[e(419)][e(432)][e(431)]=n)},[n]);const c=t.useCallback((t,n,a="sine",c=.01,l=.1,d)=>{const u=s;if(r[u(338)](u(360),r.aMohq)){if(!e)return;r[u(363)](o);const{context:s,gainNode:m}=i[u(343)];if(!s||!m)return;const h=s["createOsci"+u(388)](),x=s[u(358)]();h[u(398)]=a,h[u(424)][u(399)+u(394)](t,s[u(428)+"e"]),d&&h[u(424)]["exponentialRampToVal"+u(411)](d,s[u(428)+"e"]+n),x[u(432)][u(399)+"Time"](0,s[u(428)+"e"]),x.gain[u(378)+u(344)+"ime"](1,r[u(387)](s[u(428)+"e"],c)),x.gain[u(368)+u(325)+u(411)](.01,r[u(361)](s.currentTime,n)-l),x.gain[u(378)+u(344)+u(370)](0,s[u(428)+"e"]+n),h[u(415)](x),x[u(415)](m),h.start(s[u(428)+"e"]),h.stop(s.currentTime+n)}else _0xb7b51c=_0x408a04},[e,o]),l=r.UtQwy(t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r[a(413)](o);const{context:c,gainNode:l}=i.current;if(r[a(339)](!c,!l))return;const d=c[a(393)]*t,u=c[a(426)+"er"](1,d,c[a(393)]),m=u["getChannel"+a(373)](0);for(let e=0;e<d;e++)m[e]=r.fjaGt(r.ZpYlf(Math[a(372)](),2),1);const h=c[a(426)+a(389)]();h[a(328)]=u;const x=c["createBiqu"+a(421)]();x[a(398)]=r[a(381)],x[a(424)].value=n;const p=c.createGain();p.gain[a(399)+a(394)](.3,c.currentTime),p.gain["exponentia"+a(325)+"ueAtTime"](.01,c[a(428)+"e"]+t),h[a(415)](x),x.connect(p),p[a(415)](l),h[a(412)](c[a(428)+"e"]),h[a(386)](c[a(428)+"e"]+t)},[e,o]),d=t.useCallback(t=>{const n=s;if(e)switch(t){case n(379):c(800,.08,r[n(332)],.005,.05),r[n(333)](c,400,.06,r[n(322)],.005,.04);break;case r[n(329)]:r[n(345)](l,.12,2e3),r[n(401)](c,300,.1,"square",.005,.08),r[n(349)](c,150,.15,"sine",.01,.1);break;case n(366):c(600,.06,r[n(332)],.005,.04),setTimeout(()=>c(700,.06,n(362),.005,.04),80);break;case"check":c(880,.15,r[n(322)],.01,.1),setTimeout(()=>c(1100,.12,n(423),.01,.08),120);break;case n(409):r[n(400)](c,880,.2,n(362),.01,.15),setTimeout(()=>c(660,.2,n(362),.01,.15),150),r.UtQwy(setTimeout,()=>c(440,.3,n(362),.01,.2),300),r.UtQwy(setTimeout,()=>c(330,.4,n(362),.01,.3),500);break;case"gameStart":c(523,.12,r[n(332)],.01,.08),r[n(345)](setTimeout,()=>c(659,.12,"sine",.01,.08),100),setTimeout(()=>c(784,.2,"sine",.01,.15),200);break;case n(435):r[n(323)](c,440,.15,n(423),.01,.1),setTimeout(()=>c(349,.25,n(423),.01,.2),150);break;case n(410):r[n(401)](c,523,.1,r.BFiwk,.01,.08),r.XspFj(setTimeout,()=>c(659,.1,n(362),.01,.08),100),setTimeout(()=>c(784,.1,n(362),.01,.08),200),r[n(345)](setTimeout,()=>c(1047,.3,n(362),.01,.25),300);break;case n(351):r[n(333)](c,392,.2,r.BFiwk,.02,.15),setTimeout(()=>c(349,.2,"sine",.02,.15),200),r[n(355)](setTimeout,()=>c(330,.3,"sine",.02,.25),400),r.XspFj(setTimeout,()=>c(262,.4,n(362),.02,.35),650);break;case"draw":c(440,.15,r.BFiwk,.01,.1),setTimeout(()=>c(440,.15,n(362),.01,.1),180),r[n(396)](setTimeout,()=>c(523,.2,n(362),.01,.15),360);break;case r[n(347)]:c(200,.1,"square",.005,.08),c(150,.08,n(335),.005,.06)}},[e,c,l]);r[s(396)](t.useEffect,()=>{const e=s,t={};t[e(354)]=function(e,t){return e===t},t[e(377)]=r[e(365)];const n=t;return()=>{const t=e;if(n.aYlwm(n[t(377)],"leGzn"))return()=>{const e=t;_0xfeffb3.current[e(430)]&&_0x4feffb[e(343)].context[e(341)]()};i[t(343)][t(430)]&&i.current[t(430)][t(341)]()}},[]);const u={};return u[s(385)]=d,u[s(382)]=o,u};function yt(e,t){e-=115;const n=Ct();let s=n[e];if(void 0===yt.HSpyif){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};yt.BkLkmz=r,yt.UVkPDJ={},yt.HSpyif=!0}const a=e+n[0],i=yt.UVkPDJ[a];if(i)s=i;else{const e=function(e){this.ukhKJv=e,this.vIImRl=[1,0,0],this.KlMADQ=function(){return"newState"},this.ucjnlj="\\w+ *\\(\\) *{\\w+ *",this.GkoHXb="['|\"].+['|\"];? *}"};e.prototype.ftIbup=function(){const e=new RegExp(this.ucjnlj+this.GkoHXb).test(this.KlMADQ.toString())?--this.vIImRl[1]:--this.vIImRl[0];return this.qexZoJ(e)},e.prototype.qexZoJ=function(e){return Boolean(~e)?this.xTEFMw(this.ukhKJv):e},e.prototype.xTEFMw=function(e){for(let t=0,n=this.vIImRl.length;t<n;t++)this.vIImRl.push(Math.round(Math.random())),n=this.vIImRl.length;return e(this.vIImRl[0])},new e(yt).ftIbup(),s=yt.BkLkmz(s),yt.UVkPDJ[a]=s}return s}const wt=yt;!function(){const e=yt,t=Ct();for(;;)try{if(494755===parseInt(e(128))/1*(parseInt(e(151))/2)+parseInt(e(129))/3*(parseInt(e(133))/4)+parseInt(e(150))/5+-parseInt(e(123))/6+parseInt(e(152))/7+-parseInt(e(141))/8+parseInt(e(134))/9*(-parseInt(e(143))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=yt;return jt.toString()[e(140)](e(147)+"+$")[e(125)]()[e(131)+"r"](jt)[e(140)](e(147)+"+$")});function Ct(){const e=["u1LWsum","nefRDLzzrW","mZG3vKjwyLnK","zxjYB3i","ChjVDg90ExbL","tvfID3a","D1PRA00","Bg9N","C2vHCMnO","ndmYnJGXnKL6Bg1iCa","zxHJzxb0Aw9U","ndG2ndeWB3jnsg5L","y29UC29Szq","E30Uy29UC3rYDq","yxbWBhK","kcGOlISPkYKRkq","vwDnD1q","zw5HyMXLza","mJK1nJK5mhzSB1HtuG","mJqZotm0Be9AtNvo","nJy4nZiXowT2suTMAa","B1HUAuS","Aw5MBW","x19WCM90B19F","qKzTtKy","yMLUza","y2HLC3mTC291BG","DgfIBgu","y3rVCIGICMv0Dq","ndCZmJuWBufmq0zv","q0rKB0i","Dg9tDhjPBMC","Be9sq2i","CMv0DxjUicHMDq","n3vyzMfTzq","mJqXnJy4m0LRBwXUuq","D2fYBG","y29UC3rYDwn0BW"];return(Ct=function(){return e})()}jt();const Nt=function(){let e=!0;return function(t,n){const s=e?function(){const e=yt;if(e(132)!=e(132)){const t=_0x8d7474?function(){if(_0x4aa5ea){const t=_0x56860b[e(146)](_0x1edace,arguments);return _0x435b04=null,t}}:function(){};return _0x11bdca=!1,t}if(n){const s=n[e(146)](t,arguments);return n=null,s}}:function(){};return e=!1,s}}();Nt(void 0,function(){const e=yt,t={UgMwT:function(e,t){return e(t)},MQbwp:function(e,t){return e+t},BFmNF:e(145)+e(122)+'rn this")( )',wZkkM:e(139),lORCb:e(116),CDdoB:e(121),YAmrX:"trace"},n=function(){const n=e;if(n(115)!=n(115))return _0x426729[n(125)]()[n(140)](n(147)+"+$")[n(125)]()[n(131)+"r"](_0x475d8c).search("(((.+)+)+)+$");{let e;try{e=t[n(148)](Function,t[n(137)](t[n(137)](n(127)+"nction() ",t[n(118)]),");"))()}catch(s){e=window}return e}}(),s=n[e(144)]=n[e(144)]||{},r=[t[e(138)],e(130),t[e(126)],e(135),e(142),t[e(124)],t.YAmrX];for(let a=0;a<r.length;a++){const t=Nt[e(131)+"r"][e(136)][e(119)](Nt),n=r[a],i=s[n]||t;t[e(117)]=Nt[e(119)](Nt),t[e(125)]=i[e(125)][e(119)](i),s[n]=t}})();const kt={};kt.name=wt(120)+"d-settings";const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(149)]}))}),kt));function Dt(e,t){e-=405;const n=Lt();let s=n[e];if(void 0===Dt.EnxjCr){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Dt.zXbISD=r,Dt.PofSni={},Dt.EnxjCr=!0}const a=e+n[0],i=Dt.PofSni[a];if(i)s=i;else{const e=function(e){this.NVeABD=e,this.pOvNHN=[1,0,0],this.XQuKDo=function(){return"newState"},this.mIxtIR="\\w+ *\\(\\) *{\\w+ *",this.Miyvmt="['|\"].+['|\"];? *}"};e.prototype.gNTBNK=function(){const e=new RegExp(this.mIxtIR+this.Miyvmt).test(this.XQuKDo.toString())?--this.pOvNHN[1]:--this.pOvNHN[0];return this.sxkSIT(e)},e.prototype.sxkSIT=function(e){return Boolean(~e)?this.LFbizA(this.NVeABD):e},e.prototype.LFbizA=function(e){for(let t=0,n=this.pOvNHN.length;t<n;t++)this.pOvNHN.push(Math.round(Math.random())),n=this.pOvNHN.length;return e(this.pOvNHN[0])},new e(Dt).gNTBNK(),s=Dt.zXbISD(s),Dt.PofSni[a]=s}return s}const zt=Dt;!function(){const e=Dt,t=Lt();for(;;)try{if(203664===-parseInt(e(673))/1*(-parseInt(e(524))/2)+-parseInt(e(430))/3+-parseInt(e(452))/4*(parseInt(e(577))/5)+parseInt(e(437))/6*(-parseInt(e(593))/7)+parseInt(e(495))/8*(parseInt(e(651))/9)+-parseInt(e(464))/10+parseInt(e(609))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Dt(462)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Dt;return Bt[e(412)]()[e(416)](e(458)+"+$")[e(412)]()[e(580)+"r"](Bt)[e(416)](e(458)+"+$")});Bt();const qt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Lt(){const e=["ugvvC2S","Dg9ju09tDhjPBG","CgDU","rhjHDYbVzMzLCG","tgzdAMe","B3jKzxi","ve1NwNm","C2vSzwn0","Bw92zv9Zyw4","s2XXv0G","B3vUza","Aw5Zzxj0","r1jeqM4","yvz2Buq","v2HPDguGD2LUCW","DxzQtfO","DgLTzv9JB250CG","Bw92zv9UDw1Izq","y2fWDhvYzq","DgfIBgu","ww91ihjLC2LNBG","AfvWyKS","BIbPBIb0BYbQBW","Aw5MBW","wvHJt2e","y3rVCIGICMv0Dq","D2HPDgvFD2LUCW","tK5dtK4","ihbSyxLPBMCGyq","EgnTAuq","z2fTzq","yMXHy2TqywXLDa","yMLUza","B2rL","v1DwwMq","zMLUza","ovriAufIuq","ywn0AxzL","tw92zsbLCNjVCG","wLP2rwu","ChjVBw90Aw9U","BMv3uMf0Aw5N","CMfWAwrFmtu","r2fTzsbJCMvHDa","Bfr1DMu","zwXVx3jHDgLUzW","y29KztOG","Bwf5yMvtAw5NBa","DgLTzunVBNrYBW","zxjYB3i","y3vYCMvUDf9Mzq","AxndAgvJAW","ywrK","Bg9FCMf0Aw5N","zgn1uhi","q2fUBM90igPVAq","CM4GDgHPCYiPka","ywXS","ntq1zMDkA3rQ","C01nCNa","y2HHBgXLBMDLxW","DxvAChe","zNjVBq","ruPWuvu","CNbJ","CMvZAwDUr2fTzq","tLbryMK","Cg9ZDgDYzxnFyW","zM9YrwfJAa","C3vIC3rYAw5N","Dg9tDhjPBMC","Dfnvvve","wff1tvq","DMvYyM9Zzq","C2vHCMnO","ChvIBgLJ","yMXHy2S","BwvZC2fNzq","rMfPBgvKihrVia","rhfcBvK","uMPhrwe","AM9PBKj5q29Kzq","y3jLyxrLr2fTzq","t0forLa","Bg9HzcbNyw1L","B25LBNqGyxv0BW","C3rHDhvZ","Cgvpz2i","nda4mZbJDxntv3q","sw52ywXPzcbVCG","tY1plu8","z2fTzvn0yxrL","BNfHDeC","z2fTzs0","BMvUDc4UlG","mtqXnZaZogv1vw94Da","y2HLC3nFz2fTzq","y2HHBMDL","sKvztvu","x3jLBwfPBMLUzW","Bw92zv91y2K","CMvTB3zLq2HHBG","y2HHBgXLBMDLqW","DhjHy2u","y29UC29Szq","vMLhyKO","D2fPDgLUzW","AgfSBgvUz2uGyW","uMf0Aw5NoIa","y3jLyxrLzf9HDa","nZi3mdreEMrQBwu","DuHivKG","Bw92zxmT","yMXHy2TFDgLTzq","y29Kzq","z2fTzv9Pzd1LCq","kcGOlISPkYKRkq","ufn6DxK","y2fZDgXL","ihnLBNqGkg9WCa","yxbWBhK","wfPdtfm","mJeZmteWDNfozuv2","tvHMCMS","Bw92zv9JB3vUDa","AxndAgvJA21HDa","DKvsCLO","zhjHDW","AwXSzwDHBa","ywXbzxe","lwfJy2vWDhmGAq","zujLu0y","zgvMzwf0","s0zZA1y","D2HPDgvqywXLDa","BMn0Aw9UkcKG","CMv0DxjUicHMDq","rMLLu0G","zMvU","CM9OvgO","ugLQzK0","Dg9vChbLCKnHCW","u0f0zhi","yMXHy2TFCgXHEq","y3jLyxrLigDHBq","E30Uy29UC3rYDq","A3nZDgy","qNbqBLm","AfbMBeq","t0PZAgi","q1Dssem","igDHBwu","BMnvzwu","mJuWnJa0mfzjEfrbtq","y2HHBM5LBa","DMLJDg9YEq","q3n6Dfy","CMvZDwX0","zwqHifDHAxrPBG","yNvSBgv0xZe","vwfLwMy","C3f1yxjL","AxnnEvr1CM4","zNvSBui","yMXPDhPFnq","qMXHy2SGD2LUCW","zhKGC3rHCNrLza","ExfOq3O","D2HPDgu","CYbcBgfJAY4","txrvsLe","DxnLCL9Pza","EefQChq","wwHzAvu","B2zdshK","y2HLC3nFBw92zq","ChjVzMLSzxm","B2zMzxjeCMf3","Cg5cA1u","tLPVzfm","yMXHy2TFD2LUCW","uK5MsNa","mte4mMTwrMLAtq","uuz1DKu","Aw4GysbNyw1L","Dw50Aw1Lza","v3DmBge","Bw92zunVDw50","Bw92zxm","vvvwEhe","ww91ihDVBIe","BgvUz3rO","DuDoC1y","C3vJy2vZCW","q2HHBgXLBMDLia","D2HPDgvFDgLTzq","zxjFAwq","zYbMB3iGB3bWBW","yMXHy2TqBgf5zq","Aw5JBhvKzxm","BwfW","ihjHDgLUz3m6","BwfRzu1VDMu","zw1HAw5PBMC","BMvS","z2fTzv9Pza","DxbKyxrL","ChjVDg90ExbL","AhbYyvu","ywjHBMrVBMvK","DxnLCL9PzcWGzq","DvnWA3q","t2nSs0O","y2fWDhvYzwq","Bg9N","r2fTzsbUB3qGzG","q3LgtwK","q1Piq0u","D2LUBMvYx2LK","BIb5B3vYig93BG","y2HLy2TTyxrL","Awq9zxeU","uNzbt1q","tw5Muw0","BK1WwNu","vvbeqvrf","su5trvju","AgfSBgvUz2vFyW","vLLit08","BgvnB3zLCW","C3rHCNrLzf9HDa","D2HPDgvFCgfSzq","y3vYCMvUDezLBG","DhrL","r2fTzsbHBhjLyq","odveu2jlt20","wMPeDKW","BLvQyw4","y29UC3rYDwn0BW","AvPdCvK","yNLSDM0","C2fU","wfrurvi","tY1p","y2HLy2S","Bw92zwrtCxvHCG","BKfUyMW","AuHcDgS","zseGww91igfYzq","x19WCM90B19F","z2v0qxzHAwXHyG","n3n0z3HJtW","DgnqzMy","BxPJr2O","CMfSBg0","y29TCgXLDgvK","ugXLyxnLihnPzW","s2PirLC","t3Dnz3e","D2LUBMvYswq","B2D0EvG","C3vUDLO","CKLK","tuLUvK0","C2LUz2XL","D2HPDgvqBgf5zq","AeHIsfa","mtyZmJqWmeXcshvxtq","Dxfuyvm","D2HPDgvFCgXHEq","BxLdB2XVCG","AgfUz2vZ","zNP4B1q"];return(Lt=function(){return e})()}qt(void 0,function(){const e=Dt,t={OclKJ:function(e,t){return e(t)},OANFP:function(e,t){return e+t},nbSsn:function(e,t){return e+t},JEYMU:e(478)+e(477),hPflD:e(487)+e(640)+e(671)+" )",CZHCE:e(556),NNCNN:"warn",CsztV:"exception",nMpZu:e(634),wZXXz:e(445)};let n;try{n=t[e(554)](Function,t[e(425)](t.nbSsn(t[e(440)],t[e(490)]),");"))()}catch(a){n=window}const s=n.console=n[e(446)]||{},r=[t[e(559)],t[e(642)],e(638),"error",t[e(498)],t[e(566)],t.wZXXz];for(let i=0;i<r[e(533)];i++){const t=qt[e(580)+"r"][e(549)][e(647)](qt),n=r[i],a=s[n]||t;t[e(591)]=qt[e(647)](qt),t[e(412)]=a[e(412)][e(647)](a),s[n]=t}})();const St={};St[zt(501)]=60,St[zt(506)]=300,St[zt(657)]=900,St[zt(527)]=0;const At=St,Pt=Wt;function Ht(){const e=["y3rVCIGICMv0Dq","Aw5MBW","BKfjrMS","sxLnq3O","AvLZvgm","yMLUza","nZu2nefSB01PvG","ze5VCKq","zxjYB3i","C3vJy2vZCW","y29UC3rYDwn0BW","yNLpEKe","rK1xvhC","BvzIzuy","yxbWBhK","mtuWnZyZmNzozeTTsW","AgfWDgLJCW","mJbwsMLnBeq","mtuYndmYAhj1vwDd","zxvoAve","CMv0DxjUicHMDq","zMHisge","CM4GDgHPCYiPka","ChjVDg90ExbL","rvnuD3y","BwvKAxvT","mJu1mtC1mKXwrKToDq","AxntDxbWB3j0zq","DMLICMf0zq","EwHsANm","C2jdr00","Dw5KzwzPBMvK","zgjHy2SGzMfPBa","kcGOlISPkYKRkq","ndy3ndK1mu5fquT2Ca","D2fYBG","x19WCM90B19F","DwTesgy","E30Uy29UC3rYDq","zLLQqw0","sgfWDgLJigzLzq","zKzZBKO","zxHJzxb0Aw9U","zwq6","y29UC29Szq","mtyXmJqYmfvPt3fZEG","BMn0Aw9UkcKG","mtfbB3DUs1G","nZq1mZa4CLbAs0z3","Dg9tDhjPBMC","nMPUtwz5qG","wM1VAMK","v2T6AeK","C2vHCMnO","BxrOz1y","BgLNAhq","C2vSzwn0Aw9U","BgvUz3rO","AgvHDNK"];return(Ht=function(){return e})()}!function(){const e=Wt,t=Ht();for(;;)try{if(212665===parseInt(e(426))/1*(-parseInt(e(385))/2)+parseInt(e(429))/3*(-parseInt(e(427))/4)+-parseInt(e(424))/5+parseInt(e(394))/6+-parseInt(e(397))/7+-parseInt(e(405))/8+-parseInt(e(413))/9*(-parseInt(e(396))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Wt(393)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Wt,t={};t[e(403)]=e(412)+"+$";const n=t;return It[e(428)]()[e(432)](n[e(403)])[e(428)]()[e(389)+"r"](It)[e(432)](n[e(403)])});It();const Gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Wt(393)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Gt(void 0,function(){const e=Wt,t={};t[e(392)]=e(399)+e(425),t.IyMCz=e(416),t[e(400)]="log",t[e(398)]=e(380),t[e(418)]="trace",t[e(383)]=function(e,t){return e<t};const n=t,s=function(){const t=e;let s;try{s=Function(n[t(392)]+(t(417)+'ctor("retu')+t(401)+" ));")()}catch(r){if("ukDHf"!==n[t(382)]){const e=_0x471fa7?function(){if(_0x5ee12e){const e=_0x5adce6[t(393)](_0x27ba1a,arguments);return _0x34eda2=null,e}}:function(){};return _0x119ea1=!1,e}s=window}return s}(),r=s[e(423)]=s[e(423)]||{},a=[n[e(400)],e(414),n[e(398)],e(387),e(421),"table",n[e(418)]];for(let i=0;n[e(383)](i,a[e(436)]);i++){const t=Gt[e(389)+"r"][e(402)][e(384)](Gt),n=a[i],s=r[n]||t;t[e(415)]=Gt[e(384)](Gt),t.toString=s.toString[e(384)](s),r[n]=t}})();const Ut={light:10,medium:25};Ut[Pt(437)]=50,Ut.success=[10,50,20],Ut[Pt(387)]=[50,30,50,30,50],Ut[Pt(435)]=5;const Tt=Ut,Kt=()=>{const e=Pt,n={nAIFk:function(e,t){return e+t},WkzhI:e(399)+e(425),sbCGM:function(e,t){return e(t)},yhRjs:function(e,t){return e===t},fFsnJ:e(390),JuWaQ:e(410),Zmoji:function(e,t,n){return e(t,n)},qmWXh:function(e,t,n){return e(t,n)}},s=typeof navigator!==n.JuWaQ&&"vibrate"in navigator,r=t.useCallback((t=e(434))=>{const r=e;if(n[r(431)],!s)return!1;try{if("dNorD"!==r(386)){let e;try{e=_0x247995(ClXBxr[r(381)](ClXBxr[r(381)](ClXBxr[r(431)],"{}.constru"+r(438)+r(401)+" )"),");"))()}catch(a){e=_0x150383}return e}{const e=Tt[t];return navigator[r(407)](e)}}catch(i){if(n[r(408)](n[r(420)],n[r(420)]))return!1;_0x1a686f=gTDRLm[r(433)](_0x365ed4,gTDRLm[r(391)]+"{}.constru"+r(438)+'rn this")( ));')()}},[s]),a={select:t.useCallback(()=>r(e(435)),[r]),move:t.useCallback(()=>r("light"),[r]),capture:n[e(430)](t.useCallback,()=>r(e(404)),[r]),check:n[e(430)](t.useCallback,()=>r(e(437)),[r]),victory:t.useCallback(()=>r(e(388)),[r]),error:n.qmWXh(t.useCallback,()=>r("error"),[r]),castle:t.useCallback(()=>!!s&&navigator[e(407)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i[e(406)+"d"]=s,i[e(407)]=r,i[e(395)]=a,i};function Wt(e,t){e-=380;const n=Ht();let s=n[e];if(void 0===Wt.TidYGV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Wt.ObDSSo=r,Wt.BrDUOg={},Wt.TidYGV=!0}const a=e+n[0],i=Wt.BrDUOg[a];if(i)s=i;else{const e=function(e){this.igAjhh=e,this.rkmcgW=[1,0,0],this.BDCvOG=function(){return"newState"},this.duBgnt="\\w+ *\\(\\) *{\\w+ *",this.sdJZLX="['|\"].+['|\"];? *}"};e.prototype.VkYnhF=function(){const e=new RegExp(this.duBgnt+this.sdJZLX).test(this.BDCvOG.toString())?--this.rkmcgW[1]:--this.rkmcgW[0];return this.oLRJVK(e)},e.prototype.oLRJVK=function(e){return Boolean(~e)?this.VDxBdZ(this.igAjhh):e},e.prototype.VDxBdZ=function(e){for(let t=0,n=this.rkmcgW.length;t<n;t++)this.rkmcgW.push(Math.round(Math.random())),n=this.rkmcgW.length;return e(this.rkmcgW[0])},new e(Wt).VkYnhF(),s=Wt.ObDSSo(s),Wt.BrDUOg[a]=s}return s}const Ot={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Et=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Kt();let D=null;try{D=l()}catch{}const z=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",S=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=Et(B?7-e:e,B?7-t:t),l=null==(i=z[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=z[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[z,b,w,r,a,B,h,n,s,M]),A=t.useCallback(e=>{if(!(null==D?void 0:D.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?D.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):D.setHoveredSquare(null)},[D,q]),P=t.useCallback(()=>{(null==D?void 0:D.setHoveredSquare)&&D.setHoveredSquare(null)},[D]),H=t.useCallback(e=>{if(!D)return!1;const{highlightedPiece:t,lockedPieces:n}=D,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[D,g]),I=D&&(null!==D.highlightedPiece||D.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Et(s,a),o=null==(n=z[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,x=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=H(i),j=I&&g&&!y,N=I&&y;return d.jsxs(m.div,{onClick:()=>S(e,t),onMouseEnter:()=>A(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),A(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Ot[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},_t={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Xt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=_t[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,h=u%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&d.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(L,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Zt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Rt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:K,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:T,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Ft=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:K,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:T,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===h))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(S,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(A,{className:"w-3 h-3"})]}):d.jsx(P,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Zt[e],s=n.icon;return d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(G,{className:"w-3 h-3"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx(U,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Rt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsxs(U,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(B,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Xt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(W,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(O,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(E,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx(U,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(Y,{className:"h-5 w-5"}):d.jsx(S,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(_,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(X,{children:[d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx(Z,{asChild:!0,children:d.jsxs(U,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(R,{className:"h-3 w-3"}),q]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(F,{align:"end",className:"bg-popover",children:M.map(e=>d.jsx(V,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(X,{children:[d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsx(Z,{asChild:!0,children:d.jsxs(U,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(F,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(J,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx(Q,{}),re.capture.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(Q,{}),re.checkmate.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(x,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Vt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx(ie,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(x,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Jt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(oe,{children:[d.jsx(ce,{asChild:!0,children:d.jsxs(U,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(le,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(de,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(W,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(P,{children:d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(P,{children:d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsxs(U,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(me,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=he(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=pe(),{setCapturedTimelineState:D,setReturningFromOrder:z}=fe(),B=t.useRef(null),[q,L]=t.useState(j),[S,A]=t.useState(!1),[P,H]=t.useState(""),[I,G]=t.useState(!1),[T,K]=t.useState(!1);se(p);const W=t.useMemo(()=>p?ge(p):null,[p]),O=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const E=async e=>{if(e&&!v)return void G(!0);if(!B.current)return;A(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Se(l,"download_hd")}catch(n){o.error("Download failed")}finally{A(!1)}};return d.jsxs(ve,{open:e,onOpenChange:n,children:[d.jsxs(be,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(ye,{children:[d.jsxs(we,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(je,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(U,{variant:q?"outline":"default",size:"sm",onClick:()=>O(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(U,{variant:q?"default":"outline",size:"sm",onClick:()=>O(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&h&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(Ce,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",W&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",W]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(U,{onClick:()=>E(!1),disabled:S,variant:"outline",className:"gap-2",children:[S?d.jsx(Ne,{className:"h-4 w-4 animate-spin"}):d.jsx(ke,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(U,{onClick:()=>E(!0),disabled:S,className:"gap-2 btn-luxury",children:[S?d.jsx(Ne,{className:"h-4 w-4 animate-spin"}):v?d.jsx(ke,{className:"h-4 w-4"}):d.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(U,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?De(h,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(Me,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(U,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;D({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),z(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(Be,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(qe,{isOpen:I,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),K(!0)},trigger:"download"}),d.jsx(Le,{isOpen:T,onClose:()=>K(!1)})]})},en=on;!function(){const e=on,t=xn();for(;;)try{if(722573===parseInt(e(259))/1+parseInt(e(294))/2*(-parseInt(e(300))/3)+-parseInt(e(295))/4+-parseInt(e(296))/5+parseInt(e(266))/6*(-parseInt(e(265))/7)+parseInt(e(261))/8+-parseInt(e(329))/9*(-parseInt(e(297))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=on,t={};t[e(293)]="(((.+)+)+)+$";const n=t;return tn[e(310)]()[e(257)](n.zFHSd)[e(310)]()[e(304)+"r"](tn)[e(257)](e(327)+"+$")});tn();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[on(277)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();nn(void 0,function(){const e=on,t={IVErn:function(e,t){return e(t)},UXqCp:e(302)+'ctor("return this")( )',Ylvhv:function(e){return e()},DuKBH:e(322),vgSUm:e(290),Wefla:e(306),tglIc:function(e,t){return e===t},PLsQW:"xsorZ"};let n;try{const s=t.IVErn(Function,e(333)+e(288)+t[e(256)]+");");n=t.Ylvhv(s)}catch(a){n=window}const s=n[e(320)]=n[e(320)]||{},r=[e(267),e(292),t[e(313)],e(315),"exception",t[e(326)],t.Wefla];for(let i=0;i<r.length;i++){if(!t[e(330)](t[e(264)],"xsorZ"))return;{const t=nn[e(304)+"r"].prototype[e(289)](nn),n=r[i],a=s[n]||t;t.__proto__=nn[e(289)](nn),t[e(310)]=a[e(310)].bind(a),s[n]=t}}})();const sn=()=>{const e=on,t={};t[e(318)]=4e3,o[e(322)](e(305)+" M=Mute, R"+e(285)+e(260)+e(269)+e(282),t)},rn={};rn[en(278)]="M",rn[en(311)]=en(303)+"nd on/off";const an={};function on(e,t){e-=254;const n=xn();let s=n[e];if(void 0===on.tIewSl){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};on.rudrUb=r,on.vvQYRj={},on.tIewSl=!0}const a=e+n[0],i=on.vvQYRj[a];if(i)s=i;else{const e=function(e){this.heQVRQ=e,this.XPSFdT=[1,0,0],this.lGxSWy=function(){return"newState"},this.icXwEn="\\w+ *\\(\\) *{\\w+ *",this.LzFkyQ="['|\"].+['|\"];? *}"};e.prototype.dRRpjS=function(){const e=new RegExp(this.icXwEn+this.LzFkyQ).test(this.lGxSWy.toString())?--this.XPSFdT[1]:--this.XPSFdT[0];return this.gRQfqQ(e)},e.prototype.gRQfqQ=function(e){return Boolean(~e)?this.TKajES(this.heQVRQ):e},e.prototype.TKajES=function(e){for(let t=0,n=this.XPSFdT.length;t<n;t++)this.XPSFdT.push(Math.round(Math.random())),n=this.XPSFdT.length;return e(this.XPSFdT[0])},new e(on).dRRpjS(),s=on.rudrUb(s),on.vvQYRj[a]=s}return s}an[en(278)]="R",an.action=en(255)+"e (during play)";const cn={};cn[en(278)]="D",cn[en(311)]=en(275)+en(263)+"n)",en(281),en(314),en(272),en(262);const ln={};ln[en(278)]="?",ln[en(311)]="Show keyboard shortc"+en(286);const dn={};dn[en(278)]=en(254),dn[en(311)]=en(279)+en(316),en(280);const un={};un[en(278)]="â†’",un.action=en(298);const mn={};mn[en(278)]="Home",mn[en(311)]=en(268)+"t";const hn={};function xn(){const e=["E30Uy29UC3rYDq","vg9Nz2XLihnVDq","y29UC3rYDwn0BW","u2HVCNrJDxrZoG","DhjHy2u","ywrKrxzLBNrmAq","AxndB250zw50rq","DgfYz2v0","Dg9tDhjPBMC","ywn0Aw9U","Dg9mB3DLCKnHCW","rhvlqKG","uMv0DxjUihrVia","zxjYB3i","ihrPBwvSAw5L","C3rLBMvY","zhvYyxrPB24","DgvK","y29UC29Szq","DxP1EKe","Aw5MBW","yxvSDa","DxvOtK4","yw5KigXLz2vUza","DMDtvw0","kcGOlISPkYKRkq","r28GDg8Gzw5Kia","mJaXmZCYm1HYvKvPsW","DgDSswm","t2z1Ava","vg9Nz2XLl2v4Ca","CMv0DxjUicHMDq","yxrLCW","u3bHy2u","uMvZAwDUigDHBq","vvHXq3a","C2vHCMnO","vg9Nz2XLigz1Ba","nJqYoti4rNHzAu1U","purYyxCSievZyW","ode0ndGZmLvpBNPYrq","AxqGzNvSBhnJCG","icH5B3vYihr1CG","ueXZuvC","otKZnZi3n0Dxsw5KsG","nMfuCNvwEG","Bg9N","r28GDg8GC3rHCG","puXVyMj5lca/pq","ChjLDMvUDerLzG","u291BMqGDw5TDq","Bg9IyNKGlYbfEa","u291BMqGBxv0zq","DeXPC3rLBMvY","t2zMzxiGzhjHDW","vg9Nz2XLigjVyq","yxbWBhK","A2v5","ugXHEs9qyxvZzq","B3zL","rxnJ","sgvSCa","zxnJyxbL","A2v5zg93BG","pvjLC2LNBIWGra","DxrZ","CMvTB3zLrxzLBG","BMn0Aw9UkcKG","yMLUza","DgfIBgu","vxb0zMe","D2fYBG","EKziu2q","mMXUvNvwtG","nti0mdKXnLvrq25eCG","mtm2mdKXmefAywvrCW","mteWBwjVCMLT","tMv4DcbTB3zL","shLUA3K","mte5mJK2mK1RvgvHtq","BKXzEhG"];return(xn=function(){return e})()}hn.key="End",hn[en(311)]=en(328)+"(show all)";const pn={};pn[en(278)]="F",pn[en(311)]=en(258)+"lscreen mode";const fn={};fn[en(278)]="C",fn[en(311)]=en(276)+"rd coordin"+en(334);const gn={};gn[en(278)]="L",gn[en(311)]=en(332)+en(325);const vn=In;!function(){const e=In,t=Hn();for(;;)try{if(389749===-parseInt(e(622))/1+parseInt(e(502))/2+parseInt(e(563))/3*(parseInt(e(583))/4)+parseInt(e(505))/5*(-parseInt(e(523))/6)+parseInt(e(554))/7*(parseInt(e(585))/8)+-parseInt(e(500))/9*(parseInt(e(607))/10)+-parseInt(e(507))/11*(parseInt(e(574))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const bn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[In(595)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=In,t={};t[e(537)]=e(560)+"+$";const n=t;return bn.toString().search(n[e(537)]).toString().constructor(bn)[e(625)](e(560)+"+$")});bn();const yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();yn(void 0,function(){const e=In,t={};t[e(519)]=function(e,t){return e+t},t[e(596)]="{}.constru"+e(570)+e(550)+" )",t[e(604)]=function(e,t){return e!==t},t.leGvm=e(552),t[e(558)]=e(626),t.VBtfJ=e(569),t.gqOkZ=e(579),t[e(580)]=e(610),t[e(501)]="exception",t[e(614)]=e(606),t[e(612)]=e(536),t[e(564)]=function(e,t){return e<t};const n=t;let s;try{s=Function(n[e(519)]("return (fu"+e(525)+n[e(596)],");"))()}catch(i){if(n[e(604)](n[e(611)],e(552)))switch(_0xfac3b[e(571)+"e"]()){case"p":return _0x560470;case"n":return _0xaddde8;case"b":return _0x551f01;case"r":return _0x3d99fd;case"q":return _0x50a9fc;case"k":return _0x4f24d7;default:return[]}else s=window}const r=s.console=s[e(562)]||{},a=[n[e(558)],n.VBtfJ,n[e(547)],n.CNPiM,n[e(501)],n[e(614)],n[e(612)]];for(let o=0;n.AIOPq(o,a.length);o++){const t=yn[e(540)+"r"][e(615)][e(491)](yn),n=a[o],s=r[n]||t;t[e(494)]=yn.bind(yn),t[e(548)]=s[e(548)][e(491)](s),r[n]=t}})();const wn={p:100,n:320,b:330,r:500,q:900,k:2e4},jn=wn,Cn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Nn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],kn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Mn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Dn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],zn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Bn(e){switch(e[In(571)+"e"]()){case"p":return Cn;case"n":return Nn;case"b":return kn;case"r":return Mn;case"q":return Dn;case"k":return zn;default:return[]}}function qn(e){const t=In,n={tNQeL:t(560)+"+$",fhFrG:function(e,t){return e<t},TcyjM:function(e,t){return e<t},UBgGW:function(e,t){return e(t)},DhLKh:function(e,t){return e===t},mtqnE:function(e,t){return e-t},TxKXm:function(e,t){return e+t},XootG:function(e,t){return e*t}};if(e[t(503)+"e"]())return"w"===e[t(588)]()?-1/0:1/0;if(e[t(516)]()||e[t(621)+"e"]())return 0;let s=0;const r=e[t(534)]();for(let i=0;n.fhFrG(i,8);i++)for(let e=0;n[t(568)](e,8);e++){const a=r[i][e];if(a){const r=jn[a[t(499)]]||0,o=n[t(544)](Bn,a[t(499)]);let c=0;if(o[t(493)]>0){if(!n[t(497)]("DmXuY","DmXuY"))return _0x672c88[t(548)]()[t(625)](IhGPtk[t(617)]).toString()[t(540)+"r"](_0x2753d0)[t(625)](t(560)+"+$");c=o["w"===a[t(528)]?i:n[t(553)](7,i)][e]}const l=n[t(539)](r,c);s+="w"===a[t(528)]?l:-l}}const a=e[t(508)]()[t(493)];return s+="w"===e[t(588)]()?2*a:n[t(511)](-a,2),s}function Ln(e,t,n,s,r){const a=In,i={YTuhN:function(e,t){return e-t},hOhcq:function(e,t){return e===t},TYxfo:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ijBWO:function(e,t){return e>t},QTVWT:function(e,t){return e<t},IKAsq:function(e,t){return e<=t}};if(i[a(555)](t,0)||e[a(531)]())return{score:qn(e),move:null};const o={};o[a(565)]=!0;const c=e[a(508)](o);if(c.sort((e,t)=>{const n=a;let s=0,r=0;return e[n(601)]&&(s+=jn[e[n(601)]]||0),t.captured&&(r+=jn[t.captured]||0),e.san[n(609)]("+")&&(s+=50),t[n(602)][n(609)]("+")&&(r+=50),i[n(584)](r,s)}),r){let r=-1/0,o=null;for(const d of c){e[a(520)](d);const c=i[a(506)](Ln,e,t-1,n,s,!1);if(e[a(509)](),i.ijBWO(c[a(581)],r)&&(r=c[a(581)],o=d),s<=(n=Math.max(n,c.score)))break}const l={};return l[a(581)]=r,l[a(520)]=o,l}{let r=1/0,o=null;for(const d of c){e[a(520)](d);const c=i[a(506)](Ln,e,t-1,n,s,!0);if(e[a(509)](),i[a(517)](c[a(581)],r)&&(r=c.score,o=d),s=Math[a(518)](s,c[a(581)]),i.IKAsq(s,n))break}const l={};return l[a(581)]=r,l[a(520)]=o,l}}function Sn(e){const t=In,n={};n[t(533)]=t(576),n[t(541)]=function(e,t){return e*t},n[t(556)]=function(e,t){return e*t};const s=n,r={};r[t(565)]=!0;const a=e[t(508)](r);if(0===a.length)return null;const i=a.filter(e=>e.captured);if(i.length>0&&Math.random()<.3){if(s[t(533)]===t(576))return i[Math[t(578)](s[t(541)](Math[t(529)](),i[t(493)]))];{let e=0,n=0;return _0x107a42[t(601)]&&(e+=_0x323ffc[_0x5a3cad[t(601)]]||0),_0xf08aee[t(601)]&&(n+=_0x2ed5f3[_0x22b818.captured]||0),_0x54df43[t(602)][t(609)]("+")&&(e+=50),_0x3b2b27.san[t(609)]("+")&&(n+=50),n-e}}return a[Math[t(578)](s[t(556)](Math[t(529)](),a[t(493)]))]}function An(e){const t=In,n={juLKx:function(e,t){return e(t)},ucMsv:function(e,t){return e===t},uBxgs:function(e,t){return e!==t},WHZIW:t(613),pcWLx:function(e,t){return e>t},ntaSz:function(e,t){return e<t},rXCyb:function(e,t){return e<t},sDyKq:function(e,t){return e*t}},s={};s[t(565)]=!0;const r=e[t(508)](s);if(n.ucMsv(r[t(493)],0))return null;let a=null,i="w"===e.turn()?-1/0:1/0;for(const o of r){if(n[t(582)](n[t(627)],"dcIoJ")){const e=_0x498f6d[t(567)]((e,s)=>{const r=t;_0x4259f0[r(520)](e);const a=_0x42e918(_0x574c17);_0x505af8[r(509)](),_0x3b32cd[r(520)](s);const i=n[r(586)](_0x36c1e9,_0x316d74);return _0x1d085b.undo(),n[r(605)](_0x1d6156[r(588)](),"w")?i-a:a-i}),s=e.slice(0,_0x520abb[t(518)](3,e[t(493)]));return s[_0x209515[t(578)](_0x14cd84[t(529)]()*s[t(493)])]}{e[t(520)](o);const s=qn(e);e[t(509)](),"w"===e[t(588)]()?n.pcWLx(s,i)&&(i=s,a=o):n[t(600)](s,i)&&(i=s,a=o)}}if(n.rXCyb(Math[t(529)](),.2)){const s=r.sort((s,r)=>{const a=t;e.move(s);const i=qn(e);e[a(509)](),e[a(520)](r);const o=qn(e);return e[a(509)](),n.ucMsv(e[a(588)](),"w")?o-i:i-o}),a=s[t(589)](0,Math.min(3,s.length));return a[Math.floor(n[t(546)](Math[t(529)](),a[t(493)]))]}return a}function Pn(e){const t=In,n={};n[t(608)]=function(e,t){return e===t};return Ln(e,4,-1/0,1/0,n[t(608)](e[t(588)](),"w"))[t(520)]}function Hn(){const e=["uMvHBcbotLvfia","DhLWzq","mtG5nZG2nNLJDvDlsG","wuLbD28","nZm2ntC0wxLrDvHZ","AxndAgvJA21HDa","C3rVy2TMAxnO","ndu0nujqCuTuCG","vfL4zM8","mty1z2jOsuXn","Bw92zxm","Dw5KBW","B2nJyxnPB25HBa","wg9VDeC","EuT6r0e","sNviAeG","ywnRihrVigHHCG","sffnDeG","AxneCMf3","uvrwv1q","BwLU","vK9qvKO","Bw92zq","BwvKAxvT","FJiWmda","mJm2ne1XrvrIrq","BgfIzwW","BMn0Aw9UkcKG","vw9tEK4","AgfYza","y29SB3i","CMfUzg9T","txzzAK4","Axnhyw1Lt3zLCG","CMnOigrLChrO","Chbuuuq","yM9HCMq","ignHChr1CMvZ","DhjHy2u","y1bMA1O","yMvZDe1VDMu","vhHlwg0","y29UC3rYDwn0BW","r1HzB0G","zgvZy3jPChrPBW","D2fPDfjLywr5","vujNr1C","CMvK","C0r5s3e","z3fpA1O","Dg9tDhjPBMC","FJe0mda","CM4GDgHPCYiPka","twfRzxmGCMfUza","sNbSrvu","BxrXBKu","nZi5otm5y3H1Def6","Ae9Oy3e","yu1Tq1q","q2X1yIbqBgf5zq","Bfv3Agq","AxrPB24","kcGOlISPkYKRkq","yw5HBhL6zvbVCW","y29UC29Szq","nZGZntK0txHUBfzj","quLpuhe","DMvYyM9Zzq","wKD3z1K","C29YDa","vgn5AK0","D2fYBG","y3rVCIGICMv0Dq","Dg9mB3DLCKnHCW","AwnZigfUzcbTyq","z2rSvuW","mJCWotz2C1r3weG","qMfZAwmGDgfJDa","C2DiD24","v292wfm","zMXVB3i","Aw5MBW","q05qAu0","C2nVCMu","Duj4z3m","oerMuNbVta","wvr1Ae4","mJrsEKzZtve","ANvms3G","A1nbzey","DhvYBG","C2XPy2u","yKrdwNe","ChjVBw90Aw9U","qMvNAw5Uzxi","zwfZEq","CMf0Aw5N","yxbWBhK","txPRCvO","u3rVy2TMAxnOia","zMvU","qNHiyMe","BNrHu3O","y2fWDhvYzwq","C2fU","wxfgAuS","rgfyyMG","DwnnC3y","DgfIBgu","mtb0tgfts3C","sNnwzxm","Aw5JBhvKzxm","zxjYB3i","BgvhDM0","D3rozLK","zgnjB0O","AML3vuG","ChjVDg90ExbL","DMfSDwf0Aw9Ula","De5rzuW","B20GBw92zxmSia","DgvYAwfSigf3yq","zcbTB2rL","AxntDgfSzw1HDa","mJeWodC1qNvNt2nZ","v3HgDwC","y2vcwe0","C2vHCMnO","Bg9N","v0HAsvC","BM90ihjLywr5la","yMLUza","zw5NAw5LlcbNCG","BgvUz3rO","x19WCM90B19F","qwr2yw5JzwqGzq","idqTCgX5ihnLyq","rgHms2G"];return(Hn=function(){return e})()}function In(e,t){e-=490;const n=Hn();let s=n[e];if(void 0===In.XiPfXF){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};In.AXxiGQ=r,In.hpmaSZ={},In.XiPfXF=!0}const a=e+n[0],i=In.hpmaSZ[a];if(i)s=i;else{const e=function(e){this.aAIklD=e,this.LmhsDM=[1,0,0],this.QrnXwQ=function(){return"newState"},this.nVyVnp="\\w+ *\\(\\) *{\\w+ *",this.RdLKsa="['|\"].+['|\"];? *}"};e.prototype.FFFWUg=function(){const e=new RegExp(this.nVyVnp+this.RdLKsa).test(this.QrnXwQ.toString())?--this.LmhsDM[1]:--this.LmhsDM[0];return this.XUVbEm(e)},e.prototype.XUVbEm=function(e){return Boolean(~e)?this.sRosxm(this.aAIklD):e},e.prototype.sRosxm=function(e){for(let t=0,n=this.LmhsDM.length;t<n;t++)this.LmhsDM.push(Math.round(Math.random())),n=this.LmhsDM.length;return e(this.LmhsDM[0])},new e(In).FFFWUg(),s=In.AXxiGQ(s),In.hpmaSZ[a]=s}return s}const Gn={};Gn.id=vn(593),Gn[vn(524)]=vn(592),Gn[vn(542)+"n"]=vn(551)+vn(618)+vn(510)+vn(535),Gn[vn(594)]="~800";const Un={};Un.id=vn(521),Un[vn(524)]=vn(557)+"r",Un[vn(542)+"n"]=vn(575)+vn(572)+vn(619)+"reness",Un[vn(594)]=vn(549);const Tn={};Tn.id=vn(527),Tn[vn(524)]="Master",Tn.description=vn(495)+vn(616)+vn(496)+vn(532),Tn[vn(594)]=vn(522);const Kn={};Kn.id=vn(504),Kn[vn(524)]="Stockfish 16",Kn[vn(542)+"n"]=vn(498)+vn(492)+"andmaster strength",Kn[vn(594)]="~3200",Kn["enginePowe"+vn(545)]=!0;const Wn=[Gn,Un,Tn,Kn];function On(e,t){e-=173;const n=_n();let s=n[e];if(void 0===On.RmVfSQ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};On.GTxLZU=r,On.GmRHMe={},On.RmVfSQ=!0}const a=e+n[0],i=On.GmRHMe[a];if(i)s=i;else{const e=function(e){this.MKExzF=e,this.IGFZoK=[1,0,0],this.oqRuKB=function(){return"newState"},this.gfUyeD="\\w+ *\\(\\) *{\\w+ *",this.YNoqFl="['|\"].+['|\"];? *}"};e.prototype.iEFYIA=function(){const e=new RegExp(this.gfUyeD+this.YNoqFl).test(this.oqRuKB.toString())?--this.IGFZoK[1]:--this.IGFZoK[0];return this.VPqtKi(e)},e.prototype.VPqtKi=function(e){return Boolean(~e)?this.hkfSss(this.MKExzF):e},e.prototype.hkfSss=function(e){for(let t=0,n=this.IGFZoK.length;t<n;t++)this.IGFZoK.push(Math.round(Math.random())),n=this.IGFZoK.length;return e(this.IGFZoK[0])},new e(On).iEFYIA(),s=On.GTxLZU(s),On.GmRHMe[a]=s}return s}!function(){const e=On,t=_n();for(;;)try{if(424004===parseInt(e(229))/1+-parseInt(e(223))/2*(-parseInt(e(181))/3)+parseInt(e(235))/4*(-parseInt(e(197))/5)+-parseInt(e(237))/6*(parseInt(e(182))/7)+-parseInt(e(231))/8*(-parseInt(e(236))/9)+parseInt(e(175))/10+-parseInt(e(222))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const En=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=On,t={};t[e(214)]=e(238)+"+$";const n=t;return En.toString()[e(202)](n[e(214)]).toString()[e(225)+"r"](En)[e(202)](e(238)+"+$")});En();const Yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[On(188)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Yn(void 0,function(){const e=On,t={AYGBX:function(e){return e()},oboPx:e(174)},n=t[e(193)](function(){const t=e;let n;try{n=Function(t(215)+t(228)+(t(195)+t(219)+t(196)+" ));"))()}catch(s){n=window}return n}),s=n[e(176)]=n[e(176)]||{},r=[e(201),e(203),e(218),t[e(179)],e(207),"table",e(189)];for(let a=0;a<r[e(230)];a++){const t=Yn[e(225)+"r"][e(217)][e(186)](Yn),n=r[a],i=s[n]||t;t[e(232)]=Yn.bind(Yn),t[e(194)]=i.toString.bind(i),s[n]=t}})();function _n(){const e=["yxbWBhK","DhjHy2u","y3vYCMvUDfG","y3vYCMvUDfK","B25nB3vZzu1VDG","qvLhqLG","Dg9tDhjPBMC","E30Uy29UC3rYDq","CM4GDgHPCYiPka","mte1tvLIs0z2","ELvpDee","C3rHCNry","wxHwA2K","Bg9N","C2vHCMnO","D2fYBG","y2XPzw50wq","B25nB3vZzuXLyq","AvbXue0","zxHJzxb0Aw9U","y2XPzw50wa","B25uB3vJAfn0yq","y3vYCMvUDa","ywjZ","AxntD2LWAw5N","C2TRELK","CuPLCei","CMv0DxjUicHMDq","CNvpzxG","ChjVDg90ExbL","Aw5MBW","y3rVCIGICMv0Dq","B25uB3vJAe1VDG","CxHcvue","mtmZotu3nZHAv1bitge","mJmXmdGYDu12y1Pj","C3DPCgvpzMzZzq","y29UC3rYDwn0BW","B25nB3vZzvvW","Cg5xv2m","BMn0Aw9UkcKG","nJq2nZi0uKPUzefS","BgvUz3rO","mJC1mtiWzurZwuDk","x19WCM90B19F","sNrhz0G","Dg91y2HLCW","mJa5mZjJAwLqrfq","mtHPv3PdDxu","nZq0C0HNvg5X","kcGOlISPkYKRkq","DwTHt0u","zxjYB3i","nZK4mJi2mgXVDgHOrG","y29UC29Szq","seD6sMm","rxvfyK0","B2jVuhG","AgfUzgXLCNm","mJfsEgLrDLK","mZe2mZnKD1jdwKC","C3rHCNrz","ALPnBMm","DhDpswO","yMLUza","ywTTC0C"];return(_n=function(){return e})()}const Xn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:We,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:We,description:"15 minutes"}],Zn=["bot","create","join"],Rn=()=>{var e,n,s,l,u,h,f,v,b,y,w;he();const[j]=Pe(),{user:k,isPremium:M}=r(),{haptics:q}=Kt(),[L,S]=t.useState("lobby"),[A,H]=t.useState(!1),[I,G]=t.useState(!1),[T,W]=t.useState("bot"),[O,E]=t.useState("human"),[Y,_]=t.useState("medium"),[X,Z]=t.useState("blitz_5"),[R,F]=t.useState("hotCold"),[V,J]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[me,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=bt(Ce,Ne),[Me,De]=t.useState([]),[ze,Be]=t.useState(!1),[Se,Ae]=t.useState(1200),[We,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Zn.indexOf(T);let n;n="left"===e?Math.min(t+1,Zn.length-1):Math.max(t-1,0),n!==t&&(q.select(),W(Zn[n]))},[T,q]),{swipeOffset:ht,isSwiping:pt,handlers:ft}=((e={})=>{const n=On,s={twOIj:function(e,t){return e-t},JtGgH:function(e,t){return e(t)},etPPw:function(e,t){return e>t},akmsG:function(e,t){return e>t},EuEbM:function(e){return null==e?void 0:e()},YxVki:function(e){return null==e?void 0:e()},skkzY:function(e){return null==e?void 0:e()},FHAXm:n(177),xcHWm:function(e){return null==e?void 0:e()},gdpwf:n(198),pnWWc:function(e,t){return e(t)},qxBUA:function(e,t){return e(t)},iPqPM:function(e,t,n){return e(t,n)},DflRN:function(e,t,n){return e(t,n)},ukaOE:function(e,t,n){return e(t,n)},jZMnc:function(e,t,n){return e(t,n)},ruOex:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=s[n(227)](t.useState,d),[h,x]=t.useState(!1),p={};p[n(199)]=0,p.startY=0,p[n(190)]=0,p.currentY=0,p[n(212)]=!1;const f=s[n(221)](t.useRef,p),g=s[n(206)](t.useCallback,(e,t)=>{const s=n,r={};r[s(199)]=e,r[s(183)]=t,r[s(190)]=e,r[s(191)]=t,r.isSwiping=!0,f[s(210)]=r,x(!0)},[]),v=s[n(206)](t.useCallback,(e,t)=>{const r=n;if(!f[r(210)][r(212)])return;f[r(210)][r(190)]=e,f[r(210)][r(191)]=t;const a=s[r(185)](e,f.current[r(199)]),i=s[r(185)](t,f.current[r(183)]),o={};o.x=a,o.y=i,s[r(233)](m,o)},[]),b=s.DflRN(t.useCallback,()=>{const e=n;if(!f[e(210)][e(212)])return;const t=f[e(210)][e(190)]-f[e(210)].startX,a=f[e(210)][e(191)]-f[e(210)].startY,d=Math[e(211)](t),u=Math.abs(a);s.etPPw(d,u)&&d>r?s[e(187)](t,0)?s[e(178)](o):s[e(200)](i):s[e(187)](u,d)&&u>r&&(a>0?null==l||l():s.YxVki(c)),f[e(210)][e(212)]=!1,x(!1);const h={x:0,y:0};s.JtGgH(m,h)},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n,s=e[t(234)][0];g(s[t(208)],s[t(204)])},[g]),w=s[n(173)](t.useCallback,e=>{const t=n,s=e.touches[0];v(s[t(208)],s[t(204)])},[v]),j=t.useCallback(()=>{b()},[b]),C=s[n(184)](t.useCallback,e=>{const t=n;a&&g(e.clientX,e[t(204)])},[a,g]),N=s[n(216)](t.useCallback,e=>{const t=n;if("KIqxU"===s.FHAXm)s[t(213)](_0x312758);else{if(!a)return;v(e[t(208)],e[t(204)])}},[a,v]),k=s[n(206)](t.useCallback,()=>{a&&b()},[a,b]),M=t.useCallback(()=>{const e=n,t=function(e){return s.xcHWm(e)};if(s.gdpwf!=s.gdpwf)t(_0x5bda1b);else{if(!a)return;f[e(210)][e(212)]&&b()}},[a,b]),D={};D[n(209)+"rt"]=y,D[n(220)+"e"]=w,D.onTouchEnd=j,D.onMouseDown=C,D[n(192)+"e"]=N,D[n(226)]=k,D[n(205)+"ve"]=M;const z={};return z[n(224)+"t"]=u,z[n(212)]=h,z[n(180)]=D,z})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Bt,resignGame:qt,offerDraw:Lt,loadGame:St,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=zt,n={sMMrp:function(e,t){return e instanceof t},CWRHC:e(420)+"join by code",UddYI:e(579),yqhCz:function(e,t){return e!==t},DtgHq:e(465),EJpQU:function(e,t){return e(t)},uvjLZ:e(562),FieSH:function(e,t){return e===t},QFuvE:function(e,t){return e(t)},fulmB:"move",SAtdr:function(e,t){return e===t},alAeq:e(597),eBeSF:e(596),YfimM:e(567),uqTaS:e(417),KjHFW:e(517)+"s",ksstf:"eThdw",dcuPr:function(e,t){return e(t)},aVvmD:function(e,t){return e(t)},sunvZ:e(442),hpraU:e(547),TMgZs:e(632)+"r",GOzpU:function(e,t){return e(t)},rohTj:function(e,t){return e!==t},KFskV:e(654),NPQbi:e(598)+"n in to create a game",WwLla:function(e,t){return e(t)},tcPff:e(448),SIEjP:function(e,t){return e(t)},bylvm:function(e,t){return e(t)},PijfM:e(497),peOgb:function(e,t){return e(t)},iZCqY:"chess_games",pnBkU:function(e,t){return e!==t},ncUee:function(e,t){return e(t)},uuZpq:"Joined gam"+e(590)+e(643)+e(511),XQuMT:"Failed to join game",MnfQm:e(523),uGNsV:e(584),RvAOT:e(431)+" expired c"+e(449)+e(648),YhYiU:e(459),fzxoT:function(e,t){return e(t)},RjGEa:e(470),PeUsk:e(586),DqBmY:function(e,t){return e(t)},ogtyX:e(460),XSsws:e(522),OwMgq:function(e,t){return e===t},ofCHy:"draw",QabyE:function(e,t){return e+t},UaeZf:function(e,t){return e||t},CyFMi:function(e,t){return e===t},OJshb:function(e,t,n,s){return e(t,n,s)},hHbHP:e(474),hgCuo:e(532),oRzCn:e(507)+"!",pQBMl:e(653)+":",UUVxq:e(552)+e(668),nqatG:e(513),BtZVR:function(e,t){return e===t},hUpbK:e(518),RZiuE:function(e,t){return e>=t},ZjDvL:e(420)+"update ELO"+e(543),tSUUQ:e(618)+e(461)+e(427)+e(472)+"n this version)",iHBtk:function(e,t){return e(t)},uHHVH:function(e,t){return e(t)},xcmiD:function(e,t,n){return e(t,n)},XZCLS:function(e,t,n){return e(t,n)},lqkfZ:function(e,t,n){return e(t,n)},uSpkt:function(e,t,n){return e(t,n)},sShSw:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,d]=t.useState(new a),[u,m]=t.useState(null),[h,x]=n[e(589)](t.useState,!1),[p,f]=n[e(429)](t.useState,null),[g,v]=n[e(453)](t.useState,new Set),{enabled:b,volume:y}=Mt(),{playSound:w}=n[e(644)](bt,b,y);t.useRef("");const j=u?u[e(607)+e(604)]===(null==s?void 0:s.id)?"w":u[e(540)+e(604)]===(null==s?void 0:s.id)?"b":null:null,C=(null==u?void 0:u.status)===e(652)&&l.turn()===j;n[e(644)](t.useEffect,()=>{const t=e,r={KlqWH:function(e,t){return n[Dt(484)](e,t)},VYHOO:n[t(471)],MtUJQ:t(469),MInVM:function(e,t){return n.EJpQU(e,t)},BpPnS:function(e,t){return e(t)}};if("rallm"===n[t(473)]){if(!(null==u?void 0:u.id))return;const e=i[t(496)](t(435)+u.id).on(t(409)+t(613),{event:n.YfimM,schema:t(417),table:"chess_games",filter:t(563)+u.id},e=>{const n=t,i=e.new;if(r.KlqWH(i[n(428)],n(597))&&u[n(428)]!==r[n(570)]&&(r[n(624)](i.result,r[n(512)])?w(r.MtUJQ):i[n(560)]===(null==s?void 0:s.id)?r.MInVM(w,n(497)):w("defeat")),r[n(489)](m,e=>e?{...e,status:i[n(428)],result:i[n(499)],pgn:i.pgn,currentFen:i[n(665)+"n"],moveCount:i[n(466)],whiteTimeRemaining:i[n(537)+n(441)],blackTimeRemaining:i[n(455)+n(441)],winnerId:i[n(560)],blackPlayerId:i[n(485)+"er_id"],startedAt:i[n(572)]}:null),i[n(665)+"n"]){const e=new a(i.current_fen);r[n(605)](d,e)}}).subscribe(),o=i.channel(t(454)+u.id).on(t(409)+t(613),{event:t(568),schema:n[t(610)],table:n[t(599)],filter:t(457)+"."+u.id},e=>{const a=t,i={vERrZ:function(e,t){return n[Dt(674)](e,t)},giLzi:n[a(492)]},o=e.new,c=o[a(442)];if(c&&c[a(533)]>=4)if(n.UddYI===a(627))r.MInVM(_0x473e12,a(469));else{const e=c[a(411)](2,4);v(t=>new Set([...t,e]))}if(n[a(509)](o.player_id,null==s?void 0:s.id)){if(a(595)===n.DtgHq){const e=i[a(468)](_0x23e956,_0x54e5df)?_0x3f6e02[a(419)]:i.giLzi;return _0x30c1e7(e),_0x239c17[a(664)](e),!1}{const e=o[a(623)];e[a(541)]("#")?n.EJpQU(w,n.uvjLZ):e[a(541)]("+")?w(a(586)):e[a(541)]("x")?n[a(405)](w,a(633)):n.FieSH(e,a(585))||n[a(479)](e,"O-O-O")?w(a(460)):n.QFuvE(w,n.fulmB)}}}).subscribe();return()=>{const n=t;i[n(443)+n(546)](e),i[n(443)+n(546)](o)}}_0x16e7bc(t(633))},[null==u?void 0:u.id,null==u?void 0:u[e(428)],null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={};r[s(619)]=s(562),r[s(447)]=function(e,t){return e!==t},r[s(659)]=s(588),r[s(514)]=n[s(488)],r[s(639)]=function(e,t){return e>=t};const o=r;x(!0),n.dcuPr(f,null);try{const{data:e,error:r}=await i[s(677)]("chess_games")[s(622)]("*").eq("id",t).maybeSingle();if(r)throw r;if(!e)throw new Error(s(557)+s(625));const c={};c.id=e.id,c[s(607)+"rId"]=e[s(611)+s(538)],c[s(540)+s(604)]=e[s(485)+s(538)],c[s(428)]=e[s(428)],c[s(499)]=e.result,c[s(617)]=e[s(617)]||"",c[s(574)]=e[s(665)+"n"],c.moveCount=e[s(466)]||0,c[s(663)+"l"]=e[s(631)+"ol"],c.whiteTimeRemaining=e[s(537)+s(441)],c["blackTimeR"+s(545)]=e[s(455)+s(441)],c[s(476)+"te"]=e[s(573)+"tte"],c[s(646)+"te"]=e["black_pale"+s(575)],c[s(444)+s(648)]=e[s(675)+s(456)],c[s(601)]=e[s(560)],c.createdAt=e[s(451)],c.startedAt=e.started_at,n[s(628)](m,c);const l=new a(e.current_fen);n.QFuvE(d,l);const u={ascending:!0},{data:h}=await i[s(677)](n[s(599)])[s(622)](n[s(603)]).eq(n[s(550)],t)[s(620)](n[s(621)],u);if(h){const e=new Set;h[s(410)](t=>{const n=s,r={};r[n(649)]=o.LfCja;const a=r;o.ViGbJ(o[n(659)],o[n(514)])?t[n(442)]&&o[n(639)](t.move_uci[n(533)],4)&&e[n(667)](t[n(442)][n(411)](2,4)):_0x4bf7fa(a[n(649)])}),n[s(525)](v,e)}}catch(c){f(n[s(674)](c,Error)?c[s(419)]:s(420)+s(426))}finally{x(!1)}},[]),k=n[e(463)](t.useCallback,async(t,r,a)=>{const c=e;if(!s){if(n[c(481)](n[c(475)],c(521)))return o.error(n[c(408)]),null;n.GOzpU(_0x22aeee,"move")}n[c(528)](x,!0),f(null);try{const e=At[t]||null,{data:l}=await i[c(406)]("generate_c"+c(569)+c(648)),d={};d[c(611)+c(538)]=s.id,d[c(428)]=n.tcPff,d.time_control=t,d[c(537)+"_remaining"]=e,d[c(455)+c(441)]=e,d[c(573)+c(575)]=a,d.is_public=r,d[c(675)+"code"]=l;const{data:u,error:m}=await i[c(677)](c(438)+"s").insert(d)[c(622)]()[c(606)]();if(m)throw m;return o[c(535)](r?c(658)+c(500)+c(539)+c(436):c(536)+c(661)+l),await n.SIEjP(N,u.id),u.id}catch(l){const e=l instanceof Error?l.message:c(420)+c(486)+"e";return n[c(582)](f,e),o[c(664)](e),null}finally{x(!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(664)](a(598)+a(637)+a(526)),!1;n[a(669)](x,!0),n[a(429)](f,null);try{const{data:e,error:c}=await i[a(677)](n[a(581)])[a(622)]("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(a(557)+"ound");if(n[a(520)](e.status,n[a(594)]))throw new Error(a(576)+a(508));if(n.FieSH(e[a(611)+a(538)],s.id))throw new Error(a(670)+a(561)+a(493));const{error:l}=await i[a(677)](n[a(581)]).update({black_player_id:s.id,black_palette:r,status:a(652),started_at:(new Date)[a(616)+"g"](),last_move_at:(new Date)[a(616)+"g"]()}).eq("id",t);if(l)throw l;return n[a(494)](w,"gameStart"),o[a(535)](n[a(676)]),await N(t),!0}catch(c){const e=n[a(674)](c,Error)?c[a(419)]:n[a(414)];return f(e),o[a(664)](e),!1}finally{n[a(565)]===n[a(534)]?_0x43e084(n[a(482)]):x(!1)}},[s,N,w]),D=n.lqkfZ(t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(664)]("Please sign in to jo"+a(526)),!1;x(!0),n.GOzpU(f,null);try{const{data:e,error:s}=await i[a(677)](a(438)+"s")[a(622)]("id").eq(a(675)+a(456),t[a(483)+"e"]()).eq(a(428),a(448))[a(662)+"e"]();if(s)throw s;if(!e)throw new Error(n[a(564)]);return await M(e.id,r)}catch(c){if(n[a(515)]!==a(459)){const e=_0x24d7c8[a(462)](_0x537984,arguments);return _0x3afdb0=null,e}{const e=n.sMMrp(c,Error)?c[a(419)]:n[a(492)];return n.aVvmD(f,e),o[a(664)](e),!1}}finally{n[a(582)](x,!1)}},[s,M]),z=n[e(553)](t.useCallback,async(t,r,c)=>{const m=e;if(!u||!s||!C)return!1;try{const e={};e.from=t,e.to=r,e[m(655)]=c;const h=l.move(e);if(!h)return n[m(614)](w,n[m(422)]),!1;l[m(467)+"e"]()?w(n[m(630)]):l[m(666)]()?w(n[m(615)]):h[m(555)]?n[m(405)](w,m(633)):"O-O"===h[m(583)]||h.san===m(432)?n[m(421)](w,n[m(602)]):n.SIEjP(w,n[m(505)]),d(new a(l[m(480)]())),n.EJpQU(v,e=>new Set([...e,r]));const x=l[m(617)](),p=l[m(480)]();let f=null,g=null,b="active";return l.isGameOver()&&(b=n[m(471)],l[m(467)+"e"]()?(f="w"===l.turn()?n.XSsws:m(641),g=n[m(600)](l.turn(),"w")?u[m(540)+"rId"]:u["whitePlaye"+m(604)]):f=n[m(516)]),await i[m(677)](n[m(599)])[m(626)]({game_id:u.id,player_id:s.id,move_number:u[m(529)]+1,move_san:h[m(583)],move_uci:n.QabyE(t,r)+n[m(502)](c,""),fen_after:p}),await i.from(m(438)+"s")[m(548)]({pgn:x,current_fen:p,move_count:u[m(529)]+1,last_move_at:(new Date).toISOString(),status:b,result:f,winner_id:g,completed_at:b===n[m(471)]?(new Date)[m(616)+"g"]():null}).eq("id",u.id),n[m(558)](b,n.alAeq)&&f&&(await n[m(491)](B,u["whitePlaye"+m(604)],u[m(540)+m(604)],f),"draw"===f?w(n.ofCHy):n[m(484)](g,null==s?void 0:s.id)?n[m(421)](w,n[m(482)]):w(n[m(608)]),f===m(641)?o.success(n[m(484)](j,"w")?n.hgCuo:m(629)+"!"):"black_wins"===f?o.success(n[m(558)](j,"b")?m(532):n.oRzCn):o[m(638)](xt(l))),!0}catch(h){return!1}},[l,u,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(!n[l(502)](!t,!r)&&a!==l(551))try{const{data:e}=await i[l(677)](l(518))[l(622)](n[l(531)]).in(n[l(434)],[t,r]);if(!e||2!==e[l(533)])return;const d=e[l(650)](e=>e.user_id===t),u=e[l(650)](e=>e[l(513)]===r);if(!d||!u)return;const m=d[l(660)]||1200,h=u[l(660)]||1200,x=n.BtZVR(a,n[l(516)])?l(469):a,p=c(m,h,x),f={};f.elo_rating=p[l(510)][l(656)];const g={};if(g.elo_rating=p[l(418)][l(656)],await Promise[l(672)]([i[l(677)](n[l(636)])[l(548)](f).eq(l(513),t),i[l(677)]("profiles").update(g).eq(n[l(434)],r)]),n[l(479)](null==s?void 0:s.id,t)){const e=p.white[l(439)];o[l(638)]("Rating: "+p[l(510)][l(656)]+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p[l(418)].change;o[l(638)](l(450)+p.black[l(656)]+" ("+(n.RZiuE(e,0)?"+":"")+e+")")}}catch(d){}},[s]),q=t.useCallback(async()=>{const t=e;if(n[t(502)](!u,!s)||!j)return;const r="w"===j?"black_wins":"white_wins",a="w"===j?u[t(540)+"rId"]:u[t(607)+t(604)];await i[t(677)](t(438)+"s")[t(548)]({status:n[t(471)],result:r,winner_id:a,completed_at:(new Date).toISOString()}).eq("id",u.id),await B(u[t(607)+t(604)],u[t(540)+"rId"],r),o[t(638)](t(635)+"ed")},[u,s,j,B]),L=n.sShSw(t.useCallback,async()=>{const t=e;o[t(638)](n[t(413)]),u&&(await i.from(n[t(581)])[t(548)]({status:t(597),result:t(469),completed_at:(new Date).toISOString()}).eq("id",u.id),await B(u["whitePlaye"+t(604)],u[t(540)+t(604)],n[t(516)]))},[u,B]),S=t.useCallback(t=>{const n=e,s={};return s[n(503)]=t,s[n(415)]=!0,l[n(530)](s)[n(542)](e=>e.to)},[l]),A={};return A[e(645)]=l,A[e(433)]=u,A[e(504)]=C,A[e(612)]=j,A.isLoading=h,A[e(664)]=p,A[e(544)]=z,A[e(424)]=k,A.joinGame=M,A[e(423)]=D,A[e(407)]=q,A[e(519)]=L,A.loadGame=N,A[e(592)+e(571)]=S,A[e(587)+"es"]=g,A})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),S("lobby")};((e={})=>{const n=on,s={QSXiB:function(e){return e()},uuhNN:function(e){return e()},Hynky:n(273)+"d",AgEcq:n(271)+n(319),yOkcA:function(e,t){return e&&t},YpDLR:function(e,t){return e&&t},Uptfa:"uzuzA",nLYxx:function(e){return e()},CEAwC:function(e,t){return e===t},OfuiP:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:d,enabled:u}=Mt(),m=t.useCallback(e=>{const t=n;if(e[t(309)]instanceof HTMLInputElement||e[t(309)]instanceof HTMLTextAreaElement||e.target[t(308)+"ditable"])return;const m=e[t(278)][t(312)+"e"]();switch(m){case"m":s[t(324)](d),o[t(322)](u?s[t(299)]:s.AgEcq,{duration:1500,icon:u?"ðŸ”‡":"ðŸ”Š"});break;case"r":s.yOkcA(c,r)&&(e[t(270)+t(323)](),r());break;case"d":s.YpDLR(c,l)&&a&&(s[t(291)]===t(321)?(e[t(270)+t(323)](),s[t(301)](a)):(_0x5ba985[t(270)+t(323)](),s.QSXiB(_0x2d1cb4)));break;case t(283):i&&(e.preventDefault(),i());break;case"?":case"/":(!e.shiftKey||s.CEAwC(m,"?"))&&(e[t(270)+"ault"](),sn())}},[d,u,r,a,i,c,l]);s[n(331)](t.useEffect,()=>{const e=n;return window[e(307)+e(317)](e(284),m),()=>window[e(287)+e(274)](e(284),m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?qt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==L?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&St(e).then(()=>S("game"))},[j,St]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ae(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Be(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));De(r)}else De([]);Be(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(S("game"),null===et&&tt(Se))},[null==vt?void 0:vt.status,L,Se,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ae(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Gt=async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=Ge.find(e=>e.id===R),t=(null==e?void 0:e.white)||{};await Nt(X,V,t)&&S("waiting")},Ut=async e=>{if(!k)return void H(!0);if(!M)return void G(!0);const t=Ge.find(e=>e.id===R),n=(null==t?void 0:t.black)||{};await kt(e,n)&&S("game")},Tt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Se)<=We}).sort((e,t)=>Math.abs((e.white_elo||1200)-Se)-Math.abs((t.white_elo||1200)-Se)):[],Wt=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),xe(R);const n=Ge.filter(e=>e.id!==R),s=n[Math.floor(Math.random()*n.length)];fe(s.id),S("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=Wn.find(e=>e.id===Y))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Ot=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Et=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Ot(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(xt(ee))),!0;oe(!0);const i=function(e){const t=In,n={};n[t(566)]=function(e,t){return e+t},n[t(512)]=function(e,t){return e*t},n[t(623)]="hard",n[t(599)]="stockfish";const s=n;switch(e){case t(593):return s[t(566)](300,s[t(512)](Math[t(529)](),500));case"medium":return 500+s[t(512)](Math[t(529)](),1e3);case s[t(623)]:return 800+1500*Math[t(529)]();case s[t(599)]:return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=In,s={tsGVZ:"easy",gdlUL:function(e,t){return e(t)},UoSzN:n(527)};switch(t){case s.tsGVZ:return s[n(573)](Sn,e);case n(521):return s[n(573)](An,e);case s[n(526)]:case n(504):return Pn(e);default:return Sn(e)}}(ee,Y);if(c){const e=Ot(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(xt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,Y,ke,q]),_t=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(He,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx(Jt,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===L&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Zn.map(e=>d.jsx("button",{onClick:()=>{q.select(),W(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(T===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(U,{onClick:Wt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:Wn.map(e=>d.jsxs("button",{onClick:()=>_(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(Ie,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ge.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>F(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ue,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Te,{to:"/openings",children:d.jsxs(U,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(Ke,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Te,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(U,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Se).color} text-white font-display text-base sm:text-lg`,children:Se}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Se).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",We," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(We===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(U,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=Tt().filter(e=>e.white_player_id!==k.id);e.length>0?await Ut(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Gt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Tt().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Tt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Tt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Xn.map(e=>d.jsxs("button",{onClick:()=>Z(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ge.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>F(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>J(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Oe,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>J(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(U,{onClick:Gt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&d.jsx(Ye,{className:"h-4 w-4"}),"Create Game",d.jsx(_e,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Xe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(U,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void G(!0);const e=Ge.find(e=>e.id===R),t=(null==e?void 0:e.black)||{};await Bt(Q.trim(),t)&&S("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Oe,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),ze?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Se)<=We,r=e.white_player_id===(null==k?void 0:k.id),a=k?Ze(Se,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Xn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(P,{children:d.jsxs(D,{children:[d.jsx(z,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(B,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Se+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Se+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Se+a.loss]})]})]})]})}),d.jsx(U,{size:"sm",onClick:()=>Ut(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!V&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),d.jsx(U,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Re,{className:"h-4 w-4"})})]})]}),d.jsx(U,{variant:"outline",onClick:()=>{S("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(U,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(U,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(K,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Yt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Qe,{whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Qe,{whitePalette:vt.whitePalette||Ge[0].white,blackPalette:vt.blackPalette||Ge[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&d.jsx(Vt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(U,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(U,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Ee,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(U,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Ve,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Wn.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=Wn.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(U,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(K,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Yt,{fen:ee.fen(),onMove:Et,getAvailableMoves:_t,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ge.find(e=>e.id===me))?void 0:s.white)||Ge[0].white,blackPalette:(null==(l=Ge.find(e=>e.id===pe))?void 0:l.black)||Ge[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Qe,{whitePalette:(null==(u=Ge.find(e=>e.id===me))?void 0:u.white)||Ge[0].white,blackPalette:(null==(h=Ge.find(e=>e.id===pe))?void 0:h.black)||Ge[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Qe,{whitePalette:(null==(f=Ge.find(e=>e.id===me))?void 0:f.white)||Ge[0].white,blackPalette:(null==(v=Ge.find(e=>e.id===pe))?void 0:v.black)||Ge[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Ft,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(U,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(U,{variant:"outline",onClick:Wt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(U,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Ve,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Je,{}),d.jsx(Le,{isOpen:A,onClose:()=>H(!1)}),d.jsx(qe,{isOpen:I,onClose:()=>G(!1),trigger:"general"}),d.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?de:we,whitePalette:"bot-game"===L?(null==(b=Ge.find(e=>e.id===me))?void 0:b.white)||Ge[0].white:(null==vt?void 0:vt.whitePalette)||Ge[0].white,blackPalette:"bot-game"===L?(null==(y=Ge.find(e=>e.id===pe))?void 0:y.black)||Ge[0].black:(null==vt?void 0:vt.blackPalette)||Ge[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=Wn.find(e=>e.id===Y))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?de.length:we.length}})]})};export{Rn as default};
