import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as z,af as M,ag as D,ai as B,y as L,bF as q,bG as A,b6 as S,ae as P,bH as H,ah as G,bI as I,B as T,bJ as U,bK as K,bL as E,bM as Y,bN as _,bO as W,bP as O,bQ as R,bR as J,bS as X,bT as V,bU as Z,bV as F,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as ze,c7 as Me,an as De,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Se,H as Pe,P as He,ca as Ge,b3 as Ie,bs as Te,be as Ue,cb as Ke,aP as Ee,cc as Ye,d as _e,b2 as We,a9 as Oe,cd as Re,ce as Je,cf as Xe,al as Ve,au as Ze}from"./index-BKigiLhM.js";import{L as Fe}from"./LiveColorLegend-BeCGJARD.js";import{T as Qe}from"./trending-down-CfOAo8D9.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CTjiDwfI.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=ht,t=mt();for(;;)try{if(697314===parseInt(e(368))/1+parseInt(e(331))/2*(-parseInt(e(357))/3)+-parseInt(e(311))/4*(-parseInt(e(341))/5)+parseInt(e(386))/6*(parseInt(e(351))/7)+parseInt(e(313))/8+parseInt(e(344))/9+-parseInt(e(383))/10*(parseInt(e(317))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){const e=ht,t={};t[e(384)]=function(e,t){return e!==t},t[e(316)]=e(312);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(384)](n.xNODB,"NGvKX")){const e=s?function(){if(r){const e=r[a(345)](t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0x6698e1?function(){if(_0x1187a2){const e=_0xe8c748.apply(_0xcf92bf,arguments);return _0x437811=null,e}}:function(){};return _0x3ebea7=!1,e}}}()(void 0,function(){const e=ht,t={};t[e(329)]="(((.+)+)+)+$";const n=t;return dt[e(355)]()[e(343)](n[e(329)]).toString().constructor(dt)[e(343)](n[e(329)])});dt();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ht(345)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function mt(){const e=["rwjJsuO","C2HVCNrnzxnZyq","vgHYzwvMB2XKia","DgHYzwvMB2XKxW","AxneCMf3","uMvWzxrPDgLVBG","C3bSAxq","nJmYmdK5r3rdtfLi","u3rHBgvTyxrLiq","CMvHC29U","zxHJzxb0Aw9U","r2fTzsbKCMf3BG","Aw5ZDwzMAwnPzq","y29UC3rYDwn0BW","AxnjBNn1zMzPyW","C3vMzMLJAwvUDa","AxntDgfSzw1HDa","twrhr0G","AwvUDe1HDgvYAq","CMvWzxrPDgLVBG","sw5ZDwzMAwnPzq","sLfuD0m","mtu2otbiBKjhsg8","y1bRr3K","CM4GDgHPCYiPka","mtm0mtKYnerPu2DVEa","Bg9N","mty0v0Dqzu1I","zxf6zwC","ota2ntC3nMrov2DJwG","u2PqBfG","AgXVqvG","Ee5prei","mtiZodzlzfntqNK","zMvU","rKLVBhG","wwnRvgm","C3rHBgvTyxrL","CMvLzM9SzcbYzq","BwvZC2fNzq","Bw92zxmGyxzHAq","CMv0DxjUicHMDq","B2DUsLe","y3rVCIGICMv0Dq","BNqGtwf0zxjPyq","Ae5Qu2O","x19WCM90B19F","ntbcqKPUtuy","zNrrq3i","Dw5RBM93BG","x3j1Bgu","BgfIBguU","Cgv0AxrPB24U","su1Jywm","rhjHDW","DMuGCNvSzs4","uLjfru8","ntiXodvUvMDVvKC","yMLUza","C2vHCMnO","mtaZndyZmtLtvKDuENu","yxbWBhK","ntaTtw92zsbsDq","AxnuAhjLzwzVBa","DhjHy2u","A29qrM4","z0jfv2C","n1zMrwfkDW","wK9erMC","A3nUCKi","rhjHDYbIEsbPBG","Dg9tDhjPBMC","ChjVDg90ExbL","mtmYmJK3EKDzzerT","rhjHDYbIEsb0Aa","D2fYBG","y29UC29Szq"];return(mt=function(){return e})()}function xt(e){const t=ht,n={ZODFg:t(321),SjPlX:t(363)+t(366),ognJQ:t(373)+"nt_material",kJUVS:function(e,t,n){return e(t,n)},YckTc:"fifty_move"+t(334),gBEWg:"Draw by the fifty-mo"+t(339),MdGGH:t(333),hloAX:t(372)+"!",RREEO:t(338)};if(e[t(377)+"e"]()){const e={};return e[t(370)]=n[t(352)],e[t(323)]=t(369)+" No legal "+t(324)+t(335),e[t(362)+"ge"]="Stalemate!",e}if(e[t(347)+"dRepetition"]()){const e={};return e[t(370)]=t(364)+t(380),e.message=t(358)+t(322)+t(336),e[t(362)+"ge"]=n[t(314)],e}if(e[t(375)+t(379)+"al"]()){const e={};return e[t(370)]=n[t(326)],e[t(323)]=t(354)+t(376)+" material.",e[t(362)+"ge"]=t(381)+t(328)+"l",e}const s=e[t(318)]();if(n.kJUVS(parseInt,s[t(367)](" ")[4],10)>=100){const e={};return e[t(370)]=n[t(320)],e[t(323)]=n[t(350)],e[t(362)+"ge"]=t(346)+"le",e}const r={};return r.reason=n[t(378)],r[t(323)]=n[t(315)],r[t(362)+"ge"]=n[t(340)],r}function ht(e,t){e-=311;const n=mt();let s=n[e];if(void 0===ht.izRGNX){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ht.dZEAgC=r,ht.dwunJa={},ht.izRGNX=!0}const a=e+n[0],i=ht.dwunJa[a];if(i)s=i;else{const e=function(e){this.Xnqyor=e,this.vcHSDU=[1,0,0],this.nmsQZZ=function(){return"newState"},this.YfbxWy="\\w+ *\\(\\) *{\\w+ *",this.PhXiSd="['|\"].+['|\"];? *}"};e.prototype.iFOSru=function(){const e=new RegExp(this.YfbxWy+this.PhXiSd).test(this.nmsQZZ.toString())?--this.vcHSDU[1]:--this.vcHSDU[0];return this.hlYuaS(e)},e.prototype.hlYuaS=function(e){return Boolean(~e)?this.UzLsSD(this.Xnqyor):e},e.prototype.UzLsSD=function(e){for(let t=0,n=this.vcHSDU.length;t<n;t++)this.vcHSDU.push(Math.round(Math.random())),n=this.vcHSDU.length;return e(this.vcHSDU[0])},new e(ht).iFOSru(),s=ht.dZEAgC(s),ht.dwunJa[a]=s}return s}function pt(e){return{EbcIJ:function(e,t){return e(t)}}[ht(361)](xt,e).message}ut(void 0,function(){const e=ht,t={FIolx:function(e,t){return e(t)},ftQCr:e(325)+"nction() ",ksnrB:"{}.constru"+e(327)+e(385)+" )",koPFn:function(e){return e()},YusOL:e(359),JQTwC:"info",IMcac:e(371)};let n;try{const s=t[e(319)](Function,t[e(332)]+t[e(353)]+");");n=t[e(349)](s)}catch(a){n=window}const s=n[e(360)]=n[e(360)]||{},r=[e(387),t.YusOL,t[e(382)],"error",t[e(337)],"table",e(348)];for(let i=0;i<r.length;i++){const t=ut[e(374)+"r"][e(356)][e(342)](ut),n=r[i],a=s[n]||t;t[e(330)]=ut[e(342)](ut),t.toString=a.toString[e(342)](a),s[n]=t}})(),function(){const e=bt,t=yt();for(;;)try{if(602999===parseInt(e(216))/1+-parseInt(e(176))/2+parseInt(e(218))/3+-parseInt(e(215))/4+parseInt(e(198))/5*(-parseInt(e(151))/6)+parseInt(e(197))/7*(parseInt(e(229))/8)+parseInt(e(233))/9*(parseInt(e(163))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[bt(162)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=bt,t={};t[e(213)]=e(135)+"+$";const n=t;return ft.toString().search(n[e(213)])[e(178)]()[e(174)+"r"](ft)[e(140)](n[e(213)])});ft();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[bt(162)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();gt(void 0,function(){const e=bt,t={gBJQy:function(e,t){return e(t)},UAmZQ:function(e,t){return e+t},sDZEt:e(209)+e(188)+e(144)+" )",ffvIv:function(e){return e()},ryQsd:e(203),Unjln:e(141),SorLI:e(194),ktivJ:function(e,t){return e<t}};let n;try{const s=t[e(224)](Function,t[e(131)](t.UAmZQ("return (function() ",t[e(186)]),");"));n=t[e(146)](s)}catch(a){n=window}const s=n[e(223)]=n[e(223)]||{},r=[e(130),e(227),e(152),"error",t[e(158)],t[e(217)],t[e(211)]];for(let i=0;t.ktivJ(i,r[e(138)]);i++){const t=gt[e(174)+"r"][e(219)][e(134)](gt),n=r[i],a=s[n]||t;t.__proto__=gt[e(134)](gt),t[e(178)]=a.toString.bind(a),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=bt,r={ZQtHF:"dpePi",pCuSX:function(e){return e()},sfKxk:function(e,t){return e+t},IGqWA:function(e){return e()},eugZJ:function(e,t){return e||t},PEcQb:function(e,t){return e<t},bZIum:function(e,t){return e-t},tWdbW:function(e,t){return e*t},UajLY:s(187),xJhUS:s(205),waOzf:"triangle",WYnnc:function(e,t,n){return e(t,n)},oQWzf:function(e,t,n,s,r,a){return e(t,n,s,r,a)},WieuT:s(180),NWGNn:function(e,t,n,s,r,a){return e(t,n,s,r,a)},Aqidq:function(e,t,n){return e(t,n)},QNOex:function(e,t,n){return e(t,n)},qVxAg:s(136),OYdjb:s(226),txBmq:function(e,t,n){return e(t,n)},MtCHc:s(208),oPPCw:s(155),WLRSi:s(179),Ifxoz:function(e,t,n){return e(t,n)}},a={};a[s(137)]=null,a[s(154)]=null;const i=t.useRef(a),o=r[s(132)](t.useCallback,()=>{const e=s;if(!i[e(173)][e(137)])try{const t=new(window.AudioContext||window[e(230)+e(231)]),s=t.createGain();s[e(207)](t[e(159)+"n"]),s[e(175)][e(214)]=n;const r={};r.context=t,r[e(154)]=s,i[e(173)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;i[e(173)].gainNode&&(i[e(173)][e(154)][e(175)].value=n)},[n]);const c=t.useCallback((t,n,a="sine",c=.01,l=.1,d)=>{const u=s;if(r[u(222)]!==u(167))return()=>{const e=u;_0x1c47eb[e(173)][e(137)]&&_0x40c6f3[e(173)][e(137)][e(165)]()};{if(!e)return;r[u(199)](o);const{context:s,gainNode:m}=i[u(173)];if(!s||!m)return;const x=s[u(161)+u(164)](),h=s[u(202)]();x.type=a,x.frequency[u(169)+"Time"](t,s.currentTime),d&&x[u(182)][u(232)+u(170)+u(143)](d,s[u(204)+"e"]+n),h[u(175)][u(169)+"Time"](0,s.currentTime),h[u(175)][u(221)+"ToValueAtT"+u(148)](1,s[u(204)+"e"]+c),h[u(175)][u(232)+"lRampToValueAtTime"](.01,s[u(204)+"e"]+n-l),h.gain[u(221)+"ToValueAtTime"](0,r.sfKxk(s[u(204)+"e"],n)),x[u(207)](h),h[u(207)](m),x[u(195)](s[u(204)+"e"]),x[u(181)](r[u(212)](s[u(204)+"e"],n))}},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;r.IGqWA(o);const{context:c,gainNode:l}=i[a(173)];if(r.eugZJ(!c,!l))return;const d=c[a(228)]*t,u=c.createBuffer(1,d,c[a(228)]),m=u[a(129)+"Data"](0);for(let e=0;r[a(192)](e,d);e++)m[e]=r.bZIum(r[a(206)](Math[a(142)](),2),1);const x=c.createBufferSource();x[a(210)]=u;const h=c[a(220)+a(189)]();h.type=a(184),h[a(182)][a(214)]=n;const p=c[a(202)]();p[a(175)][a(169)+a(156)](.3,c[a(204)+"e"]),p.gain["exponentia"+a(170)+"ueAtTime"](.01,c[a(204)+"e"]+t),x[a(207)](h),h[a(207)](p),p.connect(l),x[a(195)](c.currentTime),x[a(181)](r[a(212)](c[a(204)+"e"],t))},[e,o]),d=r[s(150)](t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(145)]:c(800,.08,r[n(160)],.005,.05),c(400,.06,r[n(153)],.005,.04);break;case n(172):r[n(168)](l,.12,2e3),r[n(133)](c,300,.1,r.WieuT,.005,.08),c(150,.15,r[n(160)],.01,.1);break;case n(183):c(600,.06,r[n(160)],.005,.04),setTimeout(()=>c(700,.06,n(205),.005,.04),80);break;case n(225):r[n(185)](c,880,.15,r.waOzf,.01,.1),setTimeout(()=>c(1100,.12,n(139),.01,.08),120);break;case"checkmate":c(880,.2,r.xJhUS,.01,.15),r[n(168)](setTimeout,()=>c(660,.2,"sine",.01,.15),150),setTimeout(()=>c(440,.3,n(205),.01,.2),300),r[n(168)](setTimeout,()=>c(330,.4,n(205),.01,.3),500);break;case n(234):c(523,.12,r[n(160)],.01,.08),r[n(168)](setTimeout,()=>c(659,.12,"sine",.01,.08),100),r[n(150)](setTimeout,()=>c(784,.2,n(205),.01,.15),200);break;case n(157):c(440,.15,r[n(153)],.01,.1),setTimeout(()=>c(349,.25,n(139),.01,.2),150);break;case n(201):r[n(185)](c,523,.1,n(205),.01,.08),r[n(150)](setTimeout,()=>c(659,.1,n(205),.01,.08),100),r.QNOex(setTimeout,()=>c(784,.1,n(205),.01,.08),200),setTimeout(()=>c(1047,.3,n(205),.01,.25),300);break;case r[n(200)]:c(392,.2,r[n(160)],.02,.15),setTimeout(()=>c(349,.2,"sine",.02,.15),200),setTimeout(()=>c(330,.3,n(205),.02,.25),400),setTimeout(()=>c(262,.4,"sine",.02,.35),650);break;case r[n(177)]:r[n(133)](c,440,.15,r.xJhUS,.01,.1),setTimeout(()=>c(440,.15,n(205),.01,.1),180),r.txBmq(setTimeout,()=>c(523,.2,n(205),.01,.15),360);break;case r[n(147)]:c(200,.1,"square",.005,.08),r[n(133)](c,150,.08,r[n(191)],.005,.06)}},[e,c,l]);r.WYnnc(t.useEffect,()=>{const e=s,t={};t[e(196)]="Ybmbj",t[e(190)]=r[e(149)];const n=t;return()=>{const t=e;if(n[t(196)]===n[t(190)]){const e=_0x5ae562[t(162)](_0x1a4c3c,arguments);return _0x591686=null,e}i[t(173)][t(137)]&&i[t(173)][t(137)][t(165)]()}},[]);const u={};return u.playSound=d,u.initAudio=o,u};function bt(e,t){e-=129;const n=yt();let s=n[e];if(void 0===bt.dpirlh){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};bt.FAmeZt=r,bt.PBfHUX={},bt.dpirlh=!0}const a=e+n[0],i=bt.PBfHUX[a];if(i)s=i;else{const e=function(e){this.JbflgG=e,this.pUitvo=[1,0,0],this.HZQTPt=function(){return"newState"},this.AqRrSv="\\w+ *\\(\\) *{\\w+ *",this.EqEtuo="['|\"].+['|\"];? *}"};e.prototype.sGbKiG=function(){const e=new RegExp(this.AqRrSv+this.EqEtuo).test(this.HZQTPt.toString())?--this.pUitvo[1]:--this.pUitvo[0];return this.StxzsJ(e)},e.prototype.StxzsJ=function(e){return Boolean(~e)?this.kBwrTs(this.JbflgG):e},e.prototype.kBwrTs=function(e){for(let t=0,n=this.pUitvo.length;t<n;t++)this.pUitvo.push(Math.round(Math.random())),n=this.pUitvo.length;return e(this.pUitvo[0])},new e(bt).sGbKiG(),s=bt.FAmeZt(s),bt.PBfHUX[a]=s}return s}function yt(){const e=["yMLUza","kcGOlISPkYKRkq","zgvMzwf0","y29UDgv4Da","BgvUz3rO","DhjPyw5NBgu","C2vHCMnO","DgfIBgu","CMfUzg9T","DwvbDfrPBwu","CM4GDgHPCYiPka","vwfQtfK","zMz2sxy","txrdsgm","Aw1L","v0Xsu2K","qxfPzhe","nKz3thPrEa","Aw5MBW","D2fpEMy","z2fPBK5Vzgu","C2f3Dg9VDgG","vgLTzq","z2fTzuvUza","CNLrC2q","zgvZDgLUyxrPBW","EePOvvm","y3jLyxrLt3nJAq","yxbWBhK","mJe1otiWyNbYD2X5","BgXHDg9Y","y2XVC2u","qvbjig5VDcbZDq","zhbLugK","v1LUBMm","C2v0vMfSDwvbDa","BfjHBxbuB1zHBa","v2vIief1zgLVia","y2fWDhvYzq","y3vYCMvUDa","y29UC3rYDwn0BW","z2fPBG","mtu3nte2meLkD2TOCG","t1LKAMi","Dg9tDhjPBMC","z1zZrfu","C3f1yxjL","C3rVCa","zNjLCxvLBMn5","y2fZDgXL","Bg93CgfZCW","tLDhtM4","C0rArxq","Bw92zq","y3rVCIGICMv0Dq","ywrgAwX0zxi","vg11y0S","B1bqq3C","uevJuwi","ChbVCNrLza","DhjHy2u","C3rHCNq","CMPbCwS","mJG1otiYqK1AC2Xw","mJK4ntC3nwLozg16EG","Cen1u1G","Cvz4qwC","DMLJDg9YEq","y3jLyxrLr2fPBG","zxHJzxb0Aw9U","y3vYCMvUDfrPBq","C2LUzq","DfDKyLC","y29UBMvJDa","AwXSzwDHBa","E30Uy29UC3rYDq","yNvMzMvY","u29YteK","C2zlEgS","uNDtBKC","DMfSDwu","mteYmtCYwu1PDhjY","mte1mZy0s3PTvffY","vw5QBg4","mJK0mdyYn0jRugjIyG","ChjVDg90ExbL","y3jLyxrLqMLXDq","BgLUzwfYuMfTCa","wLf0sey","y29UC29Szq","z0jkuxK","y2HLy2S","zhjHDW","D2fYBG","C2fTCgXLuMf0zq","mtC2zuHRB01K","D2vIA2L0qxvKAq","B0nVBNrLEhq","zxHWB25LBNrPyq","ow1vrKjsCG","z2fTzvn0yxj0","z2v0q2HHBM5LBa","Bg9N","vufTwLe","swz4B3O","B1fxEMy"];return(yt=function(){return e})()}const wt=zt;!function(){const e=zt,t=Ct();for(;;)try{if(833681===-parseInt(e(105))/1+-parseInt(e(119))/2*(parseInt(e(122))/3)+parseInt(e(123))/4+-parseInt(e(133))/5*(parseInt(e(109))/6)+-parseInt(e(131))/7+parseInt(e(115))/8+parseInt(e(121))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[zt(138)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=zt;return jt[e(106)]()[e(130)]("(((.+)+)+)+$")[e(106)]()[e(141)+"r"](jt)[e(130)](e(113)+"+$")});function Ct(){const e=["yMLUza","C2vHCMnO","nZq5odu4oxbUCM9lAG","wffewMm","ndeWnJm1z1LqD3Lo","y2HLC3mTC291BG","BgvUz3rO","zc1Zzxr0Aw5NCW","y29UC29Szq","yxbWBhK","B1bPAw0","C2jpBgu","y29UC3rYDwn0BW","zw5HyMXLza","mZi2mZe0AuPxCeH4","Dg9tDhjPBMC","y3rVCIGICMv0Dq","Bg9N","otzrs0DxqKW","CM4GDgHPCYiPka","BMfTzq","BMn0Aw9UkcKG","kcGOlISPkYKRkq","DhjHy2u","mta0ntK1odrfuKnLrvG","x19WCM90B19F","DgfIBgu","D2fYBG","ote5ngTTEfngBG","veHduLK","mtqXotq1odryBvLHyMO","ndaYCwTZBvfZ","nteWnJuXmLb0v2PhrW","ChjVDg90ExbL","zw9equ8","zxHJzxb0Aw9U","EufxCvq","DeHIEhy"];return(Ct=function(){return e})()}jt();const Nt=function(){const e=zt,t={};t[e(140)]=e(125);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(132)]=n[a(140)];const o=i,c=s?function(){const e=a;if(o[e(132)]!==e(125)){const t=_0x1149f5?function(){if(_0x147b88){const t=_0x332143[e(138)](_0x8c66e8,arguments);return _0x33e878=null,t}}:function(){};return _0x2c3680=!1,t}if(r){const n=r[e(138)](t,arguments);return r=null,n}}:function(){};return s=!1,c}}();Nt(void 0,function(){const e=zt,t={fStYX:function(e,t){return e+t},oPiim:function(e){return e()},THCRY:e(108),tHbxv:e(126),yAWqT:e(114)},n=t[e(139)](function(){const n=e;let s;try{s=Function(t.fStYX("return (fu"+n(112),"{}.constru"+n(107)+n(110)+" )")+");")()}catch(r){s=window}return s}),s=n[e(137)]=n[e(137)]||{},r=[t[e(120)],e(118),"info","error",t[e(128)],e(117),t[e(127)]];for(let a=0;a<r[e(135)];a++){const t=Nt[e(141)+"r"][e(124)][e(129)](Nt),n=r[a],i=s[n]||t;t[e(116)]=Nt.bind(Nt),t[e(106)]=i[e(106)][e(129)](i),s[n]=t}})();const kt={};function zt(e,t){e-=104;const n=Ct();let s=n[e];if(void 0===zt.gPRFeA){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};zt.vNVYBV=r,zt.zOEHGy={},zt.gPRFeA=!0}const a=e+n[0],i=zt.zOEHGy[a];if(i)s=i;else{const e=function(e){this.YBaahM=e,this.rqlQGE=[1,0,0],this.riFXSR=function(){return"newState"},this.yRrfgn="\\w+ *\\(\\) *{\\w+ *",this.HYlRyh="['|\"].+['|\"];? *}"};e.prototype.fKSNkx=function(){const e=new RegExp(this.yRrfgn+this.HYlRyh).test(this.riFXSR.toString())?--this.rqlQGE[1]:--this.rqlQGE[0];return this.LlvFiY(e)},e.prototype.LlvFiY=function(e){return Boolean(~e)?this.QSbtgl(this.YBaahM):e},e.prototype.QSbtgl=function(e){for(let t=0,n=this.rqlQGE.length;t<n;t++)this.rqlQGE.push(Math.round(Math.random())),n=this.rqlQGE.length;return e(this.rqlQGE[0])},new e(zt).fKSNkx(),s=zt.vNVYBV(s),zt.zOEHGy[a]=s}return s}kt[wt(111)]=wt(134)+wt(136);const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(104)]}))}),kt)),Dt=qt;!function(){const e=qt,t=At();for(;;)try{if(204719===parseInt(e(366))/1*(-parseInt(e(322))/2)+parseInt(e(206))/3*(parseInt(e(377))/4)+parseInt(e(325))/5+parseInt(e(488))/6*(-parseInt(e(183))/7)+-parseInt(e(310))/8*(-parseInt(e(376))/9)+-parseInt(e(225))/10*(-parseInt(e(231))/11)+parseInt(e(344))/12*(parseInt(e(193))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){const e=qt,t={};t[e(426)]=function(e,t){return e===t};const n=t;let s=!0;return function(t,r){const a=e;if(n[a(426)](a(297),a(297))){const e=s?function(){if(r){const e=r[a(382)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x54d2bd(!1)}}()(void 0,function(){const e=qt,t={jFXXR:"(((.+)+)+)+$"},n=t;return Bt.toString()[e(213)](e(347)+"+$").toString()[e(475)+"r"](Bt).search(n[e(304)])});Bt();const Lt=function(){const e=qt,t={};t.BAOTc=e(248);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=qt;if("avesQ"!==n[s(449)]){if(t){const n=t[s(382)](e,arguments);return t=null,n}}else{const e=_0x47a002.black.change;_0x484e00[s(469)](s(333)+_0x44a6cc.black.newRating+" ("+(e>=0?"+":"")+e+")")}}:function(){};return s=!1,r}}();function qt(e,t){e-=178;const n=At();let s=n[e];if(void 0===qt.qcPYtm){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.zLJvJf=r,qt.OTmmeC={},qt.qcPYtm=!0}const a=e+n[0],i=qt.OTmmeC[a];if(i)s=i;else{const e=function(e){this.WtAgtP=e,this.SqfsLR=[1,0,0],this.dflyQP=function(){return"newState"},this.fxsDcj="\\w+ *\\(\\) *{\\w+ *",this.ZGYHAU="['|\"].+['|\"];? *}"};e.prototype.jzpLVA=function(){const e=new RegExp(this.fxsDcj+this.ZGYHAU).test(this.dflyQP.toString())?--this.SqfsLR[1]:--this.SqfsLR[0];return this.eOMOMN(e)},e.prototype.eOMOMN=function(e){return Boolean(~e)?this.ctJFIQ(this.WtAgtP):e},e.prototype.ctJFIQ=function(e){for(let t=0,n=this.SqfsLR.length;t<n;t++)this.SqfsLR.push(Math.round(Math.random())),n=this.SqfsLR.length;return e(this.SqfsLR[0])},new e(qt).jzpLVA(),s=qt.zLJvJf(s),qt.OTmmeC[a]=s}return s}function At(){const e=["Bw92zxmT","yxbWBhK","ihbSyxLPBMCGyq","wuvzC0y","sM9PBMvKigDHBq","yNbIs3m","y29TCgXLDgvK","uMXKtfC","z2fTzs0","y2HHBgXLBMDLqW","C3vIC2nYAwjL","qujwAwq","AxndAgvJAW","v3nZwNu","y29Kzq","shH6rKC","yM9nvfG","y29UC29Szq","zYbMB3iGB3bWBW","Exf2r3O","CNrozfK","DgLTzunVBNrYBW","ywn0AxzL","ChvIBgLJ","r2fTzsbUB3qGzG","C2PQDNe","yMXHy2TFDgLTzq","Aw5JBhvKzxm","BMzbwfC","yNzWCw8","ywrK","z2fTzv9Pza","qxLnzva","BgvUz3rO","y2HHBMDL","ufj4C3u","wuHIBee","tuLgrhy","q2HHBgXLBMDLia","zvDVv00","Dg9tDhjPBMC","BMv3uMf0Aw5N","AgfUz2vZ","y3jLyxrLr2fTzq","y2HLy2TTyxrL","s0XTwwG","wLHyEuK","z2XIq0i","DxbRvKC","wKXluNy","v2HPDguGD2LUCW","z2vUzxjHDgvFyW","Cenzs1u","yvDmv3y","ruzrz1e","DgLTzv9JB250CG","zwqHifDHAxrPBG","CNbJ","Bw92zunVDw50","q0jXzLa","yvfIBhO","u3zLtLe","BwfRzu1VDMu","AM9PBKDHBwu","DxbKyxrL","B25LBNqGyxv0BW","D2LUBMvYx2LK","CKLK","qKfpvgm","r2fTzsbJCMvHDa","BMvS","v3vnzNy","zwXVx3jHDgLUzW","E30Uy29UC3rYDq","Chn5BLy","yMXHy2TqBgf5zq","y2fZDgXL","C3rHCNrLzf9HDa","DwDfqNi","zhKGC3rHCNrLza","Cwr3q3K","yMXHy2TFCgXHEq","vuj5y0q","EKvcrLm","CYbcBgfJAY4","BMv3","AM9PBIbIEsbJBW","seDxBLG","Aw5MBW","AgfSBgvUz2uGyW","Be9Zthy","CwvhCfO","yMXHy2TFCgfSzq","ww91ihDVBIe","y29UC3rYDwn0BW","D2HPDgvFD2LUCW","zxjYB3i","zLfvquO","tufvyxK","y2HHBgXLBMDLxW","zKPwAxm","AxnmB2fKAw5N","Bw92zv91y2K","yMLUza","EMPqzee","wwPPsfO","tw92zsbLCNjVCG","mJiZmde5ne5VAKLYCa","zwrLveC","yvzxrK0","Axnhyw1Lt3zLCG","y2HHBM5LBa","DuHHBeu","C3f1yxjL","EMfOzvC","AgfABgK","n2LRDM9UCq","DhDmuhi","y3jLyxrLzef0","z2fTzvn0yxj0","AgLyELu","uhjPvLq","D2fPDgLUzW","t2TLEwm","Aw5Zzxj0","Ae1hB28","mtnvyuXItxO","zseGww91igfYzq","ChjVBw90Aw9U","zeLNEvO","DMLJDg9YEq","igDHBwu","AxndAgvJA21HDa","wwjREui","vM5Qwg4","yuXQs3m","yxnJzw5KAw5N","Aw1cCNm","yvDXAMO","otaZuxb5Eefr","DgPvr04","ugXLyxnLihnPzW","EMLRANG","ywXS","y2HLC3nFz2fTzq","CfvAuhu","C2vHCMnO","DMTmtgu","r29XwfG","Bg9HzcbNyw1L","BMvUDc4UlG","ze5yEfq","rwPvC0O","C2vSzwn0","u054DuC","qMXHy2SGD2LUCW","ALnzCxu","wgDzCuu","ndiYmejKzxPOra","B2rL","q2fUBM90igPVAq","Eg1rs3a","DgfIBgu","tvfQDvO","mJe2n0fQt0vqAW","EhbUtxy","BIb5B3vYig93BG","DxnLCL9Pza","AM9PBKj5q29Kzq","yMXPDhPFnq","Eg1YBwy","qMPAzu4","D2HPDgvqBgf5zq","DhvYBG","CgDU","Bw92zxm","u3rry2O","Efvgrgq","C3rHDhvZ","sLPrwKe","zxjFAwq","ELnOwLa","wufwBKW","v01bBMS","Bw92zv9JB3vUDa","BgrcBM4","x19WCM90B19F","sLDcrhi","ChjVDg90ExbL","tY1p","BgvnB3zLCW","wezms2W","D2LUBMvYswq","CMvZAwDUr2fTzq","uNnruK8","tY1plu8","CMvZDwX0","rfHrr2S","CMvTB3zLq2HHBG","C2fU","CMfWAwrFmtu","t3b3uvy","ChjVzMLSzxm","CLH0ugi","wxbMsuK","DhrL","sxbZAfC","q2XjvLm","y2fWDhvYzq","ywjHBMrVBMvK","y3vYCMvUDf9Mzq","DxbKyxrLievmtW","BMn0Aw9UkcKG","s1DpEu8","zNjVBq","qNDzsMq","Cu5JsM8","Bw92zq","zgvMzwf0","z2fTzv9Pzd1LCq","y2fWDhvYzwq","txngEgy","AgfSBgvUz2vFyW","BIbPBIb0BYbJCG","y01AquG","ihnLBNqGkg9WCa","C3vJy2vZCW","y3rVCIGICMv0Dq","q1rgC1u","DKLny3m","z21HB08","Bw92zv9UDw1Izq","x3jLBwfPBMLUzW","zKDvsfC","rfLPu0C","y3jLyxrLigDHBq","Bg9HzeDHBwu","AKzywfi","z2fTzq","BMnwsfy","BIbPBIb0BYbQBW","B3jKzxi","wfjLqKW","mte4odiZmNL1B0PHwq","verRu3u","r2fTzsbHBhjLyq","Dg9vChbLCKnHCW","y2HLy2S","zMz3suW","yMXHy2S","zhjHDW","rhjHDYbVzMzLCG","AwXSzwDHBa","EwHnANa","D2HPDgvFCgfSzq","nhLYB0PUtW","Bwf5yMvtAw5NBa","rMfPBgvKihrVia","nda2nJqWCNzAELLp","Cfnqyw8","uuzxALq","Aw4GysbNyw1L","Benusw4","ru5WBMe","D2HPDgvFDgLTzq","BwvZC2fNzq","uMf0Aw5NoIa","sLPUy0G","r3j6weK","z1fbsgG","CM4GDgHPCYiPka","zxHJzxb0Aw9U","BwfW","zMLUza","C2LVBIK","z2v0qxzHAwXHyG","z2fTzvn0yxrL","mZy5ntiZmLPwCwPowG","r29RDLC","rgDeEve","kcGOlISPkYKRkq","zeXMDue","D2HPDgvuAw1LuG","B3vUza","Bg9FCMf0Aw5N","yMXHy2TFD2LUCW","BKPOrgC","AxnFChvIBgLJ","Cg9ZDgDYzxnFyW","q2jKy3a","AxnnEvr1CM4","D1rnshq","vhvKy1q","wxbSBKS","Bw92zv9Zyw4","AxHMy1y","zM9YrwfJAa","vKf4zM8","Bg9N","mZmYndfcrxnTu0S","D2HPDgu","C2LUz2XL","y2HLC3nFBw92zq","D2HPDgvFCgXHEq","Dg9ju09tDhjPBG","yNvSBgv0xZe","EhjTrxC","Bw92zwrtCxvHCG","zhzjuxO","own4B3DKAG","mJKYu1jjwgLb","yMXHy2TuAw1LuG","rMvku00","zwf0zsbHigDHBq"];return(At=function(){return e})()}Lt(void 0,function(){const e=qt,t={BjZeN:function(e,t){return e(t)},ZLKRv:e(472),rXtPb:"gTGFr",xrmEw:function(e){return e()},TDkSu:e(365),yqvGz:"warn",fGUHW:e(338),PriVT:e(229),glbCB:"trace",ENpna:function(e,t){return e!==t},dNXxT:e(182)},n=t[e(373)](function(){const n=e;let s;try{s=t[n(238)](Function,"return (fu"+n(279)+(n(454)+n(294)+n(337))+" ));")()}catch(r){t[n(430)]===t[n(270)]?_0x3d7ae2(!1):s=window}return s}),s=n[e(398)]=n[e(398)]||{},r=[t[e(311)],t[e(400)],"info",e(477),t[e(300)],t[e(188)],t[e(428)]];for(let a=0;a<r[e(414)];a++)if(t[e(330)]("EarGd",t[e(218)])){const t=Lt[e(475)+"r"][e(255)][e(484)](Lt),n=r[a],i=s[n]||t;t[e(253)]=Lt[e(484)](Lt),t.toString=i[e(421)][e(484)](i),s[n]=t}else _0x1f1d54(e(284))})();const St={};St[Dt(372)]=60,St[Dt(236)]=300,St[Dt(267)]=900,St.untimed=0;const Pt=St;function Ht(){const e=["y29UC29Szq","sgfWDgLJigzLzq","mta0nJmYmhvnD0zMAG","otaWode2tuP3tu9q","DMLICMf0zq","BwvKAxvT","y29UC3rYDwn0BW","BMn0Aw9UkcKG","CMv0DxjUicHMDq","nZyXote5BNzvquDm","rxjwDeS","Aw5MBW","kcGOlISPkYKRkq","EMTZt1q","ntuWnteWEwniDNHw","zwq6","C0XiEuK","zxjYB3i","DgfIBgu","mM1Mu3LIra","D2fYBG","C2vHCMnO","tK5MDuy","otm2odu0nKjWAxPLEa","neT4CfLrBa","BgvUz3rO","Dg9tDhjPBMC","uLfKAfu","E30Uy29UC3rYDq","n3rqrwzhua","C3vJy2vZCW","C2vSzwn0Aw9U","y1DAq0y","yMLUza","q1H3rMC","y3rVCIGICMv0Dq","AgfWDgLJCW","rKHLv1i","BgLNAhq","zxHJzxb0Aw9U","q1DQBKC","mJaXndq3mNrer1jHAG","zgjHy2SGzMfPBa","AgvHDNK","mtG1mdG0B1rIA250","x19WCM90B19F","yxbWBhK","DhjHy2u","AxntDxbWB3j0zq","owTZzMPzBG"];return(Ht=function(){return e})()}const Gt=Et;!function(){const e=Et,t=Ht();for(;;)try{if(156743===parseInt(e(343))/1*(-parseInt(e(368))/2)+-parseInt(e(358))/3*(parseInt(e(373))/4)+-parseInt(e(351))/5+parseInt(e(352))/6+-parseInt(e(378))/7*(parseInt(e(340))/8)+-parseInt(e(348))/9*(-parseInt(e(363))/10)+parseInt(e(372))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Et;return It[e(375)]()[e(370)]("(((.+)+)+)+$")[e(375)]()[e(355)+"r"](It)[e(370)](e(361)+"+$")});It();const Tt=function(){let e=!0;return function(t,n){const s=e?function(){const e=Et;if("CXwFg"!==e(333))return _0x4c22d2[e(369)](e(350)+e(341)+"ed:",_0x3c21e2),!1;if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Tt(void 0,function(){const e=Et,t={FnbzG:function(e,t){return e+t},cWZCF:e(357)+e(356),bJrGT:function(e){return e()},sLHyI:"log",FHeWR:e(366)},n=t.bJrGT(function(){const n=e;let s;try{s=Function(t.FnbzG(t[n(331)],n(377)+n(334)+'rn this")( )')+");")()}catch(r){s=window}return s}),s=n[e(349)]=n[e(349)]||{},r=[t[e(365)],"warn",e(360),t[e(336)],e(338),e(367),e(346)];for(let a=0;a<r[e(374)];a++){const t=Tt[e(355)+"r"].prototype.bind(Tt),n=r[a],i=s[n]||t;t[e(344)]=Tt[e(332)](Tt),t[e(375)]=i[e(375)][e(332)](i),s[n]=t}})();const Ut={};Ut[Gt(337)]=10,Ut.medium=25,Ut[Gt(342)]=50,Ut[Gt(379)]=[10,50,20],Ut.error=[50,30,50,30,50],Ut[Gt(330)]=5;const Kt=Ut;function Et(e,t){e-=330;const n=Ht();let s=n[e];if(void 0===Et.oDhRKJ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Et.ZiqFjU=r,Et.nMntYJ={},Et.oDhRKJ=!0}const a=e+n[0],i=Et.nMntYJ[a];if(i)s=i;else{const e=function(e){this.bGvNIe=e,this.ktaKDh=[1,0,0],this.fRVold=function(){return"newState"},this.FBvxBe="\\w+ *\\(\\) *{\\w+ *",this.bQEbNK="['|\"].+['|\"];? *}"};e.prototype.zxhqig=function(){const e=new RegExp(this.FBvxBe+this.bQEbNK).test(this.fRVold.toString())?--this.ktaKDh[1]:--this.ktaKDh[0];return this.vCrcaq(e)},e.prototype.vCrcaq=function(e){return Boolean(~e)?this.GockEv(this.bGvNIe):e},e.prototype.GockEv=function(e){for(let t=0,n=this.ktaKDh.length;t<n;t++)this.ktaKDh.push(Math.round(Math.random())),n=this.ktaKDh.length;return e(this.ktaKDh[0])},new e(Et).zxhqig(),s=Et.ZiqFjU(s),Et.nMntYJ[a]=s}return s}const Yt=()=>{const e=Gt,n={CWjnG:e(371),RQdhU:function(e,t,n){return e(t,n)},zksOT:function(e,t,n){return e(t,n)},ErVtK:function(e,t,n){return e(t,n)}},s="undefined"!=typeof navigator&&"vibrate"in navigator,r=t.useCallback((t=e(337))=>{const r=e;if(n[r(339)]!==r(371)){if(_0x235878){const e=_0x168036[r(345)](_0x166b47,arguments);return _0x436906=null,e}}else{if(!s)return!1;try{const e=Kt[t];return navigator[r(353)](e)}catch(a){return!1}}},[s]),a={select:t.useCallback(()=>r("selection"),[r]),move:t.useCallback(()=>r(e(337)),[r]),capture:t.useCallback(()=>r(e(354)),[r]),check:n[e(376)](t.useCallback,()=>r(e(342)),[r]),victory:t.useCallback(()=>r(e(379)),[r]),error:n[e(362)](t.useCallback,()=>r(e(366)),[r]),castle:n[e(359)](t.useCallback,()=>!!s&&navigator[e(353)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator[e(353)]([10,30,10,30,20]),[s])},i={};return i[e(347)+"d"]=s,i.vibrate=r,i[e(335)]=a,i},_t={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Wt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:z}=Yt();let M=null;try{M=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Wt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?z.capture():z.move();return void(await n(b,c)?(y(null),j([])):z.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return z.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,x,n,s,z]),S=t.useCallback(e=>{if(!(null==M?void 0:M.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?M.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):M.setHoveredSquare(null)},[M,L]),P=t.useCallback(()=>{(null==M?void 0:M.setHoveredSquare)&&M.setHoveredSquare(null)},[M]),H=t.useCallback(e=>{if(!M)return!1;const{highlightedPiece:t,lockedPieces:n}=M,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[M,g]),G=M&&(null!==M.highlightedPiece||M.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Wt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,h=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=H(i),j=G&&g&&!y,N=G&&y;return d.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:_t[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Rt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Jt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Rt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,x=u%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?z[e.quality]:null;return d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&d.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Xt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Vt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:K,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:U,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Zt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:K,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:U,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const z=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=z.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(A,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(S,{className:"w-3 h-3"})]}):d.jsx(P,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(G,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Xt[e],s=n.icon;return d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(I,{className:"w-3 h-3"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Vt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(T,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(B,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Jt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(E,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(Y,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(_,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(W,{className:"h-5 w-5"}):d.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(O,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(R,{children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(J,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(X,{className:"h-3 w-3"}),L]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(V,{align:"end",className:"bg-popover",children:z.map(e=>d.jsx(Z,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(R,{children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(J,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(V,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx(Q,{}),re.capture.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(Q,{}),re.checkmate.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(h,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx(Qe,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(h,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Qt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(T,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(E,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(P,{children:d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(P,{children:d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(T,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:z}=he(),{setCapturedTimelineState:M,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[G,I]=t.useState(!1),[U,K]=t.useState(!1);se(p);const E=t.useMemo(()=>p?fe(p):null,[p]),Y=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const _=async e=>{if(e&&!v)return void I(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return d.jsxs(ge,{open:e,onOpenChange:n,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(T,{variant:L?"outline":"default",size:"sm",onClick:()=>Y(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(T,{variant:L?"default":"outline",size:"sm",onClick:()=>Y(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:z})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",E&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",E]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(T,{onClick:()=>_(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(T,{onClick:()=>_(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?ze(x,c.totalMoves):Me;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(T,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;M({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:z}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:z},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(De,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(Be,{isOpen:G,onClose:()=>I(!1),onAuthRequired:()=>{I(!1),K(!0)},trigger:"download"}),d.jsx(Le,{isOpen:U,onClose:()=>K(!1)})]})},tn=nn;function nn(e,t){e-=325;const n=vn();let s=n[e];if(void 0===nn.jxKhnj){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};nn.dbjVho=r,nn.AvqAUl={},nn.jxKhnj=!0}const a=e+n[0],i=nn.AvqAUl[a];if(i)s=i;else{const e=function(e){this.rFWeKE=e,this.aSQaRu=[1,0,0],this.hLDzSo=function(){return"newState"},this.vWsjOQ="\\w+ *\\(\\) *{\\w+ *",this.YAnGjU="['|\"].+['|\"];? *}"};e.prototype.uVaumw=function(){const e=new RegExp(this.vWsjOQ+this.YAnGjU).test(this.hLDzSo.toString())?--this.aSQaRu[1]:--this.aSQaRu[0];return this.wSxTML(e)},e.prototype.wSxTML=function(e){return Boolean(~e)?this.mGOwXq(this.rFWeKE):e},e.prototype.mGOwXq=function(e){for(let t=0,n=this.aSQaRu.length;t<n;t++)this.aSQaRu.push(Math.round(Math.random())),n=this.aSQaRu.length;return e(this.aSQaRu[0])},new e(nn).uVaumw(),s=nn.dbjVho(s),nn.AvqAUl[a]=s}return s}!function(){const e=nn,t=vn();for(;;)try{if(189941===parseInt(e(333))/1*(-parseInt(e(347))/2)+-parseInt(e(371))/3+-parseInt(e(345))/4+-parseInt(e(340))/5+-parseInt(e(346))/6+parseInt(e(401))/7*(-parseInt(e(415))/8)+parseInt(e(329))/9*(parseInt(e(384))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const sn=function(){let e=!0;return function(t,n){const s=nn,r={};r.ZayYT=s(372);const a=r,i=e?function(){const e=s;if("sPhhd"===a[e(366)]){if(n){const s=n[e(365)](t,arguments);return n=null,s}}else{const t=_0x48d898.constructor.prototype[e(377)](_0x25c077),n=_0x2bac7c[_0x3c7f73],s=_0x1a2b8b[n]||t;t.__proto__=_0x6c318d.bind(_0x5b7b99),t[e(414)]=s.toString[e(377)](s),_0x1b3c7c[n]=t}}:function(){};return e=!1,i}}()(void 0,function(){const e=nn,t={};t[e(369)]=e(338)+"+$";const n=t;return sn.toString()[e(325)](n[e(369)])[e(414)]()[e(399)+"r"](sn)[e(325)](n[e(369)])});sn();const rn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[nn(365)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();rn(void 0,function(){const e=nn,t={haTOo:e(331),iPnlf:function(e,t){return e(t)},Noysv:e(382)+e(396),VzGlA:e(379)+e(352)+e(342)+" )",eejaY:e(394),aarUp:"exception",UJaNj:"trace"};let n;try{if(t[e(357)]!=t[e(357)])return;n=t[e(392)](Function,t[e(420)]+t.VzGlA+");")()}catch(a){n=window}const s=n[e(334)]=n[e(334)]||{},r=[e(375),e(408),t[e(348)],e(412),t[e(378)],e(356),t[e(361)]];for(let i=0;i<r[e(397)];i++){const t=rn[e(399)+"r"][e(390)][e(377)](rn),n=r[i],a=s[n]||t;t[e(336)]=rn.bind(rn),t.toString=a[e(414)].bind(a),s[n]=t}})();const an=()=>{const e=nn,t={};t[e(363)]="Shortcuts:"+e(337)+e(416)+e(389)+e(339)+e(332);const n=t,s={};s[e(362)]=4e3,o.info(n[e(363)],s)},on={key:"M"};on[tn(419)]=tn(374)+tn(335),tn(350),tn(327),tn(386);const cn={};cn[tn(380)]="D",cn[tn(419)]=tn(398)+tn(328)+"n)";const ln={};ln[tn(380)]="Esc",ln[tn(419)]=tn(417)+"lobby / Ex"+tn(395)+tn(341);const dn={};dn[tn(380)]="?",dn.action=tn(407)+tn(406)+tn(330);const un={};un.key=tn(349),un[tn(419)]=tn(413)+tn(351);const mn={};mn[tn(380)]="â†",mn.action=tn(343)+tn(403);const xn={key:"â†’"};xn[tn(419)]="Next move",tn(368);const hn={};hn.key=tn(391),hn[tn(419)]=tn(388)+tn(364);const pn={key:"F"};pn[tn(419)]=tn(418)+"lscreen mode";const fn={};fn[tn(380)]="C",fn.action=tn(353)+tn(358)+"ates";const gn={};function vn(){const e=["mta4mJj6uurOt0C","DgfYz2v0","B3zL","zxnJyxbL","vgD0qxm","yxjKihnOB3j0yW","u2HVDYbRzxLIBW","D2fYBG","AxndB250zw50rq","yufMv2m","vg9Nz2XLl2v4Ca","zxjYB3i","ugXHEs9qyxvZzq","Dg9tDhjPBMC","ndaWr25jrw1p","pvjLC2LNBIWGra","uMv0DxjUihrVia","vg9Nz2XLigz1Ba","ywn0Aw9U","tM95C3y","C2vHCMnO","t0Hdvue","zsaOzhvYAw5Nia","icH5B3vYihr1CG","otG4odu4ohzeyxP3ra","DxrZ","EfjnvKi","sgvSCa","mJm2ndvozuDTq08","y29UC29Szq","BMqGB24VB2zM","x19WCM90B19F","ie09txv0zsWGuG","kcGOlISPkYKRkq","puXVyMj5lca/pq","mtaXmJm2mg1eDvrIBG","zwvU","CM4GDgHPCYiPka","uhjLDMLVDxmGBq","zgL0ywjSzq","nJyYmJq4vxLjA3nW","nZCZnZi0BLPbEvDv","mtriBuLvB2q","zwvQyvK","u3bHy2u","uMvZAwDUigDHBq","ihrPBwvSAw5L","y3rVCIGICMv0Dq","vg9Nz2XLigjVyq","uercru8","swDTEwu","DgfIBgu","Agfut28","CMqGy29VCMrPBG","C2HPzNrlzxK","ywrKrxzLBNrmAq","vuPHtMO","zhvYyxrPB24","Ahb4DfG","khnOB3CGywXSkq","yxbWBhK","wMf5wvq","ChjLDMvUDerLzG","r28GDg8GC3rHCG","rxzMrhO","DLjKCg8","nta2oty0swPiAgHd","C1bOAgq","CMvTB3zLrxzLBG","vg9Nz2XLihnVDq","Bg9N","DeXPC3rLBMvY","yMLUza","ywfYvxa","E30Uy29UC3rYDq","A2v5","AK1VA3q","CMv0DxjUicHMDq","yxvSDa","mtbtyu5qyMy","A2v5zg93BG","CgXHEsK","DKDprhe","r28GDg8Gzw5Kia","purYyxCSievZyW","ChjVDg90ExbL","rw5K","AvbUBgy","DgvK","Aw5MBW","AxqGzNvSBhnJCG","BMn0Aw9UkcKG","BgvUz3rO","t2zMzxiGzhjHDW","y29UC3rYDwn0BW","u291BMqGDw5TDq"];return(vn=function(){return e})()}gn.key="L",gn[tn(419)]=tn(411)+"and legend";const bn=wn;!function(){const e=wn,t=Hn();for(;;)try{if(968306===-parseInt(e(444))/1+parseInt(e(458))/2*(-parseInt(e(449))/3)+-parseInt(e(356))/4*(-parseInt(e(413))/5)+parseInt(e(466))/6*(parseInt(e(434))/7)+parseInt(e(400))/8*(-parseInt(e(404))/9)+-parseInt(e(363))/10+-parseInt(e(450))/11*(-parseInt(e(349))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=wn,t={};t[e(411)]="(((.+)+)+)+$";const n=t;return yn[e(384)]()[e(455)](e(352)+"+$")[e(384)]()[e(391)+"r"](yn)[e(455)](n[e(411)])});function wn(e,t){e-=346;const n=Hn();let s=n[e];if(void 0===wn.CJKshZ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};wn.gaEXzl=r,wn.uqyGyA={},wn.CJKshZ=!0}const a=e+n[0],i=wn.uqyGyA[a];if(i)s=i;else{const e=function(e){this.huwAEL=e,this.UtCJNO=[1,0,0],this.LhqWdo=function(){return"newState"},this.uibjtS="\\w+ *\\(\\) *{\\w+ *",this.SXJZwv="['|\"].+['|\"];? *}"};e.prototype.pUtkDT=function(){const e=new RegExp(this.uibjtS+this.SXJZwv).test(this.LhqWdo.toString())?--this.UtCJNO[1]:--this.UtCJNO[0];return this.XHfkBm(e)},e.prototype.XHfkBm=function(e){return Boolean(~e)?this.ShMfPT(this.huwAEL):e},e.prototype.ShMfPT=function(e){for(let t=0,n=this.UtCJNO.length;t<n;t++)this.UtCJNO.push(Math.round(Math.random())),n=this.UtCJNO.length;return e(this.UtCJNO[0])},new e(wn).pUtkDT(),s=wn.gaEXzl(s),wn.uqyGyA[a]=s}return s}yn();const jn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();jn(void 0,function(){const e=wn,t={UfMvG:function(e,t){return e+t},TSaTW:e(383)+e(420),ENWsr:function(e){return e()},cQmZw:e(437),JpvGQ:e(438),evycV:e(412),eSDfH:e(371)},n=t.ENWsr(function(){const n=e;let s;try{s=Function(t[n(375)](t[n(430)]+(n(353)+n(432)+n(469)+" )"),");"))()}catch(r){s=window}return s}),s=n[e(408)]=n[e(408)]||{},r=[t[e(380)],t[e(428)],e(396),"error",e(447),t[e(425)],t[e(485)]];for(let a=0;a<r[e(395)];a++){const t=jn[e(391)+"r"][e(459)].bind(jn),n=r[a],i=s[n]||t;t.__proto__=jn[e(468)](jn),t[e(384)]=i.toString.bind(i),s[n]=t}})();const Cn={p:100,n:320,b:330,r:500,q:900,k:2e4},Nn=Cn,kn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],zn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Mn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Dn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Bn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Ln=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function qn(e){switch(e[wn(382)+"e"]()){case"p":return kn;case"n":return zn;case"b":return Mn;case"r":return Dn;case"q":return Bn;case"k":return Ln;default:return[]}}function An(e){const t=wn,n={kUBzH:function(e,t){return e===t}};n[t(390)]=function(e,t){return e===t},n[t(484)]="gFriV",n.APqHa=t(388),n.BsLqq=function(e,t){return e<t},n[t(415)]=function(e,t){return e>t},n[t(360)]=function(e,t){return e+t},n[t(462)]=function(e,t){return e===t};const s=n;if(e[t(471)+"e"]())return s[t(452)](e[t(435)](),"w")?-1/0:1/0;if(e[t(387)]()||e.isStalemate()){if(!s[t(390)](s[t(484)],s[t(474)]))return 0;_0x55ecde>_0x3dfd9d&&(_0x4a633d=_0x517c9e,_0x2e4fe7=_0x3ba8f9)}let r=0;const a=e[t(361)]();for(let o=0;o<8;o++)for(let e=0;s[t(441)](e,8);e++){const n=a[o][e];if(n){const a=Nn[n[t(370)]]||0,i=qn(n[t(370)]);let c=0;if(s[t(415)](i[t(395)],0)){c=i["w"===n[t(399)]?o:7-o][e]}const l=s[t(360)](a,c);r+=s[t(452)](n[t(399)],"w")?l:-l}}const i=e[t(463)]()[t(395)];return r+=s.dCJbU(e[t(435)](),"w")?2*i:2*-i,r}function Sn(e,t,n,s,r){const a=wn,i={YuFsM:function(e,t){return e===t},hZDaC:function(e,t){return e(t)},dWkwA:function(e,t,n,s,r,a){return e(t,n,s,r,a)},iheYr:function(e,t){return e>t},mvILo:function(e,t){return e<=t},MRqzt:function(e,t){return e-t},RtSqx:function(e,t){return e<t}};if(i.YuFsM(t,0)||e.isGameOver())return{score:i.hZDaC(An,e),move:null};const o={};o[a(357)]=!0;const c=e[a(463)](o);if(c[a(393)]((e,t)=>{const n=a;let s=0,r=0;return e.captured&&(s+=Nn[e.captured]||0),t.captured&&(r+=Nn[t[n(418)]]||0),e.san[n(346)]("+")&&(s+=50),t.san[n(346)]("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const d of c){e[a(398)](d);const c=i[a(368)](Sn,e,t-1,n,s,!1);if(e.undo(),i[a(423)](c.score,r)&&(r=c[a(348)],o=d),n=Math[a(407)](n,c.score),i[a(350)](s,n))break}const l={};return l.score=r,l.move=o,l}{let r=1/0,o=null;for(const d of c){e[a(398)](d);const c=Sn(e,i[a(419)](t,1),n,s,!0);if(e.undo(),i[a(431)](c[a(348)],r)&&(r=c[a(348)],o=d),(s=Math[a(385)](s,c[a(348)]))<=n)break}const l={};return l[a(348)]=r,l[a(398)]=o,l}}function Pn(e){const t=wn,n={};n[t(403)]=function(e,t){return e>t};const s=n,r={};r[t(357)]=!0;const a=e.moves(r);if(0===a[t(395)])return null;const i=a[t(470)](e=>e[t(418)]);return s[t(403)](i.length,0)&&Math[t(372)]()<.3?i[Math[t(424)](Math[t(372)]()*i[t(395)])]:a[Math[t(424)](Math[t(372)]()*a[t(395)])]}function Hn(){const e=["zvnezKG","Aw5JBhvKzxm","Dw5KBW","C2nVCMu","mJa2nZi5odHxy1jns1m","Bxzjtg8","uNHdvwq","kcGOlISPkYKRkq","E30Uy29UC3rYDq","A3zrt1O","CMvK","ngXWsgfbyG","DMvYyM9Zzq","C2XPy2u","qMvNAw5Uzxi","Eezhq00","yM9HCMq","ChjVBw90Aw9U","mte5ndK4mZbXwwXesLq","CMnOigrLChrO","ignHChr1CMvZ","u3rVy2TMAxnOia","FJiWmda","zfDRD0e","Bw92zxrPBwu","DhLWzq","DhjHy2u","CMfUzg9T","twfZDgvY","DgvYAwfSigf3yq","vwznDKC","zw5NAw5Lug93zq","ywnRihrVigHHCG","wvvSz0e","yw5HBhL6zvbVCW","y1fTwNC","yw5KBwfZDgvYia","Dg9mB3DLCKnHCW","CMv0DxjUicHMDq","Dg9tDhjPBMC","BwLU","twfRzxmGCMfUza","AxneCMf3","vwL3CKi","DfvhDxy","ugLoswO","y29UC3rYDwn0BW","t1jbzeK","C29YDa","uMvHBcbotLvfia","BgvUz3rO","Aw5MBW","C3rVy2TMAxnO","Bw92zq","y29SB3i","mtq0nZe0ngjLC3jvwq","vu9juxC","zMLUza","B0XwvNC","odf2vhDfr0G","z3bbu3G","zgvZy3jPChrPBW","Bwf4","y29UC29Szq","AxrPB24","Bw92zsbLCNjVCG","zuvQyNq","DgfIBgu","mtaXnZi2nvfxwwDUvW","zw5NAw5LlcbNCG","D2LmCw0","CMf0Aw5N","BgfIzwW","y2fWDhvYzwq","tvjXENq","BMn0Aw9UkcKG","uu16ywG","CvjKv3K","AwHLwxi","zMXVB3i","zxz5y1y","yMvZDe1VDMu","qMfZAwmGDgfJDa","sNb2r1e","zMvU","vfnHvfC","uNrtCxG","y3rVCIGICMv0Dq","zNjVBq","mZy0ndy5BeLiC3bK","DhvYBG","idqTCgX5ihnLyq","Bg9N","D2fYBG","wxLqs2W","FJe0mda","qNnmCxe","C3rYzw5NDgG","FJmYmda","nZK4mdLut0f4DKu","zxjYB3i","z0fPA1K","zxHJzxb0Aw9U","uNHzque","ntGYmJm3wK5NB3PK","mZnQsNDRrKe","FJGWma","A1vcEKG","vujXAgi","yxbWBhK","C2vHCMnO","zcbTB2rL","veH0D1a","mtz4v0PyAfu","ChjVDg90ExbL","ANvHz1m","AgfYza","zenkyLu","Bw92zxm","B1PbwNC","BurpzMe","nMPlqw1HyG","tMXHvxG","yMLUza","CM4GDgHPCYiPka","zMLSDgvY","AxndAgvJA21HDa","DMfSDwf0Aw9Ula","twTQyLC","qvbXsge","igzHBgXPBMCGyG","rfvPC1G","BwvKAxvT","B20GBw92zxmSia","zwfZEq","suvHsvG","AwnZigfUzcbTyq","CfLvEMu","D2fPDfjLywr5","tK9xC3C"];return(Hn=function(){return e})()}function Gn(e){const t=wn;return Sn(e,4,-1/0,1/0,"w"===e.turn())[t(398)]}function In(e,t){const n=wn,s={UBqhb:n(479),DUisX:function(e,t){return e(t)},QMzah:n(477),eQcJS:n(397),PyxSj:function(e,t){return e(t)}};switch(t){case s[n(453)]:return s[n(476)](Pn,e);case s[n(421)]:return function(e){const t=wn,n={};n[t(446)]=function(e,t){return e===t},n[t(439)]=function(e,t){return e===t},n.ORAdI=t(482),n[t(378)]=t(405),n[t(389)]=function(e,t){return e<t},n.MkjbW=function(e,t){return e*t};const s=n,r={};r[t(357)]=!0;const a=e[t(463)](r);if(s.gAikY(a[t(395)],0))return null;let i=null,o=s.YyPKl(e.turn(),"w")?-1/0:1/0;for(const c of a){e.move(c);const n=An(e);if(e[t(347)](),"w"===e[t(435)]()){if(t(482)!==s[t(392)])return _0x25edac[_0x25f6a7[t(424)](_0x2662ec[t(372)]()*_0x18907e[t(395)])];n>o&&(o=n,i=c)}else{if(!s[t(446)](t(405),s[t(378)])){const e=_0x186d20[t(454)](_0x55fcdc,arguments);return _0x1f3a68=null,e}s.tUGuv(n,o)&&(o=n,i=c)}}if(s[t(389)](Math[t(372)](),.2)){const n=a[t(393)]((n,s)=>{const r=t;e.move(n);const a=An(e);e[r(347)](),e[r(398)](s);const i=An(e);return e[r(347)](),"w"===e[r(435)]()?i-a:a-i}),r=n[t(358)](0,Math.min(3,n[t(395)]));return r[Math.floor(s[t(473)](Math.random(),r[t(395)]))]}return i}(e);case"hard":case s.eQcJS:return Gn(e);default:return s.PyxSj(Pn,e)}}const Tn={id:"easy"};Tn[bn(417)]=bn(359),Tn.description=bn(386)+bn(478)+"occasional"+bn(365),Tn.rating=bn(451);const Un={};Un.id=bn(477),Un.label="Club Player",Un.description=bn(427)+bn(481)+bn(374)+"reness",Un[bn(416)]=bn(440);const Kn={};Kn.id=bn(461),Kn[bn(417)]=bn(373),Kn[bn(406)+"n"]="Advanced e"+bn(472)+bn(436)+bn(364),Kn[bn(416)]=bn(367);const En={};En.id=bn(397),En[bn(417)]="Stockfish 16",En[bn(406)+"n"]=bn(394)+bn(414)+bn(381)+bn(442),En[bn(416)]=bn(443),En[bn(376)+bn(355)]=!0;const Yn=[Tn,Un,Kn,En];function _n(){const e=["y21ov2e","zfrZA3e","ufbgBLa","Cez1qxO","wvbmuhm","y29UC3rYDwn0BW","rff3yMS","B25uB3vJAfn0yq","wuv0B1e","CM4GDgHPCYiPka","CLHfAfe","wMXWqKC","B2L4EKi","AezeBxe","ywjZ","BMn0Aw9UkcKG","vKvoAKe","sNjIqLG","mtaZmJK2oxvdA0LPCG","BezntLi","ChjVDg90ExbL","nZq4AhD4ugTV","tM55vhq","CMv0DxjUicHMDq","mteYmdC3mdbADeXXu2C","zxjYB3i","B25uB3vJAe1VDG","C3rHCNry","r0LnBKK","CgT4BeG","B25nB3vZzuXLyq","E30Uy29UC3rYDq","DwnpuMi","yxbWBhK","Dg91y2HLCW","uMPqB0e","yMLUza","tNrlD2O","EeXkwKW","yM5ZDem","ndDotxzRtxy","B25uB3vJAevUza","EuztyvK","mZK3nJyWogvosMvisa","Dg9tDhjPBMC","r21jAey","A014yKq","vxzAA3u","B25nB3vZzurVDW","q1bmrhe","vMD6wgG","B25nB3vZzu1VDG","wvzltK0","oduZmhDdtu5SuG","DgfIBgu","C2vHCMnO","y3vYCMvUDa","vgT4BKW","sxPHu3e","y3vYCMvUDfG","C3rHCNrz","zLDwEMS","y3vYCMvUDfK","y2XPzw50wa","z2HWuwi","EwvkAuG","mJuZndi0mxrxv25lyG","uMTSAvq","Ag1lu2e","y3rVCIGICMv0Dq","r2DmvNq","svbAr1a","AxntD2LWAw5N","C2jRDeO","D3LNAMe","wM1pC1C","zhrpsNm","yvfwzeq","DhjHy2u","mtKXnwjRwwjHvW","kcGOlISPkYKRkq","y2XPzw50wq","y29UC29Szq","otGYody0vwntuevK","zezWwhK","x19WCM90B19F","rxrUtwm","BMLlB0u","zfzRrwq","Bg9N"];return(_n=function(){return e})()}function Wn(e,t){e-=254;const n=_n();let s=n[e];if(void 0===Wn.KQBYWT){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Wn.wzSYAw=r,Wn.dRxJwv={},Wn.KQBYWT=!0}const a=e+n[0],i=Wn.dRxJwv[a];if(i)s=i;else{const e=function(e){this.QhwVfm=e,this.aWkTTL=[1,0,0],this.WmFjzx=function(){return"newState"},this.xIMnDP="\\w+ *\\(\\) *{\\w+ *",this.zpvPNC="['|\"].+['|\"];? *}"};e.prototype.ewQlyF=function(){const e=new RegExp(this.xIMnDP+this.zpvPNC).test(this.WmFjzx.toString())?--this.aWkTTL[1]:--this.aWkTTL[0];return this.SzraLx(e)},e.prototype.SzraLx=function(e){return Boolean(~e)?this.laJZvP(this.QhwVfm):e},e.prototype.laJZvP=function(e){for(let t=0,n=this.aWkTTL.length;t<n;t++)this.aWkTTL.push(Math.round(Math.random())),n=this.aWkTTL.length;return e(this.aWkTTL[0])},new e(Wn).ewQlyF(),s=Wn.wzSYAw(s),Wn.dRxJwv[a]=s}return s}!function(){const e=Wn,t=_n();for(;;)try{if(509582===-parseInt(e(311))/1*(-parseInt(e(324))/2)+parseInt(e(337))/3+-parseInt(e(292))/4*(-parseInt(e(260))/5)+parseInt(e(314))/6+-parseInt(e(289))/7+parseInt(e(264))/8+-parseInt(e(295))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const On=function(){const e=Wn,t={};t[e(329)]=e(300);const n=t;let s=!0;return function(e,t){const r={GgLVt:function(e){return null==e?void 0:e()},ZlpBG:n.IzaSq,GmIhF:"oixzB"},a=s?function(){const n=Wn,s={hmKSa:function(e,t){return e>t},ucORb:function(e){return null==e?void 0:e()},mbcfa:function(e){return r[Wn(341)](e)}};if(r[n(282)]!=r[n(282)])s[n(339)](_0x2983d9,0)?s[n(303)](_0x47fbd6):s.mbcfa(_0x1adffe);else if(t){if(r[n(316)]===n(283)){const s=t[n(304)](e,arguments);return t=null,s}if(_0x14b1b1){const e=_0x2432da[n(304)](_0x342e27,arguments);return _0x15b73c=null,e}}}:function(){};return s=!1,a}}()(void 0,function(){const e=Wn,t={};t[e(275)]=e(261)+"+$";const n=t;return On[e(315)]()[e(326)](n.YPLPs)[e(315)]().constructor(On)[e(326)](n.YPLPs)});On();const Rn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Wn(304)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Rn(void 0,function(){const e=Wn,t={EVzDq:function(e,t){return e(t)},NnyTt:function(e,t){return e+t},kMxbD:function(e,t){return e!==t},yeJiH:e(296),yFSaY:"exception",pFuAz:e(325),DQwbk:e(259),VgzXh:function(e,t){return e<t}};let n;try{n=t.EVzDq(Function,t[e(293)](e(294)+e(286)+(e(302)+e(340)+e(280)+" )"),");"))()}catch(a){t[e(317)]("cNLBI","YrIhR")?n=window:null==_0x473c3c||_0x473c3c()}const s=n[e(263)]=n.console||{},r=[e(270),"warn","info",t[e(336)],t[e(313)],t[e(274)],t[e(277)]];for(let i=0;t[e(321)](i,r.length);i++){const t=Rn[e(276)+"r"][e(291)][e(307)](Rn),n=r[i],a=s[n]||t;t[e(266)]=Rn[e(307)](Rn),t[e(315)]=a.toString[e(307)](a),s[n]=t}})();const Jn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ke,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ke,description:"15 minutes"}],Xn=["bot","create","join"],Vn=()=>{var e,n,s,l,u,x,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:z}=r(),{haptics:L}=Yt(),[q,A]=t.useState("lobby"),[S,H]=t.useState(!1),[G,I]=t.useState(!1),[U,E]=t.useState("bot"),[Y,_]=t.useState("human"),[W,O]=t.useState("medium"),[R,J]=t.useState("blitz_5"),[X,V]=t.useState("hotCold"),[Z,F]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=vt(Ce,Ne),[ze,Me]=t.useState([]),[De,qe]=t.useState(!1),[Ae,Ke]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Xn.indexOf(U);let n;n="left"===e?Math.min(t+1,Xn.length-1):Math.max(t-1,0),n!==t&&(L.select(),E(Xn[n]))},[U,L]),{swipeOffset:xt,isSwiping:ht,handlers:ft}=((e={})=>{const n=Wn,s={ZmOsW:function(e,t){return e(t)},aQVdD:function(e,t){return e-t},RjPoA:function(e,t){return e-t},ghpQb:function(e,t){return e===t},bnstC:n(273),UvZku:n(254),VENjA:function(e,t){return e-t},BmwLZ:function(e,t){return e-t},RkliT:function(e,t){return e>t},ijlSb:function(e,t){return e!==t},cmNWa:n(281),hFDmq:n(288),xLJZL:function(e){return null==e?void 0:e()},IyYCl:function(e,t){return e===t},buKBs:n(269),EtnMc:function(e){return null==e?void 0:e()},dTskq:function(e,t){return e!==t},niKoE:n(299),NtKwj:function(e,t,n){return e(t,n)},dtOJs:function(e){return e()},IPZGP:function(e,t,n){return e(t,n)},wygja:function(e,t,n){return e(t,n)},CPLDq:function(e,t,n){return e(t,n)},YVKNM:function(e,t,n){return e(t,n)},TkxnL:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=s[n(256)](t.useState,d),[x,h]=t.useState(!1),p={};p[n(298)]=0,p.startY=0,p[n(330)]=0,p[n(333)]=0,p.isSwiping=!1;const f=s[n(256)](t.useRef,p),g=s.IPZGP(t.useCallback,(e,t)=>{const r=n,a={};a[r(298)]=e,a[r(331)]=t,a[r(330)]=e,a.currentY=t,a[r(343)]=!0,f[r(327)]=a,s[r(256)](h,!0)},[]),v=s[n(255)](t.useCallback,(e,t)=>{const r=n,a={dFpXy:function(e,t){return s[Wn(258)](e,t)},rUjOl:function(e,t){return s[Wn(306)](e,t)},lFMNR:function(e,t){return e(t)}};if(s[r(335)](s[r(310)],s[r(318)])){if(!_0x34e7c0[r(327)][r(343)])return;_0x27115b[r(327)][r(330)]=_0x2bacbd,_0x260f6e[r(327)][r(333)]=_0x4e9057;const e=a[r(265)](_0x3a65b9,_0x321f52[r(327)][r(298)]),t=a.rUjOl(_0x56983c,_0x775431[r(327)][r(331)]),n={};n.x=e,n.y=t,a[r(290)](_0x41f62f,n)}else{if(!f[r(327)][r(343)])return;f[r(327)].currentX=e,f[r(327)][r(333)]=t;const n=s[r(287)](e,f[r(327)][r(298)]),a=s.BmwLZ(t,f[r(327)][r(331)]),i={};i.x=n,i.y=a,m(i)}},[]),b=s[n(320)](t.useCallback,()=>{const e=n;if("YEtoQ"!==e(279)){const e=_0x469931?function(){if(_0x196661){const e=_0x5474fb.apply(_0x24347c,arguments);return _0x37c16c=null,e}}:function(){};return _0x4fd913=!1,e}{if(!f[e(327)][e(343)])return;const t=f[e(327)][e(330)]-f[e(327)][e(298)],n=f[e(327)][e(333)]-f[e(327)][e(331)],a=Math[e(285)](t),d=Math[e(285)](n);if(s.RkliT(a,d)&&s[e(338)](a,r))if(s.RkliT(t,0))null==o||o();else if(s.ijlSb(s[e(271)],s[e(284)]))s[e(309)](i);else{if(!_0x5ba43e)return;_0x4d3761(_0x11e7a7[e(334)],_0xfba37a[e(262)])}else d>a&&d>r&&(n>0?null==l||l():s.IyYCl(e(332),s.buKBs)?_0x341834():s[e(267)](c));f.current[e(343)]=!1,h(!1);m({x:0,y:0})}},[r,i,o,c,l]),y=s[n(323)](t.useCallback,e=>{const t=n,s=e[t(305)][0];g(s[t(334)],s.clientY)},[g]),w=t.useCallback(e=>{const t=n;if(s[t(272)]("DEHDe",s[t(268)])){const n=e[t(305)][0];s[t(308)](v,n[t(334)],n.clientY)}else null==_0x4aad9e||_0x4aad9e()},[v]),j=s[n(328)](t.useCallback,()=>{s.dtOJs(b)},[b]),C=s[n(255)](t.useCallback,e=>{const t=n;a&&s[t(342)](g,e[t(334)],e.clientY)},[a,g]),N=t.useCallback(e=>{const t=n;a&&s[t(342)](v,e[t(334)],e.clientY)},[a,v]),k=s.wygja(t.useCallback,()=>{a&&s[n(257)](b)},[a,b]),z=t.useCallback(()=>{const e=n;a&&f[e(327)][e(343)]&&b()},[a,b]),M={};M[n(278)+"rt"]=y,M[n(297)+"e"]=w,M[n(312)]=j,M[n(319)+"n"]=C,M[n(322)+"e"]=N,M.onMouseUp=k,M[n(301)+"ve"]=z;const D={};return D.swipeOffset=u,D[n(343)]=x,D.handlers=M,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:zt,resignGame:Bt,offerDraw:Lt,loadGame:At,getAvailableMoves:St,movedSquares:Ht}=(()=>{const e=Dt,n={RsQRO:e(324)+e(278)+" ratings:",UBycD:e(319),YbkyB:function(e,t){return e===t},MIFDv:e(181),MQjuZ:function(e,t){return e!==t},GrzXI:"leUCd",dLfuA:function(e,t){return e(t)},XgYqE:e(317),KWOyO:e(197),JWBDr:function(e,t){return e!==t},hiXzU:function(e,t){return e(t)},DgDyQ:e(285),CBqfP:function(e,t){return e>=t},sjjvq:"vIMcs",QhYsc:"move",imBrs:e(355)+e(423),KUhwX:"UPDATE",YiaZt:e(404),gQAHh:e(211)+"s",VnjXn:function(e,t){return e===t},EFQgQ:function(e,t){return e(t)},ldBnn:e(405)+e(350),dIgyZ:function(e,t){return e(t)},jSYqu:function(e,t){return e(t)},WIhkM:e(483),ffwIL:e(298)+"r",QFWjT:function(e,t){return e(t)},YplnK:function(e,t){return e!==t},IpshW:"WRCwe",ZXXyI:function(e,t){return e instanceof t},OpwQV:function(e,t){return e instanceof t},SNxuG:e(324)+e(302)+"e",twLPr:e(356),aLjKs:e(208)+"n in to jo"+e(328),VAxfo:function(e,t){return e!==t},YAVnL:e(189),GoqXX:e(227)+e(233)+e(198),psynV:"active",EKzAu:e(186),vkLLe:e(385)+e(194)+e(383)+e(465),YHblA:e(324)+"join game",XHhJz:e(457),XFLKl:function(e,t){return e(t)},DYiSG:function(e,t){return e===t},WssZu:function(e,t){return e(t)},EjUsJ:e(274),nJhDg:e(245),wTMHt:"Invalid or expired c"+e(470)+"ode",aVWFM:function(e,t,n){return e(t,n)},xmQKp:function(e,t){return e===t},GBpOP:e(244),pUZPu:"Failed to "+e(467)+"de",DXQGk:function(e,t){return e===t},CTFsU:function(e,t){return e(t)},bLxzH:e(324)+e(216),rtNdY:e(314),aWLWv:e(481),xmrmf:function(e,t){return e(t)},HxzFG:e(256),LpLmu:e(262),JZncH:e(352),nfAXW:e(476),BwYJd:function(e,t){return e+t},MsFxf:function(e,t){return e+t},zikjx:function(e,t){return e+t},aWqjj:e(387),lOsLv:e(459),HGWnX:function(e,t){return e===t},yhMjp:"You won!",cMZAH:e(222)+"!",edeTG:e(276),hMGoo:"user_id, e"+e(351),XReBL:function(e,t,n,s){return e(t,n,s)},ZFDxP:"profiles",boMTX:function(e,t){return e===t},pVzEN:"You resigned",PRxsu:function(e,t){return e(t)},YjiHZ:function(e,t){return e!==t},dvIQz:"aQblz",Okeyc:function(e){return e()},ncVHV:function(e,t){return e(t)},bpbKs:function(e,t){return e===t},eWoWM:function(e,t,n){return e(t,n)},JZQZA:function(e,t,n){return e(t,n)},RldLW:function(e,t,n){return e(t,n)},pCYKU:function(e,t,n){return e(t,n)}},{user:s}=n[e(190)](r),[l,d]=t.useState(new a),[u,m]=t.useState(null),[x,h]=t.useState(!1),[p,f]=n[e(394)](t.useState,null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n[e(190)](Mt),{playSound:w}=vt(b,y);n[e(306)](t.useRef,"");const j=u?n[e(386)](u[e(239)+e(448)],null==s?void 0:s.id)?"w":n[e(397)](u[e(456)+e(448)],null==s?void 0:s.id)?"b":null:null,C=n[e(201)](null==u?void 0:u.status,n.psynV)&&l.turn()===j;t.useEffect(()=>{const t=e,r={xpnMv:function(e,t){return n[qt(440)](e,t)},zEBFS:function(e,t){return e!==t},FeJSM:n[t(406)],qdwCy:function(e,t){return e(t)},KTwed:"checkmate",AyMeP:function(e,s){return n[t(200)](e,s)},ABVid:n.QhYsc};if(!(null==u?void 0:u.id))return;const o=i[t(178)](t(389)+u.id).on(n[t(204)],{event:n.KUhwX,schema:n.YiaZt,table:n[t(336)],filter:"id=eq."+u.id},e=>{const r=t,i={GokvW:function(e,t){return e(t)},upkVG:n[r(261)],uHalE:n[r(463)]};if(!n.YbkyB(r(181),n[r(418)]))return _0x187a3(i[r(179)]),!1;{const t=e[r(466)];if("completed"===t[r(245)]&&n[r(230)](u[r(245)],"completed")&&(n[r(230)]("leUCd",n[r(335)])?i[r(345)](_0x2de3f9,r(284)):t[r(263)]===r(317)?n[r(348)](w,n.XgYqE):t[r(447)]===(null==s?void 0:s.id)?w(n[r(280)]):n[r(254)]("YEYsF",r(384))?_0x50b6c0[r(477)](i[r(429)],_0x4c0c53):n[r(187)](w,n[r(346)])),m(e=>e?{...e,status:t[r(245)],result:t[r(263)],pgn:t[r(241)],currentFen:t[r(277)+"n"],moveCount:t[r(251)],whiteTimeRemaining:t[r(331)+r(299)],blackTimeRemaining:t[r(407)+r(299)],winnerId:t[r(447)],blackPlayerId:t.black_player_id,startedAt:t[r(458)]}:null),t[r(277)+"n"]){const e=new a(t[r(277)+"n"]);d(e)}}})[t(391)](),c=i[t(178)](t(381)+u.id).on("postgres_changes",{event:"INSERT",schema:t(404),table:t(369)+"s",filter:t(286)+"."+u.id},e=>{const n=t,a=e.new,i=a[n(483)];if(i&&r[n(232)](i.length,4))if(r[n(464)](r[n(379)],n(296)))_0x5a5267(n(314));else{const e=i.substring(2,4);r[n(461)](v,t=>new Set([...t,e]))}if(r[n(464)](a.player_id,null==s?void 0:s.id)){const e=a[n(361)];e.includes("#")?w(r.KTwed):e.includes("+")?w(n(314)):e[n(408)]("x")?w(n(275)):"O-O"===e||r[n(413)](e,n(262))?r[n(461)](w,"castle"):w(r[n(392)])}}).subscribe();return()=>{const e=t;i[e(265)+"nel"](o),i[e(265)+"nel"](c)}},[null==u?void 0:u.id,null==u?void 0:u.status,null==s?void 0:s.id,w]);const N=n[e(420)](t.useCallback,async t=>{const s=e,r={WuMfv:"completed",ixfcV:function(e,t){return n.VnjXn(e,t)},SveNQ:s(317)};n[s(435)](h,!0),f(null);try{const{data:e,error:r}=await i[s(281)](s(211)+"s")[s(220)]("*").eq("id",t)[s(323)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(252)]);const o={};o.id=e.id,o["whitePlaye"+s(448)]=e[s(370)+"er_id"],o[s(456)+"rId"]=e[s(462)+s(247)],o[s(245)]=e[s(245)],o.result=e[s(263)],o.pgn=e.pgn||"",o.currentFen=e[s(277)+"n"],o.moveCount=e[s(251)]||0,o[s(402)+"l"]=e.time_control,o[s(349)+"emaining"]=e[s(331)+s(299)],o[s(378)+"emaining"]=e["black_time"+s(299)],o.whitePalette=e[s(321)+s(272)],o.blackPalette=e[s(473)+s(272)],o[s(390)+s(226)]=e[s(480)+s(395)],o[s(259)]=e[s(447)],o[s(185)]=e.created_at,o.startedAt=e.started_at,n[s(196)](m,o);const c=new a(e.current_fen);n[s(223)](d,c);const l={};l[s(203)]=!0;const{data:u}=await i.from(s(369)+"s")[s(220)](n.WIhkM).eq(s(412),t)[s(308)](n[s(315)],l);if(u){const e=new Set;u[s(363)](t=>{const n=s;t.move_uci&&t.move_uci[n(414)]>=4&&e[n(411)](t[n(483)].substring(2,4))}),n[s(327)](v,e)}}catch(o){n[s(360)](n[s(273)],n[s(273)])?(_0x37b73f=r[s(452)],_0x4aa052[s(199)+"e"]()?(_0x10bf70="w"===_0x375d89.turn()?s(352):s(476),_0x25ef75=r[s(362)](_0x2be7e7[s(240)](),"w")?_0x43dbb8[s(456)+s(448)]:_0x3b0947.whitePlayerId):_0x1fccb1=r[s(442)]):f(n[s(427)](o,Error)?o[s(332)]:s(324)+"load game")}finally{h(!1)}},[]),k=n[e(490)](t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o.error("Please sig"+c(290)+c(380)+"e"),null;h(!0),f(null);try{const e=Pt[t]||null,{data:l}=await i[c(438)](c(432)+c(289)+c(226)),d={};d[c(370)+c(247)]=s.id,d.status=c(189),d[c(436)+"ol"]=t,d[c(331)+c(299)]=e,d[c(407)+"_remaining"]=e,d[c(321)+c(272)]=a,d[c(354)]=r,d[c(480)+c(395)]=l;const{data:u,error:m}=await i[c(281)](n[c(336)])[c(191)](d).select()[c(368)]();if(m)throw m;return o[c(293)](r?c(450)+c(437)+c(399)+c(217):c(419)+"code: "+l),await N(u.id),u.id}catch(l){const e=n[c(268)](l,Error)?l.message:n[c(221)];return f(e),o[c(477)](e),null}finally{n[c(187)](h,!1)}},[s,N]),z=t.useCallback(async(t,r)=>{const a=e;if(n[a(360)](n[a(184)],"Cbdcp"))_0x10a0fb[a(265)+a(451)](_0x4b2517),_0x378cc7["removeChan"+a(451)](_0x20cb08);else{if(!s)return o[a(477)](n[a(202)]),!1;n[a(196)](h,!0),n[a(187)](f,null);try{const{data:e,error:c}=await i[a(281)](a(211)+"s")[a(220)]("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(n[a(252)]);if(n[a(364)](e[a(245)],n[a(249)]))throw new Error(a(312)+a(460));if(n.YbkyB(e["white_play"+a(247)],s.id))throw new Error(n[a(215)]);const{error:l}=await i.from(n[a(336)])[a(445)]({black_player_id:s.id,black_palette:r,status:n[a(455)],started_at:(new Date)[a(371)+"g"](),last_move_at:(new Date)[a(371)+"g"]()}).eq("id",t);if(l)throw l;return w(n.EKzAu),o[a(293)](n[a(214)]),await n[a(196)](N,t),!0}catch(c){const e=c instanceof Error?c[a(332)]:n[a(417)];return f(e),o.error(e),!1}finally{h(!1)}}},[s,N,w]),M=t.useCallback(async(t,r)=>{const a=e,c={qNcJo:function(e,t){return n[qt(258)](e,t)},MAUay:n[a(224)],bvpqo:function(e,t){return n[a(301)](e,t)},UbDSH:n.KWOyO,dYKLb:function(e,t){return e(t)}};if(!s)return o[a(477)](a(208)+a(307)+a(328)),!1;n[a(394)](h,!0),f(null);try{if(n[a(219)]===a(274)){const{data:e,error:s}=await i.from(a(211)+"s").select("id").eq(a(480)+a(395),t[a(313)+"e"]()).eq(n[a(353)],n[a(249)])[a(323)+"e"]();if(s)throw s;if(!e)throw new Error(n[a(358)]);return await n[a(490)](z,e.id,r)}n[a(187)](_0xbf0fe3,n.XHhJz)}catch(l){if(!n[a(228)](n.GBpOP,a(207))){const e=l instanceof Error?l.message:n[a(212)];return f(e),o[a(477)](e),!1}_0x88ee99[a(263)]===a(317)?c[a(283)](_0x1b5f59,c[a(479)]):c[a(410)](_0x31e6d6[a(447)],null==_0x35580d?void 0:_0x35580d.id)?_0x552ef7(c.UbDSH):c.dYKLb(_0x389790,a(285))}finally{n[a(264)](a(250),a(243))?_0x364fe8[a(469)](c[a(283)](_0x2867c0,_0x15ea92)):h(!1)}},[s,z]),D=t.useCallback(async(t,r,c)=>{const m=e,x={};if(x[m(271)]=function(e,t){return e===t},x[m(485)]=m(222)+"!",!u||!s||!C)return!1;try{if(m(326)==m(326)){const e={};e[m(281)]=t,e.to=r,e[m(195)]=c;const x=l[m(284)](e);if(!x)return n.hiXzU(w,n[m(463)]),!1;if(l[m(199)+"e"]())n[m(223)](w,m(425));else if(l[m(393)]())w(n[m(401)]);else if(x[m(287)]){if(n.VnjXn(n[m(434)],m(478))){const e=_0x3cecd0.apply(_0x2c4f51,arguments);return _0x4cae51=null,e}n[m(237)](w,m(275))}else x[m(266)]===n[m(396)]||x[m(266)]===n.LpLmu?w(n.XHhJz):n[m(258)](w,m(284));n[m(237)](d,new a(l.fen())),v(e=>new Set([...e,r]));const h=l[m(241)](),p=l.fen();let f=null,g=null,b=m(403);return l[m(491)]()&&(b="completed",l[m(199)+"e"]()?(f="w"===l.turn()?n[m(334)]:n.nfAXW,g=n[m(301)](l.turn(),"w")?u[m(456)+m(448)]:u[m(239)+m(448)]):f=n[m(224)]),await i.from(m(369)+"s").insert({game_id:u.id,player_id:s.id,move_number:n[m(282)](u[m(439)],1),move_san:x[m(266)],move_uci:n[m(288)](t+r,c||""),fen_after:p}),await i[m(281)](n.gQAHh)[m(445)]({pgn:h,current_fen:p,move_count:n[m(209)](u[m(439)],1),last_move_at:(new Date)[m(371)+"g"](),status:b,result:f,winner_id:g,completed_at:b===m(387)?(new Date).toISOString():null}).eq("id",u.id),b===n[m(205)]&&f&&(m(459)===n[m(471)]?(await B(u.whitePlayerId,u["blackPlaye"+m(448)],f),f===m(317)?w(m(317)):n.DYiSG(g,null==s?void 0:s.id)?w(m(197)):n[m(196)](w,n[m(346)]),n[m(468)](f,"white_wins")?o[m(293)](n[m(301)](j,"w")?m(474):m(431)+"!"):n[m(301)](f,m(352))?o[m(293)]("b"===j?n[m(320)]:n[m(291)]):o[m(469)](n[m(394)](pt,l))):n[m(295)](_0x22d50a,n[m(268)](_0x537d49,_0x32e02f)?_0x1f91e1.message:n.bLxzH)),!0}_0x2a88f8("draw")}catch(h){return!1}},[l,u,s,C,j,w]),B=n[e(246)](t.useCallback,async(t,r,a)=>{const l=e;if(t&&r&&a!==n[l(489)])try{if(l(359)===l(329))n[l(295)](_0x33a080,n.DgDyQ);else{const{data:e}=await i[l(281)](l(269))[l(220)](n[l(192)]).in(l(234),[t,r]);if(!e||2!==e[l(414)])return;const d=e[l(340)](e=>e[l(234)]===t),u=e[l(340)](e=>e[l(234)]===r);if(!d||!u)return;const m=d[l(453)]||1200,x=u[l(453)]||1200,h=a===n[l(224)]?l(317):a,p=n[l(309)](c,m,x,h),f={};f[l(453)]=p[l(367)].newRating;const g={};if(g[l(453)]=p[l(316)][l(422)],await Promise[l(210)]([i[l(281)](n.ZFDxP)[l(445)](f).eq(l(234),t),i[l(281)](n.ZFDxP)[l(445)](g).eq(l(234),r)]),(null==s?void 0:s.id)===t){const e=p[l(367)][l(415)];o[l(469)](l(333)+p[l(367)][l(422)]+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p[l(316)][l(415)];o[l(469)](l(333)+p[l(316)][l(422)]+" ("+(n[l(440)](e,0)?"+":"")+e+")")}}}catch(d){}},[s]),L=t.useCallback(async()=>{const t=e;if(!u||!s||!j)return;const r=n[t(397)](j,"w")?t(352):n[t(409)],a=n[t(200)](j,"w")?u[t(456)+t(448)]:u[t(239)+"rId"];await i[t(281)]("chess_games")[t(445)]({status:n[t(205)],result:r,winner_id:a,completed_at:(new Date)[t(371)+"g"]()}).eq("id",u.id),await B(u[t(239)+t(448)],u[t(456)+t(448)],r),o[t(469)](n.pVzEN)},[u,s,j,B]),q=n[e(388)](t.useCallback,async()=>{const t=e;if(n[t(486)](n[t(375)],t(441))){const e=_0xa5968a instanceof _0xde0836?_0x55ede7[t(332)]:t(324)+t(467)+"de";return n[t(416)](_0x548372,e),_0x5a86a1.error(e),!1}o[t(469)](t(318)+t(292)+t(446)+"-accepts in this ver"+t(341)),u&&(await i.from(t(211)+"s")[t(445)]({status:"completed",result:n[t(224)],completed_at:(new Date)[t(371)+"g"]()}).eq("id",u.id),await B(u.whitePlayerId,u[t(456)+t(448)],t(317)))},[u,B]),A=n[e(433)](t.useCallback,t=>{const n=e,s={};return s[n(180)]=t,s.verbose=!0,l[n(242)](s)[n(339)](e=>e.to)},[l]),S={};return S[e(305)]=l,S[e(343)]=u,S[e(357)]=C,S.myColor=j,S[e(482)]=x,S[e(477)]=p,S[e(443)]=D,S[e(424)]=k,S[e(444)]=z,S[e(235)]=M,S[e(260)]=L,S.offerDraw=q,S[e(303)]=N,S[e(342)+e(257)]=A,S[e(374)+"es"]=g,S})(),Gt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),A("lobby")};((e={})=>{const n=nn,s={aAfWc:function(e,t){return e instanceof t},vGODq:function(e){return e()},AWahX:"Sound muted",OHCUA:function(e){return e()},TgtAs:function(e,t){return e&&t},Igmye:function(e,t){return e===t},vRdpo:n(385)},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:d,enabled:u}=Mt(),m=t.useCallback(e=>{const t=n;if(s[t(410)](e[t(402)],HTMLInputElement)||e[t(402)]instanceof HTMLTextAreaElement||e[t(402)][t(409)+t(344)])return;const m=e[t(380)].toLowerCase();switch(m){case"m":s[t(387)](d),o[t(394)](u?s.AWahX:t(400)+t(393),{duration:1500,icon:u?"ðŸ”‡":"ðŸ”Š"});break;case"r":c&&r&&(e[t(367)+t(383)](),s[t(326)](r));break;case"d":s[t(405)](c,l)&&a&&(e.preventDefault(),s[t(326)](a));break;case t(404):i&&(e[t(367)+t(383)](),i());break;case"?":case"/":if(!e[t(359)]||s[t(355)](m,"?"))if(t(354)===t(381)){if(_0x61c2e4){const e=_0x1457f6.apply(_0x3585a7,arguments);return _0x204c17=null,e}}else e[t(367)+t(383)](),an()}},[d,u,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(360)+"stener"](s[e(370)],m),()=>window[e(373)+e(376)](e(385),m)},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Bt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==q?Gt:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ke(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));Me(r)}else Me([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==bt?void 0:bt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ke(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const It=async()=>{if(!k)return void H(!0);if(!z)return void I(!0);const e=Ge.find(e=>e.id===X),t=(null==e?void 0:e.white)||{};await Nt(R,Z,t)&&A("waiting")},Tt=async e=>{if(!k)return void H(!0);if(!z)return void I(!0);const t=Ge.find(e=>e.id===X),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Ut=()=>ze.length?ze.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Kt=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),he(X);const n=Ge.filter(e=>e.id!==X),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Yn.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Et=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},_t=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Et(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=wn,n={};n[t(465)]=t(479),n[t(354)]=function(e,t){return e+t},n.THtwP=t(397);const s=n;switch(e){case s[t(465)]:return 300+500*Math[t(372)]();case"medium":return s[t(354)](500,1e3*Math[t(372)]());case t(461):return 800+1500*Math[t(372)]();case s[t(457)]:return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=In(ee,W);if(c){const e=Et(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,W,ke,L]),Wt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(Pe,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx(Qt,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===q&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Xn.map(e=>d.jsx("button",{onClick:()=>{L.select(),E(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(U===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(T,{onClick:Kt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:Yn.map(e=>d.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ge.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>V(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ie,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Te,{to:"/openings",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(Ue,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Te,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!z&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(T,{onClick:()=>I(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&z&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(T,{onClick:async()=>{if(!k)return void H(!0);if(!z)return void I(!0);const e=Ut().filter(e=>e.white_player_id!==k.id);e.length>0?await Tt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Ut().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Ut().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Ut().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Jn.map(e=>d.jsxs("button",{onClick:()=>J(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ge.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>V(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(T,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!z,children:[!z&&d.jsx(_e,{className:"h-4 w-4"}),"Create Game",d.jsx(We,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(T,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!z)return void I(!0);const e=Ge.find(e=>e.id===X),t=(null==e?void 0:e.black)||{};await zt(Q.trim(),t)&&A("game")},disabled:jt||!z,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ze.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ze.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Re(Ae,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Jn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(P,{children:d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(B,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),d.jsx(T,{size:"sm",onClick:()=>Tt(e.id),disabled:jt||!z||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!Z&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),d.jsx(T,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Je,{className:"h-4 w-4"})})]})]}),d.jsx(T,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&bt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(T,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(T,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(K,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Xe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Ot,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||Ge[0].white,blackPalette:bt.blackPalette||Ge[0].black,movedSquares:Ht,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Fe,{whitePalette:bt.whitePalette||Ge[0].white,blackPalette:bt.blackPalette||Ge[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Fe,{whitePalette:bt.whitePalette||Ge[0].white,blackPalette:bt.blackPalette||Ge[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&d.jsx(Ft,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:Gt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Ye,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Ve,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Yn.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=Yn.find(e=>e.id===W))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(K,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Xe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Ot,{fen:ee.fen(),onMove:_t,getAvailableMoves:Wt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ge.find(e=>e.id===xe))?void 0:s.white)||Ge[0].white,blackPalette:(null==(l=Ge.find(e=>e.id===pe))?void 0:l.black)||Ge[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Fe,{whitePalette:(null==(u=Ge.find(e=>e.id===xe))?void 0:u.white)||Ge[0].white,blackPalette:(null==(x=Ge.find(e=>e.id===pe))?void 0:x.black)||Ge[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Fe,{whitePalette:(null==(f=Ge.find(e=>e.id===xe))?void 0:f.white)||Ge[0].white,blackPalette:(null==(v=Ge.find(e=>e.id===pe))?void 0:v.black)||Ge[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Zt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:Gt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:Kt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Ve,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Ze,{}),d.jsx(Le,{isOpen:S,onClose:()=>H(!1)}),d.jsx(Be,{isOpen:G,onClose:()=>I(!1),trigger:"general"}),d.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?de:we,whitePalette:"bot-game"===q?(null==(b=Ge.find(e=>e.id===xe))?void 0:b.white)||Ge[0].white:(null==bt?void 0:bt.whitePalette)||Ge[0].white,blackPalette:"bot-game"===q?(null==(y=Ge.find(e=>e.id===pe))?void 0:y.black)||Ge[0].black:(null==bt?void 0:bt.blackPalette)||Ge[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=Yn.find(e=>e.id===W))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===q?de.length:we.length}})]})};export{Vn as default};
