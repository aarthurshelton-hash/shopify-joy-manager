var e,t=Object.defineProperty,n=(e,n,s)=>((e,n,s)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s)(e,"symbol"!=typeof n?n+"":n,s);import{aJ as s,r,ew as a,s as c,j as i,C as o,p as l,t as d,L as u,w as x,x as h,aq as f,B as m,aF as g,v as j,cR as v,y,b8 as p,b9 as w,ba as N,bb as C,bc as b,a8 as B,aB as z,aC as D,aD as L,b4 as M,aE as q,aY as G,bh as P,cb as A,ad as k,eD as U}from"./index-DBmMOexX.js";import{A as S,a as I,b as K}from"./alert-BxFhRuHd.js";import{T as Y,a as O,b as W,c as _,d as T,e as E}from"./table-DG3twvpc.js";import{C as H}from"./circle-alert-f5UXzfIq.js";import{W as J}from"./wifi-off-BOTaa9kW.js";import{W as Z}from"./wifi-BfDKnOO6.js";import{B as R}from"./briefcase-D4m6Iy09.js";import{T as V}from"./trending-down-CxCJGvVN.js";const X=s("Bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),F=s("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),Q=ae;!function(){const e=ae,t=te();for(;;)try{if(449639===parseInt(e(280))/1*(-parseInt(e(250))/2)+-parseInt(e(291))/3*(parseInt(e(293))/4)+parseInt(e(302))/5+parseInt(e(282))/6*(parseInt(e(296))/7)+parseInt(e(303))/8+-parseInt(e(249))/9+-parseInt(e(294))/10*(parseInt(e(259))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const $=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ae(292)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ae;return $[e(283)]()[e(279)]("(((.+)+)+)+$")[e(283)]()[e(276)+"r"]($).search(e(264)+"+$")});$();const ee=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ae(292)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function te(){const e=["vfLUsM0","y29UC3rYDwn0BW","zxHJzxb0Aw9U","C3rYAw5NAwz5","C2vHCMnO","mtfvzLvrrei","y2XPzw50swq","mJu3mtbuz1rzBhi","Dg9tDhjPBMC","z2f0zxDHEuHVCW","AhLfDu8","EhDdz2e","CMvTB3zLsxrLBq","yNjPzgDLvxjS","D2fYBG","uKDgq24","ndu0nJjStKztA3C","yxbWBhK","mtjHAKzKzLO","mtbcEfbiDg4","EhPmrum","mti1m3DOreHAtW","DgfIBgu","z2v0sxrLBq","t1fxtuC","y2HkqK0","ywXOB3n0oJqWma","odi3ntiWDfztt2vz","mti3mZG3mMTIuM1bAG","mJCZmdK2s25jz1Dh","nZa5ntHYsgLYtLK","BgvUz3rO","CMv0DxjUicHMDq","zgnADuS","BMn0Aw9UkcKG","BNbqy1m","E30Uy29UC3rYDq","y3rVCIGICMv0Dq","Dw5KzwzPBMvK","mtKZnJqYownQy2Dqqq","A2jgrfO","weXxzLG","Cezyv3q","z2f0zxDHEvbVCG","kcGOlISPkYKRkq","C2v0sxrLBq","x19WCM90B19F","zxjYB3i","y29UC29Szq","Aw5MBW","zNzJzNO","wvzzzxG","Ahr0CdOVl2XVyW","mti3lJaUmc4X","yMLUza"];return(te=function(){return e})()}ee(void 0,function(){const e=ae,t={arpaY:function(e,t){return e(t)},YVYUV:function(e,t){return e+t},Ojqqz:"{}.constru"+e(257)+'rn this")( )',emOfi:function(e){return e()},chJBM:"log",XLWfX:e(289),kbFDZ:e(269),xwCga:function(e,t){return e<t}},n=t.emOfi(function(){const n=e;let s;try{s=t.arpaY(Function,t.YVYUV(n(252)+n(254),t.Ojqqz)+");")()}catch(r){s=window}return s}),s=n.console=n[e(268)]||{},r=[t[e(300)],t[e(261)],t[e(260)],e(267),e(277),e(297),"trace"];for(let a=0;t[e(286)](a,r[e(251)]);a++){const t=ee[e(276)+"r"].prototype[e(274)](ee),n=r[a],c=s[n]||t;t[e(266)]=ee.bind(ee),t[e(283)]=c.toString[e(274)](c),s[n]=t}})();const ne=Q(272)+Q(301)+"0",se={};se[Q(288)]=ne,se[Q(284)+"t"]=Q(273),se[Q(263)+"t"]=4002,se[Q(281)]=1;const re=se;function ae(e,t){e-=249;const n=te();let s=n[e];if(void 0===ae.zaSBfg){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ae.WPYoXA=r,ae.mkOfXG={},ae.zaSBfg=!0}const a=e+n[0],c=ae.mkOfXG[a];if(c)s=c;else{const e=function(e){this.RnXRvh=e,this.ErlrjP=[1,0,0],this.knyqOb=function(){return"newState"},this.kYCaGa="\\w+ *\\(\\) *{\\w+ *",this.dUTFmj="['|\"].+['|\"];? *}"};e.prototype.HNfhgZ=function(){const e=new RegExp(this.kYCaGa+this.dUTFmj).test(this.knyqOb.toString())?--this.ErlrjP[1]:--this.ErlrjP[0];return this.assdTA(e)},e.prototype.assdTA=function(e){return Boolean(~e)?this.EdMFTZ(this.RnXRvh):e},e.prototype.EdMFTZ=function(e){for(let t=0,n=this.ErlrjP.length;t<n;t++)this.ErlrjP.push(Math.round(Math.random())),n=this.ErlrjP.length;return e(this.ErlrjP[0])},new e(ae).HNfhgZ(),s=ae.WPYoXA(s),ae.mkOfXG[a]=s}return s}function ce(){const e=Q,t={YVYex:function(e){return e()},BBGqA:function(e,t){return e+t},pFXWt:function(e,t){return e===t},dcZuK:e(258),RGFCn:e(255),xzLEC:function(e,t){return e===t},hyEuO:e(299),TYnJm:e(270)};if(t[e(262)](typeof window,t[e(253)]))return re;const n=localStorage[e(298)]("ib_gateway_bridge_url");if(n){if("npPcS"!==t[e(290)]){let t;try{t=_0x3855f7(lsaJcQ.BBGqA(e(252)+e(254),e(256)+e(257)+'rn this")( )')+");")()}catch(s){t=_0x3c8fb1}return t}try{return t[e(295)](t[e(285)],t[e(275)])?t[e(271)](_0x887189)[e(288)]:{...re,...JSON.parse(n)}}catch{return re}}return re}function ie(){const e=Q;return(t=ce,t())[e(288)];var t}const oe=de;!function(){const e=de,t=xe();for(;;)try{if(445240===-parseInt(e(470))/1+parseInt(e(463))/2*(parseInt(e(485))/3)+-parseInt(e(506))/4*(-parseInt(e(499))/5)+parseInt(e(562))/6*(parseInt(e(448))/7)+-parseInt(e(527))/8+-parseInt(e(500))/9+-parseInt(e(453))/10*(-parseInt(e(450))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const le=function(){const e={RdShY:function(e,t){return e===t}},t=e;let n=!0;return function(e,s){const r=de;if(t[r(486)](r(481),"qkBXa"))return _0x21feb1[r(496)](r(553)+r(541)+r(577),_0x2317a2),[];{const t=n?function(){if(s){const t=s[r(494)](e,arguments);return s=null,t}}:function(){};return n=!1,t}}}()(void 0,function(){const e=de,t={};t[e(462)]=e(588)+"+$";const n=t;return le.toString()[e(518)](n.DiiED)[e(579)]()[e(503)+"r"](le)[e(518)](n[e(462)])});function de(e,t){e-=448;const n=xe();let s=n[e];if(void 0===de.orodSo){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};de.WboTzr=r,de.gcUoEb={},de.orodSo=!0}const a=e+n[0],c=de.gcUoEb[a];if(c)s=c;else{const e=function(e){this.ROjQAQ=e,this.LCObqb=[1,0,0],this.gmwosX=function(){return"newState"},this.TMVZvj="\\w+ *\\(\\) *{\\w+ *",this.ayWszw="['|\"].+['|\"];? *}"};e.prototype.xPGqNu=function(){const e=new RegExp(this.TMVZvj+this.ayWszw).test(this.gmwosX.toString())?--this.LCObqb[1]:--this.LCObqb[0];return this.Mnhllj(e)},e.prototype.Mnhllj=function(e){return Boolean(~e)?this.RNgRxz(this.ROjQAQ):e},e.prototype.RNgRxz=function(e){for(let t=0,n=this.LCObqb.length;t<n;t++)this.LCObqb.push(Math.round(Math.random())),n=this.LCObqb.length;return e(this.LCObqb[0])},new e(de).xPGqNu(),s=de.WboTzr(s),de.gcUoEb[a]=s}return s}le();const ue=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[de(494)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function xe(){const e=["x19WCM90B19F","Ev0GugXHy2uGBW","v2XSzhi","z2v0uxvVDgu","B3jKzxjjza","y29UBMvJDa","zgLZy29UBMvJDa","zxjZigvYCM9YoG","Bwv0Ag9K","Dg9tDhjPBMC","qxvZu1e","ELfNq0S","zhLNy0i","BgvUz3rO","AMPou3a","z2f0zxDHEvbVCG","ue9tva","Cg9YDa","kcGOlISPkYKRkq","mtrWs3jMz0G","A0rvyKC","mZnRwKLAswm","y29UDhjHy3qGzq","C3vIBwL0DgvK","mZuXndC3mg9mCLL3BW","Ev0Gu2vHCMnOia","tNnpBNi","DMn3Bvu","y2DvCgi","y2HLy2TdB25Uzq","yNjPzgDLuNvUBG","E30Uy29UC3rYDq","r0vu","rgLPruq","mJj4B0TLBw4","rMDSB0C","tuTSr0C","l2fWAs9VCMrLCG","y2fUy2vSt3jKzq","y3rVCIGICMv0Dq","zLbcuwq","nti0nduZA3H1Bvjp","swHWwfm","uNjctfm","CgfWzxjuCMfKAq","CMv0DxjUicHMDq","CNjVCJO","l2fWAs9XDw90zq","t0nhr0e","ChjVDg90ExbL","z3vlwLe","v2DKv0y","CvHmCM4","tgPftfK","AwiT","rKnLzNm","nJKYndniwurYCg8","uMrtAfK","zeDJv1q","Ev0Gr2v0igfJyW","AeXUAfe","l2fWAs9ZDgf0Dq","zMjnzLi","u2Xmy2u","l2fWAs9WB3nPDa","yxbWBhK","B3vUDhmGzxjYBW","zxjYB3i","zhrgwhK","y3rPB24","mte0nvnyrgnADa","mZqZnJeXD3r6AwnU","y29UDhjHy3rZ","yxv0AgvUDgLJyq","y29UC3rYDwn0BW","CMrLCIbLCNjVCG","zNDkDKS","mteYngTQwvbrwq","l2fWAs9KAxnJBW","zxHJzxb0Aw9U","y0vwA2C","ANnVBG","q29UDgvUDc1uEq","EM9vCNC","zvDLDKK","Bg9N","BNrZ","Cg9ZAxrPB25Z","BNrjzd0","C2vHCMnO","l2fWAs9JB25Uzq","wLfVzu8","l2fWAs9ZzwfYyW","z2f0zxDHEuHVCW","Ev0GqNjPzgDLia","Ag9ZDa","zwzoCKW","BxLrsLi","mJK3mtqWmgTYAKTxta","yMXLoG","DgfIBgu","B3i6","CeHyBfC","Ad9ZEw1IB2W9","yMPTy0O","ALnWBee","Aw5N","CgXHy2vpCMrLCG","DgvK","z2v0qwnJB3vUDa","BM90igf2ywLSyq","Be1cuMO","Ev0Gr2v0ig9Yza","BM5Ly3q","BI9QC29U","C3rYAw5NAwz5","p2nVBMLKpq","zfv3zhG","igvYCM9YoG","y29UBMvJDgvK","tvLSwwO","CgXdB1m","ywnJB3vUDhm","l2fWAs9Hy2nVDq","w0LcieDHDgv3yq","yMLUza","y2XPzw50swq","wMDRCKG","C2vHCMnOq29UDa","revmrvrf","DhjHy2u","CM4GDgHPCYiPka","B3jKzxjZ","mtK4nZHUDMXeB0m","z2v0t3jKzxjZ","rfbpqxe","y29UC29Szq","AxrPB25ZigvYCG","B3jKzxiGzxjYBW","D2fYBG","EfnhqKS"];return(xe=function(){return e})()}ue(void 0,function(){const e=de,t={guKZQ:function(e,t){return e+t},kDUbG:function(e){return e()},IhpXS:e(514),FCefs:e(568),dGcWT:"info",qUXVh:"error",LjELY:e(508),sLnNG:e(529),LMeWQ:e(559),SlLce:function(e,t){return e<t}},n=t[e(449)](function(){const n=e;let s;try{s=Function(t[n(479)](n(474)+"nction() "+(n(460)+n(468)+n(560))+" )",");"))()}catch(r){s=window}return s}),s=n[e(565)]=n[e(565)]||{},r=[t[e(471)],t[e(484)],t[e(487)],t.qUXVh,t[e(482)],t.sLnNG,t.LMeWQ];for(let a=0;t[e(492)](a,r[e(583)]);a++){const t=ue.constructor[e(478)][e(554)](ue),n=r[a],c=s[n]||t;t[e(570)]=ue[e(554)](ue),t[e(579)]=c[e(579)][e(554)](c),s[n]=t}})();class he{constructor(){n(this,e,!1)}async[(e=oe(548),oe(458)+oe(498))](){const e=oe,t={NsOnr:function(e){return e()},OCGGA:e(461),fPBQd:function(e,t){return e===t},rqaMw:function(e,t){return e!==t}};try{const n=ce(),s={};s[e(511)+"pe"]="applicatio"+e(543);const r=await fetch(t[e(455)](ie)+(e(490)+"s"),{method:t[e(477)],headers:s});if(!r.ok){const t={};return t[e(548)]=!1,t[e(502)+e(537)]=!1,t[e(473)+"ng"]=!1,t}const a=await r[e(510)]();return this[e(548)]=t[e(469)](a.connected,!0),{connected:!0===a[e(459)+e(535)],authenticated:t[e(469)](a.connected,!0),paperTrading:4002===n[e(585)+"t"]}}catch(n){if(t.rqaMw(e(491),e(491))){const t={};return t[e(548)]=!1,t[e(502)+"ted"]=!1,t[e(473)+"ng"]=!1,t}{const t={};return t[e(548)]=!1,t[e(502)+e(537)]=!1,t[e(473)+"ng"]=!1,t}}}async[oe(575)](){const e=oe,t={DPOAq:function(e){return e()},cEVkg:function(e,t,n){return e(t,n)},RToqS:function(e){return e()},hLnhQ:"applicatio"+e(543),bjmcJ:e(553)+"y] Connect"+e(547)};try{const n=t[e(564)](ce),s={};s[e(524)]=n[e(522)+"t"],s[e(587)]=n[e(585)+"t"],s[e(555)]=n[e(555)];const r=await t[e(509)](fetch,t.RToqS(ie)+(e(519)+"ct"),{method:e(586),headers:{"Content-Type":t[e(489)]},body:JSON[e(544)](s)});if(!r.ok)return!1;const a=await r.json();return this[e(548)]=!0===a[e(548)],this[e(548)]}catch(n){return!1}}async[oe(576)](){const e=oe,t={ZgkrH:function(e,t,n){return e(t,n)},zzrzr:function(e){return e()}};try{const n={};n[e(578)]=e(586),await t[e(556)](fetch,t.zzrzr(ie)+(e(507)+e(542)),n),this.connected=!1}catch{}}async[oe(538)+"s"](){const e=oe,t={AusSQ:function(e,t){return e(t)},ZQoeO:e(553)+e(488)+e(495)+"r:"};try{const n=await t[e(580)](fetch,ie()+(e(552)+e(515)));if(!n.ok)return[];return(await n[e(510)]())[e(551)]||[]}catch(n){return[]}}async getPositions(e){const t=oe,n={zoUrw:function(e,t){return e(t)},cgUpb:function(e){return e()},kZrWu:function(e,t){return e!==t},efNrL:t(553)+"y] Get positions err"+t(530)};try{const s=await n[t(512)](fetch,n[t(457)](ie)+(t(493)+"ions?accou")+t(517)+e);if(!s.ok)return[];return(await s[t(510)]())[t(516)]||[]}catch(s){return n.kZrWu(t(572),t(572))?(_0x36784e[t(496)](t(553)+"y] Get pos"+t(566)+t(530),_0x31cc33),[]):[]}}async[oe(563)](){const e=oe,t=function(e,t){return e(t)};try{const n=await t(fetch,ie()+(e(466)+"s"));if(!n.ok)return[];return(await n[e(510)]())[e(561)]||[]}catch(n){return[]}}async[oe(557)+"ract"](e){const t=oe,n={WgdWF:"[IB Gateway] Search contract e"+t(475),ZmhiE:function(e,t){return e!==t},lMBRj:"AmfCk",MKlGG:function(e){return e()},eWevI:t(569)};try{if(n.ZmhiE(n[t(540)],t(531))){const s=await fetch(n[t(465)](ie)+(t(521)+t(532))+encodeURIComponent(e));if(!s.ok)return[];return(await s[t(510)]())[t(501)]||[]}return _0x426092.error(n[t(480)],_0x269c02),[]}catch(s){if(n.ZmhiE(t(549),n[t(513)]))return[];if(_0x22a939){const e=_0xa0f822[t(494)](_0x5b5769,arguments);return _0x13dad4=null,e}}}async[oe(536)](e){const t=oe,n={jjNSp:function(e,t){return e===t},zQgCK:function(e,t,n){return e(t,n)},dUwdx:function(e){return e()},eYBwl:t(586),dygcB:"RrBLS",FgloG:t(452)};try{if(n[t(584)](t(526),t(526))){const s={};s[t(511)+"pe"]="application/json";const r=await n[t(581)](fetch,n[t(546)](ie)+(t(466)+"s"),{method:n.eYBwl,headers:s,body:JSON.stringify(e)});if(!r.ok){if(n[t(584)](t(472),n[t(582)]))return null;_0x1cc6ce=_0xae181c}const a=await r[t(510)]();return{orderId:a[t(574)]||t(483)+Date.now(),status:a.status||n[t(464)]}}{const e=_0x13275e[t(494)](_0x24ffec,arguments);return _0x3a8068=null,e}}catch(s){return null}}async[oe(467)+"r"](e){const t=oe,n={};n[t(497)]=t(558),n[t(505)]=t(534);const s=n;try{const n={};n[t(578)]=s.dtFXy;return(await fetch(ie()+"/api/orders/"+e,n)).ok}catch(r){return t(456)===s[t(505)]&&_0x31a1f1[t(579)]()[t(518)]("(((.+)+)+)+$")[t(579)]()[t(503)+"r"](_0x1f2212).search(t(588)+"+$")}}async[oe(573)](e){const t=oe,n={plCoS:function(e){return e()}};try{const s=await fetch(n[t(550)](ie)+(t(476)+t(545))+e);if(!s.ok)return null;return await s.json()}catch{return null}}}const fe=new he;!function(){const e=ge,t=ve();for(;;)try{if(840870===parseInt(e(210))/1*(-parseInt(e(139))/2)+parseInt(e(120))/3+parseInt(e(269))/4*(-parseInt(e(280))/5)+-parseInt(e(113))/6*(parseInt(e(119))/7)+parseInt(e(155))/8*(parseInt(e(169))/9)+parseInt(e(186))/10+parseInt(e(281))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const me=function(){const e=ge,t={};t[e(135)]=function(e,t){return e!==t},t.EfTmE=e(251);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(135)]("HmBQR",n[a(175)])){const e=s?function(){if(r){const e=r[a(158)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x571b88=_0x312e8b}}()(void 0,function(){const e=ge;return me[e(215)]()[e(123)](e(117)+"+$")[e(215)]()[e(148)+"r"](me).search(e(117)+"+$")});function ge(e,t){e-=102;const n=ve();let s=n[e];if(void 0===ge.rsYGyo){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ge.DNhohF=r,ge.PvGCNr={},ge.rsYGyo=!0}const a=e+n[0],c=ge.PvGCNr[a];if(c)s=c;else{const e=function(e){this.kVKXTU=e,this.MfeInm=[1,0,0],this.tvGyli=function(){return"newState"},this.xCPywL="\\w+ *\\(\\) *{\\w+ *",this.zxMydj="['|\"].+['|\"];? *}"};e.prototype.RJHedR=function(){const e=new RegExp(this.xCPywL+this.zxMydj).test(this.tvGyli.toString())?--this.MfeInm[1]:--this.MfeInm[0];return this.xOXhJd(e)},e.prototype.xOXhJd=function(e){return Boolean(~e)?this.ZPtNpb(this.kVKXTU):e},e.prototype.ZPtNpb=function(e){for(let t=0,n=this.MfeInm.length;t<n;t++)this.MfeInm.push(Math.round(Math.random())),n=this.MfeInm.length;return e(this.MfeInm[0])},new e(ge).RJHedR(),s=ge.DNhohF(s),ge.PvGCNr[a]=s}return s}me();const je=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ge(158)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function ve(){const e=["tKH6sNi","q291BgqGBM90ia","B24UlI4","Bg9HzefJy291BG","y29UBMvJDfrVrW","shbxChe","zvDIyLO","Aw5JBhvKzxm","D2f5iI4","ywnJB3vUDfr5Ca","y29UBMvJDa","v2zAt00","Aw5MBW","qNjPzgDLig5VDa","yxrLD2f5igLZia","Ev0Gq2HLy2TPBG","Ew9cyxm","ywn0igzVCIa","ihrPBwvKig91Da","wxzHvhC","v2XXD1i","tgzVt0O","CgfWzxjuCMfKAq","u3LTyM9Sie5VDa","ndmZnZu0oe1vrLrXCq","zMLUza","zMLUzcbJB250CG","yxrLD2f5","CgfWzxi","zxfQte8","wuvLqNG","y29UBMvJDgvK","DgL0Bgu","ifnLBgvJDgvK","C2vSzwn0zwrbyW","nwPltev2uq","mtu5otmZotvzEeLZyMS","ChjPy2u","AKzsz2i","qK9bCem","zgvZy3jPChrPBW","Bg9Hze9YzgvYCW","y0rPv3m","ywXS","CM4GDgHPCYiPka","t3jKzxiG","y29UC29Szq","Bg9JywWGyNjPza","nJqYndaYq3D3qNnQ","lIbfBNn1CMuGDa","t3jKzxiGrMfPBa","CgXHy2vpCMrLCG","kcGOlISPkYKRkq","y3rPB24","mJfoAKPdDfa","mta5ndeWBMLzD0vc","Dw50","vg9oswW","C2vHCMnO","y291BNq","zMD2wMS","ihj1BM5PBMCUia","C3LTyM9S","yxv0AgvUDgLJyq","Devgufm","ChjVDg90ExbL","E30Uy29UC3rYDq","ywnJB3vUDhm","zMLYC3qU","y2HLy2TdB25Uzq","CfjZEwm","B3jKzxjZ","z2v0t3jKzxjZ","y3qGDg8Gr2f0zq","nM90z1PRDG","z2LKB2m","tMv1zNO","wuzvBfa","ENvPtxq","weXwBfC","EgzIA2i","Bg9HzfbVC2L0Aq","CKrczhO","y29UC3rYDwn0BW","CI4Gq2HLy2SGzW","zxHJzxb0Aw9U","t3jKzxiGugXHyW","zLnTzLu","DMfYAwfUDa","BhKGy29UBMvJDa","nJu2nZjWELLPyu0","zxjYB3i","q29UBMvJDgLVBG","yxbWBhK","B3qGy29UBMvJDa","y3rVCIGICMv0Dq","zwn0igfUigfJyW","DxnTvMi","y29UAwq","sw1wCeW","y29UBMvJDc4Grq","B25Z","DNPsD2u","rMfPBgvKihrVia","odq2DgjKtKHh","y29UBMvJDdOG","BMvJDgLVBI4","D2zACxu","CxvHBNrPDhK","yMLUza","rwzuBuu","u1nzAvm","Du9tBuC","C2vHCMnOq29UDa","q29UBMvJDgvK","EeXZCLy","Bu9duw8","C2LKzq","ic0G","qNjPzgDLihj1BG","w0LcieDHDgv3yq","mJa3mti2mgPVyM9ABG","ALbkDva","y2fUy2vSt3jKzq","C3HdtxG","vfHYDwi","A1LPEeO","t1rNuKu","Ev0Gq29UBMvJDa","ywnJB3vUDeLK","x19WCM90B19F","yxrLD2f5ignVBG","Aw9UigvYCM9YoG","wwfyzMm","vgDOwva","BgvUz3rO","BNn1CMuGsuiGrW","y3vYCMvUDa","CgXHy2uGB3jKzq","C2vYDMvYigLZia","z2uGC2vYDMvYia","Bg9N","zcbbueKGAxmGzq","CLnPrNy","BMn0Aw9UkcKG","nZqYndnnzhrQDwe","u3jVDvy","igHHCYbIzwvUia","zYbJB25Uzwn0Aq","zgzRtMG","Dg9tDhjPBMC","twXrDfC","EurZBum","CMv0DxjUicHMDq","u1n1vNG","y2fUy2vSBgvKlG","DgvK","B3vUDcbMAxjZDa","vfP6BhK","C3rHDhvZ","zgvZDhj1y3rPDG","BMfIBgvKlG","BwvZC2fNzq","Dg9mB3DLCKnHCW","D2LSBwS","CNvUBMLUzYbHBG","CgPsCwi","rvj5ufa","rxj3AwG","B3jKzxjuExbL","CMvMCMvZAerHDa","D2rADwu","C3rHCNrZv2L0Aa","qxfXsNe","Bg9HzgLUzW","CMfJDa","zvHos0e","D2fYBG","BfnQuw8","zwqGDg8GsuiGrW"];return(ve=function(){return e})()}je(void 0,function(){const e=ge,t={wilmk:function(e,t){return e(t)},xLsrV:function(e,t){return e+t},TghYP:function(e,t){return e+t},dyCyq:"{}.constru"+e(160)+'rn this")( )',dVkPN:function(e){return e()},Neufz:e(206),BOApC:"error",sxCMx:"table",lSjQo:"trace",citaY:function(e,t){return e<t}},n=t.dVkPN(function(){const n=e;if(n(145)!==n(275)){let e;try{e=Function(t[n(180)](t[n(199)](n(218)+n(209),t.dyCyq),");"))()}catch(s){e=window}return e}{t[n(229)](_0x3d1fc7,_0x425862),_0x1a019a[n(156)](n(185)+n(193)+"ion error:",_0xf5e274),_0x4e0357(e=>({...e,connected:!1,authenticated:!1,loading:!1,error:n(168)+n(170)+_0x2576ef[n(227)]}));const e={};return e[n(276)]=!1,e[n(128)+"ted"]=!1,e.paperTrading=!1,e}}),s=n[e(111)]=n[e(111)]||{},r=[t[e(141)],e(242),e(257),t[e(104)],e(150),t[e(189)],t[e(243)]];for(let a=0;t.citaY(a,r[e(200)]);a++){const t=je[e(148)+"r"][e(130)][e(174)](je),n=r[a],c=s[n]||t;t[e(195)]=je[e(174)](je),t[e(215)]=c.toString[e(174)](c),s[n]=t}})();const ye=["SPY","QQQ","AAPL","MSFT","NVDA","TSLA","AMD","META"];function pe(){const{connected:e,authenticated:t,paperTrading:n,accounts:s,selectedAccount:U,positions:F,orders:Q,loading:$,error:ee,checkConnection:te,connectToGateway:ne,refreshData:se,placeOrder:re,cancelOrder:ae,selectAccount:ce}=function(){var e;const t=ge,n={YaXfc:function(e,t){return e(t)},yoBas:function(e,t){return e===t},ueGBY:t(129),pjRqb:t(185)+t(260)+t(213)+t(247),WlqwR:function(e,t){return e(t)},mOCQo:function(e,t,n){return e(t,n)},SSuVx:"[IB Gateway] Status:",ToNIl:function(e,t){return e(t)},wdZue:"Successful"+t(154)+t(244)+t(272),XLVlW:function(e,t){return e(t)},gidoc:function(e,t){return e(t)},jPJuP:function(e,t){return e(t)},WfZOM:function(e){return e()},OOitF:t(223),TXrub:t(211),vzRwe:function(e,t){return e(t)},eqjLO:t(151)+"ed",fSmfU:t(246)+t(203)+t(149)+t(196)+t(171),jFRgb:function(e,t){return e(t)},eXNKA:function(e,t){return e+t},uXMMj:t(131)+'ctor("retu'+t(109)+" )",ImVpL:t(107),uSFOV:function(e){return e()},kYixJ:t(216),usmVb:"yDsmC",NHzJr:function(e,t){return e!==t},LfoOJ:function(e){return e()},rSiFv:function(e,t){return e(t)},HpWpq:function(e,t){return e===t},fgvZk:t(232)},s={connected:!1};s[t(128)+t(221)]=!1,s.paperTrading=!1,s[t(132)]=[],s[t(279)+t(124)]=null,s.positions=[],s[t(136)]=[],s[t(239)]=!0,s.error=null;const[c,i]=r.useState(s),o=r.useRef(null),{toast:l}=a(),d=r.useCallback(async()=>{const e=t;if(n[e(261)](e(176),n.ueGBY))return _0x2c880f(t=>({...t,loading:!1,error:e(157)+" failed: "+_0x4fe9df[e(227)]})),!1;{n[e(265)](i,e=>({...e,loading:!0,error:null}));const t=n[e(181)](setTimeout,()=>{const t=e;if({}[t(177)]=t(117)+"+$","rDBdz"!==t(147))return _0x397f4d[t(215)]().search(t(117)+"+$")[t(215)]()[t(148)+"r"](_0x4c2b1a)[t(123)](KVtXPS[t(177)]);n[t(198)](i,e=>({...e,connected:!1,authenticated:!1,loading:!1,error:t(157)+t(263)+t(114)+"he bridge "+t(204)+"running."}))},8e3);try{const s=await fe[e(134)+e(118)]();return n[e(265)](clearTimeout,t),n[e(122)](i,t=>({...t,connected:s[e(276)],authenticated:s.authenticated,paperTrading:s[e(267)+"ng"],loading:!1,error:s[e(276)]?s[e(128)+e(221)]?null:e(184)+"ning but n"+e(159)+e(244)+'ateway. Click "Conne'+e(138)+e(253):e(258)+e(126)+"Start the "+e(112)+e(205)+e(133)})),s}catch(s){clearTimeout(t),i(t=>({...t,connected:!1,authenticated:!1,loading:!1,error:e(168)+"connect: "+s[e(227)]}));const n={};return n[e(276)]=!1,n["authentica"+e(221)]=!1,n[e(267)+"ng"]=!1,n}}},[]),u=r.useCallback(async()=>{const e=t;n[e(198)](i,e=>({...e,loading:!0,error:null}));try{const t=await fe[e(255)]();if(t){const t={};t[e(277)]=e(179),t.description=n[e(236)],l(t),await d(),await x()}else n[e(144)](i,t=>({...t,loading:!1,error:e(168)+e(165)+e(201)+e(259)+e(230)+e(207)+"nabled."}));return t}catch(s){return n.gidoc(i,t=>({...t,loading:!1,error:e(157)+" failed: "+s.message})),!1}},[l,d]),x=r.useCallback(async()=>{const e=t,s=await fe.getAccounts(),r=s[e(270)](t=>t.accountId[e(237)]("DU")||t[e(254)+"e"][e(228)+"e"]()[e(252)](e(273)));return n[e(140)](i,e=>({...e,accounts:s,selectedAccount:r||s[0]||null})),s},[]),h=r.useCallback(async()=>{const e=t;if(!c[e(279)+"count"])return[];const s=await fe.getPositions(c[e(279)+e(124)].accountId);return n[e(187)](i,e=>({...e,positions:s})),s},[c[t(279)+t(124)]]),f=r.useCallback(async()=>{const e=t,n=await fe[e(137)]();return i(e=>({...e,orders:n})),n},[]),m=n[t(181)](r.useCallback,async()=>{const e=t;c[e(128)+e(221)]&&await Promise[e(108)]([x(),n[e(256)](h),n[e(256)](f)])},[c[t(128)+t(221)],x,h,f]),g=r.useCallback(async e=>{const s=t,r={OTgRE:function(e,t){return e(t)}};if(!c[s(279)+s(124)]){if(n.OOitF!==n[s(190)]){const e={};return e.title="No Account"+s(278),e[s(105)+"n"]="Please sel"+s(161)+s(222)+".",e[s(153)]=s(225)+"e",l(e),null}r[s(192)](_0x325a9e,e=>({...e,loading:!1,error:s(168)+s(165)+"nsure IB Gateway is "+s(230)+s(207)+s(226)}))}const a=await fe[s(178)+s(240)](e[s(127)]);if(n.yoBas(a[s(200)],0)){if("QXLeC"!==s(143)){const t={};return t[s(277)]=s(268)+" Found",t[s(105)+"n"]=s(246)+s(271)+s(262)+e[s(127)],t.variant=s(225)+"e",l(t),null}{const e=_0x1dd13e?function(){if(_0x4b1732){const e=_0x4b6612[s(158)](_0x2965e7,arguments);return _0x101e9a=null,e}}:function(){};return _0x37d1cb=!1,e}}const i=a[0],o={};o.accountId=c["selectedAc"+s(124)][s(194)],o[s(163)]=i[s(163)],o[s(127)]=e[s(127)],o[s(182)]=e[s(182)],o[s(173)]=e[s(173)],o[s(234)]=e[s(234)],o[s(102)]=e.price;const d=await fe[s(116)](o);if(d)n[s(167)](l,{title:n[s(274)],description:e[s(182)]+" "+e.quantity+" "+e.symbol+s(183)+d[s(224)]}),await n[s(256)](f);else{if("RfZLv"===s(172)){const e=_0x20b0c9?function(){if(_0x236378){const e=_0x24d611[s(158)](_0xe2bdab,arguments);return _0x5542d8=null,e}}:function(){};return _0x88c40b=!1,e}{const e={};e[s(277)]=s(115)+"ed",e[s(105)+"n"]=n[s(152)],e[s(153)]=s(225)+"e",l(e)}}return d},[c["selectedAc"+t(124)],l,f]),j=r.useCallback(async e=>{const s=t,r=await fe[s(188)+"r"](e);if(r){if(n[s(164)]!==s(107)){let e;try{e=mlRkxV[s(103)](_0x1eb4f8,mlRkxV[s(241)](s(218)+s(209)+mlRkxV.uXMMj,");"))()}catch(a){e=_0x3ed81c}return e}{const t={title:"Order Cancelled"};t.description=s(110)+e+(s(212)+s(220)),l(t),await n.uSFOV(f)}}return r},[l,f]),v=n[t(181)](r.useCallback,e=>{const s=t;if(s(216)!==n[s(191)]){const e=_0x4d9062[s(148)+"r"][s(130)][s(174)](_0xbdf695),t=_0x43d0fb[_0x2863af],n=_0xe6ee05[t]||e;e.__proto__=_0x4a92a9.bind(_0x2ec0b0),e[s(215)]=n[s(215)].bind(n),_0x20ec7d[t]=e}else{const t=c[s(132)][s(270)](t=>t[s(194)]===e);t&&n.WlqwR(i,e=>({...e,selectedAccount:t}))}},[c[t(132)]]);n.mOCQo(r.useEffect,()=>{const e=t,s={dfkNh:function(e){return e()},mtaeJ:function(e,t){return n[ge(245)](e,t)},Erwih:function(e,t,n){return e(t,n)}};return n[e(266)](async()=>{const e=ge,t={YvaTw:function(e){return e()}};s.mtaeJ("AqqJq",e(238))?s[e(214)](_0x4b5211):(await s.dfkNh(d))[e(128)+e(221)]&&(await x(),await h(),await f(),o[e(202)]=s[e(233)](setInterval,()=>{t[e(264)](m)},1e4))}),()=>{const t=e;n[t(261)](t(217),n[t(162)])?o.current&&clearInterval(o[t(202)]):_0x349a95[t(202)]&&_0xcfd21d(_0x3cd544[t(202)])}},[]),r.useEffect(()=>{const e=t,s={YFUlP:function(e,t){return n[ge(208)](e,t)}};c["selectedAc"+e(124)]&&c[e(128)+e(221)]&&(n[e(250)]("ERyPP",n[e(125)])?h():s[e(142)](_0x1b2c96,e=>({...e,selectedAccount:_0x3c0076})))},[null==(e=c[t(279)+t(124)])?void 0:e[t(194)]]);const y={...c};return y[t(134)+t(118)]=d,y[t(249)+"ateway"]=u,y[t(248)+"ts"]=x,y[t(146)+t(166)]=h,y[t(106)]=f,y[t(235)+"a"]=m,y[t(116)]=g,y.cancelOrder=j,y["selectAcco"+t(121)]=v,y}(),[ie,oe]=r.useState("overview"),[le,de]=r.useState([]),[ue,xe]=r.useState(!1),[he,me]=r.useState([]),[je,ve]=r.useState({total:0,today:0,pnl:0}),[pe,we]=r.useState(!1),[Ne,Ce]=r.useState({symbol:"SPY",side:"BUY",quantity:1,orderType:"MKT",price:0}),[be,Be]=r.useState(!1);r.useEffect(()=>{const e=async()=>{try{const{data:e}=await c.from("farm_status").select("*").eq("farm_name","high-frequency-paper-trader").single();if(e){const t=new Date(e.updated_at),n=t>new Date(Date.now()-12e4);we("trading"===e.status||n)}const{data:t}=await c.from("autonomous_trades").select("*").order("created_at",{ascending:!1}).limit(50);if(t){me(t);const e=new Date;e.setHours(0,0,0,0);const n=t.filter(t=>new Date(t.created_at)>=e),s=t.reduce((e,t)=>e+(t.pnl||0),0);ve({total:t.length,today:n.length,pnl:s})}}catch(e){}};e();const t=c.channel("hf-trades").on("postgres_changes",{event:"INSERT",schema:"public",table:"autonomous_trades"},e=>{const t=e.new;me(e=>[t,...e].slice(0,50));const n=new Date;n.setHours(0,0,0,0);const s=new Date(t.created_at)>=n;ve(e=>({total:e.total+1,today:s?e.today+1:e.today,pnl:e.pnl+(t.pnl||0)}))}).subscribe(),n=setInterval(e,5e3);return()=>{clearInterval(n),t.unsubscribe()}},[]),r.useCallback(()=>{te()},[te]),r.useEffect(()=>{if(t){ze();const e=setInterval(ze,3e4);return()=>clearInterval(e)}},[t]);const ze=async()=>{xe(!0);try{const{data:e,error:t}=await c.functions.invoke("stock-data",{body:{action:"batch",symbols:ye}});!t&&(null==e?void 0:e.stocks)&&de(e.stocks.map(e=>({symbol:e.symbol,price:e.latestPrice,change:e.change,changePercent:e.changePercent})))}catch(e){}finally{xe(!1)}},De=e=>{Ce(t=>({...t,symbol:e,side:"BUY"})),oe("trade")},Le=r.useMemo(()=>{const e=F.reduce((e,t)=>e+t.marketValue,0),t=F.reduce((e,t)=>e+t.unrealizedPnl,0);return{totalValue:e,totalPnL:t,totalRealizedPnL:F.reduce((e,t)=>e+t.realizedPnl,0),pnlPercent:(null==U?void 0:U.balance)?t/U.balance*100:0}},[F,U]);return $?i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(u,{className:"h-5 w-5 animate-spin text-primary"}),"Connecting to IB Gateway Bridge..."]})}),i.jsx(x,{children:"Checking connection to gateway"})]}),i.jsxs(h,{className:"space-y-4",children:[i.jsx(f,{value:33,className:"h-2"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Looking for the Client Portal Gateway..."}),i.jsxs(S,{children:[i.jsx(H,{className:"h-4 w-4"}),i.jsx(I,{children:"Connection taking too long?"}),i.jsxs(K,{className:"space-y-2 mt-2",children:[i.jsx("p",{children:"Your browser may be blocking the connection. Try:"}),i.jsxs("ol",{className:"list-decimal list-inside text-sm space-y-1",children:[i.jsxs("li",{children:["Click ",i.jsx("strong",{children:"Gateway Settings"})," above to configure your gateway URL"]}),i.jsx("li",{children:"If using remotely, enter your machine's IP (e.g., https://192.168.1.100:5000)"}),i.jsxs("li",{children:["Accept the ",i.jsx("strong",{children:"self-signed certificate warning"})," in your browser"]}),i.jsx("li",{children:"Login if prompted, then return here"})]})]})]}),i.jsxs(m,{variant:"outline",size:"sm",onClick:()=>window.open("https://localhost:5000","_blank"),children:[i.jsx(g,{className:"h-4 w-4 mr-2"}),"Open Gateway in New Tab"]})]})]}):e?t?i.jsxs("div",{className:"space-y-6",children:[i.jsx(o,{className:"bg-gradient-to-br from-card via-card to-primary/5 border-primary/20",children:i.jsxs(h,{className:"pt-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(v,{className:"h-5 w-5 text-primary"}),i.jsx("span",{className:"font-medium",children:"IBKR Connected"}),n&&i.jsx(y,{variant:"outline",className:"bg-primary/10 text-primary border-primary",children:"Paper Trading"})]}),i.jsxs(p,{value:(null==U?void 0:U.accountId)||"",onValueChange:ce,children:[i.jsx(w,{className:"w-48",children:i.jsx(N,{placeholder:"Select Account"})}),i.jsx(C,{children:s.map(e=>i.jsxs(b,{value:e.accountId,children:[e.accountId," (",e.accountType,")"]},e.accountId))})]}),i.jsx(m,{variant:"ghost",size:"icon",onClick:se,children:i.jsx(j,{className:"h-4 w-4"})})]}),U&&i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(B,{className:"w-3 h-3"}),"Account Balance"]}),i.jsxs("div",{className:"text-3xl font-mono font-bold",children:["$",U.balance.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Buying Power"}),i.jsxs("div",{className:"text-xl font-mono",children:["$",U.buyingPower.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]}),F.length>0&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Positions Value"}),i.jsxs("div",{className:"text-xl font-bold",children:["$",Le.totalValue.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Unrealized P&L"}),i.jsxs("div",{className:"text-xl font-bold "+(Le.totalPnL>=0?"text-success":"text-destructive"),children:[Le.totalPnL>=0?"+":"","$",Le.totalPnL.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Realized P&L"}),i.jsxs("div",{className:"text-xl font-bold "+(Le.totalRealizedPnL>=0?"text-success":"text-destructive"),children:[Le.totalRealizedPnL>=0?"+":"","$",Le.totalRealizedPnL.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Open Positions"}),i.jsx("div",{className:"text-xl font-bold",children:F.length})]})]})]})}),i.jsxs(z,{value:ie,onValueChange:oe,children:[i.jsxs(D,{className:"grid w-full grid-cols-2 max-w-md",children:[i.jsxs(L,{value:"overview",className:"flex items-center gap-1",children:[i.jsx(M,{className:"w-4 h-4"})," Overview"]}),i.jsxs(L,{value:"hf-trading",className:"flex items-center gap-1",children:[i.jsx(X,{className:"w-4 h-4"})," HF Trading",pe&&i.jsx("span",{className:"ml-1 w-2 h-2 bg-success rounded-full animate-pulse"})]})]}),i.jsx(q,{value:"overview",className:"mt-6",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(G,{className:"w-5 h-5"}),"Quick Trade"]}),i.jsx(x,{children:"Click a symbol to start a trade"})]}),i.jsxs(h,{children:[i.jsx("div",{className:"grid grid-cols-4 gap-2",children:le.length>0?le.map(e=>i.jsxs(m,{variant:"outline",className:"flex flex-col h-auto py-3 hover:border-primary",onClick:()=>De(e.symbol),children:[i.jsx("span",{className:"font-bold",children:e.symbol}),i.jsxs("span",{className:"text-sm",children:["$",e.price.toFixed(2)]}),i.jsxs("span",{className:"text-xs "+(e.changePercent>=0?"text-success":"text-destructive"),children:[e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})]},e.symbol)):ye.map(e=>i.jsx(m,{variant:"outline",className:"py-6",onClick:()=>De(e),children:e},e))}),ue&&i.jsx("div",{className:"text-center text-sm text-muted-foreground mt-2",children:"Updating quotes..."})]})]}),i.jsxs(o,{children:[i.jsx(l,{children:i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(R,{className:"w-5 h-5"}),"Current Positions"]})}),i.jsx(h,{children:0===F.length?i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(P,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No open positions"}),i.jsx("p",{className:"text-sm",children:"Place a trade to get started"})]}):i.jsxs("div",{className:"space-y-3",children:[F.slice(0,5).map(e=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.symbol}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.position>0?"+":"",e.position," shares @ $",e.avgCost.toFixed(2)]})]}),i.jsxs("div",{className:"text-right "+(e.unrealizedPnl>=0?"text-success":"text-destructive"),children:[i.jsxs("div",{className:"font-medium",children:[e.unrealizedPnl>=0?"+":"","$",e.unrealizedPnl.toFixed(2)]}),i.jsxs("div",{className:"text-sm",children:["$",e.marketValue.toFixed(2)]})]})]},e.conid)),F.length>5&&i.jsxs(m,{variant:"ghost",className:"w-full",onClick:()=>oe("positions"),children:["View all ",F.length," positions"]})]})})]})]})}),i.jsx(q,{value:"hf-trading",className:"mt-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(o,{className:"border-2 "+(pe?"border-warning bg-warning/5":"border-dashed"),children:[i.jsx(l,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-full "+(pe?"bg-warning/20":"bg-muted"),children:i.jsx(X,{className:"w-6 h-6 "+(pe?"text-warning animate-pulse":"text-muted-foreground")})}),i.jsxs("div",{children:[i.jsxs(d,{className:"flex items-center gap-2",children:["High-Frequency Paper Trading",pe&&i.jsxs(y,{className:"bg-warning text-warning-foreground",children:[i.jsx(P,{className:"w-3 h-3 mr-1 animate-pulse"}),"LIVE"]})]}),i.jsx(x,{children:"Terminal-based worker generating 100+ trades/day for En Pensent training"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Worker Status"}),i.jsx("div",{className:"font-medium "+(pe?"text-warning":"text-muted-foreground"),children:pe?"RUNNING":"OFFLINE"})]})]})}),i.jsxs(h,{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono",children:je.total}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Trades"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono",children:je.today}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Today's Trades"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"text-3xl font-bold font-mono "+(je.pnl>=0?"text-success":"text-destructive"),children:[je.pnl>=0?"+":"","$",je.pnl.toFixed(2)]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total P&L"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono text-warning",children:pe?"30s":"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cycle Time"})]})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(A,{className:"w-4 h-4"}),i.jsx("span",{children:"Auto-refresh every 5 seconds from Supabase"}),i.jsx("span",{className:"mx-2",children:"•"}),i.jsx("span",{children:"11 symbols: AAPL, MSFT, NVDA, TSLA, AMD, META, GOOGL, AMZN, SPY, QQQ, IWM"})]})]})]}),i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(P,{className:"w-5 h-5"}),"Live Trade Feed",he.length>0&&i.jsxs(y,{variant:"secondary",children:[he.length," recent"]})]}),i.jsx(x,{children:"Real-time trades from high-frequency worker (updates every 5s)"})]}),i.jsx(h,{children:0===he.length?i.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[i.jsx(X,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"text-lg",children:"No trades yet"}),i.jsx("p",{className:"text-sm",children:"Start the high-frequency worker to see activity"}),i.jsx("code",{className:"block mt-4 p-2 bg-muted rounded text-xs",children:"node farm/workers/high-frequency-paper-trader.mjs"})]}):i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:he.map(e=>{var t;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:["BUY"===e.direction?i.jsx(k,{className:"w-4 h-4 text-success"}):i.jsx(V,{className:"w-4 h-4 text-destructive"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold",children:e.symbol}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString()})]}),i.jsx(y,{variant:"BUY"===e.direction?"default":"destructive",children:e.direction}),i.jsxs(y,{variant:"outline",className:"text-xs",children:[e.shares," shares"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-mono",children:["$",null==(t=e.entry_price)?void 0:t.toFixed(2)]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Entry"})]}),e.predicted_confidence&&i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-mono",children:[(100*e.predicted_confidence).toFixed(0),"%"]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Conf"})]}),void 0!==e.pnl&&null!==e.pnl&&i.jsxs("div",{className:"text-right font-mono "+(e.pnl>=0?"text-success":"text-destructive"),children:[i.jsxs("div",{children:[e.pnl>=0?"+":"","$",e.pnl.toFixed(2)]}),i.jsx("div",{className:"text-xs",children:"P&L"})]}),i.jsx(y,{variant:"outline",className:"open"===e.status?"bg-success/10 text-success":"bg-muted",children:e.status})]})]},e.id)})})})]}),he.filter(e=>"open"===e.status).length>0&&i.jsxs(o,{children:[i.jsx(l,{children:i.jsxs(d,{className:"text-lg flex items-center gap-2",children:[i.jsx(R,{className:"w-5 h-5"}),"Open HF Positions"]})}),i.jsx(h,{children:i.jsxs(Y,{children:[i.jsx(O,{children:i.jsxs(W,{children:[i.jsx(_,{children:"Symbol"}),i.jsx(_,{children:"Side"}),i.jsx(_,{className:"text-right",children:"Shares"}),i.jsx(_,{className:"text-right",children:"Entry"}),i.jsx(_,{className:"text-right",children:"Stop Loss"}),i.jsx(_,{className:"text-right",children:"Take Profit"}),i.jsx(_,{children:"Status"})]})}),i.jsx(T,{children:he.filter(e=>"open"===e.status).map(e=>{var t,n,s;return i.jsxs(W,{children:[i.jsx(E,{className:"font-bold",children:e.symbol}),i.jsx(E,{children:i.jsx(y,{variant:"BUY"===e.direction?"default":"destructive",children:e.direction})}),i.jsx(E,{className:"text-right font-mono",children:e.shares}),i.jsxs(E,{className:"text-right font-mono",children:["$",null==(t=e.entry_price)?void 0:t.toFixed(2)]}),i.jsxs(E,{className:"text-right font-mono text-destructive",children:["$",(null==(n=e.stop_loss)?void 0:n.toFixed(2))||"N/A"]}),i.jsxs(E,{className:"text-right font-mono text-success",children:["$",(null==(s=e.take_profit)?void 0:s.toFixed(2))||"N/A"]}),i.jsx(E,{children:i.jsx(y,{variant:"outline",className:"bg-success/10 text-success border-success/30",children:"Open"})})]},e.id)})})]})})]})]})})]})]}):i.jsxs(o,{className:"border-warning/50",children:[i.jsx(l,{children:i.jsxs(d,{className:"flex items-center gap-2 text-warning",children:[i.jsx(Z,{className:"h-5 w-5"}),"Gateway Running - Login Required"]})}),i.jsxs(h,{className:"space-y-4",children:[i.jsxs(S,{variant:"default",children:[i.jsx(H,{className:"h-4 w-4"}),i.jsx(K,{children:'Bridge is running but not connected to IB Gateway. Open IB Gateway desktop app, log in, then click "Connect to Gateway".'})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(m,{onClick:ne,className:"flex-1",children:[i.jsx(Z,{className:"h-4 w-4 mr-2"}),"Connect to Gateway"]}),i.jsxs(m,{variant:"outline",onClick:te,children:[i.jsx(j,{className:"h-4 w-4 mr-2"}),"Check Status"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"IB Gateway must be running with API enabled (port 4002 for paper trading)."})]})]}):i.jsxs(o,{className:"border-destructive/50",children:[i.jsxs(l,{children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(d,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(J,{className:"h-5 w-5"}),"IB Gateway Bridge Not Running"]})}),i.jsx(x,{children:ee||"Start the IBKR Client Portal Gateway to begin trading."})]}),i.jsxs(h,{className:"space-y-4",children:[i.jsxs(S,{children:[i.jsx(H,{className:"h-4 w-4"}),i.jsx(I,{children:"Quick Setup"}),i.jsx(K,{className:"space-y-2",children:i.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[i.jsxs("li",{children:["Download the ",i.jsx("a",{href:"https://www.interactivebrokers.com/en/trading/ib-api.php",target:"_blank",rel:"noopener",className:"text-primary underline font-medium",children:"IBKR Client Portal Gateway"})]}),i.jsxs("li",{children:["Run ",i.jsx("code",{className:"bg-muted px-1 rounded text-sm",children:"bin/run.sh"})," (Mac) or ",i.jsx("code",{className:"bg-muted px-1 rounded text-sm",children:"bin/run.bat"})," (Windows)"]}),i.jsxs("li",{children:["Login at ",i.jsx("strong",{children:"https://localhost:5000"})," with IBKR credentials"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Using remote access?"})," Click Gateway Settings above and enter your machine's IP"]})]})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(m,{onClick:te,className:"flex-1",children:[i.jsx(j,{className:"h-4 w-4 mr-2"}),"Retry Connection"]}),i.jsxs(m,{variant:"outline",onClick:()=>window.open("https://localhost:5000","_blank"),children:[i.jsx(g,{className:"h-4 w-4 mr-2"}),"Open Gateway"]})]})]})]})}const we=()=>i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[i.jsx(F,{className:"w-8 h-8 text-primary"}),i.jsxs("h1",{className:"text-4xl font-bold",children:[i.jsx("span",{className:"text-primary",children:"En Pensent™"})," Trading"]})]}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Paper trading powered by Interactive Brokers. Start with simulated funds, graduate to real money when ready."})]}),i.jsx(U,{componentName:"IBKRTradingDashboard",children:i.jsx(pe,{})}),i.jsx("p",{className:"text-center text-xs text-muted-foreground mt-8",children:"⚠️ Paper trading uses simulated funds. No real money is at risk. When ready, switch to a live IBKR account for real trading."})]});export{we as default};
