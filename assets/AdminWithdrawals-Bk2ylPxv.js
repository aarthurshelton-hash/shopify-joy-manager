import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as h,D as m,aB as f,aC as p,aD as w,aE as j,p as v,t as g,w as y,dy as N,dt as b,bo as C,dq as z,cZ as D,a1 as q,a2 as L,a3 as B,a4 as _,a5 as M,aW as W,bC as A,dz as k,b as H,y as S}from"./index-DBmMOexX.js";import{C as K}from"./calendar-BmFxhfn9.js";!function(){const e=I,t=J();for(;;)try{if(319523===-parseInt(e(294))/1+parseInt(e(332))/2+-parseInt(e(346))/3+parseInt(e(238))/4*(parseInt(e(254))/5)+-parseInt(e(326))/6+parseInt(e(269))/7*(parseInt(e(309))/8)+-parseInt(e(263))/9*(-parseInt(e(258))/10))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const U=function(){const e=I,t={};t[e(275)]=function(e,t){return e===t},t[e(253)]=e(260),t[e(231)]=function(e,t){return e!==t},t[e(325)]=e(236),t[e(337)]=e(313);const s=t;let n=!0;return function(t,r){const a=e;if(s[a(231)](s[a(325)],s[a(337)])){const e=n?function(){const e=a;if(r){if(s[e(275)](s.RTtEl,e(301))){const t=_0x19a147[e(255)](_0x574c9e,arguments);return _0x203e81=null,t}{const s=r[e(255)](t,arguments);return r=null,s}}}:function(){};return n=!1,e}{const e={};return e[a(246)]=[],e[a(241)]=_0x3b4c8e,e}}}()(void 0,function(){const e=I,t={};t[e(303)]="(((.+)+)+)+$";const s=t;return U.toString().search(s[e(303)])[e(274)]().constructor(U).search(e(267)+"+$")});U();const P=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[I(255)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();async function G(t){const s=I,n={};n[s(262)]=s(279),n[s(264)]=s(266),n[s(239)]=s(257),n[s(222)]=s(284)+"otal_earne"+s(348)+s(343)+s(235);const r=n;try{const n={};n[s(297)]=!1;let a=e.from(s(311)+s(312))[s(240)]("*").order(r.aaQLP,n);t&&"all"!==t&&(a=a.eq(r[s(264)],t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(352)](e=>e.user_id))],{data:l}=await e[s(305)](s(317))[s(240)](s(334)+s(327)+"e").in(r[s(239)],o),{data:d}=await e[s(305)](s(342)+"ts")[s(240)](r.zNvlf).in(s(257),o),u=new Map((null==l?void 0:l[s(352)](e=>[e[s(257)],e]))||[]),x=new Map((null==d?void 0:d[s(352)](e=>[e[s(257)],e]))||[]),h=(c||[])[s(352)](e=>{var t,n,r;return{...e,payout_details:e[s(321)+s(295)],user_display_name:(null==(t=u[s(248)](e.user_id))?void 0:t[s(223)+"me"])||s(261)+"er",wallet_total_earned:(null==(n=x[s(248)](e[s(257)]))?void 0:n[s(340)+s(298)])||0,wallet_total_withdrawn:(null==(r=x[s(248)](e[s(257)]))?void 0:r[s(249)+s(265)+"s"])||0}}),m={};return m[s(246)]=h,m[s(241)]=null,m}catch(a){const e={};return e[s(246)]=[],e[s(241)]=a,e}}function I(e,t){e-=220;const s=J();let n=s[e];if(void 0===I.klTCRO){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};I.hsNdQI=r,I.lBONJp={},I.klTCRO=!0}const a=e+s[0],c=I.lBONJp[a];if(c)n=c;else{const e=function(e){this.zcjkHo=e,this.xwBhDM=[1,0,0],this.StLbvm=function(){return"newState"},this.btXHqF="\\w+ *\\(\\) *{\\w+ *",this.IHpXQU="['|\"].+['|\"];? *}"};e.prototype.yoKOjV=function(){const e=new RegExp(this.btXHqF+this.IHpXQU).test(this.StLbvm.toString())?--this.xwBhDM[1]:--this.xwBhDM[0];return this.tLBUUx(e)},e.prototype.tLBUUx=function(e){return Boolean(~e)?this.BzcTLJ(this.zcjkHo):e},e.prototype.BzcTLJ=function(e){for(let t=0,s=this.xwBhDM.length;t<s;t++)this.xwBhDM.push(Math.round(Math.random())),s=this.xwBhDM.length;return e(this.xwBhDM[0])},new e(I).yoKOjV(),n=I.hsNdQI(n),I.lBONJp[a]=n}return n}async function R(){const t=I,s={wEHta:"status, amount_cents"},n=s;try{const{data:s,error:r}=await e[t(305)](t(311)+t(312))[t(240)](n.wEHta);if(r)throw r;const a={};a["pending_co"+t(220)]=0,a["pending_am"+t(272)]=0,a[t(268)+t(272)]=0,a[t(230)+t(328)]=0,a[t(302)+t(322)]=0,a["rejected_c"+t(272)]=0;const c=a;(s||[])[t(243)](e=>{const s=t;switch(e.status){case"pending":c[s(345)+"unt"]++,c[s(221)+s(272)]+=e[s(283)+"ts"];break;case s(344):c[s(268)+s(272)]++,c["approved_a"+s(328)]+=e[s(283)+"ts"];break;case s(252):c[s(302)+"total"]+=e[s(283)+"ts"];break;case s(245):c[s(280)+"ount"]++}});const i={};return i.data=c,i[t(241)]=null,i}catch(r){const e={};return e[t(246)]=null,e.error=r,e}}function J(){const e=["z0Pbswm","BNDkEfO","zNjVBq","tKvNzvm","txbQuMW","yxv0Aa","mtiWmdHJuw1fvxu","wejNrg4","D2L0AgrYyxDHBa","x3jLCxvLC3rZ","CMf6r1O","rfDAB3u","t3LHBw8","zePTC2i","ChjVzMLSzxm","D2fYBG","y29UC29Szq","DwL4AMi","Cgf5B3v0x2rLDa","Dg90ywW","ChjVDg90ExbL","Dg9ju09tDhjPBG","Dun0svq","mJa5odK4nK51q2rZyG","AxnWBgf5x25HBq","Bw91BNq","x19WCM90B19F","tM90igf1DgHLBG","DhvZ","nZiWota4z0nfC2Tb","yMLUza","DxnLCL9PzcWGza","tujdCu0","BM5cDNm","qwn5CuS","zNvUy3rPB25Z","Aw52B2TL","Dg90ywXFzwfYBG","EgfsqLC","DxnLCL93ywXSzq","B3rHBf93AxrOza","yxbWCM92zwq","CgvUzgLUz19JBW","ntiYodf5AxjgAMq","EKfYy3e","zf9Jzw50CYWGDa","DgLJyxrLza","DgfIBgu","tMjkAgG","BwfW","Dw50","CgvUzgLUz19HBq","EK52Bgy","zgLZCgXHEv9Uyq","v0Lfufq","zwfTtum","E30Uy29UC3rYDq","B2HOt3G","uNnIDvG","DgHKCMf3ywW","yxbWCM92zwrFyq","z3vbvxK","CMvXDwvZDf9Pza","Bhjywvq","DcbMB3vUzcbVCG","CMf3BL9Jzw50CW","qKfpsNi","ig5VDcbPBIbHCa","mZa3mtyWz0XHCKTI","rMnVDK0","C2vSzwn0","zxjYB3i","sKLhsLa","zM9YrwfJAa","v2fjvfi","CMvQzwn0zwq","zgf0yq","B0rmzNa","z2v0","Dg90ywXFD2L0Aa","C3vJy2vZCW","Bg9N","y29TCgXLDgvK","uLr0rwW","nuXqzhvHuG","yxbWBhK","uMvQzwn0Aw9Uia","DxnLCL9Pza","mJKXmdy2mfr3tfDQua","rwPNwNi","sg13r2G","vw5RBM93BIbvCW","ywfrtfa","ouzLBM5TDa","zLfcvuy","zhjHD25Fy2vUDa","C3rHDhvZ","kcGOlISPkYKRkq","yxbWCM92zwrFyW","nJnWwvvIu3O","uevUq2u","DxbKyxrL","B3vUDa","ELHVshu","Dg9tDhjPBMC","BfjrBLu","yM9KEq","BK5YrMe","CgvUzgLUzW","y3jLyxrLzf9HDa","CMvQzwn0zwrFyW","Dg9PDNm","v2fSBgv0ihvWza","yw1VDw50x2nLBG","DxnLCL9PzcWGDa","DhjHy2u","zen0A3O","swHizha","BgvUz3rO","CM4GDgHPCYiPka","zxHJzxb0Aw9U","BMn0Aw9UkcKG","A0HJuLu","CMv0DxjUicHMDq","ntuWmZH1wxLVrNK","ywLSCW","tMLjwgC","yxnJzw5KAw5N","zwrFy2vUDhm","uMvXDwvZDcbUBW","z2v0vxnLCG","EMHoyKm","y29TCgXLDgvKxW"];return(J=function(){return e})()}P(void 0,function(){const e=I,t={nnBvs:function(e,t){return e+t}};t[e(273)]=e(318),t[e(242)]=e(290),t[e(307)]="table";const s=t;let n;try{n=Function(s[e(336)](s[e(336)](e(293)+e(291),e(226)+'ctor("retu'+e(289)+" )"),");"))()}catch(c){n=window}const r=n.console=n.console||{},a=["log",s[e(273)],"info",e(241),s[e(242)],s[e(307)],e(285)];for(let i=0;i<a[e(288)];i++){const t=P.constructor.prototype[e(333)](P),s=a[i],n=r[s]||t;t[e(329)]=P[e(333)](P),t[e(274)]=n[e(274)][e(333)](n),r[s]=t}})(),function(){const e=V,t=Y();for(;;)try{if(394598===parseInt(e(205))/1+parseInt(e(188))/2+parseInt(e(194))/3*(-parseInt(e(177))/4)+-parseInt(e(203))/5+-parseInt(e(217))/6*(parseInt(e(184))/7)+parseInt(e(219))/8*(parseInt(e(189))/9)+-parseInt(e(176))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const E=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[V(238)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=V,t={};t[e(208)]=e(223)+"+$";const s=t;return E[e(214)]().search(e(223)+"+$")[e(214)]()[e(204)+"r"](E).search(s[e(208)])});E();const Q=function(){let e=!0;return function(t,s){const n=V,r={};r[n(198)]=n(223)+"+$",r.jrQAL=n(233),r[n(215)]=function(e,t){return e===t};const a=r,c=e?function(){const e=n;if(a[e(216)]===e(235)){const t=_0x583ec2[e(238)](_0x4d6144,arguments);return _0x3624e7=null,t}if(s){if(a[e(215)](e(225),"TizBv")){const n=s[e(238)](t,arguments);return s=null,n}return _0x230344.toString()[e(175)]("(((.+)+)+)+$").toString()[e(204)+"r"](_0x43cbea)[e(175)](a[e(198)])}}:function(){};return e=!1,c}}();function O(e){return"$"+(e/100)[V(201)](2)}function V(e,t){e-=172;const s=Y();let n=s[e];if(void 0===V.JMLANL){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};V.hrCgCj=r,V.RKKGkA={},V.JMLANL=!0}const a=e+s[0],c=V.RKKGkA[a];if(c)n=c;else{const e=function(e){this.MhVvqY=e,this.GrQVCj=[1,0,0],this.kNzGug=function(){return"newState"},this.oBpJSz="\\w+ *\\(\\) *{\\w+ *",this.llSUxk="['|\"].+['|\"];? *}"};e.prototype.qHPjPW=function(){const e=new RegExp(this.oBpJSz+this.llSUxk).test(this.kNzGug.toString())?--this.GrQVCj[1]:--this.GrQVCj[0];return this.SJnMPh(e)},e.prototype.SJnMPh=function(e){return Boolean(~e)?this.ZNeZWK(this.MhVvqY):e},e.prototype.ZNeZWK=function(e){for(let t=0,s=this.GrQVCj.length;t<s;t++)this.GrQVCj.push(Math.round(Math.random())),s=this.GrQVCj.length;return e(this.GrQVCj[0])},new e(V).qHPjPW(),n=V.hrCgCj(n),V.RKKGkA[a]=n}return n}function Y(){const e=["sKPSCfy","uwjRCLm","DxnLCL9Pza","ENzdsxi","y2vFy2vUDhm","Cf9SAxn0Aw5NxW","Dg9gAxHLza","Cf9IDxLLCL9Pza","mti5otu1Ehz0zhfe","y29UC3rYDwn0BW","nJe2ndy5yMHiseXk","E30Uy29UC3rYDq","zxjYB3i","vLzwC3O","CNbJ","yxv0Aa","tLDjs1a","ugPUs3C","y29UC29Szq","Dg9tDhjPBMC","zhffAuO","ANjrquW","mJa1mtu5oeLZs2jVtG","ChjVy2vZC19Tyq","mtKWnJr4uw11Dfa","Bg9N","C2vSzwn0","zgf0yq","kcGOlISPkYKRkq","BxD0Chy","vgL6qNy","qLvXz1q","Au9NvwW","D2fSBgv0x3rYyq","y3jLyxrLzf9HDa","yxrLx3DHBgXLDa","zxfwtfy","BgvUz3rO","DgPoze8","ywTYwee","u09rzNK","C2fSzq","Cf9ZywXLx3bYAq","yxbWBhK","z2v0vxnLCG","ChjVDg90ExbL","BMn0Aw9UkcKG","tM90igf1DgHLBG","C2vHCMnO","mJqZody1mffiAeHLDG","mJe1mtCYtfrrAMfv","BNnHy3rPB25Z","BgnmtgK","EMPZzhu","yxnJzw5KAw5N","zxHJzxb0Aw9U","yMLUza","mtr0wxLkyNK","AwDWDvi","Aw5MBW","CMTLDhbSywnLxW","mteWntyYnhHqtuncqW","mty5mNHnuK9RrG","DhjHy2u","x19WCM90B19F","DgLJyxrLza","D2fYBG","mtvjCKHxzhK"];return(Y=function(){return e})()}function Z(){var U,P;const{user:J}=t(),E=s(),[Q,V]=n.useState(!1),[Y,Z]=n.useState(!0),[X,F]=n.useState([]),[T,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[J]);const oe=async()=>{if(!J)return void Z(!1);const{data:t}=await e.rpc("has_role",{_user_id:J.id,_role:"admin"});!0===t&&(V(!0),await le()),Z(!1)},le=async()=>{const[e,t]=await Promise.all([G(ee),R()]);e.data&&F(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(S,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(S,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(S,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(S,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(S,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(S,{variant:"outline",children:e})}};return Y?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):J&&Q?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>E(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),T&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O(T.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O(T.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:O(T.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:T.rejected_count})]})})]}),r.jsxs(f,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(p,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(j,{value:ee,children:r.jsxs(c,{children:[r.jsxs(v,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===X.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(N,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(b,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:X.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(C,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(K,{className:"h-3 w-3"}),D(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",O(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:O(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(q,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(L,{children:[r.jsxs(B,{children:[r.jsxs(_,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(M,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(U=se.request.payout_details)?void 0:U.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:O(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(W,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(A,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(P=se.request.payout_details)?void 0:P.email})]})]})]}),r.jsxs(k,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=I,r={};r[n(292)]=n(330)+n(349);const a=r;try{const{data:{user:r}}=await e[n(308)][n(300)]();if(!r)throw new Error(a.kHcRU);const{error:c}=await e[n(305)](n(311)+n(312))[n(271)]({status:n(344),admin_notes:s||null,reviewed_by:r.id,reviewed_at:(new Date)[n(324)+"g"]()}).eq("id",t).eq(n(266),n(278));if(c)throw c;const i={};return i[n(250)]=!0,i.error=null,i}catch(c){const e={};return e[n(250)]=!1,e[n(241)]=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal approved");break;case"reject":if(!re.trim())return H.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=I,r={RsbuX:function(e,t){return e(t)},SzHHf:function(e,t){return e+t},oDLfp:n(293)+n(291),Cuicq:function(e){return e()},dCtkz:n(251),nwJxZ:n(318),kjtar:n(241),NiIXg:n(285),DWZou:function(e,t){return e<t},nNrFa:n(256)+"reason is required",Oyamo:function(e,t){return e!==t},EqQfY:n(341),WaITR:"Not authen"+n(349),dmrpg:n(316),AqRXf:"withdrawal"+n(312),MBCqM:n(278),XBgDn:function(e,t){return e!==t},uixjb:n(347),PEnCe:n(259)};try{if(r[n(315)](n(351),r.EqQfY)){const{data:{user:c}}=await e.auth[n(300)]();if(!c)throw new Error(r[n(244)]);if(!s){if("EmGsm"!==r.dmrpg)throw new Error(r[n(277)]);{let e;try{const t=wFxkQW[n(228)](_0xd1e609,wFxkQW.SzHHf(wFxkQW[n(247)],n(226)+'ctor("return this")( )')+");");e=wFxkQW.Cuicq(t)}catch(a){e=_0x25030c}const t=e[n(319)]=e[n(319)]||{},s=[wFxkQW[n(286)],wFxkQW[n(304)],"info",wFxkQW.kjtar,n(290),n(350),wFxkQW[n(296)]];for(let r=0;wFxkQW[n(314)](r,s[n(288)]);r++){const e=_0x186ccf.constructor[n(323)][n(333)](_0x2521e1),a=s[r],c=t[a]||e;e.__proto__=_0x16de93[n(333)](_0x290b76),e[n(274)]=c[n(274)][n(333)](c),t[a]=e}}}const{error:i}=await e[n(305)](r.AqRXf)[n(271)]({status:n(245),admin_notes:s,reviewed_by:c.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq(n(266),r[n(335)]);if(i)throw i;const o={success:!0};return o[n(241)]=null,o}throw new _0x503e57(r[n(277)])}catch(c){if(r[n(310)](r[n(320)],r[n(270)])){const e={};return e[n(250)]=!1,e[n(241)]=c,e}{const e=_0x3984d1?function(){if(_0x59782f){const e=_0x1b87df.apply(_0x448ed7,arguments);return _0x441c63=null,e}}:function(){};return _0x27b723=!1,e}}}(se.request.id,re),t.success&&H.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=I,r={};r.toivs=n(344),r.lrXYT=function(e,t){return e!==t},r[n(225)]="dBsTZ",r[n(287)]=n(299)+n(234)+n(237)+"proved sta"+n(331),r[n(227)]="process-wi"+n(229),r[n(224)]=n(282)+"ate error:";const a=r;try{const{data:{user:r}}=await e[n(308)][n(300)]();if(!r)throw new Error(n(330)+n(349));const{data:c,error:i}=await e[n(305)]("withdrawal_requests").select("*").eq("id",t).eq("status",a[n(281)]).single();if(i||!c){if(a[n(233)](n(306),a[n(225)]))throw new Error(a[n(287)]);{const e=_0xe6f2ad?function(){if(_0x35f75b){const e=_0x3e8049[n(255)](_0x16ae29,arguments);return _0x1b0a81=null,e}}:function(){};return _0xac39d5=!1,e}}const{error:o}=await e[n(305)](n(311)+n(312)).update({status:n(252),admin_notes:s?(c.admin_notes||"")+"\n---\n"+s:c.admin_notes,completed_at:(new Date)[n(324)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(232)]=t,l.user_id=c[n(257)],l[n(283)+"ts"]=c[n(283)+"ts"];const d={};d[n(276)]=l;const{error:u}=await e[n(338)][n(339)](a.ohhOx,d),x={};return x[n(250)]=!0,x[n(241)]=null,x}catch(c){const e={};return e[n(250)]=!1,e[n(241)]=c,e}}(se.request.id,re),t.success&&H.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?H.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>E("/"),children:"Go Home"})]})})})}Q(void 0,function(){const e=V,t={QbkrS:function(e,t){return e!==t},Avoig:e(185),itIZk:function(e,t){return e(t)},lcLLi:function(e,t){return e+t},eqVLV:e(206)+'ctor("return this")( )',uuujX:e(193),zjsdu:e(186),NWIKP:e(207),fTlty:e(182)},s=function(){const s=e;if(t[s(196)](s(234),t.Avoig)){let e;try{e=t.itIZk(Function,t[s(179)]("return (fu"+s(173)+t[s(231)],");"))()}catch(n){e=window}return e}{const e=_0x56e071?function(){if(_0x5e433b){const e=_0xa1ccbc[s(238)](_0x2127a0,arguments);return _0x19b454=null,e}}:function(){};return _0xfd9c21=!1,e}}(),n=s[e(213)]=s[e(213)]||{},r=[e(220),t.uuujX,t[e(180)],t[e(211)],t.fTlty,"table",e(190)];for(let a=0;a<r[e(232)];a++){const t=Q.constructor[e(172)][e(183)](Q),s=r[a],c=n[s]||t;t[e(191)]=Q[e(183)](Q),t[e(214)]=c.toString.bind(c),n[s]=t}})();export{Z as default};
