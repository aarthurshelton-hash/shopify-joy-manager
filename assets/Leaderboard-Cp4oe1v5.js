const n='import { useState, useEffect } from \'react\';\nimport { Link } from \'react-router-dom\';\nimport { Header } from \'@/components/shop/Header\';\nimport { Footer } from \'@/components/shop/Footer\';\nimport { \n  Trophy, Crown, Medal, Star, Eye, Heart, Palette, \n  TrendingUp, TrendingDown, Minus, Sparkles, ChevronRight, \n  User, Flame, Zap, Target, Award, Rocket, Swords, Shield,\n  Image, BarChart3\n} from \'lucide-react\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { useAuth } from \'@/hooks/useAuth\';\nimport { supabase } from \'@/integrations/supabase/client\';\nimport { getRatingTier } from \'@/lib/chess/eloCalculator\';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \'@/components/ui/tabs\';\n\ninterface CreatorStats {\n  userId: string;\n  displayName: string;\n  visualizations: number;\n  favorites: number;\n  palettes: number;\n  chessWins: number;\n  chessLosses: number;\n  chessDraws: number;\n  eloRating: number;\n  totalScore: number;\n  rank: number;\n  rankChange: number;\n  badges: Badge[];\n}\n\ninterface VisionScore {\n  id: string;\n  title: string;\n  ownerName: string;\n  ownerId: string;\n  totalScore: number;\n  viewCount: number;\n  downloadHdCount: number;\n  downloadGifCount: number;\n  tradeCount: number;\n  printOrderCount: number;\n  imagePath: string;\n  rank: number;\n}\n\ninterface Badge {\n  id: string;\n  name: string;\n  icon: \'trophy\' | \'star\' | \'zap\' | \'target\' | \'award\' | \'rocket\' | \'flame\' | \'crown\' | \'swords\' | \'shield\';\n  color: string;\n  description: string;\n}\n\n// Badge definitions\nconst BADGE_DEFINITIONS: Record<string, Badge> = {\n  top_creator: {\n    id: \'top_creator\',\n    name: \'Top Creator\',\n    icon: \'crown\',\n    color: \'from-yellow-500 to-amber-500\',\n    description: \'Ranked #1 this week\'\n  },\n  rising_star: {\n    id: \'rising_star\',\n    name: \'Rising Star\',\n    icon: \'rocket\',\n    color: \'from-blue-500 to-cyan-500\',\n    description: \'Climbed 3+ ranks this week\'\n  },\n  prolific_artist: {\n    id: \'prolific_artist\',\n    name: \'Prolific Artist\',\n    icon: \'zap\',\n    color: \'from-purple-500 to-pink-500\',\n    description: \'10+ visualizations created\'\n  },\n  curator: {\n    id: \'curator\',\n    name: \'Curator\',\n    icon: \'star\',\n    color: \'from-amber-500 to-orange-500\',\n    description: \'20+ games favorited\'\n  },\n  palette_master: {\n    id: \'palette_master\',\n    name: \'Palette Master\',\n    icon: \'target\',\n    color: \'from-green-500 to-emerald-500\',\n    description: \'5+ custom palettes\'\n  },\n  on_fire: {\n    id: \'on_fire\',\n    name: \'On Fire\',\n    icon: \'flame\',\n    color: \'from-red-500 to-orange-500\',\n    description: \'Active 3+ days this week\'\n  },\n  top_10: {\n    id: \'top_10\',\n    name: \'Top 10\',\n    icon: \'award\',\n    color: \'from-indigo-500 to-violet-500\',\n    description: \'Ranked in top 10\'\n  },\n  consistent: {\n    id: \'consistent\',\n    name: \'Consistent\',\n    icon: \'trophy\',\n    color: \'from-teal-500 to-cyan-500\',\n    description: \'Active for 4+ weeks\'\n  },\n  chess_champion: {\n    id: \'chess_champion\',\n    name: \'Chess Champion\',\n    icon: \'swords\',\n    color: \'from-yellow-600 to-amber-600\',\n    description: \'10+ chess victories\'\n  },\n  undefeated: {\n    id: \'undefeated\',\n    name: \'Undefeated\',\n    icon: \'shield\',\n    color: \'from-emerald-500 to-teal-500\',\n    description: \'5+ wins with no losses\'\n  }\n};\n\nconst BadgeIcon = ({ badge }: { badge: Badge }) => {\n  const icons = {\n    trophy: Trophy,\n    star: Star,\n    zap: Zap,\n    target: Target,\n    award: Award,\n    rocket: Rocket,\n    flame: Flame,\n    crown: Crown,\n    swords: Swords,\n    shield: Shield\n  };\n  const Icon = icons[badge.icon];\n  return <Icon className="h-3 w-3" />;\n};\n\n// Projected baseline creators with rank changes and badges\nconst PROJECTED_CREATORS: Omit<CreatorStats, \'rank\'>[] = [\n  { \n    userId: \'proj-1\', \n    displayName: \'ChessMaster_Art\', \n    visualizations: 47, \n    favorites: 28, \n    palettes: 12, \n    chessWins: 15,\n    chessLosses: 3,\n    chessDraws: 2,\n    eloRating: 1842,\n    totalScore: 257,\n    rankChange: 0,\n    badges: [BADGE_DEFINITIONS.top_creator, BADGE_DEFINITIONS.chess_champion, BADGE_DEFINITIONS.palette_master]\n  },\n  { \n    userId: \'proj-2\', \n    displayName: \'KingsPawn\', \n    visualizations: 39, \n    favorites: 34, \n    palettes: 8, \n    chessWins: 12,\n    chessLosses: 5,\n    chessDraws: 1,\n    eloRating: 1756,\n    totalScore: 224,\n    rankChange: 2,\n    badges: [BADGE_DEFINITIONS.rising_star, BADGE_DEFINITIONS.chess_champion]\n  },\n  { \n    userId: \'proj-3\', \n    displayName: \'QueensGambit\', \n    visualizations: 35, \n    favorites: 22, \n    palettes: 15, \n    chessWins: 8,\n    chessLosses: 2,\n    chessDraws: 3,\n    eloRating: 1698,\n    totalScore: 192,\n    rankChange: -1,\n    badges: [BADGE_DEFINITIONS.palette_master, BADGE_DEFINITIONS.prolific_artist]\n  },\n  { \n    userId: \'proj-4\', \n    displayName: \'SicilianDefender\', \n    visualizations: 31, \n    favorites: 19, \n    palettes: 11, \n    chessWins: 10,\n    chessLosses: 4,\n    chessDraws: 2,\n    eloRating: 1623,\n    totalScore: 180,\n    rankChange: 1,\n    badges: [BADGE_DEFINITIONS.on_fire, BADGE_DEFINITIONS.chess_champion]\n  },\n  { \n    userId: \'proj-5\', \n    displayName: \'RookEndgame\', \n    visualizations: 28, \n    favorites: 25, \n    palettes: 6, \n    chessWins: 7,\n    chessLosses: 0,\n    chessDraws: 1,\n    eloRating: 1587,\n    totalScore: 153,\n    rankChange: -2,\n    badges: [BADGE_DEFINITIONS.undefeated, BADGE_DEFINITIONS.top_10]\n  },\n  { \n    userId: \'proj-6\', \n    displayName: \'BishopPair\', \n    visualizations: 26, \n    favorites: 18, \n    palettes: 9, \n    chessWins: 5,\n    chessLosses: 3,\n    chessDraws: 2,\n    eloRating: 1445,\n    totalScore: 131,\n    rankChange: 3,\n    badges: [BADGE_DEFINITIONS.rising_star, BADGE_DEFINITIONS.top_10]\n  },\n  { \n    userId: \'proj-7\', \n    displayName: \'KnightRider64\', \n    visualizations: 24, \n    favorites: 21, \n    palettes: 5, \n    chessWins: 4,\n    chessLosses: 2,\n    chessDraws: 1,\n    eloRating: 1378,\n    totalScore: 120,\n    rankChange: 0,\n    badges: [BADGE_DEFINITIONS.consistent, BADGE_DEFINITIONS.top_10]\n  },\n  { \n    userId: \'proj-8\', \n    displayName: \'EnPassantPro\', \n    visualizations: 22, \n    favorites: 16, \n    palettes: 8, \n    chessWins: 3,\n    chessLosses: 1,\n    chessDraws: 0,\n    eloRating: 1312,\n    totalScore: 107,\n    rankChange: 1,\n    badges: [BADGE_DEFINITIONS.palette_master]\n  },\n  { \n    userId: \'proj-9\', \n    displayName: \'CastleKing\', \n    visualizations: 20, \n    favorites: 14, \n    palettes: 7, \n    chessWins: 2,\n    chessLosses: 3,\n    chessDraws: 1,\n    eloRating: 1256,\n    totalScore: 92,\n    rankChange: -1,\n    badges: [BADGE_DEFINITIONS.consistent]\n  },\n  { \n    userId: \'proj-10\', \n    displayName: \'PawnStorm\', \n    visualizations: 18, \n    favorites: 12, \n    palettes: 6, \n    chessWins: 1,\n    chessLosses: 2,\n    chessDraws: 0,\n    eloRating: 1200,\n    totalScore: 77,\n    rankChange: 2,\n    badges: [BADGE_DEFINITIONS.rising_star, BADGE_DEFINITIONS.top_10]\n  },\n];\n\n// Calculate badges based on stats\nconst calculateBadges = (\n  stats: { visualizations: number; favorites: number; palettes: number; chessWins: number; chessLosses: number }, \n  rank: number, \n  rankChange: number\n): Badge[] => {\n  const badges: Badge[] = [];\n  \n  if (rank === 1) badges.push(BADGE_DEFINITIONS.top_creator);\n  if (rank <= 10) badges.push(BADGE_DEFINITIONS.top_10);\n  if (rankChange >= 3) badges.push(BADGE_DEFINITIONS.rising_star);\n  if (stats.visualizations >= 10) badges.push(BADGE_DEFINITIONS.prolific_artist);\n  if (stats.favorites >= 20) badges.push(BADGE_DEFINITIONS.curator);\n  if (stats.palettes >= 5) badges.push(BADGE_DEFINITIONS.palette_master);\n  if (stats.chessWins >= 10) badges.push(BADGE_DEFINITIONS.chess_champion);\n  if (stats.chessWins >= 5 && stats.chessLosses === 0) badges.push(BADGE_DEFINITIONS.undefeated);\n  \n  return badges.slice(0, 3); // Max 3 badges\n};\n\nconst RankChangeIndicator = ({ change }: { change: number }) => {\n  if (change === 0) {\n    return (\n      <span className="flex items-center gap-0.5 text-muted-foreground/50">\n        <Minus className="h-3 w-3" />\n      </span>\n    );\n  }\n  \n  if (change > 0) {\n    return (\n      <motion.span \n        initial={{ y: 5, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        className="flex items-center gap-0.5 text-green-500"\n      >\n        <TrendingUp className="h-3 w-3" />\n        <span className="text-xs font-display">{change}</span>\n      </motion.span>\n    );\n  }\n  \n  return (\n    <motion.span \n      initial={{ y: -5, opacity: 0 }}\n      animate={{ y: 0, opacity: 1 }}\n      className="flex items-center gap-0.5 text-red-500"\n    >\n      <TrendingDown className="h-3 w-3" />\n      <span className="text-xs font-display">{Math.abs(change)}</span>\n    </motion.span>\n  );\n};\n\nconst BadgeDisplay = ({ badges, compact = false }: { badges: Badge[]; compact?: boolean }) => {\n  if (badges.length === 0) return null;\n  \n  return (\n    <div className={`flex ${compact ? \'gap-1\' : \'gap-1.5\'} flex-wrap`}>\n      {badges.slice(0, compact ? 2 : 3).map((badge, index) => (\n        <motion.div\n          key={badge.id}\n          initial={{ scale: 0, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          transition={{ delay: index * 0.1, type: \'spring\', stiffness: 500 }}\n          className="group relative"\n        >\n          <div className={`flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-gradient-to-r ${badge.color} text-white ${compact ? \'text-[10px]\' : \'text-xs\'}`}>\n            <BadgeIcon badge={badge} />\n            {!compact && <span className="font-display">{badge.name}</span>}\n          </div>\n          {/* Tooltip */}\n          <div className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-popover border border-border rounded-md text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10">\n            <p className="font-display font-medium">{badge.name}</p>\n            <p className="text-muted-foreground text-[10px]">{badge.description}</p>\n          </div>\n        </motion.div>\n      ))}\n      {badges.length > (compact ? 2 : 3) && (\n        <span className="text-[10px] text-muted-foreground font-display">+{badges.length - (compact ? 2 : 3)}</span>\n      )}\n    </div>\n  );\n};\n\nconst getRankIcon = (rank: number) => {\n  switch (rank) {\n    case 1:\n      return <Crown className="h-6 w-6 text-yellow-500" />;\n    case 2:\n      return <Medal className="h-6 w-6 text-gray-400" />;\n    case 3:\n      return <Medal className="h-6 w-6 text-amber-600" />;\n    default:\n      return <span className="w-6 h-6 flex items-center justify-center text-sm font-display text-muted-foreground">{rank}</span>;\n  }\n};\n\nconst getRankBadgeStyle = (rank: number) => {\n  switch (rank) {\n    case 1:\n      return \'bg-gradient-to-r from-yellow-500/20 to-amber-500/20 border-yellow-500/40\';\n    case 2:\n      return \'bg-gradient-to-r from-gray-400/20 to-slate-400/20 border-gray-400/40\';\n    case 3:\n      return \'bg-gradient-to-r from-amber-600/20 to-orange-500/20 border-amber-600/40\';\n    default:\n      return \'bg-card/50 border-border/50\';\n  }\n};\n\nconst Leaderboard = () => {\n  const { user, isPremium } = useAuth();\n  const [isLoading, setIsLoading] = useState(true);\n  const [creators, setCreators] = useState<CreatorStats[]>([]);\n  const [visionScores, setVisionScores] = useState<VisionScore[]>([]);\n  const [userRank, setUserRank] = useState<CreatorStats | null>(null);\n  const [timeframe, setTimeframe] = useState<\'all\' | \'month\' | \'week\'>(\'all\');\n  const [activeTab, setActiveTab] = useState<\'creators\' | \'visions\'>(\'creators\');\n  const [isLoadingVisions, setIsLoadingVisions] = useState(false);\n\n  // Fetch Vision Scores\n  useEffect(() => {\n    const fetchVisionScores = async () => {\n      if (activeTab !== \'visions\') return;\n      \n      setIsLoadingVisions(true);\n      try {\n        const { data: scoresData, error: scoresError } = await supabase\n          .from(\'vision_scores\')\n          .select(`\n            *,\n            saved_visualizations!inner (\n              id,\n              title,\n              image_path,\n              user_id\n            )\n          `)\n          .order(\'total_score\', { ascending: false })\n          .limit(25);\n\n        if (scoresError) throw scoresError;\n\n        // Get owner profiles\n        const ownerIds = [...new Set(scoresData?.map(s => s.saved_visualizations?.user_id).filter(Boolean) || [])];\n        const { data: profiles } = await supabase\n          .from(\'profiles\')\n          .select(\'user_id, display_name\')\n          .in(\'user_id\', ownerIds);\n\n        const profilesMap: Record<string, string> = {};\n        profiles?.forEach(p => {\n          profilesMap[p.user_id] = p.display_name || \'Anonymous\';\n        });\n\n        const visions: VisionScore[] = (scoresData || []).map((score, index) => ({\n          id: score.visualization_id,\n          title: score.saved_visualizations?.title || \'Untitled Vision\',\n          ownerName: profilesMap[score.saved_visualizations?.user_id] || \'Anonymous\',\n          ownerId: score.saved_visualizations?.user_id,\n          totalScore: Number(score.total_score) || 0,\n          viewCount: score.view_count || 0,\n          downloadHdCount: score.download_hd_count || 0,\n          downloadGifCount: score.download_gif_count || 0,\n          tradeCount: score.trade_count || 0,\n          printOrderCount: score.print_order_count || 0,\n          imagePath: score.saved_visualizations?.image_path || \'\',\n          rank: index + 1\n        }));\n\n        setVisionScores(visions);\n      } catch (error) {\n        console.error(\'Error fetching vision scores:\', error);\n        setVisionScores([]);\n      } finally {\n        setIsLoadingVisions(false);\n      }\n    };\n\n    fetchVisionScores();\n  }, [activeTab]);\n\n  useEffect(() => {\n    const fetchLeaderboard = async () => {\n      setIsLoading(true);\n      \n      try {\n        const [vizResult, favResult, paletteResult, profilesResult, chessGamesResult] = await Promise.all([\n          supabase.from(\'saved_visualizations\').select(\'user_id\'),\n          supabase.from(\'favorite_games\').select(\'user_id\'),\n          supabase.from(\'saved_palettes\').select(\'user_id\'),\n          supabase.from(\'profiles\').select(\'user_id, display_name, elo_rating\'),\n          supabase.from(\'chess_games\').select(\'white_player_id, black_player_id, result, winner_id\').eq(\'status\', \'completed\')\n        ]);\n\n        const userStats: Record<string, { \n          visualizations: number; \n          favorites: number; \n          palettes: number;\n          chessWins: number;\n          chessLosses: number;\n          chessDraws: number;\n        }> = {};\n        \n        const initUser = (userId: string) => {\n          if (!userStats[userId]) {\n            userStats[userId] = { \n              visualizations: 0, \n              favorites: 0, \n              palettes: 0,\n              chessWins: 0,\n              chessLosses: 0,\n              chessDraws: 0\n            };\n          }\n        };\n        \n        vizResult.data?.forEach(v => {\n          initUser(v.user_id);\n          userStats[v.user_id].visualizations++;\n        });\n\n        favResult.data?.forEach(f => {\n          initUser(f.user_id);\n          userStats[f.user_id].favorites++;\n        });\n\n        paletteResult.data?.forEach(p => {\n          initUser(p.user_id);\n          userStats[p.user_id].palettes++;\n        });\n\n        // Process chess games\n        chessGamesResult.data?.forEach(game => {\n          const whiteId = game.white_player_id;\n          const blackId = game.black_player_id;\n          \n          if (whiteId) initUser(whiteId);\n          if (blackId) initUser(blackId);\n          \n          if (game.result === \'draw\') {\n            if (whiteId) userStats[whiteId].chessDraws++;\n            if (blackId) userStats[blackId].chessDraws++;\n          } else if (game.result === \'white_wins\') {\n            if (whiteId) userStats[whiteId].chessWins++;\n            if (blackId) userStats[blackId].chessLosses++;\n          } else if (game.result === \'black_wins\') {\n            if (blackId) userStats[blackId].chessWins++;\n            if (whiteId) userStats[whiteId].chessLosses++;\n          }\n        });\n\n        const profilesMap: Record<string, { displayName: string; eloRating: number }> = {};\n        profilesResult.data?.forEach(p => {\n          profilesMap[p.user_id] = { \n            displayName: p.display_name || \'Anonymous Artist\',\n            eloRating: p.elo_rating || 1200\n          };\n        });\n\n        // Calculate scores: visualizations (3pts), favorites (2pts), palettes (2pts), wins (5pts), draws (1pt)\n        const realCreators: CreatorStats[] = Object.entries(userStats)\n          .map(([userId, stats]) => {\n            const totalScore = \n              (stats.visualizations * 3) + \n              (stats.favorites * 2) + \n              (stats.palettes * 2) + \n              (stats.chessWins * 5) + \n              (stats.chessDraws * 1);\n            // Simulate rank change based on activity (in production, compare with previous week\'s data)\n            const rankChange = Math.floor(Math.random() * 7) - 3; // -3 to +3\n            const profile = profilesMap[userId];\n            \n            return {\n              userId,\n              displayName: profile?.displayName || \'Anonymous Artist\',\n              visualizations: stats.visualizations,\n              favorites: stats.favorites,\n              palettes: stats.palettes,\n              chessWins: stats.chessWins,\n              chessLosses: stats.chessLosses,\n              chessDraws: stats.chessDraws,\n              eloRating: profile?.eloRating || 1200,\n              totalScore,\n              rank: 0,\n              rankChange,\n              badges: [] as Badge[]\n            };\n          })\n          .sort((a, b) => b.totalScore - a.totalScore);\n\n        let allCreators = [...realCreators];\n        \n        if (realCreators.length < 10) {\n          const neededProjected = 10 - realCreators.length;\n          const projectedToAdd = PROJECTED_CREATORS.slice(0, neededProjected).map(p => ({\n            ...p,\n            rank: 0\n          }));\n          allCreators = [...realCreators, ...projectedToAdd];\n        }\n\n        // Sort and assign ranks\n        allCreators.sort((a, b) => b.totalScore - a.totalScore);\n        allCreators = allCreators.map((creator, index) => {\n          const rank = index + 1;\n          const badges = creator.badges.length > 0 \n            ? creator.badges \n            : calculateBadges(\n                { \n                  visualizations: creator.visualizations, \n                  favorites: creator.favorites, \n                  palettes: creator.palettes,\n                  chessWins: creator.chessWins,\n                  chessLosses: creator.chessLosses\n                },\n                rank,\n                creator.rankChange\n              );\n          return {\n            ...creator,\n            rank,\n            badges\n          };\n        });\n\n        setCreators(allCreators.slice(0, 25));\n\n        if (user) {\n          const userCreator = allCreators.find(c => c.userId === user.id);\n          if (userCreator) {\n            setUserRank(userCreator);\n          }\n        }\n      } catch (error) {\n        console.error(\'Error fetching leaderboard:\', error);\n        setCreators(PROJECTED_CREATORS.map((c, i) => ({ ...c, rank: i + 1 })));\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchLeaderboard();\n  }, [user, timeframe]);\n\n  // Vision Score Card Component\n  const VisionScoreCard = ({ vision, index }: { vision: VisionScore; index: number }) => (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: index * 0.05 }}\n      className={`p-4 rounded-lg border ${getRankBadgeStyle(vision.rank)} flex items-center gap-4`}\n    >\n      <div className="w-10 h-10 flex items-center justify-center shrink-0">\n        {getRankIcon(vision.rank)}\n      </div>\n      \n      <div className="w-12 h-12 rounded-lg overflow-hidden bg-muted shrink-0">\n        {vision.imagePath ? (\n          <img \n            src={`${import.meta.env.VITE_SUPABASE_URL}/storage/v1/object/public/visualizations/${vision.imagePath}`}\n            alt={vision.title}\n            className="w-full h-full object-cover"\n          />\n        ) : (\n          <div className="w-full h-full flex items-center justify-center">\n            <Image className="h-5 w-5 text-muted-foreground" />\n          </div>\n        )}\n      </div>\n      \n      <div className="flex-1 min-w-0">\n        <Link \n          to={`/vision/${vision.id}`}\n          className="font-display font-bold text-sm hover:text-primary transition-colors truncate block"\n        >\n          {vision.title}\n        </Link>\n        <p className="text-xs text-muted-foreground">by {vision.ownerName}</p>\n      </div>\n      \n      <div className="grid grid-cols-4 gap-3 text-center shrink-0">\n        <div>\n          <p className="text-sm font-display font-bold">{vision.viewCount}</p>\n          <p className="text-[10px] text-muted-foreground flex items-center justify-center gap-0.5">\n            <Eye className="h-2.5 w-2.5" />\n            Views\n          </p>\n        </div>\n        <div>\n          <p className="text-sm font-display font-bold">{vision.downloadHdCount + vision.downloadGifCount}</p>\n          <p className="text-[10px] text-muted-foreground">DLs</p>\n        </div>\n        <div>\n          <p className="text-sm font-display font-bold">{vision.tradeCount}</p>\n          <p className="text-[10px] text-muted-foreground">Trades</p>\n        </div>\n        <div>\n          <p className="text-sm font-display font-bold text-primary">{vision.totalScore.toFixed(2)}</p>\n          <p className="text-[10px] text-muted-foreground">Score</p>\n        </div>\n      </div>\n    </motion.div>\n  );\n\n  return (\n    <div className="min-h-screen bg-background">\n      <Header />\n      \n      <main className="container mx-auto px-4 py-16">\n        <div className="max-w-4xl mx-auto space-y-10">\n          {/* Hero */}\n          <div className="text-center space-y-6">\n            <div className="inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-display uppercase tracking-widest">\n              <Trophy className="h-4 w-4" />\n              Community Rankings\n            </div>\n            <h1 className="text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide">\n              Community <span className="text-gold-gradient">Leaderboard</span>\n            </h1>\n            <p className="text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto">\n              Celebrating the most active artists, curators, and top-performing visions.\n            </p>\n          </div>\n\n          {/* Tab Navigation */}\n          <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as \'creators\' | \'visions\')} className="w-full">\n            <TabsList className="grid w-full grid-cols-2 max-w-md mx-auto">\n              <TabsTrigger value="creators" className="gap-2">\n                <User className="h-4 w-4" />\n                Creators\n              </TabsTrigger>\n              <TabsTrigger value="visions" className="gap-2">\n                <BarChart3 className="h-4 w-4" />\n                Vision Scores\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value="creators" className="mt-8 space-y-6">\n              {/* Weekly Badges Showcase */}\n              <motion.div \n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className="p-6 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent"\n              >\n                <div className="flex items-center gap-2 mb-4">\n                  <Award className="h-5 w-5 text-primary" />\n                  <h3 className="font-display font-bold uppercase tracking-wider">Weekly Achievements</h3>\n                </div>\n                <div className="flex gap-3 overflow-x-auto pb-2 scrollbar-hide snap-x snap-mandatory md:grid md:grid-cols-4 md:overflow-visible md:pb-0">\n                  {Object.values(BADGE_DEFINITIONS).slice(0, 4).map((badge, index) => (\n                    <motion.div\n                      key={badge.id}\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ delay: index * 0.1 }}\n                      className="p-3 rounded-lg bg-card/50 border border-border/30 text-center group hover:border-primary/30 transition-colors min-w-[140px] sm:min-w-[160px] md:min-w-0 snap-start"\n                    >\n                      <div className={`w-10 h-10 rounded-full bg-gradient-to-r ${badge.color} flex items-center justify-center mx-auto mb-2 group-hover:scale-110 transition-transform`}>\n                        <BadgeIcon badge={badge} />\n                      </div>\n                      <p className="text-xs font-display font-medium">{badge.name}</p>\n                      <p className="text-[10px] text-muted-foreground">{badge.description}</p>\n                    </motion.div>\n                  ))}\n                </div>\n              </motion.div>\n\n              {/* Timeframe Selector */}\n              <div className="flex justify-center gap-2">\n                {([\'all\', \'month\', \'week\'] as const).map((tf) => (\n                  <button\n                    key={tf}\n                    onClick={() => setTimeframe(tf)}\n                    className={`px-4 py-2 rounded-lg text-sm font-display uppercase tracking-wider transition-all ${\n                      timeframe === tf \n                        ? \'bg-primary text-primary-foreground\' \n                        : \'bg-card/50 border border-border/50 text-muted-foreground hover:border-primary/30\'\n                    }`}\n                  >\n                    {tf === \'all\' ? \'All Time\' : tf === \'month\' ? \'This Month\' : \'This Week\'}\n                  </button>\n                ))}\n              </div>\n\n          {/* Current User Rank Card */}\n          {user && userRank && (\n            <motion.div \n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className="p-6 rounded-lg border border-primary/40 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent"\n            >\n              <div className="flex items-center justify-between flex-wrap gap-4">\n                <div className="flex items-center gap-4">\n                  <div className="w-14 h-14 rounded-full bg-primary/20 flex items-center justify-center">\n                    <User className="h-7 w-7 text-primary" />\n                  </div>\n                  <div>\n                    <div className="flex items-center gap-2">\n                      <p className="text-sm text-muted-foreground font-display uppercase tracking-wider">Your Rank</p>\n                      <RankChangeIndicator change={userRank.rankChange} />\n                    </div>\n                    <p className="text-3xl font-display font-bold">#{userRank.rank}</p>\n                  </div>\n                </div>\n                <BadgeDisplay badges={userRank.badges} />\n                <div className="flex gap-6 flex-wrap">\n                  <div className="text-center">\n                    <div className={`inline-block px-2 py-0.5 rounded-full bg-gradient-to-r ${getRatingTier(userRank.eloRating).color} text-white text-xs font-display mb-1`}>\n                      {getRatingTier(userRank.eloRating).name}\n                    </div>\n                    <p className="text-2xl font-display font-bold">{userRank.eloRating}</p>\n                    <p className="text-xs text-muted-foreground font-display uppercase">ELO</p>\n                  </div>\n                  <div className="text-center">\n                    <p className="text-2xl font-display font-bold">{userRank.visualizations}</p>\n                    <p className="text-xs text-muted-foreground font-display uppercase">Artworks</p>\n                  </div>\n                  <div className="text-center">\n                    <p className="text-2xl font-display font-bold">{userRank.chessWins}</p>\n                    <p className="text-xs text-muted-foreground font-display uppercase">Wins</p>\n                  </div>\n                  <div className="text-center">\n                    <p className="text-2xl font-display font-bold">{userRank.totalScore}</p>\n                    <p className="text-xs text-muted-foreground font-display uppercase">Score</p>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          )}\n\n          {/* Top 3 Podium */}\n          <div className="grid md:grid-cols-3 gap-4">\n            {creators.slice(0, 3).map((creator, index) => {\n              const positions = [1, 0, 2];\n              const podiumOrder = positions[index];\n              const actualCreator = creators[podiumOrder];\n              if (!actualCreator) return null;\n\n              return (\n                <motion.div\n                  key={actualCreator.userId}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.1 }}\n                  className={`p-6 rounded-lg border ${getRankBadgeStyle(actualCreator.rank)} ${\n                    actualCreator.rank === 1 ? \'md:scale-105 md:-translate-y-2\' : \'\'\n                  }`}\n                >\n                  <div className="text-center space-y-4">\n                    <div className="relative">\n                      <div className="w-16 h-16 rounded-full bg-background/50 flex items-center justify-center mx-auto">\n                        {getRankIcon(actualCreator.rank)}\n                      </div>\n                      <div className="absolute -top-1 -right-1">\n                        <RankChangeIndicator change={actualCreator.rankChange} />\n                      </div>\n                    </div>\n                    <div>\n                      <p className="font-display font-bold text-lg">{actualCreator.displayName}</p>\n                      <div className="flex items-center justify-center gap-2">\n                        <span className={`text-xs px-2 py-0.5 rounded-full bg-gradient-to-r ${getRatingTier(actualCreator.eloRating).color} text-white font-display`}>\n                          {actualCreator.eloRating}\n                        </span>\n                        <p className="text-sm text-muted-foreground font-serif">Rank #{actualCreator.rank}</p>\n                      </div>\n                    </div>\n                    <BadgeDisplay badges={actualCreator.badges} compact />\n                    <div className="flex justify-center gap-4 text-sm">\n                      <div className="flex items-center gap-1 text-muted-foreground">\n                        <Eye className="h-3.5 w-3.5" />\n                        <span>{actualCreator.visualizations}</span>\n                      </div>\n                      <div className="flex items-center gap-1 text-muted-foreground">\n                        <Swords className="h-3.5 w-3.5" />\n                        <span>{actualCreator.chessWins}W</span>\n                      </div>\n                      <div className="flex items-center gap-1 text-muted-foreground">\n                        <Palette className="h-3.5 w-3.5" />\n                        <span>{actualCreator.palettes}</span>\n                      </div>\n                    </div>\n                    <div className="pt-2 border-t border-border/30">\n                      <p className="text-2xl font-display font-bold text-primary">{actualCreator.totalScore}</p>\n                      <p className="text-xs text-muted-foreground font-display uppercase tracking-wider">Total Score</p>\n                    </div>\n                  </div>\n                </motion.div>\n              );\n            })}\n          </div>\n\n          {/* Full Leaderboard */}\n          <div className="space-y-4">\n            <div className="flex items-center gap-3">\n              <Flame className="h-5 w-5 text-primary" />\n              <h2 className="text-xl font-display font-bold uppercase tracking-wider">Full Rankings</h2>\n            </div>\n            \n            <div className="rounded-lg border border-border/50 overflow-hidden">\n              {/* Header */}\n              <div className="grid grid-cols-16 gap-4 p-4 bg-card/80 border-b border-border/30 text-xs font-display uppercase tracking-wider text-muted-foreground">\n                <div className="col-span-1">Rank</div>\n                <div className="col-span-4">Creator</div>\n                <div className="col-span-2 text-center">ELO</div>\n                <div className="col-span-3">Badges</div>\n                <div className="col-span-2 text-center">Artworks</div>\n                <div className="col-span-2 text-center">Wins</div>\n                <div className="col-span-2 text-center">Score</div>\n              </div>\n              \n              {/* Rows */}\n              {isLoading ? (\n                <div className="p-8 text-center text-muted-foreground font-serif">\n                  Loading rankings...\n                </div>\n              ) : (\n                <AnimatePresence>\n                  {creators.map((creator, index) => (\n                    <motion.div\n                      key={creator.userId}\n                      initial={{ opacity: 0, x: -10 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      exit={{ opacity: 0, x: 10 }}\n                      transition={{ delay: index * 0.03 }}\n                      className={`grid grid-cols-16 gap-4 p-4 items-center border-b border-border/20 hover:bg-card/50 transition-colors ${\n                        user && creator.userId === user.id ? \'bg-primary/5\' : \'\'\n                      }`}\n                    >\n                      <div className="col-span-1 flex items-center gap-1">\n                        {getRankIcon(creator.rank)}\n                        <RankChangeIndicator change={creator.rankChange} />\n                      </div>\n                      <div className="col-span-4 flex items-center gap-3">\n                        <div className="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center">\n                          <User className="h-4 w-4 text-primary/70" />\n                        </div>\n                        <span className="font-display font-medium truncate">{creator.displayName}</span>\n                        {creator.rank <= 3 && (\n                          <Sparkles className="h-3.5 w-3.5 text-primary flex-shrink-0" />\n                        )}\n                      </div>\n                      <div className="col-span-2 text-center">\n                        <span className={`text-xs px-2 py-0.5 rounded-full bg-gradient-to-r ${getRatingTier(creator.eloRating).color} text-white font-display`}>\n                          {creator.eloRating}\n                        </span>\n                      </div>\n                      <div className="col-span-3">\n                        <BadgeDisplay badges={creator.badges} compact />\n                      </div>\n                      <div className="col-span-2 text-center">\n                        <span className="font-display">{creator.visualizations}</span>\n                      </div>\n                      <div className="col-span-2 text-center">\n                        <span className="font-display text-green-500">{creator.chessWins}</span>\n                      </div>\n                      <div className="col-span-2 text-center">\n                        <span className="font-display font-bold text-primary">{creator.totalScore}</span>\n                      </div>\n                    </motion.div>\n                  ))}\n                </AnimatePresence>\n              )}\n            </div>\n          </div>\n\n          {/* Badge Legend */}\n          <motion.div \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className="p-6 rounded-lg border border-border/50 bg-card/30"\n          >\n            <h3 className="font-display font-bold uppercase tracking-wider mb-4 flex items-center gap-2">\n              <Star className="h-4 w-4 text-primary" />\n              Achievement Badges\n            </h3>\n            <div className="grid md:grid-cols-4 gap-3 text-sm">\n              {Object.values(BADGE_DEFINITIONS).map((badge) => (\n                <div key={badge.id} className="flex items-center gap-2 p-2 rounded-lg bg-card/50 border border-border/30">\n                  <div className={`w-6 h-6 rounded-full bg-gradient-to-r ${badge.color} flex items-center justify-center text-white`}>\n                    <BadgeIcon badge={badge} />\n                  </div>\n                  <div className="flex-1 min-w-0">\n                    <p className="font-display text-xs font-medium truncate">{badge.name}</p>\n                    <p className="text-[10px] text-muted-foreground truncate">{badge.description}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </motion.div>\n\n          {/* Scoring Explanation */}\n          <motion.div \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className="p-6 rounded-lg border border-border/50 bg-card/30"\n          >\n            <h3 className="font-display font-bold uppercase tracking-wider mb-4 flex items-center gap-2">\n              <Target className="h-4 w-4 text-primary" />\n              How Scoring Works\n            </h3>\n            <div className="grid grid-cols-2 md:grid-cols-5 gap-4 text-sm">\n              <div className="flex items-center gap-3 p-3 rounded-lg bg-card/50 border border-border/30">\n                <Swords className="h-5 w-5 text-green-500" />\n                <div>\n                  <p className="font-display font-medium">Chess Wins</p>\n                  <p className="text-xs text-muted-foreground">5 points each</p>\n                </div>\n              </div>\n              <div className="flex items-center gap-3 p-3 rounded-lg bg-card/50 border border-border/30">\n                <Eye className="h-5 w-5 text-primary/70" />\n                <div>\n                  <p className="font-display font-medium">Visualizations</p>\n                  <p className="text-xs text-muted-foreground">3 points each</p>\n                </div>\n              </div>\n              <div className="flex items-center gap-3 p-3 rounded-lg bg-card/50 border border-border/30">\n                <Heart className="h-5 w-5 text-primary/70" />\n                <div>\n                  <p className="font-display font-medium">Game Favorites</p>\n                  <p className="text-xs text-muted-foreground">2 points each</p>\n                </div>\n              </div>\n              <div className="flex items-center gap-3 p-3 rounded-lg bg-card/50 border border-border/30">\n                <Palette className="h-5 w-5 text-primary/70" />\n                <div>\n                  <p className="font-display font-medium">Custom Palettes</p>\n                  <p className="text-xs text-muted-foreground">2 points each</p>\n                </div>\n              </div>\n              <div className="flex items-center gap-3 p-3 rounded-lg bg-card/50 border border-border/30">\n                <Shield className="h-5 w-5 text-muted-foreground" />\n                <div>\n                  <p className="font-display font-medium">Chess Draws</p>\n                  <p className="text-xs text-muted-foreground">1 point each</p>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n          </TabsContent>\n\n            {/* Vision Scores Tab */}\n            <TabsContent value="visions" className="mt-8 space-y-6">\n              {/* Vision Score Header */}\n              <motion.div \n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className="p-6 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent"\n              >\n                <div className="flex items-center gap-2 mb-2">\n                  <BarChart3 className="h-5 w-5 text-primary" />\n                  <h3 className="font-display font-bold uppercase tracking-wider">Vision Score Rankings</h3>\n                </div>\n                <p className="text-sm text-muted-foreground font-serif">\n                  Top visualizations ranked by community engagement. Scores are calculated from views, downloads, trades, and print orders.\n                </p>\n              </motion.div>\n\n              {/* Vision Scores List */}\n              {isLoadingVisions ? (\n                <div className="space-y-3">\n                  {[...Array(5)].map((_, i) => (\n                    <div key={i} className="p-4 rounded-lg border border-border/50 bg-card/50 animate-pulse">\n                      <div className="flex items-center gap-4">\n                        <div className="w-10 h-10 rounded-full bg-muted" />\n                        <div className="w-12 h-12 rounded-lg bg-muted" />\n                        <div className="flex-1 space-y-2">\n                          <div className="h-4 bg-muted rounded w-32" />\n                          <div className="h-3 bg-muted rounded w-20" />\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : visionScores.length === 0 ? (\n                <motion.div \n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  className="p-12 text-center rounded-lg border border-dashed border-border/50"\n                >\n                  <Image className="h-12 w-12 text-muted-foreground/50 mx-auto mb-4" />\n                  <h3 className="font-display font-bold uppercase tracking-wider mb-2">No Visions Yet</h3>\n                  <p className="text-sm text-muted-foreground font-serif max-w-md mx-auto">\n                    Vision Scores are calculated as visualizations gain views, downloads, and trades. \n                    Create and share your visualizations to see them ranked here!\n                  </p>\n                  <Link \n                    to="/"\n                    className="inline-flex items-center gap-2 mt-6 px-6 py-3 rounded-lg bg-primary text-primary-foreground font-display uppercase tracking-wide text-sm hover:opacity-90 transition-opacity"\n                  >\n                    Create Your First Vision\n                    <ChevronRight className="h-4 w-4" />\n                  </Link>\n                </motion.div>\n              ) : (\n                <div className="space-y-3">\n                  {visionScores.map((vision, index) => (\n                    <VisionScoreCard key={vision.id} vision={vision} index={index} />\n                  ))}\n                </div>\n              )}\n\n              {/* Vision Score Formula */}\n              <motion.div \n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className="p-6 rounded-lg border border-border/50 bg-card/30"\n              >\n                <h3 className="font-display font-bold uppercase tracking-wider mb-4 flex items-center gap-2">\n                  <Target className="h-4 w-4 text-primary" />\n                  Vision Score Formula\n                </h3>\n                <div className="bg-muted/50 rounded-lg p-4 mb-4">\n                  <code className="text-xs font-mono text-muted-foreground">\n                    Score = (views × 0.01) + (HD downloads × 0.10) + (GIF downloads × 0.25) + (trades × 1.00) + (prints × 2.00) + revenue\n                  </code>\n                </div>\n                <div className="grid grid-cols-2 md:grid-cols-5 gap-3 text-sm">\n                  <div className="flex items-center gap-2 p-2 rounded-lg bg-card/50 border border-border/30">\n                    <Eye className="h-4 w-4 text-primary/70" />\n                    <div>\n                      <p className="font-display text-xs font-medium">View</p>\n                      <p className="text-[10px] text-muted-foreground">+0.01 pts</p>\n                    </div>\n                  </div>\n                  <div className="flex items-center gap-2 p-2 rounded-lg bg-card/50 border border-border/30">\n                    <Sparkles className="h-4 w-4 text-primary/70" />\n                    <div>\n                      <p className="font-display text-xs font-medium">HD DL</p>\n                      <p className="text-[10px] text-muted-foreground">+0.10 pts</p>\n                    </div>\n                  </div>\n                  <div className="flex items-center gap-2 p-2 rounded-lg bg-card/50 border border-border/30">\n                    <Zap className="h-4 w-4 text-primary/70" />\n                    <div>\n                      <p className="font-display text-xs font-medium">GIF DL</p>\n                      <p className="text-[10px] text-muted-foreground">+0.25 pts</p>\n                    </div>\n                  </div>\n                  <div className="flex items-center gap-2 p-2 rounded-lg bg-card/50 border border-border/30">\n                    <TrendingUp className="h-4 w-4 text-green-500" />\n                    <div>\n                      <p className="font-display text-xs font-medium">Trade</p>\n                      <p className="text-[10px] text-muted-foreground">+1.00 pts</p>\n                    </div>\n                  </div>\n                  <div className="flex items-center gap-2 p-2 rounded-lg bg-card/50 border border-border/30">\n                    <Crown className="h-4 w-4 text-yellow-500" />\n                    <div>\n                      <p className="font-display text-xs font-medium">Print</p>\n                      <p className="text-[10px] text-muted-foreground">+2.00 + $</p>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            </TabsContent>\n          </Tabs>\n\n          {/* CTA */}\n          <div className="text-center">\n            <Link \n              to="/"\n              className="inline-flex items-center gap-2 px-6 py-3 rounded-lg bg-primary text-primary-foreground font-display uppercase tracking-wide text-sm hover:opacity-90 transition-opacity"\n            >\n              Create Your Visualization\n              <ChevronRight className="h-4 w-4" />\n            </Link>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default Leaderboard;\n';export{n as default};
