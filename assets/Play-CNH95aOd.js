import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as z,af as M,ag as D,ai as B,y as q,bF as L,bG as A,b6 as H,ae as S,bH as P,ah as G,bI as K,B as T,bJ as I,bK as _,bL as E,bM as U,bN as Y,bO as W,bP as O,bQ as X,bR as V,bS as F,bT as R,bU as Z,bV as J,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as ze,c7 as Me,an as De,av as Be,aw as qe,c8 as Le,aM as Ae,c9 as He,H as Se,P as Pe,ca as Ge,b3 as Ke,bs as Te,be as Ie,cb as _e,aP as Ee,cc as Ue,d as Ye,b2 as We,a9 as Oe,cd as Xe,ce as Ve,cf as Fe,al as Re,au as Ze}from"./index-DMpRWcyL.js";import{L as Je}from"./LiveColorLegend-B6YZvrpI.js";import{T as Qe}from"./trending-down-YIMBpdVg.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-y4in8Stx.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=mt,t=xt();for(;;)try{if(954292===parseInt(e(235))/1*(parseInt(e(241))/2)+-parseInt(e(239))/3+-parseInt(e(205))/4+parseInt(e(258))/5+parseInt(e(249))/6+parseInt(e(213))/7*(-parseInt(e(222))/8)+parseInt(e(195))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=mt;return dt[e(254)]().search(e(200)+"+$")[e(254)]()[e(253)+"r"](dt)[e(229)](e(200)+"+$")});dt();const ut=function(){const e={};e[mt(244)]="qXpjf";const t=e;let n=!0;return function(e,s){const r=n?function(){const n=mt,r={otiTM:function(e,t){return e(t)}};if(t[n(244)]!==n(256)){return r[n(257)](_0x379fbe,_0x50fe67)[n(246)]}if(s){const t=s[n(225)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}();function mt(e,t){e-=186;const n=xt();let s=n[e];if(void 0===mt.HQBHjI){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};mt.afXhhy=r,mt.fIvbYo={},mt.HQBHjI=!0}const a=e+n[0],i=mt.fIvbYo[a];if(i)s=i;else{const e=function(e){this.ZgXXXN=e,this.SKUMej=[1,0,0],this.FVLiSf=function(){return"newState"},this.HcazHX="\\w+ *\\(\\) *{\\w+ *",this.ZaoTgY="['|\"].+['|\"];? *}"};e.prototype.XbtrYZ=function(){const e=new RegExp(this.HcazHX+this.ZaoTgY).test(this.FVLiSf.toString())?--this.SKUMej[1]:--this.SKUMej[0];return this.BgHxnL(e)},e.prototype.BgHxnL=function(e){return Boolean(~e)?this.xFuQQu(this.ZgXXXN):e},e.prototype.xFuQQu=function(e){for(let t=0,n=this.SKUMej.length;t<n;t++)this.SKUMej.push(Math.round(Math.random())),n=this.SKUMej.length;return e(this.SKUMej[0])},new e(mt).XbtrYZ(),s=mt.afXhhy(s),mt.fIvbYo[a]=s}return s}function xt(){const e=["AxnjBNn1zMzPyW","s0fVAuu","Dw5RBM93BG","CvrYs2O","ndqWmZm2B1DUCvP6","x3j1Bgu","r2fTzsbKCMf3BG","yxbWBhK","u3rHBgvTyxrLiq","uuHfC2i","Aw5ZDwzMAwnPzq","C2vHCMnO","zsbMAwz0Es1TBW","CMvHC29U","ENnUyMC","zxjYB3i","AwvUDe1HDgvYAq","ogjmuuzrAa","rhjHDYbIEsb0Aa","ntaTtw92zsbsDq","AxntDgfSzw1HDa","ntq0nty0mNP1CuPiAa","E30Uy29UC3rYDq","mZm2mdu4y0LiEgrq","vhfYCw8","BKDfzLu","BKDgz3K","wgTNqxi","BwvZC2fNzq","rhjHDW","sw5ZDwzMAwnPzq","ndK5odu1oe5ku2HHva","yMLUza","BNqGtwf0zxjPyq","uMvWzxrPDgLVBG","y29UC3rYDwn0BW","Dg9tDhjPBMC","wffKBM0","CvHWAMy","B3rPve0","mtm5ndy1nuXMBxvOzq","C3vMzMLJAwvUDa","Be9Su3u","zxHJzxb0Aw9U","DMuGCNvSzs4","AxnuAhjLzwzVBa","DgfIBgu","CM4GDgHPCYiPka","C2HVCNrnzxnZyq","ig1HDgvYAwfSlG","uezkC2W","Bg9N","Cgv0AxrPB24U","ChjVDg90ExbL","tenbseS","DgjMAhy","mJmZmJK3otfUBurSt0u","AgXPzhi","Aw5MBW","C3rHBgvTyxrL","ChrYwuK","kcGOlISPkYKRkq","CMv0DxjUicHMDq","C3bSAxq","D2fYBG","zfjLCgv0AxrPBW","mtG1mdi1mLHsvxLAzW","zMvU","CMvLzM9SzcbYzq","DhjHy2u","rhjHDYbIEsbPBG","BgvUz3rO","CMvWzxrPDgLVBG","zhz2reG","mJmXrxbQA211","BNrFBwf0zxjPyq","y3rVCIGICMv0Dq","BMn0Aw9UkcKG","AxneCMf3"];return(xt=function(){return e})()}function ht(e){const t=mt;return function(e){const t=mt,n={};n[t(193)]=t(198),n[t(219)]=t(226)+" No legal moves available.",n[t(227)]="threefold_"+t(211),n[t(232)]=t(260),n.oHtes="jLMID",n.PFJsl=t(209)+t(259)+t(188),n[t(212)]=t(237)+"le",n[t(255)]=t(220);const s=n;if(e[t(238)+"e"]()){const e={};return e[t(231)]=s.LCAHK,e[t(246)]=s[t(219)],e[t(187)+"ge"]="Stalemate!",e}if(e[t(263)+t(204)+"n"]()){const e={};return e.reason=s[t(227)],e[t(246)]=t(236)+t(207)+t(191),e[t(187)+"ge"]="Threefold "+t(252),e}if(e[t(218)+t(234)+"al"]()){if(s.zsnbg===s.oHtes)return _0x36184d[t(217)]()||_0x1db084[t(238)+"e"]();{const e={};return e[t(231)]=t(228)+t(214)+"l",e[t(246)]=s[t(189)],e[t(187)+"ge"]=t(248)+t(251)+"l",e}}const r=e[t(206)]();if(parseInt(r[t(202)](" ")[4],10)>=100){const e={};return e[t(231)]="fifty_move"+t(223),e[t(246)]=t(236)+t(230)+t(262),e[t(187)+"ge"]=s[t(212)],e}const a={};return a.reason=s[t(255)],a[t(246)]=t(224)+"!",a[t(187)+"ge"]=t(247),a}(e)[t(246)]}ut(void 0,function(){const e=mt,t={kCyBl:"insufficient_material",qTrKj:function(e,t){return e(t)},hlidr:"tbfhv",Tqrqo:e(203),GZgPW:e(197),XkgAr:e(261),jmKqX:e(264),ptrYI:e(243)};let n;try{n=t[e(221)](Function,e(201)+e(216)+(e(240)+e(215)+e(186)+" ));"))()}catch(a){if(e(194)!==t[e(196)]){const e=_0x1a68c1.apply(_0xe262d8,arguments);return _0x11c023=null,e}n=window}const s=n.console=n.console||{},r=[e(190),t[e(242)],t.GZgPW,e(233),t[e(245)],t.jmKqX,e(208)];for(let i=0;i<r[e(210)];i++){if(t[e(199)]!==e(243)){const n={};return n[e(231)]=t.kCyBl,n[e(246)]=e(209)+"sufficient material.",n[e(187)+"ge"]=e(248)+e(251)+"l",n}{const t=ut[e(253)+"r"][e(192)][e(250)](ut),n=r[i],a=s[n]||t;t.__proto__=ut[e(250)](ut),t[e(254)]=a[e(254)][e(250)](a),s[n]=t}}})(),function(){const e=ft,t=bt();for(;;)try{if(549325===-parseInt(e(263))/1*(-parseInt(e(208))/2)+-parseInt(e(275))/3*(parseInt(e(247))/4)+parseInt(e(220))/5+-parseInt(e(190))/6+parseInt(e(204))/7+parseInt(e(231))/8+parseInt(e(174))/9*(-parseInt(e(175))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ft(248)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ft,t={};t[e(239)]=e(185)+"+$";const n=t;return pt.toString()[e(244)](n[e(239)]).toString()[e(272)+"r"](pt)[e(244)](e(185)+"+$")});function ft(e,t){e-=169;const n=bt();let s=n[e];if(void 0===ft.ZZxqgm){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ft.alRLJX=r,ft.efkSzd={},ft.ZZxqgm=!0}const a=e+n[0],i=ft.efkSzd[a];if(i)s=i;else{const e=function(e){this.BYutfp=e,this.KsYQTD=[1,0,0],this.qJtRXI=function(){return"newState"},this.KdTAsl="\\w+ *\\(\\) *{\\w+ *",this.ekdWOp="['|\"].+['|\"];? *}"};e.prototype.Gpknvz=function(){const e=new RegExp(this.KdTAsl+this.ekdWOp).test(this.qJtRXI.toString())?--this.KsYQTD[1]:--this.KsYQTD[0];return this.WCwuMD(e)},e.prototype.WCwuMD=function(e){return Boolean(~e)?this.eSWkHd(this.BYutfp):e},e.prototype.eSWkHd=function(e){for(let t=0,n=this.KsYQTD.length;t<n;t++)this.KsYQTD.push(Math.round(Math.random())),n=this.KsYQTD.length;return e(this.KsYQTD[0])},new e(ft).Gpknvz(),s=ft.alRLJX(s),ft.efkSzd[a]=s}return s}pt();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ft(248)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();gt(void 0,function(){const e=ft,t={nkiSf:function(e,t){return e(t)},UDBvG:function(e,t){return e+t},OxzHP:e(270)+e(265)+e(180)+" )",HAtbe:function(e,t){return e===t},jUKpt:e(259),UFgWH:e(245),ZZYkG:e(262),XjLuq:e(266),vTpwc:e(198),zFHAo:e(171),ylXHR:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t[n(202)](Function,t[n(188)](n(271)+n(264),t[n(205)])+");")()}catch(r){t[n(227)](n(259),t.jUKpt)?s=window:_0x1400f9.current[n(279)][n(251)].value=_0x30b903}return s}(),s=n[e(241)]=n[e(241)]||{},r=[t[e(215)],t[e(195)],t[e(246)],e(211),"exception",t[e(243)],t.zFHAo];for(let a=0;t[e(199)](a,r[e(235)]);a++){const t=gt[e(272)+"r"][e(257)][e(225)](gt),n=r[a],i=s[n]||t;t[e(183)]=gt[e(225)](gt),t.toString=i[e(178)][e(225)](i),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=ft,r={hXFuf:function(e,t){return e+t},PWopN:function(e,t){return e-t},SVJLg:function(e){return e()},zNwOW:function(e,t){return e||t},kLtNh:function(e,t){return e*t},hijMi:"lowpass",zAOlf:s(219),dInVR:s(234),uukzf:function(e,t,n,s,r,a){return e(t,n,s,r,a)},WycAv:function(e,t,n){return e(t,n)},SWBOI:s(169),ukOTk:function(e,t,n){return e(t,n)},gqzOD:function(e,t,n,s,r,a){return e(t,n,s,r,a)},zxnmX:function(e,t,n){return e(t,n)},oYXxN:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ECTMv:function(e,t,n){return e(t,n)},VjfhI:s(218),RNSMV:"draw",uNukO:"illegal",acROi:function(e,t,n,s,r,a){return e(t,n,s,r,a)},yNjxe:s(182),tcuUh:function(e,t,n){return e(t,n)},nMuOv:function(e,t,n){return e(t,n)},HpNhr:function(e,t,n){return e(t,n)}},a={};a[s(273)]=null,a[s(279)]=null;const i=t.useRef(a),o=t.useCallback(()=>{const e=s;if(!i[e(200)][e(273)])try{const t=new(window.AudioContext||window[e(206)+e(210)]),s=t[e(260)]();s.connect(t[e(193)+"n"]),s[e(251)][e(261)]=n;const r={};r[e(273)]=t,r[e(279)]=s,i[e(200)]=r}catch(t){}},[n]);r[s(217)](t.useEffect,()=>{const e=s;i.current[e(279)]&&(i[e(200)][e(279)][e(251)][e(261)]=n)},[n]);const c=r[s(232)](t.useCallback,(t,n,a="sine",c=.01,l=.1,d)=>{const u=s;if(!e)return;o();const{context:m,gainNode:x}=i.current;if(!m||!x)return;const h=m[u(187)+u(274)](),p=m[u(260)]();h[u(191)]=a,h[u(221)][u(194)+"Time"](t,m.currentTime),d&&h[u(221)][u(173)+u(214)+u(177)](d,r[u(203)](m[u(209)+"e"],n)),p[u(251)][u(194)+u(207)](0,m[u(209)+"e"]),p[u(251)]["linearRamp"+u(223)+u(213)](1,r[u(203)](m.currentTime,c)),p.gain["exponentia"+u(214)+u(177)](.01,r[u(252)](m.currentTime+n,l)),p[u(251)][u(256)+"ToValueAtT"+u(213)](0,m[u(209)+"e"]+n),h[u(238)](p),p[u(238)](x),h[u(196)](m[u(209)+"e"]),h[u(253)](m[u(209)+"e"]+n)},[e,o]),l=r[s(276)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r.SVJLg(o);const{context:c,gainNode:l}=i[a(200)];if(r[a(242)](!c,!l))return;const d=c[a(179)]*t,u=c.createBuffer(1,d,c[a(179)]),m=u[a(222)+a(212)](0);for(let e=0;e<d;e++)m[e]=r.kLtNh(Math[a(184)](),2)-1;const x=c["createBuff"+a(277)]();x[a(250)]=u;const h=c[a(176)+a(236)]();h[a(191)]=r[a(186)],h[a(221)][a(261)]=n;const p=c[a(260)]();p[a(251)]["setValueAt"+a(207)](.3,c.currentTime),p.gain[a(173)+a(214)+a(177)](.01,c[a(209)+"e"]+t),x[a(238)](h),h[a(238)](p),p[a(238)](l),x[a(196)](c.currentTime),x.stop(r.hXFuf(c[a(209)+"e"],t))},[e,o]),d=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(233)]:c(800,.08,r.dInVR,.005,.05),r[n(224)](c,400,.06,n(218),.005,.04);break;case"capture":r[n(232)](l,.12,2e3),c(300,.1,n(182),.005,.08),c(150,.15,n(234),.01,.1);break;case r[n(189)]:r[n(224)](c,600,.06,n(234),.005,.04),setTimeout(()=>c(700,.06,n(234),.005,.04),80);break;case"check":c(880,.15,n(218),.01,.1),r[n(254)](setTimeout,()=>c(1100,.12,"triangle",.01,.08),120);break;case n(226):r[n(181)](c,880,.2,n(234),.01,.15),setTimeout(()=>c(660,.2,n(234),.01,.15),150),r.zxnmX(setTimeout,()=>c(440,.3,"sine",.01,.2),300),r[n(232)](setTimeout,()=>c(330,.4,n(234),.01,.3),500);break;case"gameStart":r[n(267)](c,523,.12,n(234),.01,.08),r.ECTMv(setTimeout,()=>c(659,.12,n(234),.01,.08),100),setTimeout(()=>c(784,.2,n(234),.01,.15),200);break;case n(249):c(440,.15,r[n(216)],.01,.1),setTimeout(()=>c(349,.25,n(218),.01,.2),150);break;case"victory":c(523,.1,"sine",.01,.08),setTimeout(()=>c(659,.1,n(234),.01,.08),100),r[n(254)](setTimeout,()=>c(784,.1,n(234),.01,.08),200),r[n(254)](setTimeout,()=>c(1047,.3,n(234),.01,.25),300);break;case n(192):c(392,.2,n(234),.02,.15),setTimeout(()=>c(349,.2,n(234),.02,.15),200),r.ECTMv(setTimeout,()=>c(330,.3,"sine",.02,.25),400),setTimeout(()=>c(262,.4,"sine",.02,.35),650);break;case r[n(201)]:c(440,.15,n(234),.01,.1),r[n(230)](setTimeout,()=>c(440,.15,n(234),.01,.1),180),r[n(229)](setTimeout,()=>c(523,.2,n(234),.01,.15),360);break;case r[n(228)]:r[n(170)](c,200,.1,r[n(197)],.005,.08),c(150,.08,n(255),.005,.06)}},[e,c,l]);r[s(268)](t.useEffect,()=>()=>{const e=ft;if(i[e(200)][e(273)]){if(e(258)===e(240)){const e=_0xc12b4f(_0xfc4d68,_0xff85c4);return _0x3e01a=e,_0x4c66c8}i[e(200)][e(273)][e(278)]()}},[]);const u={};return u.playSound=d,u[s(172)]=o,u};function bt(){const e=["nJi4mJCXn1rjwfDcuW","t3H6sfa","D2vIA2L0qxvKAq","vgLTzq","mJq1mZrOsfHgELm","y3vYCMvUDfrPBq","B0nVBNrLEhq","zxjYB3i","rgf0yq","Aw1L","BfjHBxbuB1zHBa","vuzNv0G","vMPMAeK","Dgn1vwG","DhjPyw5NBgu","Bw92zq","mJeXmZCWnwXVthztza","zNjLCxvLBMn5","z2v0q2HHBM5LBa","vg9wywX1zuf0va","DxvREMy","yMLUza","y2HLy2TTyxrL","sef0yMu","Du51A08","runutxy","ENHUBvG","ntaXnZmXmMPmv2Pwsq","v3LJqxy","EKfpBgy","C2LUzq","BgvUz3rO","ywrgAwX0zxi","DffpDgS","y29UBMvJDa","ExbVC1K","wMDsAfK","y29UC29Szq","EK53t1C","DLrWD2m","C2vHCMnO","Bg9N","wgPmDxe","mtG4q1nfA3nO","yxbWBhK","z2fTzuvUza","yNvMzMvY","z2fPBG","ufDVCe4","C3rVCa","DwTpvgS","C2f3Dg9VDgG","BgLUzwfYuMfTCa","ChjVDg90ExbL","yuX0quG","rNf1zem","y3jLyxrLr2fPBG","DMfSDwu","D2fYBG","m3HAqwzZyG","BMn0Aw9UkcKG","y3rVCIGICMv0Dq","Aw5MBW","B1LyEe4","shboAhi","ChbVCNrLza","E30Uy29UC3rYDq","CMv0DxjUicHMDq","y29UC3rYDwn0BW","y29UDgv4Da","BgXHDg9Y","mJi1odDJAur2wvC","BK11t3y","zxjtB3vYy2u","y2XVC2u","z2fPBK5Vzgu","y2fZDgXL","ywnst2K","DhjHy2u","Aw5PDef1zgLV","zxHWB25LBNrPyq","mtHTr2Lhv1y","ndKZnZC3mgrAzgfVqG","y3jLyxrLqMLXDq","DwvbDfrPBwu","Dg9tDhjPBMC","C2fTCgXLuMf0zq","CM4GDgHPCYiPka","z3f6t0q","C3f1yxjL","x19WCM90B19F","CMfUzg9T","kcGOlISPkYKRkq","AgLQtwK","y3jLyxrLt3nJAq","vurcDKC","u1Dct0K","ntyWotCWuxDNwfj4","DhLWzq","zgvMzwf0","zgvZDgLUyxrPBW","C2v0vMfSDwvbDa","wLPzA0C","C3rHCNq","Eu5QEgu","DgfIBgu","EwXysfi","y3vYCMvUDa","uK5ttvy","BMTPu2y","AfHgDwy"];return(bt=function(){return e})()}const yt=Nt;!function(){const e=Nt,t=jt();for(;;)try{if(430187===parseInt(e(243))/1*(parseInt(e(199))/2)+-parseInt(e(211))/3*(parseInt(e(203))/4)+parseInt(e(209))/5+parseInt(e(207))/6*(-parseInt(e(191))/7)+-parseInt(e(220))/8*(-parseInt(e(217))/9)+-parseInt(e(197))/10+parseInt(e(215))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wt=function(){let e=!0;return function(t,n){const s=Nt,r={};r[s(242)]=s(192),r[s(206)]=s(200);const a=r,i=e?function(){const e=s;if(a[e(242)]!==a.rRhEz){if(n){const e=n.apply(t,arguments);return n=null,e}}else{const t=_0x5a48a6[e(213)+"r"].prototype[e(202)](_0x566bf3),n=_0x2766fd[_0x56e0d9],s=_0x16f7f1[n]||t;t[e(216)]=_0x40c2a9[e(202)](_0x38b50f),t[e(238)]=s[e(238)][e(202)](s),_0x23b3e0[n]=t}}:function(){};return e=!1,i}}()(void 0,function(){const e=Nt;return wt[e(238)]()[e(240)](e(230)+"+$")[e(238)]()[e(213)+"r"](wt).search(e(230)+"+$")});function jt(){const e=["zxjYB3i","mJG3mdq5veHktxnH","Bg9N","y29UC3rYDwn0BW","zw5HyMXLza","mZy3nJi0nenZvgPABW","x19WCM90B19F","owzKD2LHzG","yw5tDK4","CMv0DxjUicHMDq","mJq1nJu4nerVAeHIyG","tKrvwNO","ChjVDg90ExbL","C1nsDeq","uwPqCfi","DgfIBgu","r2P0tM4","t3vNBvG","D2fYBG","AwDis1y","kcGOlISPkYKRkq","BgXAzfa","zxHJzxb0Aw9U","BgvUz3rO","tLHHruO","rujLzwS","Aw5MBW","y29UC29Szq","Dg9tDhjPBMC","DhjqBwq","C2vHCMnO","yxbWBhK","yLPvDhi","nZuYotHTvgjsug8","n0D3u3rltq","t1fSqNe","DhjHy2u","wgDsCfK","uujsthK","y3rVCIGICMv0Dq","ndmZnty4merKvfzlra","BMfTzq","mtboCfH6rfq","vhjty2C","teXWu3e","yMLUza","ngDeC2jtAa","zc1Zzxr0Aw5NCW","y2HLC3mTC291BG","CLjOrxO","mtaWnJm5mMjcue1KCa","BMn0Aw9UkcKG","ntq3mde1wwDXt1Lz"];return(jt=function(){return e})()}wt();const Ct=function(){const e=Nt,t={XgRpY:function(e,t){return e!==t}};t[e(221)]=e(239),t[e(231)]="glOcn";const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Nt;if(t){if(n[s(194)](n.NDUZz,n.llZdP)){const n=t.apply(e,arguments);return t=null,n}{const e=_0x265e03[s(241)](_0x11ed94,arguments);return _0x58215c=null,e}}}:function(){};return s=!1,r}}();function Nt(e,t){e-=191;const n=jt();let s=n[e];if(void 0===Nt.ilypzy){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.KwlByz=r,Nt.bTfraj={},Nt.ilypzy=!0}const a=e+n[0],i=Nt.bTfraj[a];if(i)s=i;else{const e=function(e){this.fZGnmO=e,this.KkGpjH=[1,0,0],this.yzMUCJ=function(){return"newState"},this.PdgCiA="\\w+ *\\(\\) *{\\w+ *",this.nIliRz="['|\"].+['|\"];? *}"};e.prototype.mvFgeO=function(){const e=new RegExp(this.PdgCiA+this.nIliRz).test(this.yzMUCJ.toString())?--this.KkGpjH[1]:--this.KkGpjH[0];return this.syNsEZ(e)},e.prototype.syNsEZ=function(e){return Boolean(~e)?this.RcGVNO(this.fZGnmO):e},e.prototype.RcGVNO=function(e){for(let t=0,n=this.KkGpjH.length;t<n;t++)this.KkGpjH.push(Math.round(Math.random())),n=this.KkGpjH.length;return e(this.KkGpjH[0])},new e(Nt).mvFgeO(),s=Nt.KwlByz(s),Nt.bTfraj[a]=s}return s}Ct(void 0,function(){const e=Nt,t={GjtNn:e(201),sSRtD:function(e,t){return e(t)},QjPpR:function(e,t){return e+t},QBRLy:e(219)+e(208),NXaEJ:"{}.constru"+e(196)+'rn this")( )',igHKV:e(228),BKuCQ:function(e,t){return e<t},anSvN:function(e,t){return e!==t},EBeek:e(227)};let n;try{if(t.GjtNn!==t[e(226)]){const e=_0x2a900e?function(){if(_0x37fd5d){const e=_0x100e28.apply(_0x214c82,arguments);return _0x1ea12b=null,e}}:function(){};return _0x49e27a=!1,e}n=t[e(223)](Function,t[e(224)](t[e(195)]+t[e(234)],");"))()}catch(a){n=window}const s=n[e(237)]=n[e(237)]||{},r=[e(212),t[e(229)],e(236),e(210),e(232),e(225),e(193)];for(let i=0;t.BKuCQ(i,r[e(233)]);i++)if(t[e(218)]("yaYvQ",t[e(235)])){const t=Ct[e(213)+"r"][e(222)][e(202)](Ct),n=r[i],a=s[n]||t;t.__proto__=Ct.bind(Ct),t[e(238)]=a[e(238)][e(202)](a),s[n]=t}else if(_0x513b68){const e=_0xf9b3cf.apply(_0x1914b9,arguments);return _0x483ffb=null,e}})();const kt={};kt[yt(198)]=yt(205)+yt(204);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[yt(214)]}))}),kt)),Mt=Lt;!function(){const e=Lt,t=qt();for(;;)try{if(800549===-parseInt(e(449))/1*(parseInt(e(502))/2)+parseInt(e(300))/3*(parseInt(e(378))/4)+parseInt(e(298))/5*(parseInt(e(527))/6)+-parseInt(e(276))/7+parseInt(e(353))/8+parseInt(e(316))/9*(-parseInt(e(501))/10)+parseInt(e(543))/11*(parseInt(e(542))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Lt,t={};t[e(363)]="(((.+)+)+)+$";const n=t;return Dt[e(259)]().search(e(529)+"+$").toString().constructor(Dt).search(n[e(363)])});Dt();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function qt(){const e=["AwXSzwDHBa","rwjeCgW","zMLUza","rgv2rLu","AxndAgvJA21HDa","rujyvNm","Dg9vChbLCKnHCW","s2nTsha","zhjHDW","CMv0DxjUicHMDq","BNPuEue","CMvZAwDUr2fTzq","Bw92zwrtCxvHCG","mty1mZa1mefLyKzcwa","zuPwvfy","DhvYBG","sw5WtLG","D2HPDgvFD2LUCW","B2nRqM8","EgPPCue","q2fUBM90igPVAq","r2fTzsbUB3qGzG","D2HPDgvqBgf5zq","rxDPrw4","zYbMB3iGB3bWBW","y2fWDhvYzq","B3jKzxi","CgDU","uuPPDLi","q1npDhm","AgfUz2vZ","BMvS","D2HPDgvFCgfSzq","yxnJzw5KAw5N","BIb0AgLZihzLCG","mta1BwrNsw1S","whrSCfu","nMX0Dg9czq","y2HLC3nFBw92zq","ihnLBNqGkg9WCa","BwfRzu1VDMu","x3jLBwfPBMLUzW","B0P5wuq","Bw92zunVDw50","BgvUz3rO","tvbNrLK","Cu9AyMu","rvb0t08","Bw92zxmT","rNHOzfu","A05dB0y","Dw50Aw1Lza","qLHxveu","mJDvCgDADhe","EMPwA04","qw10ENK","yMLUza","tMHMywe","C3vIC2nYAwjL","ywXS","CerqCei","r1fIufe","D2HPDgu","Aw4GysbNyw1L","rNbUvhe","D2HIsfC","rNfmB2S","EenpBMi","Bw92zq","DgLTzunVBNrYBW","AxnmB2fKAw5N","y29UC29Szq","C3rHCNrLzef0","CgXHEwvYx2LK","y1DAEKG","BLHiy2K","BwvZC2fNzq","C2LUz2XL","Bw92zv91y2K","y3jLyxrLr2fTzq","zwf0zsbHigDHBq","uhPoA24","y29KztOG","BNjTAu0","zwXVx3jHDgLUzW","vvfYzeW","y3jLyxrLzf9HDa","uwrmuKS","DMLJDg9YEq","Bg9N","mte5nZi1mJbuzefrrMm","tMPAEfy","yu1sCwG","ww91ihDVBIe","y2HLC3nFz2fTzq","zNLmzem","C2fU","Bg9HzeDHBwu","zw1rC0m","B0vgAha","DvnTrNi","y29UC3rYDwn0BW","zw1HAw5PBMC","ChjVzMLSzxm","ELzJBMu","r09jBwu","qwDwC2O","r09qz2G","Aw5JBhvKzxm","vfDwrve","Axnhyw1Lt3zLCG","vgnzBhq","rgnvqLe","EgvgA2u","z2fTzvn0yxrL","mtiZmti2ohPOzKHcDG","EMzrreO","Aw5MBW","qLPbCMW","yMXHy2TFCgfSzq","z2fTzs0","rMfPBgvKihrVia","AgfSBgvUz2uGyW","DxbKyxrL","ywzuC0e","tMvOC2m","tY1p","z2v0qxzHAwXHyG","rhvNv00","ihbSyxLPBMCGyq","s1bYBxa","BKnouxC","igDHBwu","wNzNvw4","t2zAAwS","DxbKyxrLievmtW","qKDtruW","DMvYyM9Zzq","BMvUDc4UlG","D2HPDgvuAw1LuG","D2LUBMvYswq","twDHq3G","Bw92zv9JB3vUDa","tw92zsbLCNjVCG","BIbPBIb0BYbJCG","tLbfvNK","ywn0AxzL","BMv3uMf0Aw5N","v2HPDguGD2LUCW","DuTVt3q","yMXHy2TFD2LUCW","ihjHDgLUz3m6","ALbrwuy","tY1plu8","D2fPDgLUzW","D2TQCwO","qLLPq2i","AxndAgvJAW","z3fqCKW","z051yLa","C3rHDhvZ","uej2rxy","wgHnsKS","CMvTB3zLq2HHBG","uMf0Aw5NoIa","BMv3","y2HHBgXLBMDLqW","Du5Xq0C","AxnFChvIBgLJ","Bw92zxm","sLLjufu","wez0v0m","ChvIBgLJ","D2HPDgvFCgXHEq","BwfW","rhjHDYbVzMzLCG","zefuyum","tgXLCLe","q3Hsy0y","y2fZDgXL","x19WCM90B19F","zeLfzu0","wuzYuuu","Eev3tu4","Dg9ju09tDhjPBG","y2HHBgXLBMDLxW","mtC3mdDYCxPzDuS","DhjHy2u","su5trvju","y29TCgXLDgvK","sw52ywXPzcbVCG","z2fTzq","y3vYCMvUDezLBG","CKLK","BIbPBIb0BYbQBW","zMvU","DK9Lywm","y2HLy2TTyxrL","u2TovK4","yMXHy2TqBgf5zq","z3LSCvO","ugXLyxnLihnPzW","r2fTzsbJCMvHDa","zeHIswy","DxnLCL9Pza","Bwf5yMvtAw5NBa","y29Kzq","ChjVBw90Aw9U","DxvRswG","v3vWq2K","y2HHBM5LBa","DhrL","BNbPqMi","BIb5B3vYig93BG","EMDTwKu","C2LVBIK","AgPoyvi","y2fWDhvYzwq","C2vSzwn0","B3vUza","AePgEg4","C3rHCNrLzf9HDa","vgXJC1K","E30Uy29UC3rYDq","AM9PBIbIEsbJBW","ywvht0q","zNjVBq","D2fYBG","CYbcBgfJAY4","zeDTrLC","BNbNDKO","v0zxCMK","y3vYCMvUDf9Mzq","C3Hxu0O","rufAv3C","yMXHy2TuAw1LuG","zM9YrwfJAa","zxHJzxb0Aw9U","ndyYmJK5mfv6u3jhzq","mty2EfP2yLDJ","Bw92zv9Zyw4","zxjYB3i","yMXHy2TFDgLTzq","AgfSBgvUz2vFyW","y3rVCIGICMv0Dq","yMXHy2S","vg5cA2O","vhHyC20","zseGww91igfYzq","DgfIBgu","CMvZDwX0","EKDXEha","B2rL","z2fTzv9Pza","twXQwui","CeLzqLq","Awq9zxeU","ywrK","sg91BNi","ALPvBxy","yMXHy2TqywXLDa","AxfYwK4","D2HPDgvFDgLTzq","qMXHy2SGD2LUCW","mte1mdC0wfzyu1PM","AM9PBKDHBwu","kcGOlISPkYKRkq","vvbeqvrf","zxjFAwq","D2HPDgvqywXLDa","y2HLy2S","ChjVDg90ExbL","vffuv1G","rvfQBfq","wg9pAw8","ANPtCLG","rfjuAxO","sLfbr0e","vNneEuG","mtjtDKz4AvC","mtuXnJe1mdLNCw5hr0q","C3vJy2vZCW","B2zMzxjeCMf3","yuPwEK0","zgLQEgS","igv4CgLYzwqGyW","z2Luzuy","D2LUBMvYx2LK","qMz0q3m","yMXHy2TFCgXHEq","C3vIC3rYAw5N","AM9PBKj5q29Kzq","y3jLyxrLzef0","yNvSBgv0xZe","Dg9tDhjPBMC","ww91ihjLC2LNBG","uKHpzwK","DxnLCL9PzcWGzq"];return(qt=function(){return e})()}function Lt(e,t){e-=252;const n=qt();let s=n[e];if(void 0===Lt.IFSoMi){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Lt.ZxDDiX=r,Lt.kuOPAp={},Lt.IFSoMi=!0}const a=e+n[0],i=Lt.kuOPAp[a];if(i)s=i;else{const e=function(e){this.zgGajg=e,this.cqKsDK=[1,0,0],this.wEyZXI=function(){return"newState"},this.RJtQsA="\\w+ *\\(\\) *{\\w+ *",this.twEIgw="['|\"].+['|\"];? *}"};e.prototype.iTMjMo=function(){const e=new RegExp(this.RJtQsA+this.twEIgw).test(this.wEyZXI.toString())?--this.cqKsDK[1]:--this.cqKsDK[0];return this.EQptIt(e)},e.prototype.EQptIt=function(e){return Boolean(~e)?this.VgCCyQ(this.zgGajg):e},e.prototype.VgCCyQ=function(e){for(let t=0,n=this.cqKsDK.length;t<n;t++)this.cqKsDK.push(Math.round(Math.random())),n=this.cqKsDK.length;return e(this.cqKsDK[0])},new e(Lt).iTMjMo(),s=Lt.ZxDDiX(s),Lt.kuOPAp[a]=s}return s}Bt(void 0,function(){const e=Lt,t={YFrQE:function(e,t){return e(t)},Nhfaa:e(486)+e(507)+'rn this")( )',uKoOt:e(490),VsDyH:e(380),TxXsm:"error",dGmFW:e(450),WupCi:function(e,t){return e<t},nrmiM:e(375),EwiEn:e(424)};let n;try{n=Function(e(272)+"nction() "+t[e(320)]+");")()}catch(a){n=window}const s=n[e(334)]=n[e(334)]||{},r=[e(352),t[e(412)],t[e(541)],t[e(510)],e(500),e(512),t[e(492)]];for(let i=0;t[e(472)](i,r.length);i++)if(t[e(346)]!==t[e(286)]){const t=Bt[e(364)+"r"][e(534)][e(319)](Bt),n=r[i],a=s[n]||t;t[e(443)]=Bt.bind(Bt),t[e(259)]=a[e(259)][e(319)](a),s[n]=t}else{const n=_0x4d438f[e(255)](2,4);t[e(445)](_0x1c156f,e=>new _0x4eabbd([...e,n]))}})();const At={};At[Mt(258)]=60,At.blitz_5=300,At.rapid_15=900,At[Mt(314)]=0;const Ht=At,St=Tt;!function(){const e=Tt,t=Kt();for(;;)try{if(771705===-parseInt(e(357))/1+parseInt(e(392))/2*(parseInt(e(397))/3)+-parseInt(e(389))/4+parseInt(e(399))/5+-parseInt(e(355))/6*(parseInt(e(370))/7)+-parseInt(e(377))/8+parseInt(e(408))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Tt(393)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Tt,t={};t[e(379)]=e(402)+"+$";const n=t;return Pt[e(360)]()[e(385)](n.cDnEl)[e(360)]()[e(381)+"r"](Pt).search(e(402)+"+$")});Pt();const Gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Tt(393)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Kt(){const e=["BgLNAhq","yMLUza","odK2ody3mMXNtvfWCq","y29UC29Szq","y0rUrwW","q0jQsu8","y29UC3rYDwn0BW","AgvHDNK","Bg9N","u0fyuM0","C2vHCMnO","tKTkBLi","DMLICMf0zq","tNDIzxq","nta0ntiWmerUAwz1Dq","CNn0vfy","C3vJy2vZCW","nejozeHerW","yxbWBhK","zwq6","BgvUz3rO","sgfWDgLJigzLzq","mti4oteWnNPHEgvzqG","CgfSr3u","ndG0ntiZnxfeqvnnsG","E30Uy29UC3rYDq","BMn0Aw9UkcKG","kcGOlISPkYKRkq","C2vSzwn0Aw9U","rfDHvfO","A0XRBfm","x19WCM90B19F","tKTnq0K","mJq4mJaYmtHqzKvAs0u","r21UBvq","A3fSCem","nKn4DNbVDa","CM4GDgHPCYiPka","mte1otiYmNLirwjSBq","DgfIBgu","CMv0DxjUicHMDq","Dg9tDhjPBMC","BwvKAxvT","D2fYBG","CwXvAMq","t0nZz3K","ChjVDg90ExbL","AgfWDgLJCW","zxjYB3i","zxHJzxb0Aw9U","zgjHy2SGzMfPBa","mtKXmdu5ngL2uw9pCa","DhjHy2u","AxntDxbWB3j0zq","CNbdvu8","thzIsvi"];return(Kt=function(){return e})()}function Tt(e,t){e-=353;const n=Kt();let s=n[e];if(void 0===Tt.PiFmLh){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tt.kXaErw=r,Tt.xsNllq={},Tt.PiFmLh=!0}const a=e+n[0],i=Tt.xsNllq[a];if(i)s=i;else{const e=function(e){this.eYSuLv=e,this.UNyaib=[1,0,0],this.KTZaSv=function(){return"newState"},this.VrbHYz="\\w+ *\\(\\) *{\\w+ *",this.sgtstK="['|\"].+['|\"];? *}"};e.prototype.uYEuyn=function(){const e=new RegExp(this.VrbHYz+this.sgtstK).test(this.KTZaSv.toString())?--this.UNyaib[1]:--this.UNyaib[0];return this.ZQgAsm(e)},e.prototype.ZQgAsm=function(e){return Boolean(~e)?this.gaAuAR(this.eYSuLv):e},e.prototype.gaAuAR=function(e){for(let t=0,n=this.UNyaib.length;t<n;t++)this.UNyaib.push(Math.round(Math.random())),n=this.UNyaib.length;return e(this.UNyaib[0])},new e(Tt).uYEuyn(),s=Tt.kXaErw(s),Tt.xsNllq[a]=s}return s}Gt(void 0,function(){const e=Tt,t={palGu:function(e,t){return e+t},NKJnR:function(e,t){return e+t},SAXRm:e(359)+e(401),DWaTZ:e(400)+'ctor("retu'+e(356)+" )",LvbIR:function(e){return e()},rpCUO:e(383),rstTV:"info",kLklS:"error",QnWkc:e(368),GmnmT:e(358)};let n;try{if("DAGBx"===e(354))return _0x44a02b[e(362)]("Haptic fee"+e(369)+"ed:",_0x1bf9da),!1;{const s=Function(t[e(398)](t[e(386)](t[e(384)],t[e(404)]),");"));n=t[e(374)](s)}}catch(a){n=window}const s=n.console=n[e(378)]||{},r=[t[e(373)],e(362),t[e(390)],t[e(405)],t.QnWkc,t[e(353)],e(371)];for(let i=0;i<r[e(395)];i++){const t=Gt[e(381)+"r"][e(365)].bind(Gt),n=r[i],a=s[n]||t;t[e(406)]=Gt[e(376)](Gt),t[e(360)]=a[e(360)][e(376)](a),s[n]=t}})();const It={light:10};It[St(361)]=25,It[St(382)]=50,It.success=[10,50,20],It[St(367)]=[50,30,50,30,50],It[St(403)]=5;const _t=It,Et=()=>{const e=St,n={Nwbet:function(e,t){return e!==t},OCsgy:"undefined",qlUjd:e(387),NKMCI:function(e,t,n){return e(t,n)},CBjIO:function(e,t,n){return e(t,n)}},s=n[e(388)](typeof navigator,n[e(364)])&&n[e(363)]in navigator,r=t.useCallback((t=e(375))=>{const n=e;if(!s)return!1;try{const e=_t[t];return navigator[n(387)](e)}catch(r){return!1}},[s]),a={select:n[e(407)](t.useCallback,()=>r("selection"),[r]),move:t.useCallback(()=>r("light"),[r]),capture:t.useCallback(()=>r(e(361)),[r]),check:t.useCallback(()=>r("heavy"),[r]),victory:n[e(407)](t.useCallback,()=>r(e(391)),[r]),error:n.NKMCI(t.useCallback,()=>r(e(367)),[r]),castle:n[e(380)](t.useCallback,()=>!!s&&navigator[e(387)]([15,40,15]),[s]),gameStart:n[e(407)](t.useCallback,()=>!!s&&navigator[e(387)]([10,30,10,30,20]),[s])},i={};return i[e(372)+"d"]=s,i[e(387)]=r,i[e(366)]=a,i},Ut={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Yt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Wt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:z}=Et();let M=null;try{M=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Yt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?z.capture():z.move();return void(await n(b,c)?(y(null),j([])):z.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return z.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,x,n,s,z]),H=t.useCallback(e=>{if(!(null==M?void 0:M.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?M.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):M.setHoveredSquare(null)},[M,q]),S=t.useCallback(()=>{(null==M?void 0:M.setHoveredSquare)&&M.setHoveredSquare(null)},[M]),P=t.useCallback(e=>{if(!M)return!1;const{highlightedPiece:t,lockedPieces:n}=M,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[M,g]),G=M&&(null!==M.highlightedPiece||M.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Yt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,h=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=P(i),j=G&&g&&!y,N=G&&y;return d.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>H(i),onMouseLeave:S,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),H(i),setTimeout(()=>S(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Ut[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Ot={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Xt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Ot[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,x=u%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?z[e.quality]:null;return d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&d.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(L,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Vt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Ft={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:_,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:I,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Rt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:_,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:I,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const z=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=z.find(e=>e.value===x))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(A,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(H,{className:"w-3 h-3"})]}):d.jsx(S,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(P,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(G,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Vt[e],s=n.icon;return d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(K,{className:"w-3 h-3"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Ft[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(T,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(B,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Xt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(E,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(U,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(Y,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(W,{className:"h-5 w-5"}):d.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(O,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(X,{children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(V,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(F,{className:"h-3 w-3"}),q]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(R,{align:"end",className:"bg-popover",children:z.map(e=>d.jsx(Z,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(X,{children:[d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsx(V,{asChild:!0,children:d.jsxs(T,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(R,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(J,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx(Q,{}),re.capture.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(Q,{}),re.checkmate.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(h,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Zt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx(Qe,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(h,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Jt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(T,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(E,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(S,{children:d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(S,{children:d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(T,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:z}=he(),{setCapturedTimelineState:M,setReturningFromOrder:D}=pe(),B=t.useRef(null),[q,L]=t.useState(j),[A,H]=t.useState(!1),[S,P]=t.useState(""),[G,K]=t.useState(!1),[I,_]=t.useState(!1);se(p);const E=t.useMemo(()=>p?fe(p):null,[p]),U=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});P(e)}catch(e){}})()},[e]);const Y=async e=>{if(e&&!v)return void K(!0);if(!B.current)return;H(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{H(!1)}};return d.jsxs(ge,{open:e,onOpenChange:n,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(T,{variant:q?"outline":"default",size:"sm",onClick:()=>U(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(T,{variant:q?"default":"outline",size:"sm",onClick:()=>U(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:z})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",E&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",E]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(T,{onClick:()=>Y(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(T,{onClick:()=>Y(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?ze(x,c.totalMoves):Me;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(T,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;M({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:z}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:z},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(De,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(Be,{isOpen:G,onClose:()=>K(!1),onAuthRequired:()=>{K(!1),_(!0)},trigger:"download"}),d.jsx(qe,{isOpen:I,onClose:()=>_(!1)})]})};function en(e,t){e-=343;const n=cn();let s=n[e];if(void 0===en.NEChbE){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};en.xLPVJl=r,en.XyCuLw={},en.NEChbE=!0}const a=e+n[0],i=en.XyCuLw[a];if(i)s=i;else{const e=function(e){this.GmkEVA=e,this.BtpNnH=[1,0,0],this.omQpFm=function(){return"newState"},this.TkwNtD="\\w+ *\\(\\) *{\\w+ *",this.pwcwRq="['|\"].+['|\"];? *}"};e.prototype.FSvivw=function(){const e=new RegExp(this.TkwNtD+this.pwcwRq).test(this.omQpFm.toString())?--this.BtpNnH[1]:--this.BtpNnH[0];return this.ckVKbD(e)},e.prototype.ckVKbD=function(e){return Boolean(~e)?this.lELoxi(this.GmkEVA):e},e.prototype.lELoxi=function(e){for(let t=0,n=this.BtpNnH.length;t<n;t++)this.BtpNnH.push(Math.round(Math.random())),n=this.BtpNnH.length;return e(this.BtpNnH[0])},new e(en).FSvivw(),s=en.xLPVJl(s),en.XyCuLw[a]=s}return s}const tn=en;!function(){const e=en,t=cn();for(;;)try{if(403265===parseInt(e(355))/1*(-parseInt(e(400))/2)+parseInt(e(360))/3+-parseInt(e(415))/4+-parseInt(e(434))/5*(-parseInt(e(349))/6)+parseInt(e(356))/7*(-parseInt(e(362))/8)+parseInt(e(395))/9*(parseInt(e(374))/10)+-parseInt(e(358))/11*(-parseInt(e(383))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=en,t={};t[e(376)]=e(379)+"+$";const n=t;return nn[e(397)]()[e(388)](n[e(376)])[e(397)]()[e(365)+"r"](nn)[e(388)](e(379)+"+$")});nn();const sn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[en(389)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();sn(void 0,function(){const e=en,t={vREJd:function(e,t){return e(t)},BBBGV:e(440)+"nction() ",ivObk:function(e,t){return e===t},Hujgd:"BORUj",VcCiY:e(370),XhKtF:function(e,t){return e!==t},vGlmX:function(e){return e()},hjygm:e(348),msHkS:"exception",wHpFo:e(442),HPBbm:function(e,t){return e<t}},n=t[e(414)](function(){const n=e,s={aKPpr:function(e,n){return t[en(371)](e,n)},DLYbC:function(e,t){return e+t},TmgXE:t[n(424)]};if(t[n(435)](t[n(423)],t.VcCiY))return _0x25c922["addEventLi"+n(390)](n(353),_0x1f840a),()=>_0x3a02f8["removeEven"+n(373)](n(353),_0x2cc847);{let e;try{t[n(406)](n(381),n(416))?e=t[n(371)](Function,"return (fu"+n(428)+n(378)+'ctor("retu'+n(363)+" ));")():_0x253017=s.aKPpr(_0x2d8a94,s[n(393)](s[n(359)]+(n(378)+n(443)+n(363)+" )"),");"))()}catch(r){e=window}return e}}),s=n[e(425)]=n.console||{},r=["log","warn",e(354),t[e(411)],t[e(367)],e(391),t[e(409)]];for(let a=0;t.HPBbm(a,r[e(357)]);a++){const t=sn.constructor[e(384)].bind(sn),n=r[a],i=s[n]||t;t[e(426)]=sn[e(380)](sn),t[e(397)]=i[e(397)][e(380)](i),s[n]=t}})();const rn=()=>{const e=en,t={};t[e(419)]=4e3,o.info(e(345)+e(436)+e(369)+e(347)+e(361)+"Help",t)},an={};an[tn(408)]="M",an[tn(441)]=tn(438)+tn(402);const on={};function cn(){const e=["BxniA1m","zwvU","pvjLC2LNBIWGra","rvvuyvG","DLjfsMq","zgL0ywjSzq","DeXPC3rLBMvY","mZaYmeXUzKjcCG","yxjKihnOB3j0yW","veHZz0m","t2zMzxiGzhjHDW","E30Uy29UC3rYDq","kcGOlISPkYKRkq","yMLUza","twTqEwS","shrkC3C","nZjvBgHyC3e","ChjVDg90ExbL","khnOB3CGywXSkq","D2rwyxm","ChjLDMvUDerLzG","C2vHCMnO","yxbWBhK","C3rLBMvY","DgfIBgu","yxvSDa","reXzyKm","r3rQq3e","mtq3ntfby3rXCeC","DgfYz2v0","Dg9tDhjPBMC","CMqGy29VCMrPBG","r28GDg8Gzw5Kia","mtaWmJqXofnUrM9kEG","vg9Nz2XLigz1Ba","BMqGB24VB2zM","u3bHy2u","tMv4DcbTB3zL","sg9Tzq","wgHlDey","yxrLCW","A2v5","D0HWrM8","CMvTB3zLrxzLBG","AgP5z20","u291BMqGBxv0zq","CgXHEsK","DKDSBvG","mJiZnZK0mgjYuLLmtG","DuDSyKK","uMvZAwDUigDHBq","AxqGzNvSBhnJCG","zhvYyxrPB24","uMv0DxjUihrVia","C2HPzNrlzxK","ugXHEs9qyxvZzq","shvQz2q","qKjcr1y","y29UC29Szq","x19WCM90B19F","BhnJCMvLBIbTBW","BMn0Aw9UkcKG","r28GDg8GC3rHCG","u2HVDYbRzxLIBW","zsaOzhvYAw5Nia","DxrZ","yw5KigXLz2vUza","mtvrz3Pvt1u","AxzpyMS","ie09txv0zsWGuG","rxnJ","vg9Nz2XLihnVDq","rw5K","CMv0DxjUicHMDq","ywn0Aw9U","DhjHy2u","y3rVCIGICMv0Dq","AxndB250zw50rq","vg9Nz2XLigjVyq","u2HVCNrJDxrZoG","Bg9IyNKGlYbfEa","purYyxCSievZyW","zxjYB3i","mtqYmdy4A1HQvLbv","B3zL","vfboyKi","vg9Nz2XLl2v4Ca","A2v5zg93BG","Aw5MBW","mwjNEgD4wG","mZiYvvLgzej2","BgvUz3rO","mtaWmdy1owz4u1L1yq","vg1Nweu","mti3mJy0nxHRy1v3yW","puXVyMj5lca/pq","mti1mZzLCKvsDuK","CM4GDgHPCYiPka","icH5B3vYihr1CG","y29UC3rYDwn0BW","u291BMqGDw5TDq"];return(cn=function(){return e})()}on.key="R",on[tn(441)]=tn(417)+tn(431)+tn(413),tn(377),tn(364);const ln={};ln[tn(408)]=tn(437),ln.action=tn(420)+tn(346)+tn(418)+tn(368);const dn={key:"?"};dn[tn(441)]=tn(430)+tn(375)+tn(432);const un={};un.key=tn(403),un[tn(441)]=tn(422)+" timeline";const mn={key:"â†"};mn[tn(441)]="Previous m"+tn(350),tn(404);const xn={};xn[tn(408)]=tn(405),xn[tn(441)]=tn(429)+"t";const hn={};hn[tn(408)]=tn(439),hn[tn(441)]=tn(399)+tn(385);const pn={};pn[tn(408)]="F",pn[tn(441)]=tn(401)+tn(427)+"de";const fn={};fn[tn(408)]="C",fn[tn(441)]=tn(344)+tn(398)+tn(407),tn(352),tn(433);const gn=Tn;!function(){const e=Tn,t=qn();for(;;)try{if(673335===parseInt(e(334))/1*(parseInt(e(261))/2)+parseInt(e(241))/3+-parseInt(e(268))/4+parseInt(e(287))/5*(parseInt(e(282))/6)+-parseInt(e(299))/7*(parseInt(e(312))/8)+-parseInt(e(313))/9*(parseInt(e(275))/10)+parseInt(e(305))/11*(parseInt(e(250))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const vn=function(){const e=Tn,t={};t[e(348)]="Ryuim",t[e(325)]=function(e,t){return e===t};const n=t;let s=!0;return function(e,t){const r=function(e,t){return n[Tn(325)](e,t)},a=s?function(){const s=Tn;if(t){if(n[s(348)]==n[s(348)]){const n=t[s(357)](e,arguments);return t=null,n}return r(_0x6d1cfa[s(297)](),"w")?-_0x4f7d3c:_0x5d843f}}:function(){};return s=!1,a}}()(void 0,function(){const e=Tn,t={};t[e(344)]=e(259)+"+$";const n=t;return vn[e(339)]()[e(246)](e(259)+"+$")[e(339)]()[e(318)+"r"](vn)[e(246)](n[e(344)])});vn();const bn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Tn(357)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();bn(void 0,function(){const e=Tn,t={};t[e(269)]=function(e,t){return e+t},t[e(294)]=e(340)+e(285),t[e(265)]=e(333),t[e(289)]=e(319),t.GUpYX=e(306),t[e(346)]=e(332),t[e(281)]=function(e,t){return e<t};const n=t;let s;try{s=Function(n.HNcil(n[e(294)]+(e(255)+e(298)+e(234)+" )"),");"))()}catch(i){s=window}const r=s[e(238)]=s[e(238)]||{},a=[n[e(265)],e(286),e(342),e(320),n[e(289)],n[e(283)],n[e(346)]];for(let o=0;n[e(281)](o,a.length);o++){const t=bn[e(318)+"r"][e(263)].bind(bn),n=a[o],s=r[n]||t;t[e(262)]=bn[e(352)](bn),t[e(339)]=s[e(339)][e(352)](s),r[n]=t}})();const yn={p:100,n:320,b:330,r:500,q:900,k:2e4},wn=yn,jn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Cn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Nn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],kn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],zn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Mn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Dn(e){switch(e.toLowerCase()){case"p":return jn;case"n":return Cn;case"b":return Nn;case"r":return kn;case"q":return zn;case"k":return Mn;default:return[]}}function Bn(e){const t=Tn,n={QIIqq:function(e,t){return e===t},zQsvC:function(e,t){return e<t},rpEVB:t(354),kXLcp:function(e,t){return e(t)},tVjuJ:function(e,t){return e===t},XFTQU:function(e,t){return e-t},yGbhX:function(e,t){return e+t}};if(e[t(256)+"e"]())return n[t(361)](e[t(297)](),"w")?-1/0:1/0;if(e.isDraw()||e[t(327)+"e"]())return 0;let s=0;const r=e[t(293)]();for(let i=0;i<8;i++)for(let e=0;n.zQsvC(e,8);e++)if(n[t(351)]!==t(242)){const a=r[i][e];if(a){const r=wn[a[t(276)]]||0,o=n.kXLcp(Dn,a.type);let c=0;if(o[t(338)]>0){c=o[n[t(315)](a.color,"w")?i:n[t(264)](7,i)][e]}const l=n.yGbhX(r,c);s+="w"===a[t(272)]?l:-l}}else if(_0x2fcb11){const e=_0x128cab[t(357)](_0xf925b9,arguments);return _0x230957=null,e}const a=e.moves()[t(338)];return s+=n.tVjuJ(e.turn(),"w")?2*a:2*-a,s}function qn(){const e=["wKHZtvK","Axnhyw1Lt3zLCG","y29UC3rYDwn0BW","zxHJzxb0Aw9U","zxjYB3i","Bw92zsbLCNjVCG","B20GBw92zxmSia","FJiWmda","Cw9Avxu","whHWsKW","zgvWDgG","AxntDgfSzw1HDa","u3rVy2TMAxnOia","C2XPy2u","AwnZigfUzcbTyq","uMvHBcbotLvfia","DhjHy2u","Bg9N","m3z3wxbusG","zw5NAw5LlcbNCG","DMfSDwf0Aw9Ula","zcbTB2rL","BgvUz3rO","Dg9tDhjPBMC","CMv0DxjUicHMDq","BuXJrM8","Aw5MBW","zw5NAw5Lug93zq","ywvMrKq","Bxf4swq","CKr0uwW","t2j5vKW","EvrVqvK","C29YDa","AezoDNC","CNbfvKi","yMLUza","zhjHBLG","DLjVALC","s05Nyw4","zgvZy3jPChrPBW","yxbWBhK","u1vKufa","v0zpt3i","ChjVBw90Aw9U","uuLjCxe","CMvUzxnZ","Bw92zq","CM4GDgHPCYiPka","z1bKA0i","DMvYyM9Zzq","zMLUza","y29UC29Szq","Aw5JBhvKzxm","CMf0Aw5N","otKWntK3rwDpvvDX","D0XxDK0","EhbUvMi","igzHBgXPBMCGyG","Dw5KBW","C2vHCMnO","C3rYzw5NDgG","yw5HBhL6zvbVCW","vgzbBg0","nZCXmZCYq1D6AMvX","C3rVy2TMAxnO","sgXQuw8","BwvKAxvT","BwLU","E30Uy29UC3rYDq","AxndAgvJA21HDa","FJGWma","wLr6v2i","kcGOlISPkYKRkq","vKXRtMW","nZe1mdmWDNffCMLh","x19WCM90B19F","ChjVDg90ExbL","wezuuvu","t1Pqvxe","zMvU","quXpv0e","ndy2mdK2offZs0LjqW","se5JAwW","yMvZDe1VDMu","vvHwvLO","y29SB3i","sK1Us1e","qMvNAw5Uzxi","mtG0mZb5zNrkzeK","DhLWzq","zMXVB3i","vfnfA0y","Bw92zxm","C2nVCMu","qK5ptKS","otyZotCYD2XSA0nQ","r1vWwvG","t1vru2W","BMn0Aw9UkcKG","D2fYBG","nxnlr0DVuG","twfRzxmGCMfUza","s2fOtuq","y2fWDhvYzwq","ugHbvgG","Bw92zxrPBwu","yM9HCMq","yw1eq1K","qwr2yw5JzwqGzq","qMfZAwmGDgfJDa","DhvYBG","y3rVCIGICMv0Dq","n0HqDuDtEq","BgfIzwW","FJe0mda","AgfYza","B2nJyxnPB25HBa","C2fU","ndi5vKnzyw9w","DgfIBgu","zwfZEq","ywnRihrVigHHCG","CMfUzg9T","EhjvuMW","A015z24","odK5mZe2mezOEeHeDq","ntqWoxfIq1vpwG","A1DOqxC","DfzQDuO"];return(qn=function(){return e})()}function Ln(e,t,n,s,r){const a=Tn,i={gPdkB:function(e,t){return e(t)},GqTqV:function(e,t){return e+t},OWDDn:function(e,t){return e===t},HljQo:function(e,t){return e===t},TSEkF:function(e,t){return e===t},UXVVZ:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ghCcG:function(e,t){return e>t}};if(i[a(252)](t,0)||e[a(317)]())return{score:Bn(e),move:null};const o={};o[a(236)]=!0;const c=e[a(279)](o);if(c[a(349)]((e,t)=>{const n=a;let s=0,r=0;return e[n(290)]&&(s+=wn[e[n(290)]]||0),t[n(290)]&&(r+=wn[t[n(290)]]||0),e[n(304)][n(239)]("+")&&(s+=50),t.san.includes("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const d of c){if(!i[a(278)](a(311),a(311))){let e=0,t=0;return _0x16db6e.captured&&(e+=_0x285d14[_0x286034[a(290)]]||0),_0x5773af[a(290)]&&(t+=_0x554200[_0x2d6ade[a(290)]]||0),_0x4fc5c7[a(304)][a(239)]("+")&&(e+=50),_0x1542f4[a(304)].includes("+")&&(t+=50),t-e}{e[a(363)](d);const c=i[a(271)](Ln,e,t-1,n,s,!1);if(e[a(245)](),i.ghCcG(c[a(280)],r)&&(r=c[a(280)],o=d),s<=(n=Math.max(n,c[a(280)])))break}}const l={};return l[a(280)]=r,l[a(363)]=o,l}{let r=1/0,o=null;for(const d of c){e[a(363)](d);const c=Ln(e,t-1,n,s,!0);if(e[a(245)](),c[a(280)]<r)if(a(310)===a(324)){const e=_0x48848d[_0x5195d1.type]||0,t=i[a(235)](_0x3a9eaf,_0x5aa3df[a(276)]);let n=0;if(t[a(338)]>0){n=t["w"===_0x129476[a(272)]?_0x357446:7-_0x2584a8][_0x1b2d72]}const s=i.GqTqV(e,n);_0x33a30d+=i.OWDDn(_0x14d1e8.color,"w")?s:-s}else r=c.score,o=d;if((s=Math[a(254)](s,c.score))<=n)break}const l={};return l[a(280)]=r,l[a(363)]=o,l}}function An(e){const t=Tn,n={hFNvw:function(e,t){return e===t},ZHsMY:function(e,t){return e*t}},s=n,r={};r[t(236)]=!0;const a=e[t(279)](r);if(s[t(350)](a[t(338)],0))return null;const i=a.filter(e=>e[t(290)]);return i[t(338)]>0&&Math[t(309)]()<.3?i[Math[t(277)](Math[t(309)]()*i[t(338)])]:a[Math[t(277)](s[t(316)](Math.random(),a[t(338)]))]}function Hn(e){const t=Tn,n={kWhAw:function(e,t){return e!==t},UrZBo:t(267),GFTnN:function(e,t){return e===t},SYCEd:function(e,t){return e-t},EVesG:function(e,t){return e(t)},ZTzWb:t(260),xpnVb:function(e,t){return e<t}},s={};s[t(236)]=!0;const r=e[t(279)](s);if(0===r[t(338)])return null;let a=null,i="w"===e[t(297)]()?-1/0:1/0;for(const o of r){e.move(o);const s=n.EVesG(Bn,e);if(e[t(245)](),"w"===e[t(297)]()){if(n[t(258)]!==t(260))return _0x59a2dd[t(286)](t(328)+"not ready,"+t(244)+t(308)+t(337)),_0x431cc6(_0x56d2f3);s>i&&(i=s,a=o)}else n[t(243)](s,i)&&(i=s,a=o)}if(Math[t(309)]()<.2){const s=r[t(349)]((s,r)=>{const a=t,i={WFOOr:function(e,t,n,s,r,a){return e(t,n,s,r,a)}};if(n[a(314)]("BrFBx",n.UrZBo)){e[a(363)](s);const t=Bn(e);e[a(245)](),e.move(r);const i=Bn(e);return e[a(245)](),n.GFTnN(e[a(297)](),"w")?n.SYCEd(i,t):t-i}return i[a(359)](_0x54293b,_0x2ad901,4,-_0x1cbae6,_0x50348e,"w"===_0x16102e.turn())[a(363)]}),a=s[t(329)](0,Math[t(254)](3,s[t(338)]));return a[Math[t(277)](Math[t(309)]()*a[t(338)])]}return a}function Sn(e){const t=Tn;return Ln(e,4,-1/0,1/0,"w"===e.turn())[t(363)]}const Pn={id:"easy"};Pn.label=gn(274),Pn[gn(356)+"n"]=gn(288)+gn(322)+gn(303)+" captures",Pn.rating=gn(257);const Gn={};Gn.id=gn(253),Gn[gn(300)]="Club Player",Gn[gn(356)+"n"]=gn(296)+gn(330)+"terial awa"+gn(362),Gn.rating=gn(301);const Kn={};function Tn(e,t){e-=234;const n=qn();let s=n[e];if(void 0===Tn.NjQqzP){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tn.hRZkYV=r,Tn.UxFxLc={},Tn.NjQqzP=!0}const a=e+n[0],i=Tn.UxFxLc[a];if(i)s=i;else{const e=function(e){this.xFxWzR=e,this.vkArRz=[1,0,0],this.xYBaTb=function(){return"newState"},this.BCburJ="\\w+ *\\(\\) *{\\w+ *",this.vkXwho="['|\"].+['|\"];? *}"};e.prototype.HBIWug=function(){const e=new RegExp(this.BCburJ+this.vkXwho).test(this.xYBaTb.toString())?--this.vkArRz[1]:--this.vkArRz[0];return this.FcqJKp(e)},e.prototype.FcqJKp=function(e){return Boolean(~e)?this.XPHmER(this.xFxWzR):e},e.prototype.XPHmER=function(e){for(let t=0,n=this.vkArRz.length;t<n;t++)this.vkArRz.push(Math.round(Math.random())),n=this.vkArRz.length;return e(this.vkArRz[0])},new e(Tn).HBIWug(),s=Tn.hRZkYV(s),Tn.UxFxLc[a]=s}return s}Kn.id=gn(302),Kn[gn(300)]="Master",Kn[gn(356)+"n"]=gn(295)+gn(336)+" 4-ply search depth",Kn[gn(240)]=gn(323);const In={};In.id=gn(251),In[gn(300)]=gn(328)+"16",In[gn(356)+"n"]=gn(331)+gn(335)+"andmaster "+gn(247),In.rating="~3200",In[gn(343)+"red"]=!0;const _n=[Pn,Gn,Kn,In];!function(){const e=Yn,t=Un();for(;;)try{if(789275===-parseInt(e(440))/1+parseInt(e(452))/2*(parseInt(e(403))/3)+-parseInt(e(455))/4*(-parseInt(e(464))/5)+-parseInt(e(419))/6+-parseInt(e(444))/7*(-parseInt(e(435))/8)+parseInt(e(413))/9+-parseInt(e(446))/10*(parseInt(e(438))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const En=function(){const e=Yn,t={};t[e(397)]=function(e,t){return e===t},t.EbIEo=e(416);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(397)](n[a(414)],n[a(414)])){const e=s?function(){if(r){const e=r[a(420)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x32f23c=_0x4028d3}}()(void 0,function(){const e=Yn,t={};t[e(392)]=e(457)+"+$";const n=t;return En[e(412)]().search(n[e(392)]).toString()[e(394)+"r"](En).search(n[e(392)])});function Un(){const e=["u3HdyLy","CurzreW","sMzUsNK","zwLVtwu","B25nB3vZzu1VDG","C3rHCNry","BMn0Aw9UkcKG","nZe0CgHXAxvc","Dg91y2HLCW","Eg96ugq","y2XPzw50wq","BxfgELO","rwj6B1O","wM1jzhC","uKX5rwC","BgvUz3rO","Dg9tDhjPBMC","mtqWnJy0ntf1z09Vr2e","rwjjrw8","Bg5cvge","vxDbyxe","CM4GDgHPCYiPka","EKnmCfK","mtiZmda4neTbCxLezW","yxbWBhK","C3rHCNrz","DxrxA08","A0PUD2G","r0HSrxC","B25uB3vJAevUza","ywDXq08","B25uB3vJAfn0yq","Aw5MBW","qMreBNG","s0D4s1q","B25nB3vZzurVDW","ugzWBey","sKvSEeW","txrRyK4","oefjEvbxDa","CMv0DxjUicHMDq","rgHACLG","mJK3ELfJt09T","Dw9oDw8","mtmXmtmYogrLwg14yW","zxHJzxb0Aw9U","y3rVCIGICMv0Dq","zxjYB3i","ote5mtm3ognfv3DgzW","E30Uy29UC3rYDq","mtaXnJeXmffqvMjuwG","yMLUza","q0H4te8","ywjZ","y29UC29Szq","uK16u3G","ntC3nhnssuXkvW","y3vYCMvUDa","u0fJu1u","mte4odGXmNzUyM1vsa","v0Hpzvu","kcGOlISPkYKRkq","uhPSy0K","B25uB3vJAe1VDG","tKf1Dwu","y3vYCMvUDfK","D2fYBG","y2XPzw50wa","mJvQAuTcDei","AxntD2LWAw5N","AgfUzgXLCNm","y3vYCMvUDfG","vxLss04","DgfIBgu","AwPbz1a","DNnzt1m","y29UC3rYDwn0BW","B25nB3vZzuXLyq"];return(Un=function(){return e})()}function Yn(e,t){e-=387;const n=Un();let s=n[e];if(void 0===Yn.pSzVoC){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Yn.ZErtcI=r,Yn.YAHFfV={},Yn.pSzVoC=!0}const a=e+n[0],i=Yn.YAHFfV[a];if(i)s=i;else{const e=function(e){this.tElBUw=e,this.tEeafG=[1,0,0],this.aQiYUJ=function(){return"newState"},this.eHzRwa="\\w+ *\\(\\) *{\\w+ *",this.LMTGZg="['|\"].+['|\"];? *}"};e.prototype.JtzFER=function(){const e=new RegExp(this.eHzRwa+this.LMTGZg).test(this.aQiYUJ.toString())?--this.tEeafG[1]:--this.tEeafG[0];return this.optqvX(e)},e.prototype.optqvX=function(e){return Boolean(~e)?this.wCDrlZ(this.tElBUw):e},e.prototype.wCDrlZ=function(e){for(let t=0,n=this.tEeafG.length;t<n;t++)this.tEeafG.push(Math.round(Math.random())),n=this.tEeafG.length;return e(this.tEeafG[0])},new e(Yn).JtzFER(),s=Yn.ZErtcI(s),Yn.YAHFfV[a]=s}return s}En();const Wn=function(){let e=!0;return function(t,n){const s=Yn,r={};r[s(390)]=s(436)+s(402),r[s(423)]=s(445)+s(442)+s(417)+" )",r[s(409)]=s(429);const a=r;if(s(432)==s(432)){const r=e?function(){const e=s,r={GKzqY:function(e,t){return e(t)},vsYOS:function(e,t){return e+t},qgubB:a.UyRKN,EbzoZ:a.kJnwh};if(a[e(409)]==a[e(409)]){if(n){const s=n[e(420)](t,arguments);return n=null,s}}else _0x4550e5=r.GKzqY(_0x4d7597,r[e(393)](r.qgubB+r[e(408)],");"))()}:function(){};return e=!1,r}_0x274fce&&_0x2385a8(_0x2ffe11[s(463)],_0xfb8cc6.clientY)}}();Wn(void 0,function(){const e=Yn,t={otNNe:function(e){return null==e?void 0:e()},TflRX:function(e,t){return e===t},mqFzZ:e(398),DhZrX:function(e,t){return e+t},WHOeU:"trace",utWkO:function(e,t){return e<t}},n=function(){const n=e,s=function(e){return t.otNNe(e)};if(n(433)==n(433)){let e;try{if(t.TflRX("NUccq",t[n(407)])){const e=_0x39bbe3[n(420)](_0x311273,arguments);return _0xd81d5b=null,e}e=Function(t[n(437)](t.DhZrX(n(436)+n(402),n(445)+'ctor("retu'+n(417)+" )"),");"))()}catch(r){e=window}return e}s(_0xebf637)}(),s=n[e(450)]=n[e(450)]||{},r=["log",e(462),e(428),e(443),e(441),e(391),t[e(456)]];for(let a=0;t[e(422)](a,r[e(411)]);a++){const t=Wn.constructor.prototype[e(447)](Wn),n=r[a],i=s[n]||t;t.__proto__=Wn.bind(Wn),t[e(412)]=i[e(412)][e(447)](i),s[n]=t}})();const On=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:_e,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:_e,description:"15 minutes"}],Xn=["bot","create","join"],Vn=()=>{var e,n,s,l,u,x,f,v,b,y,w;me();const[j]=He(),{user:k,isPremium:z}=r(),{haptics:q}=Et(),[L,A]=t.useState("lobby"),[H,P]=t.useState(!1),[G,K]=t.useState(!1),[I,E]=t.useState("bot"),[U,Y]=t.useState("human"),[W,O]=t.useState("medium"),[X,V]=t.useState("blitz_5"),[F,R]=t.useState("hotCold"),[Z,J]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=vt(Ce,Ne),[ze,Me]=t.useState([]),[De,Le]=t.useState(!1),[Ae,_e]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Xn.indexOf(I);let n;n="left"===e?Math.min(t+1,Xn.length-1):Math.max(t-1,0),n!==t&&(q.select(),E(Xn[n]))},[I,q]),{swipeOffset:xt,isSwiping:pt,handlers:ft}=((e={})=>{const n=Yn,s={PzlcI:function(e,t){return e(t)},uoNuo:function(e,t){return e-t},eKxTQ:function(e,t){return e===t},SAcSU:"CHxLO",zCLpY:function(e,t){return e(t)},xozPd:function(e,t){return e>t},RLyEg:function(e,t){return e>t},lnBTa:function(e){return null==e?void 0:e()},eioMe:function(e){return null==e?void 0:e()},SxCbV:function(e,t){return e(t)},NAuue:"MAKSY",xwTGL:n(451),agqCO:function(e,t,n){return e(t,n)},GHlEw:function(e,t,n){return e(t,n)},MLOGQ:function(e){return e()},KGxKT:function(e,t){return e(t)},sqyMU:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=t.useState(d),[x,h]=s[n(430)](t.useState,!1),p={};p[n(401)]=0,p.startY=0,p[n(389)]=0,p.currentY=0,p[n(387)]=!1;const f=t.useRef(p),g=t.useCallback((e,t)=>{const r=n;if("MtkbN"===r(434)){const n={};n[r(401)]=e,n[r(421)]=t,n.currentX=e,n.currentY=t,n.isSwiping=!0,f[r(453)]=n,s[r(458)](h,!0)}else{if(!_0x5d0a1c)return;_0x4cdd98()}},[]),v=t.useCallback((e,t)=>{const r=n;if(s.eKxTQ(s[r(454)],r(448))){if(!f[r(453)].isSwiping)return;f[r(453)][r(389)]=e,f.current[r(461)]=t;const n=s[r(439)](e,f[r(453)][r(401)]),a=t-f[r(453)].startY,i={};i.x=n,i.y=a,s[r(418)](m,i)}else{if(!_0x467a3c[r(453)][r(387)])return;_0x49903b[r(453)].currentX=_0x4d44a3,_0x4af235[r(453)][r(461)]=_0x5a5d69;const e=_0xdc4477-_0x9b70b2[r(453)][r(401)],t=s[r(439)](_0x22bc1a,_0x3b4262.current[r(421)]),n={};n.x=e,n.y=t,_0x253818(n)}},[]),b=t.useCallback(()=>{const e=n;if(!f[e(453)].isSwiping)return;const t=s[e(439)](f[e(453)][e(389)],f.current[e(401)]),a=s.uoNuo(f.current[e(461)],f.current.startY),d=Math[e(449)](t),u=Math.abs(a);s.xozPd(d,u)&&s[e(405)](d,r)?s[e(410)](t,0)?s[e(415)](o):s[e(399)](i):u>d&&u>r&&(a>0?null==l||l():null==c||c()),f[e(453)][e(387)]=!1,s[e(396)](h,!1);m({x:0,y:0})},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n;if(s[t(460)]!==s.xwTGL){const n=e[t(404)][0];s[t(426)](g,n.clientX,n.clientY)}else{if(!_0x419d9e)return;_0x48e00e(_0x1db4b2[t(463)],_0x14d504[t(406)])}},[g]),w=t.useCallback(e=>{const t=n,r=e.touches[0];s.GHlEw(v,r[t(463)],r[t(406)])},[v]),j=s[n(424)](t.useCallback,()=>{s[n(399)](b)},[b]),C=t.useCallback(e=>{const t=n;a&&g(e[t(463)],e[t(406)])},[a,g]),N=s[n(426)](t.useCallback,e=>{const t=n;a&&v(e[t(463)],e[t(406)])},[a,v]),k=t.useCallback(()=>{a&&b()},[a,b]),z=s.sqyMU(t.useCallback,()=>{const e=n;a&&f[e(453)][e(387)]&&s.MLOGQ(b)},[a,b]),M={};M[n(427)+"rt"]=y,M[n(459)+"e"]=w,M[n(425)]=j,M[n(431)+"n"]=C,M[n(400)+"e"]=N,M.onMouseUp=k,M[n(395)+"ve"]=z;const D={};return D.swipeOffset=u,D.isSwiping=x,D[n(388)]=M,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Dt,resignGame:Bt,offerDraw:qt,loadGame:Lt,getAvailableMoves:At,movedSquares:St}=(()=>{const e=Mt,n={EQjlT:"OcoTa",KcmHp:function(e,t){return e(t)},WFWri:function(e,t){return e!==t},aMRqh:function(e,t){return e===t},zGqxp:e(330),CxRcF:e(379),BYiCb:function(e,t){return e(t)},jzSrX:function(e,t){return e===t},Amtzy:function(e,t){return e===t},AgVsj:e(416),NjZxV:e(331),KPrmp:"draw",nXHci:e(351),LaKZw:"defeat",emQsC:function(e,t){return e(t)},InpNX:function(e,t){return e(t)},EAZWw:"postgres_c"+e(293),fFPwv:e(530),zVcne:e(301)+"s",xjiqA:e(406)+":",CSOts:e(263),nzTyA:function(e,t){return e!==t},afTsA:e(496),DevFU:e(357)+"s",aJVzM:e(284)+e(482),IjrhW:e(516),TcYlt:"move_number",GOIme:function(e,t){return e(t)},FpnTq:function(e,t){return e instanceof t},MNJdj:"Failed to load game",dIEeM:e(464)+e(407)+e(343)+"e",TWVEQ:"generate_c"+e(506)+e(515),cWZzH:e(417),eJVTV:e(465)+"ed! Waitin"+e(287)+e(401),BGSEL:function(e,t){return e instanceof t},XoOio:function(e,t){return e(t)},wkjqj:"Game already started",UQrdL:"gameStart",SpAXG:e(313),pDPpB:function(e,t){return e instanceof t},lxSId:function(e,t){return e(t)},RHOei:function(e,t){return e(t)},whbHW:e(299),TiEIw:"Please sig"+e(457)+e(326),zgTmC:function(e,t){return e(t)},ZVkhk:e(448)+e(469),Tmmeu:e(423),EPtOO:e(453)+e(548)+e(385)+e(515),npgvJ:function(e,t,n){return e(t,n)},FxhdU:e(384)+e(487)+"de",JYIPU:e(533),iqrZN:function(e,t){return e||t},pIYBT:e(460),uukIh:e(288),BftCs:function(e,t){return e===t},QJivR:function(e,t){return e(t)},ZvgUn:function(e,t){return e(t)},yyKcB:"active",XhMJK:e(413),hjNaR:function(e,t){return e+t},FELgF:function(e,t){return e+t},bnpJY:function(e,t){return e+t},LlerQ:function(e,t){return e||t},MljYB:e(452),EbDpl:"oGpwJ",TQTWX:function(e,t,n,s){return e(t,n,s)},LTovH:e(370),giTeF:function(e,t){return e(t)},Nehsc:e(356),HSHiF:e(430),wMmSH:function(e,t){return e||t},nCNQw:"abandoned",JQAGA:function(e,t,n,s){return e(t,n,s)},MgaCx:function(e,t){return e===t},ockBo:function(e,t){return e>=t},XFtWC:e(522),dijxk:function(e,t){return e===t},SkNVN:e(438)+e(302)+"onent auto-accepts i"+e(297)+e(478),MPgFY:function(e,t){return e!==t},gqPrL:e(391),FqLok:e(422),yAEks:function(e){return e()},LuYLM:function(e,t){return e(t)},hJFxn:function(e,t){return e(t)},zjVkN:function(e,t){return e(t)},zgmZE:function(e,t){return e===t},FgFme:function(e,t,n){return e(t,n)},npiBb:function(e,t,n){return e(t,n)},NPEVy:function(e,t,n){return e(t,n)},dATaC:function(e,t,n){return e(t,n)}},{user:s}=n.yAEks(r),[l,d]=n.LuYLM(t.useState,new a),[u,m]=t.useState(null),[x,h]=n[e(279)](t.useState,!1),[p,f]=n.GOIme(t.useState,null),[g,v]=n[e(483)](t.useState,new Set),{enabled:b,volume:y}=n.yAEks(zt),{playSound:w}=vt(b,y);n[e(317)](t.useRef,"");const j=u?n.MgaCx(u[e(285)+e(456)],null==s?void 0:s.id)?"w":u[e(462)+e(456)]===(null==s?void 0:s.id)?"b":null:null,C=(null==u?void 0:u.status)===e(409)&&n[e(477)](l[e(278)](),j);t.useEffect(()=>{const t=e,r={vOeac:t(452),Hounr:function(e,t){return e(t)},QdLRK:n[t(393)],aeGOD:function(e,t){return n.jzSrX(e,t)},gylqZ:n[t(338)],OfZik:function(e,t){return n.BYiCb(e,t)},qOZbe:n.LaKZw,GQbPQ:function(e,s){return n[t(361)](e,s)},TlcsY:function(e,t){return n.InpNX(e,t)}};if(!(null==u?void 0:u.id))return;const o=i[t(473)](t(383)+u.id).on(n[t(497)],{event:n.fFPwv,schema:t(435),table:t(357)+"s",filter:t(519)+u.id},e=>{const n=t,i=e[n(428)];if(i.status===r[n(459)]&&u.status!==r[n(459)]&&("draw"===i.result?r[n(521)](w,r[n(350)]):r[n(488)](i[n(252)],null==s?void 0:s.id)?r[n(521)](w,r[n(463)]):r[n(397)](w,r[n(309)])),r.GQbPQ(m,e=>e?{...e,status:i[n(423)],result:i.result,pgn:i.pgn,currentFen:i[n(495)+"n"],moveCount:i[n(405)],whiteTimeRemaining:i[n(525)+n(304)],blackTimeRemaining:i["black_time"+n(304)],winnerId:i[n(252)],blackPlayerId:i[n(254)+n(531)],startedAt:i[n(484)]}:null),i[n(495)+"n"]){const e=new a(i.current_fen);r[n(324)](d,e)}})[t(321)](),c=i[t(473)](t(311)+u.id).on(n.EAZWw,{event:t(451),schema:"public",table:n[t(367)],filter:"game_id=eq."+u.id},e=>{const a=t,i={};i[a(362)]=function(e,t){return e>=t};const o=i;if(n[a(536)]==n[a(536)]){const t=e.new,i=t[a(341)];if(i&&i[a(307)]>=4){const e=i.substring(2,4);n[a(270)](v,t=>new Set([...t,e]))}if(n[a(494)](t[a(336)],null==s?void 0:s.id))if(n[a(355)](n.zGqxp,n[a(514)])){const e=t[a(503)];e[a(371)]("#")?n[a(270)](w,a(460)):e[a(371)]("+")?n[a(494)](n[a(441)],a(358))?n.KcmHp(w,"check"):_0xc22ca[a(341)]&&o.oEFhp(_0x4d0d92.move_uci[a(307)],4)&&_0x234ceb[a(520)](_0x36d5a7[a(341)][a(255)](2,4)):e[a(371)]("x")?n[a(419)](w,a(288)):n[a(538)](e,"O-O")||n[a(318)](e,n[a(369)])?n[a(270)](w,a(442)):w(n.NjZxV)}else _0x5a8410[a(513)]===r[a(350)]?r[a(485)](_0x5dfd83,r[a(350)]):_0x43f075[a(252)]===(null==_0x4cc493?void 0:_0x4cc493.id)?_0x1bd0bc(a(351)):r.TlcsY(_0x2f3154,"defeat")}else _0x1c06cb[a(426)+a(294)](_0x18eeef),_0x492059[a(426)+"nel"](_0x52c9e2)})[t(321)]();return()=>{const e=t;i[e(426)+e(294)](o),i[e(426)+e(294)](c)}},[null==u?void 0:u.id,null==u?void 0:u[e(423)],null==s?void 0:s.id,w]);const N=n.FgFme(t.useCallback,async t=>{const s=e,r={PzNkn:n[s(282)],OsDno:n.CSOts,oJyYD:function(e,t){return n[s(273)](e,t)}};if(s(376)===n[s(387)])return _0xb52ea2[s(504)](r[s(344)],_0xba1062),!1;n[s(270)](h,!0),f(null);try{const{data:e,error:o}=await i[s(489)](n[s(266)]).select("*").eq("id",t)[s(468)+"e"]();if(o)throw o;if(!e)throw new Error(n[s(546)]);const c={};c.id=e.id,c[s(285)+"rId"]=e[s(436)+"er_id"],c[s(462)+s(456)]=e[s(254)+"er_id"],c[s(423)]=e[s(423)],c[s(513)]=e.result,c.pgn=e[s(290)]||"",c[s(455)]=e[s(495)+"n"],c[s(306)]=e[s(405)]||0,c[s(332)+"l"]=e.time_control,c[s(402)+s(365)]=e["white_time"+s(304)],c[s(498)+s(365)]=e[s(505)+"_remaining"],c[s(532)+"te"]=e[s(295)+s(474)],c[s(523)+"te"]=e[s(382)+s(474)],c[s(429)+"ode"]=e[s(448)+s(469)],c[s(403)]=e[s(252)],c[s(257)]=e[s(349)],c[s(335)]=e[s(484)],n[s(270)](m,c);const l=new a(e[s(495)+"n"]);d(l);const u={};u[s(296)]=!0;const{data:x}=await i[s(489)](n[s(367)])[s(481)](s(341)).eq(n.IjrhW,t)[s(289)](n[s(374)],u);if(x){const e=new Set;x[s(499)](t=>{const n=s;if(r[n(305)](n(415),n(415)))return _0x2b8f48(r.OsDno),!1;t[n(341)]&&t[n(341)][n(307)]>=4&&e[n(520)](t[n(341)][n(255)](2,4))}),n[s(368)](v,e)}}catch(o){f(n[s(327)](o,Error)?o[s(339)]:n.MNJdj)}finally{n[s(419)](h,!1)}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(!s)return o[c(504)](n[c(444)]),null;n[c(270)](h,!0),n.KcmHp(f,null);try{const e=Ht[t]||null,{data:l}=await i.rpc(n[c(372)]),d={};d[c(436)+"er_id"]=s.id,d[c(423)]=n[c(337)],d.time_control=t,d[c(525)+c(304)]=e,d[c(505)+c(304)]=e,d[c(295)+c(474)]=a,d[c(431)]=r,d[c(448)+c(469)]=l;const{data:u,error:m}=await i[c(489)]("chess_games").insert(d)[c(481)]()[c(340)]();if(m)throw m;return o[c(544)](r?n[c(277)]:"Challenge "+c(345)+l),await n[c(419)](N,u.id),u.id}catch(l){const e=n[c(399)](l,Error)?l.message:c(384)+"create game";return n[c(419)](f,e),o[c(504)](e),null}finally{n[c(537)](h,!1)}},[s,N]),z=t.useCallback(async(t,r)=>{const a=e;if(!s){if(a(446)==a(446))return o[a(504)](a(464)+a(457)+a(326)),!1;_0x4cb871(!1)}h(!0),n[a(279)](f,null);try{const{data:e,error:c}=await i[a(489)](n[a(266)])[a(481)]("*").eq("id",t)[a(468)+"e"]();if(c)throw c;if(!e)throw new Error(n[a(546)]);if(e[a(423)]!==n[a(337)])throw new Error(n[a(418)]);if(e[a(436)+a(531)]===s.id)throw new Error(a(283)+a(476)+a(395));const{error:l}=await i[a(489)](n[a(266)])[a(386)]({black_player_id:s.id,black_palette:r,status:a(409),started_at:(new Date)[a(447)+"g"](),last_move_at:(new Date)[a(447)+"g"]()}).eq("id",t);if(l)throw l;return w(n[a(348)]),o.success("Joined gam"+a(511)+a(392)+a(491)),await N(t),!0}catch(c){if("kNCoF"===n.SpAXG){const e=n[a(323)](c,Error)?c[a(339)]:a(384)+"join game";return n.lxSId(f,e),o[a(504)](e),!1}_0x5aa7d5(a(271))}finally{n[a(261)](h,!1)}},[s,N,w]),M=n[e(475)](t.useCallback,async(t,r)=>{const a=e;if(n.aMRqh("XtlpU",n[a(328)])){if(!s)return o[a(504)](n.TiEIw),!1;n.zgTmC(h,!0),n[a(279)](f,null);try{const{data:e,error:s}=await i.from(a(357)+"s")[a(481)]("id").eq(n.ZVkhk,t[a(269)+"e"]()).eq(n.Tmmeu,a(417))[a(468)+"e"]();if(s)throw s;if(!e)throw new Error(n[a(310)]);return await n.npgvJ(z,e.id,r)}catch(c){const e=c instanceof Error?c[a(339)]:n[a(312)];return f(e),o[a(504)](e),!1}finally{n[a(368)](h,!1)}}else _0x42059d("check")},[s,z]),D=n[e(408)](t.useCallback,async(t,r,c)=>{const m=e,x={BXWTE:function(e,t){return e(t)},ZreYy:n.JYIPU};if(n[m(524)](!u,!s)||!C)return!1;try{const e={};e[m(489)]=t,e.to=r,e[m(470)]=c;const h=l[m(331)](e);if(!h)return w(n[m(292)]),!1;l[m(267)+"e"]()?w(n[m(518)]):l[m(420)]()?w(n[m(433)]):h[m(480)]?w(n[m(471)]):n[m(253)](h[m(359)],m(389))||"O-O-O"===h[m(359)]?n[m(291)](w,"castle"):w(n[m(354)]),n[m(396)](d,new a(l[m(458)]())),v(e=>new Set([...e,r]));const p=l[m(290)](),f=l[m(458)]();let g=null,b=null,y=n.yyKcB;return l[m(373)]()&&(y=m(452),l[m(267)+"e"]()?(g=n[m(253)](l[m(278)](),"w")?n[m(425)]:"white_wins",b="w"===l[m(278)]()?u[m(462)+m(456)]:u[m(285)+m(456)]):g=m(271)),await i[m(489)](n[m(367)]).insert({game_id:u.id,player_id:s.id,move_number:n[m(479)](u[m(306)],1),move_san:h[m(359)],move_uci:n.FELgF(n.bnpJY(t,r),n[m(440)](c,"")),fen_after:f}),await i[m(489)](n.DevFU)[m(386)]({pgn:p,current_fen:f,move_count:u[m(306)]+1,last_move_at:(new Date)[m(447)+"g"](),status:y,result:g,winner_id:b,completed_at:n[m(355)](y,n[m(517)])?(new Date)[m(447)+"g"]():null}).eq("id",u.id),n[m(355)](y,n.MljYB)&&g&&(n[m(273)](m(466),n[m(264)])?(await n[m(535)](B,u[m(285)+m(456)],u[m(462)+m(456)],g),n.aMRqh(g,"draw")?n[m(396)](w,"draw"):b===(null==s?void 0:s.id)?w(m(351)):n[m(273)](m(370),n.LTovH)?_0x43719a(!1):n[m(549)](w,"defeat"),g===m(280)?o[m(544)]("w"===j?n[m(388)]:m(411)+"!"):g===n.XhMJK?m(539)==m(539)?o[m(544)]("b"===j?m(356):m(526)+"!"):_0x3b6ef0=m(271):o.info(n.GOIme(ht,l))):x[m(315)](_0xf604a6,m(288))),!0}catch(h){if(n[m(318)](n.HSHiF,m(430)))return!1;_0xadc3da(x.ZreYy)}},[l,u,s,C,j,w]),B=n[e(439)](t.useCallback,async(t,r,a)=>{const l=e;if(!n.wMmSH(!t,!r)&&!n.BftCs(a,n[l(394)]))try{const{data:e}=await i[l(489)](l(366))[l(481)](l(262)+"lo_rating").in(l(467),[t,r]);if(!e||2!==e[l(307)])return;const d=e.find(e=>e.user_id===t),u=e[l(265)](e=>e.user_id===r);if(!d||!u)return;const m=d.elo_rating||1200,x=u.elo_rating||1200,h=a===l(271)?n[l(393)]:a,p=n[l(540)](c,m,x,h),f={};f.elo_rating=p[l(325)][l(410)];const g={};if(g[l(347)]=p[l(508)][l(410)],await Promise[l(322)]([i[l(489)](l(366))[l(386)](f).eq(l(467),t),i[l(489)]("profiles").update(g).eq(l(467),r)]),(null==s?void 0:s.id)===t)if(n[l(404)](l(268),l(268))){const e=p.white.change;o.info(l(427)+p[l(325)][l(410)]+" ("+(n[l(281)](e,0)?"+":"")+e+")")}else _0x42ce73(n[l(518)]);else if((null==s?void 0:s.id)===r){const e=p.black.change;o[l(380)](l(427)+p[l(508)][l(410)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){n.Amtzy(l(509),l(509))||_0x111f5b(_0x15249c instanceof _0x289103?_0x56607e[l(339)]:"Failed to load game")}},[s]),q=t.useCallback(async()=>{const t=e,r={};r[t(381)]=n[t(354)];const a=r;if(t(522)===n[t(434)]){if(!u||!s||!j)return;const e=n[t(547)](j,"w")?t(413):"white_wins",r="w"===j?u[t(462)+t(456)]:u[t(285)+t(456)];await i[t(489)](t(357)+"s").update({status:t(452),result:e,winner_id:r,completed_at:(new Date)[t(447)+"g"]()}).eq("id",u.id),await B(u.whitePlayerId,u[t(462)+t(456)],e),o.info(t(260)+"ed")}else _0x4be23c(a[t(381)])},[u,s,j,B]),L=t.useCallback(async()=>{const t=e;o[t(380)](n[t(461)]),u&&(await i[t(489)]("chess_games")[t(386)]({status:"completed",result:t(271),completed_at:(new Date).toISOString()}).eq("id",u.id),await B(u[t(285)+t(456)],u[t(462)+t(456)],n.KPrmp))},[u,B]),A=n[e(493)](t.useCallback,t=>{const s=e;if(n[s(308)](n[s(421)],n[s(329)])){const e={};return e.square=t,e[s(400)]=!0,l[s(432)](e)[s(437)](e=>e.to)}n[s(419)](_0x53a7e3,n.nXHci)},[l]),H={};return H[e(454)]=l,H[e(377)]=u,H.isMyTurn=C,H.myColor=j,H[e(333)]=x,H[e(504)]=p,H[e(303)]=D,H[e(342)]=k,H[e(528)]=z,H[e(256)]=M,H[e(274)]=q,H[e(545)]=L,H[e(360)]=N,H[e(390)+"leMoves"]=A,H[e(275)+"es"]=g,H})(),Pt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),A("lobby")};((e={})=>{const n=en,s={HtJsw:function(e){return e()},vWgrB:n(412)+"d",GtjCq:n(366)+"ted",wdVas:function(e,t){return e===t},ekqZK:"AFwRm",TPNbB:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:d,enabled:u}=zt(),m=t.useCallback(e=>{const t=n;if(e.target instanceof HTMLInputElement||e[t(396)]instanceof HTMLTextAreaElement||e.target[t(343)+t(372)])return;const m=e[t(408)].toLowerCase();switch(m){case"m":s.HtJsw(d),o.info(u?s.vWgrB:s[t(394)],{duration:1500,icon:u?"ðŸ”‡":"ðŸ”Š"});break;case"r":c&&r&&(e[t(387)+t(392)](),r());break;case"d":c&&l&&a&&(e["preventDef"+t(392)](),a());break;case"escape":i&&(e[t(387)+"ault"](),i());break;case"?":case"/":(!e[t(421)]||"?"===m)&&(e[t(387)+"ault"](),s[t(382)](rn))}},[d,u,r,a,i,c,l]);s[n(351)](t.useEffect,()=>{const e=n;if(s[e(386)]("AFwRm",s.ekqZK))return window.addEventListener(e(353),m),()=>window[e(410)+e(373)](e(353),m);_0x2ad1b9[e(387)+"ault"](),_0x200736()},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Bt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?qt:void 0,onBackToLobby:"lobby"!==L?Pt:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&Lt(e).then(()=>A("game"))},[j,Lt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&_e(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));Me(r)}else Me([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==L&&(A("game"),null===et&&tt(Ae))},[null==bt?void 0:bt.status,L,Ae,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),_e(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const Gt=async()=>{if(!k)return void P(!0);if(!z)return void K(!0);const e=Ge.find(e=>e.id===F),t=(null==e?void 0:e.white)||{};await Nt(X,Z,t)&&A("waiting")},Kt=async e=>{if(!k)return void P(!0);if(!z)return void K(!0);const t=Ge.find(e=>e.id===F),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Tt=()=>ze.length?ze.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],It=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),he(F);const n=Ge.filter(e=>e.id!==F),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=_n.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},_t=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Ut=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=_t(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ht(ee))),!0;oe(!0);const i=function(e){const t=Tn,n={};n[t(345)]="easy",n[t(341)]=function(e,t){return e+t},n[t(273)]=t(302);const s=n;switch(e){case s.mqxId:return s[t(341)](300,500*Math.random());case t(253):return 500+1e3*Math.random();case s[t(273)]:return s[t(341)](800,1500*Math[t(309)]());case t(251):return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=Tn,s={HGnoB:n(307),SUdPP:function(e,t){return e(t)},KNgan:n(302),ObyVL:function(e,t){return e(t)},TfAlm:n(251),PhATh:function(e,t){return e(t)},sgmoX:function(e,t){return e(t)}};switch(t){case s.HGnoB:return An(e);case n(253):return s[n(358)](Hn,e);case s[n(355)]:return s[n(347)](Sn,e);case s[n(249)]:return s[n(291)](Sn,e);default:return s.sgmoX(An,e)}}(ee,W);if(c){const e=_t(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ht(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,W,ke,q]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(Se,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx(Jt,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===L&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Xn.map(e=>d.jsx("button",{onClick:()=>{q.select(),E(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(I===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(T,{onClick:It,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:_n.map(e=>d.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(Pe,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ge.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ke,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Te,{to:"/openings",children:d.jsxs(T,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(Ie,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Te,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!z&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(T,{onClick:()=>K(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&z&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(T,{onClick:async()=>{if(!k)return void P(!0);if(!z)return void K(!0);const e=Tt().filter(e=>e.white_player_id!==k.id);e.length>0?await Kt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Gt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Tt().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Tt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Tt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:On.map(e=>d.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ge.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>J(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>J(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(T,{onClick:Gt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!z,children:[!z&&d.jsx(Ye,{className:"h-4 w-4"}),"Create Game",d.jsx(We,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(T,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void P(!0);if(!z)return void K(!0);const e=Ge.find(e=>e.id===F),t=(null==e?void 0:e.black)||{};await Dt(Q.trim(),t)&&A("game")},disabled:jt||!z,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===ze.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:ze.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Ae,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=On.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(S,{children:d.jsxs(M,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(B,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),d.jsx(T,{size:"sm",onClick:()=>Kt(e.id),disabled:jt||!z||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!Z&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),d.jsx(T,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Ve,{className:"h-4 w-4"})})]})]}),d.jsx(T,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&bt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(T,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(T,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(_,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Wt,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:At,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||Ge[0].white,blackPalette:bt.blackPalette||Ge[0].black,movedSquares:St,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Je,{whitePalette:bt.whitePalette||Ge[0].white,blackPalette:bt.blackPalette||Ge[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Je,{whitePalette:bt.whitePalette||Ge[0].white,blackPalette:bt.blackPalette||Ge[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&d.jsx(Zt,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:Pt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Ue,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=_n.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=_n.find(e=>e.id===W))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(_,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Wt,{fen:ee.fen(),onMove:Ut,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ge.find(e=>e.id===xe))?void 0:s.white)||Ge[0].white,blackPalette:(null==(l=Ge.find(e=>e.id===pe))?void 0:l.black)||Ge[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Je,{whitePalette:(null==(u=Ge.find(e=>e.id===xe))?void 0:u.white)||Ge[0].white,blackPalette:(null==(x=Ge.find(e=>e.id===pe))?void 0:x.black)||Ge[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Je,{whitePalette:(null==(f=Ge.find(e=>e.id===xe))?void 0:f.white)||Ge[0].white,blackPalette:(null==(v=Ge.find(e=>e.id===pe))?void 0:v.black)||Ge[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Rt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(T,{onClick:Pt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(T,{variant:"outline",onClick:It,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(T,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Ze,{}),d.jsx(qe,{isOpen:H,onClose:()=>P(!1)}),d.jsx(Be,{isOpen:G,onClose:()=>K(!1),trigger:"general"}),d.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?de:we,whitePalette:"bot-game"===L?(null==(b=Ge.find(e=>e.id===xe))?void 0:b.white)||Ge[0].white:(null==bt?void 0:bt.whitePalette)||Ge[0].white,blackPalette:"bot-game"===L?(null==(y=Ge.find(e=>e.id===pe))?void 0:y.black)||Ge[0].black:(null==bt?void 0:bt.blackPalette)||Ge[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=_n.find(e=>e.id===W))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===L?de.length:we.length}})]})};export{Vn as default};
