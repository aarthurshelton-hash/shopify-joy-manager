const n='import { useState, useEffect } from \'react\';\nimport { Link } from \'react-router-dom\';\nimport { supabase } from \'@/integrations/supabase/client\';\nimport { useAuth } from \'@/hooks/useAuth\';\nimport { Header } from \'@/components/shop/Header\';\nimport { Footer } from \'@/components/shop/Footer\';\nimport { Button } from \'@/components/ui/button\';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Skeleton } from \'@/components/ui/skeleton\';\nimport { Alert, AlertDescription, AlertTitle } from \'@/components/ui/alert\';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \'@/components/ui/tabs\';\nimport { \n  ArrowLeft, \n  FileWarning, \n  Scale, \n  Clock, \n  CheckCircle2, \n  XCircle, \n  AlertCircle,\n  ExternalLink,\n  RefreshCw,\n  FileText,\n  Shield\n} from \'lucide-react\';\nimport { format } from \'date-fns\';\n\ninterface DMCAReport {\n  id: string;\n  created_at: string;\n  updated_at: string;\n  status: string;\n  copyrighted_work_description: string;\n  infringing_material_url: string;\n  infringing_material_description: string;\n  reviewed_at: string | null;\n}\n\ninterface CounterNotification {\n  id: string;\n  created_at: string;\n  updated_at: string;\n  status: string;\n  removed_content_description: string;\n  original_takedown_description: string;\n}\n\nconst getStatusBadge = (status: string) => {\n  switch (status) {\n    case \'pending\':\n      return (\n        <Badge variant="outline" className="border-amber-500 text-amber-600 bg-amber-500/10">\n          <Clock className="w-3 h-3 mr-1" />\n          Pending Review\n        </Badge>\n      );\n    case \'reviewed\':\n      return (\n        <Badge variant="outline" className="border-blue-500 text-blue-600 bg-blue-500/10">\n          <AlertCircle className="w-3 h-3 mr-1" />\n          Under Review\n        </Badge>\n      );\n    case \'action_taken\':\n      return (\n        <Badge className="bg-green-500">\n          <CheckCircle2 className="w-3 h-3 mr-1" />\n          Action Taken\n        </Badge>\n      );\n    case \'approved\':\n      return (\n        <Badge className="bg-green-500">\n          <CheckCircle2 className="w-3 h-3 mr-1" />\n          Approved\n        </Badge>\n      );\n    case \'rejected\':\n      return (\n        <Badge variant="destructive">\n          <XCircle className="w-3 h-3 mr-1" />\n          Rejected\n        </Badge>\n      );\n    case \'dismissed\':\n      return (\n        <Badge variant="outline" className="border-muted-foreground text-muted-foreground">\n          <XCircle className="w-3 h-3 mr-1" />\n          Dismissed\n        </Badge>\n      );\n    default:\n      return (\n        <Badge variant="outline">\n          {status}\n        </Badge>\n      );\n  }\n};\n\nconst getStatusExplanation = (status: string, type: \'report\' | \'counter\') => {\n  if (type === \'report\') {\n    switch (status) {\n      case \'pending\':\n        return \'Your report is in the queue and will be reviewed by our legal team within 5-7 business days.\';\n      case \'reviewed\':\n        return \'Our team is actively investigating your claim and may reach out for additional information.\';\n      case \'action_taken\':\n        return \'We have taken action on the reported content based on your DMCA notice.\';\n      case \'rejected\':\n        return \'After review, we determined that the report does not meet DMCA requirements.\';\n      case \'dismissed\':\n        return \'This report was dismissed. Please contact us if you believe this was in error.\';\n      default:\n        return \'Status unknown. Please contact support.\';\n    }\n  } else {\n    switch (status) {\n      case \'pending\':\n        return \'Your counter-notification is being reviewed. This process typically takes 10-14 business days.\';\n      case \'reviewed\':\n        return \'We are verifying the information in your counter-notification.\';\n      case \'approved\':\n        return \'Your counter-notification was accepted. The content may be restored.\';\n      case \'rejected\':\n        return \'Your counter-notification was not accepted. You may pursue legal remedies.\';\n      default:\n        return \'Status unknown. Please contact support.\';\n    }\n  }\n};\n\nconst DMCAStatusTracking = () => {\n  const { user, isLoading: authLoading } = useAuth();\n  const [reports, setReports] = useState<DMCAReport[]>([]);\n  const [counterNotifications, setCounterNotifications] = useState<CounterNotification[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  const fetchData = async () => {\n    if (!user) return;\n\n    try {\n      const [reportsResult, countersResult] = await Promise.all([\n        supabase\n          .from(\'dmca_reports\')\n          .select(\'id, created_at, updated_at, status, copyrighted_work_description, infringing_material_url, infringing_material_description, reviewed_at\')\n          .eq(\'user_id\', user.id)\n          .order(\'created_at\', { ascending: false }),\n        supabase\n          .from(\'dmca_counter_notifications\')\n          .select(\'id, created_at, updated_at, status, removed_content_description, original_takedown_description\')\n          .eq(\'user_id\', user.id)\n          .order(\'created_at\', { ascending: false })\n      ]);\n\n      if (reportsResult.data) {\n        setReports(reportsResult.data);\n      }\n      if (countersResult.data) {\n        setCounterNotifications(countersResult.data);\n      }\n    } catch (error) {\n      console.error(\'Error fetching DMCA data:\', error);\n    } finally {\n      setIsLoading(false);\n      setIsRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!authLoading && user) {\n      fetchData();\n    } else if (!authLoading && !user) {\n      setIsLoading(false);\n    }\n  }, [user, authLoading]);\n\n  const handleRefresh = () => {\n    setIsRefreshing(true);\n    fetchData();\n  };\n\n  if (authLoading || isLoading) {\n    return (\n      <div className="min-h-screen bg-background">\n        <Header />\n        <main className="container mx-auto px-4 py-12 max-w-4xl">\n          <Skeleton className="h-8 w-64 mb-4" />\n          <Skeleton className="h-4 w-96 mb-8" />\n          <Skeleton className="h-48 w-full" />\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className="min-h-screen bg-background">\n        <Header />\n        <main className="container mx-auto px-4 py-12 max-w-2xl">\n          <Alert>\n            <AlertCircle className="h-4 w-4" />\n            <AlertTitle>Sign In Required</AlertTitle>\n            <AlertDescription>\n              You must be signed in to track your DMCA reports. Reports submitted while not signed in \n              cannot be tracked onlineâ€”you will receive updates via email.\n            </AlertDescription>\n          </Alert>\n          <div className="mt-6 flex gap-4">\n            <Link to="/dmca">\n              <Button variant="outline">\n                <ArrowLeft className="w-4 h-4 mr-2" />\n                Back to DMCA\n              </Button>\n            </Link>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  const hasNoSubmissions = reports.length === 0 && counterNotifications.length === 0;\n\n  return (\n    <div className="min-h-screen bg-background">\n      <Header />\n      <main className="container mx-auto px-4 py-8 max-w-4xl">\n        <Button \n          variant="ghost" \n          onClick={() => window.history.back()}\n          className="mb-6"\n        >\n          <ArrowLeft className="w-4 h-4 mr-2" />\n          Back\n        </Button>\n\n        <div className="flex items-start justify-between mb-8">\n          <div className="flex items-center gap-3">\n            <div className="p-2 rounded-lg bg-primary/10">\n              <Shield className="w-6 h-6 text-primary" />\n            </div>\n            <div>\n              <h1 className="text-2xl font-bold">DMCA Status Tracking</h1>\n              <p className="text-muted-foreground">\n                Track the progress of your DMCA reports and counter-notifications\n              </p>\n            </div>\n          </div>\n          <Button \n            variant="outline" \n            size="sm" \n            onClick={handleRefresh}\n            disabled={isRefreshing}\n          >\n            <RefreshCw className={`w-4 h-4 mr-2 ${isRefreshing ? \'animate-spin\' : \'\'}`} />\n            Refresh\n          </Button>\n        </div>\n\n        {hasNoSubmissions ? (\n          <Card>\n            <CardContent className="py-16 text-center">\n              <FileText className="w-12 h-12 mx-auto text-muted-foreground/50 mb-4" />\n              <h2 className="text-lg font-medium mb-2">No Submissions Found</h2>\n              <p className="text-muted-foreground mb-6 max-w-md mx-auto">\n                You haven\'t submitted any DMCA reports or counter-notifications while signed in. \n                Reports submitted anonymously are tracked via email only.\n              </p>\n              <div className="flex gap-4 justify-center">\n                <Link to="/dmca">\n                  <Button>\n                    <FileWarning className="w-4 h-4 mr-2" />\n                    File a Report\n                  </Button>\n                </Link>\n                <Link to="/dmca/counter-notification">\n                  <Button variant="outline">\n                    <Scale className="w-4 h-4 mr-2" />\n                    File Counter-Notice\n                  </Button>\n                </Link>\n              </div>\n            </CardContent>\n          </Card>\n        ) : (\n          <Tabs defaultValue="reports" className="space-y-6">\n            <TabsList className="grid w-full grid-cols-2">\n              <TabsTrigger value="reports" className="gap-2">\n                <FileWarning className="w-4 h-4" />\n                Reports ({reports.length})\n              </TabsTrigger>\n              <TabsTrigger value="counter" className="gap-2">\n                <Scale className="w-4 h-4" />\n                Counter-Notices ({counterNotifications.length})\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value="reports" className="space-y-4">\n              {reports.length === 0 ? (\n                <Card>\n                  <CardContent className="py-12 text-center">\n                    <FileWarning className="w-10 h-10 mx-auto text-muted-foreground/50 mb-3" />\n                    <p className="text-muted-foreground mb-4">No DMCA reports submitted yet</p>\n                    <Link to="/dmca">\n                      <Button>File a Report</Button>\n                    </Link>\n                  </CardContent>\n                </Card>\n              ) : (\n                reports.map(report => (\n                  <Card key={report.id}>\n                    <CardHeader>\n                      <div className="flex items-start justify-between">\n                        <div>\n                          <CardTitle className="text-base">\n                            Report #{report.id.slice(0, 8).toUpperCase()}\n                          </CardTitle>\n                          <CardDescription>\n                            Submitted {format(new Date(report.created_at), \'MMM d, yyyy h:mm a\')}\n                          </CardDescription>\n                        </div>\n                        {getStatusBadge(report.status)}\n                      </div>\n                    </CardHeader>\n                    <CardContent className="space-y-4">\n                      <div className="p-3 bg-muted/50 rounded-lg text-sm">\n                        <p className="font-medium mb-1">Status Explanation</p>\n                        <p className="text-muted-foreground">\n                          {getStatusExplanation(report.status, \'report\')}\n                        </p>\n                      </div>\n\n                      <div className="grid gap-4 text-sm">\n                        <div>\n                          <p className="font-medium text-muted-foreground mb-1">Copyrighted Work</p>\n                          <p className="line-clamp-2">{report.copyrighted_work_description}</p>\n                        </div>\n                        <div>\n                          <p className="font-medium text-muted-foreground mb-1">Infringing URL</p>\n                          <a \n                            href={report.infringing_material_url} \n                            target="_blank" \n                            rel="noopener noreferrer"\n                            className="text-primary hover:underline inline-flex items-center gap-1"\n                          >\n                            {report.infringing_material_url.length > 60 \n                              ? report.infringing_material_url.slice(0, 60) + \'...\' \n                              : report.infringing_material_url}\n                            <ExternalLink className="w-3 h-3" />\n                          </a>\n                        </div>\n                        {report.reviewed_at && (\n                          <div>\n                            <p className="font-medium text-muted-foreground mb-1">Reviewed</p>\n                            <p>{format(new Date(report.reviewed_at), \'MMM d, yyyy h:mm a\')}</p>\n                          </div>\n                        )}\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </TabsContent>\n\n            <TabsContent value="counter" className="space-y-4">\n              {counterNotifications.length === 0 ? (\n                <Card>\n                  <CardContent className="py-12 text-center">\n                    <Scale className="w-10 h-10 mx-auto text-muted-foreground/50 mb-3" />\n                    <p className="text-muted-foreground mb-4">No counter-notifications submitted yet</p>\n                    <Link to="/dmca/counter-notification">\n                      <Button>File Counter-Notice</Button>\n                    </Link>\n                  </CardContent>\n                </Card>\n              ) : (\n                counterNotifications.map(counter => (\n                  <Card key={counter.id}>\n                    <CardHeader>\n                      <div className="flex items-start justify-between">\n                        <div>\n                          <CardTitle className="text-base">\n                            Counter-Notice #{counter.id.slice(0, 8).toUpperCase()}\n                          </CardTitle>\n                          <CardDescription>\n                            Submitted {format(new Date(counter.created_at), \'MMM d, yyyy h:mm a\')}\n                          </CardDescription>\n                        </div>\n                        {getStatusBadge(counter.status)}\n                      </div>\n                    </CardHeader>\n                    <CardContent className="space-y-4">\n                      <div className="p-3 bg-muted/50 rounded-lg text-sm">\n                        <p className="font-medium mb-1">Status Explanation</p>\n                        <p className="text-muted-foreground">\n                          {getStatusExplanation(counter.status, \'counter\')}\n                        </p>\n                      </div>\n\n                      <div className="grid gap-4 text-sm">\n                        <div>\n                          <p className="font-medium text-muted-foreground mb-1">Removed Content Description</p>\n                          <p className="line-clamp-2">{counter.removed_content_description}</p>\n                        </div>\n                        <div>\n                          <p className="font-medium text-muted-foreground mb-1">Original Takedown Claim</p>\n                          <p className="line-clamp-2">{counter.original_takedown_description}</p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </TabsContent>\n          </Tabs>\n        )}\n\n        {/* Help Section */}\n        <Card className="mt-8">\n          <CardHeader>\n            <CardTitle className="text-base flex items-center gap-2">\n              <AlertCircle className="w-4 h-4 text-primary" />\n              Need Help?\n            </CardTitle>\n          </CardHeader>\n          <CardContent className="text-sm text-muted-foreground space-y-2">\n            <p>\n              If you have questions about your report status or need to provide additional information,\n              please contact our legal team at <a href="mailto:legal@enpensent.com" className="text-primary hover:underline">legal@enpensent.com</a>.\n            </p>\n            <p>\n              Include your report ID in all correspondence for faster processing.\n            </p>\n          </CardContent>\n        </Card>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default DMCAStatusTracking;\n';export{n as default};
