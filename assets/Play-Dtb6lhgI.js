import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as B,ai as D,y as L,bF as A,bG as q,b6 as S,ae as H,bH as P,ah as I,bI as T,B as E,bJ as _,bK as K,bL as U,bM as G,bN as W,bO as Y,bP as O,bQ as R,bR as Z,bS as X,bT as J,bU as V,bV as F,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as Be,av as De,aw as Le,c8 as Ae,aM as qe,c9 as Se,H as He,P as Pe,ca as Ie,b3 as Te,bs as Ee,be as _e,cb as Ke,aP as Ue,cc as Ge,d as We,b2 as Ye,a9 as Oe,cd as Re,ce as Ze,cf as Xe,al as Je,au as Ve}from"./index-DqGlL_-P.js";import{L as Fe}from"./LiveColorLegend-CymwdGV5.js";import{T as Qe}from"./trending-down-DGbo0gCG.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CsYDaQnP.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=dt,t=mt();for(;;)try{if(843032===-parseInt(e(260))/1+-parseInt(e(311))/2+parseInt(e(300))/3*(-parseInt(e(298))/4)+parseInt(e(268))/5+parseInt(e(274))/6+parseInt(e(253))/7+-parseInt(e(281))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=dt,t={};t[e(250)]="(((.+)+)+)+$";const n=t;return ut.toString()[e(301)](n.QnUJw)[e(270)]()[e(306)+"r"](ut).search("(((.+)+)+)+$")});function dt(e,t){e-=245;const n=mt();let s=n[e];if(void 0===dt.sjGMQw){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};dt.xeZsGR=r,dt.vovVbK={},dt.sjGMQw=!0}const a=e+n[0],i=dt.vovVbK[a];if(i)s=i;else{const e=function(e){this.OjfoyJ=e,this.kEUTvZ=[1,0,0],this.IarjNv=function(){return"newState"},this.ysjLud="\\w+ *\\(\\) *{\\w+ *",this.wgwcSG="['|\"].+['|\"];? *}"};e.prototype.orrLod=function(){const e=new RegExp(this.ysjLud+this.wgwcSG).test(this.IarjNv.toString())?--this.kEUTvZ[1]:--this.kEUTvZ[0];return this.PiyWZd(e)},e.prototype.PiyWZd=function(e){return Boolean(~e)?this.grGWuC(this.OjfoyJ):e},e.prototype.grGWuC=function(e){for(let t=0,n=this.kEUTvZ.length;t<n;t++)this.kEUTvZ.push(Math.round(Math.random())),n=this.kEUTvZ.length;return e(this.kEUTvZ[0])},new e(dt).orrLod(),s=dt.xeZsGR(s),dt.vovVbK[a]=s}return s}function mt(){const e=["u3rHBgvTyxrLiq","AxnuAhjLzwzVBa","mJGZmJyYsefrv1Py","uMvWzxrPDgLVBG","D0H2EeK","ywrwsK4","DMuGCNvSzs4","zsbMAwz0Es1TBW","DgHYzwvMB2XKxW","y3rVCIGICMv0Dq","ntu0nteYnvvfEwDyuq","CNLItMi","Dg9tDhjPBMC","zu91we0","CMvHC29U","Cgv0AxrPB24U","mJC5mdaWmhf0zK1nuW","yxbWBhK","DhjHy2u","v0THwLK","svPivMS","AM9xu00","D2fYBG","mta0ntC4ngzwsxjerq","BwvZC2fNzq","BgfIBguU","v3vtDuu","AeLOuui","C3rHBgvTyxrL","DMXyr0C","x19WCM90B19F","rhjHDYbIEsbPBG","wu9zs04","Bw92zxmGyxzHAq","Aw5MBW","v1zVt1u","EK9rue0","BMn0Aw9UkcKG","CM4GDgHPCYiPka","AxntDgfSzw1HDa","mJbXvNb1Evi","zfjLCgv0AxrPBW","ndyZntK5D2TAzM5z","C2vHCMnO","wwvTsMe","rhjHDW","DxHeq2W","ig1HDgvYAwfSlG","y29UC3rYDwn0BW","vhDOD0i","BNqGtwf0zxjPyq","C3vMzMLJAwvUDa","qu15uha","mti4nZm3nfv2te9JuW","CMv0DxjUicHMDq","rhjHDYbIEsb0Aa","ChjVDg90ExbL","DgfIBgu","Bg9N","BNrFBwf0zxjPyq","DwLnrwK","E30Uy29UC3rYDq","D09fwgK","C2HVCNrnzxnZyq","AxneCMf3","x3j1Bgu","Dw5RBM93BG","vgHYzwvMB2XKia","y29UC29Szq","AwvUDe1HDgvYAq","uw5vsNC","CMvLzM9SzcbYzq","BxvHBwu","nZy5ntqWoe1Zr0DUzW","CMvWzxrPDgLVBG","C3bSAxq","yMLUza","zMvU"];return(mt=function(){return e})()}ut();const xt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[dt(275)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function ht(e){const t=dt,n={YemJa:t(252),vlXGG:t(258)+" No legal "+t(291)+t(283),IZHVk:t(266)+t(254),seoml:t(313)+t(251)+t(273),uiMEi:"Insufficie"+t(308)+"l",adVJN:function(e,t,n){return e(t,n)},wOEXi:function(e,t){return e>=t},eOuXM:t(285),PCvib:t(313)+t(265)+t(264),AMyPp:"50-Move Rule",zOQPM:t(246),joWSM:"Game drawn!",WKaZY:t(303)};if(e[t(297)+"e"]()){if(n[t(302)]!==t(252)){const e=_0x54dd63?function(){if(_0x254c21){const e=_0xbfb2c[t(275)](_0x179de3,arguments);return _0x3cb968=null,e}}:function(){};return _0x4a81fb=!1,e}{const e={};return e.reason=t(286),e.message=n[t(287)],e.shortMessage=t(258),e}}if(e[t(259)+t(299)+"n"]()){const e={};return e[t(272)]=n[t(278)],e[t(282)]=n.seoml,e.shortMessage=t(247)+t(261),e}if(e["isInsuffic"+t(249)+"al"]()){const e={};return e[t(272)]="insufficie"+t(317)+"l",e.message=t(289)+t(309)+t(305),e[t(321)+"ge"]=n[t(318)],e}const s=e[t(257)](),r=n[t(263)](parseInt,s[t(255)](" ")[4],10);if(n[t(320)](r,100)){if(n[t(271)]==n[t(271)]){const e={};return e[t(272)]="fifty_move"+t(245),e[t(282)]=n.PCvib,e.shortMessage=n[t(310)],e}return _0xdac3cb[t(322)]()||_0x170f60[t(297)+"e"]()}const a={};return a[t(272)]=n[t(294)],a[t(282)]=n[t(279)],a.shortMessage=n[t(277)],a}function pt(e){return{uxDCl:function(e,t){return e(t)}}[dt(304)](ht,e).message}xt(void 0,function(){const e=dt,t={wHvxI:function(e,t){return e+t},YOYKN:e(319)+e(267)+e(296)+" )",tBGjR:function(e){return e()},rybNb:e(316),TwhwB:e(280),WuSuE:"error",WVoOU:function(e,t){return e<t}};let n;try{const s=Function(t[e(262)](t.wHvxI(e(312)+e(295),t[e(290)]),");"));n=t.tBGjR(s)}catch(a){n=window}const s=n.console=n[e(248)]||{},r=[t[e(269)],t[e(307)],e(292),t[e(284)],"exception",e(315),e(276)];for(let i=0;t[e(293)](i,r.length);i++){const t=xt[e(306)+"r"][e(314)][e(256)](xt),n=r[i],a=s[n]||t;t[e(288)]=xt[e(256)](xt),t[e(270)]=a[e(270)].bind(a),s[n]=t}})(),function(){const e=gt,t=yt();for(;;)try{if(458054===parseInt(e(221))/1*(-parseInt(e(304))/2)+parseInt(e(277))/3+parseInt(e(293))/4*(-parseInt(e(291))/5)+parseInt(e(259))/6*(parseInt(e(263))/7)+-parseInt(e(308))/8+parseInt(e(234))/9+parseInt(e(237))/10*(parseInt(e(270))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=gt;return ft[e(249)]().search(e(323)+"+$")[e(249)]()[e(230)+"r"](ft)[e(210)](e(323)+"+$")});function gt(e,t){e-=196;const n=yt();let s=n[e];if(void 0===gt.OoUsFd){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.gnBJYP=r,gt.cSDdqm={},gt.OoUsFd=!0}const a=e+n[0],i=gt.cSDdqm[a];if(i)s=i;else{const e=function(e){this.PlKtMC=e,this.yQoXAc=[1,0,0],this.CgYLhB=function(){return"newState"},this.dBvOyn="\\w+ *\\(\\) *{\\w+ *",this.NtAkOv="['|\"].+['|\"];? *}"};e.prototype.AbCUSr=function(){const e=new RegExp(this.dBvOyn+this.NtAkOv).test(this.CgYLhB.toString())?--this.yQoXAc[1]:--this.yQoXAc[0];return this.lZObsm(e)},e.prototype.lZObsm=function(e){return Boolean(~e)?this.yaIWiR(this.PlKtMC):e},e.prototype.yaIWiR=function(e){for(let t=0,n=this.yQoXAc.length;t<n;t++)this.yQoXAc.push(Math.round(Math.random())),n=this.yQoXAc.length;return e(this.yQoXAc[0])},new e(gt).AbCUSr(),s=gt.gnBJYP(s),gt.cSDdqm[a]=s}return s}ft();const vt=function(){const e=gt,t={};t[e(286)]=function(e,t){return e===t},t[e(215)]=e(281);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=gt;if(t){if(!n.gsIdx(s(250),n[s(215)])){const n=t[s(312)](e,arguments);return t=null,n}_0x360724=_0x100bce}}:function(){};return s=!1,r}}();vt(void 0,function(){const e=gt,t={JafcB:function(e){return e()},NRLpe:function(e,t){return e+t},nTajr:"return (fu"+e(236),VfzGt:e(297),skHWF:e(319),obJAC:e(260),BNoCi:e(283),BVQIO:e(264),DIUnU:function(e,t){return e<t},EjbVn:function(e,t){return e!==t},eQfpV:e(296)};let n;try{const s=Function(t[e(228)](t.nTajr,e(238)+e(241)+'rn this")( )')+");");n=t[e(262)](s)}catch(a){n=window}const s=n[e(220)]=n[e(220)]||{},r=[e(284),"warn",t[e(302)],t[e(278)],t.obJAC,t[e(217)],t[e(273)]];for(let i=0;t[e(268)](i,r[e(247)]);i++)if(t[e(254)]("lImJK",t.eQfpV)){const t=vt[e(230)+"r"].prototype[e(290)](vt),n=r[i],a=s[n]||t;t[e(197)]=vt[e(290)](vt),t[e(249)]=a[e(249)][e(290)](a),s[n]=t}else{const n=_0x52a2e1(e(242)+e(236)+(e(238)+e(241)+e(211)+" ));"));_0x2e44a5=t[e(262)](n)}})();const bt=(e=!0,n=.5)=>{const s=gt,r={MZyUT:function(e,t){return e*t},plbRk:s(269),jIEMJ:s(306),qbFKM:s(256)+"API not su"+s(207),AXouj:function(e,t){return e+t},IwAjI:function(e,t){return e+t},GBImH:function(e,t){return e-t},kvYyF:function(e,t){return e||t},kdGnL:function(e,t){return e<t},pOXCc:s(298),EgVxr:s(266),HEHaT:s(235),PhaUU:function(e,t,n,s,r,a){return e(t,n,s,r,a)},TqdnB:function(e,t,n){return e(t,n)},Grvst:function(e,t,n,s,r,a){return e(t,n,s,r,a)},dgWcw:s(212),rioNd:function(e,t,n,s,r,a){return e(t,n,s,r,a)},PLxyT:s(232),WnlPx:function(e,t,n){return e(t,n)},nEhfO:s(311),EBmwO:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ObSix:function(e,t,n){return e(t,n)},TfnGE:s(316),casCk:function(e,t,n){return e(t,n)},bepbZ:s(223),Ytgvn:s(199),wUaxD:function(e,t,n){return e(t,n)},UvIaf:function(e,t,n){return e(t,n)},VrJOG:function(e,t,n){return e(t,n)},olqRk:function(e,t,n,s,r,a){return e(t,n,s,r,a)}},a={};a[s(265)]=null,a[s(274)]=null;const i=t.useRef(a),o=t.useCallback(()=>{const e=s,t={ncJst:function(e,t){return e-t},EoQdM:function(e,t){return r[gt(204)](e,t)}};if(!i.current[e(265)])try{if(r[e(279)]!==e(203)){const t=new(window[e(276)+"xt"]||window[e(233)+e(307)]),s=t[e(282)]();s[e(275)](t[e(324)+"n"]),s[e(252)][e(314)]=n;const r={};r.context=t,r.gainNode=s,i[e(310)]=r}else _0x4ea6ef[_0xdf559f]=t[e(231)](t[e(214)](_0x131e65.random(),2),1)}catch(a){if("ehcRK"!==r[e(251)]&&_0x2c255e){const e=_0x47c6c5.apply(_0x5ca472,arguments);return _0x156f43=null,e}}},[n]);r[s(248)](t.useEffect,()=>{const e=s;i[e(310)][e(274)]&&(i[e(310)].gainNode[e(252)][e(314)]=n)},[n]);const c=r[s(253)](t.useCallback,(t,n,a=s(235),c=.01,l=.1,u)=>{const d=s;if(!e)return;o();const{context:m,gainNode:x}=i[d(310)];if(!m||!x)return;const h=m["createOsci"+d(239)](),p=m[d(282)]();h[d(219)]=a,h[d(258)][d(289)+d(255)](t,m.currentTime),u&&h[d(258)][d(244)+d(294)+d(246)](u,r[d(280)](m[d(325)+"e"],n)),p[d(252)][d(289)+d(255)](0,m[d(325)+"e"]),p.gain["linearRampToValueAtT"+d(315)](1,r.IwAjI(m[d(325)+"e"],c)),p[d(252)][d(244)+d(294)+d(246)](.01,r[d(201)](m[d(325)+"e"]+n,l)),p.gain[d(313)+d(208)+d(315)](0,m.currentTime+n),h[d(275)](p),p[d(275)](x),h[d(285)](m[d(325)+"e"]),h[d(288)](r.AXouj(m[d(325)+"e"],n))},[e,o]),l=r[s(271)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(310)];if(r.kvYyF(!c,!l))return;const u=r[a(204)](c.sampleRate,t),d=c.createBuffer(1,u,c.sampleRate),m=d[a(205)+a(309)](0);for(let e=0;r.kdGnL(e,u);e++)m[e]=2*Math[a(222)]()-1;const x=c[a(303)+"erSource"]();x[a(305)]=d;const h=c[a(196)+a(216)]();h[a(219)]=r[a(322)],h[a(258)][a(314)]=n;const p=c[a(282)]();p[a(252)][a(289)+"Time"](.3,c[a(325)+"e"]),p[a(252)][a(244)+"lRampToVal"+a(246)](.01,r[a(209)](c.currentTime,t)),x[a(275)](h),h[a(275)](p),p[a(275)](l),x[a(285)](c.currentTime),x[a(288)](c[a(325)+"e"]+t)},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(287)]:c(800,.08,r[n(224)],.005,.05),r[n(206)](c,400,.06,n(199),.005,.04);break;case n(243):r[n(226)](l,.12,2e3),r[n(218)](c,300,.1,r[n(318)],.005,.08),r[n(227)](c,150,.15,n(235),.01,.1);break;case r[n(229)]:c(600,.06,r.HEHaT,.005,.04),r.WnlPx(setTimeout,()=>c(700,.06,n(235),.005,.04),80);break;case r[n(198)]:r[n(261)](c,880,.15,n(199),.01,.1),r.ObSix(setTimeout,()=>c(1100,.12,n(199),.01,.08),120);break;case r[n(245)]:c(880,.2,n(235),.01,.15),setTimeout(()=>c(660,.2,"sine",.01,.15),150),r[n(271)](setTimeout,()=>c(440,.3,n(235),.01,.2),300),r[n(267)](setTimeout,()=>c(330,.4,n(235),.01,.3),500);break;case n(213):c(523,.12,"sine",.01,.08),setTimeout(()=>c(659,.12,n(235),.01,.08),100),r[n(200)](setTimeout,()=>c(784,.2,n(235),.01,.15),200);break;case r[n(326)]:c(440,.15,r.Ytgvn,.01,.1),r[n(300)](setTimeout,()=>c(349,.25,n(199),.01,.2),150);break;case n(321):c(523,.1,"sine",.01,.08),r.UvIaf(setTimeout,()=>c(659,.1,n(235),.01,.08),100),r[n(300)](setTimeout,()=>c(784,.1,n(235),.01,.08),200),r[n(253)](setTimeout,()=>c(1047,.3,n(235),.01,.25),300);break;case n(295):r[n(225)](c,392,.2,n(235),.02,.15),setTimeout(()=>c(349,.2,n(235),.02,.15),200),setTimeout(()=>c(330,.3,"sine",.02,.25),400),setTimeout(()=>c(262,.4,"sine",.02,.35),650);break;case n(202):c(440,.15,n(235),.01,.1),r[n(300)](setTimeout,()=>c(440,.15,n(235),.01,.1),180),setTimeout(()=>c(523,.2,"sine",.01,.15),360);break;case n(292):c(200,.1,"square",.005,.08),c(150,.08,n(240),.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=gt;i[e(310)][e(265)]&&i.current.context[e(301)]()},[]);const d={};return d[s(299)]=u,d[s(257)]=o,d};function yt(){const e=["nwzmCvjVuW","AwXSzwDHBa","mJK5odm2ngDItffNrq","BfjHBxbuB1zHBa","zgvMzwf0","vgHKBLu","Aw5MBW","Bg93CgfZCW","CgXHEvnVDw5K","D1vHEeq","y2XVC2u","vMz6r3q","y3jLyxrLqNvMzG","odG2ndeWEvzire1k","yNvMzMvY","zwHJuKS","B0nVBNrLEhq","oteWmtzSBNvOuvy","rgf0yq","y3vYCMvUDa","y2HLy2S","yxbWBhK","BgLUzwfYuMfTCa","DMfSDwu","Aw1L","y2HLy2TTyxrL","Cwjgs00","zgDxy3C","zxjYB3i","uwD3AgC","DMLJDg9YEq","Ce9yq2m","kcGOlISPkYKRkq","zgvZDgLUyxrPBW","y3vYCMvUDfrPBq","yMvWyLO","y3jLyxrLqMLXDq","x19WCM90B19F","BKvOzK8","DhjPyw5NBgu","y2fZq2S","r0jjBuG","zhjHDW","EgvtrMq","tvP5vvq","z2v0q2HHBM5LBa","ugHHvvu","ChbVCNrLza","vg9wywX1zuf0va","sxDbAKK","C2vHCMnO","CM4GDgHPCYiPka","C3f1yxjL","z2fTzvn0yxj0","rw9rze0","wffJA0q","ywrgAwX0zxi","qK5Vq2K","r3j2C3q","DhLWzq","y29UC29Szq","mwfbD01AAG","CMfUzg9T","z2fTzuvUza","seviyvq","B2XXuMS","vhfKBKi","CMLVtMq","tLjmCgu","ueX4Evq","y29UC3rYDwn0BW","BMnkC3q","y2fZDgXL","D2vIA2L0qxvKAq","ndm4oda0mhzzBwHuCG","C2LUzq","BMn0Aw9UkcKG","mZa3otyWDeHftwjO","E30Uy29UC3rYDq","BgXHDg9Y","C2f3Dg9VDgG","y3rVCIGICMv0Dq","CMv0DxjUicHMDq","y2fWDhvYzq","zxHWB25LBNrPyq","vgzUr0u","DwvbDfrPBwu","BgvUz3rO","vxzjywy","Dg9tDhjPBMC","twX2DNO","AKLftuO","z2fPBG","vNjkt0C","rwPIvM4","vgLTzq","v2vIief1zgLVia","Aw5PDef1zgLV","zNjLCxvLBMn5","mJe3otaWmNHYsgHZqW","zxHJzxb0Aw9U","rujTD08","sMfMy0i","n1jws01OCa","DhjHy2u","y29UDgv4Da","Bw92zq","v25SuhG","reLvBLu","tLzfrKu","mJa5B1jbv2HO","t2jtAxG","D2fYBG","qLzrsu8","z2fPBK5Vzgu","y29UBMvJDa","qxvKAw9dB250zq","nJC5mti4yMXJEKLp","C2Tiv0y","CgXIuMS","qvHVDwO","EMjYtwW","y3jLyxrLr2fPBG","DgfIBgu","Bg9N","C3rHCNq","z3njzhG","rwDwEhi","C3rVCa","C2v0vMfSDwvbDa","yMLUza"];return(yt=function(){return e})()}const wt=Nt;!function(){const e=Nt,t=kt();for(;;)try{if(765176===-parseInt(e(469))/1+parseInt(e(458))/2*(-parseInt(e(471))/3)+-parseInt(e(487))/4*(-parseInt(e(489))/5)+-parseInt(e(498))/6+parseInt(e(484))/7+parseInt(e(483))/8*(parseInt(e(460))/9)+-parseInt(e(461))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){const e=Nt,t={};t[e(466)]=e(477),t[e(480)]="(((.+)+)+)+$",t[e(494)]=function(e,t){return e===t},t[e(472)]=e(467);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(496)]=n[a(480)];const o=i;if(n[a(494)](n[a(472)],a(463))){const e=_0x1fa76d[a(482)](_0x1c3cdf,arguments);return _0xafce9e=null,e}{const e=s?function(){const e=a;if(n.Rxyli!==e(477))return _0x296e12[e(464)]()[e(459)](e(473)+"+$")[e(464)]()[e(486)+"r"](_0x231a51)[e(459)](o[e(496)]);if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return s=!1,e}}}()(void 0,function(){const e=Nt,t={};t[e(474)]="(((.+)+)+)+$";const n=t;return jt.toString().search(n[e(474)])[e(464)]()[e(486)+"r"](jt).search(e(473)+"+$")});jt();const Ct=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Nt(e,t){e-=457;const n=kt();let s=n[e];if(void 0===Nt.VVMULs){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.lWUCKF=r,Nt.AKMRYo={},Nt.VVMULs=!0}const a=e+n[0],i=Nt.AKMRYo[a];if(i)s=i;else{const e=function(e){this.SvFUPB=e,this.YiurUV=[1,0,0],this.MrBJZo=function(){return"newState"},this.zINXeI="\\w+ *\\(\\) *{\\w+ *",this.sppSYU="['|\"].+['|\"];? *}"};e.prototype.HfdMuw=function(){const e=new RegExp(this.zINXeI+this.sppSYU).test(this.MrBJZo.toString())?--this.YiurUV[1]:--this.YiurUV[0];return this.fNlcXN(e)},e.prototype.fNlcXN=function(e){return Boolean(~e)?this.mGbMlA(this.SvFUPB):e},e.prototype.mGbMlA=function(e){for(let t=0,n=this.YiurUV.length;t<n;t++)this.YiurUV.push(Math.round(Math.random())),n=this.YiurUV.length;return e(this.YiurUV[0])},new e(Nt).HfdMuw(),s=Nt.lWUCKF(s),Nt.AKMRYo[a]=s}return s}function kt(){const e=["DgXLzhu","qLzluM0","nM1vt1vUAG","C2vHCMnO","ndy3nZKYmwHOzerwDa","mJi5nZq4mgLMAM5dEG","DhjHy2u","qwzwwwG","Dg9tDhjPBMC","BMfTzq","uNH5BgK","suj0rhi","rMvSC2W","mtaWnJuZEKvAuujS","y3rVCIGICMv0Dq","mJu2nZGYBLDXwefL","s2Tvuu0","kcGOlISPkYKRkq","DenoqNm","yMLUza","Bunfu3e","BKHfCKq","DgfIBgu","ChjVDg90ExbL","BNL1wKy","Aw5MBW","yxbWBhK","mtzsC2rWq0S","nZuXntG4nLHrzvH4DW","zw5HyMXLza","y29UC3rYDwn0BW","mJu2nJq4yxflCfr4","D2fYBG","mtbnvxbiAMG","BMn0Aw9UkcKG","y29UC29Szq","CMv0DxjUicHMDq","zxjYB3i","zuXlrfG","x19WCM90B19F","ANPiz0u","DgPiv0u","ntmZntiWnMn3uwPzCW"];return(kt=function(){return e})()}Ct(void 0,function(){const e=Nt,t={kyptW:function(e,t){return e(t)},tledu:"log",BVKRm:e(493),Felsl:"exception",HNYMp:e(462),tjHWE:e(476)},n=function(){const n=e;let s;try{s=t.kyptW(Function,n(492)+n(490)+"{}.constru"+n(470)+'rn this")( ));')()}catch(r){s=window}return s}(),s=n.console=n[e(491)]||{},r=[t[e(499)],e(488),e(481),t[e(457)],t[e(468)],e(478),t.HNYMp];for(let a=0;a<r.length;a++)if(t[e(497)]===e(476)){const t=Ct[e(486)+"r"][e(479)][e(475)](Ct),n=r[a],i=s[n]||t;t[e(495)]=Ct[e(475)](Ct),t[e(464)]=i.toString[e(475)](i),s[n]=t}else if(_0x534521){const e=_0xa031d9.apply(_0x287a0f,arguments);return _0x6d605a=null,e}})();const Mt={};Mt[wt(465)]="chess-sound-settings";const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(485)]}))}),Mt)),Bt=Lt;!function(){const e=Lt,t=At();for(;;)try{if(864929===-parseInt(e(370))/1*(-parseInt(e(306))/2)+-parseInt(e(284))/3+-parseInt(e(233))/4+-parseInt(e(268))/5*(parseInt(e(260))/6)+parseInt(e(305))/7*(parseInt(e(221))/8)+-parseInt(e(345))/9+parseInt(e(462))/10*(parseInt(e(459))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Lt(445)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Lt,t={};t[e(465)]=e(371)+"+$";const n=t;return Dt[e(401)]().search(e(371)+"+$")[e(401)]()[e(280)+"r"](Dt)[e(230)](n.ucbdL)});function Lt(e,t){e-=189;const n=At();let s=n[e];if(void 0===Lt.JRPMeV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Lt.NmHBJT=r,Lt.ESLbSN={},Lt.JRPMeV=!0}const a=e+n[0],i=Lt.ESLbSN[a];if(i)s=i;else{const e=function(e){this.yVkxMn=e,this.xQNLmF=[1,0,0],this.MLAWyx=function(){return"newState"},this.LxpYtS="\\w+ *\\(\\) *{\\w+ *",this.ZEhJBZ="['|\"].+['|\"];? *}"};e.prototype.hfTPrI=function(){const e=new RegExp(this.LxpYtS+this.ZEhJBZ).test(this.MLAWyx.toString())?--this.xQNLmF[1]:--this.xQNLmF[0];return this.POADGp(e)},e.prototype.POADGp=function(e){return Boolean(~e)?this.VbUPLn(this.yVkxMn):e},e.prototype.VbUPLn=function(e){for(let t=0,n=this.xQNLmF.length;t<n;t++)this.xQNLmF.push(Math.round(Math.random())),n=this.xQNLmF.length;return e(this.xQNLmF[0])},new e(Lt).hfTPrI(),s=Lt.NmHBJT(s),Lt.ESLbSN[a]=s}return s}function At(){const e=["y2HHBMDL","ChjVBw90Aw9U","y2HLC3nFz2fTzq","Dg9ju09tDhjPBG","D2HPDgvFDgLTzq","AxndAgvJA21HDa","vLjRt2m","CMfYzfe","yMXPDhPFnq","AwXSzwDHBa","uejcA0S","zffJCu0","sNLtzKi","ww91ihjLC2LNBG","Evbdvhu","EfPIEvG","DgfIBgu","q3nqBhi","uMfjB2e","wMH2zeK","y29KztOG","C2vSzwn0","D2HPDgu","yMLUza","thHlA08","z2rVuM0","y29Kzq","CNbJ","DuXduKK","BMv3uMf0Aw5N","Bw92zv91y2K","swXRDNG","D2HPDgvqywXLDa","Bg9HzeDHBwu","wujVqKu","BgvUz3rO","yxbWBhK","CMvTB3zLq2HHBG","Bw92zwrtCxvHCG","AxndAgvJAW","BwfW","AgfSBgvUz2uGyW","y2fZDgXL","Bu5tC24","zhjHDW","C3vIC3rYAw5N","ywjHBMrVBMvK","s0X6yvO","uMf0Aw5NoIa","AgfUz2vZ","mZa2ntu0odjRsMLwrvC","y2HHBgXLBMDLqW","yvHnC28","mtbtvezICgO","wwjmC3a","BMv3","DwnIzeW","BMvUDc4UlG","E30Uy29UC3rYDq","zxjYB3i","u0vXqMW","yMXHy2TFCgXHEq","CLbrCeW","u2vWwK8","zgvMzwf0","ChjVzMLSzxm","qw9fBKO","y2HHBgXLBMDLxW","AxnFChvIBgLJ","AuLKsgi","CKLK","zwXVx3jHDgLUzW","wLDUquO","r2fTzsbUB3qGzG","yMXHy2TFD2LUCW","ywn0AxzL","yxnJzw5KAw5N","v0XUwhK","y2fWDhvYzwq","yLrrt1O","DhjHy2u","qxvuqvu","tfnmu0m","zMvU","tezxvhG","wNbNzMW","sM9et2S","y2HLC3nFBw92zq","DhvYBG","Axv2wha","AM9PBIbNyw1L","C2fU","qujuwvK","zM9YrwfJAa","thjuEwS","Axf5uvO","BvDmu0u","C2LVBIK","vfnPCLG","verqC1m","BxLdB2XVCG","yMXHy2TqBgf5zq","BIb0AgLZihzLCG","su5trvju","DfbPvhe","vwHdtwm","Bg9N","yMXHy2S","yK5VCvu","y2HLy2TTyxrL","DxnLCL9PzcWGzq","z2fTzvn0yxrL","tY1p","CgHLEMS","wgvbA2C","CgDU","BgTHB3u","mJrpwen5Avq","tw13zMC","y3jLyxrLzef0","A1zXCNq","C3vIC2nYAwjL","Bw92zv9UDw1Izq","AxvlEfu","x19WCM90B19F","y2fWDhvYzq","C2vHCMnO","yMXHy2TFDgLTzq","zxHJzxb0Aw9U","mZm0nZyWogrisKzLBa","Bg9HzcbNyw1L","tvrWr1m","y3jLyxrLr2fTzq","q2fUBM90igPVAq","ww91ihDVBIe","D2HPDgvuAw1LuG","rMfPBgvKihrVia","DxbKyxrL","A0n6tLC","Aw5Zzxj0","z1vXtgm","AxnnEvr1CM4","z2fTzq","uLnZveW","uKDpwvi","DxbKyxrLievmtW","svLMAge","ru5ctLm","Bxvotvq","Aw4GysbNyw1L","AM9PBIbIEsbJBW","BIbPBIb0BYbQBW","z2fTzv9Pza","DgLTzv9JB250CG","AgHWD3e","z3vArwm","ntqZnZqZnffKCfzgvG","EeHMBg0","DxnLCL9Pza","EfrIAMS","y3rVCIGICMv0Dq","tvjkvKu","CMv0DxjUicHMDq","B3vUza","nvbWBKrbAa","Bwf5yMvtAw5NBa","ihbSyxLPBMCGyq","D2LUBMvYx2LK","y2HLy2S","z2fTzvn0yxj0","z0LeEhO","C3f1yxjL","EeHOzvK","yxjoCxu","wujpwe8","s0Dmsge","y29UC3rYDwn0BW","vLvNDKe","CMvZDwX0","AxnmB2fKAw5N","mZK0nda4ogXAz2vqta","y3jLyxrLzf9HDa","tY1plu8","B3LrEva","Awq9zxeU","Dg9vChbLCKnHCW","y2HHBM5LBa","DM5rCKO","D2HPDgvFD2LUCW","uevhsfK","BgvnB3zLCW","Bw92zunVDw50","x3jLBwfPBMLUzW","AgDNENC","rwvODKe","AgH5Aeq","ugXLyxnLihnPzW","qLjiy0C","zYbMB3iGB3bWBW","t2TuEK8","rhjHDYbVzMzLCG","mtq4nZy2oezztufWuW","mtyWmdiZmMrUrvL1vG","y3vYCMvUDezLBG","BMTsq2y","sen0rfq","yMXHy2TuAw1LuG","B2rL","ywLYse4","qvjWu0i","C3vJy2vZCW","u2XXz00","vvbeqvrf","D1Hrv1K","zNjVBq","Aw5MBW","s1v5v0S","C3rHCNrLzef0","y0vAAwC","q1L0Bfm","Ew9lDfu","A1v4zgm","swzfugu","Bw92zq","DfnTr1K","zgz6vvO","zxjFAwq","DMLJDg9YEq","rKfHEgy","yMXHy2TFCgfSzq","AM9PBKDHBwu","CMfWAwrFmtu","Bg9FCMf0Aw5N","D2HPDgvFCgXHEq","zw1HAw5PBMC","lwfJy2vWDhmGAq","Bw92zv9Zyw4","y0nqy2i","rw9Tu04","D2HPDgvqBgf5zq","Aw5JBhvKzxm","mJCXnJa1nKzWAMznwa","D2fPDgLUzW","yNvSBgv0xZe","BIbPBIb0BYbJCG","DgLTzunVBNrYBW","whzZAei","C3rHCNrLzf9HDa","D1vOsLu","tK5UwvK","yLjLqKm","ywrK","AwTQyxm","ELnVAfi","Dw50Aw1Lza","ChvIBgLJ","B2zMzxjeCMf3","yMXHy2TqywXLDa","tfbbz0G","BxfTzvG","Awv3teG","CYbcBgfJAY4","zseGww91igfYzq","uwPUwfq","v2HPDguGD2LUCW","EuvAuvi","muXztvjPuq","kcGOlISPkYKRkq","z2fTzv9Pzd1LCq","Bw92zv9JB3vUDa","CMvZAwDUr2fTzq","ChjVDg90ExbL","tvj1Cgq","BwfRzu1VDMu","Axnhyw1Lt3zLCG","zMLUza","y3vYCMvUDf9Mzq","we9qCuO","DuH1zKW","BMn0Aw9UkcKG","t0vZv3e","DgjYChO","BMvS","y0PAEMq","y29TCgXLDgvK","vhDhB0G","yLLqrgu","igv4CgLYzwqGyW","AgfSBgvUz2vFyW","DMvYyM9Zzq","y3jLyxrLigDHBq","yu9iy0W","zhKGC3rHCNrLza","D2HPDgvFCgfSzq","C3rHDhvZ","svHRExa","qMXHy2SGD2LUCW","Dg9tDhjPBMC","CgXHEwvYx2LK","Cg9ZDgDYzxnFyW","C3fmuxG","C0zcywy","tLLfzhG","uuvrCgm","BwvZC2fNzq"];return(At=function(){return e})()}Dt();const qt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();qt(void 0,function(){const e=Lt,t={aXMso:function(e,t){return e+t},WLnXy:e(266)+e(383),VUgvA:e(467)+e(264)+'rn this")( )',MRupd:function(e){return e()},cEZig:e(210),guZEc:e(319),kCzNW:e(232),LPAgH:e(425),zSohR:function(e,t){return e<t}},n=t[e(376)](function(){const n=e;let s;try{s=Function(t[n(461)](t[n(486)]+t[n(281)],");"))()}catch(r){s=window}return s}),s=n.console=n.console||{},r=[t[e(322)],"warn",t[e(259)],e(468),t[e(242)],t[e(362)],e(489)];for(let a=0;t[e(357)](a,r.length);a++){const t=qt[e(280)+"r"][e(375)][e(432)](qt),n=r[a],i=s[n]||t;t.__proto__=qt[e(432)](qt),t.toString=i[e(401)][e(432)](i),s[n]=t}})();const St={};St[Bt(347)]=60,St[Bt(417)]=300,St[Bt(335)]=900,St[Bt(358)]=0;const Ht=St,Pt=Kt;!function(){const e=Kt,t=Gt();for(;;)try{if(892013===-parseInt(e(444))/1*(parseInt(e(442))/2)+parseInt(e(430))/3*(-parseInt(e(426))/4)+parseInt(e(472))/5*(-parseInt(e(462))/6)+-parseInt(e(432))/7*(parseInt(e(484))/8)+parseInt(e(475))/9+parseInt(e(446))/10+parseInt(e(457))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){const e=Kt,t={};t[e(468)]=function(e,t){return e===t},t[e(451)]=e(471);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(468)](n.KdzTj,a(471))){const e=s?function(){if(r){const e=r[a(431)](t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0x31383f?function(){if(_0x27beff){const e=_0x2073e5[a(431)](_0xe0fc8,arguments);return _0xeb086=null,e}}:function(){};return _0x1f8445=!1,e}}}()(void 0,function(){const e=Kt;return It[e(437)]()[e(438)](e(445)+"+$")[e(437)]()[e(482)+"r"](It)[e(438)](e(445)+"+$")});It();const Tt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Kt(431)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Tt(void 0,function(){const e=Kt,t={cLGmV:e(465),JjXvZ:function(e,t){return e(t)},iffxd:function(e,t){return e+t},Xwbjz:function(e,t){return e+t},olUZo:e(434)+"nction() ",TkYBF:function(e){return e()},TgNdK:e(450),fakME:e(480),ROgQm:e(455),IUvkr:function(e,t){return e<t}};let n;try{if(t[e(473)]!=t[e(473)]){if(_0x4f6b92){const t=_0x10173d[e(431)](_0x1534ba,arguments);return _0x45d0b8=null,t}}else{const s=t.JjXvZ(Function,t[e(467)](t[e(469)](t[e(463)],"{}.constru"+e(448)+e(443)+" )"),");"));n=t[e(456)](s)}}catch(a){n=window}const s=n[e(425)]=n[e(425)]||{},r=[t[e(481)],t[e(423)],t[e(453)],"error",e(483),e(440),e(458)];for(let i=0;t[e(427)](i,r[e(470)]);i++){const t=Tt[e(482)+"r"][e(478)][e(479)](Tt),n=r[i],a=s[n]||t;t[e(429)]=Tt[e(479)](Tt),t[e(437)]=a[e(437)][e(479)](a),s[n]=t}})();const Et={};Et[Pt(454)]=10,Et[Pt(474)]=25,Et[Pt(476)]=50,Et[Pt(466)]=[10,50,20],Et[Pt(460)]=[50,30,50,30,50],Et.selection=5;const _t=Et;function Kt(e,t){e-=423;const n=Gt();let s=n[e];if(void 0===Kt.gQsHex){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Kt.FJQoIi=r,Kt.WaKaFA={},Kt.gQsHex=!0}const a=e+n[0],i=Kt.WaKaFA[a];if(i)s=i;else{const e=function(e){this.OnSbxX=e,this.PxAMEZ=[1,0,0],this.HrBxRj=function(){return"newState"},this.pmDCiq="\\w+ *\\(\\) *{\\w+ *",this.tlozBH="['|\"].+['|\"];? *}"};e.prototype.DmBrpa=function(){const e=new RegExp(this.pmDCiq+this.tlozBH).test(this.HrBxRj.toString())?--this.PxAMEZ[1]:--this.PxAMEZ[0];return this.NjkRhd(e)},e.prototype.NjkRhd=function(e){return Boolean(~e)?this.WpeTYR(this.OnSbxX):e},e.prototype.WpeTYR=function(e){for(let t=0,n=this.PxAMEZ.length;t<n;t++)this.PxAMEZ.push(Math.round(Math.random())),n=this.PxAMEZ.length;return e(this.PxAMEZ[0])},new e(Kt).DmBrpa(),s=Kt.FJQoIi(s),Kt.WaKaFA[a]=s}return s}const Ut=()=>{const e=Pt,n={YSUvj:"Haptic fee"+e(441)+e(459),dMSRc:function(e,t){return e!==t},cASwx:e(477),eIPkZ:e(436),ewepW:function(e,t,n){return e(t,n)},TUhTq:function(e,t,n){return e(t,n)},FpOQl:function(e,t,n){return e(t,n)},MAFkc:function(e,t,n){return e(t,n)}},s=n.dMSRc(typeof navigator,n[e(428)])&&n[e(449)]in navigator,r=n[e(439)](t.useCallback,(e="light")=>{if(!s)return!1;try{const t=_t[e];return navigator.vibrate(t)}catch(t){return!1}},[s]),a={select:n[e(435)](t.useCallback,()=>r(e(433)),[r]),move:t.useCallback(()=>r(e(454)),[r]),capture:n[e(435)](t.useCallback,()=>r(e(474)),[r]),check:n[e(464)](t.useCallback,()=>r(e(476)),[r]),victory:n[e(439)](t.useCallback,()=>r("success"),[r]),error:n[e(452)](t.useCallback,()=>r(e(460)),[r]),castle:n.MAFkc(t.useCallback,()=>!!s&&navigator[e(436)]([15,40,15]),[s]),gameStart:n.ewepW(t.useCallback,()=>!!s&&navigator[e(436)]([10,30,10,30,20]),[s])},i={};return i[e(461)+"d"]=s,i[e(436)]=r,i[e(447)]=a,i};function Gt(){const e=["zxDLCfC","DgfIBgu","zgjHy2SGzMfPBa","mZHpA0L0s2i","CM4GDgHPCYiPka","oty0m01pDwfgDG","kcGOlISPkYKRkq","mtm5nty3otbQu0HVsKW","AgfWDgLJCW","y3rVCIGICMv0Dq","zuLqA1O","Bg9N","s2r6vgO","tufgA2m","uK9Nuw0","BgLNAhq","Aw5MBW","vgTzqKy","mtyZmdaYnZnRDLbkuhu","DhjHy2u","zwq6","zxjYB3i","AxntDxbWB3j0zq","mZzeC1D4ALq","B2XvwM8","rNbpuwW","B0rTwxe","C3vJy2vZCW","AwzMEgq","CvHstM8","whDIANO","BgvUz3rO","EM5dwNK","otyZodKWAfPxzeXr","y0XhBvy","BwvKAxvT","mta4mte5mdDMAuTcBfO","AgvHDNK","Dw5KzwzPBMvK","ChjVDg90ExbL","yMLUza","D2fYBG","vgDozeS","y29UC3rYDwn0BW","zxHJzxb0Aw9U","mty1ntKYog5JB2X1sW","zMfRtuu","wvnvDMO","y29UC29Szq","ntmWnJHduwnPzLm","svv2A3i","y0ftD3G","x19WCM90B19F","otbvvKLdyM4","yxbWBhK","ndLoD2ntr3q","C2vSzwn0Aw9U","CMv0DxjUicHMDq","vfvOvhe","DMLICMf0zq","Dg9tDhjPBMC","C2vHCMnO"];return(Gt=function(){return e})()}const Wt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Yt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Ut();let z=null;try{z=l()}catch{}const B=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),D="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),A=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",q=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Yt(D?7-e:e,D?7-t:t),l=null==(i=B[D?7-e:e])?void 0:i[D?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=B[D?7-e:e])?void 0:o[D?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[B,b,w,r,a,D,x,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),H=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),P=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=D?7-e:e,a=D?7-t:t,i=Yt(s,a),o=null==(n=B[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=P(i),j=I&&g&&!y,N=I&&y;return u.jsxs(m.div,{onClick:()=>q(e,t),onMouseEnter:()=>S(i),onMouseLeave:H,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>H(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:A(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:D})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Rt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Zt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Rt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(D,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(A,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Xt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Jt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:K,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:_,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Vt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:K,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:_,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",A=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(q,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(S,{className:"w-3 h-3"})]}):u.jsx(H,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),A&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===A?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(P,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Xt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(D,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(T,{className:"w-3 h-3"})})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(E,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Jt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(E,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(D,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Zt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(G,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(W,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(E,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(Y,{className:"h-5 w-5"}):u.jsx(q,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(R,{children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(Z,{asChild:!0,children:u.jsxs(E,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(X,{className:"h-3 w-3"}),L]})})}),u.jsx(D,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(J,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(V,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(R,{children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(Z,{asChild:!0,children:u.jsxs(E,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(D,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(J,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Qt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(E,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(D,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(E,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(D,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:B}=pe(),D=t.useRef(null),[L,A]=t.useState(j),[q,S]=t.useState(!1),[H,P]=t.useState(""),[I,T]=t.useState(!1),[_,K]=t.useState(!1);se(p);const U=t.useMemo(()=>p?fe(p):null,[p]),G=t.useCallback(e=>{A(e),C(e)},[C]);t.useEffect(()=>{e&&A(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});P(e)}catch(e){}})()},[e]);const W=async e=>{if(e&&!v)return void T(!0);if(!D.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(D.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Ae(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(E,{variant:L?"outline":"default",size:"sm",onClick:()=>G(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(E,{variant:L?"default":"outline",size:"sm",onClick:()=>G(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:D,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",U&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",U]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(E,{onClick:()=>W(!1),disabled:q,variant:"outline",className:"gap-2",children:[q?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(E,{onClick:()=>W(!0),disabled:q,className:"gap-2 btn-luxury",children:[q?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(E,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(E,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),B(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(qe,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(Be,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(De,{isOpen:I,onClose:()=>T(!1),onAuthRequired:()=>{T(!1),K(!0)},trigger:"download"}),u.jsx(Le,{isOpen:_,onClose:()=>K(!1)})]})},tn=rn;!function(){const e=rn,t=yn();for(;;)try{if(544067===parseInt(e(386))/1+-parseInt(e(337))/2*(-parseInt(e(340))/3)+parseInt(e(324))/4+parseInt(e(317))/5*(parseInt(e(350))/6)+parseInt(e(338))/7+parseInt(e(362))/8*(parseInt(e(360))/9)+-parseInt(e(378))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){const e=rn,t={};t.WQSEd=e(312),t[e(328)]=e(309);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(308)]===n[a(328)]){const e=_0x3af077[a(367)](_0x51e772,arguments);return _0xf95c15=null,e}{const e=s?function(){if(r){const e=r[a(367)](t,arguments);return r=null,e}}:function(){};return s=!1,e}}}()(void 0,function(){const e=rn;return nn[e(305)]().search(e(319)+"+$")[e(305)]()[e(368)+"r"](nn)[e(375)](e(319)+"+$")});nn();const sn=function(){const e=rn,t={exFMN:function(e){return e()},igQOR:function(e,t){return e!==t},KNupF:e(301)};let n=!0;return function(s,r){const a=e;if(t.igQOR("TCBic",t[a(333)])){const e=n?function(){if(r){const e=r[a(367)](s,arguments);return r=null,e}}:function(){};return n=!1,e}_0x30b516[a(307)+"ault"](),t[a(343)](_0x1b665e)}}();function rn(e,t){e-=301;const n=yn();let s=n[e];if(void 0===rn.jEQtHm){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};rn.PgjcHA=r,rn.qEplPJ={},rn.jEQtHm=!0}const a=e+n[0],i=rn.qEplPJ[a];if(i)s=i;else{const e=function(e){this.kZHKnH=e,this.nAErhI=[1,0,0],this.VPkzeH=function(){return"newState"},this.cBFZXT="\\w+ *\\(\\) *{\\w+ *",this.URdwyz="['|\"].+['|\"];? *}"};e.prototype.sQsqTU=function(){const e=new RegExp(this.cBFZXT+this.URdwyz).test(this.VPkzeH.toString())?--this.nAErhI[1]:--this.nAErhI[0];return this.cvIvow(e)},e.prototype.cvIvow=function(e){return Boolean(~e)?this.IcjSPb(this.kZHKnH):e},e.prototype.IcjSPb=function(e){for(let t=0,n=this.nAErhI.length;t<n;t++)this.nAErhI.push(Math.round(Math.random())),n=this.nAErhI.length;return e(this.nAErhI[0])},new e(rn).sQsqTU(),s=rn.PgjcHA(s),rn.qEplPJ[a]=s}return s}sn(void 0,function(){const e=rn,t={KmeNC:function(e,t){return e+t},Eqymz:e(383)+e(303),FeNhk:e(356)+'ctor("retu'+e(371)+" )",ZdCjF:function(e){return e()},zLXre:e(306),rCVsr:e(316),ImCPc:e(351)};let n;try{const s=Function(t.KmeNC(t[e(389)]+t[e(323)],");"));n=t[e(382)](s)}catch(a){n=window}const s=n.console=n.console||{},r=[e(325),t.zLXre,"info",e(388),e(314),t.rCVsr,t[e(373)]];for(let i=0;i<r[e(336)];i++){const t=sn[e(368)+"r"][e(302)][e(354)](sn),n=r[i],a=s[n]||t;t[e(359)]=sn[e(354)](sn),t[e(305)]=a[e(305)][e(354)](a),s[n]=t}})();const an=()=>{const e=rn,t={};t[e(385)]=4e3,o[e(304)]("Shortcuts:"+e(377)+e(318)+e(341)+e(352)+"Help",t)},on={};on[tn(384)]="M",on[tn(376)]=tn(311)+"nd on/off";const cn={};cn[tn(384)]="R",cn[tn(376)]=tn(326)+tn(369)+tn(321);const ln={};ln[tn(384)]="D",ln[tn(376)]="Offer draw"+tn(327)+"n)";const un={};un[tn(384)]=tn(387),un.action=tn(366)+tn(380)+"it fullscreen";const dn={key:"?"};dn[tn(376)]="Show keybo"+tn(346)+tn(353);const mn={};mn[tn(384)]=tn(347),mn[tn(376)]=tn(379)+" timeline";const xn={};xn[tn(384)]="â†",xn[tn(376)]=tn(381)+"ove";const hn={};hn[tn(384)]="â†’",hn[tn(376)]="Next move";const pn={};pn.key=tn(365),pn[tn(376)]=tn(320)+"t";const fn={};fn[tn(384)]="End",fn[tn(376)]="Go to end (show all)";const gn={};gn[tn(384)]="F",gn.action=tn(374)+"lscreen mode";const vn={};vn[tn(384)]="C",vn.action=tn(370)+tn(364)+tn(363);const bn={};function yn(){const e=["zhvYyxrPB24","nZq0odK2CK9jBxjW","rxnJ","zxjYB3i","rxf5BxO","DgfYz2v0","yKHvB3i","BvHXsuu","zurPBe0","ChjVDg90ExbL","BMn0Aw9UkcKG","Aw5MBW","Dg9tDhjPBMC","D2fYBG","ChjLDMvUDerLzG","v1ftrwq","BufPCLK","yxvSDa","vg9Nz2XLihnVDq","t0TJr1G","swTJuNq","zxHJzxb0Aw9U","veDJuuu","DgfIBgu","nuTjDwn6Cq","pvjLC2LNBIWGra","kcGOlISPkYKRkq","r28GDg8GC3rHCG","CgXHEsK","DgvK","rMvoAgS","mJGZmtu4oejyAxfIsW","Bg9N","uMvZAwDUigDHBq","icH5B3vYihr1CG","Eev4uvK","zgL0ywjSzq","A2v5zg93BG","z0HQtM4","q0DruM8","s051Cey","teLkzNu","AxndB250zw50rq","BgvUz3rO","mJKZmM1ushvJEG","nte2ndCZm3LcsfLgBW","CMvTB3zLrxzLBG","otzTCxHrExi","purYyxCSievZyW","C3rLBMvY","zxHgtu4","Dg9mB3DLCKnHCW","C2HPzNrlzxK","yxjKihnOB3j0yW","u3bHy2u","sxjfwLq","zxnJyxbL","ota4ndC4vNrXAhzw","DhjHy2u","puXVyMj5lca/pq","DxrZ","yMLUza","ywrKrxzLBNrmAq","E30Uy29UC3rYDq","u291BMqGBxv0zq","u291BMqGDw5TDq","x19WCM90B19F","mte4mJK4n2jVAKTYCG","wLDQz1e","ohb0tvrqsa","yxrLCW","CMqGy29VCMrPBG","sg9Tzq","uMv0DxjUihrVia","yxbWBhK","y29UC3rYDwn0BW","zsaOzhvYAw5Nia","vg9Nz2XLigjVyq","CM4GDgHPCYiPka","DeXPC3rLBMvY","sw1dugm","vg9Nz2XLigz1Ba","C2vHCMnO","ywn0Aw9U","ie09txv0zsWGuG","mtK3nJmXmZbZzM5Qswy","ugXHEs9qyxvZzq","Bg9IyNKGlYbfEa","uhjLDMLVDxmGBq","wMrdAKy","CMv0DxjUicHMDq","A2v5"];return(yn=function(){return e})()}bn[tn(384)]="L",bn[tn(376)]="Toggle/expand legend";const wn=Cn;!function(){const e=Cn,t=Gn();for(;;)try{if(974948===parseInt(e(279))/1+-parseInt(e(328))/2+parseInt(e(217))/3*(parseInt(e(266))/4)+-parseInt(e(270))/5*(parseInt(e(204))/6)+-parseInt(e(282))/7+parseInt(e(201))/8+-parseInt(e(318))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jn=function(){const e=Cn,t={};t[e(263)]="jkbfN",t[e(289)]=e(189);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Cn,r={eMDXS:function(e,t){return e(t)}};if(s(234)===n[s(263)])_0x2655d8=_0x30ee08[s(302)],_0x59a23d=_0x4e6ead;else if(t){if("QIQsj"===n[s(289)]){const n=t[s(224)](e,arguments);return t=null,n}return r[s(273)](_0x36b3d2,_0x277572)}}:function(){};return s=!1,r}}()(void 0,function(){const e=Cn,t={};t[e(276)]=e(275)+"+$";const n=t;return jn[e(206)]().search(e(275)+"+$").toString()[e(220)+"r"](jn).search(n[e(276)])});function Cn(e,t){e-=182;const n=Gn();let s=n[e];if(void 0===Cn.HXSRCL){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Cn.zzEOww=r,Cn.EQyGtA={},Cn.HXSRCL=!0}const a=e+n[0],i=Cn.EQyGtA[a];if(i)s=i;else{const e=function(e){this.pYabeE=e,this.EZRLel=[1,0,0],this.HxVJKe=function(){return"newState"},this.pLdOnC="\\w+ *\\(\\) *{\\w+ *",this.mPSuEn="['|\"].+['|\"];? *}"};e.prototype.voqpSC=function(){const e=new RegExp(this.pLdOnC+this.mPSuEn).test(this.HxVJKe.toString())?--this.EZRLel[1]:--this.EZRLel[0];return this.rThyZl(e)},e.prototype.rThyZl=function(e){return Boolean(~e)?this.GshmpI(this.pYabeE):e},e.prototype.GshmpI=function(e){for(let t=0,n=this.EZRLel.length;t<n;t++)this.EZRLel.push(Math.round(Math.random())),n=this.EZRLel.length;return e(this.EZRLel[0])},new e(Cn).voqpSC(),s=Cn.zzEOww(s),Cn.EQyGtA[a]=s}return s}jn();const Nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Cn(224)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Nn(void 0,function(){const e=Cn,t={PapSN:function(e,t){return e(t)},EbujZ:"NYPhK",EMdJH:"warn",dqhJH:e(300),NqHkz:e(269),xgXwB:e(199),hvNSZ:"trace"};let n;try{n=t.PapSN(Function,e(227)+"nction() "+(e(292)+e(285))+'rn this")( ));')()}catch(a){if("NYPhK"===t[e(221)])n=window;else if(_0x515f3a){const e=_0x19dded.apply(_0x4c36f1,arguments);return _0x44cd26=null,e}}const s=n[e(271)]=n[e(271)]||{},r=["log",t[e(202)],t[e(260)],t[e(184)],e(312),t[e(272)],t[e(254)]];for(let i=0;i<r.length;i++){const t=Nn[e(220)+"r"][e(299)][e(230)](Nn),n=r[i],a=s[n]||t;t.__proto__=Nn[e(230)](Nn),t.toString=a[e(206)][e(230)](a),s[n]=t}})();const kn={p:100,n:320,b:330,r:500,q:900,k:2e4},Mn=kn,zn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Bn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Dn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Ln=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],An=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],qn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Sn(e){switch(e[Cn(320)+"e"]()){case"p":return zn;case"n":return Bn;case"b":return Dn;case"r":return Ln;case"q":return An;case"k":return qn;default:return[]}}function Hn(e){const t=Cn,n={geTLi:function(e,t){return e*t}};n[t(313)]=function(e,t){return e>t},n[t(265)]=function(e,t){return e===t},n[t(286)]=t(195),n.bzWcw=function(e,t){return e<t},n.euMPn=function(e,t){return e!==t},n[t(205)]=t(194),n[t(319)]=function(e,t){return e===t},n[t(245)]=function(e,t){return e+t},n[t(218)]=function(e,t){return e===t};const s=n;if(e.isCheckmate())return s[t(265)](e[t(223)](),"w")?-1/0:1/0;if(e.isDraw()||e[t(183)+"e"]())return 0;let r=0;const a=e[t(226)]();for(let o=0;o<8;o++)if(s[t(265)](s[t(286)],t(195)))for(let e=0;s.bzWcw(e,8);e++){const n=a[o][e];if(n){const a=Mn[n[t(308)]]||0,i=Sn(n[t(308)]);let c=0;if(i[t(252)]>0){if(!s.euMPn(t(250),s.gnVzq))return _0x3afc09[_0x2e29fa[t(267)](s.geTLi(_0x1cff20[t(296)](),_0x21961a[t(252)]))];c=i[s.kSVTT(n.color,"w")?o:7-o][e]}const l=s.oTwID(a,c);r+=s[t(265)](n[t(291)],"w")?l:-l}}else s[t(313)](_0xa67f8b,_0x269356)&&(_0x55a128=_0x3e4b0b,_0x46a696=_0xf96d46);const i=e[t(191)]()[t(252)];return r+=s[t(218)](e[t(223)](),"w")?s[t(210)](i,2):s[t(210)](-i,2),r}function Pn(e,t,n,s,r){const a=Cn,i={AGDOm:function(e,t){return e!==t}};i[a(203)]="EhAHU",i[a(283)]=function(e,t){return e===t},i.fhtli=function(e,t){return e-t},i[a(212)]=a(186),i[a(196)]=a(198),i[a(280)]=function(e,t){return e<=t},i[a(197)]=function(e,t){return e===t};const o=i;if(o[a(283)](t,0)||e[a(321)]())return{score:Hn(e),move:null};const c={};c[a(192)]=!0;const l=e[a(191)](c);if(l[a(228)]((e,t)=>{const n=a;if(o[n(235)](n(238),o[n(203)])){let s=0,r=0;return e[n(215)]&&(s+=Mn[e[n(215)]]||0),t[n(215)]&&(r+=Mn[t[n(215)]]||0),e[n(240)][n(311)]("+")&&(s+=50),t[n(240)][n(311)]("+")&&(r+=50),r-s}{const e=_0x43c56b?function(){if(_0x14400f){const e=_0x5b65d6.apply(_0x53985b,arguments);return _0x59774c=null,e}}:function(){};return _0x4fd027=!1,e}}),r){let r=-1/0,i=null;for(const u of l){e[a(261)](u);const c=Pn(e,o[a(327)](t,1),n,s,!1);if(e[a(310)](),c[a(302)]>r)if(o[a(283)](o[a(212)],o[a(196)])){if(_0x3b706b){const e=_0x47163b.apply(_0x26b93e,arguments);return _0x50f661=null,e}}else r=c[a(302)],i=u;if(n=Math[a(303)](n,c[a(302)]),o[a(280)](s,n))break}const c={};return c.score=r,c[a(261)]=i,c}{let r=1/0,i=null;for(const u of l){e[a(261)](u);const c=Pn(e,o[a(327)](t,1),n,s,!0);if(e[a(310)](),c.score<r){if(!o[a(197)](a(182),"WOdsW")){const e=_0x49cb72?function(){if(_0x1b9118){const e=_0x15b8ea[a(224)](_0x57a297,arguments);return _0x29a01f=null,e}}:function(){};return _0x13c010=!1,e}r=c[a(302)],i=u}if((s=Math[a(253)](s,c[a(302)]))<=n)break}const c={};return c[a(302)]=r,c[a(261)]=i,c}}function In(e){const t=Cn,n={RWMtz:function(e,t){return e(t)},eZEhU:function(e,t){return e===t},CVqjN:function(e,t){return e>t},QcJxy:function(e,t){return e!==t}},s={};s[t(192)]=!0;const r=e[t(191)](s);if(n[t(255)](r.length,0))return null;const a=r[t(317)](e=>e[t(215)]);return n.CVqjN(a[t(252)],0)&&Math[t(296)]()<.3?n[t(298)](t(268),t(213))?a[Math.floor(Math[t(296)]()*a[t(252)])]:{score:n.RWMtz(_0x50a9e5,_0x40a64a),move:null}:r[Math[t(267)](Math[t(296)]()*r.length)]}function Tn(e){return{oVtiM:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[Cn(284)](Pn,e,4,-1/0,1/0,"w"===e.turn()).move}function En(e,t){const n=Cn,s={dzjLB:n(274),gPLmm:function(e,t){return e(t)}};switch(t){case n(301):return In(e);case s[n(295)]:return function(e){const t=Cn,n={IXlaZ:function(e,t){return e+t},NxgQI:t(227)+t(264),aePck:function(e,t){return e(t)},AArAp:function(e,t){return e===t},zaJLA:function(e,t){return e-t},TWnYa:function(e,t){return e===t},MJFWA:function(e,t){return e>t},bgAqR:function(e,t){return e!==t},dxlgv:"cdjTo",qOZHd:"pnCFr",VaySb:function(e,t){return e<t}},s={};s[t(192)]=!0;const r=e[t(191)](s);if(n[t(315)](r[t(252)],0))return null;let a=null,i=n[t(315)](e.turn(),"w")?-1/0:1/0;for(const o of r){e[t(261)](o);const s=Hn(e);if(e[t(310)](),n[t(315)](e[t(223)](),"w")){if(n.MJFWA(s,i)){if(n[t(259)]("cdjTo",n[t(326)])){const e=_0x29c3b5[t(224)](_0xc9bb91,arguments);return _0x1ef6bc=null,e}i=s,a=o}}else if(t(200)!==n[t(293)])s<i&&(i=s,a=o);else{const e=_0x182454(HYegSh[t(239)](HYegSh.IXlaZ(HYegSh[t(193)],"{}.constru"+t(285)+t(307)+" )"),");"));_0x1d3f2c=e()}}if(n[t(190)](Math.random(),.2)){const s=r.sort((s,r)=>{const a=t;e.move(s);const i=n[a(306)](Hn,e);e[a(310)](),e[a(261)](r);const o=Hn(e);return e[a(310)](),n[a(216)](e[a(223)](),"w")?o-i:n[a(309)](i,o)}),a=s[t(229)](0,Math.min(3,s[t(252)]));return a[Math[t(267)](Math[t(296)]()*a[t(252)])]}return a}(e);case n(188):return Tn(e);case n(233):return s[n(258)](Tn,e);default:return In(e)}}const _n={};_n.id=wn(301),_n[wn(208)]=wn(185),_n[wn(231)+"n"]=wn(246)+"om moves, "+wn(316)+wn(287),_n[wn(314)]=wn(251);const Kn={};Kn.id=wn(274),Kn[wn(208)]=wn(249)+"r",Kn[wn(231)+"n"]=wn(219)+wn(247)+wn(304)+wn(214),Kn.rating="~1400";const Un={};function Gn(){const e=["tNfiA3O","qMvNAw5Uzxi","wKHxEgO","zNjVBq","AgfYza","uuLrC2O","vMf5u2i","Bw92zxm","DMvYyM9Zzq","tNHNuuK","rfnNyNi","zxPOA00","v2vstNa","q1PkyKm","rg5cvuK","DgfIBgu","EfjUA24","otuZmZa5nKv0t05bza","ru1KsKG","vgLnuhG","ota2DK9vufnN","z25wENe","Dg9tDhjPBMC","D2fPDfjLywr5","BgfIzwW","idqTCgX5ihnLyq","z2vutgK","zw5NAw5Lug93zq","CKXJqxm","A21Jvee","CMvUzxnZ","y2fWDhvYzwq","qufYqxa","m2zftK1VAG","q2nyA3e","qMfZAwmGDgfJDa","y29UC3rYDwn0BW","rwj1ALO","u0D3u2q","DhvYBG","yxbWBhK","BLfQsKq","yM9HCMq","CMv0DxjUicHMDq","C29YDa","C2XPy2u","yMLUza","zgvZy3jPChrPBW","AxrPB24","C3rVy2TMAxnO","C1fUuLK","quDet20","DMfSDwf0Aw9Ula","yMvZDe1VDMu","BhzTDgO","svHSyvO","C2fU","twfZDgvY","C3rYzw5NDgG","v0TruNq","zgvWDgG","B1r3suq","twfRzxmGCMfUza","AwnZigfUzcbTyq","ywnRihrVigHHCG","q2X1yIbqBgf5zq","yxnsuMe","FJGWma","BgvUz3rO","BwLU","Ahzou1O","zvPfAfu","ywHXwhK","C29jsNe","z1bmBw0","yMDbCvi","zhfOsKG","Bw92zq","u3rVy2TMAxnOia","q1fcq2O","BMn0Aw9UkcKG","vgnUy1C","nde4oteXmNbqAfnusq","zMXVB3i","sMr6EKm","zxjYB3i","mZq1nuvpy0nyEa","y29UC29Szq","EgDyD0i","zu1ewfm","BwvKAxvT","kcGOlISPkYKRkq","DNbOsxi","BM90ihjLywr5la","q0vHwfG","ntu1ody5A2Xsrerl","DxzztLO","zMLUza","odm4mtftuLDevNu","DxfOCuO","B1z0Au0","y3rVCIGICMv0Dq","C1HXqMO","ignHChr1CMvZ","zw5NAw5LlcbNCG","D0jPBxm","CMnOigrLChrO","y29SB3i","E30Uy29UC3rYDq","Cu9Asgq","qwr2yw5JzwqGzq","zhPQtei","CMfUzg9T","Bw92zxrPBwu","uwnkEhK","ChjVDg90ExbL","Aw5MBW","zwfZEq","C2nVCMu","Bwf4","DgvYAwfSigf3yq","FJiWmda","ywvqy2S","CM4GDgHPCYiPka","DhLWzq","EMfktee","Dw5KBW","Aw5JBhvKzxm","zxHJzxb0Aw9U","ru9ds1m","CMf0Aw5N","vfDUwwe","B2nJyxnPB25HBa","zMLSDgvY","mJGWmZyYnLLfsvLvqW","A1nwvfq","Dg9mB3DLCKnHCW","Axnhyw1Lt3zLCG","yw5KBwfZDgvYia","ChrXsKG","yw5HBhL6zvbVCW","Dwv1qxK","zhHSz3y","zMH0BgK","mJC4ndaXnK9yBvLJva","rMPsrLi","v09KC1C","AxntDgfSzw1HDa"];return(Gn=function(){return e})()}Un.id="hard",Un[wn(208)]=wn(241),Un[wn(231)+"n"]=wn(294)+wn(236)+wn(209)+wn(290),Un.rating=wn(305);const Wn={};Wn.id=wn(233),Wn.label=wn(262)+"16",Wn.description="Real NNUE "+wn(288)+wn(322)+wn(242),Wn[wn(314)]="~3200",Wn[wn(211)+"red"]=!0;const Yn=[_n,Kn,Un,Wn];function On(){const e=["sKflvha","AgfUzgXLCNm","B25uB3vJAfn0yq","mZvPwLPHuui","CM4GDgHPCYiPka","mZG5otzRvLP0wg8","B25uB3vJAevUza","E30Uy29UC3rYDq","A2Hpy04","yurjqxy","y29UC3rYDwn0BW","Aw5MBW","DhjHy2u","CfrbDNq","yxbWBhK","qMnfwNy","C3DPCgvpzMzZzq","B25nB3vZzuXLyq","B25uB3vJAe1VDG","zKTQD0e","y3vYCMvUDfG","ovbUqwPctG","C2vHCMnO","y2XPzw50wq","shfYB0m","ywjZ","mZeYodm4mKHYrfjPAW","B0rPAwG","ywHlyui","wgPzCxu","mZmZowPbCeTMAG","u0jty04","otK3ohfxt2vHBq","AKX6rfy","y3vYCMvUDa","B25nB3vZzvvW","vhnisvK","rvDyrhi","quP3sKm","Dg91y2HLCW","Dg9tDhjPBMC","BffdtNK","s09pqNO","D2fYBG","CLjRB1u","tu1ssfi","svDLCKO","BNbYu2G","zxHJzxb0Aw9U","D3fZANG","s3bvtLy","zxjYB3i","sw5oue8","y29UC29Szq","B25nB3vZzurVDW","ChjVDg90ExbL","ufHiA3K","Bg9N","ntaZote2qMTKAevM","A0LlthC","whjuruq","nJa2mdKYDKHgwfHP","y0rwr2u","y3vYCMvUDfK","BvrLrxe","yMLUza","AxntD2LWAw5N","zw5pEvO","C3rHCNry","x19WCM90B19F","mtKZmdK3nNbeBMT1sq","C3rHCNrz","rfnIwvm","kcGOlISPkYKRkq","tfzRwNm","mZuXmtbXENbkv0e","y2XPzw50wa","ufzMyui","nZeZovr2rK9eBq","r2HvA1y"];return(On=function(){return e})()}!function(){const e=Xn,t=On();for(;;)try{if(538463===parseInt(e(199))/1*(parseInt(e(183))/2)+-parseInt(e(236))/3+parseInt(e(239))/4*(-parseInt(e(181))/5)+-parseInt(e(210))/6*(parseInt(e(208))/7)+-parseInt(e(248))/8+parseInt(e(204))/9+-parseInt(e(253))/10*(-parseInt(e(176))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Rn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Xn(192)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Xn,t={};t[e(216)]=e(251)+"+$";const n=t;return Rn[e(218)]()[e(200)](n[e(216)])[e(218)]()[e(188)+"r"](Rn)[e(200)](e(251)+"+$")});Rn();const Zn=function(){let e=!0;return function(t,n){const s=Xn,r={};r[s(209)]=function(e,t){return e!==t};const a=r,i=e?function(){const e=s;if(a.SBScN(e(230),e(230))){const t=_0x405e4f[e(192)](_0x11a0db,arguments);return _0x3b948c=null,t}if(n){const s=n[e(192)](t,arguments);return n=null,s}}:function(){};return e=!1,i}}();function Xn(e,t){e-=174;const n=On();let s=n[e];if(void 0===Xn.Netdtd){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Xn.RDCkGQ=r,Xn.AJfRnS={},Xn.Netdtd=!0}const a=e+n[0],i=Xn.AJfRnS[a];if(i)s=i;else{const e=function(e){this.uMFkoY=e,this.WtcBNT=[1,0,0],this.wLTcsh=function(){return"newState"},this.wYyvYx="\\w+ *\\(\\) *{\\w+ *",this.gAlCgN="['|\"].+['|\"];? *}"};e.prototype.RrYnBP=function(){const e=new RegExp(this.wYyvYx+this.gAlCgN).test(this.wLTcsh.toString())?--this.WtcBNT[1]:--this.WtcBNT[0];return this.pEuEzO(e)},e.prototype.pEuEzO=function(e){return Boolean(~e)?this.yAhYHI(this.uMFkoY):e},e.prototype.yAhYHI=function(e){for(let t=0,n=this.WtcBNT.length;t<n;t++)this.WtcBNT.push(Math.round(Math.random())),n=this.WtcBNT.length;return e(this.WtcBNT[0])},new e(Xn).RrYnBP(),s=Xn.RDCkGQ(s),Xn.AJfRnS[a]=s}return s}Zn(void 0,function(){const e=Xn,t={lQCNy:function(e,t){return e(t)},QXaaD:function(e,t){return e+t},pTAvt:"return (function() ",JAKTp:e(185)+'ctor("retu'+e(182)+" )",KpUNV:function(e){return e()},yonfN:function(e,t){return e!==t},HqroC:e(221),ahKaB:e(189),blgur:e(229),icYvY:e(226),mTeEq:e(190)};let n;try{const s=t[e(219)](Function,t.QXaaD(t[e(191)],t[e(178)])+");");n=t[e(228)](s)}catch(a){t.yonfN("zvIhj",e(211))?n=window:null==_0x40e505||_0x40e505()}const s=n.console=n[e(231)]||{},r=[e(235),t[e(202)],t[e(206)],t.blgur,t.icYvY,"table",t[e(242)]];for(let i=0;i<r.length;i++){const t=Zn[e(188)+"r"][e(233)][e(243)](Zn),n=r[i],a=s[n]||t;t[e(247)]=Zn[e(243)](Zn),t.toString=a[e(218)][e(243)](a),s[n]=t}})();const Jn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ke,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ke,description:"15 minutes"}],Vn=["bot","create","join"],Fn=()=>{var e,n,s,l,d,x,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:L}=Ut(),[A,q]=t.useState("lobby"),[S,P]=t.useState(!1),[I,T]=t.useState(!1),[_,U]=t.useState("bot"),[G,W]=t.useState("human"),[Y,O]=t.useState("medium"),[R,Z]=t.useState("blitz_5"),[X,J]=t.useState("hotCold"),[V,F]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[Me,ze]=t.useState([]),[Be,Ae]=t.useState(!1),[qe,Ke]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Vn.indexOf(_);let n;n="left"===e?Math.min(t+1,Vn.length-1):Math.max(t-1,0),n!==t&&(L.select(),U(Vn[n]))},[_,L]),{swipeOffset:xt,isSwiping:ht,handlers:ft}=((e={})=>{const n=Xn,s={XjYqu:function(e,t){return e===t},enOyZ:function(e,t){return e-t},fKjwA:function(e,t){return e(t)},MMRHR:n(252),khOcN:function(e,t){return e>t},oDiih:function(e){return null==e?void 0:e()},rRkoU:n(225),LIJwn:function(e){return null==e?void 0:e()},ZtNaP:function(e,t){return e(t)},aDIAv:function(e,t){return e(t)},DSbYS:function(e,t,n){return e(t,n)},BcEZv:"WZFan",csOxw:n(175),TsHIY:function(e,t){return e!==t},IWerJ:"DEYOK",cDVGe:function(e,t,n){return e(t,n)},yADNk:function(e,t,n){return e(t,n)},wqsjx:function(e,t,n){return e(t,n)},EWXDr:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[x,h]=t.useState(!1),p={};p[n(246)]=0,p[n(249)]=0,p.currentX=0,p[n(241)]=0,p.isSwiping=!1;const f=t.useRef(p),g=s[n(250)](t.useCallback,(e,t)=>{const s=n,r={};r[s(246)]=e,r[s(249)]=t,r[s(198)]=e,r.currentY=t,r.isSwiping=!0,f[s(212)]=r,h(!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(s[r(207)](r(234),r(220))){if(!_0x2b1c24)return;_0x5288f2(_0x3185ec[r(174)],_0x45aa16.clientY)}else{if(!f[r(212)][r(244)])return;f.current[r(198)]=e,f[r(212)].currentY=t;const n=s[r(245)](e,f[r(212)][r(246)]),a=t-f.current[r(249)],i={};i.x=n,i.y=a,s[r(197)](m,i)}},[]),b=t.useCallback(()=>{const e=n;if(!f[e(212)][e(244)])return;const t=s[e(245)](f[e(212)][e(198)],f[e(212)][e(246)]),a=f[e(212)][e(241)]-f[e(212)].startY,u=Math[e(203)](t),d=Math[e(203)](a);if(u>d&&u>r)if(s[e(223)]===e(177)){const t=_0x4a3c7c[e(217)][0];_0x3c9b12(t[e(174)],t[e(201)])}else if(s.khOcN(t,0))s[e(205)](o);else{if(!s[e(207)](s[e(222)],s[e(222)])){const t=_0x272500?function(){if(_0x5c8af5){const t=_0xbc9f9d[e(192)](_0x5717be,arguments);return _0x135cda=null,t}}:function(){};return _0x4c63d2=!1,t}null==i||i()}else d>u&&d>r&&(s[e(186)](a,0)?s[e(205)](l):s.LIJwn(c));f[e(212)][e(244)]=!1,s.ZtNaP(h,!1);const x={x:0,y:0};s[e(187)](m,x)},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n,r=e[t(217)][0];s[t(250)](g,r[t(174)],r[t(201)])},[g]),w=t.useCallback(e=>{const t=n,r=e[t(217)][0];s[t(250)](v,r[t(174)],r[t(201)])},[v]),j=s[n(250)](t.useCallback,()=>{b()},[b]),C=s[n(240)](t.useCallback,e=>{const t=n;a&&g(e[t(174)],e[t(201)])},[a,g]),N=s.yADNk(t.useCallback,e=>{const t=n;if(s[t(193)]!==s.csOxw){if(!a)return;v(e[t(174)],e[t(201)])}else({kIKLw:function(e){return null==e?void 0:e()}})[t(237)](_0x262c1f)},[a,v]),k=s[n(227)](t.useCallback,()=>{const e=n;if(s[e(214)](s[e(224)],e(238))){if(!a)return;b()}else{const t=_0x592927.constructor[e(233)][e(243)](_0x22909e),n=_0x18ac29[_0x1d4fb0],s=_0x408b58[n]||t;t[e(247)]=_0x3a7044.bind(_0x14f7ee),t.toString=s[e(218)][e(243)](s),_0x48c668[n]=t}},[a,b]),M=s[n(215)](t.useCallback,()=>{const e=n;a&&f[e(212)][e(244)]&&b()},[a,b]),z={};z[n(180)+"rt"]=y,z[n(196)+"e"]=w,z[n(184)]=j,z[n(232)+"n"]=C,z.onMouseMove=N,z[n(213)]=k,z[n(195)+"ve"]=M;const B={};return B[n(194)+"t"]=d,B[n(244)]=x,B[n(179)]=z,B})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Dt,offerDraw:Lt,loadGame:At,getAvailableMoves:qt,movedSquares:St}=(()=>{const e=Bt,n={xZbyX:e(238),LxKkO:e(400)+"!",tbrpz:function(e,t){return e===t},RSsTL:function(e,t){return e===t},aOHcL:e(453),LFWTx:function(e,t){return e===t},lkaou:"victory",TwGoH:function(e,t){return e(t)},PBBkK:e(473),bYPDe:function(e,t){return e(t)},NYEdx:e(266)+e(383),RGOYR:e(229),tSmGY:function(e,t){return e===t},xHflm:e(286),tPiTq:function(e,t){return e(t)},iuvXp:e(327),yEZQR:e(222),mICby:e(316),MKSjr:e(403)+e(458),hhyhD:e(359),uHufL:e(191)+"s",JySfB:function(e,t){return e(t)},wUhJU:"move_uci",NOzUb:e(226)+"r",TFIPr:function(e,t){return e(t)},arNqu:e(300)+e(348)+"eate a game",uLCRI:function(e,t){return e(t)},dfzUZ:e(346),FAaxf:"Game created! Waitin"+e(302)+e(466),gIDxz:e(463),bNoqU:e(411)+"s",cCPcb:function(e,t){return e!==t},IXkyp:"Game alrea"+e(396),mqmeX:e(237)+"n your own game",TWoIX:e(484),iqyQZ:e(273),xHheY:"Joined gam"+e(366)+e(270)+e(365),QjnXT:function(e,t){return e instanceof t},wXQWY:"Failed to "+e(194),SEqBl:function(e,t){return e!==t},hggzw:e(325),glvtd:e(263),iuKxU:e(398),LrTyk:function(e,t,n){return e(t,n)},iIdHb:function(e,t){return e>=t},YBOXO:function(e,t){return e(t)},NNnYY:e(240)+"load game",kVqrt:e(265),dQcqM:function(e,t){return e||t},IfEPe:e(381),airHN:function(e,t){return e(t)},sFBaf:e(272),OEsWq:function(e,t){return e(t)},KLzaZ:"NGPwS",VRkOc:function(e,t){return e(t)},QEQpc:e(388),PEGHY:e(428),OPHHR:function(e,t){return e+t},ucSAb:function(e,t){return e+t},KGLHa:function(e,t){return e+t},SlqgM:function(e,t){return e(t)},yPCTu:function(e,t){return e(t)},pASnj:function(e,t){return e(t)},rPQpL:function(e,t){return e!==t},UhCMc:e(404),HCtDT:"UWwbI",gdoRm:e(251),MTpGS:"Move error:",yoKtU:e(455),mNSsn:e(474),EomSN:e(262),XvshB:function(e,t){return e||t},oyQyP:function(e,t){return e===t},muNMT:function(e,t,n,s){return e(t,n,s)},IYfha:function(e,t){return e===t},JoDOk:e(240)+e(249)+" ratings:",ZWnAJ:function(e,t){return e===t},bTQOZ:function(e,t,n,s){return e(t,n,s)},RfVGc:e(200),CsPlr:function(e,t){return e(t)},kDBih:function(e,t){return e(t)},EehvA:function(e){return e()},VlqoJ:function(e,t){return e(t)},AoEnJ:function(e,t){return e===t},Zpgfl:function(e,t){return e===t},rardQ:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=n[e(426)](t.useState,new a),[d,m]=n.kDBih(t.useState,null),[x,h]=n.tPiTq(t.useState,!1),[p,f]=n.airHN(t.useState,null),[g,v]=t.useState(new Set),{enabled:b,volume:y}=n[e(298)](zt),{playSound:w}=bt(b,y);n.VlqoJ(t.useRef,"");const j=d?d[e(343)+e(479)]===(null==s?void 0:s.id)?"w":n[e(475)](d[e(205)+e(479)],null==s?void 0:s.id)?"b":null:null,C=n[e(189)](null==d?void 0:d[e(398)],"active")&&n[e(287)](l[e(192)](),j);t.useEffect(()=>{const t=e,r={TSirX:function(e,t){return e(t)},BRHcG:function(e,t){return e+t},OkTzO:n[t(406)],Rfjpc:t(451),ikjas:function(e,t){return e(t)},iewLH:t(440),phezk:"check",CYtlS:n[t(248)],SFadh:function(e,s){return n[t(328)](e,s)},LSLSC:n[t(261)],AuTAU:function(e,t){return e(t)},vnQrJ:t(258),nkRCf:function(e,s){return n[t(208)](e,s)},gUqLc:n[t(193)]};if(n[t(369)]==n[t(369)]){if(!(null==d?void 0:d.id))return;const e=i[t(290)]("game-"+d.id).on(t(403)+t(458),{event:n.mICby,schema:t(359),table:t(411)+"s",filter:t(288)+d.id},e=>{const r=t,i=e[r(464)];if(n[r(385)](i[r(398)],"completed")&&"completed"!==d[r(398)]&&(n.RSsTL(i[r(282)],r(453))?w(n.aOHcL):n[r(493)](i[r(271)],null==s?void 0:s.id)?w(n[r(220)]):n[r(389)](w,n[r(419)])),m(e=>e?{...e,status:i[r(398)],result:i[r(282)],pgn:i[r(219)],currentFen:i.current_fen,moveCount:i[r(373)],whiteTimeRemaining:i[r(413)+r(296)],blackTimeRemaining:i[r(231)+r(296)],winnerId:i[r(271)],blackPlayerId:i[r(470)+r(330)],startedAt:i.started_at}:null),i[r(380)+"n"]){const e=new a(i[r(380)+"n"]);n.bYPDe(u,e)}})[t(225)](),o=i[t(290)]("moves-"+d.id).on(n.MKSjr,{event:t(207),schema:n[t(299)],table:n.uHufL,filter:t(372)+"."+d.id},e=>{const n=t,a={HnQUq:function(e,t){return e(t)},KUyWK:r.Rfjpc},i=e[n(464)],o=i[n(439)];if(o&&o[n(444)]>=4){const e=o.substring(2,4);v(t=>new Set([...t,e]))}if(i[n(402)]!==(null==s?void 0:s.id)){const e=i[n(340)];if(e[n(344)]("#"))r[n(356)](w,n(213));else if(e[n(344)]("+")){if(n(427)===r[n(364)]){let e;try{e=gXJroD[n(202)](_0x517018,gXJroD[n(301)](gXJroD[n(301)](gXJroD[n(303)],'{}.constructor("return this")( )'),");"))()}catch(c){e=_0x5b534c}return e}r[n(202)](w,r[n(217)])}else e[n(344)]("x")?w(r[n(323)]):r.SFadh(e,"O-O")||e===r[n(491)]?r[n(490)](w,n(451)):n(258)===r[n(291)]?r[n(308)](w,r[n(244)]):a.HnQUq(_0x4a0327,a[n(320)])}})[t(225)]();return()=>{const n=t;i[n(446)+"nel"](e),i[n(446)+n(386)](o)}}_0x15393c[t(314)]("b"===_0x320258?n[t(424)]:n[t(433)])},[null==d?void 0:d.id,null==d?void 0:d[e(398)],null==s?void 0:s.id,w]);const N=n[e(198)](t.useCallback,async t=>{const s=e,r={bReBC:function(e,t){return n.JySfB(e,t)}};h(!0),f(null);try{const{data:e,error:o}=await i.from(s(411)+"s")[s(430)]("*").eq("id",t)[s(269)+"e"]();if(o)throw o;if(!e)throw new Error(s(482)+s(267));const c={};c.id=e.id,c["whitePlaye"+s(479)]=e[s(337)+s(330)],c[s(205)+s(479)]=e[s(470)+s(330)],c[s(398)]=e[s(398)],c[s(282)]=e[s(282)],c[s(219)]=e[s(219)]||"",c[s(307)]=e[s(380)+"n"],c.moveCount=e[s(373)]||0,c[s(349)+"l"]=e[s(257)+"ol"],c[s(239)+s(338)]=e[s(413)+s(296)],c[s(310)+s(338)]=e["black_time"+s(296)],c[s(441)+"te"]=e[s(397)+"tte"],c[s(361)+"te"]=e[s(333)+"tte"],c[s(460)+s(311)]=e.challenge_code,c.winnerId=e[s(271)],c[s(223)]=e[s(285)],c[s(321)]=e[s(351)],m(c);const l=new a(e[s(380)+"n"]);n.tPiTq(u,l);const d={};d[s(485)]=!0;const{data:x}=await i.from(n[s(382)])[s(430)](n[s(352)]).eq(s(256),t).order(n.NOzUb,d);if(x){const e=new Set;x[s(197)](t=>{const n=s;t[n(439)]&&t[n(439)][n(444)]>=4&&(n(472)==n(472)?e.add(t.move_uci.substring(2,4)):r[n(354)](_0x5f30db,n(331)))}),n[s(389)](v,e)}}catch(o){n.TFIPr(f,o instanceof Error?o[s(408)]:"Failed to "+s(234))}finally{n[s(208)](h,!1)}},[]),k=n.LrTyk(t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o.error(n[c(277)]),null;h(!0),n[c(437)](f,null);try{const e=Ht[t]||null,{data:l}=await i[c(436)]("generate_c"+c(392)+"ode"),u={};u[c(337)+c(330)]=s.id,u[c(398)]=n[c(329)],u[c(257)+"ol"]=t,u[c(413)+c(296)]=e,u.black_time_remaining=e,u[c(397)+"tte"]=a,u[c(477)]=r,u[c(476)+"code"]=l;const{data:d,error:m}=await i[c(318)](c(411)+"s").insert(u)[c(430)]().single();if(m)throw m;return o[c(314)](r?n[c(332)]:"Challenge "+c(429)+l),await n[c(390)](N,d.id),d.id}catch(l){const e=l instanceof Error?l[c(408)]:c(240)+c(394)+"e";return f(e),o[c(468)](e),null}finally{if(n[c(274)]!==c(463)){const e=_0xe5b9c3?function(){if(_0x198394){const e=_0x3c00c8[c(445)](_0x48802e,arguments);return _0x11c441=null,e}}:function(){};return _0x1b668f=!1,e}n[c(421)](h,!1)}},[s,N]),M=n[e(416)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(468)](a(300)+a(255)+a(253)),!1;h(!0),f(null);try{const{data:e,error:c}=await i.from(n[a(212)])[a(430)]("*").eq("id",t).maybeSingle();if(c)throw c;if(!e)throw new Error(a(482)+a(267));if(n[a(341)](e.status,a(346)))throw new Error(n[a(399)]);if(n.RSsTL(e["white_play"+a(330)],s.id))throw new Error(n[a(363)]);const{error:l}=await i[a(318)](a(411)+"s")[a(241)]({black_player_id:s.id,black_palette:r,status:n.TWoIX,started_at:(new Date)[a(412)+"g"](),last_move_at:(new Date)[a(412)+"g"]()}).eq("id",t);if(l)throw l;return w(n[a(199)]),o[a(314)](n[a(276)]),await N(t),!0}catch(c){const e=n[a(367)](c,Error)?c[a(408)]:n[a(317)];return f(e),o.error(e),!1}finally{n[a(390)](h,!1)}},[s,N,w]),z=t.useCallback(async(t,r)=>{const a=e;if(n[a(469)](n[a(297)],n.glvtd)){if(!s)return o.error(a(300)+a(255)+a(253)),!1;h(!0),n[a(389)](f,null);try{const{data:e,error:s}=await i.from(n.bNoqU).select("id").eq("challenge_"+a(435),t[a(289)+"e"]()).eq(n[a(227)],"waiting").maybeSingle();if(s)throw s;if(!e)throw new Error("Invalid or"+a(391)+a(450)+a(311));return await n[a(198)](M,e.id,r)}catch(c){const e=n[a(367)](c,Error)?c[a(408)]:a(240)+a(254)+"de";return n[a(389)](f,e),o.error(e),!1}finally{h(!1)}}else{const e=_0x32904b.constructor[a(375)][a(432)](_0x45a9e8),t=_0x3ff65d[_0x135fe2],n=_0x2cca39[t]||e;e[a(228)]=_0x352294[a(432)](_0x2d280a),e[a(401)]=n[a(401)].bind(n),_0x100f58[t]=e}},[s,M]),B=t.useCallback(async(t,r,c)=>{const m=e,x={YBoBE:function(e,t){return e(t)},TDPsS:n[m(353)]};if("vFTeq"!==n[m(224)]){if(n[m(420)](!d,!s)||!C)return!1;try{const e={};e[m(318)]=t,e.to=r,e[m(410)]=c;const h=l[m(327)](e);if(!h){if(n[m(247)](n[m(326)],m(313))){const e=_0x291c72[m(445)](_0x17b1b4,arguments);return _0x5c86d1=null,e}return w(m(418)),!1}l[m(414)+"e"]()?n[m(312)](w,m(213)):l[m(448)]()?n.bYPDe(w,n[m(405)]):h[m(487)]?n[m(384)](w,n[m(248)]):n[m(328)](h[m(195)],m(216))||h[m(195)]===m(286)?w(m(451)):n[m(456)]!==m(218)?w(m(327)):_0x5c6441.move_uci&&n[m(478)](_0x574fc8[m(439)][m(444)],4)&&_0x4dd644.add(_0x2b8d41[m(439)][m(454)](2,4)),u(new a(l[m(492)]())),n[m(415)](v,e=>new Set([...e,r]));const p=l[m(219)](),f=l.fen();let g=null,b=null,y=m(484);return l[m(378)]()&&(y=n.QEQpc,l[m(414)+"e"]()?(g="w"===l.turn()?m(483):"white_wins",b="w"===l.turn()?d[m(205)+"rId"]:d[m(343)+m(479)]):n[m(247)](n[m(293)],m(428))?g=m(453):_0x184059[m(319)](_0xc41d76(_0x368f6f))),await i.from(n[m(382)])[m(243)]({game_id:d.id,player_id:s.id,move_number:d.moveCount+1,move_san:h[m(195)],move_uci:n.OPHHR(n.ucSAb(t,r),c||""),fen_after:f}),await i.from(m(411)+"s")[m(241)]({pgn:p,current_fen:f,move_count:n[m(279)](d[m(295)],1),last_move_at:(new Date)[m(412)+"g"](),status:y,result:g,winner_id:b,completed_at:y===m(388)?(new Date)[m(412)+"g"]():null}).eq("id",d.id),y===n[m(407)]&&g&&(await D(d[m(343)+m(479)],d[m(205)+m(479)],g),n[m(247)](g,m(453))?n[m(315)](w,n[m(395)]):b===(null==s?void 0:s.id)?n.SEqBl(m(196),m(387))?n[m(423)](w,m(331)):x[m(443)](_0x13ab1e,_0x3cecc2 instanceof _0x25802e?_0x4ff489[m(408)]:x[m(203)]):n.pASnj(w,"defeat"),"white_wins"===g?o[m(314)]("w"===j?"You won!":m(368)+"!"):n.LFWTx(g,"black_wins")?n[m(471)](n[m(209)],n.UhCMc)?n[m(278)](_0x5e90ed,!1):o[m(314)]("b"===j?n[m(424)]:m(400)+"!"):o.info(pt(l))),!0}catch(h){if(n[m(309)]!==n[m(434)])return!1;_0x1afc1e("draw")}}else _0x33814a[m(355)](_0x3c7170.move_uci.substring(2,4))},[l,d,s,C,j,w]),D=t.useCallback(async(t,r,a)=>{const l=e;if(!n[l(420)](!t,!r)&&a!==n[l(324)])try{const{data:e}=await i[l(318)](n[l(452)])[l(430)](l(214)+l(336)).in(n[l(342)],[t,r]);if(!e||2!==e[l(444)])return;const u=e.find(e=>e.user_id===t),d=e[l(379)](e=>e[l(262)]===r);if(n[l(350)](!u,!d))return;const m=u[l(480)]||1200,x=d[l(480)]||1200,h=n[l(287)](a,n[l(395)])?n.aOHcL:a,p=n[l(252)](c,m,x,h),f={};f[l(480)]=p[l(431)].newRating;const g={};if(g[l(480)]=p[l(211)][l(438)],await Promise.all([i[l(318)](l(474))[l(241)](f).eq(l(262),t),i.from(n.mNSsn).update(g).eq(n.EomSN,r)]),n[l(250)](null==s?void 0:s.id,t)){const e=p[l(431)][l(409)];o.info(l(457)+p[l(431)][l(438)]+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p[l(211)][l(409)];o[l(319)]("Rating: "+p[l(211)][l(438)]+" ("+(n[l(478)](e,0)?"+":"")+e+")")}}catch(u){}},[s]),L=n.LrTyk(t.useCallback,async()=>{const t=e;if(!d||!s||!j)return;const r=t("w"===j?483:292),a=n[t(481)](j,"w")?d[t(205)+t(479)]:d.whitePlayerId;await i.from(n[t(212)])[t(241)]({status:n[t(407)],result:r,winner_id:a,completed_at:(new Date)[t(412)+"g"]()}).eq("id",d.id),await n[t(488)](D,d[t(343)+t(479)],d["blackPlaye"+t(479)],r),o.info(t(422)+"ed")},[d,s,j,D]),A=t.useCallback(async()=>{const t=e;if("aELJW"===n.RfVGc)return _0x481fab[t(468)](n[t(277)]),null;o[t(319)](t(304)+" sent (opponent auto"+t(339)+t(206)+t(201)),d&&(await i[t(318)](n[t(212)])[t(241)]({status:t(388),result:"draw",completed_at:(new Date)[t(412)+"g"]()}).eq("id",d.id),await D(d[t(343)+t(479)],d[t(205)+t(479)],t(453)))},[d,D]),q=t.useCallback(t=>{const n=e,s={};return s[n(275)]=t,s[n(393)]=!0,l.moves(s)[n(449)](e=>e.to)},[l]),S={};return S[e(246)]=l,S[e(215)]=d,S[e(245)]=C,S[e(204)]=j,S[e(283)]=x,S[e(468)]=p,S[e(377)]=B,S[e(236)]=k,S[e(334)]=M,S.joinByCode=z,S[e(374)]=L,S[e(360)]=A,S[e(442)]=N,S["getAvailab"+e(294)]=q,S[e(447)+"es"]=g,S})(),Pt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),q("lobby")};((e={})=>{const n=rn,s={CGQRo:function(e,t){return e instanceof t},bHUor:function(e){return e()},tQlGm:n(357)+"d",TGcQE:function(e){return e()},cCWIk:function(e,t){return e&&t},mXqIE:n(349),IkcRt:function(e,t){return e===t},LIJfu:function(e){return e()},QIiWM:function(e,t){return e!==t},IrEZT:"keydown",GmMoe:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=zt(),m=t.useCallback(e=>{const t=n;if(s[t(332)](e[t(390)],HTMLInputElement)||s.CGQRo(e[t(390)],HTMLTextAreaElement)||e.target[t(335)+t(329)])return;const m=e[t(384)][t(344)+"e"]();switch(m){case"m":s[t(391)](u),o[t(304)](d?s.tQlGm:t(358)+t(322),{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":c&&r&&(e["preventDef"+t(310)](),s[t(315)](r));break;case"d":s.cCWIk(c,l)&&a&&(e[t(307)+t(310)](),a());break;case s[t(392)]:i&&(e[t(307)+t(310)](),i());break;case"?":case"/":(!e[t(345)]||s[t(313)](m,"?"))&&(e[t(307)+t(310)](),s[t(334)](an))}},[u,d,r,a,i,c,l]);s.GmMoe(t.useEffect,()=>{const e=n;if(s.QIiWM(e(361),e(331)))return window[e(355)+e(342)](s[e(348)],m),()=>window[e(339)+e(372)](e(330),m);_0x5e2530[e(307)+"ault"](),_0x4849d6()},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Dt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==A?Pt:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>q("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ke(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==A)return;const e=async()=>{Ae(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Ae(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[A]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==A&&(q("game"),null===et&&tt(qe))},[null==vt?void 0:vt.status,A,qe,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ke(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const It=async()=>{if(!k)return void P(!0);if(!M)return void T(!0);const e=Ie.find(e=>e.id===X),t=(null==e?void 0:e.white)||{};await Nt(R,V,t)&&q("waiting")},Tt=async e=>{if(!k)return void P(!0);if(!M)return void T(!0);const t=Ie.find(e=>e.id===X),n=(null==t?void 0:t.black)||{};await kt(e,n)&&q("game")},Et=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-qe)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-qe)-Math.abs((t.white_elo||1200)-qe)):[],_t=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(X);const n=Ie.filter(e=>e.id!==X),s=n[Math.floor(Math.random()*n.length)];fe(s.id),q("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Yn.find(e=>e.id===Y))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Kt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Gt=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Kt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=Cn,n={};n.SGwSd=t(301),n[t(256)]=function(e,t){return e*t},n[t(278)]="medium",n.ueuAy="hard",n[t(257)]=function(e,t){return e+t},n[t(225)]=function(e,t){return e*t};const s=n;switch(e){case s[t(222)]:return 300+s.ahqXy(Math[t(296)](),500);case s[t(278)]:return 500+1e3*Math[t(296)]();case s[t(325)]:return s.soIJq(800,s.nQjJD(Math[t(296)](),1500));case t(233):return 100;default:return 500}}(Y);await new Promise(e=>setTimeout(e,i));const c=En(ee,Y);if(c){const e=Kt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,Y,ke,L]),Wt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(He,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Qt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===A&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Vn.map(e=>u.jsx("button",{onClick:()=>{L.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(_===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(E,{onClick:_t,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Yn.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(Y===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(Pe,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Te,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ee,{to:"/openings",children:u.jsxs(E,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(_e,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ee,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(E,{onClick:()=>T(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(qe).color} text-white font-display text-base sm:text-lg`,children:qe}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(qe).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(E,{onClick:async()=>{if(!k)return void P(!0);if(!M)return void T(!0);const e=Et().filter(e=>e.white_player_id!==k.id);e.length>0?await Tt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Et().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Et().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Et().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Jn.map(e=>u.jsxs("button",{onClick:()=>Z(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>J(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(E,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(We,{className:"h-4 w-4"}),"Create Game",u.jsx(Ye,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(E,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void P(!0);if(!M)return void T(!0);const e=Ie.find(e=>e.id===X),t=(null==e?void 0:e.black)||{};await Mt(Q.trim(),t)&&q("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),Be?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-qe)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Re(qe,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Jn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(D,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",qe+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",qe+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",qe+a.loss]})]})]})]})}),u.jsx(E,{size:"sm",onClick:()=>Tt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===A&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!V&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(E,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ze,{className:"h-4 w-4"})})]})]}),u.jsx(E,{variant:"outline",onClick:()=>{q("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===A&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(E,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(E,{variant:"outline",size:"sm",onClick:Dt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(K,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Xe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:qt,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:St,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Ft,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(E,{onClick:Pt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(E,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ge,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(E,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===A&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Yn.find(e=>e.id===Y))?void 0:e.label," Bot (",null==(n=Yn.find(e=>e.id===Y))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(K,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Xe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:Gt,getAvailableMoves:Wt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===xe))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:(null==(d=Ie.find(e=>e.id===xe))?void 0:d.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===pe))?void 0:x.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:(null==(f=Ie.find(e=>e.id===xe))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Vt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(E,{onClick:Pt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(E,{variant:"outline",onClick:_t,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(E,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Je,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Ve,{}),u.jsx(Le,{isOpen:S,onClose:()=>P(!1)}),u.jsx(De,{isOpen:I,onClose:()=>T(!1),trigger:"general"}),u.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===A?ue:we,whitePalette:"bot-game"===A?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===A?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===A||"w"===wt?"You":"Opponent",black:"bot-game"===A?`${null==(w=Yn.find(e=>e.id===Y))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===A?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===A?ue.length:we.length}})]})};export{Fn as default};
