const e="/**\n * Temporal Phase Weighting - v7.53-ACCURACY\n * \n * Varies pattern confidence based on game phase.\n * Opening patterns are less predictive than endgame patterns.\n */\n\nexport type GamePhase = 'opening' | 'early_middlegame' | 'late_middlegame' | 'endgame' | 'deep_endgame';\n\nexport interface PhaseWeight {\n  phase: GamePhase;\n  patternWeight: number;      // How much to trust pattern recognition\n  tacticalWeight: number;     // How much to trust calculation\n  horizonMultiplier: number;  // How far ahead predictions are reliable\n  volatilityFactor: number;   // Expected position volatility\n}\n\n/**\n * Phase weights calibrated from historical data\n * Opening: Patterns less reliable (book moves dominate)\n * Endgame: Patterns highly reliable (technique over tactics)\n */\nexport const PHASE_WEIGHTS: Record<GamePhase, PhaseWeight> = {\n  opening: {\n    phase: 'opening',\n    patternWeight: 0.3,\n    tacticalWeight: 0.7,\n    horizonMultiplier: 0.5,\n    volatilityFactor: 0.8,\n  },\n  early_middlegame: {\n    phase: 'early_middlegame',\n    patternWeight: 0.5,\n    tacticalWeight: 0.5,\n    horizonMultiplier: 0.7,\n    volatilityFactor: 0.9,\n  },\n  late_middlegame: {\n    phase: 'late_middlegame',\n    patternWeight: 0.6,\n    tacticalWeight: 0.4,\n    horizonMultiplier: 0.85,\n    volatilityFactor: 0.7,\n  },\n  endgame: {\n    phase: 'endgame',\n    patternWeight: 0.75,\n    tacticalWeight: 0.25,\n    horizonMultiplier: 1.0,\n    volatilityFactor: 0.4,\n  },\n  deep_endgame: {\n    phase: 'deep_endgame',\n    patternWeight: 0.85,\n    tacticalWeight: 0.15,\n    horizonMultiplier: 1.2,\n    volatilityFactor: 0.2,\n  },\n};\n\n/**\n * Determine game phase from move number and piece count\n */\nexport function detectGamePhase(moveNumber: number, pieceCount: number): GamePhase {\n  // Deep endgame: very few pieces\n  if (pieceCount <= 8) {\n    return 'deep_endgame';\n  }\n  \n  // Endgame: reduced material\n  if (pieceCount <= 14) {\n    return 'endgame';\n  }\n  \n  // Opening: first 10-12 moves typically\n  if (moveNumber <= 12) {\n    return 'opening';\n  }\n  \n  // Early middlegame\n  if (moveNumber <= 25) {\n    return 'early_middlegame';\n  }\n  \n  // Late middlegame\n  return 'late_middlegame';\n}\n\n/**\n * Get phase-adjusted confidence for a prediction\n */\nexport function getPhaseAdjustedConfidence(\n  baseConfidence: number,\n  moveNumber: number,\n  pieceCount: number\n): { confidence: number; phase: GamePhase; weights: PhaseWeight } {\n  const phase = detectGamePhase(moveNumber, pieceCount);\n  const weights = PHASE_WEIGHTS[phase];\n  \n  // Adjust confidence based on phase reliability\n  const phaseMultiplier = weights.patternWeight + (weights.tacticalWeight * 0.5);\n  const adjustedConfidence = Math.min(1, baseConfidence * phaseMultiplier * weights.horizonMultiplier);\n  \n  return {\n    confidence: adjustedConfidence,\n    phase,\n    weights,\n  };\n}\n\n/**\n * Calculate optimal prediction horizon based on phase\n */\nexport function getOptimalHorizon(phase: GamePhase, baseHorizon: number = 20): number {\n  const weights = PHASE_WEIGHTS[phase];\n  return Math.round(baseHorizon * weights.horizonMultiplier);\n}\n\n/**\n * Blend tactical and strategic scores based on phase\n */\nexport function blendScores(\n  tacticalScore: number,\n  strategicScore: number,\n  phase: GamePhase\n): number {\n  const weights = PHASE_WEIGHTS[phase];\n  return (tacticalScore * weights.tacticalWeight) + (strategicScore * weights.patternWeight);\n}\n";export{e as default};
