import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as D,ag as z,ai as B,y as L,bF as q,bG as A,b6 as H,ae as P,bH as S,ah as T,bI as I,B as K,bJ as E,bK as G,bL as O,bM as U,bN as _,bO as W,bP as Y,bQ as F,bR as X,bS as R,bT as Z,bU as J,bV as V,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as De,an as ze,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as He,H as Pe,P as Se,ca as Te,b3 as Ie,bs as Ke,be as Ee,cb as Ge,aP as Oe,cc as Ue,d as _e,b2 as We,a9 as Ye,cd as Fe,ce as Xe,cf as Re,al as Ze,au as Je}from"./index-DeSwrHRg.js";import{L as Ve}from"./LiveColorLegend-C24XWvHc.js";import{T as $e}from"./trending-down-CPPuAN0z.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-D3MlCTtk.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function ut(e,t){e-=425;const n=ht();let s=n[e];if(void 0===ut.YOHFZd){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ut.kwPawT=r,ut.BOYDyP={},ut.YOHFZd=!0}const a=e+n[0],i=ut.BOYDyP[a];if(i)s=i;else{const e=function(e){this.ErVPFB=e,this.plBsDo=[1,0,0],this.fmCbZh=function(){return"newState"},this.EroXXK="\\w+ *\\(\\) *{\\w+ *",this.HjHdKO="['|\"].+['|\"];? *}"};e.prototype.pKFOsf=function(){const e=new RegExp(this.EroXXK+this.HjHdKO).test(this.fmCbZh.toString())?--this.plBsDo[1]:--this.plBsDo[0];return this.dNjCgb(e)},e.prototype.dNjCgb=function(e){return Boolean(~e)?this.IMNDgC(this.ErVPFB):e},e.prototype.IMNDgC=function(e){for(let t=0,n=this.plBsDo.length;t<n;t++)this.plBsDo.push(Math.round(Math.random())),n=this.plBsDo.length;return e(this.plBsDo[0])},new e(ut).pKFOsf(),s=ut.kwPawT(s),ut.BOYDyP[a]=s}return s}!function(){const e=ut,t=ht();for(;;)try{if(159997===parseInt(e(426))/1+parseInt(e(453))/2+-parseInt(e(498))/3+-parseInt(e(490))/4*(parseInt(e(470))/5)+-parseInt(e(481))/6+parseInt(e(501))/7*(-parseInt(e(438))/8)+parseInt(e(468))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=ut,r={};r[s(473)]=function(e,t){return e!==t};const a=r,i=e?function(){const e=s,r={};r[e(486)]="Stalemate!";const i=r;if(n){if(a[e(473)](e(437),e(437))){const t={};return t[e(451)]="stalemate",t[e(436)]=e(471)+e(440)+e(428)+e(461),t[e(474)+"ge"]=i[e(486)],t}{const s=n[e(479)](t,arguments);return n=null,s}}}:function(){};return e=!1,i}}()(void 0,function(){const e=ut,t={};t[e(478)]=e(487)+"+$";const n=t;return dt.toString()[e(450)]("(((.+)+)+)+$").toString()[e(444)+"r"](dt)[e(450)](n.uLYbn)});dt();const mt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ut(479)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function ht(){const e=["yxbWBhK","Dg9tDhjPBMC","ody4nJC0DgrRse9g","DNPnDMu","wu1mCNe","zfjLCgv0AxrPBW","C3bSAxq","wgj6zeK","kcGOlISPkYKRkq","AxntDgfSzw1HDa","weHTAKG","mJbfs0Ptt3a","CM4GDgHPCYiPka","qvzfENa","C3vMzMLJAwvUDa","vgToy0K","rhjHDW","uMvWzxrPDgLVBG","sLbLugK","mJyXode5AgvgEKH1","ig1HDgvYAwfSlG","yMLUza","mZaZndvZyuvNqvu","ntaTtw92zsbsDq","sw5ZDwzMAwnPzq","ndyYmdruwNbpz24","Aw5ZDwzMAwnPzq","Bw92zxmGyxzHAq","BgvUz3rO","CMv0DxjUicHMDq","vgHYzwvMB2XKia","AxnjBNn1zMzPyW","C3rHBgvTyxrL","C3b5tu4","BvHhAw8","BwvZC2fNzq","CKTLrK0","ndbes0fZqxy","BwDxCgy","ie5VigXLz2fSia","zxjYB3i","BNqGtwf0zxjPyq","Cgv0AxrPB24U","y29UC3rYDwn0BW","E30Uy29UC3rYDq","AgjYBfy","y25VthC","Aw5MBW","zMLMDhLFBw92zq","C2vHCMnO","CMvHC29U","DgHYzwvMB2XKxW","nJmYmtGWthjXEMzP","vuT0z0u","rNLLAgG","CMvLzM9SzcbYzq","B2zYs00","AwvUDe1HDgvYAq","rhjHDYbIEsb0Aa","ue10uLe","BgfIBguU","AxneCMf3","y3rVCIGICMv0Dq","rvDUs28","x3j1Bgu","BMn0Aw9UkcKG","Du5SEKK","mZeWntqWnuXHtNvLvq","yLvqtwq","mJKZnJe1DNfkv1HK","u3rHBgvTyxrLiq","DhjHy2u","u25MyNG","C2HVCNrnzxnZyq","AxnuAhjLzwzVBa","Bg9N","rKPeEeW","DuXzyM4"];return(ht=function(){return e})()}function xt(e){const t=ut;return function(e){const t=ut,n={};n[t(454)]=t(433),n[t(489)]=t(471),n[t(460)]=t(452)+"repetition",n.FJDxL="Draw by threefold re"+t(443),n[t(469)]="Draw by in"+t(493)+t(499),n[t(455)]=function(e,t){return e>=t},n.TkNcI=t(449)+t(465),n[t(447)]="unknown";const s=n;if(e[t(488)+"e"]()){const e={};return e[t(451)]=s[t(454)],e[t(436)]=t(471)+t(440)+t(428)+t(461),e[t(474)+"ge"]=s[t(489)],e}if(e[t(475)+t(484)+"n"]()){const e={};return e[t(451)]=s[t(460)],e[t(436)]=s[t(477)],e[t(474)+"ge"]=t(431)+t(496),e}if(e[t(432)+t(458)+"al"]()){const e={};return e[t(451)]=t(427)+"nt_material",e[t(436)]=s[t(469)],e.shortMessage=t(425)+t(442)+"l",e}const r=e.fen(),a=parseInt(r[t(485)](" ")[4],10);if(s[t(455)](a,100)){const e={};return e[t(451)]=s[t(494)],e[t(436)]=t(459)+"e fifty-move rule.",e[t(474)+"ge"]=t(502)+"le",e}const i={};return i.reason=s[t(447)],i.message="Game drawn!",i.shortMessage=t(495),i}(e)[t(436)]}mt(void 0,function(){const e=ut,t={YMLrq:function(e,t){return e+t},lGueX:"{}.constru"+e(463)+'rn this")( )',EWnKo:e(459)+e(456)+e(443),mXGio:function(e,t){return e===t},jSwqp:e(430)+e(466),ofrKM:e(446),mgWpf:function(e){return e()},uNlzI:e(476),AVEzp:"warn",spyMN:"table",vzMve:function(e,t){return e<t}},n=t[e(439)](function(){const n=e;let s;try{t[n(435)](n(497),"JPePi")?s=Function(t[n(483)](t[n(483)](t.jSwqp,n(445)+'ctor("retu'+n(491)+" )"),");"))():_0x4ed08d=_0x310a1e(t[n(483)](n(430)+"nction() ",t.lGueX)+");")()}catch(r){if(n(446)!==t[n(457)]){const e={};return e.reason=n(452)+"repetition",e[n(436)]=t[n(464)],e.shortMessage=n(431)+n(496),e}s=window}return s}),s=n.console=n.console||{},r=[t[e(467)],t[e(492)],e(448),e(441),"exception",t[e(434)],e(472)];for(let a=0;t[e(482)](a,r[e(429)]);a++){const t=mt[e(444)+"r"].prototype.bind(mt),n=r[a],i=s[n]||t;t.__proto__=mt[e(500)](mt),t[e(480)]=i.toString[e(500)](i),s[n]=t}})(),function(){const e=gt,t=bt();for(;;)try{if(638884===parseInt(e(238))/1+-parseInt(e(288))/2+parseInt(e(264))/3*(parseInt(e(314))/4)+-parseInt(e(320))/5+-parseInt(e(283))/6*(parseInt(e(293))/7)+parseInt(e(290))/8+-parseInt(e(270))/9*(parseInt(e(322))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(302)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=gt,t={};t[e(243)]=e(253)+"+$";const n=t;return pt[e(339)]().search(n[e(243)])[e(339)]()[e(301)+"r"](pt)[e(260)]("(((.+)+)+)+$")});pt();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(302)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function gt(e,t){e-=234;const n=bt();let s=n[e];if(void 0===gt.OjbpHB){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.CJHhgw=r,gt.pLpTRG={},gt.OjbpHB=!0}const a=e+n[0],i=gt.pLpTRG[a];if(i)s=i;else{const e=function(e){this.gWwZHc=e,this.jCLcqG=[1,0,0],this.UgfrAa=function(){return"newState"},this.TejrVA="\\w+ *\\(\\) *{\\w+ *",this.FOWhBt="['|\"].+['|\"];? *}"};e.prototype.pdePCf=function(){const e=new RegExp(this.TejrVA+this.FOWhBt).test(this.UgfrAa.toString())?--this.jCLcqG[1]:--this.jCLcqG[0];return this.twoasz(e)},e.prototype.twoasz=function(e){return Boolean(~e)?this.GjLCSa(this.gWwZHc):e},e.prototype.GjLCSa=function(e){for(let t=0,n=this.jCLcqG.length;t<n;t++)this.jCLcqG.push(Math.round(Math.random())),n=this.jCLcqG.length;return e(this.jCLcqG[0])},new e(gt).pdePCf(),s=gt.CJHhgw(s),gt.pLpTRG[a]=s}return s}ft(void 0,function(){const e=gt,t={};t[e(272)]=e(312),t.WfFRa="iJSqQ",t.YTgPp=function(e,t){return e+t},t.LhLFM="{}.constru"+e(261)+e(318)+" )",t[e(239)]=e(342),t.JFucX=e(332),t[e(287)]=function(e,t){return e<t};const n=t,s=function(){const t=e;if(n[t(272)]!==n.WfFRa){let e;try{e=Function(n[t(329)]("return (fu"+t(265)+n[t(273)],");"))()}catch(s){e=window}return e}if(_0x45f53f){const e=_0x2b865d[t(302)](_0x4206e9,arguments);return _0x5777ef=null,e}}(),r=s[e(303)]=s.console||{},a=[e(235),n[e(239)],e(256),"error",e(254),e(271),n[e(263)]];for(let i=0;n[e(287)](i,a[e(292)]);i++){const t=ft[e(301)+"r"].prototype.bind(ft),n=a[i],s=r[n]||t;t[e(244)]=ft[e(280)](ft),t[e(339)]=s[e(339)].bind(s),r[n]=t}})();const vt=(e=!0,n=.5)=>{const s=gt,r={OPQRv:function(e,t){return e===t},QuqOT:s(240)+s(327)+s(237),GOUvs:function(e){return e()},TKbOy:function(e,t){return e||t},MMPDa:function(e,t){return e+t},ZldeW:function(e,t){return e+t},sNsOA:function(e,t){return e+t},DwWyv:function(e,t){return e*t},HPRfB:function(e,t){return e+t},PFRTR:s(289),QJcTi:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ZCTix:function(e,t,n){return e(t,n)},NuIdr:s(296),zoiMp:s(331),TwjMS:function(e,t,n,s,r,a){return e(t,n,s,r,a)},OTKwU:s(316),wOfMi:function(e,t,n){return e(t,n)},hMKUe:"gameEnd",NCdZj:s(334),hxQtF:s(330),pFftj:function(e,t,n){return e(t,n)},UDlBy:function(e,t,n,s,r,a){return e(t,n,s,r,a)},LJOZU:s(274),yWpWu:s(286),WJWkU:function(e,t,n,s,r,a){return e(t,n,s,r,a)},gOzfT:function(e,t,n,s,r,a){return e(t,n,s,r,a)},SYmlw:function(e,t){return e(t)},ICuSc:"return (fu"+s(265),FOsLf:function(e,t){return e===t},ESlxh:s(250),icKDu:function(e,t,n){return e(t,n)}},a={};a[s(319)]=null,a[s(299)]=null;const i=t.useRef(a),o=r[s(255)](t.useCallback,()=>{const e=s;if(r[e(248)](e(335),e(297)))_0x33cfa5[e(247)][e(299)][e(336)][e(306)]=_0x360189;else{if(i[e(247)][e(319)])return;try{const t=new(window[e(282)+"xt"]||window[e(317)+e(295)]),s=t[e(266)]();s[e(245)](t[e(304)+"n"]),s[e(336)][e(306)]=n;const r={};r[e(319)]=t,r.gainNode=s,i[e(247)]=r}catch(t){}}},[n]);r.ZCTix(t.useEffect,()=>{const e=s;i[e(247)].gainNode&&(i[e(247)][e(299)][e(336)][e(306)]=n)},[n]);const c=r.icKDu(t.useCallback,(t,n,a=s(331),c=.01,l=.1,u)=>{const d=s;if(!e)return;r.GOUvs(o);const{context:m,gainNode:h}=i.current;if(r[d(258)](!m,!h))return;const x=m["createOsci"+d(325)](),p=m[d(266)]();x[d(344)]=a,x[d(315)][d(259)+d(276)](t,m[d(284)+"e"]),u&&x[d(315)]["exponentialRampToVal"+d(267)](u,m.currentTime+n),p[d(336)][d(259)+"Time"](0,m[d(284)+"e"]),p[d(336)][d(279)+d(309)+d(275)](1,r[d(234)](m[d(284)+"e"],c)),p[d(336)]["exponentia"+d(249)+d(267)](.01,r[d(278)](m[d(284)+"e"],n)-l),p[d(336)][d(279)+d(309)+d(275)](0,m[d(284)+"e"]+n),x[d(245)](p),p[d(245)](h),x[d(269)](m.currentTime),x[d(291)](r.sNsOA(m[d(284)+"e"],n))},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;r[a(313)](o);const{context:c,gainNode:l}=i[a(247)];if(!c||!l)return;const u=r[a(277)](c[a(257)],t),d=c.createBuffer(1,u,c[a(257)]),m=d[a(338)+"Data"](0);for(let e=0;e<u;e++)m[e]=r[a(277)](Math[a(268)](),2)-1;const h=c[a(307)+a(281)]();h[a(236)]=d;const x=c["createBiqu"+a(337)]();x.type=a(326),x[a(315)][a(306)]=n;const p=c[a(266)]();p[a(336)][a(259)+a(276)](.3,c[a(284)+"e"]),p.gain[a(246)+a(249)+a(267)](.01,c.currentTime+t),h.connect(x),x[a(245)](p),p[a(245)](l),h[a(269)](c[a(284)+"e"]),h.stop(r.HPRfB(c.currentTime,t))},[e,o]),u=r[s(251)](t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(323)]:r.QJcTi(c,800,.08,n(331),.005,.05),c(400,.06,n(334),.005,.04);break;case n(241):r[n(251)](l,.12,2e3),c(300,.1,r.NuIdr,.005,.08),c(150,.15,r[n(333)],.01,.1);break;case n(343):r.TwjMS(c,600,.06,n(331),.005,.04),r[n(251)](setTimeout,()=>c(700,.06,"sine",.005,.04),80);break;case r[n(294)]:c(880,.15,n(334),.01,.1),r.ZCTix(setTimeout,()=>c(1100,.12,n(334),.01,.08),120);break;case"checkmate":c(880,.2,r[n(333)],.01,.15),setTimeout(()=>c(660,.2,n(331),.01,.15),150),r[n(251)](setTimeout,()=>c(440,.3,n(331),.01,.2),300),setTimeout(()=>c(330,.4,"sine",.01,.3),500);break;case n(300):r[n(321)](c,523,.12,r[n(333)],.01,.08),r[n(255)](setTimeout,()=>c(659,.12,n(331),.01,.08),100),r.wOfMi(setTimeout,()=>c(784,.2,"sine",.01,.15),200);break;case r.hMKUe:c(440,.15,r[n(341)],.01,.1),setTimeout(()=>c(349,.25,"triangle",.01,.2),150);break;case r[n(252)]:c(523,.1,n(331),.01,.08),r[n(251)](setTimeout,()=>c(659,.1,n(331),.01,.08),100),setTimeout(()=>c(784,.1,n(331),.01,.08),200),r.pFftj(setTimeout,()=>c(1047,.3,n(331),.01,.25),300);break;case"defeat":r.UDlBy(c,392,.2,r[n(333)],.02,.15),r[n(310)](setTimeout,()=>c(349,.2,n(331),.02,.15),200),setTimeout(()=>c(330,.3,n(331),.02,.25),400),setTimeout(()=>c(262,.4,n(331),.02,.35),650);break;case r.LJOZU:c(440,.15,"sine",.01,.1),setTimeout(()=>c(440,.15,n(331),.01,.1),180),r.ZCTix(setTimeout,()=>c(523,.2,"sine",.01,.15),360);break;case r[n(242)]:r.WJWkU(c,200,.1,r.NuIdr,.005,.08),r.gOzfT(c,150,.08,n(298),.005,.06)}},[e,c,l]);r[s(255)](t.useEffect,()=>{const e=s,t={MZmBv:function(e,t){return r[gt(305)](e,t)},rrDHl:"TFGlV"};if(e(250)===r.ESlxh)return()=>{const n=e;if(i[n(247)][n(319)])if(t[n(328)](t.rrDHl,n(308)))i[n(247)][n(319)][n(340)]();else{if(_0x3df16e[n(247)].context)return;try{const e=new(_0x3b51ef[n(282)+"xt"]||_0x113cdb[n(317)+n(295)]),t=e[n(266)]();t[n(245)](e.destination),t[n(336)][n(306)]=_0x2d5fd5;const s={};s[n(319)]=e,s.gainNode=t,_0x315a18[n(247)]=s}catch(s){_0x4c0d39[n(342)]("Web Audio API not supported")}}};{let t;try{t=NLcFUQ[e(324)](_0x3c80ec,NLcFUQ[e(262)]+(e(285)+e(261)+e(318)+" ));"))()}catch(n){t=_0x540100}return t}},[]);const d={};return d.playSound=u,d.initAudio=o,d};function bt(){const e=["B0nVBNrLEhq","C3f1yxjL","CKj4rLu","C2f3Dg9VDgG","z2fPBK5Vzgu","z2fTzvn0yxj0","y29UC3rYDwn0BW","yxbWBhK","y29UC29Szq","zgvZDgLUyxrPBW","rK9Ztgy","DMfSDwu","y3jLyxrLqNvMzG","vezhBfy","vg9wywX1zuf0va","CezMDgO","B25vDMy","vwDwzeq","r09vDNm","nJHLqxbtBgO","zNjLCxvLBMn5","y2HLy2S","D2vIA2L0qxvKAq","CM4GDgHPCYiPka","y29UDgv4Da","mtK2mZu1v25xyLHy","uuPJvgK","otqXnteZmhrJBfLJEq","uezsvfi","u1LTBhC","BgXHDg9Y","Bg93CgfZCW","qvbjig5VDcbZDq","tvPTqNy","wvrNuha","DMLJDg9YEq","C2LUzq","DhjHy2u","EM9Ptxa","DhjPyw5NBgu","uvbUr3K","z2fPBG","ywrgAwX0zxi","z2v0q2HHBM5LBa","Dg9tDhjPBMC","y2XVC2u","tKnKwMO","D2fYBG","y2fZDgXL","DhLWzq","tu1qrge","Bg9N","yNvMzMvY","ChbVCNrLza","mtiYmZeZmxvrwhL1uW","BerXtue","v2vIief1zgLVia","y2fWDhvYzq","EvDWv3u","ufbZvKy","x19WCM90B19F","y29UBMvJDa","zxHWB25LBNrPyq","y3vYCMvUDa","t1bruNy","BfjHBxbuB1zHBa","ELfiEMy","wKnuAxG","AhHrDey","kcGOlISPkYKRkq","zxHJzxb0Aw9U","D09MtwK","Aw5MBW","C2fTCgXLuMf0zq","veTIt3K","C2v0vMfSDwvbDa","C2vHCMnO","y3rVCIGICMv0Dq","sun1u2m","sKz1y1G","mta5ntqYwMvoELbs","BMn0Aw9UkcKG","y3jLyxrLr2fPBG","DwvbDfrPBwu","CMfUzg9T","C3rHCNq","ovzbsxruAG","DgfIBgu","zxnYDw4","tgHmrK0","zhjHDW","Aw1L","vgLTzq","rhDxExy","wMXKzvC","BgLUzwfYuMfTCa","yMLUza","zxjtB3vYy2u","qxvKAw9dB250zq","mtjuD3n4sLe","y3vYCMvUDfrPBq","E30Uy29UC3rYDq","AwXSzwDHBa","C3b0EwO","mJu1odm4yLPhEfvb","Bw92zq","mJK2mZiWmfHKrK5bsq","C3rVCa","BgvUz3rO","mtyZmZm4n2v3r3DzzW","t1rlD1u"];return(bt=function(){return e})()}function yt(){const e=["BujYzwK","Dg9tDhjPBMC","kcGOlISPkYKRkq","B09RBwO","yMLUza","DgfIBgu","zw5HyMXLza","tevsvhe","mZeXotm0nLryAuXovG","zc1Zzxr0Aw5NCW","q0jRExe","nZGWmJi4yLP2ENzN","u2XMvfO","BgvUz3rO","Bg9N","mti3mZyYnKHorLLyra","ChjVDg90ExbL","C2vHCMnO","mZm4z3PArMXb","ntG0ndy1mgfvzfbnCq","zxHJzxb0Aw9U","mtfrr2rIv3q","zxjYB3i","nde5mte0nhjwywnOsq","BKXnELG","mJeXnJe5nuHODhfsCW","mtLhseT3u2O","n0PuzKr4va","odu2nZjHDfrlDhm","z3bPEMm","AerutuC","ufLTwhy","Aw5MBW","DxDXvuG","CMv0DxjUicHMDq","ngnfDLHRDW","yxbWBhK","y29UC3rYDwn0BW","y29UC29Szq","DhjHy2u","ofrrsNr6Eq","y3rVCIGICMv0Dq"];return(yt=function(){return e})()}const wt=Nt;!function(){const e=Nt,t=yt();for(;;)try{if(417260===parseInt(e(240))/1*(-parseInt(e(242))/2)+parseInt(e(229))/3+parseInt(e(249))/4*(-parseInt(e(239))/5)+parseInt(e(237))/6*(-parseInt(e(241))/7)+-parseInt(e(212))/8*(parseInt(e(222))/9)+-parseInt(e(233))/10*(-parseInt(e(235))/11)+-parseInt(e(225))/12*(-parseInt(e(232))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){const e=Nt,t={};t[e(226)]=e(214),t.CBkyq=function(e,t){return e!==t};const n=t;let s=!0;return function(e,t){const r=s?function(){const s=Nt;if(n[s(226)]==n[s(226)]){if(t){if(n[s(224)]("MwuSA","dGeAX")){const n=t[s(250)](e,arguments);return t=null,n}{const e=_0x2ae275?function(){if(_0xe72411){const e=_0x27b8c5.apply(_0xa7e325,arguments);return _0x4fc8f3=null,e}}:function(){};return _0x427276=!1,e}}}else if(_0x475058){const e=_0x4b9d64[s(250)](_0xfa0c43,arguments);return _0x4661e7=null,e}}:function(){};return s=!1,r}}()(void 0,function(){const e=Nt,t={};t[e(238)]=e(216)+"+$";const n=t;return jt[e(215)]()[e(231)]("(((.+)+)+)+$")[e(215)]()[e(251)+"r"](jt)[e(231)](n[e(238)])});jt();const Ct=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Nt(e,t){e-=212;const n=yt();let s=n[e];if(void 0===Nt.vcZMYq){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.iDfegF=r,Nt.GRfNJD={},Nt.vcZMYq=!0}const a=e+n[0],i=Nt.GRfNJD[a];if(i)s=i;else{const e=function(e){this.ysKqOb=e,this.joNHNR=[1,0,0],this.oYkxpa=function(){return"newState"},this.sdxmmr="\\w+ *\\(\\) *{\\w+ *",this.HdILCp="['|\"].+['|\"];? *}"};e.prototype.XBXOeM=function(){const e=new RegExp(this.sdxmmr+this.HdILCp).test(this.oYkxpa.toString())?--this.joNHNR[1]:--this.joNHNR[0];return this.quhfAr(e)},e.prototype.quhfAr=function(e){return Boolean(~e)?this.lEJQHF(this.ysKqOb):e},e.prototype.lEJQHF=function(e){for(let t=0,n=this.joNHNR.length;t<n;t++)this.joNHNR.push(Math.round(Math.random())),n=this.joNHNR.length;return e(this.joNHNR[0])},new e(Nt).XBXOeM(),s=Nt.iDfegF(s),Nt.GRfNJD[a]=s}return s}Ct(void 0,function(){const e=Nt,t={LERTq:function(e,t){return e(t)},oOkmj:e(248)+"nction() ",uwqUH:function(e){return e()},hDTMG:e(228),PYmXv:"warn",gpizc:e(253)},n=t[e(247)](function(){const n=e;let s;try{s=t[n(221)](Function,t[n(217)]+"{}.constru"+n(213)+'rn this")( ));')()}catch(r){s=window}return s}),s=n[e(252)]=n[e(252)]||{},r=[t[e(244)],t[e(245)],e(246),e(236),e(234),e(219),t[e(243)]];for(let a=0;a<r[e(227)];a++){const t=Ct[e(251)+"r"][e(230)].bind(Ct),n=r[a],i=s[n]||t;t.__proto__=Ct.bind(Ct),t.toString=i[e(215)][e(218)](i),s[n]=t}})();const kt={};kt.name="chess-soun"+wt(223);const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(220)]}))}),kt)),Dt=qt;function zt(){const e=["qxPVrLy","CgDU","yvzZsg0","y2fZDgXL","zwXVx3jHDgLUzW","CgXHEwvYx2LK","DxDWv2q","ruv6D3u","DMLJDg9YEq","mti4mfvZEwrYrG","zxnuyLm","AxnmB2fKAw5N","sejbENa","AM9PBIbIEsbJBW","sM9PBMvKigDHBq","yw1Xtxe","BgvnB3zLCW","tg5Au2i","EfLRrK0","q2HHBgXLBMDLia","y29Kzq","C3rHDhvZ","vxbnC0S","zMvU","r0zMu1a","y3jLyxrLzef0","B2rL","DgLTzunVBNrYBW","CMvZDwX0","wLLhC2K","z1fOD2W","wuvpDxG","ywXS","y3jLyxrLzf9HDa","ndu2nJLgEMvnD2y","igDHBwu","x19WCM90B19F","BgXTzgS","z2fTzvn0yxrL","vfjTDKC","BfnhwMK","y2HHBgXLBMDLqW","weLUv2C","D2HPDgvFDgLTzq","ihbSyxLPBMCGyq","Bw92zv9Zyw4","D2PHruK","y3jLyxrLigDHBq","z2fTzq","vhrUrLi","yMXHy2TFD2LUCW","rhjHDYbVzMzLCG","rhj1Ee4","rM5WD1y","y29UC29Szq","tKTsseC","Bw92zunVDw50","D2fYBG","mtm1mZC1ofDvvgLdva","CMfWAwrFmtu","AM9PBIbNyw1L","AxndAgvJAW","y2HLC3nFBw92zq","BxLdB2XVCG","zM9YrwfJAa","CM4GDgHPCYiPka","D3HlzeG","Aw4GysbNyw1L","y29UC3rYDwn0BW","y2HLy2S","s2n4wfO","rNDAAK8","AgfSBgvUz2vFyW","zhKGC3rHCNrLza","q2fUBM90igPVAq","B25LBNqGyxv0BW","Bwf5yMvtAw5NBa","wKTNDfC","vuvwyKG","tuTJDgW","Bg9N","qM1mwg0","Be9fsu0","lwfJy2vWDhmGAq","BMv3uMf0Aw5N","wfHZuKG","uKXMCgK","su5trvju","BIbPBIb0BYbJCG","EKPvthG","ywrK","EMjmzwO","qwTer0u","Bw92zxmT","yMXHy2TFDgLTzq","z2fTzvn0yxj0","vKPTr3G","BwfRzu1VDMu","EMHUtgC","ANr4teu","CKjRyve","BgvUz3rO","zwqHifDHAxrPBG","BePdBfe","sLjyrfC","zMLUza","zxjFAwq","yNvSBgv0xZe","DwHNy1C","uhjzBLa","BwvZC2fNzq","q2vOqxq","DhrL","v2HPDguGD2LUCW","AgfSBgvUz2uGyW","ihnLBNqGkg9WCa","ww91ihjLC2LNBG","BMn0Aw9UkcKG","Bw92zxm","ChjVzMLSzxm","sLHdBKG","Bw92zq","ndy1nZj0A1vsq1K","D2HPDgvFCgXHEq","AxndAgvJA21HDa","Bvrjr3q","B0LzCha","AM9PBKj5q29Kzq","ChvIBgLJ","y3vYCMvUDf9Mzq","v3vvD1G","suPwzeW","DeXYuuq","y3rVCIGICMv0Dq","zhjHDW","q0rmtgq","AuDOsKO","C3vJy2vZCW","Dw50Aw1Lza","ihjHDgLUz3m6","ywHSy04","AxnnEvr1CM4","D2HPDgvFD2LUCW","z2fTzs0","z2fTzv9Pza","y2fWDhvYzq","BMv3","C2fU","BKXOrwO","tgDLDwG","A0PgDfG","AKHqrK0","vxLJuwS","kcGOlISPkYKRkq","BMvS","zwf0zsbHigDHBq","zseGww91igfYzq","C3vIC3rYAw5N","Dg9ju09tDhjPBG","C2vSzwn0","zMfxD2C","uuLsrvy","BMrAtxa","odG4otaWtwnnse1Y","BIb5B3vYig93BG","y2fWDhvYzwq","ChjVBw90Aw9U","Eejys1a","DhvYBG","tNLuy0K","D2LSEKO","r05pDMC","D2LUBMvYx2LK","CfPhzvq","yxnJzw5KAw5N","C3vIC2nYAwjL","sg5OCuO","r2fTzsbUB3qGzG","r0zoz3m","z2vUzxjHDgvFyW","vgPAEgS","r2fTzsbJCMvHDa","y2HLy2TTyxrL","y2HHBgXLBMDLxW","BKzKzfi","D2HPDgvFCgfSzq","AKvez1u","qMXHy2SGD2LUCW","BIb0AgLZihzLCG","tw92zsbLCNjVCG","Bg9HzcbNyw1L","t3vRyM8","Bw92zv91y2K","tLPLyNG","tY1plu8","DMvYyM9Zzq","AM9PBKDHBwu","yxbWBhK","AujAtMS","DxnLCL9Pza","vMrgvNK","yMXHy2TFCgXHEq","q2npvfK","yMXPDhPFnq","DgLTzv9JB250CG","yMXHy2TqBgf5zq","y2HLC3nFz2fTzq","yMXHy2S","CKjcDvK","y29KztOG","Aw5MBW","CKLK","mZq2mfnQCuPrrq","seDmyve","wuTuvMu","yMLUza","rfrKyw8","E30Uy29UC3rYDq","r2fTzsbHBhjLyq","DxnLCL9PzcWGzq","suTXCLO","ruLfAuS","zxjYB3i","D25lufy","y3jLyxrLr2fTzq","C2vHCMnO","y2HHBMDL","y2HHBM5LBa","DxbKyxrL","wg5puhO","mtm4nJqYshbLy2j2","DgfIBgu","zYbMB3iGB3bWBW","yMXHy2TuAw1LuG","z2v0qxzHAwXHyG","D2fPDgLUzW","Aujgru0","ugXLyxnLihnPzW","BIbPBIb0BYbQBW","vKDTuKO","zw1HAw5PBMC","zNjVBq","BwfMBMO","tKXOBum","mZa2ntaWogLTwuPVsG","Aw5JBhvKzxm","zgvMzwf0","C3Dtwfm","Dg9vChbLCKnHCW","B3vUza","CNbJ","x3jLBwfPBMLUzW","CunWtfG","CMvTB3zLq2HHBG","D2HPDgvqBgf5zq","yMXHy2TqywXLDa","reLbsge","uMf0Aw5NoIa","Bw92zv9JB3vUDa","y29TCgXLDgvK","DxbKyxrLievmtW","vLjPuLm","u3HRrhi","Bw92zwrtCxvHCG","AgrSD2S","Dg9tDhjPBMC","ywn0AxzL","A1LUvNi","Cg9ZDgDYzxnFyW","yw1lyxe","rgjuvMm","B3jKzxi","r21YA0C","AgTeshy","ww91ihDVBIe","C05RC28","ChjVDg90ExbL","D0rbDuG","C3rfA28","rMfPBgvKihrVia","u3n1whi","sw52ywXPzcbVCG"];return(zt=function(){return e})()}!function(){const e=qt,t=zt();for(;;)try{if(116317===-parseInt(e(724))/1+-parseInt(e(616))/2+parseInt(e(528))/3+-parseInt(e(706))/4*(-parseInt(e(503))/5)+-parseInt(e(657))/6+-parseInt(e(552))/7+parseInt(e(738))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){const e=qt,t={lJClQ:e(594),pRLbN:function(e,t){return e instanceof t},YEOux:e(491)+e(541)+"e",RvuBg:function(e,t){return e(t)},hkDHv:function(e,t){return e!==t}};let n=!0;return function(s,r){const a=e,i={gQhwl:a(544),adldh:function(e,t){return e===t},CYNcj:a(628),uDQcS:t[a(597)],wilzJ:function(e,n){return t.pRLbN(e,n)},kJFtX:t[a(525)],oIYpp:function(e,n){return t.RvuBg(e,n)}};if(t[a(767)](a(630),a(654))){const e=n?function(){const e=a,t={GFNgs:e(753),nLhEj:i[e(524)],ZYGsi:function(e,t){return i.adldh(e,t)},NyTcI:i.CYNcj};if(r){if("mAgob"!==i.uDQcS){const e=r.apply(s,arguments);return r=null,e}_0x4e9e45=t[e(672)],_0x474b45[e(618)+"e"]()?(_0x5aea1b="w"===_0x499bc0[e(662)]()?t[e(642)]:e(636),_0x18f656=t[e(523)](_0x408cef[e(662)](),"w")?_0x22e2a6[e(699)+e(705)]:_0x5639bf[e(748)+e(705)]):_0x47be66=t[e(663)]}}:function(){};return n=!1,e}{const e=i[a(664)](_0x92c8c6,_0x1e02ca)?_0x2ef9a3.message:i[a(644)];return i[a(620)](_0xa583c9,e),_0x2049b5[a(716)](e),null}}}()(void 0,function(){const e=qt,t={};t[e(501)]=e(647)+"+$";const n=t;return Bt[e(759)]()[e(719)](e(647)+"+$").toString()[e(562)+"r"](Bt)[e(719)](n[e(501)])});Bt();const Lt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(691)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function qt(e,t){e-=487;const n=zt();let s=n[e];if(void 0===qt.JcOLkm){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.ftZFHx=r,qt.XbGBaU={},qt.JcOLkm=!0}const a=e+n[0],i=qt.XbGBaU[a];if(i)s=i;else{const e=function(e){this.UFHDOe=e,this.xWYYtm=[1,0,0],this.HCbLjh=function(){return"newState"},this.LIsqRv="\\w+ *\\(\\) *{\\w+ *",this.momMLU="['|\"].+['|\"];? *}"};e.prototype.vvXbsn=function(){const e=new RegExp(this.LIsqRv+this.momMLU).test(this.HCbLjh.toString())?--this.xWYYtm[1]:--this.xWYYtm[0];return this.pPMSaP(e)},e.prototype.pPMSaP=function(e){return Boolean(~e)?this.bxEfHt(this.UFHDOe):e},e.prototype.bxEfHt=function(e){for(let t=0,n=this.xWYYtm.length;t<n;t++)this.xWYYtm.push(Math.round(Math.random())),n=this.xWYYtm.length;return e(this.xWYYtm[0])},new e(qt).vvXbsn(),s=qt.ftZFHx(s),qt.XbGBaU[a]=s}return s}Lt(void 0,function(){const e=qt,t={pZGeT:function(e,t){return e(t)},tHYCj:"return (fu"+e(611),JVsSg:e(711)+e(627)+e(559)+" )",jtxLE:e(551)};let n;try{n=t[e(667)](Function,t.tHYCj+t.JVsSg+");")()}catch(a){n=window}const s=n[e(548)]=n[e(548)]||{},r=[e(574),t[e(593)],e(704),e(716),"exception",e(725),"trace"];for(let i=0;i<r[e(595)];i++){const t=Lt[e(562)+"r"][e(488)][e(709)](Lt),n=r[i],a=s[n]||t;t[e(530)]=Lt[e(709)](Lt),t[e(759)]=a[e(759)][e(709)](a),s[n]=t}})();const At={};At[Dt(601)]=60,At[Dt(697)]=300,At[Dt(553)]=900,At[Dt(632)]=0;const Ht=At,Pt=Tt;!function(){const e=Tt,t=Gt();for(;;)try{if(187907===-parseInt(e(429))/1+-parseInt(e(438))/2*(parseInt(e(419))/3)+parseInt(e(458))/4+-parseInt(e(427))/5+-parseInt(e(447))/6*(parseInt(e(428))/7)+parseInt(e(412))/8*(parseInt(e(448))/9)+parseInt(e(446))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const St=function(){const e=Tt,t={};t[e(415)]=e(440);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(415)]==n[a(415)]){const e=s?function(){if(r){const e=r[a(414)](t,arguments);return r=null,e}}:function(){};return s=!1,e}{const e=_0x46e490[a(414)](_0x284d04,arguments);return _0xcf6d6e=null,e}}}()(void 0,function(){const e=Tt,t={};t.uAudR=e(411)+"+$";const n=t;return St[e(454)]().search(e(411)+"+$")[e(454)]().constructor(St)[e(461)](n[e(449)])});function Tt(e,t){e-=411;const n=Gt();let s=n[e];if(void 0===Tt.YcKyKj){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tt.XfqpAz=r,Tt.KUGZxR={},Tt.YcKyKj=!0}const a=e+n[0],i=Tt.KUGZxR[a];if(i)s=i;else{const e=function(e){this.uhpioT=e,this.FKgCzM=[1,0,0],this.EmwugR=function(){return"newState"},this.esnvqV="\\w+ *\\(\\) *{\\w+ *",this.UiZtCD="['|\"].+['|\"];? *}"};e.prototype.JHNFuZ=function(){const e=new RegExp(this.esnvqV+this.UiZtCD).test(this.EmwugR.toString())?--this.FKgCzM[1]:--this.FKgCzM[0];return this.WfTrED(e)},e.prototype.WfTrED=function(e){return Boolean(~e)?this.OCjeCC(this.uhpioT):e},e.prototype.OCjeCC=function(e){for(let t=0,n=this.FKgCzM.length;t<n;t++)this.FKgCzM.push(Math.round(Math.random())),n=this.FKgCzM.length;return e(this.FKgCzM[0])},new e(Tt).JHNFuZ(),s=Tt.XfqpAz(s),Tt.KUGZxR[a]=s}return s}St();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Tt(414)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();It(void 0,function(){const e=Tt,t={WrHVb:"wfMaH",KSbpp:function(e,t){return e+t},KhvGb:function(e,t){return e+t},cwIer:e(455)+e(435)+e(423)+" )",obZtj:function(e){return e()},yBxBg:function(e,t){return e<t}},n=t[e(441)](function(){const n=e;if(t.WrHVb===n(433)){let e;try{e=Function(t.KSbpp(t[n(457)](n(442)+n(439),t[n(463)]),");"))()}catch(s){e=window}return e}{const e=_0x535531?function(){if(_0x4586a5){const e=_0x4f1ddc[n(414)](_0x544fd8,arguments);return _0x200a0b=null,e}}:function(){};return _0x28130b=!1,e}}),s=n.console=n.console||{},r=["log","warn",e(421),"error",e(431),"table",e(460)];for(let a=0;t[e(459)](a,r[e(453)]);a++){const t=It.constructor.prototype.bind(It),n=r[a],i=s[n]||t;t[e(432)]=It[e(422)](It),t[e(454)]=i[e(454)].bind(i),s[n]=t}})();const Kt={light:10};Kt[Pt(456)]=25,Kt[Pt(420)]=50,Kt[Pt(452)]=[10,50,20],Kt[Pt(418)]=[50,30,50,30,50],Kt[Pt(417)]=5;const Et=Kt;function Gt(){const e=["zgjHy2SGzMfPBa","zxHJzxb0Aw9U","x19WCM90B19F","D2znyuG","AxntDxbWB3j0zq","y3rVCIGICMv0Dq","CeLhEwC","AgfWDgLJCW","mZyZmen2Bu9IsG","BMn0Aw9UkcKG","s3rdBKK","B2jADgO","CMv0DxjUicHMDq","Bw1WENG","Dw5KzwzPBMvK","ugLLENe","odG4odKZmhH2z1jpAG","odm1nJjmu1z2qwK","nJqYnJLzy3vAAwi","Duf1zfi","zwq6","t3zrqvi","C3vJy2vZCW","BgvUz3rO","Dg9tDhjPBMC","E30Uy29UC3rYDq","BwvKAxvT","s2H2r2i","nJK5mtqWz0jsEKvl","Euj4qMC","DhjHy2u","C2vHCMnO","BgDxChK","y3Djzxi","kcGOlISPkYKRkq","mJGWvNzJC3jO","DxDOEue","yxbWBhK","ChrMvgG","sgfWDgLJigzLzq","C2vSzwn0Aw9U","zxjYB3i","ntmXzKvSC3Le","AgvHDNK","Aw5MBW","yMLUza","CM4GDgHPCYiPka","DMLICMf0zq","rg90vMq","qKf3ruW","mtmXmdq0nuLTzMLgyq","mtmZtgvrA29I","mJC3nZq5rgzNB0TA"];return(Gt=function(){return e})()}const Ot=()=>{const e=Pt,n={uwhyA:"JXloV",pIGyg:function(e,t){return e in t},mmpzx:function(e,t,n){return e(t,n)},BAwEL:function(e,t,n){return e(t,n)},yoqWy:function(e,t,n){return e(t,n)},Piezq:function(e,t,n){return e(t,n)},OvQAR:function(e,t,n){return e(t,n)}},s=typeof navigator!==e(444)&&n[e(436)](e(424),navigator),r=n[e(443)](t.useCallback,(t="light")=>{const r=e;if(n[r(413)]===r(462)){const e=_0x3200e4?function(){if(_0x362209){const e=_0x31b43a[r(414)](_0xee7059,arguments);return _0x3020f2=null,e}}:function(){};return _0x38a6c4=!1,e}if(!s)return!1;try{if(r(425)==r(425)){const e=Et[t];return navigator[r(424)](e)}if(_0x561f13){const e=_0x3f51e3[r(414)](_0x1f4d28,arguments);return _0x5e83a2=null,e}}catch(a){return!1}},[s]),a={select:n[e(426)](t.useCallback,()=>r(e(417)),[r]),move:t.useCallback(()=>r("light"),[r]),capture:n.yoqWy(t.useCallback,()=>r(e(456)),[r]),check:t.useCallback(()=>r(e(420)),[r]),victory:t.useCallback(()=>r(e(452)),[r]),error:n[e(445)](t.useCallback,()=>r(e(418)),[r]),castle:n[e(451)](t.useCallback,()=>!!s&&navigator[e(424)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator[e(424)]([10,30,10,30,20]),[s])},i={};return i[e(434)+"d"]=s,i.vibrate=r,i[e(437)]=a,i},Ut={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},_t=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Wt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Ot();let D=null;try{D=l()}catch{}const z=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=_t(B?7-e:e,B?7-t:t),l=null==(i=z[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=z[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[z,b,w,r,a,B,h,n,s,M]),H=t.useCallback(e=>{if(!(null==D?void 0:D.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?D.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):D.setHoveredSquare(null)},[D,L]),P=t.useCallback(()=>{(null==D?void 0:D.setHoveredSquare)&&D.setHoveredSquare(null)},[D]),S=t.useCallback(e=>{if(!D)return!1;const{highlightedPiece:t,lockedPieces:n}=D,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[D,g]),T=D&&(null!==D.highlightedPiece||D.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=_t(s,a),o=null==(n=z[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,x=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=S(i),j=T&&g&&!y,N=T&&y;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>H(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),H(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Ut[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Yt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Ft=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Yt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,h=d%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Xt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Rt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:G,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:E,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Zt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:G,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:E,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===h))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(H,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(S,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(T,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Xt[e],s=n.icon;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(I,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(K,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Rt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(K,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Ft,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(O,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(U,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(_,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(K,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(W,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(F,{children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(X,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(R,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(Z,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(J,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(F,{children:[u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsx(X,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(Z,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(V,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx($,{}),re.capture.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx($,{}),re.checkmate.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(x,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Jt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx($e,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(x,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Vt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(K,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(O,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs(K,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},Qt=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=he(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=xe(),{setCapturedTimelineState:D,setReturningFromOrder:z}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,H]=t.useState(!1),[P,S]=t.useState(""),[T,I]=t.useState(!1),[E,G]=t.useState(!1);se(p);const O=t.useMemo(()=>p?fe(p):null,[p]),U=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});S(e)}catch(e){}})()},[e]);const _=async e=>{if(e&&!v)return void I(!0);if(!B.current)return;H(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{H(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(K,{variant:L?"outline":"default",size:"sm",onClick:()=>U(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(K,{variant:L?"default":"outline",size:"sm",onClick:()=>U(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&h&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",O&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",O]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(K,{onClick:()=>_(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(K,{onClick:()=>_(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?Me(h,c.totalMoves):De;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(K,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;D({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),z(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(ze,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:T,onClose:()=>I(!1),onAuthRequired:()=>{I(!1),G(!0)},trigger:"download"}),u.jsx(Le,{isOpen:E,onClose:()=>G(!1)})]})},en=un;!function(){const e=un,t=hn();for(;;)try{if(520561===-parseInt(e(505))/1*(-parseInt(e(527))/2)+-parseInt(e(478))/3+-parseInt(e(484))/4*(-parseInt(e(509))/5)+parseInt(e(494))/6*(parseInt(e(522))/7)+-parseInt(e(525))/8+parseInt(e(510))/9+parseInt(e(543))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[un(491)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=un,t={};t[e(535)]=e(549)+"+$";const n=t;return tn[e(498)]()[e(512)](e(549)+"+$")[e(498)]().constructor(tn)[e(512)](n[e(535)])});tn();const nn=function(){const e={};e[un(552)]="kuzxy";const t=e;let n=!0;return function(e,s){const r=n?function(){const n=un;if(s){if(n(536)!==t[n(552)]){const t=s[n(491)](e,arguments);return s=null,t}{const e={};e[n(507)]=4e3,_0x3e0c4b[n(531)]("Shortcuts:"+n(521)+"=Resign, D"+n(482)+"=Lobby, ?="+n(496),e)}}}:function(){};return n=!1,r}}();nn(void 0,function(){const e=un,t={};t[e(486)]=e(485),t[e(520)]=e(531),t[e(529)]=e(538);const n=t;let s;try{s=Function("return (fu"+e(474)+(e(489)+e(501))+'rn this")( ));')()}catch(i){s=window}const r=s[e(539)]=s[e(539)]||{},a=[n.pHEuI,"warn",n[e(520)],e(532),"exception",e(540),n[e(529)]];for(let o=0;o<a[e(499)];o++){const t=nn[e(504)+"r"][e(502)][e(519)](nn),n=a[o],s=r[n]||t;t[e(528)]=nn[e(519)](nn),t.toString=s[e(498)][e(519)](s),r[n]=t}})();const sn=()=>{const e=un,t={};t[e(511)]=e(476)+e(521)+"=Resign, D"+e(482)+"=Lobby, ?="+e(496);const n=t,s={};s[e(507)]=4e3,o[e(531)](n[e(511)],s)},rn={};rn[en(550)]="M",rn.action="Toggle sound on/off";const an={key:"R"};an[en(533)]=en(492)+en(493)+en(546);const on={};on[en(550)]="D",on[en(533)]=en(483)+en(497)+"n)";const cn={};cn[en(550)]="Esc",cn[en(533)]=en(500)+"lobby / Ex"+en(547)+"een";const ln={};function un(e,t){e-=473;const n=hn();let s=n[e];if(void 0===un.PoqqYh){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};un.gFSAEu=r,un.dHPPDe={},un.PoqqYh=!0}const a=e+n[0],i=un.dHPPDe[a];if(i)s=i;else{const e=function(e){this.tpkmra=e,this.vTTtQa=[1,0,0],this.QjfKKs=function(){return"newState"},this.Cbfzwg="\\w+ *\\(\\) *{\\w+ *",this.xfQhki="['|\"].+['|\"];? *}"};e.prototype.EfpPUj=function(){const e=new RegExp(this.Cbfzwg+this.xfQhki).test(this.QjfKKs.toString())?--this.vTTtQa[1]:--this.vTTtQa[0];return this.IHLJin(e)},e.prototype.IHLJin=function(e){return Boolean(~e)?this.ldMerr(this.tpkmra):e},e.prototype.ldMerr=function(e){for(let t=0,n=this.vTTtQa.length;t<n;t++)this.vTTtQa.push(Math.round(Math.random())),n=this.vTTtQa.length;return e(this.vTTtQa[0])},new e(un).EfpPUj(),s=un.gFSAEu(s),un.dHPPDe[a]=s}return s}ln[en(550)]="?",ln.action="Show keyboard shortc"+en(537);const dn={};dn[en(550)]=en(480),dn[en(533)]="Play/Pause"+en(488);const mn={};function hn(){const e=["nti3nJi4rvPMwLDX","zxnJyxbL","sgvSCa","icH5B3vYihr1CG","Dg9tDhjPBMC","BgvUz3rO","uMv0DxjUihrVia","y3rVCIGICMv0Dq","ChjVDg90ExbL","khnOB3CGywXSkq","y29UC3rYDwn0BW","mJm0mZDyCg5Zr1K","yxvSDa","zhvYyxrPB24","u0LzBLO","ndyWnZvRte5mExq","mJyXodeZnLfyv2LQqW","zM9cD1O","C2vHCMnO","u291BMqGBxv0zq","ywrKrxzLBNrmAq","AxndB250zw50rq","wLjbuhK","DeXPC3rLBMvY","wuDUuMu","yMLUza","thHnELy","ie09txv0zsWGuG","mtrOt2n2re8","shzTuNu","uhjLDMLVDxmGBq","ndu1otu4nfrAyxvczW","r28GDg8GC3rHCG","mKT1v2jgEa","x19WCM90B19F","ze1cqLq","C3rLBMvY","Aw5MBW","zxjYB3i","ywn0Aw9U","BhnJCMvLBIbTBW","C29KD04","zg5hs2S","DxrZ","DhjHy2u","y29UC29Szq","DgfIBgu","vg9Nz2XLl2v4Ca","sg9Tzq","mZG0ndeXmg5HCM96qq","CuXUywO","DgfYz2v0","CgXHEsK","AxqGzNvSBhnJCG","ChjLDMvUDerLzG","kcGOlISPkYKRkq","A2v5","rw5K","wwnOquK","vg9Nz2XLigjVyq","BMn0Aw9UkcKG","CMqGy29VCMrPBG","u2HVCNrJDxrZoG","wMTiBwm","mJa4otiXmNPRCfzKAq","Dg9mB3DLCKnHCW","u3bHy2u","B3zL","purYyxCSievZyW","t2zMzxiGzhjHDW","mZK2EfPgweT4","Bg9N","CeHfDuK","A2v5zg93BG","ihrPBwvSAw5L","E30Uy29UC3rYDq","wwnZueK","yxbWBhK","uMvZAwDUigDHBq","zsaOzhvYAw5Nia"];return(hn=function(){return e})()}mn.key="â†",mn[en(533)]=en(524)+en(481);const xn={};xn[en(550)]="â†’",xn.action="Next move";const pn={};pn[en(550)]=en(542),pn[en(533)]=en(526)+"t";const fn={};fn[en(550)]=en(551),fn[en(533)]="Go to end "+en(503);const gn={key:"F"};gn[en(533)]="Toggle ful"+en(534)+"de";const vn={};vn[en(550)]="C",vn.action=en(473)+en(475)+"ates";const bn={};bn[en(550)]="L",bn[en(533)]=en(541)+"and legend";const yn=jn;!function(){const e=jn,t=Nn();for(;;)try{if(646275===-parseInt(e(390))/1+-parseInt(e(349))/2+-parseInt(e(319))/3*(parseInt(e(367))/4)+parseInt(e(345))/5*(parseInt(e(391))/6)+parseInt(e(383))/7*(parseInt(e(395))/8)+-parseInt(e(342))/9*(parseInt(e(285))/10)+parseInt(e(293))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wn=function(){const e={};e[jn(397)]=function(e,t){return e===t};const t=e;let n=!0;return function(e,s){const r=n?function(){const n=jn;if(t[n(397)](n(358),n(368))){const e=_0x263f86.apply(_0xce7bf1,arguments);return _0x4aa479=null,e}if(s){const t=s[n(354)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}()(void 0,function(){const e=jn,t={};t[e(380)]="(((.+)+)+)+$";const n=t;return wn[e(386)]().search(n[e(380)])[e(386)]().constructor(wn).search(n[e(380)])});function jn(e,t){e-=254;const n=Nn();let s=n[e];if(void 0===jn.xXxmPC){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};jn.giljWL=r,jn.qPcUeh={},jn.xXxmPC=!0}const a=e+n[0],i=jn.qPcUeh[a];if(i)s=i;else{const e=function(e){this.OixsZo=e,this.hvhEFE=[1,0,0],this.opzKWz=function(){return"newState"},this.LjquHR="\\w+ *\\(\\) *{\\w+ *",this.MnEpoh="['|\"].+['|\"];? *}"};e.prototype.ZTavOy=function(){const e=new RegExp(this.LjquHR+this.MnEpoh).test(this.opzKWz.toString())?--this.hvhEFE[1]:--this.hvhEFE[0];return this.semjEB(e)},e.prototype.semjEB=function(e){return Boolean(~e)?this.OpTeSs(this.OixsZo):e},e.prototype.OpTeSs=function(e){for(let t=0,n=this.hvhEFE.length;t<n;t++)this.hvhEFE.push(Math.round(Math.random())),n=this.hvhEFE.length;return e(this.hvhEFE[0])},new e(jn).ZTavOy(),s=jn.giljWL(s),jn.qPcUeh[a]=s}return s}wn();const Cn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Nn(){const e=["CMf0Aw5N","DhvYBG","ywnRihrVigHHCG","zMXVB3i","DhjHy2u","yMvZDe1VDMu","u2nUDKG","DMfSDwf0Aw9Ula","C3rVy2TMAxnO","mtm0mdmZmhfgrxrxtq","q2X1yIbqBgf5zq","AxneCMf3","ueTbC1a","AxntDgfSzw1HDa","DgvYAwfSigf3yq","Cw9Hrfa","uMvHBcbotLvfia","otuWndmZmfjsu2Peua","BM90ihjLywr5la","r2LVC1e","y3rVCIGICMv0Dq","BK1oALu","CgTKCKq","DhLWzq","C2XPy2u","zgvWDgG","shfgzNi","A2rcBKG","zwfZEq","x19WCM90B19F","rNHSshC","DMvYyM9Zzq","BxL2wg4","yMLUza","Dw5KBW","BuTrvfG","u0jLufC","zcbTB2rL","FJmYmda","sfLYq0K","y1rAqK0","shbdu1K","Du1Iweq","m0jIzKzSua","zxHJzxb0Aw9U","CM4GDgHPCYiPka","y29SB3i","yxjIvKq","Eg9nA1q","Au9tr2m","twfRzxmGCMfUza","zgzevNi","DvD3sha","DgfIBgu","Dg9mB3DLCKnHCW","CMvK","BgvUz3rO","y29UC29Szq","ignHChr1CMvZ","zw5NAw5Lug93zq","vLD0y3O","Bw92zq","BwLU","BgfIzwW","zMLUza","EfzPCxG","ouDLuLzIyq","qxbHA0C","FJGWma","mtCYodC4me5tzxbvEG","uwLgEKS","zMLSDgvY","qMfZAwmGDgfJDa","mtaXnta3nejmCg5vrW","v0fXzK0","t3rstum","uwPVueK","BMn0Aw9UkcKG","yxbWBhK","y2fWDhvYzwq","y29UC3rYDwn0BW","zMvU","ufL5wvO","zK1nvgO","igzHBgXPBMCGyG","uhHgq2u","FJiWmda","B20GBw92zxmSia","ufPXCvu","C2nVCMu","BxrNuM0","mJqXntmXnMLpy1f5BG","seLqzg4","vgHctgW","y09UA1e","yMnjBNO","Bw92zxm","tMj6ALK","v0TVu3O","yM9HCMq","C1L6q0K","rfvJzuK","ChjVDg90ExbL","yw5HBhL6zvbVCW","vu1tENK","q2XVzuC","AxrPB24","mteXntCWmKzJqNDgzq","E30Uy29UC3rYDq","C29YDa","Dg9tDhjPBMC","D2fYBG","D2fPDfjLywr5","u3rVy2TMAxnOia","nJq3mty4Bfn0B2fy","mtHxvfnjz2W","whbbq0K","qwX0wfi","ChjVBw90Aw9U","mZjWzgHZzMC","AxndAgvJA21HDa","z1zXywu","tfD2v0W","zgvZy3jPChrPBW","CMv0DxjUicHMDq","Bw9vvfG","zxjYB3i","BxHTtxK","BLDzAKO","zw1hve0","CMfUzg9T","txLJuxy","CMnOigrLChrO","Bg9N","z2jJAhu","qKjStfO","vvHKCe4","A1zRuxO","Bw92zsbLCNjVCG","Bwf4","Aw5MBW","CMvUzxnZ","Aw5JBhvKzxm","C2fU","B2nJyxnPB25HBa","BwvKAxvT","AgfYza","zNr3rLy"];return(Nn=function(){return e})()}Cn(void 0,function(){const e=jn,t={VWtcz:e(389)+e(294)+e(360)+e(278)+e(313),tvnYm:function(e,t){return e(t)},MycQv:function(e,t){return e+t},BBlLZ:"return (fu"+e(353),QjoPI:function(e,t){return e!==t},AltXR:"cOkVl",bcInz:"eagUL",mtgRm:e(268),KbUuE:e(329),asLwB:e(280),QiFzK:function(e,t){return e<t}};let n;try{n=t.tvnYm(Function,t[e(259)](t[e(263)],"{}.constru"+e(296)+e(321)+" )")+");")()}catch(a){if(!t[e(352)](t[e(393)],t[e(371)]))return _0x218f6e[e(387)](t[e(336)]),_0x1cbf11(_0x4fedfe);n=window}const s=n[e(333)]=n[e(333)]||{},r=["log","warn",t[e(366)],"error",e(320),t.KbUuE,t.asLwB];for(let i=0;t[e(346)](i,r.length);i++){const t=Cn[e(356)+"r"][e(378)][e(309)](Cn),n=r[i],a=s[n]||t;t[e(305)]=Cn[e(309)](Cn),t[e(386)]=a[e(386)][e(309)](a),s[n]=t}})();const kn={p:100,n:320,b:330,r:500,q:900,k:2e4},Mn=kn,Dn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],zn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Bn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Ln=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],qn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],An=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Hn(e){switch(e[jn(330)+"e"]()){case"p":return Dn;case"n":return zn;case"b":return Bn;case"r":return Ln;case"q":return qn;case"k":return An;default:return[]}}function Pn(e){const t=jn,n={xViqx:function(e,t){return e(t)},dfDVr:function(e,t){return e(t)},UxIlb:function(e,t){return e+t},PKAsP:t(384)+t(296)+t(321)+" )",myvXn:t(261),PZqqU:t(387),WKoSz:t(254),iOSGc:function(e,t){return e<t},GiosQ:t(306),zrVHy:function(e,t){return e===t},CloeG:function(e,t){return e>t},nMNjU:function(e,t){return e-t},kdBnH:function(e,t){return e*t}};if(e[t(396)+"e"]())return n[t(295)]===t(369)?{score:n[t(341)](_0x356f96,_0x46b487),move:null}:n.zrVHy(e[t(277)](),"w")?-1/0:1/0;if(e[t(287)]()||e[t(289)+"e"]())return 0;let s=0;const r=e[t(375)]();for(let o=0;o<8;o++)for(let e=0;e<8;e++)if("vHDQH"!==t(343)){const a=r[o][e];if(a){const r=Mn[a[t(299)]]||0,i=n[t(341)](Hn,a.type);let c=0;if(n[t(381)](i[t(332)],0)){c=i["w"===a.color?o:n[t(297)](7,o)][e]}const l=r+c;s+="w"===a[t(322)]?l:-l}}else{let e;try{e=VviEhr[t(327)](_0x5527ca,VviEhr.UxIlb(t(400)+t(353),VviEhr[t(288)])+");")()}catch(i){e=_0x116ec8}const n=e[t(333)]=e[t(333)]||{},s=[VviEhr[t(308)],VviEhr[t(364)],t(268),VviEhr[t(374)],t(320),"table",t(280)];for(let r=0;VviEhr[t(325)](r,s.length);r++){const e=_0x363125[t(356)+"r"][t(378)].bind(_0xee0825),a=s[r],i=n[a]||e;e[t(305)]=_0x28e444[t(309)](_0x417601),e[t(386)]=i[t(386)][t(309)](i),n[a]=e}}const a=e[t(372)]()[t(332)];return s+="w"===e[t(277)]()?n[t(303)](a,2):2*-a,s}function Sn(e,t,n,s,r){const a=jn,i={uWwHp:"mHfWy",XsOKu:function(e,t){return e===t},NlNjC:function(e,t){return e(t)},UXdpN:a(401),xoMkT:a(398),arbVD:function(e,t){return e-t},NbzjY:function(e,t){return e>t},HqFfr:function(e,t){return e<=t},emGTM:function(e,t){return e!==t},mxmMy:a(275),kYlwO:function(e,t,n,s,r,a){return e(t,n,s,r,a)},mKQTX:function(e,t){return e-t},DUceI:function(e,t){return e<t}};if(i.XsOKu(t,0)||e.isGameOver())return{score:i.NlNjC(Pn,e),move:null};const o={};o[a(307)]=!0;const c=e[a(372)](o);if(c[a(385)]((e,t)=>{const n=a;if("mHfWy"===i[n(328)]){let s=0,r=0;return e[n(355)]&&(s+=Mn[e[n(355)]]||0),t.captured&&(r+=Mn[t[n(355)]]||0),e[n(271)][n(270)]("+")&&(s+=50),t[n(271)][n(270)]("+")&&(r+=50),r-s}{const e=_0x2ea9e6?function(){if(_0x3b9fcf){const e=_0x5fc96[n(354)](_0x35a0a1,arguments);return _0x5ca0de=null,e}}:function(){};return _0x7befd6=!1,e}}),r){if(i[a(264)]!==a(401))return 0;{let r=-1/0,o=null;for(const u of c){if(a(318)===i[a(324)]){let e=0,t=0;return _0xe7d1c5[a(355)]&&(e+=_0x2db3cc[_0x4f5500[a(355)]]||0),_0x85a4f8[a(355)]&&(t+=_0x4ed6c3[_0x9ff95.captured]||0),_0x372dab[a(271)][a(270)]("+")&&(e+=50),_0x17d55c[a(271)][a(270)]("+")&&(t+=50),t-e}{e[a(337)](u);const c=Sn(e,i[a(323)](t,1),n,s,!1);if(e.undo(),i[a(373)](c[a(365)],r)&&(r=c[a(365)],o=u),n=Math[a(267)](n,c[a(365)]),i[a(302)](s,n))break}}const l={};return l.score=r,l[a(337)]=o,l}}{let r=1/0,o=null;for(const u of c)if(i[a(257)](a(275),i[a(255)]))_0x299c89=_0x28c2f3;else{e[a(337)](u);const c=i.kYlwO(Sn,e,i[a(311)](t,1),n,s,!0);if(e[a(310)](),i[a(377)](c[a(365)],r)&&(r=c.score,o=u),(s=Math.min(s,c[a(365)]))<=n)break}const l={};return l.score=r,l.move=o,l}}function Tn(e){const t=jn,n={};n[t(370)]=function(e,t){return e===t},n[t(312)]=function(e,t){return e*t};const s=n,r={};r[t(307)]=!0;const a=e[t(372)](r);if(s[t(370)](a[t(332)],0))return null;const i=a[t(347)](e=>e[t(355)]);return i[t(332)]>0&&Math[t(258)]()<.3?i[Math[t(279)](s[t(312)](Math.random(),i[t(332)]))]:a[Math[t(279)](Math.random()*a.length)]}function In(e){const t=jn,n={OtRMC:function(e,t){return e(t)},kVkQz:function(e,t){return e===t},nWYjJ:function(e,t){return e-t},cTZBM:function(e,t){return e>t},XpACI:function(e,t){return e<t}},s={};s[t(307)]=!0;const r=e[t(372)](s);if(n[t(265)](r.length,0))return null;let a=null,i=n[t(265)](e.turn(),"w")?-1/0:1/0;for(const o of r){e[t(337)](o);const s=Pn(e);e.undo(),"w"===e[t(277)]()?n[t(316)](s,i)&&(i=s,a=o):s<i&&(i=s,a=o)}if(n[t(392)](Math.random(),.2)){const s=r[t(385)]((s,r)=>{const a=t;e[a(337)](s);const i=Pn(e);e.undo(),e[a(337)](r);const o=n[a(351)](Pn,e);return e[a(310)](),n[a(265)](e[a(277)](),"w")?o-i:n[a(256)](i,o)}),a=s[t(300)](0,Math[t(338)](3,s[t(332)]));return a[Math[t(279)](Math.random()*a[t(332)])]}return a}function Kn(e){const t=jn;var n,s,r,a,i,o;return(n=Sn,s=e,r=4,a=-1/0,i=1/0,o="w"===e.turn(),n(s,r,a,i,o))[t(337)]}const En={};En.id=yn(304),En[yn(339)]="Beginner",En.description=yn(326)+yn(363)+yn(272)+yn(334),En[yn(276)]=yn(344);const Gn={id:"medium"};Gn[yn(339)]=yn(286)+"r",Gn.description=yn(348)+"ics and ma"+yn(290)+yn(269),Gn[yn(276)]="~1400";const On={id:"hard"};On[yn(339)]="Master",On[yn(399)+"n"]="Advanced e"+yn(283)+" 4-ply sea"+yn(260),On[yn(276)]=yn(362);const Un={};Un.id=yn(284),Un[yn(339)]="Stockfish 16",Un[yn(399)+"n"]=yn(292)+"engine, grandmaster strength",Un[yn(276)]=yn(314),Un[yn(335)+yn(331)]=!0;const _n=[En,Gn,On,Un];function Wn(){const e=["ChjVDg90ExbL","nxHSCeDeCq","Cwvvqxm","B25nB3vZzvvW","E30Uy29UC3rYDq","CM4GDgHPCYiPka","vfD5y2m","mta1oti3m1fHuu1cwa","y29UC29Szq","DgfIBgu","DhjHy2u","mty3nde2Eg9tCNzp","vMPwteu","C2vHCMnO","ywjZ","vfvPy1i","re52ANa","y3vYCMvUDfG","ndy0mZCWnM1dBLfiAG","ENf4vxm","CvPeD1G","y2XPzw50wa","y3vYCMvUDa","AfbYDKe","zxHJzxb0Aw9U","odC4nty4r3rjuNv0","rxfvCLC","x19WCM90B19F","D2fYBG","seXWzgK","Dg91y2HLCW","tvvtA3m","CMv0DxjUicHMDq","DuHkqxy","B25uB3vJAfn0yq","Bg9N","B25nB3vZzu1VDG","B25uB3vJAevUza","nLvIue5SAq","yMLUza","qxzMteW","t0XUtK0","y2XPzw50wq","ntm2ntuZmLPlv1jprq","oti5nJC4mMTKr3PsDq","s1fHCKC","v0PPBxi","ndiZt0n5u1bJ","AxntD2LWAw5N","yuXXsfu","B25nB3vZzuXLyq","BgvUz3rO","t0zIu1K","B25uB3vJAe1VDG","C3rHCNry","C3DPCgvpzMzZzq","y3vYCMvUDfK","y29UC3rYDwn0BW","C3rHCNrz","B25nB3vZzurVDW","mtb4r0f2yuG","kcGOlISPkYKRkq","Dg9tDhjPBMC","BMn0Aw9UkcKG","DvLusM4","nteZmZqWmvLNvhLIsq","wwfzru0","yxbWBhK","Aw5MBW"];return(Wn=function(){return e})()}!function(){const e=Xn,t=Wn();for(;;)try{if(694257===parseInt(e(451))/1+-parseInt(e(482))/2*(-parseInt(e(469))/3)+-parseInt(e(487))/4+parseInt(e(445))/5*(-parseInt(e(462))/6)+parseInt(e(509))/7+-parseInt(e(455))/8*(-parseInt(e(491))/9)+-parseInt(e(504))/10*(parseInt(e(488))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Xn,t={};t[e(459)]=e(505)+"+$";const n=t;return Yn[e(506)]()[e(457)](e(505)+"+$")[e(506)]()[e(501)+"r"](Yn)[e(457)](n.TUicR)});Yn();const Fn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Xn(442)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Xn(e,t){e-=441;const n=Wn();let s=n[e];if(void 0===Xn.YPFItU){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Xn.FZkLma=r,Xn.YqAmkU={},Xn.YPFItU=!0}const a=e+n[0],i=Xn.YqAmkU[a];if(i)s=i;else{const e=function(e){this.OXpwIS=e,this.oYhnwC=[1,0,0],this.BXPLZv=function(){return"newState"},this.wwdIke="\\w+ *\\(\\) *{\\w+ *",this.dLyYrK="['|\"].+['|\"];? *}"};e.prototype.QCkoCF=function(){const e=new RegExp(this.wwdIke+this.dLyYrK).test(this.BXPLZv.toString())?--this.oYhnwC[1]:--this.oYhnwC[0];return this.ihWMIJ(e)},e.prototype.ihWMIJ=function(e){return Boolean(~e)?this.nTEZfd(this.OXpwIS):e},e.prototype.nTEZfd=function(e){for(let t=0,n=this.oYhnwC.length;t<n;t++)this.oYhnwC.push(Math.round(Math.random())),n=this.oYhnwC.length;return e(this.oYhnwC[0])},new e(Xn).QCkoCF(),s=Xn.FZkLma(s),Xn.YqAmkU[a]=s}return s}Fn(void 0,function(){const e=Xn,t={hmAXf:function(e,t){return e(t)},jPnYb:function(e,t){return e+t},YaYEM:e(476)+e(507),HLpdi:e(448)+'ctor("retu'+e(449)+" )",HtUmX:function(e,t){return e!==t},ovpXn:e(463),DJQtm:function(e){return e()},WJimr:e(479),fcUkW:e(472),KQarG:e(453),qeUAs:e(454)},n=t.DJQtm(function(){const n=e;let s;try{s=t.hmAXf(Function,t.jPnYb(t[n(441)],t[n(473)])+");")()}catch(r){if(!t.HtUmX(t.ovpXn,"vUKcr"))return _0x5c8853.toString()[n(457)](n(505)+"+$")[n(506)]()[n(501)+"r"](_0x2333dd)[n(457)]("(((.+)+)+)+$");s=window}return s}),s=n[e(452)]=n[e(452)]||{},r=[t[e(490)],t.fcUkW,e(443),"error",e(468),t[e(489)],t[e(446)]];for(let a=0;a<r[e(495)];a++){const t=Fn.constructor[e(444)][e(483)](Fn),n=r[a],i=s[n]||t;t[e(471)]=Fn[e(483)](Fn),t.toString=i[e(506)][e(483)](i),s[n]=t}})();const Rn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ge,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ge,description:"15 minutes"}],Zn=["bot","create","join"],Jn=()=>{var e,n,s,l,d,h,f,v,b,y,w;me();const[j]=He(),{user:k,isPremium:M}=r(),{haptics:L}=Ot(),[q,A]=t.useState("lobby"),[H,S]=t.useState(!1),[T,I]=t.useState(!1),[E,O]=t.useState("bot"),[U,_]=t.useState("human"),[W,Y]=t.useState("medium"),[F,X]=t.useState("blitz_5"),[R,Z]=t.useState("hotCold"),[J,V]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=vt(Ce,Ne),[Me,De]=t.useState([]),[ze,qe]=t.useState(!1),[Ae,Ge]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Zn.indexOf(E);let n;n="left"===e?Math.min(t+1,Zn.length-1):Math.max(t-1,0),n!==t&&(L.select(),O(Zn[n]))},[E,L]),{swipeOffset:ht,isSwiping:pt,handlers:ft}=((e={})=>{const n=Xn,s={dCwHf:function(e,t){return e-t},AvfLL:function(e,t){return e(t)},DNvjp:function(e){return e()},qZDwX:function(e,t){return e-t},OLnNM:function(e,t){return e-t},OFbSY:function(e,t){return e>t},EqUrW:function(e,t){return e>t},uYTJn:n(493),IhqOh:function(e){return null==e?void 0:e()},yBhMM:function(e,t,n){return e(t,n)},hPrvA:function(e,t,n){return e(t,n)},MUSks:"QpnJR",ZVxdk:function(e){return e()},WAllU:function(e,t,n){return e(t,n)},VjVLE:function(e,t,n){return e(t,n)},TWycc:function(e,t,n){return e(t,n)},uHJAv:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[h,x]=t.useState(!1),p={};p[n(498)]=0,p[n(502)]=0,p[n(461)]=0,p[n(500)]=0,p[n(492)]=!1;const f=t.useRef(p),g=s.WAllU(t.useCallback,(e,t)=>{const s=n,r={};r[s(498)]=e,r.startY=t,r[s(461)]=e,r.currentY=t,r[s(492)]=!0,f.current=r,x(!0)},[]),v=t.useCallback((e,t)=>{const r=n;if(!f[r(466)][r(492)])return;f.current[r(461)]=e,f[r(466)].currentY=t;const a=s.dCwHf(e,f[r(466)][r(498)]),i=t-f.current[r(502)],o={};o.x=a,o.y=i,s[r(484)](m,o)},[]),b=t.useCallback(()=>{const e=n;if(!f[e(466)][e(492)])return;const t=s[e(464)](f[e(466)][e(461)],f.current[e(498)]),a=s[e(485)](f[e(466)][e(500)],f[e(466)][e(502)]),u=Math[e(458)](t),d=Math[e(458)](a);if(s.OFbSY(u,d)&&u>r)s[e(496)](t,0)?s[e(460)](o):null==i||i();else if(d>u&&s.EqUrW(d,r))if(s[e(470)](a,0))if(e(493)!==s[e(508)]){if(!_0x56b708)return;s[e(460)](_0x419d08)}else s.IhqOh(l);else s[e(460)](c);f[e(466)].isSwiping=!1,s[e(484)](x,!1);m({x:0,y:0})},[r,i,o,c,l]),y=s[n(456)](t.useCallback,e=>{const t=n,s=e[t(474)][0];g(s[t(465)],s[t(486)])},[g]),w=s[n(450)](t.useCallback,e=>{const t=n,r=e.touches[0];s.yBhMM(v,r[t(465)],r[t(486)])},[v]),j=s[n(477)](t.useCallback,()=>{b()},[b]),C=t.useCallback(e=>{const t=n;a&&s[t(467)](g,e[t(465)],e.clientY)},[a,g]),N=t.useCallback(e=>{const t=n;if("jjlZE"===s[t(475)])s[t(460)](_0x1f44f6);else{if(!a)return;v(e[t(465)],e[t(486)])}},[a,v]),k=s[n(456)](t.useCallback,()=>{a&&b()},[a,b]),M=t.useCallback(()=>{const e=n;a&&f[e(466)][e(492)]&&s.ZVxdk(b)},[a,b]),D={};D[n(478)+"rt"]=y,D[n(497)+"e"]=w,D[n(481)]=j,D[n(503)+"n"]=C,D[n(480)+"e"]=N,D[n(447)]=k,D[n(494)+"ve"]=M;const z={};return z[n(499)+"t"]=d,z[n(492)]=h,z.handlers=D,z})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:zt,resignGame:Bt,offerDraw:Lt,loadGame:At,getAvailableMoves:Pt,movedSquares:St}=(()=>{const e=Dt,n={uhgcW:e(740),WuUwX:function(e,t){return e(t)},mTIGt:function(e,t){return e(t)},wnKPV:e(762)+"hanges",NKRHG:"public",stEko:function(e,t){return e(t)},tNSUR:function(e,t){return e(t)},zhnLg:function(e,t){return e(t)},CehAt:e(556)+"s",lSGZi:e(686),swSXS:"move_number",iBFEM:e(708),BmLXm:"Please sig"+e(582)+e(649)+"e",DTdao:e(700)+"s",Lgeuh:e(729),GmrkG:e(675)+e(596)+e(726)+"nent...",XnOPz:function(e,t){return e(t)},BuvBJ:function(e,t){return e instanceof t},DRlRl:e(491)+e(541)+"e",hHvQL:"Please sig"+e(732)+e(561),ndZMp:e(712)+e(567),DAFXF:function(e,t){return e===t},EpPwE:e(589),ZKgtW:function(e,t){return e(t)},AkDGE:e(493)+" expired c"+e(608)+e(520),FnpwV:function(e,t,n){return e(t,n)},AzoFV:function(e,t){return e instanceof t},mpoRF:e(491)+e(507)+"de",HJHcp:function(e,t){return e(t)},aVsHm:e(647)+"+$",rFCAM:e(536),VRiRS:function(e,t){return e===t},TVNto:"illegal",DruxN:function(e,t){return e!==t},TRmvG:e(509),hdlwk:e(676),kYnVr:function(e,t){return e(t)},PrYnP:"check",HnhqJ:e(639),KcxXZ:"O-O",GNOvg:function(e,t){return e(t)},SsuXr:e(760),QIREV:e(544),qCpLX:e(636),CcOTY:function(e,t){return e===t},mafnj:e(628),ZUIhT:function(e,t){return e+t},NLhmC:e(753),lOEIM:function(e,t){return e===t},zCdzs:function(e,t){return e(t)},EIEiK:"victory",wxKdH:e(598),ydFnL:e(678),ahlcN:function(e,t){return e===t},esTbS:function(e,t){return e===t},TjZxk:function(e,t){return e===t},rBBuY:function(e,t){return e||t},xBXKP:function(e,t){return e===t},rAcOf:"abandoned",amKaq:e(693),UycQk:"profiles",UpMsK:function(e,t){return e===t},HGLaQ:e(540),LnZSb:function(e,t){return e===t},VGmRJ:e(491)+e(754)+e(633),GFfSP:function(e,t){return e===t},VJmGx:function(e,t,n,s){return e(t,n,s)},XXsRH:e(610)+"ed",wAeyY:e(545)+e(609)+e(569)+e(577)+e(682)+"sion)",xYkFM:function(e,t,n,s){return e(t,n,s)},CDLLd:function(e){return e()},sNkso:function(e,t){return e(t)},DbTVc:function(e,t){return e(t)},HBAzp:function(e,t){return e(t)},RLfpi:function(e,t,n){return e(t,n)},uwpWd:function(e,t,n){return e(t,n)}},{user:s}=n[e(629)](r),[l,u]=t.useState(new a),[d,m]=t.useState(null),[h,x]=t.useState(!1),[p,f]=n[e(487)](t.useState,null),[g,v]=n[e(764)](t.useState,new Set),{enabled:b,volume:y}=n[e(629)](Mt),{playSound:w}=vt(b,y);n[e(506)](t.useRef,"");const j=d?n[e(504)](d[e(748)+e(705)],null==s?void 0:s.id)?"w":d[e(699)+e(705)]===(null==s?void 0:s.id)?"b":null:null,C=(null==d?void 0:d[e(515)])===n.SsuXr&&n[e(634)](l[e(662)](),j);n[e(547)](t.useEffect,()=>{const t=e,r={IJVdL:"draw",VdFVy:function(e,t){return e===t},GEilt:n[t(602)],zJULx:function(e,t){return e(t)},jHPFM:t(565),Oukbo:function(e,s){return n[t(624)](e,s)},wDAuH:function(e,s){return n[t(624)](e,s)},zbLej:function(e,t){return n.mTIGt(e,t)},uSWIO:t(563),jEDgU:"O-O",DIAHa:function(e,t){return e===t},JXCnH:t(497),XTrDW:t(615)};if(!(null==d?void 0:d.id))return;const o=i[t(721)](t(637)+d.id).on(n[t(717)],{event:"UPDATE",schema:t(622),table:t(700)+"s",filter:"id=eq."+d.id},e=>{const n=t,i=e[n(640)];if(i[n(515)]===n(753)&&d.status!==n(753)&&(i[n(522)]===r[n(625)]?w("draw"):r[n(694)](i.winner_id,null==s?void 0:s.id)?w(n(502)):w(r.GEilt)),r[n(583)](m,e=>e?{...e,status:i[n(515)],result:i[n(522)],pgn:i[n(495)],currentFen:i[n(623)+"n"],moveCount:i.move_count,whiteTimeRemaining:i[n(537)+n(745)],blackTimeRemaining:i[n(588)+"_remaining"],winnerId:i[n(666)],blackPlayerId:i[n(695)+"er_id"],startedAt:i.started_at}:null),i[n(623)+"n"]){if(r[n(645)]!=r[n(645)]){const e=_0x4b1998[n(691)](_0x5c50bc,arguments);return _0x868f52=null,e}{const e=new a(i[n(623)+"n"]);r[n(685)](u,e)}}}).subscribe(),c=i[t(721)](t(587)+d.id).on(n.wnKPV,{event:t(581),schema:n[t(549)],table:t(556)+"s",filter:"game_id=eq."+d.id},e=>{const n=t,a=e[n(640)],i=a[n(686)];if(i&&i.length>=4){const e=i[n(651)](2,4);v(t=>new Set([...t,e]))}if(a[n(499)]!==(null==s?void 0:s.id)){const e=a[n(539)];e.includes("#")?r[n(489)](w,n(676)):e[n(739)]("+")?r[n(585)](w,r.uSWIO):e.includes("x")?w("capture"):e===r[n(680)]||r[n(750)](e,n(688))?w(r[n(614)]):r[n(583)](w,r.XTrDW)}})[t(669)]();return()=>{const e=t;i[e(747)+e(648)](o),i[e(747)+"nel"](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(515)],null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e,r={SxkDr:function(e,t){return n.tNSUR(e,t)}};if(s(531)==s(531)){n[s(490)](x,!0),f(null);try{const{data:e,error:r}=await i[s(735)]("chess_games")[s(653)]("*").eq("id",t).maybeSingle();if(r)throw r;if(!e)throw new Error("Game not f"+s(743));const o={};o.id=e.id,o[s(748)+s(705)]=e["white_play"+s(600)],o[s(699)+"rId"]=e[s(695)+s(600)],o[s(515)]=e[s(515)],o[s(522)]=e[s(522)],o[s(495)]=e[s(495)]||"",o.currentFen=e[s(623)+"n"],o[s(550)]=e[s(752)]||0,o[s(521)+"l"]=e[s(698)+"ol"],o["whiteTimeR"+s(734)]=e[s(537)+s(745)],o[s(727)+s(734)]=e["black_time"+s(745)],o.whitePalette=e[s(679)+s(606)],o[s(749)+"te"]=e.black_palette,o[s(535)+s(520)]=e.challenge_code,o.winnerId=e[s(666)],o[s(519)]=e[s(527)],o.startedAt=e.started_at,n[s(592)](m,o);const c=new a(e[s(623)+"n"]);u(c);const l={};l[s(668)]=!0;const{data:d}=await i.from(n[s(605)])[s(653)](n[s(534)]).eq(s(638),t)[s(765)](n[s(741)],l);if(d){const e=new Set;d[s(558)](t=>{const n=s;t[n(686)]&&t[n(686)][n(595)]>=4&&e[n(584)](t[n(686)][n(651)](2,4))}),v(e)}}catch(o){n[s(490)](f,o instanceof Error?o.message:s(491)+s(684))}finally{n[s(730)]===s(626)?n[s(490)](_0x22c761,s(497)):x(!1)}}else{const e=new _0x437eaf(_0x3df127[s(623)+"n"]);r[s(756)](_0x48595e,e)}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(!s)return o[c(716)](n[c(575)]),null;n[c(490)](x,!0),f(null);try{const e=Ht[t]||null,{data:l}=await i[c(744)](c(673)+c(566)+c(520)),{data:u,error:d}=await i[c(735)](n[c(710)]).insert({white_player_id:s.id,status:n[c(643)],time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l}).select().single();if(d)throw d;return o.success(r?n[c(766)]:c(513)+c(703)+l),await n[c(723)](N,u.id),u.id}catch(l){const e=n.BuvBJ(l,Error)?l[c(604)]:n.DRlRl;return f(e),o[c(716)](e),null}finally{x(!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(716)](n.hHvQL),!1;x(!0),f(null);try{const{data:e,error:c}=await i[a(735)](n[a(710)]).select("*").eq("id",t)[a(570)+"e"]();if(c)throw c;if(!e)throw new Error(a(671)+"ound");if(e[a(515)]!==a(729))throw new Error(n[a(656)]);if(n.DAFXF(e[a(617)+"er_id"],s.id))throw new Error(a(568)+a(658)+a(529));const{error:l}=await i[a(735)](a(700)+"s")[a(722)]({black_player_id:s.id,black_palette:r,status:a(760),started_at:(new Date).toISOString(),last_move_at:(new Date)[a(652)+"g"]()}).eq("id",t);if(l)throw l;return n[a(619)](w,n.EpPwE),o[a(631)](a(508)+a(650)+a(538)+"s Black."),await N(t),!0}catch(c){const e=c instanceof Error?c[a(604)]:a(491)+a(554);return f(e),o[a(716)](e),!1}finally{n[a(571)](x,!1)}},[s,N,w]),D=n[e(547)](t.useCallback,async(t,r)=>{const a=e;if(!s){if(a(543)!==a(573))return o[a(716)](a(731)+a(732)+a(561)),!1;if(_0x15ae13){const e=_0x1e97b7[a(691)](_0x48d143,arguments);return _0x187b0=null,e}}n[a(624)](x,!0),f(null);try{const{data:e,error:s}=await i[a(735)](a(700)+"s")[a(653)]("id").eq(a(677)+a(514),t[a(742)+"e"]()).eq(a(515),a(729))[a(570)+"e"]();if(s)throw s;if(!e)throw new Error(n[a(586)]);return await n[a(547)](M,e.id,r)}catch(c){const e=n[a(494)](c,Error)?c[a(604)]:n.mpoRF;return n.HJHcp(f,e),o[a(716)](e),!1}finally{x(!1)}},[s,M]),z=n[e(580)](t.useCallback,async(t,r,c)=>{const m=e,h={WBNnO:function(e,t){return e(t)},NZebx:function(e,t){return n[qt(490)](e,t)}};if("XInWg"!==n.rFCAM)h.WBNnO(_0x19ccf9,!1);else{if(!d||!s||!C)return!1;try{if(n[m(755)](m(692),m(692))){const e={};e[m(735)]=t,e.to=r,e[m(660)]=c;const h=l[m(615)](e);if(!h)return n[m(592)](w,n.TVNto),!1;if(l[m(618)+"e"]()){if(n[m(546)](m(509),n[m(533)]))return _0x8e6b4a.error(m(731)+m(732)+m(561)),!1;w(n[m(758)])}else l[m(555)]()?n.kYnVr(w,n[m(603)]):h[m(659)]?n[m(761)](w,n[m(670)]):h.san===n[m(564)]||n[m(755)](h[m(641)],m(688))?w(m(497)):n[m(665)](w,m(615));u(new a(l.fen())),n[m(761)](v,e=>new Set([...e,r]));const x=l[m(495)](),p=l[m(517)]();let f=null,g=null,b=n[m(492)];if(l.isGameOver()){if(m(572)!=m(572))return _0x413ae5.toString()[m(719)](m(647)+"+$")[m(759)]()[m(562)+"r"](_0x5dd56f)[m(719)](OUmraF[m(496)]);b="completed",l.isCheckmate()?(f="w"===l[m(662)]()?n.QIREV:n[m(746)],g=n[m(696)](l[m(662)](),"w")?d[m(699)+m(705)]:d["whitePlaye"+m(705)]):f=n.mafnj}return await i[m(735)]("chess_moves").insert({game_id:d.id,player_id:s.id,move_number:n.ZUIhT(d[m(550)],1),move_san:h[m(641)],move_uci:t+r+(c||""),fen_after:p}),await i.from("chess_games")[m(722)]({pgn:x,current_fen:p,move_count:d.moveCount+1,last_move_at:(new Date)[m(652)+"g"](),status:b,result:f,winner_id:g,completed_at:b===n[m(737)]?(new Date)[m(652)+"g"]():null}).eq("id",d.id),n.lOEIM(b,n[m(737)])&&f&&(await B(d[m(748)+m(705)],d[m(699)+m(705)],f),f===n[m(736)]?n.ZKgtW(w,n[m(736)]):n[m(576)](g,null==s?void 0:s.id)?n.zCdzs(w,n[m(715)]):n[m(755)](n[m(560)],n.ydFnL)?_0x149aee[m(584)](_0x27d491[m(686)][m(651)](2,4)):n[m(490)](w,"defeat"),n.CcOTY(f,n[m(746)])?o[m(631)](n.ahlcN(j,"w")?"You won!":m(607)+"!"):n[m(504)](f,n[m(655)])?o.success(n[m(674)](j,"b")?m(768):m(681)+"!"):o[m(704)](xt(l))),!0}h[m(687)](_0x1924b8,m(502))}catch(x){return!1}}},[l,d,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e,u={};u[l(714)]=function(e,t){return e===t};const d=u;if(!n[l(702)](!t,!r)&&!n[l(661)](a,n.rAcOf))try{const{data:e}=await i.from(l(613))[l(653)](l(713)+"lo_rating").in(n[l(763)],[t,r]);if(!e||2!==e.length)return;const u=e[l(599)](e=>e.user_id===t),m=e.find(e=>e[l(693)]===r);if(!u||!m)return;const h=u[l(498)]||1200,x=m.elo_rating||1200,p=n.DAFXF(a,n[l(736)])?n[l(736)]:a,f=c(h,x,p),g={};g[l(498)]=f.white.newRating;const v={};if(v[l(498)]=f.black[l(578)],await Promise[l(526)]([i[l(735)](n[l(646)])[l(722)](g).eq("user_id",t),i[l(735)](n[l(646)])[l(722)](v).eq(l(693),r)]),n[l(516)](null==s?void 0:s.id,t))if(n[l(707)]!==l(540))_0x15e85e[l(631)](d.IKqrZ(_0x59f53e,"b")?l(768):"Black wins!");else{const e=f.white[l(720)];o[l(704)](l(751)+f.white[l(578)]+" ("+(e>=0?"+":"")+e+")")}else if(n[l(511)](null==s?void 0:s.id,r)){const e=f[l(701)].change;o.info("Rating: "+f.black[l(578)]+" ("+(e>=0?"+":"")+e+")")}}catch(m){}},[s]),L=n[e(500)](t.useCallback,async()=>{const t=e;if(!d||!s||!j)return;const r=n[t(518)](j,"w")?t(544):n[t(746)],a="w"===j?d[t(699)+"rId"]:d[t(748)+t(705)];await i.from(n[t(710)]).update({status:n[t(737)],result:r,winner_id:a,completed_at:(new Date)[t(652)+"g"]()}).eq("id",d.id),await n[t(590)](B,d[t(748)+"rId"],d[t(699)+t(705)],r),o[t(704)](n[t(579)])},[d,s,j,B]),q=n[e(500)](t.useCallback,async()=>{const t=e;o[t(704)](n.wAeyY),d&&(await i[t(735)](t(700)+"s")[t(722)]({status:t(753),result:n[t(736)],completed_at:(new Date)[t(652)+"g"]()}).eq("id",d.id),await n[t(512)](B,d[t(748)+t(705)],d[t(699)+t(705)],t(628)))},[d,B]),A=t.useCallback(t=>{const n=e,s={};return s.square=t,s[n(689)]=!0,l[n(612)](s).map(e=>e.to)},[l]),H={};return H[e(542)]=l,H[e(532)]=d,H[e(635)]=C,H[e(557)]=j,H[e(505)]=h,H[e(716)]=p,H[e(591)]=z,H[e(718)]=k,H[e(690)]=M,H[e(621)]=D,H.resignGame=L,H.offerDraw=q,H.loadGame=N,H[e(728)+e(510)]=A,H[e(757)+"es"]=g,H})(),Tt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=un,s={YcsPI:function(e,t){return e instanceof t},ZkHmc:"Sound unmuted",YGnRe:function(e,t){return e&&t},HvmRu:n(516),oWVmp:function(e){return e()},SIYnZ:function(e,t){return e&&t},iPOam:function(e){return e()},qLnaj:n(487),bCjjv:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=Mt(),m=s.bCjjv(t.useCallback,e=>{const t=n;if(s[t(490)](e[t(545)],HTMLInputElement)||e[t(545)]instanceof HTMLTextAreaElement||e[t(545)][t(515)+"ditable"])return;const m=e[t(550)][t(479)+"e"]();switch(m){case"m":u(),o[t(531)](d?t(513)+"d":s[t(477)],{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":if(s[t(518)](c,r)){if(s.HvmRu!==s[t(523)]){const e=_0xa0f2b0[t(491)](_0x1f0db7,arguments);return _0x58697e=null,e}e["preventDef"+t(506)](),s.oWVmp(r)}break;case"d":s[t(508)](c,l)&&a&&(e[t(548)+t(506)](),s.iPOam(a));break;case t(495):i&&(e[t(548)+t(506)](),i());break;case"?":case"/":(!e.shiftKey||"?"===m)&&(e["preventDef"+t(506)](),sn())}},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(514)+e(530)](s[e(544)],m),()=>window["removeEven"+e(517)](e(487),m)},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Bt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==q?Tt:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ge(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));De(r)}else De([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==bt?void 0:bt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ge(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const It=async()=>{if(!k)return void S(!0);if(!M)return void I(!0);const e=Te.find(e=>e.id===R),t=(null==e?void 0:e.white)||{};await Nt(F,J,t)&&A("waiting")},Kt=async e=>{if(!k)return void S(!0);if(!M)return void I(!0);const t=Te.find(e=>e.id===R),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Et=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Gt=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),xe(R);const n=Te.filter(e=>e.id!==R),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=_n.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Ut=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},_t=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Ut(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(xt(ee))),!0;oe(!0);const i=function(e){const t=jn,n={};n[t(350)]=function(e,t){return e+t},n[t(298)]=t(273),n[t(282)]=function(e,t){return e*t},n[t(359)]=t(274),n[t(315)]=function(e,t){return e+t};const s=n;switch(e){case"easy":return s.WAqfM(300,500*Math[t(258)]());case s.pkdrD:return 500+s.ScnvH(Math[t(258)](),1e3);case s[t(359)]:return s[t(315)](800,s[t(282)](Math[t(258)](),1500));case t(284):return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=jn,s={sYzCI:n(273),gbchu:function(e,t){return e(t)}};switch(t){case n(304):return Tn(e);case s[n(376)]:return s[n(262)](In,e);case n(274):case n(284):return Kn(e);default:return s[n(262)](Tn,e)}}(ee,W);if(c){const e=Ut(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(xt(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,W,ke,L]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Vt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Zn.map(e=>u.jsx("button",{onClick:()=>{L.select(),O(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(E===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(K,{onClick:Gt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:_n.map(e=>u.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(Se,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Te.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ie,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ke,{to:"/openings",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ee,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ke,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(K,{onClick:()=>I(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(K,{onClick:async()=>{if(!k)return void S(!0);if(!M)return void I(!0);const e=Et().filter(e=>e.white_player_id!==k.id);e.length>0?await Kt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Et().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Et().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Et().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Rn.map(e=>u.jsxs("button",{onClick:()=>X(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Te.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>V(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Oe,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>V(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(K,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(_e,{className:"h-4 w-4"}),"Create Game",u.jsx(We,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ye,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(K,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void S(!0);if(!M)return void I(!0);const e=Te.find(e=>e.id===R),t=(null==e?void 0:e.black)||{};await zt($.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Oe,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),ze?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Fe(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Rn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(D,{children:[u.jsx(z,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),u.jsx(K,{size:"sm",onClick:()=>Kt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!J&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),u.jsx(K,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Xe,{className:"h-4 w-4"})})]})]}),u.jsx(K,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&bt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(K,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(G,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Wt,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||Te[0].white,blackPalette:bt.blackPalette||Te[0].black,movedSquares:St,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ve,{whitePalette:bt.whitePalette||Te[0].white,blackPalette:bt.blackPalette||Te[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ve,{whitePalette:bt.whitePalette||Te[0].white,blackPalette:bt.blackPalette||Te[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&u.jsx(Jt,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:Tt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ue,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=_n.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=_n.find(e=>e.id===W))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(G,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Wt,{fen:ee.fen(),onMove:_t,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Te.find(e=>e.id===he))?void 0:s.white)||Te[0].white,blackPalette:(null==(l=Te.find(e=>e.id===pe))?void 0:l.black)||Te[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ve,{whitePalette:(null==(d=Te.find(e=>e.id===he))?void 0:d.white)||Te[0].white,blackPalette:(null==(h=Te.find(e=>e.id===pe))?void 0:h.black)||Te[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ve,{whitePalette:(null==(f=Te.find(e=>e.id===he))?void 0:f.white)||Te[0].white,blackPalette:(null==(v=Te.find(e=>e.id===pe))?void 0:v.black)||Te[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Zt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:Tt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:Gt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Je,{}),u.jsx(Le,{isOpen:H,onClose:()=>S(!1)}),u.jsx(Be,{isOpen:T,onClose:()=>I(!1),trigger:"general"}),u.jsx(Qt,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:we,whitePalette:"bot-game"===q?(null==(b=Te.find(e=>e.id===he))?void 0:b.white)||Te[0].white:(null==bt?void 0:bt.whitePalette)||Te[0].white,blackPalette:"bot-game"===q?(null==(y=Te.find(e=>e.id===pe))?void 0:y.black)||Te[0].black:(null==bt?void 0:bt.blackPalette)||Te[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=_n.find(e=>e.id===W))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:we.length}})]})};export{Jn as default};
