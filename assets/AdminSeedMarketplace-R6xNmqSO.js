import{d6 as e,d7 as t,cp as s,a as n,u as a,r,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as x,C as f,x as h,D as p,B as g,A as v,p as w,t as y,cN as j,bC as b,S as N,a6 as C,P as D,y as z,bG as M,T as _,aq as B,z as A,cU as L,aj as E,aT as S,ca as q,b as G,d8 as W}from"./index-CDYK3n_t.js";!function(){const e=H,t=K();for(;;)try{if(199865===-parseInt(e(321))/1*(-parseInt(e(450))/2)+-parseInt(e(419))/3*(-parseInt(e(460))/4)+-parseInt(e(404))/5+-parseInt(e(399))/6+-parseInt(e(289))/7+-parseInt(e(425))/8+parseInt(e(258))/9*(parseInt(e(285))/10))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const I=function(){const e=H,t={};t[e(430)]=e(284);const s=t;let n=!0;return function(e,t){const a=n?function(){const n=H;if(n(253)===s[n(430)]){const e=_0x1de1ae[n(294)](_0x4dd218,arguments);return _0x3468fe=null,e}if(t){const s=t.apply(e,arguments);return t=null,s}}:function(){};return n=!1,a}}()(void 0,function(){const e=H,t={};t[e(290)]="(((.+)+)+)+$";const s=t;return I.toString().search("(((.+)+)+)+$")[e(421)]()[e(362)+"r"](I)[e(281)](s[e(290)])});I();const P=function(){let e=!0;return function(t,s){const n=H;if("KMXti"===n(477)){const a=e?function(){if(s){const e=s[n(294)](t,arguments);return s=null,e}}:function(){};return e=!1,a}_0x22f088[n(442)]=()=>{_0x21ad46.drawImage(_0x5730c5,_0x4a492a,_0x41c1fc,_0xd1b011,_0x94c31a),_0x5213e0()},_0x5199ea[n(369)]=()=>_0x520fda(),_0x349826[n(396)]=_0x46b152}}();function K(){const e=["BwvZlcbZzxjPzG","t3PSCLa","iZC4nZe2yW","ugrrDxa","Dg1Tzfm","pc9ZDMC+","y3rvuKW","iIb2Awv3qM94pq","zw50","zNvIC0W","CgLLy2u","lI4U","zMLSBa","rMTIvvC","C2f2zq","C0j5rey","ru4Guevou0vova","y29UC3rYDwn0BW","CfPRsKO","yM9YzgvY","ChruyNa","y2vUDgvY","BgLNAhq","wernAKG","B25LCNjVCG","BgvMDa","Aw1Hz2uVC3zNkW","D2HPDgu","y0LoDMW","sufwrg8","iZi5mJuYna","Bg9HzcbtvKC","BwfYz2LU","CMv2B2TLt2jQzq","tMXlzxm","zMLSBfjLy3q","C1jyswy","CgvUC2vUDc5JBW","iI8+","i2zHzMfMoq","tKnxwNq","Bw92zvrV","Dd11DgyToa","nJaWideZChGGjW","zw9Yz2LHlcbZzq","y29T","4PMuievoifbftLnf","A2rPEee","zxzLBNq","Bw9Yyw50jYWGrW","x19WCM90B19F","C3jJ","ide4ChGGj0nVCG","AgLUz1f1ywXPDa","mtqWmZyXmffeCNb6Bq","BwvHC3vYzvrLEa","z2v0q29UDgv4Da","BMn0Aw9UkcKG","v3DcEvK","ntC0odC1tuHgB2jl","ntaWideXChGGjW","uNL1vwy","vgLTzxmGtMv3ia","ndaWideXChGGjW","AvfbBeW","DhjHy2u","BgvUz3rO","iIb3Awr0Ad0I","uMfRAMO","AgX3B1K","C3rYB2TLu3r5Ba","yMXHy2S","zxjYB3i","CMv0DxjUicHMDq","m21bD2jgrW","AxrHBgLJiduWma","Dg9tDhjPBMC","iIbMAwXSpsi","tfbirgO","CMvZDg9Yzq","mte2oti4CLflwwTY","sw50zxiNlcbZyq","Ahr0Chm6lY9LBG","qMXHy2S","zMLSBfn0EwXL","AhjNvwq","DvbnyMO","yvzVtei","nJaWidi0ChGGjW","wxLVv0O","vMDzv1e","DgniCKS","zhjHD0LTywDL","ihzZia","iZbbmeeWqq","y3jVC3npCMLNAq","BgLUzvrV","B25SB2fK","CuLruum","ueLfs2m","D2LKDgG9iG","y3jLyxrLt2jQzq","yMvNAw5qyxrO","zfrAqKO","yK91BM0","og5twKvKDa","suTftuu","CMvHzhK","uM9Tyw4NlcbZzq","zwv4AKK","sgHNsNG","pZ8/pY4/pY4/pW","yw5VBNLTB3vZ","q2LUEMvSjYWGjW","Aw5JBhvKzxm","mZq3nZq4AuvWqNzl","rMfPBgvKihrVia","iIb5psi","i2u3ztvLna","rur1s0C","EhLfsKm","Bgf5zxjtAxPL","EfHZEwy","DhjHBNnWyxjLBG","vfbgtvq","yxjJ","BLHNuhC","v2HPDgu","D2LKDgG","y3nIy0e","DgfIBgu","ntaWideYChGGjW","s01yDgK","BwLU","Dg9vChbLCKnHCW","phjLy3qGEd0Ima","D3CUDZmUB3jNlW","D2fYBG","ywXS","y3jLyxrLrwXLBq","CLPftKK","y29SB3i","zMLSBfrLEhq","renitwC","AxnmAwDODa","tKfhCgi","ug1rC2i","uufSBgK","mty0ndeYmfLeqwnmDq","C3rYB2TL","CxDitu8","EwvAuNq","zgfYAW","zM9UDhm","ChjVDg90ExbL","Dgv4DefSAwDU","zhrOpsi","vhbYrem","BKDcs2S","EvfssxO","y29UC29Szq","Be9mExi","mJu1lcaYntuSia","CMLM","zxjYB3jdB3jYzq","sw1gCxi","rhPKAfC","vxrJywC","C2nHBgu","DgHfA3G","y1nLyve","C2vHCMnO","wwj1Dxm","Bw92zxm","vNrJANm","mZbeq3rbtwe","tLqG4PMA","tfztBxy","uM9Tyw4NlcbuAq","mJC0nti3nfH4sM9SvW","v3bcELu","y2ney04","zM9UDa","i0zbrKfgqq","yxbWBhK","iIb5psiWiIb3Aq","tvvVEgy","v05NCgm","y1HpEKe","idiWChGGj0nVCG","C3bSAxq","mJaWmc9ZDMCIia","zw5Wzw5Zzw50lG","Bff0CeS","Dg9eyxrHvvjm","Aw1Hz2vtBw9VDa","Dgv4DejHC2vSAq","BNmTC2vYAwy","iJaGmca","BervuvO","zgf0zq","AgLNAa","phjLy3qGEd0I","CxjJB2rL","ndaWideWChGGjW","txf0DLm","AM9PBG","s1HgDu8","ugfUy0m","BMntuLm","svjsAei","odaXndLtzwnKB3m","yMLUza","AgvPz2H0","yxnyAvK","vvjJr2m","DhLWzq","y2fUDMfZ","y3rVCIGICMv0Dq","vvPeBLa","BgLUzvDPzhrO","ywXWAgfIzxrPyW","phn2zYb4BwXUCW","q2D3Aeq","q2DMC0C","DgDhsgS","i2e4yti5zq","zxHJzxb0Aw9U","EfD3tLy","vw5RBM93BG","Cef1Dva","ChvZAa","iIbOzwLNAhq9iG","Eg1So2nOyxjZzq","iZq0ndaZyW"];return(K=function(){return e})()}P(void 0,function(){const e=H,t={TPFMT:function(e,t){return e(t)},xWwNV:function(e,t){return e+t},DzdhW:"{}.constru"+e(328)+'rn this")( )',fNJir:e(337),TprDC:e(410)},s=function(){const s=e;let n;try{n=t[s(469)](Function,t[s(338)](s(418)+s(402)+t[s(276)],");"))()}catch(a){n=window}return n}(),n=s.console=s[e(270)]||{},a=["log",e(247),"info",e(417),t.fNJir,e(475),t[e(267)]];for(let r=0;r<a.length;r++){const t=P.constructor[e(264)][e(322)](P),s=a[r],i=n[s]||t;t[e(395)]=P.bind(P),t[e(421)]=i[e(421)][e(322)](i),n[s]=t}})();async function Z(){const e=H;document[e(263)]&&document[e(263)][e(452)]&&await document[e(263)][e(452)],await new Promise(e=>setTimeout(e,150))}async function T(e,t,s){const n=H,a={fubsL:function(e,t){return e(t)},CgfsG:"Failed to "+n(376),cXOzA:"image/svg+"+n(343)+n(387)};return new Promise((r,i)=>{const o=n,c=new Image,l={};l[o(326)]=a[o(298)];const u=new Blob([e],l),d=URL[o(446)+o(351)](u);c[o(442)]=()=>{const e=o,n=document[e(249)+e(353)](e(327));n[e(473)]=5*t,n.height=5*s;const i=n[e(401)]("2d");i[e(278)](5,5),i[e(437)](c,0,0,t,s),URL["revokeObje"+e(351)](d),a[e(354)](r,n)},c.onerror=()=>{const e=o;URL[e(378)+e(351)](d),i(new Error(a[e(334)]))},c[o(396)]=d})}async function U(e){const t=H,s={};s[t(431)]=t(313),s[t(406)]=t(293);const n=s,a=(await import(n[t(431)])).default,r={};r.dark=e?n[t(406)]:"#1A1A1A",r[t(367)]=t(468)+"t";const i={};return i[t(473)]=200,i[t(377)]=1,i[t(251)]=r,i[t(274)+"ctionLevel"]="M",a[t(304)](t(427)+t(382)+"m",i)}async function Y(){const e=H,t={};t[e(449)]=e(457);const n=t;return new Promise((t,a)=>{const r=e,i=new Image;i[r(440)+"n"]=n[r(449)],i.onload=()=>t(i),i[r(369)]=a,i.src=s})}function H(e,t){e-=244;const s=K();let n=s[e];if(void 0===H.fYDcCK){var a=function(e){let t="",s="",n=t+a;for(let a,r,i=0,o=0;r=e.charAt(o++);~r&&(a=i%4?64*a+r:r,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&a>>(-2*i&6)):i:0)r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(let a=0,r=t.length;a<r;a++)s+="%"+("00"+t.charCodeAt(a).toString(16)).slice(-2);return decodeURIComponent(s)};H.AnhlDb=a,H.PugntE={},H.fYDcCK=!0}const r=e+s[0],i=H.PugntE[r];if(i)n=i;else{const e=function(e){this.pyvSzz=e,this.AyRcgm=[1,0,0],this.hNzjOo=function(){return"newState"},this.aBzJYn="\\w+ *\\(\\) *{\\w+ *",this.OlGbwl="['|\"].+['|\"];? *}"};e.prototype.YFzLOZ=function(){const e=new RegExp(this.aBzJYn+this.OlGbwl).test(this.hNzjOo.toString())?--this.AyRcgm[1]:--this.AyRcgm[0];return this.QdENAD(e)},e.prototype.QdENAD=function(e){return Boolean(~e)?this.JCQKJu(this.pyvSzz):e},e.prototype.JCQKJu=function(e){for(let t=0,s=this.AyRcgm.length;t<s;t++)this.AyRcgm.push(Math.round(Math.random())),s=this.AyRcgm.length;return e(this.AyRcgm[0])},new e(H).YFzLOZ(),n=H.AnhlDb(n),H.PugntE[r]=n}return n}async function k(s,n,a={}){const r=H,i={PmQsb:function(e,t){return e/t},LPHDj:function(e,t){return e+t},UCTyf:r(461)+r(376),qIQQC:r(371)+r(343)+r(387),IKEME:"CJKfG",ccDcN:function(e){return e()},MUoxf:function(e,t){return e*t},uAqBq:function(e,t,s,n){return e(t,s,n)},xyEJC:function(e,t){return e+t},iQAlL:function(e,t){return e+t},nXgPw:function(e,t){return e+t},KXFuO:r(327),lQtpK:function(e,t){return e*t},eexjI:r(311),asXiY:r(439),FkbUW:function(e,t){return e+t},CgwhD:r(375),hlwoY:r(384),PancC:"#78716c",PIEKc:r(336),cSeaQ:r(472),IRRhB:r(428),EDuKG:"middle",pAuuP:r(420)+r(299)+r(394)+r(389)+r(273),fjZDp:r(438),aVoLB:function(e,t){return e+t},IAVDo:function(e,t){return e-t},AEDZh:function(e,t){return e!==t},lOLyr:r(420)+r(397)+"morant', G"+r(389)+r(273),ncSRS:r(366),PdQup:function(e,t){return e||t},DEZoW:r(476)+r(426)+r(307),pZkJJ:function(e,t){return e+t},WNgpc:function(e,t){return e>t},thEkx:r(356),Rakjj:function(e,t){return e+t},NCWZt:function(e,t){return e>t},XDMjH:function(e,t){return e>=t},xXsyf:function(e,t){return e<t},URqKj:function(e,t){return e!==t},WwByY:r(391)+r(286),csbcA:function(e,t){return e-t},lDUQZ:function(e,t){return e===t},yeZRt:r(275),UZDnP:r(370),YyoWJ:function(e,t){return e-t},sRXIf:"rgba(255, "+r(272)+"0.95)",oBgsx:r(463),CSZoT:function(e,t){return e/t},AuNyr:r(331),HhgJx:r(388)+"Inter', sa"+r(307),nGBKk:r(302)+r(390),rZENI:function(e,t){return e+t}};await i[r(291)](Z);const{boardSize:o=600,darkMode:c=!1,withWatermark:l=!1,title:u}=a,d=function(s,n){const a=H,r={VgYWQ:function(e,t){return e+t},ptTbp:function(e,t){return e/t},Utcag:function(e,t){return e*t},yQRIz:function(e,t){return e<t},NAGpb:function(e,t){return e+t},kdixA:function(e,t){return e*t},MqtvS:function(e,t,s){return e(t,s)},NlKes:function(e,t){return e!==t},PttXN:a(335),dTZBJ:function(e,t){return e<t},cINvl:function(e,t){return e+t},tcHrK:a(350)},i=r[a(365)](n,8),o=r[a(277)](n,.02),c=r[a(435)](n,r[a(277)](o,2));let l=a(332)+'="http://w'+a(246)+a(301)+a(445)+c+a(342)+c+(a(352)+a(308))+c+" "+c+'">';l+=a(245)+a(295)+a(266)+c+'" height="'+c+'" fill="'+e[a(364)]+a(383);for(let u=0;r[a(269)](u,8);u++){const n=7-u;for(let c=0;c<8;c++){const d=s[n][c],m=d[a(254)]?e.light:e[a(262)],x=r[a(255)](o,c*i),f=o+u*i;if(l+=a(312)+x+'" y="'+f+a(412)+i+a(342)+i+a(422)+m+a(383),d.visits[a(411)]>0){const e=r[a(392)](i,.08),s=[];for(const i of d.visits){const e=r[a(315)](t,i[a(355)],i[a(251)]);!s[a(459)](e)&&s[a(341)](e)}const n=Math[a(478)](s[a(411)],6),o=[];let c=i-2*e;const u=r[a(365)](.7*c,n);for(let t=0;t<n;t++)if(r[a(379)](a(346),r.PttXN)){const e={};if(e[a(251)]=s[t],e[a(466)]=c,o[a(341)](e),c-=u,r[a(448)](c,.1*i))break}else _0x18c6eb[a(265)]="left",_0x41e0f7[a(252)](_0x190e7b,_0x2b7f57,_0x546654),_0x5eacf5+=r[a(435)](_0x237ee6[a(400)+"t"](_0xa08c4d)[a(473)],_0x241c31);for(const t of o){const e=r[a(365)](i-t[a(466)],2);l+=a(312)+r[a(373)](x,e)+a(462)+r[a(255)](f,e)+'" width="'+t.layerSize+a(342)+t[a(466)]+a(422)+t.color+a(383)}}}}return l+=r[a(436)],l}(s,o),m=o+2*i[r(296)](o,.02),x=await i.uAqBq(T,d,m,m),f=60,h=m+120,p=i[r(465)](i[r(409)](i[r(471)](m,220),60),120),g=document[r(249)+"ent"](i[r(317)]);g[r(473)]=5*h,g[r(323)]=i[r(303)](p,5);const v=g[r(401)]("2d");v.scale(5,5),v.imageSmoothingEnabled=!0,v[r(305)+r(398)+"y"]=i[r(454)],v[r(429)]=c?i[r(324)]:"#FDFCFB",v[r(380)](0,0,h,p),v.drawImage(x,0,0,x[r(473)],x[r(323)],f,f,m,m);const w=i[r(358)](f,m)+28;v[r(415)+"e"]=c?i[r(333)]:r(463),v[r(330)]=1,v[r(447)](),v[r(386)](f,w),v[r(441)](h-f,w),v[r(259)]();const y=c?i[r(414)]:i.CgwhD,j=c?r(336):i.PancC,b=c?r(347):i[r(444)],N=c?i[r(318)]:i.PIEKc,C=h/2;let D=w+55;const z=n[r(372)]||i[r(280)],M=n[r(416)]||i[r(320)];v[r(306)+"ne"]=i[r(464)],v[r(292)]="600 24px '"+r(458)+"Times New "+r(453)+r(273);const _=v[r(400)+"t"](z).width,B=v[r(400)+"t"](M).width;v.font=i[r(340)];const A=i.fjZDp,L=v.measureText(A).width,E=i[r(471)](i[r(432)](_,L),B),S=i[r(374)](C,E/2);if(v[r(292)]=r(433)+r(458)+r(407)+r(453)+r(273),v[r(429)]=y,v[r(265)]=r(370),v.fillText(z,S,D),v[r(292)]=i.pAuuP,v[r(429)]=N,v[r(252)](A,S+_,D),v.font=r(433)+"Cinzel', 'Times New Roman', se"+r(273),v[r(429)]=y,v[r(252)](M,i[r(423)](S+_,L),D),D+=36,n[r(393)]&&i.AEDZh(n[r(393)],r(339))){if(i.AEDZh(r(282),r(282))){const e=_0x3b3dd0?function(){if(_0x1442a6){const e=_0x16daea.apply(_0x161118,arguments);return _0x51b3cf=null,e}}:function(){};return _0x967f88=!1,e}v[r(429)]=j,v[r(292)]=i[r(271)],v[r(265)]=i[r(319)],v[r(252)](n.event,C,D),D+=32}const q=u,G=n[r(310)]||"";if(i[r(348)](q,G)){v[r(429)]=b,v[r(292)]=i.DEZoW,v[r(265)]=i[r(319)];let e="";q?(e=q[r(244)+"e"](),G&&(e+=i[r(363)]("  â€¢  ",G))):e=G;const t=2,s=e[r(300)](""),n=s.reduce((e,t)=>e+v[r(400)+"t"](t).width,0),a=i[r(374)](s[r(411)],1)*t;let o=i[r(374)](C,i.PmQsb(i[r(363)](n,a),2));for(const c of s)v[r(265)]=r(370),v[r(252)](c,o,D),o+=i[r(363)](v[r(400)+"t"](c)[r(473)],t);D+=28}if(n[r(283)]&&i[r(297)](n[r(283)][r(411)],0)){v[r(429)]=b,v[r(292)]=r(314)+"Times New "+r(288)+r(345),v.textAlign=i.ncSRS;const e=n[r(283)][r(316)](" "),t=e[r(411)]>400?e.substring(0,400)+i[r(279)]:e,s=i[r(374)](h,i[r(303)](f,2))-40,a=t.split(" ");let o="",c=D;const l=15,u=4;let d=0;for(const n of a){const e=i[r(413)](o,o?" ":"")+n;if(i[r(385)](v.measureText(e)[r(473)],s)&&o){if(v[r(252)](o,C,c),o=n,c+=l,d++,i[r(368)](d,u))break}else o=e}if(o&&i[r(467)](d,u))if(i.URqKj(r(257),r(257))){const e=i[r(256)](_0x339705-_0x492af5.layerSize,2);_0x1a3d14+='<rect x="'+(_0x1806b2+e)+r(462)+i[r(423)](_0xdcab95,e)+'" width="'+_0x4a3dec.layerSize+'" height="'+_0x1ffe3[r(466)]+r(422)+_0x431cb9[r(251)]+'"/>'}else v.fillText(o,C,c)}const W=i.IAVDo(i[r(374)](p,f),20);v[r(429)]=b,v.font=r(405)+r(426)+r(307),v[r(265)]=i[r(319)];const I=i[r(403)][r(300)](""),P=I.reduce((e,t)=>e+v[r(400)+"t"](t)[r(473)],0)+i.MUoxf(i.csbcA(I[r(411)],1),4);let K=i[r(474)](C,i[r(256)](P,2));for(const e of I)i[r(309)](i[r(261)],r(275))?(v[r(265)]=i.UZDnP,v.fillText(e,K,W),K+=v[r(400)+"t"](e).width+4):(_0x4e8e7e[r(378)+"ctURL"](_0x3a50e9),_0x50c60f(new _0x2730c2(r(461)+"load SVG")));if(l){const[e,t]=await Promise[r(248)]([U(!1),i.ccDcN(Y)]),s=220,n=65,a=i[r(374)](i[r(358)](f,m)-s,12),o=i[r(374)](i[r(434)](f+m,n),12);v.fillStyle=i[r(381)],v[r(447)](),v.roundRect(a,o,s,n,6),v[r(357)](),v[r(415)+"e"]=i.oBgsx,v[r(330)]=1,v[r(259)]();const c=48,l=a+12,u=o+i.IAVDo(n,c)/2;v[r(359)](),v[r(447)](),v[r(470)](l+c/2,u+i.CSZoT(c,2),c/2,0,2*Math.PI),v.clip(),v[r(437)](t,l,u,c,c),v[r(424)]();const d=i[r(423)](i[r(363)](l,c),10);v[r(265)]=i[r(329)],v.textBaseline=i.AuNyr,v[r(429)]=r(344),v[r(292)]=i[r(455)],v.fillText(r(361),d,o+28),v.fillStyle=i[r(318)],v[r(292)]=r(408)+"Inter', sans-serif",v[r(252)](i[r(268)],d,i[r(432)](o,46));const x=50,h=a+s-x-10,p=i[r(250)](o,(n-x)/2),g=new Image;await new Promise(t=>{const s=r,n={};n[s(260)]=function(e,t){return e*t},n.sByDF=i.UCTyf,n[s(349)]=i[s(443)];const a=n;if(i[s(451)]==i[s(451)])g.onload=()=>{v[s(437)](g,h,p,x,x),t()},g[s(369)]=()=>t(),g[s(396)]=e;else{const e=new _0x4f37c0,t={};t.type=a[s(349)];const n=new _0x40521e([_0x44b100],t),r=_0x4b6061[s(446)+s(351)](n);e[s(442)]=()=>{const t=s,n=_0x2933ce[t(249)+t(353)](t(327));n[t(473)]=a[t(260)](_0x4b7a6c,_0xf75c9e),n[t(323)]=_0x4016d0*_0x366adc;const i=n.getContext("2d");i[t(278)](_0x5e49da,_0x53d95f),i[t(437)](e,0,0,_0x4de135,_0x58d64e),_0x2e7740[t(378)+t(351)](r),_0x1a1d5b(n)},e[s(369)]=()=>{const e=s;_0x38c13b[e(378)+e(351)](r),_0x135b0f(new _0x54f393(a[e(360)]))},e[s(396)]=r}})}return g}const O=q.filter(e=>"custom"!==e.id);const J=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const R=()=>{const e=n(),{user:t,isLoading:s}=a(),[I,P]=r.useState(null),[K,Z]=r.useState(!1),[T,U]=r.useState(0),[Y,H]=r.useState(""),[R,V]=r.useState([]),[F,X]=r.useState(50),[$,Q]=r.useState(!0),[ee,te]=r.useState(!1),[se,ne]=r.useState(null);r.useEffect(()=>{s||(async()=>{if(!t)return void P(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});P(!0===e)})()},[t,s]);const ae=r.useCallback(async(e,s,n,a,r=!0)=>{try{const m=i(e.pgn),x=r?O[Math.floor(Math.random()*O.length)]:O[n%O.length],f=function(e,t){const s=q.find(e=>e.id===t)||q[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?s.white:s.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,x.id);o(x.id);const h=await k(f,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:s}),p=await new Promise((e,t)=>{h.toBlob(s=>{s?e(s):t(new Error("Failed to create blob"))},"image/png",.95)}),g=Date.now(),v=`${t.id}/${g}-${s.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(v,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:y}=c.storage.from("visualizations").getPublicUrl(v),j=l(e.pgn),b={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:f,totalMoves:m.totalMoves,visualizationState:{paletteId:x.id,paletteName:x.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:a,exemplarNumber:a?n+1:void 0,gameHash:j}},{data:N,error:C}=await c.from("saved_visualizations").insert({user_id:t.id,title:s,pgn:e.pgn,game_data:b,image_path:y.publicUrl}).select().single();if(C)throw C;const D=function(e,t){if(e){const e=99,s=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+s}return 199+Math.floor(600*Math.random())}(a,n),{data:z,error:M}=await u(N.id,D);if(M)throw M;const _=function(e,t){const s=e?1.5:1,n=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*s+5*n),hdDownloads:Math.floor(3*Math.random()*s),gifDownloads:Math.floor(2*Math.random()*s),tradeCount:e?Math.floor(2*Math.random()):0}}(a,n);for(let e=0;e<_.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:N.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const B=d(e.pgn),A=r?"premium":"genesis";return{title:s,success:!0,visualizationId:N.id,listingId:null==z?void 0:z.id,isExemplar:a,paletteId:x.id,paletteName:x.name,gameHash:j,tier:A,openingName:null==B?void 0:B.fullName}}catch(m){return{title:s,success:!1,error:m.message,isExemplar:a}}},[t]),re=R.filter(e=>e.success).length,ie=R.filter(e=>!e.success).length;return R.filter(e=>e.success&&e.isExemplar).length,s||null===I?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(x,{className:"h-8 w-8 animate-spin text-primary"})}):t&&I?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(g,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(v,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(f,{children:[m.jsx(w,{children:m.jsxs(y,{className:"flex items-center gap-3",children:[m.jsx(j,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(b,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",F," visions: ",Math.min(25,F)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,F-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:F,onChange:e=>X(Number(e.target.value)),disabled:K,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(N,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:K}),m.jsxs(C,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(D,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(z,{variant:"secondary",className:"text-xs",children:[O.length," palettes"]})]})]}),m.jsx(g,{onClick:async()=>{if(!t)return void G.error("You must be logged in as the CEO account");Z(!0),V([]),U(0);const e=[],s=W.slice(0,Math.min(F,W.length)),n=[];for(let t=0;t<F;t++){const e=t%s.length,a=t<25,r=J[t]||`Vision ${t+1}`;n.push({game:s[e],title:r,isExemplar:a})}for(let t=0;t<n.length;t++){const{game:s,title:a,isExemplar:r}=n[t];H(`${r?"ðŸ†":"ðŸŽ¨"} ${a} (${t+1}/${n.length})`);const i=await ae(s,a,t,r,$);e.push(i),V([...e]),U((t+1)/n.length*100),await new Promise(e=>setTimeout(e,300))}Z(!1);const a=e.filter(e=>e.success).length,r=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;a>0?G.success(`Created ${a} visions`,{description:`${i} Exemplars, ${a-i} Creative${r>0?` (${r} failed)`:""}`}):G.error("Failed to create any visions")},disabled:K||!t,className:"w-full",size:"lg",children:K?m.jsxs(m.Fragment,{children:[m.jsx(x,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(M,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(_,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(g,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),ne(null);try{const{data:e,error:s}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(s)throw s;if(!e||0===e.length)return G.info("No visions to delete"),void te(!1);const n=e.map(e=>e.id),{data:a,error:r}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",n);if(r)throw r;const i=new Set((a||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=n.filter(e=>!i.has(e)),l=n.filter(e=>i.has(e));if(0===o.length)return G.info("All your visions have accrued natural value - none deleted"),ne({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);ne({deleted:o.length,preserved:l.length}),G.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){G.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||K||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(x,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(_,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),se&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",se.deleted," deleted"]}),se.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",se.preserved," preserved (has value)"]})]})})]}),K&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(B,{value:T,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:Y})]}),R.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(A,{className:"h-4 w-4"}),re," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(L,{className:"h-4 w-4"}),R.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(E,{className:"h-4 w-4"}),R.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:R.map((e,t)=>m.jsxs(S.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(L,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(E,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(z,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(z,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(D,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(f,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(g,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{R as default};
