const e='import React, { useState, useEffect, useMemo } from \'react\';\nimport { motion } from \'framer-motion\';\nimport { useQuery } from \'@tanstack/react-query\';\nimport { \n  Database, \n  HardDrive, \n  Filter, \n  Layers, \n  Users, \n  Trophy, \n  Activity, \n  ChevronDown, \n  ChevronUp,\n  Target,\n  GitBranch,\n  CheckCircle2,\n  AlertCircle,\n  BarChart3,\n  Search,\n  X\n} from \'lucide-react\';\nimport { Card, CardContent, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Button } from \'@/components/ui/button\';\nimport { Input } from \'@/components/ui/input\';\nimport { supabase } from \'@/integrations/supabase/client\';\nimport { Progress } from \'@/components/ui/progress\';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \'@/components/ui/tabs\';\nimport { Switch } from \'@/components/ui/switch\';\nimport { Label } from \'@/components/ui/label\';\nimport { \n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \'@/components/ui/select\';\nimport { isRealLichessId } from \'@/lib/chess/benchmarkPersistence\';\n\n// Types\ninterface GamePrediction {\n  game_id: string;\n  worker_id?: string;\n  fen?: string;\n  data_source?: string;\n  hybrid_archetype?: string;\n  created_at?: string;\n  actual_result?: string;\n  stockfish_prediction?: string;\n  hybrid_prediction?: string;\n  whiteName?: string;\n  blackName?: string;\n  gameMode?: string;\n  rated?: boolean;\n  variant?: string;\n}\n\ninterface AggregatedStats {\n  // Total counts\n  totalDatabasePredictions: number;\n  totalLocalPredictions: number;\n  totalTrueUniqueGames: number;\n  \n  // Breakdowns\n  byDataSource: Record<string, number>;\n  byArchetype: Record<string, number>;\n  byGameMode: Record<string, number>;\n  byPlayer: Record<string, number>;\n  byVariant: Record<string, number>;\n  \n  // Deduplication stats\n  duplicateIds: string[];\n  uniqueIds: Set<string>;\n  \n  // Quality metrics\n  realGameIds: number;\n  syntheticGameIds: number;\n}\n\ninterface FilterState {\n  dataSource: string | \'all\';\n  archetype: string | \'all\';\n  gameMode: string | \'all\';\n  player: string | \'all\';\n  variant: string | \'all\';\n  searchQuery: string;\n  showDuplicatesOnly: boolean;\n  showRealOnly: boolean;\n}\n\n// Helper to load local prediction files via HTTP (works in production)\nasync function loadLocalPredictions(): Promise<GamePrediction[]> {\n  const predictions: GamePrediction[] = [];\n  \n  // List of known prediction files to fetch\n  const predictionFiles = [\n    \'/farm/data/predictions-chess-benchmark-24x7.json\',\n    \'/farm/data/predictions-ep-farm-prod-1.json\',\n    \'/farm/data/predictions-ep-enhanced-1.json\',\n    \'/farm/data/predictions-ep-enhanced-2.json\',\n    \'/farm/data/predictions-ep-enhanced-3.json\',\n    \'/farm/data/predictions-ep-enhanced-4.json\',\n    \'/farm/data/predictions-ep-enhanced-5.json\',\n  ];\n  \n  for (const filePath of predictionFiles) {\n    try {\n      const response = await fetch(filePath);\n      if (response.ok) {\n        const data = await response.json();\n        if (Array.isArray(data)) {\n          predictions.push(...data.map((p: GamePrediction) => ({\n            ...p,\n            data_source: p.worker_id?.includes(\'chess-benchmark\') ? \'local_benchmark\' : \'local_farm\',\n          })));\n        }\n      }\n    } catch (error) {\n      // File doesn\'t exist or failed to load - skip silently\n    }\n  }\n  \n  return predictions;\n}\n\nexport const ChessGameTotalsDashboard: React.FC = () => {\n  const [filters, setFilters] = useState<FilterState>({\n    dataSource: \'all\',\n    archetype: \'all\',\n    gameMode: \'all\',\n    player: \'all\',\n    variant: \'all\',\n    searchQuery: \'\',\n    showDuplicatesOnly: false,\n    showRealOnly: false,\n  });\n  \n  const [expandedSections, setExpandedSections] = useState<Set<string>>(new Set([\'totals\', \'breakdown\']));\n  const [localPredictions, setLocalPredictions] = useState<GamePrediction[]>([]);\n\n  // Fetch database predictions\n  const { data: dbPredictions = [], isLoading: dbLoading } = useQuery({\n    queryKey: [\'chess-predictions-database\'],\n    queryFn: async () => {\n      const allPredictions: GamePrediction[] = [];\n      let from = 0;\n      const pageSize = 1000;\n      let hasMore = true;\n      \n      while (hasMore) {\n        const { data, error } = await supabase\n          .from(\'chess_prediction_attempts\')\n          .select(\'game_id, data_source, hybrid_archetype, created_at, actual_result, stockfish_prediction, hybrid_prediction, fen\')\n          .range(from, from + pageSize - 1);\n          \n        if (error) {\n          console.error(\'Error fetching predictions:\', error);\n          break;\n        }\n        \n        if (!data || data.length === 0) {\n          hasMore = false;\n          break;\n        }\n        \n        allPredictions.push(...data);\n        from += pageSize;\n        hasMore = data.length === pageSize;\n      }\n      \n      return allPredictions;\n    },\n    staleTime: 60000, // Cache for 1 minute\n  });\n\n  // Load local predictions on mount\n  useEffect(() => {\n    loadLocalPredictions().then(setLocalPredictions);\n  }, []);\n\n  // Calculate aggregated stats\n  const stats: AggregatedStats = useMemo(() => {\n    const allPredictions = [...dbPredictions, ...localPredictions];\n    \n    // Initialize counters\n    const byDataSource: Record<string, number> = {};\n    const byArchetype: Record<string, number> = {};\n    const byGameMode: Record<string, number> = {};\n    const byPlayer: Record<string, number> = {};\n    const byVariant: Record<string, number> = {};\n    \n    const idCount = new Map<string, number>();\n    const uniqueIds = new Set<string>();\n    let realGameIds = 0;\n    let syntheticGameIds = 0;\n    \n    allPredictions.forEach(pred => {\n      const gameId = pred.game_id || \'unknown\';\n      \n      // Count occurrences for deduplication\n      idCount.set(gameId, (idCount.get(gameId) || 0) + 1);\n      uniqueIds.add(gameId);\n      \n      // Check if real game ID\n      if (isRealLichessId(gameId)) {\n        realGameIds++;\n      } else {\n        syntheticGameIds++;\n      }\n      \n      // Data source breakdown\n      const source = pred.data_source || \'unknown\';\n      byDataSource[source] = (byDataSource[source] || 0) + 1;\n      \n      // Archetype breakdown\n      const archetype = pred.hybrid_archetype || \'unknown\';\n      byArchetype[archetype] = (byArchetype[archetype] || 0) + 1;\n      \n      // Game mode breakdown\n      const mode = pred.gameMode || \'unknown\';\n      byGameMode[mode] = (byGameMode[mode] || 0) + 1;\n      \n      // Player breakdown\n      if (pred.whiteName) {\n        byPlayer[pred.whiteName] = (byPlayer[pred.whiteName] || 0) + 1;\n      }\n      if (pred.blackName) {\n        byPlayer[pred.blackName] = (byPlayer[pred.blackName] || 0) + 1;\n      }\n      \n      // Variant breakdown\n      const variant = pred.variant || \'standard\';\n      byVariant[variant] = (byVariant[variant] || 0) + 1;\n    });\n    \n    // Find duplicates\n    const duplicateIds = Array.from(idCount.entries())\n      .filter(([, count]) => count > 1)\n      .map(([id]) => id);\n    \n    return {\n      totalDatabasePredictions: dbPredictions.length,\n      totalLocalPredictions: localPredictions.length,\n      totalTrueUniqueGames: uniqueIds.size,\n      byDataSource,\n      byArchetype,\n      byGameMode,\n      byPlayer,\n      byVariant,\n      duplicateIds,\n      uniqueIds,\n      realGameIds,\n      syntheticGameIds,\n    };\n  }, [dbPredictions, localPredictions]);\n\n  // Apply filters to get filtered predictions\n  const filteredPredictions = useMemo(() => {\n    let predictions = [...dbPredictions, ...localPredictions];\n    \n    // Search filter\n    if (filters.searchQuery) {\n      const query = filters.searchQuery.toLowerCase();\n      predictions = predictions.filter(p => \n        p.game_id?.toLowerCase().includes(query) ||\n        p.hybrid_archetype?.toLowerCase().includes(query) ||\n        p.whiteName?.toLowerCase().includes(query) ||\n        p.blackName?.toLowerCase().includes(query)\n      );\n    }\n    \n    // Data source filter\n    if (filters.dataSource !== \'all\') {\n      predictions = predictions.filter(p => p.data_source === filters.dataSource);\n    }\n    \n    // Archetype filter\n    if (filters.archetype !== \'all\') {\n      predictions = predictions.filter(p => p.hybrid_archetype === filters.archetype);\n    }\n    \n    // Game mode filter\n    if (filters.gameMode !== \'all\') {\n      predictions = predictions.filter(p => p.gameMode === filters.gameMode);\n    }\n    \n    // Player filter\n    if (filters.player !== \'all\') {\n      predictions = predictions.filter(p => \n        p.whiteName === filters.player || p.blackName === filters.player\n      );\n    }\n    \n    // Variant filter\n    if (filters.variant !== \'all\') {\n      predictions = predictions.filter(p => p.variant === filters.variant);\n    }\n    \n    // Duplicates only filter\n    if (filters.showDuplicatesOnly) {\n      const idCount = new Map<string, number>();\n      predictions.forEach(p => {\n        idCount.set(p.game_id || \'\', (idCount.get(p.game_id || \'\') || 0) + 1);\n      });\n      predictions = predictions.filter(p => (idCount.get(p.game_id || \'\') || 0) > 1);\n    }\n    \n    // Real only filter\n    if (filters.showRealOnly) {\n      predictions = predictions.filter(p => isRealLichessId(p.game_id || \'\'));\n    }\n    \n    return predictions;\n  }, [dbPredictions, localPredictions, filters]);\n\n  const toggleSection = (section: string) => {\n    setExpandedSections(prev => {\n      const next = new Set(prev);\n      if (next.has(section)) {\n        next.delete(section);\n      } else {\n        next.add(section);\n      }\n      return next;\n    });\n  };\n\n  const getUniqueCount = (predictions: GamePrediction[]) => {\n    return new Set(predictions.map(p => p.game_id)).size;\n  };\n\n  if (dbLoading) {\n    return (\n      <Card className="p-8">\n        <div className="flex items-center justify-center">\n          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary" />\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <div className="space-y-6">\n      {/* Header */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className="flex items-center justify-between"\n      >\n        <div>\n          <h2 className="text-2xl font-bold flex items-center gap-2">\n            <Database className="h-6 w-6 text-primary" />\n            True Game Totals Dashboard\n          </h2>\n          <p className="text-muted-foreground mt-1">\n            Comprehensive view of all chess predictions across database and local storage\n          </p>\n        </div>\n        <Badge variant="outline" className="text-lg px-4 py-2">\n          {stats.totalTrueUniqueGames.toLocaleString()} Unique Games\n        </Badge>\n      </motion.div>\n\n      {/* Main Totals Cards */}\n      <div className="grid grid-cols-1 md:grid-cols-4 gap-4">\n        <Card className="bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20">\n          <CardHeader className="pb-2">\n            <CardTitle className="text-sm font-medium text-muted-foreground flex items-center gap-2">\n              <Database className="h-4 w-4" />\n              Database Predictions\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className="text-3xl font-bold">{stats.totalDatabasePredictions.toLocaleString()}</div>\n            <p className="text-xs text-muted-foreground mt-1">\n              {Math.round((stats.totalDatabasePredictions / (stats.totalDatabasePredictions + stats.totalLocalPredictions || 1)) * 100)}% of total\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className="bg-gradient-to-br from-green-500/10 to-green-600/5 border-green-500/20">\n          <CardHeader className="pb-2">\n            <CardTitle className="text-sm font-medium text-muted-foreground flex items-center gap-2">\n              <HardDrive className="h-4 w-4" />\n              Local Predictions\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className="text-3xl font-bold">{stats.totalLocalPredictions.toLocaleString()}</div>\n            <p className="text-xs text-muted-foreground mt-1">\n              From farm/data JSON files\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className="bg-gradient-to-br from-amber-500/10 to-amber-600/5 border-amber-500/20">\n          <CardHeader className="pb-2">\n            <CardTitle className="text-sm font-medium text-muted-foreground flex items-center gap-2">\n              <CheckCircle2 className="h-4 w-4" />\n              Real Game IDs\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className="text-3xl font-bold">{stats.realGameIds.toLocaleString()}</div>\n            <p className="text-xs text-muted-foreground mt-1">\n              Lichess & Chess.com verified\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className="bg-gradient-to-br from-purple-500/10 to-purple-600/5 border-purple-500/20">\n          <CardHeader className="pb-2">\n            <CardTitle className="text-sm font-medium text-muted-foreground flex items-center gap-2">\n              <Layers className="h-4 w-4" />\n              True Unique Games\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className="text-3xl font-bold">{stats.totalTrueUniqueGames.toLocaleString()}</div>\n            <p className="text-xs text-muted-foreground mt-1">\n              After deduplication\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters Section */}\n      <Card>\n        <CardHeader \n          className="cursor-pointer"\n          onClick={() => toggleSection(\'filters\')}\n        >\n          <div className="flex items-center justify-between">\n            <CardTitle className="text-lg flex items-center gap-2">\n              <Filter className="h-5 w-5" />\n              Advanced Filters\n              {(filters.dataSource !== \'all\' || filters.archetype !== \'all\' || filters.searchQuery) && (\n                <Badge variant="secondary" className="ml-2">Active</Badge>\n              )}\n            </CardTitle>\n            {expandedSections.has(\'filters\') ? <ChevronUp className="h-5 w-5" /> : <ChevronDown className="h-5 w-5" />}\n          </div>\n        </CardHeader>\n        \n        {expandedSections.has(\'filters\') && (\n          <CardContent className="space-y-4">\n            <div className="flex gap-2">\n              <div className="relative flex-1">\n                <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />\n                <Input\n                  placeholder="Search game IDs, archetypes, players..."\n                  value={filters.searchQuery}\n                  onChange={(e) => setFilters(prev => ({ ...prev, searchQuery: e.target.value }))}\n                  className="pl-10"\n                />\n                {filters.searchQuery && (\n                  <Button\n                    variant="ghost"\n                    size="sm"\n                    className="absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0"\n                    onClick={() => setFilters(prev => ({ ...prev, searchQuery: \'\' }))}\n                  >\n                    <X className="h-3 w-3" />\n                  </Button>\n                )}\n              </div>\n            </div>\n\n            <div className="grid grid-cols-2 md:grid-cols-5 gap-4">\n              <div className="space-y-2">\n                <Label>Data Source</Label>\n                <Select \n                  value={filters.dataSource} \n                  onValueChange={(v) => setFilters(prev => ({ ...prev, dataSource: v }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder="All sources" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value="all">All Sources</SelectItem>\n                    {Object.entries(stats.byDataSource).map(([source, count]) => (\n                      <SelectItem key={source} value={source}>\n                        {source} ({count.toLocaleString()})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className="space-y-2">\n                <Label>Archetype</Label>\n                <Select \n                  value={filters.archetype} \n                  onValueChange={(v) => setFilters(prev => ({ ...prev, archetype: v }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder="All archetypes" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value="all">All Archetypes</SelectItem>\n                    {Object.entries(stats.byArchetype).map(([arch, count]) => (\n                      <SelectItem key={arch} value={arch}>\n                        {arch} ({count.toLocaleString()})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className="space-y-2">\n                <Label>Game Mode</Label>\n                <Select \n                  value={filters.gameMode} \n                  onValueChange={(v) => setFilters(prev => ({ ...prev, gameMode: v }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder="All modes" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value="all">All Modes</SelectItem>\n                    {Object.entries(stats.byGameMode).map(([mode, count]) => (\n                      <SelectItem key={mode} value={mode}>\n                        {mode} ({count.toLocaleString()})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className="space-y-2">\n                <Label>Variant</Label>\n                <Select \n                  value={filters.variant} \n                  onValueChange={(v) => setFilters(prev => ({ ...prev, variant: v }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder="All variants" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value="all">All Variants</SelectItem>\n                    {Object.entries(stats.byVariant).map(([variant, count]) => (\n                      <SelectItem key={variant} value={variant}>\n                        {variant} ({count.toLocaleString()})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className="space-y-2">\n                <Label>Player</Label>\n                <Select \n                  value={filters.player} \n                  onValueChange={(v) => setFilters(prev => ({ ...prev, player: v }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder="All players" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value="all">All Players</SelectItem>\n                    {Object.entries(stats.byPlayer)\n                      .sort(([,a], [,b]) => b - a)\n                      .slice(0, 20)\n                      .map(([player, count]) => (\n                        <SelectItem key={player} value={player}>\n                          {player} ({count.toLocaleString()})\n                        </SelectItem>\n                      ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className="flex items-center gap-6 pt-2">\n              <div className="flex items-center space-x-2">\n                <Switch\n                  id="duplicates"\n                  checked={filters.showDuplicatesOnly}\n                  onCheckedChange={(v) => setFilters(prev => ({ ...prev, showDuplicatesOnly: v }))}\n                />\n                <Label htmlFor="duplicates" className="cursor-pointer">\n                  Show Duplicates Only ({stats.duplicateIds.length})\n                </Label>\n              </div>\n              \n              <div className="flex items-center space-x-2">\n                <Switch\n                  id="real-only"\n                  checked={filters.showRealOnly}\n                  onCheckedChange={(v) => setFilters(prev => ({ ...prev, showRealOnly: v }))}\n                />\n                <Label htmlFor="real-only" className="cursor-pointer">\n                  Real Games Only\n                </Label>\n              </div>\n\n              <Button \n                variant="outline" \n                size="sm"\n                onClick={() => setFilters({\n                  dataSource: \'all\',\n                  archetype: \'all\',\n                  gameMode: \'all\',\n                  player: \'all\',\n                  variant: \'all\',\n                  searchQuery: \'\',\n                  showDuplicatesOnly: false,\n                  showRealOnly: false,\n                })}\n              >\n                Reset Filters\n              </Button>\n            </div>\n          </CardContent>\n        )}\n      </Card>\n\n      {/* Filtered Results */}\n      <Card className="bg-muted/50">\n        <CardHeader>\n          <div className="flex items-center justify-between">\n            <CardTitle className="text-lg flex items-center gap-2">\n              <Target className="h-5 w-5" />\n              Filtered Results\n            </CardTitle>\n            <Badge variant="outline">\n              {filteredPredictions.length.toLocaleString()} predictions / {getUniqueCount(filteredPredictions).toLocaleString()} unique games\n            </Badge>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">\n            <div className="text-center p-4 bg-background rounded-lg">\n              <div className="text-2xl font-bold text-primary">\n                {getUniqueCount(filteredPredictions).toLocaleString()}\n              </div>\n              <div className="text-sm text-muted-foreground">Unique Games</div>\n            </div>\n            <div className="text-center p-4 bg-background rounded-lg">\n              <div className="text-2xl font-bold text-blue-500">\n                {new Set(filteredPredictions.filter(p => isRealLichessId(p.game_id || \'\')).map(p => p.game_id)).size.toLocaleString()}\n              </div>\n              <div className="text-sm text-muted-foreground">Real Game IDs</div>\n            </div>\n            <div className="text-center p-4 bg-background rounded-lg">\n              <div className="text-2xl font-bold text-amber-500">\n                {filteredPredictions.filter(p => \n                  new Set(filteredPredictions.map(x => x.game_id)).size < filteredPredictions.length\n                ).length}\n              </div>\n              <div className="text-sm text-muted-foreground">Potential Duplicates</div>\n            </div>\n            <div className="text-center p-4 bg-background rounded-lg">\n              <div className="text-2xl font-bold text-green-500">\n                {new Set(filteredPredictions.map(p => p.hybrid_archetype)).size}\n              </div>\n              <div className="text-sm text-muted-foreground">Unique Archetypes</div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Breakdown Tabs */}\n      <Tabs defaultValue="source" className="w-full">\n        <TabsList className="grid w-full grid-cols-5">\n          <TabsTrigger value="source" className="flex items-center gap-2">\n            <Database className="h-4 w-4" />\n            By Source\n          </TabsTrigger>\n          <TabsTrigger value="archetype" className="flex items-center gap-2">\n            <GitBranch className="h-4 w-4" />\n            By Archetype\n          </TabsTrigger>\n          <TabsTrigger value="mode" className="flex items-center gap-2">\n            <Activity className="h-4 w-4" />\n            By Mode\n          </TabsTrigger>\n          <TabsTrigger value="player" className="flex items-center gap-2">\n            <Users className="h-4 w-4" />\n            By Player\n          </TabsTrigger>\n          <TabsTrigger value="duplicates" className="flex items-center gap-2">\n            <AlertCircle className="h-4 w-4" />\n            Duplicates\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value="source" className="mt-4">\n          <Card>\n            <CardHeader>\n              <CardTitle className="flex items-center gap-2">\n                <BarChart3 className="h-5 w-5" />\n                Data Source Breakdown\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className="space-y-3">\n                {Object.entries(stats.byDataSource)\n                  .sort(([,a], [,b]) => b - a)\n                  .map(([source, count]) => {\n                    const percentage = (count / (stats.totalDatabasePredictions + stats.totalLocalPredictions)) * 100;\n                    return (\n                      <div key={source} className="space-y-1">\n                        <div className="flex items-center justify-between text-sm">\n                          <span className="font-medium">{source}</span>\n                          <span className="text-muted-foreground">\n                            {count.toLocaleString()} ({percentage.toFixed(1)}%)\n                          </span>\n                        </div>\n                        <Progress value={percentage} className="h-2" />\n                      </div>\n                    );\n                  })}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value="archetype" className="mt-4">\n          <Card>\n            <CardHeader>\n              <CardTitle className="flex items-center gap-2">\n                <Trophy className="h-5 w-5" />\n                Archetype Distribution\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className="grid grid-cols-2 md:grid-cols-3 gap-3">\n                {Object.entries(stats.byArchetype)\n                  .sort(([,a], [,b]) => b - a)\n                  .map(([archetype, count]) => (\n                    <div \n                      key={archetype}\n                      className="flex items-center justify-between p-3 bg-muted rounded-lg"\n                    >\n                      <span className="font-medium capitalize">{archetype.replace(/_/g, \' \')}</span>\n                      <Badge>{count.toLocaleString()}</Badge>\n                    </div>\n                  ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value="mode" className="mt-4">\n          <Card>\n            <CardHeader>\n              <CardTitle>Game Mode Distribution</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className="grid grid-cols-2 md:grid-cols-4 gap-3">\n                {Object.entries(stats.byGameMode)\n                  .sort(([,a], [,b]) => b - a)\n                  .map(([mode, count]) => (\n                    <div \n                      key={mode}\n                      className="flex items-center justify-between p-3 bg-muted rounded-lg"\n                    >\n                      <span className="font-medium capitalize">{mode}</span>\n                      <Badge variant="secondary">{count.toLocaleString()}</Badge>\n                    </div>\n                  ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value="player" className="mt-4">\n          <Card>\n            <CardHeader>\n              <CardTitle className="flex items-center gap-2">\n                <Users className="h-5 w-5" />\n                Top Players by Prediction Count\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className="space-y-2 max-h-96 overflow-y-auto">\n                {Object.entries(stats.byPlayer)\n                  .sort(([,a], [,b]) => b - a)\n                  .slice(0, 50)\n                  .map(([player, count], index) => (\n                    <div \n                      key={player}\n                      className="flex items-center justify-between p-2 hover:bg-muted rounded-lg transition-colors"\n                    >\n                      <div className="flex items-center gap-3">\n                        <span className="text-muted-foreground w-8">#{index + 1}</span>\n                        <span className="font-medium">{player}</span>\n                      </div>\n                      <Badge variant="outline">{count.toLocaleString()} games</Badge>\n                    </div>\n                  ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value="duplicates" className="mt-4">\n          <Card>\n            <CardHeader>\n              <CardTitle className="flex items-center gap-2 text-amber-600">\n                <AlertCircle className="h-5 w-5" />\n                Duplicate Game IDs\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {stats.duplicateIds.length === 0 ? (\n                <div className="flex items-center justify-center p-8 text-muted-foreground">\n                  <CheckCircle2 className="h-5 w-5 mr-2 text-green-500" />\n                  No duplicate game IDs found!\n                </div>\n              ) : (\n                <>\n                  <p className="text-sm text-muted-foreground mb-4">\n                    Found {stats.duplicateIds.length} game IDs that appear multiple times across predictions.\n                  </p>\n                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2 max-h-64 overflow-y-auto">\n                    {stats.duplicateIds.map(id => (\n                      <Badge key={id} variant="secondary" className="justify-center">\n                        {id}\n                      </Badge>\n                    ))}\n                  </div>\n                </>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* Data Quality Summary */}\n      <Card className="border-green-500/20">\n        <CardHeader>\n          <CardTitle className="flex items-center gap-2 text-green-600">\n            <CheckCircle2 className="h-5 w-5" />\n            Data Quality Summary\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">\n            <div className="space-y-2">\n              <div className="text-sm font-medium text-muted-foreground">ID Validation</div>\n              <div className="flex items-center gap-2">\n                <Progress \n                  value={(stats.realGameIds / (stats.realGameIds + stats.syntheticGameIds || 1)) * 100} \n                  className="flex-1 h-2"\n                />\n                <span className="text-sm font-medium">\n                  {((stats.realGameIds / (stats.realGameIds + stats.syntheticGameIds || 1)) * 100).toFixed(1)}%\n                </span>\n              </div>\n              <p className="text-xs text-muted-foreground">\n                {stats.realGameIds.toLocaleString()} real / {stats.syntheticGameIds.toLocaleString()} synthetic\n              </p>\n            </div>\n\n            <div className="space-y-2">\n              <div className="text-sm font-medium text-muted-foreground">Deduplication</div>\n              <div className="flex items-center gap-2">\n                <Progress \n                  value={((stats.totalDatabasePredictions + stats.totalLocalPredictions - stats.duplicateIds.length) / (stats.totalDatabasePredictions + stats.totalLocalPredictions || 1)) * 100} \n                  className="flex-1 h-2"\n                />\n                <span className="text-sm font-medium">\n                  {stats.duplicateIds.length === 0 ? \'100%\' : \n                    (((stats.totalDatabasePredictions + stats.totalLocalPredictions - stats.duplicateIds.length) / (stats.totalDatabasePredictions + stats.totalLocalPredictions || 1)) * 100).toFixed(1) + \'%\'\n                  }\n                </span>\n              </div>\n              <p className="text-xs text-muted-foreground">\n                {stats.duplicateIds.length} duplicates detected\n              </p>\n            </div>\n\n            <div className="space-y-2">\n              <div className="text-sm font-medium text-muted-foreground">Sources</div>\n              <div className="flex flex-wrap gap-1">\n                {Object.keys(stats.byDataSource).map(source => (\n                  <Badge key={source} variant="outline" className="text-xs">\n                    {source}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n';export{e as default};
