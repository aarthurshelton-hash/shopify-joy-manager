var e,t=Object.defineProperty,n=(e,n,s)=>((e,n,s)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s)(e,"symbol"!=typeof n?n+"":n,s);import{aJ as s,r,eu as a,s as c,j as i,C as o,p as l,t as d,L as u,w as x,x as h,aq as m,B as f,aF as g,v,cR as y,y as j,b8 as p,b9 as w,ba as N,bb as b,bc as C,a8 as B,aB as D,aC as z,aD as L,b4 as M,aE as q,aY as A,bh as P,cb as G,ad as I,eB as U}from"./index-D4HOopRf.js";import{A as k,a as K,b as S}from"./alert-DXraDpD9.js";import{T as O,a as T,b as W,c as H,d as Y,e as E}from"./table-CXf8yDn8.js";import{C as Z}from"./circle-alert-DvZSlvmx.js";import{W as _}from"./wifi-off-BXwQupS4.js";import{W as J}from"./wifi-Druz7EWf.js";import{B as V}from"./briefcase-CywwRUcD.js";import{T as F}from"./trending-down-v7VGDe_P.js";const R=s("Bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),Q=s("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),X=ae;!function(){const e=ae,t=oe();for(;;)try{if(578422===parseInt(e(329))/1+-parseInt(e(367))/2+-parseInt(e(325))/3*(-parseInt(e(319))/4)+parseInt(e(365))/5+-parseInt(e(339))/6*(-parseInt(e(361))/7)+-parseInt(e(351))/8+-parseInt(e(317))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const $=function(){const e=ae,t={};t.zACAG=e(359);const n=t;let s=!0;return function(t,r){const a=e,c={};c[a(358)]=a(326);const i=c;if(a(328)===n[a(355)]){if(typeof _0x4f3ac6===i[a(358)])return _0x3257bb;const e=_0xd54180.getItem(_0x201556);if(e)try{return{..._0x5241bb,..._0x1a0cbe[a(318)](e)}}catch{return _0x2a2f7d}return _0x38eb82}{const e=s?function(){if(r){const e=r[a(354)](t,arguments);return r=null,e}}:function(){};return s=!1,e}}}()(void 0,function(){const e=ae,t={};t[e(349)]=e(357)+"+$";const n=t;return $.toString()[e(346)](e(357)+"+$")[e(366)]()[e(348)+"r"]($).search(n[e(349)])});$();const ee=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();ee(void 0,function(){const e=ae,t={jSapj:function(e,t){return e+t},mMANB:function(e){return e()},uNLGO:e(342),sEfsL:"warn",OftcQ:"info",xDHEk:e(335),Pwybt:e(331)},n=t.mMANB(function(){const n=e;let s;try{s=Function(t[n(362)](t[n(362)](n(321)+"nction() ",n(350)+n(347)+n(370)+" )"),");"))()}catch(r){s=window}return s}),s=n[e(356)]=n[e(356)]||{},r=[t[e(345)],t[e(360)],t[e(369)],"error",t[e(368)],e(320),t[e(322)]];for(let a=0;a<r[e(330)];a++){const t=ee[e(348)+"r"][e(343)][e(337)](ee),n=r[a],c=s[n]||t;t[e(352)]=ee[e(337)](ee),t.toString=c[e(366)][e(337)](c),s[n]=t}})();const te="ib_gateway"+X(332)+"l",ne=X(336)+X(327)+"0",se={};se[X(323)]=ne,se.gatewayHost=X(338),se.gatewayPort=4002,se[X(334)]=1;const re=se;function ae(e,t){e-=317;const n=oe();let s=n[e];if(void 0===ae.WfisvN){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ae.hvTDWm=r,ae.NzLzxY={},ae.WfisvN=!0}const a=e+n[0],c=ae.NzLzxY[a];if(c)s=c;else{const e=function(e){this.QedKxO=e,this.lrvcve=[1,0,0],this.eztzvc=function(){return"newState"},this.aOVXYa="\\w+ *\\(\\) *{\\w+ *",this.TFVSWy="['|\"].+['|\"];? *}"};e.prototype.MVYPBm=function(){const e=new RegExp(this.aOVXYa+this.TFVSWy).test(this.eztzvc.toString())?--this.lrvcve[1]:--this.lrvcve[0];return this.ybVKTi(e)},e.prototype.ybVKTi=function(e){return Boolean(~e)?this.ysmRBw(this.QedKxO):e},e.prototype.ysmRBw=function(e){for(let t=0,n=this.lrvcve.length;t<n;t++)this.lrvcve.push(Math.round(Math.random())),n=this.lrvcve.length;return e(this.lrvcve[0])},new e(ae).MVYPBm(),s=ae.hvTDWm(s),ae.NzLzxY[a]=s}return s}function ce(){const e=X,t={};t[e(371)]=function(e,t){return e===t},t[e(353)]="undefined",t[e(324)]=function(e,t){return e!==t};const n=t;if(n[e(371)](typeof window,n[e(353)]))return re;const s=localStorage[e(340)](te);if(s)try{return{...re,...JSON[e(318)](s)}}catch{if(n[e(324)](e(344),e(344))){const t=_0x1ba3d1?function(){if(_0x25d83b){const t=_0x41185c[e(354)](_0x4c2f8b,arguments);return _0x1a3b8c=null,t}}:function(){};return _0x52d8a2=!1,t}return re}return re}function ie(){const e=X;return ce()[e(323)]}function oe(){const e=["Ahr0CdOVl2XVyW","yMLUza","mti3lJaUmc4X","mtiXmLLluLnACa","z2v0sxrLBq","C3rYAw5NAwz5","Bg9N","ChjVDg90ExbL","wLzUAKK","Du5mr08","C2vHCMnO","y3rVCIGICMv0Dq","y29UC3rYDwn0BW","BKnJEgS","E30Uy29UC3rYDq","mZC5nJiZmNfcDeHIrG","x19WCM90B19F","DKvXuhe","yxbWBhK","EKfdquC","y29UC29Szq","kcGOlISPkYKRkq","DwXWsM8","uKrcsum","C0vMC0W","mZy2otrutxnPtNa","ALnHCgO","C2v0sxrLBq","CMvTB3zLsxrLBq","mtK1nJyWnuDOyLjprG","Dg9tDhjPBMC","mtG2nZq0mKfWv0DrBq","EerirwS","t2z0y1e","CM4GDgHPCYiPka","AufNquW","ode0nJG0nwjQrLfbEG","CgfYC2u","mti0CNPwBKXk","DgfIBgu","CMv0DxjUicHMDq","uhD5yNq","yNjPzgDLvxjS","yMHzwK8","mteWmZi4C21Pz0zK","Dw5KzwzPBMvK","ywXOB3n0oJqWma","shHwD0O","mZaXnJe2zLfJzfrg","BgvUz3rO","DhjHy2u","x2jYAwrNzv91CG","C0L6yvi","y2XPzw50swq","zxHJzxb0Aw9U"];return(oe=function(){return e})()}const le=xe;!function(){const e=xe,t=ue();for(;;)try{if(775291===parseInt(e(328))/1*(parseInt(e(339))/2)+parseInt(e(357))/3+parseInt(e(342))/4*(parseInt(e(437))/5)+-parseInt(e(415))/6+-parseInt(e(400))/7*(parseInt(e(353))/8)+parseInt(e(401))/9*(parseInt(e(354))/10)+parseInt(e(349))/11*(parseInt(e(434))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const de=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[xe(356)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=xe,t={};t[e(427)]=e(347)+"+$";const n=t;return de[e(380)]()[e(329)](n[e(427)])[e(380)]()[e(361)+"r"](de)[e(329)](n[e(427)])});function ue(){const e=["B3jKzxjjza","mtm4ndu4ngnbs3H4Dq","y3rPB24","y2HLy2TdB25Uzq","vxPcDMi","Cg9YDa","zgLZy29UBMvJDa","CM4GDgHPCYiPka","y29UBMvJDgvK","EurPre0","B3jKzxiGzxjYBW","q29UDgvUDc1uEq","Ev0Gr2v0igfJyW","tMTzyKy","Ev0Gq29UBMvJDa","C3rYAw5NAwz5","zxDZzLi","yLDTueS","AgvHzgvYCW","DgfIBgu","mta4BvbQCLDq","sgz1wKq","y29UDhjHy3rZ","mtvbDMTNvNu","l2fWAs9ZDgf0Dq","ue9tva","CgLTquu","y2fUy2vSt3jKzq","reHgzw0","Aw5N","BwvZC2fNzq","sLzmuwC","CMfJDa","ANjgs00","y2XPzw50swq","rxLcrLm","y29UBMvJDa","BM90igf2ywLSyq","nJu5nxLVru1oBa","C2vHCMnO","BI9QC29U","l2fWAs9JB25Uzq","t0rZzMO","Centveq","Aw9UCZ9Hy2nVDq","l2fWAs9KAxnJBW","BgvUz3rO","E30Uy29UC3rYDq","wM9cAKK","ntrxquXOwg4","y29UC29Szq","w0LcieDHDgv3yq","mte4mJy4ufzVyNrK","AxrPB25ZigvYCG","wMrey3K","Ev0Gr2v0ihbVCW","ru9ut0i","kcGOlISPkYKRkq","x19WCM90B19F","mtu0mdaZm2rby1jnsq","rMPhAwq","BM93","zxjYB3i","otCWngfkA1fbAW","mtmWrKzLvwjc","l2fWAs9WB3nPDa","yxbWBhK","mtyZmdK4m01qzgDZEq","D0X6DNi","z2v0t3jKzxjZ","l2fWAs9VCMrLCG","y29UC3rYDwn0BW","ELvfy1y","y3rVCIGICMv0Dq","Ev0GqNjPzgDLia","DvzpuNa","BMvyEgq","CMv0DxjUicHMDq","sfjAD2u","txPnDu0","CK9AEMG","CgfWzxjuCMfKAq","ChjVDg90ExbL","Ev0Gr2v0ig9Yza","B2Xgzg4","Cg9ZAxrPB25Z","yxv0AgvUDgLJyq","wxrbrve","C3HdswK","thv0DeO","Dg9tDhjPBMC","v0T0t04","DhjHy2u","shnkquq","B1rJy1q","yxbWBgLJyxrPBW","BM5Ly3q","ANnVBG","y29UDhjHy3qGzq","igvYCM9YoG","ywLSzwq","C3rHDhvZ","ywnJB3vUDhm","yNjPzgDLuNvUBG","DgvK","Aw5MBW","Bg9N","z2f0zxDHEuHVCW","BMn0Aw9UkcKG","yMLUza","odmYm1HRt2znsa","mJyXntK0Bhrkr05L","Bwv0Ag9K","B3vUDhmGzxjYBW","rgnMqwm","B3jKzxjZ","BNrZ","z2v0uxvVDgu","r0vu","zxHJzxb0Aw9U","zNPfAfa","yMXLoG","revmrvrf","Ad9ZEw1IB2W9"];return(ue=function(){return e})()}function xe(e,t){e-=328;const n=ue();let s=n[e];if(void 0===xe.xZfELA){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};xe.iSBibG=r,xe.jkLNFf={},xe.xZfELA=!0}const a=e+n[0],c=xe.jkLNFf[a];if(c)s=c;else{const e=function(e){this.GlZTOD=e,this.qtTQKh=[1,0,0],this.yGyTlE=function(){return"newState"},this.cczvgQ="\\w+ *\\(\\) *{\\w+ *",this.aOeAwA="['|\"].+['|\"];? *}"};e.prototype.VvvupG=function(){const e=new RegExp(this.cczvgQ+this.aOeAwA).test(this.yGyTlE.toString())?--this.qtTQKh[1]:--this.qtTQKh[0];return this.wdNAhs(e)},e.prototype.wdNAhs=function(e){return Boolean(~e)?this.tomJEw(this.GlZTOD):e},e.prototype.tomJEw=function(e){for(let t=0,n=this.qtTQKh.length;t<n;t++)this.qtTQKh.push(Math.round(Math.random())),n=this.qtTQKh.length;return e(this.qtTQKh[0])},new e(xe).VvvupG(),s=xe.iSBibG(s),xe.jkLNFf[a]=s}return s}de();const he=function(){const e={uVORp:function(e,t){return e===t}},t=e;let n=!0;return function(e,s){const r=n?function(){const n=xe;if(s){if(t[n(365)](n(377),"YtAEQ")){const t=s[n(356)](e,arguments);return s=null,t}{_0x2ad317[n(396)](n(341)+n(364)+n(451)+n(411),_0x1aa63a[n(444)]);const e={};return e[n(422)]=!1,e[n(376)+n(394)]=!1,e.paperTrading=!1,e}}}:function(){};return n=!1,r}}();he(void 0,function(){const e=xe,t={oTccT:function(e,t){return e===t},EOTOB:"VXBaJ",fzEhP:function(e,t){return e(t)},pWCQh:function(e,t){return e+t},wLzvr:function(e,t){return e+t},vOaOk:e(367)+e(398),UzBvb:e(337)+e(363)+e(421)+" )",ZoBjI:"[IB Gateway] Get acc"+e(403)+"r:",WKtON:"warn",HRZwe:e(395),ODsfj:e(409),sxCIi:e(433),EyBFS:e(382)},n=function(){const n=e,s={};s[n(447)]=n(341)+"y] Order f"+n(390);const r=s;if(t[n(384)](t[n(346)],"uwqSU"))return _0x41c924[n(352)](r[n(447)]),null;{let e;try{e=t[n(410)](Function,t.pWCQh(t[n(358)](t.vOaOk,t[n(418)]),");"))()}catch(a){e=window}return e}}(),s=n[e(340)]=n[e(340)]||{},r=[e(396),t[e(381)],t[e(368)],e(352),t[e(332)],t[e(378)],t[e(449)]];for(let a=0;a<r[e(336)];a++){if(e(366)===e(442))return _0x54406c[e(352)](t[e(338)],_0x228eea),[];{const t=he[e(361)+"r"][e(372)].bind(he),n=r[a],c=s[n]||t;t[e(348)]=he[e(399)](he),t[e(380)]=c[e(380)][e(399)](c),s[n]=t}}})();class me{constructor(){n(this,e,!1)}async[(e=le(422),le(417)+le(416))](){const e=le,t={pCSTD:function(e,t){return e!==t},vQYra:function(e){return e()},rOZzh:e(385)+e(330),dUKol:function(e,t){return e===t}};try{if(t[e(333)](e(431),"BISYo")){const n=t.vQYra(ce),s={};s[e(425)+"pe"]=t[e(370)];const r={};r[e(402)]=e(408),r[e(432)]=s;const a=await fetch(ie()+(e(438)+"s"),r);if(!a.ok){const t={};return t[e(422)]=!1,t[e(376)+e(394)]=!1,t[e(371)+"ng"]=!1,t}const c=await a[e(387)]();return this.connected=!0===c.connected,{connected:t.dUKol(c[e(393)+e(443)],!0),authenticated:!0===c.connected,paperTrading:4002===n.gatewayPort}}{const t=_0x48bb2f[e(356)](_0x5b4199,arguments);return _0x17420b=null,t}}catch(n){const t={connected:!1};return t[e(376)+e(394)]=!1,t.paperTrading=!1,t}}async[le(450)](){const e=le,t={olFdn:function(e){return e()},HfuZD:e(439),FjGid:e(385)+e(330),ZYoSm:function(e,t){return e===t}};try{const n=ce(),s={};s.host=n[e(397)+"t"],s[e(419)]=n.gatewayPort,s[e(448)]=n[e(448)];const r=await fetch(t[e(374)](ie)+(e(331)+"ct"),{method:t[e(435)],headers:{"Content-Type":t[e(350)]},body:JSON.stringify(s)});if(!r.ok)return!1;const a=await r[e(387)]();return this.connected=t.ZYoSm(a[e(422)],!0),this[e(422)]}catch(n){return!1}}async[le(420)](){const e=le,t={pimAE:function(e,t,n){return e(t,n)},ewsfR:e(439)};try{await t[e(440)](fetch,ie()+(e(335)+e(386)),{method:t[e(430)]}),this[e(422)]=!1}catch{}}async getAccounts(){const e=le,t=function(e,t){return e(t)},n=function(e){return e()};try{const s=await t(fetch,n(ie)+"/api/accou"+e(406));if(!s.ok)return[];return(await s[e(387)]())[e(392)]||[]}catch(s){return[]}}async getPositions(e){const t=le,n={yDiDM:function(e){return e()}};try{const s=await fetch(n[t(423)](ie)+(t(355)+t(334)+"ntId=")+e);if(!s.ok)return[];return(await s.json())[t(375)]||[]}catch(s){return[]}}async[le(359)](){const e=le,t=function(e){return e()};e(341),e(373);try{const n=await fetch(t(ie)+(e(360)+"s"));if(!n.ok)return[];return(await n[e(387)]())[e(405)]||[]}catch(n){return[]}}async["searchCont"+le(446)](e){const t=le,n={ZdDcy:function(e,t){return e(t)},fbrSD:function(e){return e()}};try{const s=await n[t(344)](fetch,n.fbrSD(ie)+"/api/searc"+t(413)+encodeURIComponent(e));if(!s.ok)return[];return(await s[t(387)]())[t(436)]||[]}catch(s){return[]}}async placeOrder(e){const t=le,n=function(e){return e()};t(390);try{const s={};s[t(425)+"pe"]=t(385)+t(330);const r=await fetch(n(ie)+(t(360)+"s"),{method:"POST",headers:s,body:JSON[t(429)](e)});if(!r.ok)return null;const a=await r[t(387)]();return{orderId:a[t(414)]||"ib-"+Date[t(351)](),status:a[t(391)]||"submitted"}}catch(s){return null}}async[le(441)+"r"](e){const t=le,n={HsJAD:function(e,t,n){return e(t,n)},xOBtl:function(e){return e()},rXxnp:t(341)+"y] Cancel "+t(424)+"r:"};try{const s={};s[t(402)]=t(412);return(await n[t(383)](fetch,n.xOBtl(ie)+(t(360)+"s/")+e,s)).ok}catch(s){return!1}}async[le(407)](e){const t=le,n={jnkyO:function(e,t){return e(t)},puYWO:function(e){return e()},MzMuM:function(e,t){return e!==t},LuttJ:t(404)};try{const s=await n.jnkyO(fetch,n.puYWO(ie)+"/api/quote?conid="+e);if(!s.ok)return null;return await s[t(387)]()}catch{return n[t(369)](n[t(379)],"VgmHk"),null}}}const fe=new me;function ge(e,t){e-=274;const n=ye();let s=n[e];if(void 0===ge.DFpppQ){var r=function(e){let t="",n="",s=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=s.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ge.SgUZzb=r,ge.sVITeT={},ge.DFpppQ=!0}const a=e+n[0],c=ge.sVITeT[a];if(c)s=c;else{const e=function(e){this.ZfNnRE=e,this.wUqOvW=[1,0,0],this.NaRnoq=function(){return"newState"},this.LCjwSw="\\w+ *\\(\\) *{\\w+ *",this.CiRiLu="['|\"].+['|\"];? *}"};e.prototype.rzSrke=function(){const e=new RegExp(this.LCjwSw+this.CiRiLu).test(this.NaRnoq.toString())?--this.wUqOvW[1]:--this.wUqOvW[0];return this.gIZPCN(e)},e.prototype.gIZPCN=function(e){return Boolean(~e)?this.IcPImp(this.ZfNnRE):e},e.prototype.IcPImp=function(e){for(let t=0,n=this.wUqOvW.length;t<n;t++)this.wUqOvW.push(Math.round(Math.random())),n=this.wUqOvW.length;return e(this.wUqOvW[0])},new e(ge).rzSrke(),s=ge.SgUZzb(s),ge.sVITeT[a]=s}return s}!function(){const e=ge,t=ye();for(;;)try{if(595250===-parseInt(e(394))/1+-parseInt(e(274))/2*(parseInt(e(364))/3)+parseInt(e(308))/4+-parseInt(e(366))/5*(parseInt(e(409))/6)+-parseInt(e(280))/7*(parseInt(e(395))/8)+-parseInt(e(287))/9+parseInt(e(424))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ve=function(){const e=ge,t={};t[e(329)]=e(369),t[e(430)]="HXRba";const n=t;let s=!0;return function(t,r){const a=e,c={CKGvX:a(288)+"y] Connect"+a(431)+a(317),kQjYT:function(e,t){return e(t)},AHjQP:n[a(329)],iIhEk:n[a(430)]},i=s?function(){const e=a;if(r){if(c[e(348)]!==c[e(416)]){const n=r[e(307)](t,arguments);return r=null,n}_0x2f63e1[e(387)](c[e(448)]),c[e(441)](_0xe68067,t=>({...t,connected:!1,authenticated:!1,loading:!1,error:"Connection"+e(334)+e(437)+e(294)+e(411)+"running."}))}}:function(){};return s=!1,i}}()(void 0,function(){const e=ge,t={};t.JsdPp=e(453)+"+$";const n=t;return ve[e(344)]()[e(371)](e(453)+"+$")[e(344)]().constructor(ve)[e(371)](n[e(363)])});function ye(){const e=["ywn0igzVCIa","BwvZC2fNzq","BufMB1K","AMPktNa","ugXLyxnLihnLBa","C3rHDhvZ","vhL1yvy","u3LTyM9Sie5VDa","ihrPBwvKig91Da","CxvHBNrPDhK","y29UBMvJDgvK","ywnJB3vUDhm","B3qGy29UBMvJDa","B24UlI4","CNvUBMLUzYbHBG","BhKGy29UBMvJDa","Ev0Gq29UBMvJDa","yxrLD2f5igLZia","Dg9tDhjPBMC","CMfJDa","rMfPBgvKihrVia","C3rHCNrZv2L0Aa","quHQuva","ChjVDg90ExbL","Cg9ZAxrPB25Z","AwXHBuy","y3vYCMvUDa","zgvZy3jPChrPBW","wLjWEgy","sLfwqwC","t3jKzxiGugXHyW","BMPNywG","igzHAwXLzdOG","D2f5iI4","CMvMCMvZAerHDa","y3rPB24","tKjMD2O","sNnKuha","mJa4ndqZwKr0t3vb","yMLUza","nZm5nxjgwxPyrW","z0fxz3e","A09hqvm","ANH6rwW","rwPnCNy","C2vHCMnO","s2XPEw0","y29UBMvJDfrVrW","zM9xuxe","r2jcs24","qMzXBuW","y3rVCIGICMv0Dq","Bg9HzefJy291BG","qu1UzLG","Cuzvshq","BMvJDgLVBI4","zxjYB3i","qMHXB0K","BMfIBgvKlG","y29UBMvJDdOG","DMfYAwfUDa","D2fYBG","zMLYC3qU","y291BNq","EK9Yyvm","y2fUy2vSBgvKlG","Bg9N","tLHmwMi","mtaXmJe4ogvhEuzOrW","nZGWmdm5mNfjtvjQBa","Bg9Hze9YzgvYCW","BgjyzKS","vwrOCLe","DhjHy2u","DgL0Bgu","y0jhz2O","B25Z","BgvUz3rO","u3vJy2vZC2z1Ba","qNjPzgDLig5VDa","CI4Gq2HLy2SGzW","y29UC3rYDwn0BW","ifnLBgvJDgvK","ndCZne51sg9vtG","ChjPy2u","C2vYDMvYigLZia","zYbJB25Uzwn0Aq","B3jKzxjZ","BNn1CMuGsuiGrW","y29UAwq","AuLOrwS","t3jKzxiGrMfPBa","y29UBMvJDc4Grq","CM4GDgHPCYiPka","yxrLD2f5lIbdBa","AurLyvm","CgfWzxjuCMfKAq","zNvwr0i","ndu1nZiWmZb4De9uqMy","ic0G","Dg9mB3DLCKnHCW","ALHNzwu","Aw9UigvYCM9YoG","B2jpweO","t054Du8","Aw9UignOzwnRia","yxv0AgvUDgLJyq","D0j1y2C","tM8GqwnJB3vUDa","E30Uy29UC3rYDq","ywnJB3vUDeLK","lIbfBNn1CMuGDa","B3jKzxjuExbL","DhnHEgu","BgHvyMy","A1fQwvq","CMv0DxjUicHMDq","s1zLsMO","Aw5JBhvKzxm","vuP0Be0","DgvK","C2vSzwn0qwnJBW","q0ThDLG","C1Pty1m","C3LTyM9S","EuLsqK0","C2vSzwn0zwrbyW","kcGOlISPkYKRkq","Dw50","Aw5MBW","mtbQCvH5Bxa","r2LOr1u","B3vUDcbMAxjZDa","u3rHCNqGDgHLia","EuLvwLG","zMLUza","n2v2vw1TyW","y29UC29Szq","quTzsK0","Ev0Gq2HLy2TPBG","yxrLD2f5ignVBG","x19WCM90B19F","CgXHy2vpCMrLCG","nte2mty3mwPiEKrjEa","w0LcieDHDgv3yq","wMvZsuy","v0vWqKC","z2v0qwnJB3vUDa","vgzitMO","CNvUBMLUzY4","AguGyNjPzgDLia","tM1duhm","DgfIBgu","igHHCYbIzwvUia","DKnzAhq","B25wtuK","zwqGDg8GsuiGrW","z2v0t3jKzxjZ","z2uGC2vYDMvYia","s1vfA3m","yxrLD2f5","y2fUy2vSt3jKzq","zMLUzcbJB250CG","yxbWBhK","nduYntu2vLLVC0jt","uhPcqMO","C2LKzq","t3jKzxiGq2fUyW","q291BgqGBM90ia","DfnKrwG","t3jKzxiG","iezVDw5K","ihj1BM5PBMCUia","DgLTzwqGB3v0","Bhfnv3u","y2HLy2TdB25Uzq","C2vHCMnOq29UDa","zgvZDhj1y3rPDG","q29UBMvJDgvK","CKjLvwe","u0LlD2m","yKrRwNC"];return(ye=function(){return e})()}ve();const je=function(){const e=ge,t={};t[e(433)]=function(e,t){return e===t},t[e(362)]=e(443);const n=t;let s=!0;return function(e,t){const r={lbXfK:function(e,t){return e(t)}},a=s?function(){const s=ge;if(t){if(n[s(433)](s(443),n[s(362)])){const n=t[s(307)](e,arguments);return t=null,n}r[s(397)](_0xae3acd,e=>({...e,loading:!1,error:s(346)+s(418)+"nsure IB G"+s(343)+"running and API is e"+s(384)}))}}:function(){};return s=!1,a}}();je(void 0,function(){const e=ge,t={gAWgq:function(e,t){return e+t},tsaxe:e(435)+e(377)+e(419)+" )",FlFcs:function(e){return e()},yIRBM:"log",mAfoY:"warn",obOXJ:e(455),GbBKn:e(382),SIKwc:function(e,t){return e<t}},n=t.FlFcs(function(){const n=e;let s;try{s=Function(t[n(367)](n(442)+"nction() "+t[n(439)],");"))()}catch(r){s=window}return s}),s=n[e(281)]=n[e(281)]||{},r=[t[e(451)],t[e(328)],t[e(429)],t[e(375)],"exception",e(296),e(399)];for(let a=0;t[e(324)](a,r.length);a++){const t=je[e(407)+"r"][e(349)][e(365)](je),n=r[a],c=s[n]||t;t[e(285)]=je[e(365)](je),t[e(344)]=c[e(344)].bind(c),s[n]=t}})();const pe=["SPY","QQQ","AAPL","MSFT","NVDA","TSLA","AMD","META"];function we(){const{connected:e,authenticated:t,paperTrading:n,accounts:s,selectedAccount:U,positions:Q,orders:X,loading:$,error:ee,checkConnection:te,connectToGateway:ne,refreshData:se,placeOrder:re,cancelOrder:ae,selectAccount:ce}=function(){var e;const t=ge,n={yIUZX:function(e,t){return e(t)},TfHNj:function(e,t,n){return e(t,n)},DnYKc:"[IB Gateway] Status:",AKYJM:function(e,t){return e(t)},ZesIF:t(322),xMtdj:t(404)+t(341)+"ed to IB G"+t(304),kOGAS:function(e){return e()},EjMrv:function(e,t){return e+t},BfqmL:t(298),sZScS:function(e,t){return e(t)},cBGgj:function(e,t){return e(t)},ZRpxf:t(434)+t(408),jXgee:t(321)+"e",TyuaV:function(e,t){return e===t},UdhrQ:t(333)+t(315),NmCPs:t(309),GihGU:t(318),rBeUa:t(417)+"ed",KIhwV:t(312)+"place orde"+t(406)+t(284)+t(381),shtfO:function(e,t){return e!==t},WEpBG:t(299),ilamF:function(e,t){return e(t)},AMnfX:t(380),BhqoI:function(e){return e()},qwZAg:t(355),iDeaS:"TGtGV",Kliym:function(e,t,n){return e(t,n)},UJtlM:function(e,t,n){return e(t,n)}},s={connected:!1};s[t(432)+t(446)]=!1,s.paperTrading=!1,s[t(337)]=[],s[t(452)+t(389)]=null,s[t(350)]=[],s[t(413)]=[],s.loading=!0,s[t(382)]=null;const[c,i]=r.useState(s),o=r.useRef(null),{toast:l}=a(),d=n[t(372)](r.useCallback,async()=>{const e=t;i(e=>({...e,loading:!0,error:null}));const s=n[e(292)](setTimeout,()=>{const t=e;n[t(278)](i,e=>({...e,connected:!1,authenticated:!1,loading:!1,error:"Connection"+t(334)+t(437)+"he bridge "+t(411)+t(293)}))},8e3);try{const t=await fe[e(319)+e(361)]();return clearTimeout(s),n[e(282)](i,n=>({...n,connected:t.connected,authenticated:t[e(432)+e(446)],paperTrading:t.paperTrading,loading:!1,error:t.connected?t[e(432)+e(446)]?null:"Bridge running but n"+e(338)+e(300)+e(420)+'ick "Connect to Gate'+e(359):e(405)+e(316)+e(277)+"local brid"+e(302)+e(388)})),t}catch(r){clearTimeout(s),i(t=>({...t,connected:!1,authenticated:!1,loading:!1,error:e(346)+e(385)+r[e(327)]}));const t={};return t[e(336)]=!1,t[e(432)+e(446)]=!1,t[e(422)+"ng"]=!1,t}},[]),u=r.useCallback(async()=>{const e=t;i(e=>({...e,loading:!0,error:null}));try{const t=await fe.connect();if(t){const t={};t[e(400)]=n[e(289)],t.description=n.xMtdj,l(t),await d(),await n[e(368)](x)}else n[e(282)](i,t=>({...t,loading:!1,error:"Failed to "+e(418)+e(414)+"ateway is "+e(340)+"d API is enabled."}));return t}catch(s){return i(t=>({...t,loading:!1,error:"Connection"+e(358)+s[e(327)]})),!1}},[l,d]),x=n[t(292)](r.useCallback,async()=>{const e=t;if("LsVEf"!==n[e(376)]){const t=await fe[e(291)+"s"](),n=t[e(279)](t=>t.accountId[e(347)]("DU")||t.accountType[e(426)+"e"]()[e(444)]("paper"));return i(e=>({...e,accounts:t,selectedAccount:n||t[0]||null})),t}{let t;try{t=rQgBvb[e(278)](_0x3e36f1,rQgBvb[e(370)](rQgBvb[e(370)]("return (function() ",e(435)+e(377)+'rn this")( )'),");"))()}catch(s){t=_0x409234}return t}},[]),h=r.useCallback(async()=>{const e=t;if(!c["selectedAc"+e(389)])return[];const s=await fe.getPositions(c[e(452)+"count"].accountId);return n[e(449)](i,e=>({...e,positions:s})),s},[c[t(452)+t(389)]]),m=n[t(372)](r.useCallback,async()=>{const e=t;{const t=await fe[e(301)]();return n[e(449)](i,e=>({...e,orders:t})),t}},[]),f=r.useCallback(async()=>{const e=t;c[e(432)+e(446)]&&await Promise.all([x(),h(),n[e(368)](m)])},[c[t(432)+"ted"],x,h,m]),g=r.useCallback(async e=>{const s=t;if(!c[s(452)+s(389)])return n[s(401)](l,{title:n[s(354)],description:s(330)+"ect an acc"+s(276)+".",variant:n[s(427)]}),null;const r=await fe[s(320)+s(345)](e.symbol);if(n[s(332)](r[s(403)],0)){if(s(390)==s(390)){const t={};return t[s(400)]=n[s(398)],t[s(353)+"n"]=s(312)+s(306)+s(326)+e[s(450)],t[s(386)]=n.jXgee,l(t),null}_0x303255[s(352)]&&_0x168e05(_0x7c5773.current)}const a=r[0],i={};i[s(436)]=c["selectedAc"+s(389)][s(436)],i[s(415)]=a[s(415)],i[s(450)]=e.symbol,i.side=e[s(310)],i[s(335)]=e[s(335)],i[s(438)]=e[s(438)],i[s(410)]=e[s(410)];const o=await fe[s(286)](i);if(o)if(n[s(295)]===n[s(275)])_0x57de64=_0x52934c;else{const t={};t[s(400)]=s(356)+"ed",t.description=e.side+" "+e[s(335)]+" "+e[s(450)]+s(425)+o[s(331)],l(t),await n[s(368)](m)}else n[s(401)](l,{title:n[s(323)],description:n.KIhwV,variant:n[s(427)]});return o},[c[t(452)+"count"],l,m]),v=n[t(445)](r.useCallback,async e=>{const s=t;if(!n.shtfO(n[s(290)],s(299))){const t=await fe[s(305)+"r"](e);if(t){const t={};t[s(400)]=s(311)+"elled",t[s(353)+"n"]=s(314)+e+(s(297)+s(391)),n[s(351)](l,t),await m()}return t}n[s(368)](_0x3846da)},[l,m]),y=n[t(292)](r.useCallback,e=>{const s=t;if(s(453),s(380)!==n[s(379)])return _0x24c7ab[s(344)]()[s(371)](fYmvHb[s(393)])[s(344)]()[s(407)+"r"](_0x2246d9)[s(371)](fYmvHb[s(393)]);{const t=c[s(337)][s(279)](t=>t[s(436)]===e);t&&i(e=>({...e,selectedAccount:t}))}},[c[t(337)]]);r.useEffect(()=>{const e={KUEks:function(e){return n[ge(383)](e)},bDkZw:function(e,t,n){return e(t,n)},njgah:n.qwZAg,BOVXt:function(e,t){return e(t)}};return(async()=>{const t=ge,n={fuVGB:function(e){return e()}};(await d())["authentica"+t(446)]&&(await e[t(303)](x),await h(),await e[t(303)](m),o.current=e[t(325)](setInterval,()=>{n[t(423)](f)},1e4))})(),()=>{const t=ge;e[t(357)]!==t(355)?_0x32a0ba(e=>({...e,selectedAccount:_0x5d02af})):o[t(352)]&&e.BOVXt(clearInterval,o[t(352)])}},[]),r.useEffect(()=>{const e=t;if(e(374)===e(313)){const t=_0x41ed0a.constructor[e(349)].bind(_0x4943c5),n=_0x164650[_0x49be92],s=_0x185834[n]||t;t[e(285)]=_0x24f101[e(365)](_0x5b3b36),t[e(344)]=s[e(344)][e(365)](s),_0x419e9b[n]=t}else c[e(452)+e(389)]&&c[e(432)+e(446)]&&(n[e(332)](e(440),n[e(421)])?_0x372018[e(452)+e(389)]&&_0x43f5de[e(432)+e(446)]&&_0xe9b16():n[e(368)](h))},[null==(e=c[t(452)+t(389)])?void 0:e[t(436)]]);const j={...c};return j[t(319)+t(361)]=d,j[t(373)+t(304)]=u,j[t(378)+"ts"]=x,j["loadPositi"+t(402)]=h,j[t(396)]=m,j[t(360)+"a"]=f,j.placeOrder=g,j[t(305)+"r"]=v,j[t(447)+t(454)]=y,j}(),[ie,oe]=r.useState("overview"),[le,de]=r.useState([]),[ue,xe]=r.useState(!1),[he,me]=r.useState([]),[ve,ye]=r.useState({total:0,today:0,pnl:0}),[je,we]=r.useState(!1),[Ne,be]=r.useState({symbol:"SPY",side:"BUY",quantity:1,orderType:"MKT",price:0}),[Ce,Be]=r.useState(!1);r.useEffect(()=>{const e=async()=>{try{const{data:e}=await c.from("farm_status").select("*").eq("farm_name","high-frequency-paper-trader").single();if(e){const t=new Date(e.updated_at),n=t>new Date(Date.now()-12e4);we("trading"===e.status||n)}const{data:t}=await c.from("autonomous_trades").select("*").order("created_at",{ascending:!1}).limit(50);if(t){me(t);const e=new Date;e.setHours(0,0,0,0);const n=t.filter(t=>new Date(t.created_at)>=e),s=t.reduce((e,t)=>e+(t.pnl||0),0);ye({total:t.length,today:n.length,pnl:s})}}catch(e){}};e();const t=c.channel("hf-trades").on("postgres_changes",{event:"INSERT",schema:"public",table:"autonomous_trades"},e=>{const t=e.new;me(e=>[t,...e].slice(0,50));const n=new Date;n.setHours(0,0,0,0);const s=new Date(t.created_at)>=n;ye(e=>({total:e.total+1,today:s?e.today+1:e.today,pnl:e.pnl+(t.pnl||0)}))}).subscribe(),n=setInterval(e,5e3);return()=>{clearInterval(n),t.unsubscribe()}},[]),r.useCallback(()=>{te()},[te]),r.useEffect(()=>{if(t){De();const e=setInterval(De,3e4);return()=>clearInterval(e)}},[t]);const De=async()=>{xe(!0);try{const{data:e,error:t}=await c.functions.invoke("stock-data",{body:{action:"batch",symbols:pe}});!t&&(null==e?void 0:e.stocks)&&de(e.stocks.map(e=>({symbol:e.symbol,price:e.latestPrice,change:e.change,changePercent:e.changePercent})))}catch(e){}finally{xe(!1)}},ze=e=>{be(t=>({...t,symbol:e,side:"BUY"})),oe("trade")},Le=r.useMemo(()=>{const e=Q.reduce((e,t)=>e+t.marketValue,0),t=Q.reduce((e,t)=>e+t.unrealizedPnl,0);return{totalValue:e,totalPnL:t,totalRealizedPnL:Q.reduce((e,t)=>e+t.realizedPnl,0),pnlPercent:(null==U?void 0:U.balance)?t/U.balance*100:0}},[Q,U]);return $?i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(u,{className:"h-5 w-5 animate-spin text-primary"}),"Connecting to IB Gateway Bridge..."]})}),i.jsx(x,{children:"Checking connection to gateway"})]}),i.jsxs(h,{className:"space-y-4",children:[i.jsx(m,{value:33,className:"h-2"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Looking for the Client Portal Gateway..."}),i.jsxs(k,{children:[i.jsx(Z,{className:"h-4 w-4"}),i.jsx(K,{children:"Connection taking too long?"}),i.jsxs(S,{className:"space-y-2 mt-2",children:[i.jsx("p",{children:"Your browser may be blocking the connection. Try:"}),i.jsxs("ol",{className:"list-decimal list-inside text-sm space-y-1",children:[i.jsxs("li",{children:["Click ",i.jsx("strong",{children:"Gateway Settings"})," above to configure your gateway URL"]}),i.jsx("li",{children:"If using remotely, enter your machine's IP (e.g., https://192.168.1.100:5000)"}),i.jsxs("li",{children:["Accept the ",i.jsx("strong",{children:"self-signed certificate warning"})," in your browser"]}),i.jsx("li",{children:"Login if prompted, then return here"})]})]})]}),i.jsxs(f,{variant:"outline",size:"sm",onClick:()=>window.open("https://localhost:5000","_blank"),children:[i.jsx(g,{className:"h-4 w-4 mr-2"}),"Open Gateway in New Tab"]})]})]}):e?t?i.jsxs("div",{className:"space-y-6",children:[i.jsx(o,{className:"bg-gradient-to-br from-card via-card to-primary/5 border-primary/20",children:i.jsxs(h,{className:"pt-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(y,{className:"h-5 w-5 text-primary"}),i.jsx("span",{className:"font-medium",children:"IBKR Connected"}),n&&i.jsx(j,{variant:"outline",className:"bg-primary/10 text-primary border-primary",children:"Paper Trading"})]}),i.jsxs(p,{value:(null==U?void 0:U.accountId)||"",onValueChange:ce,children:[i.jsx(w,{className:"w-48",children:i.jsx(N,{placeholder:"Select Account"})}),i.jsx(b,{children:s.map(e=>i.jsxs(C,{value:e.accountId,children:[e.accountId," (",e.accountType,")"]},e.accountId))})]}),i.jsx(f,{variant:"ghost",size:"icon",onClick:se,children:i.jsx(v,{className:"h-4 w-4"})})]}),U&&i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(B,{className:"w-3 h-3"}),"Account Balance"]}),i.jsxs("div",{className:"text-3xl font-mono font-bold",children:["$",U.balance.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Buying Power"}),i.jsxs("div",{className:"text-xl font-mono",children:["$",U.buyingPower.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]}),Q.length>0&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Positions Value"}),i.jsxs("div",{className:"text-xl font-bold",children:["$",Le.totalValue.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Unrealized P&L"}),i.jsxs("div",{className:"text-xl font-bold "+(Le.totalPnL>=0?"text-success":"text-destructive"),children:[Le.totalPnL>=0?"+":"","$",Le.totalPnL.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Realized P&L"}),i.jsxs("div",{className:"text-xl font-bold "+(Le.totalRealizedPnL>=0?"text-success":"text-destructive"),children:[Le.totalRealizedPnL>=0?"+":"","$",Le.totalRealizedPnL.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Open Positions"}),i.jsx("div",{className:"text-xl font-bold",children:Q.length})]})]})]})}),i.jsxs(D,{value:ie,onValueChange:oe,children:[i.jsxs(z,{className:"grid w-full grid-cols-2 max-w-md",children:[i.jsxs(L,{value:"overview",className:"flex items-center gap-1",children:[i.jsx(M,{className:"w-4 h-4"})," Overview"]}),i.jsxs(L,{value:"hf-trading",className:"flex items-center gap-1",children:[i.jsx(R,{className:"w-4 h-4"})," HF Trading",je&&i.jsx("span",{className:"ml-1 w-2 h-2 bg-success rounded-full animate-pulse"})]})]}),i.jsx(q,{value:"overview",className:"mt-6",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(A,{className:"w-5 h-5"}),"Quick Trade"]}),i.jsx(x,{children:"Click a symbol to start a trade"})]}),i.jsxs(h,{children:[i.jsx("div",{className:"grid grid-cols-4 gap-2",children:le.length>0?le.map(e=>i.jsxs(f,{variant:"outline",className:"flex flex-col h-auto py-3 hover:border-primary",onClick:()=>ze(e.symbol),children:[i.jsx("span",{className:"font-bold",children:e.symbol}),i.jsxs("span",{className:"text-sm",children:["$",e.price.toFixed(2)]}),i.jsxs("span",{className:"text-xs "+(e.changePercent>=0?"text-success":"text-destructive"),children:[e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})]},e.symbol)):pe.map(e=>i.jsx(f,{variant:"outline",className:"py-6",onClick:()=>ze(e),children:e},e))}),ue&&i.jsx("div",{className:"text-center text-sm text-muted-foreground mt-2",children:"Updating quotes..."})]})]}),i.jsxs(o,{children:[i.jsx(l,{children:i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(V,{className:"w-5 h-5"}),"Current Positions"]})}),i.jsx(h,{children:0===Q.length?i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(P,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No open positions"}),i.jsx("p",{className:"text-sm",children:"Place a trade to get started"})]}):i.jsxs("div",{className:"space-y-3",children:[Q.slice(0,5).map(e=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.symbol}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.position>0?"+":"",e.position," shares @ $",e.avgCost.toFixed(2)]})]}),i.jsxs("div",{className:"text-right "+(e.unrealizedPnl>=0?"text-success":"text-destructive"),children:[i.jsxs("div",{className:"font-medium",children:[e.unrealizedPnl>=0?"+":"","$",e.unrealizedPnl.toFixed(2)]}),i.jsxs("div",{className:"text-sm",children:["$",e.marketValue.toFixed(2)]})]})]},e.conid)),Q.length>5&&i.jsxs(f,{variant:"ghost",className:"w-full",onClick:()=>oe("positions"),children:["View all ",Q.length," positions"]})]})})]})]})}),i.jsx(q,{value:"hf-trading",className:"mt-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(o,{className:"border-2 "+(je?"border-warning bg-warning/5":"border-dashed"),children:[i.jsx(l,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-full "+(je?"bg-warning/20":"bg-muted"),children:i.jsx(R,{className:"w-6 h-6 "+(je?"text-warning animate-pulse":"text-muted-foreground")})}),i.jsxs("div",{children:[i.jsxs(d,{className:"flex items-center gap-2",children:["High-Frequency Paper Trading",je&&i.jsxs(j,{className:"bg-warning text-warning-foreground",children:[i.jsx(P,{className:"w-3 h-3 mr-1 animate-pulse"}),"LIVE"]})]}),i.jsx(x,{children:"Terminal-based worker generating 100+ trades/day for En Pensent training"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Worker Status"}),i.jsx("div",{className:"font-medium "+(je?"text-warning":"text-muted-foreground"),children:je?"RUNNING":"OFFLINE"})]})]})}),i.jsxs(h,{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono",children:ve.total}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Trades"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono",children:ve.today}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Today's Trades"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"text-3xl font-bold font-mono "+(ve.pnl>=0?"text-success":"text-destructive"),children:[ve.pnl>=0?"+":"","$",ve.pnl.toFixed(2)]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total P&L"})]}),i.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold font-mono text-warning",children:je?"30s":"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cycle Time"})]})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(G,{className:"w-4 h-4"}),i.jsx("span",{children:"Auto-refresh every 5 seconds from Supabase"}),i.jsx("span",{className:"mx-2",children:"•"}),i.jsx("span",{children:"11 symbols: AAPL, MSFT, NVDA, TSLA, AMD, META, GOOGL, AMZN, SPY, QQQ, IWM"})]})]})]}),i.jsxs(o,{children:[i.jsxs(l,{children:[i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(P,{className:"w-5 h-5"}),"Live Trade Feed",he.length>0&&i.jsxs(j,{variant:"secondary",children:[he.length," recent"]})]}),i.jsx(x,{children:"Real-time trades from high-frequency worker (updates every 5s)"})]}),i.jsx(h,{children:0===he.length?i.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[i.jsx(R,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"text-lg",children:"No trades yet"}),i.jsx("p",{className:"text-sm",children:"Start the high-frequency worker to see activity"}),i.jsx("code",{className:"block mt-4 p-2 bg-muted rounded text-xs",children:"node farm/workers/high-frequency-paper-trader.mjs"})]}):i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:he.map(e=>{var t;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:["BUY"===e.direction?i.jsx(I,{className:"w-4 h-4 text-success"}):i.jsx(F,{className:"w-4 h-4 text-destructive"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold",children:e.symbol}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString()})]}),i.jsx(j,{variant:"BUY"===e.direction?"default":"destructive",children:e.direction}),i.jsxs(j,{variant:"outline",className:"text-xs",children:[e.shares," shares"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-mono",children:["$",null==(t=e.entry_price)?void 0:t.toFixed(2)]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Entry"})]}),e.predicted_confidence&&i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-mono",children:[(100*e.predicted_confidence).toFixed(0),"%"]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Conf"})]}),void 0!==e.pnl&&null!==e.pnl&&i.jsxs("div",{className:"text-right font-mono "+(e.pnl>=0?"text-success":"text-destructive"),children:[i.jsxs("div",{children:[e.pnl>=0?"+":"","$",e.pnl.toFixed(2)]}),i.jsx("div",{className:"text-xs",children:"P&L"})]}),i.jsx(j,{variant:"outline",className:"open"===e.status?"bg-success/10 text-success":"bg-muted",children:e.status})]})]},e.id)})})})]}),he.filter(e=>"open"===e.status).length>0&&i.jsxs(o,{children:[i.jsx(l,{children:i.jsxs(d,{className:"text-lg flex items-center gap-2",children:[i.jsx(V,{className:"w-5 h-5"}),"Open HF Positions"]})}),i.jsx(h,{children:i.jsxs(O,{children:[i.jsx(T,{children:i.jsxs(W,{children:[i.jsx(H,{children:"Symbol"}),i.jsx(H,{children:"Side"}),i.jsx(H,{className:"text-right",children:"Shares"}),i.jsx(H,{className:"text-right",children:"Entry"}),i.jsx(H,{className:"text-right",children:"Stop Loss"}),i.jsx(H,{className:"text-right",children:"Take Profit"}),i.jsx(H,{children:"Status"})]})}),i.jsx(Y,{children:he.filter(e=>"open"===e.status).map(e=>{var t,n,s;return i.jsxs(W,{children:[i.jsx(E,{className:"font-bold",children:e.symbol}),i.jsx(E,{children:i.jsx(j,{variant:"BUY"===e.direction?"default":"destructive",children:e.direction})}),i.jsx(E,{className:"text-right font-mono",children:e.shares}),i.jsxs(E,{className:"text-right font-mono",children:["$",null==(t=e.entry_price)?void 0:t.toFixed(2)]}),i.jsxs(E,{className:"text-right font-mono text-destructive",children:["$",(null==(n=e.stop_loss)?void 0:n.toFixed(2))||"N/A"]}),i.jsxs(E,{className:"text-right font-mono text-success",children:["$",(null==(s=e.take_profit)?void 0:s.toFixed(2))||"N/A"]}),i.jsx(E,{children:i.jsx(j,{variant:"outline",className:"bg-success/10 text-success border-success/30",children:"Open"})})]},e.id)})})]})})]})]})})]})]}):i.jsxs(o,{className:"border-warning/50",children:[i.jsx(l,{children:i.jsxs(d,{className:"flex items-center gap-2 text-warning",children:[i.jsx(J,{className:"h-5 w-5"}),"Gateway Running - Login Required"]})}),i.jsxs(h,{className:"space-y-4",children:[i.jsxs(k,{variant:"default",children:[i.jsx(Z,{className:"h-4 w-4"}),i.jsx(S,{children:'Bridge is running but not connected to IB Gateway. Open IB Gateway desktop app, log in, then click "Connect to Gateway".'})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(f,{onClick:ne,className:"flex-1",children:[i.jsx(J,{className:"h-4 w-4 mr-2"}),"Connect to Gateway"]}),i.jsxs(f,{variant:"outline",onClick:te,children:[i.jsx(v,{className:"h-4 w-4 mr-2"}),"Check Status"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"IB Gateway must be running with API enabled (port 4002 for paper trading)."})]})]}):i.jsxs(o,{className:"border-destructive/50",children:[i.jsxs(l,{children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(d,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(_,{className:"h-5 w-5"}),"IB Gateway Bridge Not Running"]})}),i.jsx(x,{children:ee||"Start the IBKR Client Portal Gateway to begin trading."})]}),i.jsxs(h,{className:"space-y-4",children:[i.jsxs(k,{children:[i.jsx(Z,{className:"h-4 w-4"}),i.jsx(K,{children:"Quick Setup"}),i.jsx(S,{className:"space-y-2",children:i.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[i.jsxs("li",{children:["Download the ",i.jsx("a",{href:"https://www.interactivebrokers.com/en/trading/ib-api.php",target:"_blank",rel:"noopener",className:"text-primary underline font-medium",children:"IBKR Client Portal Gateway"})]}),i.jsxs("li",{children:["Run ",i.jsx("code",{className:"bg-muted px-1 rounded text-sm",children:"bin/run.sh"})," (Mac) or ",i.jsx("code",{className:"bg-muted px-1 rounded text-sm",children:"bin/run.bat"})," (Windows)"]}),i.jsxs("li",{children:["Login at ",i.jsx("strong",{children:"https://localhost:5000"})," with IBKR credentials"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Using remote access?"})," Click Gateway Settings above and enter your machine's IP"]})]})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(f,{onClick:te,className:"flex-1",children:[i.jsx(v,{className:"h-4 w-4 mr-2"}),"Retry Connection"]}),i.jsxs(f,{variant:"outline",onClick:()=>window.open("https://localhost:5000","_blank"),children:[i.jsx(g,{className:"h-4 w-4 mr-2"}),"Open Gateway"]})]})]})]})}const Ne=()=>i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[i.jsx(Q,{className:"w-8 h-8 text-primary"}),i.jsxs("h1",{className:"text-4xl font-bold",children:[i.jsx("span",{className:"text-primary",children:"En Pensent™"})," Trading"]})]}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Paper trading powered by Interactive Brokers. Start with simulated funds, graduate to real money when ready."})]}),i.jsx(U,{componentName:"IBKRTradingDashboard",children:i.jsx(we,{})}),i.jsx("p",{className:"text-center text-xs text-muted-foreground mt-8",children:"⚠️ Paper trading uses simulated funds. No real money is at risk. When ready, switch to a live IBKR account for real trading."})]});export{Ne as default};
