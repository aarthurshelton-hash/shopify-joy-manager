const e="/**\n * Profile Calculators Module\n * \n * Functions to calculate various fingerprint profiles from game analyses.\n */\n\nimport { \n  GameAnalysis, \n  StyleProfile, \n  PressureProfile, \n  BlunderSignature, \n  TemporalPatterns \n} from './types';\n\n/**\n * Calculate style profile from analyzed games\n */\nexport function calculateStyleProfile(analyses: GameAnalysis[]): StyleProfile {\n  if (analyses.length === 0) {\n    return getDefaultStyleProfile();\n  }\n  \n  const avgComplexMoves = analyses.reduce((sum, a) => sum + a.complexMoves / a.moveCount, 0) / analyses.length;\n  const avgBlunders = analyses.reduce((sum, a) => sum + a.blunders, 0) / analyses.length;\n  const avgMoveTime = analyses.reduce((sum, a) => sum + a.averageMoveTime, 0) / analyses.length;\n  const totalBlunders = analyses.reduce((sum, a) => sum + a.blunders, 0);\n  const endgameBlunders = analyses.reduce((sum, a) => sum + a.phaseBlunders.endgame, 0);\n  \n  return {\n    aggressiveness: Math.min(1, avgBlunders * 0.2),\n    complexity: avgComplexMoves * 2,\n    speedPreference: 1 - (avgMoveTime / 60),\n    riskTolerance: analyses.filter(a => a.wasLosing).length / analyses.length,\n    endgameSkill: 1 - (endgameBlunders / Math.max(1, totalBlunders))\n  };\n}\n\n/**\n * Calculate pressure response profile\n */\nexport function calculatePressureProfile(analyses: GameAnalysis[]): PressureProfile {\n  if (analyses.length === 0) {\n    return getDefaultPressureProfile();\n  }\n  \n  const comebacks = analyses.filter(a => a.cameBack).length;\n  const losingGames = analyses.filter(a => a.wasLosing).length;\n  const avgTimePressureRatio = analyses.reduce((sum, a) => sum + a.timePressureMoves / a.moveCount, 0) / analyses.length;\n  \n  return {\n    tiltResistance: comebacks / Math.max(1, losingGames),\n    timePressurePerformance: 1 - avgTimePressureRatio,\n    complicatingTendency: 0.5, // Would need deeper analysis\n    simplifyingTendency: 0.5\n  };\n}\n\n/**\n * Calculate blunder signature\n */\nexport function calculateBlunderSignature(analyses: GameAnalysis[]): BlunderSignature {\n  const totalBlunders = analyses.reduce((sum, a) => sum + a.blunders, 0);\n  const opening = analyses.reduce((sum, a) => sum + a.phaseBlunders.opening, 0);\n  const middlegame = analyses.reduce((sum, a) => sum + a.phaseBlunders.middlegame, 0);\n  const endgame = analyses.reduce((sum, a) => sum + a.phaseBlunders.endgame, 0);\n  \n  return {\n    dominantBlunderType: 'human',\n    commonEmotionalTriggers: ['frustration', 'impatience'],\n    blunderPhaseDistribution: {\n      opening: opening / Math.max(1, totalBlunders),\n      middlegame: middlegame / Math.max(1, totalBlunders),\n      endgame: endgame / Math.max(1, totalBlunders)\n    },\n    averageTiltThreshold: 2\n  };\n}\n\n/**\n * Calculate temporal patterns\n */\nexport function calculateTemporalPatterns(analyses: GameAnalysis[]): TemporalPatterns {\n  if (analyses.length === 0) {\n    return getDefaultTemporalPatterns();\n  }\n  \n  const avgMoveTime = analyses.reduce((sum, a) => sum + a.averageMoveTime, 0) / analyses.length;\n  const losingGames = analyses.filter(a => a.wasLosing);\n  const comebackRate = losingGames.length > 0 \n    ? analyses.filter(a => a.cameBack && a.won).length / losingGames.length\n    : 0;\n  \n  // Find best phase (lowest blunder rate)\n  const phaseRates = {\n    opening: analyses.reduce((sum, a) => sum + a.phaseBlunders.opening, 0),\n    middlegame: analyses.reduce((sum, a) => sum + a.phaseBlunders.middlegame, 0),\n    endgame: analyses.reduce((sum, a) => sum + a.phaseBlunders.endgame, 0)\n  };\n  \n  const bestPhase = Object.entries(phaseRates)\n    .sort((a, b) => a[1] - b[1])[0][0] as 'opening' | 'middlegame' | 'endgame';\n  \n  return {\n    bestPerformancePhase: bestPhase,\n    averageMoveTime: avgMoveTime,\n    criticalMomentBehavior: avgMoveTime > 30 ? 'calculate' : 'intuition',\n    comebackProbability: comebackRate\n  };\n}\n\n// Default values for empty analyses\nfunction getDefaultStyleProfile(): StyleProfile {\n  return {\n    aggressiveness: 0.5,\n    complexity: 0.5,\n    speedPreference: 0.5,\n    riskTolerance: 0.5,\n    endgameSkill: 0.5\n  };\n}\n\nfunction getDefaultPressureProfile(): PressureProfile {\n  return {\n    tiltResistance: 0.5,\n    timePressurePerformance: 0.5,\n    complicatingTendency: 0.5,\n    simplifyingTendency: 0.5\n  };\n}\n\nfunction getDefaultTemporalPatterns(): TemporalPatterns {\n  return {\n    bestPerformancePhase: 'middlegame',\n    averageMoveTime: 30,\n    criticalMomentBehavior: 'intuition',\n    comebackProbability: 0.3\n  };\n}\n";export{e as default};
