import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as w,aZ as y,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as L,bF as q,bG as A,b6 as P,ae as S,bH as H,ah as I,bI as T,B as E,bJ as K,bK as G,bL as U,bM as Y,bN as _,bO as W,bP as O,bQ as Z,bR as V,bS as X,bT as R,bU as J,bV as F,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as we,a5 as ye,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Pe,H as Se,P as He,ca as Ie,b3 as Te,bs as Ee,be as Ke,cb as Ge,aP as Ue,cc as Ye,d as _e,b2 as We,a9 as Oe,cd as Ze,ce as Ve,cf as Xe,al as Re,au as Je}from"./index-UzGFh8Yo.js";import{L as Fe}from"./LiveColorLegend-I6VlaYFO.js";import{T as Qe}from"./trending-down-CbcRL-CZ.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{a as et}from"./browser-D7bYB7HG.js";import{S as tt,M as nt}from"./sun-D5GpmrAf.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=mt,t=ht();for(;;)try{if(921743===-parseInt(e(514))/1+-parseInt(e(472))/2+-parseInt(e(471))/3+parseInt(e(468))/4*(parseInt(e(483))/5)+-parseInt(e(511))/6*(-parseInt(e(506))/7)+parseInt(e(523))/8*(parseInt(e(535))/9)+-parseInt(e(489))/10*(-parseInt(e(509))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[mt(474)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=mt,t={};t[e(458)]=e(459)+"+$";const n=t;return ut[e(486)]()[e(542)](n[e(458)]).toString().constructor(ut)[e(542)](n[e(458)])});ut();const dt=function(){const e=mt,t={};t[e(541)]=e(484);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(501)]=n.qJKod;const o=i,c=s?function(){const e=a;if(o[e(501)]!=o[e(501)]){const t=_0x2cfa71?function(){if(_0x51925b){const t=_0xae933a[e(474)](_0x34bc62,arguments);return _0x53cff2=null,t}}:function(){};return _0x3ca7c3=!1,t}if(r){const n=r[e(474)](t,arguments);return r=null,n}}:function(){};return s=!1,c}}();function mt(e,t){e-=458;const n=ht();let s=n[e];if(void 0===mt.tFPakw){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};mt.SJmkDI=r,mt.IhOJiH={},mt.tFPakw=!0}const a=e+n[0],i=mt.IhOJiH[a];if(i)s=i;else{const e=function(e){this.LIEcwe=e,this.fkbEFK=[1,0,0],this.tAdDXa=function(){return"newState"},this.eXCcAT="\\w+ *\\(\\) *{\\w+ *",this.yDmwwn="['|\"].+['|\"];? *}"};e.prototype.yluESE=function(){const e=new RegExp(this.eXCcAT+this.yDmwwn).test(this.tAdDXa.toString())?--this.fkbEFK[1]:--this.fkbEFK[0];return this.Ccgjcx(e)},e.prototype.Ccgjcx=function(e){return Boolean(~e)?this.VpHxpF(this.LIEcwe):e},e.prototype.VpHxpF=function(e){for(let t=0,n=this.fkbEFK.length;t<n;t++)this.fkbEFK.push(Math.round(Math.random())),n=this.fkbEFK.length;return e(this.fkbEFK[0])},new e(mt).yluESE(),s=mt.SJmkDI(s),mt.IhOJiH[a]=s}return s}function ht(){const e=["ChjVDg90ExbL","ie5VigXLz2fSia","r2fTzsbKCMf3BG","zMLMDhLFBw92zq","mtaXotG3mfbLtLvTyG","B09LCve","zKTSufq","Dg9tDhjPBMC","AxntDgfSzw1HDa","DgnbCxi","mtbYy2j0C0K","BNrFBwf0zxjPyq","x19WCM90B19F","Cgv0AxrPB24U","sw5ZDwzMAwnPzq","DMuGCNvSzs4","s3PYC0C","BwvZC2fNzq","C2HVCNrnzxnZyq","rhjHDW","CuTUsu4","ywjYAg0","sfHMuhy","suzTy3G","ig1HDgvYAwfSlG","Aw5MBW","zxjYB3i","mZe1mty2nNbvtfPbBG","BgfIBguU","DhjHy2u","mZqZnZe1ovz0yLfJyq","rhjHDYbIEsbPBG","nKz2qLbgEG","CMv0DxjUicHMDq","AxnjBNn1zMzPyW","mteZmJu2oxjssfLZtq","y29UC3rYDwn0BW","vuXKq3m","DMvYyNy","DgfIBgu","AxneCMf3","BNqGtwf0zxjPyq","vuTRshO","yMLUza","nJCXnJHUuKXtyvy","E30Uy29UC3rYDq","B3H5ru0","DhbMtxC","CMvWzxrPDgLVBG","BgvUz3rO","zMvU","u3rHBgvTyxrLiq","CMvLzM9SzcbYzq","zxHJzxb0Aw9U","Bg9N","AxnuAhjLzwzVBa","nZu2BujABLPx","uMvWzxrPDgLVBG","y29UC29Szq","D2fYBG","AwvUDe1HDgvYAq","rxjcvhq","CuPlB2q","C2vHCMnO","qLf6t0O","kcGOlISPkYKRkq","yNzoCKC","CgPJsLC","y3rVCIGICMv0Dq","C3vMzMLJAwvUDa","v3bXse8","zfjLCgv0AxrPBW","ntaTtw92zsbsDq","C3rHBgvTyxrL","mZzzzejtAvC","wxjJBNi","rhzOyNC","mJyWmJGWmhPjCMP4sa","nZyZnJuWBfLNCfjz","CMvHC29U","yxbWBhK","AervD3q","x3j1Bgu","su5Sy3u","C3bSAxq"];return(ht=function(){return e})()}function xt(e){const t=mt,n={ULdCs:t(467),bvNrG:t(530)+t(480)+"moves avai"+t(507),IFmcx:"threefold_"+t(527),hDUwt:"Draw by th"+t(531)+t(492),IyurU:"insufficie"+t(490)+"l",tcAqr:t(493)+t(520)+"l",UKkHz:function(e,t,n){return e(t,n)},tpfMw:t(466)+"le",Yrcnr:t(481)+"!"};if(e.isStalemate()){const e={};return e[t(473)]=n[t(516)],e[t(496)]=n[t(460)],e[t(497)+"ge"]=t(530),e}if(e[t(534)+t(465)+"n"]()){const e={};return e[t(473)]=n[t(502)],e.message=n[t(475)],e[t(497)+"ge"]="Threefold "+t(536),e}if(e[t(513)+t(539)+"al"]()){const e={};return e[t(473)]=n.IyurU,e[t(496)]=t(510)+t(463)+t(503),e.shortMessage=n[t(488)],e}const s=e[t(529)]();if(n[t(521)](parseInt,s[t(478)](" ")[4],10)>=100){const e={};return e[t(473)]=t(482)+t(476),e[t(496)]="Draw by the fifty-mo"+t(494),e.shortMessage=n[t(526)],e}const r={reason:"unknown"};return r[t(496)]=n[t(469)],r[t(497)+"ge"]=t(498),r}function pt(e){const t=mt;return{pjcJW:function(e,t){return e(t)}}[t(461)](xt,e)[t(496)]}dt(void 0,function(){const e=mt,t={qKnIN:function(e,t){return e!==t},WpqHO:"fKlPT",INlcu:function(e,t){return e(t)},KzrsG:function(e,t){return e+t},Dvhbw:function(e){return e()},verbv:e(533),ErBTt:e(538),oxyEM:e(532),IXbxX:e(518),abrhm:e(508)};let n;try{if(t[e(499)](t[e(464)],e(485))){return _0x1194d2(_0x6a34fe)[e(496)]}{const s=t[e(477)](Function,t[e(495)](e(512)+"nction() ",e(524)+e(462)+'rn this")( )')+");");n=t[e(470)](s)}}catch(a){n=window}const s=n[e(537)]=n[e(537)]||{},r=[t[e(517)],t[e(540)],e(504),e(505),t[e(525)],t.IXbxX,t[e(500)]];for(let i=0;i<r[e(528)];i++){const t=dt[e(515)+"r"][e(479)][e(522)](dt),n=r[i],a=s[n]||t;t[e(491)]=dt.bind(dt),t[e(486)]=a[e(486)].bind(a),s[n]=t}})(),function(){const e=gt,t=wt();for(;;)try{if(110225===parseInt(e(517))/1*(parseInt(e(523))/2)+parseInt(e(465))/3+-parseInt(e(470))/4*(-parseInt(e(519))/5)+parseInt(e(424))/6*(-parseInt(e(446))/7)+-parseInt(e(457))/8+parseInt(e(473))/9+-parseInt(e(456))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){const e=gt,t={UOcai:"nUfXr"};t.xXBTb=e(431);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(448)]=function(e,t){return e===t},i[a(432)]=n[a(429)],i[a(439)]=n[a(485)];const o=i,c=s?function(){const e=a;if(o.gErIE(o.kEeSV,o[e(439)])){const t=_0x235d49[e(407)](_0xdba31c,arguments);return _0x136bc5=null,t}if(r){const n=r[e(407)](t,arguments);return r=null,n}}:function(){};return s=!1,c}}()(void 0,function(){const e=gt,t={};t[e(460)]=e(520)+"+$";const n=t;return ft[e(464)]()[e(412)](n[e(460)])[e(464)]()[e(498)+"r"](ft)[e(412)](e(520)+"+$")});function gt(e,t){e-=407;const n=wt();let s=n[e];if(void 0===gt.mlFodU){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.ZdFiur=r,gt.DfwJSD={},gt.mlFodU=!0}const a=e+n[0],i=gt.DfwJSD[a];if(i)s=i;else{const e=function(e){this.vGHNda=e,this.bMtGpH=[1,0,0],this.nOXCui=function(){return"newState"},this.UQbuNS="\\w+ *\\(\\) *{\\w+ *",this.ZzeKDh="['|\"].+['|\"];? *}"};e.prototype.lTsOUC=function(){const e=new RegExp(this.UQbuNS+this.ZzeKDh).test(this.nOXCui.toString())?--this.bMtGpH[1]:--this.bMtGpH[0];return this.IfzHyp(e)},e.prototype.IfzHyp=function(e){return Boolean(~e)?this.SyzUZw(this.vGHNda):e},e.prototype.SyzUZw=function(e){for(let t=0,n=this.bMtGpH.length;t<n;t++)this.bMtGpH.push(Math.round(Math.random())),n=this.bMtGpH.length;return e(this.bMtGpH[0])},new e(gt).lTsOUC(),s=gt.ZdFiur(s),gt.DfwJSD[a]=s}return s}ft();const vt=function(){let e=!0;return function(t,n){const s=gt,r={};r[s(413)]=function(e,t){return e!==t};const a=r,i=e?function(){const e=s;if(!a[e(413)]("uUZwh",e(524)))return()=>{const t=e;_0x5a89be[t(511)][t(420)]&&_0x4c9532[t(511)][t(420)][t(451)]()};if(n){const s=n[e(407)](t,arguments);return n=null,s}}:function(){};return e=!1,i}}();vt(void 0,function(){const e=gt,t={ewvJw:function(e,t){return e(t)},nrtuf:function(e,t){return e+t},BrzCQ:function(e,t){return e===t},XtVLv:e(423),ufRcR:function(e){return e()},lCGEW:e(497),fmYZT:e(521),eGWnI:"exception"},n=t[e(419)](function(){const n=e;let s;try{s=t.ewvJw(Function,t[n(414)]("return (function() "+n(500)+'ctor("return this")( )',");"))()}catch(r){if(t[n(450)](t[n(476)],t[n(476)]))s=window;else if(_0x570b5b){const e=_0x44efde[n(407)](_0x182987,arguments);return _0xa25593=null,e}}return s}),s=n[e(486)]=n[e(486)]||{},r=[t.lCGEW,t[e(502)],e(494),e(501),t[e(442)],e(467),e(516)];for(let a=0;a<r[e(505)];a++){const t=vt[e(498)+"r"][e(418)][e(490)](vt),n=r[a],i=s[n]||t;t[e(487)]=vt.bind(vt),t[e(464)]=i.toString.bind(i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=gt,r={eCjeP:"Web Audio API not su"+s(453),Vmyeh:function(e,t){return e!==t},xeQKC:s(416),xachm:function(e,t){return e||t},UWhPI:function(e,t){return e+t},xfeEb:function(e,t){return e!==t},ZltLz:"FfkBy",KoOhu:function(e){return e()},qqrKK:function(e,t){return e||t},zdzxa:function(e,t){return e<t},NOQii:s(468),DrPmB:s(510),XusSL:function(e,t,n,s,r,a){return e(t,n,s,r,a)},IOdIy:function(e,t,n,s,r,a){return e(t,n,s,r,a)},RLIOn:"triangle",jMSTE:s(489),rssDt:function(e,t,n,s,r,a){return e(t,n,s,r,a)},jRXMP:function(e,t,n){return e(t,n)},Grqof:s(488),GxHkc:s(444),aTnEw:"sine",VyrMz:function(e,t,n){return e(t,n)},dlDiD:function(e,t,n,s,r,a){return e(t,n,s,r,a)},YGaVq:"victory",Tqjfs:function(e,t,n,s,r,a){return e(t,n,s,r,a)},vRwAt:function(e,t,n){return e(t,n)},EnxQo:s(484),YiAmq:function(e,t,n){return e(t,n)},FQFza:function(e,t,n,s,r,a){return e(t,n,s,r,a)},XxIjI:function(e,t){return e(t)}},a={};a[s(420)]=null,a.gainNode=null;const i=r[s(478)](t.useRef,a),o=t.useCallback(()=>{const e=s;if(!i[e(511)][e(420)])try{const t=new(window.AudioContext||window[e(434)+e(492)]),s=t[e(512)]();s[e(426)](t[e(441)+"n"]),s[e(411)][e(481)]=n;const r={};r[e(420)]=t,r[e(525)]=s,i[e(511)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;r[e(428)](r[e(499)],r[e(499)])?_0x659bc6.current[e(420)]&&_0x39dbc1[e(511)].context[e(451)]():i.current[e(525)]&&(i[e(511)][e(525)][e(411)][e(481)]=n)},[n]);const c=t.useCallback((t,n,a=s(471),c=.01,l=.1,u)=>{const d=s;if(!e)return;o();const{context:m,gainNode:h}=i[d(511)];if(r.xachm(!m,!h))return;const x=m.createOscillator(),p=m.createGain();x[d(459)]=a,x[d(507)][d(408)+d(515)](t,m[d(415)+"e"]),u&&x[d(507)][d(438)+"lRampToVal"+d(491)](u,m[d(415)+"e"]+n),p[d(411)][d(408)+"Time"](0,m[d(415)+"e"]),p.gain["linearRamp"+d(440)+d(409)](1,r[d(475)](m.currentTime,c)),p.gain[d(438)+d(445)+d(491)](.01,m[d(415)+"e"]+n-l),p[d(411)].linearRampToValueAtTime(0,m.currentTime+n),x[d(426)](p),p[d(426)](h),x.start(m[d(415)+"e"]),x.stop(r[d(475)](m[d(415)+"e"],n))},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(r[a(522)](a(455),r.ZltLz)){if(!e)return;r[a(479)](o);const{context:s,gainNode:c}=i[a(511)];if(r[a(495)](!s,!c))return;const l=s[a(509)]*t,u=s.createBuffer(1,l,s[a(509)]),d=u["getChannel"+a(477)](0);for(let e=0;r[a(518)](e,l);e++)d[e]=2*Math[a(437)]()-1;const m=s.createBufferSource();m[a(508)]=u;const h=s[a(443)+a(430)]();h[a(459)]=r[a(482)],h[a(507)].value=n;const x=s[a(512)]();x[a(411)][a(408)+"Time"](.3,s[a(415)+"e"]),x[a(411)][a(438)+"lRampToVal"+a(491)](.01,s[a(415)+"e"]+t),m[a(426)](h),h.connect(x),x.connect(c),m.start(s[a(415)+"e"]),m[a(493)](s[a(415)+"e"]+t)}else{const e=new(_0x3c7c36[a(506)+"xt"]||_0x113e3a[a(434)+"oContext"]),t=e.createGain();t[a(426)](e[a(441)+"n"]),t.gain[a(481)]=_0x5c0cc0;const n={};n[a(420)]=e,n.gainNode=t,_0x425007[a(511)]=n}},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(462)]:r[n(410)](c,800,.08,n(471),.005,.05),r.IOdIy(c,400,.06,r[n(469)],.005,.04);break;case r[n(463)]:l(.12,2e3),r[n(433)](c,300,.1,n(514),.005,.08),c(150,.15,n(471),.01,.1);break;case n(458):c(600,.06,n(471),.005,.04),r[n(435)](setTimeout,()=>c(700,.06,n(471),.005,.04),80);break;case r[n(503)]:r[n(461)](c,880,.15,r[n(469)],.01,.1),setTimeout(()=>c(1100,.12,"triangle",.01,.08),120);break;case r[n(421)]:c(880,.2,r[n(447)],.01,.15),r[n(435)](setTimeout,()=>c(660,.2,"sine",.01,.15),150),setTimeout(()=>c(440,.3,n(471),.01,.2),300),r.VyrMz(setTimeout,()=>c(330,.4,n(471),.01,.3),500);break;case n(513):r[n(454)](c,523,.12,r[n(447)],.01,.08),setTimeout(()=>c(659,.12,"sine",.01,.08),100),setTimeout(()=>c(784,.2,n(471),.01,.15),200);break;case n(483):c(440,.15,n(422),.01,.1),setTimeout(()=>c(349,.25,n(422),.01,.2),150);break;case r[n(472)]:r[n(474)](c,523,.1,r.aTnEw,.01,.08),setTimeout(()=>c(659,.1,n(471),.01,.08),100),r[n(466)](setTimeout,()=>c(784,.1,n(471),.01,.08),200),setTimeout(()=>c(1047,.3,n(471),.01,.25),300);break;case r[n(480)]:c(392,.2,r.aTnEw,.02,.15),r.vRwAt(setTimeout,()=>c(349,.2,n(471),.02,.15),200),r.VyrMz(setTimeout,()=>c(330,.3,"sine",.02,.25),400),r[n(417)](setTimeout,()=>c(262,.4,n(471),.02,.35),650);break;case n(452):r[n(454)](c,440,.15,n(471),.01,.1),r[n(435)](setTimeout,()=>c(440,.15,n(471),.01,.1),180),r[n(496)](setTimeout,()=>c(523,.2,n(471),.01,.15),360);break;case n(449):r[n(427)](c,200,.1,n(514),.005,.08),r[n(454)](c,150,.08,n(436),.005,.06)}},[e,c,l]);r.VyrMz(t.useEffect,()=>()=>{const e=gt;i.current[e(420)]&&i[e(511)].context[e(451)]()},[]);const d={};return d[s(425)]=u,d.initAudio=o,d};function wt(){const e=["vhfQzNm","vvDOueK","whrwthy","rgf0yq","whHjAKK","s29pAhu","rw54uw8","DMfSDwu","tK9rAwK","z2fTzuvUza","zgvMzwf0","EfHcvgi","y29UC29Szq","x19WCM90B19F","y2HLy2S","y2fWDhvYzq","yMLUza","DwvbDfrPBwu","B0nVBNrLEhq","C3rVCa","Aw5MBW","CxfYs0S","wwLbBxe","Bg9N","y29UC3rYDwn0BW","Egvrs0m","E30Uy29UC3rYDq","zxjYB3i","zM1zwLq","r3jXB2y","zunQzva","BgvUz3rO","qxvKAw9dB250zq","zNjLCxvLBMn5","yNvMzMvY","C2fTCgXLuMf0zq","Bw92zq","y3vYCMvUDa","y3jLyxrLr2fPBG","z2fTzvn0yxj0","C3f1yxjL","vgLTzq","DhjHy2u","mtLRyMDlzem","EMr6Ege","mJbvC1jHA0S","kcGOlISPkYKRkq","D2fYBG","EgzLrwi","mtK4mZrqwfPLt20","twjdEe0","z2fPBK5Vzgu","yxbWBhK","C2v0vMfSDwvbDa","Aw1L","whvZu0W","z2fPBG","C2vHCMnO","ugrIsgy","BNj0Dwy","y3vYCMvUDfrPBq","BhHpBxm","vNLYtxO","ChjVDg90ExbL","Dwzsy1i","y29UDgv4Da","r3HiA2m","DhjPyw5NBgu","zgLHz3e","mtu2Dw9vvNrZ","CgXHEvnVDw5K","y29UBMvJDa","rLfgEMe","vM15zwG","vu9JywK","ywrgAwX0zxi","q3fMEe8","A0vLu1y","CNnZrhq","D2vIA2L0qxvKAq","ALjytva","C2f3Dg9VDgG","CMfUzg9T","zxHWB25LBNrPyq","zfDKBum","vg9wywX1zuf0va","zgvZDgLUyxrPBW","zuDxBKK","y3jLyxrLqMLXDq","y2HLy2TTyxrL","BfjHBxbuB1zHBa","nZG4owjgwvj6ua","yvrUrxC","z0vYsuu","AwXSzwDHBa","qNj6q1e","y2XVC2u","zhjHDW","ChbVCNrLza","zgXeAuq","swHdqKW","mZi3nJm5mejzwxPQua","mtuZnJy0ofPUD0zjva","y2fZDgXL","DhLWzq","C3HPqLi","su9KsxK","rhjqBui","AK1tveu","Dg9tDhjPBMC","mZGXotyWv0nzBgzQ","DLj3qxq","DgfIBgu","Bg93CgfZCW","uKXjt24","mtq1ndKYsgjSCKfx","C2LUzq","wuDHvNe","mtC4mJeWoe5Sz3PPwG"];return(wt=function(){return e})()}const yt=kt;function jt(){const e=["mJeWrKvcsMvq","mtjPvg5Xvwy","y29UC29Szq","kcGOlISPkYKRkq","Dg9tDhjPBMC","y2HLC3mTC291BG","wNzhC1i","BMn0Aw9UkcKG","x19WCM90B19F","y29UC3rYDwn0BW","yMLUza","mti3ntuYruXhuKHl","zw5HyMXLza","zc1Zzxr0Aw5NCW","D2fYBG","yxbWBhK","og5Oz2TkqW","rfDysLe","zxHJzxb0Aw9U","mJa2mZCYrNPKvxLx","mta3ntaZCNbfsNP3","DhjHy2u","mti2AgLjzxjL","mtbQsfnNuNe","Aw5MBW","CM4GDgHPCYiPka","mtmWnJe0ouDwtLvLqq","C2vHCMnO","otuYnLL4CNbiAG","mZK3mdq0Cu5ZAvH6","y3rVCIGICMv0Dq","mteXmJa0ufLxvMzO","BgvUz3rO","ChjVDg90ExbL","zxjYB3i"];return(jt=function(){return e})()}!function(){const e=kt,t=jt();for(;;)try{if(232568===parseInt(e(221))/1*(-parseInt(e(209))/2)+-parseInt(e(219))/3+parseInt(e(212))/4*(parseInt(e(216))/5)+parseInt(e(187))/6+parseInt(e(215))/7*(parseInt(e(204))/8)+parseInt(e(189))/9*(parseInt(e(193))/10)+-parseInt(e(213))/11*(parseInt(e(194))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ct=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[kt(208)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=kt;return Ct[e(197)]()[e(220)](e(196)+"+$")[e(197)]()[e(202)+"r"](Ct).search("(((.+)+)+)+$")});Ct();const Nt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[kt(208)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function kt(e,t){e-=187;const n=jt();let s=n[e];if(void 0===kt.MhHPls){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};kt.GIGkkW=r,kt.DvfWgR={},kt.MhHPls=!0}const a=e+n[0],i=kt.DvfWgR[a];if(i)s=i;else{const e=function(e){this.XSIMLv=e,this.FhQZOT=[1,0,0],this.oauXaT=function(){return"newState"},this.IuXsPX="\\w+ *\\(\\) *{\\w+ *",this.WdIumQ="['|\"].+['|\"];? *}"};e.prototype.WzIjoN=function(){const e=new RegExp(this.IuXsPX+this.WdIumQ).test(this.oauXaT.toString())?--this.FhQZOT[1]:--this.FhQZOT[0];return this.gplahU(e)},e.prototype.gplahU=function(e){return Boolean(~e)?this.AfeCku(this.XSIMLv):e},e.prototype.AfeCku=function(e){for(let t=0,n=this.FhQZOT.length;t<n;t++)this.FhQZOT.push(Math.round(Math.random())),n=this.FhQZOT.length;return e(this.FhQZOT[0])},new e(kt).WzIjoN(),s=kt.GIGkkW(s),kt.DvfWgR[a]=s}return s}Nt(void 0,function(){const e=kt,t={DWXJQ:function(e,t){return e+t},rlzpc:"{}.constru"+e(188)+e(218)+" )",ZvGsR:function(e){return e()},LvKRs:e(207),oNEYT:e(214)},n=t[e(199)](function(){const n=e;let s;try{s=Function(t[n(210)]("return (fu"+n(200)+t.rlzpc,");"))()}catch(r){s=window}return s}),s=n[e(195)]=n.console||{},r=["log",t.LvKRs,e(217),e(192),e(211),"table",t.oNEYT];for(let a=0;a<r[e(190)];a++){const t=Nt[e(202)+"r"][e(191)].bind(Nt),n=r[a],i=s[n]||t;t[e(201)]=Nt[e(203)](Nt),t[e(197)]=i[e(197)][e(203)](i),s[n]=t}})();const Mt={};Mt.name=yt(198)+yt(206);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[yt(205)]}))}),Mt)),Dt=qt;!function(){const e=qt,t=Pt();for(;;)try{if(235268===-parseInt(e(480))/1*(-parseInt(e(739))/2)+-parseInt(e(624))/3+parseInt(e(481))/4+parseInt(e(657))/5*(parseInt(e(630))/6)+-parseInt(e(596))/7+-parseInt(e(612))/8+parseInt(e(518))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(631)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=qt,t={};t[e(692)]=e(681)+"+$";const n=t;return Bt[e(592)]().search(n[e(692)])[e(592)]()[e(582)+"r"](Bt)[e(462)](n[e(692)])});Bt();const Lt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(631)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function qt(e,t){e-=450;const n=Pt();let s=n[e];if(void 0===qt.MQDVop){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.AxDWZw=r,qt.liQxnk={},qt.MQDVop=!0}const a=e+n[0],i=qt.liQxnk[a];if(i)s=i;else{const e=function(e){this.zcHnqH=e,this.KCvXZG=[1,0,0],this.TpMMDN=function(){return"newState"},this.YRuQoH="\\w+ *\\(\\) *{\\w+ *",this.kVGESh="['|\"].+['|\"];? *}"};e.prototype.AETVog=function(){const e=new RegExp(this.YRuQoH+this.kVGESh).test(this.TpMMDN.toString())?--this.KCvXZG[1]:--this.KCvXZG[0];return this.faDyIa(e)},e.prototype.faDyIa=function(e){return Boolean(~e)?this.avzxkK(this.zcHnqH):e},e.prototype.avzxkK=function(e){for(let t=0,n=this.KCvXZG.length;t<n;t++)this.KCvXZG.push(Math.round(Math.random())),n=this.KCvXZG.length;return e(this.KCvXZG[0])},new e(qt).AETVog(),s=qt.AxDWZw(s),qt.liQxnk[a]=s}return s}Lt(void 0,function(){const e=qt,t={iTGCe:function(e,t){return e+t}};t[e(666)]=e(564)+e(454)+'rn this")( )',t[e(651)]=e(707),t[e(625)]="table";const n=t;let s;try{s=Function(n.iTGCe(e(598)+"nction() "+n.LPVhm,");"))()}catch(i){s=window}const r=s.console=s[e(553)]||{},a=[e(644),"warn",e(545),n.EaNOb,e(704),n[e(625)],e(622)];for(let o=0;o<a[e(654)];o++){const t=Lt.constructor[e(540)][e(528)](Lt),n=a[o],s=r[n]||t;t[e(572)]=Lt[e(528)](Lt),t[e(592)]=s.toString[e(528)](s),r[n]=t}})();const At={};function Pt(){const e=["Aw5MBW","y2HHBM5LBa","DgLTzv9JB250CG","AM1hA3u","y2HLy2TTyxrL","ywXS","ugXLyxnLihnPzW","y2HHBMDL","y29UC29Szq","D3DZBMK","y29TCgXLDgvK","wufmCwW","Bhb3q2y","r2fTzsbHBhjLyq","Bw92zxmT","z2fTzvn0yxrL","zNf1DK8","D2HPDgvFCgfSzq","yuDYsNu","E30Uy29UC3rYDq","AxHmsLu","shPkwvy","Aw5Zzxj0","ChjVzMLSzxm","sxDzEvK","Bw92zq","zMvU","x19WCM90B19F","CMvTB3zLq2HHBG","DxnLCL9Pza","wxbjtuC","s1fzsey","ANHHrKi","ywn0AxzL","AM9PBIbNyw1L","zgvMzwf0","CMvZDwX0","y29UC3rYDwn0BW","yMXPDhPFnq","CMztBNm","EgHiA0m","C3rHDhvZ","y2HLC3nFz2fTzq","rwr3Bha","C3rHCNrLzf9HDa","Bw92zv9Zyw4","rhjHDYbVzMzLCG","Dg9tDhjPBMC","D211sNm","CKLK","Bw92zv9JB3vUDa","mtK0ntC2mLPkEenLAa","DNnJy04","CMv0DxjUicHMDq","uhjgy1C","qwDNsw8","BMv3","B25LBNqGyxv0BW","CM4GDgHPCYiPka","zhjHDW","ruvdufq","C2LUz2XL","A0zpzgq","rhPcr1K","yMXHy2TFCgXHEq","sLvYvge","AM9PBIbIEsbJBW","mJa3ndu4nenZEMH1uW","CMfWAwrFmtu","CMHWy08","yK1RC24","ywjHBMrVBMvK","y2HHBgXLBMDLxW","EMXPAxe","tw92zsbLCNjVCG","yMXHy2TFD2LUCW","t2HUz2K","DhjHy2u","yK5QDKq","ntu5nZeZzhnhr0zK","tLnmruO","C2LVBIK","q2HHBgXLBMDLia","AwXSzwDHBa","BIbPBIb0BYbJCG","oteZmJbMt29qAeS","yxbWBhK","D2HPDgvqBgf5zq","A2jMtfO","BMn0Aw9UkcKG","wwDbzuy","Cxrnwuu","ww91ihDVBIe","CM1QEuK","y3jLyxrLzef0","Bw92zv9UDw1Izq","BIb0AgLZihzLCG","DNDkCgy","igDHBwu","Bg9N","tNbtzKi","ufL0tuW","y3jLyxrLzf9HDa","s0n6D08","vuDyAhu","D2HPDgu","rwfot2i","D2HPDgvqywXLDa","Dg9vChbLCKnHCW","BgvUz3rO","yMXHy2TFCgfSzq","yMXHy2S","mtm1AeXRsNjh","tgz6B2y","AgfSBgvUz2vFyW","BMvUDc4UlG","EvPbr0q","DMLJDg9YEq","q2H1uKC","rhLeqKC","D2HPDgvFDgLTzq","tfbwAg0","zwqHifDHAxrPBG","u0P4D0C","y3vYCMvUDf9Mzq","y3jHBMS","BwfW","DgTRt3i","ihbSyxLPBMCGyq","C3vIC3rYAw5N","yMXHy2TuAw1LuG","EenHCMK","DhrL","zNjVBq","DxbKyxrL","AxndAgvJA21HDa","kcGOlISPkYKRkq","BxLdB2XVCG","C09OB3G","ihnLBNqGkg9WCa","y3vYCMvUDezLBG","q3HWy20","igv4CgLYzwqGyW","y2fZDgXL","whDLtxi","q2fUBM90igPVAq","B05QEM0","EMDpuvC","AxndAgvJAW","y2HLC3nFBw92zq","Afjovve","zxjFAwq","BgvnB3zLCW","BMv3uMf0Aw5N","DgLTzunVBNrYBW","v3D6sK0","qMXHy2SGD2LUCW","DLDQt1q","BIbPBIb0BYbQBW","zxHJzxb0Aw9U","su5trvju","wwPXD3i","zxjYB3i","yMXHy2TFDgLTzq","AgfUz2vZ","v2HPDguGD2LUCW","Bg9HzeDHBwu","vvHKrfm","B3jKzxi","ChvIBgLJ","B3vUza","zwXVx3jHDgLUzW","Aefqv2m","zYbMB3iGB3bWBW","D2LUBMvYswq","rxjPz0i","ENrdzM4","ww91ihjLC2LNBG","B2rL","y2HHBgXLBMDLqW","B2zMzxjeCMf3","BMvS","C3vJy2vZCW","D2fPDgLUzW","lwfJy2vWDhmGAq","C3f1yxjL","CYbcBgfJAY4","DgfIBgu","Dg9ju09tDhjPBG","DKDnEuC","tuLoz0m","Cg9ZDgDYzxnFyW","Aw5JBhvKzxm","sgflsuK","odjVvenvsLa","y2HLy2S","wK9Pz3m","CgXAvNi","vfrQruq","wKTmEMq","sM9PBMvKigDHBq","ihjHDgLUz3m6","y3rVCIGICMv0Dq","BwvZC2fNzq","t3rgAwK","y2fWDhvYzwq","CgXHEwvYx2LK","Aw4GysbNyw1L","CgPkDeS","y2fWDhvYzq","C2vHCMnO","zhKGC3rHCNrLza","t3vzEfq","AMTJtee","u2HRv2C","ChjVBw90Aw9U","Bg9FCMf0Aw5N","CvnvtgO","Bw92zunVDw50","whr3Bgm","DhvYBG","BIb5B3vYig93BG","rgPdque","DMvYyM9Zzq","q0LHCKy","Bw92zv91y2K","s2jcvKC","CeHWzvO","nJq1oejZCuzXAq","otu5odC2DKz2z2jo","C3rHCNrLzef0","z2fTzvn0yxj0","Bg9HzcbNyw1L","sw52ywXPzcbVCG","quPNzKK","Axnhyw1Lt3zLCG","wNjcCMm","zNfrDvy","z2fTzv9Pzd1LCq","rKX2suK","rgXjAKC","CgDU","tY1plu8","rwf1rKK","C2fU","D2HPDgvFD2LUCW","uMf0Aw5NoIa","t3rRswK","u3fuA0O","quzrDw8","z0jSwuG","y0rMBhu","AM9PBKj5q29Kzq","uNfmzNy","D2HPDgvFCgXHEq","y29KztOG","rMfPBgvKihrVia","D2HPDgvuAw1LuG","yMXHy2TqywXLDa","BwfRzu1VDMu","tY1p","uMDKENe","yMXHy2TqBgf5zq","z2fTzv9Pza","y29Kzq","A3jjsNy","mZKWoty5EMTryNLT","C2vSzwn0","C3vIC2nYAwjL","y3zOs3y","zMLUza","qLPsDKG","Bwf5yMvtAw5NBa","z2vUzxjHDgvFyW","rgfzy1K","wevkDeK","yMLUza","AM9PBKDHBwu","vejTwNG","C0XWD2i","ug1AA2C","sLH5zKu","x3jLBwfPBMLUzW","zhLNzve","yxnJzw5KAw5N","Dw50Aw1Lza","y2Doy2q","sMfgz1y","ChjVDg90ExbL","DMnrv3a","y2H5Ahq","D2LUBMvYx2LK","BxHIvNa"];return(Pt=function(){return e})()}At.bullet_1=60,At[Dt(583)]=300,At[Dt(613)]=900,At[Dt(537)]=0;const St=At,Ht=It;function It(e,t){e-=312;const n=Ut();let s=n[e];if(void 0===It.ZozxJc){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};It.cbrbLp=r,It.kqFhGW={},It.ZozxJc=!0}const a=e+n[0],i=It.kqFhGW[a];if(i)s=i;else{const e=function(e){this.TGlVWx=e,this.RwLoDJ=[1,0,0],this.RQoOdj=function(){return"newState"},this.YTKVRL="\\w+ *\\(\\) *{\\w+ *",this.XfIxqi="['|\"].+['|\"];? *}"};e.prototype.vbYPAF=function(){const e=new RegExp(this.YTKVRL+this.XfIxqi).test(this.RQoOdj.toString())?--this.RwLoDJ[1]:--this.RwLoDJ[0];return this.zzugiv(e)},e.prototype.zzugiv=function(e){return Boolean(~e)?this.wtqHkc(this.TGlVWx):e},e.prototype.wtqHkc=function(e){for(let t=0,n=this.RwLoDJ.length;t<n;t++)this.RwLoDJ.push(Math.round(Math.random())),n=this.RwLoDJ.length;return e(this.RwLoDJ[0])},new e(It).vbYPAF(),s=It.cbrbLp(s),It.kqFhGW[a]=s}return s}!function(){const e=It,t=Ut();for(;;)try{if(226033===-parseInt(e(363))/1+-parseInt(e(353))/2*(-parseInt(e(320))/3)+-parseInt(e(352))/4*(-parseInt(e(325))/5)+parseInt(e(350))/6*(-parseInt(e(324))/7)+-parseInt(e(331))/8*(parseInt(e(360))/9)+-parseInt(e(366))/10*(parseInt(e(338))/11)+-parseInt(e(323))/12*(-parseInt(e(368))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Tt=function(){const e=It,t={};t[e(354)]=function(e,t){return e!==t},t[e(319)]=e(313);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(347)]="Haptic fee"+a(343)+a(315);const o=i;if(n[a(354)]("zrDAs",n.lgSOp))return _0x4e551f[a(356)](o[a(347)],_0x2798ca),!1;{const e=s?function(){if(r){const e=r[a(364)](t,arguments);return r=null,e}}:function(){};return s=!1,e}}}()(void 0,function(){const e=It,t={};t.aytwT=e(346)+"+$";const n=t;return Tt[e(355)]()[e(314)]("(((.+)+)+)+$").toString()[e(342)+"r"](Tt)[e(314)](n.aytwT)});Tt();const Et=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[It(364)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Et(void 0,function(){const e=It,t={FuIDQ:function(e,t){return e(t)},UPCSE:function(e,t){return e+t},ZntFX:"return (function() ",pYzHo:e(321)+'ctor("retu'+e(333)+" )",ctUnv:function(e){return e()},trUms:e(348),kSDvg:"trace"},n=t[e(328)](function(){const n=e;let s;try{s=t[n(367)](Function,t[n(339)](t[n(322)]+t[n(317)],");"))()}catch(r){if("bDqzn"===n(312))return!!_0x4245b2&&_0xa3a887[n(345)]([10,30,10,30,20]);s=window}return s}),s=n[e(316)]=n[e(316)]||{},r=["log",e(356),"info",e(340),t[e(336)],e(351),t[e(327)]];for(let a=0;a<r.length;a++){const t=Et.constructor[e(337)][e(361)](Et),n=r[a],i=s[n]||t;t[e(334)]=Et.bind(Et),t[e(355)]=i.toString.bind(i),s[n]=t}})();const Kt={};Kt[Ht(329)]=10,Kt.medium=25,Kt.heavy=50,Kt[Ht(330)]=[10,50,20],Kt[Ht(340)]=[50,30,50,30,50],Kt[Ht(349)]=5;const Gt=Kt;function Ut(){const e=["BgLNAhq","C3vJy2vZCW","nduZntjmuwf5rKi","BwvKAxvT","CM4GDgHPCYiPka","x19WCM90B19F","De9LquS","DhjvBxm","ChjVDg90ExbL","mtC2Dgf2Cvnf","vvbdu0u","zxjYB3i","Cursuwq","y29UC3rYDwn0BW","zgjHy2SGzMfPBa","sgfWDgLJigzLzq","DMLICMf0zq","kcGOlISPkYKRkq","r21MEvG","zxHJzxb0Aw9U","C2vSzwn0Aw9U","otaYmZq2D1LJsvng","DgfIBgu","mtaYmta3nNfvA2LevW","nMLHEND2tq","rw5Nv0y","Dg9tDhjPBMC","D2fYBG","Dw5KzwzPBMvK","EvnKuK4","AgvHDNK","nZjiAuX5rNG","yMLUza","BuDvAMK","ndm2mdC3sNvowvfS","yxbWBhK","zxHZC08","ndiZmtbxwNf5BvO","rNvjrfe","ntKYmte2mNbZC1HTyq","BuLgz0m","ENjeqxm","C2vHCMnO","zwq6","y29UC29Szq","CfL6sg8","wvjvsLi","BgDtt3a","mJe0oda2sgzWzxHQ","E30Uy29UC3rYDq","wM50rLG","mtjqs2XoCuC","n1rMDMPdyq","nuL1Ce1byq","EencBum","A1neDMC","y3rvBNy"];return(Ut=function(){return e})()}const Yt=()=>{const e=Ht,n={qDRQd:function(e,t){return e===t},exssO:e(318),ySdRN:e(344)+e(343)+e(315),xCBmC:e(357),xUEgH:function(e,t){return e in t},mGUji:function(e,t,n){return e(t,n)},BdmhU:function(e,t,n){return e(t,n)},tOeAK:function(e,t,n){return e(t,n)}},s=typeof navigator!==n[e(326)]&&n.xUEgH(e(345),navigator),r=n[e(362)](t.useCallback,(t=e(329))=>{const r=e;if(!s)return!1;try{if(n[r(341)](n[r(365)],n[r(365)])){const e=Gt[t];return navigator[r(345)](e)}{const e=_0xfc2e23[r(364)](_0x16e161,arguments);return _0x5a6867=null,e}}catch(a){return!1}},[s]),a={select:t.useCallback(()=>r(e(349)),[r]),move:n[e(362)](t.useCallback,()=>r("light"),[r]),capture:t.useCallback(()=>r(e(332)),[r]),check:n[e(362)](t.useCallback,()=>r(e(359)),[r]),victory:n.BdmhU(t.useCallback,()=>r("success"),[r]),error:n[e(335)](t.useCallback,()=>r(e(340)),[r]),castle:n[e(362)](t.useCallback,()=>!!s&&navigator[e(345)]([15,40,15]),[s]),gameStart:t.useCallback(()=>!!s&&navigator[e(345)]([10,30,10,30,20]),[s])},i={};return i.isSupported=s,i.vibrate=r,i.haptics=a,i},_t={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Wt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,w]=t.useState(null),[y,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Yt();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=Wt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&y.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(w(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),w(c),void j(s(c))}w(null),j([])},[D,b,y,r,a,B,h,n,s,M]),P=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),S=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Wt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,x=y.includes(i);c.has(i);const f=C===i,g=L.has(i),w=H(i),j=I&&g&&!w,N=I&&w;return u.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>P(i),onMouseLeave:S,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),P(i),setTimeout(()=>S(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:_t[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[y.length," move",1!==y.length?"s":""," available"]})})]})},Zt={capture:{icon:y,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:y,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:w,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Vt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Zt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,h=d%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),w=e.quality?M[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),w&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:w.color},className:"text-white text-[10px]",children:[w.symbol," ",w.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(y,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Xt={capture:{icon:y,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Rt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:G,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Jt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,w]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:G,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),w(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),w(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),w(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===h))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(A,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(P,{className:"w-3 h-3"})]}):u.jsx(S,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Xt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(T,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(E,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Rt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(E,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Vt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(U,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(_,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(E,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),w(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(W,{className:"h-5 w-5"}):u.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(Z,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(E,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(X,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(R,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(J,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(Z,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(E,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(R,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(F,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(y,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(J,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(x,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Ft=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),w=re(n),y=b.name!==w.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(y&&p?"text-primary":"text-muted-foreground"),animate:y&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:y&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(x,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",w.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Qt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(E,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(U,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(S,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(S,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(E,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:w}=he(),{captureState:y,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=xe(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,P]=t.useState(!1),[S,H]=t.useState(""),[I,T]=t.useState(!1),[K,G]=t.useState(!1);se(p);const U=t.useMemo(()=>p?fe(p):null,[p]),Y=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const _=async e=>{if(e&&!v)return void T(!0);if(!B.current)return;P(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{P(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(we,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(ye,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(E,{variant:L?"outline":"default",size:"sm",onClick:()=>Y(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(E,{variant:L?"default":"outline",size:"sm",onClick:()=>Y(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&h&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",U&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",U]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(E,{onClick:()=>_(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(E,{onClick:()=>_(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(E,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?Me(h,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(E,{onClick:()=>{const e=y(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),D(!0),w({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:I,onClose:()=>T(!1),onAuthRequired:()=>{T(!1),G(!0)},trigger:"download"}),u.jsx(Le,{isOpen:K,onClose:()=>G(!1)})]})},tn=un;!function(){const e=un,t=rn();for(;;)try{if(725e3===parseInt(e(390))/1+parseInt(e(372))/2*(-parseInt(e(332))/3)+-parseInt(e(373))/4+parseInt(e(401))/5*(parseInt(e(355))/6)+-parseInt(e(400))/7+-parseInt(e(389))/8*(-parseInt(e(382))/9)+parseInt(e(392))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[un(391)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=un,t={};t[e(322)]=e(363)+"+$";const n=t;return nn[e(306)]()[e(402)](n[e(322)])[e(306)]()[e(337)+"r"](nn).search(n[e(322)])});nn();const sn=function(){const e=un,t={YuQki:function(e,t){return e+t}};t.kTifQ="return (fu"+e(383),t.tQUUE="FYxuR",t[e(371)]=e(378);const n=t;let s=!0;return function(t,r){const a=e,i={zIMNL:function(e,t){return e(t)},dRmtj:function(e,t){return n[un(386)](e,t)},cTlBX:n.kTifQ,YVlEJ:a(380)+a(344)+'rn this")( )',RNksm:n[a(369)],exACi:n[a(371)]},o=s?function(){const e=a;if(r){if(i[e(349)]!==i[e(329)]){const n=r[e(391)](t,arguments);return r=null,n}{const t=i[e(370)](_0x3e31ca,i[e(304)](i.cTlBX+i[e(317)],");"));_0x372554=t()}}}:function(){};return s=!1,o}}();function rn(){const e=["rKzbwxm","ywn0Aw9U","CMqGy29VCMrPBG","Bg9IyNKGlYbfEa","uMv0DxjUihrVia","sLPduLC","mZG0ntGWuKn4EvPo","nw9XuLfdvW","C2vHCMnO","vK5oruC","ihrPBwvSAw5L","tw91BfG","DwnXCeS","zwvU","puXVyMj5lca/pq","A2v5zg93BG","zfjTDgO","u0PYAKm","Dg9tDhjPBMC","ie09txv0zsWGuG","DgfIBgu","y29UC29Szq","pvjLC2LNBIWGra","Aw5MBW","DgvK","x19WCM90B19F","sg9Tzq","vg9Nz2XLihnVDq","BMqGB24VB2zM","wvzSruO","u3bHy2u","ywrKrxzLBNrmAq","rw5K","u291BMqGBxv0zq","q0Hmuva","u291BMqGDw5TDq","ugXHEs9qyxvZzq","tMv4DcbTB3zL","CgXHEsK","AxqGzNvSBhnJCG","r28GDg8GC3rHCG","zxHbq2K","ANnHu0O","C2HPzNrlzxK","mtiZotzSEMLVvhe","DxrZ","t2zMzxiGzhjHDW","B3zL","AxndB250zw50rq","y29UC3rYDwn0BW","AMrZBue","tLPVwui","ChjVDg90ExbL","z1rSAKe","z2DQAwS","zhvYyxrPB24","y3rVCIGICMv0Dq","r0fYuKi","r3P6Cwq","u2HVCNrJDxrZoG","yxrLCW","uK5RC20","vg9Nz2XLl2v4Ca","A2v5","Dg9mB3DLCKnHCW","yw5KigXLz2vUza","BhnJCMvLBIbTBW","nZa5odK3mNr3wfbcqW","shLhChy","yMLUza","icH5B3vYihr1CG","DhjHy2u","yLDUALu","vg9Nz2XLigz1Ba","A2jQz0i","kcGOlISPkYKRkq","zsaOzhvYAw5Nia","purYyxCSievZyW","rxnJ","uhjLDMLVDxmGBq","vg9Nz2XLigjVyq","Dffvvuu","EKLntKW","sw9mDvO","nti0DNLyCKLx","mJeXmZmYmg9dA3f3BG","zxjYB3i","wvj4tMO","yxvSDa","r28GDg8Gzw5Kia","qLHMCM0","uhvWtMy","E30Uy29UC3rYDq","DeXPC3rLBMvY","mJqZwfP0AMv5","BMn0Aw9UkcKG","CfPozMu","ChjLDMvUDerLzG","wxvrA2K","khnOB3CGywXSkq","DK5Ywge","odGWnZjKAxLLBLO","mtK3mJm5wKDRz1z0","yxbWBhK","nZeZmJeWmgfbDMfNqW","DgfYz2v0"];return(rn=function(){return e})()}sn(void 0,function(){const e=un,t={yNqRq:e(347)+e(307)+e(310)+e(365)+e(302)+"Help",JZCRW:function(e,t){return e(t)},gTljA:"return (fu"+e(383),jdsmA:e(380)+e(344)+'rn this")( )',Gzzqd:"UohzQ",NZoYB:"info",jsaSJ:e(359),wKWRE:function(e,t){return e<t},SJrjC:function(e,t){return e!==t}};let n;try{n=t[e(399)](Function,t[e(341)]+t[e(338)]+");")()}catch(a){if(e(375)===t[e(346)]){const e=_0x530edc?function(){if(_0x3638e3){const e=_0x393249.apply(_0x243a35,arguments);return _0x4bb811=null,e}}:function(){};return _0x1e03aa=!1,e}n=window}const s=n[e(309)]=n[e(309)]||{},r=["log","warn",t[e(339)],e(374),"exception",e(308),t[e(330)]];for(let i=0;t.wKWRE(i,r.length);i++)if(t[e(305)]("vNrXa",e(388))){const n={};n[e(343)]=4e3,_0x517457[e(311)](t.yNqRq,n)}else{const t=sn[e(337)+"r"][e(340)][e(357)](sn),n=r[i],a=s[n]||t;t[e(313)]=sn.bind(sn),t[e(306)]=a[e(306)].bind(a),s[n]=t}})();const an=()=>{const e=un,t={};t[e(403)]=e(347)+" M=Mute, R"+e(310)+e(365)+"=Lobby, ?=Help";const n=t,s={duration:4e3};o[e(311)](n[e(403)],s)},on={};on[tn(351)]="M",on[tn(395)]=tn(315)+tn(316);const cn={};cn[tn(351)]="R",cn[tn(395)]="Resign gam"+tn(364)+tn(326);const ln={};function un(e,t){e-=302;const n=rn();let s=n[e];if(void 0===un.aGUhQB){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};un.OESbYB=r,un.MTmONw={},un.aGUhQB=!0}const a=e+n[0],i=un.MTmONw[a];if(i)s=i;else{const e=function(e){this.DsOCXM=e,this.ASrENN=[1,0,0],this.pVGoHC=function(){return"newState"},this.wMUVqO="\\w+ *\\(\\) *{\\w+ *",this.THOBjC="['|\"].+['|\"];? *}"};e.prototype.sbETHF=function(){const e=new RegExp(this.wMUVqO+this.THOBjC).test(this.pVGoHC.toString())?--this.ASrENN[1]:--this.ASrENN[0];return this.BBIiow(e)},e.prototype.BBIiow=function(e){return Boolean(~e)?this.ubThrn(this.DsOCXM):e},e.prototype.ubThrn=function(e){for(let t=0,n=this.ASrENN.length;t<n;t++)this.ASrENN.push(Math.round(Math.random())),n=this.ASrENN.length;return e(this.ASrENN[0])},new e(un).sbETHF(),s=un.OESbYB(s),un.MTmONw[a]=s}return s}ln[tn(351)]="D",ln[tn(395)]=tn(334)+tn(358)+"n)";const dn={};dn[tn(351)]=tn(366),dn[tn(395)]=tn(398)+tn(397)+tn(327)+tn(407);const mn={};mn[tn(351)]="?",mn[tn(395)]="Show keyboard shortc"+tn(333);const hn={};hn[tn(351)]=tn(318),hn[tn(395)]=tn(324)+tn(404),tn(367),tn(335);const xn={};xn[tn(351)]="â†’",xn[tn(395)]=tn(325);const pn={};pn[tn(351)]=tn(314),pn[tn(395)]=tn(328)+"t";const fn={};fn.key=tn(320),fn[tn(395)]=tn(377)+tn(387),tn(361),tn(354);const gn={key:"C"};gn[tn(395)]=tn(368)+tn(396)+tn(348);const vn={};vn[tn(351)]="L",vn[tn(395)]=tn(350)+tn(353);const bn=Kn;!function(){const e=Kn,t=Hn();for(;;)try{if(711041===-parseInt(e(241))/1*(-parseInt(e(178))/2)+-parseInt(e(228))/3*(-parseInt(e(194))/4)+parseInt(e(219))/5*(-parseInt(e(177))/6)+parseInt(e(153))/7*(-parseInt(e(226))/8)+-parseInt(e(165))/9+parseInt(e(252))/10*(-parseInt(e(151))/11)+parseInt(e(220))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Kn(181)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Kn,t={};t[e(138)]="(((.+)+)+)+$";const n=t;return wn[e(148)]()[e(261)](e(255)+"+$")[e(148)]().constructor(wn)[e(261)](n[e(138)])});wn();const yn=function(){let e=!0;return function(t,n){const s=Kn,r={};r[s(271)]=function(e,t){return e!==t},r.kAyIW=s(249);const a=r,i=e?function(){const e=s;if(n){if(a.wWZzT(a.kAyIW,a[e(147)])){const t=_0x56cc35?function(){if(_0x49a71f){const t=_0x22924f[e(181)](_0x23e130,arguments);return _0x3bd49f=null,t}}:function(){};return _0x86195d=!1,t}{const s=n[e(181)](t,arguments);return n=null,s}}}:function(){};return e=!1,i}}();yn(void 0,function(){const e=Kn,t={oMtEh:function(e,t){return e(t)},GPbEF:function(e,t){return e+t},WjaSM:function(e,t){return e+t},giTvY:e(199)+e(242)+e(200)+" )",BHZBN:function(e,t){return e===t},LZbol:function(e,t){return e-t},CaMVi:function(e){return e()},ztrjC:"warn",NspUz:e(233),iXBkg:e(140)},n=t.CaMVi(function(){const n=e;let s;try{s=t[n(216)](Function,t.GPbEF(t[n(207)](n(221)+n(146),t.giTvY),");"))()}catch(r){s=window}return s}),s=n[e(183)]=n[e(183)]||{},r=[e(154),t[e(169)],t.NspUz,e(273),e(259),e(240),"trace"];for(let a=0;a<r[e(149)];a++){if(t.iXBkg!==t[e(244)]){const n=_0x24f9b8.sort((n,s)=>{const r=e;_0x22b98c.move(n);const a=_0x5f4ff2(_0xe49851);_0x1b5d2c[r(266)](),_0x54395b[r(206)](s);const i=_0x3b8f57(_0x4c1c73);return _0xf8fd92[r(266)](),t[r(167)](_0x4495e3[r(188)](),"w")?i-a:t[r(258)](a,i)}),s=n.slice(0,_0x445bb2[e(174)](3,n[e(149)]));return s[_0x420857.floor(_0x1227ca.random()*s[e(149)])]}{const t=yn[e(209)+"r"][e(180)][e(203)](yn),n=r[a],i=s[n]||t;t.__proto__=yn[e(203)](yn),t.toString=i.toString[e(203)](i),s[n]=t}}})();const jn={p:100,n:320,b:330,r:500,q:900,k:2e4},Cn=jn,Nn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],kn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Mn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],zn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Dn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Bn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Ln(e){switch(e[Kn(243)+"e"]()){case"p":return Nn;case"n":return kn;case"b":return Mn;case"r":return zn;case"q":return Dn;case"k":return Bn;default:return[]}}function qn(e){const t=Kn,n={FWiLm:function(e,t){return e===t},RSWap:function(e,t){return e<t},YfsLP:t(141),UDrtD:"fndGr",kAhsR:function(e,t){return e<t},PlSQl:function(e,t){return e(t)},mrMgk:function(e,t){return e>t},YDPYH:function(e,t){return e===t},pLsmb:function(e,t){return e*t}};if(e[t(222)+"e"]())return n[t(232)](e.turn(),"w")?-1/0:1/0;if(e.isDraw()||e[t(239)+"e"]())return 0;let s=0;const r=e.board();for(let i=0;n[t(205)](i,8);i++)if(n[t(193)]!==n.UDrtD)for(let e=0;n[t(191)](e,8);e++){const a=r[i][e];if(a){const r=Cn[a[t(227)]]||0,o=n[t(218)](Ln,a[t(227)]);let c=0;if(n[t(182)](o.length,0)){c=o[n[t(232)](a[t(157)],"w")?i:7-i][e]}const l=r+c;s+="w"===a.color?l:-l}}else _0x27fa0b=_0x5ed3ab[t(137)],_0x27d14e=_0x15bfb1;const a=e[t(215)]()[t(149)];return s+=n[t(152)](e[t(188)](),"w")?2*a:n[t(238)](-a,2),s}function An(e,t,n,s,r){const a=Kn,i={lhYOo:function(e,t){return e>t},vVqPJ:function(e,t){return e<=t},sdlre:function(e,t,n,s,r,a){return e(t,n,s,r,a)},cNknA:function(e,t){return e-t},enznu:function(e,t){return e<t}};if(0===t||e[a(170)]())return{score:qn(e),move:null};const o={verbose:!0},c=e.moves(o);if(c[a(198)]((e,t)=>{const n=a;let s=0,r=0;return e[n(223)]&&(s+=Cn[e[n(223)]]||0),t.captured&&(r+=Cn[t[n(223)]]||0),e[n(135)].includes("+")&&(s+=50),t[n(135)][n(133)]("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const u of c){e[a(206)](u);const c=An(e,t-1,n,s,!1);if(e.undo(),i[a(262)](c[a(137)],r)&&(r=c.score,o=u),n=Math[a(144)](n,c.score),i.vVqPJ(s,n))break}const l={};return l.score=r,l.move=o,l}{let r=1/0,o=null;for(const u of c){e[a(206)](u);const c=i[a(235)](An,e,i[a(162)](t,1),n,s,!0);if(e[a(266)](),i[a(185)](c[a(137)],r)&&(r=c.score,o=u),(s=Math[a(174)](s,c.score))<=n)break}const l={};return l[a(137)]=r,l[a(206)]=o,l}}function Pn(e){const t=Kn,n={};n[t(150)]=function(e,t){return e*t};const s=n,r={};r[t(195)]=!0;const a=e.moves(r);if(0===a[t(149)])return null;const i=a[t(246)](e=>e[t(223)]);return i.length>0&&Math.random()<.3?i[Math[t(217)](Math.random()*i[t(149)])]:a[Math[t(217)](s[t(150)](Math[t(142)](),a[t(149)]))]}function Sn(e){const t=Kn;return{JCDgP:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[t(268)](An,e,4,-1/0,1/0,"w"===e.turn())[t(206)]}function Hn(){const e=["B01KEwK","CMnOigrLChrO","C29YDa","E30Uy29UC3rYDq","CM4GDgHPCYiPka","yw5HBhL6zvbVCW","ueXZqMy","yMLUza","AgDOChe","uLnxyxa","Bw92zq","v2PHu00","uNzxshu","y29UC3rYDwn0BW","idqTCgX5ihnLyq","twfRzxmGCMfUza","zMLUza","CeD2sfG","uwTqChi","Bw92zxm","B010rwG","zMXVB3i","ugXtuwW","nwfHD3fdva","mti5mdiWodHqD3D0DKu","CMv0DxjUicHMDq","AxndAgvJA21HDa","y2fWDhvYzwq","DgvYAwfSigf3yq","FJiWmda","nZqXmtC2EMPbA0Tu","DhLWzq","nJK3odmZEKPYsKr0","D2fYBG","yMvZDe1VDMu","ChjVBw90Aw9U","rLDPtg0","Aw5MBW","sezxAvu","C2rSCMu","u21pqw8","AwnZigfUzcbTyq","CeXZBwi","AxntDgfSzw1HDa","DgfIBgu","muPNuu1UsG","y3rVCIGICMv0Dq","Dg9mB3DLCKnHCW","AvHcA2C","yw5KBwfZDgvYia","zMLSDgvY","zwfZEq","AgfYza","Auf0CNq","B20GBw92zxmSia","CMf0Aw5N","mtCWEwzvs3zi","CMvK","Bw92zxrPBwu","kcGOlISPkYKRkq","qMvNAw5Uzxi","AxrPB24","tfPIB2W","zxHJzxb0Aw9U","ywnRihrVigHHCG","C2vHCMnO","BgHzt28","ru9Vzuq","D2fPDfjLywr5","C3rYzw5NDgG","Dw5KBW","u1LPufi","sKnez1a","yu1my2O","wKXzuu8","D1DAELq","zgvZy3jPChrPBW","zxjYB3i","C2XPy2u","Aw5JBhvKzxm","zw5NAw5Lug93zq","C2fU","C3rVy2TMAxnO","C2nVCMu","wKPbCNK","u2L6yNq","suvgA3u","C1PKqMe","CMfUzg9T","uxDkEhe","Bwf4","qLrVCuu","BMn0Aw9UkcKG","A0f5svC","Dg9tDhjPBMC","BgvUz3rO","vgrsDNu","nJCWnZHZzuj3ywi","wurqwuG","nZbKww1rwLC","Bg9N","u3rVy2TMAxnOia","twfZDgvY","y29SB3i","uM9jANu","Bw92zsbLCNjVCG","BwvKAxvT","qMfZAwmGDgfJDa","y05RBKe","B2nJyxnPB25HBa","ignHChr1CMvZ","nZaXnta5nuTIuwfmEa","qMXMAxu","qKHAqK4","ALPhCKq","ENrYAKm","Axnhyw1Lt3zLCG","DMfSDwf0Aw9Ula","zwTUrw4","sfPVAvi","BwLU","DhbcyKm","BgfIzwW","ntmYmJG0nLLHy2TotW","mJmZota4oefMDNvSBa","FJe0mda","ChjVDg90ExbL","yxbWBhK","Bxjnz2S","y29UC29Szq","tK9ADfK","zw56BNu","CMvUzxnZ","qxHSsMO","DhvYBG","zNjVBq","BM90ihjLywr5la","A0fOC1i","tgf6Beq","wwzZtfa","mJbqu2zxv0e","DMvYyM9Zzq"];return(Hn=function(){return e})()}function In(e,t){const n=Kn,s={tpBbC:n(247),UwLSW:function(e,t){return e(t)},LazlD:n(136)};switch(t){case s[n(175)]:return Pn(e);case n(160):return function(e){const t=Kn,n={RvWHu:t(213),QwJxq:function(e,t){return e(t)},Blfiu:function(e,t){return e-t},RoIju:function(e,t){return e*t},vbIwN:function(e,t){return e===t},QkPpr:function(e,t){return e!==t},ZLYQO:t(145),kiKKT:t(172),Sizbt:function(e,t){return e<t},HFWiU:t(236),VUsxL:function(e,t){return e*t}},s={};s[t(195)]=!0;const r=e[t(215)](s);if(0===r[t(149)])return null;let a=null,i=n.vbIwN(e[t(188)](),"w")?-1/0:1/0;for(const o of r){e.move(o);const s=qn(e);if(e[t(266)](),"w"===e[t(188)]()){if(s>i){if(!n[t(214)](n[t(270)],n.kiKKT))return 0;i=s,a=o}}else s<i&&(i=s,a=o)}if(n[t(139)](Math[t(142)](),.2)){if(n[t(234)]===n.HFWiU){const s=r[t(198)]((s,r)=>{const a=t;if("PvMhS"!==n[a(208)]){e[a(206)](s);const t=qn(e);e[a(266)](),e.move(r);const i=n[a(143)](qn,e);return e[a(266)](),"w"===e[a(188)]()?n[a(166)](i,t):t-i}_0x5e307e=_0x47859b}),a=s[t(274)](0,Math.min(3,s[t(149)]));return a[Math[t(217)](n.VUsxL(Math.random(),a[t(149)]))]}return _0x3250e0[_0x33a231.floor(n[t(158)](_0x507952.random(),_0xc9d35d.length))]}return a}(e);case n(248):return s.UwLSW(Sn,e);case s[n(192)]:return Sn(e);default:return Pn(e)}}const Tn={};Tn.id=bn(247),Tn[bn(176)]=bn(256),Tn[bn(272)+"n"]=bn(211)+bn(250)+bn(163)+bn(164),Tn[bn(251)]="~800";const En={};function Kn(e,t){e-=133;const n=Hn();let s=n[e];if(void 0===Kn.CTyKrq){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Kn.uOUxUb=r,Kn.VbgxfU={},Kn.CTyKrq=!0}const a=e+n[0],i=Kn.VbgxfU[a];if(i)s=i;else{const e=function(e){this.uOyJyF=e,this.kLHVkd=[1,0,0],this.zdUcYd=function(){return"newState"},this.XHVHAt="\\w+ *\\(\\) *{\\w+ *",this.JDgufp="['|\"].+['|\"];? *}"};e.prototype.koEgCS=function(){const e=new RegExp(this.XHVHAt+this.JDgufp).test(this.zdUcYd.toString())?--this.kLHVkd[1]:--this.kLHVkd[0];return this.IgSevd(e)},e.prototype.IgSevd=function(e){return Boolean(~e)?this.hyrWbB(this.uOyJyF):e},e.prototype.hyrWbB=function(e){for(let t=0,n=this.kLHVkd.length;t<n;t++)this.kLHVkd.push(Math.round(Math.random())),n=this.kLHVkd.length;return e(this.kLHVkd[0])},new e(Kn).koEgCS(),s=Kn.uOUxUb(s),Kn.VbgxfU[a]=s}return s}En.id=bn(160),En[bn(176)]="Club Player",En[bn(272)+"n"]=bn(161)+bn(237)+bn(224)+bn(186),En.rating=bn(179);const Gn={};Gn.id=bn(248),Gn.label=bn(156),Gn[bn(272)+"n"]="Advanced e"+bn(171)+bn(210)+bn(197),Gn.rating=bn(225);const Un={};Un.id=bn(136),Un[bn(176)]=bn(155)+"16",Un.description="Real NNUE engine, gr"+bn(245)+bn(265),Un.rating="~3200",Un[bn(134)+bn(253)]=!0;const Yn=[Tn,En,Gn,Un];function _n(e,t){e-=192;const n=Zn();let s=n[e];if(void 0===_n.mjROEm){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};_n.LgpSXg=r,_n.PQTdzR={},_n.mjROEm=!0}const a=e+n[0],i=_n.PQTdzR[a];if(i)s=i;else{const e=function(e){this.ozCFMh=e,this.YdcbTx=[1,0,0],this.gcyaof=function(){return"newState"},this.Bpjkik="\\w+ *\\(\\) *{\\w+ *",this.RcBZFP="['|\"].+['|\"];? *}"};e.prototype.vtQafk=function(){const e=new RegExp(this.Bpjkik+this.RcBZFP).test(this.gcyaof.toString())?--this.YdcbTx[1]:--this.YdcbTx[0];return this.SkaUQv(e)},e.prototype.SkaUQv=function(e){return Boolean(~e)?this.hMByWc(this.ozCFMh):e},e.prototype.hMByWc=function(e){for(let t=0,n=this.YdcbTx.length;t<n;t++)this.YdcbTx.push(Math.round(Math.random())),n=this.YdcbTx.length;return e(this.YdcbTx[0])},new e(_n).vtQafk(),s=_n.LgpSXg(s),_n.PQTdzR[a]=s}return s}!function(){const e=_n,t=Zn();for(;;)try{if(571202===parseInt(e(195))/1*(parseInt(e(241))/2)+parseInt(e(192))/3+-parseInt(e(237))/4+parseInt(e(271))/5+-parseInt(e(247))/6*(-parseInt(e(207))/7)+parseInt(e(239))/8+-parseInt(e(267))/9*(parseInt(e(216))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Wn=function(){const e={VDVio:function(e){return null==e?void 0:e()},kBhEO:function(e,t){return e!==t}};let t=!0;return function(n,s){const r=_n,a=function(t){return e[_n(212)](t)};if(!e.kBhEO(r(232),"yJWkd")){const e=t?function(){if(s){const e=s[r(270)](n,arguments);return s=null,e}}:function(){};return t=!1,e}a(_0x3a4474)}}()(void 0,function(){const e=_n,t={};t[e(260)]=e(228)+"+$";const n=t;return Wn[e(218)]().search(n[e(260)])[e(218)]().constructor(Wn)[e(234)](n[e(260)])});Wn();const On=function(){const e=_n,t={};t[e(236)]=function(e,t){return e===t},t[e(221)]="gnHDu",t[e(231)]=function(e,t){return e===t},t[e(230)]=e(262);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=_n;if(n[s(236)]("AzHYL",n[s(221)])){if(!_0x136027)return;_0x2d925f(_0x586a74[s(224)],_0x1f363f[s(248)])}else if(t){if(!n.iVuxI(n[s(230)],s(225))){const n=t.apply(e,arguments);return t=null,n}{const e=_0x505c3b[s(198)+"r"][s(235)][s(193)](_0x4c9914),t=_0x5246be[_0x4766eb],n=_0x2d625[t]||e;e[s(202)]=_0x1a9e0c[s(193)](_0x9fe94f),e.toString=n[s(218)][s(193)](n),_0x1c6898[t]=e}}}:function(){};return s=!1,r}}();function Zn(){const e=["E30Uy29UC3rYDq","Dg9tDhjPBMC","txvqsvC","D2fYBG","zMjvv2C","B0DYuwe","vK9MCeC","y2XPzw50wa","CuXhDLu","uKfWC0O","DhjHy2u","kcGOlISPkYKRkq","z0fxtMS","vKTIueu","Avz1EeK","EuPxA2q","wu51uLK","C2vHCMnO","ChjVDg90ExbL","rNjirvu","nduZmda4oeDHveLABa","DfzVyLq","mJKZnJCYqxrxEeLd","q1HOwgW","mJbPvevKu2m","Eu1hteO","EuTWChC","AgfUzgXLCNm","AxntD2LWAw5N","C3rHCNry","mtq5nda0mNvOCKvZuG","y2XPzw50wq","B25uB3vJAfn0yq","CMv0DxjUicHMDq","B25nB3vZzurVDW","CuXUv2i","Aw5MBW","y3vYCMvUDfG","y1fyvwy","shznDeO","B0DVD0m","y29UC29Szq","B25nB3vZzu1VDG","Ee94Auu","CM4GDgHPCYiPka","zePZDvu","C3rHCNrz","tgPSAK0","vvHzAMq","sgn5zha","nta1nZaZn1fUuhzmCq","BMn0Aw9UkcKG","Bg9N","yxbWBhK","nde5ntu1Bg1ACNL2","B25nB3vZzuXLyq","y3vYCMvUDfK","C3DPCgvpzMzZzq","mJG3mtiYohzhDMX0Da","yMLUza","s01Yu1C","ndqWotbMwxjlyu8","sgPYAva","zxjYB3i","y29UC3rYDwn0BW","uhHHv0K","B25uB3vJAevUza","y3vYCMvUDa","x19WCM90B19F","Dg91y2HLCW","te5xvwi","sejLA1O","y3rVCIGICMv0Dq","mJfTre1msvm","DgfIBgu","u2nQr04","BgvUz3rO","B25uB3vJAe1VDG","vKrwAw8","B25nB3vZzvvW","rMPMtNy","AKz0v0m","mtbqshbcsLa"];return(Zn=function(){return e})()}On(void 0,function(){const e=_n,t={};t[e(205)]=function(e,t){return e===t},t[e(238)]=function(e,t){return e+t},t.dIuOE=e(250)+e(268),t.UXYjd=e(217)+e(206)+e(261)+" )",t[e(256)]=e(269),t[e(233)]=e(220),t[e(196)]="exception",t[e(243)]=e(208),t[e(242)]=function(e,t){return e<t};const n=t;let s;try{if(n[e(205)]("smSwP",e(204))){const e=_0x39ba68?function(){if(_0x3d0ea0){const e=_0x88584e.apply(_0x3a857b,arguments);return _0x12f64f=null,e}}:function(){};return _0xbba36d=!1,e}s=Function(n[e(238)](n.dIuOE,n[e(265)])+");")()}catch(i){s=window}const r=s[e(258)]=s[e(258)]||{},a=[n[e(256)],n.YNuRY,e(253),e(197),n[e(196)],n[e(243)],e(227)];for(let o=0;n[e(242)](o,a[e(210)]);o++){const t=On[e(198)+"r"][e(235)][e(193)](On),n=a[o],s=r[n]||t;t[e(202)]=On[e(193)](On),t[e(218)]=s[e(218)][e(193)](s),r[n]=t}})();const Vn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ge,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ge,description:"15 minutes"}],Xn=["bot","create","join"],Rn=()=>{var e,n,s,l,d,h,f,v,b,w,y;me();const[j]=Pe(),{user:k,isPremium:M}=r(),{haptics:L}=Yt(),[q,A]=t.useState("lobby"),[P,H]=t.useState(!1),[I,T]=t.useState(!1),[K,U]=t.useState("bot"),[Y,_]=t.useState("human"),[W,O]=t.useState("medium"),[Z,V]=t.useState("blitz_5"),[X,R]=t.useState("hotCold"),[J,F]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,we]=t.useState(!0),[ye,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[Me,ze]=t.useState([]),[De,qe]=t.useState(!1),[Ae,Ge]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Xn.indexOf(K);let n;n="left"===e?Math.min(t+1,Xn.length-1):Math.max(t-1,0),n!==t&&(L.select(),U(Xn[n]))},[K,L]),{swipeOffset:ht,isSwiping:xt,handlers:ft}=((e={})=>{const n=_n,s={JjQBm:"(((.+)+)+)+$",KMrSW:function(e,t){return e-t},Hcydp:function(e){return null==e?void 0:e()},VOfpG:function(e,t){return e>t},oGrQa:n(226),FjfNv:function(e,t){return e(t)},LjljM:function(e,t,n){return e(t,n)},oGowC:function(e,t){return e===t},jFtWC:"xEwIr",fqklI:"uTvhM",gAWNk:function(e,t,n){return e(t,n)},qLnWb:function(e){return e()},cQXUf:function(e,t){return e(t)},CXhXl:function(e,t,n){return e(t,n)},MuPIW:function(e,t,n){return e(t,n)},aEYwV:function(e,t,n){return e(t,n)},ScjGN:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[h,x]=s[n(255)](t.useState,!1),p={};p[n(246)]=0,p[n(263)]=0,p[n(254)]=0,p.currentY=0,p[n(245)]=!1;const f=s[n(255)](t.useRef,p),g=s[n(240)](t.useCallback,(e,t)=>{const s=n,r={};r[s(246)]=e,r[s(263)]=t,r[s(254)]=e,r[s(273)]=t,r[s(245)]=!0,f[s(201)]=r,x(!0)},[]),v=t.useCallback((e,t)=>{const s=n;if(!f.current[s(245)])return;f[s(201)][s(254)]=e,f.current[s(273)]=t;const r=e-f[s(201)][s(246)],a=t-f[s(201)][s(263)],i={};i.x=r,i.y=a,m(i)},[]),b=t.useCallback(()=>{const e=n;if(s.JjQBm,!f[e(201)][e(245)])return;const t=s.KMrSW(f.current[e(254)],f[e(201)].startX),a=s[e(194)](f.current[e(273)],f[e(201)].startY),u=Math.abs(t),d=Math.abs(a);if(u>d&&u>r)t>0?null==o||o():s[e(266)](i);else if(s[e(223)](d,u)&&d>r)if(a>0){if(s.oGrQa!==s[e(222)])return _0x2285be[e(218)]()[e(234)]("(((.+)+)+)+$")[e(218)]()[e(198)+"r"](_0x234971).search(bxRUBp[e(199)]);s[e(266)](l)}else null==c||c();f[e(201)][e(245)]=!1,x(!1);const h={x:0,y:0};s[e(214)](m,h)},[r,i,o,c,l]),w=s[n(229)](t.useCallback,e=>{const t=n,r=e[t(203)][0];s.LjljM(g,r[t(224)],r[t(248)])},[g]),y=t.useCallback(e=>{const t=n;if(s[t(257)](s[t(215)],s.fqklI))null==_0x2d0440||_0x2d0440();else{const n=e.touches[0];s.LjljM(v,n[t(224)],n.clientY)}},[v]),j=s[n(219)](t.useCallback,()=>{b()},[b]),C=t.useCallback(e=>{a&&g(e[n(224)],e.clientY)},[a,g]),N=s[n(264)](t.useCallback,e=>{const t=n;a&&s[t(229)](v,e[t(224)],e[t(248)])},[a,v]),k=s.aEYwV(t.useCallback,()=>{a&&b()},[a,b]),M=s[n(209)](t.useCallback,()=>{const e=n;a&&f[e(201)].isSwiping&&s[e(252)](b)},[a,b]),z={};z[n(249)+"rt"]=w,z[n(211)+"e"]=y,z[n(200)]=j,z[n(251)+"n"]=C,z[n(259)+"e"]=N,z[n(213)]=k,z[n(272)+"ve"]=M;const D={};return D[n(274)+"t"]=d,D[n(245)]=h,D[n(244)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:wt,myColor:yt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Bt,offerDraw:Lt,loadGame:At,getAvailableMoves:Pt,movedSquares:Ht}=(()=>{const e=Dt,n={wmuJs:e(580),rmiir:function(e,t){return e!==t},KQYHF:e(501),OuYxT:function(e,t){return e===t},PYtML:e(584),EECPT:"draw",ChuRG:function(e,t){return e>=t},lpwCf:function(e,t){return e(t)},xCari:e(549),uEIdW:e(740),TBmZx:e(478),vsccN:"UPDATE",bEIPw:e(705),hRNUQ:e(714),rmjyI:"chess_games",JaFgV:"Game not found",XweMr:function(e,t){return e(t)},bNjvD:e(694)+"s",AJgfI:e(515),JUrTa:e(640)+"r",gUBOm:e(551)+e(629)+"eate a game",sOhox:function(e,t){return e(t)},hAPWc:e(525)+e(659)+"ode",jxaFB:e(728),vwJpf:"Game creat"+e(667)+e(718)+e(660),UXdDS:function(e,t){return e instanceof t},kFOdd:e(508)+"create game",PrFcW:function(e,t){return e+t},bMksn:e(564)+e(454)+e(603)+" )",jkcLA:function(e){return e()},fquvO:e(681)+"+$",plZVr:"vWjOT",ShkWg:function(e,t){return e!==t},qSULj:e(690)+e(473)+e(643),teaka:e(452)+"e! You are"+e(673)+e(731),qtMYE:e(672),pjJtK:e(508)+e(579),mxbVp:function(e,t){return e===t},cvhKv:"SBILV",DaYcY:"VLCAa",pHpeZ:function(e,t){return e(t)},cnbfq:e(617)+"code",zewan:e(485)+e(687)+"hallenge c"+e(723),UGXhu:function(e,t,n){return e(t,n)},vGMyG:function(e,t){return e(t)},Lfzof:"log",DlIjG:"warn",bWJxG:"error",BJcha:e(622),CIarF:function(e,t){return e<t},fqQuV:function(e,t){return e===t},chyht:function(e,t){return e===t},rhpcO:e(512),HaKII:e(578),bchIu:function(e,t){return e===t},vcQWp:function(e,t){return e===t},HzJYV:function(e,t){return e+t},fvFgu:function(e,t){return e+t},eTsZp:function(e,t){return e||t},ZKLzd:e(555),Cxpcm:function(e,t){return e===t},AggIo:function(e,t){return e(t)},TTjED:e(662),RSbFo:e(721),dygeQ:function(e,t){return e===t},crank:"You won!",ZrBrc:function(e,t){return e===t},WwzJM:e(710)+"!",zBTPM:"user_id, e"+e(468),cgNcd:function(e,t){return e!==t},gBlYH:function(e,t){return e||t},aGrJu:function(e,t,n,s){return e(t,n,s)},jmGku:e(574),JXyfE:function(e,t){return e===t},yzdjq:e(505),kbfLZ:e(508)+"update ELO"+e(453),PmZkg:function(e,t){return e||t},YALql:function(e){return e()},oNjzm:function(e,t){return e(t)},JMDbt:function(e,t){return e(t)},ixLJU:function(e,t){return e(t)},gOVaG:function(e,t){return e===t},DzBGY:function(e,t,n){return e(t,n)}},{user:s}=n[e(556)](r),[l,u]=t.useState(new a),[d,m]=n[e(691)](t.useState,null),[h,x]=n.JMDbt(t.useState,!1),[p,f]=n[e(565)](t.useState,null),[g,v]=t.useState(new Set),{enabled:b,volume:w}=n[e(556)](zt),{playSound:y}=n[e(649)](bt,b,w);n[e(691)](t.useRef,"");const j=d?d.whitePlayerId===(null==s?void 0:s.id)?"w":n[e(541)](d[e(514)+e(594)],null==s?void 0:s.id)?"b":null:null,C=n.gOVaG(null==d?void 0:d.status,n[e(738)])&&n[e(488)](l.turn(),j);n[e(608)](t.useEffect,()=>{const t=e,r={ZOigs:function(e,t){return e(t)},ErigB:n[t(593)],Rgdzq:t(461),IwYyY:function(e,t){return n.rmiir(e,t)},NpSfB:n[t(576)],zliiq:function(e,t){return n.OuYxT(e,t)},krIJv:"sXMIh",Edwlp:n[t(646)],DjCAA:n[t(605)],sLpwb:function(e,t){return e===t},OtkIi:t(500),veoOt:function(e,s){return n[t(464)](e,s)},OtFii:t(635),zVPxk:"ZrMrm",MINgC:t(701)+"!",QPhHh:function(e,s){return n[t(663)](e,s)},EauFI:function(e,s){return n[t(557)](e,s)},FLvII:n[t(676)],YjMHp:function(e,t){return n.lpwCf(e,t)},vggZB:n.uEIdW,YpIMG:t(512),SJxwG:function(e,s){return n[t(557)](e,s)}};if(!n[t(464)](t(523),n[t(530)])){if(!(null==d?void 0:d.id))return;const e=i[t(546)]("game-"+d.id).on(t(736)+t(709),{event:n[t(597)],schema:t(714),table:t(587)+"s",filter:"id=eq."+d.id},e=>{const n=t,i={};i[n(621)]=r[n(513)];const o=i;if(r[n(569)](r[n(645)],"xscXX")){const t=e[n(601)];if(r[n(618)](t[n(586)],n(555))&&d.status!==n(555))if(r[n(569)](r[n(517)],r[n(588)]))if(t[n(581)]===r[n(474)])r[n(531)](n(471),"mEPNE")?_0xcab06e.add(_0x27ee79[n(477)][n(674)](2,4)):r[n(741)](y,r[n(474)]);else if(t.winner_id===(null==s?void 0:s.id))r[n(531)](n(500),r[n(499)])?r[n(741)](y,n(662)):_0x2bdc3c(!1);else if(r.veoOt(n(554),r[n(456)])){const e=_0x113377[n(582)+"r"][n(540)][n(528)](_0xb4c113),t=_0x187136[_0x330639],s=_0x5c3083[t]||e;e.__proto__=_0xccfd5[n(528)](_0x175863),e[n(592)]=s[n(592)][n(528)](s),_0x29d119[t]=e}else r[n(741)](y,n(580));else _0x41dce1(o.Ohngi);if(m(e=>e?{...e,status:t.status,result:t[n(581)],pgn:t[n(493)],currentFen:t[n(669)+"n"],moveCount:t.move_count,whiteTimeRemaining:t[n(665)+n(534)],blackTimeRemaining:t[n(708)+n(534)],winnerId:t[n(543)],blackPlayerId:t["black_play"+n(696)],startedAt:t[n(589)]}:null),t[n(669)+"n"])if("gWqUL"!==r.zVPxk){const e=new a(t[n(669)+"n"]);u(e)}else r[n(741)](_0x46d83a,r[n(720)])}else r[n(741)](_0x1e19c8,n(461))})[t(520)](),o=i[t(546)](t(559)+d.id).on(t(736)+"hanges",{event:n.bEIPw,schema:n[t(695)],table:"chess_moves",filter:t(490)+"."+d.id},e=>{const n=t,a=e[n(601)],i=a[n(477)];if(i&&r.QPhHh(i[n(654)],4)){const e=i[n(674)](2,4);r[n(495)](v,t=>new Set([...t,e]))}if(r[n(569)](a[n(458)],null==s?void 0:s.id)){const e=a[n(590)];e[n(737)]("#")?r.IwYyY(n(503),n(585))?y(r[n(491)]):_0x387cc3[n(727)]("b"===_0x239197?n(637):r[n(735)]):e[n(737)]("+")?r.YjMHp(y,r.vggZB):e[n(737)]("x")?y(n(461)):r[n(618)](e,r[n(575)])||"O-O-O"===e?r[n(668)](y,n(688)):y(n(570))}}).subscribe();return()=>{const n=t;i[n(573)+n(726)](e),i[n(573)+n(726)](o)}}_0x25558d(t(688))},[null==d?void 0:d.id,null==d?void 0:d[e(586)],null==s?void 0:s.id,y]);const N=t.useCallback(async t=>{const s=e;x(!0),f(null);try{const{data:e,error:r}=await i.from(n[s(638)])[s(519)]("*").eq("id",t)[s(524)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(539)]);const o={};o.id=e.id,o[s(632)+s(594)]=e[s(506)+s(696)],o["blackPlaye"+s(594)]=e[s(609)+s(696)],o.status=e.status,o[s(581)]=e[s(581)],o.pgn=e[s(493)]||"",o[s(685)]=e.current_fen,o[s(470)]=e[s(595)]||0,o[s(699)+"l"]=e[s(547)+"ol"],o[s(509)+"emaining"]=e[s(665)+s(534)],o[s(675)+"emaining"]=e[s(708)+s(534)],o[s(652)+"te"]=e[s(562)+s(677)],o[s(510)+"te"]=e[s(655)+s(677)],o[s(724)+"ode"]=e[s(617)+s(516)],o[s(719)]=e[s(543)],o[s(639)]=e[s(647)],o[s(482)]=e[s(589)],n[s(557)](m,o);const c=new a(e[s(669)+"n"]);n.XweMr(u,c);const l={};l[s(536)]=!0;const{data:d}=await i.from(n[s(623)])[s(519)](s(477)).eq(n[s(486)],t)[s(713)](n[s(610)],l);if(d){const e=new Set;d.forEach(t=>{const n=s;t[n(477)]&&t[n(477)][n(654)]>=4&&e.add(t[n(477)][n(674)](2,4))}),v(e)}}catch(r){f(r instanceof Error?r[s(455)]:s(508)+s(484))}finally{n[s(689)](x,!1)}},[]),k=n[e(608)](t.useCallback,async(t,r,a)=>{const c=e;if(!s)return o[c(707)](n.gUBOm),null;n[c(683)](x,!0),n[c(683)](f,null);try{const e=St[t]||null,{data:l}=await i.rpc(n[c(717)]),{data:u,error:d}=await i[c(678)](n[c(638)])[c(567)]({white_player_id:s.id,status:n[c(577)],time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l})[c(519)]()[c(606)]();if(d)throw d;return o[c(727)](r?n[c(642)]:c(627)+c(507)+l),await n.sOhox(N,u.id),u.id}catch(l){const e=n[c(712)](l,Error)?l[c(455)]:n[c(607)];return f(e),o.error(e),null}finally{x(!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e;if({}[a(706)]=n[a(561)],!s){if(n[a(742)]===a(702))return o[a(707)](a(551)+a(703)+"in a game"),!1;{const e=_0x11f3ec.black[a(552)];_0x25090e[a(545)](a(498)+_0x3194c3[a(656)][a(698)]+" ("+(e>=0?"+":"")+e+")")}}x(!0),f(null);try{const{data:e,error:c}=await i.from(a(587)+"s")[a(519)]("*").eq("id",t)[a(524)+"e"]();if(c)throw c;if(!e)throw new Error("Game not f"+a(715));if(n[a(466)](e.status,n.jxaFB))throw new Error(a(558)+a(463));if(e[a(506)+a(696)]===s.id)throw new Error(n[a(469)]);const{error:l}=await i[a(678)](n.rmjyI)[a(679)]({black_player_id:s.id,black_palette:r,status:a(578),started_at:(new Date)[a(733)+"g"](),last_move_at:(new Date)[a(733)+"g"]()}).eq("id",t);if(l)throw l;return y(a(483)),o[a(727)](n.teaka),await n.lpwCf(N,t),!0}catch(c){if(n[a(636)]===a(672)){const e=c instanceof Error?c[a(455)]:n[a(460)];return f(e),o[a(707)](e),!1}{const e=MUleNY.XweMr(_0x9e7d65,MUleNY[a(599)](a(598)+a(634),MUleNY[a(615)])+");");_0x4be5f3=MUleNY[a(465)](e)}}finally{if(n[a(544)](n[a(521)],n[a(526)]))return _0x32edb9[a(592)]()[a(462)](kRQjbZ[a(706)]).toString()[a(582)+"r"](_0x2b48c6).search(a(681)+"+$");n[a(479)](x,!1)}},[s,N,y]),z=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(707)](a(551)+a(703)+a(459)),!1;x(!0),f(null);try{const{data:e,error:s}=await i[a(678)](a(587)+"s").select("id").eq(n.cnbfq,t[a(653)+"e"]()).eq(a(586),n.jxaFB).maybeSingle();if(s)throw s;if(!e)throw new Error(n.zewan);return await n[a(649)](M,e.id,r)}catch(c){const e=c instanceof Error?c[a(455)]:a(508)+a(611)+"de";return f(e),o[a(707)](e),!1}finally{x(!1)}},[s,M]),D=n[e(608)](t.useCallback,async(t,r,c)=>{const m=e;if(!d||!s||!C)return!1;try{if(!n[m(489)](m(661),"YqHzr")){const e={};e[m(678)]=t,e.to=r,e[m(467)]=c;const x=l[m(570)](e);if(!x)return y(m(628)),!1;l[m(680)+"e"]()?y("checkmate"):l[m(693)]()?y(m(740)):x[m(457)]?y("capture"):n[m(542)](x[m(496)],n[m(614)])||n[m(464)](x[m(496)],m(494))?y("castle"):y(m(570)),u(new a(l[m(571)]())),n[m(479)](v,e=>new Set([...e,r]));const p=l[m(493)](),f=l[m(571)]();let g=null,b=null,w=n[m(738)];if(l[m(487)]()&&(w="completed",l[m(680)+"e"]()?(g=n.bchIu(l[m(472)](),"w")?m(620):m(497),b=n[m(541)](l[m(472)](),"w")?d["blackPlaye"+m(594)]:d[m(632)+m(594)]):g=n[m(605)]),await i[m(678)](n[m(623)])[m(567)]({game_id:d.id,player_id:s.id,move_number:n[m(566)](d[m(470)],1),move_san:x[m(496)],move_uci:n.fvFgu(n[m(599)](t,r),n.eTsZp(c,"")),fen_after:f}),await i[m(678)](n.rmjyI)[m(679)]({pgn:p,current_fen:f,move_count:d[m(470)]+1,last_move_at:(new Date)[m(733)+"g"](),status:w,result:g,winner_id:b,completed_at:w===n.ZKLzd?(new Date).toISOString():null}).eq("id",d.id),n[m(464)](w,n[m(451)])&&g){if(await B(d[m(632)+m(594)],d[m(514)+m(594)],g),n[m(542)](g,n.EECPT))y(m(604));else if(n[m(686)](b,null==s?void 0:s.id))n[m(600)](y,n[m(450)]);else if(n[m(466)]("khoQt",n.RSbFo))y(n[m(593)]);else{let e;try{e=MUleNY[m(734)](_0x59dd21,MUleNY[m(599)](m(598)+m(634)+'{}.constructor("retu'+m(603)+" )",");"))()}catch(h){e=_0x512efb}const t=e.console=e[m(553)]||{},n=[MUleNY[m(658)],MUleNY[m(492)],m(545),MUleNY.bWJxG,m(704),m(732),MUleNY.BJcha];for(let s=0;MUleNY[m(476)](s,n.length);s++){const e=_0x363bda[m(582)+"r"][m(540)][m(528)](_0x39b45c),r=n[s],a=t[r]||e;e[m(572)]=_0x5eff22[m(528)](_0x8c18d6),e[m(592)]=a[m(592)][m(528)](a),t[r]=e}}n[m(535)](g,m(497))?o.success(n.fqQuV(j,"w")?n[m(670)]:"White wins!"):"black_wins"===g?o[m(727)](n.chyht(j,"b")?m(637):"Black wins!"):o[m(545)](pt(l))}return!0}n[m(734)](_0x421d4d,!1)}catch(x){return!1}},[l,d,s,C,j,y]),B=t.useCallback(async(t,r,a)=>{const l=e,u={KCzwO:function(e,t){return n[qt(488)](e,t)},XEJtI:n[l(700)]};if(t&&r&&a!==l(616))try{const{data:e}=await i[l(678)](l(568))[l(519)](n.zBTPM).in(l(574),[t,r]);if(!e||n[l(538)](e.length,2))return;const d=e[l(522)](e=>e[l(574)]===t),m=e[l(522)](e=>e[l(574)]===r);if(n[l(502)](!d,!m))return;const h=d[l(716)]||1200,x=m.elo_rating||1200,p=n[l(535)](a,n[l(605)])?n.EECPT:a,f=n[l(563)](c,h,x,p),g={};g[l(716)]=f[l(650)][l(698)];const v={};if(v.elo_rating=f[l(656)].newRating,await Promise[l(550)]([i[l(678)]("profiles")[l(679)](g).eq(n.jmGku,t),i[l(678)](l(568))[l(679)](v).eq(n[l(548)],r)]),n[l(533)](null==s?void 0:s.id,t)){const e=f.white[l(552)];o[l(545)](l(498)+f[l(650)][l(698)]+" ("+(n.ChuRG(e,0)?"+":"")+e+")")}else if((null==s?void 0:s.id)===r)if(n.yzdjq===l(664))_0x679a52[l(727)](u[l(648)](_0x706c46,"w")?"You won!":u[l(527)]);else{const e=f.black[l(552)];o[l(545)](l(498)+f[l(656)][l(698)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){}},[s]),L=t.useCallback(async()=>{const t=e;if(n[t(532)](!d,!s)||!j)return;const r=n.ZrBrc(j,"w")?t(620):t(497),a="w"===j?d["blackPlaye"+t(594)]:d[t(632)+t(594)];await i.from(t(587)+"s").update({status:n.ZKLzd,result:r,winner_id:a,completed_at:(new Date)[t(733)+"g"]()}).eq("id",d.id),await B(d[t(632)+t(594)],d[t(514)+t(594)],r),o[t(545)](t(722)+"ed")},[d,s,j,B]),q=t.useCallback(async()=>{const t=e;o[t(545)](t(591)+t(684)+t(602)+t(729)+t(641)+t(626)),d&&(await i[t(678)]("chess_games").update({status:n[t(451)],result:"draw",completed_at:(new Date)[t(733)+"g"]()}).eq("id",d.id),await B(d[t(632)+t(594)],d.blackPlayerId,n[t(605)]))},[d,B]),A=t.useCallback(t=>{const n=e,s={};return s[n(730)]=t,s[n(475)]=!0,l.moves(s)[n(671)](e=>e.to)},[l]),P={};return P.game=l,P[e(560)]=d,P.isMyTurn=C,P[e(682)]=j,P.isLoading=h,P[e(707)]=p,P[e(511)]=D,P.createGame=k,P[e(529)]=M,P[e(504)]=z,P.resignGame=L,P[e(725)]=q,P[e(711)]=N,P["getAvailab"+e(697)]=A,P.movedSquares=g,P})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),A("lobby")};((e={})=>{const n=un,s={FFAYs:function(e,t){return e!==t},pZNfe:n(362),HyGpv:n(406),aZJDo:function(e){return e()},MoulX:function(e,t){return e&&t},DBktl:"escape",XPznI:function(e,t){return e===t},GArRB:function(e){return e()}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=s[n(345)](zt),m=t.useCallback(e=>{const t=n;if({}[t(342)]="(((.+)+)+)+$",!s[t(394)](s[t(384)],s[t(356)]))return _0x450566[t(306)]().search(Rshrpt[t(342)])[t(306)]()[t(337)+"r"](_0x3ac7f9).search(Rshrpt[t(342)]);{if(e[t(393)]instanceof HTMLInputElement||e[t(393)]instanceof HTMLTextAreaElement||e.target[t(336)+"ditable"]){if(t(360)!==t(379))return;if(_0x3417d2){const e=_0x48a40b[t(391)](_0x4c4f15,arguments);return _0x20d571=null,e}}const n=e.key[t(352)+"e"]();switch(n){case"m":s.aZJDo(u),o[t(311)](d?t(321)+"d":t(323)+t(312),{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":s[t(405)](c,r)&&(e[t(385)+t(376)](),r());break;case"d":s[t(405)](c,l)&&a&&(e[t(385)+t(376)](),a());break;case s.DBktl:i&&(e[t(385)+t(376)](),i());break;case"?":case"/":(!e[t(331)]||s.XPznI(n,"?"))&&(e[t(385)+"ault"](),an())}}},[u,d,r,a,i,c,l]);t.useEffect(()=>{const e=n;return window[e(319)+"stener"](e(303),m),()=>window["removeEven"+e(381)]("keydown",m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&wt?Lt:void 0,onBackToLobby:"lobby"!==q?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:wt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ge(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ge(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Tt=async()=>{if(!k)return void H(!0);if(!M)return void T(!0);const e=Ie.find(e=>e.id===X),t=(null==e?void 0:e.white)||{};await Nt(Z,J,t)&&A("waiting")},Et=async e=>{if(!k)return void H(!0);if(!M)return void T(!0);const t=Ie.find(e=>e.id===X),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},Kt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Gt=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),xe(X);const n=Ie.filter(e=>e.id!==X),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Yn.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Ut=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},_t=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Ut(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=Kn,n={};n[t(269)]=function(e,t){return e+t},n.jZGrD=function(e,t){return e*t},n[t(204)]=t(160),n[t(267)]=t(248),n[t(263)]=function(e,t){return e*t},n[t(184)]=t(136);const s=n;switch(e){case t(247):return s[t(269)](300,s[t(168)](Math[t(142)](),500));case s[t(204)]:return 500+s.jZGrD(Math.random(),1e3);case s[t(267)]:return 800+s[t(263)](Math[t(142)](),1500);case s[t(184)]:return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=In(ee,W);if(c){const e=Ut(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,W,ke,L]),Wt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Se,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Qt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Xn.map(e=>u.jsx("button",{onClick:()=>{L.select(),U(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(E,{onClick:Gt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Yn.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Te,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ee,{to:"/openings",children:u.jsxs(E,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ke,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ee,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(E,{onClick:()=>T(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(E,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void T(!0);const e=Kt().filter(e=>e.white_player_id!==k.id);e.length>0?await Et(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Tt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Kt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Vn.map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>F(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(E,{onClick:Tt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(_e,{className:"h-4 w-4"}),"Create Game",u.jsx(We,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(E,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void T(!0);const e=Ie.find(e=>e.id===X),t=(null==e?void 0:e.black)||{};await Mt(Q.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Ze(Ae,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Vn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(S,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),u.jsx(E,{size:"sm",onClick:()=>Et(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!J&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(E,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ve,{className:"h-4 w-4"})})]})]}),u.jsx(E,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(wt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?wt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===yt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ye.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(E,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(E,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(G,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Xe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:Pt,isMyTurn:wt,myColor:yt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:Ht,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:ye,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:ye,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:ye,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Ft,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(E,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(E,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ye,{className:"h-4 w-4"}),"Share Game"]}),ge&&ye.length>0&&u.jsxs(E,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Yn.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=Yn.find(e=>e.id===W))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),!ce&&u.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(G,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Xe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:_t,getAvailableMoves:Wt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===he))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Fe,{whitePalette:(null==(d=Ie.find(e=>e.id===he))?void 0:d.white)||Ie[0].white,blackPalette:(null==(h=Ie.find(e=>e.id===pe))?void 0:h.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Fe,{whitePalette:(null==(f=Ie.find(e=>e.id===he))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Jt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(E,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(E,{variant:"outline",onClick:Gt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(E,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Je,{}),u.jsx(Le,{isOpen:P,onClose:()=>H(!1)}),u.jsx(Be,{isOpen:I,onClose:()=>T(!1),trigger:"general"}),u.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:ye,whitePalette:"bot-game"===q?(null==(b=Ie.find(e=>e.id===he))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===q?(null==(w=Ie.find(e=>e.id===pe))?void 0:w.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===q||"w"===yt?"You":"Opponent",black:"bot-game"===q?`${null==(y=Yn.find(e=>e.id===W))?void 0:y.label} Bot`:"b"===yt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:ye.length}})]})};export{Rn as default};
