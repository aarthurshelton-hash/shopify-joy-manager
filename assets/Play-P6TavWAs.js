import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as w,aZ as y,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as L,bF as q,bG as A,b6 as H,ae as P,bH as S,ah as I,bI as T,B as K,bJ as _,bK as U,bL as G,bM as E,bN as W,bO as O,bP as Y,bQ as R,bR as V,bS as F,bT as X,bU as Z,bV as J,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as we,a5 as ye,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as He,H as Pe,P as Se,ca as Ie,b3 as Te,bs as Ke,be as _e,cb as Ue,aP as Ge,cc as Ee,d as We,b2 as Oe,a9 as Ye,cd as Re,ce as Ve,cf as Fe,al as Xe,au as Ze}from"./index-0PGTc9H0.js";import{L as Je}from"./LiveColorLegend-B2R4_rxA.js";import{T as $e}from"./trending-down-BZHqoNxQ.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CY4FkX18.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function dt(e,t){e-=469;const n=mt();let s=n[e];if(void 0===dt.EYRnCS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};dt.jqfOHI=r,dt.yVHIZR={},dt.EYRnCS=!0}const a=e+n[0],i=dt.yVHIZR[a];if(i)s=i;else{const e=function(e){this.UWcwol=e,this.VjvvAe=[1,0,0],this.BCosIy=function(){return"newState"},this.sOvfRa="\\w+ *\\(\\) *{\\w+ *",this.yLwgmB="['|\"].+['|\"];? *}"};e.prototype.IvQZRU=function(){const e=new RegExp(this.sOvfRa+this.yLwgmB).test(this.BCosIy.toString())?--this.VjvvAe[1]:--this.VjvvAe[0];return this.JpFRdb(e)},e.prototype.JpFRdb=function(e){return Boolean(~e)?this.KcGhww(this.UWcwol):e},e.prototype.KcGhww=function(e){for(let t=0,n=this.VjvvAe.length;t<n;t++)this.VjvvAe.push(Math.round(Math.random())),n=this.VjvvAe.length;return e(this.VjvvAe[0])},new e(dt).IvQZRU(),s=dt.jqfOHI(s),dt.yVHIZR[a]=s}return s}!function(){const e=dt,t=mt();for(;;)try{if(648812===-parseInt(e(506))/1+-parseInt(e(536))/2+-parseInt(e(522))/3*(parseInt(e(507))/4)+-parseInt(e(512))/5+parseInt(e(469))/6+-parseInt(e(548))/7*(-parseInt(e(519))/8)+parseInt(e(489))/9*(parseInt(e(495))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[dt(515)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=dt,t={NjddE:"(((.+)+)+)+$"},n=t;return ut[e(528)]()[e(530)](n[e(526)])[e(528)]().constructor(ut)[e(530)](n.NjddE)});function mt(){const e=["nJm1nda4nxHhDMnYsG","rhjHDYbIEsb0Aa","Bg9N","yxbWBhK","Cgv0AxrPB24U","BwvZC2fNzq","BgvUz3rO","nJK1ntuXmNvHq2XPrW","ig1HDgvYAwfSlG","yvn3A2W","m2jjB1b5ua","rhjHDYbIEsbPBG","BMn0Aw9UkcKG","E30Uy29UC3rYDq","tMPKzeu","D2fYBG","Dg9tDhjPBMC","Dw5RBM93BG","C2vHCMnO","C2HVCNrnzxnZyq","C3bSAxq","DMuGCNvSzs4","DgHYzwvMB2XKxW","ywnWCha","mti2mdq1mKDit1jTCW","u1bbAeW","vufgyvO","uKvHDwW","Aw5ZDwzMAwnPzq","Ew5ruxe","CezsD1m","zM1RrKu","AxneCMf3","BNqGtwf0zxjPyq","CMv0DxjUicHMDq","CM4GDgHPCYiPka","n0HRqLfizW","x3j1Bgu","rfbPv2m","vhvbA2S","yMLUza","ntaTtw92zsbsDq","ugHHz04","mtaXmtCYmfzrtMDlyW","u3rHBgvTyxrLiq","sw5ZDwzMAwnPzq","ug1VDva","qw9btwK","rezVrLO","y3rVCIGICMv0Dq","z1zrCve","y29UC3rYDwn0BW","uMvWzxrPDgLVBG","ie5VigXLz2fSia","tuL2Dee","zsbMAwz0Es1TBW","vNLbwgi","C3rHBgvTyxrL","y29UC29Szq","Aw5MBW","CMvWzxrPDgLVBG","Cu5psKq","Bw92zxmGyxzHAq","mtKYnJC4m0HtvwHOEG","BNrFBwf0zxjPyq","ChjVDg90ExbL","BgfIBguU","AxntDgfSzw1HDa","EezOwg8","mtqWtu1pBLvp","serJEuq","AwvUDe1HDgvYAq","zfjLCgv0AxrPBW","s2jRD0O","AwTdvNi","rNf1yva","vgHYzwvMB2XKia","uMTwv0S","CMvHC29U","DgfIBgu","nZG2nJGXDM5QDgn5","mJC5ndK2ng5dBeHMsW","qvDQy2S","zMLMDhLFBw92zq","zxHJzxb0Aw9U","CMvLzM9SzcbYzq"];return(mt=function(){return e})()}ut();const xt=function(){const e=dt,t={};t[e(521)]=e(546)+e(524);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(500)]=function(e,t){return e+t},i[a(535)]=n[a(521)],i.TuAkk=a(508);const o=i,c=s?function(){const e=a,n={AoAMi:function(e,t){return o[dt(500)](e,t)},PhagN:o[e(535)],tWBEn:e(525)+'ctor("retu'+e(547)+" )"};if(r){if(e(508)===o[e(551)]){const e=r.apply(t,arguments);return r=null,e}{let t;try{t=_0x4e80b6(n[e(473)](n[e(554)]+n.tWBEn,");"))()}catch(s){t=_0x57bf1c}return t}}}:function(){};return s=!1,c}}();function ht(e){const t=dt,n={VyAXb:t(513)+t(481)+"ve rule.",cpRSn:"Stalemate!"+t(479)+t(488)+t(492),ozHdV:"gVQqQ",HfEve:"threefold_"+t(486),pFRwS:t(513)+t(511)+t(516),UAFaZ:t(502)+t(478),ynQQq:t(471)+t(545)+"l",xFhXo:function(e,t,n){return e(t,n)},DFoFZ:t(553)+"le"};if(e.isStalemate()){const e={};return e.reason=t(483),e[t(517)]=n.cpRSn,e[t(531)+"ge"]=t(470),e}if(e["isThreefol"+t(498)+"n"]()){if(n.ozHdV!==t(476)){const e={};return e[t(504)]="fifty_move"+t(549),e[t(517)]=n[t(482)],e[t(531)+"ge"]="50-Move Rule",e}{const e={};return e.reason=n.HfEve,e[t(517)]=n[t(542)],e[t(531)+"ge"]=n[t(538)],e}}if(e["isInsuffic"+t(497)+"al"]()){const e={};return e.reason=t(540)+t(490)+"l",e[t(517)]=t(523)+"sufficient"+t(520),e[t(531)+"ge"]=n[t(541)],e}const s=e.fen();if(n[t(494)](parseInt,s[t(532)](" ")[4],10)>=100){const e={};return e.reason=t(509)+t(549),e[t(517)]=t(513)+t(481)+t(533),e[t(531)+"ge"]=n[t(474)],e}const r={};return r.reason=t(529),r[t(517)]="Game drawn!",r.shortMessage="Draw",r}function pt(e){return{SPAhL:function(e,t){return e(t)}}[dt(537)](ht,e).message}function ft(e,t){e-=139;const n=wt();let s=n[e];if(void 0===ft.paLziQ){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ft.lFlhLA=r,ft.YGXFes={},ft.paLziQ=!0}const a=e+n[0],i=ft.YGXFes[a];if(i)s=i;else{const e=function(e){this.ngXOJE=e,this.WmkgTC=[1,0,0],this.jKDZEk=function(){return"newState"},this.pFBjrY="\\w+ *\\(\\) *{\\w+ *",this.LnAEyK="['|\"].+['|\"];? *}"};e.prototype.RCeqdD=function(){const e=new RegExp(this.pFBjrY+this.LnAEyK).test(this.jKDZEk.toString())?--this.WmkgTC[1]:--this.WmkgTC[0];return this.bHVRhx(e)},e.prototype.bHVRhx=function(e){return Boolean(~e)?this.syTUMa(this.ngXOJE):e},e.prototype.syTUMa=function(e){for(let t=0,n=this.WmkgTC.length;t<n;t++)this.WmkgTC.push(Math.round(Math.random())),n=this.WmkgTC.length;return e(this.WmkgTC[0])},new e(ft).RCeqdD(),s=ft.lFlhLA(s),ft.YGXFes[a]=s}return s}xt(void 0,function(){const e=dt,t={FquaP:function(e,t){return e+t},HDcyD:"return (function() ",KbkwJ:e(525)+e(475)+e(547)+" )",PmouP:e(502)+e(478),geArN:function(e){return e()},DPiWc:e(527),fmkFE:"error",MIvtA:e(505),jcFks:"trace",REaul:function(e,t){return e<t},RkVWK:e(487)},n=t.geArN(function(){const n=e;let s;try{s=Function(t[n(501)](t[n(496)],t[n(499)])+");")()}catch(r){s=window}return s}),s=n[e(484)]=n[e(484)]||{},r=[e(514),t[e(550)],e(485),t[e(543)],e(510),t[e(480)],t.jcFks];for(let a=0;t[e(539)](a,r[e(518)]);a++){if(t[e(503)]!=t[e(503)]){const n={};return n[e(504)]=e(534)+e(486),n[e(517)]=e(513)+e(511)+e(516),n[e(531)+"ge"]=t[e(472)],n}{const t=xt[e(477)+"r"][e(491)].bind(xt),n=r[a],i=s[n]||t;t.__proto__=xt[e(552)](xt),t.toString=i[e(528)].bind(i),s[n]=t}}})(),function(){const e=ft,t=wt();for(;;)try{if(194699===-parseInt(e(241))/1*(-parseInt(e(217))/2)+-parseInt(e(184))/3+-parseInt(e(254))/4+parseInt(e(247))/5*(parseInt(e(140))/6)+-parseInt(e(185))/7*(parseInt(e(234))/8)+parseInt(e(227))/9+-parseInt(e(226))/10*(parseInt(e(182))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const gt=function(){const e=ft,t={};t[e(219)]=e(257);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=ft;if(s(257)!==n[s(219)]){const e=_0x1039fc[s(218)](_0x57826f,arguments);return _0x13d07b=null,e}if(t){const n=t[s(218)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}()(void 0,function(){const e=ft,t={};t[e(214)]="(((.+)+)+)+$";const n=t;return gt.toString().search(e(206)+"+$")[e(256)]()[e(172)+"r"](gt).search(n[e(214)])});gt();const vt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ft(218)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();vt(void 0,function(){const e=ft,t={mdMUT:e(249)+e(162)+e(221),PIrRP:function(e,t){return e(t)},lORER:function(e,t){return e+t},twVkM:"{}.constru"+e(144)+e(223)+" )",Delfi:function(e,t){return e!==t},WqfEG:"PQKAB",BcILl:e(207),QSkCJ:e(237),CwGLy:function(e,t){return e<t}};let n;try{n=t[e(200)](Function,t[e(187)](e(143)+e(176)+t[e(253)],");"))()}catch(a){t[e(175)](t[e(194)],e(165))?n=window:_0x44c2ba[e(207)](t[e(153)])}const s=n[e(220)]=n[e(220)]||{},r=[e(239),t[e(170)],"info",e(163),t[e(149)],"table","trace"];for(let i=0;t.CwGLy(i,r[e(198)]);i++){const t=vt.constructor[e(252)][e(189)](vt),n=r[i],a=s[n]||t;t[e(235)]=vt[e(189)](vt),t.toString=a[e(256)].bind(a),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=ft,r={lXZen:s(193),zqVjQ:function(e,t){return e||t},KUkYr:function(e,t){return e+t},UREjW:function(e,t){return e+t},QWPYw:s(255),lblCB:function(e){return e()},taNpn:function(e,t){return e-t},iwKjN:function(e,t){return e*t},yaydd:s(240),UzMYj:function(e,t){return e+t},QljAN:function(e,t,n,s,r,a){return e(t,n,s,r,a)},wowiR:s(212),zENQK:"square",reDIa:s(155),GjQpe:function(e,t,n){return e(t,n)},HpIwF:s(238),WKQwR:function(e,t,n,s,r,a){return e(t,n,s,r,a)},nhKbR:"triangle",qdNho:function(e,t,n){return e(t,n)},MfBdH:function(e,t,n){return e(t,n)},YjkaU:function(e,t,n,s,r,a){return e(t,n,s,r,a)},JUKxA:function(e,t,n){return e(t,n)},PMVqR:function(e,t,n){return e(t,n)},KKFWv:s(258),JbJzS:function(e,t,n){return e(t,n)},RbKae:function(e,t,n){return e(t,n)},pjdWQ:s(190),zbqNt:"illegal"},a={};a[s(202)]=null,a[s(229)]=null;const i=t.useRef(a),o=t.useCallback(()=>{const e=s;if(!i[e(179)][e(202)])try{const t=new(window[e(154)+"xt"]||window[e(225)+e(205)]),s=t[e(186)]();s.connect(t[e(248)+"n"]),s[e(192)][e(157)]=n;const r={};r[e(202)]=t,r.gainNode=s,i[e(179)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;if(i[e(179)][e(229)])if("vrJyC"===r.lXZen)i[e(179)][e(229)].gain[e(157)]=n;else{const t=new(_0x453114[e(154)+"xt"]||_0x2c60fb[e(225)+e(205)]),n=t[e(186)]();n[e(173)](t.destination),n[e(192)][e(157)]=_0x58e0c3;const s={};s.context=t,s[e(229)]=n,_0x3ee761[e(179)]=s}},[n]);const c=r.RbKae(t.useCallback,(t,n,a=s(212),c=.01,l=.1,d)=>{const u=s;if(!e)return;o();const{context:m,gainNode:x}=i.current;if(r[u(259)](!m,!x))return;const h=m[u(203)+u(152)](),p=m[u(186)]();h[u(161)]=a,h[u(174)][u(208)+"Time"](t,m.currentTime),d&&h[u(174)][u(146)+u(139)+u(183)](d,r.KUkYr(m[u(204)+"e"],n)),p[u(192)][u(208)+"Time"](0,m.currentTime),p[u(192)][u(236)+u(244)+u(250)](1,r[u(188)](m[u(204)+"e"],c)),p[u(192)]["exponentialRampToVal"+u(183)](.01,m.currentTime+n-l),p.gain[u(236)+u(244)+"ime"](0,m.currentTime+n),h[u(173)](p),p[u(173)](x),h[u(196)](m[u(204)+"e"]),h[u(211)](r[u(178)](m.currentTime,n))},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s,c={};c[a(177)]=function(e,t){return e-t};const l=c;if(r[a(231)]===a(255)){if(!e)return;r[a(164)](o);const{context:s,gainNode:c}=i[a(179)];if(!s||!c)return;const l=s[a(210)]*t,d=s.createBuffer(1,l,s[a(210)]),u=d[a(160)+a(151)](0);for(let e=0;e<l;e++)u[e]=r.taNpn(r[a(197)](Math[a(147)](),2),1);const m=s[a(232)+a(166)]();m[a(180)]=d;const x=s[a(195)+a(141)]();x.type=r[a(169)],x[a(174)][a(157)]=n;const h=s.createGain();h[a(192)]["setValueAt"+a(191)](.3,s.currentTime),h[a(192)]["exponentialRampToVal"+a(183)](.01,r[a(178)](s[a(204)+"e"],t)),m[a(173)](x),x.connect(h),h[a(173)](c),m[a(196)](s[a(204)+"e"]),m[a(211)](r[a(213)](s[a(204)+"e"],t))}else _0x256e16[_0x2dc407]=l[a(177)](2*_0x43e5f4[a(147)](),1)},[e,o]),d=t.useCallback(t=>{const n=s;if(e)switch(t){case n(158):r.QljAN(c,800,.08,r[n(145)],.005,.05),r[n(251)](c,400,.06,n(228),.005,.04);break;case n(159):l(.12,2e3),r[n(251)](c,300,.1,r[n(156)],.005,.08),c(150,.15,r.wowiR,.01,.1);break;case r[n(209)]:c(600,.06,r[n(145)],.005,.04),r[n(224)](setTimeout,()=>c(700,.06,"sine",.005,.04),80);break;case r.HpIwF:r[n(168)](c,880,.15,r[n(181)],.01,.1),r.qdNho(setTimeout,()=>c(1100,.12,n(228),.01,.08),120);break;case n(246):c(880,.2,n(212),.01,.15),setTimeout(()=>c(660,.2,n(212),.01,.15),150),r.MfBdH(setTimeout,()=>c(440,.3,n(212),.01,.2),300),r[n(215)](setTimeout,()=>c(330,.4,n(212),.01,.3),500);break;case n(230):r.YjkaU(c,523,.12,"sine",.01,.08),r[n(215)](setTimeout,()=>c(659,.12,n(212),.01,.08),100),setTimeout(()=>c(784,.2,n(212),.01,.15),200);break;case n(245):c(440,.15,r[n(181)],.01,.1),r[n(233)](setTimeout,()=>c(349,.25,n(228),.01,.2),150);break;case n(171):r.QljAN(c,523,.1,r[n(145)],.01,.08),setTimeout(()=>c(659,.1,n(212),.01,.08),100),r[n(216)](setTimeout,()=>c(784,.1,"sine",.01,.08),200),setTimeout(()=>c(1047,.3,n(212),.01,.25),300);break;case r[n(150)]:c(392,.2,r[n(145)],.02,.15),r[n(199)](setTimeout,()=>c(349,.2,n(212),.02,.15),200),setTimeout(()=>c(330,.3,n(212),.02,.25),400),r[n(148)](setTimeout,()=>c(262,.4,n(212),.02,.35),650);break;case r.pjdWQ:r[n(251)](c,440,.15,r[n(145)],.01,.1),setTimeout(()=>c(440,.15,n(212),.01,.1),180),setTimeout(()=>c(523,.2,n(212),.01,.15),360);break;case r[n(242)]:c(200,.1,n(167),.005,.08),r[n(251)](c,150,.08,n(243),.005,.06)}},[e,c,l]);t.useEffect(()=>()=>{const e=ft;i[e(179)][e(202)]&&i.current.context[e(142)]()},[]);const u={};return u[s(222)]=d,u.initAudio=o,u};function wt(){const e=["mte3mZCYs0jutvPx","mtrNEuHfz3e","y3jLyxrLr2fPBG","Be9srvi","vvjfALC","yMLUza","zhjHDW","vgLTzq","z2fPBG","DNjkEum","v3fMruC","y3jLyxrLqMLXDq","C3rHCNq","AxDlAK4","BgvUz3rO","sMjkELm","ueLYuLa","vg1ev3e","y29UDgv4Da","y3jLyxrLt3nJAq","y3vYCMvUDfrPBq","B0nVBNrLEhq","kcGOlISPkYKRkq","D2fYBG","C2v0vMfSDwvbDa","CMveswe","C2fTCgXLuMf0zq","C3rVCa","C2LUzq","vxPnwwO","wLfVCha","CwroAg8","ue1wCvi","mZa3nJK2y1r4wg5c","yxbWBhK","ywLVyvG","y29UC29Szq","ChbVCNrLza","CgXHEvnVDw5K","CM4GDgHPCYiPka","r2PrCgu","D2vIA2L0qxvKAq","mtbkq3DfsMK","mJG2nty1neTWthHxBG","DhjPyw5NBgu","z2fPBK5Vzgu","z2fTzvn0yxj0","uvDqwxC","y3jLyxrLqNvMzG","sLvlEee","ntG1nZiWCufzy0nX","x19WCM90B19F","BgLUzwfYuMfTCa","zxHJzxb0Aw9U","y2HLy2S","Bg9N","Bg93CgfZCW","mLbcD2PUwa","EMjXtNq","C2f3Dg9VDgG","vg9wywX1zuf0va","z2fTzuvUza","y2HLy2TTyxrL","mJbOwureyxO","zgvZDgLUyxrPBW","v2vIief1zgLVia","Aw1L","uwXQqu4","ChjVDg90ExbL","DhDwA00","odK1mte2tujKzvH5","ufnNq0G","Dg9tDhjPBMC","s3LQvva","zgvMzwf0","ENfwALe","BfjHBxbuB1zHBa","mtG1odHos2DXtLq","ywrgAwX0zxi","y2XVC2u","CMv0DxjUicHMDq","y3rVCIGICMv0Dq","D293Avi","zxHWB25LBNrPyq","CMfUzg9T","uMjlywu","uvnRq0O","s0Tgv3y","rgf0yq","BgXHDg9Y","Bwrnvvq","qxvKAw9dB250zq","y2fZDgXL","EKvouuS","DMfSDwu","Bw92zq","y2fWDhvYzq","z2v0q2HHBM5LBa","DhLWzq","qvbjig5VDcbZDq","zxjYB3i","BgjSq0i","tgz3D2i","zxjtB3vYy2u","C3f1yxjL","v0TrD1i","Ewf5zgq","qMnjtgW","DMLJDg9YEq","y29UC3rYDwn0BW","y29UBMvJDa","zNjLCxvLBMn5","rgvSzMK","BMn0Aw9UkcKG","uhPmzg0","s1vRwxi","y3vYCMvUDa","yNvMzMvY","BMHlyLi","mZC5mdGYsLnsqxrL","DwvbDfrPBwu"];return(wt=function(){return e})()}const yt=Mt;!function(){const e=Mt,t=Nt();for(;;)try{if(607040===parseInt(e(518))/1*(parseInt(e(501))/2)+parseInt(e(521))/3*(-parseInt(e(482))/4)+parseInt(e(504))/5+-parseInt(e(510))/6*(parseInt(e(493))/7)+-parseInt(e(517))/8+parseInt(e(519))/9+parseInt(e(526))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){const e=Mt,t={};t.dsPis=e(499),t[e(513)]=e(509);const n=t;let s=!0;return function(t,r){const a=e,i={};i.CpxmZ=a(527)+"+$",i[a(497)]=n.dsPis;const o=i;if(n[a(513)]!==a(509))return _0x1d7b1a[a(523)]()[a(488)](a(527)+"+$")[a(523)]()[a(522)+"r"](_0x1fe4e0).search(o.CpxmZ);{const e=s?function(){const e=a;if(o[e(497)]!=o[e(497)]){const e=_0x2280f1.apply(_0x5651c9,arguments);return _0x139c6d=null,e}if(r){const n=r[e(483)](t,arguments);return r=null,n}}:function(){};return s=!1,e}}}()(void 0,function(){const e=Mt,t={};t[e(525)]=e(527)+"+$";const n=t;return jt[e(523)]()[e(488)](e(527)+"+$").toString()[e(522)+"r"](jt)[e(488)](n[e(525)])});jt();const Ct=function(){const e={};e[Mt(489)]=function(e,t){return e!==t};const t=e;let n=!0;return function(e,s){const r=n?function(){const n=Mt;if(!t[n(489)](n(511),n(492))){const e=_0x2c1bbe?function(){if(_0x405ed7){const e=_0x2078ea[n(483)](_0x2274f6,arguments);return _0x198c09=null,e}}:function(){};return _0x4bb500=!1,e}if(s){const t=s[n(483)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}();function Nt(){const e=["mJrTve96qu0","yxbWBhK","Aw5MBW","ChjVDg90ExbL","y29UC29Szq","zxjYB3i","C2vHCMnO","zLfHshi","DgjRuwG","zxHJzxb0Aw9U","rfzty0e","nZK3mZq0ofjjCNbiBW","BMfTzq","BgvUz3rO","CeP6q2C","vejNzu8","AfLdtg8","zMrUufe","uurJqwG","mZC0nNzQDeztsW","tgHpz2u","E30Uy29UC3rYDq","ntuWndK5nwvxBMr3ra","BuLrqvG","A1LJz3i","BMn0Aw9UkcKG","yMLUza","EMLxDgm","nMv4uMDoEG","rfjcD3C","zw5HyMXLza","vhHvC0e","tMv1AwO","D2fYBG","y2HLC3mTC291BG","nZC1nZy5nMzgCfjPuq","mtzuzhfjwwO","nZGXmdG2nMD0BuLoCW","rvHryvG","ntu5ndf5q1LeBuO","y29UC3rYDwn0BW","Dg9tDhjPBMC","DgfIBgu","DwjqBgm","odi4odu3me1mB250AW","kcGOlISPkYKRkq","y3rVCIGICMv0Dq","x19WCM90B19F"];return(Nt=function(){return e})()}Ct(void 0,function(){const e=Mt,t={EXQaX:function(e,t){return e(t)},Neuij:"return (fu"+e(507),LhOge:function(e){return e()},tbkQh:e(498),FpSjc:"log",adhnK:e(484),kYcgr:e(524),ndrcD:"trace"};let n;try{const s=t[e(520)](Function,t[e(514)]+(e(503)+e(528)+'rn this")( ));'));n=t[e(502)](s)}catch(a){if(e(505)===t[e(490)]){const t=_0x1afb79?function(){if(_0x586391){const t=_0x50cb3c[e(483)](_0x454dd0,arguments);return _0x36024f=null,t}}:function(){};return _0x4e6e3e=!1,t}n=window}const s=n[e(486)]=n[e(486)]||{},r=[t.FpSjc,e(515),t.adhnK,e(487),e(491),t[e(506)],t.ndrcD];for(let i=0;i<r[e(495)];i++)if(e(496)===e(500)){const t=_0x3339f3[e(522)+"r"][e(485)].bind(_0x1e0cad),n=_0x1664c0[_0x5d4fa6],s=_0x4e63e3[n]||t;t[e(481)]=_0x191012[e(508)](_0x469858),t[e(523)]=s[e(523)].bind(s),_0x37c253[n]=t}else{const t=Ct.constructor[e(485)].bind(Ct),n=r[i],a=s[n]||t;t[e(481)]=Ct[e(508)](Ct),t[e(523)]=a[e(523)][e(508)](a),s[n]=t}})();const kt={};function Mt(e,t){e-=481;const n=Nt();let s=n[e];if(void 0===Mt.LgcWTV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Mt.wUoxAq=r,Mt.lZcjmD={},Mt.LgcWTV=!0}const a=e+n[0],i=Mt.lZcjmD[a];if(i)s=i;else{const e=function(e){this.lOaPed=e,this.bXsHeH=[1,0,0],this.auUhZN=function(){return"newState"},this.gFfrHP="\\w+ *\\(\\) *{\\w+ *",this.MWzMcb="['|\"].+['|\"];? *}"};e.prototype.VWlLKz=function(){const e=new RegExp(this.gFfrHP+this.MWzMcb).test(this.auUhZN.toString())?--this.bXsHeH[1]:--this.bXsHeH[0];return this.ofxhls(e)},e.prototype.ofxhls=function(e){return Boolean(~e)?this.AFVasK(this.lOaPed):e},e.prototype.AFVasK=function(e){for(let t=0,n=this.bXsHeH.length;t<n;t++)this.bXsHeH.push(Math.round(Math.random())),n=this.bXsHeH.length;return e(this.bXsHeH[0])},new e(Mt).VWlLKz(),s=Mt.wUoxAq(s),Mt.lZcjmD[a]=s}return s}kt[yt(494)]=yt(516)+"d-settings";const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[yt(512)]}))}),kt)),Dt=Bt;function Bt(e,t){e-=300;const n=At();let s=n[e];if(void 0===Bt.XvCMTk){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Bt.eDPukN=r,Bt.HrZKOA={},Bt.XvCMTk=!0}const a=e+n[0],i=Bt.HrZKOA[a];if(i)s=i;else{const e=function(e){this.FUAoHk=e,this.DObFpq=[1,0,0],this.lfYwxv=function(){return"newState"},this.ygUXrr="\\w+ *\\(\\) *{\\w+ *",this.kBHeJN="['|\"].+['|\"];? *}"};e.prototype.nhXuDU=function(){const e=new RegExp(this.ygUXrr+this.kBHeJN).test(this.lfYwxv.toString())?--this.DObFpq[1]:--this.DObFpq[0];return this.SyAotK(e)},e.prototype.SyAotK=function(e){return Boolean(~e)?this.QDRsIs(this.FUAoHk):e},e.prototype.QDRsIs=function(e){for(let t=0,n=this.DObFpq.length;t<n;t++)this.DObFpq.push(Math.round(Math.random())),n=this.DObFpq.length;return e(this.DObFpq[0])},new e(Bt).nhXuDU(),s=Bt.eDPukN(s),Bt.HrZKOA[a]=s}return s}!function(){const e=Bt,t=At();for(;;)try{if(608203===-parseInt(e(311))/1+-parseInt(e(320))/2+-parseInt(e(356))/3*(-parseInt(e(419))/4)+parseInt(e(458))/5*(parseInt(e(393))/6)+parseInt(e(335))/7+parseInt(e(493))/8*(parseInt(e(511))/9)+-parseInt(e(552))/10*(parseInt(e(519))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Lt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Bt;return Lt[e(441)]()[e(345)](e(502)+"+$")[e(441)]()[e(394)+"r"](Lt)[e(345)](e(502)+"+$")});Lt();const qt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function At(){const e=["r2fTzsbUB3qGzG","wxPZsu8","E30Uy29UC3rYDq","EffuANG","CeHLDNy","AxnnEvr1CM4","s1DmyM4","D2LUBMvYswq","D2HPDgvFCgfSzq","Bg5itMG","DhvYBG","suDlyNe","BwvZC2fNzq","ANfKD2q","ihjHDgLUz3m6","quLTyMO","mteWmfbnD09wAa","AM9PBKDHBwu","Aw5Zzxj0","CLrzAhK","B1vdqKu","zM9YrwfJAa","B2TSEK0","C29XD1a","AgfSBgvUz2vFyW","BeTPAK4","A0f1tK4","z3rUr2W","y3jLyxrLigDHBq","Aw4GysbNyw1L","CMvZAwDUr2fTzq","yMXPDhPFnq","z2vUzxjHDgvFyW","DgLTzunVBNrYBW","sKDrwKe","vLrNvMm","t09AzNC","BLzywuy","Dg9tDhjPBMC","y2fWDhvYzq","EfLyrvK","shfmvhu","D2HPDgvqBgf5zq","rgrJt2q","AM9PBKj5q29Kzq","CYbcBgfJAY4","B2rL","y2HHBMDL","yMLUza","AxndAgvJA21HDa","vNjgsue","ugXLyxnLihnPzW","sMLxBwe","zxHJzxb0Aw9U","Bw92zv9UDw1Izq","ody1Bg5mDent","ywrK","uMf0Aw5NoIa","igDHBwu","z2fTzv9Pzd1LCq","tNnXAMO","qKDst0G","z2fTzvn0yxrL","Bw92zv91y2K","CMvTB3zLq2HHBG","y2HLy2TTyxrL","wxfUswS","D2HPDgvuAw1LuG","qMXHy2SGD2LUCW","ENLwDxG","ywXS","y3vYCMvUDezLBG","AM9PBIbNyw1L","B2jlCMW","B3vUza","zNjVBq","AxnmB2fKAw5N","qNP4qKS","sM9PBMvKigDHBq","Euz2sNy","ALjfs1a","D1josfi","sK1lEKO","D1rMufG","ugLXsw8","lwfJy2vWDhmGAq","EfHOrha","DhjHy2u","DMvYyM9Zzq","C3rHDhvZ","nti1nty5nNnYA2Pisa","z2fTzq","DxnLCL9Pza","B25LBNqGyxv0BW","Bwf5yMvtAw5NBa","AwXSzwDHBa","y2HLC3nFz2fTzq","ywjHBMrVBMvK","DgfIBgu","kcGOlISPkYKRkq","C3vIC2nYAwjL","BxLdB2XVCG","zw1HAw5PBMC","BfD3sxy","uwz0wue","y2rWwha","Aw5MBW","B0fWBMq","oxjZCer0vG","Bw92zxm","zhDUvgi","qvDsDvq","yMXHy2TFD2LUCW","C2vSzwn0","rMfPBgvKihrVia","yuTsrhO","mZnHyujiCvm","yNvSBgv0xZe","z2fTzv9Pza","EhPzr08","uurnyve","BwfW","Bw5qzLK","ywLmsMu","r3rvvee","yMXHy2S","yLn3A2m","Awq9zxeU","ChjVzMLSzxm","Ehv6DuK","Bw92zunVDw50","D2HPDgu","vuzrugW","vgnRD3C","zwXVx3jHDgLUzW","D2fYBG","C3f1yxjL","ww91ihjLC2LNBG","wNflyxu","AgfUz2vZ","rhfrqxa","r2fTzsbHBhjLyq","DxbKyxrL","CK5jEMi","vvHhAuC","D3bSCNK","ChvIBgLJ","ihbSyxLPBMCGyq","vwLbsMe","mZC1mZCXmeHKCfvksq","igv4CgLYzwqGyW","D0XeC0m","y29UC29Szq","C3vIC3rYAw5N","zMLUza","D2HPDgvFD2LUCW","AvjlqvG","CMv0DxjUicHMDq","Bg9HzcbNyw1L","Cw90tey","ChjVDg90ExbL","D2LtvgC","zLr6Buy","q2fUBM90igPVAq","vLfMqK0","BgvnB3zLCW","CM4GDgHPCYiPka","AxndAgvJAW","DgLTzv9JB250CG","DhrL","Bw92zv9JB3vUDa","C2fU","ywn0AxzL","D2HPDgvFDgLTzq","vwfVzvy","D2HPDgvqywXLDa","C2LVBIK","BuH6DxK","ww91ihDVBIe","rvbtuhC","yMXHy2TuAw1LuG","Bg9HzeDHBwu","Bw92zwrtCxvHCG","x19WCM90B19F","yMP4Bum","DuPxAM8","CMvZDwX0","BhPZD1q","q2HHBgXLBMDLia","tNDjBhC","BMvUDc4UlG","uvvxy3i","mJa3ote2vNDjAgD2","r2fTzsbJCMvHDa","ChjVBw90Aw9U","zerMuw4","zxjFAwq","y29KztOG","yMXHy2TqBgf5zq","DgzRBMG","B3jKzxi","nti4ntm0vKThEwDo","zwf0zsbHigDHBq","v2nUCfy","y2HHBgXLBMDLxW","sw52ywXPzcbVCG","t09wrKi","zvvUzvG","yxbWBhK","u0z3Agy","y2HLC3nFBw92zq","vvbeqvrf","DxbKyxrLievmtW","tvnQCfq","yMXHy2TFDgLTzq","Cg9ZDgDYzxnFyW","mJe3mZKZngj6yKrywa","Aw5JBhvKzxm","CMfWAwrFmtu","D0ryC1i","thDMrLe","vxzRrgG","Bw92zxmT","wfnMtxm","sfjZEfC","tw92zsbLCNjVCG","C2vHCMnO","zxjYB3i","x3jLBwfPBMLUzW","uK9oANC","BMv3","DMLJDg9YEq","t2nqvK0","y3vYCMvUDf9Mzq","CKLK","CgDU","whjMu0W","mteXntDsy0XouNy","AgfSBgvUz2uGyW","v2HPDguGD2LUCW","BMv3uMf0Aw5N","y3jLyxrLzf9HDa","EKXItNu","Bw92zq","y29TCgXLDgvK","BIb5B3vYig93BG","Dg9ju09tDhjPBG","BMn0Aw9UkcKG","C3rHCNrLzef0","BIb0AgLZihzLCG","y2HLy2S","y3bIuxe","D2fPDgLUzW","BgvUz3rO","EMjwBfy","BeLgDMe","uenQqNK","DxnLCL9PzcWGzq","ihnLBNqGkg9WCa","BhDmsfm","Chz6vvi","rfnMyMS","Axnhyw1Lt3zLCG","D2LUBMvYx2LK","BIbPBIb0BYbQBW","z3ncB00","zhjHDW","z1vbyuu","y29Kzq","D2HPDgvFCgXHEq","BMvS","C3rHCNrLzf9HDa","tY1plu8","B0Xiruq","nZuWme5Az3HIsq","y29UC3rYDwn0BW","Bw92zv9Zyw4","Dg9vChbLCKnHCW","quPmB1O","BwfRzu1VDMu","C3vJy2vZCW","y2HHBM5LBa","CNbJ","z2v0qxzHAwXHyG"];return(At=function(){return e})()}qt(void 0,function(){const e=Bt,t={elQIP:function(e,t){return e===t},soqwP:function(e,t){return e(t)},DqQAp:function(e,t){return e+t},gsBoM:function(e,t){return e+t},oklzM:e(560)+e(366),PAvOv:"log",wTfPX:e(538),xPqSB:e(346),Nsqjj:e(501),rNIzb:e(490),wRNHR:function(e,t){return e<t}};let n;try{if(t.elQIP(e(523),e(443)))return _0x506d06[e(346)](e(454)+e(383)+e(432)),!1;n=t[e(426)](Function,t[e(543)](t[e(384)](t[e(425)],e(405)+'ctor("retu'+e(569)+" )"),");"))()}catch(a){n=window}const s=n[e(555)]=n[e(555)]||{},r=[t.PAvOv,t[e(486)],e(509),t.xPqSB,e(456),t[e(463)],t[e(546)]];for(let i=0;t[e(484)](i,r[e(372)]);i++){const t=qt[e(394)+"r"].prototype.bind(qt),n=r[i],a=s[n]||t;t.__proto__=qt[e(451)](qt),t[e(441)]=a[e(441)].bind(a),s[n]=t}})();const Ht={};Ht[Dt(520)]=60,Ht[Dt(434)]=300,Ht[Dt(337)]=900,Ht.untimed=0;const Pt=Ht,St=It;function It(e,t){e-=349;const n=Gt();let s=n[e];if(void 0===It.ZMKEgI){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};It.FsdtHa=r,It.NnvHlt={},It.ZMKEgI=!0}const a=e+n[0],i=It.NnvHlt[a];if(i)s=i;else{const e=function(e){this.YLQDNk=e,this.IbxnVz=[1,0,0],this.LGkgHj=function(){return"newState"},this.UrhnTT="\\w+ *\\(\\) *{\\w+ *",this.NMPFgY="['|\"].+['|\"];? *}"};e.prototype.FoDcal=function(){const e=new RegExp(this.UrhnTT+this.NMPFgY).test(this.LGkgHj.toString())?--this.IbxnVz[1]:--this.IbxnVz[0];return this.BlKCqi(e)},e.prototype.BlKCqi=function(e){return Boolean(~e)?this.sOUQxF(this.YLQDNk):e},e.prototype.sOUQxF=function(e){for(let t=0,n=this.IbxnVz.length;t<n;t++)this.IbxnVz.push(Math.round(Math.random())),n=this.IbxnVz.length;return e(this.IbxnVz[0])},new e(It).FoDcal(),s=It.FsdtHa(s),It.NnvHlt[a]=s}return s}!function(){const e=It,t=Gt();for(;;)try{if(195614===-parseInt(e(385))/1+-parseInt(e(399))/2+-parseInt(e(375))/3*(parseInt(e(353))/4)+-parseInt(e(365))/5+parseInt(e(372))/6+parseInt(e(389))/7*(parseInt(e(367))/8)+parseInt(e(360))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Tt=function(){let e=!0;return function(t,n){const s=e?function(){const e=It;if(e(387)!=e(387)){const t=_0x5bfaea[e(369)](_0x23e31b,arguments);return _0x472b3c=null,t}if(n){const s=n[e(369)](t,arguments);return n=null,s}}:function(){};return e=!1,s}}()(void 0,function(){const e=It,t={};t[e(374)]="(((.+)+)+)+$";const n=t;return Tt[e(401)]().search(n.FkDtw)[e(401)]()[e(400)+"r"](Tt).search("(((.+)+)+)+$")});Tt();const Kt=function(){let e=!0;return function(t,n){const s=It,r={};r[s(351)]=function(e,t){return e===t};const a=r,i=e?function(){const e=s;if(n){if(a[e(351)](e(395),e(395))){const s=n[e(369)](t,arguments);return n=null,s}{const e=_0x4612f8[_0x90afd3];return _0x52fc72.vibrate(e)}}}:function(){};return e=!1,i}}();Kt(void 0,function(){const e=It,t={lemBP:e(357),MaxCN:e(376),cZySe:function(e,t){return e(t)},LfdQT:function(e,t){return e+t},sulnu:"{}.constru"+e(350)+e(392)+" )",ynCei:function(e){return e()},ZIWKE:e(378),EGMAK:"exception",iaOkr:e(362)};let n;try{if(t[e(397)]===t[e(390)])return!!_0x22783c&&_0x3f9fd2[e(361)]([15,40,15]);{const s=t[e(354)](Function,t.LfdQT(e(394)+e(383),t.sulnu)+");");n=t.ynCei(s)}}catch(a){n=window}const s=n.console=n.console||{},r=[t[e(381)],e(398),e(363),e(368),t[e(388)],e(352),t[e(349)]];for(let i=0;i<r[e(359)];i++)if("ARhXI"!==e(379)){const t=Kt[e(400)+"r"][e(371)][e(396)](Kt),n=r[i],a=s[n]||t;t[e(364)]=Kt[e(396)](Kt),t[e(401)]=a[e(401)].bind(a),s[n]=t}else if(_0x1f2389){const t=_0x37c862[e(369)](_0x413ee9,arguments);return _0x4c13d9=null,t}})();const _t={light:10};_t[St(384)]=25,_t[St(393)]=50,_t[St(386)]=[10,50,20],_t[St(368)]=[50,30,50,30,50],_t[St(356)]=5;const Ut=_t;function Gt(){const e=["rMTeDhC","mZLrCMTTvuG","ELDfr3e","Dw5KzwzPBMvK","Bg9N","rxfNq0y","sgfWDgLJigzLzq","wKLxs0u","B1jry28","BMn0Aw9UkcKG","BwvKAxvT","mti4nJK2A2LHugzA","C3vJy2vZCW","Cu9ZteW","ruDnquS","n01Tu3DoCG","twf4q04","zgjHy2SGzMfPBa","CM4GDgHPCYiPka","AgvHDNK","CMv0DxjUicHMDq","D0zJD3K","yMLUza","BgvTqLa","D2fYBG","nJi2nZa4rurTrvf5","y29UC3rYDwn0BW","Dg9tDhjPBMC","AwfpA3i","y3rVCIGICMv0Dq","rLzbB3K","DgfIBgu","nJuXodH4ALznthy","y1P5u2u","BgLNAhq","C2vSzwn0Aw9U","qwPlsw4","yuTtsu4","BgvUz3rO","ndy3mJK0nefREMzbuW","DMLICMf0zq","DhjHy2u","Aw5MBW","x19WCM90B19F","mtu1otu0mgrAqu54uq","zwq6","mJG1otqXnKr5tgP6uW","zxjYB3i","yxbWBhK","AxntDxbWB3j0zq","ChjVDg90ExbL","mtCWodC0mejozfDfAq","z3HuvNm"];return(Gt=function(){return e})()}const Et=()=>{const e=St,n={aKSIN:function(e,t){return e!==t},gxTVs:function(e,t,n){return e(t,n)},oRQco:function(e,t,n){return e(t,n)}},s=n[e(358)](typeof navigator,e(377))&&e(361)in navigator,r=n.gxTVs(t.useCallback,(t=e(355))=>{const n=e;if(!s)return!1;try{const e=Ut[t];return navigator[n(361)](e)}catch(r){return!1}},[s]),a={select:t.useCallback(()=>r(e(356)),[r]),move:t.useCallback(()=>r(e(355)),[r]),capture:n.gxTVs(t.useCallback,()=>r(e(384)),[r]),check:n[e(382)](t.useCallback,()=>r(e(393)),[r]),victory:n[e(373)](t.useCallback,()=>r(e(386)),[r]),error:n[e(382)](t.useCallback,()=>r(e(368)),[r]),castle:t.useCallback(()=>!!s&&navigator[e(361)]([15,40,15]),[s]),gameStart:n[e(373)](t.useCallback,()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i[e(370)+"d"]=s,i[e(361)]=r,i.haptics=a,i},Wt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Ot=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,w]=t.useState(null),[y,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Et();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Ot(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&y.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(w(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),w(c),void j(s(c))}w(null),j([])},[D,b,y,r,a,B,x,n,s,M]),H=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),S=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Ot(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,h=y.includes(i);c.has(i);const f=C===i,g=L.has(i),w=S(i),j=I&&g&&!w,N=I&&w;return d.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>H(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),H(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[y.length," move",1!==y.length?"s":""," available"]})})]})},Rt={capture:{icon:y,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:y,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:w,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Vt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Rt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,x=u%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),w=e.quality?M[e.quality]:null;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&d.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),w&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(L,{style:{backgroundColor:w.color},className:"text-white text-[10px]",children:[w.symbol," ",w.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(y,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Ft={capture:{icon:y,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Xt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:U,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:_,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Zt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,w]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:U,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:_,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),w(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),w(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),w(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(A,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(H,{className:"w-3 h-3"})]}):d.jsx(P,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(S,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Ft[e],s=n.icon;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(T,{className:"w-3 h-3"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Xt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(K,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(B,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Vt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(G,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(E,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(W,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),w(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(O,{className:"h-5 w-5"}):d.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(Y,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(R,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(V,{asChild:!0,children:d.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(F,{className:"h-3 w-3"}),L]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(X,{align:"end",className:"bg-popover",children:M.map(e=>d.jsx(Z,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(R,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(V,{asChild:!0,children:d.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(X,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(J,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx($,{}),re.capture.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(y,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx($,{}),re.checkmate.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(h,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Jt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),w=re(n),y=b.name!==w.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(y&&p?"text-primary":"text-muted-foreground"),animate:y&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx($e,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:y&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(h,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",w.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},$t=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(K,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(G,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(K,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:w}=xe(),{captureState:y,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,H]=t.useState(!1),[P,S]=t.useState(""),[I,T]=t.useState(!1),[_,U]=t.useState(!1);se(p);const G=t.useMemo(()=>p?fe(p):null,[p]),E=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});S(e)}catch(e){}})()},[e]);const W=async e=>{if(e&&!v)return void T(!0);if(!B.current)return;H(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{H(!1)}};return d.jsxs(ge,{open:e,onOpenChange:n,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(we,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(ye,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(K,{variant:L?"outline":"default",size:"sm",onClick:()=>E(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(K,{variant:L?"default":"outline",size:"sm",onClick:()=>E(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",G&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",G]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(K,{onClick:()=>W(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(K,{onClick:()=>W(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(K,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(K,{onClick:()=>{const e=y(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),D(!0),w({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(De,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(Be,{isOpen:I,onClose:()=>T(!1),onAuthRequired:()=>{T(!1),U(!0)},trigger:"download"}),d.jsx(Le,{isOpen:_,onClose:()=>U(!1)})]})},tn=pn;!function(){const e=pn,t=rn();for(;;)try{if(756395===parseInt(e(530))/1+parseInt(e(540))/2*(-parseInt(e(524))/3)+-parseInt(e(543))/4+-parseInt(e(519))/5*(-parseInt(e(561))/6)+parseInt(e(546))/7+parseInt(e(497))/8*(parseInt(e(573))/9)+parseInt(e(525))/10*(-parseInt(e(545))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=pn,t={};t[e(509)]=e(504)+"+$";const n=t;return nn.toString()[e(548)](n[e(509)])[e(572)]()[e(552)+"r"](nn)[e(548)](n[e(509)])});nn();const sn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[pn(553)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();sn(void 0,function(){const e=pn,t={YPGKB:function(e,t){return e(t)},nXoPZ:function(e,t){return e+t},xcJKX:"return (fu"+e(534),ndCkK:e(538)+e(508)+e(506)+" )",WZjjO:function(e,t){return e!==t},pjMNM:e(507),kVmvf:function(e){return e()},GIacl:e(539),Bzjyl:"error",uHDUL:e(491),nEvhG:e(555)},n=t[e(568)](function(){const n=e;let s;try{s=t[n(505)](Function,t[n(541)](t.xcJKX,t.ndCkK)+");")()}catch(r){if(t.WZjjO(t[n(511)],n(563)))s=window;else if(_0x4b2ed5){const e=_0xdde3fc[n(553)](_0x58801b,arguments);return _0x4350e8=null,e}}return s}),s=n[e(536)]=n[e(536)]||{},r=[t[e(517)],"warn","info",t[e(493)],t[e(522)],"table",t.nEvhG];for(let a=0;a<r[e(544)];a++){const t=sn[e(552)+"r"][e(551)][e(499)](sn),n=r[a],i=s[n]||t;t[e(560)]=sn[e(499)](sn),t[e(572)]=i[e(572)].bind(i),s[n]=t}})();function rn(){const e=["CgXHEsK","DgvK","yxrLCW","icH5B3vYihr1CG","mtqXntyXnLLJr0vUwa","ugXHEs9qyxvZzq","C2HPzNrlzxK","CMvTB3zLrxzLBG","BMn0Aw9UkcKG","vg9Nz2XLigjVyq","y29UC29Szq","ywn0Aw9U","E30Uy29UC3rYDq","Bg9N","odjkueXyt2C","BLHVufO","ie09txv0zsWGuG","ndKZodKYnfb3ChvZCq","BgvUz3rO","mJj5seX6ueW","ndm5nZeZngLitvPgBG","pvjLC2LNBIWGra","C2vHCMnO","yxvSDa","purYyxCSievZyW","ChjVDg90ExbL","y29UC3rYDwn0BW","yxbWBhK","u291BMqGDw5TDq","DhjHy2u","u3bHy2u","vg9Nz2XLl2v4Ca","zsaOzhvYAw5Nia","CMqGy29VCMrPBG","x19WCM90B19F","mtjLz3fHDLe","t2zMzxiGzhjHDW","q3zQCNe","zgL0ywjSzq","B3zL","r28GDg8Gzw5Kia","uhjLDMLVDxmGBq","A1zTDMy","u2HVCNrJDxrZoG","C3rLBMvY","rxnJ","Dg9tDhjPBMC","mZi2mJm3ngDhyM5erW","EM1Xv3y","zxnJyxbL","zxHJzxb0Aw9U","DgfYz2v0","qNPQEwW","A2v5zg93BG","Ae1QDMy","ywrKrxzLBNrmAq","mtzJA0DiCeu","DeXPC3rLBMvY","yMLUza","vg9Nz2XLihnVDq","uMv0DxjUihrVia","r28GDg8GC3rHCG","sg9Tzq","kcGOlISPkYKRkq","wvbhs0i","CM4GDgHPCYiPka","r3z6tfO","y3rVCIGICMv0Dq","uhvIrLi","uMvZAwDUigDHBq","CgPntK0","sgvSCa","AxndB250zw50rq","DxrZ","yxjKihnOB3j0yW","zwvU","r0LHy2W","r3zQrvi","mJq4nJq4nu5bqvr3uq","Cxzetva","ChjLDMvUDerLzG","DuHevuW","A2v5","mZKYmJjMr0PXAw4","nJe4mdKYmgf6teLwzq"];return(rn=function(){return e})()}const an=()=>{const e=pn,t={duration:4e3};o.info(e(569)+e(542)+e(547)+e(550)+"=Lobby, ?="+e(512),t)},on={};on[tn(523)]="M",on[tn(537)]=tn(500)+"nd on/off";const cn={};cn[tn(523)]="R",cn[tn(537)]=tn(510)+tn(558)+tn(526);const ln={};ln[tn(523)]="D",ln[tn(537)]=tn(562)+tn(529)+"n)";const dn={};dn[tn(523)]=tn(571),dn[tn(537)]=tn(501)+"lobby / Exit fullscr"+tn(516);const un={};un[tn(523)]="?",un[tn(537)]="Show keybo"+tn(515)+tn(514);const mn={};mn.key=tn(556),mn[tn(537)]=tn(531)+" timeline";const xn={};xn[tn(523)]="â†",xn[tn(537)]=tn(567)+tn(565);const hn={};function pn(e,t){e-=491;const n=rn();let s=n[e];if(void 0===pn.DXTCcc){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};pn.vdphDI=r,pn.COdbyg={},pn.DXTCcc=!0}const a=e+n[0],i=pn.COdbyg[a];if(i)s=i;else{const e=function(e){this.PkLqdL=e,this.mTgdoX=[1,0,0],this.LgyLhk=function(){return"newState"},this.evKYhE="\\w+ *\\(\\) *{\\w+ *",this.zRCywF="['|\"].+['|\"];? *}"};e.prototype.KaEcgz=function(){const e=new RegExp(this.evKYhE+this.zRCywF).test(this.LgyLhk.toString())?--this.mTgdoX[1]:--this.mTgdoX[0];return this.dZrFLI(e)},e.prototype.dZrFLI=function(e){return Boolean(~e)?this.oSMNEc(this.PkLqdL):e},e.prototype.oSMNEc=function(e){for(let t=0,n=this.mTgdoX.length;t<n;t++)this.mTgdoX.push(Math.round(Math.random())),n=this.mTgdoX.length;return e(this.mTgdoX[0])},new e(pn).KaEcgz(),s=pn.vdphDI(s),pn.COdbyg[a]=s}return s}hn[tn(523)]="â†’",hn[tn(537)]="Next move";const fn={};fn[tn(523)]=tn(503),fn[tn(537)]=tn(502)+"t";const gn={key:"End"};gn[tn(537)]=tn(566)+"(show all)";const vn={};vn[tn(523)]="F",vn[tn(537)]="Toggle fullscreen mode",tn(535),tn(559),tn(528);const bn={};bn[tn(523)]="L",bn.action=tn(557)+"and legend";const wn=Cn;function yn(){const e=["zgvZy3jPChrPBW","CLHAEw4","B0nKDfi","Aw5MBW","tLLUuxO","DhvYBG","vxLrAuy","sLfUy2m","B2nJyxnPB25HBa","BM90ihjLywr5la","rufUAMu","CM9lz0q","y3rVCIGICMv0Dq","zwfZEq","CMvK","qMvNAw5Uzxi","BwLU","D1P0ugm","idqTCgX5ihnLyq","DMfSDwf0Aw9Ula","C2XPy2u","AxrPB24","mZbJwujqywG","txLevgK","ChjVBw90Aw9U","DNrTrwK","BgvUz3rO","CM4GDgHPCYiPka","mZKWzKHbC3D5","y29SB3i","Bg1Auvi","ExHRv3O","ndqWnZm3A0zdt09S","C0vsB2W","DNHWweC","zcbTB2rL","DNz5yLu","zw5NAw5LlcbNCG","DhLWzq","AxndAgvJA21HDa","s0DoCKW","zhrJEhi","zNjVBq","BKrqCNi","mZGYmZaXnNvdBwPgzW","C29YDa","qwr2yw5JzwqGzq","B0jWCwy","C2vHCMnO","uvzlEgq","wxHADeq","CMf0Aw5N","zxjYB3i","vKPYz0q","C3rYzw5NDgG","v0Dlvg4","BwvKAxvT","vwLisvm","y2vfC0C","rhfuy2m","DMvYyM9Zzq","Aw5JBhvKzxm","y3zxAuy","E30Uy29UC3rYDq","u3rpyNe","igzHBgXPBMCGyG","yMLUza","BgfIzwW","AxneCMf3","zgvWDgG","y2fWDhvYzwq","ywnRihrVigHHCG","zMXVB3i","tK1Rzwe","Axnhyw1Lt3zLCG","r1ztCeq","CMfUzg9T","C2fU","twfZDgvY","qKHdD3q","u3fHweC","D2fYBG","u3rVy2TMAxnOia","zMLUza","nti2C3b5qKTp","kcGOlISPkYKRkq","C2nVCMu","swTWCM8","EwnZrwi","Bwf4","FJe0mda","veXLvMm","ndyXnZm5AhjsBhrU","zxHJzxb0Aw9U","tMj3wLq","mtq2nejor1DYqq","r0DrBgK","vMzctwq","Bw92zq","mZG5ndeZogLAEuzArW","CMnOigrLChrO","y29UC3rYDwn0BW","t0rLzvu","D2fPDfjLywr5","Dw5KBW","ENzcuxm","zMvU","yM9HCMq","ChbHDe4","yw5HBhL6zvbVCW","B20GBw92zxmSia","BLHetfm","BKLpy2i","yxbWBhK","mZa2odHIBuT1DvO","Bg9N","ENDfrM8","Bw92zxm","DgfIBgu","y29UC29Szq","tvHutgq","qMfZAwmGDgfJDa","FJmYmda","CKX6Ag4","Bhbty2W","yw5KBwfZDgvYia","Dg9mB3DLCKnHCW","wxn5Bee","yMvZDe1VDMu","t3bbqwq","qwjODvy","Dg9tDhjPBMC","A0jlDKe","vgDPuxq","BK9qz3G","odiXmdK1wfLdug96","BKn4ywm","r2T1C08","vNHRtw4","C3rVy2TMAxnO","q2X1yIbqBgf5zq","ELjLA0q","Bw92zsbLCNjVCG","twfRzxmGCMfUza","BfDXqvO","BMn0Aw9UkcKG","AgfYza","ChjVDg90ExbL","odC3yK9gzLrT","BhnzqwK"];return(yn=function(){return e})()}!function(){const e=Cn,t=yn();for(;;)try{if(507088===parseInt(e(209))/1*(-parseInt(e(145))/2)+parseInt(e(153))/3+parseInt(e(255))/4+-parseInt(e(196))/5*(-parseInt(e(233))/6)+-parseInt(e(175))/7*(-parseInt(e(156))/8)+-parseInt(e(160))/9+-parseInt(e(239))/10*(parseInt(e(243))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Cn(174)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Cn,t={};t.whwDy=e(146)+"+$";const n=t;return jn.toString()[e(259)](n.whwDy)[e(192)]().constructor(jn)[e(259)](e(146)+"+$")});function Cn(e,t){e-=143;const n=yn();let s=n[e];if(void 0===Cn.HaGIiI){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Cn.UCAUXl=r,Cn.kpUJQg={},Cn.HaGIiI=!0}const a=e+n[0],i=Cn.kpUJQg[a];if(i)s=i;else{const e=function(e){this.rmKBUJ=e,this.fhheiK=[1,0,0],this.lnRHdp=function(){return"newState"},this.blckZb="\\w+ *\\(\\) *{\\w+ *",this.sbVTiC="['|\"].+['|\"];? *}"};e.prototype.kcLqka=function(){const e=new RegExp(this.blckZb+this.sbVTiC).test(this.lnRHdp.toString())?--this.fhheiK[1]:--this.fhheiK[0];return this.iJGNQA(e)},e.prototype.iJGNQA=function(e){return Boolean(~e)?this.oFcpBU(this.rmKBUJ):e},e.prototype.oFcpBU=function(e){for(let t=0,n=this.fhheiK.length;t<n;t++)this.fhheiK.push(Math.round(Math.random())),n=this.fhheiK.length;return e(this.fhheiK[0])},new e(Cn).kcLqka(),s=Cn.UCAUXl(s),Cn.kpUJQg[a]=s}return s}jn();const Nn=function(){const e=Cn,t={};t[e(193)]=function(e,t){return e!==t},t[e(148)]=e(184),t[e(234)]=e(228);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(193)](n[a(148)],n[a(234)])){const e=s?function(){if(r){const e=r[a(174)](t,arguments);return r=null,e}}:function(){};return s=!1,e}if(_0x44bd89){const e=_0x322b1c[a(174)](_0x54032d,arguments);return _0x16b589=null,e}}}();Nn(void 0,function(){const e=Cn,t={rXZyn:function(e,t){return e(t)},YxZtD:function(e,t){return e+t},NbwZT:function(e,t){return e+t},yxkWz:e(274)+e(223)+e(238)+" )",LwWJe:e(176),GtnsK:e(292),nCxac:e(214),vtmEi:e(263),sERol:e(154),SqaXG:function(e,t){return e<t}};let n;try{n=t[e(212)](Function,t[e(261)](t[e(155)]("return (fu"+e(206),t[e(242)]),");"))()}catch(a){n=window}const s=n[e(180)]=n[e(180)]||{},r=[t.LwWJe,t.GtnsK,t[e(197)],t[e(236)],t[e(244)],e(179),"trace"];for(let i=0;t[e(291)](i,r.length);i++){const t=Nn[e(162)+"r"][e(208)][e(277)](Nn),n=r[i],a=s[n]||t;t.__proto__=Nn[e(277)](Nn),t[e(192)]=a[e(192)][e(277)](a),s[n]=t}})();const kn={p:100,n:320,b:330,r:500,q:900,k:2e4},Mn=kn,zn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Dn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Bn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Ln=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],qn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],An=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Hn(e){switch(e[Cn(187)+"e"]()){case"p":return zn;case"n":return Dn;case"b":return Bn;case"r":return Ln;case"q":return qn;case"k":return An;default:return[]}}function Pn(e){const t=Cn,n={EAnje:function(e,t){return e===t},QVKxd:function(e,t){return e<t},pDVBC:function(e,t){return e===t},VxkMn:t(217),zwEFo:function(e,t){return e(t)},qDyIp:function(e,t){return e>t},dyAkM:function(e,t){return e===t},nOPgx:function(e,t){return e+t},OpAAd:function(e,t){return e*t}};if(e[t(250)+"e"]())return n[t(221)](e[t(216)](),"w")?-1/0:1/0;if(e[t(279)]()||e.isStalemate())return 0;let s=0;const r=e[t(168)]();for(let i=0;n[t(260)](i,8);i++){if(!n.pDVBC(n[t(199)],t(217))){const e=_0x40a39b[t(174)](_0x54d572,arguments);return _0x20233b=null,e}for(let e=0;n.QVKxd(e,8);e++){const a=r[i][e];if(a){if(t(241)!=t(241)){const e=_0x5ba9d1?function(){if(_0x3b9dfa){const e=_0x27ff95[t(174)](_0x3b8aa1,arguments);return _0x4824d3=null,e}}:function(){};return _0x554695=!1,e}{const r=Mn[a[t(249)]]||0,o=n[t(177)](Hn,a[t(249)]);let c=0;if(n.qDyIp(o[t(237)],0)){c=o[n.dyAkM(a.color,"w")?i:7-i][e]}const l=n[t(195)](r,c);s+=n.EAnje(a[t(240)],"w")?l:-l}}}}const a=e[t(178)]()[t(237)];return s+=n.EAnje(e[t(216)](),"w")?2*a:n[t(190)](-a,2),s}function Sn(e,t,n,s,r){const a=Cn,i={Qqexm:function(e,t){return e<t},JQncc:function(e,t){return e(t)},ycsEb:function(e,t,n,s,r,a){return e(t,n,s,r,a)},lsYAi:function(e,t){return e-t},roKgD:function(e,t){return e>t},WGKTn:function(e,t){return e<=t},GGQli:function(e,t){return e===t},dtcxr:a(205),YsylA:function(e,t,n,s,r,a){return e(t,n,s,r,a)}};if(0===t||e[a(285)]())return{score:i[a(218)](Pn,e),move:null};const o={verbose:!0},c=e[a(178)](o);if(c[a(256)]((e,t)=>{const n=a;let s=0,r=0;return e[n(281)]&&(s+=Mn[e[n(281)]]||0),t[n(281)]&&(r+=Mn[t[n(281)]]||0),e[n(288)][n(272)]("+")&&(s+=50),t[n(288)].includes("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const d of c){e[a(159)](d);const c=i[a(149)](Sn,e,i[a(210)](t,1),n,s,!1);if(e[a(165)](),i[a(222)](c[a(147)],r)&&(r=c[a(147)],o=d),n=Math[a(150)](n,c.score),i[a(266)](s,n))break}const l={};return l.score=r,l[a(159)]=o,l}if(!i[a(157)](i[a(252)],a(268))){let r=1/0,o=null;for(const d of c){e.move(d);const c=i[a(188)](Sn,e,t-1,n,s,!0);if(e[a(165)](),i.Qqexm(c.score,r)&&("CPMLv"===a(275)?(_0x272153=_0x29081e,_0x3cb63e=_0x51579e):(r=c.score,o=d)),(s=Math[a(227)](s,c[a(147)]))<=n)break}const l={};return l[a(147)]=r,l[a(159)]=o,l}i.Qqexm(_0x170218,_0xe4fdb2)&&(_0x25366e=_0x1dbbc4,_0x5bf35f=_0x37491c)}function In(e){const t=Cn,n={};n[t(169)]=function(e,t){return e===t},n[t(213)]=function(e,t){return e*t};const s=n,r={};r[t(271)]=!0;const a=e[t(178)](r);if(s.ppatN(a.length,0))return null;const i=a.filter(e=>e.captured);return i[t(237)]>0&&Math[t(287)]()<.3?i[Math.floor(Math[t(287)]()*i.length)]:a[Math[t(283)](s.oCdtR(Math[t(287)](),a[t(237)]))]}function Tn(e){const t=Cn,n={NYnQz:function(e,t){return e(t)},KGNrL:function(e,t){return e-t},MXTLd:function(e,t){return e===t},cvWiF:function(e,t){return e(t)},AbhuV:function(e,t){return e===t},BHCwt:t(247),DqTcc:function(e,t){return e*t}},s={};s[t(271)]=!0;const r=e[t(178)](s);if(n.MXTLd(r.length,0))return null;let a=null,i=n[t(181)](e[t(216)](),"w")?-1/0:1/0;for(const o of r){e[t(159)](o);const s=n[t(273)](Pn,e);if(e[t(165)](),n[t(191)](e.turn(),"w")){if(s>i){if(t(247)!==n[t(290)])return _0x1699c0.warn(t(143)+t(220)+t(276)+t(282)+t(246)),n[t(215)](_0x2ed02c,_0x35a692);i=s,a=o}}else s<i&&(i=s,a=o)}if(Math[t(287)]()<.2){const s=r[t(256)]((s,r)=>{const a=t;e.move(s);const i=Pn(e);e[a(165)](),e[a(159)](r);const o=Pn(e);return e[a(165)](),"w"===e[a(216)]()?n[a(251)](o,i):n.KGNrL(i,o)}),a=s.slice(0,Math[t(227)](3,s[t(237)]));return a[Math[t(283)](n[t(270)](Math.random(),a[t(237)]))]}return a}function Kn(e){const t=Cn,n={NMkea:function(e,t,n,s,r,a){return e(t,n,s,r,a)},VfBMd:function(e,t){return e===t}};return n[t(284)](Sn,e,4,-1/0,1/0,n[t(158)](e.turn(),"w"))[t(159)]}const _n={};_n.id=wn(224),_n[wn(278)]=wn(226),_n[wn(211)+"n"]=wn(204)+wn(171)+wn(219)+" captures",_n[wn(262)]="~800";const Un={};Un.id=wn(267),Un[wn(278)]=wn(201)+"r",Un[wn(211)+"n"]=wn(182)+"ics and material awareness",Un.rating=wn(151);const Gn={};Gn.id=wn(207),Gn[wn(278)]=wn(289),Gn.description=wn(257)+wn(230)+wn(229)+wn(161),Gn[wn(262)]="~2000";const En={};En.id=wn(200),En[wn(278)]=wn(143)+"16",En[wn(211)+"n"]="Real NNUE "+wn(248)+wn(186)+wn(265),En[wn(262)]=wn(183),En["enginePowe"+wn(225)]=!0;const Wn=[_n,Un,Gn,En];!function(){const e=Rn,t=Vn();for(;;)try{if(889990===-parseInt(e(159))/1+parseInt(e(182))/2+-parseInt(e(185))/3+-parseInt(e(202))/4+parseInt(e(177))/5*(-parseInt(e(216))/6)+-parseInt(e(224))/7+-parseInt(e(171))/8*(-parseInt(e(205))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const On=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Rn(174)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Rn,t={};t[e(211)]=e(162)+"+$";const n=t;return On.toString().search(e(162)+"+$")[e(173)]()[e(206)+"r"](On)[e(175)](n.oCIfS)});On();const Yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Rn(e,t){e-=159;const n=Vn();let s=n[e];if(void 0===Rn.eHJRbF){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Rn.gzBcmq=r,Rn.zzlshl={},Rn.eHJRbF=!0}const a=e+n[0],i=Rn.zzlshl[a];if(i)s=i;else{const e=function(e){this.FxAcCk=e,this.WnGOvK=[1,0,0],this.RYuhgW=function(){return"newState"},this.KULGff="\\w+ *\\(\\) *{\\w+ *",this.bzjzso="['|\"].+['|\"];? *}"};e.prototype.suLlRJ=function(){const e=new RegExp(this.KULGff+this.bzjzso).test(this.RYuhgW.toString())?--this.WnGOvK[1]:--this.WnGOvK[0];return this.GDsjEK(e)},e.prototype.GDsjEK=function(e){return Boolean(~e)?this.wNbBkT(this.FxAcCk):e},e.prototype.wNbBkT=function(e){for(let t=0,n=this.WnGOvK.length;t<n;t++)this.WnGOvK.push(Math.round(Math.random())),n=this.WnGOvK.length;return e(this.WnGOvK[0])},new e(Rn).suLlRJ(),s=Rn.gzBcmq(s),Rn.zzlshl[a]=s}return s}Yn(void 0,function(){const e=Rn,t={YSxUs:function(e,t){return e(t)},AYeJE:e(183),RXtyv:e(188),uxiYU:e(165),ROyma:e(219),QkZPd:function(e,t){return e<t}},n=function(){const n=e;let s;try{s=t[n(198)](Function,n(195)+n(227)+(n(160)+n(194)+'rn this")( ));'))()}catch(r){s=window}return s}(),s=n[e(167)]=n[e(167)]||{},r=[t.AYeJE,e(169),e(212),e(192),t[e(204)],t[e(226)],t[e(203)]];for(let a=0;t[e(213)](a,r.length);a++){const t=Yn[e(206)+"r"].prototype[e(221)](Yn),n=r[a],i=s[n]||t;t[e(220)]=Yn[e(221)](Yn),t[e(173)]=i[e(173)][e(221)](i),s[n]=t}})();function Vn(){const e=["yMLUza","qvPHrK4","y0jzrg4","nJi2odC1mK1uqMfyEq","Dg91y2HLCW","DxHPwvu","BMn0Aw9UkcKG","y3vYCMvUDfG","qMnABNO","mtC3mtG4mwDgA091sG","E30Uy29UC3rYDq","C29bsMq","kcGOlISPkYKRkq","AxntD2LWAw5N","wfb1te4","DgfIBgu","y3vYCMvUDfK","y29UC29Szq","txLbyM0","D2fYBG","C3rHCNry","mJi1nde3nLfNvw9Mwa","B25nB3vZzuXLyq","Dg9tDhjPBMC","yxbWBhK","C2vHCMnO","AgfUzgXLCNm","nde5mZCYmfzUCgXLDa","B25nB3vZzvvW","B2zRuMi","y2XPzw50wq","q2fHsvK","mJu0odu0mfzQzLrPDa","Bg9N","CgL3zKu","otm3nZa3z0XNAwjv","B25uB3vJAevUza","ywjZ","zxHJzxb0Aw9U","wLDuthe","sg1PD1i","t0TKrK0","zxjYB3i","Ew5nB0q","y3rVCIGICMv0Dq","CMv0DxjUicHMDq","zKnTtwK","Cfb3wKi","wvn4vxm","zxzwufu","B25nB3vZzurVDW","B25Zq0u","ote0mZq0wwDVr2DI","uK95Bwe","uLH0Exy","mte3zLrYt3L4","y29UC3rYDwn0BW","yunlAvm","y2XPzw50wa","C3rHCNrz","B25uB3vJAfn0yq","B0njzLm","Aw5MBW","uwTAugq","DwTLzNi","tfjnB3C","nNrWAKDqEa","y3vYCMvUDa","q0nTAuy","DhjHy2u","x19WCM90B19F"];return(Vn=function(){return e})()}const Fn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Ue,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Ue,description:"15 minutes"}],Xn=["bot","create","join"],Zn=()=>{var e,n,s,l,u,x,f,v,b,w,y;me();const[j]=He(),{user:k,isPremium:M}=r(),{haptics:L}=Et(),[q,A]=t.useState("lobby"),[H,S]=t.useState(!1),[I,T]=t.useState(!1),[_,G]=t.useState("bot"),[E,W]=t.useState("human"),[O,Y]=t.useState("medium"),[R,V]=t.useState("blitz_5"),[F,X]=t.useState("hotCold"),[Z,J]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,we]=t.useState(!0),[ye,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[Me,ze]=t.useState([]),[De,qe]=t.useState(!1),[Ae,Ue]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Xn.indexOf(_);let n;n="left"===e?Math.min(t+1,Xn.length-1):Math.max(t-1,0),n!==t&&(L.select(),G(Xn[n]))},[_,L]),{swipeOffset:xt,isSwiping:ht,handlers:ft}=((e={})=>{const n=Rn,s={XPuLN:function(e,t){return e(t)},HmiwR:function(e,t){return e-t},BcZnz:function(e,t){return e-t},fCmMi:function(e,t){return e(t)},ZWTLq:n(162)+"+$",ynMoD:function(e,t){return e>t},ukefr:function(e){return null==e?void 0:e()},soAJd:n(197),aCKiS:"xzbMk",DYmbI:function(e,t){return e(t)},cBYDn:function(e,t,n){return e(t,n)},ofkRb:n(181),piwfE:function(e,t,n){return e(t,n)},ROsPF:n(191),AZaFN:"XjfxF",mFzrD:function(e,t,n){return e(t,n)},onsCE:function(e,t,n){return e(t,n)},LRMow:function(e,t,n){return e(t,n)},CCmiF:function(e,t,n){return e(t,n)},lWdqB:function(e,t,n){return e(t,n)},evVPU:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=s[n(164)](t.useState,d),[x,h]=s[n(196)](t.useState,!1),p={};p[n(170)]=0,p[n(209)]=0,p[n(228)]=0,p.currentY=0,p.isSwiping=!1;const f=s[n(164)](t.useRef,p),g=t.useCallback((e,t)=>{const r=n,a={};a.startX=e,a[r(209)]=t,a.currentX=e,a.currentY=t,a[r(163)]=!0,f.current=a,s[r(164)](h,!0)},[]),v=s.cBYDn(t.useCallback,(e,t)=>{const r=n;if(!f[r(217)][r(163)])return;f[r(217)].currentX=e,f[r(217)][r(166)]=t;const a=s[r(190)](e,f.current.startX),i=s[r(229)](t,f[r(217)][r(209)]),o={};o.x=a,o.y=i,s.fCmMi(m,o)},[]),b=s[n(201)](t.useCallback,()=>{const e=n;if(!f.current.isSwiping)return;const t=f[e(217)][e(228)]-f[e(217)][e(170)],a=s[e(229)](f[e(217)][e(166)],f[e(217)][e(209)]),d=Math[e(187)](t),u=Math[e(187)](a);if(s[e(193)](d,u)&&d>r)if(t>0){if(e(168)!=e(168))return _0x1462db[e(173)]().search(e(162)+"+$")[e(173)]()[e(206)+"r"](_0x30d225).search(ffFCuj[e(189)]);s[e(214)](o)}else s[e(214)](i);else if(u>d&&u>r)if(a>0)null==l||l();else{if(s[e(161)]===s[e(207)]){const t=_0x448fea?function(){if(_0x2b5ee4){const t=_0x38f383[e(174)](_0x440e82,arguments);return _0x2a78e7=null,t}}:function(){};return _0x19ae52=!1,t}s[e(214)](c)}f[e(217)][e(163)]=!1,h(!1);const x={x:0,y:0};s.DYmbI(m,x)},[r,i,o,c,l]),w=t.useCallback(e=>{const t=n,r=e[t(225)][0];s[t(223)](g,r[t(208)],r.clientY)},[g]),y=s[n(215)](t.useCallback,e=>{const t=n;if(s[t(179)]==s[t(179)]){const n=e.touches[0];s[t(184)](v,n.clientX,n.clientY)}else if(_0x155bcf){const e=_0x1ded55[t(174)](_0x544ecd,arguments);return _0x58360f=null,e}},[v]),j=t.useCallback(()=>{s[n(214)](b)},[b]),C=s[n(218)](t.useCallback,e=>{const t=n;a&&g(e[t(208)],e[t(180)])},[a,g]),N=s.lWdqB(t.useCallback,e=>{const t=n;if(s.ROsPF===s[t(222)]){const e=_0x2b31e6.apply(_0x4cb2b4,arguments);return _0x442a29=null,e}a&&s.mFzrD(v,e[t(208)],e[t(180)])},[a,v]),k=s[n(199)](t.useCallback,()=>{a&&b()},[a,b]),M=s[n(218)](t.useCallback,()=>{const e=n;a&&f.current[e(163)]&&b()},[a,b]),z={};z[n(210)+"rt"]=w,z.onTouchMove=y,z[n(186)]=j,z[n(200)+"n"]=C,z.onMouseMove=N,z[n(178)]=k,z[n(172)+"ve"]=M;const D={};return D.swipeOffset=u,D.isSwiping=x,D[n(176)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:wt,myColor:yt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Lt,offerDraw:qt,loadGame:At,getAvailableMoves:Ht,movedSquares:St}=(()=>{const e=Dt,n={aiLJe:function(e,t){return e===t},oUCBE:"completed",lKijN:function(e,t){return e!==t},SFwhf:function(e,t){return e===t},JiWma:function(e,t){return e(t)},DdcOd:e(385),fTzmF:function(e,t){return e===t},dDfQn:"defeat",LwfFQ:function(e,t){return e(t)},IGKbq:e(548),RONjw:e(468),Iraic:e(442),wDXsR:"O-O",VTgVc:"castle",wLDsC:e(499)+"s",oApnd:e(334)+e(542),XrfSL:function(e,t){return e>=t},JMKzJ:e(403)+e(477),bBppY:e(329)+"s",aKRDz:e(466),uoNMH:e(521),snLZA:function(e,t){return e instanceof t},INuoq:e(517)+e(561),xuzuI:function(e,t){return e(t)},XZsUq:e(517)+e(475),NwIlw:"Xxbqp",cpbQq:"gbfjq",HqLTu:e(371),mnPfY:"Failed to "+e(431)+"e",pvzUR:function(e,t){return e(t)},YzsIO:e(507),Dmtbm:function(e,t){return e!==t},UiAJa:e(303),eUneX:e(454)+e(383)+e(432),gtnGl:function(e,t){return e(t)},obKrl:"gameStart",AWRuT:e(481)+"e! You are"+e(550)+e(448),VZjjO:e(517)+"join by code",JGQZA:function(e,t){return e(t)},XSfMs:function(e,t){return e(t)},jREKP:e(498),UvkDh:e(369),lnHNh:"ZkTxR",yCyop:e(392),GtUTA:function(e,t){return e===t},KWLbn:function(e,t){return e===t},AImbj:e(515),BzxBK:function(e,t){return e===t},OOVFB:function(e,t){return e+t},UaoeV:function(e,t){return e||t},MSjpT:function(e,t){return e===t},UFQPl:"xzYGO",nVXYF:function(e,t,n,s){return e(t,n,s)},EPSPw:function(e,t){return e(t)},lWwIv:e(310),HRsxW:e(358)+"!",VrFIA:function(e,t){return e===t},txbfr:"You won!",OcPVM:function(e,t){return e(t)},lzswT:e(531),rTYhy:e(376)+"lo_rating",gUAaE:e(495),lwLHS:e(407),dwnTb:e(439),wiSTg:function(e,t){return e>=t},cdpXp:e(517)+e(331)+e(417),AJLoZ:function(e,t){return e||t},gRtEG:e(558),zLbNu:function(e,t){return e===t},QlqMf:function(e,t,n,s){return e(t,n,s)},WcnpV:e(540)+"ed",xQTjx:"Draw offer"+e(377)+e(496)+e(488)+e(368)+e(579),lIFva:function(e,t,n,s){return e(t,n,s)},uJWjo:function(e){return e()},VQfBM:function(e,t){return e(t)},DSfbk:function(e){return e()},zbVlV:function(e,t){return e(t)},qotLF:function(e,t){return e===t},iRKAX:e(575),UXGiG:function(e,t,n){return e(t,n)},yFvJv:function(e,t,n){return e(t,n)},mHzuy:function(e,t,n){return e(t,n)},Tckww:function(e,t,n){return e(t,n)},iOIuO:function(e,t,n){return e(t,n)},YqnIk:function(e,t,n){return e(t,n)}},{user:s}=n[e(304)](r),[l,d]=t.useState(new a),[u,m]=n[e(351)](t.useState,null),[x,h]=n[e(567)](t.useState,!1),[p,f]=t.useState(null),[g,v]=t.useState(new Set),{enabled:b,volume:w}=n[e(380)](zt),{playSound:y}=bt(b,w);n[e(373)](t.useRef,"");const j=u?u[e(445)+e(353)]===(null==s?void 0:s.id)?"w":n[e(562)](u["blackPlaye"+e(353)],null==s?void 0:s.id)?"b":null:null,C=(null==u?void 0:u.status)===n[e(559)]&&l[e(413)]()===j;t.useEffect(()=>{const t=e;if(!(null==u?void 0:u.id))return;const r=i[t(400)]("game-"+u.id).on("postgres_c"+t(542),{event:t(330),schema:"public",table:n.wLDsC,filter:t(530)+u.id},e=>{const r=t,i=e[r(349)];if(n.aiLJe(i[r(492)],n[r(423)])&&n[r(428)](u.status,r(363))&&(n[r(328)](i[r(305)],r(385))?n[r(455)](y,n[r(446)]):n[r(565)](i.winner_id,null==s?void 0:s.id)?n[r(455)](y,r(350)):y(n[r(314)])),n[r(339)](m,e=>e?{...e,status:i[r(492)],result:i[r(305)],pgn:i.pgn,currentFen:i[r(352)+"n"],moveCount:i.move_count,whiteTimeRemaining:i[r(576)+r(347)],blackTimeRemaining:i[r(333)+r(347)],winnerId:i[r(382)],blackPlayerId:i["black_play"+r(315)],startedAt:i[r(390)]}:null),i.current_fen){const e=new a(i[r(352)+"n"]);d(e)}})[t(503)](),o=i[t(400)](t(341)+u.id).on(n[t(510)],{event:"INSERT",schema:t(549),table:"chess_moves",filter:t(462)+"."+u.id},e=>{const r=t,a={};a[r(489)]=function(e,t){return e>=t},a[r(375)]=r(581);const i=a,o=e[r(349)],c=o.move_uci;if(c&&c.length>=4){const e=c[r(556)](2,4);v(t=>new Set([...t,e]))}if(o.player_id!==(null==s?void 0:s.id)){const e=o[r(395)];e.includes("#")?n[r(328)](n[r(414)],n[r(414)])?y(n[r(348)]):_0x37f183[r(466)]&&i[r(489)](_0x56f163[r(466)][r(372)],4)&&_0x3d1f33[r(459)](_0x16cab5[r(466)][r(556)](2,4)):e[r(336)]("+")?y(r(369)):e[r(336)]("x")?n[r(339)](y,n.Iraic):e===n[r(338)]||e===r(391)?n[r(455)](y,n.VTgVc):y(r(362))}})[t(503)]();return()=>{const e=t;i["removeChan"+e(389)](r),i[e(467)+"nel"](o)}},[null==u?void 0:u.id,null==u?void 0:u[e(492)],null==s?void 0:s.id,y]);const N=n[e(547)](t.useCallback,async t=>{const s=e;if(s(429)!=s(429))n[s(339)](_0x3637a9,n[s(348)]);else{h(!0),f(null);try{const{data:e,error:r}=await i.from("chess_games")[s(516)]("*").eq("id",t)[s(497)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(485)]);const o={};o.id=e.id,o[s(445)+s(353)]=e[s(388)+s(315)],o["blackPlaye"+s(353)]=e["black_play"+s(315)],o[s(492)]=e.status,o[s(305)]=e[s(305)],o.pgn=e[s(354)]||"",o[s(474)]=e.current_fen,o[s(533)]=e[s(573)]||0,o[s(436)+"l"]=e[s(571)+"ol"],o[s(470)+"emaining"]=e["white_time"+s(347)],o[s(583)+s(505)]=e["black_time"+s(347)],o[s(578)+"te"]=e[s(411)+s(572)],o.blackPalette=e["black_pale"+s(572)],o.challengeCode=e[s(323)+s(387)],o[s(410)]=e.winner_id,o.createdAt=e[s(360)],o[s(367)]=e[s(390)],m(o);const c=new a(e.current_fen);d(c);const l={ascending:!0},{data:u}=await i[s(478)](n.bBppY)[s(516)](n[s(518)]).eq(n.uoNMH,t)[s(319)](s(457)+"r",l);if(u){if("BGROH"!==s(464)){const e=_0x57798b[s(327)](_0x431815,arguments);return _0x22682d=null,e}{const e=new Set;u[s(424)](t=>{const r=s;t.move_uci&&n[r(355)](t[r(466)][r(372)],4)&&e.add(t.move_uci[r(556)](2,4))}),v(e)}}}catch(r){f(n.snLZA(r,Error)?r.message:n.INuoq)}finally{n[s(532)](h,!1)}}},[]),k=n[e(482)](t.useCallback,async(t,r,a)=>{const c=e,l={zyVux:function(e,t){return e instanceof t},REdmE:n.XZsUq,PiqIo:function(e,t){return e(t)}};if(n[c(526)](n[c(308)],n[c(370)])){const e=l[c(472)](_0x408101,_0x1b404a)?_0x3d4e95[c(415)]:l.REdmE;return l[c(487)](_0x204ae7,e),_0x3f548c.error(e),!1}if(!s){if(c(416)==c(416))return o[c(346)](c(454)+"n in to cr"+c(321)+"e"),null;_0x559c4d(c(385))}h(!0),f(null);try{const e=Pt[t]||null,{data:l}=await i[c(401)](c(435)+c(427)+"ode"),d={};d[c(388)+c(315)]=s.id,d[c(492)]=n.HqLTu,d[c(571)+"ol"]=t,d[c(576)+c(347)]=e,d["black_time"+c(347)]=e,d["white_pale"+c(572)]=a,d.is_public=r,d[c(323)+c(387)]=l;const{data:u,error:m}=await i[c(478)](c(499)+"s")[c(421)](d)[c(516)]().single();if(m)throw m;return o[c(399)](r?c(312)+"ed! Waiting for oppo"+c(309):c(307)+c(316)+l),await N(u.id),u.id}catch(d){const e=d instanceof Error?d[c(415)]:n[c(525)];return n[c(379)](f,e),o[c(346)](e),null}finally{n[c(404)]!=n[c(404)]?_0x2d7495("castle"):h(!1)}},[s,N]),M=n[e(580)](t.useCallback,async(t,r)=>{const a=e;if(!s){if(n.Dmtbm(a(529),n[a(551)]))return o[a(346)](n[a(326)]),!1;{const e=_0x13387e[a(394)+"r"][a(563)].bind(_0x36cf27),t=_0x2553fe[_0x577104],n=_0x14e477[t]||e;e[a(302)]=_0x1621f2[a(451)](_0x3708ca),e[a(441)]=n.toString[a(451)](n),_0x22615c[t]=e}}h(!0),f(null);try{const{data:e,error:c}=await i[a(478)](a(499)+"s")[a(516)]("*").eq("id",t)[a(497)+"e"]();if(c)throw c;if(!e)throw new Error(n.JMKzJ);if(e[a(492)]!==n[a(444)])throw new Error(a(544)+"dy started");if(e[a(388)+a(315)]===s.id)throw new Error(a(566)+a(364)+a(461));const{error:l}=await i[a(478)](n.wLDsC)[a(545)]({black_player_id:s.id,black_palette:r,status:a(575),started_at:(new Date)[a(365)+"g"](),last_move_at:(new Date)[a(365)+"g"]()}).eq("id",t);if(l)throw l;return n[a(430)](y,n[a(476)]),o[a(399)](n[a(514)]),await N(t),!0}catch(c){const e=n.snLZA(c,Error)?c[a(415)]:n.XZsUq;return n[a(379)](f,e),o.error(e),!1}finally{h(!1)}},[s,N,y]),z=n[e(580)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(346)](n[a(326)]),!1;h(!0),f(null);try{const{data:e,error:s}=await i[a(478)](n[a(554)])[a(516)]("id").eq("challenge_"+a(387),t[a(396)+"e"]()).eq(a(492),a(371)).maybeSingle();if(s)throw s;if(!e)throw new Error(a(324)+a(553)+a(357)+a(449));return await M(e.id,r)}catch(c){const e=c instanceof Error?c.message:n.VZjjO;return n[a(437)](f,e),o.error(e),!1}finally{n[a(342)](h,!1)}},[s,M]),D=n[e(536)](t.useCallback,async(t,r,c)=>{const m=e,x=function(e,t){return n[Bt(355)](e,t)};if(!u||!s||!C)return!1;try{if(m(541)==m(541)){const e={};e[m(478)]=t,e.to=r,e[m(313)]=c;const h=l[m(362)](e);if(!h)return n[m(379)](y,n[m(483)]),!1;if(l.isCheckmate())n[m(339)](y,m(468));else if(l[m(570)]())y(n[m(340)]);else if(h.captured)if(n[m(412)]!==n.yCyop)n.pvzUR(y,m(442));else{const e=_0x3a4bc8[m(534)][m(450)];_0x202e06[m(509)]("Rating: "+_0x7416fe.white.newRating+" ("+(x(e,0)?"+":"")+e+")")}else n[m(527)](h[m(574)],"O-O")||n[m(526)](h[m(574)],m(391))?n[m(437)](y,n[m(438)]):n.pvzUR(y,m(362));n[m(339)](d,new a(l.fen())),n[m(342)](v,e=>new Set([...e,r]));const p=l[m(354)](),f=l.fen();let g=null,b=null,w=m(575);if(l[m(381)]()&&(w=n[m(423)],l[m(452)+"e"]()?(g=n[m(409)](l[m(413)](),"w")?n[m(418)]:"white_wins",b=n[m(480)](l[m(413)](),"w")?u[m(317)+m(353)]:u["whitePlaye"+m(353)]):g=n[m(446)]),await i[m(478)]("chess_moves").insert({game_id:u.id,player_id:s.id,move_number:n[m(325)](u.moveCount,1),move_san:h[m(574)],move_uci:t+r+n[m(577)](c,""),fen_after:f}),await i[m(478)](m(499)+"s")[m(545)]({pgn:p,current_fen:f,move_count:n[m(325)](u[m(533)],1),last_move_at:(new Date)[m(365)+"g"](),status:w,result:g,winner_id:b,completed_at:n[m(332)](w,m(363))?(new Date)[m(365)+"g"]():null}).eq("id",u.id),w===m(363)&&g)if(m(522)!==n[m(535)]){if(_0x5529b7){const e=_0x4e5366[m(327)](_0x4bef7c,arguments);return _0x37b50d=null,e}}else await n[m(440)](B,u[m(445)+m(353)],u[m(317)+"rId"],g),n[m(328)](g,n.DdcOd)?n[m(582)](y,n[m(446)]):n[m(480)](b,null==s?void 0:s.id)?m(318)!==n[m(506)]?n[m(532)](y,"victory"):_0x26b451(!1):y(n[m(314)]),g===m(558)?o[m(399)]("w"===j?"You won!":n[m(343)]):"black_wins"===g?o[m(399)](n[m(453)](j,"b")?n.txbfr:m(471)+"!"):o[m(509)](n[m(351)](pt,l));return!0}return _0x2181c[m(441)]()[m(345)]("(((.+)+)+)+$").toString()[m(394)+"r"](_0x949e12)[m(345)](m(502)+"+$")}catch(h){return!1}},[l,u,s,C,j,y]),B=t.useCallback(async(t,r,a)=>{const l=e;if(!n.UaoeV(!t,!r)&&a!==l(500))try{const{data:e}=await i.from(n[l(306)])[l(516)](n[l(422)]).in(n.gUAaE,[t,r]);if(!e||2!==e[l(372)])return;const d=e[l(557)](e=>e[l(495)]===t),u=e.find(e=>e[l(495)]===r);if(!d||!u)return;const m=d[l(537)]||1200,x=u[l(537)]||1200,h=a===n.DdcOd?l(385):a,p=c(m,x,h),f={};f[l(537)]=p[l(534)].newRating;const g={};if(g.elo_rating=p[l(528)][l(359)],await Promise[l(473)]([i[l(478)](l(531))[l(545)](f).eq(l(495),t),i.from(n.lzswT)[l(545)](g).eq(n[l(386)],r)]),n[l(328)](null==s?void 0:s.id,t))if(n[l(378)]!==n[l(513)]){const e=p[l(534)][l(450)];o[l(509)](l(460)+p[l(534)][l(359)]+" ("+(n[l(564)](e,0)?"+":"")+e+")")}else _0x23b636="completed",_0x40bfd9[l(452)+"e"]()?(_0x4436a3="w"===_0x235ddf.turn()?"black_wins":l(558),_0x3dd161=n[l(526)](_0x41f522[l(413)](),"w")?_0x51ad80[l(317)+l(353)]:_0x333d0b[l(445)+l(353)]):_0x5d84fd=l(385);else if((null==s?void 0:s.id)===r){const e=p[l(528)][l(450)];o[l(509)](l(460)+p.black[l(359)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){}},[s]),L=n.iOIuO(t.useCallback,async()=>{const t=e;if(n[t(397)](!u,!s)||!j)return;const r=n[t(328)](j,"w")?n[t(418)]:n.gRtEG,a=n[t(361)](j,"w")?u[t(317)+t(353)]:u[t(445)+"rId"];await i.from(t(499)+"s")[t(545)]({status:t(363),result:r,winner_id:a,completed_at:(new Date)[t(365)+"g"]()}).eq("id",u.id),await n.QlqMf(B,u[t(445)+t(353)],u[t(317)+t(353)],r),o[t(509)](n[t(322)])},[u,s,j,B]),q=n[e(469)](t.useCallback,async()=>{const t=e;o[t(509)](n[t(406)]),u&&(await i[t(478)](n[t(554)])[t(545)]({status:n[t(423)],result:n[t(446)],completed_at:(new Date)[t(365)+"g"]()}).eq("id",u.id),await n[t(374)](B,u[t(445)+t(353)],u[t(317)+"rId"],t(385)))},[u,B]),A=t.useCallback(t=>{const n=e,s={};return s[n(539)]=t,s[n(491)]=!0,l[n(512)](s)[n(524)](e=>e.to)},[l]),H={};return H[e(494)]=l,H[e(465)]=u,H[e(408)]=C,H[e(504)]=j,H[e(479)]=x,H.error=p,H[e(398)]=D,H.createGame=k,H[e(420)]=M,H[e(447)]=z,H[e(433)]=L,H.offerDraw=q,H[e(300)]=N,H[e(402)+e(568)]=A,H[e(301)+"es"]=g,H})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),A("lobby")};((e={})=>{const n={hMjvf:function(e){return e()},zmqWv:function(e,t){return e&&t},GvjER:function(e,t){return e!==t},qvDMP:"SnkRR",LrUec:function(e){return e()}},{onResign:s,onOfferDraw:r,onBackToLobby:a,isGameActive:i,isMyTurn:c}=e,{toggleEnabled:l,enabled:d}=n.LrUec(zt),u=t.useCallback(e=>{const t=pn;if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e[t(492)][t(513)+t(564)])return;const u=e.key.toLowerCase();switch(u){case"m":n[t(495)](l),o.info(d?"Sound muted":t(554)+t(527),{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":i&&s&&(e[t(521)+t(549)](),s());break;case"d":n[t(574)](i,c)&&r&&(n[t(518)](n[t(520)],n[t(520)])?(_0x1ffe7b[t(521)+t(549)](),_0x4e643e()):(e[t(521)+t(549)](),n[t(495)](r)));break;case t(575):a&&(e[t(521)+t(549)](),a());break;case"?":case"/":(!e[t(532)]||"?"===u)&&(e["preventDef"+t(549)](),an())}},[l,d,s,r,a,i,c]);t.useEffect(()=>{const e=pn;return window[e(496)+e(570)](e(494),u),()=>window[e(533)+e(498)](e(494),u)},[u])})({onResign:"active"===(null==vt?void 0:vt.status)?Lt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&wt?qt:void 0,onBackToLobby:"lobby"!==q?It:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:wt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>A("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Ue(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Ue(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const Tt=async()=>{if(!k)return void S(!0);if(!M)return void T(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.white)||{};await Nt(R,Z,t)&&A("waiting")},Kt=async e=>{if(!k)return void S(!0);if(!M)return void T(!0);const t=Ie.find(e=>e.id===F),n=(null==t?void 0:t.black)||{};await kt(e,n)&&A("game")},_t=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Ut=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),he(F);const n=Ie.filter(e=>e.id!==F),s=n[Math.floor(Math.random()*n.length)];fe(s.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Wn.find(e=>e.id===O))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Gt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Wt=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Gt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=Cn,n={};n.zvBQs=t(224),n[t(172)]=function(e,t){return e*t},n[t(254)]=function(e,t){return e*t},n[t(152)]=t(207),n[t(269)]=function(e,t){return e+t};const s=n;switch(e){case s[t(166)]:return 300+s[t(172)](Math[t(287)](),500);case t(267):return 500+s[t(254)](Math[t(287)](),1e3);case s.TLeVc:return s[t(269)](800,1500*Math.random());case t(200):return 100;default:return 500}}(O);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=Cn,s={DWngf:function(e,t){return e(t)},nIOcb:function(e,t){return e(t)}};switch(t){case"easy":return In(e);case n(267):return s.DWngf(Tn,e);case n(207):return s[n(173)](Kn,e);case n(200):return Kn(e);default:return In(e)}}(ee,O);if(c){const e=Gt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,O,ke,L]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(Pe,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx($t,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===q&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Xn.map(e=>d.jsx("button",{onClick:()=>{L.select(),G(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(_===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(K,{onClick:Ut,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:Wn.map(e=>d.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(O===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(Se,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Te,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Ke,{to:"/openings",children:d.jsxs(K,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(_e,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Ke,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(K,{onClick:()=>T(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(K,{onClick:async()=>{if(!k)return void S(!0);if(!M)return void T(!0);const e=_t().filter(e=>e.white_player_id!==k.id);e.length>0?await Kt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Tt())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),_t().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==_t().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Fn.map(e=>d.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>J(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>J(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(K,{onClick:Tt,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&d.jsx(We,{className:"h-4 w-4"}),"Create Game",d.jsx(Oe,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ye,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(K,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void S(!0);if(!M)return void T(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.black)||{};await Mt($.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Ae)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Re(Ae,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Fn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(B,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),d.jsx(K,{size:"sm",onClick:()=>Kt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!Z&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),d.jsx(K,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Ve,{className:"h-4 w-4"})})]})]}),d.jsx(K,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&vt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(wt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?wt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===yt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ye.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),"active"===vt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(K,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(K,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Yt,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:Ht,isMyTurn:wt,myColor:yt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:St,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:ye,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Je,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:ye,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Je,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:ye,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&d.jsx(Jt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(K,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(K,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Ee,{className:"h-4 w-4"}),"Share Game"]}),ge&&ye.length>0&&d.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Wn.find(e=>e.id===O))?void 0:e.label," Bot (",null==(n=Wn.find(e=>e.id===O))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>we(!be)}),!ce&&d.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(U,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Yt,{fen:ee.fen(),onMove:Wt,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===xe))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Je,{whitePalette:(null==(u=Ie.find(e=>e.id===xe))?void 0:u.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===pe))?void 0:x.black)||Ie[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Je,{whitePalette:(null==(f=Ie.find(e=>e.id===xe))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Zt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(K,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(K,{variant:"outline",onClick:Ut,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Ze,{}),d.jsx(Le,{isOpen:H,onClose:()=>S(!1)}),d.jsx(Be,{isOpen:I,onClose:()=>T(!1),trigger:"general"}),d.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?de:ye,whitePalette:"bot-game"===q?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===q?(null==(w=Ie.find(e=>e.id===pe))?void 0:w.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===q||"w"===yt?"You":"Opponent",black:"bot-game"===q?`${null==(y=Wn.find(e=>e.id===O))?void 0:y.label} Bot`:"b"===yt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===q?de.length:ye.length}})]})};export{Zn as default};
