import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as m,D as h,aB as p,aC as f,aD as w,aE as v,p as j,t as y,w as g,dy as N,dt as C,bo as b,dq as D,cZ as q,a1 as z,a2 as _,a3 as L,a4 as B,a5 as A,aW as M,bC as I,dz as W,b as S,y as P}from"./index-0PGTc9H0.js";import{C as U}from"./calendar-nz-eDCcR.js";!function(){const e=F,t=R();for(;;)try{if(559094===parseInt(e(247))/1+-parseInt(e(182))/2+-parseInt(e(181))/3*(parseInt(e(176))/4)+parseInt(e(158))/5+parseInt(e(245))/6*(-parseInt(e(159))/7)+-parseInt(e(219))/8+parseInt(e(180))/9)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const G=function(){let e=!0;return function(t,s){const n=e?function(){const e=F;if(e(226)===e(190)){const t=_0x55781c[e(151)](_0x1b4f36,arguments);return _0x455205=null,t}if(s){const n=s[e(151)](t,arguments);return s=null,n}}:function(){};return e=!1,n}}()(void 0,function(){const e=F,t={};t[e(188)]=e(272)+"+$";const s=t;return G[e(221)]()[e(203)](e(272)+"+$")[e(221)]().constructor(G).search(s[e(188)])});G();const k=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[F(151)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();async function H(t){const s=F,n={};n.hCGXF=s(246),n.sFbsM=s(232),n.AxoFM="profiles",n[s(258)]=s(244)+s(169)+"e";const r=n;try{const n={};n[s(238)]=!1;let a=e.from(s(263)+s(172))[s(200)]("*")[s(162)](r.hCGXF,n);t&&t!==r[s(242)]&&(a=a.eq("status",t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(197)](e=>e[s(178)]))],{data:l}=await e[s(214)](r.AxoFM).select(r[s(258)]).in(s(178),o),{data:d}=await e.from(s(192)+"ts")[s(200)](s(259)+s(166)+s(222)+s(189)+s(237)).in("user_id",o),u=new Map((null==l?void 0:l[s(197)](e=>[e[s(178)],e]))||[]),x=new Map((null==d?void 0:d[s(197)](e=>[e[s(178)],e]))||[]),m=(c||[])[s(197)](e=>{var t,n,r;return{...e,payout_details:e[s(204)+s(217)],user_display_name:(null==(t=u[s(229)](e[s(178)]))?void 0:t[s(213)+"me"])||"Unknown User",wallet_total_earned:(null==(n=x[s(229)](e[s(178)]))?void 0:n[s(187)+"ed_cents"])||0,wallet_total_withdrawn:(null==(r=x[s(229)](e[s(178)]))?void 0:r["total_with"+s(198)+"s"])||0}}),h={};return h.data=m,h[s(163)]=null,h}catch(a){const e={};return e[s(184)]=[],e[s(163)]=a,e}}function F(e,t){e-=147;const s=R();let n=s[e];if(void 0===F.dNfjpi){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};F.sITyxr=r,F.enSlTZ={},F.dNfjpi=!0}const a=e+s[0],c=F.enSlTZ[a];if(c)n=c;else{const e=function(e){this.cQDnCy=e,this.qaNwFF=[1,0,0],this.RXVSAZ=function(){return"newState"},this.IFYpbR="\\w+ *\\(\\) *{\\w+ *",this.wgvqYD="['|\"].+['|\"];? *}"};e.prototype.vDfxuJ=function(){const e=new RegExp(this.IFYpbR+this.wgvqYD).test(this.RXVSAZ.toString())?--this.qaNwFF[1]:--this.qaNwFF[0];return this.NCbOtm(e)},e.prototype.NCbOtm=function(e){return Boolean(~e)?this.mRhYGO(this.cQDnCy):e},e.prototype.mRhYGO=function(e){for(let t=0,s=this.qaNwFF.length;t<s;t++)this.qaNwFF.push(Math.round(Math.random())),s=this.qaNwFF.length;return e(this.qaNwFF[0])},new e(F).vDfxuJ(),n=F.sITyxr(n),F.enSlTZ[a]=n}return n}function R(){const e=["yxrLigvYCM9YoG","ywrTAw5FBM90zq","tKPHwgW","yxbWCM92zwrFyq","zgLZCgXHEv9Uyq","zNjVBq","DhvZ","B3vUDf9Jzw50CW","ywLSCW","CMvQzwn0zwq","nZaXmtyZmNLNswDUCq","r0rQsLa","Dg9tDhjPBMC","zf9Jzw50CYWGDa","BgvUz3rO","zwrqr2W","zM9YrwfJAa","yxLNq0G","DxbKyxrL","CM4GDgHPCYiPka","z2v0","zxHJzxb0Aw9U","C1HxqM0","ywXS","cI0TlqO","C2rsC2G","sNfcyNu","swvuvwS","CMf3BL9Jzw50CW","yxnJzw5KAw5N","B0P0z1i","D1v5C2W","C2LUz2XL","C0zIC00","sfPgEve","DxnLCL9PzcWGza","mJeXotHkr1zkvuO","y3jLyxrLzf9HDa","mZe2ntm2ANfns3Hc","BMn0Aw9UkcKG","zNvUy3rPB25Z","CgDrzK8","qMzNzwK","y3rVCIGICMv0Dq","yxbWCM92zwq","yxbWCM92zwrFyW","CgvUzgLUzW","CMv0DxjUicHMDq","Dg90ywW","yw16Bhq","DxnLCL9PzcWGDa","vLLWyLm","y29UC3rYDwn0BW","DKrdvu8","D2L0AgrYyxDHBa","ig5VDcbPBIbHCa","D2fYBG","ChjVDg90ExbL","yxv0Aa","DgfIBgu","AgTIvgi","y29TCgXLDgvKxW","E30Uy29UC3rYDq","kcGOlISPkYKRkq","r05ZyNm","Bg9N","q2jxtKy","C3rHDhvZ","tNnWq0y","Bw91BNq","yM9KEq","yxbWBhK","r0jkr0G","y29TCgXLDgvK","tuvcyue","twrjufa","tM90igf1DgHLBG","CMvHC29UigLZia","ndu2nJKZmg1TtLLeAG","n01RqwvfvW","DgLJyxrLza","BeXWyue","B3jKzxi","zxjYB3i","Curuu1e","q0HUsNi","B3rHBf9LyxjUzq","C3rHDhvZlcbHBq","rg95ze4","AxnWBgf5x25HBq","tgnXwuK","A3bAuMq","x3jLCxvLC3rZ","ChjVDMvKihn0yq","Aw52B2TL","Dw50","mJq0mffiAun6ua","DcbMB3vUzcbVCG","DxnLCL9Pza","B09zCNi","mtC4mJaXmJzIsLbzEgu","ndy3n2vJDMXOAa","mtyZotCZmgHXA0vmBq","z2v0vxnLCG","zgf0yq","x19WCM90B19F","Dg9ju09tDhjPBG","Dg90ywXFzwfYBG","DfD1Dwi","B3rHBf93AxrOza","AwDtrKe","CMvQzwn0zwrFyW","DxnLCL93ywXSzq","C3vJy2vZCW","uMvXDwvZDcbUBW","B3vUDa","ENDTAxi","BwfW","zhjHD25Fy2vUDa","CMvXDwvZDf9Pza","C2vSzwn0","CMvXDwLYzwq","y29UC29Szq","C2vHCMnO","Cgf5B3v0x2rLDa","v2fSBgv0ihvWza","yMLUza","twnjywW","yw1VDw50x2nLBG"];return(R=function(){return e})()}async function Z(){const t=F,s={GDjJP:function(e,t){return e!==t}};s.Emvdt=t(179);const n=s;try{const{data:s,error:n}=await e[t(214)](t(263)+t(172))[t(200)](t(167)+t(216));if(n)throw n;const r={};r["pending_co"+t(175)]=0,r["pending_am"+t(195)]=0,r[t(254)+t(195)]=0,r.approved_amount=0,r[t(270)+t(257)]=0,r[t(191)+t(195)]=0;const a=r;(s||[])[t(225)](e=>{const s=t;switch(e[s(147)]){case s(255):a["pending_co"+s(175)]++,a["pending_am"+s(195)]+=e.amount_cents;break;case s(253):a["approved_c"+s(195)]++,a[s(212)+s(149)]+=e.amount_cents;break;case s(153):a["completed_"+s(257)]+=e[s(208)+"ts"];break;case"rejected":a[s(191)+s(195)]++}});const c={};return c[t(184)]=a,c.error=null,c}catch(r){if(n[t(220)](n.Emvdt,t(231))){const e={};return e[t(184)]=null,e[t(163)]=r,e}{const e=_0x1b39c2?function(){if(_0x5c41f5){const e=_0x2391ee.apply(_0x24ae84,arguments);return _0x8834bd=null,e}}:function(){};return _0x445689=!1,e}}}k(void 0,function(){const e=F,t={hkbTb:function(e,t){return e!==t},NspCF:"cRuWn",edPGl:e(251),GBJGH:function(e,t){return e+t},qDTSQ:function(e){return e()},DoydN:e(230),NJaXl:e(268),VYpbS:e(154)},s=t[e(164)](function(){const s=e;if(t[s(269)](t[s(148)],t[s(224)])){let e;try{e=Function(t.GBJGH(t[s(152)](s(256)+s(248),s(271)+s(252)+s(228)+" )"),");"))()}catch(n){e=window}return e}{const e={};return e[s(184)]=[],e[s(163)]=_0x574366,e}}),n=s[e(202)]=s[e(202)]||{},r=[e(274),e(265),"info",e(163),t[e(168)],t[e(211)],"trace"];for(let a=0;a<r[e(223)];a++){if("MEBaA"!==t[e(260)])throw new _0x42d3d4(e(194)+e(177)+e(264)+"proved sta"+e(215));{const t=k.constructor[e(266)].bind(k),s=r[a],c=n[s]||t;t[e(185)]=k[e(206)](k),t[e(221)]=c.toString[e(206)](c),n[s]=t}}})(),function(){const e=J,t=K();for(;;)try{if(960658===-parseInt(e(364))/1*(-parseInt(e(359))/2)+-parseInt(e(370))/3*(parseInt(e(302))/4)+parseInt(e(340))/5+parseInt(e(329))/6*(parseInt(e(360))/7)+-parseInt(e(336))/8+parseInt(e(341))/9+-parseInt(e(335))/10*(parseInt(e(307))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const E=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[J(356)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=J,t={zcmak:"(((.+)+)+)+$"},s=t;return E[e(315)]()[e(325)](e(342)+"+$").toString()[e(369)+"r"](E)[e(325)](s.zcmak)});E();const X=function(){const e=J,t={rspBy:function(e,t){return e!==t}};t.ITNLr=e(353),t[e(309)]=function(e,t){return e===t},t.LvEDg=e(310);const s=t;let n=!0;return function(e,t){const r=n?function(){const n=J;if(s[n(320)](n(353),s.ITNLr))_0x865930=_0xc00386;else if(t){if(s.gcVSP(n(371),s.LvEDg)){const e={};return e[n(365)]=null,e[n(323)]=_0x83ba3a,e}{const s=t[n(356)](e,arguments);return t=null,s}}}:function(){};return n=!1,r}}();function J(e,t){e-=301;const s=K();let n=s[e];if(void 0===J.DqBSEm){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};J.jPdDxt=r,J.UAemoE={},J.DqBSEm=!0}const a=e+s[0],c=J.UAemoE[a];if(c)n=c;else{const e=function(e){this.NhjTod=e,this.IOQiPZ=[1,0,0],this.RCurzU=function(){return"newState"},this.XCkpBy="\\w+ *\\(\\) *{\\w+ *",this.PItiSu="['|\"].+['|\"];? *}"};e.prototype.JGXUye=function(){const e=new RegExp(this.XCkpBy+this.PItiSu).test(this.RCurzU.toString())?--this.IOQiPZ[1]:--this.IOQiPZ[0];return this.Febxvi(e)},e.prototype.Febxvi=function(e){return Boolean(~e)?this.arFRsl(this.NhjTod):e},e.prototype.arFRsl=function(e){for(let t=0,s=this.IOQiPZ.length;t<s;t++)this.IOQiPZ.push(Math.round(Math.random())),s=this.IOQiPZ.length;return e(this.IOQiPZ[0])},new e(J).JGXUye(),n=J.jPdDxt(n),J.UAemoE[a]=n}return n}function K(){const e=["y29UC3rYDwn0BW","mtjeu29zwLe","t2XsvNa","Cf91C2vYx2LK","mtmZmdq0nfLuwhDpvW","yxrLx3DHBgXLDa","B3jKzxi","C2vSzwn0","ChjVy2vZC19Tyq","mte1oti4mdflqKHkAM0","EgDet2O","z2nwu1a","tMD5EM0","BMn0Aw9UkcKG","zxHJzxb0Aw9U","BNnHy3rPB25Z","yxnJzw5KAw5N","Dg9tDhjPBMC","BgLTAxq","BgvUz3rO","DhjHy2u","Bg9N","CNnWqNK","yxv0Aa","E30Uy29UC3rYDq","zxjYB3i","AuL4rve","C2vHCMnO","z2v0vxnLCG","yMXOqxe","CMTLDhbSywnLxW","ndKWmty0wxHuv21J","DxrJBMe","sxLXEwK","y3jLyxrLzf9HDa","yMLUza","r2nLuLG","mtblAwHhzvG","mteZodC4ntziu3LKAvi","y29UC29Szq","C1jKthm","wuD0tgC","ndK4ody5nxrWv0PxCa","mJGYnJeXn3PWrfjisW","kcGOlISPkYKRkq","z2ztELy","CNbJ","Aw5MBW","s1jKvvi","Dwztt0S","q0frBM4","Cf9ZywXLx3bYAq","tM90igf1DgHLBG","uuXhyKG","DxnLCL9Pza","AMzIAxC","CM4GDgHPCYiPka","wePjyuO","yxbWBhK","CMv0DxjUicHMDq","AM9utuO","mJC4otbsEu5Au3G","mtu0weXfAwPt","ufbevwG","DgfIBgu","y3rVCIGICMv0Dq","mte5zuzoBufc","zgf0yq","C3vJy2vZCW","DgLJyxrLza","vLv4zKW"];return(K=function(){return e})()}function O(e){return"$"+(e/100).toFixed(2)}function Y(){var G,k;const{user:R}=t(),E=s(),[X,J]=n.useState(!1),[K,Y]=n.useState(!0),[T,V]=n.useState([]),[Q,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[R]);const oe=async()=>{if(!R)return void Y(!1);const{data:t}=await e.rpc("has_role",{_user_id:R.id,_role:"admin"});!0===t&&(J(!0),await le()),Y(!1)},le=async()=>{const[e,t]=await Promise.all([H(ee),Z()]);e.data&&V(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(P,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(P,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(P,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(P,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(P,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(h,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(P,{variant:"outline",children:e})}};return K?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):R&&X?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>E(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O(Q.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O(Q.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:O(Q.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(v,{value:ee,children:r.jsxs(c,{children:[r.jsxs(j,{children:[r.jsx(y,{children:"Withdrawal Requests"}),r.jsxs(g,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===T.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(N,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(C,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:T.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(b,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(D,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(U,{className:"h-3 w-3"}),q(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",O(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:O(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(z,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(_,{children:[r.jsxs(L,{children:[r.jsxs(B,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(A,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(G=se.request.payout_details)?void 0:G.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:O(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(M,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(I,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(k=se.request.payout_details)?void 0:k.email})]})]})]}),r.jsxs(W,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=F,r={};r[n(165)]=n(272)+"+$",r[n(273)]=n(170),r.vDCUO=n(263)+"_requests",r[n(275)]=function(e,t){return e||t};const a=r;try{if(a[n(273)]!==n(155)){const{data:{user:r}}=await e[n(267)][n(183)]();if(!r)throw new Error("Not authen"+n(160));const{error:c}=await e[n(214)](a[n(262)]).update({status:n(253),admin_notes:a[n(275)](s,null),reviewed_by:r.id,reviewed_at:(new Date)[n(186)+"g"]()}).eq("id",t).eq(n(147),"pending");if(c)throw c;const i={};return i[n(193)]=!0,i.error=null,i}if(_0x3d82aa){const e=_0x414fde[n(151)](_0x4c2bd6,arguments);return _0x3deaaf=null,e}}catch(c){if(n(239)!==n(207)){const e={success:!1};return e[n(163)]=c,e}return _0x413609[n(221)]()[n(203)](n(272)+"+$")[n(221)]()[n(261)+"r"](_0x53532)[n(203)](QgdiEl.CHnJr)}}(se.request.id,re),t.success&&S.success("Withdrawal approved");break;case"reject":if(!re.trim())return S.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=F,r={};r[n(234)]="Not authen"+n(160),r[n(243)]="Rejection "+n(157)+n(201),r.IeTUk=n(263)+n(172),r.czcWm=n(218),r.wUysl=function(e,t){return e!==t},r[n(250)]="JPgQg";const a=r;try{const{data:{user:r}}=await e.auth[n(183)]();if(!r)throw new Error(a[n(234)]);if(!s)throw new Error(a[n(243)]);const{error:c}=await e[n(214)](a[n(236)])[n(227)]({status:a.czcWm,admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date).toISOString()}).eq("id",t).eq("status",n(255));if(c)throw c;const i={};return i[n(193)]=!0,i.error=null,i}catch(c){if(!a[n(240)](a[n(250)],a[n(250)])){const e={};return e[n(193)]=!1,e[n(163)]=c,e}_0x71f36c.error(n(205)+n(209),_0x575aff)}}(se.request.id,re),t.success&&S.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=F,r={};r[n(235)]=n(156)+"ticated",r[n(161)]=n(253),r[n(196)]=n(194)+"t found or"+n(264)+n(173)+n(215),r.kpZRd="process-withdrawal";const a=r;try{const{data:{user:r}}=await e[n(267)][n(183)]();if(!r)throw new Error(a[n(235)]);const{data:c,error:i}=await e[n(214)]("withdrawal"+n(172)).select("*").eq("id",t).eq(n(147),a.lLpaA)[n(241)]();if(i||!c)throw new Error(a.zwmir);const{error:o}=await e[n(214)](n(263)+n(172))[n(227)]({status:"completed",admin_notes:s?(c.admin_notes||"")+n(233)+s:c[n(210)+"s"],completed_at:(new Date)[n(186)+"g"]()}).eq("id",t);if(o)throw o;const l={};l[n(199)]=t,l[n(178)]=c[n(178)],l[n(208)+"ts"]=c[n(208)+"ts"];const d={};d[n(150)]=l;const{error:u}=await e[n(249)][n(174)](a[n(171)],d),x={};return x[n(193)]=!0,x.error=null,x}catch(c){const e={};return e[n(193)]=!1,e[n(163)]=c,e}}(se.request.id,re),t.success&&S.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?S.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>E("/"),children:"Go Home"})]})})})}X(void 0,function(){const e=J,t={};t[e(343)]=function(e,t){return e+t},t[e(334)]=e(357)+e(311),t[e(308)]=e(342)+"+$",t.sRdLs=e(319),t[e(330)]="warn",t[e(324)]=e(345),t[e(368)]=e(312),t[e(351)]=e(362),t[e(331)]=function(e,t){return e===t},t[e(339)]=e(327);const s=t,n=function(){const t=e;let n;try{n=Function(s.gfSzV(s.GceRX,t(322)+t(363)+t(354)+" )")+");")()}catch(r){n=window}return n}(),r=n[e(337)]=n.console||{},a=[s[e(338)],s[e(330)],s.iIxEQ,e(323),s[e(368)],s[e(351)],e(318)];for(let c=0;c<a[e(317)];c++){if(!s.Iyqyi(s[e(339)],s[e(339)]))return _0x1626e7[e(315)]()[e(325)](s[e(308)])[e(315)]()[e(369)+"r"](_0x4ef2c2)[e(325)](s[e(308)]);{const t=X[e(369)+"r"].prototype[e(333)](X),s=a[c],n=r[s]||t;t.__proto__=X.bind(X),t.toString=n[e(315)][e(333)](n),r[s]=t}}})();export{Y as default};
