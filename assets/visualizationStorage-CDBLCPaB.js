import{s as t,cd as r,ec as n,ed as e}from"./index-CiI6UKiY.js";import{v as o,a as i,b as a}from"./visualizationSchemas-D_3xoTby.js";import"./flagContent-BA76b2Dj.js";!function(){const t=u,r=w();for(;;)try{if(881296===parseInt(t(399))/1+parseInt(t(426))/2*(-parseInt(t(314))/3)+-parseInt(t(436))/4*(parseInt(t(359))/5)+-parseInt(t(445))/6*(-parseInt(t(409))/7)+-parseInt(t(434))/8+parseInt(t(444))/9+parseInt(t(391))/10)break;r.push(r.shift())}catch(n){r.push(r.shift())}}();const c=function(){const t=u,r={};r[t(389)]=t(329);const n=r;let e=!0;return function(r,o){const i=t;if(i(329)===n[i(389)]){const t=e?function(){if(o){const t=o.apply(r,arguments);return o=null,t}}:function(){};return e=!1,t}{const t=_0x12632d[i(499)+"r"].prototype[i(352)](_0xad9de5),r=_0x47e8e2[_0x54f33f],n=_0x2dff6b[r]||t;t[i(463)]=_0x4147e9[i(352)](_0x252b91),t[i(319)]=n[i(319)][i(352)](n),_0x3edae9[r]=t}}}()(void 0,function(){const t=u,r={};r[t(360)]=t(358)+"+$";const n=r;return c[t(319)]()[t(316)](n.MioBH)[t(319)]().constructor(c).search(n.MioBH)});c();const s=function(){let t=!0;return function(r,n){const e=t?function(){if(n){const t=n[u(447)](r,arguments);return n=null,t}}:function(){};return t=!1,e}}();function u(t,r){t-=311;const n=w();let e=n[t];if(void 0===u.XOObfR){var o=function(t){let r="",n="",e=r+o;for(let o,i,a=0,c=0;i=t.charAt(c++);~i&&(o=a%4?64*o+i:i,a++%4)?r+=e.charCodeAt(c+10)-10!=0?String.fromCharCode(255&o>>(-2*a&6)):a:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let o=0,i=r.length;o<i;o++)n+="%"+("00"+r.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(n)};u.ZfTiiX=o,u.Zfzjpl={},u.XOObfR=!0}const i=t+n[0],a=u.Zfzjpl[i];if(a)e=a;else{const t=function(t){this.LjfROq=t,this.FVnWZc=[1,0,0],this.hisPte=function(){return"newState"},this.RaePdS="\\w+ *\\(\\) *{\\w+ *",this.VRzYFI="['|\"].+['|\"];? *}"};t.prototype.qFSbRf=function(){const t=new RegExp(this.RaePdS+this.VRzYFI).test(this.hisPte.toString())?--this.FVnWZc[1]:--this.FVnWZc[0];return this.TtOlQC(t)},t.prototype.TtOlQC=function(t){return Boolean(~t)?this.KlaKCx(this.LjfROq):t},t.prototype.KlaKCx=function(t){for(let r=0,n=this.FVnWZc.length;r<n;r++)this.FVnWZc.push(Math.round(Math.random())),n=this.FVnWZc.length;return t(this.FVnWZc[0])},new t(u).qFSbRf(),e=u.ZfTiiX(e),u.Zfzjpl[i]=e}return e}function f(t,r,n){const e=u,o={};o.tfspv=e(488);const i=o;return(t||r.pgn||"")[e(471)]().replace(/\s+/g," ")+"::"+(n?JSON[e(380)]({palette:n[e(326)]||i.tfspv,darkMode:n[e(330)]||!1,currentMove:n.currentMove===1/0?e(313):n[e(504)+"e"],lockedPieces:(n[e(439)+"es"]||[])[e(418)]((t,r)=>(t[e(390)]+"-"+t.pieceType)["localeComp"+e(442)](r[e(390)]+"-"+r[e(509)]))}):"{}")}async function l(o,i,a,c){const s=u,l={rXWvQ:s(476)+s(405),wiFBd:function(t,r){return t!==r},VSDKX:s(437),eePzi:s(432)+"king dupli"+s(315),Bwyjn:function(t,r,n,e){return t(r,n,e)},GTNKK:function(t,r){return t===r},STcAi:s(396),rpxxW:s(325)+"me",mzCuO:s(486)+"icate exists",mpeTQ:s(488),vWcXv:s(320),gyZAD:s(338),wteBW:function(t,r){return t===r},HKXvj:function(t,r){return t!==r},zLYUx:s(455),sApXU:function(t,r){return t(r)}};try{const u=f(i,a,c),{data:C,error:y}=await t[s(408)](l[s(417)])[s(496)](s(350)+s(503)+"me_data");if(y){if(l.wiFBd(l[s(421)],s(437))){const t={};return t.error=_0x55c265,t}{const t={};return t[s(340)+"e"]=!1,t[s(506)+"ar"]=!1,t}}for(const r of C||[]){const n=r[s(387)];if(u===l[s(459)](f,r.pgn||void 0,n,n["visualizat"+s(427)])){const n=l[s(371)](r[s(420)],o);let e;if(!n){const{data:n}=await t[s(408)](l[s(357)])[s(496)](l[s(362)]).eq(s(420),r.user_id)[s(344)]();e=(null==n?void 0:n.display_name)||s(453)+s(410)}const i={};return i[s(340)+"e"]=!0,i[s(506)+"ar"]=!0,i[s(485)]=r.id,i[s(370)+s(502)]=n,i[s(395)+s(363)]=e,i[s(317)+s(511)]=100,i.reason=l[s(414)],i}}const w=(null==c?void 0:c[s(326)])||l[s(400)];let z;if(null==c?void 0:c.customColors)z=c[s(435)+"rs"];else if(w===l[s(415)]){const t=r[s(492)](t=>t.id===s(320));if(t){if(!l[s(371)](l[s(341)],l[s(341)]))return{data:null,error:new _0x30366b(_0x41eb1a[s(397)]||"Invalid PG"+s(460))};{const r={};r[s(482)]=t[s(482)],r.black=t[s(403)],z=r}}}const x=await n(o,i,a,w,z);if(x[s(506)+"ar"]){if(l[s(386)](s(393),"kLDzM")){const t={};return t[s(340)+"e"]=!1,t.isTooSimilar=!0,t[s(485)]=x[s(331)+"sualizationId"],t[s(370)+s(502)]=x.ownedByCurrentUser,t["ownerDispl"+s(363)]=x[s(395)+"ayName"],t.colorSimilarity=x[s(317)+s(511)],t[s(451)]=x[s(451)],t[s(355)+s(448)]=x[s(355)+s(448)],t[s(367)+s(449)]=x["isIntrinsi"+s(449)],t["isIntrinsi"+s(468)]=x[s(367)+s(468)],t[s(354)+s(376)]=x[s(354)+s(376)],t[s(369)+s(458)]=x[s(369)+s(458)],t["matchedPaletteSimila"+s(368)]=x[s(369)+s(412)+s(368)],t}{_0x4a5507[s(397)](s(432)+s(353)+s(315),_0x1632fd);const t={};return t[s(340)+"e"]=!1,t[s(506)+"ar"]=!1,t}}let B;if(z){if(l[s(429)](l[s(407)],l[s(407)])){const t={};return t[s(340)+"e"]=!1,t[s(506)+"ar"]=!0,t[s(485)]=_0x11f81f[s(331)+s(337)+s(335)],t["ownedByCur"+s(502)]=_0x36fbaa[s(370)+s(502)],t[s(395)+s(363)]=_0x4f16ac[s(395)+s(363)],t["colorSimil"+s(511)]=_0x4e15ce[s(317)+s(511)],t[s(451)]=_0x126d64.reason,t["existingCo"+s(448)]=_0x515c1e[s(355)+s(448)],t[s(367)+"cPalette"]=_0x4cd2f2[s(367)+s(449)],t["isIntrinsi"+s(468)]=_0x1a7267[s(367)+"cGame"],t[s(354)+"eCard"]=_0x389ec4[s(354)+"eCard"],t[s(369)+s(458)]=_0x8efd72[s(369)+s(458)],t.matchedPaletteSimilarity=_0x2312bf[s(369)+s(412)+s(368)],t}B=l.sApXU(e,z)||void 0}const g={};return g[s(340)+"e"]=!1,g[s(506)+"ar"]=!1,g[s(339)+"tteId"]=B,g["colorSimil"+s(511)]=x[s(317)+"arity"],g[s(367)+s(449)]=x.isIntrinsicPalette,g[s(367)+"cGame"]=x[s(367)+"cGame"],g.matchedGameCard=x.matchedGameCard,g[s(369)+s(458)]=x[s(369)+"etteId"],g[s(369)+s(412)+s(368)]=x[s(369)+s(412)+s(368)],g}catch(C){const t={};return t[s(340)+"e"]=!1,t[s(506)+"ar"]=!1,t}}async function C(r,n,e,c,s,f){const C=u,y={YIXNs:function(t,r){return t(r)},JuyNK:C(351)+C(510)+"ropriate c"+C(491),wCrjw:C(487)+C(460),voeRX:function(t,r,n,e,o){return t(r,n,e,o)},epeOi:C(381)+C(323)+C(489)+C(328)+C(413)+C(402)+C(361)+C(324)+C(512),dfHaK:"another co"+C(410),jBMfB:"visualizat"+C(321),WntWU:C(424),Jnihj:C(476)+C(405)};try{const u=y[C(517)](o,n);if(!u[C(394)])return{data:null,error:new Error(u[C(397)]||C(478)+C(422))};const w=await i(n);if(!w[C(446)])return{data:null,error:new Error(w[C(451)]||y[C(312)])};const z=a(s);if(!z[C(394)])return{data:null,error:new Error(z.error||y[C(479)])};const x=await y[C(372)](l,r,s,e[C(333)],f);if(x[C(340)+"e"]){const t=x[C(370)+"rentUser"]?C(322)+C(440)+C(508)+C(474)+"llery":C(322)+C(440)+C(379)+" "+(x.ownerDisplayName||C(507)+C(410));return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:x[C(370)+"rentUser"],ownerDisplayName:x[C(395)+"ayName"],colorSimilarity:100}}if(x[C(506)+"ar"]){const t=x.ownedByCurrentUser?y[C(441)]:C(374)+Math.round(x["colorSimil"+C(511)]||30)+(C(345)+C(377)+C(498))+(x[C(395)+C(363)]||y[C(348)]);return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:x[C(370)+C(502)],ownerDisplayName:x[C(395)+"ayName"],colorSimilarity:x[C(317)+C(511)],reason:x[C(451)]}}const B={...f};B[C(339)+C(462)]=x[C(339)+C(462)];const g=B,D=r+"/"+Date[C(343)]()+"-"+n[C(347)](/[^a-z0-9]/gi,"-")[C(384)+"e"]()+C(467),{error:L}=await t[C(438)][C(408)](y[C(515)])[C(469)](D,c,{contentType:y.WntWU,upsert:!1});if(L)throw new Error(C(430)+"upload image: "+L[C(428)]);const{data:d}=t[C(438)].from(y[C(515)]).getPublicUrl(D),v={};v[C(482)]=e[C(333)].white,v.black=e[C(333)][C(403)],v[C(375)]=e[C(333)][C(375)],v.date=e.gameData[C(472)],v[C(311)]=e[C(333)][C(311)],v[C(443)]=e.gameData[C(443)],v[C(433)]=e[C(333)][C(433)],v[C(336)]=e[C(336)],v.totalMoves=e[C(466)],v[C(480)+C(427)]=g;const h=v,q={};q[C(420)]=r,q[C(475)]=n,q[C(443)]=s||null,q[C(387)]=h,q[C(505)]=d[C(334)];const{data:m,error:A}=await t[C(408)](y[C(473)])[C(516)](q)[C(496)]()[C(344)]();if(A)throw await t[C(438)][C(408)](C(480)+C(321))[C(500)]([D]),new Error("Failed to "+C(513)+C(481)+A.message);const M={};return M[C(477)]=m,M[C(397)]=null,M}catch(w){const t={};return t[C(477)]=null,t[C(397)]=w,t}}async function y(r){const n=u,e={};e[n(349)]=function(t,r){return t===r},e[n(406)]=n(431),e[n(416)]=n(346),e.kRKNZ=function(t,r){return t!==r},e[n(483)]=n(452);const o=e;try{if(o[n(349)](o[n(406)],o.cjgmY)){const e={ascending:!1},{data:i,error:a}=await t[n(408)](n(476)+"alizations")[n(496)]("*").eq(n(420),r)[n(425)](o[n(416)],e);if(a){if(o.kRKNZ("ySqRI",o.umXwt)){const t={};return t[n(477)]=null,t[n(397)]=_0x445946,t}throw new Error(n(430)+n(382)+n(405)+": "+a.message)}const c={};return c.data=i||[],c.error=null,c}{const t={};return t[n(477)]=null,t.error=_0x55ff88,t}}catch(i){const t={data:[]};return t[n(397)]=i,t}}function w(){const t=["Dg90ywXnB3zLCW","lNbUzW","y0DHBwu","DxbSB2fK","AgvJAZO","DhjPBq","zgf0zq","sM5PAgO","Aw4GEw91CIbNyq","DgL0Bgu","C2f2zwrFDMLZDq","zgf0yq","sw52ywXPzcb0Aq","D0nYANC","DMLZDwfSAxPHDa","BgL6yxrPB246ia","D2HPDgu","Dw1yD3q","C3bSAxq","zxHPC3rPBMDjza","rxHHy3qGzhvWBa","sw52ywXPzcbqrW","Bw9KzxjU","BgfYihzPC3vHBa","E30Uy29UC3rYDq","B250zw50","zMLUza","CM4GDgHPCYiPka","zgvSzxrLihzPCW","zgvSzxrL","C2vSzwn0","AgThz24","BIbIEsa","y29UC3rYDwn0BW","CMvTB3zL","Bg9N","CMvUDfvZzxi","zcWGCgDUlcbNyq","y3vYCMvUDe1VDG","Aw1Hz2vFCgf0Aa","AxnuB29tAw1PBa","yw5VDgHLCIbJBW","CYbHBhjLywr5ia","CgLLy2vuExbL","ywLUCYbPBMfWCa","yxjPDhK","zw5LC3m","C2f2zsb2Axn1yq","CMv0DxjUicHMDq","AKjnzKi","Aw5Zzxj0","wuLytNm","Aw9Uig5VDcbMBW","CMvZDwX0","sNv5tKS","ywXS","mZK5ntyXtMfLshru","y2f0zxm6","C2vHCMnO","y29SB3jtAw1PBa","BgnXC0m","Dg9tDhjPBMC","y3vZDg9T","Aw9UCW","vgHPCYb2Axn1yq","ihzLCNKGC2LTAq","igzVCIb1BMLXDq","zgLZCgXHEv9Uyq","CgfSzxr0zuLK","DgfIBgu","AxPHDgLVBIaTia","rNjZt2m","zgfYA01Vzgu","zxHPC3rPBMDwAq","tfL6r2i","z2fTzurHDge","ChvIBgLJvxjS","BKLK","yM9HCMq","C3vHBgL6yxrPBW","s3vdshi","BgLUA2vKugfSzq","AxneDxbSAwnHDa","z3LAquq","vM9Avgu","BM93","C2LUz2XL","jsbZAw1PBgfYia","y3jLyxrLzf9HDa","CMvWBgfJzq","zgziyuS","D1Hrt1m","AwqSihvZzxjFAq","vgL0BguGy29UDa","yMLUza","A2LUzYbKDxbSAq","Bwf0y2HLzeDHBq","zxHPC3rPBMDdBW","zxrcBLy","u1rJqwK","kcGOlISPkYKRkq","mJq0nZe1CK5Ytu90","twLVqKG","Dca4ignVBg9YCW","CNb4EfC","yxLoyw1L","q0Lly2i","BgvUz3rO","Cgf0Ag5HBwu","AxnjBNrYAw5ZAq","CML0Eq","Bwf0y2HLzfbHBa","B3DUzwrcEun1CG","r1ros0S","DM9LuLG","Devkt2W","vgHPCYbPCYa","zxzLBNq","zunHCMq","Dg8Gysb2AxnPBW","Dhz4rMO","CYbVD25LzcbIEq","C3rYAw5NAwz5","ww91igHHDMuGyq","zMv0y2GGDMLZDq","ChjVDg90ExbL","Dg9mB3DLCKnHCW","rxjYB3iGAw4Gza","D3rLqLC","z2fTzv9KyxrH","AgLqqM4","quTLD0S","CgLLy2vdB2XVCG","mtuXnZm2mdbzrg5pyuK","vMLZDwfSAxPHDa","A0XeEK0","C3vJy2vZCW","B3DUzxjeAxnWBa","ChjVzMLSzxm","zxjYB3i","y29Kzq","mZyYotu2svfOELfJ","BxbLvfe","D0H5y0W","BMCGyxqGBgvHCW","yMXHy2S","s1zZq0q","ywXPEMf0Aw9UCW","y2PNBvK","EKXzvxG","zNjVBq","mteYmteZnJfeufrLtvK","BgXLy3rVCG","qLrVrNu","zxr0zvnPBwLSyq","Dhj5ignOyw5NAq","BxPdDu8","DLDJwhy","CNHNB04","CLHxDLe","C29YDa","AM9PBG","DxnLCL9Pza","vLnes1G","DgXL","yMjLCLi","Aw1Hz2uVCg5N","B3jKzxi","mKjuCMLSvq","Aw9Uu3rHDgu","BwvZC2fNzq","seTyDMO","rMfPBgvKihrVia","BMTyzve","rxjYB3iGy2HLyW","Bw92zxm","mte2nJK2mdHmC2TbA0e","y3vZDg9Tq29SBW","mtqWsejfCKXT","qNzJCLu","C3rVCMfNzq","Bg9JA2vKugLLyW","BgL6yxrPB24GAq","zxbLt2K","yxjL","CgDU","nJmZodi1mhHdy3HMvW","nKvkq0D3wq","C2fMzq","yxbWBhK","Bg9YCW","y1bHBgv0Dgu","Aw5MBW","CMvHC29U","EvnXuKK","qw5VDgHLCIbJBW","y29UC29Szq","AvnYEuK","DhjHy2u","zwvqEMK","zxr0zuLK","qND5AM4","tIbKyxrH","DwfSAxPHDgLVBG","DhrLswq","x19WCM90B19F","rePgqNO","DvLADue"];return(w=function(){return t})()}async function z(r,n){const e=u,o={};o[e(318)]=function(t,r){return t+r},o.svGzv=e(378),o[e(404)]=e(464);const i=o;try{const o=new URL(n)[e(366)][e(484)]("/"),a=o.findIndex(t=>t==="visualizat"+e(321)),c=o.slice(i.lcqsC(a,1))[e(419)]("/");c&&await t[e(438)][e(408)](e(480)+e(321)).remove([c]);const{error:s}=await t[e(408)](e(476)+e(405))[e(495)]().eq("id",r);if(s){if(i.svGzv===i[e(404)]){const t=_0x3668cd.apply(_0x19555c,arguments);return _0x14d8ff=null,t}throw new Error("Failed to "+e(494)+e(461)+": "+s[e(428)])}const u={};return u[e(397)]=null,u}catch(a){const t={};return t.error=a,t}}s(void 0,function(){const t=u,r={LYzGb:function(t,r){return t(r)},VoZTe:t(514)+"nction() ",hkGgn:function(t){return t()},bberR:t(501),wHycL:t(450),etBnV:"error",tEJOl:"exception",CIKcb:t(327),GKEFi:t(456)},n=r[t(497)](function(){const n=t;let e;try{e=r[n(332)](Function,r[n(342)]+(n(490)+'ctor("retu')+n(493)+" ));")()}catch(o){e=window}return e}),e=n[t(454)]=n[t(454)]||{},o=[r[t(423)],"warn",r[t(401)],r[t(356)],r[t(373)],r[t(364)],r.GKEFi];for(let i=0;i<o[t(365)];i++){const r=s.constructor[t(383)][t(352)](s),n=o[i],a=e[n]||r;r[t(463)]=s[t(352)](s),r[t(319)]=a[t(319)][t(352)](a),e[n]=r}})();export{l as checkDuplicateVisualization,z as deleteVisualization,y as getUserVisualizations,C as saveVisualization};
