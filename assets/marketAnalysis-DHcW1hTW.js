const n="/**\n * Market Analysis - Technical analysis utilities for tick data\n */\n\nimport { Tick } from './types';\n\nexport function calculateMomentum(ticks: Tick[], window: number): number {\n  const effectiveWindow = Math.min(window, ticks.length);\n  if (effectiveWindow < 2) return 0;\n  \n  const recentTicks = ticks.slice(-effectiveWindow);\n  const startPrice = recentTicks[0].price;\n  const endPrice = recentTicks[recentTicks.length - 1].price;\n  \n  const change = (endPrice - startPrice) / startPrice;\n  return Math.max(-1, Math.min(1, change * 100));\n}\n\nexport function calculateVolatility(ticks: Tick[], window: number): number {\n  const effectiveWindow = Math.min(window, ticks.length);\n  if (effectiveWindow < 2) return 0;\n  \n  const recentTicks = ticks.slice(-effectiveWindow);\n  const returns: number[] = [];\n  \n  for (let i = 1; i < recentTicks.length; i++) {\n    const ret = (recentTicks[i].price - recentTicks[i-1].price) / recentTicks[i-1].price;\n    returns.push(ret);\n  }\n  \n  const mean = returns.reduce((a, b) => a + b, 0) / returns.length;\n  const variance = returns.reduce((a, r) => a + Math.pow(r - mean, 2), 0) / returns.length;\n  \n  return Math.sqrt(variance);\n}\n\nexport function detectMicroTrend(ticks: Tick[]): number {\n  if (ticks.length < 5) return 0;\n  \n  const last5 = ticks.slice(-5);\n  let upMoves = 0;\n  let downMoves = 0;\n  \n  for (let i = 1; i < last5.length; i++) {\n    if (last5[i].price > last5[i-1].price) upMoves++;\n    else if (last5[i].price < last5[i-1].price) downMoves++;\n  }\n  \n  return (upMoves - downMoves) / 4;\n}\n\nexport function analyzeVolumePattern(ticks: Tick[]): number {\n  if (ticks.length < 10) return 0;\n  \n  const last10 = ticks.slice(-10);\n  const avgVolume = last10.reduce((a, t) => a + t.volume, 0) / 10;\n  const lastVolume = last10[last10.length - 1].volume;\n  const lastPriceChange = last10[last10.length - 1].price - last10[last10.length - 2].price;\n  \n  if (lastVolume > avgVolume * 1.5) {\n    return lastPriceChange > 0 ? 0.5 : -0.5;\n  }\n  \n  return 0;\n}\n\nexport function getVolatilityState(volatility: number): 'low' | 'medium' | 'high' | 'extreme' {\n  if (volatility < 0.0005) return 'low';\n  if (volatility < 0.002) return 'medium';\n  if (volatility < 0.005) return 'high';\n  return 'extreme';\n}\n";export{n as default};
