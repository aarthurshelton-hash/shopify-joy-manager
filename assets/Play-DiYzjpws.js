import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as B,ai as D,y as q,bF as L,bG as S,b6 as A,ae as H,bH as P,ah as I,bI as G,B as K,bJ as T,bK as W,bL as E,bM as _,bN as Y,bO as U,bP as O,bQ as J,bR as R,bS as F,bT as X,bU as V,bV as Z,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as Be,av as De,aw as qe,c8 as Le,aM as Se,c9 as Ae,H as He,P as Pe,ca as Ie,b3 as Ge,bs as Ke,be as Te,cb as We,aP as Ee,cc as _e,d as Ye,b2 as Ue,a9 as Oe,cd as Je,ce as Re,cf as Fe,al as Xe,au as Ve}from"./index-CN5tH3TC.js";import{L as Ze}from"./LiveColorLegend-D28Nxh1o.js";import{T as Qe}from"./trending-down-Bj8-L4XM.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-DMMvA8ul.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=ht,t=mt();for(;;)try{if(799745===-parseInt(e(413))/1+parseInt(e(358))/2+-parseInt(e(381))/3*(parseInt(e(377))/4)+parseInt(e(410))/5+-parseInt(e(422))/6*(parseInt(e(426))/7)+-parseInt(e(353))/8+parseInt(e(432))/9*(parseInt(e(393))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ht(388)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ht;return ut[e(366)]()[e(364)]("(((.+)+)+)+$").toString()[e(363)+"r"](ut)[e(364)](e(354)+"+$")});ut();const dt=function(){const e=ht,t={};t[e(397)]=e(362),t[e(375)]=function(e,t){return e+t},t[e(367)]=e(356)+e(361);const n=t;let s=!0;return function(t,r){const a=e,i={xvMOa:function(e,t){return e(t)},xcHxe:function(e,t){return n.wCITP(e,t)},AdRVt:n[a(367)]},o=s?function(){const e=a;if(e(362)===n.ZeMoX){if(r){const n=r[e(388)](t,arguments);return r=null,n}}else{const t=i[e(423)](_0x583a09,i.xcHxe(i[e(418)]+(e(387)+'ctor("return this")( )'),");"));_0x2d7217=t()}}:function(){};return s=!1,o}}();function mt(){const e=["zsbMAwz0Es1TBW","AxneCMf3","AvHYwey","wMvnB1G","DMuGCNvSzs4","AwvUDe1HDgvYAq","ueTdAxC","rhjHDYbIEsb0Aa","zMvU","BNrFBwf0zxjPyq","rhjHDW","sxnmCvC","AxntDgfSzw1HDa","vgPiAKS","Dufdr0W","sw5ZDwzMAwnPzq","mJG4mdm1AMrrueP5","DgfIBgu","yKzsrhK","mtq0ndK4n2njAgLkBW","CMvWzxrPDgLVBG","yMLUza","Bw92zxmGyxzHAq","sfrfq3i","qwrsvNq","Eerwu0C","zfjLCgv0AxrPBW","C2HVCNrnzxnZyq","ndyYmde4CeHzwNL3","Ehznt2e","r2fTzsbKCMf3BG","DgHYzwvMB2XKxW","mtrVr0HNzwy","x19WCM90B19F","r0Tcy3G","whbMt28","zxHJzxb0Aw9U","ChjVDg90ExbL","mtuZnZCWntHbr0rxz0e","rgDswfK","ndeYmJC0nfvMBfL3uq","kcGOlISPkYKRkq","Aw5MBW","CMv0DxjUicHMDq","y29UC29Szq","mtKWnduZmffArxDXBa","Dw5RBM93BG","rhjHDYbIEsbPBG","BMn0Aw9UkcKG","DhjsC2q","y29UC3rYDwn0BW","C2vHCMnO","vgvMzK4","Dg9tDhjPBMC","vwfzrgO","zMLMDhLFBw92zq","CMvLzM9SzcbYzq","u3rHBgvTyxrLiq","BwvZC2fNzq","ig1HDgvYAwfSlG","CMvHC29U","zvr0B0S","D0njvfa","s3jeELu","mJaXnZiYmgftAeDfsG","C3vMzMLJAwvUDa","uMvWzxrPDgLVBG","vgHYzwvMB2XKia","ovLMCe9HyG","D2fYBG","DKzsy3C","zxjYB3i","ie5VigXLz2fSia","y1Hdz3O","E30Uy29UC3rYDq","yxbWBhK","t2LTDgC","DvbkwLK","BNqGtwf0zxjPyq","su9HwuK","mJbhCxLzt2O"];return(mt=function(){return e})()}function xt(e){const t=ht,n={IOaYI:t(354)+"+$",XpfOo:"insufficie"+t(403)+"l",uPJZY:t(360)+t(378)+t(372),NHcIY:function(e,t){return e!==t},TjHjK:t(376),tqyqh:"stalemate",Oimtg:"Stalemate!",bFRDy:"ALvHW",kyRsu:function(e,t,n){return e(t,n)},zQikL:function(e,t){return e>=t},osxyM:t(401)+t(394)+t(398)};if(e[t(406)+"e"]()){if(n.NHcIY(n[t(407)],t(376)))return _0x104f21[t(366)]()[t(364)](SqTLFv[t(392)])[t(366)]()[t(363)+"r"](_0x521fa3).search(SqTLFv[t(392)]);{const e={};return e[t(373)]=n.tqyqh,e[t(371)]=t(370)+t(385)+t(416)+"lable.",e[t(421)+"ge"]=n[t(389)],e}}if(e["isThreefol"+t(420)+"n"]()){if(t(374)!==t(352)){const e={};return e.reason=t(425)+t(414),e[t(371)]=t(401)+t(369)+"petition.",e[t(421)+"ge"]=t(380)+t(379),e}{const e={};return e.reason=n[t(429)],e[t(371)]=n[t(390)],e[t(421)+"ge"]=t(409)+"nt Material",e}}if(e["isInsuffic"+t(399)+"al"]()){if(n[t(412)]===t(428)){const e=_0x293aa2?function(){if(_0x538a5f){const e=_0x121485[t(388)](_0x343bf8,arguments);return _0x116eeb=null,e}}:function(){};return _0x2425e1=!1,e}{const e={};return e[t(373)]=n[t(429)],e.message=n[t(390)],e[t(421)+"ge"]=t(409)+t(391)+"l",e}}const s=e[t(402)](),r=n.kyRsu(parseInt,s.split(" ")[4],10);if(n.zQikL(r,100)){const e={};return e[t(373)]=t(368)+"_rule",e[t(371)]=n.osxyM,e.shortMessage="50-Move Rule",e}const a={};return a[t(373)]=t(359),a[t(371)]=t(424)+"!",a[t(421)+"ge"]=t(404),a}function ht(e,t){e-=352;const n=mt();let s=n[e];if(void 0===ht.DroFyl){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ht.ZXAENH=r,ht.Sepkch={},ht.DroFyl=!0}const a=e+n[0],i=ht.Sepkch[a];if(i)s=i;else{const e=function(e){this.AbZAdp=e,this.yxdQkw=[1,0,0],this.UqdNpW=function(){return"newState"},this.ZTOtFr="\\w+ *\\(\\) *{\\w+ *",this.fngDMr="['|\"].+['|\"];? *}"};e.prototype.hishxU=function(){const e=new RegExp(this.ZTOtFr+this.fngDMr).test(this.UqdNpW.toString())?--this.yxdQkw[1]:--this.yxdQkw[0];return this.JNDAJW(e)},e.prototype.JNDAJW=function(e){return Boolean(~e)?this.YxtzLN(this.AbZAdp):e},e.prototype.YxtzLN=function(e){for(let t=0,n=this.yxdQkw.length;t<n;t++)this.yxdQkw.push(Math.round(Math.random())),n=this.yxdQkw.length;return e(this.yxdQkw[0])},new e(ht).hishxU(),s=ht.ZXAENH(s),ht.Sepkch[a]=s}return s}function pt(e){const t=ht;return xt(e)[t(371)]}dt(void 0,function(){const e=ht,t={cXCgz:function(e,t){return e(t)},IsLqW:function(e,t){return e+t},vFRcw:e(387)+'ctor("return this")( )',TeffN:function(e){return e()},uACGL:"log",iXrXF:e(382),HTECr:e(384),xDVSG:e(411),PKCiw:function(e,t){return e<t}};let n;try{const s=t[e(386)](Function,t[e(405)](e(356)+e(361)+t[e(383)],");"));n=t[e(365)](s)}catch(a){n=window}const s=n[e(357)]=n[e(357)]||{},r=[t[e(408)],t[e(396)],e(355),t[e(417)],e(430),t[e(419)],"trace"];for(let i=0;t[e(400)](i,r.length);i++){const t=dt[e(363)+"r"][e(431)][e(415)](dt),n=r[i],a=s[n]||t;t[e(427)]=dt.bind(dt),t[e(366)]=a[e(366)][e(415)](a),s[n]=t}})(),function(){const e=vt,t=yt();for(;;)try{if(563890===-parseInt(e(344))/1*(parseInt(e(262))/2)+parseInt(e(318))/3+-parseInt(e(273))/4+parseInt(e(287))/5+parseInt(e(329))/6+parseInt(e(292))/7+parseInt(e(336))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const ft=function(){const e=vt,t={};t.MNDVs=e(277)+"+$",t[e(350)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e,i={yIrqV:n[a(322)],TlPuo:function(e,t){return n[a(350)](e,t)}},o=s?function(){const e=a,n={};n[e(357)]=i.yIrqV;const s=n;if(i.TlPuo(e(361),"ftujk"))return _0x216458[e(313)]()[e(297)](s[e(357)]).toString().constructor(_0x92bb9a).search(e(277)+"+$");if(r){const n=r[e(284)](t,arguments);return r=null,n}}:function(){};return s=!1,o}}()(void 0,function(){const e=vt,t={};t.nhswE=e(277)+"+$";const n=t;return ft[e(313)]()[e(297)](n[e(338)])[e(313)]()[e(346)+"r"](ft)[e(297)](n[e(338)])});ft();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[vt(284)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function vt(e,t){e-=260;const n=yt();let s=n[e];if(void 0===vt.bvdfqg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};vt.RXBPus=r,vt.oBkbwF={},vt.bvdfqg=!0}const a=e+n[0],i=vt.oBkbwF[a];if(i)s=i;else{const e=function(e){this.EKQhQV=e,this.QQodjL=[1,0,0],this.LSxmYG=function(){return"newState"},this.HMElAT="\\w+ *\\(\\) *{\\w+ *",this.ofogrz="['|\"].+['|\"];? *}"};e.prototype.yZmBMe=function(){const e=new RegExp(this.HMElAT+this.ofogrz).test(this.LSxmYG.toString())?--this.QQodjL[1]:--this.QQodjL[0];return this.hXGdcU(e)},e.prototype.hXGdcU=function(e){return Boolean(~e)?this.hTplxG(this.EKQhQV):e},e.prototype.hTplxG=function(e){for(let t=0,n=this.QQodjL.length;t<n;t++)this.QQodjL.push(Math.round(Math.random())),n=this.QQodjL.length;return e(this.QQodjL[0])},new e(vt).yZmBMe(),s=vt.RXBPus(s),vt.oBkbwF[a]=s}return s}gt(void 0,function(){const e=vt,t={GEflZ:"Kxqxk",PLQjq:function(e,t){return e(t)},KQvKO:function(e,t){return e+t},kcqfs:"exception",lZial:function(e,t){return e<t}},n=function(){const e=vt;let n;try{if(t[e(317)]!==t.GEflZ){const t=_0x25aaed?function(){if(_0xf7b1c2){const t=_0x52af2d[e(284)](_0x1ae1a9,arguments);return _0x300235=null,t}}:function(){};return _0x126969=!1,t}n=t[e(334)](Function,t[e(294)](e(363)+e(266),"{}.constru"+e(319)+e(265)+" )")+");")()}catch(s){n=window}return n}(),s=n.console=n.console||{},r=[e(264),e(359),e(377),e(308),t[e(290)],e(288),e(348)];for(let a=0;t[e(267)](a,r[e(335)]);a++){const t=gt[e(346)+"r"].prototype[e(342)](gt),n=r[a],i=s[n]||t;t[e(299)]=gt[e(342)](gt),t[e(313)]=i[e(313)][e(342)](i),s[n]=t}})();const bt=(e=!0,n=.5)=>{const s=vt,r={ytzCX:s(293)+s(276)+s(272),TWKtx:function(e){return e()},AwehR:function(e,t){return e+t},EkBkA:function(e,t){return e+t},ArQkz:function(e){return e()},ozIBn:function(e,t){return e*t},vUqqq:function(e,t){return e<t},oEGaZ:s(326),HsxoO:function(e,t,n,s,r,a){return e(t,n,s,r,a)},HkTFk:s(270),oCSrM:function(e,t,n){return e(t,n)},NjlLH:function(e,t,n,s,r,a){return e(t,n,s,r,a)},jCdEL:s(354),CGIsN:s(304),aqjhG:function(e,t,n){return e(t,n)},edSal:s(296),kNbjL:function(e,t,n){return e(t,n)},RiVYV:function(e,t,n){return e(t,n)},KHMRK:s(311),YBOge:function(e,t,n,s,r,a){return e(t,n,s,r,a)},OBzQk:s(298),xYQZN:s(302),mtufM:function(e,t,n){return e(t,n)},jRhEh:"draw",hnmqB:function(e,t,n,s,r,a){return e(t,n,s,r,a)},LJIGW:function(e,t,n){return e(t,n)},gADxB:function(e,t,n,s,r,a){return e(t,n,s,r,a)},KIImP:"sawtooth",UEXSw:function(e,t){return e||t},RMyow:function(e,t){return e-t},HhWdi:function(e,t){return e*t},XRTBa:s(332),XxQgo:s(358),fcJwY:function(e,t){return e(t)},bxLWB:function(e,t,n){return e(t,n)},idfAl:function(e,t,n){return e(t,n)}},a={};a[s(360)]=null,a[s(320)]=null;const i=r[s(279)](t.useRef,a),o=t.useCallback(()=>{const e=s;if(!i.current.context)try{const t=new(window[e(368)+"xt"]||window["webkitAudi"+e(376)]),s=t[e(289)]();s.connect(t[e(323)+"n"]),s[e(283)][e(286)]=n;const r={};r[e(360)]=t,r[e(320)]=s,i[e(312)]=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;i[e(312)].gainNode&&(i.current[e(320)].gain[e(286)]=n)},[n]);const c=r[s(301)](t.useCallback,(t,n,a=s(296),c=.01,l=.1,u)=>{const d=s;if(!e)return;r[d(341)](o);const{context:m,gainNode:x}=i[d(312)];if(!m||!x)return;const h=m["createOsci"+d(274)](),p=m[d(289)]();h.type=a,h[d(280)][d(324)+d(374)](t,m.currentTime),u&&h[d(280)][d(316)+d(269)+"ueAtTime"](u,m.currentTime+n),p[d(283)][d(324)+"Time"](0,m[d(260)+"e"]),p[d(283)][d(353)+d(337)+"ime"](1,r[d(364)](m[d(260)+"e"],c)),p.gain["exponentia"+d(269)+d(327)](.01,m[d(260)+"e"]+n-l),p[d(283)][d(353)+"ToValueAtT"+d(315)](0,r.AwehR(m[d(260)+"e"],n)),h[d(282)](p),p[d(282)](x),h[d(303)](m[d(260)+"e"]),h.stop(r[d(343)](m[d(260)+"e"],n))},[e,o]),l=t.useCallback((t,n=1e3)=>{const a=s;if(!e)return;r.ArQkz(o);const{context:c,gainNode:l}=i[a(312)];if(!c||!l)return;const u=r[a(375)](c.sampleRate,t),d=c.createBuffer(1,u,c[a(340)]),m=d[a(351)+a(300)](0);for(let e=0;r.vUqqq(e,u);e++)m[e]=2*Math[a(271)]()-1;const x=c[a(261)+"erSource"]();x[a(365)]=d;const h=c["createBiqu"+a(373)]();h[a(321)]=a(332),h[a(280)][a(286)]=n;const p=c[a(289)]();p[a(283)][a(324)+a(374)](.3,c[a(260)+"e"]),p[a(283)][a(316)+a(269)+a(327)](.01,c[a(260)+"e"]+t),x[a(282)](h),h.connect(p),p.connect(l),x[a(303)](c[a(260)+"e"]),x[a(268)](c[a(260)+"e"]+t)},[e,o]),u=r[s(307)](t.useCallback,t=>{const n=s;if(e)switch(t){case r[n(355)]:r[n(369)](c,800,.08,"sine",.005,.05),c(400,.06,n(298),.005,.04);break;case r[n(275)]:r[n(371)](l,.12,2e3),r[n(356)](c,300,.1,r[n(306)],.005,.08),c(150,.15,n(296),.01,.1);break;case r.CGIsN:c(600,.06,"sine",.005,.04),r[n(366)](setTimeout,()=>c(700,.06,n(296),.005,.04),80);break;case n(295):c(880,.15,n(298),.01,.1),setTimeout(()=>c(1100,.12,"triangle",.01,.08),120);break;case"checkmate":c(880,.2,r[n(339)],.01,.15),setTimeout(()=>c(660,.2,n(296),.01,.15),150),r[n(333)](setTimeout,()=>c(440,.3,n(296),.01,.2),300),r[n(328)](setTimeout,()=>c(330,.4,n(296),.01,.3),500);break;case r[n(278)]:r.YBOge(c,523,.12,n(296),.01,.08),r[n(328)](setTimeout,()=>c(659,.12,n(296),.01,.08),100),r[n(328)](setTimeout,()=>c(784,.2,n(296),.01,.15),200);break;case n(310):r[n(369)](c,440,.15,r[n(362)],.01,.1),r[n(333)](setTimeout,()=>c(349,.25,n(298),.01,.2),150);break;case r[n(370)]:r[n(369)](c,523,.1,r[n(339)],.01,.08),r[n(352)](setTimeout,()=>c(659,.1,n(296),.01,.08),100),setTimeout(()=>c(784,.1,"sine",.01,.08),200),setTimeout(()=>c(1047,.3,n(296),.01,.25),300);break;case n(291):c(392,.2,n(296),.02,.15),r[n(328)](setTimeout,()=>c(349,.2,n(296),.02,.15),200),setTimeout(()=>c(330,.3,"sine",.02,.25),400),setTimeout(()=>c(262,.4,n(296),.02,.35),650);break;case r.jRhEh:r[n(345)](c,440,.15,n(296),.01,.1),setTimeout(()=>c(440,.15,n(296),.01,.1),180),r[n(372)](setTimeout,()=>c(523,.2,n(296),.01,.15),360);break;case n(349):c(200,.1,r[n(306)],.005,.08),r[n(347)](c,150,.08,r[n(309)],.005,.06)}},[e,c,l]);t.useEffect(()=>{const e=s;if(r[e(367)]===e(358))return()=>{const t=e;i[t(312)][t(360)]&&i.current.context.close()};{if(!_0xab18db)return;_0x273f19();const{context:t,gainNode:n}=_0x3b00aa[e(312)];if(r[e(281)](!t,!n))return;const s=r.ozIBn(t[e(340)],_0x1221b4),a=t[e(261)+"er"](1,s,t[e(340)]),i=a[e(351)+"Data"](0);for(let u=0;u<s;u++)i[u]=r[e(331)](r[e(263)](_0x1759ee.random(),2),1);const o=t[e(261)+e(285)]();o[e(365)]=a;const c=t["createBiqu"+e(373)]();c.type=r[e(325)],c.frequency[e(286)]=_0x5d7cad;const l=t[e(289)]();l.gain[e(324)+e(374)](.3,t[e(260)+"e"]),l.gain[e(316)+e(269)+e(327)](.01,r.AwehR(t[e(260)+"e"],_0x2f47f6)),o[e(282)](c),c[e(282)](l),l[e(282)](n),o[e(303)](t[e(260)+"e"]),o.stop(t[e(260)+"e"]+_0x3423c8)}},[]);const d={};return d[s(330)]=u,d.initAudio=o,d};function yt(){const e=["DhjHy2u","AwXSzwDHBa","q0TTCeG","z2v0q2HHBM5LBa","Bxr1zK0","BgLUzwfYuMfTCa","C3f1yxjL","B0vhyvO","tMPSteG","Dfn2y0W","BNLTsvi","D2fYBG","y29UDgv4Da","zNr1AMS","t0j6uwS","CMv0DxjUicHMDq","qxDLAfi","yNvMzMvY","yxfQAeC","whHrz28","qxvKAw9dB250zq","shn4B08","EfLrwK4","B0ntCK0","tePjr1C","ywrgAwX0zxi","vgLTzq","B3PjqM4","B0nVBNrLEhq","Aw5MBW","y3vYCMvUDfrPBq","y3jLyxrLqNvMzG","mZqXnJH5uM5psuS","sgHxzgK","Bg9N","CM4GDgHPCYiPka","BMn0Aw9UkcKG","BfPPywW","C3rVCa","BfjHBxbuB1zHBa","y2fWDhvYzq","CMfUzg9T","ChbVCNrLza","ndq3ndC1mKTbC05Wsq","BgXHDg9Y","sgTurMS","qvbjig5VDcbZDq","kcGOlISPkYKRkq","s0HnuKS","zMnkD1K","zNjLCxvLBMn5","vuvyu3C","y29UBMvJDa","z2fPBG","yxbWBhK","zxjtB3vYy2u","DMfSDwu","mtu0ntCWtwPhC1jp","DgfIBgu","y3jLyxrLr2fPBG","A2nXzNm","zgvMzwf0","ndKZntu0nM5oyMrIvq","v2vIief1zgLVia","s1f2s08","y2HLy2S","C2LUzq","C2vHCMnO","DhjPyw5NBgu","x19WCM90B19F","rgf0yq","yNHmv0i","DMLJDg9YEq","C3rHCNq","y2fZDgXL","Exr6q1G","AKnKruW","AwrMqwW","zxjYB3i","s0LjBva","z2fTzuvUza","z2fTzvn0yxj0","y3vYCMvUDa","Dg9tDhjPBMC","uLbeC0S","Aw1L","zxHWB25LBNrPyq","r0vMBfO","mty0mJyWmNzuBurjwa","y3rVCIGICMv0Dq","z2fPBK5Vzgu","DhLWzq","tu5evNm","zgvZDgLUyxrPBW","C2v0vMfSDwvbDa","wfjuqMe","Bw92zq","DwvbDfrPBwu","uMLwwvy","mJe3ndq2nMjIrhbMzG","CgXHEvnVDw5K","uK15B3C","Bg93CgfZCW","A05IAKW","ueXrANe","BgvUz3rO","mZaYnJu2ofj5tfDHyq","vg9wywX1zuf0va","BMHZD0u","zwrtywW","C2fTCgXLuMf0zq","vfDlDhG","yMLUza","rwTcA0e","mJbyA2v0ALy","Ag5TCui","y29UC3rYDwn0BW","z0feEei"];return(yt=function(){return e})()}const wt=Nt;!function(){const e=Nt,t=Ct();for(;;)try{if(148867===parseInt(e(147))/1*(-parseInt(e(145))/2)+parseInt(e(148))/3*(parseInt(e(143))/4)+-parseInt(e(130))/5*(parseInt(e(141))/6)+parseInt(e(116))/7+parseInt(e(126))/8+parseInt(e(118))/9+-parseInt(e(111))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){const e=Nt,t={};t[e(129)]=e(137);const n=t;let s=!0;return function(t,r){const a=e;if(n[a(129)]===a(135)){const e=_0x18ce0d[a(138)](_0x12e603,arguments);return _0x340391=null,e}{const e=s?function(){if(r){const e=r[a(138)](t,arguments);return r=null,e}}:function(){};return s=!1,e}}}()(void 0,function(){const e=Nt,t={};t[e(113)]=e(132)+"+$";const n=t;return jt[e(117)]()[e(149)](n[e(113)])[e(117)]()[e(120)+"r"](jt)[e(149)](e(132)+"+$")});function Ct(){const e=["rvzlqNi","CMv0DxjUicHMDq","Aw5MBW","mJq3mta2mg1vEhfkua","zc1Zzxr0Aw5NCW","sMn2reK","ChjVDg90ExbL","u1zKq1K","mtG5ndGWouP5y2T4Aa","Dg9tDhjPBMC","nZy2ohrJvgfmqq","y2HLC3mTC291BG","y29UC3rYDwn0BW","BMn0Aw9UkcKG","ywHhAxm","zxHJzxb0Aw9U","B0rrzvm","x19WCM90B19F","mtG4mdq2nhnyB3DxwG","BMfTzq","BeTnrfy","AerAzK0","nZeWtw1Zvg1p","sg5NDuK","kcGOlISPkYKRkq","y29UC29Szq","DgfIBgu","EgzhD28","DhjHy2u","y2HOz0e","yxbWBhK","DhvTvvi","zxjYB3i","mti1mtzfqxrsuK0","yMLUza","mJHJuKnIr28","BgvUz3rO","nZrRqvzuAhe","zw5HyMXLza","mJCWn3rMAwzlDq","mtiYndyZwKvfshDQ","C2vHCMnO","CM4GDgHPCYiPka","Bg9N"];return(Ct=function(){return e})()}function Nt(e,t){e-=106;const n=Ct();let s=n[e];if(void 0===Nt.dyXUSu){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.JjNXYg=r,Nt.UFVhGC={},Nt.dyXUSu=!0}const a=e+n[0],i=Nt.UFVhGC[a];if(i)s=i;else{const e=function(e){this.JucGsr=e,this.xZSzkW=[1,0,0],this.Nvdilx=function(){return"newState"},this.eykhLE="\\w+ *\\(\\) *{\\w+ *",this.xpsZcR="['|\"].+['|\"];? *}"};e.prototype.ZVOfjA=function(){const e=new RegExp(this.eykhLE+this.xpsZcR).test(this.Nvdilx.toString())?--this.xZSzkW[1]:--this.xZSzkW[0];return this.vgmegV(e)},e.prototype.vgmegV=function(e){return Boolean(~e)?this.fLHFyK(this.JucGsr):e},e.prototype.fLHFyK=function(e){for(let t=0,n=this.xZSzkW.length;t<n;t++)this.xZSzkW.push(Math.round(Math.random())),n=this.xZSzkW.length;return e(this.xZSzkW[0])},new e(Nt).ZVOfjA(),s=Nt.JjNXYg(s),Nt.UFVhGC[a]=s}return s}jt();const kt=function(){const e=Nt,t={};t[e(139)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e;if(!n.tumUR(a(124),a(124))){const e=s?function(){if(r){const e=r[a(138)](t,arguments);return r=null,e}}:function(){};return s=!1,e}if(_0x29d33e){const e=_0x26d108[a(138)](_0xd7374a,arguments);return _0x3cb7fc=null,e}}}();kt(void 0,function(){const e=Nt,t={};t[e(131)]=function(e,t){return e+t},t[e(122)]=e(108),t.lKMDV="warn",t.TjKWp=e(140),t.SVdCY=e(123);const n=t;let s;try{s=Function(n.HnguI(n[e(131)](e(109)+e(121),'{}.constructor("retu'+e(106)+" )"),");"))()}catch(i){if(n.ahGis==n.ahGis)s=window;else if(_0x7ced0c){const t=_0x132023[e(138)](_0x36e79b,arguments);return _0x5e04d3=null,t}}const r=s.console=s[e(133)]||{},a=[e(107),n[e(128)],e(110),n.TjKWp,n[e(115)],e(134),e(136)];for(let o=0;o<a[e(144)];o++){const t=kt[e(120)+"r"][e(114)][e(142)](kt),n=a[o],s=r[n]||t;t[e(125)]=kt[e(142)](kt),t.toString=s.toString.bind(s),r[n]=t}})();const Mt={};Mt[wt(127)]=wt(119)+wt(112);const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(146)]}))}),Mt)),Bt=St;function Dt(){const e=["vM13B0S","r3rbBKi","z3D0tKy","ywXS","BxDeAfK","tff0tKm","Bw92zxmT","q3vYELy","z2fTzs0","D2HPDgu","AgfSBgvUz2vFyW","BIbPBIb0BYbQBW","D2HPDgvFD2LUCW","CKLK","svHxBge","rMfPBgvKihrVia","DgfIBgu","zefNAve","zYbMB3iGB3bWBW","DKXczei","v2HPDguGD2LUCW","tMrKtKy","u0r1uKq","tvbLyMO","CMvZDwX0","BIb5B3vYig93BG","tNHTqxe","ywrK","zxjFAwq","veDTC2W","y3jLyxrLigDHBq","y3jLyxrLzf9HDa","C3rHCNrLzf9HDa","Dw50Aw1Lza","sfzeEvK","shHowLm","nJaYnduXEMnwtuX5","wgfry04","CMfWAwrFmtu","yMXHy2S","DxbKyxrLievmtW","DgLTzv9JB250CG","zNvpEfC","z2v0qxzHAwXHyG","Dg9vChbLCKnHCW","D2fYBG","y3vYCMvUDezLBG","svH3ywK","DgLTzunVBNrYBW","yxnJzw5KAw5N","y2HHBgXLBMDLxW","DhjHy2u","zxHJzxb0Aw9U","AM9PBIbNyw1L","rhjHDYbVzMzLCG","ihbSyxLPBMCGyq","r2fIufu","nJm1ndu1oenvtwDYCa","zwf0zsbHigDHBq","z2fTzv9Pza","ndb4CNzAs24","z2fTzq","vu92sLq","sfnYAw4","wgfjBgC","ihjHDgLUz3m6","B1vdv3m","Bw92zv9JB3vUDa","Bw92zxm","txHczLm","AwrUsuu","C3rHDhvZ","B3jKzxi","DhvYBG","Aw5MBW","C3f1yxjL","re54su0","qMXHy2SGD2LUCW","DhrL","Dg9tDhjPBMC","DePVy1a","svzPuK8","wvryqwW","C2fU","y2HLy2S","CwnMAfK","Awq9zxeU","AgnUzvu","yMXHy2TqywXLDa","z2fTzv9Pzd1LCq","yMLUza","CYbcBgfJAY4","DxnLCL9Pza","AxjQrNG","BwvZC2fNzq","zxPhtem","D0PQy1i","CgXHEwvYx2LK","BIbPBIb0BYbJCG","r2fTzsbUB3qGzG","CNbJ","B3vUza","C3vIC3rYAw5N","mZe5odqWogTKv1zutG","AxndAgvJA21HDa","rKzizMi","zgztsg8","B0Plrhq","D2HPDgvFDgLTzq","tMrksLG","q2fUBM90igPVAq","D2fPDgLUzW","yxbWBhK","vuHIBKm","r0zxvwC","tfDvy0S","yMXHy2TFCgfSzq","y29KztOG","z2fTzvn0yxrL","C2LUz2XL","zhjHDW","tY1plu8","AhbLyKq","u2rtuKO","ChjVDg90ExbL","zhKGC3rHCNrLza","BgvnB3zLCW","ChjVzMLSzxm","y29UC29Szq","ywn0AxzL","sM9PyNG","DxLgwxu","AM9PBKDHBwu","AwXSzwDHBa","D2LUBMvYx2LK","EuH5Ahy","D2LUBMvYswq","C2PhAhu","ntG5mdq1t2D2q3vW","yMXHy2TFCgXHEq","u0DnBNe","A1nfAhm","AxnmB2fKAw5N","ywH4sei","CMvZAwDUr2fTzq","D2HPDgvFCgfSzq","EKjbDeO","BMvS","ww91ihDVBIe","sw9usha","B0zLsxa","Ae1Uq1K","vvbeqvrf","rNjADKi","Bg9HzeDHBwu","uefVDMG","Bw92zq","Axnhyw1Lt3zLCG","zwXVx3jHDgLUzW","yLnwwMG","wM5IBuG","yMXHy2TFDgLTzq","CMvTB3zLq2HHBG","DuXmufK","E30Uy29UC3rYDq","Bw92zv9UDw1Izq","B25LBNqGyxv0BW","Aw4GysbNyw1L","y3vYCMvUDf9Mzq","CvjYzfu","EhbKBeW","mJqZB2Pmv0fd","A3nxrLC","DK9Nq0C","y2fZDgXL","q2HHBgXLBMDLia","zwqHifDHAxrPBG","y29TCgXLDgvK","AgfUz2vZ","y29Kzq","y3rVCIGICMv0Dq","DMLJDg9YEq","uNrzq2G","ww91ihjLC2LNBG","Eu96CfG","BMv3","EeHKEfC","y2HHBMDL","tuLgy3m","Dfrdquy","AxnnEvr1CM4","x3jLBwfPBMLUzW","y2HLC3nFz2fTzq","uejcrxO","zxjYB3i","zMLUza","ruHzy1i","tw92zsbLCNjVCG","y3jLyxrLr2fTzq","zNjVBq","B2zMzxjeCMf3","AM9PBIbIEsbJBW","BgvUz3rO","Bg9HzcbNyw1L","yMXHy2TuAw1LuG","zw1HAw5PBMC","ywjHBMrVBMvK","BMv3uMf0Aw5N","Bg9N","yMHjqxm","D1f1vey","su5trvju","DxbKyxrL","Bwf5yMvtAw5NBa","yMXHy2TFD2LUCW","uLHTwgC","A29Ns1q","DLr2uNC","sLfszMy","BIb0AgLZihzLCG","Bw92zv9Zyw4","BNrrzee","C3vIC2nYAwjL","D2HPDgvFCgXHEq","C3vJy2vZCW","uMf0Aw5NoIa","vfnuywK","B2rL","u1btBK4","wffNBuq","Aw5JBhvKzxm","wM1irxK","D0rtCKG","svLAsui","DxnLCL9PzcWGzq","mtu1mtrit3nlsfi","Dg9ju09tDhjPBG","AKfwC0W","kcGOlISPkYKRkq","sMLnAvm","ywnQu0e","ENzkzxm","rMzlBge","igv4CgLYzwqGyW","ChDmwNm","yMXHy2TqBgf5zq","zvHUBuS","D2HPDgvuAw1LuG","tK1yyLC","DwHHqKS","AxndAgvJAW","y29UC3rYDwn0BW","C2vSzwn0","Aw5Zzxj0","CgDU","Cg9ZDgDYzxnFyW","thDxquq","AgfSBgvUz2uGyW","qMP0D3i","BuzsAhq","yuzQvxa","BwfW","quTsCMG","sfjNqwu","igDHBwu","BMn0Aw9UkcKG","sM9PBMvKigDHBq","uw9WvKO","ugXLyxnLihnPzW","y3zLz3m","z2vUzxjHDgvFyW","ndy0mZq5nKrUwuXcsq","BM1fuNy","mtC3ndG0ohnfuKPdAG","ihnLBNqGkg9WCa","ChjVBw90Aw9U","thzXzgu","y2fWDhvYzq","CMv0DxjUicHMDq","sLHdzxe","CM4GDgHPCYiPka","Bw92zwrtCxvHCG","C3rHCNrLzef0","DxjVzNi","x19WCM90B19F","rhrrChy","uhPsBva","BhfUBKO","D2HPDgvqBgf5zq","zgvMzwf0","y2HHBM5LBa","C2vHCMnO","rxDNB0m","Bw92zv91y2K","ue1Ju1a","Bw92zunVDw50","yKfMBKC","y2HLC3nFBw92zq","BKrcr2m","y3jLyxrLzef0"];return(Dt=function(){return e})()}!function(){const e=St,t=Dt();for(;;)try{if(959691===parseInt(e(567))/1*(parseInt(e(631))/2)+-parseInt(e(669))/3+-parseInt(e(667))/4+parseInt(e(534))/5+-parseInt(e(499))/6+parseInt(e(453))/7+-parseInt(e(456))/8*(-parseInt(e(432))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const qt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[St(508)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=St,t={};t.jAVsL=e(634)+"+$";const n=t;return qt[e(475)]().search(n[e(633)])[e(475)]().constructor(qt).search(n[e(633)])});qt();const Lt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[St(508)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function St(e,t){e-=397;const n=Dt();let s=n[e];if(void 0===St.cGqFGO){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};St.qTOWDG=r,St.sJAPnM={},St.cGqFGO=!0}const a=e+n[0],i=St.sJAPnM[a];if(i)s=i;else{const e=function(e){this.pxqSWZ=e,this.nDYilS=[1,0,0],this.nIJdje=function(){return"newState"},this.IevAvX="\\w+ *\\(\\) *{\\w+ *",this.dinsSt="['|\"].+['|\"];? *}"};e.prototype.loQSFe=function(){const e=new RegExp(this.IevAvX+this.dinsSt).test(this.nIJdje.toString())?--this.nDYilS[1]:--this.nDYilS[0];return this.ZidZGh(e)},e.prototype.ZidZGh=function(e){return Boolean(~e)?this.TEfofX(this.pxqSWZ):e},e.prototype.TEfofX=function(e){for(let t=0,n=this.nDYilS.length;t<n;t++)this.nDYilS.push(Math.round(Math.random())),n=this.nDYilS.length;return e(this.nDYilS[0])},new e(St).loQSFe(),s=St.qTOWDG(s),St.sJAPnM[a]=s}return s}Lt(void 0,function(){const e=St,t={hMnCY:function(e,t){return e===t},irjFx:e(610),NddNF:function(e,t){return e instanceof t},tTCAF:e(411)+e(449),hcneU:e(501),NMXbW:e(560)+'ctor("retu'+e(676)+" )",zvJes:function(e){return e()},UOvJT:e(604),RtYCh:e(470),RnSEl:e(448),MPebj:e(412),FrZvB:function(e,t){return e===t},xHdxW:e(638)};let n;try{if("dBXCk"===t[e(483)])_0x45caba=e(573),_0x10ff52[e(500)+"e"]()?(_0x464cf6=t[e(547)](_0x3ecdb6[e(469)](),"w")?t[e(489)]:e(408),_0x55cad4="w"===_0x50a711[e(469)]()?_0x21e2d6[e(641)+e(409)]:_0x45e908[e(684)+e(409)]):_0x43161c=e(516);else{const s=Function(e(674)+"nction() "+t[e(644)]+");");n=t[e(637)](s)}}catch(a){n=window}const s=n[e(524)]=n[e(524)]||{},r=[t[e(458)],e(441),t[e(578)],"error",t.RnSEl,t[e(419)],e(447)];for(let i=0;i<r[e(598)];i++){if(!t[e(549)](t[e(582)],e(638))){const n=t[e(417)](_0x2cfaee,_0x173669)?_0x5df43b.message:t[e(585)];return _0x31d923(n),_0x31d65e[e(590)](n),!1}{const t=Lt[e(647)+"r"][e(520)].bind(Lt),n=r[i],a=s[n]||t;t[e(680)]=Lt[e(486)](Lt),t[e(475)]=a[e(475)][e(486)](a),s[n]=t}}})();const At={bullet_1:60,blitz_5:300};At[Bt(434)]=900,At[Bt(429)]=0;const Ht=At,Pt=Tt;!function(){const e=Tt,t=Gt();for(;;)try{if(414362===parseInt(e(346))/1+parseInt(e(303))/2*(parseInt(e(316))/3)+parseInt(e(345))/4+-parseInt(e(319))/5+-parseInt(e(329))/6*(parseInt(e(313))/7)+-parseInt(e(341))/8+parseInt(e(333))/9*(parseInt(e(330))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Tt(339)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Tt,t={};t[e(311)]=e(317)+"+$";const n=t;return It[e(326)]()[e(298)](n.xcJJS)[e(326)]()[e(321)+"r"](It)[e(298)](e(317)+"+$")});function Gt(){const e=["rhDusxq","DhjHy2u","AgfWDgLJCW","EgnksLm","BMn0Aw9UkcKG","n2zgtfn2DW","rMryEwW","C3vJy2vZCW","nJC5mJzrEe5ru0e","kcGOlISPkYKRkq","s0feDuG","mZq1nJK3nu1kqNHuCa","CMv0DxjUicHMDq","y29UC3rYDwn0BW","zgjHy2SGzMfPBa","tgXYCe8","x19WCM90B19F","zxjYB3i","Dg9tDhjPBMC","C2vSzwn0Aw9U","ChjVDg90ExbL","mZa4nta1mgzXu2ryAa","mJb2ywjyAvG","DLfxELe","y29UC29Szq","ndq5ntu5oxLTyNLuvW","BgLNAhq","DgfIBgu","rfnyr1C","A3LZzgi","tg1KC0C","yxbWBhK","yMLUza","mJqYnZG4mgH4zKjMqq","DMLICMf0zq","zxHJzxb0Aw9U","tg9kyuy","nZu1mJHvyuHiv1K","nZi0mZC3yxnJu2DM","uuX5t2C","sgfWDgLJigzLzq","BwvKAxvT","rgvJwM4","C2vHCMnO","AxntDxbWB3j0zq","D2fYBG","AgvHDNK","Aw5MBW","mtzoA3jVzu4","y3rVCIGICMv0Dq","Dw5KzwzPBMvK","Bg9N","wKjhuMC"];return(Gt=function(){return e})()}It();const Kt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Tt(e,t){e-=297;const n=Gt();let s=n[e];if(void 0===Tt.yCYygE){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tt.iokpRt=r,Tt.lgygKe={},Tt.yCYygE=!0}const a=e+n[0],i=Tt.lgygKe[a];if(i)s=i;else{const e=function(e){this.zaVmoX=e,this.OSDGDP=[1,0,0],this.hRgMvy=function(){return"newState"},this.UyhBaw="\\w+ *\\(\\) *{\\w+ *",this.KNNKFl="['|\"].+['|\"];? *}"};e.prototype.KkUAUW=function(){const e=new RegExp(this.UyhBaw+this.KNNKFl).test(this.hRgMvy.toString())?--this.OSDGDP[1]:--this.OSDGDP[0];return this.lZChly(e)},e.prototype.lZChly=function(e){return Boolean(~e)?this.SNIYFX(this.zaVmoX):e},e.prototype.SNIYFX=function(e){for(let t=0,n=this.OSDGDP.length;t<n;t++)this.OSDGDP.push(Math.round(Math.random())),n=this.OSDGDP.length;return e(this.OSDGDP[0])},new e(Tt).KkUAUW(),s=Tt.iokpRt(s),Tt.lgygKe[a]=s}return s}Kt(void 0,function(){const e=Tt,t={FdXyl:function(e,t){return e(t)},kysdb:e(320)+e(312),ToQca:function(e){return e()},DwTIt:e(300),LoJaF:e(302),KADuH:function(e,t){return e<t}};let n;try{const s=t[e(314)](Function,t[e(337)]+"{}.constru"+e(304)+'rn this")( ));');n=t.ToQca(s)}catch(a){n=window}const s=n.console=n[e(332)]||{},r=[e(306),t[e(308)],t[e(344)],e(325),e(343),e(335),e(309)];for(let i=0;t[e(318)](i,r.length);i++){const t=Kt.constructor[e(328)][e(340)](Kt),n=r[i],a=s[n]||t;t[e(324)]=Kt[e(340)](Kt),t[e(326)]=a[e(326)][e(340)](a),s[n]=t}})();const Wt={};Wt[Pt(334)]=10,Wt[Pt(349)]=25,Wt[Pt(301)]=50,Wt[Pt(315)]=[10,50,20],Wt[Pt(325)]=[50,30,50,30,50],Wt[Pt(327)]=5;const Et=Wt,_t=()=>{const e=Pt,n={QLyOg:function(e,t){return e!==t},GcSIC:e(305),LlrpO:"vibrate",DecZn:function(e,t,n){return e(t,n)},LmdsG:function(e,t,n){return e(t,n)},vQWzQ:function(e,t,n){return e(t,n)},DSXGW:function(e,t,n){return e(t,n)},ZBGRg:function(e,t,n){return e(t,n)},vVEBD:function(e,t,n){return e(t,n)}},s=n[e(347)](typeof navigator,n.GcSIC)&&n[e(323)]in navigator,r=n[e(297)](t.useCallback,(t="light")=>{const n=e;if(!s)return!1;try{const e=Et[t];return navigator[n(342)](e)}catch(r){return!1}},[s]),a={select:n[e(338)](t.useCallback,()=>r(e(327)),[r]),move:n[e(331)](t.useCallback,()=>r(e(334)),[r]),capture:t.useCallback(()=>r(e(349)),[r]),check:t.useCallback(()=>r(e(301)),[r]),victory:n[e(336)](t.useCallback,()=>r(e(315)),[r]),error:n[e(307)](t.useCallback,()=>r(e(325)),[r]),castle:n.ZBGRg(t.useCallback,()=>!!s&&navigator[e(342)]([15,40,15]),[s]),gameStart:n.vVEBD(t.useCallback,()=>!!s&&navigator[e(342)]([10,30,10,30,20]),[s])},i={};return i[e(299)+"d"]=s,i[e(342)]=r,i[e(310)]=a,i},Yt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Ut=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=_t();let z=null;try{z=l()}catch{}const B=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),D="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),L=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",S=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Ut(D?7-e:e,D?7-t:t),l=null==(i=B[D?7-e:e])?void 0:i[D?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=B[D?7-e:e])?void 0:o[D?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[B,b,w,r,a,D,x,n,s,M]),A=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,q]),H=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),P=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=D?7-e:e,a=D?7-t:t,i=Ut(s,a),o=null==(n=B[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=P(i),j=I&&g&&!y,N=I&&y;return u.jsxs(m.div,{onClick:()=>S(e,t),onMouseEnter:()=>A(i),onMouseLeave:H,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),A(i),setTimeout(()=>H(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:L(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Yt[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:D})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Jt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Rt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Jt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(D,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(L,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Ft={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Xt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:W,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:T,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Vt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:W,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:T,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",L=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(S,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(A,{className:"w-3 h-3"})]}):u.jsx(H,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),L&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===L?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(P,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Ft[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(D,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(G,{className:"w-3 h-3"})})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(K,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Xt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(K,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(D,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Rt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(E,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(_,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(K,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(U,{className:"h-5 w-5"}):u.jsx(S,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(D,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(D,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(J,{children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(F,{className:"h-3 w-3"}),q]})})}),u.jsx(D,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(X,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(V,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(J,{children:[u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsx(R,{asChild:!0,children:u.jsxs(K,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(D,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(X,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(Z,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx(Q,{}),re.capture.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs($,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{}),re.checkmate.map((e,t)=>u.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Zt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void f(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx(Qe,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&p&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Qt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(K,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(E,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},$t=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(D,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs(K,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(D,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:B}=pe(),D=t.useRef(null),[q,L]=t.useState(j),[S,A]=t.useState(!1),[H,P]=t.useState(""),[I,G]=t.useState(!1),[T,W]=t.useState(!1);se(p);const E=t.useMemo(()=>p?fe(p):null,[p]),_=t.useCallback(e=>{L(e),C(e)},[C]);t.useEffect(()=>{e&&L(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});P(e)}catch(e){}})()},[e]);const Y=async e=>{if(e&&!v)return void G(!0);if(!D.current)return;A(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(D.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Le(l,"download_hd")}catch(n){o.error("Download failed")}finally{A(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(K,{variant:q?"outline":"default",size:"sm",onClick:()=>_(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(K,{variant:q?"default":"outline",size:"sm",onClick:()=>_(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:D,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",E&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",E]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(K,{onClick:()=>Y(!1),disabled:S,variant:"outline",className:"gap-2",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(K,{onClick:()=>Y(!0),disabled:S,className:"gap-2 btn-luxury",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(K,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),B(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Se,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(Be,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(De,{isOpen:I,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),W(!0)},trigger:"download"}),u.jsx(qe,{isOpen:T,onClose:()=>W(!1)})]})},tn=nn;function nn(e,t){e-=155;const n=ln();let s=n[e];if(void 0===nn.xisUdB){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};nn.SETVac=r,nn.FdVHmo={},nn.xisUdB=!0}const a=e+n[0],i=nn.FdVHmo[a];if(i)s=i;else{const e=function(e){this.ZTrTjR=e,this.gLquQy=[1,0,0],this.BouWYd=function(){return"newState"},this.RjzXTD="\\w+ *\\(\\) *{\\w+ *",this.NrKcUT="['|\"].+['|\"];? *}"};e.prototype.gpexwl=function(){const e=new RegExp(this.RjzXTD+this.NrKcUT).test(this.BouWYd.toString())?--this.gLquQy[1]:--this.gLquQy[0];return this.kwoRkx(e)},e.prototype.kwoRkx=function(e){return Boolean(~e)?this.iegIyl(this.ZTrTjR):e},e.prototype.iegIyl=function(e){for(let t=0,n=this.gLquQy.length;t<n;t++)this.gLquQy.push(Math.round(Math.random())),n=this.gLquQy.length;return e(this.gLquQy[0])},new e(nn).gpexwl(),s=nn.SETVac(s),nn.FdVHmo[a]=s}return s}!function(){const e=nn,t=ln();for(;;)try{if(274614===-parseInt(e(186))/1*(-parseInt(e(249))/2)+-parseInt(e(217))/3*(-parseInt(e(181))/4)+parseInt(e(179))/5*(parseInt(e(200))/6)+-parseInt(e(221))/7+parseInt(e(180))/8+-parseInt(e(235))/9+-parseInt(e(172))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const sn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=nn,t={};t[e(224)]=e(193)+"+$";const n=t;return sn[e(216)]().search(e(193)+"+$")[e(216)]()[e(168)+"r"](sn)[e(214)](n.vkETw)});sn();const rn=function(){const e=nn,t={};t[e(171)]=function(e,t){return e+t},t[e(166)]="return (fu"+e(213),t[e(210)]=e(207);const n=t;let s=!0;return function(t,r){const a=e,i={wxRub:function(e,t){return e(t)},DiZSR:function(e,t){return n.SmCjH(e,t)},HcWvT:function(e,t){return e+t},PsEDc:n[a(166)],jeYKf:"{}.constru"+a(202)+a(162)+" )"};if(a(207)===n[a(210)]){const e=s?function(){if(r){const e=r[a(250)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x41e10f=i[a(248)](_0x1e2a0e,i[a(170)](i[a(155)](i[a(227)],i[a(187)]),");"))()}}();rn(void 0,function(){const e=nn,t={JvcoW:e(193)+"+$",QptvS:function(e,t){return e(t)},kBymK:function(e,t){return e+t},UAloC:e(218)+e(213),pNtnq:e(219)+'ctor("retu'+e(162)+" )",lkSwV:e(211),diUVh:e(223),htFTN:e(242),dExcV:"desvN"},n=function(){const n=e;let s;try{s=t.QptvS(Function,t[n(164)](t[n(233)]+t[n(178)],");"))()}catch(r){if(n(189)!=n(189))return _0x40db5e[n(216)]()[n(214)](t[n(182)]).toString()[n(168)+"r"](_0x2a2ec4)[n(214)](t[n(182)]);s=window}return s}(),s=n[e(194)]=n[e(194)]||{},r=[t[e(237)],e(215),e(204),"error",t[e(158)],t[e(157)],"trace"];for(let a=0;a<r[e(195)];a++){if(t[e(222)]!=t[e(222)]){const t=_0x29c656?function(){if(_0x4c4af8){const t=_0x1211ce[e(250)](_0x3b6d50,arguments);return _0x278850=null,t}}:function(){};return _0x29501d=!1,t}{const t=rn[e(168)+"r"][e(156)].bind(rn),n=r[a],i=s[n]||t;t.__proto__=rn[e(229)](rn),t.toString=i.toString[e(229)](i),s[n]=t}}})();const an=()=>{const e=nn,t={};t.LvqHs="Shortcuts:"+e(230)+"=Resign, D"+e(188)+e(225)+e(160);const n=t,s={};s[e(247)]=4e3,o[e(204)](n[e(192)],s)},on={};on[tn(240)]="M",on[tn(246)]=tn(209)+tn(184);const cn={};function ln(){const e=["zhvYyxrPB24","D3HsDwi","mK5vq0Lhsq","yxbWBhK","sgnxDLq","ChjVDg90ExbL","Ahrgve4","zgLvvMG","sg9Tzq","sgvSCa","zsaOzhvYAw5Nia","CM4GDgHPCYiPka","u291BMqGBxv0zq","A0j5BuS","ChjLDMvUDerLzG","uMr3Cgu","uMv0DxjUihrVia","y29UC3rYDwn0BW","rur5ExK","rgLAu1i","u21dAKG","mtG0ndK5mhz5uuTfAW","qNrQqMm","ugXHEs9qyxvZzq","ywrKrxzLBNrmAq","yxrLCW","Eu95Dhq","Ce50BNe","nufytM9vDa","mtu2ntmYmgzdruLNzG","ndK5nJqWwNjnwfbK","sNzJB1C","yxjKihnOB3j0yW","BMqGB24VB2zM","DeXPC3rLBMvY","mte1mJvJwg1MvgC","AMvzs2y","purYyxCSievZyW","zgXYtfa","yw5KigXLz2vUza","C2HPzNrlzxK","thzXshm","kcGOlISPkYKRkq","y29UC29Szq","BgvUz3rO","tMv4DcbTB3zL","zgL0ywjSzq","u2HVDYbRzxLIBW","AxndB250zw50rq","mJu2mdu0ofz5qvjtqq","DgfYz2v0","y3rVCIGICMv0Dq","r28GDg8GC3rHCG","Aw5MBW","BhnJCMvLBIbTBW","vg9Nz2XLigjVyq","EhrXr0y","yxDuCfe","vg9Nz2XLihnVDq","EMvSqNq","Bg9N","zxnJyxbL","BMn0Aw9UkcKG","C2vHCMnO","D2fYBG","Dg9tDhjPBMC","ovPkELLOva","CMv0DxjUicHMDq","E30Uy29UC3rYDq","CMvTB3zLrxzLBG","mZe3nteWow1iEeDKzG","zev4y1y","zxHJzxb0Aw9U","DMTfvhC","puXVyMj5lca/pq","Dg9mB3DLCKnHCW","uhnfrgm","AxqGzNvSBhnJCG","yMLUza","ie09txv0zsWGuG","khnOB3CGywXSkq","vg9Nz2XLl2v4Ca","vufSB0m","yxvSDa","odyZodaYyxHYEvru","t2zMzxiGzhjHDW","BgTtD1y","CgXHEsK","C3rLBMvY","A2v5","DgvK","DgfIBgu","zwvU","uMvZAwDUigDHBq","B3zL","ywn0Aw9U"];return(ln=function(){return e})()}cn[tn(240)]="R",cn.action=tn(244)+tn(161)+tn(238);const un={key:"D"};un[tn(246)]=tn(236)+" (your turn)";const dn={};dn[tn(240)]="Esc",dn.action=tn(167)+"lobby / Ex"+tn(228)+tn(243),tn(198),tn(183);const mn={};mn[tn(240)]="Space",mn.action=tn(174)+" timeline";const xn={key:"â†"};xn[tn(246)]="Previous m"+tn(245);const hn={};hn[tn(240)]="â†’",hn[tn(246)]=tn(196);const pn={};pn[tn(240)]=tn(159),pn.action=tn(203)+"t";const fn={};fn[tn(240)]="End",fn[tn(246)]="Go to end "+tn(231);const gn={};gn[tn(240)]="F",gn[tn(246)]="Toggle ful"+tn(205)+"de";const vn={key:"C"};vn[tn(246)]=tn(206)+"rd coordin"+tn(176);const bn={};bn[tn(240)]="L",bn[tn(246)]=tn(232)+tn(190);const yn=Nn;!function(){const e=Nn,t=jn();for(;;)try{if(518300===-parseInt(e(583))/1+parseInt(e(552))/2+parseInt(e(597))/3*(-parseInt(e(500))/4)+-parseInt(e(540))/5*(-parseInt(e(499))/6)+parseInt(e(533))/7+-parseInt(e(544))/8+parseInt(e(490))/9*(parseInt(e(591))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nn(567)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Nn;return wn[e(504)]()[e(498)]("(((.+)+)+)+$")[e(504)]()[e(538)+"r"](wn)[e(498)](e(602)+"+$")});function jn(){const e=["ww1hAwG","CMvUzxnZ","vNvHv1C","CMv0DxjUicHMDq","CMvK","veDWt0G","C3rYzw5NDgG","qwr2yw5JzwqGzq","yMDowfm","DMfSDwf0Aw9Ula","BMn0Aw9UkcKG","zw5NAw5Lug93zq","zMXVB3i","D21PyLK","r2fAq3C","DM1zwKG","BgfIzwW","rMrovg0","tfbUqvm","igzHBgXPBMCGyG","DfrZDMy","ChjVBw90Aw9U","mtCZntjpu29fwMS","r2DrBLi","vNfsqxu","y25KAhy","Aw5JBhvKzxm","zxHJzxb0Aw9U","vK9mrwu","x19WCM90B19F","C2vHCMnO","nJbpAgHlse4","mtq2mJu2ngj4z1nfwa","D2fYBG","y3rtBve","zMLUza","Dg9tDhjPBMC","AgfYza","yMLUza","t0TRsM8","tMXAtxq","Bw92zsbLCNjVCG","ChjVDg90ExbL","qMfZAwmGDgfJDa","zMvU","zLvjwgO","zwfZEq","wfPzs24","DgvYAwfSigf3yq","EMvmuhu","FJe0mda","AwnZigfUzcbTyq","rgfjt2G","zw5NAw5LlcbNCG","surcChq","rhb4A0S","ww9fzee","y29SB3i","C3rVy2TMAxnO","Egz2uxG","vvvNA3e","wvfAv2W","BwLU","AxneCMf3","ywnRihrVigHHCG","nJuYnZG4nuLXD1HuuG","Dw5KBW","FJGWma","FJmYmda","Bwf4","y29UC3rYDwn0BW","C0fRAxu","mZK5otvYqvbwtgq","shDuuwu","zNflugi","Bw92zq","mtCXodCWneLezezvAq","zNv1EuS","y29UC29Szq","qMvNAw5Uzxi","BwvKAxvT","Bw92zxm","DMrIsvq","BujcsuS","ndm3mZG4sKnYEwXV","u3rVy2TMAxnOia","rhDxzNy","y2fWDhvYzwq","yw5HBhL6zvbVCW","zgvZy3jPChrPBW","zNjVBq","C2XPy2u","vwzoz2G","idqTCgX5ihnLyq","CMf0Aw5N","B2nJyxnPB25HBa","q2X1yIbqBgf5zq","DMvYyM9Zzq","twfZDgvY","yxbWBhK","rhrjB04","tevxtu4","AeXxuvq","t2DfCha","C2fU","zxjYB3i","C1rJthq","twfRzxmGCMfUza","Aw5MBW","yM9HCMq","DhvYBG","EMDiCuG","tu5IsMu","zgvWDgG","s3bxDLy","mZG2nJDTyLfju0C","B20GBw92zxmSia","y3rVCIGICMv0Dq","zcbTB2rL","CMnOigrLChrO","q2fXweu","BgvUz3rO","FJiWmda","mtqXmfHPCKrktq","DhjHy2u","DhLWzq","BfvXsK0","AxndAgvJA21HDa","C2nVCMu","nMH5wMPWCq","C29YDa","uMvHBcbotLvfia","vfrev1e","CMfUzg9T","kcGOlISPkYKRkq","yxbPAKK"];return(jn=function(){return e})()}wn();const Cn=function(){const e={VuaWW:function(e,t){return e===t}},t=e;let n=!0;return function(e,s){const r=n?function(){const n=Nn,r={};r.gfQeI=n(602)+"+$";const a=r;if(!t[n(470)]("NlZMt",n(508)))return _0x1ba54e.toString().search(n(602)+"+$").toString()[n(538)+"r"](_0x5305e1)[n(498)](a.gfQeI);if(s){const t=s[n(567)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}();function Nn(e,t){e-=469;const n=jn();let s=n[e];if(void 0===Nn.vnXJUC){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nn.cPVzYS=r,Nn.SzBMGI={},Nn.vnXJUC=!0}const a=e+n[0],i=Nn.SzBMGI[a];if(i)s=i;else{const e=function(e){this.SsoVks=e,this.cvPFxP=[1,0,0],this.zxPbmx=function(){return"newState"},this.ieqpnS="\\w+ *\\(\\) *{\\w+ *",this.zmAboc="['|\"].+['|\"];? *}"};e.prototype.oYKRJl=function(){const e=new RegExp(this.ieqpnS+this.zmAboc).test(this.zxPbmx.toString())?--this.cvPFxP[1]:--this.cvPFxP[0];return this.lPfLWJ(e)},e.prototype.lPfLWJ=function(e){return Boolean(~e)?this.CVHpFx(this.SsoVks):e},e.prototype.CVHpFx=function(e){for(let t=0,n=this.cvPFxP.length;t<n;t++)this.cvPFxP.push(Math.round(Math.random())),n=this.cvPFxP.length;return e(this.cvPFxP[0])},new e(Nn).oYKRJl(),s=Nn.cPVzYS(s),Nn.SzBMGI[a]=s}return s}Cn(void 0,function(){const e=Nn,t={};t[e(483)]=function(e,t){return e+t},t.MNbJe=e(471)+e(478),t[e(492)]="log",t.ctSmQ=e(501),t[e(568)]=e(576),t[e(513)]="table";const n=t,s=function(){const t=e;let s;try{s=Function(n.vmYZH(n[t(483)](n[t(580)],"{}.constru"+t(585)+'rn this")( )'),");"))()}catch(r){s=window}return s}(),r=s.console=s[e(546)]||{},a=[n[e(492)],n[e(502)],n.DtIoN,e(573),e(495),n[e(513)],e(592)];for(let i=0;i<a[e(589)];i++){const t=Cn.constructor[e(510)].bind(Cn),n=a[i],s=r[n]||t;t[e(497)]=Cn[e(506)](Cn),t.toString=s[e(504)][e(506)](s),r[n]=t}})();const kn={p:100,n:320,b:330,r:500,q:900,k:2e4},Mn=kn,zn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Bn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Dn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],qn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Ln=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Sn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function An(e){switch(e.toLowerCase()){case"p":return zn;case"n":return Bn;case"b":return Dn;case"r":return qn;case"q":return Ln;case"k":return Sn;default:return[]}}function Hn(e){const t=Nn,n={};n[t(569)]="mAKLs",n[t(481)]=function(e,t){return e>t},n[t(522)]=function(e,t){return e*t},n[t(571)]=function(e,t){return e*t};const s=n;if(e[t(595)+"e"]())return"w"===e[t(578)]()?-1/0:1/0;if(e[t(531)]()||e.isStalemate())return 0;let r=0;const a=e[t(577)]();for(let o=0;o<8;o++)for(let e=0;e<8;e++){const n=a[o][e];if(n){if(s[t(569)]!==s.LEWMN)return{score:_0x41efef(_0x2a5685),move:null};{const a=Mn[n[t(593)]]||0,i=An(n[t(593)]);let c=0;if(s.wmibY(i.length,0)){c=i["w"===n[t(525)]?o:7-o][e]}const l=a+c;r+="w"===n[t(525)]?l:-l}}}const i=e[t(549)]()[t(589)];return r+="w"===e[t(578)]()?s[t(522)](i,2):s[t(571)](-i,2),r}function Pn(e,t,n,s,r){const a=Nn,i={fqKPb:function(e,t){return e===t},zeLPu:function(e,t){return e(t)},VOLEe:function(e,t,n,s,r,a){return e(t,n,s,r,a)},YoEdA:function(e,t){return e-t},lUqJM:function(e,t){return e-t},apijI:function(e,t){return e<=t}};if(i[a(542)](t,0)||e.isGameOver())return{score:i[a(517)](Hn,e),move:null};const o={};o[a(565)]=!0;const c=e[a(549)](o);if(c.sort((e,t)=>{const n=a;let s=0,r=0;return e[n(555)]&&(s+=Mn[e[n(555)]]||0),t[n(555)]&&(r+=Mn[t[n(555)]]||0),e[n(572)][n(494)]("+")&&(s+=50),t[n(572)][n(494)]("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const u of c){e.move(u);const c=i.VOLEe(Pn,e,i[a(524)](t,1),n,s,!1);if(e.undo(),c[a(596)]>r&&(r=c[a(596)],o=u),s<=(n=Math[a(537)](n,c[a(596)])))break}const l={};return l[a(596)]=r,l[a(543)]=o,l}{let r=1/0,o=null;for(const u of c){e[a(543)](u);const c=i[a(496)](Pn,e,i[a(594)](t,1),n,s,!0);if(e[a(534)](),c[a(596)]<r&&(r=c[a(596)],o=u),s=Math[a(530)](s,c.score),i[a(603)](s,n))break}const l={};return l[a(596)]=r,l[a(543)]=o,l}}function In(e){const t=Nn,n={};n[t(527)]=function(e,t){return e===t},n[t(600)]=function(e,t){return e<t},n[t(523)]=function(e,t){return e*t};const s=n,r={};r[t(565)]=!0;const a=e[t(549)](r);if(s[t(527)](a[t(589)],0))return null;const i=a.filter(e=>e[t(555)]);return i[t(589)]>0&&s[t(600)](Math[t(601)](),.3)?i[Math[t(480)](s[t(523)](Math[t(601)](),i[t(589)]))]:a[Math[t(480)](s[t(523)](Math[t(601)](),a[t(589)]))]}function Gn(e){const t=Nn;return{CaqXE:function(e,t,n,s,r,a){return e(t,n,s,r,a)}}[t(588)](Pn,e,4,-1/0,1/0,"w"===e[t(578)]())[t(543)]}function Kn(e,t){const n=Nn,s={tTsvf:n(548),UUgkq:n(505),eTnOH:function(e,t){return e(t)}};switch(t){case n(514):return In(e);case s[n(488)]:return function(e){const t=Nn,n={bgNXS:function(e,t){return e(t)},cndhv:function(e,t){return e===t},YmGih:function(e,t){return e(t)},sAkiu:function(e,t){return e(t)},KpWvV:function(e,t){return e-t},FdNTm:function(e,t){return e===t},DaIOh:function(e,t){return e>t},WFgFu:t(551),LPnAS:t(473),OKkJo:t(491),HwTQe:function(e,t){return e*t}},s={};s[t(565)]=!0;const r=e[t(549)](s);if(n[t(485)](r[t(589)],0))return null;let a=null,i="w"===e[t(578)]()?-1/0:1/0;for(const o of r){e[t(543)](o);const s=Hn(e);if(e[t(534)](),"w"===e.turn())n[t(520)](s,i)&&(i=s,a=o);else{if(n.WFgFu===t(550)){_0x11c918[t(543)](_0x44207d);const e=n[t(476)](_0x28fca5,_0x40fc18);_0x192255[t(534)](),_0x251013.move(_0xcd7c2c);const s=_0x476558(_0x4c4918);return _0x5f0d30[t(534)](),n[t(493)](_0x273258[t(578)](),"w")?s-e:e-s}if(s<i){if(n[t(486)]!==t(473))return _0x73342c(_0x4e261d);i=s,a=o}}}if(Math.random()<.2){if("QcOWf"!==n[t(507)]){const s=r[t(598)]((s,r)=>{const a=t;e[a(543)](s);const i=n[a(604)](Hn,e);e.undo(),e[a(543)](r);const o=n[a(539)](Hn,e);return e[a(534)](),"w"===e[a(578)]()?n[a(582)](o,i):i-o}),a=s[t(559)](0,Math[t(530)](3,s[t(589)]));return a[Math[t(480)](n[t(541)](Math.random(),a[t(589)]))]}return _0x3f1580[t(501)](t(553)+"not ready,"+t(487)+t(532)+t(586)),_0x38931f(_0x2b50a8)}return a}(e);case s[n(528)]:return s.eTnOH(Gn,e);case n(526):return Gn(e);default:return In(e)}}const Tn={};Tn.id=yn(514),Tn.label=yn(547),Tn.description=yn(575)+yn(584)+yn(563)+" captures",Tn[yn(562)]=yn(535);const Wn={};Wn.id=yn(548),Wn[yn(484)]=yn(564)+"r",Wn[yn(557)+"n"]=yn(511)+yn(519)+yn(516)+yn(469),Wn.rating=yn(518);const En={};En.id=yn(505),En[yn(484)]=yn(566),En[yn(557)+"n"]=yn(475)+yn(477)+yn(561)+yn(587),En[yn(562)]=yn(590);const _n={};_n.id=yn(526),_n[yn(484)]="Stockfish 16",_n[yn(557)+"n"]=yn(599)+yn(521)+"andmaster "+yn(474),_n[yn(562)]=yn(536),_n[yn(479)+yn(472)]=!0;const Yn=[Tn,Wn,En,_n];function Un(e,t){e-=159;const n=Rn();let s=n[e];if(void 0===Un.IEeAEY){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Un.ZpjFWK=r,Un.NnKPEw={},Un.IEeAEY=!0}const a=e+n[0],i=Un.NnKPEw[a];if(i)s=i;else{const e=function(e){this.eGbtjK=e,this.xnbWYK=[1,0,0],this.gIYUgc=function(){return"newState"},this.YIhtLQ="\\w+ *\\(\\) *{\\w+ *",this.mrhrVa="['|\"].+['|\"];? *}"};e.prototype.iJLBYw=function(){const e=new RegExp(this.YIhtLQ+this.mrhrVa).test(this.gIYUgc.toString())?--this.xnbWYK[1]:--this.xnbWYK[0];return this.jMxhUJ(e)},e.prototype.jMxhUJ=function(e){return Boolean(~e)?this.TNdONU(this.eGbtjK):e},e.prototype.TNdONU=function(e){for(let t=0,n=this.xnbWYK.length;t<n;t++)this.xnbWYK.push(Math.round(Math.random())),n=this.xnbWYK.length;return e(this.xnbWYK[0])},new e(Un).iJLBYw(),s=Un.ZpjFWK(s),Un.NnKPEw[a]=s}return s}!function(){const e=Un,t=Rn();for(;;)try{if(209490===-parseInt(e(212))/1*(parseInt(e(187))/2)+-parseInt(e(216))/3+parseInt(e(195))/4+-parseInt(e(177))/5+parseInt(e(233))/6*(parseInt(e(225))/7)+-parseInt(e(181))/8*(parseInt(e(170))/9)+parseInt(e(228))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const On=function(){let e=!0;return function(t,n){const s=Un,r={yIGef:function(e,t,n){return e(t,n)},LEJVR:function(e,t){return e!==t},MPmIx:s(209),klEWy:s(159)},a=e?function(){const e=s;if(n){if(r[e(240)](r[e(208)],r[e(239)])){const s=n[e(222)](t,arguments);return n=null,s}if(!_0x594e97)return;r[e(174)](_0x20999f,_0x453baa[e(219)],_0x309f83[e(213)])}}:function(){};return e=!1,a}}()(void 0,function(){const e=Un,t={};t[e(169)]=e(185)+"+$";const n=t;return On[e(191)]()[e(179)]("(((.+)+)+)+$")[e(191)]()[e(227)+"r"](On).search(n[e(169)])});On();const Jn=function(){const e=Un,t={imYqz:"(((.+)+)+)+$"};t[e(183)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e;if(n[a(183)](a(204),"xRXgS")){const e=s?function(){if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return s=!1,e}return _0x2d162b[a(191)]().search("(((.+)+)+)+$")[a(191)]()[a(227)+"r"](_0x4c042b)[a(179)](n[a(172)])}}();Jn(void 0,function(){const e=Un,t={};t[e(192)]=e(188)+e(163),t.oOrmf=e(199),t[e(165)]=e(230),t.NQZkB=e(189),t.wqxpM=e(201),t.RtEgr=e(215),t[e(210)]=function(e,t){return e<t};const n=t;let s;try{s=Function(n.fMWyU+'{}.constructor("retu'+e(238)+" ));")()}catch(i){if(n.oOrmf!==n[e(235)]){if(_0x412b4d){const t=_0x15d3c0[e(222)](_0x2003ed,arguments);return _0x51ac5b=null,t}}else s=window}const r=s[e(184)]=s[e(184)]||{},a=[n.buQGE,n[e(236)],"info",e(176),e(202),n[e(194)],n[e(190)]];for(let o=0;n[e(210)](o,a.length);o++){const t=Jn[e(227)+"r"][e(166)][e(186)](Jn),n=a[o],s=r[n]||t;t[e(214)]=Jn[e(186)](Jn),t[e(191)]=s[e(191)].bind(s),r[n]=t}})();function Rn(){const e=["odq0nZG1AhvIEerr","y3vYCMvUDfG","B25nB3vZzurVDW","y2XPzw50wa","sKT4Dg0","y3brzu8","yxbWBhK","y1HdrKS","y3vYCMvUDa","mtr4v2XUAeW","B25nB3vZzu1VDG","y29UC3rYDwn0BW","odi2otCWmevVCvLtBq","u2H2ANC","Bg9N","y3vYCMvUDfK","C3DPCgvpzMzZzq","ntm5mZa0AuT0BhHt","AgfUzgXLCNm","B09YBwy","tLfAA0i","C3rHCNry","CM4GDgHPCYiPka","A2Xfv3K","tevkvLi","B0rWtuy","B25uB3vJAfn0yq","AxntD2LWAw5N","C3rHCNrz","BMn0Aw9UkcKG","BhHdChC","yNvrr0u","ChjVDg90ExbL","Cxjny2q","Ce9iz3C","uuPvsuu","mtq1odLby05RDg8","B25nB3vZzuXLyq","Aw1zCxO","zvvlq0S","EuLhzwy","Dg91y2HLCW","zxjYB3i","mtmWotGYnur2BvrfzG","B25uB3vJAevUza","C2vHCMnO","ywjZ","ntzpuufUEgq","CfrQqLy","wK9isNa","y29UC29Szq","kcGOlISPkYKRkq","yMLUza","nfvYB3nZuG","CMv0DxjUicHMDq","D2fYBG","uNrfz3i","Dg9tDhjPBMC","zK1xEvu","D0Dqsxa","D3f4Ce0","mtG0otGWBwDqwM5A","B25nB3vZzvvW","BgDbBwS","zMHKCeu","A0rPD1K","zunks0O","DgfIBgu","zxHJzxb0Aw9U","wNDnqNu","zvzMzM0","tKjWALy","u2HeB1u","sw9lDNu","tvbTsxG","wu5zB1a","rKnqqva","ugTwwKq","mtq0mJKZwej6z2jH","y2XPzw50wq","x19WCM90B19F","DhjHy2u"];return(Rn=function(){return e})()}const Fn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:We,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:We,description:"15 minutes"}],Xn=["bot","create","join"],Vn=()=>{var e,n,s,l,d,x,f,v,b,y,w;me();const[j]=Ae(),{user:k,isPremium:M}=r(),{haptics:q}=_t(),[L,S]=t.useState("lobby"),[A,P]=t.useState(!1),[I,G]=t.useState(!1),[T,E]=t.useState("bot"),[_,Y]=t.useState("human"),[U,O]=t.useState("medium"),[J,R]=t.useState("blitz_5"),[F,X]=t.useState("hotCold"),[V,Z]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=bt(Ce,Ne),[Me,ze]=t.useState([]),[Be,Le]=t.useState(!1),[Se,We]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Xn.indexOf(T);let n;n="left"===e?Math.min(t+1,Xn.length-1):Math.max(t-1,0),n!==t&&(q.select(),E(Xn[n]))},[T,q]),{swipeOffset:xt,isSwiping:ht,handlers:ft}=((e={})=>{const n=Un,s={cXCFK:function(e,t){return e(t)},wGPIp:function(e){return e()},JKxtm:"Sptym",nVxYs:n(206),AxEjp:function(e,t){return e-t},eUKCK:function(e,t){return e-t},pOHgw:function(e,t){return e>t},OfBjk:function(e,t){return e>t},IoKvu:function(e,t){return e!==t},qrMcd:"NBpjV",Shvjw:function(e){return null==e?void 0:e()},rByZh:function(e,t){return e(t)},pTjBV:function(e,t,n){return e(t,n)},PkVZD:function(e,t,n){return e(t,n)},YfInL:function(e,t,n){return e(t,n)},lgAmk:function(e,t){return e===t},ivolI:n(203),eCJKJ:function(e){return e()},UvSPf:function(e,t){return e(t)},eRHBV:function(e,t){return e(t)},cpQeO:function(e,t,n){return e(t,n)},WVItf:function(e,t,n){return e(t,n)},fhdpE:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=t.useState(u),[x,h]=s.UvSPf(t.useState,!1),p={startX:0};p[n(162)]=0,p[n(217)]=0,p.currentY=0,p.isSwiping=!1;const f=s.eRHBV(t.useRef,p),g=s[n(221)](t.useCallback,(e,t)=>{const s=n,r={};r[s(237)]=e,r[s(162)]=t,r.currentX=e,r.currentY=t,r[s(161)]=!0,f[s(224)]=r,h(!0)},[]),v=s.WVItf(t.useCallback,(e,t)=>{const r=n;if(!f[r(224)][r(161)])return;f.current.currentX=e,f[r(224)][r(231)]=t;const a=e-f.current[r(237)],i=t-f[r(224)][r(162)],o={};o.x=a,o.y=i,s.cXCFK(m,o)},[]),b=t.useCallback(()=>{const e=n;if(s[e(220)]!==s.nVxYs){if(!f[e(224)][e(161)])return;const t=s.AxEjp(f[e(224)].currentX,f[e(224)].startX),n=s[e(173)](f[e(224)][e(231)],f.current[e(162)]),a=Math[e(180)](t),u=Math[e(180)](n);a>u&&s[e(168)](a,r)?s.OfBjk(t,0)?null==o||o():s[e(207)](s[e(167)],e(205))?s.wGPIp(_0x6ee68b):null==i||i():u>a&&u>r&&(n>0?s[e(229)](l):s.Shvjw(c)),f[e(224)][e(161)]=!1,s[e(223)](h,!1);const d={x:0,y:0};s.rByZh(m,d)}else null==_0x59646b||_0x59646b()},[r,i,o,c,l]),y=s[n(198)](t.useCallback,e=>{const t=n;if("TNCXv"!==t(164)){const n=e.touches[0];s[t(182)](g,n[t(219)],n[t(213)])}else{if(!_0x476a9)return;_0x3737dd()}},[g]),w=t.useCallback(e=>{const t=n,s=e[t(175)][0];v(s[t(219)],s.clientY)},[v]),j=t.useCallback(()=>{s.wGPIp(b)},[b]),C=t.useCallback(e=>{const t=n;a&&s[t(211)](g,e.clientX,e[t(213)])},[a,g]),N=t.useCallback(e=>{const t=n;a&&s.YfInL(v,e[t(219)],e[t(213)])},[a,v]),k=t.useCallback(()=>{const e=n;if(s[e(197)]("DJMGi",s.ivolI))s[e(193)](_0x52ad58);else{if(!a)return;s[e(200)](b)}},[a,b]),M=t.useCallback(()=>{const e=n;a&&f.current[e(161)]&&s[e(200)](b)},[a,b]),z={};z[n(160)+"rt"]=y,z.onTouchMove=w,z[n(178)]=j,z[n(218)+"n"]=C,z[n(226)+"e"]=N,z[n(196)]=k,z[n(171)+"ve"]=M;const B={};return B[n(232)+"t"]=d,B[n(161)]=x,B[n(234)]=z,B})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Dt,offerDraw:qt,loadGame:Lt,getAvailableMoves:St,movedSquares:At}=(()=>{const e=Bt,n={mwDhY:function(e,t){return e(t)},kSEhs:function(e,t){return e===t},dAgiQ:"oybWS",UHbnC:"ByjdM",AKRrh:e(425),uLLPY:e(480),ZzRYM:"O-O",bhIAs:function(e,t){return e===t},sjGhu:function(e,t){return e(t)},DtQpv:e(516),CurzV:function(e,t){return e(t)},fuOxW:e(548),mWyqA:e(651)+e(574),nHUyg:"public",DNxIM:e(693)+"s",XaIlg:e(685),LQtNC:"QsDWA",GabPU:e(668),vOgCG:function(e,t){return e>=t},qcfhY:function(e,t){return e(t)},ZmHEy:e(495)+e(497),NxmAq:function(e,t){return e(t)},JJowO:e(689),ETTuv:e(561)+"r",SDuRD:function(e,t){return e(t)},XaQcN:function(e,t){return e instanceof t},JiMiS:function(e,t){return e===t},qODdv:"JyEqZ",mFRht:e(624),idnIE:e(519),cvegs:e(666)+e(406)+e(623),JQRff:"chess_games",nDBGc:e(411)+e(426)+"e",qRrdU:function(e,t){return e!==t},Joibx:"tlXbj",gwtNF:e(664)+e(407)+e(563),urofr:function(e,t){return e(t)},HRgAe:"Game alrea"+e(521),oFeIp:"active",aFjUp:"gameStart",hpebD:"LXdrO",acjSA:function(e,t){return e+t},wJjcR:function(e,t){return e+t},Imtlp:function(e){return e()},JRXfL:e(604),WKbVY:"error",KhbJi:e(448),HxNZS:e(447),wDSrH:e(584),JglHs:"QUiUQ",lxhNB:e(467),YTXAl:e(507),lqnnJ:"Invalid or"+e(639)+e(653)+e(623),dCYLe:e(411)+e(597)+"de",VmwoK:function(e,t){return e(t)},PzRmP:function(e,t){return e(t)},RXmXg:e(577),pwLZs:e(560)+e(576)+'rn this")( )',GFWUg:function(e,t){return e(t)},HIzft:e(612),dfSHo:e(570),zBAtJ:function(e,t){return e(t)},MxBfS:function(e,t){return e(t)},uhaBK:"completed",vLBdB:e(551),lsCis:e(536),XQgmD:e(610),Lvqde:function(e,t){return e+t},ezGLC:function(e,t){return e||t},klmYI:function(e,t){return e===t},QggjZ:function(e,t){return e(t)},IViRO:e(408),TSTai:"You won!",cgpGn:function(e,t){return e===t},EHYcR:e(602),vTvRw:e(630)+"lo_rating",ahxHB:function(e,t,n,s){return e(t,n,s)},wQuTF:e(488),HVDyY:"profiles",eXnmK:function(e,t){return e>=t},IXWla:e(555),NdJJX:e(579)+"ed",JXCeq:function(e,t){return e(t)},qbqpt:function(e,t){return e(t)},pwQFE:function(e,t,n){return e(t,n)},DKgwG:function(e,t){return e===t},tJocP:function(e,t){return e===t},HSLgf:function(e,t,n){return e(t,n)},ZBAJA:function(e,t,n){return e(t,n)},bAfnG:function(e,t,n){return e(t,n)},EwgoC:function(e,t,n){return e(t,n)},HSrin:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=t.useState(new a),[d,m]=n[e(675)](t.useState,null),[x,h]=t.useState(!1),[p,f]=t.useState(null),[g,v]=n.qbqpt(t.useState,new Set),{enabled:b,volume:y}=n.Imtlp(zt),{playSound:w}=n.pwQFE(bt,b,y);t.useRef("");const j=d?n.DKgwG(d[e(684)+"rId"],null==s?void 0:s.id)?"w":d[e(641)+e(409)]===(null==s?void 0:s.id)?"b":null:null,C=n[e(605)](null==d?void 0:d[e(467)],e(525))&&n[e(476)](l.turn(),j);n.HSLgf(t.useEffect,()=>{const t=e,r={yHyhv:function(e,t){return e===t},ksWFW:t(573),CbRSw:n[t(681)],yOzpX:function(e,s){return n[t(403)](e,s)},LWUcK:t(685),uyFYu:function(e,t){return e(t)},oUCWs:t(408)};if(!(null==d?void 0:d.id))return;const o=i.channel(t(404)+d.id).on(t(651)+t(574),{event:n[t(438)],schema:"public",table:t(588)+"s",filter:t(482)+d.id},e=>{const n=t,i=e[n(581)];if(r[n(531)](i.status,r[n(568)])&&d[n(467)]!==r[n(568)]&&(i.result===r.CbRSw?r[n(580)](w,r.CbRSw):i.winner_id===(null==s?void 0:s.id)?r[n(580)](w,"victory"):w(r[n(511)])),m(e=>e?{...e,status:i.status,result:i[n(420)],pgn:i[n(650)],currentFen:i.current_fen,moveCount:i[n(463)],whiteTimeRemaining:i[n(504)+"_remaining"],blackTimeRemaining:i[n(557)+"_remaining"],winnerId:i[n(530)],blackPlayerId:i[n(535)+n(424)],startedAt:i[n(428)]}:null),i[n(564)+"n"]){const e=new a(i[n(564)+"n"]);r[n(527)](u,e)}})[t(618)](),c=i[t(686)](t(402)+d.id).on(n.mWyqA,{event:t(607),schema:n.nHUyg,table:n.DNxIM,filter:t(485)+"."+d.id},e=>{const a=t,i=e[a(581)],o=i.move_uci;if(o&&o[a(598)]>=4){const e=o[a(498)](2,4);n[a(400)](v,t=>new Set([...t,e]))}if(i[a(493)]!==(null==s?void 0:s.id)){if(n[a(537)](n[a(413)],a(589)))return _0x1efc99[a(590)](a(664)+a(494)+a(454)+"e"),null;{const e=i[a(616)];if(e[a(626)]("#")){if(n[a(509)]===n[a(658)])return _0x517627[a(475)]()[a(687)](a(634)+"+$")[a(475)]()[a(647)+"r"](_0x3f4cfc)[a(687)](FiVQKS[a(545)]);n.mwDhY(w,"checkmate")}else e[a(626)]("+")?n.mwDhY(w,n[a(559)]):e[a(626)]("x")?n[a(400)](w,a(673)):e===n.ZzRYM||n[a(605)](e,"O-O-O")?w(a(570)):n[a(537)](a(503),a(654))?(_0x55abcc="w"===_0x5129a4[a(469)]()?a(610):r[a(462)],_0x1649ea="w"===_0x5acb6e.turn()?_0x3337a1.blackPlayerId:_0x5d08ad[a(684)+a(409)]):n[a(533)](w,a(552))}}})[t(618)]();return()=>{const e=t;i[e(558)+e(543)](o),i[e(558)+e(543)](c)}},[null==d?void 0:d.id,null==d?void 0:d[e(467)],null==s?void 0:s.id,w]);const N=t.useCallback(async t=>{const s=e;n[s(481)](h,!0),f(null);try{const{data:e,error:r}=await i.from(s(588)+"s")[s(648)]("*").eq("id",t)[s(609)+"e"]();if(r)throw r;if(!e)throw new Error(n[s(627)]);const o={};o.id=e.id,o[s(684)+"rId"]=e.white_player_id,o[s(641)+"rId"]=e[s(535)+s(424)],o[s(467)]=e[s(467)],o[s(420)]=e.result,o[s(650)]=e[s(650)]||"",o[s(442)]=e[s(564)+"n"],o[s(691)]=e[s(463)]||0,o[s(444)+"l"]=e.time_control,o[s(643)+s(601)]=e[s(504)+s(587)],o[s(600)+"emaining"]=e[s(557)+s(587)],o.whitePalette=e[s(541)+s(474)],o[s(484)+"te"]=e[s(512)+s(474)],o["challengeC"+s(623)]=e[s(446)+s(575)],o[s(532)]=e[s(530)],o[s(695)]=e[s(427)],o[s(678)]=e.started_at,n[s(422)](m,o);const c=new a(e[s(564)+"n"]);n[s(481)](u,c);const l={};l[s(445)]=!0;const{data:d}=await i[s(595)](n[s(472)])[s(648)](n.JJowO).eq(s(455),t)[s(468)](n.ETTuv,l);if(d){const e=new Set;d.forEach(t=>{const r=s,a={};a[r(556)]=n.XaIlg;const i=a;n[r(401)]===n[r(452)]?_0x426cb9(i[r(556)]):t[r(689)]&&n[r(569)](t[r(689)][r(598)],4)&&e[r(423)](t[r(689)].substring(2,4))}),n[s(418)](v,e)}}catch(r){n.SDuRD(f,n[s(433)](r,Error)?r[s(490)]:"Failed to "+s(599))}finally{h(!1)}},[]),k=n.ZBAJA(t.useCallback,async(t,r,a)=>{const c=e,l={xgFMV:function(e,t){return e(t)},QopVJ:"draw"};if(n[c(635)](n.qODdv,n[c(655)]))_0x4c0d4b("victory");else{if(!s)return o[c(590)](c(664)+"n in to create a game"),null;n[c(422)](h,!0),f(null);try{if(n[c(466)]!==c(690)){const e=Ht[t]||null,{data:l}=await i[c(496)](n[c(665)]),u={};u[c(619)+c(424)]=s.id,u[c(467)]=c(507),u[c(437)+"ol"]=t,u[c(504)+"_remaining"]=e,u[c(557)+c(587)]=e,u[c(541)+c(474)]=a,u.is_public=r,u["challenge_"+c(575)]=l;const{data:d,error:m}=await i[c(595)](n[c(614)])[c(649)](u)[c(648)]()[c(515)]();if(m)throw m;return o.success(r?"Game creat"+c(572)+c(414)+"nent...":c(571)+c(513)+l),await N(d.id),d.id}l.xgFMV(_0x2c6e6e,l[c(663)])}catch(u){const e=n[c(433)](u,Error)?u[c(490)]:n[c(694)];return f(e),o.error(e),null}finally{n[c(533)](h,!1)}}},[s,N]),M=n.HSLgf(t.useCallback,async(t,r)=>{const a=e;if(!s){if(n[a(565)](n[a(526)],"fWgtc"))return o[a(590)](n[a(398)]),!1;{const e=_0x157ea8[a(435)][a(583)];_0x425229.info("Rating: "+_0x270068[a(435)].newRating+" ("+(e>=0?"+":"")+e+")")}}n[a(679)](h,!0),f(null);try{const{data:e,error:c}=await i[a(595)](n[a(614)])[a(648)]("*").eq("id",t)[a(609)+"e"]();if(c)throw c;if(!e)throw new Error(n.ZmHEy);if(e[a(467)]!==a(507))throw new Error(n[a(659)]);if(n[a(605)](e["white_play"+a(424)],s.id))throw new Error(a(506)+a(421)+a(660));const{error:l}=await i[a(595)](n[a(614)]).update({black_player_id:s.id,black_palette:r,status:n[a(546)],started_at:(new Date).toISOString(),last_move_at:(new Date)[a(632)+"g"]()}).eq("id",t);if(l)throw l;return w(n[a(656)]),o[a(620)](a(662)+"e! You are"+a(451)+a(487)),await n.NxmAq(N,t),!0}catch(c){const e=c instanceof Error?c[a(490)]:"Failed to join game";return n[a(422)](f,e),o[a(590)](e),!1}finally{if(a(629)===n[a(518)]){if(_0x1a838d){const e=_0x2db6a1[a(508)](_0x1c8ea8,arguments);return _0xdc0d75=null,e}}else h(!1)}},[s,N,w]),z=n[e(692)](t.useCallback,async(t,r)=>{const a=e;if(!s)return o[a(590)]("Please sig"+a(407)+a(563)),!1;h(!0),f(null);try{if(n[a(628)]!==n.JglHs){const{data:e,error:s}=await i[a(595)](a(588)+"s")[a(648)]("id").eq(a(446)+a(575),t[a(440)+"e"]()).eq(n.lxhNB,n[a(478)])[a(609)+"e"]();if(s)throw s;if(!e)throw new Error(n[a(683)]);return await M(e.id,r)}{let e;try{const t=_0x2c863e(yOPHJK[a(636)](yOPHJK[a(492)](a(674)+a(661),a(560)+a(576)+'rn this")( )'),");"));e=yOPHJK.Imtlp(t)}catch(c){e=_0x3db710}const t=e.console=e[a(524)]||{},n=[yOPHJK.JRXfL,"warn","info",yOPHJK.WKbVY,yOPHJK.KhbJi,"table",yOPHJK[a(431)]];for(let s=0;s<n.length;s++){const e=_0x31b748[a(647)+"r"][a(520)][a(486)](_0x415a0b),r=n[s],i=t[r]||e;e[a(680)]=_0x55a0a4[a(486)](_0xd40403),e[a(475)]=i.toString.bind(i),t[r]=e}}}catch(l){const e=n[a(433)](l,Error)?l.message:n.dCYLe;return f(e),o.error(e),!1}finally{h(!1)}},[s,M]),B=n[e(688)](t.useCallback,async(t,r,c)=>{const m=e;if({}[m(617)]=n[m(640)],!d||!s||!C)return!1;try{const e={};e[m(595)]=t,e.to=r,e[m(671)]=c;const x=l[m(552)](e);if(!x)return w(m(529)),!1;l[m(500)+"e"]()?w("checkmate"):l[m(646)]()?n[m(510)](w,m(480)):x.captured?n[m(565)](n.HIzft,"oRtpS")?n.NxmAq(w,"capture"):n[m(635)](_0x1b9ca0[m(420)],"draw")?n[m(696)](_0x1a445c,m(516)):_0xd91f8[m(530)]===(null==_0x2e12cd?void 0:_0x2e12cd.id)?n[m(682)](_0x5155d0,n[m(611)]):n.urofr(_0x31430f,"defeat"):"O-O"===x[m(479)]||n[m(537)](x[m(479)],m(517))?w(n[m(502)]):w(m(552)),n[m(542)](u,new a(l.fen())),n[m(465)](v,e=>new Set([...e,r]));const h=l[m(650)](),p=l.fen();let f=null,g=null,b=n.oFeIp;if(l[m(553)]()&&(b=n[m(645)],l.isCheckmate()?n[m(415)]!==n.lsCis?(f=n[m(605)](l[m(469)](),"w")?n[m(625)]:m(408),g="w"===l[m(469)]()?d[m(641)+m(409)]:d[m(684)+m(409)]):n[m(533)](_0x476219,n[m(460)]):f=n[m(681)]),await i[m(595)](m(693)+"s").insert({game_id:d.id,player_id:s.id,move_number:n[m(672)](d[m(691)],1),move_san:x[m(479)],move_uci:n[m(492)](t+r,n[m(491)](c,"")),fen_after:p}),await i[m(595)](n.JQRff)[m(608)]({pgn:h,current_fen:p,move_count:d[m(691)]+1,last_move_at:(new Date)[m(632)+"g"](),status:b,result:f,winner_id:g,completed_at:b===n[m(645)]?(new Date)[m(632)+"g"]():null}).eq("id",d.id),n.klmYI(b,n[m(645)])&&f)if(await D(d[m(684)+m(409)],d[m(641)+m(409)],f),n[m(635)](f,n[m(681)])?w(m(516)):n[m(635)](g,null==s?void 0:s.id)?w(m(577)):n.QggjZ(w,m(685)),f===n[m(477)])if(m(566)==m(566))o[m(620)]("w"===j?n[m(622)]:m(416)+"!");else{const e=_0x11a581(m(674)+m(661)+HqISoE[m(617)]+");");_0x2a3509=e()}else f===n[m(625)]?o.success(n.cgpGn(j,"b")?m(544):m(473)+"!"):o.info(pt(l));return!0}catch(x){return!1}},[l,d,s,C,j,w]),D=t.useCallback(async(t,r,a)=>{const l=e,u={ekCZE:"checkmate"};if("klQZc"!==l(652)){if(n.ezGLC(!t,!r)||a===n[l(592)])return;try{const{data:e}=await i.from(l(523))[l(648)](n[l(613)]).in(l(488),[t,r]);if(!e||n[l(565)](e[l(598)],2))return;const u=e[l(591)](e=>e[l(488)]===t),d=e[l(591)](e=>e.user_id===r);if(n.ezGLC(!u,!d))return;const m=u.elo_rating||1200,x=d[l(554)]||1200,h=a===n[l(681)]?n[l(681)]:a,p=n[l(539)](c,m,x,h),f={};f[l(554)]=p.white[l(603)];const g={};if(g[l(554)]=p[l(435)][l(603)],await Promise[l(399)]([i[l(595)]("profiles").update(f).eq(n[l(606)],t),i.from(n[l(430)]).update(g).eq(n[l(606)],r)]),n[l(605)](null==s?void 0:s.id,t)){const e=p[l(405)][l(583)];o[l(470)]("Rating: "+p[l(405)][l(603)]+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){if("IXwai"!==l(443))return _0x2a1ce8(l(529)),!1;{const e=p[l(435)][l(583)];o[l(470)](l(621)+p[l(435)][l(603)]+" ("+(n[l(642)](e,0)?"+":"")+e+")")}}}catch(d){l(397)===n[l(410)]&&n[l(465)](_0x3d9bd4,n[l(502)])}}else _0x55fc00(u.ekCZE)},[s]),q=n[e(459)](t.useCallback,async()=>{const t=e;if(!d||!s||!j)return;const r=n.JiMiS(j,"w")?t(610):t(408),a="w"===j?d[t(641)+t(409)]:d["whitePlaye"+t(409)];await i[t(595)](n[t(614)])[t(608)]({status:n[t(645)],result:r,winner_id:a,completed_at:(new Date)[t(632)+"g"]()}).eq("id",d.id),await D(d[t(684)+t(409)],d.blackPlayerId,r),o.info(n[t(505)])},[d,s,j,D]),L=t.useCallback(async()=>{const t=e;o[t(470)](t(450)+t(670)+t(562)+"-accepts i"+t(615)+"sion)"),d&&(await i[t(595)](t(588)+"s")[t(608)]({status:t(573),result:n.DtQpv,completed_at:(new Date).toISOString()}).eq("id",d.id),await D(d["whitePlaye"+t(409)],d[t(641)+"rId"],t(516)))},[d,D]),S=t.useCallback(t=>{const n=e,s={};return s[n(471)]=t,s.verbose=!0,l[n(464)](s)[n(657)](e=>e.to)},[l]),A={};return A[e(457)]=l,A[e(514)]=d,A[e(586)]=C,A.myColor=j,A[e(538)]=x,A.error=p,A.makeMove=B,A[e(594)]=k,A[e(528)]=M,A.joinByCode=z,A[e(540)]=q,A[e(596)]=L,A[e(550)]=N,A[e(439)+e(522)]=S,A[e(677)+"es"]=g,A})(),Pt=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),S("lobby")};((e={})=>{const n=nn,s={CzQDk:function(e,t){return e instanceof t},awTpQ:function(e){return e()},BtjBc:"Sound unmu"+n(241),EDyyy:function(e,t){return e&&t},yOytt:n(212),dBoOm:function(e,t){return e===t},MQwZj:function(e){return e()},sMrwL:function(e,t,n){return e(t,n)},aEuiK:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=zt(),m=s.sMrwL(t.useCallback,e=>{const t=n;if(e[t(201)]instanceof HTMLInputElement||s.CzQDk(e[t(201)],HTMLTextAreaElement)||e[t(201)][t(199)+t(197)])return;const m=e[t(240)][t(226)+"e"]();switch(m){case"m":s[t(208)](u),o[t(204)](d?t(163)+"d":s[t(173)],{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":s[t(169)](c,r)&&(e.preventDefault(),s.awTpQ(r));break;case"d":c&&l&&a&&(e[t(165)+"ault"](),a());break;case s[t(177)]:i&&(e[t(165)+"ault"](),i());break;case"?":case"/":(!e[t(191)]||s.dBoOm(m,"?"))&&(e[t(165)+t(234)](),s.MQwZj(an))}},[u,d,r,a,i,c,l]);s.aEuiK(t.useEffect,()=>{const e=n;return window[e(175)+e(239)]("keydown",m),()=>window[e(220)+e(185)]("keydown",m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Dt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&yt?qt:void 0,onBackToLobby:"lobby"!==L?Pt:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&Lt(e).then(()=>S("game"))},[j,Lt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&We(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==L)return;const e=async()=>{Le(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Le(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[L]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==L&&(S("game"),null===et&&tt(Se))},[null==vt?void 0:vt.status,L,Se,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),We(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const It=async()=>{if(!k)return void P(!0);if(!M)return void G(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.white)||{};await Nt(J,V,t)&&S("waiting")},Gt=async e=>{if(!k)return void P(!0);if(!M)return void G(!0);const t=Ie.find(e=>e.id===F),n=(null==t?void 0:t.black)||{};await kt(e,n)&&S("game")},Kt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Se)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Se)-Math.abs((t.white_elo||1200)-Se)):[],Tt=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(F);const n=Ie.filter(e=>e.id!==F),s=n[Math.floor(Math.random()*n.length)];fe(s.id),S("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=Yn.find(e=>e.id===U))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Wt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Et=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Wt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=Nn,n={};n[t(554)]=function(e,t){return e+t},n.gnWhC=function(e,t){return e+t},n[t(570)]=function(e,t){return e*t},n.GaZCw=function(e,t){return e+t},n[t(545)]="stockfish";const s=n;switch(e){case"easy":return s[t(554)](300,500*Math[t(601)]());case t(548):return s.gnWhC(500,s[t(570)](Math[t(601)](),1e3));case t(505):return s[t(482)](800,1500*Math[t(601)]());case s[t(545)]:return 100;default:return 500}}(U);await new Promise(e=>setTimeout(e,i));const c=Kn(ee,U);if(c){const e=Wt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,U,ke,q]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(He,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx(Qt,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===L&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Xn.map(e=>u.jsx("button",{onClick:()=>{q.select(),E(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(T===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(K,{onClick:Tt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Yn.map(e=>u.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(U===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(Pe,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ge,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ke,{to:"/openings",children:u.jsxs(K,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Te,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ke,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(K,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Se).color} text-white font-display text-base sm:text-lg`,children:Se}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Se).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(K,{onClick:async()=>{if(!k)return void P(!0);if(!M)return void G(!0);const e=Kt().filter(e=>e.white_player_id!==k.id);e.length>0?await Gt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Kt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Kt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Fn.map(e=>u.jsxs("button",{onClick:()=>R(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>Z(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>Z(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(K,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(Ye,{className:"h-4 w-4"}),"Create Game",u.jsx(Ue,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(K,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void P(!0);if(!M)return void G(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.black)||{};await Mt(Q.trim(),t)&&S("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),Be?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Se)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Je(Se,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Fn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(H,{children:u.jsxs(z,{children:[u.jsx(B,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(D,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Se+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Se+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Se+a.loss]})]})]})]})}),u.jsx(K,{size:"sm",onClick:()=>Gt(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===L&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(p,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!V&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),u.jsx(K,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Re,{className:"h-4 w-4"})})]})]}),u.jsx(K,{variant:"outline",onClick:()=>{S("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===L&&vt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?yt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(K,{variant:"outline",size:"sm",onClick:Dt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(W,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Fe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:At,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ze,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ze,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==nt&&u.jsx(Zt,{oldRating:et,newRating:nt,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:Pt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(_e,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===L&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Yn.find(e=>e.id===U))?void 0:e.label," Bot (",null==(n=Yn.find(e=>e.id===U))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx($t,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(W,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Fe,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Ot,{fen:ee.fen(),onMove:Et,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===xe))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Ze,{whitePalette:(null==(d=Ie.find(e=>e.id===xe))?void 0:d.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===pe))?void 0:x.black)||Ie[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Ze,{whitePalette:(null==(f=Ie.find(e=>e.id===xe))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Vt,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(K,{onClick:Pt,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(K,{variant:"outline",onClick:Tt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(K,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Ve,{}),u.jsx(qe,{isOpen:A,onClose:()=>P(!1)}),u.jsx(De,{isOpen:I,onClose:()=>G(!1),trigger:"general"}),u.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===L?ue:we,whitePalette:"bot-game"===L?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===L?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===L||"w"===wt?"You":"Opponent",black:"bot-game"===L?`${null==(w=Yn.find(e=>e.id===U))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===L?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===L?ue.length:we.length}})]})};export{Vn as default};
