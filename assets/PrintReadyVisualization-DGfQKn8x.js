const n="import React from 'react';\nimport ChessBoardVisualization from './ChessBoardVisualization';\nimport GameInfoDisplay from './GameInfoDisplay';\nimport { EnPensentOverlay, MoveHistoryEntry } from './EnPensentOverlay';\nimport { SquareData } from '@/lib/chess/gameSimulator';\nimport { PieceType, PieceColor } from '@/lib/chess/pieceColors';\nimport { HighlightedPiece } from '@/contexts/LegendHighlightContext';\nimport StaticPieceOverlay from './StaticPieceOverlay';\nimport enPensentLogo from '@/assets/en-pensent-logo-new.png';\n\ninterface GameData {\n  white: string;\n  black: string;\n  event?: string;\n  date?: string;\n  result?: string;\n  moves?: string[];\n  pgn?: string;\n}\n\ninterface EnPensentData {\n  moveHistory: MoveHistoryEntry[];\n  whitePalette: Record<PieceType, string>;\n  blackPalette: Record<PieceType, string>;\n}\n\n// Highlight state for export rendering\ninterface HighlightState {\n  lockedPieces: Array<{ pieceType: PieceType; pieceColor: PieceColor }>;\n  lockedSquares?: Array<{ square: string; pieces: Array<{ pieceType: PieceType; pieceColor: PieceColor }> }>;\n  compareMode: boolean;\n}\n\n// Pieces overlay state for export rendering\ninterface PiecesState {\n  showPieces: boolean;\n  pieceOpacity: number;\n  currentMoveNumber?: number; // The move to show pieces at\n}\n\ninterface PrintReadyVisualizationProps {\n  // Standard simulation-based rendering\n  board?: SquareData[][];\n  gameData: GameData;\n  size?: number;\n  darkMode?: boolean;\n  showQR?: boolean;\n  qrDataUrl?: string;\n  compact?: boolean; // For wall mockup - smaller text\n  title?: string;\n  \n  // EnPensent live game rendering (alternative to board)\n  enPensentData?: EnPensentData;\n  \n  // Optional highlight state for export (captures locked pieces, compare mode)\n  highlightState?: HighlightState;\n  \n  // Optional pieces overlay state for export\n  piecesState?: PiecesState;\n  \n  // PGN for piece position calculation\n  pgn?: string;\n  \n  // Watermark for free downloads\n  withWatermark?: boolean;\n}\n\n/**\n * The unified \"trademark look\" visualization that matches our premium downloads.\n * This component is used for:\n * - Wall mockup preview\n * - Print image generation (Printify)\n * - Premium downloads\n * - Order print page preview\n * \n * Supports both:\n * - Simulation-based board data (SquareData[][])\n * - EnPensent live game data (MoveHistoryEntry[])\n */\nexport const PrintReadyVisualization: React.FC<PrintReadyVisualizationProps> = ({\n  board,\n  gameData,\n  size = 300,\n  darkMode = false,\n  showQR = false,\n  qrDataUrl,\n  compact = false,\n  title,\n  enPensentData,\n  highlightState,\n  piecesState,\n  pgn,\n  withWatermark = false,\n}) => {\n  const bgColor = darkMode ? '#0A0A0A' : '#FDFCFB';\n  const borderColor = darkMode ? '#292524' : '#e7e5e4';\n  const mutedColor = darkMode ? '#78716c' : '#a8a29e';\n  const primaryText = darkMode ? '#e7e5e4' : '#292524';\n  const secondaryText = darkMode ? '#a8a29e' : '#78716c';\n  \n  // Scale factor for compact mode (wall mockup)\n  const padding = compact ? 4 : 24;\n  const boardSize = size - (padding * 2);\n\n  // Get effective PGN for piece overlay\n  const effectivePgn = pgn || gameData.pgn || '';\n\n  // Render the chess board - either EnPensent overlay or standard visualization\n  const renderBoard = () => {\n    if (enPensentData) {\n      return (\n        <div style={{ position: 'relative', width: boardSize, height: boardSize }}>\n          {/* Base chess grid */}\n          <div style={{ \n            position: 'absolute', \n            inset: 0, \n            display: 'grid', \n            gridTemplateColumns: 'repeat(8, 1fr)',\n            gridTemplateRows: 'repeat(8, 1fr)',\n          }}>\n            {Array.from({ length: 64 }).map((_, i) => {\n              const row = Math.floor(i / 8);\n              const col = i % 8;\n              const isLight = (row + col) % 2 === 0;\n              return (\n                <div\n                  key={i}\n                  style={{ backgroundColor: isLight ? '#e7e5e4' : '#78716c' }}\n                />\n              );\n            })}\n          </div>\n          {/* EnPensent Overlay */}\n          <EnPensentOverlay\n            moveHistory={enPensentData.moveHistory}\n            whitePalette={enPensentData.whitePalette}\n            blackPalette={enPensentData.blackPalette}\n            opacity={0.85}\n            isEnabled={true}\n            flipped={false}\n          />\n        </div>\n      );\n    }\n    \n    if (board) {\n      // Convert highlight state to HighlightedPiece array for the visualization\n      const overrideHighlightedPieces: HighlightedPiece[] | undefined = highlightState?.lockedPieces.map(p => ({\n        pieceType: p.pieceType,\n        pieceColor: p.pieceColor,\n      }));\n      \n      return (\n        <div style={{ position: 'relative', width: boardSize, height: boardSize }}>\n          <ChessBoardVisualization \n            board={board} \n            size={boardSize}\n            overrideHighlightedPieces={overrideHighlightedPieces}\n            overrideCompareMode={highlightState?.compareMode}\n          />\n          {/* Pieces overlay using StaticPieceOverlay component */}\n          {piecesState?.showPieces && effectivePgn && (\n            <StaticPieceOverlay\n              pgn={effectivePgn}\n              currentMoveNumber={piecesState.currentMoveNumber}\n              size={boardSize}\n              pieceOpacity={piecesState.pieceOpacity}\n            />\n          )}\n        </div>\n      );\n    }\n    \n    // Fallback: empty chess grid\n    return (\n      <div style={{ \n        width: boardSize, \n        height: boardSize,\n        display: 'grid', \n        gridTemplateColumns: 'repeat(8, 1fr)',\n        gridTemplateRows: 'repeat(8, 1fr)',\n      }}>\n        {Array.from({ length: 64 }).map((_, i) => {\n          const row = Math.floor(i / 8);\n          const col = i % 8;\n          const isLight = (row + col) % 2 === 0;\n          return (\n            <div\n              key={i}\n              style={{ backgroundColor: isLight ? '#e7e5e4' : '#78716c' }}\n            />\n          );\n        })}\n      </div>\n    );\n  };\n\n  // For compact mode (wall mockup), use simplified display\n  if (compact) {\n    return (\n      <div\n        style={{\n          backgroundColor: bgColor,\n          padding: `${padding}px`,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          gap: 2,\n          width: 'fit-content',\n          borderRadius: 1,\n        }}\n      >\n        {/* Chess Board */}\n        <div style={{ position: 'relative' }}>\n          {renderBoard()}\n        </div>\n\n        {/* Compact Game Info - Trademark style */}\n        <div\n          style={{\n            width: '100%',\n            paddingTop: 2,\n            borderTop: `1px solid ${borderColor}`,\n            textAlign: 'center',\n          }}\n        >\n          {/* Player Names */}\n          <div style={{ \n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            gap: 2,\n          }}>\n            <span style={{ \n              fontSize: 4.5, \n              fontWeight: 600, \n              color: primaryText,\n              textTransform: 'uppercase',\n              letterSpacing: '0.02em',\n              fontFamily: \"'Cinzel', 'Times New Roman', serif\",\n            }}>\n              {gameData.white}\n            </span>\n            <span style={{ \n              fontSize: 3, \n              color: secondaryText,\n              fontStyle: 'italic',\n            }}>\n              vs\n            </span>\n            <span style={{ \n              fontSize: 4.5, \n              fontWeight: 600, \n              color: primaryText,\n              textTransform: 'uppercase',\n              letterSpacing: '0.02em',\n              fontFamily: \"'Cinzel', 'Times New Roman', serif\",\n            }}>\n              {gameData.black}\n            </span>\n          </div>\n          \n          {/* Event */}\n          <p style={{ \n            fontSize: 3, \n            color: mutedColor,\n            margin: '1px 0 0 0',\n            fontStyle: 'italic',\n            fontFamily: \"'Cormorant Garamond', Georgia, serif\",\n          }}>\n            {gameData.event || 'Chess Game'}\n          </p>\n        </div>\n        \n        {/* Branding footer */}\n        <p style={{ \n          fontSize: 2.5, \n          color: mutedColor,\n          letterSpacing: '0.15em',\n          textTransform: 'uppercase',\n          margin: 0,\n        }}>\n          ♔ En Pensent ♚\n        </p>\n      </div>\n    );\n  }\n\n  // Full \"trademark look\" display\n  return (\n    <div\n      style={{\n        backgroundColor: bgColor,\n        padding: `${padding}px`,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        gap: 24,\n        width: 'fit-content',\n        borderRadius: 4,\n        border: `1px solid ${borderColor}`,\n        boxShadow: '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\n      }}\n    >\n      {/* Chess Board */}\n      <div style={{ position: 'relative' }}>\n        {renderBoard()}\n        \n        {/* Watermark for free downloads - matches reference exactly */}\n        {withWatermark && (\n          <div\n            style={{\n              position: 'absolute',\n              bottom: 12,\n              right: 12,\n              backgroundColor: 'rgba(255, 255, 255, 0.95)',\n              padding: '8px 12px',\n              borderRadius: 6,\n              border: '1px solid #e7e5e4',\n              display: 'flex',\n              alignItems: 'center',\n              gap: 10,\n              boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\n            }}\n          >\n            {/* Logo */}\n            <img\n              src={enPensentLogo}\n              alt=\"En Pensent\"\n              style={{\n                width: 48,\n                height: 48,\n                borderRadius: '50%',\n                objectFit: 'cover',\n              }}\n            />\n            \n            {/* Text - using Inter for bold title, italic for URL */}\n            <div style={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\n              <span\n                style={{\n                  fontSize: 14,\n                  fontWeight: 600,\n                  color: '#292524',\n                  fontFamily: \"'Inter', system-ui, sans-serif\",\n                  letterSpacing: '0.02em',\n                }}\n              >\n                EN PENSENT\n              </span>\n              <span\n                style={{\n                  fontSize: 11,\n                  color: '#78716c',\n                  fontFamily: \"'Cormorant Garamond', Georgia, serif\",\n                  fontStyle: 'italic',\n                }}\n              >\n                enpensent.com\n              </span>\n            </div>\n          </div>\n        )}\n        \n        {/* QR Code overlay for premium prints */}\n        {showQR && qrDataUrl && !withWatermark && (\n          <div\n            style={{\n              position: 'absolute',\n              bottom: 4,\n              right: 4,\n              backgroundColor: 'rgba(0, 0, 0, 0.75)',\n              padding: 3,\n              borderRadius: 4,\n              border: '1px solid rgba(212, 175, 55, 0.25)',\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              gap: 2,\n            }}\n          >\n            <div style={{ position: 'relative', width: 36, height: 36 }}>\n              <img \n                src={qrDataUrl} \n                alt=\"QR\" \n                style={{ width: 36, height: 36, display: 'block' }} \n              />\n              <img\n                src={enPensentLogo}\n                alt=\"\"\n                style={{\n                  position: 'absolute',\n                  width: 10,\n                  height: 10,\n                  top: '50%',\n                  left: '50%',\n                  transform: 'translate(-50%, -50%)',\n                  borderRadius: '50%',\n                  border: '1px solid rgba(212, 175, 55, 0.4)',\n                }}\n              />\n            </div>\n            <p\n              style={{\n                fontSize: 4,\n                color: 'rgba(212, 175, 55, 0.5)',\n                letterSpacing: '0.15em',\n                margin: 0,\n                fontFamily: \"'Inter', system-ui, sans-serif\",\n              }}\n            >\n              SCAN\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Game Info Section - Using the same GameInfoDisplay component */}\n      <div\n        style={{\n          width: '100%',\n          paddingTop: 16,\n          borderTop: `1px solid ${borderColor}`,\n        }}\n      >\n        <GameInfoDisplay \n          gameData={{\n            white: gameData.white,\n            black: gameData.black,\n            event: gameData.event || '',\n            date: gameData.date || '',\n            result: gameData.result || '',\n            moves: gameData.moves || [],\n            pgn: '',\n          }} \n          title={title}\n          darkMode={darkMode} \n        />\n      </div>\n\n      {/* Branding */}\n      <p\n        style={{\n          fontSize: 10,\n          letterSpacing: '0.3em',\n          textTransform: 'uppercase',\n          fontWeight: 500,\n          color: mutedColor,\n          margin: 0,\n          fontFamily: \"'Inter', system-ui, sans-serif\",\n        }}\n      >\n        ♔ En Pensent ♚\n      </p>\n    </div>\n  );\n};\n\nexport default PrintReadyVisualization;\n";export{n as default};
