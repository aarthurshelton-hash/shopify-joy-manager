const n='/**\n * Live Prediction Stream Component\n * \n * Shows real-time predictions as they\'re processed during benchmark runs.\n * Displays each prediction with its outcome, archetype, and time control.\n */\n\nimport React from \'react\';\nimport { Card, CardContent, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { ScrollArea } from \'@/components/ui/scroll-area\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { CheckCircle, XCircle, Zap, Brain, Cpu, Clock, Timer, Users } from \'lucide-react\';\nimport { formatTimeControl } from \'@/lib/chess/disagreementTracker\';\n\nexport interface LivePrediction {\n  id: string;\n  gameName: string;\n  moveNumber: number;\n  fen: string;\n  hybridPrediction: string;\n  hybridArchetype: string;\n  hybridConfidence: number;\n  hybridCorrect: boolean;\n  stockfishPrediction: string;\n  stockfishEval: number;\n  stockfishDepth: number;\n  stockfishCorrect: boolean;\n  actualResult: string;\n  timeControl?: string;\n  whiteElo?: number;\n  blackElo?: number;\n  timestamp: number;\n}\n\ninterface LivePredictionStreamProps {\n  predictions: LivePrediction[];\n  isRunning: boolean;\n  maxDisplay?: number;\n}\n\nexport function LivePredictionStream({ \n  predictions, \n  isRunning, \n  maxDisplay = 10 \n}: LivePredictionStreamProps) {\n  // Show most recent predictions first\n  const displayPredictions = [...predictions].reverse().slice(0, maxDisplay);\n  \n  // Calculate running stats\n  const hybridWins = predictions.filter(p => p.hybridCorrect && !p.stockfishCorrect).length;\n  const stockfishWins = predictions.filter(p => !p.hybridCorrect && p.stockfishCorrect).length;\n  const bothCorrect = predictions.filter(p => p.hybridCorrect && p.stockfishCorrect).length;\n  const hybridTotal = predictions.filter(p => p.hybridCorrect).length;\n  const stockfishTotal = predictions.filter(p => p.stockfishCorrect).length;\n  \n  const hybridAccuracy = predictions.length > 0 ? (hybridTotal / predictions.length) * 100 : 0;\n  const stockfishAccuracy = predictions.length > 0 ? (stockfishTotal / predictions.length) * 100 : 0;\n\n  if (predictions.length === 0 && !isRunning) {\n    return null;\n  }\n\n  return (\n    <Card className="border-primary/30 bg-gradient-to-br from-primary/5 to-transparent">\n      <CardHeader className="pb-2">\n        <CardTitle className="flex items-center justify-between text-sm">\n          <div className="flex items-center gap-2">\n            <Zap className="h-4 w-4 text-yellow-500" />\n            Live Prediction Stream\n            {isRunning && (\n              <Badge variant="outline" className="animate-pulse bg-green-500/20 text-green-400 border-green-500/30">\n                LIVE\n              </Badge>\n            )}\n          </div>\n          <div className="flex items-center gap-3 text-xs">\n            <span className="text-muted-foreground">{predictions.length} analyzed</span>\n            <span className="text-purple-400">EP: {hybridAccuracy.toFixed(1)}%</span>\n            <span className="text-blue-400">SF: {stockfishAccuracy.toFixed(1)}%</span>\n          </div>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className="space-y-3">\n        {/* Running Score */}\n        <div className="grid grid-cols-4 gap-2 text-center text-xs">\n          <div className="p-2 bg-purple-500/10 rounded-lg border border-purple-500/20">\n            <p className="text-lg font-bold text-purple-400">{hybridWins}</p>\n            <p className="text-muted-foreground">EP Wins</p>\n          </div>\n          <div className="p-2 bg-blue-500/10 rounded-lg border border-blue-500/20">\n            <p className="text-lg font-bold text-blue-400">{stockfishWins}</p>\n            <p className="text-muted-foreground">SF Wins</p>\n          </div>\n          <div className="p-2 bg-green-500/10 rounded-lg border border-green-500/20">\n            <p className="text-lg font-bold text-green-400">{bothCorrect}</p>\n            <p className="text-muted-foreground">Both ✓</p>\n          </div>\n          <div className="p-2 bg-muted/30 rounded-lg">\n            <p className="text-lg font-bold">\n              {hybridWins > stockfishWins ? (\n                <span className="text-purple-400">+{hybridWins - stockfishWins}</span>\n              ) : hybridWins < stockfishWins ? (\n                <span className="text-blue-400">{hybridWins - stockfishWins}</span>\n              ) : (\n                <span className="text-muted-foreground">0</span>\n              )}\n            </p>\n            <p className="text-muted-foreground">Net</p>\n          </div>\n        </div>\n\n        {/* Live Stream */}\n        <ScrollArea className="h-[280px]">\n          <AnimatePresence initial={false}>\n            {displayPredictions.map((prediction, index) => {\n              const timeControlInfo = formatTimeControl(prediction.timeControl);\n              const isBreakthrough = prediction.hybridCorrect && !prediction.stockfishCorrect;\n              const isStockfishWin = !prediction.hybridCorrect && prediction.stockfishCorrect;\n              \n              return (\n                <motion.div\n                  key={prediction.id}\n                  initial={{ opacity: 0, y: -20, scale: 0.95 }}\n                  animate={{ opacity: 1, y: 0, scale: 1 }}\n                  exit={{ opacity: 0, x: -20 }}\n                  transition={{ \n                    duration: 0.3, \n                    delay: index === 0 ? 0 : 0.05 \n                  }}\n                  className={`mb-2 p-3 rounded-lg border transition-colors ${\n                    isBreakthrough \n                      ? \'bg-green-500/10 border-green-500/30\' \n                      : isStockfishWin \n                        ? \'bg-red-500/10 border-red-500/30\'\n                        : \'bg-muted/30 border-muted\'\n                  }`}\n                >\n                  <div className="flex items-start justify-between gap-2">\n                    <div className="flex-1 min-w-0">\n                      <div className="flex items-center gap-2 flex-wrap mb-1">\n                        <span className="font-medium text-sm truncate">\n                          {prediction.gameName}\n                        </span>\n                        <Badge variant="outline" className={`${timeControlInfo.color} text-xs border-current/30`}>\n                          {timeControlInfo.icon} {timeControlInfo.label}\n                        </Badge>\n                        {(prediction.whiteElo || prediction.blackElo) && (\n                          <Badge variant="outline" className="text-xs text-muted-foreground">\n                            <Users className="h-3 w-3 mr-1" />\n                            ~{Math.round(((prediction.whiteElo || 0) + (prediction.blackElo || 0)) / 2)}\n                          </Badge>\n                        )}\n                      </div>\n                      \n                      <div className="flex items-center gap-3 text-xs text-muted-foreground">\n                        <span className="flex items-center gap-1">\n                          <Clock className="h-3 w-3" />\n                          Move {prediction.moveNumber}\n                        </span>\n                        <span>•</span>\n                        <span className="flex items-center gap-1">\n                          <Cpu className="h-3 w-3" />\n                          d{prediction.stockfishDepth}\n                        </span>\n                        <span>•</span>\n                        <span className="font-mono">\n                          {prediction.stockfishEval > 0 ? \'+\' : \'\'}{(prediction.stockfishEval / 100).toFixed(1)}\n                        </span>\n                        <span>•</span>\n                        <span className="flex items-center gap-1">\n                          <Brain className="h-3 w-3 text-purple-400" />\n                          {prediction.hybridArchetype}\n                        </span>\n                      </div>\n                    </div>\n                    \n                    <div className="flex flex-col gap-1 shrink-0">\n                      <div className={`flex items-center gap-1 text-xs ${\n                        prediction.hybridCorrect ? \'text-green-400\' : \'text-red-400\'\n                      }`}>\n                        {prediction.hybridCorrect ? (\n                          <CheckCircle className="h-3 w-3" />\n                        ) : (\n                          <XCircle className="h-3 w-3" />\n                        )}\n                        EP\n                      </div>\n                      <div className={`flex items-center gap-1 text-xs ${\n                        prediction.stockfishCorrect ? \'text-green-400\' : \'text-red-400\'\n                      }`}>\n                        {prediction.stockfishCorrect ? (\n                          <CheckCircle className="h-3 w-3" />\n                        ) : (\n                          <XCircle className="h-3 w-3" />\n                        )}\n                        SF\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Prediction breakdown */}\n                  <div className="grid grid-cols-3 gap-2 mt-2 text-xs">\n                    <div className={`p-1.5 rounded text-center ${\n                      prediction.stockfishCorrect ? \'bg-green-500/20\' : \'bg-red-500/20\'\n                    }`}>\n                      <span className="text-muted-foreground">SF:</span>{\' \'}\n                      <span className="font-medium">{prediction.stockfishPrediction}</span>\n                    </div>\n                    <div className={`p-1.5 rounded text-center ${\n                      prediction.hybridCorrect ? \'bg-green-500/20\' : \'bg-red-500/20\'\n                    }`}>\n                      <span className="text-muted-foreground">EP:</span>{\' \'}\n                      <span className="font-medium">{prediction.hybridPrediction}</span>\n                    </div>\n                    <div className="p-1.5 rounded text-center bg-primary/20">\n                      <span className="text-muted-foreground">Actual:</span>{\' \'}\n                      <span className="font-medium text-primary">{prediction.actualResult}</span>\n                    </div>\n                  </div>\n                </motion.div>\n              );\n            })}\n          </AnimatePresence>\n          \n          {predictions.length === 0 && isRunning && (\n            <div className="text-center py-8 text-muted-foreground">\n              <Timer className="h-8 w-8 mx-auto mb-2 animate-pulse" />\n              <p>Waiting for predictions...</p>\n            </div>\n          )}\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}\n';export{n as default};
