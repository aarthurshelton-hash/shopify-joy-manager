const n='import React, { useState } from \'react\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { FileText, Check, Info, Crown, Sparkles, Lock, Eye, X } from \'lucide-react\';\nimport { Button } from \'@/components/ui/button\';\nimport { Card, CardContent } from \'@/components/ui/card\';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \'@/components/ui/tooltip\';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \'@/components/ui/dialog\';\nimport { VisionInfoCardPreview } from \'./VisionInfoCardPreview\';\nimport { SquareData } from \'@/lib/chess/gameSimulator\';\nimport { MoveHistoryEntry } from \'@/components/chess/EnPensentOverlay\';\n\ninterface InfoCardAddOnProps {\n  isPremium: boolean;\n  onAddInfoCard: (include: boolean) => void;\n  includeInfoCard: boolean;\n  onUpgradePremium?: () => void;\n  // Preview data props\n  board?: SquareData[][];\n  gameData?: {\n    white?: string;\n    black?: string;\n    event?: string;\n    date?: string;\n    result?: string;\n  };\n  moveHistory?: MoveHistoryEntry[];\n  totalMoves?: number;\n  whitePalette?: Record<string, string>;\n  blackPalette?: Record<string, string>;\n  darkMode?: boolean;\n}\n\n// Price for the physical info card add-on\nconst INFO_CARD_PRICE = 9.99;\n\nexport const InfoCardAddOn: React.FC<InfoCardAddOnProps> = ({\n  isPremium,\n  onAddInfoCard,\n  includeInfoCard,\n  onUpgradePremium,\n  board,\n  gameData,\n  moveHistory,\n  totalMoves = 0,\n  whitePalette,\n  blackPalette,\n  darkMode = false,\n}) => {\n  const [showDetails, setShowDetails] = useState(false);\n  const [showPreview, setShowPreview] = useState(false);\n\n  // Allow preview if we have palettes (even without board, we can show a sample)\n  const canPreview = whitePalette && blackPalette;\n\n  return (\n    <>\n      <Card className="overflow-hidden border-primary/20">\n        <CardContent className="p-4 space-y-3">\n          {/* Header */}\n          <div className="flex items-center justify-between">\n            <div className="flex items-center gap-2">\n              <div className="h-8 w-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center">\n                <FileText className="h-4 w-4 text-primary" />\n              </div>\n              <div>\n                <span className="font-medium text-sm">Vision Data Card</span>\n                <p className="text-[10px] text-muted-foreground">Printed companion piece</p>\n              </div>\n            </div>\n            <div className="flex items-center gap-1">\n              {/* Preview Button */}\n              {canPreview && (\n                <TooltipProvider>\n                  <Tooltip>\n                    <TooltipTrigger asChild>\n                      <Button\n                        variant="ghost"\n                        size="icon"\n                        className="h-8 w-8 rounded-full hover:bg-primary/10"\n                        onClick={() => setShowPreview(true)}\n                      >\n                        <Eye className="h-4 w-4 text-primary" />\n                      </Button>\n                    </TooltipTrigger>\n                    <TooltipContent>\n                      <p>Preview your Vision Card</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </TooltipProvider>\n              )}\n              <TooltipProvider>\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <button \n                      onClick={() => setShowDetails(!showDetails)}\n                      className="p-1 rounded-full hover:bg-accent/50 transition-colors"\n                    >\n                      <Info className="h-4 w-4 text-muted-foreground" />\n                    </button>\n                  </TooltipTrigger>\n                  <TooltipContent className="max-w-xs">\n                    <p className="text-sm font-medium">Vision Data Card</p>\n                    <p className="text-xs text-muted-foreground mt-1">\n                      A beautiful 3.5×2" printed card with all the game data, color legend, \n                      piece statistics, and territory analysis from your visualization.\n                    </p>\n                    <p className="text-xs text-primary mt-1 font-medium">\n                      Perfect for including with your print order!\n                    </p>\n                  </TooltipContent>\n                </Tooltip>\n              </TooltipProvider>\n            </div>\n          </div>\n\n          {/* Preview of what\'s included */}\n          <AnimatePresence>\n            {showDetails && (\n              <motion.div\n                initial={{ height: 0, opacity: 0 }}\n                animate={{ height: \'auto\', opacity: 1 }}\n                exit={{ height: 0, opacity: 0 }}\n                className="overflow-hidden"\n              >\n                <div className="bg-muted/30 rounded-lg p-3 space-y-2 text-xs">\n                  <p className="font-medium">Includes:</p>\n                  <ul className="space-y-1 text-muted-foreground">\n                    <li className="flex items-center gap-2">\n                      <Sparkles className="h-3 w-3 text-primary" />\n                      Full color legend with piece activity stats\n                    </li>\n                    <li className="flex items-center gap-2">\n                      <Sparkles className="h-3 w-3 text-primary" />\n                      Territory control analysis\n                    </li>\n                    <li className="flex items-center gap-2">\n                      <Sparkles className="h-3 w-3 text-primary" />\n                      Game phase timeline breakdown\n                    </li>\n                    <li className="flex items-center gap-2">\n                      <Sparkles className="h-3 w-3 text-primary" />\n                      MVP piece highlight\n                    </li>\n                    <li className="flex items-center gap-2">\n                      <Sparkles className="h-3 w-3 text-primary" />\n                      Premium matte 3.5×2" cardstock\n                    </li>\n                  </ul>\n                  \n                  {/* Preview button in details */}\n                  {canPreview && (\n                    <Button\n                      variant="outline"\n                      size="sm"\n                      onClick={() => setShowPreview(true)}\n                      className="w-full mt-2 gap-2"\n                    >\n                      <Eye className="h-3 w-3" />\n                      Preview Your Card\n                    </Button>\n                  )}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {isPremium ? (\n            <div className="flex gap-2">\n              <Button\n                variant={!includeInfoCard ? "default" : "outline"}\n                size="sm"\n                onClick={() => onAddInfoCard(false)}\n                className="flex-1"\n              >\n                No Card\n              </Button>\n              <Button\n                variant={includeInfoCard ? "default" : "outline"}\n                size="sm"\n                onClick={() => onAddInfoCard(true)}\n                className="flex-1 gap-2"\n              >\n                {includeInfoCard && <Check className="h-3 w-3" />}\n                Add Card +${INFO_CARD_PRICE}\n              </Button>\n            </div>\n          ) : (\n            <Button\n              variant="outline"\n              size="sm"\n              onClick={onUpgradePremium}\n              className="w-full gap-2 border-primary/30 text-primary hover:bg-primary/10"\n            >\n              <Lock className="h-3 w-3" />\n              <span>Visionary Exclusive</span>\n              <Crown className="h-3 w-3" />\n            </Button>\n          )}\n\n          {/* Always show Preview Button when we have palette data */}\n          {canPreview && (\n            <Button\n              variant="outline"\n              size="sm"\n              onClick={() => setShowPreview(true)}\n              className="w-full gap-2 border-primary/20 hover:border-primary/50 hover:bg-primary/5"\n            >\n              <Eye className="h-4 w-4 text-primary" />\n              Preview Your Vision Card\n            </Button>\n          )}\n\n          {/* Price display */}\n          {includeInfoCard && isPremium && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className="flex items-center justify-between pt-2 border-t"\n            >\n              <span className="text-sm text-muted-foreground">Info Card add-on:</span>\n              <span className="font-bold text-primary">+${INFO_CARD_PRICE}</span>\n            </motion.div>\n          )}\n\n          {/* Premium upsell for free users */}\n          {!isPremium && (\n            <p className="text-[10px] text-muted-foreground text-center">\n              Upgrade to Visionary Premium to unlock this collector\'s add-on\n            </p>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Preview Modal */}\n      <Dialog open={showPreview} onOpenChange={setShowPreview}>\n        <DialogContent className="max-w-md">\n          <DialogHeader>\n            <DialogTitle className="flex items-center gap-2">\n              <FileText className="h-5 w-5 text-primary" />\n              Vision Data Card Preview\n            </DialogTitle>\n          </DialogHeader>\n          \n          {canPreview && whitePalette && blackPalette && (\n            <VisionInfoCardPreview\n              board={board}\n              gameData={gameData}\n              moveHistory={moveHistory}\n              totalMoves={totalMoves || 50}\n              whitePalette={whitePalette}\n              blackPalette={blackPalette}\n              darkMode={darkMode}\n              showSpecs={true}\n            />\n          )}\n          \n          <div className="flex gap-2 pt-2">\n            <Button\n              variant="outline"\n              onClick={() => setShowPreview(false)}\n              className="flex-1"\n            >\n              Close\n            </Button>\n            {isPremium && !includeInfoCard && (\n              <Button\n                onClick={() => {\n                  onAddInfoCard(true);\n                  setShowPreview(false);\n                }}\n                className="flex-1 gap-2"\n              >\n                <Check className="h-4 w-4" />\n                Add to Order +${INFO_CARD_PRICE}\n              </Button>\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n\nexport const INFO_CARD_PRICE_EXPORT = INFO_CARD_PRICE;\n\nexport default InfoCardAddOn;\n';export{n as default};
