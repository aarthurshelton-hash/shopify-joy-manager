const e='/**\n * Universal Adapter Monitor\n * \n * Real-time visualization of all 55 domain adapters with:\n * - Domain grouping and health metrics\n * - Cross-domain resonance visualization\n * - Evolution cycle tracking\n * - Integration with code analysis results\n */\n\nimport React, { useState, useMemo } from \'react\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { Card, CardContent, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Progress } from \'@/components/ui/progress\';\nimport { Button } from \'@/components/ui/button\';\nimport { ScrollArea } from \'@/components/ui/scroll-area\';\nimport { \n  Activity, \n  Zap, \n  GitBranch, \n  Brain,\n  Target,\n  RefreshCw,\n  Layers,\n  Network,\n  TrendingUp,\n  Sparkles,\n  ChevronDown,\n  ChevronUp,\n  Share2\n} from \'lucide-react\';\nimport { \n  useUniversalAdapterMonitor, \n  getDomainColor,\n  type AdapterMetrics,\n  type ResonanceMetrics \n} from \'@/hooks/useUniversalAdapterMonitor\';\nimport { useUnifiedEvolution } from \'@/hooks/useUnifiedEvolution\';\n\ninterface UniversalAdapterMonitorProps {\n  compact?: boolean;\n  showCodeIntegration?: boolean;\n  codeHealth?: number;\n  onAdapterClick?: (adapter: AdapterMetrics) => void;\n}\n\nexport const UniversalAdapterMonitor: React.FC<UniversalAdapterMonitorProps> = ({\n  compact = false,\n  showCodeIntegration = true,\n  codeHealth,\n  onAdapterClick\n}) => {\n  const monitor = useUniversalAdapterMonitor(3000);\n  const evolution = useUnifiedEvolution();\n  const [expandedDomain, setExpandedDomain] = useState<string | null>(null);\n  const [showResonances, setShowResonances] = useState(false);\n\n  // Group adapters by domain\n  const adaptersByDomain = useMemo(() => {\n    const groups = new Map<string, AdapterMetrics[]>();\n    monitor.adapters.forEach(adapter => {\n      const list = groups.get(adapter.domain) || [];\n      list.push(adapter);\n      groups.set(adapter.domain, list);\n    });\n    return groups;\n  }, [monitor.adapters]);\n\n  // Calculate overall system health\n  const systemHealth = useMemo(() => {\n    if (monitor.adapters.length === 0) return 0;\n    const totalHealth = monitor.adapters.reduce((sum, a) => sum + a.healthScore, 0);\n    return Math.round(totalHealth / monitor.adapters.length);\n  }, [monitor.adapters]);\n\n  // Calculate cross-domain resonance intensity\n  const resonanceIntensity = useMemo(() => {\n    if (monitor.resonances.length === 0) return 0;\n    const totalScore = monitor.resonances.reduce((sum, r) => sum + r.resonanceScore, 0);\n    return Math.round((totalScore / monitor.resonances.length) * 100);\n  }, [monitor.resonances]);\n\n  const handleSync = () => {\n    monitor.triggerSync();\n    evolution.emitEvolution({\n      type: \'pattern_discovered\',\n      source: \'code\',\n      data: { action: \'manual_sync\', systemHealth, resonanceIntensity },\n      timestamp: new Date()\n    });\n  };\n\n  if (compact) {\n    return (\n      <Card className="bg-gradient-to-br from-violet-500/5 via-background to-fuchsia-500/10 border-violet-500/20">\n        <CardHeader className="pb-3">\n          <div className="flex items-center justify-between">\n            <div className="flex items-center gap-2">\n              <Network className="h-5 w-5 text-violet-500" />\n              <CardTitle className="text-lg">Universal Adapters</CardTitle>\n            </div>\n            <Badge variant="outline" className="text-xs">\n              {monitor.activeCount}/{monitor.adapters.length} Active\n            </Badge>\n          </div>\n        </CardHeader>\n        <CardContent className="space-y-3">\n          <div className="flex items-center justify-between">\n            <span className="text-sm text-muted-foreground">System Health</span>\n            <span className={`font-bold ${systemHealth >= 80 ? \'text-green-500\' : systemHealth >= 60 ? \'text-yellow-500\' : \'text-red-500\'}`}>\n              {systemHealth}%\n            </span>\n          </div>\n          <Progress value={systemHealth} className="h-2" />\n          \n          {showCodeIntegration && codeHealth !== undefined && (\n            <div className="flex items-center gap-2 pt-2 border-t">\n              <GitBranch className="h-4 w-4 text-blue-500" />\n              <span className="text-sm">Code Health: {codeHealth}%</span>\n              <Badge variant="outline" className="ml-auto text-xs">\n                {resonanceIntensity > 70 ? \'Synced\' : \'Drifting\'}\n              </Badge>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className="bg-gradient-to-br from-violet-500/5 via-background to-fuchsia-500/10 border-violet-500/20">\n      <CardHeader>\n        <div className="flex items-center justify-between">\n          <div className="flex items-center gap-2">\n            <motion.div\n              animate={{ rotate: [0, 360] }}\n              transition={{ duration: 20, repeat: Infinity, ease: "linear" }}\n            >\n              <Network className="h-6 w-6 text-violet-500" />\n            </motion.div>\n            <div>\n              <CardTitle className="flex items-center gap-2">\n                Universal Adapter Monitor\n                <Badge variant="outline" className="text-xs">v7.52-SYNC</Badge>\n              </CardTitle>\n              <p className="text-sm text-muted-foreground">\n                {monitor.adapters.length} domain adapters • Cycle #{monitor.evolutionCycle}\n              </p>\n            </div>\n          </div>\n          <div className="flex items-center gap-2">\n            <Button variant="outline" size="sm" onClick={handleSync}>\n              <RefreshCw className="h-4 w-4 mr-1" />\n              Sync\n            </Button>\n            <Button \n              variant="outline" \n              size="sm"\n              onClick={() => setShowResonances(!showResonances)}\n            >\n              <Share2 className="h-4 w-4 mr-1" />\n              {showResonances ? \'Hide\' : \'Show\'} Resonances\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent className="space-y-6">\n        {/* Top Metrics */}\n        <div className="grid grid-cols-4 gap-4">\n          <MetricCard\n            icon={<Activity className="h-4 w-4" />}\n            label="System Health"\n            value={`${systemHealth}%`}\n            color={systemHealth >= 80 ? \'text-green-500\' : systemHealth >= 60 ? \'text-yellow-500\' : \'text-red-500\'}\n          />\n          <MetricCard\n            icon={<Zap className="h-4 w-4" />}\n            label="Total Signals"\n            value={monitor.totalSignals.toLocaleString()}\n            color="text-violet-500"\n          />\n          <MetricCard\n            icon={<Layers className="h-4 w-4" />}\n            label="Active Adapters"\n            value={`${monitor.activeCount}/${monitor.adapters.length}`}\n            color="text-blue-500"\n          />\n          <MetricCard\n            icon={<TrendingUp className="h-4 w-4" />}\n            label="Resonance"\n            value={`${resonanceIntensity}%`}\n            color={resonanceIntensity > 70 ? \'text-green-500\' : \'text-orange-500\'}\n          />\n        </div>\n\n        {/* Code Integration Section */}\n        {showCodeIntegration && codeHealth !== undefined && (\n          <div className="p-4 rounded-lg bg-gradient-to-r from-blue-500/10 to-violet-500/10 border border-blue-500/20">\n            <div className="flex items-center justify-between mb-3">\n              <div className="flex items-center gap-2">\n                <GitBranch className="h-5 w-5 text-blue-500" />\n                <h3 className="font-semibold">Code-Adapter Integration</h3>\n              </div>\n              <Badge \n                variant="outline" \n                className={Math.abs(systemHealth - codeHealth) < 15 ? \'bg-green-500/10 text-green-500\' : \'bg-yellow-500/10 text-yellow-500\'}\n              >\n                {Math.abs(systemHealth - codeHealth) < 15 ? \'Aligned\' : \'Drift Detected\'}\n              </Badge>\n            </div>\n            <div className="grid grid-cols-2 gap-4">\n              <div>\n                <div className="flex justify-between text-sm mb-1">\n                  <span className="text-muted-foreground">Code Health</span>\n                  <span className="font-medium">{codeHealth}%</span>\n                </div>\n                <Progress value={codeHealth} className="h-2" />\n              </div>\n              <div>\n                <div className="flex justify-between text-sm mb-1">\n                  <span className="text-muted-foreground">Adapter Health</span>\n                  <span className="font-medium">{systemHealth}%</span>\n                </div>\n                <Progress value={systemHealth} className="h-2 bg-violet-500/20" />\n              </div>\n            </div>\n            <p className="text-xs text-muted-foreground mt-2">\n              Alignment Score: {Math.round(100 - Math.abs(systemHealth - codeHealth))}% • \n              Difference: {Math.abs(systemHealth - codeHealth)}%\n            </p>\n          </div>\n        )}\n\n        {/* Domain Groups */}\n        <div className="space-y-3">\n          <h3 className="font-semibold flex items-center gap-2">\n            <Layers className="h-4 w-4" />\n            Domain Groups ({adaptersByDomain.size} domains)\n          </h3>\n          <ScrollArea className="h-64">\n            <div className="space-y-2">\n              {Array.from(adaptersByDomain.entries()).map(([domain, adapters]) => (\n                <DomainAccordion\n                  key={domain}\n                  domain={domain}\n                  adapters={adapters}\n                  isExpanded={expandedDomain === domain}\n                  onToggle={() => setExpandedDomain(expandedDomain === domain ? null : domain)}\n                  onAdapterClick={onAdapterClick}\n                />\n              ))}\n            </div>\n          </ScrollArea>\n        </div>\n\n        {/* Resonance View */}\n        <AnimatePresence>\n          {showResonances && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \'auto\' }}\n              exit={{ opacity: 0, height: 0 }}\n              className="space-y-3"\n            >\n              <h3 className="font-semibold flex items-center gap-2">\n                <Share2 className="h-4 w-4" />\n                Cross-Domain Resonances ({monitor.resonances.length} pairs)\n              </h3>\n              <ScrollArea className="h-48">\n                <div className="space-y-2">\n                  {monitor.topResonances.map((resonance, idx) => (\n                    <ResonanceCard key={`${resonance.adapter1}-${resonance.adapter2}`} resonance={resonance} index={idx} />\n                  ))}\n                </div>\n              </ScrollArea>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Footer Stats */}\n        <div className="flex items-center justify-between text-xs text-muted-foreground pt-4 border-t">\n          <div className="flex items-center gap-4">\n            <span>Evolution Cycle: #{monitor.evolutionCycle}</span>\n            <span>Last Update: {new Date(monitor.lastUpdate).toLocaleTimeString()}</span>\n          </div>\n          <div className="flex items-center gap-2">\n            <Sparkles className="h-3 w-3" />\n            <span>Self-Evolving Architecture Active</span>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\n// Metric Card Component\nconst MetricCard: React.FC<{\n  icon: React.ReactNode;\n  label: string;\n  value: string;\n  color: string;\n}> = ({ icon, label, value, color }) => (\n  <div className="p-3 rounded-lg bg-muted/50 border">\n    <div className="flex items-center gap-2 text-muted-foreground mb-1">\n      {icon}\n      <span className="text-xs">{label}</span>\n    </div>\n    <p className={`text-xl font-bold ${color}`}>{value}</p>\n  </div>\n);\n\n// Domain Accordion Component\nconst DomainAccordion: React.FC<{\n  domain: string;\n  adapters: AdapterMetrics[];\n  isExpanded: boolean;\n  onToggle: () => void;\n  onAdapterClick?: (adapter: AdapterMetrics) => void;\n}> = ({ domain, adapters, isExpanded, onToggle, onAdapterClick }) => {\n  const color = getDomainColor(domain);\n  const avgHealth = Math.round(adapters.reduce((sum, a) => sum + a.healthScore, 0) / adapters.length);\n  const activeCount = adapters.filter(a => a.isActive).length;\n  const totalSignals = adapters.reduce((sum, a) => sum + a.signalCount, 0);\n\n  return (\n    <div className="rounded-lg border overflow-hidden">\n      <button\n        onClick={onToggle}\n        className="w-full p-3 flex items-center justify-between bg-muted/30 hover:bg-muted/50 transition-colors"\n      >\n        <div className="flex items-center gap-3">\n          <div \n            className="w-3 h-3 rounded-full" \n            style={{ backgroundColor: color }}\n          />\n          <span className="font-medium capitalize">{domain}</span>\n          <Badge variant="outline" className="text-xs">\n            {adapters.length} adapters\n          </Badge>\n        </div>\n        <div className="flex items-center gap-3">\n          <span className="text-xs text-muted-foreground">\n            {activeCount} active • {totalSignals.toLocaleString()} signals\n          </span>\n          {isExpanded ? <ChevronUp className="h-4 w-4" /> : <ChevronDown className="h-4 w-4" />}\n        </div>\n      </button>\n      \n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ height: 0 }}\n            animate={{ height: \'auto\' }}\n            exit={{ height: 0 }}\n            className="overflow-hidden"\n          >\n            <div className="p-3 space-y-2 bg-background/50">\n              <div className="flex items-center justify-between text-sm mb-2">\n                <span className="text-muted-foreground">Domain Health</span>\n                <span className={`font-medium ${avgHealth >= 80 ? \'text-green-500\' : avgHealth >= 60 ? \'text-yellow-500\' : \'text-red-500\'}`}>\n                  {avgHealth}%\n                </span>\n              </div>\n              <Progress value={avgHealth} className="h-1.5 mb-3" />\n              \n              <div className="grid grid-cols-1 gap-1">\n                {adapters.map(adapter => (\n                  <button\n                    key={adapter.name}\n                    onClick={() => onAdapterClick?.(adapter)}\n                    className="flex items-center justify-between p-2 rounded hover:bg-muted transition-colors text-left"\n                  >\n                    <div className="flex items-center gap-2">\n                      <div className={`w-2 h-2 rounded-full ${adapter.isActive ? \'bg-green-500\' : \'bg-gray-400\'}`} />\n                      <span className="text-sm font-mono">{adapter.name}</span>\n                    </div>\n                    <div className="flex items-center gap-3 text-xs text-muted-foreground">\n                      <span>{adapter.signalCount.toLocaleString()} signals</span>\n                      <span>LR: {(adapter.learningRate * 100).toFixed(1)}%</span>\n                      <Badge \n                        variant="outline" \n                        className={`text-xs ${adapter.healthScore >= 80 ? \'bg-green-500/10 text-green-500\' : \'bg-yellow-500/10 text-yellow-500\'}`}\n                      >\n                        {adapter.healthScore}%\n                      </Badge>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\n// Resonance Card Component\nconst ResonanceCard: React.FC<{\n  resonance: ResonanceMetrics;\n  index: number;\n}> = ({ resonance, index }) => (\n  <motion.div\n    initial={{ opacity: 0, x: -20 }}\n    animate={{ opacity: 1, x: 0 }}\n    transition={{ delay: index * 0.05 }}\n    className="p-3 rounded-lg bg-muted/30 border flex items-center justify-between"\n  >\n    <div className="flex items-center gap-3">\n      <div className="flex items-center gap-1">\n        <Badge variant="outline" className="text-xs">{resonance.adapter1}</Badge>\n        <Share2 className="h-3 w-3 text-muted-foreground" />\n        <Badge variant="outline" className="text-xs">{resonance.adapter2}</Badge>\n      </div>\n    </div>\n    <div className="flex items-center gap-3">\n      <div className="flex gap-1">\n        {resonance.sharedPatterns.slice(0, 2).map((pattern, i) => (\n          <Badge key={i} variant="secondary" className="text-[10px]">\n            {pattern}\n          </Badge>\n        ))}\n      </div>\n      <div className="flex items-center gap-1">\n        <Brain className="h-3 w-3 text-violet-500" />\n        <span className={`font-medium ${resonance.resonanceScore > 0.8 ? \'text-green-500\' : \'text-yellow-500\'}`}>\n          {Math.round(resonance.resonanceScore * 100)}%\n        </span>\n      </div>\n    </div>\n  </motion.div>\n);\n\nexport default UniversalAdapterMonitor;\n';export{e as default};
