const n="import QRCode from 'qrcode';\n\ninterface QROptions {\n  shareId: string;\n  size?: number;\n  includeLabel?: boolean;\n}\n\n/**\n * Generates a QR code data URL for a visualization share link\n */\nexport const generateQRDataUrl = async (\n  shareId: string, \n  size: number = 100\n): Promise<string> => {\n  const url = `${window.location.origin}/v/${shareId}`;\n  \n  return QRCode.toDataURL(url, {\n    width: size,\n    margin: 0,\n    color: {\n      dark: '#D4AF37', // Brand gold\n      light: '#00000000' // Transparent\n    },\n    errorCorrectionLevel: 'H' // High - allows for 30% logo overlay\n  });\n};\n\n/**\n * Draws an artistic QR code onto a canvas context\n * Used for embedding in print images\n */\nexport const drawArtisticQR = async (\n  ctx: CanvasRenderingContext2D,\n  shareId: string,\n  x: number,\n  y: number,\n  size: number = 60,\n  logoImg?: HTMLImageElement\n): Promise<void> => {\n  const qrDataUrl = await generateQRDataUrl(shareId, size * 2);\n  \n  return new Promise((resolve, reject) => {\n    const qrImg = new Image();\n    qrImg.crossOrigin = 'anonymous';\n    \n    qrImg.onload = () => {\n      // Draw subtle background\n      ctx.save();\n      \n      // Background with transparency\n      const padding = 4;\n      ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n      ctx.beginPath();\n      ctx.roundRect(x - padding, y - padding, size + padding * 2, size + padding * 2 + 10, 4);\n      ctx.fill();\n      \n      // Border\n      ctx.strokeStyle = 'rgba(212, 175, 55, 0.3)';\n      ctx.lineWidth = 1;\n      ctx.stroke();\n      \n      // Draw QR\n      ctx.drawImage(qrImg, x, y, size, size);\n      \n      // Draw logo in center if provided\n      if (logoImg) {\n        const logoSize = size * 0.25;\n        const logoX = x + (size - logoSize) / 2;\n        const logoY = y + (size - logoSize) / 2;\n        \n        // Logo background circle\n        ctx.fillStyle = '#000000';\n        ctx.beginPath();\n        ctx.arc(logoX + logoSize / 2, logoY + logoSize / 2, logoSize / 2 + 1, 0, Math.PI * 2);\n        ctx.fill();\n        \n        // Logo border\n        ctx.strokeStyle = 'rgba(212, 175, 55, 0.5)';\n        ctx.lineWidth = 0.5;\n        ctx.stroke();\n        \n        // Draw logo\n        ctx.beginPath();\n        ctx.arc(logoX + logoSize / 2, logoY + logoSize / 2, logoSize / 2, 0, Math.PI * 2);\n        ctx.clip();\n        ctx.drawImage(logoImg, logoX, logoY, logoSize, logoSize);\n      }\n      \n      // Draw \"SCAN\" label\n      ctx.restore();\n      ctx.fillStyle = 'rgba(212, 175, 55, 0.5)';\n      ctx.font = '6px sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText('SCAN', x + size / 2, y + size + 8);\n      \n      resolve();\n    };\n    \n    qrImg.onerror = reject;\n    qrImg.src = qrDataUrl;\n  });\n};\n\n/**\n * Preloads the logo image for QR embedding\n */\nexport const preloadLogo = (): Promise<HTMLImageElement> => {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    // Use dynamic import to get the logo path\n    img.src = '/src/assets/en-pensent-logo-new.png';\n  });\n};\n";export{n as default};
