import{d6 as e,d7 as t,cp as n,a as s,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as f,C as h,x,D as p,B as v,A as g,p as w,t as j,cN as y,bC as b,S as N,a6 as C,P as z,y as L,bG as D,T as M,aq as B,z as _,cU as A,aj as S,aT as E,ca as q,b as k,d8 as H}from"./index-Cppn2aUX.js";!function(){const e=I,t=K();for(;;)try{if(184304===parseInt(e(553))/1+parseInt(e(473))/2*(-parseInt(e(587))/3)+parseInt(e(523))/4+parseInt(e(663))/5*(parseInt(e(648))/6)+-parseInt(e(607))/7*(-parseInt(e(676))/8)+parseInt(e(537))/9*(parseInt(e(675))/10)+-parseInt(e(563))/11*(parseInt(e(610))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const P=function(){const e=I,t={};t[e(500)]=e(661);const n=t;let s=!0;return function(t,r){const a=e,i={kNuCd:function(e,t){return e+t}};i[a(609)]=a(531)+"nction() ";const o=i;if(a(590)!==n[a(500)]){const e=s?function(){if(r){const e=r[a(524)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x5efa6c=_0x29b97e(o.kNuCd(o[a(609)]+"{}.constru"+a(506)+a(507)+" )",");"))()}}()(void 0,function(){const e=I,t={};t[e(476)]=e(635)+"+$";const n=t;return P[e(671)]()[e(475)](n[e(476)])[e(671)]()[e(600)+"r"](P)[e(475)](e(635)+"+$")});P();const G=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[I(524)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function I(e,t){e-=465;const n=K();let s=n[e];if(void 0===I.jWiOeS){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};I.EYZQZc=r,I.ftdbmJ={},I.jWiOeS=!0}const a=e+n[0],i=I.ftdbmJ[a];if(i)s=i;else{const e=function(e){this.qSCuyX=e,this.oVvfxD=[1,0,0],this.GSaLhg=function(){return"newState"},this.ZahfuF="\\w+ *\\(\\) *{\\w+ *",this.uWKjpk="['|\"].+['|\"];? *}"};e.prototype.sldvOz=function(){const e=new RegExp(this.ZahfuF+this.uWKjpk).test(this.GSaLhg.toString())?--this.oVvfxD[1]:--this.oVvfxD[0];return this.JjNPsF(e)},e.prototype.JjNPsF=function(e){return Boolean(~e)?this.MOmlpn(this.qSCuyX):e},e.prototype.MOmlpn=function(e){for(let t=0,n=this.oVvfxD.length;t<n;t++)this.oVvfxD.push(Math.round(Math.random())),n=this.oVvfxD.length;return e(this.oVvfxD[0])},new e(I).sldvOz(),s=I.EYZQZc(s),I.ftdbmJ[a]=s}return s}function K(){const e=["y2nKsMW","tLqG4PMA","CMv0DxjUicHMDq","z3HmsNe","Ahr0Chm6lY9LBG","rKPzC08","zfPZq2C","qM1qsLq","mJDrt05My2W","Dd11DgyToa","u0ruve0","sKHUCe8","C2f2zq","wMXSy0O","BgvUz3rO","i2zHzMfMoq","DMLZAxrZ","swrOr2K","y29T","AMHsrwq","qMXHy2S","AgLNAa","BgLUzvDPzhrO","C3bSAxq","nda0ntvgwuXQEuy","Bg9HzcbtvKC","yMvNAw5qyxrO","D2zOzKe","BerjD08","zw9Yz2LHlcbZzq","sg5vuwS","q01NBLC","uhHhtKy","vvrPrfu","mJKYmti3DgnUzxDb","AxrHBgLJiduWma","BwvZlcbZzxjPzG","uLLuy28","AM9PBG","zxjYB3jdB3jYzq","i0zbrKfgqq","qwHksem","iIb5psi","Bw92zxm","Dg9vChbLCKnHCW","ywXWAgfIzxrPyW","ndaWideWChGGjW","DuDSB0K","t0D4qKe","zM9UDa","wfjPtgS","BgX1DKi","Bg9N","thfitfC","uwXpD2G","yMLUza","zLfuuvi","CNLuzeW","m3nXCgPSBG","Eu90uwO","Dgv4DejHC2vSAq","CuLkChK","qvvNCgi","BwLU","CMLM","iIb3Awr0Ad0I","ChPkvfu","y3jVC3npCMLNAq","ywXS","AgrMA00","zM9UDhm","y29UC3rYDwn0BW","D2DhB1K","i2u3ztvLna","zMLSBa","r1zfBxm","zxzLBNq","B25SB2fK","nJa5mZu3ufLmBwPH","rfn3qLO","CvzYtMe","mJC2AMLPAKnQ","u3ncqwO","y2XPCa","BgLNAhq","BLDRyNy","C3rYB2TLu3r5Ba","mJu1lcaYntuSia","EKv5B3y","y3jLyxrLrwXLBq","i0zerKngqG","iIb2Awv3qM94pq","CgLcrgu","yM9YzgvY","BwvHC3vYzvrLEa","wwrJzuG","BwLKzgXL","B25LCNjVCG","ALjysvi","ufj2Cw8","zvnwBfO","vNrSDvO","AxnmAwDODa","CMDIysGYntuSia","yMXHy2S","uM9Tyw4NlcbZzq","kcGOlISPkYKRkq","z1PnAxq","Aw5JBhvKzxm","ChvZAa","zhjHD0LTywDL","tKPRtNC","BgLUzvrV","surbCwO","CxjJB2rL","A0rtD28","D2LKDgG","idiWChGGj0nVCG","DxLxwfC","nJbnz3DQuu0","z2v0q29UDgv4Da","Bw9Yyw50jYWGrW","i2e4yti5zq","teH6EeS","C2LUy1K","y2fUDMfZ","zMLSBfn0EwXL","C3jJ","zKfrDLG","iI8+","iIbOzwLNAhq9iG","A1fstwy","tLHXsxy","vgLTzxmGtMv3ia","nZC4mtbJA1fhuvC","DxD1yKu","C2nHBgu","CMvKDwnL","Dgv4DefSAwDU","phjLy3qGEd0Ima","BMrUtfC","zhrOpsi","Dg9tDhjPBMC","iIbMAwXSpsi","nJaWideZChGGjW","rezbCwq","mtaWnJG0mffLB0DyrG","mtzkENL6uwG","Eg1So2nOyxjZzq","zgf0zq","zujwy2C","lI4U","A2zLzNa","AgvPz2H0","y29UC29Szq","iZC4nZe2yW","tLHyrfO","y2vUDgvY","tKPSr1q","y29SB3i","s0vXBxa","nJaWidi0ChGGjW","zgvMyxvSDa","shfwqKK","vwPrCLi","nZe3mtHPyKLwAMS","phn2zYb4BwXUCW","C2vHCMnO","yMHHrfi","sePJAKq","DhjHy2u","BNmTC2vYAwy","yxjJ","C3rYB2TL","yw5VBNLTB3vZ","CMv2B2TLt2jQzq","Bw92zvrV","vw5RBM93BG","Dg9eyxrHvvjm","uwTnv2K","C3vIC3rYAw5N","y3rvuKW","ide4ChGGj0nVCG","CMvHzhK","AgLUz0vUywjSzq","Bgf5zxjtAxPL","q2LUEMvSjYWGjW","CgLLy2u","iZbbmeeWqq","BgvMDa","AxPkzMO","CuDoEum","ufHTtKO","sw50zxiNlcbZyq","t21IteO","CM91BMrszwn0","DhjHBNnWyxjLBG","ru4Guevou0vova","y3rVCIGICMv0Dq","CM4GDgHPCYiPka","Aw1Hz2vtBw9VDa","DfPAyNO","Aw1Hz2uVC3zNkW","mc45nsK","iZi5mJuYna","zMLSBfrLEhq","zgfYAW","zMLSBfjLy3q","ELv6weW","A2HbuM8","D3CUDZmUB3jNlW","C3HXAgK","phjLy3qGEd0I","tuDovgS","AgDTvwO","nJm0otGWBKHIq2zc","yxbWBhK","ChjVDg90ExbL","qxzRAwe","EwXxuLq","Bgv3wLK"];return(K=function(){return e})()}G(void 0,function(){const e=I,t={};t[e(685)]=function(e,t){return e+t},t.uwubE=function(e,t){return e===t},t.kDSwo=e(640),t[e(561)]=e(531)+"nction() ",t[e(629)]=e(557),t[e(521)]="warn",t[e(628)]=e(478);const n=t,s=function(){const t=e;let s;try{n[t(664)](n[t(644)],t(528))?(_0x25fd62[t(667)]="left",_0x55b453.fillText(_0x13acda,_0x70b7c4,_0x379695),_0x20a6b9+=n[t(685)](_0x6e72ee[t(623)+"t"](_0x144dfe).width,_0x379029)):s=Function(n[t(685)](n[t(561)],'{}.constructor("retu'+t(507)+" )")+");")()}catch(r){t(557)!==n.eSVlZ?(_0x211d81=_0x5a603b[t(573)+"e"](),_0x47ac5d&&(_0x3e0323+="  â€¢  "+_0x167fc8)):s=window}return s}(),r=s[e(683)]=s.console||{},a=[e(581),n[e(521)],"info","error","exception","table",n[e(628)]];for(let i=0;i<a[e(543)];i++){const t=G[e(600)+"r"][e(525)][e(584)](G),n=a[i],s=r[n]||t;t.__proto__=G[e(584)](G),t.toString=s[e(671)][e(584)](s),r[n]=t}})();async function W(e){const t=I,n={};n.dZsCg=t(643),n[t(604)]=t(569);const s=n,r=(await import(s[t(535)]))[t(470)],a={};a[t(514)]=e?s[t(604)]:"#1A1A1A",a[t(613)]=t(504)+"t";const i={};return i[t(645)]=200,i.margin=1,i[t(467)]=a,i[t(568)+"ctionLevel"]="M",r[t(486)](t(533)+"pensent.com",i)}async function O(){return new Promise((e,t)=>{const s=I,r=new Image;r[s(596)+"n"]=s(482),r[s(606)]=()=>e(r),r[s(626)]=t,r[s(656)]=n})}async function T(n,s,r={}){const a=I,i={YdceH:function(e){return e()},pzJTU:function(e,t){return e*t},DFAqd:function(e,t){return e+t},gxLJq:function(e,t){return e+t},hdfkM:a(550),sxqhi:a(496),SsBAj:a(619),BmPJT:function(e,t){return e+t},LjuLE:a(602),QlOwh:a(651),izJfj:a(684),KwnUe:a(549),fQNPs:a(625),sincY:a(469)+a(494)+a(662)+"Roman', se"+a(593),wfhfA:a(564)+a(646)+"morant', G"+a(558)+a(593),LHzxK:function(e,t){return e+t},CMgnW:function(e,t){return e-t},khARo:a(497),zEyov:function(e,t){return e!==t},hVgnt:a(485),vaJIF:"0|2|4|3|1",nWkbv:function(e,t){return e||t},jhREd:function(e,t){return e*t},ndnLW:function(e,t){return e-t},ccdJl:function(e,t){return e/t},JHnpO:function(e,t){return e>t},RYTco:a(575)+"Times New Roman', Ti"+a(565),HJcjD:function(e,t){return e>t},jRXIR:function(e,t){return e-t},UjQrR:function(e,t){return e*t},HnUQk:function(e,t){return e-t},uGloI:a(465),IdhGi:"â™” EN PENSE"+a(530),LqHLW:function(e,t){return e/t},epUHh:function(e,t){return e===t},hgmUj:a(471),SDTTM:function(e,t){return e-t},XRiLk:function(e,t){return e-t},piBDe:function(e,t){return e-t},Avkia:a(574),SatWT:"#44403c",HdXJK:a(505),VtluZ:function(e,t){return e+t},oLXkJ:function(e,t){return e-t},QkMWi:function(e,t){return e+t},UTiDU:function(e,t){return e-t}};await async function(){const e=I;document[e(599)]&&document[e(599)][e(491)]&&await document[e(599)].ready,await new Promise(e=>setTimeout(e,150))}();const{boardSize:o=600,darkMode:c=!1,withWatermark:l=!1,title:u}=r,d=function(n,s){const r=I,a={uyWXW:function(e,t){return e*t},lluvB:function(e,t){return e+t},fAQvX:function(e,t){return e<t},OGxBA:"YerBB",fQTQR:function(e,t){return e+t},wgGoY:function(e,t){return e>t},FLwIw:function(e,t,n){return e(t,n)},NJlGT:"UoZNc",kfefp:r(679),dbeKX:function(e,t){return e-t}},i=s/8,o=a[r(647)](s,.02),c=a[r(580)](s,a[r(647)](o,2));let l=r(474)+'="http://w'+r(518)+'2000/svg" width="'+c+r(659)+c+r(620)+'"0 0 '+c+" "+c+'">';l+=r(668)+'" y="0" wi'+r(670)+c+'" height="'+c+r(672)+e[r(622)]+r(658);for(let u=0;a[r(657)](u,8);u++){const s=7-u;for(let c=0;a.fAQvX(c,8);c++){if(a[r(577)]!=a[r(577)]){const e=_0x437c66.apply(_0x40beb4,arguments);return _0x223221=null,e}{const d=n[s][c],m=d[r(631)]?e[r(613)]:e[r(514)],f=a[r(585)](o,c*i),h=a[r(585)](o,a[r(647)](u,i));if(l+=r(520)+f+r(571)+h+r(594)+i+'" height="'+i+r(672)+m+r(658),a[r(601)](d[r(545)][r(543)],0)){const e=.08*i,n=[];for(const i of d.visits){const e=a.FLwIw(t,i[r(495)],i[r(467)]);if(!n[r(637)](e))if(a[r(466)]===a[r(681)]){if(_0x3c397c){const e=_0x265ef6[r(524)](_0x3aef15,arguments);return _0x32db23=null,e}}else n[r(638)](e)}const s=Math[r(592)](n.length,6),o=[];let c=i-a[r(647)](e,2);const u=.7*c/s;for(let t=0;t<s;t++){const e={};if(e[r(467)]=n[t],e[r(493)]=c,o[r(638)](e),c-=u,c<.1*i)break}for(const t of o){const e=a.dbeKX(i,t[r(493)])/2;l+='<rect x="'+(f+e)+r(571)+(h+e)+'" width="'+t.layerSize+r(659)+t[r(493)]+r(672)+t[r(467)]+r(658)}}}}}return l+="</svg>",l}(n,o),m=i.pzJTU(o,.02),f=i[a(674)](o,2*m),h=await async function(e,t,n){const s=I,r={jQhVR:function(e,t){return e!==t},zUzXL:function(e,t){return e*t},IDAqj:function(e,t){return e(t)},pPeMS:function(e,t){return e!==t},QnAIJ:s(586),ZllcJ:s(510)+s(677)+s(538)};return new Promise((a,i)=>{const o=s,c={ylWRT:function(e,t){return r.jQhVR(e,t)},Alpzh:function(e,t){return r[I(516)](e,t)},KEqmp:function(e,t){return e(t)},AhJHC:function(e,t){return r[I(642)](e,t)}};if(r.pPeMS(r.QnAIJ,"OTvwP")){const s=new Image,l={};l.type=r[o(542)];const u=new Blob([e],l),d=URL["createObje"+o(489)](u);s[o(606)]=()=>{const e=o;if(c[e(527)](e(608),e(591))){const r=document[e(618)+"ent"](e(654));r[e(645)]=c.Alpzh(t,5),r[e(682)]=5*n;const i=r[e(649)]("2d");i[e(665)](5,5),i[e(639)](s,0,0,t,n),URL[e(483)+e(489)](d),c[e(468)](a,r)}else _0x406d4a=_0x2afc9a},s[o(626)]=()=>{const e=o;URL[e(483)+e(489)](d),c[e(570)](i,new Error("Failed to "+e(554)))},s[o(656)]=d}else{const e=new _0x505bb4;e[o(596)+"n"]=o(482),e[o(606)]=()=>_0x17b376(e),e.onerror=_0x1e4019,e[o(656)]=_0x304163}})}(d,f,f),x=60,p=i[a(532)](f,120),v=i.gxLJq(f+220,60)+120,g=document.createElement(a(654));g[a(645)]=i[a(595)](p,5),g.height=i[a(595)](v,5);const w=g[a(649)]("2d");w.scale(5,5),w[a(508)+a(492)+"d"]=!0,w.imageSmoothingQuality=i[a(598)],w[a(655)]=c?i[a(519)]:i[a(611)],w[a(515)](0,0,p,v),w[a(639)](h,0,0,h[a(645)],h.height,x,x,f,f);const j=i[a(532)](i[a(536)](x,f),28);w[a(615)+"e"]=c?a(512):i.LjuLE,w[a(551)]=1,w.beginPath(),w[a(484)](x,j),w[a(641)](p-x,j),w[a(481)]();const y=a(c?544:512),b=c?i[a(583)]:a(684),N=c?i.izJfj:a(651),C=c?i[a(498)]:a(651),z=p/2;let L=j+55;const D=s.white||"White",M=s[a(633)]||i.KwnUe;w[a(589)+"ne"]=i.fQNPs,w.font=i[a(653)];const B=w[a(623)+"t"](D)[a(645)],_=w[a(623)+"t"](M)[a(645)];w[a(578)]=i[a(556)];const A=" vs ",S=w.measureText(A).width,E=i[a(652)](B,S)+_,q=i[a(560)](z,E/2);if(w[a(578)]="600 24px '"+a(494)+"Times New "+a(634)+a(593),w[a(655)]=y,w[a(667)]=i[a(517)],w[a(513)](D,q,L),w.font=i[a(556)],w[a(655)]=C,w.fillText(A,q+B,L),w.font=i.sincY,w[a(655)]=y,w.fillText(M,i[a(674)](q+B,S),L),L+=36,s[a(605)]&&i[a(617)](s[a(605)],i.hVgnt)){const e=i.vaJIF.split("|");let t=0;for(;;){switch(e[t++]){case"0":w[a(655)]=b;continue;case"1":L+=32;continue;case"2":w.font=a(564)+a(490)+a(650)+a(558)+a(593);continue;case"3":w[a(513)](s[a(605)],z,L);continue;case"4":w[a(667)]=a(465);continue}break}}const k=u,H=s[a(678)]||"";if(i[a(614)](k,H)){w.fillStyle=N,w[a(578)]="500 12px '"+a(501)+a(479),w[a(667)]=a(465);let e="";k?(e=k[a(573)+"e"](),H&&(e+=i[a(674)]("  â€¢  ",H))):e=H;const t=2,n=e[a(552)](""),s=n[a(666)]((e,t)=>e+w[a(623)+"t"](t)[a(645)],0),r=i[a(548)](n.length-1,t);let o=i.ndnLW(z,i.ccdJl(s+r,2));for(const c of n)w.textAlign=i[a(517)],w.fillText(c,o,L),o+=i[a(652)](w[a(623)+"t"](c).width,t);L+=28}if(s.moves&&i[a(540)](s.moves[a(543)],0)){w[a(655)]=N,w.font=i[a(566)],w.textAlign="center";const e=s[a(572)][a(567)](" "),t=i[a(477)](e.length,400)?e[a(488)](0,400)+a(680):e,n=i[a(669)](i[a(627)](p,i[a(472)](x,2)),40),r=t[a(552)](" ");let o="",c=L;const l=15,u=4;let d=0;for(const s of r)if(a(502)!==a(509)){const e=o+(o?" ":"")+s;if(w[a(623)+"t"](e).width>n&&o){if(a(588)===a(499)){const e=_0x386296(_0x151835[a(495)],_0x2a90e1[a(467)]);!_0x436e34[a(637)](e)&&_0x5e09f1.push(e)}else if(w[a(513)](o,z,c),o=s,c+=l,d++,d>=u)break}else o=e}else _0x404f1a[a(513)](_0x28a1ee,_0x35788b,_0x44ce15);o&&d<u&&w[a(513)](o,z,c)}const P=i[a(559)](v-x,20);w[a(655)]=N,w[a(578)]="500 11px '"+a(501)+a(479),w[a(667)]=i[a(576)];const G=i[a(546)][a(552)](""),K=G.reduce((e,t)=>e+w[a(623)+"t"](t)[a(645)],0)+4*(G.length-1);let T=z-i[a(582)](K,2);for(const e of G)w.textAlign="left",w[a(513)](e,T,P),T+=w[a(623)+"t"](e).width+4;if(l)if(i.epUHh("HqVBI",i[a(522)])){const[e,t]=await Promise[a(597)]([W(!1),i[a(624)](O)]),n=220,s=65,r=i[a(539)](i[a(579)](x+f,n),12),o=i[a(621)](x+f,s)-12;w[a(655)]=a(632)+a(616)+a(511),w.beginPath(),w[a(503)](r,o,n,s,6),w[a(603)](),w[a(615)+"e"]=a(602),w[a(551)]=1,w[a(481)]();const c=48,l=r+12,u=o+i[a(529)](s-c,2);w[a(541)](),w[a(555)](),w[a(480)](l+i.LqHLW(c,2),u+i[a(529)](c,2),i[a(529)](c,2),0,2*Math.PI),w[a(612)](),w[a(639)](t,l,u,c,c),w.restore();const d=i[a(532)](l+c,10);w[a(667)]=a(497),w[a(589)+"ne"]=i[a(526)],w[a(655)]=i.SatWT,w[a(578)]=a(673)+a(501)+a(479),w[a(513)](i.HdXJK,d,i[a(630)](o,28)),w[a(655)]=a(684),w[a(578)]="400 11px '"+a(501)+"ns-serif",w[a(513)]("enpensent."+a(547),d,o+46);const m=50,h=i.oLXkJ(i[a(487)](r,n),m)-10,p=o+i[a(582)](i[a(562)](s,m),2),v=new Image;await new Promise(t=>{const n=a;v[n(606)]=()=>{const e=n;w[e(639)](v,h,p,m,m),i[e(624)](t)},v[n(626)]=()=>t(),v[n(656)]=e})}else _0x5aed32[a(638)](_0x174a6e);return g}const J=q.filter(e=>"custom"!==e.id);const U=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const Y=()=>{const e=s(),{user:t,isLoading:n}=r(),[P,G]=a.useState(null),[I,K]=a.useState(!1),[W,O]=a.useState(0),[Y,V]=a.useState(""),[X,Z]=a.useState([]),[R,F]=a.useState(50),[$,Q]=a.useState(!0),[ee,te]=a.useState(!1),[ne,se]=a.useState(null);a.useEffect(()=>{n||(async()=>{if(!t)return void G(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});G(!0===e)})()},[t,n]);const re=a.useCallback(async(e,n,s,r,a=!0)=>{try{const m=i(e.pgn),f=a?J[Math.floor(Math.random()*J.length)]:J[s%J.length],h=function(e,t){const n=q.find(e=>e.id===t)||q[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?n.white:n.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,f.id);o(f.id);const x=await T(h,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:n}),p=await new Promise((e,t)=>{x.toBlob(n=>{n?e(n):t(new Error("Failed to create blob"))},"image/png",.95)}),v=Date.now(),g=`${t.id}/${v}-${n.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(g,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:j}=c.storage.from("visualizations").getPublicUrl(g),y=l(e.pgn),b={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:h,totalMoves:m.totalMoves,visualizationState:{paletteId:f.id,paletteName:f.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?s+1:void 0,gameHash:y}},{data:N,error:C}=await c.from("saved_visualizations").insert({user_id:t.id,title:n,pgn:e.pgn,game_data:b,image_path:j.publicUrl}).select().single();if(C)throw C;const z=function(e,t){if(e){const e=99,n=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+n}return 199+Math.floor(600*Math.random())}(r,s),{data:L,error:D}=await u(N.id,z);if(D)throw D;const M=function(e,t){const n=e?1.5:1,s=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*n+5*s),hdDownloads:Math.floor(3*Math.random()*n),gifDownloads:Math.floor(2*Math.random()*n),tradeCount:e?Math.floor(2*Math.random()):0}}(r,s);for(let e=0;e<M.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:N.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const B=d(e.pgn),_=a?"premium":"genesis";return{title:n,success:!0,visualizationId:N.id,listingId:null==L?void 0:L.id,isExemplar:r,paletteId:f.id,paletteName:f.name,gameHash:y,tier:_,openingName:null==B?void 0:B.fullName}}catch(m){return{title:n,success:!1,error:m.message,isExemplar:r}}},[t]),ae=X.filter(e=>e.success).length,ie=X.filter(e=>!e.success).length;return X.filter(e=>e.success&&e.isExemplar).length,n||null===P?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})}):t&&P?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(v,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(g,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(h,{children:[m.jsx(w,{children:m.jsxs(j,{className:"flex items-center gap-3",children:[m.jsx(y,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(x,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(b,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",R," visions: ",Math.min(25,R)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,R-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:R,onChange:e=>F(Number(e.target.value)),disabled:I,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(N,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:I}),m.jsxs(C,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(z,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(L,{variant:"secondary",className:"text-xs",children:[J.length," palettes"]})]})]}),m.jsx(v,{onClick:async()=>{if(!t)return void k.error("You must be logged in as the CEO account");K(!0),Z([]),O(0);const e=[],n=H.slice(0,Math.min(R,H.length)),s=[];for(let t=0;t<R;t++){const e=t%n.length,r=t<25,a=U[t]||`Vision ${t+1}`;s.push({game:n[e],title:a,isExemplar:r})}for(let t=0;t<s.length;t++){const{game:n,title:r,isExemplar:a}=s[t];V(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${s.length})`);const i=await re(n,r,t,a,$);e.push(i),Z([...e]),O((t+1)/s.length*100),await new Promise(e=>setTimeout(e,300))}K(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?k.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):k.error("Failed to create any visions")},disabled:I||!t,className:"w-full",size:"lg",children:I?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(M,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(v,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),se(null);try{const{data:e,error:n}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(n)throw n;if(!e||0===e.length)return k.info("No visions to delete"),void te(!1);const s=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",s);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=s.filter(e=>!i.has(e)),l=s.filter(e=>i.has(e));if(0===o.length)return k.info("All your visions have accrued natural value - none deleted"),se({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);se({deleted:o.length,preserved:l.length}),k.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){k.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||I||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(M,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),ne&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",ne.deleted," deleted"]}),ne.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",ne.preserved," preserved (has value)"]})]})})]}),I&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(B,{value:W,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:Y})]}),X.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(_,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(A,{className:"h-4 w-4"}),X.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(S,{className:"h-4 w-4"}),X.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:X.map((e,t)=>m.jsxs(E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(A,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(S,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(L,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(L,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(z,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(h,{className:"max-w-md",children:m.jsxs(x,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(v,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{Y as default};
