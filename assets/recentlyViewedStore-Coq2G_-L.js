const e="import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\n/**\n * Recently Viewed Store - Tracks visions a user has viewed\n * Uses localStorage to persist across sessions\n */\n\nexport interface RecentlyViewedVision {\n  id: string; // visualization_id\n  listingId?: string;\n  title: string;\n  imagePath: string;\n  ownerName?: string;\n  priceCents?: number;\n  gameHash?: string;\n  viewedAt: number;\n}\n\ninterface RecentlyViewedStore {\n  // Recently viewed visions (max 12, newest first)\n  recentlyViewed: RecentlyViewedVision[];\n  \n  // Actions\n  addRecentlyViewed: (vision: Omit<RecentlyViewedVision, 'viewedAt'>) => void;\n  removeRecentlyViewed: (id: string) => void;\n  clearRecentlyViewed: () => void;\n  \n  // Get recent visions (filtered by max age)\n  getRecentVisions: (limit?: number) => RecentlyViewedVision[];\n}\n\nconst MAX_RECENT_VISIONS = 12;\nconst MAX_AGE_MS = 7 * 24 * 60 * 60 * 1000; // 7 days\n\nexport const useRecentlyViewedStore = create<RecentlyViewedStore>()(\n  persist(\n    (set, get) => ({\n      recentlyViewed: [],\n      \n      addRecentlyViewed: (vision) => {\n        const now = Date.now();\n        set((state) => {\n          // Remove if already exists (will re-add at top)\n          const filtered = state.recentlyViewed.filter(v => v.id !== vision.id);\n          \n          // Add to beginning\n          const updated = [\n            { ...vision, viewedAt: now },\n            ...filtered,\n          ].slice(0, MAX_RECENT_VISIONS);\n          \n          return { recentlyViewed: updated };\n        });\n      },\n      \n      removeRecentlyViewed: (id) => {\n        set((state) => ({\n          recentlyViewed: state.recentlyViewed.filter(v => v.id !== id),\n        }));\n      },\n      \n      clearRecentlyViewed: () => {\n        set({ recentlyViewed: [] });\n      },\n      \n      getRecentVisions: (limit = 6) => {\n        const { recentlyViewed } = get();\n        const now = Date.now();\n        \n        // Filter out expired entries and limit\n        return recentlyViewed\n          .filter(v => now - v.viewedAt < MAX_AGE_MS)\n          .slice(0, limit);\n      },\n    }),\n    {\n      name: 'en-pensent-recently-viewed',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({\n        recentlyViewed: state.recentlyViewed,\n      }),\n    }\n  )\n);\n";export{e as default};
