import{s as e,u as t,a as s,r,j as n,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as h,a8 as x,D as m,aB as p,aC as f,aD as w,aE as v,p as j,t as g,w as y,dy as N,dt as b,bo as C,dq as z,cZ as q,a1 as D,a2 as B,a3 as M,a4 as _,a5 as L,aW as W,bC as A,dz as S,b as K,y as H}from"./index-Cppn2aUX.js";import{C as U}from"./calendar-CEY-FYPj.js";!function(){const e=R,t=G();for(;;)try{if(769150===-parseInt(e(391))/1+-parseInt(e(460))/2*(parseInt(e(367))/3)+-parseInt(e(468))/4+-parseInt(e(457))/5+parseInt(e(454))/6*(parseInt(e(449))/7)+parseInt(e(429))/8+parseInt(e(488))/9)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const E=function(){const e=R,t={};t[e(463)]=function(e,t){return e+t},t[e(412)]=e(432)+e(379),t.TpBEX=e(420)+e(366)+e(421)+" )",t[e(388)]=function(e,t){return e===t},t.dLlMe=e(446),t[e(423)]="gTtFa";const s=t;let r=!0;return function(t,n){const a=e,c={YvZNV:a(466)+a(436),jdEQL:function(e,t){return s[a(388)](e,t)},girys:s.dLlMe};if(s[a(388)](s[a(423)],a(470))){let e;try{e=_0x3008e6(s[a(463)](s[a(412)]+s[a(453)],");"))()}catch(i){e=_0xd50050}return e}{const e=r?function(){const e=a,s={};s.vhmSU=c.YvZNV;const r=s;if(n){if(c.jdEQL(c[e(451)],"dotzm")){const s=n[e(437)](t,arguments);return n=null,s}_0x3bafd1[e(484)](r.vhmSU,_0x48d454)}}:function(){};return r=!1,e}}}()(void 0,function(){const e=R,t={};t[e(464)]="(((.+)+)+)+$";const s=t;return E[e(380)]()[e(369)]("(((.+)+)+)+$")[e(380)]()[e(469)+"r"](E)[e(369)](s.pzXRL)});E();const I=function(){let e=!0;return function(t,s){const r=e?function(){if(s){const e=s[R(437)](t,arguments);return s=null,e}}:function(){};return e=!1,r}}();function R(e,t){e-=365;const s=G();let r=s[e];if(void 0===R.QoBJDP){var n=function(e){let t="",s="",r=t+n;for(let n,a,c=0,i=0;a=e.charAt(i++);~a&&(n=c%4?64*n+a:a,c++%4)?t+=r.charCodeAt(i+10)-10!=0?String.fromCharCode(255&n>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let n=0,a=t.length;n<a;n++)s+="%"+("00"+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(s)};R.eRgiVI=n,R.lNVwAP={},R.QoBJDP=!0}const a=e+s[0],c=R.lNVwAP[a];if(c)r=c;else{const e=function(e){this.WykoQe=e,this.gwHTZS=[1,0,0],this.BRzJFe=function(){return"newState"},this.vUomkN="\\w+ *\\(\\) *{\\w+ *",this.gCrxaK="['|\"].+['|\"];? *}"};e.prototype.CVjrfh=function(){const e=new RegExp(this.vUomkN+this.gCrxaK).test(this.BRzJFe.toString())?--this.gwHTZS[1]:--this.gwHTZS[0];return this.UbMlnT(e)},e.prototype.UbMlnT=function(e){return Boolean(~e)?this.VRIBGB(this.WykoQe):e},e.prototype.VRIBGB=function(e){for(let t=0,s=this.gwHTZS.length;t<s;t++)this.gwHTZS.push(Math.round(Math.random())),s=this.gwHTZS.length;return e(this.gwHTZS[0])},new e(R).CVjrfh(),r=R.eRgiVI(r),R.lNVwAP[a]=r}return r}async function k(t){const s=R,r={};r.XqiDL=s(373)+s(365),r[s(435)]=s(431),r.xeAIF=s(415)+s(483)+"e",r.veesr="user_id, t"+s(482)+"d_cents, t"+s(441)+s(393);const n=r;try{const r={ascending:!1};let a=e[s(455)](n[s(372)])[s(479)]("*")[s(450)](s(381),r);t&&t!==s(473)&&(a=a.eq(s(410),t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(448)](e=>e.user_id))],{data:l}=await e[s(455)](n.KZchD).select(n[s(419)]).in("user_id",o),{data:d}=await e[s(455)]("user_wallets")[s(479)](n[s(397)]).in(s(408),o),u=new Map((null==l?void 0:l[s(448)](e=>[e[s(408)],e]))||[]),h=new Map((null==d?void 0:d[s(448)](e=>[e[s(408)],e]))||[]),x=(c||[])[s(448)](e=>{var t,r,n;return{...e,payout_details:e.payout_details,user_display_name:(null==(t=u.get(e.user_id))?void 0:t[s(456)+"me"])||s(445)+"er",wallet_total_earned:(null==(r=h[s(370)](e[s(408)]))?void 0:r.total_earned_cents)||0,wallet_total_withdrawn:(null==(n=h.get(e.user_id))?void 0:n[s(443)+s(394)+"s"])||0}}),m={};return m[s(472)]=x,m.error=null,m}catch(a){const e={data:[]};return e[s(484)]=a,e}}function G(){const e=["Axn4yMC","Dg90ywXFD2L0Aa","vg1zvMW","vw5RBM93BIbvCW","zg90EM0","yxbWCM92zwrFyq","BwfW","mJuZnfDfzePyBa","B3jKzxi","z2LYExm","yM9KEq","vhbcrvG","mtu5nZHoyvjHrKe","zNjVBq","zgLZCgXHEv9Uyq","odG1nteWAvbdAenf","DgHKCMf3ywW","y29UC29Szq","otbwCxfWvxq","BhHbrKy","yw1VDw50x2nLBG","tvrXDu4","ChPyuKW","rNvUswG","v2fSBgv0ihvWza","CgvUzgLUz19JBW","mJm2ndaWmhrTqM91uq","y29UC3rYDwn0BW","ufz1qM4","Cwv3r1G","zgf0yq","ywXS","ENbVrNG","DxbKyxrL","CgvUzgLUz19HBq","BxDyzu0","ChjVDMvKihn0yq","C2vSzwn0","AvjeDvK","Aw5MBW","B3rHBf9LyxjUzq","AxnWBgf5x25HBq","zxjYB3i","uMvXDwvZDcbUBW","y29TCgXLDgvKxW","yxbWCM92zwq","otq3odi1muTwzfHVvW","x3jLCxvLC3rZ","y3rVCIGICMv0Dq","oti2mtLOy25lCfm","Bw91BNq","C2vHCMnO","z2v0","Bg9N","whfPreW","D2L0AgrYyxDHBa","ywrTAw5FBM90zq","CMvHC29UigLZia","thrkuhK","ig5VDcbPBIbHCa","B3vUDf9Jzw50CW","BMn0Aw9UkcKG","Dg9tDhjPBMC","y3jLyxrLzf9HDa","rKT3EgS","tKzLuNi","zM9YrwfJAa","yxbWCM92zwrFyW","B1ndwuW","zNvUy3rPB25Z","wNbOEhK","Dg90ywW","tM90igf1DgHLBG","mtGZmZi0r2L2tK55","yxv0Aa","CMf3BL9Jzw50CW","zhjHD25Fy2vUDa","EhHItMK","A2zhtK0","DMvLC3i","BgvUz3rO","y29TCgXLDgvK","EM1UAwK","Dg9ju09tDhjPBG","DcbMB3vUzcbVCG","Dw50","DgLJyxrLza","yMLUza","CMvQzwn0zwq","ChjVy2vZCY13Aq","DxnLCL9Pza","cI0TlqO","C3rHDhvZ","D2fYBG","sNHXyva","rfPJAuW","B2nMqKK","DxnLCL9PzcWGza","uMvQzwn0Aw9Uia","C2LUz2XL","B3vUDa","Egvbsuy","E30Uy29UC3rYDq","CM4GDgHPCYiPka","z2v0vxnLCG","zufuqxm","C3vJy2vZCW","CMvQzwn0zwrFyW","EMLlsKe","DhvZ","ChjVDg90ExbL","odC0mtCYoe1WwLHpyG","Aw52B2TL","ChjVzMLSzxm","CMv0DxjUicHMDq","rK1yA0e","BuH2B2K","s1PJAeq","yxrLigvYCM9YoG","yxbWBhK","C3rHDhvZlcbHBq","uxnhzuS","DhjHy2u","B3rHBf93AxrOza"];return(G=function(){return e})()}async function P(){const t=R,s={};s[t(382)]="pending",s.yptwf=t(399),s[t(433)]=t(406);const r=s;try{const{data:s,error:n}=await e[t(455)](t(373)+"_requests")[t(479)](t(438)+t(378));if(n)throw n;const a={};a["pending_co"+t(403)]=0,a[t(476)+t(418)]=0,a[t(385)+t(418)]=0,a[t(447)+t(368)]=0,a[t(486)+t(389)]=0,a[t(425)+t(418)]=0;const c=a;(s||[])[t(384)](e=>{const s=t;switch(e[s(410)]){case r[s(382)]:c[s(467)+s(403)]++,c[s(476)+s(418)]+=e[s(462)+"ts"];break;case s(487):c[s(385)+s(418)]++,c[s(447)+"mount"]+=e.amount_cents;break;case r.yptwf:c["completed_"+s(389)]+=e[s(462)+"ts"];break;case r.FMXkA:c[s(425)+s(418)]++}});const i={};return i[t(472)]=c,i[t(484)]=null,i}catch(n){const e={};return e[t(472)]=null,e[t(484)]=n,e}}I(void 0,function(){const e=R,t={NFeRr:function(e,t){return e+t},zpoFx:function(e){return e()},aKKUS:e(371),mwXeM:e(481),xbmNu:"error",iRDuY:function(e,t){return e<t}},s=t[e(474)](function(){const s=e;let r;try{r=Function(t.NFeRr(t[s(383)](s(432)+"nction() ",s(420)+s(366)+s(421)+" )"),");"))()}catch(n){r=window}return r}),r=s[e(459)]=s[e(459)]||{},n=[t.aKKUS,e(411),t[e(477)],t.xbmNu,"exception","table",e(440)];for(let a=0;t[e(480)](a,n[e(398)]);a++){const t=I[e(469)+"r"][e(428)].bind(I),s=n[a],c=r[s]||t;t.__proto__=I.bind(I),t.toString=c[e(380)][e(405)](c),r[s]=t}})(),function(){const e=V,t=J();for(;;)try{if(822317===parseInt(e(478))/1*(parseInt(e(449))/2)+-parseInt(e(489))/3*(-parseInt(e(490))/4)+-parseInt(e(447))/5*(parseInt(e(504))/6)+-parseInt(e(503))/7+parseInt(e(500))/8+parseInt(e(497))/9+parseInt(e(505))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Z=function(){let e=!0;return function(t,s){const r=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,r}}()(void 0,function(){const e=V;return Z[e(448)]().search("(((.+)+)+)+$")[e(448)]()[e(464)+"r"](Z)[e(501)](e(465)+"+$")});Z();const T=function(){let e=!0;return function(t,s){const r=e?function(){if(s){const e=s[V(481)](t,arguments);return s=null,e}}:function(){};return e=!1,r}}();function J(){const e=["Dg9gAxHLza","mte5mJa1D2jMwwvz","Cf91C2vYx2LK","z2v0vxnLCG","mZG5nJqWoezzsvbfuG","C2vHCMnO","sKLHqLK","otG0mJq3nNjcDwvUDG","mti2wK9rvMX5","odKWnZiWmg1xtvz3yq","mJaWmde1yNv0suHu","Dg9tDhjPBMC","ndmZmdG2t0D1rufT","uKvoz3q","Cf9ZywXLx3bYAq","DhjHy2u","zNjVBq","EvHkDKW","y29UC29Szq","Aw5MBW","BgvUz3rO","shDMy3G","zgf0yq","uLjgCue","DgfIBgu","CMv0DxjUicHMDq","yxv0Aa","y29UC3rYDwn0BW","kcGOlISPkYKRkq","x19WCM90B19F","BgLTAxq","Dwjusfq","yKjPqLC","CM4GDgHPCYiPka","yMLUza","uuT6vui","Bg9N","CNbJ","DgLJyxrLza","zxjYB3i","yxnJzw5KAw5N","mNjwCMH1tq","Cf9SAxn0Aw5NxW","Cf9IDxLLCL9Pza","yxbWBhK","y2vFy2vUDhm","z2v0x29Yx2nYzq","B3jKzxi","zejSwhu","CMTLDhbSywnLxW","y2flwK8","C2fSzq","mtm4rhbTr2rH","mta4mJa0vfLdAxrn","ChjVy2vZC19Tyq","BMn0Aw9UkcKG","D2fYBG","tM90igf1DgHLBG","EuLrEhG"];return(J=function(){return e})()}function V(e,t){e-=447;const s=J();let r=s[e];if(void 0===V.Mbdpyv){var n=function(e){let t="",s="",r=t+n;for(let n,a,c=0,i=0;a=e.charAt(i++);~a&&(n=c%4?64*n+a:a,c++%4)?t+=r.charCodeAt(i+10)-10!=0?String.fromCharCode(255&n>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let n=0,a=t.length;n<a;n++)s+="%"+("00"+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(s)};V.lpvjUD=n,V.IxNEZX={},V.Mbdpyv=!0}const a=e+s[0],c=V.IxNEZX[a];if(c)r=c;else{const e=function(e){this.bMWkFN=e,this.yWzOSE=[1,0,0],this.PgddwX=function(){return"newState"},this.ajfEJQ="\\w+ *\\(\\) *{\\w+ *",this.gRMsgm="['|\"].+['|\"];? *}"};e.prototype.slvhRq=function(){const e=new RegExp(this.ajfEJQ+this.gRMsgm).test(this.PgddwX.toString())?--this.yWzOSE[1]:--this.yWzOSE[0];return this.eEmOPJ(e)},e.prototype.eEmOPJ=function(e){return Boolean(~e)?this.HmuDSg(this.bMWkFN):e},e.prototype.HmuDSg=function(e){for(let t=0,s=this.yWzOSE.length;t<s;t++)this.yWzOSE.push(Math.round(Math.random())),s=this.yWzOSE.length;return e(this.yWzOSE[0])},new e(V).slvhRq(),r=V.lpvjUD(r),V.IxNEZX[a]=r}return r}function Y(e){const t=V,s={};s[t(485)]=function(e,t){return e/t};return"$"+s[t(485)](e,100)[t(496)](2)}function O(){var E,I;const{user:G}=t(),Z=s(),[T,J]=r.useState(!1),[V,O]=r.useState(!0),[F,X]=r.useState([]),[Q,$]=r.useState(null),[ee,te]=r.useState("pending"),[se,re]=r.useState({type:null,request:null}),[ne,ae]=r.useState(""),[ce,ie]=r.useState(!1);r.useEffect(()=>{oe()},[G]);const oe=async()=>{if(!G)return void O(!1);const{data:t}=await e.rpc("has_role",{_user_id:G.id,_role:"admin"});!0===t&&(J(!0),await le()),O(!1)},le=async()=>{const[e,t]=await Promise.all([k(ee),P()]);e.data&&X(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return n.jsxs(H,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[n.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return n.jsxs(H,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[n.jsx(h,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return n.jsxs(H,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[n.jsx(h,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return n.jsxs(H,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[n.jsx(m,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return n.jsxs(H,{variant:"outline",className:"bg-muted text-muted-foreground",children:[n.jsx(m,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return n.jsx(H,{variant:"outline",children:e})}};return V?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):G&&T?n.jsx("div",{className:"min-h-screen bg-background",children:n.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[n.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Z(-1),children:n.jsx(d,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),Q&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[n.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:n.jsxs(i,{className:"pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[n.jsx(u,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Pending"})]}),n.jsx("p",{className:"text-2xl font-bold",children:Q.pending_count}),n.jsx("p",{className:"text-sm text-muted-foreground",children:Y(Q.pending_amount)})]})}),n.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:n.jsxs(i,{className:"pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[n.jsx(h,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Approved"})]}),n.jsx("p",{className:"text-2xl font-bold",children:Q.approved_count}),n.jsx("p",{className:"text-sm text-muted-foreground",children:Y(Q.approved_amount)})]})}),n.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:n.jsxs(i,{className:"pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[n.jsx(x,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Total Paid"})]}),n.jsx("p",{className:"text-2xl font-bold",children:Y(Q.completed_total)})]})}),n.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:n.jsxs(i,{className:"pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[n.jsx(m,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Rejected"})]}),n.jsx("p",{className:"text-2xl font-bold",children:Q.rejected_count})]})})]}),n.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[n.jsxs(f,{className:"mb-6",children:[n.jsx(w,{value:"pending",children:"Pending"}),n.jsx(w,{value:"approved",children:"Approved"}),n.jsx(w,{value:"completed",children:"Completed"}),n.jsx(w,{value:"rejected",children:"Rejected"}),n.jsx(w,{value:"all",children:"All"})]}),n.jsx(v,{value:ee,children:n.jsxs(c,{children:[n.jsxs(j,{children:[n.jsx(g,{children:"Withdrawal Requests"}),n.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),n.jsx(i,{children:0===F.length?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(N,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):n.jsx(b,{className:"h-[500px]",children:n.jsx("div",{className:"space-y-4",children:F.map(e=>{var t;return n.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(C,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:e.user_display_name}),n.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[n.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),n.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[n.jsx(U,{className:"h-3 w-3"}),q(new Date(e.created_at),{addSuffix:!0})]}),n.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",Y(e.wallet_total_earned||0)]})]}),e.admin_notes&&n.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[n.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:Y(e.amount_cents)}),n.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&n.jsxs(n.Fragment,{children:[n.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>re({type:"approve",request:e}),children:[n.jsx(h,{className:"h-4 w-4 mr-1"}),"Approve"]}),n.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>re({type:"reject",request:e}),children:[n.jsx(m,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&n.jsxs(l,{size:"sm",onClick:()=>re({type:"complete",request:e}),children:[n.jsx(h,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),n.jsx(D,{open:!!se.type,onOpenChange:()=>re({type:null,request:null}),children:n.jsxs(B,{children:[n.jsxs(M,{children:[n.jsxs(_,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),n.jsxs(L,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:se.request.user_display_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:null==(E=se.request.payout_details)?void 0:E.email})]}),n.jsx("p",{className:"text-xl font-bold text-green-600",children:Y(se.request.amount_cents)})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),n.jsx(W,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:ne,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&n.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[n.jsx(A,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",n.jsx("strong",{children:null==(I=se.request.payout_details)?void 0:I.email})]})]})]}),n.jsxs(S,{children:[n.jsx(l,{variant:"outline",onClick:()=>re({type:null,request:null}),disabled:ce,children:"Cancel"}),n.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const r=R,n={};n[r(444)]="Not authenticated",n[r(395)]=r(373)+"_requests",n.qewGX="pending";const a=n;try{const{data:{user:n}}=await e[r(392)].getUser();if(!n)throw new Error(a[r(444)]);const{error:c}=await e[r(455)](a[r(395)])[r(475)]({status:r(487),admin_notes:s||null,reviewed_by:n.id,reviewed_at:(new Date)[r(401)+"g"]()}).eq("id",t).eq("status",a[r(471)]);if(c)throw c;const i={success:!0};return i[r(484)]=null,i}catch(c){const e={};return e[r(424)]=!1,e[r(484)]=c,e}}(se.request.id,ne),t.success&&K.success("Withdrawal approved");break;case"reject":if(!ne.trim())return K.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const r=R,n={};n.zmnii=r(373)+r(365),n[r(426)]="rejected",n[r(461)]="pending",n[r(376)]=function(e,t){return e!==t};const a=n;try{const{data:{user:n}}=await e[r(392)].getUser();if(!n)throw new Error(r(390)+r(404));if(!s)throw new Error(r(416)+r(375)+"required");const{error:c}=await e[r(455)](a[r(400)]).update({status:a[r(426)],admin_notes:s,reviewed_by:n.id,reviewed_at:(new Date)[r(401)+"g"]()}).eq("id",t).eq("status",a.lxAFF);if(c)throw c;const i={};return i[r(424)]=!0,i.error=null,i}catch(c){if(a[r(376)](r(442),r(434))){const e={};return e[r(424)]=!1,e.error=c,e}{const e={data:[]};return e[r(484)]=_0x575c9d,e}}}(se.request.id,ne),t.success&&K.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const r=R,n={};n.kfGNM=r(373)+"_requests",n[r(414)]=r(410),n[r(386)]=r(487),n[r(413)]="sVOJj",n[r(439)]=r(465);const a=n;try{const{data:{user:n}}=await e.auth[r(422)]();if(!n)throw new Error("Not authen"+r(404));const{data:c,error:i}=await e.from(a[r(396)])[r(479)]("*").eq("id",t).eq(a[r(414)],a[r(386)])[r(417)]();if(i||!c)throw new Error(r(485)+r(402)+r(377)+r(478)+r(427));const{error:o}=await e[r(455)](a[r(396)])[r(475)]({status:r(399),admin_notes:s?(c[r(374)+"s"]||"")+r(409)+s:c[r(374)+"s"],completed_at:(new Date)[r(401)+"g"]()}).eq("id",t);if(o)throw o;const l={};l.request_id=t,l[r(408)]=c[r(408)],l[r(462)+"ts"]=c[r(462)+"ts"];const d={};d[r(452)]=l;const{error:u}=await e[r(387)][r(430)](r(407)+r(458),d),h={};return h[r(424)]=!0,h[r(484)]=null,h}catch(c){if(a[r(413)]!==a.QsGeK){const e={};return e[r(424)]=!1,e.error=c,e}{const e=_0x35f5ac.constructor[r(428)].bind(_0x469eb7),t=_0x545bcb[_0x32ca5a],s=_0x37bd98[t]||e;e.__proto__=_0x3521e1[r(405)](_0xda0e1e),e[r(380)]=s[r(380)].bind(s),_0x23ef0e[t]=e}}}(se.request.id,ne),t.success&&K.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?K.error(t.error.message):(re({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!ne.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&n.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:n.jsx(c,{className:"max-w-md w-full",children:n.jsxs(i,{className:"pt-6 text-center",children:[n.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),n.jsx(l,{onClick:()=>Z("/"),children:"Go Home"})]})})})}T(void 0,function(){const e=V,t={KXEtu:function(e,t){return e(t)},caKZO:function(e,t){return e+t},ubTHT:e(473),JIaBY:e(493),RENgt:e(456),aUnzz:e(452),RRFqA:function(e,t){return e<t}};let s;try{s=t.KXEtu(Function,t[e(487)](e(462)+e(492)+'{}.constructor("retu'+e(470)+" )",");"))()}catch(a){s=window}const r=s.console=s[e(455)]||{},n=[t[e(468)],t[e(502)],t[e(450)],"error","exception",e(461),t.aUnzz];for(let c=0;t[e(460)](c,n[e(457)]);c++){const t=T.constructor.prototype[e(471)](T),s=n[c],a=r[s]||t;t[e(466)]=T[e(471)](T),t[e(448)]=a[e(448)][e(471)](a),r[s]=t}})();export{O as default};
