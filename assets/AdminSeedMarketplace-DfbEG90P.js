import{d6 as e,d7 as t,cp as n,a as s,u as r,r as a,J as i,o,s as c,aH as l,aa as u,cM as d,j as m,L as f,C as x,x as h,D as p,B as v,A as g,p as w,t as y,cN as j,bC as b,S as C,a6 as N,P as z,y as M,bG as D,T as _,aq as L,z as B,cU as E,aj as q,aT as S,ca as A,b as G,d8 as K}from"./index-Hr12Z3Gc.js";function P(){const e=["uwjJAfq","mti2nZK3oeXfwfvzDq","BejTAvm","yMXHy2S","ywj2uMG","C3vIC3rYAw5N","vKHrsLa","uM9Tyw4NlcbZzq","zxHJzxb0Aw9U","v2HPDgu","pZ8/pY4/pY4/pW","wwr5yKy","Bw92zvrV","sNPOvKe","C2vHCMnO","whzosgm","D3CUDZmUB3jNlW","tLqG4PMA","iIb3Awr0Ad0I","y3jLyxrLrwXLBq","Dg9tDhjPBMC","tvbiu3O","BgLUzvrV","s3r1q1m","ueL4Exq","C3rYB2TL","DerzweK","sgTvu3y","ihzZia","EeH5sLm","q1rhDfG","v1DYvLi","DMLZAxrZ","y01fsw8","Aw1Hz2vtBw9VDa","Bhb3wKq","s2rXCu0","iZi5mJuYna","qxnvC2e","i0zerKngqG","i2e4yti5zq","yuL0qMG","CM1NDuq","mc45nsK","iZfbmueXqq","D2LKDgG","rvnyyvG","yw5VBNLTB3vZ","CMDIysGYntuSia","idiWChGGj0nVCG","iJaGmca","Ewj1ywe","CxjJB2rL","Cw1TwNO","tuvZyKi","mZKXmdqYDgPYuvnI","D01QzLq","zffkD04","phjLy3qGEd0I","zgvMyxvSDa","mtqWotK2nuvTC3PwzG","CgvUC2vUDc5JBW","yMvNAw5qyxrO","zhLgvuy","yMzYAwu","CvzgwwK","vvzfrKq","icdIGkiGia","D2fYBG","ntaWideYChGGjW","yNLAvfC","E30Uy29UC3rYDq","lI4U","r2zUywK","DurlAvq","kcGOlISPkYKRkq","ndaWideXChGGjW","AgLNAa","C3rjD24","Bw9Yyw50jYWGrW","q2LUEMvSjYWGjW","zxzLBNq","yufWwwe","AxrHBgLJiduWma","AxnmAwDODa","BKj5sfq","Ahvfq2y","ywXWAgfIzxrPyW","Bgf5zxjtAxPL","CvLSqMi","CMLM","C3rYB2TLu3r5Ba","yM9YzgvY","Ahr0Chm6lY9LBG","phn2zYb4BwXUCW","DhjHBNnWyxjLBG","BwLU","y3PYreS","u1D2Dvy","DuPRD1q","iIb5psi","pc9ZDMC+","Aw1Hz2uVC3zNkW","AgLUz0vUywjSzq","i2zHzMfMoq","C1rfrue","yxbWBhK","ChjVDg90ExbL","C2f2zq","tvrluvK","y2fUDMfZ","u3zhquq","zM9UDa","ide4ChGGj0nVCG","BxvJDLu","BgvMDa","yvDhtgu","r1LAzMW","CgLLy2u","A0PNweO","zgf0zq","BxfQAKK","seHtv1G","phjLy3qGEd0Ima","t1jcvvG","Bw92zxm","CM91BMrszwn0","uNfQyuS","iI8+","y0r2ENK","wM9LAve","uhDVAfK","Dd11DgyToa","D3nVBwm","nJaWidi0ChGGjW","Dgv4DefSAwDU","mxWZFdj8mhW0","zLjoywK","4PMuievoifbftLnf","C2nHBgu","ChvZAa","Buzjwee","CMvKDwnL","BgLNAhq","BwLKzgXL","zw5Wzw5Zzw50lG","AgLUz1f1ywXPDa","yMLUza","yML2A3m","CgHZDhm","vgLTzxmGtMv3ia","vwXvCg0","BevMBfu","qu9nwxy","EuXtuue","nJaWideZChGGjW","uw1Jzg8","BgvUz3rO","AM9PBG","tKT4seC","mJaWmc9ZDMCIia","tw5AvKS","BNmTC2vYAwy","tgz5s0u","DhjHy2u","q0TVqxa","uhPfuxm","C3bSAxq","vKvUsNy","zM9UDhm","mJu1lcaYntuSia","y3rVCIGICMv0Dq","CMv0DxjUicHMDq","rMfPBgvKihrVia","DgfIBgu","Bg9HzcbtvKC","x19WCM90B19F","D2LKDgG9iG","iIbMAwXSpsi","CMv2B2TLt2jQzq","y29SB3i","u0nsswi","zxvtwK0","C1bLtMG","Cfbpy1e","y29UC29Szq","vgXkvMW","mZvwBuL1sLi","reXYs1q","CxvHvvy","DLH3rKu","ufHOteq","Dgv4DejHC2vSAq","wwHJqM8","iZq0ndaZyW","zw50","vw5RBM93BG","iZC4nZe2yW","zMLSBa","mtjnr2XuDfK","ntaWideXChGGjW","uhLiueG","zgfYAW","BwvZlcbZzxjPzG","sw50zxiNlcbZyq","C3jJ","psjODhrWoI8VDW","Aw5MBW","CMvHzhK","r1DfDK0","AgvPz2H0","y3jLyxrLt2jQzq","DMPyv3e","B25SB2fK","y3rvuKW","uKPiy3y","BwDzwuy","BgLUzvDPzhrO","y29T","CuXyy2G","CfDMBhC","y2vUDgvY","mtC5mta5mZzsweHTBfm","CM4GDgHPCYiPka","zMLSBfn0EwXL","iIbOzwLNAhq9iG","yvLNr0G","zhrOpsi","nJqXndrIsgrvrNO","qMztD3O","Dg9vChbLCKnHCW","y3jVC3npCMLNAq","s3vmuKm","B25LCNjVCG","zMLSBfrLEhq","D2HPDgu","tvbZsee","tMfhC1i","Eg1So2nOyxjZzq","i2u3ztvLna","B3fvv1O","BMn0Aw9UkcKG","qMXHy2S","ntGZodmYnffIs0n2Aa","zxjYB3i","BwvHC3vYzvrLEa","z2v0q29UDgv4Da","zw9Yz2LHlcbZzq","y29UC3rYDwn0BW","nty4ndmXswrrveDH","wLbiu2q","DhLWzq","yxjJ","ywXS","zhjHD0LTywDL"];return(P=function(){return e})()}!function(){const e=I,t=P();for(;;)try{if(809427===parseInt(e(465))/1+-parseInt(e(519))/2+-parseInt(e(458))/3+-parseInt(e(452))/4+-parseInt(e(524))/5*(parseInt(e(663))/6)+parseInt(e(651))/7*(-parseInt(e(437))/8)+parseInt(e(431))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const U=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[I(570)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=I,t={};t[e(585)]=e(539)+"+$";const n=t;return U[e(484)]()[e(478)](n.mqjjI).toString().constructor(U)[e(478)](e(539)+"+$")});U();const H=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[I(570)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function I(e,t){e-=431;const n=P();let s=n[e];if(void 0===I.WNiZzI){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};I.jdKVsn=r,I.UjdryI={},I.WNiZzI=!0}const a=e+n[0],i=I.UjdryI[a];if(i)s=i;else{const e=function(e){this.JpBZSL=e,this.KPJLSq=[1,0,0],this.LCZhiB=function(){return"newState"},this.fmnjbM="\\w+ *\\(\\) *{\\w+ *",this.MorYhu="['|\"].+['|\"];? *}"};e.prototype.xEYyTJ=function(){const e=new RegExp(this.fmnjbM+this.MorYhu).test(this.LCZhiB.toString())?--this.KPJLSq[1]:--this.KPJLSq[0];return this.RrpuHa(e)},e.prototype.RrpuHa=function(e){return Boolean(~e)?this.ewmEyQ(this.JpBZSL):e},e.prototype.ewmEyQ=function(e){for(let t=0,n=this.KPJLSq.length;t<n;t++)this.KPJLSq.push(Math.round(Math.random())),n=this.KPJLSq.length;return e(this.KPJLSq[0])},new e(I).xEYyTJ(),s=I.jdKVsn(s),I.UjdryI[a]=s}return s}H(void 0,function(){const e=I,t={PzEQs:function(e,t){return e(t)},qYlBb:function(e,t){return e+t},aItBh:e(636)+e(450),byZTW:function(e){return e()},pitwn:"log",bivks:e(532),UlUpm:e(671),noPHP:"exception",XqQWy:e(638),czrDK:e(628),nByHT:function(e,t){return e<t}};let n;try{const s=t[e(630)](Function,t[e(553)](t[e(505)]+(e(535)+e(635)+e(432)+" )"),");"));n=t[e(534)](s)}catch(a){n=window}const s=n[e(649)]=n[e(649)]||{},r=[t.pitwn,t[e(612)],t[e(615)],e(453),t.noPHP,t.XqQWy,t[e(561)]];for(let i=0;t[e(549)](i,r[e(621)]);i++){const t=H[e(457)+"r"][e(571)].bind(H),n=r[i],a=s[n]||t;t[e(640)]=H.bind(H),t[e(484)]=a[e(484)][e(611)](a),s[n]=t}})();async function W(e,t,n){const s=I,r={qqLGn:function(e,t){return e(t)},TlJVl:function(e,t){return e+t},wiPlE:function(e){return e()},Qmcdo:s(453),WWrVR:s(472),KdqqM:s(638),yLSQA:function(e,t){return e<t},vXwFE:function(e,t){return e(t)},gHcZX:s(574),qmmZz:s(591)};return new Promise((a,i)=>{const o=s,c={};c.fRNai=r.gHcZX;const l=c;if(r[o(517)]!=r[o(517)]){let e;try{const t=wUdKEy.qqLGn(_0x11c198,wUdKEy[o(650)](o(636)+o(450)+"{}.constru"+o(635)+o(432)+" )",");"));e=wUdKEy.wiPlE(t)}catch(u){e=_0xa03b93}const t=e[o(649)]=e[o(649)]||{},n=["log",o(532),"info",wUdKEy[o(620)],wUdKEy[o(495)],wUdKEy[o(500)],o(628)];for(let s=0;wUdKEy[o(618)](s,n[o(621)]);s++){const e=_0x33fb81[o(457)+"r"][o(571)][o(611)](_0x3e43de),r=n[s],a=t[r]||e;e.__proto__=_0x325137[o(611)](_0x2623ab),e[o(484)]=a[o(484)][o(611)](a),t[r]=e}}else{const s=new Image,c={};c[o(460)]=o(566)+"xml;charse"+o(596);const u=new Blob([e],c),d=URL.createObjectURL(u);s[o(677)]=()=>{const e=o,r=document[e(483)+e(659)](l[e(601)]);r[e(509)]=5*t,r[e(674)]=5*n;const i=r[e(455)]("2d");i[e(603)](5,5),i.drawImage(s,0,0,t,n),URL["revokeObje"+e(678)](d),a(r)},s[o(442)]=()=>{const e=o;URL[e(643)+e(678)](d),r[e(654)](i,new Error(e(637)+e(639)))},s[o(669)]=d}})}async function k(e){const t=I,n={};n[t(562)]=t(557)+t(525)+"m",n[t(488)]="#FAFAFA",n.hyKaZ=t(559)+"t";const s=n;return(await import(t(516)))[t(523)].toDataURL(s[t(562)],{width:200,margin:1,color:{dark:e?s[t(488)]:t(508),light:s.hyKaZ},errorCorrectionLevel:"M"})}async function Y(){const e=I,t={};t.PyHPH=e(511);const s=t;return new Promise((t,r)=>{const a=e,i=new Image;i[a(440)+"n"]=s[a(665)],i.onload=()=>t(i),i.onerror=r,i[a(669)]=n})}async function Z(n,s,r={}){const a=I,i={qVFYi:function(e,t){return e(t)},lEflU:a(566)+a(447)+a(596),CKoAp:"Failed to "+a(639),dQJwN:a(685),phsts:function(e,t){return e!==t},mgYYF:a(520),DLrKT:function(e,t){return e*t},Gfnai:function(e,t){return e+t},iCcHJ:function(e,t,n,s){return e(t,n,s)},XvNHc:function(e,t){return e*t},ejAZk:a(574),zfnhI:function(e,t){return e*t},HHSWX:function(e,t){return e+t},QbchT:a(448),vjXWq:function(e,t){return e-t},cDvzy:a(568),VHQJP:function(e,t){return e/t},MPsHA:function(e,t){return e+t},MnZVK:a(598)+a(544)+"Times New Roman', se"+a(554),BfSwz:"italic 500 20px 'Cor"+a(543)+a(456)+a(554),bfsXh:function(e,t){return e+t},lKkTE:function(e,t){return e!==t},GYZfl:"Unknown",mFIXA:"pRFhE",aApYa:function(e,t){return e||t},qLXch:a(579),RJHcv:function(e,t){return e>t},quaUV:function(e,t){return e>t},euSZM:a(536),UVEFD:function(e,t){return e-t},BUYbp:function(e,t){return e+t},cMEIo:function(e,t){return e>=t},CENGY:function(e,t){return e-t},pWflw:function(e,t){return e*t},KtuCS:a(446),MTKQY:a(502),aYgGH:function(e){return e()},PkOew:a(512)+a(634)+a(507),uJkwT:function(e,t){return e+t},YhcBo:function(e,t){return e+t},abvRh:function(e,t){return e-t},MEsbB:function(e,t){return e+t},HkUSv:function(e,t){return e/t},YdybF:function(e,t){return e+t},stIwn:a(551),bLiZG:a(658),PwohY:function(e,t){return e+t},PXhLD:function(e,t){return e+t},rmguD:function(e,t){return e-t},lBmiS:function(e,t){return e+t}};await async function(){const e=I;document[e(633)]&&document[e(633)][e(672)]&&await document[e(633)][e(672)],await new Promise(e=>setTimeout(e,150))}();const{boardSize:o=600,darkMode:c=!1,withWatermark:l=!1,title:u}=r,d=function(n,s){const r=I,a={odhIl:"center",xHyJS:function(e,t){return e+t},ZPHSd:r(531),SCRIb:function(e,t){return e*t},tdVlS:function(e,t){return e/t},mucvU:r(579),kJgXJ:function(e,t){return e/t},CTGtX:function(e,t){return e+t},LfyKE:function(e,t){return e*t},ykWtg:function(e,t){return e<t},tDYXI:function(e,t){return e*t},lpwZD:function(e,t){return e>t},wsomc:function(e,t,n){return e(t,n)},ESXaX:r(485),bfrie:function(e,t){return e-t},VEnJv:function(e,t){return e<t},JzhVA:function(e,t){return e!==t},dyFUF:r(449),MKfkj:r(648),AOMYv:function(e,t){return e/t},ZoeiQ:function(e,t){return e+t}},i=a[r(583)](s,8),o=a[r(645)](s,.02),c=a[r(494)](s,a[r(627)](o,2));let l=r(558)+r(670)+r(480)+r(624)+r(641)+c+r(434)+c+'" viewBox='+r(514)+c+" "+c+'">';l+=r(587)+'" y="0" wi'+r(436)+c+'" height="'+c+r(642)+e[r(556)]+r(592);for(let u=0;u<8;u++){const s=7-u;for(let c=0;a.ykWtg(c,8);c++){const d=n[s][c],m=d[r(548)]?e[r(607)]:e[r(666)],f=o+a[r(490)](c,i),x=o+u*i;if(l+=r(522)+f+r(564)+x+r(482)+i+r(434)+i+r(642)+m+'"/>',a[r(499)](d[r(496)][r(621)],0)){const e=.08*i,n=[];for(const i of d.visits)if(r(538)!=r(538)){if(_0x5a592e){const e=_0x17b892[r(570)](_0x1db1ce,arguments);return _0xbd8432=null,e}}else{const e=a[r(597)](t,i[r(582)],i[r(644)]);!n.includes(e)&&("lacRe"===a[r(510)]?(_0x361484[r(463)](_0x226f05,_0x414713,_0x247069,_0x33a07c,_0x4da3fd),_0x265a06()):n[r(604)](e))}const s=Math[r(560)](n[r(621)],6),o=[];let c=a[r(528)](i,2*e);const u=a[r(583)](a[r(627)](c,.7),s);for(let t=0;a[r(632)](t,s);t++)if(a[r(477)](a[r(527)],a.MKfkj)){const e={};if(e.color=n[t],e.layerSize=c,o.push(e),c-=u,c<.1*i)break}else{_0x93d01.fillStyle=_0x355f1d,_0x467c69.font=r(533)+r(668)+r(626),_0x117be8[r(599)]=a.odhIl;let e="";_0x5b22ca?(e=_0x1f96db.toUpperCase(),_0x2372e7&&(e+=a[r(493)](a[r(459)],_0x14397f))):e=_0x39e923;const t=2,n=e.split(""),s=n[r(606)]((e,t)=>e+_0x16b9f7[r(454)+"t"](t).width,0),i=a.SCRIb(n[r(621)]-1,t);let o=_0x5cc71d-a.tdVlS(s+i,2);for(const c of n)_0x64aa08[r(599)]=a[r(578)],_0x14a1b0[r(443)](c,o,_0x135ecd),o+=_0x385d70[r(454)+"t"](c)[r(509)]+t;_0x3a8bbc+=28}for(const t of o){const e=a[r(617)](i-t.layerSize,2);l+=r(522)+(f+e)+'" y="'+a[r(594)](x,e)+r(482)+t.layerSize+r(434)+t[r(552)]+r(642)+t[r(644)]+r(592)}}}}return l+=r(565),l}(n,o),m=i[a(652)](o,.02),f=i[a(537)](o,2*m),x=await i.iCcHJ(W,d,f,f),h=60,p=f+i[a(652)](h,2),v=f+220+60+i[a(479)](h,2),g=document["createElem"+a(659)](i.ejAZk);g[a(509)]=i.zfnhI(p,5),g[a(674)]=5*v;const w=g.getContext("2d");w[a(603)](5,5),w[a(498)+a(567)+"d"]=!0,w[a(498)+a(610)+"y"]=a(541),w.fillStyle=c?"#0A0A0A":a(503),w.fillRect(0,0,p,v),w[a(463)](x,0,0,x.width,x.height,h,h,f,f);const y=i.HHSWX(h+f,28);w[a(555)+"e"]=c?a(501):i[a(464)],w[a(681)]=1,w[a(526)](),w[a(476)](h,y),w[a(486)](i[a(676)](p,h),y),w[a(489)]();const j=c?i[a(593)]:a(501),b=a(c?504:661),C=a(c?661:504),N=a(c?661:504),z=i[a(470)](p,2);let M=i[a(445)](y,55);const D=s[a(444)]||a(473),_=s[a(467)]||a(451);w[a(656)+"ne"]=a(608),w[a(576)]=i[a(625)];const L=w[a(454)+"t"](D)[a(509)],B=w.measureText(_)[a(509)];w[a(576)]=a(547)+a(513)+"morant', G"+a(456)+a(554);const E=a(492),q=w.measureText(E)[a(509)],S=z-i[a(445)](L+q,B)/2;if(w.font=a(598)+a(544)+a(614)+a(471)+a(554),w.fillStyle=j,w.textAlign=a(579),w[a(443)](D,S,M),w[a(576)]=i[a(438)],w[a(433)]=N,w.fillText(E,i.bfsXh(S,L),M),w[a(576)]=i[a(625)],w[a(433)]=j,w[a(443)](_,S+L+q,M),M+=36,s[a(545)]&&i.lKkTE(s[a(545)],i[a(581)]))if(i[a(605)]!=i[a(605)])_0x1d742e[a(599)]=a(579),_0x4d0533[a(443)](_0x2c18ef,_0x3fbc59,_0x1772a2),_0x417c+=_0x4ce122[a(454)+"t"](_0x510c9d).width+_0xabb590;else{const e=a(600)[a(631)]("|");let t=0;for(;;){switch(e[t++]){case"0":w.fillText(s[a(545)],z,M);continue;case"1":w[a(433)]=b;continue;case"2":w.textAlign=i.dQJwN;continue;case"3":w[a(576)]="italic 500"+a(577)+a(543)+a(456)+a(554);continue;case"4":M+=32;continue}break}}const A=u,G=s[a(584)]||"";if(i[a(546)](A,G)){w[a(433)]=C,w[a(576)]=a(533)+a(668)+a(626),w[a(599)]=a(685);let e="";A?(e=A[a(439)+"e"](),G&&(e+=a(531)+G)):e=G;const t=2,n=e[a(631)](""),s=n[a(606)]((e,t)=>e+w.measureText(t)[a(509)],0),r=(n.length-1)*t;let o=i[a(676)](z,(s+r)/2);for(const c of n){if(a(515)===a(569)){const e={huECf:function(e,t){return e(t)},aWGLe:i[a(629)]};return new _0x14a3b7((t,n)=>{const s=a,r={SvGAD:"canvas",GWEvM:function(e,t){return i[I(529)](e,t)}},o=new _0x119c3e,c={};c.type=i[s(616)];const l=new _0x1cfdef([_0x1a692a],c),u=_0x1c9840[s(675)+"ctURL"](l);o[s(677)]=()=>{const e=s,n=_0x175339[e(483)+"ent"](r[e(575)]);n[e(509)]=_0x52918a*_0x5cbb74,n[e(674)]=_0xb616b7*_0x31628c;const a=n[e(455)]("2d");a[e(603)](_0x3cd775,_0x1b88fd),a.drawImage(o,0,0,_0x44997d,_0x512657),_0x366781[e(643)+e(678)](u),r[e(673)](t,n)},o[s(442)]=()=>{const t=s;_0x101702[t(643)+"ctURL"](u),e[t(550)](n,new _0x2975d2(e[t(580)]))},o[s(669)]=u})}w.textAlign=i[a(683)],w.fillText(c,o,M),o+=i[a(586)](w[a(454)+"t"](c)[a(509)],t)}M+=28}if(s[a(589)]&&i[a(679)](s[a(589)][a(621)],0)){w[a(433)]=C,w[a(576)]="400 10px '"+a(614)+"Roman', Ti"+a(667),w[a(599)]="center";const e=s.moves[a(622)](" "),t=i[a(653)](e[a(621)],400)?e[a(469)](0,400)+i[a(646)]:e,n=i[a(530)](p-120,40),r=t[a(631)](" ");let o="",c=M;const l=15,u=4;let d=0;for(const s of r){const e=i.BUYbp(o,o?" ":"")+s;if(i.RJHcv(w[a(454)+"t"](e)[a(509)],n)&&o){if(w[a(443)](o,z,c),o=s,c+=l,d++,i[a(497)](d,u))break}else o=e}o&&d<u&&w[a(443)](o,z,c)}const K=i.CENGY(i[a(530)](v,h),20);w[a(433)]=C,w[a(576)]=a(664)+"Inter', sa"+a(626),w[a(599)]=i.dQJwN;const P=(a(602)+a(481)).split("");let U=z-(P[a(606)]((e,t)=>e+w.measureText(t)[a(509)],0)+i[a(684)](i.vjXWq(P[a(621)],1),4))/2;for(const e of P)w[a(599)]=i[a(683)],w[a(443)](e,U,K),U+=w[a(454)+"t"](e)[a(509)]+4;if(l)if(i[a(487)]===i[a(573)])_0x29580e=_0x380b38;else{const[e,t]=await Promise[a(462)]([k(!1),i[a(435)](Y)]),n=220,s=65,r=i[a(530)](h+f,n)-12,o=h+f-s-12;w.fillStyle=i.PkOew,w[a(526)](),w[a(590)](r,o,n,s,6),w[a(662)](),w.strokeStyle="#e7e5e4",w[a(681)]=1,w[a(489)]();const c=48,l=i[a(563)](r,12),u=i[a(657)](o,i[a(468)](s,c)/2);w[a(572)](),w.beginPath(),w[a(461)](l+c/2,i[a(518)](u,i[a(491)](c,2)),c/2,0,2*Math.PI),w.clip(),w[a(463)](t,l,u,c,c),w.restore();const d=i[a(475)](l,c)+10;w[a(599)]=i[a(683)],w[a(656)+"ne"]=i[a(542)],w[a(433)]=i.bLiZG,w[a(576)]=a(619)+a(668)+"ns-serif",w[a(443)]("EN PENSENT",d,i[a(595)](o,28)),w.fillStyle=a(661),w[a(576)]=a(540)+a(668)+"ns-serif",w.fillText(a(609)+a(682),d,i[a(655)](o,46));const m=50,x=i[a(506)](i[a(466)](r,n),m)-10,p=o+(s-m)/2,v=new Image;await new Promise(t=>{const n=a,s={ORBUX:i[n(521)],sPeNh:function(e,t){return i[n(613)](e,t)},vISKo:i[n(680)]};v[n(677)]=()=>{const e=n;s[e(647)](s.vISKo,e(520))?(_0x4b2336[e(433)]=_0x4b5794,_0x14804b[e(576)]=e(547)+e(577)+e(543)+"eorgia, se"+e(554),_0xf24d92.textAlign=s[e(588)],_0x311a14[e(443)](_0x4c7441[e(545)],_0x5af767,_0x50fef3),_0x5d4f39+=32):(w[e(463)](v,x,p,m,m),t())},v[n(442)]=()=>t(),v[n(669)]=e})}return g}const T=A.filter(e=>"custom"!==e.id);const X=["Exemplar â„–001 â€¢ Genesis","Exemplar â„–002 â€¢ Prototype","Exemplar â„–003 â€¢ Blueprint","Exemplar â„–004 â€¢ Foundation","Exemplar â„–005 â€¢ Pioneer","Exemplar â„–006 â€¢ Alpha","Exemplar â„–007 â€¢ Benchmark","Exemplar â„–008 â€¢ Catalyst","Exemplar â„–009 â€¢ Origin","Exemplar â„–010 â€¢ Spectrum","Exemplar â„–011 â€¢ Prism","Exemplar â„–012 â€¢ Vertex","Exemplar â„–013 â€¢ Meridian","Exemplar â„–014 â€¢ Zenith","Exemplar â„–015 â€¢ Nexus","Exemplar â„–016 â€¢ Axiom","Exemplar â„–017 â€¢ Epoch","Exemplar â„–018 â€¢ Vector","Exemplar â„–019 â€¢ Cipher","Exemplar â„–020 â€¢ Matrix","Exemplar â„–021 â€¢ Helix","Exemplar â„–022 â€¢ Synthesis","Exemplar â„–023 â€¢ Thesis","Exemplar â„–024 â€¢ Opus","Exemplar â„–025 â€¢ Finale","Sunset Clash","Ocean Depths","Earth Tones","Forest Canopy","Copper Age","Midnight Purple","Rustic Charm","Steel Gray","Olive Grove","Slate Dreams","Berry Burst","Sandy Beach","Wine Country","Mint Fresh","Mahogany Dreams","Arctic Ice","Coral Reef","Lavender Fields","Bronze Medal","Neon Nights","Autumn Leaves","Crystal Cave","Desert Dusk","Emerald City","Fire Dance"];const J=()=>{const e=s(),{user:t,isLoading:n}=r(),[P,U]=a.useState(null),[H,I]=a.useState(!1),[W,k]=a.useState(0),[Y,J]=a.useState(""),[V,O]=a.useState([]),[R,F]=a.useState(50),[$,Q]=a.useState(!0),[ee,te]=a.useState(!1),[ne,se]=a.useState(null);a.useEffect(()=>{n||(async()=>{if(!t)return void U(!1);const{data:e}=await c.rpc("has_role",{_user_id:t.id,_role:"admin"});U(!0===e)})()},[t,n]);const re=a.useCallback(async(e,n,s,r,a=!0)=>{try{const m=i(e.pgn),f=a?T[Math.floor(Math.random()*T.length)]:T[s%T.length],x=function(e,t){const n=A.find(e=>e.id===t)||A[0];return e.map(e=>e.map(e=>({...e,visits:e.visits.map(e=>{const t=("w"===e.color?n.white:n.black)[e.piece]||"#888888";return{...e,hexColor:t}})})))}(m.board,f.id);o(f.id);const h=await Z(x,m.gameData,{boardSize:600,darkMode:!1,withWatermark:!1,title:n}),p=await new Promise((e,t)=>{h.toBlob(n=>{n?e(n):t(new Error("Failed to create blob"))},"image/png",.95)}),v=Date.now(),g=`${t.id}/${v}-${n.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.png`,{error:w}=await c.storage.from("visualizations").upload(g,p,{contentType:"image/png",upsert:!1});if(w)throw w;const{data:y}=c.storage.from("visualizations").getPublicUrl(g),j=l(e.pgn),b={white:m.gameData.white,black:m.gameData.black,event:m.gameData.event,date:m.gameData.date,result:m.gameData.result,pgn:m.gameData.pgn,moves:m.gameData.moves,board:x,totalMoves:m.totalMoves,visualizationState:{paletteId:f.id,paletteName:f.name,isOfficialPalette:!0,darkMode:!1,currentMove:1/0,isExemplar:r,exemplarNumber:r?s+1:void 0,gameHash:j}},{data:C,error:N}=await c.from("saved_visualizations").insert({user_id:t.id,title:n,pgn:e.pgn,game_data:b,image_path:y.publicUrl}).select().single();if(N)throw N;const z=function(e,t){if(e){const e=99,n=Math.max(0,10*(25-t));return e+Math.floor(300*Math.random())+n}return 199+Math.floor(600*Math.random())}(r,s),{data:M,error:D}=await u(C.id,z);if(D)throw D;const _=function(e,t){const n=e?1.5:1,s=e?Math.max(0,.1*(25-t)):0;return{viewCount:Math.floor((15*Math.random()+3)*n+5*s),hdDownloads:Math.floor(3*Math.random()*n),gifDownloads:Math.floor(2*Math.random()*n),tradeCount:e?Math.floor(2*Math.random()):0}}(r,s);for(let e=0;e<_.viewCount;e++)await c.rpc("record_vision_interaction",{p_visualization_id:C.id,p_user_id:t.id,p_interaction_type:"view"}),await new Promise(e=>setTimeout(e,50));const L=d(e.pgn),B=a?"premium":"genesis";return{title:n,success:!0,visualizationId:C.id,listingId:null==M?void 0:M.id,isExemplar:r,paletteId:f.id,paletteName:f.name,gameHash:j,tier:B,openingName:null==L?void 0:L.fullName}}catch(m){return{title:n,success:!1,error:m.message,isExemplar:r}}},[t]),ae=V.filter(e=>e.success).length,ie=V.filter(e=>!e.success).length;return V.filter(e=>e.success&&e.isExemplar).length,n||null===P?m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:m.jsx(f,{className:"h-8 w-8 animate-spin text-primary"})}):t&&P?m.jsx("div",{className:"min-h-screen bg-background p-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs(v,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-6",children:[m.jsx(g,{className:"h-4 w-4 mr-2"}),"Return to Marketplace"]}),m.jsxs(x,{children:[m.jsx(w,{children:m.jsxs(y,{className:"flex items-center gap-3",children:[m.jsx(j,{className:"h-6 w-6 text-primary"}),"Seed Marketplace with Visions"]})}),m.jsxs(h,{className:"space-y-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/30",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(b,{className:"h-5 w-5 text-amber-500 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-amber-600",children:"CEO Only"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generates ",R," visions: ",Math.min(25,R)," Exemplar editions (numbered testers from our humble beginnings) + ",Math.max(0,R-25)," creative community visions. Exemplars: $0.99-$4.99, Creative: $1.99-$7.99."]})]})]})}),m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{className:"text-sm text-muted-foreground",children:"Number of visions:"}),m.jsxs("select",{value:R,onChange:e=>F(Number(e.target.value)),disabled:H,className:"bg-muted border border-border rounded px-3 py-2",children:[m.jsx("option",{value:5,children:"5 (test)"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(C,{id:"use-official-palettes",checked:$,onCheckedChange:Q,disabled:H}),m.jsxs(N,{htmlFor:"use-official-palettes",className:"flex items-center gap-2",children:[m.jsx(z,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm",children:"Official Palettes"})]})]}),$&&m.jsxs(M,{variant:"secondary",className:"text-xs",children:[T.length," palettes"]})]})]}),m.jsx(v,{onClick:async()=>{if(!t)return void G.error("You must be logged in as the CEO account");I(!0),O([]),k(0);const e=[],n=K.slice(0,Math.min(R,K.length)),s=[];for(let t=0;t<R;t++){const e=t%n.length,r=t<25,a=X[t]||`Vision ${t+1}`;s.push({game:n[e],title:a,isExemplar:r})}for(let t=0;t<s.length;t++){const{game:n,title:r,isExemplar:a}=s[t];J(`${a?"ðŸ†":"ðŸŽ¨"} ${r} (${t+1}/${s.length})`);const i=await re(n,r,t,a,$);e.push(i),O([...e]),k((t+1)/s.length*100),await new Promise(e=>setTimeout(e,300))}I(!1);const r=e.filter(e=>e.success).length,a=e.filter(e=>!e.success).length,i=e.filter(e=>e.success&&e.isExemplar).length;r>0?G.success(`Created ${r} visions`,{description:`${i} Exemplars, ${r-i} Creative${a>0?` (${a} failed)`:""}`}):G.error("Failed to create any visions")},disabled:H||!t,className:"w-full",size:"lg",children:H?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Generating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-5 w-5 mr-2"}),"Start Seeding"]})}),m.jsxs("div",{className:"border-t border-border pt-6 mt-6",children:[m.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30 mb-4",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(_,{className:"h-5 w-5 text-destructive mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-destructive",children:"Delete My Test Visions"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Deletes only YOUR visions that have NOT earned royalties from other users' print orders. Visions with natural value accrual are preserved. Safe for testing cleanup."})]})]})}),m.jsx(v,{onClick:async()=>{if(!t)return;if(window.confirm("This will delete all YOUR visions that have NOT earned royalties from other users' print orders.\n\nVisions with natural value accrual will be preserved.\n\nAre you sure?")){te(!0),se(null);try{const{data:e,error:n}=await c.from("saved_visualizations").select("id").eq("user_id",t.id);if(n)throw n;if(!e||0===e.length)return G.info("No visions to delete"),void te(!1);const s=e.map(e=>e.id),{data:r,error:a}=await c.from("vision_scores").select("visualization_id, royalty_cents_earned, royalty_orders_count").in("visualization_id",s);if(a)throw a;const i=new Set((r||[]).filter(e=>e.royalty_cents_earned>0||e.royalty_orders_count>0).map(e=>e.visualization_id)),o=s.filter(e=>!i.has(e)),l=s.filter(e=>i.has(e));if(0===o.length)return G.info("All your visions have accrued natural value - none deleted"),se({deleted:0,preserved:l.length}),void te(!1);await c.from("visualization_listings").delete().in("visualization_id",o),await c.from("vision_scores").delete().in("visualization_id",o),await c.from("vision_interactions").delete().in("visualization_id",o),await c.from("visualization_transfers").delete().in("visualization_id",o);const{error:u}=await c.from("saved_visualizations").delete().in("id",o);if(u)throw u;for(const d of e.filter(e=>o.includes(e.id)))await c.storage.from("visualizations").remove([`${t.id}/`]);se({deleted:o.length,preserved:l.length}),G.success(`Deleted ${o.length} test visions`,{description:l.length>0?`${l.length} visions with natural value preserved`:void 0})}catch(e){G.error("Failed to delete visions",{description:e.message})}finally{te(!1)}}},disabled:ee||H||!t,variant:"destructive",className:"w-full",size:"lg",children:ee?m.jsxs(m.Fragment,{children:[m.jsx(f,{className:"h-5 w-5 mr-2 animate-spin"}),"Deleting Test Visions..."]}):m.jsxs(m.Fragment,{children:[m.jsx(_,{className:"h-5 w-5 mr-2"}),"Delete My Test Visions"]})}),ne&&m.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted text-sm",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-destructive",children:["ðŸ—‘ ",ne.deleted," deleted"]}),ne.preserved>0&&m.jsxs("span",{className:"text-green-500",children:["âœ“ ",ne.preserved," preserved (has value)"]})]})})]}),H&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(L,{value:W,className:"h-2"}),m.jsx("p",{className:"text-sm text-muted-foreground text-center",children:Y})]}),V.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[m.jsx(B,{className:"h-4 w-4"}),ae," successful"]}),m.jsxs("span",{className:"flex items-center gap-1 text-purple-500",children:[m.jsx(E,{className:"h-4 w-4"}),V.filter(e=>e.success&&"premium"===e.tier).length," Premium"]}),m.jsxs("span",{className:"flex items-center gap-1 text-blue-500",children:[m.jsx(q,{className:"h-4 w-4"}),V.filter(e=>e.success&&"genesis"===e.tier).length," Genesis"]}),ie>0&&m.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[m.jsx(p,{className:"h-4 w-4"}),ie," failed"]})]}),m.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-border rounded-lg p-2",children:V.map((e,t)=>m.jsxs(S.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm p-2 rounded flex items-center justify-between gap-2 "+(e.success?"premium"===e.tier?"bg-purple-500/10 border border-purple-500/20":"bg-blue-500/10 border border-blue-500/20":"bg-red-500/10 text-red-600"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.success?"premium"===e.tier?m.jsx(E,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}):m.jsx(q,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):m.jsx(p,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:e.title}),e.openingName&&m.jsx(M,{variant:"secondary",className:"text-[9px] hidden sm:inline-flex",children:e.openingName}),e.error&&m.jsxs("span",{className:"text-xs opacity-70",children:["(",e.error,")"]})]}),e.success&&m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsxs(M,{variant:"outline",className:"text-[10px] "+("premium"===e.tier?"border-purple-500/50":"border-blue-500/50"),children:[m.jsx(z,{className:"h-2.5 w-2.5 mr-1"}),e.paletteName]}),e.gameHash&&m.jsx("a",{href:`/g/${e.gameHash}?p=${e.paletteId}`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-primary hover:underline",children:"View â†’"})]})]},t))})]})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:m.jsx(x,{className:"max-w-md",children:m.jsxs(h,{className:"pt-6 text-center",children:[m.jsx(p,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),m.jsx(v,{onClick:()=>e("/"),children:"Go Home"})]})})})};export{J as default};
