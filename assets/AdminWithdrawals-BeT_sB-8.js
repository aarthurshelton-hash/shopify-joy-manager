import{s as e,u as t,a as s,r as n,j as r,L as a,C as c,x as i,b7 as o,B as l,A as d,cb as u,cR as x,a8 as h,D as m,aB as p,aC as f,aD as w,aE as v,p as j,t as g,w as y,dy as C,dt as N,bo as b,dq as z,cZ as q,a1 as D,a2 as L,a3 as _,a4 as B,a5 as M,aW as U,bC as A,dz as I,b as W,y as H}from"./index-DqGlL_-P.js";import{C as K}from"./calendar-D8jf6HSN.js";!function(){const e=G,t=P();for(;;)try{if(592579===-parseInt(e(311))/1*(-parseInt(e(297))/2)+-parseInt(e(281))/3*(parseInt(e(313))/4)+parseInt(e(289))/5+-parseInt(e(263))/6*(-parseInt(e(235))/7)+parseInt(e(226))/8+-parseInt(e(246))/9+parseInt(e(314))/10*(-parseInt(e(198))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const E=function(){const e=G,t={};t[e(229)]=e(284);const s=t;let n=!0;return function(e,t){const r={FLrsI:function(e,t){return e!==t}};r.pBJCL=s.fZKBI;const a=r,c=n?function(){const s=G;if(a[s(262)](s(284),a[s(305)]))throw new _0x482ea2(s(259)+s(225)+s(208)+s(292)+s(288));if(t){const s=t.apply(e,arguments);return t=null,s}}:function(){};return n=!1,c}}()(void 0,function(){const e=G,t={};t[e(255)]=e(219)+"+$";const s=t;return E[e(268)]()[e(264)](s[e(255)])[e(268)]()[e(253)+"r"](E).search(e(219)+"+$")});E();const S=function(){const e=G,t={};t[e(279)]=function(e,t){return e===t},t[e(266)]=e(234);const s=t;let n=!0;return function(t,r){const a=e,c={};c[a(221)]=a(278);const i=c;if(!s.ubguR(a(254),s[a(266)])){const e=n?function(){const e=a;if(r){if(e(309)!==i.Hnepj){const s=r[e(196)](t,arguments);return r=null,s}{const e=_0xe34989.apply(_0xa96599,arguments);return _0x5e9919=null,e}}}:function(){};return n=!1,e}if(_0x40766f){const e=_0x452ff2[a(196)](_0x13162a,arguments);return _0x4e5e1f=null,e}}}();function G(e,t){e-=192;const s=P();let n=s[e];if(void 0===G.hOcUBQ){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};G.uEBUOh=r,G.cZnsnx={},G.hOcUBQ=!0}const a=e+s[0],c=G.cZnsnx[a];if(c)n=c;else{const e=function(e){this.qYnNdi=e,this.QoUsUu=[1,0,0],this.iTdgwM=function(){return"newState"},this.KpvANm="\\w+ *\\(\\) *{\\w+ *",this.wAwQGn="['|\"].+['|\"];? *}"};e.prototype.TaoDXR=function(){const e=new RegExp(this.KpvANm+this.wAwQGn).test(this.iTdgwM.toString())?--this.QoUsUu[1]:--this.QoUsUu[0];return this.rudTtJ(e)},e.prototype.rudTtJ=function(e){return Boolean(~e)?this.zYiBzO(this.qYnNdi):e},e.prototype.zYiBzO=function(e){for(let t=0,s=this.QoUsUu.length;t<s;t++)this.QoUsUu.push(Math.round(Math.random())),s=this.QoUsUu.length;return e(this.QoUsUu[0])},new e(G).TaoDXR(),n=G.uEBUOh(n),G.cZnsnx[a]=n}return n}function P(){const e=["zLPlqKK","DgfIBgu","C2vSzwn0","uuv0ww0","DxnLCL93ywXSzq","t29qDLy","mJGZmdy2q1Dzs1vy","ywLSCW","C3vJy2vZCW","t1vqqK0","ywXS","ChjVzMLSzxm","zhjHD25Fy2vUDa","Cgf5B3v0x2rLDa","EK5JqNa","z3rfqK4","Dw50","odaWnJu1m1f0tfLbtG","CMvQzwn0zwrFyW","v29wqLu","Dg90ywXFD2L0Aa","yMLUza","z29Vzu8","tM90igf1DgHLBG","y29UC3rYDwn0BW","EuTcC1y","zuztBNu","CMvXDwLYzwq","yw1VDw50x2nLBG","y29TCgXLDgvK","uMvXDwvZDcbUBW","yxbWCM92zwq","zNjVBq","rKXYC0K","mte0rfP1wM5u","C2vHCMnO","Bw91BNq","rMzZBhe","z2v0vxnLCG","Dg9tDhjPBMC","zwrFy2vUDhm","rMvKu1q","svLyCuG","quP4vMK","reHXD3u","Dg90ywW","CMvHC29UigLZia","DxbKyxrL","ChjVy2vZCY13Aq","Ag9my2i","DwjNDvi","BgvUz3rO","mti1nZaYn3Dotu94Eq","CgvUzgLUz19HBq","x3jLCxvLC3rZ","Ahn5DMi","DxnLCL9PzcWGza","DxnLCL9PzcWGDa","CMvQzwn0zwq","DhvZ","mtm4mJeZnu5WreTfBq","uMvQzwn0Aw9Uia","B3jKzxi","ChjVDMvKihn0yq","AK5yEgG","CMv0DxjUicHMDq","zvjPvM0","yxbWCM92zwrFyW","mtq1mZCYz2HOq05W","uu9dt3i","zgLZCgXHEv9Uyq","rwvfzuW","CvvwyK0","Aw52B2TL","D2L0AgrYyxDHBa","wNvwsvm","Cejkq0W","CgvUzgLUzW","Bg9N","zK9qzha","ywTLyvG","zwX2CNe","nLrwrg1WvW","suX1we4","oe1MAu1ODa","mJiYmtq3mgrxAxL1Ea","yMjOBgi","Dg9ju09tDhjPBG","BwfW","E30Uy29UC3rYDq","yxbWBhK","B3vUDf9Jzw50CW","mtfnt0THwge","z1zmwhC","B3rHBf93AxrOza","zNvUy3rPB25Z","CgLpEMG","yxbWCM92zwrFyq","EhviEwe","B3vUDa","y29TCgXLDgvKxW","DgLJyxrLza","ig5VDcbPBIbHCa","Exn1zMK","D2fYBG","C2LUz2XL","z2v0","C3rHDhvZ","ywrTAw5FBM90zq","EvfoD04","zxjYB3i","yM9KEq","zgf0yq","kcGOlISPkYKRkq","Dg90ywXFzwfYBG","sg5LCgO","DxnLCL9Pza","CgvUzgLUz19JBW","BMn0Aw9UkcKG","DcbMB3vUzcbVCG","odq5mtK2ohnVr3rzuW","uffVzw8","yxv0Aa"];return(P=function(){return e})()}async function Z(t){const s=G,n={};n[s(272)]=function(e,t){return e!==t},n[s(308)]=s(240),n[s(248)]=s(285)+"isplay_name",n.IYXqH=s(233)+"ts",n[s(300)]=s(286)+"otal_earned_cents, t"+s(200)+"rawn_cents",n[s(310)]="user_id";const r=n;try{const n={ascending:!1};let a=e[s(261)](s(303)+s(283)).select("*")[s(291)]("created_at",n);t&&r[s(272)](t,s(239))&&(a=a.eq("status",t));const{data:c,error:i}=await a;if(i)throw i;const o=[...new Set((c||[])[s(194)](e=>e.user_id))],{data:l}=await e[s(261)](r[s(308)])[s(231)](r[s(248)]).in(s(222),o),{data:d}=await e[s(261)](r[s(271)])[s(231)](r[s(300)]).in(r[s(310)],o),u=new Map((null==l?void 0:l[s(194)](e=>[e[s(222)],e]))||[]),x=new Map((null==d?void 0:d.map(e=>[e[s(222)],e]))||[]),h=(c||[])[s(194)](e=>{var t,n,r;return{...e,payout_details:e[s(242)+s(236)],user_display_name:(null==(t=u.get(e.user_id))?void 0:t[s(299)+"me"])||"Unknown User",wallet_total_earned:(null==(n=x[s(212)](e[s(222)]))?void 0:n[s(220)+s(269)])||0,wallet_total_withdrawn:(null==(r=x[s(212)](e[s(222)]))?void 0:r[s(249)+s(241)+"s"])||0}}),m={};return m.data=h,m.error=null,m}catch(a){const e={data:[]};return e[s(216)]=a,e}}async function O(){const t=G,s={};s[t(209)]=t(260),s[t(295)]=t(287);const n=s;try{const{data:s,error:r}=await e[t(261)](t(303)+t(283))[t(231)]("status, am"+t(197));if(r)throw r;const a={};a[t(223)+t(245)]=0,a[t(282)+t(205)]=0,a[t(296)+t(205)]=0,a[t(203)+t(265)]=0,a["completed_"+t(274)]=0,a["rejected_c"+t(205)]=0;const c=a;(s||[]).forEach(e=>{const s=t;switch(e[s(213)]){case s(306):c[s(223)+s(245)]++,c[s(282)+s(205)]+=e[s(257)+"ts"];break;case n[s(209)]:c[s(296)+s(205)]++,c["approved_a"+s(265)]+=e[s(257)+"ts"];break;case"completed":c[s(206)+s(274)]+=e.amount_cents;break;case n[s(295)]:c[s(247)+s(205)]++}});const i={};return i.data=c,i.error=null,i}catch(r){const e={};return e[t(218)]=null,e[t(216)]=r,e}}S(void 0,function(){const e=G,t={xuHya:function(e,t){return e+t}};t[e(227)]=e(195)+'ctor("return this")( )',t[e(273)]=e(210),t[e(312)]="info",t[e(244)]="exception",t.ZuVIS=function(e,t){return e<t};const s=t;let n;try{n=Function(s[e(204)](e(294)+e(224)+s.PQoeo,");"))()}catch(c){n=window}const r=n.console=n.console||{},a=[e(307),s[e(273)],s[e(312)],e(216),s[e(244)],e(230),"trace"];for(let i=0;s[e(304)](i,a[e(280)]);i++){const t=S[e(253)+"r"].prototype[e(250)](S),s=a[i],n=r[s]||t;t.__proto__=S.bind(S),t[e(268)]=n[e(268)][e(250)](n),r[s]=t}})(),function(){const e=k,t=R();for(;;)try{if(821039===-parseInt(e(294))/1*(-parseInt(e(302))/2)+parseInt(e(287))/3+parseInt(e(307))/4*(-parseInt(e(285))/5)+-parseInt(e(265))/6*(parseInt(e(281))/7)+parseInt(e(256))/8*(-parseInt(e(288))/9)+parseInt(e(298))/10*(-parseInt(e(282))/11)+parseInt(e(269))/12)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Y=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=k;return Y.toString()[e(286)]("(((.+)+)+)+$")[e(297)]()[e(284)+"r"](Y)[e(286)]("(((.+)+)+)+$")});Y();const T=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[k(273)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function k(e,t){e-=244;const s=R();let n=s[e];if(void 0===k.PTgQMC){var r=function(e){let t="",s="",n=t+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?t+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};k.RLHsXx=r,k.Nhtrah={},k.PTgQMC=!0}const a=e+s[0],c=k.Nhtrah[a];if(c)n=c;else{const e=function(e){this.scfzoI=e,this.lGsiHI=[1,0,0],this.VpxEqC=function(){return"newState"},this.XcZNyH="\\w+ *\\(\\) *{\\w+ *",this.qQOelT="['|\"].+['|\"];? *}"};e.prototype.cfTzmm=function(){const e=new RegExp(this.XcZNyH+this.qQOelT).test(this.VpxEqC.toString())?--this.lGsiHI[1]:--this.lGsiHI[0];return this.jyTVwI(e)},e.prototype.jyTVwI=function(e){return Boolean(~e)?this.LixSui(this.scfzoI):e},e.prototype.LixSui=function(e){for(let t=0,s=this.lGsiHI.length;t<s;t++)this.lGsiHI.push(Math.round(Math.random())),s=this.lGsiHI.length;return e(this.lGsiHI[0])},new e(k).cfTzmm(),n=k.RLHsXx(n),k.Nhtrah[a]=n}return n}function R(){const e=["C2vHCMnO","mtK3otqWm2PxwwPdwq","mtm1nty3u2juAeHA","yxrLx3DHBgXLDa","wKzcvuq","zNjVBq","zxHJzxb0Aw9U","x19WCM90B19F","mteZndy3ExDqsgz6","yxv0Aa","y2vFy2vUDhm","Dg9tDhjPBMC","mtu4odK4nZbstg9wBwC","CM4GDgHPCYiPka","s2TwCxe","BgLTAxq","mJHuzeTrsgO","v3HQAu8","z2v0vxnLCG","Aw5MBW","DgLJyxrLza","ntG3mJC2Dg9ws25R","yxnJzw5KAw5N","CMTLDhbSywnLxW","Eur6EMq","BMn0Aw9UkcKG","DhjHy2u","r1nMzKu","EhLnzuO","tM90igf1DgHLBG","C3vJy2vZCW","y3jLyxrLzf9HDa","zKjxD0i","ChjVDg90ExbL","tvPjqMq","u2vut28","D2fSBgv0x3rYyq","y3rVCIGICMv0Dq","CMv0DxjUicHMDq","zxjYB3i","Cf9ZywXLx3bYAq","Dg9gAxHLza","yMLUza","ntKYwuDgq1fg","zgf0yq","z2v0x29Yx2nYzq","CMrpCNa","veH6Cxu","vKTmyKO","Cf9SAxn0Aw5NxW","B3b6v0W","BNnHy3rPB25Z","mta0mJjpuKjlsKq","ChjVy2vZC19Tyq","BgvUz3rO","DgfIBgu","mZKZnZqYndrYELDuD2O","Cf91C2vYx2LK","z1jOAhG","C2vSzwn0","yxbWBhK","B3jKzxi","Cf9IDxLLCL9Pza","BM51rwC","y29UC29Szq","Bg9N","DxnLCL9Pza","C2fSzq","mZm0nMzpu1bfvq","mtfss1DcB3y","D2Dws0i","y29UC3rYDwn0BW","ndbMtKH0uwS"];return(R=function(){return e})()}function X(e){return"$"+(e/100)[k(254)](2)}function V(){var E,S;const{user:P}=t(),Y=s(),[T,k]=n.useState(!1),[R,V]=n.useState(!0),[Q,J]=n.useState([]),[F,$]=n.useState(null),[ee,te]=n.useState("pending"),[se,ne]=n.useState({type:null,request:null}),[re,ae]=n.useState(""),[ce,ie]=n.useState(!1);n.useEffect(()=>{oe()},[P]);const oe=async()=>{if(!P)return void V(!1);const{data:t}=await e.rpc("has_role",{_user_id:P.id,_role:"admin"});!0===t&&(k(!0),await le()),V(!1)},le=async()=>{const[e,t]=await Promise.all([Z(ee),O()]);e.data&&J(e.data),t.data&&$(t.data)},de=e=>{switch(e){case"pending":return r.jsxs(H,{variant:"outline",className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",children:[r.jsx(u,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(H,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return r.jsxs(H,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/30",children:[r.jsx(x,{className:"h-3 w-3 mr-1"}),"Completed"]});case"rejected":return r.jsxs(H,{variant:"outline",className:"bg-red-500/10 text-red-600 border-red-500/30",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"cancelled":return r.jsxs(H,{variant:"outline",className:"bg-muted text-muted-foreground",children:[r.jsx(m,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return r.jsx(H,{variant:"outline",children:e})}};return R?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})}):P&&T?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Y(-1),children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Withdrawal Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Review and process payout requests"})]})]}),F&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(c,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.pending_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:X(F.pending_amount)})]})}),r.jsx(c,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Approved"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.approved_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:X(F.approved_amount)})]})}),r.jsx(c,{className:"bg-green-500/10 border-green-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Total Paid"})]}),r.jsx("p",{className:"text-2xl font-bold",children:X(F.completed_total)})]})}),r.jsx(c,{className:"bg-red-500/10 border-red-500/20",children:r.jsxs(i,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Rejected"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F.rejected_count})]})})]}),r.jsxs(p,{value:ee,onValueChange:e=>{te(e),le()},children:[r.jsxs(f,{className:"mb-6",children:[r.jsx(w,{value:"pending",children:"Pending"}),r.jsx(w,{value:"approved",children:"Approved"}),r.jsx(w,{value:"completed",children:"Completed"}),r.jsx(w,{value:"rejected",children:"Rejected"}),r.jsx(w,{value:"all",children:"All"})]}),r.jsx(v,{value:ee,children:r.jsxs(c,{children:[r.jsxs(j,{children:[r.jsx(g,{children:"Withdrawal Requests"}),r.jsxs(y,{children:["pending"===ee&&"Review and approve or reject pending requests","approved"===ee&&"Process approved withdrawals","completed"===ee&&"View completed payouts","rejected"===ee&&"View rejected requests","all"===ee&&"All withdrawal requests"]})]}),r.jsx(i,{children:0===Q.length?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["No ","all"!==ee?ee:""," withdrawal requests"]})]}):r.jsx(N,{className:"h-[500px]",children:r.jsx("div",{className:"space-y-4",children:Q.map(e=>{var t;return r.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx(b,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_display_name}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(z,{className:"h-3 w-3"}),(null==(t=e.payout_details)?void 0:t.email)||"No email provided"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[de(e.status),r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(K,{className:"h-3 w-3"}),q(new Date(e.created_at),{addSuffix:!0})]}),r.jsxs("span",{className:"text-muted-foreground",children:["Earned: ",X(e.wallet_total_earned||0)]})]}),e.admin_notes&&r.jsxs("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded",children:[r.jsx("strong",{children:"Notes:"})," ",e.admin_notes]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:X(e.amount_cents)}),r.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsxs(l,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-600 hover:text-white",onClick:()=>ne({type:"approve",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-600 hover:text-white",onClick:()=>ne({type:"reject",request:e}),children:[r.jsx(m,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&r.jsxs(l,{size:"sm",onClick:()=>ne({type:"complete",request:e}),children:[r.jsx(x,{className:"h-4 w-4 mr-1"}),"Mark Completed"]})]})]})]})},e.id)})})})})]})})]}),r.jsx(D,{open:!!se.type,onOpenChange:()=>ne({type:null,request:null}),children:r.jsxs(L,{children:[r.jsxs(_,{children:[r.jsxs(B,{children:["approve"===se.type&&"Approve Withdrawal","reject"===se.type&&"Reject Withdrawal","complete"===se.type&&"Complete Withdrawal"]}),r.jsxs(M,{children:["approve"===se.type&&"This will approve the withdrawal request for processing.","reject"===se.type&&"Please provide a reason for rejection.","complete"===se.type&&"Confirm you have sent the payment to the user."]})]}),se.request&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:se.request.user_display_name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:null==(E=se.request.payout_details)?void 0:E.email})]}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:X(se.request.amount_cents)})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"reject"===se.type?"Rejection Reason (Required)":"Admin Notes (Optional)"}),r.jsx(U,{placeholder:"reject"===se.type?"Explain why this request is being rejected...":"Add any notes about this action...",value:re,onChange:e=>ae(e.target.value),rows:3})]}),"complete"===se.type&&r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[r.jsx(A,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-amber-700",children:["Only mark as complete after you have sent the payment via PayPal to"," ",r.jsx("strong",{children:null==(S=se.request.payout_details)?void 0:S.email})]})]})]}),r.jsxs(I,{children:[r.jsx(l,{variant:"outline",onClick:()=>ne({type:null,request:null}),disabled:ce,children:"Cancel"}),r.jsxs(l,{onClick:async()=>{if(se.type&&se.request){ie(!0);try{let t;switch(se.type){case"approve":t=await async function(t,s){const n=G,r={};r[n(232)]="approved",r[n(251)]=function(e,t){return e||t};const a=r;try{const{data:{user:r}}=await e[n(228)].getUser();if(!r)throw new Error(n(252)+n(207));const{error:c}=await e[n(261)](n(303)+n(283))[n(276)]({status:a.QEtYm,admin_notes:a[n(251)](s,null),reviewed_by:r.id,reviewed_at:(new Date)[n(193)+"g"]()}).eq("id",t).eq(n(213),n(306));if(c)throw c;const i={};return i[n(237)]=!0,i.error=null,i}catch(c){if("eYkgE"!==n(215)){const e={};return e[n(237)]=!1,e[n(216)]=c,e}{const e={};return e[n(237)]=!1,e[n(216)]=_0x487c75,e}}}(se.request.id,re),t.success&&W.success("Withdrawal approved");break;case"reject":if(!re.trim())return W.error("Rejection reason is required"),void ie(!1);t=await async function(t,s){const n=G,r={};r.gVLXw=n(290)+n(275)+n(256),r[n(293)]=n(287),r[n(202)]=n(213);const a=r;try{const{data:{user:r}}=await e.auth[n(267)]();if(!r)throw new Error("Not authen"+n(207));if(!s)throw new Error(a[n(199)]);const{error:c}=await e[n(261)](n(303)+n(283))[n(276)]({status:a.jNXxh,admin_notes:s,reviewed_by:r.id,reviewed_at:(new Date)[n(193)+"g"]()}).eq("id",t).eq(a.piOzh,n(306));if(c)throw c;const i={};return i[n(237)]=!0,i.error=null,i}catch(c){const e={};return e[n(237)]=!1,e[n(216)]=c,e}}(se.request.id,re),t.success&&W.success("Withdrawal rejected");break;case"complete":t=await async function(t,s){const n=G,r={};r[n(298)]=n(303)+n(283),r[n(238)]="approved",r[n(301)]=function(e,t){return e||t},r[n(192)]=n(258),r[n(270)]=n(277)+"thdrawal",r[n(243)]="Wallet update error:";const a=r;try{const{data:{user:r}}=await e[n(228)][n(267)]();if(!r)throw new Error(n(252)+n(207));const{data:c,error:i}=await e[n(261)](a[n(298)])[n(231)]("*").eq("id",t).eq(n(213),a.OUPBM)[n(211)]();if(a.qUVbM(i,!c))throw new Error(n(259)+n(225)+n(208)+n(292)+n(288));const{error:o}=await e.from(n(303)+n(283)).update({status:a[n(192)],admin_notes:s?(c[n(214)+"s"]||"")+"\n---\n"+s:c[n(214)+"s"],completed_at:(new Date)[n(193)+"g"]()}).eq("id",t);if(o)throw o;const l={};l.request_id=t,l.user_id=c.user_id,l[n(257)+"ts"]=c[n(257)+"ts"];const d={};d[n(217)]=l;const{error:u}=await e[n(201)][n(302)](a[n(270)],d),x={};return x[n(237)]=!0,x[n(216)]=null,x}catch(c){const e={success:!1};return e.error=c,e}}(se.request.id,re),t.success&&W.success("Withdrawal marked as completed")}(null==t?void 0:t.error)?W.error(t.error.message):(ne({type:null,request:null}),ae(""),await le())}finally{ie(!1)}}},disabled:ce||"reject"===se.type&&!re.trim(),className:"reject"===se.type?"bg-red-600 hover:bg-red-700":"approve"===se.type?"bg-green-600 hover:bg-green-700":"",children:[ce&&r.jsx(a,{className:"h-4 w-4 mr-2 animate-spin"}),"approve"===se.type&&"Approve","reject"===se.type&&"Reject","complete"===se.type&&"Mark Complete"]})]})]})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(c,{className:"max-w-md w-full",children:r.jsxs(i,{className:"pt-6 text-center",children:[r.jsx(o,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Admin Access Required"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this page."}),r.jsx(l,{onClick:()=>Y("/"),children:"Go Home"})]})})})}T(void 0,function(){const e=k,t={SeTOo:e(245),GSffE:"VmZfG",MZIBd:function(e,t){return e(t)},gRhhx:function(e,t){return e+t},jnQXC:e(278),xyMeJ:"warn",dvLJB:e(292),nnuEg:e(312),opzWL:function(e,t){return e<t},yDzzd:function(e,t){return e!==t},dMgAb:"fCOVl"},s=function(){const s=e;let n;try{if(t[s(248)]===t[s(313)]){const e=_0x5701d1.constructor[s(246)].bind(_0x5d9775),t=_0x52ab53[_0x6c80ea],n=_0x2ae6c9[t]||e;e[s(293)]=_0x1767f7[s(255)](_0x1bb44c),e.toString=n[s(297)][s(255)](n),_0x527c0e[t]=e}else n=t[s(247)](Function,t[s(271)](s(251)+s(311),"{}.constru"+s(250)+s(299)+" )")+");")()}catch(r){n=window}return n}(),n=s[e(277)]=s.console||{},r=[t.jnQXC,t[e(314)],e(305),"error",t.dvLJB,e(268),t[e(276)]];for(let a=0;t[e(263)](a,r[e(267)]);a++)if(t[e(310)](e(283),t.dMgAb)){const t=T[e(284)+"r"][e(246)][e(255)](T),s=r[a],c=n[s]||t;t[e(293)]=T.bind(T),t[e(297)]=c.toString[e(255)](c),n[s]=t}else if(_0x28d4cd){const t=_0x444832[e(273)](_0x5665e6,arguments);return _0x11730d=null,t}})();export{V as default};
