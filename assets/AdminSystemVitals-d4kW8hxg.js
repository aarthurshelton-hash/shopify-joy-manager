import{s as e,r as s,j as t,C as n,p as r,t as a,w as c,B as i,v as l,x as o,aB as d,aC as u,aD as m,bh as x,ad as h,aE as f,z as j,bC as p,D as v,aA as g,dt as N,cb as y,y as w,aY as b,dg as C,c_ as M,aO as D,aq as z,bG as q,e7 as B,b as L,e6 as k,eG as A}from"./index-CN5tH3TC.js";import{u as _}from"./useMutation-BpgLkOJ5.js";import{S}from"./server-DRykTMZ_.js";import{C as I}from"./circle-alert-DYGTaC-h.js";const K=H;!function(){const e=H,s=E();for(;;)try{if(866633===parseInt(e(370))/1+parseInt(e(331))/2+parseInt(e(358))/3+parseInt(e(333))/4*(parseInt(e(379))/5)+-parseInt(e(320))/6*(-parseInt(e(402))/7)+-parseInt(e(338))/8*(-parseInt(e(359))/9)+parseInt(e(375))/10*(-parseInt(e(337))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}();const P=function(){let e=!0;return function(s,t){const n=e?function(){if(t){const e=t[H(408)](s,arguments);return t=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=H,s={};s[e(380)]=e(324)+"+$";const t=s;return P[e(373)]()[e(371)]("(((.+)+)+)+$").toString()[e(349)+"r"](P)[e(371)](t[e(380)])});P();const W=function(){let e=!0;return function(s,t){const n=e?function(){if(t){const e=t[H(408)](s,arguments);return t=null,e}}:function(){};return e=!1,n}}();function H(e,s){e-=320;const t=E();let n=t[e];if(void 0===H.texseJ){var r=function(e){let s="",t="",n=s+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?s+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=s.length;r<a;r++)t+="%"+("00"+s.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(t)};H.GJUPPd=r,H.xqgxCs={},H.texseJ=!0}const a=e+t[0],c=H.xqgxCs[a];if(c)n=c;else{const e=function(e){this.uHaJqw=e,this.uKklal=[1,0,0],this.sREiVL=function(){return"newState"},this.VSPlwq="\\w+ *\\(\\) *{\\w+ *",this.GoxOzA="['|\"].+['|\"];? *}"};e.prototype.DMttFC=function(){const e=new RegExp(this.VSPlwq+this.GoxOzA).test(this.sREiVL.toString())?--this.uKklal[1]:--this.uKklal[0];return this.UuNWCl(e)},e.prototype.UuNWCl=function(e){return Boolean(~e)?this.mEaQIT(this.uHaJqw):e},e.prototype.mEaQIT=function(e){for(let s=0,t=this.uKklal.length;s<t;s++)this.uKklal.push(Math.round(Math.random())),t=this.uKklal.length;return e(this.uKklal[0])},new e(H).DMttFC(),n=H.GJUPPd(n),H.xqgxCs[a]=n}return n}W(void 0,function(){const e=H,s={XAfRW:function(e,s){return e(s)},XrZTp:e(366)+"nction() ",IxpJe:e(404)+e(409)+e(348)+" )",tWwSf:function(e){return e()},OPueC:"LRosy",afcbZ:"log",kMKfL:e(345),grpYY:"exception",ClXLZ:function(e,s){return e<s}};let t;try{const n=s[e(340)](Function,s[e(385)]+s[e(393)]+");");t=s[e(383)](n)}catch(a){e(322)===s[e(382)]?_0x327cd5=_0x1efd35:t=window}const n=t[e(387)]=t[e(387)]||{},r=[s[e(406)],e(334),s[e(396)],e(376),s.grpYY,e(361),e(327)];for(let c=0;s[e(360)](c,r[e(363)]);c++){const s=W[e(349)+"r"][e(346)][e(394)](W),t=r[c],a=n[t]||s;s[e(398)]=W.bind(W),s.toString=a[e(373)][e(394)](a),n[t]=s}})();const T=new Map,Z=new Map;function E(){const e=["yMLUza","z2v0","A01lzKW","rg9JrNu","x19WCM90B19F","AgvHBhrOEq","DgLTzxn0yw1W","zMXVB3i","ndC1mZyZA0jVqNDe","CMvKDwnL","E30Uy29UC3rYDq","Aw52B2TL","ywzJyLO","BM93","yxbWBhK","y3rVCIGICMv0Dq","D2fYBMLUzW","nZH2v3vdCge","DKrisMq","y2vWANu","AgfZ","kcGOlISPkYKRkq","uK1OyuW","qKzkzLy","DhjHy2u","y2XLyxi","ywrTAw4","y3vZDg9TzxiTCa","mJmXodq3nLDxrM1lzW","C2HPzNq","ndyWodiZmKfkqNLwtW","D2fYBG","y2TVDxq","zMLSDgvY","ntm5y05Mtvzs","nte0mtm2ELr5qxPd","C3rVy2TMAxnOlq","wefMuLC","BwvZC2fNzq","y3jPDgLJywW","ywvJsLq","DMf2Afm","Aw5MBW","ChjVDg90ExbL","AwrkEhe","CM4GDgHPCYiPka","y29UC3rYDwn0BW","BMvnugG","u2jQA0u","zNvUy3rPB25Z","C29YDa","vNDdzuS","ChvZAa","z3jHBNqTy2vVlq","Dw5OzwfSDgH5","mZuYmdu5mez6Cxv3Ca","otbbB2PpC0y","q2XytfO","DgfIBgu","Dg9ju09tDhjPBG","BgvUz3rO","CMvZDwX0","y3jPChrPB24","CMv0DxjUicHMDq","zxzHBa","y3jLyxrLlwnOzq","DLvLDMm","mti0otK5nwTsANf3sq","C2vHCMnO","C3rHDhvZ","Dg9tDhjPBMC","t1zwueW","mteWmdC1mfvMDLjsua","zxjYB3i","qMrkq0C","Ce5xCum","nvzSsvb4sq","tML0uhi","vw5RBM93BIbLCG","t1b1zum","DfD3u2y","yNzxAg4","whjAvha","C2v0","y29UC29Szq","CvbNuwe","CKf1rKm","Dg90ywW","BwfW","y2HLy2STC3vICW","sxHWsMu"];return(E=function(){return e})()}async function G(s,t=5e3){const n=H,r={OVVPL:function(e,s,t){return e(s,t)},aecJT:n(384),SbjkE:n(376),vDHJd:n(399),yKMch:n(357),KGuKA:function(e,s){return e>s},DocFu:function(e,s){return e-s}},a=T[n(395)](s);if(a&&Date[n(407)]()-a[n(400)]<3e4)return a[n(364)];const c=performance[n(407)]();let i;try{const{data:t,error:a}=await e[n(352)][n(405)](s,{body:{healthCheck:!0,timestamp:Date.now()}}),l=performance.now()-c;if(r[n(374)](O,s,l),a)r[n(343)]!==n(326)?i={functionName:s,status:r[n(351)],responseTime:l,lastChecked:(new Date)[n(362)+"g"](),error:a[n(341)]}:_0x1e7de1.shift();else{let e=r[n(321)];l>3e3?e=r.yKMch:r.KGuKA(l,1e3)&&(e=n(410)),i={functionName:s,status:e,responseTime:l,lastChecked:(new Date).toISOString(),details:t}}}catch(l){const e=r[n(397)](performance[n(407)](),c);i={functionName:s,status:n(357),responseTime:e,lastChecked:(new Date)[n(362)+"g"](),error:l instanceof Error?l[n(341)]:n(381)+"ror"}}return T[n(386)](s,{result:i,timestamp:Date[n(407)]()}),i}async function U(e,s=5e3){const t=e[H(391)](e=>G(e,s));return Promise.all(t)}function O(e,s){const t=H,n={};n[t(354)]=function(e,s){return e>s},n[t(389)]="critical",n[t(388)]=function(e,s){return e>s},n.wkpoW=t(410),n[t(378)]=function(e,s){return e===s},n[t(369)]=t(325);const r=n;if(!Z[t(323)](e)){if(!r[t(378)](r.vUevc,r[t(369)])){const e=_0x30ac49[t(336)](e=>e[t(372)]===t(399)).length,s=_0x4f88f1[t(336)](e=>e[t(372)]===t(410)).length,n=_0x45136a[t(336)](e=>e[t(372)]===t(376)||e[t(372)]===t(357)).length,a=_0x8e7ba7[t(363)];let c=t(399);r.VwCeK(n,0)?c=r.rAuFC:r[t(388)](s,0)&&(c=r.wkpoW);const i={};return i[t(372)]=c,i[t(399)]=e,i[t(410)]=s,i.error=n,i[t(390)]=a,i}Z[t(386)](e,[])}const a=Z[t(395)](e);a[t(355)](s),a[t(363)]>100&&a[t(332)]()}function R(e){const s=H,t={};t[s(377)]=function(e,s){return e-s};const n=t,r=Z[s(395)](e);if(!r||0===r[s(363)])return null;const a=[...r][s(353)]((e,s)=>e-s),c=a[s(363)];return{functionName:e,totalInvocations:c,successfulInvocations:c,failedInvocations:0,averageResponseTime:a[s(403)]((e,s)=>e+s,0)/c,p95ResponseTime:a[Math[s(401)](.95*c)]||a[n[s(377)](c,1)],p99ResponseTime:a[Math.floor(.99*c)]||a[c-1],errorRate:0,lastInvocation:(new Date)[s(362)+"g"]()}}function Y(e){const s=H,t={};t.idJxq=s(342),t.KiZfF=function(e,s){return e>s},t[s(344)]=s(410);const n=t,r=e.filter(e=>e[s(372)]===s(399))[s(363)],a=e[s(336)](e=>e[s(372)]===s(410))[s(363)],c=e[s(336)](e=>e[s(372)]===s(376)||e[s(372)]===s(357))[s(363)],i=e[s(363)];let l=s(399);c>0?l=n[s(347)]:n.KiZfF(a,0)&&(l=n[s(344)]);const o={};return o[s(372)]=l,o[s(399)]=r,o.warning=a,o[s(376)]=c,o.total=i,o}const F=[K(392)+K(365),K(368)+K(335),K(330)+"ortal",K(356)+K(329),K(339)+K(367)],V=X;!function(){const e=X,s=$();for(;;)try{if(826273===parseInt(e(290))/1*(-parseInt(e(316))/2)+-parseInt(e(285))/3*(-parseInt(e(270))/4)+parseInt(e(273))/5*(-parseInt(e(333))/6)+-parseInt(e(295))/7*(parseInt(e(272))/8)+parseInt(e(327))/9*(-parseInt(e(262))/10)+parseInt(e(231))/11*(-parseInt(e(328))/12)+-parseInt(e(314))/13*(-parseInt(e(239))/14))break;s.push(s.shift())}catch(t){s.push(s.shift())}}();const J=function(){let e=!0;return function(s,t){const n=e?function(){if(t){const e=t[X(275)](s,arguments);return t=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=X,s={};s[e(242)]=e(281)+"+$";const t=s;return J[e(251)]()[e(246)](e(281)+"+$")[e(251)]()[e(233)+"r"](J)[e(246)](t[e(242)])});J();const Q=function(){let e=!0;return function(s,t){const n=e?function(){if(t){const e=t[X(275)](s,arguments);return t=null,e}}:function(){};return e=!1,n}}();function X(e,s){e-=227;const t=$();let n=t[e];if(void 0===X.iTCQbF){var r=function(e){let s="",t="",n=s+r;for(let r,a,c=0,i=0;a=e.charAt(i++);~a&&(r=c%4?64*r+a:a,c++%4)?s+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=s.length;r<a;r++)t+="%"+("00"+s.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(t)};X.fxGrsO=r,X.FYiIuM={},X.iTCQbF=!0}const a=e+t[0],c=X.FYiIuM[a];if(c)n=c;else{const e=function(e){this.RaHiYK=e,this.dcQyPE=[1,0,0],this.fJnddb=function(){return"newState"},this.SHBRZt="\\w+ *\\(\\) *{\\w+ *",this.uqOJQV="['|\"].+['|\"];? *}"};e.prototype.VjQgHd=function(){const e=new RegExp(this.SHBRZt+this.uqOJQV).test(this.fJnddb.toString())?--this.dcQyPE[1]:--this.dcQyPE[0];return this.Duzqhb(e)},e.prototype.Duzqhb=function(e){return Boolean(~e)?this.XkGTJk(this.RaHiYK):e},e.prototype.XkGTJk=function(e){for(let s=0,t=this.dcQyPE.length;s<t;s++)this.dcQyPE.push(Math.round(Math.random())),t=this.dcQyPE.length;return e(this.dcQyPE[0])},new e(X).VjQgHd(),n=X.fxGrsO(n),X.FYiIuM[a]=n}return n}function $(){const e=["zwzvv00","zNjVBq","ndq4mZu3sNLjB0zv","rxfwvwq","ChvZAa","Aw5MBW","BwjjsMq","yw5Nzq","B25fCNjVCG","rffqwum","q2jcwMC","B25tDgf0DxndAa","zxj2ywW","CM4GDgHPCYiPka","zLz5z1u","zvjys0e","vfrfwe8","Dw5RBM93BG","AgvHBhrOEq","sfrtBwG","DvH4rxe","nZKZmgDHwLzVrG","uejmy1q","mtK1odG2mNzRA0L4vG","BwvZC2fNzq","A2jlC28","Bg9N","wMrLy1m","Bej3ANq","yMLUza","q0fMzLu","x19WCM90B19F","rfzwyKu","uMrlDfe","nJm1ntGWs0L5weTw","mtjIBhH5wNa","D2fYBG","Dw5OzwfSDgH5","z2v0","BgvUz3rO","otm5oty3oe5qD1L2ra","CM1rA20","C3LZDgvTu3rHDa","zKzTA3y","qvfvEvm","mtiWmZu3nZfoz3buq1O","Dg9ju09tDhjPBG","y29UC3rYDwn0BW","y29UC29Szq","DhjHy2u","BMn0Aw9UkcKG","uvjrEwy","BgfZDfvWzgf0zq","mtmZnJe2BKLpse9q","zM9YrwfJAa","vunqBLm","D0n3yLC","Cgv0rMG","zLbJAeW","yvLxD2y","C2vHCMnO","y3vYCMvUDa","CMvMCMvZAeLUDa","C3rHDhvZ","D2fYBMLUzW","Dg9tDhjPBMC","C2v0","y1zvswW","E30Uy29UC3rYDq","u2vAqMO","qLbKEuq","CMvKDwnL","EeTyvNm","AxnmB2fKAw5N","v3PiuxK","zNvUy3rPB25oyq","mtCWBhruzNjV","AfLJuu8","zMLSDgvY","C0DUBxC","yvbABfm","CgHZBK8","ywDNBMW","CMvZDwX0CW","mtjjC05kA1K","r0H3uhm","mtuYEw9SqNHb","nuD6v3P2tW","CM9Y","yxbWBhK","vw5RBM93BIbLCG","rM1JAvO","CMn4C1K","Cgn1vKW","yxv0B1jLzNjLCW","kcGOlISPkYKRkq","zLbrCxa","zNvUy3rPB25Z","y3rVCIGICMv0Dq","mta2mJe0n0zIufb4DW","tvDxr3m","zxjYB3i","zMLUzeLUzgv4","zKvpB20","mw9Argnirq","tfLuzNK","DMfSDwvZ"];return($=function(){return e})()}Q(void 0,function(){const e=X,s={NeHDN:e(321),mbIJd:e(243),sGnmw:function(e,s){return e(s)},kbKso:e(254)+e(284)+e(306)+" )",rmQkm:function(e){return e()},ZdecS:e(235)};let t;try{if(s.NeHDN===s[e(299)]){const s=_0xcea047[e(233)+"r"].prototype[e(322)](_0xe03216),t=_0x3d5f6e[_0xc9715a],n=_0x2669bc[t]||s;s[e(324)]=_0x11eeba[e(322)](_0x12cc4e),s.toString=n[e(251)][e(322)](n),_0x16b772[t]=s}else{const n=s[e(265)](Function,"return (fu"+e(236)+s[e(318)]+");");t=s[e(227)](n)}}catch(a){t=window}const n=t[e(234)]=t[e(234)]||{},r=[e(319),e(329),e(298),e(287),"exception","table",s[e(320)]];for(let c=0;c<r[e(332)];c++){const s=Q[e(233)+"r"].prototype.bind(Q),t=r[c],a=n[t]||s;s[e(324)]=Q[e(322)](Q),s[e(251)]=a[e(251)][e(322)](a),n[t]=s}})();const ee={autoRefresh:!0};ee[V(248)+V(305)]=3e4,ee[V(283)]=[...F];const se=ee;function te(e){const t=V,n={fPchL:function(e,s){return e(s)},AQUyS:function(e,s){return e+s},WzHQy:"return (fu"+t(236),DVVbE:t(254)+'ctor("retu'+t(306)+" )",pcuVL:t(287),aPZlS:"table",VOMim:function(e,s){return e<s},HTSmh:t(255),fFmkv:function(e,s){return e instanceof s},efUWM:t(276)+t(274),rcxsY:function(e,s){return e>=s},uXxEq:function(e,s){return e===s},CAffU:t(241),MWWGs:function(e,s){return e(s)},hYcQO:function(e,s){return e(s)},iqPTG:"Failed to check function health",LYTfy:function(e,s){return e>s},phsnO:function(e,s,t){return e(s,t)},aYWwf:t(310),eRXKA:function(e,s,t){return e(s,t)}},r=n[t(267)](s.useMemo,()=>({...se,...e}),[e]),a={};a[t(269)]=[],a[t(259)]=!1,a[t(238)+"d"]=null,a[t(228)+"us"]=n.aYWwf,a[t(287)]=null;const[c,i]=s.useState(a),[l,o]=s.useState(new Map),d=n[t(244)](s.useRef,null),u=n[t(286)](s.useRef,n[t(245)]),m=n[t(267)](s.useCallback,async()=>{const e=t;i(e=>({...e,isLoading:!0,error:null}));try{const s=await n.fPchL(U,r.functions),t=Y(s),a=new Map(l);s[e(240)](s=>{const t=e,n=R(s[t(261)+"me"]);n&&a[t(252)](s[t(261)+"me"],n)}),o(a),r[e(304)+e(300)]&&t[e(249)]!==u[e(247)]&&r[e(304)+"ange"](t[e(249)]),u[e(247)]=t[e(249)],i({results:s,isLoading:!1,lastUpdated:(new Date)[e(232)+"g"](),systemStatus:t[e(249)],error:null})}catch(s){if(n.HTSmh!==n[e(312)]){let s;try{s=pCnZBz[e(244)](_0x3d017f,pCnZBz[e(230)](pCnZBz[e(260)],pCnZBz[e(325)])+");")()}catch(a){s=_0x43486b}const t=s[e(234)]=s.console||{},n=[e(319),e(329),e(298),pCnZBz[e(279)],"exception",pCnZBz[e(266)],"trace"];for(let r=0;pCnZBz.VOMim(r,n[e(332)]);r++){const s=_0x195992.constructor.prototype[e(322)](_0x140a5d),a=n[r],c=t[a]||s;s.__proto__=_0x3b37be[e(322)](_0x39143c),s[e(251)]=c[e(251)][e(322)](c),t[a]=s}}else{const t=n[e(229)](s,Error)?s:new Error(n[e(293)]);r[e(301)]&&r.onError(t),i(s=>({...s,isLoading:!1,error:t[e(317)]}))}}},[r,l]),x=n[t(308)](s.useCallback,async e=>{const s=t,r={TTEXO:function(e,s){return n[X(278)](e,s)},DQPYC:s(277),aggnl:function(e,t){return n[s(244)](e,t)}};if(n[s(313)](s(237),n[s(323)]))_0x23c2bf[s(252)](_0x132827[s(261)+"me"],_0x8a4908);else try{const t=await G(e);i(n=>{const a=s,c=n.results[a(288)](s=>s[a(261)+"me"]===e),i=[...n[a(269)]];if(r[a(309)](c,0)){if("BQobE"===r[a(302)])return _0x4dfdbf[a(331)](_0x150cce)||0;i[c]=t}else i[a(297)](t);const l=r[a(268)](Y,i);return{...n,results:i,systemStatus:l.status,lastUpdated:(new Date)[a(232)+"g"]()}});const a=n[s(286)](R,e);return a&&n[s(263)](o,t=>{const n=s,r=new Map(t);return r[n(252)](e,a),r}),t}catch(a){throw a instanceof Error?a:new Error(n.iqPTG)}},[]),h=s.useCallback(()=>{const e=t;T[H(328)](),o(new Map),n.fPchL(i,s=>({...s,results:[],lastUpdated:null,systemStatus:e(310)}))},[]),f=s.useCallback(e=>l[t(331)](e),[l]),j=s.useCallback(()=>Array[t(294)](l.values()),[l]);return s.useEffect(()=>{const e=t;return m(),r[e(280)+"h"]&&n[e(291)](r.refreshInterval,0)&&(d[e(247)]=n[e(267)](setInterval,m,r["refreshInt"+e(305)])),()=>{const s=e;d[s(247)]&&(clearInterval(d[s(247)]),d[s(247)]=null)}},[m,r[t(280)+"h"],r["refreshInt"+t(305)]]),{results:c[t(269)],isLoading:c[t(259)],lastUpdated:c.lastUpdated,systemStatus:c.systemStatus,error:c.error,checkHealth:m,checkSingleFunction:x,clearCache:h,getMetrics:f,getAllMetrics:j,healthyCount:c[t(269)][t(264)](e=>e[t(249)]===t(311)).length,warningCount:c[t(269)][t(264)](e=>e[t(249)]===t(250))[t(332)],errorCount:c[t(269)].filter(e=>e[t(249)]===t(287)||e[t(249)]===t(330))[t(332)],totalCount:c[t(269)].length}}function ne({className:e}){const[C,M]=s.useState("overview"),{results:D,isLoading:z,lastUpdated:q,systemStatus:B,error:L,checkHealth:k,checkSingleFunction:A,healthyCount:_,warningCount:K,errorCount:P,totalCount:W,getAllMetrics:H}=te({autoRefresh:!0,refreshInterval:3e4}),T=H(),Z=e=>{switch(e){case"healthy":return"bg-emerald-500";case"warning":return"bg-amber-500";case"error":case"unhealthy":return"bg-red-500";default:return"bg-gray-500"}},E=e=>{switch(e){case"healthy":return t.jsx(j,{className:"h-4 w-4 text-emerald-500"});case"warning":return t.jsx(p,{className:"h-4 w-4 text-amber-500"});case"error":case"unhealthy":return t.jsx(v,{className:"h-4 w-4 text-red-500"});default:return t.jsx(x,{className:"h-4 w-4 text-gray-500"})}};return t.jsx("div",{className:e,children:t.jsxs(n,{className:"w-full",children:[t.jsxs(r,{className:"pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(S,{className:"h-5 w-5 text-primary"}),t.jsxs("div",{children:[t.jsx(a,{className:"text-lg",children:"Edge Function Monitor"}),t.jsx(c,{children:"Real-time health monitoring for Supabase Edge Functions"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{switch(B){case"healthy":return t.jsxs(w,{className:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",children:[t.jsx(j,{className:"h-3 w-3 mr-1"}),"Healthy"]});case"warning":return t.jsxs(w,{className:"bg-amber-500/10 text-amber-500 border-amber-500/20",children:[t.jsx(p,{className:"h-3 w-3 mr-1"}),"Warning"]});case"critical":return t.jsxs(w,{className:"bg-red-500/10 text-red-500 border-red-500/20",children:[t.jsx(I,{className:"h-3 w-3 mr-1"}),"Critical"]});default:return t.jsxs(w,{variant:"secondary",children:[t.jsx(x,{className:"h-3 w-3 mr-1"}),"Unknown"]})}})(),t.jsx(i,{variant:"outline",size:"sm",onClick:()=>k(),disabled:z,children:t.jsx(l,{className:"h-4 w-4 "+(z?"animate-spin":"")})})]})]}),q&&t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Last updated: ",new Date(q).toLocaleTimeString()]}),L&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-500 text-sm",children:[t.jsx(I,{className:"h-4 w-4"}),t.jsx("span",{children:L})]})]}),t.jsx(o,{children:t.jsxs(d,{value:C,onValueChange:M,children:[t.jsxs(u,{className:"grid w-full grid-cols-3",children:[t.jsxs(m,{value:"overview",children:[t.jsx(x,{className:"h-4 w-4 mr-2"}),"Overview"]}),t.jsxs(m,{value:"functions",children:[t.jsx(S,{className:"h-4 w-4 mr-2"}),"Functions"]}),t.jsxs(m,{value:"metrics",children:[t.jsx(h,{className:"h-4 w-4 mr-2"}),"Metrics"]})]}),t.jsxs(f,{value:"overview",className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx(n,{children:t.jsx(o,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),t.jsx("p",{className:"text-2xl font-bold",children:W})]}),t.jsx(S,{className:"h-8 w-8 text-muted-foreground"})]})})}),t.jsx(n,{children:t.jsx(o,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Healthy"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:_})]}),t.jsx(j,{className:"h-8 w-8 text-emerald-500"})]})})}),t.jsx(n,{children:t.jsx(o,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Warning"}),t.jsx("p",{className:"text-2xl font-bold text-amber-500",children:K})]}),t.jsx(p,{className:"h-8 w-8 text-amber-500"})]})})}),t.jsx(n,{children:t.jsx(o,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Error"}),t.jsx("p",{className:"text-2xl font-bold text-red-500",children:P})]}),t.jsx(v,{className:"h-8 w-8 text-red-500"})]})})})]}),z?t.jsxs("div",{className:"space-y-2",children:[t.jsx(g,{className:"h-12 w-full"}),t.jsx(g,{className:"h-12 w-full"}),t.jsx(g,{className:"h-12 w-full"})]}):D.length>0?t.jsx("div",{className:"space-y-2",children:D.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[E(e.status),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:e.functionName}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.status," • ",Math.round(e.responseTime),"ms"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`h-2 w-2 rounded-full ${Z(e.status)}`}),t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>A(e.functionName),disabled:z,children:t.jsx(l,{className:"h-3 w-3"})})]})]},e.functionName))}):t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(x,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No functions monitored yet"}),t.jsx(i,{variant:"outline",onClick:()=>k(),className:"mt-4",disabled:z,children:"Start Monitoring"})]})]}),t.jsx(f,{value:"functions",className:"space-y-4",children:t.jsx(N,{className:"h-[400px]",children:z?t.jsx("div",{className:"space-y-2",children:[...Array(5)].map((e,s)=>t.jsx(g,{className:"h-20 w-full"},s))}):D.length>0?t.jsx("div",{className:"space-y-2",children:D.map(e=>t.jsx(n,{children:t.jsxs(o,{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[E(e.status),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:e.functionName}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[t.jsx(y,{className:"h-3 w-3"}),t.jsxs("span",{children:[Math.round(e.responseTime),"ms response"]}),t.jsx("span",{children:"•"}),t.jsxs("span",{children:["Checked: ",new Date(e.lastChecked).toLocaleTimeString()]})]}),e.error&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:e.error})]})]}),t.jsx(w,{variant:"healthy"===e.status?"default":"destructive",children:e.status})]}),e.details&&Object.keys(e.details).length>0&&t.jsxs("div",{className:"mt-3 pt-3 border-t",children:[t.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Details:"}),t.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto",children:JSON.stringify(e.details,null,2)})]})]})},e.functionName))}):t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(S,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No function details available"})]})})}),t.jsx(f,{value:"metrics",className:"space-y-4",children:t.jsx(N,{className:"h-[400px]",children:T.length>0?t.jsx("div",{className:"space-y-2",children:T.map(e=>t.jsx(n,{children:t.jsxs(o,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{className:"h-4 w-4 text-primary"}),t.jsx("p",{className:"font-medium",children:e.functionName})]}),t.jsxs(w,{variant:"outline",children:[e.totalInvocations," calls"]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground text-xs",children:"Avg Response"}),t.jsxs("p",{className:"font-medium",children:[Math.round(e.averageResponseTime),"ms"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground text-xs",children:"P95 Response"}),t.jsxs("p",{className:"font-medium",children:[Math.round(e.p95ResponseTime),"ms"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground text-xs",children:"P99 Response"}),t.jsxs("p",{className:"font-medium",children:[Math.round(e.p99ResponseTime),"ms"]})]})]}),e.errorRate>0&&t.jsx("div",{className:"mt-3 pt-3 border-t",children:t.jsxs("p",{className:"text-xs text-red-500",children:["Error Rate: ",(100*e.errorRate).toFixed(1),"%"]})})]})},e.functionName))}):t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(h,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No metrics available yet"}),t.jsx("p",{className:"text-xs mt-2",children:"Metrics are collected as functions are invoked"})]})})})]})})]})})}const re={"market-collector":t.jsx(x,{className:"h-5 w-5"}),"prediction-engine":t.jsx(B,{className:"h-5 w-5"}),"resolution-engine":t.jsx(j,{className:"h-5 w-5"}),"evolution-engine":t.jsx(k,{className:"h-5 w-5"}),"correlation-engine":t.jsx(h,{className:"h-5 w-5"}),"autonomous-trader":t.jsx(b,{className:"h-5 w-5"}),"data-integrity":t.jsx(D,{className:"h-5 w-5"}),"prediction-accuracy":t.jsx(h,{className:"h-5 w-5"}),"system-fitness":t.jsx(x,{className:"h-5 w-5"})};function ae(){var s,d;const u=C(),{data:m,isLoading:f,refetch:v}=M({queryKey:["system-vitals"],queryFn:async()=>{const{data:s,error:t}=await e.rpc("get_system_vitals");if(t)throw t;return s},refetchInterval:5e3}),{data:N}=M({queryKey:["evolution-state"],queryFn:async()=>{const{data:s,error:t}=await e.from("evolution_state").select("*").eq("state_type","global").single();if(t)throw t;return s},refetchInterval:1e4}),{data:y}=M({queryKey:["system-stats"],queryFn:async()=>{const[s,t,n]=await Promise.all([e.from("market_tick_history").select("id",{count:"exact",head:!0}),e.from("prediction_outcomes").select("id",{count:"exact",head:!0}),e.from("prediction_outcomes").select("direction_correct").not("resolved_at","is",null)]),r=n.data||[],a=r.filter(e=>e.direction_correct).length;return{totalTicks:s.count||0,totalPredictions:t.count||0,resolvedPredictions:r.length,correctPredictions:a,overallAccuracy:r.length>0?a/r.length:0}},refetchInterval:1e4}),b=_({mutationFn:async()=>{const{data:s,error:t}=await e.functions.invoke("system-heartbeat",{body:{action:"full_cycle"}});if(t)throw t;return s},onSuccess:e=>{var s,t;L.success("Heartbeat triggered successfully",{description:`Collected ${(null==(s=null==e?void 0:e.collect)?void 0:s.ticks)||0} ticks, ${(null==(t=null==e?void 0:e.predict)?void 0:t.predictions)||0} predictions`}),u.invalidateQueries({queryKey:["system-vitals"]}),u.invalidateQueries({queryKey:["system-stats"]})},onError:e=>{L.error("Heartbeat failed",{description:e.message})}}),k=e=>{switch(e){case"healthy":return"text-green-500";case"degraded":return"text-yellow-500";case"critical":return"text-destructive";default:return"text-muted-foreground"}},A=e=>{switch(e){case"healthy":return"default";case"degraded":return"secondary";case"critical":return"destructive";default:return"outline"}},S=(null==m?void 0:m.filter(e=>"heartbeat"===e.vital_type))||[],I=(null==m?void 0:m.filter(e=>"metric"===e.vital_type))||[],K=(null==m?void 0:m.filter(e=>e.is_healthy).length)||0,P=(null==m?void 0:m.length)||0,W=P>0?K/P*100:0;return f?t.jsxs("div",{className:"space-y-4",children:[t.jsx(g,{className:"h-32 w-full"}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsx(g,{className:"h-48"}),t.jsx(g,{className:"h-48"}),t.jsx(g,{className:"h-48"})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs(n,{className:"md:col-span-2",children:[t.jsxs(r,{className:"pb-2",children:[t.jsxs(a,{className:"flex items-center gap-2",children:[t.jsx(D,{className:"h-6 w-6 "+(W>=80?"text-green-500 animate-pulse":W>=50?"text-yellow-500":"text-destructive")}),"System Vitals"]}),t.jsx(c,{children:"Living system health at a glance"})]}),t.jsx(o,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Overall Health"}),t.jsxs("span",{className:"font-bold",children:[Math.round(W),"%"]})]}),t.jsx(z,{value:W,className:"h-3"}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("span",{children:[K," of ",P," systems healthy"]}),t.jsxs(i,{size:"sm",onClick:()=>b.mutate(),disabled:b.isPending,children:[b.isPending?t.jsx(l,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(q,{className:"h-4 w-4 mr-2"}),"Trigger Heartbeat"]})]})]})})]}),t.jsxs(n,{children:[t.jsx(r,{className:"pb-2",children:t.jsx(a,{className:"text-sm font-medium",children:"Evolution"})}),t.jsxs(o,{children:[t.jsxs("div",{className:"text-3xl font-bold",children:["Gen ",(null==N?void 0:N.generation)||0]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Fitness: ",(100*((null==N?void 0:N.fitness_score)||0)).toFixed(1),"%"]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(null==(s=null==N?void 0:N.total_predictions)?void 0:s.toLocaleString())||0," total predictions"]})]})]}),t.jsxs(n,{children:[t.jsx(r,{className:"pb-2",children:t.jsx(a,{className:"text-sm font-medium",children:"Accuracy"})}),t.jsxs(o,{children:[t.jsxs("div",{className:"text-3xl font-bold",children:[(100*((null==y?void 0:y.overallAccuracy)||0)).toFixed(1),"%"]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[(null==y?void 0:y.correctPredictions)||0," / ",(null==y?void 0:y.resolvedPredictions)||0," correct"]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(null==(d=null==y?void 0:y.totalTicks)?void 0:d.toLocaleString())||0," ticks collected"]})]})]})]}),t.jsxs(n,{children:[t.jsxs(r,{children:[t.jsxs(a,{className:"flex items-center gap-2",children:[t.jsx(x,{className:"h-5 w-5"}),"Subsystem Heartbeats"]}),t.jsx(c,{children:"Real-time status of all system components"})]}),t.jsx(o,{children:t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:S.map(e=>{var s,n,r;return t.jsxs("div",{className:"p-4 rounded-lg border transition-colors "+(e.is_healthy?"border-green-500/30 bg-green-500/5":"degraded"===e.status?"border-yellow-500/30 bg-yellow-500/5":"critical"===e.status?"border-destructive/30 bg-destructive/5":"border-border bg-muted/30"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:k(e.status),children:re[e.vital_name]||t.jsx(x,{className:"h-5 w-5"})}),t.jsx("span",{className:"font-medium capitalize",children:e.vital_name.replace(/-/g," ")})]}),t.jsx(w,{variant:A(e.status),children:e.status})]}),t.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:null==(s=e.metadata)?void 0:s.description}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("span",{className:"text-muted-foreground",children:["Last pulse: ",(r=e.seconds_since_pulse,r<60?`${Math.floor(r)}s ago`:r<3600?`${Math.floor(r/60)}m ago`:r<86400?`${Math.floor(r/3600)}h ago`:`${Math.floor(r/86400)}d ago`)]}),t.jsxs("span",{className:"font-mono text-xs",children:["#",e.pulse_count.toLocaleString()]})]}),e.is_healthy?t.jsx("div",{className:"mt-2 h-1 bg-green-500/30 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-green-500 animate-pulse",style:{width:`${Math.max(10,100-e.seconds_since_pulse/(((null==(n=e.metadata)?void 0:n.interval_ms)||6e4)/1e3)*100)}%`}})}):t.jsx("div",{className:"mt-2 h-1 bg-destructive/30 rounded-full"})]},e.vital_name)})})})]}),t.jsxs(n,{children:[t.jsxs(r,{children:[t.jsxs(a,{className:"flex items-center gap-2",children:[t.jsx(h,{className:"h-5 w-5"}),"Performance Metrics"]}),t.jsx(c,{children:"Key performance indicators"})]}),t.jsx(o,{children:t.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:I.map(e=>t.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"font-medium capitalize",children:e.vital_name.replace(/-/g," ")}),e.is_healthy?t.jsx(j,{className:"h-5 w-5 text-green-500"}):t.jsx(p,{className:"h-5 w-5 text-yellow-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-end justify-between",children:[t.jsxs("span",{className:"text-3xl font-bold",children:[(100*e.last_value).toFixed(1),"%"]}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:["Target: ",(100*e.target_value).toFixed(0),"%"]})]}),t.jsx(z,{value:100*e.last_value,className:"h-2"})]})]},e.vital_name))})})]}),(null==N?void 0:N.genes)&&t.jsxs(n,{children:[t.jsxs(r,{children:[t.jsxs(a,{className:"flex items-center gap-2",children:[t.jsx(B,{className:"h-5 w-5"}),"Evolution Genes (Generation ",N.generation,")"]}),t.jsx(c,{children:"Current genetic parameters guiding predictions"})]}),t.jsx(o,{children:t.jsx("div",{className:"grid gap-3 md:grid-cols-4",children:Object.entries(N.genes).map(([e,s])=>t.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[t.jsx("div",{className:"text-sm text-muted-foreground capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),t.jsx("div",{className:"text-xl font-mono font-bold",children:"number"==typeof s?s.toFixed(3):String(s)})]},e))})})]}),t.jsx(ne,{})]})}const ce=()=>t.jsx(A,{featureName:"System Vitals",children:t.jsx(ae,{})});export{ce as default};
