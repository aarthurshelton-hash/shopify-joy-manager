import{s as e,u as s,a as t,r as n,j as r,L as a,b7 as i,ca as c,C as o,x as l,y as d,aP as u,p as x,t as h,P as m,w as f,B as p,bM as v,cj as j,a9 as w,am as g,a1 as y,a2 as N,a3 as b,a4 as C,bC as z,a5 as B,cu as k,b as A}from"./index-DodN4URN.js";function M(){const e=["A2LUzYbHzg1PBG","z3jrqvG","x19WCM90B19F","ihjVBgu6","D2HPDgvFy29SBW","mZm5mJa5otjpwuj6wuW","AwqSigDHBwvFza","rxjYB3iGy291BG","nteXmdGWoePMwM13vW","zMLUza","mJqZndyWn0TmC0juva","yKPwwg8","BwXoCg4","zxjYB3i","yxbWBhK","C2vHCMnO","DxbKyxrL","s0Dcug0","mtaZntqWnM1psK9eCa","DMvYC2LVBG","uLHWD0C","nZaXodmYuLb2vu5A","C2vSzwn0","BeXgrvG","CgfSzxr0zuLK","zxHJzxb0Aw9U","nZHss1zQEKi","Aw9Uu3rHDgu","CNbJ","yxrPB25ZoG","ueDsu1qXmty","yMXHy2S","zNjVBq","BgvUz3rO","sLLqCuq","BgLUA2vKugfSzq","D2HPDgu","yMXHy2TFy29SBW","zcb2Axn1ywXPEG","y29UC3rYDwn0BW","CMv0DxjUicHMDq","CenqCKC","rvvzshu","Dg9tDhjPBMC","DMLZDwfSAxPHDa","CgfSzxr0zv9VDG","y29Kzq","z2fTzv9KyxrH","qwvJyui","rxjYB3iGAw4Gyq","r05hB08","yxrH","DhrLswq","uhzPyNK","zgXnrhm","DgfIBgu","B3jKzxi","y29UC29Szq","zxjYAwrLCW","wg93Agm","ndaZnJyWu3rIzNnJ","CgfSzxr0zv9Pza","AMHSvxu","ywXPEMf0Aw9UCW","kcGOlISPkYKRkq","qvrxAei","CM4GDgHPCYiPka","CwjLqMy","C3zHrhG","ueDrqMe","nJCXmJa1vwnjqxrU","EMjUqvK","zgf0yq","sMHrqLK","yMLUza","C2LUz2XL","DKPWqwu","vxzjAeq","zgrgCe4","BK5Jq3m","BMn0Aw9UkcKG","ANfHCeG","wxDLA0C","Bw9KAwzPzwrFyG","tNLwqMy","uwvjtNi","ENvJs3a","E30Uy29UC3rYDq","AgfZx3jVBgu","zg1PBIbJAgvJAW","DMvozey","AMvxwNG","C2f2zwrFDMLZDq","rxjYB3iGy2HLyW","ChjVDg90ExbL"];return(M=function(){return e})()}!function(){const e=P,s=M();for(;;)try{if(989389===parseInt(e(266))/1+-parseInt(e(319))/2+parseInt(e(322))/3+-parseInt(e(309))/4+parseInt(e(276))/5*(-parseInt(e(327))/6)+-parseInt(e(311))/7+parseInt(e(306))/8)break;s.push(s.shift())}catch(t){s.push(s.shift())}}();const q=function(){const e=P,s={};s[e(290)]=function(e,s){return e===s};const t=s;let n=!0;return function(s,r){const a=e,i={YwekG:a(299)+a(301)+a(304),sbMkX:function(e,s){return t[a(290)](e,s)},qbeBf:a(285)},c=n?function(){const e=a;if(i.sbMkX("FHkXc",i[e(273)]))return _0x3a3c78[e(314)](i[e(288)],_0x367640),!1;if(r){const t=r[e(315)](s,arguments);return r=null,t}}:function(){};return n=!1,c}}()(void 0,function(){const e=P;return q[e(249)]().search("(((.+)+)+)+$")[e(249)]()[e(245)+"r"](q)[e(316)](e(270)+"+$")});q();const D=function(){let e=!0;return function(s,t){const n=e?function(){const e=P;if(t){if(e(302)==e(302)){const n=t[e(315)](s,arguments);return t=null,n}{const e=_0x4e341c?function(){if(_0x53bcdc){const e=_0x400d01.apply(_0xaf54af,arguments);return _0x4d2450=null,e}}:function(){};return _0x4a0f7a=!1,e}}}:function(){};return e=!1,n}}();function P(e,s){e-=241;const t=M();let n=t[e];if(void 0===P.VDveyn){var r=function(e){let s="",t="",n=s+r;for(let r,a,i=0,c=0;a=e.charAt(c++);~a&&(r=i%4?64*r+a:a,i++%4)?s+=n.charCodeAt(c+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=s.length;r<a;r++)t+="%"+("00"+s.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(t)};P.RWPIXQ=r,P.yYBOao={},P.VDveyn=!0}const a=e+t[0],i=P.yYBOao[a];if(i)n=i;else{const e=function(e){this.MWHXHb=e,this.KNYVAz=[1,0,0],this.hJdZRA=function(){return"newState"},this.urKxyx="\\w+ *\\(\\) *{\\w+ *",this.FOHQBA="['|\"].+['|\"];? *}"};e.prototype.pkDXby=function(){const e=new RegExp(this.urKxyx+this.FOHQBA).test(this.hJdZRA.toString())?--this.KNYVAz[1]:--this.KNYVAz[0];return this.FdWjqj(e)},e.prototype.FdWjqj=function(e){return Boolean(~e)?this.OBvSCF(this.MWHXHb):e},e.prototype.OBvSCF=function(e){for(let s=0,t=this.KNYVAz.length;s<t;s++)this.KNYVAz.push(Math.round(Math.random())),t=this.KNYVAz.length;return e(this.KNYVAz[0])},new e(P).pkDXby(),n=P.RWPIXQ(n),P.yYBOao[a]=n}return n}async function K(s){const t=P,n={};n[t(247)]=function(e,s){return e!==s};const r=n;try{const{data:n,error:a}=await e[t(333)](t(251)+t(264)).select("*").eq(t(267),s)[t(281)]();if(a&&r[t(247)](a[t(252)],t(331)))throw a;const i={};return i.data=n,i.error=null,i}catch(a){const e={};return e[t(278)]=null,e[t(314)]=a,e}}async function S(s){const t=P,n={Pviby:t(270)+"+$",soQhh:function(e,s){return e(s)},BGTvv:t(298)+t(269),Cnnjo:function(e,s){return e!==s},vJpAe:"dMEzc"};try{const{data:r,error:a}=await e[t(333)](n.BGTvv)[t(323)](t(307)+t(257));if(a)throw a;let i=0;for(const e of r||[]){if(n.Cnnjo(t(324),t(324)))return _0x31b491.toString()[t(316)](t(270)+"+$").toString()[t(245)+"r"](_0x1de37e).search(aIhlAM[t(259)]);{const r=e[t(253)][t(250)+t(328)];((null==r?void 0:r[t(325)])===s||(null==r?void 0:r[t(241)+t(258)])===s)&&("dMEzc"!==n[t(282)]?_0x358f50=aIhlAM.soQhh(_0x1bdc0b,t(246)+t(286)+(t(293)+'ctor("retu')+t(272)+" ));")():i++)}}return i}catch(r){return 0}}D(void 0,function(){const e=P,s={JJNLE:e(254),PGQBa:function(e,s){return e(s)},veNdF:function(e,s){return e+s},UvIhD:e(246)+e(286),Xowhc:e(293)+'ctor("retu'+e(272)+" )",jqapH:"log",svaDx:"warn",bJVXo:e(326),kPlZM:function(e,s){return e<s}},t=function(){const t=e;let n;try{if("AecaB"!==s.JJNLE){const e={};return e.error=_0x4cea79,e}n=s[t(275)](Function,s[t(296)](s[t(283)],s[t(265)])+");")()}catch(r){n=window}return n}(),n=t[e(263)]=t.console||{},r=[s[e(287)],s[e(274)],"info",e(314),s[e(312)],e(261),"trace"];for(let a=0;s.kPlZM(a,r[e(334)]);a++){const s=D[e(245)+"r"][e(300)].bind(D),t=r[a],i=n[t]||s;s[e(303)]=D.bind(D),s[e(249)]=i[e(249)][e(280)](i),n[t]=s}})();const _=["k","q","r","b","n","p"],H={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},L=()=>{var M,q,D,L;const{user:W}=s(),G=t(),[Y,X]=n.useState(!1),[J,U]=n.useState(!0),[F,I]=n.useState([]),[V,E]=n.useState(null),[Z,O]=n.useState(null),[$,Q]=n.useState({}),[R,T]=n.useState(!1),[ee,se]=n.useState(!1);n.useEffect(()=>{(async()=>{if(!W)return void G("/");if(!(await async function(s){const t=P,n={};n[t(271)]=function(e,s){return e===s},n[t(256)]=t(335),n[t(268)]=t(299)+t(301)+t(304),n[t(260)]="kFaZB";const r=n;try{if(r.ATWhB(r[t(256)],r[t(256)])){const n={};n._user_id=s,n._role="admin";const{data:r,error:a}=await e[t(329)](t(294),n);return!a&&!0===r}return _0x5c461b.error(t(308)+"ting linke"+t(244)+t(330),_0x5e42c2),0}catch(a){if(r.dlMDs===r[t(260)])return!1;if(_0x2a818b){const e=_0x3967b5[t(315)](_0x43edc0,arguments);return _0x3e40c0=null,e}}}(W.id)))return A.error("Access denied",{description:"Admin privileges required"}),void G("/");X(!0),await te(),U(!1)})()},[W,G]);const te=async()=>{const{data:s}=await async function(){const s=P,t={};t.ddFpN="palette_ov"+s(264);const n=t;try{const{data:t,error:r}=await e[s(333)](n[s(284)])[s(323)]("*")[s(262)](s(267));if(r)throw r;const a={};return a.data=t||[],a[s(314)]=null,a}catch(r){const e={};return e[s(278)]=[],e.error=r,e}}();I(s);const t={};for(const e of c.filter(e=>"custom"!==e.id))t[e.id]=await S(e.id);Q(t)},ne=e=>{const s=c.find(s=>s.id===e);if(!s)return;const t=F.find(s=>s.palette_id===e);E(e),O({white:(null==t?void 0:t.white_colors)||{...s.white},black:(null==t?void 0:t.black_colors)||{...s.black}})},re=(e,s,t)=>{Z&&O({...Z,[e]:{...Z[e],[s]:t}})},ae=async()=>{if(!V||!Z||!W)return;T(!0),se(!1);const{error:s,version:t}=await async function(s,t,n,r){const a=P,i={KGBPm:function(e,s){return e(s)},zbnAY:a(251)+a(264),QeINr:a(248),zucKp:a(279)};try{const{data:c}=await i[a(318)](K,s);if(c){const o={};o[a(305)+"rs"]=t,o[a(243)+"rs"]=n,o[a(289)+"y"]=r,o[a(320)]=c[a(320)]+1;const{error:l}=await e.from(i[a(277)])[a(317)](o).eq(a(267),s);if(l)throw l;const d={};return d[a(314)]=null,d[a(320)]=c.version+1,d}{const c={};c.palette_id=s,c[a(305)+"rs"]=t,c.black_colors=n,c[a(289)+"y"]=r,c[a(320)]=1;const{error:o}=await e.from(i.zbnAY).insert(c);if(o)throw o;const l={error:null};return l[a(320)]=1,l}}catch(c){if(i[a(291)]!==i[a(292)]){const e={};return e.error=c,e[a(320)]=0,e}_0x357e9f=_0x22f965}}(V,Z.white,Z.black,W.id);s?A.error("Failed to save",{description:s.message}):(A.success("Palette updated!",{description:`Version ${t} saved. ${$[V]||0} visualizations will use the new colors.`}),await te()),T(!1)},ie=e=>c.find(s=>s.id===e),ce=e=>F.some(s=>s.palette_id===e);return J?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsx(a,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):Y?r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsxs("div",{className:"container max-w-6xl py-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[r.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:r.jsx(i,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Palette Administration"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Modify featured palette colors. Changes propagate to all linked visualizations."})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h2",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Featured Palettes"}),c.filter(e=>"custom"!==e.id).map(e=>r.jsx(o,{className:"cursor-pointer transition-all hover:border-primary/50 "+(V===e.id?"border-primary ring-1 ring-primary/20":""),onClick:()=>ne(e.id),children:r.jsxs(l,{className:"p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-sm",children:e.name}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[ce(e.id)&&r.jsx(d,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:"Modified"}),$[e.id]>0&&r.jsxs(d,{variant:"outline",className:"text-[10px] px-1.5 py-0 gap-1",children:[r.jsx(u,{className:"h-2.5 w-2.5"}),$[e.id]]})]})]}),r.jsxs("div",{className:"flex gap-0.5",children:[_.map(s=>r.jsx("div",{className:"w-4 h-4 rounded-sm",style:{backgroundColor:e.white[s]}},`w-${s}`)),_.map(s=>r.jsx("div",{className:"w-4 h-4 rounded-sm",style:{backgroundColor:e.black[s]}},`b-${s}`))]})]})},e.id))]}),r.jsx("div",{className:"md:col-span-2",children:V&&Z?r.jsxs(o,{children:[r.jsx(x,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(h,{className:"flex items-center gap-2",children:[r.jsx(m,{className:"h-5 w-5"}),null==(M=ie(V))?void 0:M.name]}),r.jsx(f,{children:null==(q=ie(V))?void 0:q.description})]}),r.jsxs("div",{className:"flex gap-2",children:[ce(V)&&r.jsxs(p,{variant:"outline",size:"sm",onClick:async()=>{if(!V)return;T(!0);const{error:s}=await async function(s){const t=P,n={};n[t(297)]=t(251)+t(264),n[t(313)]=t(267);const r=n;try{const{error:n}=await e.from(r[t(297)]).delete().eq(r[t(313)],s);if(n)throw n;const a={};return a[t(314)]=null,a}catch(a){const e={};return e[t(314)]=a,e}}(V);s?A.error("Failed to revert",{description:s.message}):(A.success("Reverted to defaults"),ne(V),await te()),T(!1)},disabled:R,children:[r.jsx(v,{className:"h-4 w-4 mr-1"}),"Revert"]}),r.jsxs(p,{size:"sm",onClick:async()=>{if(!V||!Z||!W)return;($[V]||0)>0?se(!0):await ae()},disabled:R,children:[R?r.jsx(a,{className:"h-4 w-4 mr-1 animate-spin"}):r.jsx(j,{className:"h-4 w-4 mr-1"}),"Save Changes"]})]})]})}),r.jsxs(l,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium mb-3 text-sm",children:[null==(D=ie(V))?void 0:D.legendTheme.whiteEmoji," White Pieces"]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:_.map(e=>r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:H[e]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(w,{type:"color",value:Z.white[e],onChange:s=>re("white",e,s.target.value),className:"w-10 h-8 p-0.5 cursor-pointer"}),r.jsx(w,{type:"text",value:Z.white[e],onChange:s=>re("white",e,s.target.value),className:"h-8 text-xs font-mono"})]})]},`w-${e}`))})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium mb-3 text-sm",children:[null==(L=ie(V))?void 0:L.legendTheme.blackEmoji," Black Pieces"]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:_.map(e=>r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:H[e]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(w,{type:"color",value:Z.black[e],onChange:s=>re("black",e,s.target.value),className:"w-10 h-8 p-0.5 cursor-pointer"}),r.jsx(w,{type:"text",value:Z.black[e],onChange:s=>re("black",e,s.target.value),className:"h-8 text-xs font-mono"})]})]},`b-${e}`))})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h3",{className:"font-medium mb-3 text-sm flex items-center gap-2",children:[r.jsx(g,{className:"h-4 w-4"}),"Color Preview"]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"White"}),r.jsx("div",{className:"flex gap-1",children:_.map(e=>r.jsx("div",{className:"w-8 h-8 rounded-md shadow-sm",style:{backgroundColor:Z.white[e]},title:H[e]},`preview-w-${e}`))})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Black"}),r.jsx("div",{className:"flex gap-1",children:_.map(e=>r.jsx("div",{className:"w-8 h-8 rounded-md shadow-sm",style:{backgroundColor:Z.black[e]},title:H[e]},`preview-b-${e}`))})]})]})]})]})]}):r.jsx(o,{className:"h-full flex items-center justify-center",children:r.jsxs(l,{className:"text-center py-12",children:[r.jsx(m,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Select a palette to edit its colors"})]})})})]})]}),r.jsx(y,{open:ee,onOpenChange:se,children:r.jsxs(N,{children:[r.jsxs(b,{children:[r.jsxs(C,{className:"flex items-center gap-2",children:[r.jsx(z,{className:"h-5 w-5 text-amber-500"}),"Confirm Palette Update"]}),r.jsxs(B,{children:["This palette is linked to ",r.jsx("strong",{children:$[V||""]||0})," visualizations. Saving these changes will affect how all linked visualizations render."]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[r.jsx(p,{variant:"outline",onClick:()=>se(!1),children:"Cancel"}),r.jsxs(p,{onClick:ae,disabled:R,children:[R?r.jsx(a,{className:"h-4 w-4 mr-1 animate-spin"}):r.jsx(k,{className:"h-4 w-4 mr-1"}),"Confirm Update"]})]})]})})]}):null};export{L as default};
