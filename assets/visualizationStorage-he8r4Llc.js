import{s as t,ca as n,dG as r,dH as e}from"./index-Byyho7FJ.js";import{v as o,a as i,b as a}from"./visualizationSchemas-RYtqFNdF.js";import"./flagContent-BwLlpy7z.js";!function(){const t=u,n=f();for(;;)try{if(483145===parseInt(t(433))/1+-parseInt(t(489))/2+parseInt(t(435))/3*(-parseInt(t(558))/4)+-parseInt(t(426))/5*(parseInt(t(534))/6)+-parseInt(t(382))/7*(-parseInt(t(451))/8)+-parseInt(t(369))/9+parseInt(t(445))/10*(parseInt(t(448))/11))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const s=function(){const t=u,n={};n[t(408)]=t(370),n[t(429)]=t(528),n[t(550)]=t(484),n.JWFsR=function(t,n){return t===n},n[t(381)]="Mbhti",n[t(399)]="CLYbz";const r=n;let e=!0;return function(n,o){const i=t;if(!r.JWFsR(r[i(381)],r[i(399)])){const t=e?function(){const t=i;if(r.Qvsmt!==r[t(429)]){if(o){if("lJiYf"!==r.SCJzt){const r=o[t(391)](n,arguments);return o=null,r}if(_0x2e9fe6){const n=_0x2dfdb2[t(391)](_0x19c86a,arguments);return _0x2b7337=null,n}}}else{const n=_0x4e5089[t(394)+"r"][t(430)][t(520)](_0x369cb8),r=_0x4e07e0[_0x5c00d2],e=_0x4eae8f[r]||n;n.__proto__=_0x17c8fc[t(520)](_0x235133),n[t(446)]=e[t(446)][t(520)](e),_0x3eeaf4[r]=n}}:function(){};return e=!1,t}{const t=_0x8a9c58[i(393)](t=>"custom"===t.id);if(t){const n={};n.white=t[i(377)],n[i(442)]=t[i(442)],_0x451108=n}}}}()(void 0,function(){const t=u,n={};n.vbnkF=t(464)+"+$";const r=n;return s[t(446)]().search(r[t(456)])[t(446)]()[t(394)+"r"](s)[t(468)](r[t(456)])});function u(t,n){t-=338;const r=f();let e=r[t];if(void 0===u.BesByS){var o=function(t){let n="",r="",e=n+o;for(let o,i,a=0,s=0;i=t.charAt(s++);~i&&(o=a%4?64*o+i:i,a++%4)?n+=e.charCodeAt(s+10)-10!=0?String.fromCharCode(255&o>>(-2*a&6)):a:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let o=0,i=n.length;o<i;o++)r+="%"+("00"+n.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(r)};u.YFcYzY=o,u.tadPGr={},u.BesByS=!0}const i=t+r[0],a=u.tadPGr[i];if(a)e=a;else{const t=function(t){this.cGqgiA=t,this.mlFwlj=[1,0,0],this.fuynND=function(){return"newState"},this.QlAwSs="\\w+ *\\(\\) *{\\w+ *",this.ErDaTv="['|\"].+['|\"];? *}"};t.prototype.uJGdSH=function(){const t=new RegExp(this.QlAwSs+this.ErDaTv).test(this.fuynND.toString())?--this.mlFwlj[1]:--this.mlFwlj[0];return this.VWcMiK(t)},t.prototype.VWcMiK=function(t){return Boolean(~t)?this.rWraTm(this.cGqgiA):t},t.prototype.rWraTm=function(t){for(let n=0,r=this.mlFwlj.length;n<r;n++)this.mlFwlj.push(Math.round(Math.random())),r=this.mlFwlj.length;return t(this.mlFwlj[0])},new t(u).uJGdSH(),e=u.YFcYzY(e),u.tadPGr[i]=e}return e}s();const c=function(){const t=u,n={};n.GOGlK=t(464)+"+$";const r=n;let e=!0;return function(t,n){const o=e?function(){const e=u,o={};o.Mdorx=r[e(367)];const i=o;if("LEFfN"!==e(341))return _0xdcfe39.toString()[e(468)](i[e(424)]).toString().constructor(_0x29182d).search(e(464)+"+$");if(n){const r=n[e(391)](t,arguments);return n=null,r}}:function(){};return e=!1,o}}();function f(){const t=["swXhuKy","zw91tw8","CMv0DxjUicHMDq","DgfIBgu","y3vZDg9T","Aw16vhq","zxHJzxb0Aw9U","C3bSAxq","tevgzK4","CMvZDwX0","sLrOrLy","ywXS","E30Uy29UC3rYDq","ug9nB3O","s1LYug0","BNn1r1G","ihzLCNKGC2LTAq","ww91igHHDMuGyq","tKvrBuS","zgf0zq","BKLK","DxbSAwnHDguGyW","Dca4ignVBg9YCW","v0znuue","BgXLy3rVCG","y29SB3jtAw1PBa","vgHPCYb2Axn1yq","Aw5MBW","Aw1Hz2uVCg5N","zMrcENq","EMDQC1i","C3vJy2vZCW","y0DHBwu","s1HpBfi","r09hBeS","ywXPEMf0Aw9UCW","mZiWnJeXnwnsDKXOtG","A0PwAKC","yxjL","q1Dkq3O","BgXLCNK","DhjHy2u","y3vYCMvUDe1VDG","D1vAsxe","D2HPDgu","zw5LC3m","rxjYB3iGy2HLyW","DeDQs3m","qw5jvwi","mtyZmtC3wfnLtej0","D2fYBG","Bg9N","rMfPBgvKihrVia","yxLoyw1L","sw52ywXPzcb0Aq","zKzLuwC","s3nIuhu","t1z2Dxm","yxbWBhK","C3vHBgL6yxrPBW","zMLUza","y29UC3rYDwn0BW","Bwf0y2HLzfbHBa","vgHPCYbPCYa","zxjYB3i","zgLZCgXHEv9Uyq","C3DHzgC","CgLLy2vuExbL","zvrwDuq","zunHCMq","zgvSzxrLihzPCW","B3jKzxi","yLLTufK","vKLxEuu","vKLozge","uxzZBxq","BgL6yxrPB246ia","jsbZAw1PBgfYia","zxr0zuLK","yxjPDhK","Cvz4seO","zxHPC3rPBMDdBW","BgvUz3rO","CM9WCMLHDguGyW","zgvSzxrL","EMn5Bvy","D2HZy2q","AxnjBNrYAw5ZAq","zMfzvxm","ywvJwva","z2u6ia","twrVCNG","sw52ywXPzcbqrW","nuHktNDLEG","BM93","werXv1O","rNnAvxG","ChjVDg90ExbL","Dg90ywXnB3zLCW","CgfSzxr0zuLK","mZeXmtaXzwz2ELPU","Bw9KzxjU","mJu2nZa0m3zZCLb2wG","CgLLy2vdB2XVCG","z2HZq0G","AgvJAZO","q1nYyw0","DxbSB2fKigLTyq","yM9HCMq","yMXHy2S","qvvKsgC","C3Dsz1y","ntb1vfvAyvu","Dg9tDhjPBMC","z0vrsuy","ndqWotG3oefsu2jSEa","CYbVD25LzcbIEq","zMv0y2GGDMLZDq","mta0wfjVB1jt","y3vZDg9Tq29SBW","vgL0BguGy29UDa","ugXlAM0","DMLZDwfSAxPHDa","DMjUA0y","CMvUDfvZzxi","C2vSzwn0","AxneDxbSAwnHDa","Aw9Uu3rHDgu","A2LUzYbKDxbSAq","C3rYAw5NAwz5","DgDIwfu","kcGOlISPkYKRkq","zw9dsMe","ChvIBgLJvxjS","zxHPC3rPBMDwAq","C2vHCMnO","CMvHC29U","rxHHy3qGzhvWBa","DLrvBuS","quLvweG","BwvZC2fNzq","CMvWBgfJzq","qKLiBuS","C2f2zwrFDMLZDq","CM4GDgHPCYiPka","AxnuB29tAw1PBa","CgDU","Bg9JywXLq29TCa","qxvmrMC","rxjYB3iGAw4Gza","C2LUz2XL","ve1Ry0W","z2fTzv9KyxrH","CYbHBhjLywr5ia","vMLZDwfSAxPHDa","z2v0uhvIBgLJvq","mZaXmZuYCfzmtvnX","CML0Eq","y29UDgvUDfr5Ca","y29UC29Szq","z05RzgS","DxnLCL9Pza","tKrAtxe","zcWGCgDUlcbNyq","C3rVCMfNzq","zxzLBNq","CMvTB3zL","DenYuwe","zxv6BeW","CLniwwm","C2XPy2u","BgLUA2vKugfSzq","y2f0zxm6","Bwf0y2HLzeDHBq","Dg8Gysb2AxnPBW","AwnHDguGzxHPCW","Bw92zxm","zNjVBq","ueDsu1qXmty","z05Xrxe","Aw4GEw91CIbNyq","BgfYihzPC3vHBa","zgf0yq","zxr0zvnPBwLSyq","C2fMzq","ywLUCYbPBMfWCa","ywXPEMf0Aw9UoG","yMLUza","yxnJzw5KAw5N","tIbKyxrH","Ew1buNK","BgL6yxrPB24GAq","D0TZC1G","BMCGyxqGBgvHCW","zxHPC3rPBMDjza","Eg9AsvG","DhjPBq","Agjty3K","Dhj5ignOyw5NAq","r1bQAhq","CM91BMq","ndyZnZm4mNP3quTRza","DhrLswq","lNbUzW","AwqSihvZzxjFAq","AM9PBG","B250zw50","C2f2zsb2Axn1yq","C29YDa","B3DUzxjeAxnWBa","t01zB20","x19WCM90B19F","B3DUzwrcEun1CG","C2rKA00","yw5VDgHLCIbJBW","z2fTzurHDge","CMr5z2e","u0nkENq","zMLUzeLUzgv4","y3jLyxrLzf9HDa","y1bHBgv0Dgu","Aw9UCW","zgfYA01Vzgu","ru51u08","DxbZzxj0","nhPRrfHfDW"];return(f=function(){return t})()}function w(t,n,r){const e=u,o={};o[e(523)]=e(344);const i=o;return(t||n.pgn||"")[e(529)]()[e(474)](/\s+/g," ")+"::"+(r?JSON[e(462)]({palette:r[e(432)]||e(434),darkMode:r[e(555)]||!1,currentMove:r[e(375)+"e"]===1/0?i.ymARy:r[e(375)+"e"],lockedPieces:(r.lockedPieces||[])[e(541)]((t,n)=>(t.pieceColor+"-"+t[e(400)])[e(480)+e(371)](n[e(436)]+"-"+n[e(400)]))}):"{}")}async function l(o,i,a,s){const c=u,f={rdyga:function(t,n){return t(n)},gNqEq:function(t,n){return t+n},uxvCu:c(345)+'ctor("retu'+c(477)+" )",CSram:function(t,n,r,e){return t(n,r,e)},NEQmK:c(537)+c(496)+"me_data",ENuSO:function(t,n){return t===n},euzlL:function(t,n){return t===n},CWJCz:c(405),pbFgv:"profiles",aecYP:"display_name",nsuGX:c(494),VINda:"Another co"+c(357),eTVuD:c(470)+c(508)+"ts",AIUXH:c(563),faYUs:c(346),rSHYc:function(t,n,r,e,o,i){return t(n,r,e,o,i)},wUZIq:c(482)+c(354)+c(438)};try{const u=f[c(439)](w,i,a,s),{data:z,error:y}=await t[c(510)]("saved_visu"+c(368))[c(458)](f[c(351)]);if(y){const t={isDuplicate:!1};return t[c(478)+"ar"]=!1,t}for(const n of z||[]){if(!f[c(556)](c(390),"OVvus")){const t=_0x5e7ac0?function(){if(_0x1598e1){const t=_0x45f5e1[c(391)](_0x55b0ff,arguments);return _0x2e9e77=null,t}}:function(){};return _0x3747f5=!1,t}{const r=n[c(485)],e=f[c(439)](w,n[c(479)]||void 0,r,r["visualizat"+c(460)]);if(f[c(556)](u,e)){const r=f[c(501)](n.user_id,o);let e;if(!r)if(f.euzlL(f[c(372)],c(405))){const{data:r}=await t.from(f.pbFgv)[c(458)](f[c(422)]).eq(f[c(348)],n[c(494)])[c(483)]();e=(null==r?void 0:r[c(398)+"me"])||f[c(407)]}else if(_0x17aa46){const t=_0x4bbcc5.apply(_0xa61245,arguments);return _0x21b571=null,t}const i={};return i[c(459)+"e"]=!0,i.isTooSimilar=!0,i[c(527)]=n.id,i["ownedByCur"+c(457)]=r,i.ownerDisplayName=e,i.colorSimilarity=100,i[c(469)]=f[c(401)],i}}}const C=(null==s?void 0:s.paletteId)||"modern";let g;if(null==s?void 0:s[c(452)+"rs"])g=s[c(452)+"rs"];else if(f[c(556)](C,f[c(472)])){if(c(406)===f[c(421)]){let t;try{t=JRTBgp[c(549)](_0x411eab,JRTBgp.gNqEq(JRTBgp[c(512)](c(561)+"nction() ",JRTBgp.uxvCu),");"))()}catch(l){t=_0x27e87b}return t}{const t=n[c(393)](t=>t.id===c(563));if(t){const n={};n[c(377)]=t[c(377)],n.black=t[c(442)],g=n}}}const x=await f[c(502)](r,o,i,a,C,g);if(x.isTooSimilar){const t={isDuplicate:!1};return t[c(478)+"ar"]=!0,t[c(527)]=x[c(467)+c(392)+c(353)],t["ownedByCur"+c(457)]=x[c(545)+"rentUser"],t["ownerDispl"+c(386)]=x[c(542)+c(386)],t[c(358)+c(412)]=x[c(358)+c(412)],t[c(469)]=x[c(469)],t[c(414)+"lors"]=x[c(414)+"lors"],t[c(420)+c(553)]=x[c(420)+c(553)],t[c(420)+c(365)]=x.isIntrinsicGame,t[c(506)+c(402)]=x["matchedGam"+c(402)],t[c(395)+"etteId"]=x[c(395)+c(411)],t[c(395)+"etteSimila"+c(490)]=x[c(395)+"etteSimila"+c(490)],t}let v;g&&(v=f[c(549)](e,g)||void 0);const B={};return B[c(459)+"e"]=!1,B[c(478)+"ar"]=!1,B[c(504)+c(535)]=v,B.colorSimilarity=x[c(358)+c(412)],B["isIntrinsi"+c(553)]=x[c(420)+c(553)],B.isIntrinsicGame=x[c(420)+c(365)],B[c(506)+"eCard"]=x["matchedGam"+c(402)],B[c(395)+c(411)]=x[c(395)+c(411)],B[c(395)+c(516)+c(490)]=x[c(395)+c(516)+c(490)],B}catch(z){const t={isDuplicate:!1};return t[c(478)+"ar"]=!1,t}}async function z(n,r,e,s,c,f){const w=u,z={fdBzt:function(t,n){return t(n)},KsbPu:function(t,n){return t===n},eouMo:w(387)+"tle",fFeQg:function(t,n){return t(n)},AuLFg:w(453)+w(518)+w(416)+"ontent",WFMQA:w(425)+w(522),NDZMq:w(547)+w(357),XDqWZ:"visualizat"+w(554),whscd:function(t,n){return t||n}};try{const u=z[w(362)](o,r);if(!u[w(364)]){if(!z[w(389)](w(447),w(546)))return{data:null,error:new Error(u[w(397)]||z[w(560)])};_0x8d8f9f=z[w(362)](_0x20c2e6,_0x145728)||void 0}const y=await z[w(388)](i,r);if(!y[w(517)])return{data:null,error:new Error(y[w(469)]||z[w(481)])};const C=a(c);if(!C[w(364)])return{data:null,error:new Error(C[w(397)]||z[w(356)])};const g=await l(n,c,e[w(548)],f);if(g.isDuplicate){const t=g[w(545)+w(457)]?w(359)+w(524)+w(486)+w(513)+w(373):w(359)+"lization i"+w(449)+" "+(g[w(542)+w(386)]||w(547)+"llector");return{data:null,error:new Error(t),isDuplicate:!0,ownedByCurrentUser:g[w(545)+w(457)],ownerDisplayName:g[w(542)+w(386)],colorSimilarity:100}}if(g[w(478)+"ar"]){const t=g["ownedByCur"+w(457)]?w(350)+w(349)+w(514)+"ization - "+w(531)+w(526)+w(355)+" for uniqu"+w(378):w(396)+Math[w(533)](g["colorSimil"+w(412)]||30)+(w(410)+w(507)+"n by ")+(g[w(542)+w(386)]||z[w(495)]);return{data:null,error:new Error(t),isTooSimilar:!0,ownedByCurrentUser:g["ownedByCur"+w(457)],ownerDisplayName:g[w(542)+w(386)],colorSimilarity:g[w(358)+w(412)],reason:g.reason}}const x={...f};x[w(504)+w(535)]=g[w(504)+w(535)];const v=x,B=n+"/"+Date[w(427)]()+"-"+r.replace(/[^a-z0-9]/gi,"-").toLowerCase()+w(536),D={};D[w(491)+"e"]=w(361),D[w(557)]=!1;const{error:d}=await t[w(497)][w(510)](z[w(428)]).upload(B,s,D);if(d)throw new Error(w(385)+"upload ima"+w(423)+d[w(473)]);const{data:L}=t[w(497)][w(510)](w(455)+w(554))[w(488)+"rl"](B),q={};q[w(377)]=e[w(548)][w(377)],q[w(442)]=e[w(548)].black,q[w(498)]=e[w(548)][w(498)],q[w(352)]=e[w(548)][w(352)],q[w(342)]=e[w(548)].result,q[w(479)]=e[w(548)][w(479)],q[w(509)]=e[w(548)][w(509)],q[w(441)]=e[w(441)],q.totalMoves=e[w(431)],q[w(455)+w(460)]=v;const h=q,{data:m,error:A}=await t[w(510)]("saved_visualizations").insert({user_id:n,title:r,pgn:z[w(419)](c,null),game_data:h,image_path:L[w(466)]})[w(458)]()[w(483)]();if(A)throw await t[w(497)].from(z[w(428)])[w(499)]([B]),new Error(w(385)+w(540)+w(409)+A[w(473)]);const M={};return M[w(515)]=m,M.error=null,M}catch(y){if(z[w(389)](w(543),w(543))){const t={};return t[w(515)]=null,t.error=y,t}throw new _0x4a6454(w(385)+w(440)+"ge: "+_0x443910.message)}}async function y(n){const r=u,e={};e[r(454)]=r(476)+"alizations",e[r(363)]=r(552);const o=e;try{const e={};e[r(521)]=!1;const{data:i,error:a}=await t[r(510)](o[r(454)])[r(458)]("*").eq(r(494),n)[r(404)](o[r(363)],e);if(a)throw new Error(r(385)+r(450)+r(368)+": "+a[r(473)]);const s={};return s[r(515)]=i||[],s[r(397)]=null,s}catch(i){const t={};return t[r(515)]=[],t[r(397)]=i,t}}async function C(n,r){const e=u,o={};o.tGjKs=e(455)+e(554),o.iUTyX=e(476)+e(368);const i=o;try{const o=new URL(r).pathname[e(340)]("/"),a=o[e(551)](t=>t===e(455)+"ions"),s=o[e(503)](a+1)[e(538)]("/");s&&await t.storage[e(510)](i[e(380)])[e(499)]([s]);const{error:u}=await t[e(510)](i.iUTyX)[e(417)]().eq("id",n);if(u)throw new Error(e(385)+e(403)+"ualization: "+u.message);const c={};return c[e(397)]=null,c}catch(a){const t={};return t[e(397)]=a,t}}c(void 0,function(){const t=u,n={KYrPm:function(t,n){return t(n)},vTUmK:t(561)+"nction() ",swRgV:t(345)+'ctor("retu'+t(477)+" )",Ugcrz:function(t){return t()},fejeY:t(383),KXOlR:t(562),tgbXU:function(t,n){return t===n},tCrQa:t(437)},r=n.Ugcrz(function(){const r=t;let e;try{e=n[r(347)](Function,n[r(471)]+n[r(444)]+");")()}catch(o){e=window}return e}),e=r[t(492)]=r[t(492)]||{},o=[t(384),n.fejeY,t(360),t(397),t(339),n[t(366)],t(374)];for(let i=0;i<o[t(415)];i++){if(n[t(463)](t(465),n[t(500)])){const n={};return n[t(397)]=_0x4c1eb1,n}{const n=c[t(394)+"r"][t(430)].bind(c),r=o[i],a=e[r]||n;n[t(544)]=c[t(520)](c),n[t(446)]=a[t(446)].bind(a),e[r]=n}}})();export{l as checkDuplicateVisualization,C as deleteVisualization,y as getUserVisualizations,z as saveVisualization};
