const e='import React, { useState, useCallback, useMemo, useRef } from \'react\';\nimport { Header } from \'@/components/shop/Header\';\nimport { Footer } from \'@/components/shop/Footer\';\nimport { \n  Wand2, Save, Trash2, Crown, Lock, Sparkles, \n  Undo2, Redo2, Palette, Paintbrush, ShoppingBag, Eraser\n} from \'lucide-react\';\nimport { useUndoRedo, CreativeState } from \'@/hooks/useUndoRedo\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { useAuth } from \'@/hooks/useAuth\';\nimport { toast } from \'sonner\';\nimport { Button } from \'@/components/ui/button\';\nimport { Input } from \'@/components/ui/input\';\nimport { \n  colorPalettes, PaletteId, PieceType, PieceColor \n} from \'@/lib/chess/pieceColors\';\nimport { SquareData, SquareVisit } from \'@/lib/chess/gameSimulator\';\nimport { saveVisualization } from \'@/lib/visualizations/visualizationStorage\';\nimport AuthModal from \'@/components/auth/AuthModal\';\nimport { VisionaryMembershipCard } from \'@/components/premium\';\nimport { LiveColorLegend } from \'@/components/chess/LiveColorLegend\';\nimport { LegendHighlightProvider } from \'@/contexts/LegendHighlightContext\';\nimport { useNavigate } from \'react-router-dom\';\nimport ChessBoardVisualization from \'@/components/chess/ChessBoardVisualization\';\nimport { usePrintOrderStore } from \'@/stores/printOrderStore\';\nimport { Slider } from \'@/components/ui/slider\';\n\n// Color brush - maps to a piece type for the legend system\ninterface ColorBrush {\n  pieceType: PieceType;\n  pieceColor: PieceColor;\n  hexColor: string;\n  label: string;\n}\n\n// Build visualization board from paint data\nconst buildVisualizationBoard = (\n  paintData: Map<string, SquareVisit[]>\n): SquareData[][] => {\n  const board: SquareData[][] = [];\n  \n  for (let rank = 0; rank < 8; rank++) {\n    board[rank] = [];\n    for (let file = 0; file < 8; file++) {\n      const squareKey = `${file}-${rank}`;\n      const isLight = (file + rank) % 2 === 1;\n      const visits = paintData.get(squareKey) || [];\n      \n      board[rank][file] = {\n        file,\n        rank,\n        visits,\n        isLight,\n      };\n    }\n  }\n  \n  return board;\n};\n\n// Generate FEN from visual pattern (maps colors to piece positions)\nconst generateFenFromPattern = (\n  paintData: Map<string, SquareVisit[]>,\n  whitePalette: Record<PieceType, string>,\n  blackPalette: Record<PieceType, string>\n): string => {\n  const board: (string | null)[][] = Array(8).fill(null).map(() => Array(8).fill(null));\n  \n  // Map each painted square to a piece based on the most prominent color\n  paintData.forEach((visits, squareKey) => {\n    if (visits.length === 0) return;\n    \n    const [fileStr, rankStr] = squareKey.split(\'-\');\n    const file = parseInt(fileStr);\n    const visualRank = parseInt(rankStr);\n    const boardRank = 7 - visualRank; // Convert visual rank to board rank\n    \n    // Use the topmost (last) visit\'s piece\n    const topVisit = visits[visits.length - 1];\n    const pieceChar = topVisit.color === \'w\' \n      ? topVisit.piece.toUpperCase() \n      : topVisit.piece.toLowerCase();\n    \n    if (boardRank >= 0 && boardRank < 8 && file >= 0 && file < 8) {\n      board[boardRank][file] = pieceChar;\n    }\n  });\n  \n  // Build FEN string\n  const fenRows: string[] = [];\n  for (let rank = 0; rank < 8; rank++) {\n    let row = \'\';\n    let emptyCount = 0;\n    for (let file = 0; file < 8; file++) {\n      const piece = board[rank][file];\n      if (piece) {\n        if (emptyCount > 0) {\n          row += emptyCount;\n          emptyCount = 0;\n        }\n        row += piece;\n      } else {\n        emptyCount++;\n      }\n    }\n    if (emptyCount > 0) row += emptyCount;\n    fenRows.push(row);\n  }\n  \n  return fenRows.join(\'/\') + \' w - - 0 1\';\n};\n\nconst CreativeMode = () => {\n  const { user, isPremium } = useAuth();\n  const navigate = useNavigate();\n  const { setOrderData } = usePrintOrderStore();\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n  const canvasRef = useRef<HTMLDivElement>(null);\n  \n  // Brush state\n  const [selectedBrush, setSelectedBrush] = useState<ColorBrush | null>(null);\n  const [isErasing, setIsErasing] = useState(false);\n  const [brushSize, setBrushSize] = useState(1);\n  const [isDragging, setIsDragging] = useState(false);\n  \n  // Board state - just paint data\n  const [paintData, setPaintData] = useState<Map<string, SquareVisit[]>>(new Map());\n  const [moveCounter, setMoveCounter] = useState(1);\n  const [title, setTitle] = useState(\'My Drawing\');\n  \n  // Palette state\n  const [whitePalette, setWhitePalette] = useState<Record<PieceType, string>>({\n    k: \'#3B82F6\', q: \'#EC4899\', r: \'#14B8A6\', b: \'#A855F7\', n: \'#F97316\', p: \'#64748B\'\n  });\n  const [blackPalette, setBlackPalette] = useState<Record<PieceType, string>>({\n    k: \'#DC2626\', q: \'#7C3AED\', r: \'#EA580C\', b: \'#F59E0B\', n: \'#7F1D1D\', p: \'#57534E\'\n  });\n  \n  const [isSaving, setIsSaving] = useState(false);\n\n  // Build color brushes from palettes\n  const colorBrushes = useMemo((): ColorBrush[] => {\n    const brushes: ColorBrush[] = [];\n    const pieceLabels: Record<PieceType, string> = {\n      k: \'King\', q: \'Queen\', r: \'Rook\', b: \'Bishop\', n: \'Knight\', p: \'Pawn\'\n    };\n    \n    // White colors\n    Object.entries(whitePalette).forEach(([piece, color]) => {\n      brushes.push({\n        pieceType: piece as PieceType,\n        pieceColor: \'w\',\n        hexColor: color,\n        label: `White ${pieceLabels[piece as PieceType]}`\n      });\n    });\n    \n    // Black colors\n    Object.entries(blackPalette).forEach(([piece, color]) => {\n      brushes.push({\n        pieceType: piece as PieceType,\n        pieceColor: \'b\',\n        hexColor: color,\n        label: `Black ${pieceLabels[piece as PieceType]}`\n      });\n    });\n    \n    return brushes;\n  }, [whitePalette, blackPalette]);\n\n  // Undo/Redo system\n  const initialState: CreativeState = {\n    pieceBoard: Array(8).fill(null).map(() => Array(8).fill(null)),\n    paintData: new Map(),\n    moveCounter: 1,\n  };\n  const { pushState, undo, redo, resetHistory, canUndo, canRedo } = useUndoRedo(initialState);\n\n  // Handle undo\n  const handleUndo = useCallback(() => {\n    const restored = undo();\n    if (restored) {\n      setPaintData(restored.paintData);\n      setMoveCounter(restored.moveCounter);\n    }\n  }, [undo]);\n\n  // Handle redo\n  const handleRedo = useCallback(() => {\n    const restored = redo();\n    if (restored) {\n      setPaintData(restored.paintData);\n      setMoveCounter(restored.moveCounter);\n    }\n  }, [redo]);\n\n  // Build the visualization board\n  const visualizationBoard = useMemo(() => \n    buildVisualizationBoard(paintData),\n    [paintData]\n  );\n\n  // Paint a square\n  const paintSquare = useCallback((file: number, rank: number) => {\n    if (!isPremium) {\n      setShowUpgradeModal(true);\n      return;\n    }\n\n    const squareKey = `${file}-${rank}`;\n    const newPaintData = new Map(paintData);\n\n    if (isErasing) {\n      // Erase mode - clear the square\n      newPaintData.delete(squareKey);\n    } else if (selectedBrush) {\n      // Paint mode - add color layer\n      const newVisit: SquareVisit = {\n        piece: selectedBrush.pieceType,\n        color: selectedBrush.pieceColor,\n        moveNumber: moveCounter,\n        hexColor: selectedBrush.hexColor,\n      };\n      \n      const existing = newPaintData.get(squareKey) || [];\n      newPaintData.set(squareKey, [...existing, newVisit]);\n      setMoveCounter(prev => prev + 1);\n    } else {\n      return; // No brush selected\n    }\n    \n    setPaintData(newPaintData);\n    pushState({ \n      pieceBoard: Array(8).fill(null).map(() => Array(8).fill(null)), \n      paintData: newPaintData, \n      moveCounter: isErasing ? moveCounter : moveCounter + 1 \n    });\n  }, [selectedBrush, isErasing, isPremium, moveCounter, paintData, pushState]);\n\n  // Handle square interaction\n  const handleSquareClick = useCallback((visualRank: number, file: number) => {\n    paintSquare(file, 7 - visualRank);\n  }, [paintSquare]);\n\n  // Handle mouse drag painting\n  const handleSquareHover = useCallback((visualRank: number, file: number) => {\n    if (isDragging && (selectedBrush || isErasing)) {\n      paintSquare(file, 7 - visualRank);\n    }\n  }, [isDragging, selectedBrush, isErasing, paintSquare]);\n\n  // Apply a preset palette\n  const applyPalette = (paletteId: PaletteId) => {\n    const palette = colorPalettes.find(p => p.id === paletteId);\n    if (palette) {\n      setWhitePalette(palette.white as Record<PieceType, string>);\n      setBlackPalette(palette.black as Record<PieceType, string>);\n      setSelectedBrush(null); // Reset brush when palette changes\n      toast.success(`Applied ${palette.name} palette`);\n    }\n  };\n\n  // Clear everything\n  const handleClear = () => {\n    const newPaintData = new Map<string, SquareVisit[]>();\n    setPaintData(newPaintData);\n    setMoveCounter(1);\n    resetHistory({ \n      pieceBoard: Array(8).fill(null).map(() => Array(8).fill(null)), \n      paintData: newPaintData, \n      moveCounter: 1 \n    });\n    toast.success(\'Canvas cleared\');\n  };\n\n  // Order print\n  const handleOrderPrint = () => {\n    if (!isPremium) {\n      setShowUpgradeModal(true);\n      return;\n    }\n    \n    if (paintData.size === 0) {\n      toast.error(\'Draw something first!\');\n      return;\n    }\n\n    const fen = generateFenFromPattern(paintData, whitePalette, blackPalette);\n    \n    setOrderData({\n      title: title,\n      fen: fen,\n      gameData: {\n        white: \'Creative\',\n        black: \'Mode\',\n        event: title,\n        date: new Date().toISOString().split(\'T\')[0],\n        result: \'*\',\n      },\n      simulation: {\n        board: visualizationBoard,\n        gameData: {\n          white: \'Creative\',\n          black: \'Mode\',\n          event: title,\n          date: new Date().toISOString().split(\'T\')[0],\n          result: \'*\',\n          pgn: \'\',\n          moves: [],\n        },\n        totalMoves: moveCounter,\n      },\n      whitePalette,\n      blackPalette,\n    });\n    \n    navigate(\'/order-print\');\n  };\n\n  // Save to gallery\n  const handleSaveToGallery = async () => {\n    if (!user) {\n      setShowAuthModal(true);\n      return;\n    }\n    if (!isPremium) {\n      setShowUpgradeModal(true);\n      return;\n    }\n    \n    if (paintData.size === 0) {\n      toast.error(\'Draw something first!\');\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      // Generate image from visualization\n      const canvas = document.createElement(\'canvas\');\n      const size = 1200;\n      canvas.width = size;\n      canvas.height = size;\n      const ctx = canvas.getContext(\'2d\');\n      \n      if (!ctx) throw new Error(\'Canvas not supported\');\n      \n      const squareSize = size / 8;\n      \n      visualizationBoard.forEach((rankData, visualRank) => {\n        rankData.forEach((square, file) => {\n          const x = file * squareSize;\n          const y = (7 - visualRank) * squareSize;\n          \n          // Base color\n          const baseColor = square.isLight ? \'#FAFAF9\' : \'#2C2C2C\';\n          ctx.fillStyle = baseColor;\n          ctx.fillRect(x, y, squareSize, squareSize);\n          \n          // Draw nested squares for visits\n          if (square.visits.length > 0) {\n            const padding = squareSize * 0.08;\n            const currentSize = squareSize - padding * 2;\n            const sizeReduction = (currentSize * 0.7) / Math.min(square.visits.length, 6);\n            \n            const uniqueColors = [...new Set(square.visits.map(v => v.hexColor))];\n            \n            uniqueColors.slice(0, 6).forEach((color, i) => {\n              const layerSize = currentSize - i * sizeReduction;\n              const offset = (squareSize - layerSize) / 2;\n              ctx.fillStyle = color;\n              ctx.fillRect(x + offset, y + offset, layerSize, layerSize);\n            });\n          }\n        });\n      });\n      \n      // Convert to blob\n      const blob = await new Promise<Blob>((resolve, reject) => {\n        canvas.toBlob(b => b ? resolve(b) : reject(new Error(\'Failed to create image\')), \'image/png\');\n      });\n      \n      // Save to gallery\n      const result = await saveVisualization(\n        user.id,\n        title,\n        {\n          board: visualizationBoard,\n          gameData: {\n            white: \'Creative\',\n            black: \'Mode\',\n            event: \'Manual Drawing\',\n            date: new Date().toISOString().split(\'T\')[0],\n            result: \'*\',\n            pgn: \'\',\n            moves: [],\n          },\n          totalMoves: moveCounter,\n        },\n        blob,\n        undefined,\n        {\n          paletteId: \'custom\',\n          customColors: { white: whitePalette, black: blackPalette },\n        }\n      );\n      \n      if (result.error) {\n        toast.error(result.error.message);\n      } else {\n        toast.success(\'Saved to My Visions!\');\n        navigate(\'/my-vision\');\n      }\n    } catch (err) {\n      console.error(\'Save error:\', err);\n      toast.error(\'Failed to save\');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  return (\n    <div className="min-h-screen bg-background">\n      <Header />\n      \n      <main className="container mx-auto px-4 py-8 lg:py-12">\n        <div className="max-w-6xl mx-auto">\n          {/* Hero */}\n          <div className="text-center space-y-4 mb-8">\n            <div className="inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-display uppercase tracking-widest">\n              <Wand2 className="h-4 w-4" />\n              Creative Mode\n            </div>\n            <h1 className="text-3xl md:text-4xl font-royal font-bold uppercase tracking-wide">\n              Draw Your <span className="text-gold-gradient">Vision</span>\n            </h1>\n            <p className="text-muted-foreground font-serif max-w-xl mx-auto">\n              Paint colors on the board to create art. Your drawing automatically generates FEN notation for prints.\n            </p>\n          </div>\n\n          {/* Premium prompt */}\n          {!isPremium && (\n            <motion.div \n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className="p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex items-center justify-between mb-8"\n            >\n              <div className="flex items-center gap-4">\n                <Crown className="h-8 w-8 text-primary" />\n                <div>\n                  <h3 className="font-display font-bold uppercase tracking-wider">Visionary Exclusive</h3>\n                  <p className="text-sm text-muted-foreground font-serif">Upgrade to unlock Creative Mode</p>\n                </div>\n              </div>\n              <Button onClick={() => setShowUpgradeModal(true)} className="gap-2">\n                <Sparkles className="h-4 w-4" />\n                Upgrade Now\n              </Button>\n            </motion.div>\n          )}\n\n          {/* Main content */}\n          <LegendHighlightProvider>\n            <div className="grid lg:grid-cols-12 gap-6">\n              \n              {/* Left sidebar - Tools */}\n              <div className="lg:col-span-3 space-y-5">\n                {/* Title */}\n                <div>\n                  <label className="text-xs text-muted-foreground font-display uppercase tracking-wider mb-2 block">\n                    Title\n                  </label>\n                  <Input\n                    value={title}\n                    onChange={(e) => setTitle(e.target.value)}\n                    className="font-display"\n                    placeholder="My Drawing..."\n                  />\n                </div>\n\n                {/* Tool mode */}\n                <div className="space-y-3">\n                  <label className="text-xs text-muted-foreground font-display uppercase tracking-wider">\n                    Tool\n                  </label>\n                  <div className="grid grid-cols-2 gap-2">\n                    <Button\n                      variant={!isErasing ? \'default\' : \'outline\'}\n                      size="sm"\n                      onClick={() => setIsErasing(false)}\n                      className="gap-2"\n                    >\n                      <Paintbrush className="h-4 w-4" />\n                      Paint\n                    </Button>\n                    <Button\n                      variant={isErasing ? \'default\' : \'outline\'}\n                      size="sm"\n                      onClick={() => setIsErasing(true)}\n                      className="gap-2"\n                    >\n                      <Eraser className="h-4 w-4" />\n                      Erase\n                    </Button>\n                  </div>\n                </div>\n\n                {/* Color palette - only show when painting */}\n                {!isErasing && (\n                  <div className="space-y-3">\n                    <label className="text-xs text-muted-foreground font-display uppercase tracking-wider">\n                      Color Brush\n                    </label>\n                    \n                    {/* White colors */}\n                    <div className="space-y-2">\n                      <p className="text-[10px] text-muted-foreground/60 font-display uppercase">Light Tones</p>\n                      <div className="flex gap-2 flex-wrap">\n                        {colorBrushes.slice(0, 6).map((brush, i) => (\n                          <button\n                            key={`w-${i}`}\n                            onClick={() => setSelectedBrush(brush)}\n                            className={`w-10 h-10 rounded-lg border-2 transition-all ${\n                              selectedBrush?.hexColor === brush.hexColor && selectedBrush?.pieceColor === brush.pieceColor\n                                ? \'border-white scale-110 shadow-lg ring-2 ring-primary\'\n                                : \'border-border/30 hover:border-primary/50 hover:scale-105\'\n                            }`}\n                            style={{ backgroundColor: brush.hexColor }}\n                            title={brush.label}\n                          />\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* Black colors */}\n                    <div className="space-y-2">\n                      <p className="text-[10px] text-muted-foreground/60 font-display uppercase">Dark Tones</p>\n                      <div className="flex gap-2 flex-wrap">\n                        {colorBrushes.slice(6, 12).map((brush, i) => (\n                          <button\n                            key={`b-${i}`}\n                            onClick={() => setSelectedBrush(brush)}\n                            className={`w-10 h-10 rounded-lg border-2 transition-all ${\n                              selectedBrush?.hexColor === brush.hexColor && selectedBrush?.pieceColor === brush.pieceColor\n                                ? \'border-white scale-110 shadow-lg ring-2 ring-primary\'\n                                : \'border-border/30 hover:border-primary/50 hover:scale-105\'\n                            }`}\n                            style={{ backgroundColor: brush.hexColor }}\n                            title={brush.label}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Palette presets */}\n                <div className="space-y-3">\n                  <label className="text-xs text-muted-foreground font-display uppercase tracking-wider">\n                    <Palette className="h-3 w-3 inline mr-1" />\n                    Presets\n                  </label>\n                  <div className="grid grid-cols-4 gap-2">\n                    {colorPalettes.slice(0, 8).map(palette => (\n                      <button\n                        key={palette.id}\n                        onClick={() => applyPalette(palette.id)}\n                        className="p-2 rounded-lg border border-border/50 hover:border-primary/50 transition-all group"\n                        title={palette.name}\n                      >\n                        <div className="flex gap-0.5 justify-center">\n                          {Object.values(palette.white).slice(0, 3).map((color, i) => (\n                            <div key={i} className="w-2.5 h-2.5 rounded-sm" style={{ backgroundColor: color }} />\n                          ))}\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div className="space-y-2 pt-4 border-t border-border/50">\n                  <div className="grid grid-cols-2 gap-2">\n                    <Button \n                      variant="outline" \n                      size="sm" \n                      onClick={handleUndo} \n                      disabled={!canUndo}\n                      className="gap-1"\n                    >\n                      <Undo2 className="h-3 w-3" />\n                      Undo\n                    </Button>\n                    <Button \n                      variant="outline" \n                      size="sm" \n                      onClick={handleRedo}\n                      disabled={!canRedo}\n                      className="gap-1"\n                    >\n                      <Redo2 className="h-3 w-3" />\n                      Redo\n                    </Button>\n                  </div>\n                  <Button \n                    variant="outline" \n                    size="sm" \n                    onClick={handleClear} \n                    className="w-full gap-2"\n                  >\n                    <Trash2 className="h-3 w-3" />\n                    Clear Canvas\n                  </Button>\n                </div>\n              </div>\n\n              {/* Center - Canvas */}\n              <div className="lg:col-span-6 space-y-4">\n                <div className="relative" ref={canvasRef}>\n                  {!isPremium && (\n                    <div className="absolute inset-0 z-10 flex items-center justify-center bg-background/80 backdrop-blur-sm rounded-lg">\n                      <div className="text-center">\n                        <Lock className="h-12 w-12 text-muted-foreground mx-auto mb-4" />\n                        <p className="font-display uppercase tracking-wider">Premium Feature</p>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Interactive canvas */}\n                  <div \n                    className="aspect-square w-full max-w-lg mx-auto relative"\n                    onMouseDown={() => setIsDragging(true)}\n                    onMouseUp={() => setIsDragging(false)}\n                    onMouseLeave={() => setIsDragging(false)}\n                  >\n                    {/* Grid overlay for interaction */}\n                    <div className="absolute inset-0 grid grid-cols-8 z-10">\n                      {Array.from({ length: 64 }).map((_, idx) => {\n                        const row = Math.floor(idx / 8);\n                        const col = idx % 8;\n                        return (\n                          <div\n                            key={idx}\n                            className="aspect-square cursor-crosshair hover:bg-white/10 transition-colors"\n                            onClick={() => handleSquareClick(row, col)}\n                            onMouseEnter={() => handleSquareHover(row, col)}\n                          />\n                        );\n                      })}\n                    </div>\n                    \n                    {/* Visualization */}\n                    <ChessBoardVisualization \n                      board={visualizationBoard}\n                      size={500}\n                    />\n                  </div>\n                </div>\n\n                {/* Action buttons */}\n                <div className="flex gap-3 justify-center pt-4">\n                  <Button \n                    onClick={handleSaveToGallery} \n                    variant="outline"\n                    className="gap-2"\n                    disabled={isSaving || !isPremium || paintData.size === 0}\n                  >\n                    {isSaving ? (\n                      <motion.div animate={{ rotate: 360 }} transition={{ repeat: Infinity, duration: 1 }}>\n                        <Save className="h-4 w-4" />\n                      </motion.div>\n                    ) : (\n                      <>\n                        {!isPremium && <Lock className="h-4 w-4" />}\n                        <Save className="h-4 w-4" />\n                        Save to Gallery\n                      </>\n                    )}\n                  </Button>\n                  \n                  <Button \n                    onClick={handleOrderPrint}\n                    className="gap-2 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400"\n                    disabled={!isPremium || paintData.size === 0}\n                  >\n                    {!isPremium && <Lock className="h-4 w-4" />}\n                    <ShoppingBag className="h-4 w-4" />\n                    Order Print\n                  </Button>\n                </div>\n                \n                {/* Tip */}\n                <p className="text-center text-xs text-muted-foreground/60 font-serif">\n                  Click or drag to paint. Your artwork auto-generates position data for prints.\n                </p>\n              </div>\n\n              {/* Right sidebar - Legend */}\n              <div className="lg:col-span-3 space-y-4">\n                <LiveColorLegend\n                  whitePalette={whitePalette}\n                  blackPalette={blackPalette}\n                  title="Your Colors"\n                />\n                \n                {/* Color customization */}\n                <div className="space-y-4 p-4 rounded-lg border border-border/50 bg-card/50">\n                  <h3 className="font-display font-bold uppercase tracking-wider text-xs">\n                    Customize Palette\n                  </h3>\n                  \n                  <div className="space-y-3">\n                    <p className="text-[10px] text-muted-foreground font-display uppercase">Light Tones</p>\n                    <div className="grid grid-cols-3 gap-2">\n                      {([\'k\', \'q\', \'r\', \'b\', \'n\', \'p\'] as const).map(piece => (\n                        <div key={piece} className="flex items-center gap-1.5">\n                          <input\n                            type="color"\n                            value={whitePalette[piece]}\n                            onChange={(e) => {\n                              setWhitePalette(prev => ({ ...prev, [piece]: e.target.value }));\n                              setSelectedBrush(null);\n                            }}\n                            className="w-6 h-6 rounded cursor-pointer border-0"\n                          />\n                          <span className="text-[9px] font-display uppercase text-muted-foreground">{piece}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className="space-y-3">\n                    <p className="text-[10px] text-muted-foreground font-display uppercase">Dark Tones</p>\n                    <div className="grid grid-cols-3 gap-2">\n                      {([\'k\', \'q\', \'r\', \'b\', \'n\', \'p\'] as const).map(piece => (\n                        <div key={piece} className="flex items-center gap-1.5">\n                          <input\n                            type="color"\n                            value={blackPalette[piece]}\n                            onChange={(e) => {\n                              setBlackPalette(prev => ({ ...prev, [piece]: e.target.value }));\n                              setSelectedBrush(null);\n                            }}\n                            className="w-6 h-6 rounded cursor-pointer border-0"\n                          />\n                          <span className="text-[9px] font-display uppercase text-muted-foreground">{piece}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Stats */}\n                <div className="p-4 rounded-lg border border-border/50 bg-card/50 space-y-2">\n                  <h3 className="font-display font-bold uppercase tracking-wider text-xs">Canvas Stats</h3>\n                  <div className="text-sm text-muted-foreground font-serif space-y-1">\n                    <p>Painted squares: <span className="text-foreground font-medium">{paintData.size}</span></p>\n                    <p>Color layers: <span className="text-foreground font-medium">{moveCounter - 1}</span></p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </LegendHighlightProvider>\n        </div>\n      </main>\n\n      <Footer />\n\n      <AuthModal\n        isOpen={showAuthModal}\n        onClose={() => setShowAuthModal(false)}\n      />\n      \n      <VisionaryMembershipCard\n        isOpen={showUpgradeModal}\n        onClose={() => setShowUpgradeModal(false)}\n        trigger="save"\n      />\n    </div>\n  );\n};\n\nexport default CreativeMode;\n';export{e as default};
