const n="/**\n * Intraday Seasonality - v7.53-ACCURACY\n * \n * Maps cognitive windows and market microstructure patterns\n * to improve timing-based predictions.\n */\n\nexport type MarketSession = 'pre_market' | 'open' | 'morning' | 'midday' | 'afternoon' | 'power_hour' | 'close' | 'after_hours';\n\nexport interface SessionCharacteristics {\n  session: MarketSession;\n  volatilityMultiplier: number;\n  volumeMultiplier: number;\n  trendReliability: number;  // How reliable trends are during this period\n  reversalProbability: number;\n  institutionalActivity: number;  // 0-1, higher = more institutional flow\n  typicalDirection: 'bullish' | 'bearish' | 'neutral';\n}\n\n/**\n * Session characteristics based on market microstructure research\n */\nexport const SESSION_PROFILES: Record<MarketSession, SessionCharacteristics> = {\n  pre_market: {\n    session: 'pre_market',\n    volatilityMultiplier: 1.5,\n    volumeMultiplier: 0.3,\n    trendReliability: 0.4,\n    reversalProbability: 0.6,\n    institutionalActivity: 0.2,\n    typicalDirection: 'neutral',\n  },\n  open: {\n    session: 'open',\n    volatilityMultiplier: 2.0,\n    volumeMultiplier: 1.8,\n    trendReliability: 0.3,\n    reversalProbability: 0.7,\n    institutionalActivity: 0.9,\n    typicalDirection: 'neutral',\n  },\n  morning: {\n    session: 'morning',\n    volatilityMultiplier: 1.3,\n    volumeMultiplier: 1.2,\n    trendReliability: 0.7,\n    reversalProbability: 0.3,\n    institutionalActivity: 0.7,\n    typicalDirection: 'bullish',\n  },\n  midday: {\n    session: 'midday',\n    volatilityMultiplier: 0.7,\n    volumeMultiplier: 0.6,\n    trendReliability: 0.5,\n    reversalProbability: 0.5,\n    institutionalActivity: 0.4,\n    typicalDirection: 'neutral',\n  },\n  afternoon: {\n    session: 'afternoon',\n    volatilityMultiplier: 0.9,\n    volumeMultiplier: 0.8,\n    trendReliability: 0.6,\n    reversalProbability: 0.4,\n    institutionalActivity: 0.5,\n    typicalDirection: 'neutral',\n  },\n  power_hour: {\n    session: 'power_hour',\n    volatilityMultiplier: 1.8,\n    volumeMultiplier: 1.5,\n    trendReliability: 0.8,\n    reversalProbability: 0.2,\n    institutionalActivity: 0.85,\n    typicalDirection: 'bullish',\n  },\n  close: {\n    session: 'close',\n    volatilityMultiplier: 1.4,\n    volumeMultiplier: 1.3,\n    trendReliability: 0.7,\n    reversalProbability: 0.3,\n    institutionalActivity: 0.8,\n    typicalDirection: 'neutral',\n  },\n  after_hours: {\n    session: 'after_hours',\n    volatilityMultiplier: 1.2,\n    volumeMultiplier: 0.2,\n    trendReliability: 0.3,\n    reversalProbability: 0.5,\n    institutionalActivity: 0.1,\n    typicalDirection: 'neutral',\n  },\n};\n\n/**\n * Get current market session based on time\n */\nexport function getCurrentSession(date: Date = new Date()): MarketSession {\n  const hours = date.getHours();\n  const minutes = date.getMinutes();\n  const time = hours * 60 + minutes;\n  \n  // Convert to ET (simplified - assumes local is ET)\n  // Pre-market: 4:00 - 9:30\n  if (time >= 240 && time < 570) return 'pre_market';\n  // Open: 9:30 - 10:00\n  if (time >= 570 && time < 600) return 'open';\n  // Morning: 10:00 - 12:00\n  if (time >= 600 && time < 720) return 'morning';\n  // Midday: 12:00 - 14:00\n  if (time >= 720 && time < 840) return 'midday';\n  // Afternoon: 14:00 - 15:00\n  if (time >= 840 && time < 900) return 'afternoon';\n  // Power hour: 15:00 - 15:45\n  if (time >= 900 && time < 945) return 'power_hour';\n  // Close: 15:45 - 16:00\n  if (time >= 945 && time < 960) return 'close';\n  // After hours: 16:00 - 20:00\n  if (time >= 960 && time < 1200) return 'after_hours';\n  \n  return 'after_hours';\n}\n\n/**\n * Day of week effects\n */\nexport type DayOfWeek = 'monday' | 'tuesday' | 'wednesday' | 'thursday' | 'friday';\n\nexport interface DayEffect {\n  day: DayOfWeek;\n  bullishBias: number;  // -1 to 1\n  volatilityMultiplier: number;\n  gapProbability: number;\n}\n\nexport const DAY_EFFECTS: Record<DayOfWeek, DayEffect> = {\n  monday: { day: 'monday', bullishBias: -0.1, volatilityMultiplier: 1.2, gapProbability: 0.4 },\n  tuesday: { day: 'tuesday', bullishBias: 0.05, volatilityMultiplier: 1.0, gapProbability: 0.2 },\n  wednesday: { day: 'wednesday', bullishBias: 0.0, volatilityMultiplier: 0.95, gapProbability: 0.2 },\n  thursday: { day: 'thursday', bullishBias: 0.05, volatilityMultiplier: 1.0, gapProbability: 0.2 },\n  friday: { day: 'friday', bullishBias: 0.1, volatilityMultiplier: 1.1, gapProbability: 0.15 },\n};\n\n/**\n * Get day of week effect\n */\nexport function getDayEffect(date: Date = new Date()): DayEffect {\n  const days: DayOfWeek[] = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];\n  const dayIndex = date.getDay();\n  \n  // Weekend maps to Friday\n  if (dayIndex === 0 || dayIndex === 6) return DAY_EFFECTS.friday;\n  \n  return DAY_EFFECTS[days[dayIndex - 1]];\n}\n\n/**\n * Calculate seasonality adjustment for predictions\n */\nexport function getSeasonalityAdjustment(\n  basePrediction: { direction: 'bullish' | 'bearish' | 'neutral'; confidence: number },\n  date: Date = new Date()\n): { direction: 'bullish' | 'bearish' | 'neutral'; confidence: number; session: MarketSession } {\n  const session = getCurrentSession(date);\n  const dayEffect = getDayEffect(date);\n  const sessionProfile = SESSION_PROFILES[session];\n  \n  let { direction, confidence } = basePrediction;\n  \n  // Adjust confidence based on trend reliability\n  confidence = confidence * sessionProfile.trendReliability;\n  \n  // Apply reversal probability\n  if (Math.random() < sessionProfile.reversalProbability * 0.3) {\n    // Reduce confidence when reversal likely\n    confidence *= 0.7;\n  }\n  \n  // Day of week bias\n  if (direction === 'bullish' && dayEffect.bullishBias < 0) {\n    confidence *= (1 + dayEffect.bullishBias);\n  } else if (direction === 'bearish' && dayEffect.bullishBias > 0) {\n    confidence *= (1 - dayEffect.bullishBias);\n  } else if (direction === 'bullish' && dayEffect.bullishBias > 0) {\n    confidence = Math.min(1, confidence * (1 + dayEffect.bullishBias * 0.5));\n  }\n  \n  return { direction, confidence: Math.max(0.1, confidence), session };\n}\n\n/**\n * Optimal trading windows\n */\nexport function getOptimalTradingWindows(): MarketSession[] {\n  return ['morning', 'power_hour'];\n}\n\n/**\n * Should avoid trading during this session?\n */\nexport function shouldAvoidTrading(session: MarketSession): boolean {\n  return session === 'open' || session === 'midday' || session === 'after_hours';\n}\n";export{n as default};
