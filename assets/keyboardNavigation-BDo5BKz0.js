const n="/**\n * Keyboard Navigation Utilities\n * \n * Comprehensive keyboard navigation support for accessibility\n * and power user workflows.\n * \n * @module keyboardNavigation\n */\n\nimport { useEffect, useCallback, useRef, useState } from 'react';\nimport React from 'react';\n\nexport interface KeyboardShortcut {\n  key: string;\n  modifier?: 'ctrl' | 'alt' | 'shift' | 'meta';\n  description: string;\n  action: () => void;\n  preventDefault?: boolean;\n}\n\n/**\n * Hook for registering keyboard shortcuts\n * \n * @example\n * ```typescript\n * useKeyboardShortcuts([\n *   { key: 'k', modifier: 'ctrl', action: () => openSearch(), description: 'Open search' },\n *   { key: 'Escape', action: () => closeModal(), description: 'Close modal' }\n * ]);\n * ```\n */\nexport function useKeyboardShortcuts(shortcuts: KeyboardShortcut[]) {\n  const shortcutsRef = useRef(shortcuts);\n  shortcutsRef.current = shortcuts;\n\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      for (const shortcut of shortcutsRef.current) {\n        const keyMatch = event.key.toLowerCase() === shortcut.key.toLowerCase();\n        \n        let modifierMatch = true;\n        if (shortcut.modifier) {\n          const modifiers: Record<string, boolean> = {\n            ctrl: event.ctrlKey,\n            alt: event.altKey,\n            shift: event.shiftKey,\n            meta: event.metaKey,\n          };\n          modifierMatch = modifiers[shortcut.modifier];\n        }\n\n        if (keyMatch && modifierMatch) {\n          if (shortcut.preventDefault !== false) {\n            event.preventDefault();\n          }\n          shortcut.action();\n          break;\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n}\n\n/**\n * Hook for focus management within a container\n * Supports Tab, Shift+Tab, Escape, and arrow key navigation\n */\nexport function useFocusTrap(\n  containerRef: React.RefObject<HTMLElement>,\n  options: {\n    enabled?: boolean;\n    onEscape?: () => void;\n  } = {}\n) {\n  const { enabled = true, onEscape } = options;\n\n  useEffect(() => {\n    if (!enabled || !containerRef.current) return;\n\n    const container = containerRef.current;\n    \n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (!container.contains(document.activeElement)) return;\n\n      const focusableElements = container.querySelectorAll(\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n      );\n      \n      const firstElement = focusableElements[0] as HTMLElement;\n      const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n      switch (event.key) {\n        case 'Tab':\n          if (event.shiftKey && document.activeElement === firstElement) {\n            event.preventDefault();\n            lastElement?.focus();\n          } else if (!event.shiftKey && document.activeElement === lastElement) {\n            event.preventDefault();\n            firstElement?.focus();\n          }\n          break;\n          \n        case 'Escape':\n          onEscape?.();\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [enabled, onEscape]);\n}\n\n/**\n * Navigate with arrow keys within a list\n */\nexport function useArrowKeyNavigation<T extends HTMLElement>(\n  items: unknown[],\n  onSelect: (index: number) => void\n) {\n  const containerRef = useRef<T>(null);\n  const [focusedIndex, setFocusedIndex] = useKeyboardNavigationState(0, items.length);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      switch (event.key) {\n        case 'ArrowDown':\n          event.preventDefault();\n          setFocusedIndex(i => Math.min(i + 1, items.length - 1));\n          break;\n        case 'ArrowUp':\n          event.preventDefault();\n          setFocusedIndex(i => Math.max(i - 1, 0));\n          break;\n        case 'Enter':\n          event.preventDefault();\n          onSelect(focusedIndex);\n          break;\n        case 'Home':\n          event.preventDefault();\n          setFocusedIndex(0);\n          break;\n        case 'End':\n          event.preventDefault();\n          setFocusedIndex(items.length - 1);\n          break;\n      }\n    };\n\n    container.addEventListener('keydown', handleKeyDown);\n    return () => container.removeEventListener('keydown', handleKeyDown);\n  }, [items.length, focusedIndex, onSelect]);\n\n  return { containerRef, focusedIndex };\n}\n\n/**\n * State hook for keyboard navigation\n */\nfunction useKeyboardNavigationState(maxIndex: number, itemCount: number) {\n  const [index, setIndex] = useState(0);\n  \n  const setIndexClamped = useCallback((newIndex: number | ((prev: number) => number)) => {\n    setIndex(prev => {\n      const resolved = typeof newIndex === 'function' ? newIndex(prev) : newIndex;\n      return Math.max(0, Math.min(resolved, itemCount - 1));\n    });\n  }, [itemCount]);\n\n  return [index, setIndexClamped] as const;\n}\n\n/**\n * Skip to content link for accessibility\n */\nexport function SkipToContent({ contentId }: { contentId: string }) {\n  return (\n    <a\n      href={`#${contentId}`}\n      className=\"sr-only focus:not-sr-only focus:absolute focus:z-50 focus:p-4 focus:bg-primary focus:text-primary-foreground\"\n    >\n      Skip to main content\n    </a>\n  );\n}\n\n/**\n * Announces changes to screen readers\n */\nexport function announceToScreenReader(message: string, priority: 'polite' | 'assertive' = 'polite') {\n  const announcement = document.createElement('div');\n  announcement.setAttribute('role', 'status');\n  announcement.setAttribute('aria-live', priority);\n  announcement.setAttribute('aria-atomic', 'true');\n  announcement.className = 'sr-only';\n  announcement.textContent = message;\n  \n  document.body.appendChild(announcement);\n  \n  setTimeout(() => {\n    document.body.removeChild(announcement);\n  }, 1000);\n}\n\n/**\n * Focus visible utility - only show focus ring on keyboard navigation\n */\nexport const focusVisibleClasses = 'focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2';\n";export{n as default};
