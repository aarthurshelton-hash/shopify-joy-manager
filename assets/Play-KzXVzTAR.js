import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as u,bz as d,aT as m,bi as x,q as h,br as f,aV as p,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as L,bF as q,bG as S,b6 as A,ae as P,bH as I,ah as H,bI as _,B as G,bJ as K,bK as T,bL as E,bM as U,bN as O,bO as W,bP as Y,bQ as X,bR as V,bS as R,bT as Z,bU as F,bV as J,bW as $,bX as Q,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as ue,c2 as de,a as me,ar as xe,c3 as he,as as fe,c4 as pe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as Le,c8 as qe,aM as Se,c9 as Ae,H as Pe,P as Ie,ca as He,b3 as _e,bs as Ge,be as Ke,cb as Te,aP as Ee,cc as Ue,d as Oe,b2 as We,a9 as Ye,cd as Xe,ce as Ve,cf as Re,al as Ze,au as Fe}from"./index-Hr12Z3Gc.js";import{L as Je}from"./LiveColorLegend-BoNNjpUi.js";import{T as $e}from"./trending-down-0hEx3mON.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-vc3K-ygt.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function ut(e,t){e-=435;const n=xt();let s=n[e];if(void 0===ut.KKfZhX){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ut.NAZspg=r,ut.UZtZYS={},ut.KKfZhX=!0}const a=e+n[0],i=ut.UZtZYS[a];if(i)s=i;else{const e=function(e){this.lwrkeV=e,this.yynSDc=[1,0,0],this.fIbquO=function(){return"newState"},this.NeBrtr="\\w+ *\\(\\) *{\\w+ *",this.NhXqxq="['|\"].+['|\"];? *}"};e.prototype.OZqzAX=function(){const e=new RegExp(this.NeBrtr+this.NhXqxq).test(this.fIbquO.toString())?--this.yynSDc[1]:--this.yynSDc[0];return this.CvKTXT(e)},e.prototype.CvKTXT=function(e){return Boolean(~e)?this.EIjMMw(this.lwrkeV):e},e.prototype.EIjMMw=function(e){for(let t=0,n=this.yynSDc.length;t<n;t++)this.yynSDc.push(Math.round(Math.random())),n=this.yynSDc.length;return e(this.yynSDc[0])},new e(ut).OZqzAX(),s=ut.NAZspg(s),ut.UZtZYS[a]=s}return s}!function(){const e=ut,t=xt();for(;;)try{if(664379===-parseInt(e(436))/1*(-parseInt(e(455))/2)+-parseInt(e(475))/3*(parseInt(e(467))/4)+parseInt(e(444))/5*(-parseInt(e(459))/6)+-parseInt(e(458))/7+-parseInt(e(478))/8*(parseInt(e(447))/9)+parseInt(e(468))/10*(parseInt(e(476))/11)+parseInt(e(487))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ut(454)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=ut,t={};t[e(469)]=e(472)+"+$";const n=t;return dt[e(449)]()[e(504)](e(472)+"+$")[e(449)]()[e(471)+"r"](dt)[e(504)](n[e(469)])});dt();const mt=function(){const e=ut,t={};t[e(446)]=function(e,t){return e!==t},t.gaRmN=e(495);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=ut;if(n[s(446)](n[s(462)],n.gaRmN)){const e=_0x3bb310?function(){if(_0x44fd10){const e=_0x1b36bc[s(454)](_0x8fd3d1,arguments);return _0x28be04=null,e}}:function(){};return _0x27bb9e=!1,e}if(t){const n=t[s(454)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}();function xt(){const e=["CMv0DxjUicHMDq","BNqGtwf0zxjPyq","AwvUDe1HDgvYAq","CMvHC29U","BgvUz3rO","AxnjBNn1zMzPyW","BMn0Aw9UkcKG","ntvYtgTos0m","AxntDgfSzw1HDa","t29YvfK","mZa2ndC3ow1vEurPza","AxnuAhjLzwzVBa","Dg9tDhjPBMC","D2XAq2S","rhjHDYbIEsb0Aa","C3bSAxq","u3rHBgvTyxrLiq","yxbWBhK","mZC2mdGYtePdswHS","yNbrA2O","C2HVCNrnzxnZyq","odq5nZG4ofriww1VEq","ndC3mZu0AfHTtLDP","AKn6B2y","zxHJzxb0Aw9U","z2fsBu4","Cgv0AxrPB24U","sw5ZDwzMAwnPzq","Bw92zxmGyxzHAq","wLDxEMy","nZjmreHhB2m","mJi0nZu5meLZtxbHDq","BM9KBLG","y3rVCIGICMv0Dq","y29UC3rYDwn0BW","kcGOlISPkYKRkq","zfjLCgv0AxrPBW","BgfIBguU","mtqYndC5DfHkAwv6","ntvpv1fKz2W","DgHYzwvMB2XKxW","ohj6D2Dcrq","q1Hirg4","CM4GDgHPCYiPka","yNLjChi","rhjHDYbIEsbPBG","vgHYzwvMB2XKia","yMLUza","uLzTAKW","Bg9N","mJq4nZu0otzHr01rvgq","y2Hrr2m","Dw5RBM93BG","AxneCMf3","sfLrzwe","y29UC29Szq","ie5VigXLz2fSia","zMvU","DM5UCg8","zMLMDhLFBw92zq","C3vMzMLJAwvUDa","tw1hr3y","DhjHy2u","ig1HDgvYAwfSlG","uMvWzxrPDgLVBG","u1P1EgW","BwvZC2fNzq","C2vHCMnO","r2fTzsbKCMf3BG","CMvLzM9SzcbYzq","DMuGCNvSzs4","r1PgtNm","CMvWzxrPDgLVBG","nfDcBMvZsa"];return(xt=function(){return e})()}function ht(e){const t=ut,n={};n[t(450)]="stalemate",n[t(488)]="insufficient_material",n[t(479)]=t(482)+t(497)+t(500),n[t(481)]=t(464)+t(438)+"l",n.bpQkj=t(451)+"e fifty-mo"+t(507),n[t(502)]=t(505)+"!";const s=n;if(e[t(445)+"e"]()){const e={};return e[t(440)]=s[t(450)],e[t(503)]=t(453)+t(493)+t(465)+t(474),e.shortMessage=t(453),e}if(e[t(448)+t(473)+"n"]()){const e={};return e[t(440)]=t(477)+t(435),e.message=t(451)+t(506)+t(463),e[t(457)+"ge"]=t(483)+t(501),e}if(e[t(442)+t(439)+"al"]()){const e={};return e[t(440)]=s[t(488)],e[t(503)]=s[t(479)],e[t(457)+"ge"]=s.byIpr,e}const r=e[t(494)]();if(parseInt(r[t(452)](" ")[4],10)>=100){const e={};return e[t(440)]=t(496)+"_rule",e[t(503)]=s[t(456)],e.shortMessage="50-Move Rule",e}const a={};return a.reason=t(489),a.message=s[t(502)],a[t(457)+"ge"]="Draw",a}function ft(e){const t=ut;return{jCzof:function(e,t){return e(t)}}[t(460)](ht,e)[t(503)]}mt(void 0,function(){const e=ut,t={MmGGv:function(e,t){return e+t},RVmjL:function(e,t){return e+t},AJWkd:"{}.constru"+e(470)+e(480)+" )",ZWWzf:function(e){return e()},tGooL:"error",RJRrY:e(461),HYQea:"table",GZFNs:function(e,t){return e<t}},n=t[e(466)](function(){const n=e;let s;try{s=Function(t[n(498)](t[n(485)](n(437)+n(443),t.AJWkd),");"))()}catch(r){s=window}return s}),s=n[e(492)]=n[e(492)]||{},r=[e(486),"warn","info",t.tGooL,t.RJRrY,t[e(491)],e(499)];for(let a=0;t[e(508)](a,r[e(441)]);a++){const t=mt.constructor.prototype[e(484)](mt),n=r[a],i=s[n]||t;t.__proto__=mt[e(484)](mt),t[e(449)]=i[e(449)].bind(i),s[n]=t}})(),function(){const e=bt,t=yt();for(;;)try{if(717828===-parseInt(e(333))/1+parseInt(e(406))/2+-parseInt(e(379))/3+-parseInt(e(319))/4+parseInt(e(403))/5+parseInt(e(332))/6*(parseInt(e(412))/7)+-parseInt(e(347))/8*(-parseInt(e(402))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=bt,t={};t[e(345)]="(((.+)+)+)+$";const n=t;return pt[e(326)]()[e(353)](e(369)+"+$").toString()[e(387)+"r"](pt)[e(353)](n[e(345)])});pt();const gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[bt(372)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();gt(void 0,function(){const e=bt,t={ycBoy:"Web Audio "+e(350)+e(320),fCzlN:function(e,t){return e!==t},UjOXG:e(354),fLCyc:"IhVxJ",mdGAN:e(357)+"nction() ",IXpmk:e(400)+e(338)+e(336)+" )",fqMZc:function(e){return e()},xJzyL:"warn",sGddf:e(339),TDZZx:e(386)},n=t.fqMZc(function(){const n=e;let s;try{t[n(342)](t.UjOXG,t[n(328)])?s=Function(t[n(349)]+t.IXpmk+");")():_0x5edf92[n(363)](t[n(377)])}catch(r){s=window}return s}),s=n.console=n[e(391)]||{},r=[e(394),t[e(318)],e(312),t[e(368)],e(396),e(330),t[e(364)]];for(let a=0;a<r[e(407)];a++){const t=gt[e(387)+"r"][e(356)].bind(gt),n=r[a],i=s[n]||t;t[e(352)]=gt[e(381)](gt),t[e(326)]=i[e(326)].bind(i),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=bt,r={jhKCF:"Web Audio API not su"+s(320),bOJng:function(e,t){return e+t},mVleW:function(e,t){return e+t},oQwHr:function(e,t){return e+t},QasSG:function(e){return e()},zIAXh:function(e,t){return e*t},jPgTF:function(e,t){return e<t},gDySP:s(360),mJEFv:function(e,t,n,s,r,a){return e(t,n,s,r,a)},TXAeM:s(376),UqQFI:"sine",LJvMt:function(e,t,n,s,r,a){return e(t,n,s,r,a)},cxaJQ:s(335),zErjz:function(e,t,n,s,r,a){return e(t,n,s,r,a)},ORiCZ:function(e,t,n){return e(t,n)},uXfOs:s(355),YTbtL:function(e,t,n,s,r,a){return e(t,n,s,r,a)},LxSBN:"gameEnd",WBbJJ:s(393),FyKGt:function(e,t,n){return e(t,n)},VrXcJ:s(385),eUVSC:function(e,t,n){return e(t,n)},MnSQv:s(414),ULwrb:s(337),HrTjC:function(e,t){return e(t)},deXmA:function(e,t,n){return e(t,n)}},a={};a[s(334)]=null,a[s(380)]=null;const i=r.HrTjC(t.useRef,a),o=r[s(389)](t.useCallback,()=>{const e=s;if(!i.current[e(334)])try{const t=new(window[e(411)+"xt"]||window[e(317)+"oContext"]),s=t[e(413)]();s[e(343)](t[e(344)+"n"]),s[e(313)][e(409)]=n;const r={};r[e(334)]=t,r[e(380)]=s,i.current=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;i[e(397)].gainNode&&(i.current[e(380)][e(313)][e(409)]=n)},[n]);const c=t.useCallback((t,n,a=s(401),c=.01,l=.1,u)=>{const d=s;if(!e)return;o();const{context:m,gainNode:x}=i[d(397)];if(!m||!x)return;const h=m[d(375)+"llator"](),f=m[d(413)]();h[d(366)]=a,h.frequency.setValueAtTime(t,m.currentTime),u&&h[d(408)][d(346)+d(367)+"ueAtTime"](u,m[d(395)+"e"]+n),f[d(313)]["setValueAt"+d(340)](0,m[d(395)+"e"]),f.gain["linearRamp"+d(331)+d(327)](1,r.bOJng(m[d(395)+"e"],c)),f[d(313)][d(346)+d(367)+d(392)](.01,r[d(324)](m[d(395)+"e"],n)-l),f.gain["linearRampToValueAtT"+d(327)](0,r[d(365)](m[d(395)+"e"],n)),h[d(343)](f),f.connect(x),h[d(341)](m[d(395)+"e"]),h[d(321)](r[d(365)](m[d(395)+"e"],n))},[e,o]),l=r[s(314)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;r.QasSG(o);const{context:c,gainNode:l}=i[a(397)];if(!c||!l)return;const u=r.zIAXh(c[a(348)],t),d=c[a(310)+"er"](1,u,c[a(348)]),m=d[a(322)+a(388)](0);for(let e=0;r.jPgTF(e,u);e++)m[e]=r.zIAXh(Math[a(382)](),2)-1;const x=c["createBuff"+a(358)]();x[a(405)]=d;const h=c[a(384)+a(362)]();h.type=a(378),h[a(408)][a(409)]=n;const f=c[a(413)]();f[a(313)]["setValueAt"+a(340)](.3,c[a(395)+"e"]),f[a(313)][a(346)+"lRampToVal"+a(392)](.01,c[a(395)+"e"]+t),x[a(343)](h),h[a(343)](f),f[a(343)](l),x[a(341)](c.currentTime),x.stop(c[a(395)+"e"]+t)},[e,o]),u=t.useCallback(t=>{const n=s;if(e)switch(t){case"move":c(800,.08,"sine",.005,.05),c(400,.06,n(335),.005,.04);break;case r.gDySP:l(.12,2e3),r[n(383)](c,300,.1,n(325),.005,.08),c(150,.15,n(401),.01,.1);break;case r.TXAeM:c(600,.06,r[n(373)],.005,.04),setTimeout(()=>c(700,.06,n(401),.005,.04),80);break;case n(374):r[n(316)](c,880,.15,r.cxaJQ,.01,.1),setTimeout(()=>c(1100,.12,n(335),.01,.08),120);break;case n(359):r[n(351)](c,880,.2,n(401),.01,.15),r[n(314)](setTimeout,()=>c(660,.2,n(401),.01,.15),150),setTimeout(()=>c(440,.3,"sine",.01,.2),300),setTimeout(()=>c(330,.4,n(401),.01,.3),500);break;case r[n(329)]:r.YTbtL(c,523,.12,r[n(373)],.01,.08),setTimeout(()=>c(659,.12,n(401),.01,.08),100),setTimeout(()=>c(784,.2,n(401),.01,.15),200);break;case r[n(371)]:c(440,.15,r[n(311)],.01,.1),r.ORiCZ(setTimeout,()=>c(349,.25,n(335),.01,.2),150);break;case r.WBbJJ:r.zErjz(c,523,.1,n(401),.01,.08),setTimeout(()=>c(659,.1,n(401),.01,.08),100),setTimeout(()=>c(784,.1,n(401),.01,.08),200),r[n(370)](setTimeout,()=>c(1047,.3,n(401),.01,.25),300);break;case"defeat":c(392,.2,n(401),.02,.15),setTimeout(()=>c(349,.2,n(401),.02,.15),200),r.ORiCZ(setTimeout,()=>c(330,.3,n(401),.02,.25),400),r.ORiCZ(setTimeout,()=>c(262,.4,n(401),.02,.35),650);break;case r.VrXcJ:c(440,.15,r[n(373)],.01,.1),r[n(404)](setTimeout,()=>c(440,.15,n(401),.01,.1),180),setTimeout(()=>c(523,.2,n(401),.01,.15),360);break;case"illegal":c(200,.1,n(325),.005,.08),c(150,.08,r[n(398)],.005,.06)}},[e,c,l]);t.useEffect(()=>{const e=s;if(r[e(361)]==r[e(361)])return()=>{const t=e;i[t(397)][t(334)]&&i.current.context[t(315)]()};{const t=_0x54722d?function(){if(_0x47b705){const t=_0x16b51e[e(372)](_0x2ca447,arguments);return _0x434902=null,t}}:function(){};return _0x5098fd=!1,t}},[]);const d={};return d[s(399)]=u,d[s(410)]=o,d};function bt(e,t){e-=310;const n=yt();let s=n[e];if(void 0===bt.ybcghW){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};bt.NXivcO=r,bt.bNDfqY={},bt.ybcghW=!0}const a=e+n[0],i=bt.bNDfqY[a];if(i)s=i;else{const e=function(e){this.wKHFPd=e,this.aRnljF=[1,0,0],this.mNErqY=function(){return"newState"},this.NEHgfx="\\w+ *\\(\\) *{\\w+ *",this.fbJykf="['|\"].+['|\"];? *}"};e.prototype.XAqiqs=function(){const e=new RegExp(this.NEHgfx+this.fbJykf).test(this.mNErqY.toString())?--this.aRnljF[1]:--this.aRnljF[0];return this.DwVjqg(e)},e.prototype.DwVjqg=function(e){return Boolean(~e)?this.LURscj(this.wKHFPd):e},e.prototype.LURscj=function(e){for(let t=0,n=this.aRnljF.length;t<n;t++)this.aRnljF.push(Math.round(Math.random())),n=this.aRnljF.length;return e(this.aRnljF[0])},new e(bt).XAqiqs(),s=bt.NXivcO(s),bt.bNDfqY[a]=s}return s}function yt(){const e=["Bg9N","y3vYCMvUDfrPBq","zxHJzxb0Aw9U","y3vYCMvUDa","tw5tuxy","CgXHEvnVDw5K","E30Uy29UC3rYDq","C2LUzq","ntCWmdzxugnctxq","mtK5ndeXmgDuDLvdwq","zvvwu0m","yNvMzMvY","mJeWnty5nhbvDNbnuG","BgvUz3rO","zNjLCxvLBMn5","DMfSDwu","Aw5PDef1zgLV","qxvKAw9dB250zq","mJm4sLDZrhDq","y3jLyxrLr2fPBG","C2f3Dg9VDgG","y3jLyxrLqNvMzG","y3HHsLe","Aw5MBW","z2fPBG","t1jPq1O","y2XVC2u","teP2txq","D2vIA2L0qxvKAq","EeP6EuW","mJe1nZe1mM9RDhLOBa","ChbVCNrLza","C3rVCa","z2v0q2HHBM5LBa","uLPjzuy","BvzSzvC","C3f1yxjL","Dg9tDhjPBMC","Aw1L","zKXdEwm","DvHMt3m","DgfIBgu","vg9wywX1zuf0va","mZy4ntHMA1fywxe","ndqXmtC1rMvuturT","y29UDgv4Da","DhjPyw5NBgu","CM4GDgHPCYiPka","s0zLA3O","y3rVCIGICMv0Dq","zxjYB3i","vgLTzq","C3rHCNq","zKn6Be4","y29UBMvJDa","zgvZDgLUyxrPBW","BMPTwuW","zxHWB25LBNrPyq","mtiWmeL5qwzLAa","C2fTCgXLuMf0zq","Bwrhqu4","qvbjig5VDcbZDq","EKvYANO","x19WCM90B19F","C2vHCMnO","veP6EM4","z2fTzvn0yxj0","ChjVDg90ExbL","CMv0DxjUicHMDq","zxjtB3vYy2u","y2HLy2TTyxrL","y2fWDhvYzq","vuX3CMi","ywrgAwX0zxi","D2fYBG","verAwNG","B1f3shi","DhLWzq","BfjHBxbuB1zHBa","C0DKzgy","kcGOlISPkYKRkq","rNLlr3q","thHtqK4","yxbWBhK","vxfrrKK","y2HLy2S","y3jLyxrLt3nJAq","y2fZDgXL","EwncB3K","Bg93CgfZCW","mJCZnZaYmhPQAgjquG","z2fPBK5Vzgu","yMLUza","CMfUzg9T","BuPfrNy","y3jLyxrLqMLXDq","zhjHDW","DhjHy2u","y29UC3rYDwn0BW","rgf0yq","zgvyBue","AMHlq0y","y29UC29Szq","DwvbDfrPBwu","DMLJDg9YEq"];return(yt=function(){return e})()}const wt=Ct;!function(){const e=Ct,t=Nt();for(;;)try{if(820238===-parseInt(e(498))/1*(parseInt(e(510))/2)+parseInt(e(501))/3+-parseInt(e(515))/4*(parseInt(e(518))/5)+parseInt(e(532))/6+-parseInt(e(527))/7+-parseInt(e(509))/8*(-parseInt(e(526))/9)+-parseInt(e(516))/10*(-parseInt(e(520))/11))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Ct(517)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Ct;return jt[e(511)]()[e(522)]("(((.+)+)+)+$")[e(511)]()[e(497)+"r"](jt)[e(522)](e(500)+"+$")});function Ct(e,t){e-=495;const n=Nt();let s=n[e];if(void 0===Ct.LOFSuV){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Ct.hqlPIz=r,Ct.DuYGhv={},Ct.LOFSuV=!0}const a=e+n[0],i=Ct.DuYGhv[a];if(i)s=i;else{const e=function(e){this.szgNtO=e,this.gaxHLj=[1,0,0],this.sItVIo=function(){return"newState"},this.GRtPbL="\\w+ *\\(\\) *{\\w+ *",this.NPrEAO="['|\"].+['|\"];? *}"};e.prototype.niRSEX=function(){const e=new RegExp(this.GRtPbL+this.NPrEAO).test(this.sItVIo.toString())?--this.gaxHLj[1]:--this.gaxHLj[0];return this.MjwbwA(e)},e.prototype.MjwbwA=function(e){return Boolean(~e)?this.GsKKJM(this.szgNtO):e},e.prototype.GsKKJM=function(e){for(let t=0,n=this.gaxHLj.length;t<n;t++)this.gaxHLj.push(Math.round(Math.random())),n=this.gaxHLj.length;return e(this.gaxHLj[0])},new e(Ct).niRSEX(),s=Ct.hqlPIz(s),Ct.DuYGhv[a]=s}return s}function Nt(){const e=["vwfUt2i","odKYnda1ofP3sgzeAa","x19WCM90B19F","E30Uy29UC3rYDq","y29UC3rYDwn0BW","ohzZvvHxrW","D2fYBG","kcGOlISPkYKRkq","ntC4ngTLwLr1rW","DfnWC1i","BMfTzq","v3fbA2u","y29UC29Szq","y01Wv00","yMLUza","CMv0DxjUicHMDq","nda4z1jIvxv5","mZC4odq0uvv6thfl","Dg9tDhjPBMC","DgfIBgu","CM4GDgHPCYiPka","Bg9N","ndC5ntzms1neD2W","mJaZmdC1mefoEePisa","yxbWBhK","nZv4qKXgrvu","Aw5MBW","nJz6EgnTu24","BgvUz3rO","C2vHCMnO","zw5HyMXLza","y3rVCIGICMv0Dq","BMn0Aw9UkcKG","mJe3mdm1rLn3Cw9O","otK1ndK1ovrJq0jwwq","y2HLC3mTC291BG","ChjVDg90ExbL","zxjYB3i"];return(Nt=function(){return e})()}jt();const kt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Ct(517)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();kt(void 0,function(){const e=Ct,t={UanOb:function(e,t){return e+t}};t[e(502)]=e(519),t.WqAke="trace",t[e(506)]=function(e,t){return e<t};const n=t;let s;try{s=Function(n[e(531)](e(508)+e(525)+(e(496)+e(524)+e(513)+" )"),");"))()}catch(i){s=window}const r=s[e(505)]=s[e(505)]||{},a=[e(514),e(499),n[e(502)],e(530),"exception",e(512),n[e(504)]];for(let o=0;n[e(506)](o,a[e(521)]);o++){const t=kt[e(497)+"r"][e(529)][e(507)](kt),n=a[o],s=r[n]||t;t[e(495)]=kt[e(507)](kt),t.toString=s[e(511)][e(507)](s),r[n]=t}})();const Mt={};Mt[wt(503)]=wt(528)+"d-settings";const zt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[wt(523)]}))}),Mt)),Dt=qt;!function(){const e=qt,t=St();for(;;)try{if(516451===-parseInt(e(588))/1+-parseInt(e(509))/2+parseInt(e(698))/3*(-parseInt(e(674))/4)+parseInt(e(578))/5+-parseInt(e(680))/6+parseInt(e(659))/7+parseInt(e(710))/8*(parseInt(e(620))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,n){const s=qt,r={};r[s(513)]=s(571),r[s(471)]=s(551);const a=r,i=e?function(){const e=s;if(n){if(a[e(471)]==a[e(471)]){const s=n[e(536)](t,arguments);return n=null,s}_0x49d716(a[e(513)])}}:function(){};return e=!1,i}}()(void 0,function(){const e=qt;return Bt[e(452)]().search("(((.+)+)+)+$")[e(452)]()[e(666)+"r"](Bt)[e(704)](e(533)+"+$")});Bt();const Lt=function(){const e=qt,t={};t[e(689)]=function(e,t){return e!==t},t.inuEa=e(682);const n=t;let s=!0;return function(e,t){const r=s?function(){const s=qt;if(n[s(689)](n[s(713)],n[s(713)])){if(_0x4ab307){const e=_0x2e0406[s(536)](_0xeec8df,arguments);return _0x115ba8=null,e}}else if(t){const n=t[s(536)](e,arguments);return t=null,n}}:function(){};return s=!1,r}}();function qt(e,t){e-=436;const n=St();let s=n[e];if(void 0===qt.Ypujjr){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.dfHETY=r,qt.dXnBKo={},qt.Ypujjr=!0}const a=e+n[0],i=qt.dXnBKo[a];if(i)s=i;else{const e=function(e){this.TKjYts=e,this.VgzduG=[1,0,0],this.DzGxRO=function(){return"newState"},this.DJbRso="\\w+ *\\(\\) *{\\w+ *",this.wbxobM="['|\"].+['|\"];? *}"};e.prototype.zdlQfg=function(){const e=new RegExp(this.DJbRso+this.wbxobM).test(this.DzGxRO.toString())?--this.VgzduG[1]:--this.VgzduG[0];return this.xPmGSV(e)},e.prototype.xPmGSV=function(e){return Boolean(~e)?this.zSLWjk(this.TKjYts):e},e.prototype.zSLWjk=function(e){for(let t=0,n=this.VgzduG.length;t<n;t++)this.VgzduG.push(Math.round(Math.random())),n=this.VgzduG.length;return e(this.VgzduG[0])},new e(qt).zdlQfg(),s=qt.dfHETY(s),qt.dXnBKo[a]=s}return s}function St(){const e=["r3HdwMi","z2rjqvu","AxnmB2fKAw5N","vg91ze4","DxnLCL9PzcWGzq","tLfWC0O","C2LUz2XL","vKvXvxq","u3bSDhm","tevoufy","AM9PBIbNyw1L","BMvS","C2fU","zhrfD3O","vvbeqvrf","ihbSyxLPBMCGyq","CgvjD1e","rurOAfK","vxvAzNK","z3vVvgm","yMXHy2TFD2LUCW","EeTtwfa","zxHJzxb0Aw9U","rKDiANa","tLvzywS","z05Yzue","tY1p","q2fUBM90igPVAq","EKfKvwm","C3vIC3rYAw5N","CMvZDwX0","rMvmsKW","ntaXnZuYt0r5tNjd","Aw5JBhvKzxm","q1zivMG","r2fTzsbHBhjLyq","wfzVseC","Bg9HzcbNyw1L","C3rHCNrLzf9HDa","D2fYBG","zxjFAwq","y2HLC3nFBw92zq","y3vYCMvUDf9Mzq","ihjHDgLUz3m6","AxnnEvr1CM4","v2HPDguGD2LUCW","zgvMzwf0","tY1plu8","B0DzBNy","yMXPDhPFnq","C3rHDhvZ","y3jLyxrLzef0","ywrK","z2fTzs0","tKTXswm","C1buugu","kcGOlISPkYKRkq","EvDRCvi","u3rjvey","yxbWBhK","DMvyywG","tLD0t0i","DvbsEhm","D2fPDgLUzW","AvHOvKK","ueLVugC","Bg9HzeDHBwu","thHzswK","DhrL","vwfjsuS","BwvZC2fNzq","AvnXCwO","C2vSzwn0","q2HHBgXLBMDLia","suPYDxK","BIb5B3vYig93BG","r2fTzsbJCMvHDa","AgfUz2vZ","vgDvzKm","sfnws1a","DhvYBG","zvfRrMK","y3jLyxrLigDHBq","s0rxwMm","igDHBwu","y2HHBgXLBMDLxW","D2HPDgvFDgLTzq","t2Hmtvu","Be9qsNm","BxLdB2XVCG","t0z1vLO","svPit08","DvHMyNe","uLrdrKG","Bw92zq","zNjVBq","y29KztOG","ww9eCuq","y29Kzq","ywjHBMrVBMvK","DxbKyxrL","mJu4ody0mef4DfrtCa","yMXHy2TuAw1LuG","BIbPBIb0BYbJCG","qu5oAee","zMLUza","BwfW","Bw92zv9UDw1Izq","AM9PBIbIEsbJBW","D2LUBMvYswq","s2fVyMC","nZy5mta2u2D4ExLQ","CMfWAwrFmtu","yMXHy2S","uMf0Aw5NoIa","rMfPBgvKihrVia","DxnLCL9Pza","AxndAgvJA21HDa","wffOvvm","AfvqsuG","z2fTzv9Pzd1LCq","EMvmDLq","C3vIC2nYAwjL","z2v0qxzHAwXHyG","BIbPBIb0BYbQBW","qNftz0q","Dg9ju09tDhjPBG","Bw92zv9JB3vUDa","tfDKALy","y2HLC3nFz2fTzq","Aw5Zzxj0","C2LVBIK","yMLUza","wMfds3a","zw1HAw5PBMC","q21VvuK","ugngwNy","su5trvju","BuLwrMW","v1PSufm","ugXLyxnLihnPzW","D2HPDgvFCgXHEq","C3vJy2vZCW","mtK1mZC0nZbMuefLv1C","z2fTzv9Pza","Bw92zv91y2K","t0nkquK","Bw92zxmT","zYbMB3iGB3bWBW","AwXSzwDHBa","sLbgugS","B2rL","D2HPDgvqBgf5zq","z2fTzvn0yxrL","uNbIsvm","yMXHy2TFDgLTzq","Aw5MBW","Aw4GysbNyw1L","y29UC29Szq","q1fUrgO","B1LPvuS","BMvUDc4UlG","wunjq0m","z0H5zMi","CgDU","BwzIA1G","Bw92zunVDw50","sff6Cu0","y2HLy2S","D2HPDgvFCgfSzq","x3jLBwfPBMLUzW","r1nLCei","DhjHy2u","y3jLyxrLzf9HDa","AgfSBgvUz2uGyW","y2fZDgXL","ww5xzLO","D09vt3C","BIb0AgLZihzLCG","ywXS","y2fWDhvYzwq","rLHmvgu","mJaXndaXmNrVwK5hsa","D2HPDgvuAw1LuG","DwDQyvG","AuHfrxe","zuPwA3a","wujSCLO","BMv3uMf0Aw5N","y29UC3rYDwn0BW","yMXHy2TqBgf5zq","BgHcs1a","zwf0zsbHigDHBq","Awq9zxeU","BMn0Aw9UkcKG","CKTMDgC","zuTNAxO","ndeZndyWtu9wEgnk","AgfSBgvUz2vFyW","ywn0AxzL","uMzYvuS","rMzcuMy","ChjVBw90Aw9U","ntuZoda5nNn3AuLWrG","zwXVx3jHDgLUzW","BNn6BuC","ww91ihDVBIe","AM9PBKDHBwu","y3jLyxrLr2fTzq","BufTwe4","B25LBNqGyxv0BW","ruvkwhi","tfrlA2e","B3vUza","z2vUzxjHDgvFyW","zxjYB3i","Efbit2S","BeXNr3y","CNbJ","yMXHy2TqywXLDa","ze5fvvG","mtvVAhPIzgW","tw92zsbLCNjVCG","y2HHBMDL","wfrHBgO","Ce5Tv04","CKLK","C2vHCMnO","C1rpAuy","u21yENe","BwfRzu1VDMu","Cg9ZDgDYzxnFyW","D2HPDgu","oej3CgfsDG","CM4GDgHPCYiPka","D2LUBMvYx2LK","Aw51rwe","BMv3","wezOCMO","yMXHy2TFCgXHEq","D2HPDgvFD2LUCW","CYbcBgfJAY4","z2fTzq","B3jKzxi","y3rVCIGICMv0Dq","CMvTB3zLq2HHBG","zejTz1K","vM93Bxq","DMvYyM9Zzq","sw52ywXPzcbVCG","D1b1vxq","ww91ihjLC2LNBG","BgvUz3rO","Dg9tDhjPBMC","y2HHBgXLBMDLqW","zhjHDW","y2HHBM5LBa","wfrJCxm","lwfJy2vWDhmGAq","z2fTzvn0yxj0","AhnQAu8","y29TCgXLDgvK","D01ntKG","DuLyEfK","zMvU","qMXHy2SGD2LUCW","Bw92zv9Zyw4","DgLTzunVBNrYBW","sfHgA2m","ChjVzMLSzxm","t0PHqxa","Dw50Aw1Lza","rwzxyKe","sxLlv0O","Bwf5yMvtAw5NBa","Dgj1Bvy","ChjVDg90ExbL","zxroAey"];return(St=function(){return e})()}Lt(void 0,function(){const e=qt,t={WnaBM:function(e,t){return e+t}};t[e(654)]=function(e,t){return e+t},t[e(486)]="return (fu"+e(671),t[e(569)]="log",t[e(469)]=e(633),t[e(702)]=e(692),t.ToudN=e(649);const n=t,s=function(){const t=e;let s;try{s=Function(n.WnaBM(n[t(654)](n[t(486)],"{}.constru"+t(443)+t(711)+" )"),");"))()}catch(r){s=window}return s}(),r=s.console=s[e(635)]||{},a=[n[e(569)],e(516),n.OJaAp,n.pNmWN,e(499),"table",n[e(480)]];for(let i=0;i<a[e(451)];i++){const t=Lt.constructor[e(475)][e(609)](Lt),n=a[i],s=r[n]||t;t.__proto__=Lt[e(609)](Lt),t[e(452)]=s[e(452)][e(609)](s),r[n]=t}})();const At={bullet_1:60};At[Dt(526)]=300,At[Dt(589)]=900,At[Dt(470)]=0;const Pt=At,It=_t;!function(){const e=_t,t=Gt();for(;;)try{if(176904===-parseInt(e(132))/1+-parseInt(e(122))/2*(parseInt(e(181))/3)+parseInt(e(143))/4*(-parseInt(e(152))/5)+parseInt(e(170))/6+-parseInt(e(160))/7*(-parseInt(e(174))/8)+parseInt(e(137))/9*(-parseInt(e(126))/10)+parseInt(e(163))/11*(parseInt(e(164))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Ht=function(){const e=_t,t={};t[e(142)]=function(e,t){return e!==t},t[e(161)]="JNAIZ";const n=t;let s=!0;return function(e,t){const r=s?function(){const s=_t;if(!n[s(142)](n[s(161)],"MwqfL"))return!!_0x3237a9&&_0x283822.vibrate([15,40,15]);if(t){const n=t.apply(e,arguments);return t=null,n}}:function(){};return s=!1,r}}()(void 0,function(){const e=_t,t={};t[e(175)]=e(167)+"+$";const n=t;return Ht[e(180)]().search("(((.+)+)+)+$")[e(180)]()[e(169)+"r"](Ht)[e(145)](n[e(175)])});function _t(e,t){e-=120;const n=Gt();let s=n[e];if(void 0===_t.MxcApa){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};_t.OnHmaG=r,_t.kIgdPt={},_t.MxcApa=!0}const a=e+n[0],i=_t.kIgdPt[a];if(i)s=i;else{const e=function(e){this.Noybmz=e,this.hCQHXI=[1,0,0],this.pOLevb=function(){return"newState"},this.SqAYQy="\\w+ *\\(\\) *{\\w+ *",this.ukJgXd="['|\"].+['|\"];? *}"};e.prototype.FgLuJu=function(){const e=new RegExp(this.SqAYQy+this.ukJgXd).test(this.pOLevb.toString())?--this.hCQHXI[1]:--this.hCQHXI[0];return this.DkOSjW(e)},e.prototype.DkOSjW=function(e){return Boolean(~e)?this.qkSDvY(this.Noybmz):e},e.prototype.qkSDvY=function(e){for(let t=0,n=this.hCQHXI.length;t<n;t++)this.hCQHXI.push(Math.round(Math.random())),n=this.hCQHXI.length;return e(this.hCQHXI[0])},new e(_t).FgLuJu(),s=_t.OnHmaG(s),_t.kIgdPt[a]=s}return s}function Gt(){const e=["CM4GDgHPCYiPka","v0jlCg4","yMLUza","BuTZwKW","zxHJzxb0Aw9U","qNHguvK","wwHjshC","mJm3ntGYmxbTy29uCa","DfDLv1K","z2nZBMy","ndy2ndeXz1zqExzi","mtiWuLHxDeDS","y29UC29Szq","C2vSzwn0Aw9U","kcGOlISPkYKRkq","B1ntAwe","y29UC3rYDwn0BW","mZyWndyYthHwrMvY","AfLUr2q","ChjVDg90ExbL","tKPVt0q","ogL5s1PcDW","v1H1uxa","rKPPAey","tvfQve0","DMLICMf0zq","ve9zywq","Dg9tDhjPBMC","mtGYnZLTvMnYthC","BgLNAhq","CfLer24","ntH3s0rRCgi","tNvpCLa","Aw5MBW","u3HesMu","ndm2nZuWqNHjsKDq","D2fYBG","AxntDxbWB3j0zq","tLD6wuq","zxjYB3i","zgjHy2SGzMfPBa","mJm3nJm4A1PmuKrv","zwq6","yxbWBhK","E30Uy29UC3rYDq","q1nnExq","mJDbD1zXyxu","BgvUz3rO","C3vJy2vZCW","DhjHy2u","BMn0Aw9UkcKG","wvjSy1u","ohrgrgrKzG","D1H2uK0","C2vHCMnO","AgvHDNK","BwvKAxvT","Bg9N","Dw5KzwzPBMvK","y3rVCIGICMv0Dq","CMv0DxjUicHMDq","mJuZmdy1y3LPqwPh"];return(Gt=function(){return e})()}Ht();const Kt=function(){const e={hYnGd:function(e,t){return e===t}},t=e;let n=!0;return function(e,s){const r={WBKpn:function(e,n){return t[_t(171)](e,n)}},a=n?function(){const t=_t,n={};n[t(179)]=t(167)+"+$";const a=n;if(r[t(154)](t(173),t(144)))return _0x4e3a4f[t(180)]()[t(145)](a[t(179)]).toString()[t(169)+"r"](_0x4997cf)[t(145)](t(167)+"+$");if(s){const n=s[t(134)](e,arguments);return s=null,n}}:function(){};return n=!1,a}}();Kt(void 0,function(){const e=_t,t={CSMyt:function(e,t){return e(t)},FLbUi:e(151)+e(141),MQjTM:e(162),mKsZL:function(e,t){return e+t},NWzYD:e(135)+'ctor("retu'+e(153)+" )",NuOrP:function(e){return e()},pYDGn:e(127),BxFQY:e(130),FJihF:"table"};let n;try{if(t[e(177)]!=t[e(177)]){const n=t[e(136)](_0x22ba98,t.FLbUi+(e(135)+e(150)+e(153)+" ));"));_0x1aa446=n()}else{const s=Function(t[e(156)](t.mKsZL(e(151)+e(141),t[e(129)]),");"));n=t[e(123)](s)}}catch(a){n=window}const s=n.console=n[e(165)]||{},r=[e(148),t[e(121)],e(124),t[e(158)],e(157),t[e(176)],e(140)];for(let i=0;i<r[e(138)];i++){const t=Kt[e(169)+"r"][e(172)][e(155)](Kt),n=r[i],a=s[n]||t;t.__proto__=Kt[e(155)](Kt),t.toString=a[e(180)][e(155)](a),s[n]=t}})();const Tt={};Tt[It(120)]=10,Tt[It(147)]=25,Tt[It(146)]=50,Tt.success=[10,50,20],Tt.error=[50,30,50,30,50],Tt[It(166)]=5;const Et=Tt,Ut=()=>{const e=It,n={oSSia:e(149),SxDJe:"vibrate",YhIHw:function(e,t,n){return e(t,n)},Lqhrt:function(e,t,n){return e(t,n)}},s=typeof navigator!==n[e(168)]&&n[e(125)]in navigator,r=t.useCallback((t=e(120))=>{const n=e;if(!s)return!1;try{const e=Et[t];return navigator[n(178)](e)}catch(r){return!1}},[s]),a={select:n.YhIHw(t.useCallback,()=>r(e(166)),[r]),move:n[e(159)](t.useCallback,()=>r("light"),[r]),capture:t.useCallback(()=>r(e(147)),[r]),check:n[e(159)](t.useCallback,()=>r(e(146)),[r]),victory:n[e(159)](t.useCallback,()=>r(e(139)),[r]),error:t.useCallback(()=>r(e(130)),[r]),castle:t.useCallback(()=>!!s&&navigator[e(178)]([15,40,15]),[s]),gameStart:n.Lqhrt(t.useCallback,()=>!!s&&navigator.vibrate([10,30,10,30,20]),[s])},i={};return i[e(128)+"d"]=s,i[e(178)]=r,i.haptics=a,i},Ot={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},Wt=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Yt=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:f=!1,enPensentOpacity:p=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Ut();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",S=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=Wt(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,x,n,s,M]),A=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),I=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),H=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return u.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[u.jsx("div",{className:"sm:hidden mb-2 text-center",children:u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),u.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=Wt(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,d=b===i,h=w.includes(i);c.has(i);const p=C===i,g=L.has(i),y=I(i),j=H&&g&&!y,N=H&&y;return u.jsxs(m.div,{onClick:()=>S(e,t),onMouseEnter:()=>A(i),onMouseLeave:P,onTouchEnd:e=>{f&&g&&(e.stopPropagation(),A(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${d?"ring-4 ring-primary ring-inset z-10":""}\n          ${p?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&f?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&u.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?u.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):u.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&u.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:u.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Ot[o]})}),0===t&&u.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&u.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),u.jsx(d,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:p,isEnabled:f,flipped:B})]}),b&&u.jsx("div",{className:"sm:hidden mt-2 text-center",children:u.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Xt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:p,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:f,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Vt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Xt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const d=e.moveNumber-1,m=Math.floor(d/2)+1,x=d%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),f=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),p=t.useMemo(()=>h&&f?{moveNumber:e.moveNumber,san:e.move,piece:f,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,f,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(p&&c.setHoveredMove(p),f&&c.setHighlightedPiece(f))},[c,p,f]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:u.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),u.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[u.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:i.emoji}),u.jsx(o,{className:"w-4 h-4 text-white"}),u.jsx("span",{className:"font-semibold text-white",children:i.label}),u.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),u.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&u.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[u.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),u.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[u.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[u.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),u.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&u.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),u.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[u.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),u.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),u.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),u.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"Value:"}),u.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[u.jsx(w,{className:"w-2.5 h-2.5"}),u.jsx("span",{children:"Hover highlights board"})]}),u.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Rt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Zt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:T,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Ft=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,d]=t.useState(!1),[x,f]=t.useState(500),[p,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:T,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),d(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),d(!1),a(0);break;case"End":t.preventDefault(),d(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&d(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:p?u.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[u.jsx(S,{className:"w-3 h-3 text-primary"}),u.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),u.jsx(A,{className:"w-3 h-3"})]}):u.jsx(P,{children:u.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:u.jsx(I,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&u.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[u.jsx(H,{className:"w-3 h-3"}),"Key moments:"]})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Key Moments"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Rt[e],s=n.icon;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[u.jsx(s,{className:"w-3 h-3"}),u.jsx("span",{children:t})]})}),u.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:n.emoji}),u.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:u.jsx(_,{className:"w-3 h-3"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"font-semibold",children:"Game Phases"}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"All Moves"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Zt[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(G,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[u.jsx(s,{className:`w-3 h-3 ${n.color}`}),u.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),u.jsx(B,{className:"max-w-[240px] p-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[u.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),u.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),u.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),u.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),u.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return u.jsx("div",{className:"pointer-events-auto",children:u.jsx(Vt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),u.jsx(E,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{d(!1),a(e)},className:"h-8 w-8 p-0",children:u.jsx(U,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:u.jsx(O,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Previous Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),d(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?u.jsx(W,{className:"h-5 w-5"}):u.jsx(S,{className:"h-5 w-5 ml-0.5"})})}),u.jsx(B,{className:"max-w-[220px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:u.jsx(Y,{className:"h-4 w-4"})})}),u.jsx(B,{className:"max-w-[200px] p-3",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-semibold",children:"Next Move"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),u.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(R,{className:"h-3 w-3"}),L]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),u.jsx(Z,{align:"end",className:"bg-popover",children:M.map(e=>u.jsx(F,{onClick:()=>f(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&u.jsxs(X,{children:[u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsx(V,{asChild:!0,children:u.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[u.jsx(it,{className:"h-3 w-3"}),u.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),u.jsx(B,{children:u.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),u.jsxs(Z,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[u.jsx(J,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),u.jsx($,{}),re.capture.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),u.jsx("span",{children:"Captures"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),u.jsx("span",{children:"Checks"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),u.jsx("span",{children:"Castling"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&u.jsxs(Q,{children:[u.jsxs(ee,{className:"flex items-center gap-2",children:[u.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),u.jsx("span",{children:"Promotions"}),u.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),u.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),u.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&u.jsxs(u.Fragment,{children:[u.jsx($,{}),re.checkmate.map((e,t)=>u.jsxs(F,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[u.jsx(h,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-semibold",children:"Checkmate!"}),u.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),u.jsx(ne,{children:b&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[u.jsx(at,{className:"w-3 h-3"}),u.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),u.jsx(ne,{children:l&&u.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:u.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Jt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,d]=t.useState(!1),[f,p]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),d(!1),void p(!1);const t=setTimeout(()=>d(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),p(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return u.jsx(ne,{children:a&&u.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&u.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),u.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?u.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?u.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,u.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),u.jsxs("div",{className:"flex items-center justify-center gap-8",children:[u.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[u.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),u.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),u.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&f?"text-primary":"text-muted-foreground"),animate:w&&f?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),u.jsx(ne,{children:l&&u.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?u.jsx(C,{className:"h-6 w-6"}):v<0?u.jsx($e,{className:"h-6 w-6"}):u.jsx(ae,{className:"h-6 w-6"}),u.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),u.jsx(ne,{children:w&&f&&u.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[u.jsx(h,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&f&&u.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>u.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},$t=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=zt(),r=e&&0!==t?t<.5?ot:ct:lt;return u.jsxs(ie,{children:[u.jsx(oe,{asChild:!0,children:u.jsxs(G,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[u.jsx(r,{className:"h-4 w-4"}),!e&&u.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),u.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),u.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),u.jsx(ne,{children:e&&u.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),u.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),u.jsx(E,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),u.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),u.jsx("div",{className:"pt-2 border-t border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&u.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),u.jsx(ne,{mode:"wait",children:e?u.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:u.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):u.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),u.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),u.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&u.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs(G,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?u.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):u.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),u.jsx(B,{side:"bottom",children:u.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},en=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:f=null})=>{const p=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=fe(),B=t.useRef(null),[L,q]=t.useState(j),[S,A]=t.useState(!1),[P,I]=t.useState(""),[H,_]=t.useState(!1),[K,T]=t.useState(!1);se(f);const E=t.useMemo(()=>f?pe(f):null,[f]),U=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});I(e)}catch(e){}})()},[e]);const O=async e=>{if(e&&!v)return void _(!0);if(!B.current)return;A(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),setTimeout(()=>URL.revokeObjectURL(u),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(n){o.error("Download failed")}finally{A(!1)}};return u.jsxs(ge,{open:e,onOpenChange:n,children:[u.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(be,{children:[u.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[u.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),u.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),u.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[u.jsxs(G,{variant:L?"outline":"default",size:"sm",onClick:()=>U(!1),className:"gap-2 text-xs",children:[u.jsx(tt,{className:"h-3 w-3"}),"Light"]}),u.jsxs(G,{variant:L?"default":"outline",size:"sm",onClick:()=>U(!0),className:"gap-2 text-xs",children:[u.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),u.jsx("div",{className:"flex justify-center py-4",children:u.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[u.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return u.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),u.jsx(d,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&u.jsx("div",{className:"absolute inset-0",children:u.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),u.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:u.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[u.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[u.jsx("span",{children:c.white}),u.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),u.jsx("span",{children:c.black})]}),u.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),u.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",E&&u.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",E]})]})]})}),u.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),u.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[u.jsxs(G,{onClick:()=>O(!1),disabled:S,variant:"outline",className:"gap-2",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):u.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),u.jsxs(G,{onClick:()=>O(!0),disabled:S,className:"gap-2 btn-luxury",children:[S?u.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?u.jsx(Ne,{className:"h-4 w-4"}):u.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&u.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),u.jsx("div",{className:"flex justify-center",children:u.jsxs(G,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[u.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),u.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(G,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:u.jsx(Se,{className:"w-4 h-4"})}),n(),p("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[u.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),u.jsx(De,{className:"h-4 w-4 relative z-10"}),u.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),u.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),u.jsx(Be,{isOpen:H,onClose:()=>_(!1),onAuthRequired:()=>{_(!1),T(!0)},trigger:"download"}),u.jsx(Le,{isOpen:K,onClose:()=>T(!1)})]})},tn=rn;!function(){const e=rn,t=an();for(;;)try{if(601700===parseInt(e(324))/1+parseInt(e(244))/2+-parseInt(e(321))/3*(parseInt(e(313))/4)+-parseInt(e(339))/5*(parseInt(e(341))/6)+parseInt(e(242))/7+-parseInt(e(282))/8+-parseInt(e(271))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const nn=function(){const e=rn,t={UsjYb:function(e,t){return e+t},lZmAa:e(350)+'ctor("return this")( )',ZrRxu:function(e){return e()},HFRJf:e(337),ZZYZR:e(255),maXmg:function(e,t){return e<t},EARwr:e(297),wTNeW:e(333)};let n=!0;return function(e,s){const r=n?function(){const n=rn,r={veIVV:function(e,n){return t[rn(326)](e,n)},RZhVe:t[n(247)],YPSnF:function(e){return t.ZrRxu(e)},GsHSn:t[n(348)],fvuHt:n(310),vrHzd:t[n(265)],wMKDb:function(e,s){return t[n(294)](e,s)}};if(t[n(277)]===t[n(317)]){let e;try{const t=_0x144beb(r[n(354)](n(329)+n(314),r[n(331)])+");");e=r[n(269)](t)}catch(a){e=_0x1d9e5a}const t=e[n(312)]=e[n(312)]||{},s=[n(351),"warn",n(353),r[n(318)],r[n(273)],n(335),r[n(278)]];for(let a=0;r.wMKDb(a,s[n(240)]);a++){const e=_0x121286[n(263)+"r"][n(343)][n(347)](_0x50ec5a),r=s[a],i=t[r]||e;e[n(299)]=_0x28c90e.bind(_0x4724f6),e[n(248)]=i[n(248)][n(347)](i),t[r]=e}}else if(s){const t=s[n(308)](e,arguments);return s=null,t}}:function(){};return n=!1,r}}()(void 0,function(){const e=rn,t={};t.qDMya=e(325)+"+$";const n=t;return nn.toString()[e(291)](n[e(323)])[e(248)]()[e(263)+"r"](nn)[e(291)](n[e(323)])});nn();const sn=function(){let e=!0;return function(t,n){const s=e?function(){const e=rn;if(n){if(e(285)==e(285)){const e=n.apply(t,arguments);return n=null,e}_0x4c41c7["preventDef"+e(346)](),_0x12ad2b()}}:function(){};return e=!1,s}}();function rn(e,t){e-=240;const n=an();let s=n[e];if(void 0===rn.siGSfa){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};rn.DhwGOe=r,rn.NDaubu={},rn.siGSfa=!0}const a=e+n[0],i=rn.NDaubu[a];if(i)s=i;else{const e=function(e){this.RIABsT=e,this.FaLLel=[1,0,0],this.qCrEOW=function(){return"newState"},this.bwVThx="\\w+ *\\(\\) *{\\w+ *",this.ImuesI="['|\"].+['|\"];? *}"};e.prototype.vHhoxg=function(){const e=new RegExp(this.bwVThx+this.ImuesI).test(this.qCrEOW.toString())?--this.FaLLel[1]:--this.FaLLel[0];return this.sgKZID(e)},e.prototype.sgKZID=function(e){return Boolean(~e)?this.ffGeXQ(this.RIABsT):e},e.prototype.ffGeXQ=function(e){for(let t=0,n=this.FaLLel.length;t<n;t++)this.FaLLel.push(Math.round(Math.random())),n=this.FaLLel.length;return e(this.FaLLel[0])},new e(rn).vHhoxg(),s=rn.DhwGOe(s),rn.NDaubu[a]=s}return s}function an(){const e=["ndi0sxz6tNr3","BMn0Aw9UkcKG","ie09txv0zsWGuG","ugXHEs9qyxvZzq","D1rozvC","r3niu24","DgfYz2v0","purYyxCSievZyW","mZCXneDSuhrvyG","ue1vz1C","CurnEwe","mZm4mdm0revSA1PJ","kcGOlISPkYKRkq","vxnQwwi","Bxr1sxG","r28GDg8Gzw5Kia","CMv0DxjUicHMDq","A2v5","uLPOvMu","DxrZ","D01YruW","twLVuNm","DgfIBgu","EfrMsw8","zxjYB3i","zK1rwgu","mtbyqu1wwwO","qLnICLK","mtyWnJaYnNfkALzntG","B3zL","ChjVDg90ExbL","u291BMqGDw5TDq","ywn0Aw9U","yxvSDa","yMLUza","sezssMy","BMqGB24VB2zM","E30Uy29UC3rYDq","Bg9N","AxqGzNvSBhnJCG","Aw5MBW","DMvjvLy","BgvUz3rO","Axrouxy","oda3ntCXofvquhb3AG","ChjLDMvUDerLzG","mJi1mZKYmgDly0vuyq","BuzLAMC","tNbeqM4","BfPTqwe","Dg9tDhjPBMC","u291BMqGBxv0zq","CMH0D2C","A2v5zg93BG","vg9Nz2XLihnVDq","DeXPC3rLBMvY","ywrKrxzLBNrmAq","DhjHy2u","uvzVu0G","t2zMzxiGzhjHDW","BhnJCMvLBIbTBW","weXsq08","zsaOzhvYAw5Nia","icH5B3vYihr1CG","u2HVDYbRzxLIBW","y29UC3rYDwn0BW","DxbsrgK","wLPzwLi","zxnJyxbL","vg9Nz2XLl2v4Ca","qLLkzuu","wvbtBKy","yw5KigXLz2vUza","nZK5ntmZouTlrwT3wa","u3bHy2u","zNz1shq","vg9Nz2XLigz1Ba","CMvIt1i","C2HPzNrlzxK","rufsD3i","DNjiEMq","vNDnu3O","yxjKihnOB3j0yW","tejqCNy","mZy5nJiXnLrXwMfzCW","DeLwEeC","khnOB3CGywXSkq","BfPSEMS","DgvK","Bg9IyNKGlYbfEa","CgXHEsK","yxrLCW","u2HVCNrJDxrZoG","C2vHCMnO","BLzurMy","se9jyvC","BwfyBwC","tLDiwM8","sg5UvLC","BwP5s1u","pvjLC2LNBIWGra","x19WCM90B19F","qwHyq0i","sgvSCa","CMqGy29VCMrPBG","vg9Nz2XLigjVyq","uMv0DxjUihrVia","tMv4DcbTB3zL","D2fYBG","y3rVCIGICMv0Dq","yxbWBhK","puXVyMj5lca/pq","zxHJzxb0Aw9U","tKLYAMq","y29UC29Szq"];return(an=function(){return e})()}sn(void 0,function(){const e=rn,t={HnnVW:function(e,t){return e+t},mtuIx:function(e){return e()},tIVxG:e(351),rhtwg:e(335),NWHZo:e(255)};let n;try{const s=Function(t[e(296)](e(329)+"nction() "+(e(350)+e(307))+'rn this")( )',");"));n=t[e(327)](s)}catch(a){n=window}const s=n[e(312)]=n[e(312)]||{},r=[t[e(283)],e(306),e(353),e(337),"exception",t[e(250)],t[e(295)]];for(let i=0;i<r[e(240)];i++){const t=sn.constructor.prototype[e(347)](sn),n=r[i],a=s[n]||t;t[e(299)]=sn[e(347)](sn),t[e(248)]=a[e(248)][e(347)](a),s[n]=t}})();const on=()=>{const e=rn,t={duration:4e3};o[e(353)](e(290)+e(315)+e(298)+e(320)+e(309)+e(301),t)},cn={};cn[tn(330)]="M",cn[tn(345)]=tn(252)+tn(349);const ln={};ln[tn(330)]="R",ln[tn(345)]="Resign gam"+tn(260)+tn(288);const un={};un[tn(330)]="D",un[tn(345)]=tn(257)+tn(261)+"n)";const dn={};dn[tn(330)]="Esc",dn[tn(345)]=tn(304)+tn(287)+tn(352)+"een";const mn={};mn[tn(330)]="?",mn[tn(345)]=tn(262)+tn(280)+tn(332);const xn={};xn.key=tn(272),xn[tn(345)]=tn(316)+" timeline";const hn={};hn[tn(330)]="â†",hn[tn(345)]="Previous m"+tn(342);const fn={};fn[tn(330)]="â†’",fn[tn(345)]=tn(305);const pn={};pn[tn(330)]="Home",pn[tn(345)]="Go to start";const gn={};gn[tn(330)]="End",gn.action=tn(328)+tn(284);const vn={key:"F"};vn[tn(345)]=tn(274)+tn(258)+"de";const bn={key:"C"};bn[tn(345)]=tn(303)+tn(302)+tn(289);const yn={};yn[tn(330)]="L",yn[tn(345)]=tn(267)+tn(270);const wn=Tn;!function(){const e=Tn,t=_n();for(;;)try{if(439462===parseInt(e(545))/1+parseInt(e(542))/2+-parseInt(e(594))/3*(-parseInt(e(508))/4)+-parseInt(e(544))/5+parseInt(e(500))/6+parseInt(e(541))/7+parseInt(e(564))/8*(-parseInt(e(550))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const jn=function(){const e=Tn,t={};t[e(585)]=function(e,t){return e===t},t.EHmoy=e(613);const n=t;let s=!0;return function(t,r){const a=e,i={};i[a(507)]=function(e,t){return e===t};const o=i,c=s?function(){const e=a;if(r){if(n[e(585)]("wUZwS",n[e(539)])){const n=r[e(600)](t,arguments);return r=null,n}return _0x3d21fa(_0x3b93e4,4,-_0x3daf68,_0x30f0d9,o[e(507)](_0x233153[e(516)](),"w"))[e(575)]}}:function(){};return s=!1,c}}()(void 0,function(){const e=Tn,t={};t[e(591)]="(((.+)+)+)+$";const n=t;return jn.toString().search(n[e(591)])[e(624)]()[e(504)+"r"](jn)[e(537)](n[e(591)])});jn();const Cn=function(){const e=Tn,t={};t[e(499)]=e(492),t[e(557)]=function(e,t){return e===t},t[e(515)]=e(571);const n=t;let s=!0;return function(t,r){const a=e,i={BFmTx:function(e,t){return e+t}};i.WlZYF=a(610)+a(558)+a(510)+" )",i.dVewA=n[a(499)];const o=i;if(n.zMYTC(a(571),n[a(515)])){const e=s?function(){const e=a,n={pXWIM:function(e,t){return e(t)},eATYA:function(e,t){return o[Tn(597)](e,t)}};if(e(636)===e(554)){const t=_0x21effe[_0x3b8cd1][_0x522d4c];if(t){const s=_0x2c7d14[t.type]||0,r=n[e(620)](_0xb785b5,t.type);let a=0;if(r.length>0){a=r["w"===t[e(509)]?_0x1cb7c3:7-_0x29888f][_0x2a883f]}const i=n[e(573)](s,a);_0x2118ce+="w"===t[e(509)]?i:-i}}else if(r){if(o[e(495)]!==e(566)){const e=r.apply(t,arguments);return r=null,e}_0x33816c=_0x569c98(o.BFmTx(e(562)+"nction() "+o[e(524)],");"))()}}:function(){};return s=!1,e}{const e=_0x2c5c2c[a(600)](_0x2b82c4,arguments);return _0x5bb9ff=null,e}}}();Cn(void 0,function(){const e=Tn,t={HKRDz:"dUDCi",OCYIW:function(e,t){return e(t)},wLVzk:function(e,t){return e+t},XcypB:function(e,t){return e+t},iUtoI:e(502),UbCsq:function(e){return e()},WYwfM:e(493),dBqrC:e(586),bQiPI:"exception",iWNVY:e(535)},n=t[e(570)](function(){const n=e,s={};s[n(490)]=function(e,t){return e<t};const r=s;let a;try{t[n(559)]!==n(527)?a=t[n(632)](Function,t[n(556)](t[n(574)](n(562)+n(560),n(610)+'ctor("return this")( )'),");"))():_0xb0051e>_0x2d0cef&&(_0x4899f1=_0x32f007,_0x455eb8=_0x389ecf)}catch(i){n(547)!==t[n(592)]?a=window:r[n(490)](_0x192ea6,_0x56a487)&&(_0x47aa92=_0x525c10,_0xca12c3=_0x5a940f)}return a}),s=n[e(494)]=n[e(494)]||{},r=[t[e(530)],t[e(622)],e(522),e(599),t.bQiPI,e(533),t[e(582)]];for(let a=0;a<r.length;a++){const t=Cn[e(504)+"r"][e(639)].bind(Cn),n=r[a],i=s[n]||t;t[e(645)]=Cn.bind(Cn),t.toString=i.toString[e(521)](i),s[n]=t}})();const Nn={p:100,n:320,b:330,r:500,q:900,k:2e4},kn=Nn,Mn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],zn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],Dn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Bn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],Ln=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],qn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Sn(e){switch(e[Tn(608)+"e"]()){case"p":return Mn;case"n":return zn;case"b":return Dn;case"r":return Bn;case"q":return Ln;case"k":return qn;default:return[]}}function An(e){const t=Tn,n={HzfBR:function(e,t){return e+t},cwmpx:function(e,t){return e===t},bslGh:function(e,t){return e<t},gtwMb:function(e,t){return e!==t},kQgHJ:t(614),zFElZ:function(e,t){return e!==t},FSfzk:t(590),MZeSE:function(e,t){return e(t)},wqGXt:function(e,t){return e-t},uiqzb:function(e,t){return e+t},rmKjJ:function(e,t){return e*t}};if(e[t(506)+"e"]())return n[t(618)](e[t(516)](),"w")?-1/0:1/0;if(e[t(548)]()||e.isStalemate())return 0;let s=0;const r=e.board();for(let o=0;o<8;o++)for(let e=0;n[t(551)](e,8);e++)if(n[t(598)](n[t(621)],t(614)))_0x36aa44=_0x38e4b4,_0x88ad5e=_0x304111;else{const a=r[o][e];if(a){if(n[t(628)](t(590),n.FSfzk)){let e;try{e=_0x2c762a(IfMeJC.HzfBR(t(562)+"nction() ",t(610)+t(558)+t(510)+" )")+");")()}catch(i){e=_0x12b6cf}return e}{const r=kn[a[t(517)]]||0,i=n[t(567)](Sn,a[t(517)]);let c=0;if(i[t(588)]>0){c=i["w"===a.color?o:n.wqGXt(7,o)][e]}const l=n[t(546)](r,c);s+="w"===a[t(509)]?l:-l}}}const a=e[t(584)]()[t(588)];return s+=n.cwmpx(e[t(516)](),"w")?2*a:n[t(525)](-a,2),s}function Pn(e,t,n,s,r){const a=Tn,i={OdnNL:function(e,t){return e===t},FvItT:function(e,t,n,s,r,a){return e(t,n,s,r,a)},fbYzc:a(631),iHurW:"ylJNa",cAzwn:function(e,t){return e<=t},ezKcN:function(e,t){return e<t},pjaFO:function(e,t){return e!==t},xdqQr:function(e,t){return e<=t}};if(i[a(616)](t,0)||e[a(580)]())return{score:An(e),move:null};const o={};o[a(612)]=!0;const c=e[a(584)](o);if(c[a(555)]((e,t)=>{const n=a;let s=0,r=0;return e[n(536)]&&(s+=kn[e[n(536)]]||0),t[n(536)]&&(r+=kn[t.captured]||0),e[n(617)].includes("+")&&(s+=50),t[n(617)][n(611)]("+")&&(r+=50),r-s}),r){let r=-1/0,o=null;for(const u of c){e[a(575)](u);const c=i.FvItT(Pn,e,t-1,n,s,!1);if(e[a(630)](),c.score>r&&(i[a(616)](i.fbYzc,i.iHurW)?(_0x13c48f=_0x1d7d44[a(642)],_0x39fedb=_0x313121):(r=c[a(642)],o=u)),n=Math.max(n,c[a(642)]),i[a(529)](s,n))break}const l={};return l[a(642)]=r,l[a(575)]=o,l}{let r=1/0,o=null;for(const u of c){e[a(575)](u);const c=Pn(e,t-1,n,s,!0);if(e.undo(),i[a(643)](c[a(642)],r)){if(!i[a(540)]("qUMov","nrgsW"))return 0;r=c[a(642)],o=u}if(s=Math[a(633)](s,c.score),i[a(496)](s,n))break}const l={};return l.score=r,l[a(575)]=o,l}}function In(e){const t=Tn,n={};n[t(587)]="Stockfish "+t(607)+":",n[t(627)]=function(e,t){return e>t},n[t(601)]=function(e,t){return e<t},n[t(577)]=function(e,t){return e!==t},n.jpIGg=function(e,t){return e*t};const s=n,r={};r[t(612)]=!0;const a=e.moves(r);if(0===a[t(588)])return null;const i=a[t(595)](e=>e[t(536)]);return s[t(627)](i[t(588)],0)&&s[t(601)](Math.random(),.3)?s[t(577)]("UOIcX",t(565))?(_0x3c823f[t(599)](s[t(587)],_0x2f8251),_0x11f3fb(_0x469a3b)):i[Math.floor(Math[t(593)]()*i[t(588)])]:a[Math[t(629)](s.jpIGg(Math[t(593)](),a[t(588)]))]}function Hn(e){const t=Tn,n={LpZXq:function(e,t){return e===t}};return Pn(e,4,-1/0,1/0,n[t(568)](e[t(516)](),"w")).move}function _n(){const e=["DhvYBG","DhLWzq","q2X1yIbqBgf5zq","C3rVy2TMAxnO","sMLtrfC","yMLUza","Aw5MBW","FJmYmda","v2XAwuy","CM1lAKO","q1PjsLO","yNDSENe","BgfIzwW","y0f6D24","v1L3zK0","s0j6sNu","ExvID0q","DgfIBgu","z2zoC2q","DhjHy2u","y2fWDhvYzwq","C2vHCMnO","u3rVy2TMAxnOia","ruHTB3K","CgPHrK8","mti0mJKZnendvwjrDq","ndK0odq0rLn5refx","ywnRihrVigHHCG","mJy5mta2nu1IvejVsa","ode2nJeYs2zbzM9o","DwLXEMi","ExzrD0m","AxneCMf3","idqTCgX5ihnLyq","mtG5meLPDffMBW","yNnSr2G","DxfMCwW","vuvUDue","ALn0AKi","C29YDa","D0XwEMS","EK1zvem","y3rVCIGICMv0Dq","seTsrhO","BMn0Aw9UkcKG","CMvUzxnZ","CMv0DxjUicHMDq","FJGWma","mZCWmZjmAfHfqNq","vu9jy1G","rfDRDwi","tvPLu0u","thbAwhe","zKfQq0O","vwjdC3e","vwrKt0m","qwr2yw5JzwqGzq","zufuwue","wgn5Cei","Bw92zq","zwfZEq","zKLQyuO","AgfYza","BwvKAxvT","Axnhyw1Lt3zLCG","zw5NAw5Lug93zq","AvDovLK","AwnZigfUzcbTyq","Bw92zxm","rhjAEui","D2fYBG","t0r1sgO","BgvUz3rO","CMvK","uwDxq3u","r01iEe0","Avv0B0K","CMfUzg9T","mZiXAfnnquTx","zMLSDgvY","tM9Ov2O","qKzTvhG","z3r3twi","zxjYB3i","yxbWBhK","BwDjqwe","zgvZy3jPChrPBW","yw5HBhL6zvbVCW","AM1RuhO","zNjVBq","twfZDgvY","Bw92zsbLCNjVCG","Dg9mB3DLCKnHCW","tMzlv20","E30Uy29UC3rYDq","Aw5JBhvKzxm","DMvYyM9Zzq","D1vAD1m","vLrnCuS","Bw92zxrPBwu","t2rUtKW","C2fU","y3DTChG","BM90ihjLywr5la","CfHxsu0","A1fNseO","zejXCKm","C2XPy2u","Dg9tDhjPBMC","wgnRDNe","B2nJyxnPB25HBa","B0fnzfm","EKzfBfO","zMXVB3i","Dw5KBW","r0TWyMG","t0nzsvC","BwLU","C3rYzw5NDgG","uhLYtg0","ALHLvMi","yMvZDe1VDMu","AxrPB24","ChjVDg90ExbL","ignHChr1CMvZ","twfRzxmGCMfUza","C2nVCMu","zxPly04","AgnYrve","x19WCM90B19F","ChjVBw90Aw9U","B20GBw92zxmSia","vfrSqxi","CMf0Aw5N","BerIsNG","Bg9N","y29UC29Szq","zfzLD0e","EgrXuxi","CMnOigrLChrO","igzHBgXPBMCGyG","vxjADNC","odG2odyWs1rUBu5w","qMfZAwmGDgfJDa","vwTbwwy","v0vrBfC","y29UC3rYDwn0BW","zw5NAw5LlcbNCG","AxndAgvJA21HDa","rhDuCMS","mJa5ndHTufz1EuS","y29SB3i","CM4GDgHPCYiPka","B2rgwNe","wuzPsMe","zgvWDgG","reHgy2e","qNL1yui"];return(_n=function(){return e})()}function Gn(e,t){const n=Tn,s={CZIJZ:function(e,t){return e(t)},rzGPl:n(519)};switch(t){case"easy":return In(e);case n(579):return function(e){const t=Tn,n={uqfql:function(e,t){return e(t)},Xckvq:function(e,t){return e(t)},YFiJa:t(519),UEnuA:function(e,t){return e===t},dGbCe:function(e,t){return e===t},FeUpV:function(e,t){return e<t},BTiWg:function(e,t){return e<t},KBzJu:function(e,t){return e!==t},hcrEQ:t(635)},s={};s[t(612)]=!0;const r=e[t(584)](s);if(n[t(553)](r[t(588)],0))return null;let a=null,i=n.dGbCe(e[t(516)](),"w")?-1/0:1/0;for(const o of r){e[t(575)](o);const s=An(e);e.undo(),n[t(553)](e[t(516)](),"w")?s>i&&(i=s,a=o):n.FeUpV(s,i)&&(i=s,a=o)}if(n.BTiWg(Math[t(593)](),.2)){if(!n[t(531)](n[t(644)],t(635))){const s=r.sort((s,r)=>{const a=t;e.move(s);const i=An(e);e.undo(),e[a(575)](r);const o=n[a(552)](An,e);return e[a(630)](),"w"===e[a(516)]()?o-i:i-o}),a=s[t(623)](0,Math[t(633)](3,s[t(588)]));return a[Math[t(629)](Math.random()*a[t(588)])]}switch(_0x2a5195){case t(576):return n[t(552)](_0x5777d6,_0x322d1e);case t(579):return _0x4afba0(_0x2df4af);case t(578):return n[t(625)](_0x5742d7,_0x5898ba);case n[t(512)]:return _0x22b3eb(_0x2861d2);default:return _0x5c6e13(_0x4f70ba)}}return a}(e);case n(578):case s.rzGPl:return s[n(526)](Hn,e);default:return s[n(526)](In,e)}}const Kn={};function Tn(e,t){e-=488;const n=_n();let s=n[e];if(void 0===Tn.yuKYXG){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Tn.aaUdaQ=r,Tn.KQAcXI={},Tn.yuKYXG=!0}const a=e+n[0],i=Tn.KQAcXI[a];if(i)s=i;else{const e=function(e){this.dkcVrk=e,this.PSKWXJ=[1,0,0],this.fENoRa=function(){return"newState"},this.hAlwoh="\\w+ *\\(\\) *{\\w+ *",this.lsoOGQ="['|\"].+['|\"];? *}"};e.prototype.ILnLJa=function(){const e=new RegExp(this.hAlwoh+this.lsoOGQ).test(this.fENoRa.toString())?--this.PSKWXJ[1]:--this.PSKWXJ[0];return this.pcaNQQ(e)},e.prototype.pcaNQQ=function(e){return Boolean(~e)?this.fFaIUt(this.dkcVrk):e},e.prototype.fFaIUt=function(e){for(let t=0,n=this.PSKWXJ.length;t<n;t++)this.PSKWXJ.push(Math.round(Math.random())),n=this.PSKWXJ.length;return e(this.PSKWXJ[0])},new e(Tn).ILnLJa(),s=Tn.aaUdaQ(s),Tn.KQAcXI[a]=s}return s}Kn.id="easy",Kn[wn(528)]="Beginner",Kn.description=wn(641)+wn(489)+wn(626)+wn(640),Kn.rating=wn(563);const En={};En.id=wn(579),En[wn(528)]=wn(518)+"r",En[wn(602)+"n"]=wn(501)+wn(583)+"terial awa"+wn(561),En[wn(491)]="~1400";const Un={};Un.id=wn(578),Un[wn(528)]=wn(606),Un[wn(602)+"n"]=wn(572)+"valuation,"+wn(549)+wn(497),Un.rating="~2000";const On={};On.id=wn(519),On.label=wn(538)+"16",On[wn(602)+"n"]="Real NNUE "+wn(505)+"andmaster "+wn(634),On[wn(491)]=wn(523),On[wn(581)+wn(589)]=!0;const Wn=[Kn,En,Un,On];!function(){const e=Xn,t=Rn();for(;;)try{if(344834===-parseInt(e(386))/1*(-parseInt(e(366))/2)+-parseInt(e(431))/3*(-parseInt(e(424))/4)+-parseInt(e(388))/5*(parseInt(e(427))/6)+parseInt(e(446))/7+-parseInt(e(430))/8*(parseInt(e(407))/9)+parseInt(e(381))/10*(-parseInt(e(375))/11)+parseInt(e(401))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Xn(422)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Xn,t={};t[e(362)]="(((.+)+)+)+$";const n=t;return Yn[e(429)]()[e(373)](e(399)+"+$")[e(429)]()[e(382)+"r"](Yn)[e(373)](n[e(362)])});function Xn(e,t){e-=362;const n=Rn();let s=n[e];if(void 0===Xn.hWQpnd){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Xn.xjSHlV=r,Xn.zAZEsq={},Xn.hWQpnd=!0}const a=e+n[0],i=Xn.zAZEsq[a];if(i)s=i;else{const e=function(e){this.vIRrLj=e,this.mmEugW=[1,0,0],this.dtBwHu=function(){return"newState"},this.eMifcv="\\w+ *\\(\\) *{\\w+ *",this.BCHzJa="['|\"].+['|\"];? *}"};e.prototype.SlNUnW=function(){const e=new RegExp(this.eMifcv+this.BCHzJa).test(this.dtBwHu.toString())?--this.mmEugW[1]:--this.mmEugW[0];return this.lffzhW(e)},e.prototype.lffzhW=function(e){return Boolean(~e)?this.GFRZVa(this.vIRrLj):e},e.prototype.GFRZVa=function(e){for(let t=0,n=this.mmEugW.length;t<n;t++)this.mmEugW.push(Math.round(Math.random())),n=this.mmEugW.length;return e(this.mmEugW[0])},new e(Xn).SlNUnW(),s=Xn.xjSHlV(s),Xn.zAZEsq[a]=s}return s}Yn();const Vn=function(){const e=Xn,t={};t[e(376)]="nnASR";const n=t;let s=!0;return function(t,r){const a=e;if("BuOxv"!==n[a(376)]){const e=s?function(){if(r){const e=r[a(422)](t,arguments);return r=null,e}}:function(){};return s=!1,e}if(_0x4c37d9){const e=_0x44fdd0[a(422)](_0x315707,arguments);return _0x5acae8=null,e}}}();Vn(void 0,function(){const e=Xn,t={};t[e(434)]=function(e,t){return e+t},t.Firij=e(399)+"+$",t[e(440)]=e(418),t.bBZXu=e(377),t[e(432)]="trace",t[e(374)]=function(e,t){return e<t},t.ZhJyQ="BkHAc";const n=t,s=function(){const t=e;let s;try{s=Function(n[t(434)]("return (fu"+t(435)+(t(408)+t(420))+'rn this")( )',");"))()}catch(r){s=window}return s}(),r=s[e(395)]=s[e(395)]||{},a=[n.jLcjV,"warn",e(364),"error",e(378),n[e(421)],n[e(432)]];for(let i=0;n[e(374)](i,a[e(409)]);i++){if(e(394)!==n.ZhJyQ)return _0x382483.toString()[e(373)](n[e(406)])[e(429)]()[e(382)+"r"](_0x501545)[e(373)]("(((.+)+)+)+$");{const t=Vn[e(382)+"r"][e(414)][e(445)](Vn),n=a[i],s=r[n]||t;t[e(370)]=Vn[e(445)](Vn),t[e(429)]=s[e(429)][e(445)](s),r[n]=t}}})();function Rn(){const e=["mJuYotCYv1nJCKX6","AwDNtee","A05Jrfi","mtHqA1Dzz0C","zgXSsLK","Dg9tDhjPBMC","oerNA3nIDq","mtjPwgnqsfe","ELjeDLO","uKfuzvy","CMrvvg4","BMn0Aw9UkcKG","EMr6AK8","BhjWzvy","ywjZ","y2XPzw50wq","AKXJALy","rKL5EKy","B25uB3vJAevUza","uwf1sgi","C3rHCNry","yMLUza","mZC5ndyWovPgDMnABa","B09OvMu","z3HxBfO","AgfUzgXLCNm","Aw5MBW","Dg91y2HLCW","mJi3ohzIy09xva","vuTnEfO","B25nB3vZzu1VDG","y2XPzw50wa","x19WCM90B19F","y3vYCMvUDa","ExP6u2S","C2vHCMnO","y3PYugq","nZe2oty5zxjmEgXj","rhjowey","DgfIBgu","zxHJzxb0Aw9U","u3PKqMG","C3DPCgvpzMzZzq","otbNq2TZtwW","y29UC3rYDwn0BW","s1Ddsuy","we9JtKK","y3vYCMvUDfG","mtaWtwP0svHi","AxntD2LWAw5N","oty1ote1DfnAAvj3","EvPgyuC","zfbkEuu","ufPcyMm","B25uB3vJAe1VDG","svnJuxm","qMTiqwm","y29UC29Szq","zMHjwei","EeLXrNO","tNHnv0O","kcGOlISPkYKRkq","tfnXwMy","odmXnZq2nefhCKTHDq","vLvJENq","B25nB3vZzuXLyq","q0jLtfC","ywPssha","rMLYAwO","ode5nZGZrNf3Durf","E30Uy29UC3rYDq","BgvUz3rO","Cgr2u04","y3vYCMvUDfK","EgDkwxa","C3rHCNrz","ChjVDg90ExbL","s0Xorwi","Du9cDhm","zu53z2q","Bg9N","CKXOwu8","y3rVCIGICMv0Dq","yKjAwhu","yxbWBhK","txH0sMu"];return(Rn=function(){return e})()}const Zn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Te,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Te,description:"15 minutes"}],Fn=["bot","create","join"],Jn=()=>{var e,n,s,l,d,x,p,v,b,y,w;me();const[j]=Ae(),{user:k,isPremium:M}=r(),{haptics:L}=Ut(),[q,S]=t.useState("lobby"),[A,I]=t.useState(!1),[H,_]=t.useState(!1),[K,E]=t.useState("bot"),[U,O]=t.useState("human"),[W,Y]=t.useState("medium"),[X,V]=t.useState("blitz_5"),[R,Z]=t.useState("hotCold"),[F,J]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[ue,de]=t.useState([]),[xe,he]=t.useState("hotCold"),[fe,pe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=zt(),{playSound:ke}=vt(Ce,Ne),[Me,ze]=t.useState([]),[De,qe]=t.useState(!1),[Se,Te]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[ut,dt]=t.useState(1/0),mt=t.useCallback(e=>{const t=Fn.indexOf(K);let n;n="left"===e?Math.min(t+1,Fn.length-1):Math.max(t-1,0),n!==t&&(L.select(),E(Fn[n]))},[K,L]),{swipeOffset:xt,isSwiping:ht,handlers:pt}=((e={})=>{const n=Xn,s={rLhYO:function(e,t){return e(t)},uOBts:function(e,t){return e(t)},tUmoW:function(e,t){return e+t},QauHb:function(e,t){return e-t},PZBbc:n(423),xIqFz:n(390),iggLA:function(e,t){return e>t},FIyzF:function(e,t){return e>t},dllJY:function(e){return null==e?void 0:e()},ajRHp:function(e,t,n){return e(t,n)},KLNEb:function(e,t){return e===t},yzzSk:n(436),KWCIF:n(398),nmYQN:function(e,t,n){return e(t,n)},lrpeV:function(e){return e()},SzdBh:function(e,t){return e!==t},kNcDR:"BBxMB",ItmjS:n(396),IScQs:function(e,t){return e(t)},XOcNI:function(e,t,n){return e(t,n)},UKMxZ:function(e,t,n){return e(t,n)},VUczt:function(e,t,n){return e(t,n)},CBeLW:function(e,t,n){return e(t,n)},HHKpF:function(e,t,n){return e(t,n)},pdvSN:function(e,t,n){return e(t,n)},LSqZf:function(e,t,n){return e(t,n)},yZFaG:function(e,t,n){return e(t,n)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,u={x:0,y:0},[d,m]=s[n(393)](t.useState,u),[x,h]=t.useState(!1),f={};f[n(444)]=0,f[n(413)]=0,f[n(385)]=0,f[n(411)]=0,f.isSwiping=!1;const p=s[n(416)](t.useRef,f),g=s[n(384)](t.useCallback,(e,t)=>{const s=n,r={};r.startX=e,r[s(413)]=t,r.currentX=e,r[s(411)]=t,r.isSwiping=!0,p[s(371)]=r,h(!0)},[]),v=s.UKMxZ(t.useCallback,(e,t)=>{const r=n;if(!p[r(371)][r(387)])return;p[r(371)][r(385)]=e,p[r(371)][r(411)]=t;const a=e-p.current[r(444)],i=t-p[r(371)][r(413)],o={};o.x=a,o.y=i,s[r(419)](m,o)},[]),b=s[n(402)](t.useCallback,()=>{const e=n;if(!p[e(371)].isSwiping)return;const t=s[e(443)](p[e(371)][e(385)],p[e(371)].startX),a=p[e(371)][e(411)]-p[e(371)][e(413)],u=Math.abs(t),d=Math[e(438)](a);if(u>d&&u>r)if(t>0){if("NFXny"===s[e(391)]){let t;try{t=KrSKTh[e(416)](_0x55054b,KrSKTh.tUmoW("return (fu"+e(435)+(e(408)+e(420))+'rn this")( )',");"))()}catch(x){t=_0x1f430d}return t}null==o||o()}else s[e(397)]!=s[e(397)]?_0x3f5eba():null==i||i();else s[e(425)](d,u)&&s[e(441)](d,r)&&(s[e(441)](a,0)?s[e(428)](l):null==c||c());p[e(371)][e(387)]=!1,s[e(416)](h,!1);m({x:0,y:0})},[r,i,o,c,l]),y=s[n(404)](t.useCallback,e=>{const t=n,r=e.touches[0];s[t(405)](g,r.clientX,r.clientY)},[g]),w=s[n(367)](t.useCallback,e=>{const t=n;if("lPogs"===t(447)){if(_0x3a5890){const e=_0x16b19d[t(422)](_0x41348b,arguments);return _0x2359b0=null,e}}else{const n=e[t(365)][0];v(n[t(369)],n[t(439)])}},[v]),j=t.useCallback(()=>{b()},[b]),C=s.HHKpF(t.useCallback,e=>{const t=n;if(s[t(415)](s[t(372)],s[t(372)])){if(!a)return;s[t(405)](g,e[t(369)],e[t(439)])}else s.dllJY(_0x39ea08)},[a,g]),N=s[n(410)](t.useCallback,e=>{const t=n,r={eNwgd:function(e){return null==e?void 0:e()},RATeV:function(e){return null==e?void 0:e()}};if(s[t(383)]==s[t(383)]){if(!a)return;s.nmYQN(v,e.clientX,e.clientY)}else _0x3976d4>0?r[t(417)](_0x52fc77):r[t(433)](_0x6f9181)},[a,v]),k=s[n(400)](t.useCallback,()=>{a&&b()},[a,b]),M=s[n(389)](t.useCallback,()=>{const e=n;if(s[e(379)](e(412),s[e(426)])){if(!a)return;if(p[e(371)][e(387)])if("iikXa"===s.ItmjS){const t=_0x7ce81d[e(365)][0];_0xd7b063(t[e(369)],t[e(439)])}else b()}else{if(!_0x4c0986)return;s[e(437)](_0x5c1bc9)}},[a,b]),z={};z.onTouchStart=y,z[n(392)+"e"]=w,z[n(442)]=j,z.onMouseDown=C,z[n(368)+"e"]=N,z.onMouseUp=k,z[n(403)+"ve"]=M;const D={};return D[n(380)+"t"]=d,D[n(387)]=x,D[n(363)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Mt,resignGame:Bt,offerDraw:Lt,loadGame:qt,getAvailableMoves:St,movedSquares:At}=(()=>{const e=Dt,n={gdIAU:function(e,t){return e>=t},Vowmt:"checkmate",BtLOa:e(645),tbumV:function(e,t){return e(t)},dtEwz:"capture",XTalj:function(e,t){return e===t},CEtED:function(e,t){return e(t)},IZHOO:e(652),XjdbS:function(e,t){return e(t)},RpbIS:e(571),PIoPg:e(454),Hpnnq:"victory",zkjqO:"eKOCK",eJVkp:e(491),sPTPe:e(606)+"s",mAmXN:e(708)+e(554),XFhrj:e(614),rKftg:e(467),RfrUK:function(e,t){return e(t)},YCICC:function(e,t){return e(t)},Splts:"chess_moves",TgUfC:e(622),eQkFi:e(621),iSqqj:function(e,t){return e(t)},YoDqD:function(e,t){return e instanceof t},NUYak:e(592)+e(514),HSVKP:function(e,t){return e===t},HPvEf:e(617)+e(580)+e(669)+"e",WZlPS:function(e,t){return e(t)},ugjaX:e(691)+e(675)+e(628),oYiUK:e(540),NKqIc:e(592)+e(559)+"e",UaIIK:function(e,t){return e(t)},ilVnr:e(512)+"dy started",wIQUl:e(504)+e(552)+e(561),fknvT:e(458),iXhVI:function(e,t){return e(t)},VEqUt:e(602),wIrSk:e(613),OFuVZ:function(e,t){return e(t)},GSepB:"challenge_"+e(575),xPHOk:function(e,t){return e instanceof t},UuZfy:"Failed to "+e(585)+"de",FfBRf:function(e,t){return e(t)},EEJXr:e(617)+e(601)+e(634),CmoUI:"Failed to "+e(487),FXLTe:function(e,t){return e(t)},wMMNH:function(e,t){return e!==t},IyKWJ:e(539),lhBKP:function(e,t){return e(t)},iHEEq:e(626),StITF:function(e,t){return e===t},veXah:e(503),OhLMU:function(e,t){return e(t)},KDWZc:e(676),RkFED:e(460),QZCxD:e(439),yWkqR:function(e,t){return e+t},eKgiz:function(e,t){return e+t},XTcqs:function(e,t){return e||t},hUPIH:function(e,t){return e+t},zAdUc:function(e,t){return e===t},wPuUt:e(636),zeLvT:e(494),YnWfZ:function(e,t){return e===t},kTMxA:e(523),mIVFl:function(e,t){return e===t},mfbkX:e(683),RXheh:function(e,t){return e===t},ygskn:e(508),XqbYO:e(699)+":",YBlrZ:e(481)+"lo_rating",CVHVh:function(e,t,n,s){return e(t,n,s)},dNEUX:e(468),FGHjp:e(593),LxYIi:function(e,t){return e===t},qLlXW:e(592)+"update ELO"+e(520),SmXzq:function(e,t){return e||t},XQhUS:e(497),NQpsJ:"Draw offer sent (opp"+e(687)+e(457)+e(655)+e(608),xKSXP:e(644),lLgGv:function(e,t){return e===t},ZaCKp:function(e,t,n){return e(t,n)}},{user:s}=r(),[l,u]=t.useState(new a),[d,m]=n[e(658)](t.useState,null),[x,h]=t.useState(!1),[f,p]=n[e(658)](t.useState,null),[g,v]=n[e(548)](t.useState,new Set),{enabled:b,volume:y}=zt(),{playSound:w}=vt(b,y);t.useRef("");const j=d?d["whitePlaye"+e(703)]===(null==s?void 0:s.id)?"w":n[e(694)](d["blackPlaye"+e(703)],null==s?void 0:s.id)?"b":null:null,C=(null==d?void 0:d.status)===n.KDWZc&&l[e(557)]()===j;t.useEffect(()=>{const t=e,r={yyPUc:"completed",etNhF:function(e,t){return e!==t},oGYnv:function(e,t){return e===t},Kaobg:function(e,t){return e(t)},lOPJs:n[t(542)],JPFPk:n.Hpnnq,RTCFH:function(e,s){return n[t(474)](e,s)},gHyfb:function(e,t){return e(t)},LWdjV:function(e,t){return e(t)},LKBxr:function(e,t){return e!==t},guoTc:n.zkjqO};if(!(null==d?void 0:d.id))return;const o=i[t(455)](t(530)+d.id).on(t(708)+"hanges",{event:n[t(663)],schema:"public",table:n[t(532)],filter:t(670)+d.id},e=>{const n=t;if(n(493)===n(502)){const e=_0x116a15[n(536)](_0x4c68c1,arguments);return _0x111583=null,e}{const t=e.new;if(t[n(527)]===r.yyPUc&&r[n(476)](d[n(527)],n(460))&&(r[n(525)](t[n(507)],n(454))?r[n(587)](w,r.lOPJs):t.winner_id===(null==s?void 0:s.id)?r[n(587)](w,r[n(627)]):r[n(570)](w,n(523))),r[n(640)](m,e=>e?{...e,status:t.status,result:t[n(507)],pgn:t[n(641)],currentFen:t[n(519)+"n"],moveCount:t[n(604)],whiteTimeRemaining:t[n(563)+n(647)],blackTimeRemaining:t[n(632)+n(647)],winnerId:t[n(712)],blackPlayerId:t[n(438)+"er_id"],startedAt:t.started_at}:null),t.current_fen){const e=new a(t.current_fen);u(e)}}})[t(599)](),c=i[t(455)](t(624)+d.id).on(n[t(686)],{event:n[t(437)],schema:"public",table:t(518)+"s",filter:t(597)+"."+d.id},e=>{const r=t,a=e[r(436)],i=a[r(622)];if(i&&n[r(478)](i[r(451)],4)){const e=i[r(506)](2,4);v(t=>new Set([...t,e]))}if(a.player_id!==(null==s?void 0:s.id)){const e=a[r(465)];e.includes("#")?w(n[r(446)]):e.includes("+")?w(n.BtLOa):e[r(510)]("x")?n[r(474)](w,n[r(490)]):n[r(701)](e,r(503))||n[r(701)](e,r(524))?n.CEtED(w,n[r(568)]):n.XjdbS(w,n.RpbIS)}})[t(599)]();return()=>{const e=t;r.LKBxr(r[e(496)],"qCDmX")?(i[e(444)+e(488)](o),i.removeChannel(c)):_0x3155a2[e(507)]===r[e(565)]?_0x537e4c(r[e(565)]):_0x44684b[e(712)]===(null==_0x98f9a5?void 0:_0x98f9a5.id)?_0x5ce631("victory"):r[e(605)](_0x55c1dd,"defeat")}},[null==d?void 0:d.id,null==d?void 0:d[e(527)],null==s?void 0:s.id,w]);const N=n[e(610)](t.useCallback,async t=>{const s=e;h(!0),p(null);try{const{data:e,error:r}=await i[s(572)]("chess_games")[s(549)]("*").eq("id",t)[s(473)+"e"]();if(r)throw r;if(!e)throw new Error("Game not f"+s(690));const o={};o.id=e.id,o["whitePlaye"+s(703)]=e[s(618)+s(517)],o["blackPlaye"+s(703)]=e[s(438)+s(517)],o[s(527)]=e[s(527)],o[s(507)]=e[s(507)],o[s(641)]=e.pgn||"",o.currentFen=e.current_fen,o.moveCount=e[s(604)]||0,o[s(466)+"l"]=e.time_control,o[s(660)+s(611)]=e[s(563)+s(647)],o[s(579)+s(611)]=e["black_time"+s(647)],o.whitePalette=e[s(646)+s(545)],o[s(696)+"te"]=e["black_pale"+s(545)],o[s(453)+"ode"]=e[s(562)+s(575)],o[s(586)]=e[s(712)],o[s(528)]=e[s(650)],o.startedAt=e[s(515)],n[s(677)](m,o);const c=new a(e[s(519)+"n"]);n[s(639)](u,c);const l={ascending:!0},{data:d}=await i[s(572)](n[s(485)])[s(549)](n[s(555)]).eq(n[s(558)],t)[s(442)](s(584)+"r",l);if(d){const e=new Set;d.forEach(t=>{const r=s;if(n[r(672)]!=n[r(672)]){const e=_0x282d11[r(709)][r(700)];_0x1a5692[r(633)](r(591)+_0xfb69bf.white.newRating+" ("+(e>=0?"+":"")+e+")")}else t[r(622)]&&t[r(622)][r(451)]>=4&&e[r(529)](t[r(622)][r(506)](2,4))}),v(e)}}catch(r){n[s(548)](p,n[s(574)](r,Error)?r[s(547)]:n[s(501)])}finally{h(!1)}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(n[c(556)]("wJoZD",c(477))){if(_0x3882a0){const e=_0x28f693[c(536)](_0x1977f1,arguments);return _0x367a06=null,e}}else{if(!s)return o[c(692)](n.HPvEf),null;n[c(616)](h,!0),p(null);try{const e=Pt[t]||null,{data:l}=await i[c(695)](n[c(661)]),{data:u,error:d}=await i[c(572)](n.sPTPe)[c(607)]({white_player_id:s.id,status:n.oYiUK,time_control:t,white_time_remaining:e,black_time_remaining:e,white_palette:a,is_public:r,challenge_code:l}).select()[c(483)]();if(d)throw d;return o.success(r?c(553)+"ed! Waitin"+c(625)+c(638):c(550)+c(573)+l),await N(u.id),u.id}catch(l){if(c(623)==c(623)){const e=l instanceof Error?l[c(547)]:n[c(531)];return p(e),o[c(692)](e),null}_0x90bd5b[c(444)+c(488)](_0x115237),_0x35a9ba[c(444)+c(488)](_0x5dc212)}finally{h(!1)}}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e,c={aCRjn:function(e,t){return e>=t},uIXxY:function(e,t){return e(t)}};if(!s)return o[a(692)](a(617)+a(601)+a(634)),!1;h(!0),n[a(546)](p,null);try{const{data:e,error:c}=await i[a(572)](n.sPTPe).select("*").eq("id",t)[a(473)+"e"]();if(c)throw c;if(!e)throw new Error("Game not f"+a(690));if(e.status!==n[a(637)])throw new Error(n.ilVnr);if(e[a(618)+"er_id"]===s.id)throw new Error(n.wIQUl);const{error:l}=await i[a(572)](a(606)+"s")[a(577)]({black_player_id:s.id,black_palette:r,status:a(676),started_at:(new Date)[a(603)+"g"](),last_move_at:(new Date).toISOString()}).eq("id",t);if(l)throw l;return w(n.fknvT),o.success("Joined game! You are"+a(492)+a(440)),await n[a(541)](N,t),!0}catch(l){if(n[a(484)]!==n.wIrSk){const e=l instanceof Error?l.message:"Failed to "+a(487);return p(e),o[a(692)](e),!1}{const e=new _0x198e87;_0x221e41.forEach(t=>{const n=a;t[n(622)]&&c.aCRjn(t[n(622)][n(451)],4)&&e.add(t[n(622)][n(506)](2,4))}),c[a(462)](_0x337cf5,e)}}finally{h(!1)}},[s,N,w]),z=t.useCallback(async(t,r)=>{const a=e;if(!s)return o[a(692)](a(617)+"n in to jo"+a(634)),!1;h(!0),n[a(567)](p,null);try{const{data:e,error:s}=await i[a(572)](n[a(532)])[a(549)]("id").eq(n[a(648)],t.toUpperCase()).eq(a(527),a(540))[a(473)+"e"]();if(s)throw s;if(!e)throw new Error(a(448)+" expired c"+a(651)+a(628));return await M(e.id,r)}catch(c){const e=n[a(693)](c,Error)?c[a(547)]:n[a(495)];return p(e),o[a(692)](e),!1}finally{h(!1)}},[s,M]),D=t.useCallback(async(t,r,c)=>{const m=e;if(!d||!s||!C)return!1;try{if(n[m(461)](n[m(472)],m(459))){const e={};e.from=t,e.to=r,e[m(679)]=c;const x=l.move(e);if(!x)return n[m(668)](w,n[m(662)]),!1;l[m(594)+"e"]()?n[m(546)](w,n.Vowmt):l.isCheck()?n.UaIIK(w,m(645)):x[m(657)]?w(n[m(490)]):n[m(535)](x.san,n[m(537)])||n[m(556)](x[m(489)],m(524))?n[m(639)](w,n[m(568)]):n.iSqqj(w,n[m(631)]),u(new a(l[m(463)]())),n[m(564)](v,e=>new Set([...e,r]));const h=l.pgn(),f=l[m(463)]();let p=null,g=null,b=n[m(560)];if(l.isGameOver()&&(b=n.RkFED,l[m(594)+"e"]()?(p="w"===l[m(557)]()?m(497):n.QZCxD,g="w"===l[m(557)]()?d[m(667)+"rId"]:d[m(629)+m(703)]):p="draw"),await i.from(n[m(485)])[m(607)]({game_id:d.id,player_id:s.id,move_number:n[m(534)](d[m(643)],1),move_san:x.san,move_uci:n[m(673)](t,r)+n.XTcqs(c,""),fen_after:f}),await i[m(572)](n[m(532)])[m(577)]({pgn:h,current_fen:f,move_count:n[m(596)](d[m(643)],1),last_move_at:(new Date)[m(603)+"g"](),status:b,result:p,winner_id:g,completed_at:n.StITF(b,n.RkFED)?(new Date).toISOString():null}).eq("id",d.id),n[m(505)](b,"completed")&&p)if(n[m(449)]===n[m(598)])n[m(678)](_0xb9cac,!1);else if(await B(d.whitePlayerId,d["blackPlaye"+m(703)],p),n[m(653)](p,n[m(542)])?w(n.PIoPg):g===(null==s?void 0:s.id)?n[m(639)](w,"victory"):w(n.kTMxA),p===m(439))o[m(619)](n[m(615)](j,"w")?n.mfbkX:m(522)+"!");else if(n.RXheh(p,m(497))){if(!n.wMMNH(m(538),n.ygskn))return _0xc3e09b[m(692)](n[m(688)]),!1;o.success("b"===j?n[m(642)]:m(464)+"!")}else o[m(633)](n.RfrUK(ft,l));return!0}{const e=n[m(574)](_0x19226a,_0x367fe8)?_0x576e52[m(547)]:n[m(612)];return n[m(658)](_0x168c42,e),_0x347afb[m(692)](e),!1}}catch(x){if(!n[m(701)](m(581),m(705)))return!1;_0x41d988(!1)}},[l,d,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(t&&r&&a!==l(576))try{const{data:e}=await i[l(572)](l(468))[l(549)](n[l(664)]).in(l(593),[t,r]);if(!e||n[l(461)](e[l(451)],2))return;const u=e[l(582)](e=>e.user_id===t),d=e.find(e=>e[l(593)]===r);if(n[l(456)](!u,!d))return;const m=u[l(681)]||1200,x=d[l(681)]||1200,h=n[l(535)](a,n[l(542)])?n[l(542)]:a,f=n.CVHVh(c,m,x,h),p={};p.elo_rating=f.white.newRating;const g={};if(g[l(681)]=f.black.newRating,await Promise[l(656)]([i[l(572)](n[l(697)])[l(577)](p).eq(n[l(500)],t),i.from(n[l(697)])[l(577)](g).eq(l(593),r)]),n[l(544)](null==s?void 0:s.id,t)){const e=f[l(709)][l(700)];o[l(633)](l(591)+f[l(709)][l(665)]+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=f[l(590)][l(700)];o.info(l(591)+f[l(590)][l(665)]+" ("+(e>=0?"+":"")+e+")")}}catch(u){}},[s]),L=t.useCallback(async()=>{const t=e;if(n[t(706)](!d,!s)||!j)return;const r="w"===j?n[t(595)]:"white_wins",a="w"===j?d[t(667)+"rId"]:d[t(629)+"rId"];await i[t(572)](t(606)+"s").update({status:"completed",result:r,winner_id:a,completed_at:(new Date)[t(603)+"g"]()}).eq("id",d.id),await n[t(511)](B,d[t(629)+t(703)],d[t(667)+"rId"],r),o[t(633)](t(450)+"ed")},[d,s,j,B]),q=n.ZaCKp(t.useCallback,async()=>{const t=e;o[t(633)](n[t(482)]),d&&(await i[t(572)](n[t(532)])[t(577)]({status:"completed",result:t(454),completed_at:(new Date)[t(603)+"g"]()}).eq("id",d.id),await n[t(511)](B,d[t(629)+"rId"],d.blackPlayerId,n[t(542)]))},[d,B]),S=t.useCallback(t=>{const s=e,r={dBmgY:function(e,t){return n.RfrUK(e,t)}};if(!n.wMMNH(s(644),n[s(498)])){const e={};return e.square=t,e[s(447)]=!0,l.moves(e)[s(583)](e=>e.to)}r[s(445)](_0x2ab68b,!1)},[l]),A={};return A[e(441)]=l,A[e(630)]=d,A[e(521)]=C,A[e(566)]=j,A[e(479)]=x,A[e(692)]=f,A[e(707)]=D,A[e(685)]=k,A[e(684)]=M,A.joinByCode=z,A.resignGame=L,A.offerDraw=q,A[e(543)]=N,A[e(600)+"leMoves"]=S,A.movedSquares=g,A})(),It=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),de([]),le(null),je([]),S("lobby")};((e={})=>{const n=rn,s={nVTFf:n(340),fMQXe:function(e,t){return e instanceof t},NpDBn:n(256),XLRCO:n(249)+"d",HOIaW:n(344)+n(286),itNQv:function(e){return e()},MioRs:n(266),mFejg:function(e){return e()},BYJeE:function(e){return e()},rebOR:function(e){return e()},NIrjd:n(300),VwMSz:n(251),LBPrv:function(e){return e()},upRDi:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:u,enabled:d}=s[n(281)](zt),m=s[n(264)](t.useCallback,e=>{const t=n;if(s[t(292)]==s[t(292)]){if(s[t(338)](e[t(319)],HTMLInputElement)||e.target instanceof HTMLTextAreaElement||e[t(319)].isContentEditable){if(t(322)!==s[t(246)])return;if(_0x4db575){const e=_0x588f33[t(308)](_0x41647a,arguments);return _0x29e417=null,e}}const n=e[t(330)].toLowerCase();switch(n){case"m":u(),o[t(353)](d?s[t(259)]:s[t(293)],{duration:1500,icon:d?"ðŸ”‡":"ðŸ”Š"});break;case"r":c&&r&&(e["preventDef"+t(346)](),r());break;case"d":c&&l&&a&&(e[t(243)+"ault"](),s[t(241)](a));break;case s[t(334)]:i&&(e[t(243)+t(346)](),s[t(245)](i));break;case"?":case"/":(!e[t(276)]||"?"===n)&&(e[t(243)+t(346)](),s[t(268)](on))}}else _0x51e210[t(243)+t(346)](),_0x35fa5d()},[u,d,r,a,i,c,l]);s.upRDi(t.useEffect,()=>{const e=n;if(e(336)!==s[e(311)])return window[e(254)+"stener"](s[e(279)],m),()=>window["removeEven"+e(253)](e(251),m);_0x2b4ba5["preventDef"+e(346)](),s[e(275)](_0x45df7c)},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Bt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?Lt:void 0,onBackToLobby:"lobby"!==q?It:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&qt(e).then(()=>S("game"))},[j,qt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Te(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==q&&(S("game"),null===et&&tt(Se))},[null==bt?void 0:bt.status,q,Se,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Te(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const Ht=async()=>{if(!k)return void I(!0);if(!M)return void _(!0);const e=He.find(e=>e.id===R),t=(null==e?void 0:e.white)||{};await Nt(X,F,t)&&S("waiting")},_t=async e=>{if(!k)return void I(!0);if(!M)return void _(!0);const t=He.find(e=>e.id===R),n=(null==t?void 0:t.black)||{};await kt(e,n)&&S("game")},Gt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Se)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Se)-Math.abs((t.white_elo||1200)-Se)):[],Kt=()=>{var e;const t=new a;te(t),ae(new Set),de([]),le(null),he(R);const n=He.filter(e=>e.id!==R),s=n[Math.floor(Math.random()*n.length)];pe(s.id),S("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Wn.find(e=>e.id===W))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Tt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Et=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Tt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),L.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};de(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(ft(ee))),!0;oe(!0);const i=function(e){const t=Tn,n={};n[t(532)]=t(576),n[t(609)]=function(e,t){return e+t},n.NohWj=function(e,t){return e*t},n[t(514)]=function(e,t){return e*t},n[t(569)]=t(578),n.OtZQJ=function(e,t){return e*t};const s=n;switch(e){case s[t(532)]:return s[t(609)](300,s[t(596)](Math[t(593)](),500));case"medium":return 500+s[t(514)](Math[t(593)](),1e3);case s[t(569)]:return 800+s.OtZQJ(Math[t(593)](),1500);case t(519):return 100;default:return 500}}(W);await new Promise(e=>setTimeout(e,i));const c=Gn(ee,W);if(c){const e=Tt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};de(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(ft(ee))))}return oe(!1),!0}catch(s){return oe(!1),L.error(),!1}},[ee,ie,W,ke,L]),Ot=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Pe,{}),u.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[u.jsx("div",{className:"absolute right-0 top-0",children:u.jsx($t,{})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[u.jsx(f,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),u.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",u.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),u.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",u.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[u.jsx(N,{className:"h-3 w-3 text-primary"}),u.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),u.jsxs(ne,{mode:"wait",children:["lobby"===q&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[u.jsxs("div",{className:"sm:hidden",children:[u.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Fn.map(e=>u.jsx("button",{onClick:()=>{L.select(),E(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),u.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),u.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),u.jsxs(G,{onClick:Kt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(f,{className:"h-3 w-3"}),"Difficulty"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:Wn.map(e=>u.jsxs("button",{onClick:()=>Y(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(W===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[u.jsx("div",{children:e.label}),u.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[u.jsx(Ie,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:He.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>u.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(_e,{className:"h-5 w-5 text-amber-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),u.jsx(Ge,{to:"/openings",children:u.jsxs(G,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",u.jsx(Ke,{className:"h-3 w-3"})]})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>u.jsxs(Ge,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[u.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),u.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),u.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),u.jsxs(G,{onClick:()=>_(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[u.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Se).color} text-white font-display text-base sm:text-lg`,children:Se}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Se).name})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[u.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[u.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>u.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),u.jsxs(G,{onClick:async()=>{if(!k)return void I(!0);if(!M)return void _(!0);const e=Gt().filter(e=>e.white_player_id!==k.id);e.length>0?await _t(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await Ht())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[u.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Gt().length>0&&u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(f,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Zn.map(e=>u.jsxs("button",{onClick:()=>V(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(X===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),u.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),u.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[u.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:He.slice(0,8).map(e=>u.jsxs("button",{onClick:()=>Z(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[u.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>u.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),u.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[u.jsxs("button",{onClick:()=>J(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-primary bg-primary/10":"border-border/50"),children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),u.jsxs("button",{onClick:()=>J(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(F?"border-border/50":"border-primary bg-primary/10"),children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),u.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),u.jsxs(G,{onClick:Ht,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&u.jsx(Oe,{className:"h-4 w-4"}),"Create Game",u.jsx(We,{className:"h-4 w-4"})]})]}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ye,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),u.jsx(G,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void I(!0);if(!M)return void _(!0);const e=He.find(e=>e.id===R),t=(null==e?void 0:e.black)||{};await Mt($.trim(),t)&&S("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),u.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?u.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?u.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Se)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Xe(Se,n):null;return u.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[u.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Zn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&u.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&u.jsx(P,{children:u.jsxs(z,{children:[u.jsx(D,{asChild:!0,children:u.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[u.jsxs("span",{className:"text-green-500",children:["+",a.win]}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),u.jsx("span",{className:"text-muted-foreground",children:"/"}),u.jsx("span",{className:"text-red-500",children:a.loss})]})}),u.jsxs(B,{side:"left",className:"space-y-1",children:[u.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),u.jsxs("span",{children:["+",a.win," â†’ ",Se+a.win]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),u.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Se+a.draw]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),u.jsxs("span",{children:[a.loss," â†’ ",Se+a.loss]})]})]})]})}),u.jsx(G,{size:"sm",onClick:()=>_t(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&u.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:u.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[u.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:u.jsx(f,{className:"w-full h-full text-primary"})}),u.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!F&&u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),u.jsx(G,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:u.jsx(Ve,{className:"h-4 w-4"})})]})]}),u.jsx(G,{variant:"outline",onClick:()=>{S("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&bt&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&u.jsxs(u.Fragment,{children:[u.jsxs(G,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[u.jsx(rt,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),u.jsxs(G,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||He[0].white,blackPalette:bt.blackPalette||He[0].black,movedSquares:At,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Je,{whitePalette:bt.whitePalette||He[0].white,blackPalette:bt.blackPalette||He[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Je,{whitePalette:bt.whitePalette||He[0].white,blackPalette:bt.blackPalette||He[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&u.jsx(Jt,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(G,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(G,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(Ue,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&u.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&u.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"text-center sm:text-left",children:[u.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[u.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),u.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Wn.find(e=>e.id===W))?void 0:e.label," Bot (",null==(n=Wn.find(e=>e.id===W))?void 0:n.rating,")"]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[u.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:ue.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&u.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[u.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]}),u.jsxs(Re,{children:[u.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[u.jsx(Yt,{fen:ee.fen(),onMove:Et,getAvailableMoves:Ot,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=He.find(e=>e.id===xe))?void 0:s.white)||He[0].white,blackPalette:(null==(l=He.find(e=>e.id===fe))?void 0:l.black)||He[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:ue,showPieces:be}),ge&&u.jsx("div",{className:"hidden lg:block",children:u.jsx(Je,{whitePalette:(null==(d=He.find(e=>e.id===xe))?void 0:d.white)||He[0].white,blackPalette:(null==(x=He.find(e=>e.id===fe))?void 0:x.black)||He[0].black,moveHistory:ue,title:"Live Legend"})})]}),ge&&u.jsx("div",{className:"lg:hidden",children:u.jsx(Je,{whitePalette:(null==(p=He.find(e=>e.id===xe))?void 0:p.white)||He[0].white,blackPalette:(null==(v=He.find(e=>e.id===fe))?void 0:v.black)||He[0].black,moveHistory:ue,compact:!0,title:"Legend"})})]}),u.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[u.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),u.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&ue.length>0&&u.jsx(Ft,{totalMoves:ue.length,moves:ee.history(),moveHistory:ue,currentMove:ut===1/0?ue.length:ut,onMoveChange:dt,compact:!0})]}),ce&&u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[u.jsx(G,{onClick:It,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),u.jsxs(G,{variant:"outline",onClick:Kt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[u.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&ue.length>0&&u.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[u.jsx(Ze,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),u.jsx(Fe,{}),u.jsx(Le,{isOpen:A,onClose:()=>I(!1)}),u.jsx(Be,{isOpen:H,onClose:()=>_(!1),trigger:"general"}),u.jsx(en,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?ue:we,whitePalette:"bot-game"===q?(null==(b=He.find(e=>e.id===xe))?void 0:b.white)||He[0].white:(null==bt?void 0:bt.whitePalette)||He[0].white,blackPalette:"bot-game"===q?(null==(y=He.find(e=>e.id===fe))?void 0:y.black)||He[0].black:(null==bt?void 0:bt.blackPalette)||He[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=Wn.find(e=>e.id===W))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===q?ue.length:we.length}})]})};export{Jn as default};
