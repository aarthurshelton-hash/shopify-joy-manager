import{aJ as e,r as t,bu as n,bv as s,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as h,q as x,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as q,bF as A,bG as L,b6 as S,ae as P,bH as H,ah as I,bI as E,B as G,bJ as K,bK as T,bL as Y,bM as W,bN as _,bO as U,bP as O,bQ as R,bR as J,bS as F,bT as X,bU as Z,bV as V,bW as Q,bX as $,bY as ee,bZ as te,aU as ne,b_ as se,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as he,c3 as xe,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as qe,c8 as Ae,aM as Le,c9 as Se,H as Pe,P as He,ca as Ie,b3 as Ee,bs as Ge,be as Ke,cb as Te,aP as Ye,cc as We,d as _e,b2 as Ue,a9 as Oe,cd as Re,ce as Je,cf as Fe,al as Xe,au as Ze}from"./index-CESOpT9D.js";import{L as Ve}from"./LiveColorLegend-8Qu-zYfQ.js";import{T as Qe}from"./trending-down-IQizapwe.js";import $e from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as nt}from"./sun-CX-yg7f5.js";const st=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=mt,t=ht();for(;;)try{if(689848===parseInt(e(412))/1*(-parseInt(e(423))/2)+-parseInt(e(379))/3*(-parseInt(e(350))/4)+parseInt(e(360))/5+parseInt(e(400))/6*(-parseInt(e(406))/7)+parseInt(e(396))/8*(parseInt(e(372))/9)+-parseInt(e(387))/10+-parseInt(e(382))/11*(-parseInt(e(388))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=mt,t={};t.AMdYz=e(405)+"+$";const n=t;return dt[e(384)]().search("(((.+)+)+)+$")[e(384)]()[e(410)+"r"](dt)[e(415)](n[e(411)])});dt();const ut=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[mt(422)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function mt(e,t){e-=349;const n=ht();let s=n[e];if(void 0===mt.LsWAso){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};mt.cRSESw=r,mt.XJYbQj={},mt.LsWAso=!0}const a=e+n[0],i=mt.XJYbQj[a];if(i)s=i;else{const e=function(e){this.KUpPEr=e,this.yMmWIg=[1,0,0],this.NAEOfD=function(){return"newState"},this.DgxteS="\\w+ *\\(\\) *{\\w+ *",this.kAhYuq="['|\"].+['|\"];? *}"};e.prototype.XVcyEs=function(){const e=new RegExp(this.DgxteS+this.kAhYuq).test(this.NAEOfD.toString())?--this.yMmWIg[1]:--this.yMmWIg[0];return this.FxouHu(e)},e.prototype.FxouHu=function(e){return Boolean(~e)?this.IPWgXr(this.KUpPEr):e},e.prototype.IPWgXr=function(e){for(let t=0,n=this.yMmWIg.length;t<n;t++)this.yMmWIg.push(Math.round(Math.random())),n=this.yMmWIg.length;return e(this.yMmWIg[0])},new e(mt).XVcyEs(),s=mt.cRSESw(s),mt.XJYbQj[a]=s}return s}function ht(){const e=["mJHcCMnVEfy","s0ffEwK","x3j1Bgu","CMv0DxjUicHMDq","y29UC3rYDwn0BW","qu1KwxO","mti2ndu3vwjlq25H","qKHJz1C","v05iEuu","C2vHCMnO","DhjHy2u","C3vMzMLJAwvUDa","C3bSAxq","ntaTtw92zsbsDq","ENLUBKK","CMvWzxrPDgLVBG","yxbWBhK","mMLmt29kCG","sw5ZDwzMAwnPzq","Dw5RBM93BG","CM4GDgHPCYiPka","u3rHBgvTyxrLiq","DgfIBgu","ie5VigXLz2fSia","nJHLCfzZEhu","ig1HDgvYAwfSlG","Bg9N","t2D0r2e","vgHYzwvMB2XKia","ChjVDg90ExbL","CMvLzM9SzcbYzq","EKnyBhq","BgvUz3rO","zMvU","mJG4mdu3nuLXAhv5DG","Aw5MBW","y29UC29Szq","zxHJzxb0Aw9U","zMLMDhLFBw92zq","z2jSBwm","yMLUza","BNqGtwf0zxjPyq","DMuGCNvSzs4","BNrFBwf0zxjPyq","BwvZC2fNzq","uxDNBNa","nJiWotKZn3DrEgXhAW","AhzYy1i","rhjHDW","AwvUDe1HDgvYAq","zxjYB3i","C2HVCNrnzxnZyq","zfjLCgv0AxrPBW","mtq2mJeXBeH1zNn5","qxfsteC","zwnIC0i","mZn6Cu9KEfC","x19WCM90B19F","Dg9tDhjPBMC","r2fTzsbKCMf3BG","D2fYBG","mteXnJC0nZbzrKP5vhK","mta2nJq3nMPJCvvqsG","tNfiEgq","tLPqBuq","AxntDgfSzw1HDa","CMvHC29U","Aw5ZDwzMAwnPzq","AxneCMf3","BMn0Aw9UkcKG","oe9WCxfNDq","Bw92zxmGyxzHAq","uMvWzxrPDgLVBG","y3rVCIGICMv0Dq","nJqYmZa2yNfis2vs","AxnjBNn1zMzPyW","Cgv0AxrPB24U","DgHYzwvMB2XKxW","rhjHDYbIEsb0Aa","kcGOlISPkYKRkq"];return(ht=function(){return e})()}function xt(e){const t=mt;return function(e){const t=mt,n={};n[t(414)]="stalemate",n[t(390)]=t(427),n[t(381)]=t(403)+t(421),n[t(371)]=t(404)+t(356)+t(402),n[t(413)]=t(424)+t(367)+"l",n.Ujgxj=function(e,t){return e>=t},n[t(365)]="fifty_move"+t(408),n[t(353)]=t(425),n[t(373)]=t(374);const s=n;if(e[t(391)+"e"]()){const e={};return e[t(392)]=s.WNHyE,e.message="Stalemate!"+t(349)+t(397)+"lable.",e[t(377)+"ge"]=s[t(390)],e}if(e["isThreefol"+t(378)+"n"]()){const e={};return e[t(392)]=s[t(381)],e[t(370)]=s[t(371)],e[t(377)+"ge"]=t(354)+t(398),e}if(e[t(401)+t(375)+"al"]()){const e={};return e.reason=t(393)+t(369)+"l",e[t(370)]="Draw by in"+t(417)+t(351),e[t(377)+"ge"]=s[t(413)],e}const r=e[t(359)](),a=parseInt(r[t(418)](" ")[4],10);if(s.Ujgxj(a,100)){const e={};return e[t(392)]=s.gblmc,e[t(370)]=t(404)+"e fifty-mo"+t(368),e[t(377)+"ge"]=t(419)+"le",e}const i={};return i[t(392)]=s[t(353)],i[t(370)]=t(385)+"!",i[t(377)+"ge"]=s[t(373)],i}(e)[t(370)]}ut(void 0,function(){const e=mt,t={NqHxd:e(419)+"le",DGuPm:function(e,t){return e(t)},AqRLG:function(e,t){return e+t},NOOve:function(e,t){return e===t},zCXlt:e(407),zynnI:e(361),yoeMP:e(416)};let n;try{n=t.DGuPm(Function,t[e(380)](e(409)+e(395),"{}.constru"+e(399)+e(426)+" )")+");")()}catch(a){if(t.NOOve("NVKBs",t[e(357)])){const n={};return n[e(392)]=e(364)+e(408),n[e(370)]=e(404)+"e fifty-move rule.",n[e(377)+"ge"]=t[e(389)],n}n=window}const s=n[e(362)]=n[e(362)]||{},r=[e(352),e(386),t[e(420)],e(376),e(363),e(428),t.yoeMP];for(let i=0;i<r[e(358)];i++){const t=ut[e(410)+"r"][e(355)][e(366)](ut),n=r[i],a=s[n]||t;t[e(383)]=ut[e(366)](ut),t[e(384)]=a[e(384)][e(366)](a),s[n]=t}})(),function(){const e=gt,t=bt();for(;;)try{if(954798===parseInt(e(420))/1+parseInt(e(352))/2+parseInt(e(351))/3+-parseInt(e(423))/4*(-parseInt(e(382))/5)+-parseInt(e(380))/6*(-parseInt(e(406))/7)+-parseInt(e(413))/8+-parseInt(e(407))/9)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const pt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=gt,t={};t[e(355)]="(((.+)+)+)+$";const n=t;return pt[e(373)]()[e(379)](e(428)+"+$").toString()[e(368)+"r"](pt)[e(379)](n[e(355)])});pt();const ft=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[gt(374)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function gt(e,t){e-=350;const n=bt();let s=n[e];if(void 0===gt.YxRvij){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};gt.xKbryd=r,gt.egqxlG={},gt.YxRvij=!0}const a=e+n[0],i=gt.egqxlG[a];if(i)s=i;else{const e=function(e){this.MtpcAr=e,this.DenEmK=[1,0,0],this.EAvFQV=function(){return"newState"},this.jKqGgh="\\w+ *\\(\\) *{\\w+ *",this.LmirkF="['|\"].+['|\"];? *}"};e.prototype.ZCnqAn=function(){const e=new RegExp(this.jKqGgh+this.LmirkF).test(this.EAvFQV.toString())?--this.DenEmK[1]:--this.DenEmK[0];return this.QhlqLm(e)},e.prototype.QhlqLm=function(e){return Boolean(~e)?this.LymoWf(this.MtpcAr):e},e.prototype.LymoWf=function(e){for(let t=0,n=this.DenEmK.length;t<n;t++)this.DenEmK.push(Math.round(Math.random())),n=this.DenEmK.length;return e(this.DenEmK[0])},new e(gt).ZCnqAn(),s=gt.xKbryd(s),gt.egqxlG[a]=s}return s}ft(void 0,function(){const e=gt,t={sgBxu:function(e,t){return e(t)},QnVqA:"return (fu"+e(360),NoVQu:"{}.constru"+e(408)+e(388)+" )",klpLn:function(e){return e()},mQqxc:e(446),fTbaJ:"info",wNuoE:e(400),mbSxe:e(427)};let n;try{const s=t[e(358)](Function,t.QnVqA+t[e(432)]+");");n=t[e(385)](s)}catch(a){n=window}const s=n[e(409)]=n[e(409)]||{},r=[t[e(436)],e(361),t[e(447)],e(393),t[e(357)],t[e(422)],e(392)];for(let i=0;i<r[e(378)];i++){const t=ft[e(368)+"r"][e(431)][e(425)](ft),n=r[i],a=s[n]||t;t[e(430)]=ft[e(425)](ft),t[e(373)]=a.toString[e(425)](a),s[n]=t}})();const vt=(e=!0,n=.5)=>{const s=gt,r={gYvWi:function(e){return e()},ABIwd:function(e,t){return e-t},KrnVI:function(e,t){return e+t},seWyN:function(e,t){return e+t},AjWtG:function(e,t){return e-t},rbFJz:"move",sWonH:function(e,t,n,s,r,a){return e(t,n,s,r,a)},DrTJG:function(e,t,n,s,r,a){return e(t,n,s,r,a)},RZnoq:s(403),aKRJM:function(e,t,n){return e(t,n)},DqbSx:"triangle",EQmcP:function(e,t,n,s,r,a){return e(t,n,s,r,a)},tOJel:s(370),fJdXp:function(e,t,n){return e(t,n)},EQGpj:function(e,t,n){return e(t,n)},nfHQx:"victory",QqQtO:s(443),XrUqC:function(e,t,n){return e(t,n)},HOyYE:function(e,t,n){return e(t,n)},onNqH:s(445),jrUkv:function(e,t){return e(t)},yknoh:function(e,t,n){return e(t,n)}},a={};a[s(404)]=null,a[s(362)]=null;const i=r[s(354)](t.useRef,a),o=r[s(369)](t.useCallback,()=>{const e=s;if(!i[e(398)].context)try{const t=new(window.AudioContext||window[e(391)+e(367)]),s=t.createGain();s[e(424)](t[e(437)+"n"]),s.gain[e(439)]=n;const r={};r[e(404)]=t,r[e(362)]=s,i.current=r}catch(t){}},[n]);t.useEffect(()=>{const e=s;i[e(398)][e(362)]&&(i.current[e(362)][e(390)][e(439)]=n)},[n]);const c=t.useCallback((t,n,a=s(443),c=.01,l=.1,d)=>{const u=s;if(!e)return;r.gYvWi(o);const{context:m,gainNode:h}=i[u(398)];if(!m||!h)return;const x=m[u(435)+u(394)](),p=m[u(444)]();x[u(416)]=a,x[u(401)]["setValueAt"+u(381)](t,m.currentTime),d&&x[u(401)]["exponentia"+u(405)+u(375)](d,m[u(365)+"e"]+n),p.gain[u(371)+"Time"](0,m[u(365)+"e"]),p[u(390)][u(417)+u(402)+u(438)](1,m[u(365)+"e"]+c),p[u(390)][u(363)+u(405)+"ueAtTime"](.01,r[u(353)](r.KrnVI(m.currentTime,n),l)),p[u(390)][u(417)+"ToValueAtT"+u(438)](0,m[u(365)+"e"]+n),x.connect(p),p[u(424)](h),x[u(440)](m.currentTime),x[u(418)](r.seWyN(m.currentTime,n))},[e,o]),l=r[s(397)](t.useCallback,(t,n=1e3)=>{const a=s;if(!e)return;o();const{context:c,gainNode:l}=i[a(398)];if(!c||!l)return;const d=c[a(377)]*t,u=c[a(396)+"er"](1,d,c.sampleRate),m=u[a(421)+"Data"](0);for(let e=0;e<d;e++)m[e]=r[a(366)](2*Math.random(),1);const h=c[a(396)+a(426)]();h.buffer=u;const x=c.createBiquadFilter();x[a(416)]=a(411),x[a(401)][a(439)]=n;const p=c[a(444)]();p.gain[a(371)+a(381)](.3,c[a(365)+"e"]),p[a(390)][a(363)+a(405)+a(375)](.01,r[a(441)](c.currentTime,t)),h[a(424)](x),x[a(424)](p),p[a(424)](l),h.start(c[a(365)+"e"]),h[a(418)](c[a(365)+"e"]+t)},[e,o]),d=t.useCallback(t=>{const n=s;if(e)switch(t){case r[n(419)]:r[n(442)](c,800,.08,"sine",.005,.05),r[n(433)](c,400,.06,n(359),.005,.04);break;case"capture":l(.12,2e3),c(300,.1,r[n(387)],.005,.08),c(150,.15,"sine",.01,.1);break;case n(434):c(600,.06,n(443),.005,.04),r[n(383)](setTimeout,()=>c(700,.06,n(443),.005,.04),80);break;case"check":r[n(433)](c,880,.15,r[n(412)],.01,.1),setTimeout(()=>c(1100,.12,"triangle",.01,.08),120);break;case"checkmate":r[n(350)](c,880,.2,"sine",.01,.15),r.aKRJM(setTimeout,()=>c(660,.2,n(443),.01,.15),150),r[n(383)](setTimeout,()=>c(440,.3,n(443),.01,.2),300),setTimeout(()=>c(330,.4,n(443),.01,.3),500);break;case r[n(410)]:r[n(350)](c,523,.12,n(443),.01,.08),setTimeout(()=>c(659,.12,n(443),.01,.08),100),r[n(386)](setTimeout,()=>c(784,.2,"sine",.01,.15),200);break;case"gameEnd":r.EQmcP(c,440,.15,n(359),.01,.1),r[n(397)](setTimeout,()=>c(349,.25,n(359),.01,.2),150);break;case r[n(356)]:c(523,.1,r.QqQtO,.01,.08),r[n(369)](setTimeout,()=>c(659,.1,n(443),.01,.08),100),r[n(395)](setTimeout,()=>c(784,.1,n(443),.01,.08),200),r[n(383)](setTimeout,()=>c(1047,.3,n(443),.01,.25),300);break;case n(415):c(392,.2,n(443),.02,.15),r[n(397)](setTimeout,()=>c(349,.2,n(443),.02,.15),200),r[n(397)](setTimeout,()=>c(330,.3,n(443),.02,.25),400),setTimeout(()=>c(262,.4,n(443),.02,.35),650);break;case n(372):c(440,.15,r[n(364)],.01,.1),setTimeout(()=>c(440,.15,n(443),.01,.1),180),setTimeout(()=>c(523,.2,n(443),.01,.15),360);break;case r.onNqH:c(200,.1,n(403),.005,.08),r.DrTJG(c,150,.08,n(429),.005,.06)}},[e,c,l]);r.yknoh(t.useEffect,()=>()=>{const e=gt;i[e(398)][e(404)]&&("TQuxu"!==e(414)?_0x569a05[e(398)][e(362)]&&(_0x578832[e(398)][e(362)][e(390)][e(439)]=_0x8305ef):i[e(398)][e(404)][e(384)]())},[]);const u={};return u[s(376)]=d,u[s(399)]=o,u};function bt(){const e=["y3jLyxrLr2fPBG","AwXSzwDHBa","Bg9N","zLrIyuO","rvfTy1a","mZu2nZqYmgTtvNvnyq","mZa5mZG4nNPHr2nWEa","qujjD2q","ANjvA3y","CvfZzM4","BMziuxG","D051B0u","C2DcEhu","DhjPyw5NBgu","BMn0Aw9UkcKG","D2fYBG","z2fPBK5Vzgu","zxHWB25LBNrPyq","uxfrDe8","y3vYCMvUDfrPBq","qwPxDeC","B0nVBNrLEhq","y29UC3rYDwn0BW","whjvCum","z2fTzvn0yxj0","C2v0vMfSDwvbDa","zhjHDW","Dg9tDhjPBMC","yxbWBhK","DwvbDfrPBwu","CgXHEvnVDw5K","C2fTCgXLuMf0zq","BgvUz3rO","C2vHCMnO","mtm3mtbeBwTkwum","vgLTzq","nZe2nZuYmfn3r0zNAG","yuTssK0","y2XVC2u","A2XWtg4","zKPKwha","uLPUB3e","CM4GDgHPCYiPka","v2vIief1zgLVia","z2fPBG","D2vIA2L0qxvKAq","DhjHy2u","zxjYB3i","BgXHDg9Y","se95wuu","y3jLyxrLqNvMzG","rvfhCgO","y3vYCMvUDa","Aw5PDef1zgLV","zxHJzxb0Aw9U","zNjLCxvLBMn5","vg9wywX1zuf0va","C3f1yxjL","y29UDgv4Da","BfjHBxbuB1zHBa","mZG5owXry1jxBG","mZG1oduXnZHYENniBNG","y3rVCIGICMv0Dq","y29UC29Szq","De9kzwW","Bg93CgfZCW","rhfIu3G","nZGYnJu2mhHIz09Iqq","vff1Ehu","zgvMzwf0","DhLWzq","BgLUzwfYuMfTCa","C3rVCa","CMjgsNO","nZC4mdi4vgTUzvjJ","z2v0q2HHBM5LBa","BwjtEgu","nhfNsKTJDa","y29UBMvJDa","yMLUza","zxjtB3vYy2u","DgfIBgu","kcGOlISPkYKRkq","C2f3Dg9VDgG","x19WCM90B19F","ChjVDg90ExbL","tM9wuxu","rhjusKC","y2fZDgXL","y3jLyxrLt3nJAq","BvfXEgm","zgvZDgLUyxrPBW","Aw1L","DMfSDwu","C3rHCNq","s3jUvKK","C1DVBKG","C2LUzq"];return(bt=function(){return e})()}const yt=Nt;!function(){const e=Nt,t=Ct();for(;;)try{if(322363===-parseInt(e(302))/1+-parseInt(e(290))/2*(-parseInt(e(289))/3)+parseInt(e(288))/4+-parseInt(e(304))/5+-parseInt(e(301))/6*(parseInt(e(296))/7)+parseInt(e(306))/8+parseInt(e(293))/9*(-parseInt(e(322))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const wt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nt(313)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Nt,t={};t[e(317)]="(((.+)+)+)+$";const n=t;return wt[e(307)]()[e(303)](n[e(317)]).toString().constructor(wt)[e(303)](n.LKSjf)});wt();const jt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Nt(313)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function Ct(){const e=["y29UC29Szq","zMzOEuq","nNfpDuzJAa","oti2mZbJzw1wA0O","C2vHCMnO","mZm2odG1z09Uywzc","y2HLC3mTC291BG","mZaYodaWB01itxD2","Dg9tDhjPBMC","zxjYB3i","AMjtzva","ChjVDg90ExbL","tMXSshy","z01dqNi","yxbWBhK","D2fYBG","ru5LExO","zc1Zzxr0Aw5NCW","teTtAMy","q21OEvu","x19WCM90B19F","DhjHy2u","Be5csuW","mteWAMrmz0nK","zw5HyMXLza","BMn0Aw9UkcKG","yMLUza","E30Uy29UC3rYDq","DgfIBgu","Bg9N","vKnUEwi","rLbNwhu","zxHJzxb0Aw9U","C3Hyy1C","mJqZnJCWoezYC1bOzW","mJfYq0zjvLa","ntq2mZrRtMLfqwm","CMv0DxjUicHMDq","BxrZqxu","mta1mZa5tufLCxPV","uwvbrge","y3rVCIGICMv0Dq","mtu5mde1nvftELf1sa","Aev6Bgi","BMfTzq"];return(Ct=function(){return e})()}function Nt(e,t){e-=279;const n=Ct();let s=n[e];if(void 0===Nt.oKMVJR){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Nt.yADItt=r,Nt.gykQqE={},Nt.oKMVJR=!0}const a=e+n[0],i=Nt.gykQqE[a];if(i)s=i;else{const e=function(e){this.YciRml=e,this.ztbjcg=[1,0,0],this.GFipMC=function(){return"newState"},this.oXMeza="\\w+ *\\(\\) *{\\w+ *",this.rpCTdS="['|\"].+['|\"];? *}"};e.prototype.Gylvjz=function(){const e=new RegExp(this.oXMeza+this.rpCTdS).test(this.GFipMC.toString())?--this.ztbjcg[1]:--this.ztbjcg[0];return this.HsKAgM(e)},e.prototype.HsKAgM=function(e){return Boolean(~e)?this.JASLKm(this.YciRml):e},e.prototype.JASLKm=function(e){for(let t=0,n=this.ztbjcg.length;t<n;t++)this.ztbjcg.push(Math.round(Math.random())),n=this.ztbjcg.length;return e(this.ztbjcg[0])},new e(Nt).Gylvjz(),s=Nt.yADItt(s),Nt.gykQqE[a]=s}return s}jt(void 0,function(){const e=Nt,t={jbSeP:function(e,t){return e+t},ENeyz:e(291)+e(279),NllHv:e(321),hEzlb:e(285),ffhyD:function(e){return e()},DRVrt:e(283),mtsAu:e(308),dxXaa:e(286),gIfXU:e(282),gMCBr:function(e,t){return e<t},zRlxl:function(e,t){return e!==t},QeADa:e(284),CmhyU:e(287)},n=t[e(300)](function(){const n=e;let s;try{if(t[n(311)]===t[n(297)]){let e;try{e=_0x351a5b(t[n(309)](t[n(315)]+(n(281)+n(295)+'rn this")( )'),");"))()}catch(r){e=_0x368316}return e}s=Function(n(291)+n(279)+(n(281)+n(295)+'rn this")( ));'))()}catch(a){s=window}return s}),s=n[e(299)]=n[e(299)]||{},r=[t.DRVrt,e(314),"info",t[e(292)],t.dxXaa,t.gIfXU,e(320)];for(let a=0;t[e(312)](a,r.length);a++){if(!t.zRlxl(t[e(294)],t[e(318)])){const t=_0x135fa3?function(){if(_0x183570){const t=_0x29ba9a[e(313)](_0x2af67e,arguments);return _0x466cd5=null,t}}:function(){};return _0x431804=!1,t}{const t=jt.constructor[e(310)][e(280)](jt),n=r[a],i=s[n]||t;t[e(319)]=jt.bind(jt),t[e(307)]=i[e(307)][e(280)](i),s[n]=t}}})();const kt={};kt[yt(298)]=yt(305)+yt(316);const Mt=n()(s(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e[yt(323)]}))}),kt)),zt=qt;!function(){const e=qt,t=St();for(;;)try{if(551673===-parseInt(e(141))/1*(-parseInt(e(251))/2)+-parseInt(e(205))/3*(parseInt(e(384))/4)+-parseInt(e(121))/5*(-parseInt(e(198))/6)+parseInt(e(179))/7+parseInt(e(368))/8*(parseInt(e(390))/9)+parseInt(e(301))/10*(-parseInt(e(305))/11)+-parseInt(e(321))/12*(-parseInt(e(361))/13))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const Dt=function(){const e=qt,t={};t[e(303)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e,i={YyJiE:function(e,t){return n[qt(303)](e,t)},CTKMN:a(398)};if("wbYov"!==a(349)){const e=s?function(){const e=a;if(r){if(!i[e(153)](e(398),i[e(272)])){const e=r.apply(t,arguments);return r=null,e}_0xbfb913(e(243))}}:function(){};return s=!1,e}_0x2da36d(a(127))}}()(void 0,function(){const e=qt;return Dt[e(190)]()[e(308)](e(152)+"+$")[e(190)]()[e(130)+"r"](Dt).search(e(152)+"+$")});Dt();const Bt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[qt(262)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();function qt(e,t){e-=119;const n=St();let s=n[e];if(void 0===qt.nPwveF){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};qt.ykCEpl=r,qt.sOxmOp={},qt.nPwveF=!0}const a=e+n[0],i=qt.sOxmOp[a];if(i)s=i;else{const e=function(e){this.LxFeck=e,this.aybssQ=[1,0,0],this.wOocFF=function(){return"newState"},this.HfpmWQ="\\w+ *\\(\\) *{\\w+ *",this.poRYoJ="['|\"].+['|\"];? *}"};e.prototype.EZJsff=function(){const e=new RegExp(this.HfpmWQ+this.poRYoJ).test(this.wOocFF.toString())?--this.aybssQ[1]:--this.aybssQ[0];return this.gTCHKu(e)},e.prototype.gTCHKu=function(e){return Boolean(~e)?this.jWqzbp(this.LxFeck):e},e.prototype.jWqzbp=function(e){for(let t=0,n=this.aybssQ.length;t<n;t++)this.aybssQ.push(Math.round(Math.random())),n=this.aybssQ.length;return e(this.aybssQ[0])},new e(qt).EZJsff(),s=qt.ykCEpl(s),qt.sOxmOp[a]=s}return s}Bt(void 0,function(){const e=qt,t={aFswH:function(e,t){return e(t)},LGvUE:function(e,t){return e+t},GoVVt:"return (function() ",WtQgE:"eUCeV",TMAzV:"warn",gwnPi:e(213),AJiiA:e(203)},n=function(){const n=e;let s;try{s=t.aFswH(Function,t[n(353)](t.GoVVt+"{}.constru"+n(283)+n(374)+" )",");"))()}catch(r){if(t[n(344)]!=t[n(344)]){const e=new _0x10cc20;_0x237d7c.forEach(t=>{const s=n;t.move_uci&&t[s(367)][s(387)]>=4&&e.add(t[s(367)][s(143)](2,4))}),_0x41620f(e)}else s=window}return s}(),s=n.console=n.console||{},r=[e(369),t[e(252)],e(158),e(342),e(279),t.gwnPi,t.AJiiA];for(let a=0;a<r[e(387)];a++){const t=Bt.constructor.prototype[e(159)](Bt),n=r[a],i=s[n]||t;t[e(196)]=Bt[e(159)](Bt),t.toString=i[e(190)][e(159)](i),s[n]=t}})();const At={};At[zt(142)]=60,At[zt(310)]=300,At[zt(388)]=900,At[zt(338)]=0;const Lt=At;function St(){const e=["CM4GDgHPCYiPka","BIbPBIb0BYbQBW","D2fPDgLUzW","y2HHBgXLBMDLqW","zKLgCxm","B2zMzxjeCMf3","vuLMEKi","CYbcBgfJAY4","r1bYEum","ywrK","nhjuthbIrq","zNjVBq","D2HPDgvFCgXHEq","BgvUz3rO","CMfWAwrFmtu","Bw92zxm","nZi1ndb4yxf5rKW","yMXHy2TFD2LUCW","wfHQENu","z2fTzv9Pza","yMXHy2TFDgLTzq","zwXVx3jHDgLUzW","C3rHCNrLzef0","wu5AAe4","qvHMtvu","BIb0AgLZihzLCG","CeTsELK","y29Kzq","tKHZv1m","wxLstwm","C3vIC2nYAwjL","B2rL","seP2Evi","BwvZC2fNzq","mJu1wuL2svjc","yMXHy2TFCgfSzq","u1besvy","C3vJy2vZCW","BMnVA04","rvPgshi","y2fWDhvYzq","C2LVBIK","rMfPBgvKihrVia","y29UC3rYDwn0BW","C2vSzwn0","y3rwC2m","zxjFAwq","y3vYCMvUDf9Mzq","BIbPBIb0BYbJCG","Aw4GysbNyw1L","D2LUBMvYswq","yvvoAMS","BhLkvvm","rhjHDYbVzMzLCG","mJC1mdz5qKL0qMq","yNvSBgv0xZe","C3vIC3rYAw5N","BwjQBNm","uMf0Aw5NoIa","CgDU","tM96qKy","D2HPDgvqBgf5zq","sePjENq","DwzwC3G","Bg9FCMf0Aw5N","kcGOlISPkYKRkq","wxLkAuu","x3jLBwfPBMLUzW","C3rHDhvZ","AxnFChvIBgLJ","yMXHy2S","Aw5MBW","yMLUza","C0HXswO","u1z1yNq","DLnsu2u","zMLvs3y","CgXHEwvYx2LK","CMvTB3zLq2HHBG","yxnJzw5KAw5N","s1bIzuK","tY1p","z0HZs0y","B3vuq2e","zM9YrwfJAa","igv4CgLYzwqGyW","ihbSyxLPBMCGyq","zwngrgy","A2fRvhC","z2vUzxjHDgvFyW","B25LBNqGyxv0BW","v0jHC1m","mte1mtmWngLODwjjDG","ywHstLu","rwPkCKy","r2fTzsbHBhjLyq","tKjkAMi","D2HPDgu","A1rgCNu","Bwf5yMvtAw5NBa","sLDVsvu","yMzUCgO","y2fWDhvYzwq","Dg9tDhjPBMC","y29TCgXLDgvK","DhrL","wxLuEhy","zNP1D2i","AxndAgvJAW","x19WCM90B19F","zMvbz04","nZmXmtbpv2jWvwS","Aw5Zzxj0","sw52ywXPzcbVCG","ChjVDg90ExbL","zMLUza","DhjHy2u","y3vYCMvUDezLBG","mJG5ntmZm3bHCuvgCW","yLLLuLm","y2HHBMDL","zhjHDW","y2HLC3nFBw92zq","wvrJzgC","AxnnEvr1CM4","AM9PBKDHBwu","DgfIBgu","CKLK","zwqHifDHAxrPBG","r2fTzsbJCMvHDa","BwfW","q2HHBgXLBMDLia","AM9PBIbIEsbJBW","swPABeu","wLb0rfm","D2L5tui","t09kCwi","s1fWq0K","yMXHy2TqBgf5zq","yxfVDw4","ugXLyxnLihnPzW","txzmvgW","v2HPDguGD2LUCW","y3jLyxrLr2fTzq","CMvZAwDUr2fTzq","B3vUza","CNbJ","zND4uvm","DgLTzv9JB250CG","tY1plu8","z2v0qxzHAwXHyG","DxnLCL9PzcWGzq","Aw5JBhvKzxm","C3f1yxjL","sK5vs2y","zMLrr0W","DMLJDg9YEq","su5trvju","Cg9ZDgDYzxnFyW","AxvVwfm","y1HxAxi","sK9rs2i","D2HPDgvFD2LUCW","BIb5B3vYig93BG","nff4EgnwwG","ve1bELy","qvnfvxm","Dg9ju09tDhjPBG","DMXkAMq","AM9PBIbNyw1L","zseGww91igfYzq","vKXlv1K","q2fUBM90igPVAq","DxnLCL9Pza","AxndAgvJA21HDa","yxbWBhK","ChjVBw90Aw9U","thHrD0u","yMXHy2TFCgXHEq","CMvZDwX0","BMv3","z2fTzvn0yxrL","qMXHy2SGD2LUCW","y2HHBgXLBMDLxW","AxnmB2fKAw5N","q1rltu4","wgXQs3u","BeXhz2i","zMvU","D1PUsK4","ihnLBNqGkg9WCa","zw1HAw5PBMC","zxHJzxb0Aw9U","BMvS","D2LUBMvYx2LK","re5rse0","y3rVCIGICMv0Dq","Axnhyw1Lt3zLCG","C2fU","v1forei","DgLTzunVBNrYBW","yNbJtxK","ChjVzMLSzxm","qMXXAfO","zgvMzwf0","y2HLC3nFz2fTzq","AgfUz2vZ","zYbMB3iGB3bWBW","Bw92zq","y3jLyxrLigDHBq","ChvIBgLJ","AgDryKy","ihjHDgLUz3m6","y3jsEvi","mte2otq3mejiAvzyBW","v2zeB2O","Afj5ywu","ywn0AxzL","mJjdy0ruruu","r2fTzsbUB3qGzG","DhvYBG","C2vHCMnO","qxLRv0m","yMXPDhPFnq","vvbeqvrf","ELnmqwm","D2HPDgvFCgfSzq","D2HPDgvFDgLTzq","BM51CwG","wwP0Bha","twDzswK","y2HLy2S","z2fTzs0","CMDqD08","mtjuAej6CLq","yMXHy2TuAw1LuG","DxbKyxrL","C3rHCNrLzf9HDa","rg9bA1C","ug9bDgy","ww91ihjLC2LNBG","D2HPDgvqywXLDa","DMvYyM9Zzq","ww91ihDVBIe","EwHfthO","ywvqEgS","lwfJy2vWDhmGAq","AKTHzMO","C252wxq","AM5qy1C","tw92zsbLCNjVCG","Dw50Aw1Lza","wwDsugi","Awq9zxeU","wgf5qu0","zxjYB3i","yKvht3u","v3rrz0u","BwfRzu1VDMu","B2L6AKO","y2HHBM5LBa","Bg9HzeDHBwu","sw5UDMW","vgv3CNC","Bw92zunVDw50","BgvnB3zLCW","teD2vuu","wuTdzMG","CNzsDhe","t1PAAvm","igDHBwu","AwXSzwDHBa","Bw92zv9JB3vUDa","vfzzCeC","odu3ody4n2PbB2TcrG","B3LQtKu","BNbAugm","z2fTzv9Pzd1LCq","BMvUDc4UlG","AgfSBgvUz2vFyW","Bw92zv91y2K","mJq4rgLfAMrx","Bg9N","Dg9vChbLCKnHCW","z1LLzfK","Bw92zv9Zyw4","BMv3uMf0Aw5N"];return(St=function(){return e})()}function Pt(e,t){e-=310;const n=Et();let s=n[e];if(void 0===Pt.JPIppg){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Pt.ChQrZf=r,Pt.TlicHA={},Pt.JPIppg=!0}const a=e+n[0],i=Pt.TlicHA[a];if(i)s=i;else{const e=function(e){this.mIGgjL=e,this.PlGdxb=[1,0,0],this.hNuCZG=function(){return"newState"},this.wgWSFI="\\w+ *\\(\\) *{\\w+ *",this.hReLPK="['|\"].+['|\"];? *}"};e.prototype.hiDHWX=function(){const e=new RegExp(this.wgWSFI+this.hReLPK).test(this.hNuCZG.toString())?--this.PlGdxb[1]:--this.PlGdxb[0];return this.uFtEKa(e)},e.prototype.uFtEKa=function(e){return Boolean(~e)?this.HPAdoT(this.mIGgjL):e},e.prototype.HPAdoT=function(e){for(let t=0,n=this.PlGdxb.length;t<n;t++)this.PlGdxb.push(Math.round(Math.random())),n=this.PlGdxb.length;return e(this.PlGdxb[0])},new e(Pt).hiDHWX(),s=Pt.ChQrZf(s),Pt.TlicHA[a]=s}return s}const Ht=Pt;!function(){const e=Pt,t=Et();for(;;)try{if(662146===parseInt(e(312))/1*(parseInt(e(343))/2)+-parseInt(e(336))/3+-parseInt(e(350))/4+-parseInt(e(355))/5+-parseInt(e(317))/6+parseInt(e(326))/7+parseInt(e(335))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const It=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Pt(321)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}()(void 0,function(){const e=Pt,t={};t[e(351)]=e(359)+"+$";const n=t;return It.toString()[e(329)](n[e(351)]).toString().constructor(It)[e(329)](e(359)+"+$")});function Et(){const e=["zgjHy2SGzMfPBa","y3rVCIGICMv0Dq","Bg9N","z3zvvwS","DhjHy2u","mtGWmtG2nev1A213Ba","wfP5zwC","AgvHDNK","AhvXAeu","zxjYB3i","mJK4ndeWnuzpENDTBW","u0zKqwu","Aw5MBW","AgfWDgLJCW","kcGOlISPkYKRkq","sgfWDgLJigzLzq","BMn0Aw9UkcKG","mJmZz1vbEvLi","BgvUz3rO","yLbjrKq","Dw5KzwzPBMvK","BNHICvq","mJC0mJu0mgvQvLzHBa","EKPSshq","DMLICMf0zq","vK1nAwe","yxbWBhK","whzNB2e","yMLUza","weXHChK","zxHJzxb0Aw9U","ndyWmtKXmKLADKzXra","AxntDxbWB3j0zq","zwLjA1O","C2vHCMnO","AuvZteW","BgLNAhq","C3vJy2vZCW","v0HrvK4","rvn2y3C","mtmWntm2mJrvt2Dcr2K","mZuYnte3mxjisgvwsq","D2fYBG","Dg9tDhjPBMC","y29UC3rYDwn0BW","zwq6","BwvKAxvT","CM4GDgHPCYiPka","otaZneTQu0TQAG","DgfIBgu"];return(Et=function(){return e})()}It();const Gt=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Pt(321)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();Gt(void 0,function(){const e=Pt,t={zJlHt:function(e,t){return e(t)},WHQVN:"{}.constru"+e(346)+e(342)+" )",ESvcw:function(e){return e()},gvUUk:e(347),fgdbo:e(344)};let n;try{const s=t[e(318)](Function,"return (fu"+e(311)+t[e(333)]+");");n=t[e(334)](s)}catch(a){n=window}const s=n.console=n.console||{},r=[t[e(348)],e(337),e(357),"error",e(325),t.fgdbo,e(349)];for(let i=0;i<r[e(313)];i++){const t=Gt[e(339)+"r"].prototype.bind(Gt),n=r[i],a=s[n]||t;t.__proto__=Gt[e(323)](Gt),t.toString=a[e(338)][e(323)](a),s[n]=t}})();const Kt={};Kt[Ht(331)]=10,Kt[Ht(341)]=25,Kt[Ht(352)]=50,Kt[Ht(332)]=[10,50,20],Kt[Ht(354)]=[50,30,50,30,50],Kt.selection=5;const Tt=Kt,Yt=()=>{const e=Ht,n={VMMia:function(e,t){return e===t},eiIkZ:"YXCsW",huqhE:e(310)+e(345)+e(340),XLapy:function(e,t){return e!==t},Xvgoa:e(314),PNpuu:function(e,t){return e in t},iEsLL:function(e,t,n){return e(t,n)},SFdAe:function(e,t,n){return e(t,n)}},s=typeof navigator!==e(315)&&n.PNpuu(e(319),navigator),r=t.useCallback((t="light")=>{const r=e;if(n[r(320)](n[r(328)],"ADYYU"))return _0x245c50[r(338)]()[r(329)](r(359)+"+$").toString()[r(339)+"r"](_0x781cf6)[r(329)](r(359)+"+$");if(!s)return!1;try{const e=Tt[t];return navigator[r(319)](e)}catch(a){return!1}},[s]),a={select:n[e(330)](t.useCallback,()=>r("selection"),[r]),move:n[e(330)](t.useCallback,()=>r(e(331)),[r]),capture:n[e(330)](t.useCallback,()=>r(e(341)),[r]),check:n[e(330)](t.useCallback,()=>r(e(352)),[r]),victory:n.iEsLL(t.useCallback,()=>r(e(332)),[r]),error:t.useCallback(()=>r("error"),[r]),castle:n.iEsLL(t.useCallback,()=>!!s&&navigator[e(319)]([15,40,15]),[s]),gameStart:n[e(356)](t.useCallback,()=>{const t=e;return n[t(324)](n[t(322)],t(316))?!!s&&navigator[t(319)]([10,30,10,30,20]):(_0x2841c0[t(337)](t(310)+t(345)+"ed:",_0x294ae1),!1)},[s])},i={};return i[e(327)+"d"]=s,i.vibrate=r,i[e(358)]=a,i},Wt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},_t=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ut=({fen:e,onMove:n,getAvailableMoves:s,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:h=!1,onMoveResult:x,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Yt();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const n of e)if(/\d/.test(n))for(let e=0;e<parseInt(n);e++)t.push(null);else t.push(n);return t}))(e),[e]),B="b"===a,q=t.useMemo(()=>{const e=new Map;for(const t of g){const n=e.get(t.square)||[];n.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(n.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,n))}return e},[g]),A=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",L=t.useCallback(async(e,t)=>{var i,o;if(h||!r)return;const c=_t(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await n(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(s(c))}y(null),j([])},[D,b,w,r,a,B,h,n,s,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=q.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,q]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:n}=z,s=n.length>0?n:t?[t]:[];if(0===s.length)return!1;for(const r of g)for(const t of s)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!h?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:h?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var n;const s=B?7-e:e,a=B?7-t:t,i=_t(s,a),o=null==(n=D[s])?void 0:n[a],l=(e+t)%2==0,u=b===i,x=w.includes(i);c.has(i);const f=C===i,g=q.has(i),y=H(i),j=I&&g&&!y,N=I&&y;return d.jsxs(m.div,{onClick:()=>L(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||h?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!h?{scale:.95}:{},children:[x&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:A(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Wt[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-s}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Ot={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:x,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:x,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:h,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Rt=({moment:e,position:n,totalMoves:s,onClick:r,size:a="md"})=>{const i=Ot[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,h=u%2==0,x=t.useMemo(()=>function(e,t){if(!e)return null;const n=e.replace(/[+#!?]/g,""),s=t?"w":"b";if("O-O"===n||"O-O-O"===n)return{pieceType:"k",pieceColor:s,targetSquare:"O-O"===n?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=n.includes("x");let a,i="p",o=n;/^[KQRBN]/.test(n)&&(i=n[0].toLowerCase(),o=n.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:s,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,h),[e.move,h]),p=t.useMemo(()=>x?{pieceType:x.pieceType,pieceColor:x.pieceColor}:null,[x]),f=t.useMemo(()=>x&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:x.targetSquare,isCapture:x.isCapture}:null,[x,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${n}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(q,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",h?"":".."," ",e.move]}),x&&d.jsxs(q,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(A,{className:"w-2.5 h-2.5"}),x.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(q,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Jt={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:x,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:x,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Ft={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:T,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:K,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:x,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Xt=({totalMoves:e,moves:n=[],moveHistory:s=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[h,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const n=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const s=t+1,r=t%2==0?"white":"black";e.includes("#")?n.push({moveNumber:s,type:"checkmate",move:e,player:r}):e.includes("+")&&n.push({moveNumber:s,type:"check",move:e,player:r}),e.includes("x")&&n.push({moveNumber:s,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&n.push({moveNumber:s,type:"castling",move:e,player:r}),e.includes("=")&&n.push({moveNumber:s,type:"promotion",move:e,player:r})}),n}(n,s),[n,s]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],n=Math.min(Math.floor(.25*e),30),s=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:n,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:T,description:"Development & center control"}),n<s-1&&t.push({name:"middlegame",startMove:n+1,endMove:s-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:K,description:"Tactics & attacks"}),s<=e&&t.push({name:"endgame",startMove:s,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:x,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},h);return()=>clearInterval(t)},[l,r,e,h,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],q=(null==(c=M.find(e=>e.value===h))?void 0:c.label)||"1x",A=0===r||r>=e?null:r%2==1?"white":"black",se=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(L,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(S,{className:"w-3 h-3"})]}):d.jsx(P,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),A&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===A?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(se).map(([e,t])=>{if(0===t)return null;const n=Jt[e],s=n.icon;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${n.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(s,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:n.emoji}),d.jsx(s,{className:`w-4 h-4 ${n.color.split(" ")[1]}`}),n.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(E,{className:"w-3 h-3"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(G,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const n=Ft[t.name],s=n.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(G,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?n.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(s,{className:`w-3 h-3 ${n.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(B,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(s,{className:`w-4 h-4 ${n.color}`}),n.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:n.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(n[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${n[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,n)=>{const s=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Rt,{moment:r,position:s,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${n}`)})}),d.jsx(Y,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(W,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(_,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(G,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(U,{className:"h-5 w-5"}):d.jsx(L,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(O,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(R,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(J,{asChild:!0,children:d.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(F,{className:"h-3 w-3"}),q]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(X,{align:"end",className:"bg-popover",children:M.map(e=>d.jsx(Z,{onClick:()=>p(e.value),className:h===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(R,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(J,{asChild:!0,children:d.jsxs(G,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(X,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(V,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx(Q,{}),re.capture.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs($,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(x,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx(Q,{}),re.checkmate.map((e,t)=>d.jsxs(Z,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(x,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(ne,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(ne,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Zt=({oldRating:e,newRating:n,isWin:s,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=se(i),v=n-e,b=re(e),y=re(n),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),s=n-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+s*a);c(o),r>=30&&(clearInterval(i),c(n),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,n]);return d.jsx(ne,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[s?d.jsx(h,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:s?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(ne,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx(Qe,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(ne,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(x,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),s&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},Vt=()=>{const{enabled:e,volume:t,setEnabled:n,setVolume:s}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(G,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:n,"aria-label":"Toggle sounds"})]}),d.jsx(ne,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(Y,{value:[t],onValueChange:([e])=>s(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:n,showPieces:s=!0,onShowPiecesToggle:r,signature:a})=>{const i=se(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(ne,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&n>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:n})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(G,{variant:s?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${s?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[s?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[s?"Hide":"Show"," Chess Pieces"]})})]})})]})},$t=({isOpen:e,onClose:n,moveHistory:s,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:h,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=he(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=xe(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[q,A]=t.useState(j),[L,S]=t.useState(!1),[P,H]=t.useState(""),[I,E]=t.useState(!1),[K,T]=t.useState(!1);se(p);const Y=t.useMemo(()=>p?fe(p):null,[p]),W=t.useCallback(e=>{A(e),C(e)},[C]);t.useEffect(()=>{e&&A(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const _=async e=>{if(e&&!v)return void E(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const n=await $e(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:q?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=n.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=q?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=n.width/2,s=n.height/2;e.translate(t,s),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=q?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",n.width-20,n.height-20)}}const s=n.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${q?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(s),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&Ae(l,"download_hd")}catch(n){o.error("Download failed")}finally{S(!1)}};return d.jsxs(ge,{open:e,onOpenChange:n,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(G,{variant:q?"outline":"default",size:"sm",onClick:()=>W(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(G,{variant:q?"default":"outline",size:"sm",onClick:()=>W(!0),className:"gap-2 text-xs",children:[d.jsx(nt,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(q?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const n=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(n?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:s,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&h&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:h,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(q?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(q?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(q?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",Y&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",Y]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(q?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(G,{onClick:()=>_(!1),disabled:L,variant:"outline",className:"gap-2",children:[L?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(G,{onClick:()=>_(!0),disabled:L,className:"gap-2 btn-luxury",children:[L?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(x,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(G,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=h?Me(h,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(G,{onClick:()=>{const e=w(s),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:s.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:q,showPieces:k,pieceOpacity:M}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:s,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:q,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:h}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Le,{className:"w-4 h-4"})}),n(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(De,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(Be,{isOpen:I,onClose:()=>E(!1),onAuthRequired:()=>{E(!1),T(!0)},trigger:"download"}),d.jsx(qe,{isOpen:K,onClose:()=>T(!1)})]})},en=ln;!function(){const e=ln,t=on();for(;;)try{if(399156===-parseInt(e(420))/1*(parseInt(e(424))/2)+parseInt(e(425))/3*(-parseInt(e(375))/4)+parseInt(e(453))/5*(parseInt(e(379))/6)+-parseInt(e(460))/7+-parseInt(e(441))/8*(parseInt(e(391))/9)+-parseInt(e(462))/10*(-parseInt(e(468))/11)+parseInt(e(437))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const tn=function(){const e={pjuRc:function(e){return e()},MbuGv:function(e,t){return e===t}};let t=!0;return function(n,s){const r=ln;if(!e[r(444)](r(378),r(415))){const e=t?function(){if(s){const e=s.apply(n,arguments);return s=null,e}}:function(){};return t=!1,e}_0x3fd0b9[r(457)+r(421)](),e.pjuRc(_0x1065f3)}}()(void 0,function(){const e=ln,t={kqrvF:"(((.+)+)+)+$"},n=t;return tn[e(390)]()[e(380)](n.kqrvF)[e(390)]()[e(399)+"r"](tn)[e(380)](e(428)+"+$")});tn();const nn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[ln(371)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();nn(void 0,function(){const e=ln,t={aVWAX:function(e,t){return e+t},bRPcD:function(e,t){return e+t},eYmcQ:function(e){return e()},EDtIb:e(456),dLZFa:e(409)};let n;try{const s=Function(t[e(449)](t.bRPcD(e(431)+e(392),e(461)+e(464)+e(469)+" )"),");"));n=t[e(450)](s)}catch(a){n=window}const s=n.console=n[e(405)]||{},r=["log",t.EDtIb,t[e(417)],"error",e(396),e(387),e(418)];for(let i=0;i<r[e(427)];i++){const t=nn[e(399)+"r"][e(397)][e(459)](nn),n=r[i],a=s[n]||t;t[e(470)]=nn[e(459)](nn),t.toString=a[e(390)][e(459)](a),s[n]=t}})();const sn=()=>{const e=ln,t={};t[e(386)]="Shortcuts: M=Mute, R"+e(452)+e(434)+e(393)+e(402);const n=t,s={duration:4e3};o[e(409)](n[e(386)],s)},rn={};rn[en(394)]="M",rn[en(395)]=en(440)+en(376);const an={};function on(){const e=["DgvK","r28GDg8GC3rHCG","twj1r3y","C3rLBMvY","wMLjCxG","sgrbBg0","yw5KigXLz2vUza","yvzxqvG","zvLTy1e","t2zMzxiGzhjHDW","pvjLC2LNBIWGra","nwfhvvHQCa","ywrKrxzLBNrmAq","r28GDg8Gzw5Kia","D2fYBG","ChjLDMvUDerLzG","se1szxy","yMLUza","mtK4mJG5EevruwjJ","E30Uy29UC3rYDq","ndCWmtbewgzytvu","sg9Tzq","y3rVCIGICMv0Dq","DxrZ","AxndB250zw50rq","u2HVDYbRzxLIBW","mtiXsM9Jqufy","CM4GDgHPCYiPka","x19WCM90B19F","zxnJyxbL","wKvHuNu","sg1srgW","uhjLDMLVDxmGBq","yxbWBhK","ChHTy1u","wKfZtgu","BKzsqLK","nfP3DvPita","BMqGB24VB2zM","uvvfEMm","qwXLtMC","mZu1ndmYmMz0BLLjuq","C2vHCMnO","sw5yDxO","u3bHy2u","khnOB3CGywXSkq","zgL0ywjSzq","DeXPC3rLBMvY","BvDfqwS","DgfIBgu","Dg9mB3DLCKnHCW","rw5K","Dg9tDhjPBMC","mZKXmZi4mvrfrxrTuq","BMn0Aw9UkcKG","puXVyMj5lca/pq","A2v5","ywn0Aw9U","zxHJzxb0Aw9U","ChjVDg90ExbL","yxjKihnOB3j0yW","y29UC3rYDwn0BW","CMvTB3zLrxzLBG","icH5B3vYihr1CG","sgvSCa","Bg9IyNKGlYbfEa","EejzEeu","y29UC29Szq","u2XJzwK","vg9Nz2XLigjVyq","uMv0DxjUihrVia","Aw5MBW","rxnJ","ugXHEs9qyxvZzq","CMqGy29VCMrPBG","A2v5zg93BG","zsaOzhvYAw5Nia","rxPHthq","u291BMqGBxv0zq","zeXArMe","DhjHy2u","CgXHEsK","mZu3mtmXuvbqAg55","yxvSDa","vg9Nz2XLigz1Ba","C2HPzNrlzxK","mLfuv3nKva","mtG3nJq5mxnru0DjCq","qK5VBhC","BgvUz3rO","kcGOlISPkYKRkq","DgfYz2v0","D0nIy3q","CMv0DxjUicHMDq","CffMBvO","uMvZAwDUigDHBq","purYyxCSievZyW","zwvU","vevTrw8","mtq0mdK4nJrbuwHfyuS","s3DcDuu","BhnJCMvLBIbTBW","vg9Nz2XLihnVDq","ogLbvgn0BW"];return(on=function(){return e})()}an[en(394)]="R",an[en(395)]=en(433)+en(414)+en(419),en(451),en(401);const cn={};function ln(e,t){e-=367;const n=on();let s=n[e];if(void 0===ln.rzIVsR){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};ln.gQhuAC=r,ln.rwRsIl={},ln.rzIVsR=!0}const a=e+n[0],i=ln.rwRsIl[a];if(i)s=i;else{const e=function(e){this.iEyOvh=e,this.DzBMua=[1,0,0],this.KZfrjA=function(){return"newState"},this.CMpltp="\\w+ *\\(\\) *{\\w+ *",this.kLSYpR="['|\"].+['|\"];? *}"};e.prototype.jsXXdD=function(){const e=new RegExp(this.CMpltp+this.kLSYpR).test(this.KZfrjA.toString())?--this.DzBMua[1]:--this.DzBMua[0];return this.pQmYUQ(e)},e.prototype.pQmYUQ=function(e){return Boolean(~e)?this.LzYudh(this.iEyOvh):e},e.prototype.LzYudh=function(e){for(let t=0,n=this.DzBMua.length;t<n;t++)this.DzBMua.push(Math.round(Math.random())),n=this.DzBMua.length;return e(this.DzBMua[0])},new e(ln).jsXXdD(),s=ln.gQhuAC(s),ln.rwRsIl[a]=s}return s}cn[en(394)]=en(410),cn.action=en(408)+en(403)+"it fullscr"+en(435);const dn={key:"?"};dn[en(395)]=en(467)+en(398)+en(465);const un={};un[en(394)]=en(382),un[en(395)]=en(411)+" timeline";const mn={};mn[en(394)]="â†",mn[en(395)]=en(370)+"ove";const hn={key:"â†’"};hn[en(395)]="Next move";const xn={};xn[en(394)]=en(463),xn[en(395)]=en(443)+"t",en(389),en(455),en(383);const pn={};pn[en(394)]="F",pn.action=en(422)+en(439)+"de";const fn={};fn[en(394)]="C",fn[en(395)]=en(407)+en(412)+"ates";const gn={};gn[en(394)]="L",gn[en(395)]="Toggle/exp"+en(448);const vn=Gn;!function(){const e=Gn,t=Hn();for(;;)try{if(437981===parseInt(e(278))/1*(parseInt(e(252))/2)+parseInt(e(192))/3+-parseInt(e(199))/4*(-parseInt(e(248))/5)+-parseInt(e(227))/6*(parseInt(e(267))/7)+-parseInt(e(235))/8+parseInt(e(196))/9*(parseInt(e(180))/10)+-parseInt(e(257))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const bn=function(){const e={hfdWJ:function(e,t){return e(t)}};let t=!0;return function(n,s){const r=Gn,a={VybYe:function(t,n){return e[Gn(276)](t,n)},kmXaB:r(185)},i=t?function(){const e=r,t={krSEg:function(e,t){return a.VybYe(e,t)},bpWgG:e(250),izAiK:function(e,t){return e(t)},ZWGtC:e(243)};if("bjcJf"!==a[e(273)]){if(s){const e=s.apply(n,arguments);return s=null,e}}else switch(_0x3427ec){case e(176):return t[e(205)](_0x4d2440,_0x3405ac);case e(236):return _0x3a8077(_0x30b046);case t[e(219)]:return t[e(218)](_0x271f48,_0x340e19);case t[e(217)]:return t.krSEg(_0xfa9e0e,_0x3879f1);default:return t[e(205)](_0x9c936e,_0x3e606b)}}:function(){};return t=!1,i}}()(void 0,function(){const e=Gn;return bn[e(298)]().search("(((.+)+)+)+$")[e(298)]()[e(283)+"r"](bn)[e(188)](e(171)+"+$")});bn();const yn=function(){let e=!0;return function(t,n){const s=e?function(){if(n){const e=n[Gn(186)](t,arguments);return n=null,e}}:function(){};return e=!1,s}}();yn(void 0,function(){const e=Gn,t={snRnN:function(e,t){return e+t},JgYAt:e(261)+e(245),yRYav:e(275)+'ctor("retu'+e(294)+" )",Qvvjt:function(e){return e()},LOwYA:"info",NkBDT:"trace"},n=t[e(291)](function(){const n=e;let s;try{s=Function(t[n(290)](t[n(173)],t[n(225)])+");")()}catch(r){s=window}return s}),s=n[e(233)]=n[e(233)]||{},r=["log","warn",t[e(286)],"error",e(259),e(212),t.NkBDT];for(let a=0;a<r[e(247)];a++){const t=yn.constructor[e(253)][e(268)](yn),n=r[a],i=s[n]||t;t[e(296)]=yn[e(268)](yn),t.toString=i[e(298)][e(268)](i),s[n]=t}})();const wn={p:100,n:320,b:330,r:500,q:900,k:2e4},jn=wn,Cn=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Nn=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],kn=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Mn=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],zn=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Dn=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Bn(e){switch(e[Gn(181)+"e"]()){case"p":return Cn;case"n":return Nn;case"b":return kn;case"r":return Mn;case"q":return zn;case"k":return Dn;default:return[]}}function qn(e){const t=Gn,n={};n[t(178)]=function(e,t){return e===t},n[t(254)]=t(292),n[t(200)]=function(e,t){return e<t},n[t(195)]="CslVF",n[t(269)]=function(e,t){return e-t},n[t(175)]=function(e,t){return e+t},n.uMwDK=function(e,t){return e*t};const s=n;if(e[t(184)+"e"]())return"w"===e[t(262)]()?-1/0:1/0;if(e[t(303)]()||e.isStalemate())return s.ixGFb(s[t(254)],"xPFll"),0;let r=0;const a=e[t(223)]();for(let o=0;s[t(200)](o,8);o++)if("KzZSB"===s.EvtFa)_0x45b006=_0x5a3e4e.score,_0x26400e=_0x516fa5;else for(let e=0;e<8;e++){const n=a[o][e];if(n){const a=jn[n[t(263)]]||0,i=Bn(n[t(263)]);let c=0;if(i.length>0){c=i["w"===n[t(234)]?o:s[t(269)](7,o)][e]}const l=s[t(175)](a,c);r+=s[t(178)](n[t(234)],"w")?l:-l}}const i=e[t(230)]()[t(247)];return r+=s[t(178)](e[t(262)](),"w")?s[t(201)](i,2):s[t(201)](-i,2),r}function An(e,t,n,s,r){const a=Gn,i={};i[a(209)]=function(e,t){return e-t},i[a(237)]=function(e,t){return e===t},i[a(177)]=function(e,t){return e-t},i[a(239)]=function(e,t){return e<=t},i[a(300)]=a(203);const o=i;if(o[a(237)](t,0)||e[a(242)]())return{score:qn(e),move:null};const c={};c[a(211)]=!0;const l=e.moves(c);if(l[a(241)]((e,t)=>{const n=a;let s=0,r=0;return e.captured&&(s+=jn[e[n(280)]]||0),t.captured&&(r+=jn[t[n(280)]]||0),e[n(214)][n(272)]("+")&&(s+=50),t.san[n(272)]("+")&&(r+=50),o[n(209)](r,s)}),r){let r=-1/0,i=null;for(const d of l){e[a(264)](d);const c=An(e,o.kqSpU(t,1),n,s,!1);if(e.undo(),c[a(226)]>r&&(r=c[a(226)],i=d),n=Math[a(194)](n,c[a(226)]),o[a(239)](s,n))break}const c={};return c[a(226)]=r,c.move=i,c}if(o.EdkZS(a(256),o[a(300)])){const e=_0x2f2330?function(){if(_0x47e86b){const e=_0x48dec2[a(186)](_0xc383c7,arguments);return _0x2d4af3=null,e}}:function(){};return _0x5e7282=!1,e}{let r=1/0,i=null;for(const c of l){e[a(264)](c);const o=An(e,t-1,n,s,!0);if(e[a(287)](),o[a(226)]<r&&(r=o[a(226)],i=c),(s=Math[a(244)](s,o[a(226)]))<=n)break}const o={};return o[a(226)]=r,o[a(264)]=i,o}}function Ln(e){const t=Gn,n={};n[t(279)]=function(e,t){return e===t},n.FIJjm=function(e,t){return e*t};const s=n,r={verbose:!0},a=e[t(230)](r);if(s[t(279)](a[t(247)],0))return null;const i=a[t(172)](e=>e.captured);return i[t(247)]>0&&Math[t(210)]()<.3?i[Math[t(179)](s.FIJjm(Math[t(210)](),i[t(247)]))]:a[Math[t(179)](Math[t(210)]()*a[t(247)])]}function Sn(e){const t=Gn,n={lgGBb:function(e,t){return e(t)},wdOao:function(e,t){return e-t},cfzJU:function(e,t){return e-t},cajbK:function(e,t){return e===t},aorzN:function(e,t){return e<t}},s={verbose:!0},r=e.moves(s);if(n[t(260)](r.length,0))return null;let a=null,i=n[t(260)](e.turn(),"w")?-1/0:1/0;for(const o of r){e[t(264)](o);const s=n.lgGBb(qn,e);e[t(287)](),"w"===e[t(262)]()?s>i&&(i=s,a=o):n[t(299)](s,i)&&(i=s,a=o)}if(Math[t(210)]()<.2){const s=r[t(241)]((s,r)=>{const a=t;e[a(264)](s);const i=n[a(208)](qn,e);e.undo(),e[a(264)](r);const o=qn(e);return e.undo(),"w"===e[a(262)]()?n[a(213)](o,i):n[a(238)](i,o)}),a=s[t(277)](0,Math.min(3,s[t(247)]));return a[Math[t(179)](Math[t(210)]()*a[t(247)])]}return a}function Pn(e){const t=Gn,n={JvbxF:function(e,t,n,s,r,a){return e(t,n,s,r,a)},uXkNz:function(e,t){return e===t}};return n[t(285)](An,e,4,-1/0,1/0,n[t(187)](e[t(262)](),"w"))[t(264)]}function Hn(){const e=["C25sBK4","uxz2ANq","yufrv3i","yMvZDe1VDMu","CM4GDgHPCYiPka","igzHBgXPBMCGyG","x19WCM90B19F","idqTCgX5ihnLyq","Dg9tDhjPBMC","yw9YEK4","AhHSzNe","D3DPqxO","zNjVBq","AxneCMf3","FJmYmda","kcGOlISPkYKRkq","zMLSDgvY","sMDzqxq","re9Xuu0","DMPis08","zwfZEq","A3ftCfu","AxHhrMi","zMXVB3i","mtbpvvznuMG","Dg9mB3DLCKnHCW","B2nJyxnPB25HBa","AwnZigfUzcbTyq","AxndAgvJA21HDa","wNHUCfe","yxbWBhK","DvHRtNO","C2vHCMnO","zMvU","yw5KBwfZDgvYia","CMvK","mJaXnJG0m0PRz25IqW","DMfSDwf0Aw9Ula","Bwf4","rxz0rMe","ndu2mtyXngPnDMTjAG","yw5HBhL6zvbVCW","qwr2yw5JzwqGzq","ohDPrKLvva","B3HluK8","Du13reS","u3rVy2TMAxnOia","r3DMAKG","D2fPDfjLywr5","A3jtrwC","ignHChr1CMvZ","DgvYAwfSigf3yq","BgDhqMi","ww5htey","CMfUzg9T","DMvYyM9Zzq","DgfIBgu","D2rpyw8","C2fU","zgvWDgG","FJe0mda","wLDhDem","AxPbAuS","yNbxz0C","qKnuzM0","qMfZAwmGDgfJDa","yKj2CvG","yM9HCMq","CMvUzxnZ","Evjzyxy","C2nVCMu","nMLPDejYrq","BgfIzwW","zw5NAw5Lug93zq","Bw92zxm","ywnRihrVigHHCG","zgvZy3jPChrPBW","y29UC29Szq","y29SB3i","mZq4ndu2mffcrKTHqG","BwvKAxvT","rwrRwLm","y2z6sLu","B3vqANC","BhLzuhe","C29YDa","Axnhyw1Lt3zLCG","C3rVy2TMAxnO","BwLU","BMn0Aw9UkcKG","uMvHBcbotLvfia","BgvUz3rO","mtmYmdy5nw1cDxPQwa","ChjVBw90Aw9U","AgfYza","v1zbrxC","mtuXnta4nKD3A0DhrW","ChjVDg90ExbL","v0LtuuW","twfZDgvY","uxHJzu0","mtq5nJa1mtDrse5Jy3K","CMf0Aw5N","zxHJzxb0Aw9U","y2fQyKS","CMv0DxjUicHMDq","DhvYBG","DhLWzq","Bw92zq","C3rYzw5NDgG","z2DAtgy","mtyXotq1mhj1uMvbAa","yMLUza","D0Dywxa","q2TqA20","q2X1yIbqBgf5zq","Aw5JBhvKzxm","A21yyui","Cg5dtKG","E30Uy29UC3rYDq","AgzKv0O","C2XPy2u","muHgwgnLwG","qxnlDNy","y2fWDhvYzwq","qMvNAw5Uzxi","Bw92zxrPBwu","y29UC3rYDwn0BW","FJiWmda","sNzIEey","te93wue","Dw5KBW","twfRzxmGCMfUza","zxjYB3i"];return(Hn=function(){return e})()}const In={id:"easy"};In[vn(228)]=vn(281),In[vn(232)+"n"]=vn(288)+"om moves, "+vn(182)+vn(206),In[vn(258)]="~800";const En={};function Gn(e,t){e-=171;const n=Hn();let s=n[e];if(void 0===Gn.gcGWIC){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};Gn.JNXZmH=r,Gn.HyNIOP={},Gn.gcGWIC=!0}const a=e+n[0],i=Gn.HyNIOP[a];if(i)s=i;else{const e=function(e){this.dXLmTv=e,this.YwWfYC=[1,0,0],this.ixjErT=function(){return"newState"},this.kdZrSn="\\w+ *\\(\\) *{\\w+ *",this.HVgYba="['|\"].+['|\"];? *}"};e.prototype.cdAhsg=function(){const e=new RegExp(this.kdZrSn+this.HVgYba).test(this.ixjErT.toString())?--this.YwWfYC[1]:--this.YwWfYC[0];return this.cdyHJd(e)},e.prototype.cdyHJd=function(e){return Boolean(~e)?this.KoPicD(this.dXLmTv):e},e.prototype.KoPicD=function(e){for(let t=0,n=this.YwWfYC.length;t<n;t++)this.YwWfYC.push(Math.round(Math.random())),n=this.YwWfYC.length;return e(this.YwWfYC[0])},new e(Gn).cdAhsg(),s=Gn.JNXZmH(s),Gn.HyNIOP[a]=s}return s}En.id=vn(236),En.label=vn(271)+"r",En.description=vn(221)+vn(183)+vn(207)+vn(224),En[vn(258)]=vn(216);const Kn={id:"hard"};Kn[vn(228)]=vn(255),Kn[vn(232)+"n"]=vn(198)+vn(193)+vn(297)+"rch depth",Kn[vn(258)]=vn(284);const Tn={id:"stockfish"};Tn[vn(228)]="Stockfish 16",Tn[vn(232)+"n"]=vn(246)+"engine, gr"+vn(190)+vn(265),Tn.rating=vn(304),Tn[vn(229)+vn(191)]=!0;const Yn=[In,En,Kn,Tn];function Wn(){const e=["y3vYCMvUDa","vffJzem","r3jUvgO","AKP3DwS","Dg91y2HLCW","Dg9tDhjPBMC","zxHJzxb0Aw9U","wLrxBeC","C3rHCNrz","AMvHqMW","BgvUz3rO","BMn0Aw9UkcKG","t2rrDw0","Bg9N","C3DPCgvpzMzZzq","B25nB3vZzuXLyq","x19WCM90B19F","EhLHwgC","uLnrA20","tvvXzKO","B25nB3vZzvvW","Aw5MBW","ywjZ","shfnDM0","t1fnALu","mtbHseP2yw8","AMTyq2e","B25uB3vJAfn0yq","r0j4r1O","ChjVDg90ExbL","BLfhB1i","AgfUzgXLCNm","nZi0vfHTt1HH","y29UC3rYDwn0BW","BevYs1i","odK3otm1nfr2rvjuyq","y3vYCMvUDfK","uhn0vvi","C3rHCNry","yxbWBhK","yMLUza","nde4ode2twDRAMf6","z3nRvw0","tfn4suq","mtG3mJK2mg9UAeX5Aa","CMv0DxjUicHMDq","uxPkufu","sezyD3q","y2XPzw50wa","y2XPzw50wq","DgfIBgu","y3vYCMvUDfG","B25uB3vJAevUza","uMH4tvO","AxntD2LWAw5N","rK5brxe","nduWoti2mfDKCvnksa","otbZq0r3EKO","CuzqzNi","rxbrBNq","EMTUr0m","y29UC29Szq","B25uB3vJAe1VDG","kcGOlISPkYKRkq","CM5yuvm","tunxC00","Dg15v1G","nduYmdDZEg9Iswe","y3rVCIGICMv0Dq","zuHyDuK","zezqDgS","rg9qDK8","C2vHCMnO","t1vJyuO","B25nB3vZzu1VDG","vgvvz00","vKX4tuC","mJa5ntuZnMjmBxzIEq","mtu5odvLqwHxC3u","wvvzC04"];return(Wn=function(){return e})()}!function(){const e=On,t=Wn();for(;;)try{if(369284===-parseInt(e(184))/1+-parseInt(e(200))/2*(-parseInt(e(210))/3)+-parseInt(e(255))/4*(-parseInt(e(221))/5)+-parseInt(e(220))/6+parseInt(e(199))/7+parseInt(e(187))/8+parseInt(e(178))/9*(-parseInt(e(248))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const _n=function(){let e=!0;return function(t,n){const s=On,r={};r[s(251)]="LwRyN",r.LSxID=s(189);const a=r,i=e?function(){const e=s;if(n){if(a[e(251)]!==a[e(186)]){const s=n[e(182)](t,arguments);return n=null,s}_0x19a119=_0x1c847e}}:function(){};return e=!1,i}}()(void 0,function(){const e=On,t={};t[e(247)]=e(206)+"+$";const n=t;return _n[e(228)]()[e(215)](e(206)+"+$")[e(228)]()[e(176)+"r"](_n)[e(215)](n[e(247)])});_n();const Un=function(){const e=On,t={};t[e(203)]=function(e,t){return e!==t};const n=t;let s=!0;return function(t,r){const a=e;if(!n.zknGC("eHXuI",a(212))){const e=s?function(){if(r){const e=r[a(182)](t,arguments);return r=null,e}}:function(){};return s=!1,e}_0x1783e4&&_0x24b3bb(_0x574064[a(191)],_0x56384d[a(192)])}}();function On(e,t){e-=176;const n=Wn();let s=n[e];if(void 0===On.ZcbfAs){var r=function(e){let t="",n="",s=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=s.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};On.OTFgsc=r,On.qwRYxR={},On.ZcbfAs=!0}const a=e+n[0],i=On.qwRYxR[a];if(i)s=i;else{const e=function(e){this.uinFHK=e,this.niBdnG=[1,0,0],this.fsMaQK=function(){return"newState"},this.MjaEPh="\\w+ *\\(\\) *{\\w+ *",this.VRohru="['|\"].+['|\"];? *}"};e.prototype.iZxHUo=function(){const e=new RegExp(this.MjaEPh+this.VRohru).test(this.fsMaQK.toString())?--this.niBdnG[1]:--this.niBdnG[0];return this.WIrJhq(e)},e.prototype.WIrJhq=function(e){return Boolean(~e)?this.uGbsuw(this.uinFHK):e},e.prototype.uGbsuw=function(e){for(let t=0,n=this.niBdnG.length;t<n;t++)this.niBdnG.push(Math.round(Math.random())),n=this.niBdnG.length;return e(this.niBdnG[0])},new e(On).iZxHUo(),s=On.OTFgsc(s),On.qwRYxR[a]=s}return s}Un(void 0,function(){const e=On,t={};t[e(185)]=e(188)+e(234),t[e(225)]="{}.constru"+e(211)+'rn this")( )',t.ljqhF=e(230),t.hsoaU=e(193),t[e(241)]="trace",t.HFXwt=function(e,t){return e<t};const n=t,s=function(){const t=e;let s;try{s=Function(n.gskUm+n[t(225)]+");")()}catch(r){if(n.ljqhF===t(226)){const e=_0x469c48[t(182)](_0xfb8734,arguments);return _0x4dbe42=null,e}s=window}return s}(),r=s[e(204)]=s[e(204)]||{},a=[e(236),"warn",e(244),"error",e(229),n.hsoaU,n.RSQkm];for(let i=0;n[e(190)](i,a[e(233)]);i++){const t=Un.constructor[e(252)][e(183)](Un),n=a[i],s=r[n]||t;t[e(239)]=Un[e(183)](Un),t[e(228)]=s[e(228)][e(183)](s),r[n]=t}})();const Rn=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Te,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Te,description:"15 minutes"}],Jn=["bot","create","join"],Fn=()=>{var e,n,s,l,u,h,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:q}=Yt(),[A,L]=t.useState("lobby"),[S,H]=t.useState(!1),[I,E]=t.useState(!1),[K,Y]=t.useState("bot"),[W,_]=t.useState("human"),[U,O]=t.useState("medium"),[R,J]=t.useState("blitz_5"),[F,X]=t.useState("hotCold"),[Z,V]=t.useState(!0),[Q,$]=t.useState(""),[ee,te]=t.useState(null),[se,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[he,xe]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=vt(Ce,Ne),[Me,ze]=t.useState([]),[De,Ae]=t.useState(!1),[Le,Te]=t.useState(1200),[Qe,$e]=t.useState(200),[et,tt]=t.useState(null),[nt,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Jn.indexOf(K);let n;n="left"===e?Math.min(t+1,Jn.length-1):Math.max(t-1,0),n!==t&&(q.select(),Y(Jn[n]))},[K,q]),{swipeOffset:ht,isSwiping:pt,handlers:ft}=((e={})=>{const n=On,s={MCWsM:function(e,t){return e(t)},MUqfJ:function(e,t){return e-t},PstUR:function(e){return e()},xyaXg:"CChbU",YUYsN:function(e,t){return e-t},jeaBl:function(e,t){return e>t},jkXCa:function(e){return null==e?void 0:e()},OUcaJ:function(e){return null==e?void 0:e()},TeUgM:function(e,t){return e(t)},VLxMG:function(e,t){return e(t)},rnXQS:n(224),FNAEq:n(246),RhxMZ:function(e){return e()},nQGoR:function(e,t,n){return e(t,n)},EpQnt:function(e,t,n){return e(t,n)},lErKR:function(e,t){return e===t},qFPfr:n(235),Zpdlm:function(e){return e()},tmyWX:function(e,t){return e(t)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=s[n(209)](t.useState,d),[h,x]=s[n(208)](t.useState,!1),p={};p[n(181)]=0,p.startY=0,p[n(194)]=0,p[n(179)]=0,p.isSwiping=!1;const f=s[n(209)](t.useRef,p),g=t.useCallback((e,t)=>{const r=n,a={};a[r(181)]=e,a[r(231)]=t,a[r(194)]=e,a[r(179)]=t,a[r(197)]=!0,f[r(223)]=a,s[r(208)](x,!0)},[]),v=s[n(253)](t.useCallback,(e,t)=>{const r=n;if(!f[r(223)].isSwiping)return;f[r(223)].currentX=e,f[r(223)][r(179)]=t;const a=e-f.current[r(181)],i=s.MUqfJ(t,f[r(223)][r(231)]),o={};o.x=a,o.y=i,m(o)},[]),b=s[n(202)](t.useCallback,()=>{const e=n,t={DoPvO:function(e){return s[On(180)](e)}};if(s[e(240)]!=s[e(240)]){if(!_0x56cdba)return;_0x55eba6[e(223)].isSwiping&&t[e(214)](_0x464d4a)}else{if(!f[e(223)].isSwiping)return;const t=s[e(222)](f[e(223)][e(194)],f[e(223)][e(181)]),n=s[e(242)](f[e(223)][e(179)],f[e(223)][e(231)]),a=Math[e(245)](t),d=Math.abs(n);if(s[e(232)](a,d)&&a>r)if(e(213)!=e(213)){if(!_0x5ace35)return;_0x4c1b9b()}else t>0?s[e(180)](o):null==i||i();else d>a&&d>r&&(n>0?s[e(249)](l):s[e(216)](c));f[e(223)][e(197)]=!1,s[e(218)](x,!1);const u={x:0,y:0};s[e(219)](m,u)}},[r,i,o,c,l]),y=t.useCallback(e=>{const t=n;if(s[t(207)]!=s[t(207)]){const e=_0x3fa220[t(182)](_0xf9254d,arguments);return _0x456f96=null,e}{const n=e.touches[0];g(n.clientX,n[t(192)])}},[g]),w=t.useCallback(e=>{const t=n,s=e[t(227)][0];v(s[t(191)],s[t(192)])},[v]),j=t.useCallback(()=>{const e=n;"mCIao"!==s[e(198)]?s[e(196)](b):_0x4a17bb>0?null==_0x5a5677||_0x5a5677():null==_0x385469||_0x385469()},[b]),C=s[n(202)](t.useCallback,e=>{const t=n;a&&s.nQGoR(g,e[t(191)],e[t(192)])},[a,g]),N=t.useCallback(e=>{const t=n;a&&v(e[t(191)],e[t(192)])},[a,v]),k=t.useCallback(()=>{const e=n,t=function(e,t,n){return s[On(202)](e,t,n)};if(s[e(177)](e(235),s[e(201)])){if(!a)return;b()}else{if(!_0x272139)return;t(_0x3e8d52,_0x16c41c.clientX,_0x20330d[e(192)])}},[a,b]),M=t.useCallback(()=>{const e=n;a&&f[e(223)][e(197)]&&s.Zpdlm(b)},[a,b]),z={};z[n(250)+"rt"]=y,z[n(205)+"e"]=w,z[n(195)]=j,z.onMouseDown=C,z[n(217)+"e"]=N,z[n(243)]=k,z[n(238)+"ve"]=M;const D={};return D[n(237)+"t"]=u,D.isSwiping=h,D[n(254)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:bt,isMyTurn:yt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:Dt,resignGame:Bt,offerDraw:qt,loadGame:At,getAvailableMoves:St,movedSquares:Pt}=(()=>{const e=zt,n={aqoun:function(e,t){return e!==t},RRFwT:"qTwLK",WQNDB:function(e,t){return e(t)},TVYpG:function(e,t){return e!==t},wiyMB:"checkmate",bYeRS:"OrSmc",LJjSt:e(168),fzuwb:function(e,t){return e(t)},JNUKf:"castle",YNZhN:function(e,t){return e(t)},HJIzt:e(191),aUNjk:function(e,t){return e!==t},iuoXS:e(292)+"s",MvLTl:"public",fIFqs:e(209)+"s",XayAM:function(e,t){return e>=t},EjJrF:function(e,t){return e(t)},SPDIV:e(393),YTcdg:"move_number",PoAtf:"sSIZz",fiUKv:"XmPkg",bfnpj:function(e,t){return e(t)},yhELz:function(e,t){return e(t)},bpcMy:function(e,t){return e instanceof t},NBJjb:e(129)+"load game",sHqIj:e(176)+e(366)+e(405),hgQbF:e(376),npZPc:e(216)+e(215)+e(294)+e(365),gHsKF:function(e,t){return e(t)},WxodN:"HJvyR",pKRzY:e(227)+e(375)+e(136),DoAkW:e(335),rEIFl:function(e,t){return e===t},mbjns:e(129)+e(256),nnuqh:function(e,t){return e(t)},EBCWk:e(269)+"!",DNQHM:e(175),kIBgz:e(270)+"code",LxQwE:e(200)+e(172)+"hallenge c"+e(405),YKCfh:e(208),KQpCI:e(291),vSRSe:"check",ufVsx:e(127),oizjJ:function(e,t){return e===t},EZFHr:function(e,t){return e===t},wZnJN:e(304),dfUxl:e(391),vlJjd:e(253),ecFDf:e(273),NozBF:function(e,t){return e+t},aePxk:function(e,t){return e||t},LBkPz:function(e,t){return e(t)},jnPcW:function(e,t){return e===t},zSLAc:e(170),ctVsc:function(e,t){return e(t)},ZPtDS:e(243),SVubt:e(302),fwxQS:e(248),gvUBu:function(e,t){return e===t},YgRPb:e(330),lyJUS:e(337)+":",UIfzB:"abandoned",lLGgb:e(238)+e(151),Yjtlp:e(260),MihIn:function(e,t){return e!==t},Tewrw:"profiles",YyRMc:function(e,t){return e===t},WBasS:e(129)+"update ELO"+e(299),crRyR:"white_wins",rsSyV:e(327)+"ed",rvRtq:e(140)+e(277)+e(177)+e(333)+e(399)+e(128),ahRNU:function(e){return e()},jKafj:function(e,t){return e(t)},gWQAL:function(e,t){return e(t)},ncokN:function(e,t){return e(t)},KPbeI:function(e,t,n){return e(t,n)},IjZlE:function(e,t,n){return e(t,n)}},{user:s}=n[e(180)](r),[l,d]=n[e(132)](t.useState,new a),[u,m]=t.useState(null),[h,x]=n[e(334)](t.useState,!1),[p,f]=n.gWQAL(t.useState,null),[g,v]=n[e(125)](t.useState,new Set),{enabled:b,volume:y}=Mt(),{playSound:w}=vt(b,y);t.useRef("");const j=u?u[e(148)+e(214)]===(null==s?void 0:s.id)?"w":u[e(225)+e(214)]===(null==s?void 0:s.id)?"b":null:null,C="active"===(null==u?void 0:u[e(155)])&&l[e(307)]()===j;t.useEffect(()=>{const t=e,r={KMqSA:function(e,t){return e===t},AykWC:n[t(149)],BlqhZ:function(e,s){return n[t(138)](e,s)},cuBsR:t(343),cXWir:function(e,t){return e(t)},JWoIU:"victory"};if(!(null==u?void 0:u.id))return;const o=i.channel(t(319)+u.id).on(t(245)+t(293),{event:t(311),schema:t(297),table:n[t(246)],filter:t(340)+u.id},e=>{const n=t,i=e[n(267)];if(r.KMqSA(i.status,r[n(309)])&&r[n(290)](u[n(155)],n(191)))if(i[n(266)]===n(208))w(n(208));else if(i[n(281)]===(null==s?void 0:s.id))if(r.cuBsR!==n(317))r[n(247)](w,r[n(187)]);else{const e=_0x1bd511[n(184)][n(207)];_0x4154d[n(158)](n(145)+_0x53d108.white[n(373)]+" ("+(e>=0?"+":"")+e+")")}else r[n(247)](w,n(291));if(m(e=>e?{...e,status:i[n(155)],result:i.result,pgn:i[n(146)],currentFen:i.current_fen,moveCount:i.move_count,whiteTimeRemaining:i[n(314)+n(154)],blackTimeRemaining:i.black_time_remaining,winnerId:i[n(281)],blackPlayerId:i[n(265)+n(133)],startedAt:i[n(324)]}:null),i[n(134)+"n"]){const e=new a(i[n(134)+"n"]);d(e)}}).subscribe(),c=i[t(347)]("moves-"+u.id).on(t(245)+t(293),{event:t(244),schema:n[t(228)],table:n[t(378)],filter:t(364)+"."+u.id},e=>{const r=t,a=e[r(267)],i=a[r(367)];if(i&&i[r(387)]>=4){if(!n[r(226)](r(197),n.RRFwT))return _0x2b958b[r(342)](r(337)+":",_0x1a003d),!1;{const e=i[r(143)](2,4);n[r(286)](v,t=>new Set([...t,e]))}}if(n[r(360)](a[r(164)],null==s?void 0:s.id)){const e=a[r(372)];e.includes("#")?w(n[r(222)]):e[r(239)]("+")?n[r(206)]!==n.bYeRS?_0x33757c.add(_0x4dfc8a[r(367)][r(143)](2,4)):w(r(318)):e.includes("x")?w("capture"):e===n.LJjSt||e===r(236)?n[r(194)](w,n[r(241)]):n[r(397)](w,r(295))}})[t(404)]();return()=>{const e=t;i[e(165)+"nel"](o),i[e(165)+e(280)](c)}},[null==u?void 0:u.id,null==u?void 0:u.status,null==s?void 0:s.id,w]);const N=n[e(167)](t.useCallback,async t=>{const s=e;x(!0),n.YNZhN(f,null);try{const{data:e,error:r}=await i[s(385)](n[s(246)])[s(131)]("*").eq("id",t).maybeSingle();if(r)throw r;if(!e)throw new Error(s(306)+"ound");const o={};o.id=e.id,o[s(148)+"rId"]=e[s(386)+s(133)],o[s(225)+s(214)]=e["black_play"+s(133)],o.status=e[s(155)],o.result=e.result,o[s(146)]=e.pgn||"",o[s(204)]=e.current_fen,o[s(351)]=e[s(359)]||0,o[s(287)+"l"]=e[s(235)+"ol"],o.whiteTimeRemaining=e[s(314)+s(154)],o[s(322)+s(278)]=e[s(394)+"_remaining"],o[s(328)+"te"]=e.white_palette,o.blackPalette=e[s(122)+"tte"],o[s(377)+s(405)]=e[s(270)+s(401)],o[s(137)]=e.winner_id,o.createdAt=e.created_at,o[s(396)]=e[s(324)],n.EjJrF(m,o);const c=new a(e[s(134)+"n"]);n[s(397)](d,c);const l={};l[s(166)]=!0;const{data:u}=await i.from(s(209)+"s").select(s(367)).eq(n[s(123)],t).order(n[s(210)],l);if(u)if(n[s(326)]===n[s(163)]){const e=_0x1deed7[s(143)](2,4);_0x9ab5be(t=>new _0x34f29c([...t,e]))}else{const e=new Set;u[s(171)](t=>{const r=s;if(t[r(367)]&&n[r(341)](t[r(367)][r(387)],4)){if("MMcwe"===r(382)){const e=_0x5ed2d4[r(262)](_0x5effb1,arguments);return _0x2475cc=null,e}e.add(t[r(367)].substring(2,4))}}),n[s(188)](v,e)}}catch(r){n[s(331)](f,n[s(288)](r,Error)?r[s(120)]:n[s(183)])}finally{x(!1)}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(!s)return o.error(c(227)+c(135)+"eate a game"),null;x(!0),f(null);try{if(n.aUNjk("PeqTo",c(223))){const e=Lt[t]||null,{data:l}=await i[c(233)](n[c(160)]),d={};d["white_play"+c(133)]=s.id,d[c(155)]=n[c(298)],d[c(235)+"ol"]=t,d[c(314)+c(154)]=e,d["black_time"+c(154)]=e,d[c(313)+c(192)]=a,d[c(156)]=r,d["challenge_"+c(401)]=l;const{data:u,error:m}=await i[c(385)](c(292)+"s")[c(199)](d)[c(131)]().single();if(m)throw m;return o[c(124)](r?n[c(363)]:c(218)+"code: "+l),await N(u.id),u.id}{const e=_0x4337db[c(130)+"r"][c(201)].bind(_0x40a44a),t=_0x4cee55[_0x3e7d07],n=_0xe323a9[t]||e;e.__proto__=_0x130b83.bind(_0xa0555b),e.toString=n.toString[c(159)](n),_0x5529d4[t]=e}}catch(l){const e=l instanceof Error?l[c(120)]:c(129)+c(296)+"e";return f(e),o[c(342)](e),null}finally{n.gHsKF(x,!1)}},[s,N]),M=t.useCallback(async(t,r)=>{const a=e,c={};c[a(242)]=function(e,t){return e>=t};const l=c;if(n.WxodN!==a(119))return _0x965f2a[a(342)](a(227)+a(375)+a(136)),!1;if(!s)return o[a(342)](n[a(400)]),!1;n[a(181)](x,!0),n[a(169)](f,null);try{if("ISNPO"!==n[a(325)]){const{data:e,error:c}=await i[a(385)]("chess_games")[a(131)]("*").eq("id",t)[a(186)+"e"]();if(c)throw c;if(!e)throw new Error(a(306)+a(232));if(n[a(138)](e[a(155)],n[a(298)]))throw new Error(a(182)+"dy started");if(n.rEIFl(e[a(386)+a(133)],s.id))throw new Error(a(259)+a(250)+a(357));const{error:l}=await i[a(385)](a(292)+"s").update({black_player_id:s.id,black_palette:r,status:a(304),started_at:(new Date).toISOString(),last_move_at:(new Date)[a(254)+"g"]()}).eq("id",t);if(l)throw l;return w("gameStart"),o.success("Joined gam"+a(257)+a(173)+a(381)),await N(t),!0}_0x64903f[a(367)]&&l[a(242)](_0x59fadd[a(367)][a(387)],4)&&_0x201d3a[a(383)](_0x2d3bab.move_uci[a(143)](2,4))}catch(d){const e=n[a(288)](d,Error)?d[a(120)]:n[a(144)];return n.fzuwb(f,e),o.error(e),!1}finally{n[a(315)](x,!1)}},[s,N,w]),z=n[e(167)](t.useCallback,async(t,r)=>{const a=e,c={};c[a(392)]=function(e,t){return e===t},c.gYedY=n.EBCWk;const l=c;if(!s)return o[a(342)](n[a(400)]),!1;x(!0),n[a(181)](f,null);try{if(n[a(282)]!==a(258)){const{data:e,error:s}=await i[a(385)](n.iuoXS)[a(131)]("id").eq(n.kIBgz,t[a(370)+"e"]()).eq(a(155),n[a(298)]).maybeSingle();if(s)throw s;if(!e)throw new Error(n[a(264)]);return await M(e.id,r)}_0x4ae6d2[a(124)](l[a(392)](_0x2cc426,"b")?a(330):l[a(371)])}catch(d){const e=d instanceof Error?d[a(120)]:a(129)+a(219)+"de";return n.YNZhN(f,e),o[a(342)](e),!1}finally{x(!1)}},[s,M]),D=t.useCallback(async(t,r,c)=>{const m=e,h={TGnFC:n[m(144)],kTFru:function(e,t){return e(t)},YyTxv:n[m(354)],OZZiS:function(e,t){return e===t},oyjNE:m(243),NHsWS:n[m(224)],rgPwO:n.vSRSe};if(!u||!s||!C)return!1;try{const e={};e.from=t,e.to=r,e[m(263)]=c;const x=l[m(295)](e);if(!x)return n.YNZhN(w,m(358)),!1;l.isCheckmate()?w("checkmate"):l[m(195)]()?n[m(188)](w,n[m(162)]):x[m(189)]?n[m(397)](w,n[m(150)]):n[m(346)](x.san,"O-O")||n[m(126)](x[m(285)],"O-O-O")?w(n[m(241)]):w("move"),n[m(315)](d,new a(l[m(275)]())),v(e=>new Set([...e,r]));const p=l[m(146)](),f=l[m(275)]();let g=null,b=null,y=n[m(276)];if(l[m(284)]())if(y=m(191),l[m(261)+"e"]())g="w"===l[m(307)]()?n.dfUxl:m(249),b="w"===l[m(307)]()?u[m(225)+m(214)]:u[m(148)+m(214)];else{if(n[m(255)]===n[m(174)]){const e=_0x52ad05 instanceof _0x1818ef?_0x598b1b.message:h.TGnFC;return h[m(185)](_0x51828a,e),_0x5e78c6[m(342)](e),!1}g=n[m(354)]}return await i.from(n[m(378)]).insert({game_id:u.id,player_id:s.id,move_number:u[m(351)]+1,move_san:x.san,move_uci:n[m(147)](t+r,n.aePxk(c,"")),fen_after:f}),await i[m(385)](n[m(246)])[m(323)]({pgn:p,current_fen:f,move_count:u[m(351)]+1,last_move_at:(new Date)[m(254)+"g"](),status:y,result:g,winner_id:b,completed_at:y===n[m(149)]?(new Date)[m(254)+"g"]():null}).eq("id",u.id),y===m(191)&&g&&(await B(u[m(148)+m(214)],u[m(225)+"rId"],g),n[m(346)](g,n[m(354)])?n.LBkPz(w,n.YKCfh):b===(null==s?void 0:s.id)?n[m(336)](n[m(312)],n.zSLAc)?n.ctVsc(w,n[m(221)]):_0x4ebf9f[m(266)]===h[m(193)]?_0x143cd2(h.YyTxv):h[m(356)](_0x42b381[m(281)],null==_0x398b17?void 0:_0x398b17.id)?_0xa64776(h[m(362)]):h.kTFru(_0x4913cd,h[m(402)]):n[m(286)](w,n[m(224)]),"white_wins"===g?n[m(161)]!==n[m(234)]?o.success(n.gvUBu(j,"w")?n[m(339)]:m(229)+"!"):_0x5cd6c7(h[m(320)]):"black_wins"===g?o[m(124)](n[m(336)](j,"b")?n[m(339)]:"Black wins!"):o[m(158)](n[m(181)](xt,l))),!0}catch(x){return!1}},[l,u,s,C,j,w]),B=t.useCallback(async(t,r,a)=>{const l=e;if(t&&r&&a!==n[l(380)])try{const{data:e}=await i[l(385)](l(289))[l(131)](n[l(274)]).in(n.Yjtlp,[t,r]);if(!e||n.MihIn(e[l(387)],2))return;const d=e[l(202)](e=>e[l(260)]===t),u=e[l(202)](e=>e[l(260)]===r);if(n[l(332)](!d,!u))return;const m=d[l(395)]||1200,h=u[l(395)]||1200,x=n[l(126)](a,n[l(354)])?n[l(354)]:a,p=c(m,h,x),f={};f[l(395)]=p[l(184)][l(373)];const g={};if(g.elo_rating=p.black[l(373)],await Promise.all([i.from(n[l(350)])[l(323)](f).eq(n[l(316)],t),i[l(385)](n.Tewrw).update(g).eq(n.Yjtlp,r)]),n[l(403)](null==s?void 0:s.id,t)){const e=p[l(184)][l(207)];o[l(158)](l(145)+p[l(184)][l(373)]+" ("+(e>=0?"+":"")+e+")")}else if((null==s?void 0:s.id)===r){const e=p[l(157)][l(207)];o.info(l(145)+p[l(157)][l(373)]+" ("+(e>=0?"+":"")+e+")")}}catch(d){}},[s]),q=n[e(167)](t.useCallback,async()=>{const t=e;if(n[t(332)](!u,!s)||!j)return;const r="w"===j?n.dfUxl:n[t(300)],a="w"===j?u[t(225)+"rId"]:u[t(148)+t(214)];await i.from(n[t(246)])[t(323)]({status:n[t(149)],result:r,winner_id:a,completed_at:(new Date).toISOString()}).eq("id",u.id),await B(u["whitePlaye"+t(214)],u["blackPlaye"+t(214)],r),o.info(n.rsSyV)},[u,s,j,B]),A=n[e(220)](t.useCallback,async()=>{const t=e;o[t(158)](n[t(355)]),u&&(await i[t(385)](n.iuoXS)[t(323)]({status:"completed",result:n[t(354)],completed_at:(new Date)[t(254)+"g"]()}).eq("id",u.id),await B(u["whitePlaye"+t(214)],u[t(225)+t(214)],t(208)))},[u,B]),L=n.IjZlE(t.useCallback,t=>{const n=e,s={};return s[n(240)]=t,s[n(329)]=!0,l[n(389)](s)[n(217)](e=>e.to)},[l]),S={};return S.game=l,S[e(268)]=u,S[e(211)]=C,S.myColor=j,S[e(271)]=h,S[e(342)]=p,S[e(345)]=D,S[e(230)]=k,S[e(212)]=M,S.joinByCode=z,S[e(231)]=q,S[e(379)]=A,S[e(348)]=N,S[e(237)+e(352)]=L,S.movedSquares=g,S})(),Ht=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),L("lobby")};((e={})=>{const n=ln,s={pQfmZ:function(e){return e()},nFRBY:"keydown",ZiIqx:function(e,t){return e instanceof t},xBYxE:function(e){return e()},HMRev:n(416)+"d",wCbct:"Sound unmu"+n(442),aRpDQ:function(e,t){return e&&t},ZEaRu:function(e){return e()},BNolw:function(e,t){return e&&t},HdAlm:function(e,t){return e===t},oTYSR:n(436),QUEzc:function(e){return e()},InXuz:n(367),pxmcU:function(e,t){return e===t},ZAsLe:function(e,t,n){return e(t,n)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:d,enabled:u}=Mt(),m=s[n(373)](t.useCallback,e=>{const t=n,m={};m[t(438)]=s[t(374)];const h=m;if(s[t(446)](e[t(429)],HTMLInputElement)||e[t(429)]instanceof HTMLTextAreaElement||e.target[t(466)+t(384)])return t(406)!==t(369)?void 0:(_0x27a149[t(454)+t(445)](h[t(438)],_0x386267),()=>_0x53c7c8[t(400)+t(385)](t(413),_0x34f776));const x=e[t(394)][t(388)+"e"]();switch(x){case"m":s[t(404)](d),o[t(409)](u?s[t(458)]:s[t(430)],{duration:1500,icon:u?"ðŸ”‡":"ðŸ”Š"});break;case"r":s.aRpDQ(c,r)&&(e[t(457)+t(421)](),s[t(368)](r));break;case"d":s[t(426)](c,l)&&a&&(s[t(447)](s.oTYSR,s.oTYSR)?(e[t(457)+t(421)](),s[t(377)](a)):(_0x5b8ede[t(457)+"ault"](),s[t(432)](_0x1ff97f)));break;case s[t(381)]:i&&(e[t(457)+t(421)](),s[t(404)](i));break;case"?":case"/":(!e[t(423)]||s[t(372)](x,"?"))&&(e["preventDef"+t(421)](),sn())}},[d,u,r,a,i,c,l]);s[n(373)](t.useEffect,()=>{const e=n;return window[e(454)+"stener"]("keydown",m),()=>window[e(400)+"tListener"](e(413),m)},[m])})({onResign:"active"===(null==bt?void 0:bt.status)?Bt:void 0,onOfferDraw:"active"===(null==bt?void 0:bt.status)&&yt?qt:void 0,onBackToLobby:"lobby"!==A?Ht:void 0,isGameActive:"active"===(null==bt?void 0:bt.status),isMyTurn:yt}),t.useEffect(()=>{const e=j.get("game");e&&At(e).then(()=>L("game"))},[j,At]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Te(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==A)return;const e=async()=>{Ae(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:n}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),s={};null==n||n.forEach(e=>{s[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:s[e.white_player_id]||1200}));ze(r)}else ze([]);Ae(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[A]),t.useEffect(()=>{"active"===(null==bt?void 0:bt.status)&&"game"!==A&&(L("game"),null===et&&tt(Le))},[null==bt?void 0:bt.status,A,Le,et]),t.useEffect(()=>{if("completed"===(null==bt?void 0:bt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Te(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==bt?void 0:bt.status,et,it,k]);const It=async()=>{if(!k)return void H(!0);if(!M)return void E(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.white)||{};await Nt(R,Z,t)&&L("waiting")},Et=async e=>{if(!k)return void H(!0);if(!M)return void E(!0);const t=Ie.find(e=>e.id===F),n=(null==t?void 0:t.black)||{};await kt(e,n)&&L("game")},Gt=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Le)<=Qe}).sort((e,t)=>Math.abs((e.white_elo||1200)-Le)-Math.abs((t.white_elo||1200)-Le)):[],Kt=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),xe(F);const n=Ie.filter(e=>e.id!==F),s=n[Math.floor(Math.random()*n.length)];fe(s.id),L("bot-game"),ke("gameStart"),q.gameStart(),o.success(`Starting game vs ${null==(e=Yn.find(e=>e.id===U))?void 0:e.label} bot â€¢ Bot using ${s.name} palette`)},Tt=(e,t,n)=>{const s=e.get(t);return s?{piece:s.type,color:s.color}:null},Wt=t.useCallback(async(e,t,n)=>{if(!ee||ie)return!1;try{const s=Tt(ee,e),r=ee.move({from:e,to:t,promotion:n});if(!r)return ke("illegal"),q.error(),!1;if(s){const e={square:t,piece:s.piece,color:s.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),q.victory()):ee.isCheck()?(ke("check"),q.check()):r.captured?(ke("capture"),q.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),q.castle()):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),q.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(xt(ee))),!0;oe(!0);const i=function(e){const t=Gn,n={};n[t(220)]=function(e,t){return e*t};const s=n;switch(e){case t(176):return 300+500*Math[t(210)]();case t(236):return 500+1e3*Math.random();case"hard":return 800+s[t(220)](Math[t(210)](),1500);case t(243):return 100;default:return 500}}(U);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const n=Gn,s={ykGUr:"easy",ggZLf:function(e,t){return e(t)},rssSa:n(236),CkPkm:function(e,t){return e(t)},lyYPq:function(e,t){return e(t)}};switch(t){case s.ykGUr:return s[n(266)](Ln,e);case s.rssSa:return s[n(266)](Sn,e);case n(250):return s[n(270)](Pn,e);case"stockfish":return Pn(e);default:return s[n(240)](Ln,e)}}(ee,U);if(c){const e=Tt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),q.error()):ee.isCheck()?(ke("check"),q.check()):c.captured?(ke("capture"),q.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),q.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),q.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(xt(ee))))}return oe(!1),!0}catch(s){return oe(!1),q.error(),!1}},[ee,ie,U,ke,q]),_t=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(Pe,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx(Vt,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(ne,{mode:"wait",children:["lobby"===A&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Jn.map(e=>d.jsx("button",{onClick:()=>{q.select(),Y(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(K===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(G,{onClick:Kt,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:Yn.map(e=>d.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(U===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ee,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Ge,{to:"/openings",children:d.jsxs(G,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(Ke,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Ge,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(x,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(G,{onClick:()=>E(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Le).color} text-white font-display text-base sm:text-lg`,children:Le}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Le).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",Qe," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>$e(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+(Qe===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(G,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void E(!0);const e=Gt().filter(e=>e.white_player_id!==k.id);e.length>0?await Et(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Gt().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Gt().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Rn.map(e=>d.jsxs("button",{onClick:()=>J(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(R===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>X(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>V(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>V(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(Z?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(G,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&d.jsx(_e,{className:"h-4 w-4"}),"Create Game",d.jsx(Ue,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Oe,{value:Q,onChange:e=>$(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(G,{onClick:async()=>{if(!Q.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void E(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.black)||{};await Dt(Q.trim(),t)&&L("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const n=e.white_elo||1200,s=k&&Math.abs(n-Le)<=Qe,r=e.white_player_id===(null==k?void 0:k.id),a=k?Re(Le,n):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(s&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Rn.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),s&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(n).color} text-white font-display flex-shrink-0`,children:n})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(B,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Le+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Le+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Le+a.loss]})]})]})]})}),d.jsx(G,{size:"sm",onClick:()=>Et(e.id),disabled:jt||!M||r,variant:s&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===A&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==bt?void 0:bt.challengeCode)&&!Z&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:bt.challengeCode}),d.jsx(G,{variant:"outline",size:"icon",onClick:()=>{(null==bt?void 0:bt.challengeCode)&&(navigator.clipboard.writeText(bt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Je,{className:"h-4 w-4"})})]})]}),d.jsx(G,{variant:"outline",onClick:()=>{L("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===A&&bt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(yt&&"active"===bt.status?"text-primary":"text-muted-foreground"),children:"active"===bt.status?yt?"Your Turn":"Opponent's Turn":"draw"===bt.result?"Draw":bt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===bt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(G,{variant:"outline",size:"sm",onClick:qt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(G,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Ut,{fen:bt.currentFen,onMove:Ct,getAvailableMoves:St,isMyTurn:yt,myColor:wt,whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,movedSquares:Pt,disabled:"active"!==bt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Ve,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Ve,{whitePalette:bt.whitePalette||Ie[0].white,blackPalette:bt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",bt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:bt.pgn||"Game started..."})]}),"completed"===bt.status&&null!==et&&null!==nt&&d.jsx(Zt,{oldRating:et,newRating:nt,isWin:bt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===bt.result,show:it}),"completed"===bt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(G,{onClick:Ht,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(G,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==bt?void 0:bt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(We,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===A&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(st,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Yn.find(e=>e.id===U))?void 0:e.label," Bot (",null==(n=Yn.find(e=>e.id===U))?void 0:n.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),q.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Ut,{fen:ee.fen(),onMove:Wt,getAvailableMoves:_t,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(s=Ie.find(e=>e.id===he))?void 0:s.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:se,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Ve,{whitePalette:(null==(u=Ie.find(e=>e.id===he))?void 0:u.white)||Ie[0].white,blackPalette:(null==(h=Ie.find(e=>e.id===pe))?void 0:h.black)||Ie[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Ve,{whitePalette:(null==(f=Ie.find(e=>e.id===he))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Xt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(G,{onClick:Ht,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(G,{variant:"outline",onClick:Kt,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(st,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(G,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Xe,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Ze,{}),d.jsx(qe,{isOpen:S,onClose:()=>H(!1)}),d.jsx(Be,{isOpen:I,onClose:()=>E(!1),trigger:"general"}),d.jsx($t,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===A?de:we,whitePalette:"bot-game"===A?(null==(b=Ie.find(e=>e.id===he))?void 0:b.white)||Ie[0].white:(null==bt?void 0:bt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===A?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==bt?void 0:bt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===A||"w"===wt?"You":"Opponent",black:"bot-game"===A?`${null==(w=Yn.find(e=>e.id===U))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===A?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==bt?void 0:bt.result)||"Game Finished",totalMoves:"bot-game"===A?de.length:we.length}})]})};export{Fn as default};
