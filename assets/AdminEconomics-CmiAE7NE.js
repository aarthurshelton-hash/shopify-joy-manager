import{ap as e,r as s,dt as t,du as a,dv as r,cx as n,dw as l,dx as i,dy as c,dz as d,dA as o,dB as m,dC as x,dD as u,dE as h,dF as p,dG as j,dH as f,dI as v,dJ as g,dK as b,dL as y,dM as N,dN as w,ba as P,aD as _,aG as C,aA as k,aB as A,bb as S,cT as O,ar as F,s as T,j as V,b$ as E,aK as D,a5 as M,a6 as K,P as R,d5 as z,W as B,E as L,af as q,ag as I,Z as $,D as G,x as W,ah as H,a7 as U,aw as J,bH as Z,I as Q,dO as X,dP as Y,u as ee,as as se,H as te,Q as ae,A as re,B as ne,X as le,N as ie,$ as ce,au as de,bG as oe,bI as me,bJ as xe,q as ue,t as he,v as pe,cX as je,av as fe,at as ve,dd as ge,w as be,ax as ye,aC as Ne,dQ as we,aF as Pe,c0 as _e,az as Ce,ao as ke,cf as Ae,bv as Se,aZ as Oe,dR as Fe,C as Te,a8 as Ve,Y as Ee,ay as De,dS as Me,b as Ke,dT as Re}from"./index-1k5cZzy0.js";import{u as ze}from"./useMutation-Cxdp5RMb.js";import{T as Be,a as Le,b as qe,c as Ie,d as $e,e as Ge}from"./table-CsUCwZyo.js";import{C as We}from"./chart-pie-wx6plXFl.js";import{L as He,P as Ue,a as Je}from"./PieChart-C6PslzpR.js";import{B as Ze}from"./BarChart-ClExycNL.js";import{C as Qe}from"./calendar-BGH9_Q6t.js";const Xe=e("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,s,t){return s&&function(e,s){for(var t=0;t<s.length;t++){var a=s[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ls(a.key),a)}}(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function ss(e,s,t){return s=as(s),function(e,s){if(s&&("object"===Ye(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ts()?Reflect.construct(s,t||[],as(e).constructor):s.apply(e,t))}function ts(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(s){}return(ts=function(){return!!e})()}function as(e){return(as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rs(e,s){return(rs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e})(e,s)}function ns(e,s,t){return(s=ls(s))in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}function ls(e){var s=function(e,s){if("object"!=Ye(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,s);if("object"!=Ye(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==Ye(s)?s:s+""}var is=function(){function e(){return function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,e),ss(this,e,arguments)}return function(e,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&rs(e,s)}(e,s.Component),es(e,[{key:"render",value:function(){return null}}])}();ns(is,"displayName","ZAxis"),ns(is,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var cs=["option","isActive"];function ds(){return ds=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ds.apply(this,arguments)}function os(e,s){if(null==e)return{};var t,a,r=function(e,s){if(null==e)return{};var t={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(s.indexOf(a)>=0)continue;t[a]=e[a]}return t}(e,s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)t=n[a],s.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function ms(e){var r=e.option,n=e.isActive,l=os(e,cs);return"string"==typeof r?s.createElement(t,ds({option:s.createElement(a,ds({type:r},l)),isActive:n,shapeType:"symbols"},l)):s.createElement(t,ds({option:r,isActive:n,shapeType:"symbols"},l))}function xs(e){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function us(){return us=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},us.apply(this,arguments)}function hs(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);s&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,a)}return t}function ps(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?hs(Object(t),!0).forEach(function(s){ys(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hs(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function js(e,s){for(var t=0;t<s.length;t++){var a=s[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ns(a.key),a)}}function fs(e,s,t){return s=gs(s),function(e,s){if(s&&("object"===xs(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vs()?Reflect.construct(s,t||[],gs(e).constructor):s.apply(e,t))}function vs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(s){}return(vs=function(){return!!e})()}function gs(e){return(gs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bs(e,s){return(bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e})(e,s)}function ys(e,s,t){return(s=Ns(s))in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}function Ns(e){var s=function(e,s){if("object"!=xs(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,s);if("object"!=xs(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==xs(s)?s:s+""}var ws=function(){function e(){var s;!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,e);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return ys(s=fs(this,e,[].concat(a)),"state",{isAnimationFinished:!1}),ys(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0})}),ys(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1})}),ys(s,"id",w("recharts-scatter-")),s}return function(e,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&bs(e,s)}(e,s.PureComponent),t=e,b=[{key:"getDerivedStateFromProps",value:function(e,s){return e.animationId!==s.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:s.curPoints}:e.points!==s.curPoints?{curPoints:e.points}:null}}],(a=[{key:"renderSymbolsStatically",value:function(e){var s=this,t=this.props,a=t.shape,c=t.activeShape,d=t.activeIndex,o=r(this.props,!1);return e.map(function(e,t){var r=d===t,m=r?c:a,x=ps(ps({},o),e);return n.createElement(l,us({className:"recharts-scatter-symbol",key:"symbol-".concat(null==e?void 0:e.cx,"-").concat(null==e?void 0:e.cy,"-").concat(null==e?void 0:e.size,"-").concat(t)},i(s.props,e,t),{role:"img"}),n.createElement(ms,us({option:m,isActive:r,key:"symbol-".concat(t)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,s=this.props,t=s.points,a=s.isAnimationActive,r=s.animationBegin,i=s.animationDuration,o=s.animationEasing,m=s.animationId,x=this.state.prevPoints;return n.createElement(c,{begin:r,duration:i,isActive:a,easing:o,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(s){var a=s.t,r=t.map(function(e,s){var t=x&&x[s];if(t){var r=d(t.cx,e.cx),n=d(t.cy,e.cy),l=d(t.size,e.size);return ps(ps({},e),{},{cx:r(a),cy:n(a),size:l(a)})}var i=d(0,e.size);return ps(ps({},e),{},{size:i(a)})});return n.createElement(l,null,e.renderSymbolsStatically(r))})}},{key:"renderSymbols",value:function(){var e=this.props,s=e.points,t=e.isAnimationActive,a=this.state.prevPoints;return!(t&&s&&s.length)||a&&o(a,s)?this.renderSymbolsStatically(s):this.renderSymbolsWithAnimation()}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,s=e.points,t=e.xAxis,a=e.yAxis,r=e.children,l=m(r,x);return l?l.map(function(e,r){var l=e.props,i=l.direction,c=l.dataKey;return n.cloneElement(e,{key:"".concat(i,"-").concat(c,"-").concat(s[r]),data:s,xAxis:t,yAxis:a,layout:"x"===i?"vertical":"horizontal",dataPointFormatter:function(e,s){return{x:e.cx,y:e.cy,value:"x"===i?+e.node.x:+e.node.y,errorVal:u(e,s)}}})}):null}},{key:"renderLine",value:function(){var e,s,t=this.props,a=t.points,i=t.line,c=t.lineType,d=t.lineJointType,o=r(this.props,!1),m=r(i,!1);if("joint"===c)e=a.map(function(e){return{x:e.cx,y:e.cy}});else if("fitting"===c){var x=h(a),u=x.xmin,f=x.xmax,v=x.a,g=x.b,b=function(e){return v*e+g};e=[{x:u,y:b(u)},{x:f,y:b(f)}]}var y=ps(ps(ps({},o),{},{fill:"none",stroke:o&&o.fill},m),{},{points:e});return s=n.isValidElement(i)?n.cloneElement(i,y):p(i)?i(y):n.createElement(j,us({},y,{type:d})),n.createElement(l,{className:"recharts-scatter-line",key:"recharts-scatter-line"},s)}},{key:"render",value:function(){var e=this.props,s=e.hide,t=e.points,a=e.line,r=e.className,i=e.xAxis,c=e.yAxis,d=e.left,o=e.top,m=e.width,x=e.height,u=e.id,h=e.isAnimationActive;if(s||!t||!t.length)return null;var p=this.state.isAnimationFinished,j=f("recharts-scatter",r),b=i&&i.allowDataOverflow,y=c&&c.allowDataOverflow,N=b||y,w=v(u)?this.id:u;return n.createElement(l,{className:j,clipPath:N?"url(#clipPath-".concat(w,")"):null},b||y?n.createElement("defs",null,n.createElement("clipPath",{id:"clipPath-".concat(w)},n.createElement("rect",{x:b?d:d-m/2,y:y?o:o-x/2,width:b?m:2*m,height:y?x:2*x}))):null,a&&this.renderLine(),this.renderErrorBar(),n.createElement(l,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!h||p)&&g.renderCallByParent(this.props,t))}}])&&js(t.prototype,a),b&&js(t,b),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,a,b}();ys(ws,"displayName","Scatter"),ys(ws,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!b.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"}),ys(ws,"getComposedData",function(e){var s=e.xAxis,t=e.yAxis,a=e.zAxis,r=e.item,n=e.displayedData,l=e.xAxisTicks,i=e.yAxisTicks,c=e.offset,d=r.props.tooltipType,o=m(r.props.children,y),x=v(s.dataKey)?r.props.dataKey:s.dataKey,h=v(t.dataKey)?r.props.dataKey:t.dataKey,p=a&&a.dataKey,j=a?a.range:is.defaultProps.range,f=j&&j[0],g=s.scale.bandwidth?s.scale.bandwidth():0,b=t.scale.bandwidth?t.scale.bandwidth():0,w=n.map(function(e,n){var c=u(e,x),m=u(e,h),j=!v(p)&&u(e,p)||"-",y=[{name:v(s.dataKey)?r.props.name:s.name||s.dataKey,unit:s.unit||"",value:c,payload:e,dataKey:x,type:d},{name:v(t.dataKey)?r.props.name:t.name||t.dataKey,unit:t.unit||"",value:m,payload:e,dataKey:h,type:d}];"-"!==j&&y.push({name:a.name||a.dataKey,unit:a.unit||"",value:j,payload:e,dataKey:p,type:d});var w=N({axis:s,ticks:l,bandSize:g,entry:e,index:n,dataKey:x}),P=N({axis:t,ticks:i,bandSize:b,entry:e,index:n,dataKey:h}),_="-"!==j?a.scale(j):f,C=Math.sqrt(Math.max(_,0)/Math.PI);return ps(ps({},e),{},{cx:w,cy:P,x:w-C,y:P-C,xAxis:s,yAxis:t,zAxis:a,width:2*C,height:2*C,size:_,node:{x:c,y:m,z:j},tooltipPayload:y,tooltipPosition:{x:w,y:P},payload:e},o&&o[n]&&o[n].props)});return ps({points:w},c)});var Ps=P({chartName:"ComposedChart",GraphicalChild:[He,_,C,ws],axisComponents:[{axisType:"xAxis",AxisComp:k},{axisType:"yAxis",AxisComp:A},{axisType:"zAxis",AxisComp:is}],formatAxisMap:S});const _s=()=>{O();const[e,t]=s.useState([]),[a,r]=s.useState(!0),{data:n,refetch:l}=F({queryKey:["admin-palette-pools-live"],queryFn:X,refetchInterval:!!a&&5e3}),{data:i,refetch:c}=F({queryKey:["admin-gamecard-pools-live"],queryFn:Y,refetchInterval:!!a&&5e3});s.useEffect(()=>{if(!a)return;const e=T.channel("palette-pool-changes").on("postgres_changes",{event:"*",schema:"public",table:"palette_value_pool"},e=>{if(l(),"UPDATE"===e.eventType&&e.new){const s=e.new;t(e=>[{id:`palette-${Date.now()}`,type:"palette",name:s.palette_name||s.palette_id,timestamp:new Date},...e].slice(0,10))}}).subscribe(),s=T.channel("gamecard-pool-changes").on("postgres_changes",{event:"*",schema:"public",table:"gamecard_value_pool"},e=>{if(c(),"UPDATE"===e.eventType&&e.new){const s=e.new;t(e=>[{id:`gamecard-${Date.now()}`,type:"gamecard",name:s.game_title||s.game_id,timestamp:new Date},...e].slice(0,10))}}).subscribe();return()=>{T.removeChannel(e),T.removeChannel(s)}},[a,l,c]);const d=e=>`$${(e/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,o=(n||[]).reduce((e,s)=>e+s.totalValueCents,0),m=(i||[]).reduce((e,s)=>e+s.totalValueCents,0),x=(n||[]).reduce((e,s)=>e+s.interactionCount,0)+(i||[]).reduce((e,s)=>e+s.interactionCount,0),u=(n||[]).reduce((e,s)=>e+s.earnedValueCents,0)+(i||[]).reduce((e,s)=>e+s.earnedValueCents,0),h=(n||[]).filter(e=>e.interactionCount>0).slice(0,5),p=(i||[]).filter(e=>e.interactionCount>0).slice(0,5);return V.jsxs("div",{className:"space-y-6",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("div",{className:"p-2 rounded-full "+(a?"bg-green-500/20 animate-pulse":"bg-muted"),children:V.jsx(E,{className:"h-5 w-5 "+(a?"text-green-500":"text-muted-foreground")})}),V.jsxs("div",{children:[V.jsx("h3",{className:"text-lg font-semibold",children:"Real-Time Value Accrual"}),V.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Live tracking enabled • Updates every 5 seconds":"Paused"})]})]}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("button",{onClick:()=>r(!a),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-colors "+(a?"bg-green-500/20 text-green-500 border border-green-500/30":"bg-muted text-muted-foreground border border-border"),children:a?"● Live":"○ Paused"}),V.jsx("button",{onClick:()=>{l(),c()},className:"p-2 rounded-md bg-muted hover:bg-muted/80 transition-colors",children:V.jsx(D,{className:"h-4 w-4"})})]})]}),V.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[V.jsx(M,{className:"border-purple-500/30 bg-gradient-to-br from-purple-500/5 to-purple-500/10",children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(R,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Palette Pool"})]}),V.jsx("p",{className:"text-xl font-bold text-purple-400",children:d(o)}),V.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n||[]).reduce((e,s)=>e+s.interactionCount,0)," interactions"]})]})}),V.jsx(M,{className:"border-amber-500/30 bg-gradient-to-br from-amber-500/5 to-amber-500/10",children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(z,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Gamecard Pool"})]}),V.jsx("p",{className:"text-xl font-bold text-amber-400",children:d(m)}),V.jsxs("p",{className:"text-xs text-muted-foreground",children:[(i||[]).reduce((e,s)=>e+s.interactionCount,0)," interactions"]})]})}),V.jsx(M,{className:"border-green-500/30 bg-gradient-to-br from-green-500/5 to-green-500/10",children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(B,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Earned Value"})]}),V.jsx("p",{className:"text-xl font-bold text-green-400",children:d(u)}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"From orders & trades"})]})}),V.jsx(M,{className:"border-primary/30 bg-gradient-to-br from-primary/5 to-primary/10",children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(L,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Total Interactions"})]}),V.jsx("p",{className:"text-xl font-bold",children:x.toLocaleString()}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all assets"})]})})]}),e.length>0&&V.jsxs(M,{children:[V.jsx(q,{className:"pb-3",children:V.jsxs(I,{className:"text-sm flex items-center gap-2",children:[V.jsx($,{className:"h-4 w-4 text-yellow-500"}),"Recent Activity"]})}),V.jsx(K,{children:V.jsx("div",{className:"space-y-2",children:V.jsx(G,{mode:"popLayout",children:e.slice(0,5).map(e=>V.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between py-2 px-3 bg-muted/50 rounded-lg",children:[V.jsxs("div",{className:"flex items-center gap-2",children:["palette"===e.type?V.jsx(R,{className:"h-4 w-4 text-purple-400"}):V.jsx(z,{className:"h-4 w-4 text-amber-400"}),V.jsx("span",{className:"text-sm font-medium",children:e.name}),V.jsx(H,{variant:"outline",className:"text-xs",children:e.type})]}),V.jsx("span",{className:"text-xs text-muted-foreground",children:U(e.timestamp,"HH:mm:ss")})]},e.id))})})})]}),V.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"text-sm flex items-center gap-2",children:[V.jsx(R,{className:"h-4 w-4 text-purple-400"}),"Most Used Palettes"]}),V.jsx(J,{children:"By interaction count"})]}),V.jsx(K,{children:h.length>0?V.jsx("div",{className:"space-y-3",children:h.map((e,s)=>{const t=Math.max(...h.map(e=>e.interactionCount),1),a=e.interactionCount/t*100;return V.jsxs("div",{className:"space-y-1",children:[V.jsxs("div",{className:"flex items-center justify-between text-sm",children:[V.jsx("span",{className:"font-medium",children:e.name}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"text-muted-foreground",children:e.interactionCount}),V.jsx("span",{className:"text-xs text-purple-400",children:d(e.totalValueCents)})]})]}),V.jsx(Z,{value:a,className:"h-1.5"})]},e.id)})}):V.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[V.jsx(Q,{className:"h-8 w-8 mx-auto mb-2 opacity-40"}),V.jsx("p",{className:"text-sm",children:"No palette interactions yet"}),V.jsx("p",{className:"text-xs",children:"Interactions will appear as users load games"})]})})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"text-sm flex items-center gap-2",children:[V.jsx(z,{className:"h-4 w-4 text-amber-400"}),"Most Viewed Gamecards"]}),V.jsx(J,{children:"By interaction count"})]}),V.jsx(K,{children:p.length>0?V.jsx("div",{className:"space-y-3",children:p.map(e=>{const s=Math.max(...p.map(e=>e.interactionCount),1),t=e.interactionCount/s*100;return V.jsxs("div",{className:"space-y-1",children:[V.jsxs("div",{className:"flex items-center justify-between text-sm",children:[V.jsx("span",{className:"font-medium truncate max-w-[150px]",children:e.name}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(H,{variant:"outline",className:"text-[10px] "+("legendary"===e.rarityTier?"border-amber-500 text-amber-500":"epic"===e.rarityTier?"border-purple-500 text-purple-500":"border-blue-500 text-blue-500"),children:e.rarityTier}),V.jsx("span",{className:"text-muted-foreground",children:e.interactionCount})]})]}),V.jsx(Z,{value:t,className:"h-1.5"})]},e.id)})}):V.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[V.jsx(Q,{className:"h-8 w-8 mx-auto mb-2 opacity-40"}),V.jsx("p",{className:"text-sm",children:"No gamecard interactions yet"}),V.jsx("p",{className:"text-xs",children:"Interactions will appear as users load famous games"})]})})]})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsx(I,{className:"text-sm",children:"Complete Value Pool Status"}),V.jsx(J,{children:"All registered palettes and gamecards with their current values"})]}),V.jsx(K,{children:V.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[V.jsxs("div",{children:[V.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[V.jsx(R,{className:"h-4 w-4 text-purple-400"}),"Palettes (",(null==n?void 0:n.length)||0,")"]}),V.jsx("div",{className:"max-h-[300px] overflow-y-auto space-y-2",children:(n||[]).map(e=>V.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg text-sm",children:[V.jsxs("div",{children:[V.jsx("span",{className:"font-medium",children:e.name}),V.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.interactionCount," views • ",e.usageCount," visions"]})]}),V.jsxs("div",{className:"text-right",children:[V.jsx("div",{className:"font-medium",children:d(e.totalValueCents)}),e.earnedValueCents>0&&V.jsxs("div",{className:"text-xs text-green-500",children:["+",d(e.earnedValueCents)]})]})]},e.id))})]}),V.jsxs("div",{children:[V.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[V.jsx(z,{className:"h-4 w-4 text-amber-400"}),"Gamecards (",(null==i?void 0:i.length)||0,")"]}),V.jsx("div",{className:"max-h-[300px] overflow-y-auto space-y-2",children:(i||[]).map(e=>V.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/30 rounded-lg text-sm",children:[V.jsxs("div",{children:[V.jsx("span",{className:"font-medium truncate block max-w-[180px]",children:e.name}),V.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[V.jsx(H,{variant:"outline",className:"text-[9px] px-1 py-0 "+("legendary"===e.rarityTier?"border-amber-500 text-amber-500":"epic"===e.rarityTier?"border-purple-500 text-purple-500":"border-blue-500 text-blue-500"),children:e.rarityTier}),V.jsxs("span",{children:[e.interactionCount," views"]})]})]}),V.jsxs("div",{className:"text-right",children:[V.jsx("div",{className:"font-medium",children:d(e.totalValueCents)}),e.earnedValueCents>0&&V.jsxs("div",{className:"text-xs text-green-500",children:["+",d(e.earnedValueCents)]})]})]},e.id))})]})]})})]})]})},Cs=["hsl(var(--primary))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"],ks=.029,As=()=>{const{user:e,isLoading:s}=ee(),{data:t,isLoading:a}=F({queryKey:["is-admin",null==e?void 0:e.id],queryFn:async()=>{if(!e)return!1;const{data:s}=await T.rpc("has_role",{_user_id:e.id,_role:"admin"});return!0===s},enabled:!!e}),{data:r,isLoading:n,refetch:l}=F({queryKey:["admin-comprehensive-stats"],queryFn:async()=>{const[e,s,t,a,r,n,l,i,c,d,o]=await Promise.all([T.from("saved_visualizations").select("id",{count:"exact",head:!0}),T.from("visualization_listings").select("id, status, price_cents, sold_at"),T.from("wallet_transactions").select("transaction_type, amount_cents, created_at"),T.from("user_wallets").select("balance_cents, total_earned_cents, total_spent_cents, total_deposited_cents, total_withdrawn_cents"),T.from("withdrawal_requests").select("status, amount_cents, created_at"),T.from("user_subscriptions").select("subscription_status, current_period_end"),T.from("education_fund").select("forfeited_value_cents, platform_fee_cents, fund_contribution_cents, visions_released, event_type"),T.from("vision_interactions").select("interaction_type, value_cents"),T.from("palette_value_pool").select("*"),T.from("gamecard_value_pool").select("*"),T.from("order_financials").select("*")]),m=s.data||[];t.data;const x=a.data||[],u=r.data||[],h=n.data||[],p=l.data||[],j=i.data||[],f=c.data||[],v=d.data||[],g=o.data||[],b=m.filter(e=>"active"===e.status),y=m.filter(e=>"sold"===e.status),N=b.reduce((e,s)=>e+s.price_cents,0),w=y.reduce((e,s)=>e+s.price_cents,0),P=x.reduce((e,s)=>e+s.balance_cents,0),_=x.reduce((e,s)=>e+s.total_earned_cents,0),C=x.reduce((e,s)=>e+s.total_spent_cents,0),k=x.reduce((e,s)=>e+s.total_deposited_cents,0),A=x.reduce((e,s)=>e+s.total_withdrawn_cents,0),S=u.filter(e=>"pending"===e.status),O=u.filter(e=>"approved"===e.status),F=u.filter(e=>"completed"===e.status),V=S.reduce((e,s)=>e+s.amount_cents,0),E=h.filter(e=>"active"===e.subscription_status&&(!e.current_period_end||new Date(e.current_period_end)>new Date)),D=700*E.length,M=p.reduce((e,s)=>e+(s.forfeited_value_cents||0),0),K=p.reduce((e,s)=>e+(s.platform_fee_cents||0),0),R=p.reduce((e,s)=>e+(s.fund_contribution_cents||0),0),z=p.reduce((e,s)=>e+(s.visions_released||0),0),B=j.filter(e=>"print_order"===e.interaction_type),L=B.reduce((e,s)=>e+(s.value_cents||0),0),q=j.filter(e=>"view"===e.interaction_type).length,I=j.filter(e=>"download_hd"===e.interaction_type||"download_gif"===e.interaction_type).length,$=j.filter(e=>"trade"===e.interaction_type).length,G=f.reduce((e,s)=>e+(s.earned_value_cents||0),0),W=v.reduce((e,s)=>e+(s.earned_value_cents||0),0);g.filter(e=>"print"===e.order_type),g.filter(e=>"book"===e.order_type),g.filter(e=>"marketplace"===e.order_type);const H=Math.floor((L+D)*ks+30*(B.length+E.length)),U=Math.floor(.02*L),J=Math.floor(.35*L),Z=L+6*D+Math.floor(.05*w),Q=H+U+J+0,X=Math.floor(.2*L*.4),Y=Z-Q-X-R;return{visions:{total:e.count||0},marketplace:{activeListings:b.length,soldListings:y.length,totalListingValue:N,totalSalesVolume:w,averagePrice:b.length>0?N/b.length:0,platformFees:Math.floor(.05*w)},wallets:{totalUsers:x.length,totalBalances:P,totalEarned:_,totalSpent:C,totalDeposited:k,totalWithdrawn:A},withdrawals:{pending:S.length,approved:O.length,completed:F.length,pendingAmount:V,totalProcessed:F.reduce((e,s)=>e+s.amount_cents,0)},subscriptions:{active:E.length,total:h.length,mrr:D,arr:12*D},educationFund:{totalForfeitedValue:M,totalPlatformFees:K,totalFundContributions:R,totalVisionsReleased:z,scholarshipsAwarded:Math.floor(R/700)},interactions:{totalPrintOrders:B.length,totalPrintRevenue:L,totalViews:q,totalDownloads:I,totalTrades:$},costs:{stripeFees:H,shopifyFees:U,printifyCosts:J,luluCosts:0,totalCosts:Q},revenue:{gross:Z,net:Y,creatorPayouts:X},valuePools:{palettes:f,gamecards:v,totalPaletteValue:G,totalGamecardValue:W}}},enabled:!0===t,staleTime:3e4}),{data:i}=F({queryKey:["admin-recent-transactions"],queryFn:async()=>{const{data:e}=await T.from("wallet_transactions").select("*").order("created_at",{ascending:!1}).limit(20);return e||[]},enabled:!0===t,staleTime:3e4}),{data:c}=F({queryKey:["admin-recent-sales"],queryFn:async()=>{const{data:e}=await T.from("visualization_listings").select("\n          id, \n          price_cents, \n          sold_at, \n          status,\n          visualization:saved_visualizations(title)\n        ").eq("status","sold").order("sold_at",{ascending:!1}).limit(10);return e||[]},enabled:!0===t,staleTime:3e4});if(!(s||a||e&&t))return V.jsx(se,{to:"/",replace:!0});if(s||a||n)return V.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:V.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const d=e=>`$${(e/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,o=[{name:"Subscriptions",value:6*((null==r?void 0:r.subscriptions.mrr)||0),color:Cs[0]},{name:"Print Orders",value:(null==r?void 0:r.interactions.totalPrintRevenue)||0,color:Cs[1]},{name:"Marketplace Fees",value:(null==r?void 0:r.marketplace.platformFees)||0,color:Cs[2]}];null==r||r.costs.stripeFees,null==r||r.costs.shopifyFees,null==r||r.costs.printifyCosts,null==r||r.costs.luluCosts;const m=[{name:"Creator Royalties",value:(null==r?void 0:r.revenue.creatorPayouts)||0},{name:"Education Fund",value:(null==r?void 0:r.educationFund.totalFundContributions)||0},{name:"Palette Pool",value:(null==r?void 0:r.valuePools.totalPaletteValue)||0},{name:"Gamecard Pool",value:(null==r?void 0:r.valuePools.totalGamecardValue)||0},{name:"Platform Net",value:Math.max(0,(null==r?void 0:r.revenue.net)||0)}];return V.jsxs("div",{className:"min-h-screen bg-background",children:[V.jsx(te,{}),V.jsxs("main",{className:"container mx-auto px-4 py-8",children:[V.jsxs("div",{className:"flex items-center justify-between mb-6",children:[V.jsxs(ae,{to:"/",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",children:[V.jsx(re,{className:"h-4 w-4"}),"Back to Home"]}),V.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>l(),className:"gap-2",children:[V.jsx(D,{className:"h-4 w-4"}),"Refresh Data"]})]}),V.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl p-8 mb-8 border border-amber-500/30 bg-gradient-to-br from-amber-500/10 via-primary/5 to-amber-500/10",children:V.jsx("div",{className:"relative z-10",children:V.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[V.jsx("div",{className:"p-3 rounded-full bg-amber-500/20",children:V.jsx(le,{className:"h-6 w-6 text-amber-500"})}),V.jsxs("div",{children:[V.jsx("h1",{className:"text-3xl font-bold",children:"CEO Economic Command Center"}),V.jsx("p",{className:"text-muted-foreground",children:"Complete financial transparency for Alec Arthur Shelton"})]}),V.jsxs(H,{className:"ml-auto bg-amber-500/20 text-amber-600 border-amber-500/30",children:[V.jsx(ie,{className:"h-3 w-3 mr-1"}),"Full Access"]})]})})}),V.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-8",children:[V.jsx(M,{className:"border-green-500/30 bg-gradient-to-br from-green-500/5 to-green-500/10",children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(B,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Gross Revenue"})]}),V.jsx("p",{className:"text-xl font-bold text-green-500",children:d((null==r?void 0:r.revenue.gross)||0)})]})}),V.jsx(M,{className:"border-red-500/30 bg-gradient-to-br from-red-500/5 to-red-500/10",children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(ce,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Total Costs"})]}),V.jsx("p",{className:"text-xl font-bold text-red-500",children:d((null==r?void 0:r.costs.totalCosts)||0)})]})}),V.jsx(M,{className:"border-primary/30 bg-gradient-to-br from-primary/5 to-primary/10",children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(de,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Net Profit"})]}),V.jsx("p",{className:"text-xl font-bold "+(((null==r?void 0:r.revenue.net)||0)>=0?"text-primary":"text-red-500"),children:d((null==r?void 0:r.revenue.net)||0)})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(oe,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Premium Members"})]}),V.jsx("p",{className:"text-xl font-bold",children:(null==r?void 0:r.subscriptions.active)||0})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(me,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Print Orders"})]}),V.jsx("p",{className:"text-xl font-bold",children:(null==r?void 0:r.interactions.totalPrintOrders)||0})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-4 pb-3",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[V.jsx(xe,{className:"h-3 w-3"}),V.jsx("span",{className:"text-xs",children:"Total Visions"})]}),V.jsx("p",{className:"text-xl font-bold",children:(null==r?void 0:r.visions.total)||0})]})})]}),V.jsxs(ue,{defaultValue:"realtime",className:"space-y-6",children:[V.jsxs(he,{className:"grid w-full grid-cols-8 lg:w-auto lg:inline-grid",children:[V.jsxs(pe,{value:"realtime",className:"gap-2",children:[V.jsx(E,{className:"h-4 w-4"}),V.jsx("span",{className:"hidden sm:inline",children:"Real-Time"})]}),V.jsxs(pe,{value:"trends",className:"gap-2",children:[V.jsx(je,{className:"h-4 w-4"}),V.jsx("span",{className:"hidden sm:inline",children:"Trends"})]}),V.jsxs(pe,{value:"financials",className:"gap-2",children:[V.jsx(de,{className:"h-4 w-4"}),V.jsx("span",{className:"hidden sm:inline",children:"Financials"})]}),V.jsxs(pe,{value:"costs",className:"gap-2",children:[V.jsx(Xe,{className:"h-4 w-4"}),V.jsx("span",{className:"hidden sm:inline",children:"Costs"})]}),V.jsxs(pe,{value:"marketplace",className:"gap-2",children:[V.jsx(fe,{className:"h-4 w-4"}),V.jsx("span",{className:"hidden sm:inline",children:"Marketplace"})]}),V.jsxs(pe,{value:"pools",className:"gap-2",children:[V.jsx(R,{className:"h-4 w-4"}),V.jsx("span",{className:"hidden sm:inline",children:"Value Pools"})]}),V.jsxs(pe,{value:"wallets",className:"gap-2",children:[V.jsx(ve,{className:"h-4 w-4"}),V.jsx("span",{className:"hidden sm:inline",children:"Wallets"})]}),V.jsxs(pe,{value:"education",className:"gap-2",children:[V.jsx(ge,{className:"h-4 w-4"}),V.jsx("span",{className:"hidden sm:inline",children:"Education"})]})]}),V.jsx(be,{value:"realtime",children:V.jsx(_s,{})}),V.jsx(Ss,{formatCents:d}),V.jsxs(be,{value:"financials",className:"space-y-6",children:[V.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(We,{className:"h-5 w-5 text-green-500"}),"Revenue Streams"]}),V.jsx(J,{children:"All money coming into the platform"})]}),V.jsxs(K,{children:[V.jsx("div",{className:"h-[280px]",children:V.jsx(ye,{width:"100%",height:"100%",children:V.jsxs(Ue,{children:[V.jsx(Je,{data:o,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:o.map((e,s)=>V.jsx(y,{fill:Cs[s%Cs.length]},`cell-${s}`))}),V.jsx(Ne,{formatter:e=>d(e)}),V.jsx(we,{})]})})}),V.jsxs("div",{className:"space-y-2 mt-4",children:[o.map((e,s)=>V.jsxs("div",{className:"flex justify-between items-center",children:[V.jsx("span",{className:"text-sm text-muted-foreground",children:e.name}),V.jsx("span",{className:"font-medium",children:d(e.value)})]},e.name)),V.jsx(Pe,{className:"my-2"}),V.jsxs("div",{className:"flex justify-between items-center",children:[V.jsx("span",{className:"font-semibold",children:"Total Revenue"}),V.jsx("span",{className:"font-bold text-green-500",children:d((null==r?void 0:r.revenue.gross)||0)})]})]})]})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(_e,{className:"h-5 w-5 text-primary"}),"Value Distribution"]}),V.jsx(J,{children:"Where the money goes"})]}),V.jsx(K,{children:V.jsx("div",{className:"h-[280px]",children:V.jsx(ye,{width:"100%",height:"100%",children:V.jsxs(Ze,{data:m,layout:"vertical",children:[V.jsx(Ce,{strokeDasharray:"3 3"}),V.jsx(k,{type:"number",tickFormatter:e=>`$${(e/100).toFixed(0)}`}),V.jsx(A,{type:"category",dataKey:"name",width:100,tick:{fontSize:12}}),V.jsx(Ne,{formatter:e=>d(e)}),V.jsx(C,{dataKey:"value",fill:"hsl(var(--primary))"})]})})})})]})]}),V.jsxs(M,{children:[V.jsx(q,{children:V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(le,{className:"h-5 w-5 text-amber-500"}),"Subscription Economics"]})}),V.jsx(K,{children:V.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[V.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[V.jsx("p",{className:"text-sm text-muted-foreground",children:"MRR"}),V.jsx("p",{className:"text-2xl font-bold",children:d((null==r?void 0:r.subscriptions.mrr)||0)}),V.jsxs("p",{className:"text-xs text-muted-foreground",children:[null==r?void 0:r.subscriptions.active," × $7/mo"]})]}),V.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[V.jsx("p",{className:"text-sm text-muted-foreground",children:"ARR"}),V.jsx("p",{className:"text-2xl font-bold",children:d((null==r?void 0:r.subscriptions.arr)||0)}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"Projected annual"})]}),V.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[V.jsx("p",{className:"text-sm text-muted-foreground",children:"Stripe Fees (Est.)"}),V.jsx("p",{className:"text-2xl font-bold text-red-500",children:d(Math.floor(6*((null==r?void 0:r.subscriptions.mrr)||0)*ks))}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"2.9% + $0.30/txn"})]}),V.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[V.jsx("p",{className:"text-sm text-muted-foreground",children:"Net Sub Revenue"}),V.jsx("p",{className:"text-2xl font-bold text-green-500",children:d(Math.floor(6*((null==r?void 0:r.subscriptions.mrr)||0)*.971))}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"After Stripe fees"})]})]})})]})]}),V.jsx(be,{value:"costs",className:"space-y-6",children:V.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(Xe,{className:"h-5 w-5 text-red-500"}),"Cost Breakdown"]}),V.jsx(J,{children:"All platform expenses"})]}),V.jsx(K,{children:V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx(ke,{className:"h-5 w-5 text-purple-500"}),V.jsxs("div",{children:[V.jsx("p",{className:"font-medium",children:"Stripe Fees"}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"2.9% + $0.30 per transaction"})]})]}),V.jsx("span",{className:"font-bold text-red-500",children:d((null==r?void 0:r.costs.stripeFees)||0)})]}),V.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx(fe,{className:"h-5 w-5 text-green-500"}),V.jsxs("div",{children:[V.jsx("p",{className:"font-medium",children:"Shopify Fees"}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"~2% per transaction"})]})]}),V.jsx("span",{className:"font-bold text-red-500",children:d((null==r?void 0:r.costs.shopifyFees)||0)})]}),V.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx(Ae,{className:"h-5 w-5 text-blue-500"}),V.jsxs("div",{children:[V.jsx("p",{className:"font-medium",children:"Printify Production"}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"~35% of print order value"})]})]}),V.jsx("span",{className:"font-bold text-red-500",children:d((null==r?void 0:r.costs.printifyCosts)||0)})]}),V.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx(Se,{className:"h-5 w-5 text-amber-500"}),V.jsxs("div",{children:[V.jsx("p",{className:"font-medium",children:"Lulu Book Production"}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"~40% of book order value"})]})]}),V.jsx("span",{className:"font-bold text-red-500",children:d((null==r?void 0:r.costs.luluCosts)||0)})]}),V.jsx(Pe,{}),V.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[V.jsx("span",{className:"font-semibold",children:"Total Costs"}),V.jsx("span",{className:"font-bold text-red-500 text-xl",children:d((null==r?void 0:r.costs.totalCosts)||0)})]})]})})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(me,{className:"h-5 w-5 text-blue-500"}),"Print Order Economics"]}),V.jsx(J,{children:"Per-order breakdown"})]}),V.jsx(K,{children:V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10",children:[V.jsx("p",{className:"text-xs text-muted-foreground",children:"Gross Revenue"}),V.jsx("p",{className:"text-lg font-bold text-green-500",children:d((null==r?void 0:r.interactions.totalPrintRevenue)||0)})]}),V.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10",children:[V.jsx("p",{className:"text-xs text-muted-foreground",children:"Production Cost"}),V.jsx("p",{className:"text-lg font-bold text-red-500",children:d((null==r?void 0:r.costs.printifyCosts)||0)})]})]}),V.jsxs("div",{className:"p-4 rounded-lg border border-primary/20 bg-primary/5",children:[V.jsx("p",{className:"text-sm font-medium mb-3",children:"Value Appreciation Distribution (17% of Profit)"}),V.jsxs("div",{className:"space-y-2 text-sm",children:[V.jsxs("div",{className:"flex justify-between",children:[V.jsx("span",{className:"text-muted-foreground",children:"Creator Royalty (40%)"}),V.jsx("span",{children:d((null==r?void 0:r.revenue.creatorPayouts)||0)})]}),V.jsxs("div",{className:"flex justify-between",children:[V.jsx("span",{className:"text-muted-foreground",children:"Education Fund (25%)"}),V.jsx("span",{children:d(Math.floor(.625*((null==r?void 0:r.revenue.creatorPayouts)||0)))})]}),V.jsxs("div",{className:"flex justify-between",children:[V.jsx("span",{className:"text-muted-foreground",children:"Palette Pool (20%)"}),V.jsx("span",{children:d(Math.floor(.5*((null==r?void 0:r.revenue.creatorPayouts)||0)))})]}),V.jsxs("div",{className:"flex justify-between",children:[V.jsx("span",{className:"text-muted-foreground",children:"Gamecard Pool (15%)"}),V.jsx("span",{children:d(Math.floor(.375*((null==r?void 0:r.revenue.creatorPayouts)||0)))})]})]})]}),V.jsxs("div",{className:"p-3 rounded-lg bg-primary/10 border border-primary/20",children:[V.jsxs("div",{className:"flex justify-between items-center",children:[V.jsx("span",{className:"font-semibold",children:"Platform Retention (83%)"}),V.jsx("span",{className:"font-bold text-primary text-lg",children:d(Math.floor(.83*((null==r?void 0:r.interactions.totalPrintRevenue)||0)-((null==r?void 0:r.costs.printifyCosts)||0)))})]}),V.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"After production costs"})]})]})})]})]})}),V.jsxs(be,{value:"marketplace",className:"space-y-6",children:[V.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(E,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Active Listings"})]}),V.jsx("p",{className:"text-2xl font-bold",children:(null==r?void 0:r.marketplace.activeListings)||0}),V.jsxs("p",{className:"text-xs text-muted-foreground",children:["Value: ",d((null==r?void 0:r.marketplace.totalListingValue)||0)]})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(Oe,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Completed Sales"})]}),V.jsx("p",{className:"text-2xl font-bold",children:(null==r?void 0:r.marketplace.soldListings)||0}),V.jsxs("p",{className:"text-xs text-muted-foreground",children:["Volume: ",d((null==r?void 0:r.marketplace.totalSalesVolume)||0)]})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(Fe,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Platform Fees (5%)"})]}),V.jsx("p",{className:"text-2xl font-bold text-green-500",children:d((null==r?void 0:r.marketplace.platformFees)||0)}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"From all sales"})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(Te,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Average Price"})]}),V.jsx("p",{className:"text-2xl font-bold",children:d((null==r?void 0:r.marketplace.averagePrice)||0)}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"Per listing"})]})})]}),V.jsxs(M,{children:[V.jsx(q,{children:V.jsx(I,{children:"Recent Sales"})}),V.jsx(K,{children:V.jsxs(Be,{children:[V.jsx(Le,{children:V.jsxs(qe,{children:[V.jsx(Ie,{children:"Vision"}),V.jsx(Ie,{children:"Sale Price"}),V.jsx(Ie,{children:"Platform Fee"}),V.jsx(Ie,{children:"Seller Receives"}),V.jsx(Ie,{children:"Date"})]})}),V.jsxs($e,{children:[null==c?void 0:c.map(e=>{var s;return V.jsxs(qe,{children:[V.jsx(Ge,{className:"font-medium",children:(null==(s=e.visualization)?void 0:s.title)||"Untitled"}),V.jsx(Ge,{children:d(e.price_cents)}),V.jsx(Ge,{className:"text-green-500",children:d(Math.floor(.05*e.price_cents))}),V.jsx(Ge,{children:d(Math.floor(.95*e.price_cents))}),V.jsx(Ge,{className:"text-muted-foreground",children:e.sold_at?U(new Date(e.sold_at),"MMM d, yyyy"):"-"})]},e.id)}),(!c||0===c.length)&&V.jsx(qe,{children:V.jsx(Ge,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No sales yet"})})]})]})})]})]}),V.jsxs(be,{value:"pools",className:"space-y-6",children:[V.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(R,{className:"h-5 w-5 text-primary"}),"Trademarked Palette Pool"]}),V.jsx(J,{children:"Value distributed to En Pensent® color palettes based on vision engagement"})]}),V.jsxs(K,{children:[V.jsx("div",{className:"p-4 rounded-lg bg-primary/10 border border-primary/20 mb-4",children:V.jsxs("div",{className:"flex justify-between items-center",children:[V.jsx("span",{className:"font-semibold",children:"Total Pool Value"}),V.jsx("span",{className:"font-bold text-primary text-xl",children:d((null==r?void 0:r.valuePools.totalPaletteValue)||0)})]})}),V.jsx("div",{className:"space-y-2",children:(null==r?void 0:r.valuePools.palettes)&&r.valuePools.palettes.length>0?r.valuePools.palettes.slice(0,5).map(e=>V.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-muted/50",children:[V.jsxs("div",{children:[V.jsx("p",{className:"font-medium",children:e.palette_name}),V.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.total_print_orders," prints"]})]}),V.jsx("span",{className:"font-bold",children:d(e.earned_value_cents)})]},e.id)):V.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No palette value accumulated yet"})})]})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(z,{className:"h-5 w-5 text-amber-500"}),"Legendary Game Card Pool"]}),V.jsx(J,{children:"Value distributed to iconic chess games based on vision engagement"})]}),V.jsxs(K,{children:[V.jsx("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20 mb-4",children:V.jsxs("div",{className:"flex justify-between items-center",children:[V.jsx("span",{className:"font-semibold",children:"Total Pool Value"}),V.jsx("span",{className:"font-bold text-amber-500 text-xl",children:d((null==r?void 0:r.valuePools.totalGamecardValue)||0)})]})}),V.jsx("div",{className:"space-y-2",children:(null==r?void 0:r.valuePools.gamecards)&&r.valuePools.gamecards.length>0?r.valuePools.gamecards.slice(0,5).map(e=>V.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-muted/50",children:[V.jsxs("div",{children:[V.jsx("p",{className:"font-medium",children:e.game_title}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(H,{variant:"outline",className:"text-xs",children:e.rarity_tier}),V.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.total_print_orders," prints"]})]})]}),V.jsx("span",{className:"font-bold",children:d(e.earned_value_cents)})]},e.id)):V.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No gamecard value accumulated yet"})})]})]})]}),V.jsxs(M,{className:"border-primary/20",children:[V.jsx(q,{children:V.jsx(I,{children:"Value Pool Distribution Model"})}),V.jsx(K,{children:V.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[V.jsxs("div",{children:[V.jsx("h4",{className:"font-semibold mb-2",children:"How It Works"}),V.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["When visions are engaged with (prints ordered, downloads, trades), 17% of the ",V.jsx("strong",{children:"profit"})," (not revenue) goes to value appreciation. This 17% is then distributed:"]}),V.jsxs("ul",{className:"space-y-2 text-sm",children:[V.jsxs("li",{className:"flex items-center gap-2",children:[V.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),V.jsx("span",{children:"40% → Vision Owner (Creator Royalty)"})]}),V.jsxs("li",{className:"flex items-center gap-2",children:[V.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),V.jsx("span",{children:"25% → Education Fund"})]}),V.jsxs("li",{className:"flex items-center gap-2",children:[V.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),V.jsx("span",{children:"20% → Palette Pool"})]}),V.jsxs("li",{className:"flex items-center gap-2",children:[V.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),V.jsx("span",{children:"15% → Gamecard Pool"})]})]})]}),V.jsxs("div",{children:[V.jsx("h4",{className:"font-semibold mb-2",children:"Pool Benefits"}),V.jsx("p",{className:"text-sm text-muted-foreground",children:"The palette and gamecard pools create intrinsic value for En Pensent® intellectual property. As more visions using specific palettes or based on legendary games are engaged with, those palettes and gamecards accumulate value, strengthening the brand's IP portfolio and creating potential licensing opportunities."})]})]})})]})]}),V.jsxs(be,{value:"wallets",className:"space-y-6",children:[V.jsxs("div",{className:"grid md:grid-cols-5 gap-4",children:[V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(oe,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Wallet Users"})]}),V.jsx("p",{className:"text-2xl font-bold",children:(null==r?void 0:r.wallets.totalUsers)||0})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(ve,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Total Balances"})]}),V.jsx("p",{className:"text-2xl font-bold",children:d((null==r?void 0:r.wallets.totalBalances)||0)})]})}),V.jsx(M,{className:"border-green-500/30",children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(B,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Total Deposited"})]}),V.jsx("p",{className:"text-2xl font-bold text-green-500",children:d((null==r?void 0:r.wallets.totalDeposited)||0)})]})}),V.jsx(M,{className:"border-red-500/30",children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(ce,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Total Withdrawn"})]}),V.jsx("p",{className:"text-2xl font-bold text-red-500",children:d((null==r?void 0:r.wallets.totalWithdrawn)||0)})]})}),V.jsx(M,{className:"border-amber-500/30",children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(Ve,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Pending Withdrawals"})]}),V.jsx("p",{className:"text-2xl font-bold text-amber-500",children:(null==r?void 0:r.withdrawals.pending)||0}),V.jsx("p",{className:"text-xs text-muted-foreground",children:d((null==r?void 0:r.withdrawals.pendingAmount)||0)})]})})]}),V.jsxs(M,{children:[V.jsx(q,{children:V.jsx(I,{children:"Recent Transactions"})}),V.jsx(K,{children:V.jsxs(Be,{children:[V.jsx(Le,{children:V.jsxs(qe,{children:[V.jsx(Ie,{children:"Type"}),V.jsx(Ie,{children:"Amount"}),V.jsx(Ie,{children:"Balance After"}),V.jsx(Ie,{children:"Description"}),V.jsx(Ie,{children:"Date"})]})}),V.jsx($e,{children:null==i?void 0:i.slice(0,10).map(e=>V.jsxs(qe,{children:[V.jsx(Ge,{children:V.jsx(H,{variant:e.amount_cents>=0?"default":"destructive",children:e.transaction_type})}),V.jsxs(Ge,{className:e.amount_cents>=0?"text-green-500":"text-red-500",children:[e.amount_cents>=0?"+":"",d(e.amount_cents)]}),V.jsx(Ge,{children:d(e.balance_after_cents)}),V.jsx(Ge,{className:"text-muted-foreground max-w-[200px] truncate",children:e.description||"-"}),V.jsx(Ge,{className:"text-muted-foreground",children:U(new Date(e.created_at),"MMM d, HH:mm")})]},e.id))})]})})]})]}),V.jsxs(be,{value:"education",className:"space-y-6",children:[V.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[V.jsx(M,{className:"border-blue-500/30 bg-gradient-to-br from-blue-500/5 to-blue-500/10",children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(ge,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Total Fund"})]}),V.jsx("p",{className:"text-2xl font-bold text-blue-500",children:d((null==r?void 0:r.educationFund.totalFundContributions)||0)})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(oe,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Scholarships Funded"})]}),V.jsx("p",{className:"text-2xl font-bold",children:(null==r?void 0:r.educationFund.scholarshipsAwarded)||0}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"$7/month each"})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(xe,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Visions Released"})]}),V.jsx("p",{className:"text-2xl font-bold",children:(null==r?void 0:r.educationFund.totalVisionsReleased)||0}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"From lapsed subscriptions"})]})}),V.jsx(M,{children:V.jsxs(K,{className:"pt-6",children:[V.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[V.jsx(de,{className:"h-4 w-4"}),V.jsx("span",{className:"text-xs",children:"Forfeited Value"})]}),V.jsx("p",{className:"text-2xl font-bold",children:d((null==r?void 0:r.educationFund.totalForfeitedValue)||0)}),V.jsx("p",{className:"text-xs text-muted-foreground",children:"85% to education"})]})})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsx(I,{children:"Education Fund Allocation"}),V.jsx(J,{children:"How the chess education fund receives contributions"})]}),V.jsx(K,{children:V.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[V.jsxs("div",{className:"p-4 rounded-lg border",children:[V.jsx("h4",{className:"font-semibold mb-2",children:"Lapsed Subscriptions"}),V.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"When premium members cancel and don't renew within the 7-day grace period:"}),V.jsxs("ul",{className:"text-sm space-y-1",children:[V.jsx("li",{children:"• 85% of forfeited vision value → Education Fund"}),V.jsx("li",{children:"• 15% platform fee"}),V.jsx("li",{children:"• Visions become claimable on marketplace"})]})]}),V.jsxs("div",{className:"p-4 rounded-lg border",children:[V.jsx("h4",{className:"font-semibold mb-2",children:"Print Orders"}),V.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"From the 17% profit appreciation pool:"}),V.jsxs("ul",{className:"text-sm space-y-1",children:[V.jsx("li",{children:"• 25% of value appreciation → Education Fund"}),V.jsx("li",{children:"• Based on profit, not revenue"})]})]}),V.jsxs("div",{className:"p-4 rounded-lg border",children:[V.jsx("h4",{className:"font-semibold mb-2",children:"Marketplace Sales"}),V.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"5% platform fee contributes to:"}),V.jsxs("ul",{className:"text-sm space-y-1",children:[V.jsx("li",{children:"• Platform operations"}),V.jsx("li",{children:"• Partial allocation to education initiatives"})]})]})]})})]})]})]})]}),V.jsx(Ee,{})]})},Ss=({formatCents:e})=>{const s=O(),{data:t,isLoading:a}=F({queryKey:["financial-trends"],queryFn:()=>Re(30)}),{data:r}=F({queryKey:["palette-value-pools"],queryFn:X}),{data:n}=F({queryKey:["gamecard-value-pools"],queryFn:Y}),l=ze({mutationFn:Me,onSuccess:()=>{Ke.success("Daily snapshot captured!"),s.invalidateQueries({queryKey:["financial-trends"]})},onError:()=>{Ke.error("Failed to capture snapshot")}}),i=(t||[]).slice().reverse().map(e=>({date:U(new Date(e.date),"MMM d"),revenue:(e.dailySubscriptionRevenueCents+e.dailyPrintRevenueCents+e.dailyMarketplaceFeeCents)/100,costs:(e.dailyStripeFeesCents+e.dailyShopifyFeesCents+e.dailyPrintifyCostsCents)/100,views:e.dailyViews,downloads:e.dailyDownloads,trades:e.dailyTrades,visions:e.dailyVisionsCreated,palettePool:e.totalPalettePoolValueCents/100,gamecardPool:e.totalGamecardPoolValueCents/100})),c=(r||[]).reduce((e,s)=>e+s.totalValueCents,0),d=(n||[]).reduce((e,s)=>e+s.totalValueCents,0);return V.jsxs(be,{value:"trends",className:"space-y-6",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{children:[V.jsx("h3",{className:"text-lg font-semibold",children:"Financial Trends"}),V.jsx("p",{className:"text-sm text-muted-foreground",children:"30-day rolling performance data"})]}),V.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>l.mutate(),disabled:l.isPending,className:"gap-2",children:[V.jsx(Qe,{className:"h-4 w-4"}),"Capture Today's Snapshot"]})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(B,{className:"h-5 w-5 text-green-500"}),"Revenue vs Costs"]}),V.jsx(J,{children:"Daily revenue and cost comparison"})]}),V.jsx(K,{children:V.jsx("div",{className:"h-[300px]",children:a?V.jsx("div",{className:"h-full flex items-center justify-center",children:V.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i.length>0?V.jsx(ye,{width:"100%",height:"100%",children:V.jsxs(Ps,{data:i,children:[V.jsx(Ce,{strokeDasharray:"3 3",className:"stroke-muted"}),V.jsx(k,{dataKey:"date",tick:{fontSize:12}}),V.jsx(A,{tickFormatter:e=>`$${e}`}),V.jsx(Ne,{formatter:(e,s)=>[`$${e.toFixed(2)}`,s],contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),V.jsx(we,{}),V.jsx(_,{type:"monotone",dataKey:"revenue",fill:"hsl(var(--chart-1) / 0.2)",stroke:"hsl(var(--chart-1))",name:"Revenue"}),V.jsx(He,{type:"monotone",dataKey:"costs",stroke:"hsl(var(--destructive))",name:"Costs",strokeWidth:2,dot:!1})]})}):V.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:V.jsx("p",{children:"No trend data yet. Capture your first snapshot above."})})})})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(E,{className:"h-5 w-5 text-primary"}),"Daily Engagement"]}),V.jsx(J,{children:"Views, downloads, trades, and new visions"})]}),V.jsx(K,{children:V.jsx("div",{className:"h-[250px]",children:i.length>0?V.jsx(ye,{width:"100%",height:"100%",children:V.jsxs(Ze,{data:i,children:[V.jsx(Ce,{strokeDasharray:"3 3",className:"stroke-muted"}),V.jsx(k,{dataKey:"date",tick:{fontSize:12}}),V.jsx(A,{}),V.jsx(Ne,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),V.jsx(we,{}),V.jsx(C,{dataKey:"views",fill:"hsl(var(--chart-1))",name:"Views"}),V.jsx(C,{dataKey:"downloads",fill:"hsl(var(--chart-2))",name:"Downloads"}),V.jsx(C,{dataKey:"trades",fill:"hsl(var(--chart-3))",name:"Trades"}),V.jsx(C,{dataKey:"visions",fill:"hsl(var(--chart-4))",name:"New Visions"})]})}):V.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:V.jsx("p",{children:"Engagement data will appear here after snapshots."})})})})]}),V.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(R,{className:"h-5 w-5 text-purple-500"}),"Palette Value Pool"]}),V.jsx(J,{children:"Top performing trademarked palettes"})]}),V.jsxs(K,{children:[V.jsx("div",{className:"text-2xl font-bold mb-4",children:e(c)}),V.jsx("div",{className:"space-y-3",children:(r||[]).slice(0,8).map(s=>V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"font-medium",children:s.name}),V.jsxs(H,{variant:"outline",className:"text-xs",children:[s.usageCount," uses"]})]}),V.jsx("span",{className:"text-sm font-medium",children:e(s.totalValueCents)})]},s.id))})]})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(z,{className:"h-5 w-5 text-amber-500"}),"Gamecard Value Pool"]}),V.jsx(J,{children:"Legendary chess games by rarity"})]}),V.jsxs(K,{children:[V.jsx("div",{className:"text-2xl font-bold mb-4",children:e(d)}),V.jsx("div",{className:"space-y-3",children:(n||[]).slice(0,8).map(s=>V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"font-medium truncate max-w-[180px]",children:s.name}),V.jsx(H,{variant:"outline",className:"text-xs "+("legendary"===s.rarityTier?"border-amber-500 text-amber-500":"epic"===s.rarityTier?"border-purple-500 text-purple-500":"rare"===s.rarityTier?"border-blue-500 text-blue-500":"border-muted-foreground"),children:s.rarityTier})]}),V.jsx("span",{className:"text-sm font-medium",children:e(s.totalValueCents)})]},s.id))})]})]})]}),V.jsxs(M,{children:[V.jsxs(q,{children:[V.jsxs(I,{className:"flex items-center gap-2",children:[V.jsx(B,{className:"h-5 w-5 text-primary"}),"Total Market Value Growth"]}),V.jsx(J,{children:"Combined palette and gamecard pool values over time"})]}),V.jsx(K,{children:V.jsx("div",{className:"h-[250px]",children:i.length>0?V.jsx(ye,{width:"100%",height:"100%",children:V.jsxs(De,{data:i,children:[V.jsx(Ce,{strokeDasharray:"3 3",className:"stroke-muted"}),V.jsx(k,{dataKey:"date",tick:{fontSize:12}}),V.jsx(A,{tickFormatter:e=>`$${e}`}),V.jsx(Ne,{formatter:(e,s)=>[`$${e.toFixed(2)}`,s],contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),V.jsx(we,{}),V.jsx(_,{type:"monotone",dataKey:"palettePool",stackId:"1",fill:"hsl(var(--chart-3) / 0.5)",stroke:"hsl(var(--chart-3))",name:"Palette Pool"}),V.jsx(_,{type:"monotone",dataKey:"gamecardPool",stackId:"1",fill:"hsl(var(--chart-4) / 0.5)",stroke:"hsl(var(--chart-4))",name:"Gamecard Pool"})]})}):V.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:V.jsx("p",{children:"Market cap history will appear after snapshots."})})})})]})]})};export{As as default};
