import{aJ as e,r as t,bu as s,bv as n,u as r,bw as a,s as i,b as o,bx as c,by as l,j as d,bz as u,aT as m,bi as x,q as h,br as p,aV as f,aY as g,bA as v,b7 as b,bB as y,aZ as w,bC as j,ad as C,aj as N,bD as k,bE as M,af as z,ag as D,ai as B,y as L,bF as q,bG as A,b6 as S,ae as P,bH as H,ah as I,bI as G,B as U,bJ as E,bK as T,bL as W,bM as K,bN as Y,bO as _,bP as O,bQ as J,bR as X,bS as F,bT as R,bU as V,bV as Z,bW as $,bX as Q,bY as ee,bZ as te,aU as se,b_ as ne,bq as re,bt as ae,b$ as ie,c0 as oe,c1 as ce,S as le,am as de,c2 as ue,a as me,ar as xe,c3 as he,as as pe,c4 as fe,a1 as ge,a2 as ve,a3 as be,a4 as ye,a5 as we,c5 as je,L as Ce,ax as Ne,b1 as ke,c6 as Me,c7 as ze,an as De,av as Be,aw as Le,c8 as qe,aM as Ae,c9 as Se,H as Pe,P as He,ca as Ie,b3 as Ge,bs as Ue,be as Ee,cb as Te,aP as We,cc as Ke,d as Ye,b2 as _e,a9 as Oe,cd as Je,ce as Xe,cf as Fe,al as Re,au as Ve}from"./index-DBmMOexX.js";import{L as Ze}from"./LiveColorLegend-DGVBPoLt.js";import{T as $e}from"./trending-down-CxCJGvVN.js";import Qe from"./html2canvas.esm-C2s7aB6S.js";import{b as et}from"./browser-DEPKJqf2.js";import{S as tt,M as st}from"./sun-63z3fYXJ.js";const nt=e("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rt=e("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),at=e("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),it=e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ot=e("Volume1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),ct=e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),lt=e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);!function(){const e=mt,t=ut();for(;;)try{if(347664===parseInt(e(135))/1+-parseInt(e(111))/2+parseInt(e(108))/3+-parseInt(e(172))/4+parseInt(e(154))/5*(-parseInt(e(153))/6)+parseInt(e(131))/7+-parseInt(e(152))/8*(-parseInt(e(130))/9))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const dt=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[mt(141)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=mt,t={JHqhW:"(((.+)+)+)+$"},s=t;return dt[e(127)]().search(s.JHqhW)[e(127)]().constructor(dt).search("(((.+)+)+)+$")});function ut(){const e=["Dw5RBM93BG","uhHlD2G","C3bSAxq","DgfIBgu","zsbMAwz0Es1TBW","BgvUz3rO","Bg9N","D3bWr0S","zuTUtMe","BNqGtwf0zxjPyq","Cgv0AxrPB24U","r2fTzsbKCMf3BG","CM4GDgHPCYiPka","AMrRrxm","mtK5oda5nKTnB0v6DW","y29UC3rYDwn0BW","AxnuAhjLzwzVBa","qK5WENq","ig1HDgvYAwfSlG","zfjLCgv0AxrPBW","vgHYzwvMB2XKia","mtyXodyYmgzsCxLxsG","zxHJzxb0Aw9U","BujUrKG","otK1ntC2zg9Zt1v5","C3vMzMLJAwvUDa","ChjVDg90ExbL","Aw5MBW","sw5ZDwzMAwnPzq","BwvZC2fNzq","CMv0DxjUicHMDq","zezxDgm","zMvU","DhjHy2u","BNrFBwf0zxjPyq","DgHYzwvMB2XKxW","C3rHBgvTyxrL","C2HVCNrnzxnZyq","AxnjBNn1zMzPyW","rhjHDYbIEsb0Aa","Dg9tDhjPBMC","DMngtKi","Bw92zxmGyxzHAq","nZm4CLLwCgzz","ndyYnZu2n1PJDMLcua","AwvUDe1HDgvYAq","u3rHBgvTyxrLiq","D2fYBG","odi1otDgAK1UBLu","AxneCMf3","ntaTtw92zsbsDq","DMuGCNvSzs4","yMLUza","BgfIBguU","yxbWBhK","y3rVCIGICMv0Dq","y29UC29Szq","uMvWzxrPDgLVBG","CMvLzM9SzcbYzq","CePLqLO","CMvHC29U","A2n0tNa","CMvWzxrPDgLVBG","zMLMDhLFBw92zq","rhjHDYbIEsbPBG","nJG3otjoDvzvtLG","oty1mdrHDfjIA2O","mJaWu2rHvfHm","AxntDgfSzw1HDa","ANrsEKi","ie5VigXLz2fSia"];return(ut=function(){return e})()}function mt(e,t){e-=103;const s=ut();let n=s[e];if(void 0===mt.pQljKh){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};mt.iXiJqq=r,mt.DOHSYW={},mt.pQljKh=!0}const a=e+s[0],i=mt.DOHSYW[a];if(i)n=i;else{const e=function(e){this.BSrVfU=e,this.UvdZCN=[1,0,0],this.TCWLxc=function(){return"newState"},this.UnKVBy="\\w+ *\\(\\) *{\\w+ *",this.uRNjec="['|\"].+['|\"];? *}"};e.prototype.GweZYI=function(){const e=new RegExp(this.UnKVBy+this.uRNjec).test(this.TCWLxc.toString())?--this.UvdZCN[1]:--this.UvdZCN[0];return this.BQzuWQ(e)},e.prototype.BQzuWQ=function(e){return Boolean(~e)?this.HdQXRR(this.BSrVfU):e},e.prototype.HdQXRR=function(e){for(let t=0,s=this.UvdZCN.length;t<s;t++)this.UvdZCN.push(Math.round(Math.random())),s=this.UvdZCN.length;return e(this.UvdZCN[0])},new e(mt).GweZYI(),n=mt.iXiJqq(n),mt.DOHSYW[a]=n}return n}dt();const xt=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[mt(141)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();function ht(e){const t=mt,s={PxKwh:t(133)+t(157)+t(129)+t(140),kctNp:t(133),lSYDL:t(122)+t(149),RSxGN:function(e,t,s){return e(t,s)},dFWtc:t(137)+"le",wppGK:"Draw"};if(e[t(155)+"e"]()){const e={};return e[t(147)]=t(123),e[t(116)]=s[t(159)],e.shortMessage=s[t(148)],e}if(e[t(103)+t(106)+"n"]()){const e={};return e.reason=s.lSYDL,e[t(116)]=t(126)+t(145)+t(168),e[t(124)+"ge"]=t(107)+t(144),e}if(e[t(125)+t(132)+"al"]()){const e={};return e[t(147)]="insufficie"+t(121)+"l",e[t(116)]=t(151)+t(112)+t(105),e[t(124)+"ge"]=t(115)+t(167)+"l",e}const n=e[t(119)]();if(s.RSxGN(parseInt,n[t(160)](" ")[4],10)>=100){const e={};return e[t(147)]=t(150)+"_rule",e[t(116)]=t(126)+t(162)+t(138),e[t(124)+"ge"]=s[t(118)],e}const r={};return r[t(147)]=t(158),r[t(116)]=t(169)+"!",r[t(124)+"ge"]=s[t(165)],r}function pt(e){const t=mt;return{eKnNa:function(e,t){return e(t)}}[t(166)](ht,e)[t(116)]}xt(void 0,function(){const e=mt,t={};t[e(128)]=e(164),t[e(146)]=e(134),t[e(104)]=e(114),t.jtRzB="error",t[e(171)]=e(109),t.BYFtZ=e(120),t[e(110)]=function(e,t){return e<t};const s=t,n=function(){const t=e;let s;try{s=Function(t(117)+"nction() {}.constru"+t(142)+t(170)+" ));")()}catch(n){s=window}return s}(),r=n[e(143)]=n[e(143)]||{},a=[s[e(128)],s.pJeBZ,s[e(104)],s[e(156)],s[e(171)],e(161),s.BYFtZ];for(let i=0;s[e(110)](i,a[e(163)]);i++){const t=xt[e(173)+"r"][e(113)].bind(xt),s=a[i],n=r[s]||t;t.__proto__=xt[e(139)](xt),t[e(127)]=n[e(127)][e(139)](n),r[s]=t}})(),function(){const e=gt,t=vt();for(;;)try{if(238862===parseInt(e(426))/1+parseInt(e(377))/2*(parseInt(e(413))/3)+-parseInt(e(333))/4+parseInt(e(423))/5*(-parseInt(e(417))/6)+parseInt(e(357))/7*(parseInt(e(432))/8)+-parseInt(e(397))/9+-parseInt(e(410))/10*(parseInt(e(343))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const ft=function(){const e=gt,t={};t[e(435)]=function(e,t){return e!==t},t[e(362)]=e(402),t.ESmBJ="udxPu";const s=t;let n=!0;return function(t,r){const a=e;if(s[a(435)](s[a(362)],s[a(418)])){const e=n?function(){if(r){const e=r[a(379)](t,arguments);return r=null,e}}:function(){};return n=!1,e}{const e=_0x214cc4?function(){if(_0x1ea341){const e=_0x1a668a.apply(_0x21d0e9,arguments);return _0x59f30a=null,e}}:function(){};return _0x520286=!1,e}}}()(void 0,function(){const e=gt,t={};t[e(420)]="(((.+)+)+)+$";const s=t;return ft[e(334)]()[e(378)](s.zyqIV)[e(334)]()[e(388)+"r"](ft)[e(378)](e(330)+"+$")});function gt(e,t){e-=327;const s=vt();let n=s[e];if(void 0===gt.npaGuU){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};gt.BQoXcl=r,gt.ZEDSxQ={},gt.npaGuU=!0}const a=e+s[0],i=gt.ZEDSxQ[a];if(i)n=i;else{const e=function(e){this.bcWghu=e,this.eLJRXS=[1,0,0],this.CAFSZk=function(){return"newState"},this.MBrlhP="\\w+ *\\(\\) *{\\w+ *",this.kXbddo="['|\"].+['|\"];? *}"};e.prototype.rkISvS=function(){const e=new RegExp(this.MBrlhP+this.kXbddo).test(this.CAFSZk.toString())?--this.eLJRXS[1]:--this.eLJRXS[0];return this.zriwNh(e)},e.prototype.zriwNh=function(e){return Boolean(~e)?this.efLKmZ(this.bcWghu):e},e.prototype.efLKmZ=function(e){for(let t=0,s=this.eLJRXS.length;t<s;t++)this.eLJRXS.push(Math.round(Math.random())),s=this.eLJRXS.length;return e(this.eLJRXS[0])},new e(gt).rkISvS(),n=gt.BQoXcl(n),gt.ZEDSxQ[a]=n}return n}function vt(){const e=["D2zLwuC","n2rWBvjTAa","ChbVCNrLza","zxHWB25LBNrPyq","D2fYBG","EgPTsM8","u3vWwvG","y3vYCMvUDa","ELDvDKK","vg9wywX1zuf0va","zxjtB3vYy2u","BgvUz3rO","y3jLyxrLr2fPBG","zvbfsLO","BMn0Aw9UkcKG","C2v0vMfSDwvbDa","zNjLCxvLBMn5","C3rHCNq","sK9etuO","DhDTwfu","C2fTCgXLuMf0zq","mZKWnJGYrgDdruzP","C2vHCMnO","yxbWBhK","C2f3Dg9VDgG","sxjjzey","DunsBNm","CM4GDgHPCYiPka","CNf4vKC","q0LlAKW","Bg9N","svPVyNK","y29UC3rYDwn0BW","y2XVC2u","y3rVCIGICMv0Dq","CMv0DxjUicHMDq","vwHbsvi","C3rVCa","Bw92zq","vgLTzq","y29UDgv4Da","mtC0mdyWuLv6BeHc","x19WCM90B19F","B0nVBNrLEhq","thjtt2O","y2HLy2S","tNPtwuK","D2vIA2L0qxvKAq","DhjPyw5NBgu","DwvbDfrPBwu","y2fZDgXL","zgvZDgLUyxrPBW","wgXRAwW","Bg93CgfZCW","mtbZD2LOv0y","rxnbsum","rgf0yq","nKvjqMv0Ba","yMLUza","DMfSDwu","z2fPBG","mZqYEfrhweLg","rvnTqKO","y3jLyxrLqNvMzG","ENLXsvy","BfjHBxbuB1zHBa","z2fTzvn0yxj0","mZK0nwXcsvnpwq","r3vLv0S","BgLUzwfYuMfTCa","mtCWnZqWz05cy3ji","y3jLyxrLt3nJAq","vvjurfu","txvqtgW","y2fWDhvYzq","y3jLyxrLqMLXDq","mJaZotG5nKvwwLzcrq","C2LUzq","q0LyC0W","txvhtxe","ChjVDg90ExbL","z2fPBK5Vzgu","EuLiz1O","sMXrqKu","CgjyAMS","ywrgAwX0zxi","Aw1L","E30Uy29UC3rYDq","y29UC29Szq","kcGOlISPkYKRkq","zLrYvee","CgXHEvnVDw5K","mtyYody2me91ExDfBa","Dg9tDhjPBMC","zgLiEui","CMfUzg9T","y3vYCMvUDfrPBq","y29UBMvJDa","zu1Ks04","DhLWzq","BgXHDg9Y","q1zbC1y","mte2nJC1ovDyy2LLyq","zgvMzwf0","Aw5PDef1zgLV","zhjHDW","DK51swm","ExPeBgm","qxvKAw9dB250zq","uMjAz2m","AwXSzwDHBa","y2HLy2TTyxrL","zxHJzxb0Aw9U","qMjYtxi","C3f1yxjL"];return(vt=function(){return e})()}ft();const bt=function(){const e=gt,t={};t[e(331)]="wFYuU",t.uCRns=function(e,t){return e!==t},t[e(374)]=e(429),t[e(350)]="Weyqi";const s=t;let n=!0;return function(e,t){const r=n?function(){const n=gt;if(s[n(331)]==s[n(331)]){if(t){if(s[n(382)](s[n(374)],s[n(350)])){const s=t[n(379)](e,arguments);return t=null,s}{const e=_0x42c618?function(){if(_0x4a1887){const e=_0x4abb25[n(379)](_0x5eaaeb,arguments);return _0x119dee=null,e}}:function(){};return _0x1d3abb=!1,e}}}else _0xd2286e[n(363)][n(396)]&&_0x120def.current.context[n(389)]()}:function(){};return n=!1,r}}();bt(void 0,function(){const e=gt,t={MdJsZ:function(e,t){return e(t)},twmXU:function(e,t){return e+t},pbXjk:e(386),UhAIR:"warn",CIKjL:"error",URTDU:e(353),IrIdF:"trace",vNuIc:function(e,t){return e<t}};let s;try{s=t.MdJsZ(Function,t[e(375)](e(391)+e(370)+(e(328)+e(390)+e(383)+" )"),");"))()}catch(a){s=window}const n=s[e(329)]=s[e(329)]||{},r=[t[e(440)],t[e(392)],"info",t[e(385)],t[e(428)],"table",t[e(381)]];for(let i=0;t[e(347)](i,r[e(367)]);i++){const t=bt[e(388)+"r"][e(436)][e(414)](bt),s=r[i],a=n[s]||t;t[e(398)]=bt[e(414)](bt),t[e(334)]=a[e(334)][e(414)](a),n[s]=t}})();const yt=(e=!0,s=.5)=>{const n=gt,r={cPjBZ:"Web Audio API not su"+n(358),EsAIC:"XnHge",sLaIF:function(e,t){return e+t},mxoFS:function(e,t){return e||t},JlQBE:n(409),xjmJo:n(394),wfeYG:n(433),rqxVG:function(e,t,s,n,r,a){return e(t,s,n,r,a)},ePEJZ:n(355),Xlkil:n(406),yIHgZ:function(e,t,s){return e(t,s)},SZtkF:n(401),IZoby:n(352),yzDlc:function(e,t,s){return e(t,s)},QIySN:n(422),gFJaY:function(e,t,s){return e(t,s)},LrSOj:function(e,t,s,n,r,a){return e(t,s,n,r,a)},CIXsL:n(404),BbrMr:"victory",eMdKN:function(e,t,s){return e(t,s)},diHyB:n(344),GueWK:function(e,t,s){return e(t,s)},cWJKV:n(380),zWUvI:function(e,t,s){return e(t,s)},CVAsV:function(e,t,s){return e(t,s)}},a={};a[n(396)]=null,a[n(437)]=null;const i=t.useRef(a),o=r.GueWK(t.useCallback,()=>{const e=n;if(!i[e(363)][e(396)])try{const t=new(window[e(349)+"xt"]||window[e(403)+e(399)]),n=t[e(368)]();n.connect(t.destination),n[e(416)][e(415)]=s;const r={};r[e(396)]=t,r[e(437)]=n,i[e(363)]=r}catch(t){}},[s]);t.useEffect(()=>{const e=n;i[e(363)].gainNode&&(i[e(363)].gainNode[e(416)][e(415)]=s)},[s]);const c=t.useCallback((t,s,a=n(433),c=.01,l=.1,d)=>{const u=n;if(!e)return;o();const{context:m,gainNode:x}=i[u(363)];if(!m||!x)return;const h=m[u(427)+u(341)](),p=m[u(368)]();if(h[u(340)]=a,h[u(372)][u(371)+"Time"](t,m[u(337)+"e"]),d)if(r.EsAIC===r[u(411)])h[u(372)][u(359)+"lRampToValueAtTime"](d,m[u(337)+"e"]+s);else{const e=new(_0x47fd2a[u(349)+"xt"]||_0x4aea66["webkitAudi"+u(399)]),t=e[u(368)]();t[u(338)](e[u(407)+"n"]),t[u(416)][u(415)]=_0x132b85;const s={};s.context=e,s.gainNode=t,_0x4ca70f[u(363)]=s}p[u(416)][u(371)+"Time"](0,m[u(337)+"e"]),p[u(416)][u(425)+u(365)+u(327)](1,m[u(337)+"e"]+c),p[u(416)][u(359)+"lRampToVal"+u(405)](.01,r.sLaIF(m[u(337)+"e"],s)-l),p[u(416)][u(425)+u(365)+"ime"](0,m[u(337)+"e"]+s),h[u(338)](p),p[u(338)](x),h.start(m[u(337)+"e"]),h[u(393)](m[u(337)+"e"]+s)},[e,o]),l=t.useCallback((t,s=1e3)=>{const a=n;if(!e)return;o();const{context:c,gainNode:l}=i[a(363)];if(r.mxoFS(!c,!l))return;const d=c[a(376)]*t,u=c[a(419)+"er"](1,d,c[a(376)]),m=u["getChannel"+a(412)](0);for(let e=0;e<d;e++)m[e]=2*Math[a(336)]()-1;const x=c[a(419)+a(366)]();x.buffer=u;const h=c[a(431)+a(441)]();h[a(340)]=r[a(439)],h[a(372)][a(415)]=s;const p=c[a(368)]();p[a(416)]["setValueAt"+a(395)](.3,c[a(337)+"e"]),p[a(416)][a(359)+a(421)+"ueAtTime"](.01,c.currentTime+t),x[a(338)](h),h[a(338)](p),p.connect(l),x[a(373)](c[a(337)+"e"]),x[a(393)](c[a(337)+"e"]+t)},[e,o]),d=r[n(364)](t.useCallback,t=>{const s=n;if(e)switch(t){case r[s(361)]:c(800,.08,r[s(356)],.005,.05),r[s(384)](c,400,.06,s(404),.005,.04);break;case s(430):l(.12,2e3),c(300,.1,r[s(369)],.005,.08),c(150,.15,"sine",.01,.1);break;case r[s(408)]:c(600,.06,"sine",.005,.04),r[s(438)](setTimeout,()=>c(700,.06,"sine",.005,.04),80);break;case r.SZtkF:c(880,.15,s(404),.01,.1),setTimeout(()=>c(1100,.12,"triangle",.01,.08),120);break;case r[s(387)]:c(880,.2,s(433),.01,.15),r[s(348)](setTimeout,()=>c(660,.2,s(433),.01,.15),150),setTimeout(()=>c(440,.3,"sine",.01,.2),300),r[s(348)](setTimeout,()=>c(330,.4,s(433),.01,.3),500);break;case r.QIySN:c(523,.12,s(433),.01,.08),setTimeout(()=>c(659,.12,"sine",.01,.08),100),r.gFJaY(setTimeout,()=>c(784,.2,"sine",.01,.15),200);break;case"gameEnd":r[s(400)](c,440,.15,r[s(434)],.01,.1),setTimeout(()=>c(349,.25,s(404),.01,.2),150);break;case r[s(354)]:c(523,.1,r.wfeYG,.01,.08),setTimeout(()=>c(659,.1,s(433),.01,.08),100),r[s(339)](setTimeout,()=>c(784,.1,s(433),.01,.08),200),setTimeout(()=>c(1047,.3,s(433),.01,.25),300);break;case r[s(335)]:c(392,.2,r[s(356)],.02,.15),r[s(424)](setTimeout,()=>c(349,.2,s(433),.02,.15),200),r.yzDlc(setTimeout,()=>c(330,.3,s(433),.02,.25),400),setTimeout(()=>c(262,.4,s(433),.02,.35),650);break;case s(346):c(440,.15,r[s(356)],.01,.1),setTimeout(()=>c(440,.15,s(433),.01,.1),180),setTimeout(()=>c(523,.2,s(433),.01,.15),360);break;case s(351):c(200,.1,r[s(369)],.005,.08),c(150,.08,r.cWJKV,.005,.06)}},[e,c,l]);r[n(342)](t.useEffect,()=>()=>{const e=gt;i[e(363)][e(396)]&&i[e(363)].context[e(389)]()},[]);const u={};return u[n(332)]=d,u[n(345)]=o,u},wt=Ct;!function(){const e=Ct,t=zt();for(;;)try{if(273688===parseInt(e(149))/1+parseInt(e(127))/2*(-parseInt(e(131))/3)+-parseInt(e(126))/4+-parseInt(e(148))/5+parseInt(e(163))/6+-parseInt(e(129))/7*(parseInt(e(132))/8)+parseInt(e(141))/9)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const jt=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=Ct,t={};t[e(140)]=e(160)+"+$";const s=t;return jt[e(144)]().search(e(160)+"+$")[e(144)]()[e(156)+"r"](jt).search(s[e(140)])});function Ct(e,t){e-=126;const s=zt();let n=s[e];if(void 0===Ct.FzvmFc){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Ct.EPxtuA=r,Ct.kljqxI={},Ct.FzvmFc=!0}const a=e+s[0],i=Ct.kljqxI[a];if(i)n=i;else{const e=function(e){this.ydBPoV=e,this.jMcWFb=[1,0,0],this.qiZmsl=function(){return"newState"},this.IfxpRQ="\\w+ *\\(\\) *{\\w+ *",this.ITfWhp="['|\"].+['|\"];? *}"};e.prototype.xZAZvU=function(){const e=new RegExp(this.IfxpRQ+this.ITfWhp).test(this.qiZmsl.toString())?--this.jMcWFb[1]:--this.jMcWFb[0];return this.orDxdP(e)},e.prototype.orDxdP=function(e){return Boolean(~e)?this.wCDBPU(this.ydBPoV):e},e.prototype.wCDBPU=function(e){for(let t=0,s=this.jMcWFb.length;t<s;t++)this.jMcWFb.push(Math.round(Math.random())),s=this.jMcWFb.length;return e(this.jMcWFb[0])},new e(Ct).xZAZvU(),n=Ct.EPxtuA(n),Ct.kljqxI[a]=n}return n}jt();const Nt=function(){const e=Ct,t={};t[e(154)]=e(147);const s=t;let n=!0;return function(t,r){const a=e;if(s.CXKud===a(147)){const e=n?function(){if(r){const e=r[a(151)](t,arguments);return r=null,e}}:function(){};return n=!1,e}{const e=_0x185158[a(151)](_0x533222,arguments);return _0x379a5e=null,e}}}();Nt(void 0,function(){const e=Ct,t={uueyg:function(e,t){return e(t)},sZmzo:e(162)+e(133),lKYxw:e(138)+'ctor("return this")( )',vhkVW:function(e,t){return e===t},Mmrhy:e(146),XXugJ:"info",CRTKx:e(152),gEUri:e(161),AjYxA:e(158),zEtqB:function(e,t){return e<t}},s=function(){const s=e;let n;try{n=t[s(155)](Function,t.sZmzo+t.lKYxw+");")()}catch(r){if(t[s(142)](t[s(135)],s(146)))n=window;else if(_0x3eea47){const e=_0x881493[s(151)](_0x1baef5,arguments);return _0x5e6efd=null,e}}return n}(),n=s[e(159)]=s[e(159)]||{},r=["log",e(128),t[e(134)],t[e(143)],t[e(164)],e(136),t.AjYxA];for(let a=0;t[e(130)](a,r[e(153)]);a++){const t=Nt[e(156)+"r"].prototype[e(150)](Nt),s=r[a],i=n[s]||t;t[e(145)]=Nt.bind(Nt),t[e(144)]=i[e(144)].bind(i),n[s]=t}})();const kt={};kt[wt(137)]=wt(157)+wt(139);const Mt=s()(n(e=>({enabled:!0,volume:.5,setEnabled:t=>e({enabled:t}),setVolume:t=>e({volume:t}),toggleEnabled:()=>e(e=>({enabled:!e.enabled}))}),kt));function zt(){const e=["zMTNuvi","B0Xmv1O","mJi0mZCYmgvRExnjua","ndm0ntC5tM5Uu1Lz","yMLUza","yxbWBhK","zxjYB3i","BgvUz3rO","q1HlDwq","DxvLEwC","y29UC3rYDwn0BW","y2HLC3mTC291BG","DhjHy2u","y29UC29Szq","kcGOlISPkYKRkq","zxHJzxb0Aw9U","CMv0DxjUicHMDq","mJa5oty3mgf0v1PNtG","z0vvCMK","mta1odu4ohD2ugTerq","mZHKtuzgD2O","D2fYBG","n2jnrgv5zq","EKv0Cui","mJe3mJLYvxLdzfu","otq2otiWqMj1zMPZ","BMn0Aw9UkcKG","wfH1z0O","tw1YAhK","DgfIBgu","BMfTzq","E30Uy29UC3rYDq","zc1Zzxr0Aw5NCW","wfb1zM0","ndeYnJGZm1fAC0P4AG","DMHRvLC","q1jus3G","Dg9tDhjPBMC","x19WCM90B19F"];return(zt=function(){return e})()}const Dt=qt;!function(){const e=qt,t=At();for(;;)try{if(320184===parseInt(e(210))/1*(parseInt(e(237))/2)+-parseInt(e(266))/3+parseInt(e(295))/4*(parseInt(e(244))/5)+parseInt(e(250))/6*(-parseInt(e(317))/7)+parseInt(e(360))/8+parseInt(e(194))/9+parseInt(e(302))/10*(-parseInt(e(352))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const Bt=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[qt(359)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=qt,t={};t[e(247)]="(((.+)+)+)+$";const s=t;return Bt.toString().search(s[e(247)]).toString()[e(300)+"r"](Bt).search(s[e(247)])});Bt();const Lt=function(){const e=qt,t={};t[e(188)]=function(e,t){return e===t},t[e(376)]=e(339),t.wFiYx=e(315);const s=t;let n=!0;return function(t,r){const a=e;if(!s[a(188)](s[a(376)],s[a(299)])){const e=n?function(){if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return n=!1,e}_0x2c43cd(!1)}}();function qt(e,t){e-=172;const s=At();let n=s[e];if(void 0===qt.fiFocT){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};qt.YvfJan=r,qt.mVWDtX={},qt.fiFocT=!0}const a=e+s[0],i=qt.mVWDtX[a];if(i)n=i;else{const e=function(e){this.shDiNR=e,this.bNwSek=[1,0,0],this.vQTHoX=function(){return"newState"},this.ZYyxPH="\\w+ *\\(\\) *{\\w+ *",this.xdVcBy="['|\"].+['|\"];? *}"};e.prototype.JSbAKm=function(){const e=new RegExp(this.ZYyxPH+this.xdVcBy).test(this.vQTHoX.toString())?--this.bNwSek[1]:--this.bNwSek[0];return this.oJCwep(e)},e.prototype.oJCwep=function(e){return Boolean(~e)?this.VUixKo(this.shDiNR):e},e.prototype.VUixKo=function(e){for(let t=0,s=this.bNwSek.length;t<s;t++)this.bNwSek.push(Math.round(Math.random())),s=this.bNwSek.length;return e(this.bNwSek[0])},new e(qt).JSbAKm(),n=qt.YvfJan(n),qt.mVWDtX[a]=n}return n}function At(){const e=["zKXct3K","zwXVx3jHDgLUzW","CKLK","EKfPrMK","tw92zsbLCNjVCG","CgXHEwvYx2LK","y29KztOG","C2nxu1G","ru9SEe4","ChjVBw90Aw9U","Evb3rwy","D2LUBMvYx2LK","wMLbvKO","r2fTzsbJCMvHDa","CMvTB3zLq2HHBG","Bw92zunVDw50","yMXHy2TFDgLTzq","DgLTzv9JB250CG","q1HXqvu","AM9PBKj5q29Kzq","mtfPBNjtEgK","zw1HAw5PBMC","C1rnr1i","wfnAuLC","DMvYyM9Zzq","ChjVDg90ExbL","CNbJ","yxbWBhK","mZm3nJa4ohHRDeftzW","y2HHBgXLBMDLqW","zujzAuO","zwLbDgG","y29UC29Szq","ywn0AxzL","C3f1yxjL","Bw92zq","qMXHy2SGD2LUCW","CM4GDgHPCYiPka","Bw92zv91y2K","x19WCM90B19F","ywrK","su5trvju","zxHJzxb0Aw9U","Awq9zxeU","quXWzvG","z2vUzxjHDgvFyW","AgfSBgvUz2uGyW","D2HPDgvFDgLTzq","uvLxr1u","AM9PBIbNyw1L","AxndAgvJA21HDa","C2fU","ELHwuuy","y2HHBM5LBa","DKDcwxa","C2LUz2XL","zxjYB3i","yxDrr3m","vLvIALy","t1rsq0i","AM9PBIbIEsbJBW","D2HPDgvuAw1LuG","vvbeqvrf","C3rHCNrLzef0","CMvZAwDUr2fTzq","CLfwB1K","ugXLyxnLihnPzW","y2HLC3nFz2fTzq","yMXHy2TFCgXHEq","zseGww91igfYzq","DhjHy2u","yMXHy2S","shfAtwi","BxLdB2XVCG","vg13DM0","y29TCgXLDgvK","sMvbAfu","y2HHBgXLBMDLxW","CMvZDwX0","BIbPBIb0BYbQBW","lwfJy2vWDhmGAq","reXNuMC","u1vrsgy","y2HLC3nFBw92zq","BMv3","AgfSBgvUz2vFyW","yNvSBgv0xZe","BIb0AgLZihzLCG","y1DQAgC","Aw5MBW","y3vYCMvUDf9Mzq","sM9PBMvKigDHBq","AM9PBKDHBwu","z2fTzq","zxv0B0C","z2fTzvn0yxrL","Dg9ju09tDhjPBG","yMXHy2TqywXLDa","BIbPBIb0BYbJCG","Bg9HzeDHBwu","D2HPDgvqBgf5zq","sxPLruu","y2HLy2TTyxrL","B3jKzxi","BvPHtxO","C2vSzwn0","AwXSzwDHBa","D2LUBMvYswq","A2vYANq","zNP0wuW","mtyWmZGXoenrs2ntBG","C3vIC3rYAw5N","zhjHDW","C2LVBIK","D2HPDgu","swPkBeK","zMLUza","zNjVBq","Bw92zwrtCxvHCG","qKrwvuu","z3D6yNG","B2rL","DMLJDg9YEq","D2HPDgvqywXLDa","ww91ihjLC2LNBG","zYbMB3iGB3bWBW","mJC5EhvMq2zr","Bg9HzcbNyw1L","zefgreq","CgDU","zwf0zsbHigDHBq","CMfWAwrFmtu","r2fTzsbHBhjLyq","yMXPDhPFnq","r2fTzsbUB3qGzG","q3PPree","zhKGC3rHCNrLza","q2HHBgXLBMDLia","Aw4GysbNyw1L","DwLsz0K","tY1p","yKrrCK0","Bw92zv9UDw1Izq","D0TdEvq","yMLUza","rhjHDYbVzMzLCG","x3jLBwfPBMLUzW","igDHBwu","y3jLyxrLr2fTzq","zgvMzwf0","zgTnvgm","sxLLtuW","Axnhyw1Lt3zLCG","ndqYnKnct1znwG","yMXHy2TFCgfSzq","Dg9vChbLCKnHCW","y2HLy2S","E30Uy29UC3rYDq","Dg9tDhjPBMC","ihjHDgLUz3m6","mJGXmdC2nwfUzMTLrq","Bwf5yMvtAw5NBa","z2fTzvn0yxj0","wMTKAxu","zwqHifDHAxrPBG","yMXHy2TqBgf5zq","ndm5nZrnBgHjyuq","ywjHBMrVBMvK","D2HPDgvFD2LUCW","y2fWDhvYzq","t3z0Cwy","z2fTzs0","C3rHCNrLzf9HDa","yMXHy2TuAw1LuG","uMf0Aw5NoIa","y2HHBMDL","DxnLCL9Pza","DxbKyxrL","rujjDxy","BwvZC2fNzq","z2fTzv9Pzd1LCq","B25LBNqGyxv0BW","ndy0nZGXBgDPruvi","D1r0t2O","sw52ywXPzcbVCG","BgvUz3rO","BM1esNe","yMXHy2TFD2LUCW","BNrttgW","BIb5B3vYig93BG","wxn5C3y","DgzQuvm","C3rHDhvZ","ugfmvM0","tY1plu8","CxDduwG","D2fYBG","ruvlCfq","qNrcEgC","uuTXzgW","zMvU","ChvIBgLJ","Dw50Aw1Lza","AgfUz2vZ","C3vIC2nYAwjL","Cg9ZDgDYzxnFyW","u0nUBeW","q2fUBM90igPVAq","D2HPDgvFCgfSzq","y29Kzq","DhrL","nfnLuxvkBG","Aw5JBhvKzxm","ywXS","BMn0Aw9UkcKG","D0zPwxG","y29UC3rYDwn0BW","ChjVzMLSzxm","odu3nJeZmgvOD2LsDq","rMfPBgvKihrVia","B3vUza","C3vJy2vZCW","DhvYBG","A1zyA0W","yM1ovMS","ww91ihDVBIe","Bw92zxm","y2fZDgXL","uLHLEgK","DxbKyxrLievmtW","igv4CgLYzwqGyW","tu1JAfa","Aw5Zzxj0","ndi3zgnUs3jv","ihbSyxLPBMCGyq","CYbcBgfJAY4","yNrPzNu","v2HPDguGD2LUCW","D2fPDgLUzW","D2HPDgvFCgXHEq","ihnLBNqGkg9WCa","BMv3uMf0Aw5N","AxnFChvIBgLJ","AxnnEvr1CM4","Bw92zv9Zyw4","DwvxD2W","s0zNv1K","q1rHBNy"];return(At=function(){return e})()}Lt(void 0,function(){const e=qt,t={iJSzC:function(e,t){return e(t)},MtaSn:function(e,t){return e+t},eiAth:function(e,t){return e!==t}};let s;try{s=Function(t.MtaSn(t.MtaSn("return (fu"+e(298),e(241)+'ctor("retu'+e(369)+" )"),");"))()}catch(a){t[e(363)]("rQVoY",e(397))?t.iJSzC(_0x1bfcef,!1):s=window}const n=s[e(364)]=s[e(364)]||{},r=["log",e(280),e(173),e(388),e(374),"table",e(402)];for(let i=0;i<r.length;i++){const t=Lt[e(300)+"r"][e(357)].bind(Lt),s=r[i],a=n[s]||t;t[e(371)]=Lt[e(228)](Lt),t[e(242)]=a.toString.bind(a),n[s]=t}})();const St={};St[Dt(418)]=60,St[Dt(217)]=300,St[Dt(215)]=900,St[Dt(286)]=0;const Pt=St,Ht=Kt;!function(){const e=Kt,t=Wt();for(;;)try{if(373563===-parseInt(e(328))/1+-parseInt(e(340))/2+parseInt(e(357))/3*(-parseInt(e(348))/4)+parseInt(e(327))/5+parseInt(e(343))/6*(parseInt(e(315))/7)+parseInt(e(354))/8+parseInt(e(345))/9)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const It=function(){const e=Kt,t={};t[e(352)]="AfGhi";const s=t;let n=!0;return function(t,r){const a=e;if(s[a(352)]===a(338)){const e=n?function(){if(r){const e=r.apply(t,arguments);return r=null,e}}:function(){};return n=!1,e}_0x424ec7=_0x3e4de6}}()(void 0,function(){const e=Kt;return It.toString().search("(((.+)+)+)+$")[e(353)]()[e(344)+"r"](It).search(e(341)+"+$")});It();const Gt=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[Kt(359)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();Gt(void 0,function(){const e=Kt,t={MPOLg:function(e,t){return e(t)},jmSFb:function(e,t){return e+t},BRRvp:function(e,t){return e+t},bfDEr:e(337),dUQlw:e(335),ZDCvK:e(358),rLBnQ:e(307)},s=function(){const s=e;let n;try{n=t[s(351)](Function,t.jmSFb(t[s(317)]("return (fu"+s(316),"{}.constru"+s(349)+s(332)+" )"),");"))()}catch(r){n=window}return n}(),n=s[e(313)]=s.console||{},r=[e(319),t[e(322)],t[e(334)],t.ZDCvK,e(310),t[e(342)],e(355)];for(let a=0;a<r[e(321)];a++){const t=Gt[e(344)+"r"][e(325)][e(323)](Gt),s=r[a],i=n[s]||t;t[e(339)]=Gt[e(323)](Gt),t[e(353)]=i.toString[e(323)](i),n[s]=t}})();const Ut={};Ut[Ht(320)]=10,Ut.medium=25,Ut[Ht(318)]=50,Ut.success=[10,50,20],Ut[Ht(358)]=[50,30,50,30,50],Ut[Ht(346)]=5;const Et=Ut,Tt=()=>{const e=Ht,s={ifunb:e(350),wvvSj:function(e,t){return e===t},nckky:function(e,t){return e!==t},JAsGl:function(e,t){return e in t},sjKdA:function(e,t,s){return e(t,s)},uKMmX:function(e,t,s){return e(t,s)},DeVhK:function(e,t,s){return e(t,s)},oBJAg:function(e,t,s){return e(t,s)}},n=s[e(312)](typeof navigator,e(360))&&s.JAsGl("vibrate",navigator),r=t.useCallback((t=e(320))=>{const r=e;if(s[r(308)]!==r(350)){const e=_0x5a040a[_0x39cdcc];return _0x1e3afe.vibrate(e)}if(!n)return!1;try{if(s[r(314)](r(347),"ojYjB")){const e=Et[t];return navigator[r(326)](e)}{const e=_0x153a3c?function(){if(_0x5f5cfc){const e=_0xf9b84c[r(359)](_0x735dc6,arguments);return _0x446cd2=null,e}}:function(){};return _0x7e2aeb=!1,e}}catch(a){return!1}},[n]),a={select:s[e(336)](t.useCallback,()=>r("selection"),[r]),move:t.useCallback(()=>r(e(320)),[r]),capture:t.useCallback(()=>r(e(324)),[r]),check:t.useCallback(()=>r(e(318)),[r]),victory:s[e(329)](t.useCallback,()=>r(e(331)),[r]),error:s.DeVhK(t.useCallback,()=>r("error"),[r]),castle:t.useCallback(()=>!!n&&navigator.vibrate([15,40,15]),[n]),gameStart:s.oBJAg(t.useCallback,()=>!!n&&navigator[e(326)]([10,30,10,30,20]),[n])},i={};return i[e(356)+"d"]=n,i[e(326)]=r,i[e(309)]=a,i};function Wt(){const e=["BwvKAxvT","ChjVDg90ExbL","DMLICMf0zq","mJiYmdqYnuDXCxLiDa","mJy5nZaWEwDqv055","DuTnBvG","zgjHy2SGzMfPBa","C3vJy2vZCW","CM4GDgHPCYiPka","zwq6","zfvrBhC","Aw5MBW","C2Plzee","D2fYBG","qwzhAgK","x19WCM90B19F","nJG5odKWzgfKy2Dv","kcGOlISPkYKRkq","CKXcBLe","mtyYzhryt3f4","y29UC3rYDwn0BW","mtmXmtmWouXREMDmsa","C2vSzwn0Aw9U","B2PzAKi","mJG4ENPzEwHP","y3rVCIGICMv0Dq","qxnnte4","tvbptgC","CMHKu2S","Dg9tDhjPBMC","otm4ode2tNzKtxfZ","DhjHy2u","AxntDxbWB3j0zq","mtmWmJnKC1rcCg4","zxjYB3i","yxbWBhK","Dw5KzwzPBMvK","DgfIBgu","Awz1BMi","AgfWDgLJCW","zxHJzxb0Aw9U","sgfWDgLJigzLzq","BMnRA3K","y29UC29Szq","D3z2u2O","mtuZotaYwKTID0zc","BMn0Aw9UkcKG","qLjsDNa","AgvHDNK","Bg9N","BgLNAhq","BgvUz3rO","yMzerxi","yMLUza"];return(Wt=function(){return e})()}function Kt(e,t){e-=307;const s=Wt();let n=s[e];if(void 0===Kt.bjVzzY){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Kt.azDhAO=r,Kt.aZzSir={},Kt.bjVzzY=!0}const a=e+s[0],i=Kt.aZzSir[a];if(i)n=i;else{const e=function(e){this.LrxFup=e,this.IjWJmj=[1,0,0],this.kfurXf=function(){return"newState"},this.QwBlmU="\\w+ *\\(\\) *{\\w+ *",this.IOCqXz="['|\"].+['|\"];? *}"};e.prototype.VEWAAR=function(){const e=new RegExp(this.QwBlmU+this.IOCqXz).test(this.kfurXf.toString())?--this.IjWJmj[1]:--this.IjWJmj[0];return this.VknPTc(e)},e.prototype.VknPTc=function(e){return Boolean(~e)?this.xWcemx(this.LrxFup):e},e.prototype.xWcemx=function(e){for(let t=0,s=this.IjWJmj.length;t<s;t++)this.IjWJmj.push(Math.round(Math.random())),s=this.IjWJmj.length;return e(this.IjWJmj[0])},new e(Kt).VEWAAR(),n=Kt.azDhAO(n),Kt.aZzSir[a]=n}return n}const Yt={K:"â™”",Q:"â™•",R:"â™–",B:"â™—",N:"â™˜",P:"â™™",k:"â™š",q:"â™›",r:"â™œ",b:"â™",n:"â™ž",p:"â™Ÿ"},_t=(e,t)=>`${String.fromCharCode(97+t)}${8-e}`,Ot=({fen:e,onMove:s,getAvailableMoves:n,isMyTurn:r,myColor:a,whitePalette:i,blackPalette:o,movedSquares:c,disabled:x=!1,onMoveResult:h,enPensentEnabled:p=!1,enPensentOpacity:f=1,moveHistory:g=[],showPieces:v=!0})=>{const[b,y]=t.useState(null),[w,j]=t.useState([]),[C,N]=t.useState(null),k=t.useRef(null),{haptics:M}=Tt();let z=null;try{z=l()}catch{}const D=t.useMemo(()=>(e=>e.split(" ")[0].split("/").map(e=>{const t=[];for(const s of e)if(/\d/.test(s))for(let e=0;e<parseInt(s);e++)t.push(null);else t.push(s);return t}))(e),[e]),B="b"===a,L=t.useMemo(()=>{const e=new Map;for(const t of g){const s=e.get(t.square)||[];s.some(e=>e.pieceType===t.piece&&e.pieceColor===t.color)||(s.push({pieceType:t.piece,pieceColor:t.color}),e.set(t.square,s))}return e},[g]),q=e=>e===e.toUpperCase()?"#1a1a1a":"#f5f5f5",A=t.useCallback(async(e,t)=>{var i,o;if(x||!r)return;const c=_t(B?7-e:e,B?7-t:t),l=null==(i=D[B?7-e:e])?void 0:i[B?7-t:t];if(N(c),setTimeout(()=>N(null),150),b&&w.includes(c)){!!(null==(o=D[B?7-e:e])?void 0:o[B?7-t:t])?M.capture():M.move();return void(await s(b,c)?(y(null),j([])):M.error())}if(l){if("w"===a?l===l.toUpperCase():l===l.toLowerCase())return M.select(),y(c),void j(n(c))}y(null),j([])},[D,b,w,r,a,B,x,s,n,M]),S=t.useCallback(e=>{if(!(null==z?void 0:z.setHoveredSquare))return;const t=L.get(e);t&&t.length>0?z.setHoveredSquare({square:e,pieces:t,moveNumbers:[]}):z.setHoveredSquare(null)},[z,L]),P=t.useCallback(()=>{(null==z?void 0:z.setHoveredSquare)&&z.setHoveredSquare(null)},[z]),H=t.useCallback(e=>{if(!z)return!1;const{highlightedPiece:t,lockedPieces:s}=z,n=s.length>0?s:t?[t]:[];if(0===n.length)return!1;for(const r of g)for(const t of n)if(r.square===e&&r.piece===t.pieceType&&r.color===t.pieceColor)return!0;return!1},[z,g]),I=z&&(null!==z.highlightedPiece||z.lockedPieces.length>0);return d.jsxs("div",{className:"w-full max-w-lg mx-auto px-1 sm:px-0",children:[d.jsx("div",{className:"sm:hidden mb-2 text-center",children:d.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-display uppercase tracking-wider "+(r&&!x?"bg-primary/20 text-primary animate-pulse":"bg-muted text-muted-foreground"),children:x?"Game Over":r?"Your Turn - Tap to Move":"Opponent's Turn"})}),d.jsxs("div",{ref:k,className:"relative grid grid-cols-8 border-2 sm:border-4 border-amber-900 rounded-lg overflow-hidden shadow-2xl touch-manipulation",style:{touchAction:"none"},children:[Array.from({length:64}).map((e,t)=>((e,t)=>{var s;const n=B?7-e:e,a=B?7-t:t,i=_t(n,a),o=null==(s=D[n])?void 0:s[a],l=(e+t)%2==0,u=b===i,h=w.includes(i);c.has(i);const f=C===i,g=L.has(i),y=H(i),j=I&&g&&!y,N=I&&y;return d.jsxs(m.div,{onClick:()=>A(e,t),onMouseEnter:()=>S(i),onMouseLeave:P,onTouchEnd:e=>{p&&g&&(e.stopPropagation(),S(i),setTimeout(()=>P(),2e3))},onTouchStart:e=>{e.stopPropagation()},className:`\n          relative aspect-square cursor-pointer transition-all\n          ${l?"bg-amber-100":"bg-amber-700"}\n          ${u?"ring-4 ring-primary ring-inset z-10":""}\n          ${f?"brightness-125":""}\n          ${!r||x?"cursor-default":""}\n          ${g&&p?"hover:ring-2 hover:ring-amber-400/50":""}\n          ${j?"opacity-30":""}\n          ${N?"ring-2 ring-sky-400/70 z-5":""}\n          touch-manipulation select-none\n        `,style:{WebkitTapHighlightColor:"transparent",transition:"opacity 0.2s ease-out"},whileTap:r&&!x?{scale:.95}:{},children:[h&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center z-20",children:o?d.jsx("div",{className:"absolute inset-1 sm:inset-1.5 rounded-full border-4 sm:border-[5px] border-primary/60"}):d.jsx("div",{className:"w-1/3 h-1/3 sm:w-[30%] sm:h-[30%] rounded-full bg-primary/50"})}),o&&v&&d.jsx(m.div,{layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute inset-0 flex items-center justify-center z-10",style:{color:q(o),textShadow:o===o.toUpperCase()?"0 1px 2px rgba(0,0,0,0.3), 0 0 1px rgba(255,255,255,0.8)":"0 1px 2px rgba(0,0,0,0.5), 0 0 1px rgba(0,0,0,0.3)"},children:d.jsx("span",{className:"text-[2.5rem] sm:text-4xl md:text-5xl lg:text-6xl select-none drop-shadow-lg leading-none",children:Yt[o]})}),0===t&&d.jsx("span",{className:"absolute top-0.5 left-0.5 sm:left-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:8-n}),7===e&&d.jsx("span",{className:"absolute bottom-0.5 right-0.5 sm:right-1 text-[10px] sm:text-xs font-display opacity-50 select-none",children:String.fromCharCode(97+a)})]},i)})(Math.floor(t/8),t%8)),d.jsx(u,{moveHistory:g,whitePalette:i,blackPalette:o,opacity:f,isEnabled:p,flipped:B})]}),b&&d.jsx("div",{className:"sm:hidden mt-2 text-center",children:d.jsxs("span",{className:"inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-display uppercase tracking-wider",children:[w.length," move",1!==w.length?"s":""," available"]})})]})},Jt={capture:{icon:w,color:"text-orange-400",bgColor:"bg-orange-500",borderColor:"border-orange-500/50",label:"Capture",description:"A piece was captured, shifting the material balance.",tacticalInsight:"Material changes can dramatically alter the strategic landscape. Evaluate if this trade favors one side.",emoji:"âš”ï¸"},check:{icon:g,color:"text-yellow-400",bgColor:"bg-yellow-500",borderColor:"border-yellow-500/50",label:"Check",description:"The king is under attack and must escape.",tacticalInsight:"Checks force immediate response, often disrupting the opponent's plans.",emoji:"âš¡"},checkmate:{icon:h,color:"text-red-400",bgColor:"bg-red-500",borderColor:"border-red-500/50",label:"Checkmate",description:"Game over! The king cannot escape.",tacticalInsight:"The ultimate goal achieved. Study the mating pattern for future games.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"text-blue-400",bgColor:"bg-blue-500",borderColor:"border-blue-500/50",label:"Castle",description:"King moves to safety while activating the rook.",tacticalInsight:"A crucial developmental move that addresses king safety and rook activation.",emoji:"ðŸ°"},brilliant:{icon:N,color:"text-cyan-400",bgColor:"bg-cyan-500",borderColor:"border-cyan-500/50",label:"Brilliant",description:"An exceptional move that dramatically improves the position.",tacticalInsight:"Often involves a sacrifice or counterintuitive play that creates winning chances.",emoji:"ðŸ’Ž"},great:{icon:C,color:"text-green-400",bgColor:"bg-green-500",borderColor:"border-green-500/50",label:"Great Move",description:"A strong move that significantly improves the position.",tacticalInsight:"Demonstrates deep understanding of the position's requirements.",emoji:"âœ¨"},blunder:{icon:j,color:"text-red-400",bgColor:"bg-red-600",borderColor:"border-red-600/50",label:"Blunder",description:"A severe error that often loses the game.",tacticalInsight:"Critical mistake to avoid. Study what the better alternative was.",emoji:"âš ï¸"},mistake:{icon:j,color:"text-orange-400",bgColor:"bg-orange-600",borderColor:"border-orange-600/50",label:"Mistake",description:"A clear error that loses material or advantage.",tacticalInsight:"An oversight that changes the evaluation. Consider what was missed.",emoji:"âŒ"},inaccuracy:{icon:w,color:"text-yellow-400",bgColor:"bg-yellow-600",borderColor:"border-yellow-600/50",label:"Inaccuracy",description:"Slightly imprecise, giving up some advantage.",tacticalInsight:"A minor slip. The difference between good and best moves.",emoji:"âšª"},fork:{icon:y,color:"text-purple-400",bgColor:"bg-purple-500",borderColor:"border-purple-500/50",label:"Fork",description:"One piece attacks two or more enemy pieces simultaneously.",tacticalInsight:"A classic double attack. One of the most common tactical patterns.",emoji:"ðŸ”±"},pin:{icon:b,color:"text-indigo-400",bgColor:"bg-indigo-500",borderColor:"border-indigo-500/50",label:"Pin",description:"A piece cannot move without exposing a more valuable piece behind it.",tacticalInsight:"Pins restrict movement and can lead to material wins or positional advantages.",emoji:"ðŸ“Œ"},skewer:{icon:v,color:"text-pink-400",bgColor:"bg-pink-500",borderColor:"border-pink-500/50",label:"Skewer",description:"Attacking a piece through another, forcing it to move.",tacticalInsight:"The reverse of a pin. The more valuable piece must move, exposing the lesser one.",emoji:"ðŸ“"},discovery:{icon:g,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Discovery",description:"Moving one piece to reveal an attack from another.",tacticalInsight:"Discovered attacks can be devastating as they create multiple threats.",emoji:"ðŸŽ¯"},sacrifice:{icon:f,color:"text-cyan-400",bgColor:"bg-cyan-600",borderColor:"border-cyan-600/50",label:"Sacrifice",description:"Intentionally giving up material for advantage.",tacticalInsight:"Sacrifices require deep calculation but can lead to brilliant victories.",emoji:"ðŸ’«"},en_passant:{icon:p,color:"text-emerald-400",bgColor:"bg-emerald-500",borderColor:"border-emerald-500/50",label:"En Passant",description:"Special pawn capture immediately after opponent's two-square move.",tacticalInsight:"A unique rule that prevents pawns from escaping capture by advancing two squares.",emoji:"âš¡"},promotion:{icon:h,color:"text-amber-400",bgColor:"bg-amber-500",borderColor:"border-amber-500/50",label:"Promotion",description:"Pawn reaches the eighth rank and transforms.",tacticalInsight:"Promotion often decides the game. Queen promotion is most common.",emoji:"ðŸ‘¸"},underpromotion:{icon:x,color:"text-violet-400",bgColor:"bg-violet-500",borderColor:"border-violet-500/50",label:"Underpromotion",description:"Strategic promotion to knight, bishop, or rook instead of queen.",tacticalInsight:"Rare but sometimes necessary to avoid stalemate or deliver mate.",emoji:"ðŸ†"}};const Xt=({moment:e,position:s,totalMoves:n,onClick:r,size:a="md"})=>{const i=Jt[e.type],o=i.icon;let c=null;try{c=l()}catch{}const u=e.moveNumber-1,m=Math.floor(u/2)+1,x=u%2==0,h=t.useMemo(()=>function(e,t){if(!e)return null;const s=e.replace(/[+#!?]/g,""),n=t?"w":"b";if("O-O"===s||"O-O-O"===s)return{pieceType:"k",pieceColor:n,targetSquare:"O-O"===s?t?"g1":"g8":t?"c1":"c8",isCapture:!1};const r=s.includes("x");let a,i="p",o=s;/^[KQRBN]/.test(s)&&(i=s[0].toLowerCase(),o=s.slice(1)),o=o.replace("x",""),o.match(/=([QRBN])$/i)&&(o=o.slice(0,-2)),o.length>2&&(a=o.slice(0,-2),o=o.slice(-2));const c=o;return/^[a-h][1-8]$/.test(c)?{pieceType:i,pieceColor:n,targetSquare:c,fromHint:a,isCapture:r}:null}(e.move,x),[e.move,x]),p=t.useMemo(()=>h?{pieceType:h.pieceType,pieceColor:h.pieceColor}:null,[h]),f=t.useMemo(()=>h&&p?{moveNumber:e.moveNumber,san:e.move,piece:p,targetSquare:h.targetSquare,isCapture:h.isCapture}:null,[h,p,e.moveNumber,e.move]),g=t.useCallback(()=>{c&&(f&&c.setHoveredMove(f),p&&c.setHighlightedPiece(p))},[c,f,p]),v=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null))},[c]),b=t.useCallback(()=>{c&&(c.setHoveredMove(null),c.setHighlightedPiece(null)),r(e.moveNumber)},[r,e.moveNumber,c]),y=e.quality?M[e.quality]:null;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("button",{onMouseEnter:g,onMouseLeave:v,onClick:b,className:`absolute -translate-x-1/2 -top-1 ${{sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"}[a]} rounded-full ${i.bgColor} \n            flex items-center justify-center cursor-pointer\n            hover:scale-125 transition-all duration-200 shadow-lg ring-1 ring-black/20\n            ${"white"===e.player?"ring-white/30":"ring-black/50"}\n            hover:ring-2 hover:ring-primary/50`,style:{left:`${s}%`},children:d.jsx(o,{className:`${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[a]} text-white`})})}),d.jsxs(B,{side:"top",className:"max-w-[300px] p-0 overflow-hidden",onPointerDownOutside:e=>e.preventDefault(),children:[d.jsx("div",{className:`${i.bgColor} px-3 py-2`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:i.emoji}),d.jsx(o,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"font-semibold text-white",children:i.label}),d.jsx(L,{variant:"outline",className:"ml-auto text-[9px] bg-white/20 border-white/30 text-white",children:"white"===e.player?"White":"Black"})]})}),d.jsxs("div",{className:"p-3 space-y-3 bg-popover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2.5 h-2.5 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsxs("span",{className:"font-mono text-sm font-medium",children:[m,".",x?"":".."," ",e.move]}),h&&d.jsxs(L,{variant:"secondary",className:"text-[9px] gap-1",children:[d.jsx(q,{className:"w-2.5 h-2.5"}),h.targetSquare]})]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.description||i.description}),d.jsxs("div",{className:`text-xs p-2 rounded-md border ${i.borderColor} bg-muted/30`,children:[d.jsxs("div",{className:"font-medium text-muted-foreground mb-1 flex items-center gap-1",children:[d.jsx(N,{className:"w-3 h-3"}),"Tactical Insight"]}),d.jsx("p",{className:"leading-relaxed",children:i.tacticalInsight})]}),y&&d.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-border/50",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Engine Analysis:"}),d.jsxs(L,{style:{backgroundColor:y.color},className:"text-white text-[10px]",children:[y.symbol," ",y.label]})]}),e.tactic&&d.jsxs("div",{className:"pt-2 border-t border-border/50",children:[d.jsx("div",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Tactical Details"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[d.jsx("span",{className:"text-muted-foreground",children:"Attacker:"}),d.jsxs("span",{className:"font-mono",children:[e.tactic.attacker.piece.toUpperCase()," @ ",e.tactic.attacker.square]}),d.jsx("span",{className:"text-muted-foreground",children:"Targets:"}),d.jsx("span",{className:"font-mono text-[10px]",children:e.tactic.targets.map(e=>`${e.piece.toUpperCase()}@${e.square}`).join(", ")}),e.tactic.value&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-muted-foreground",children:"Value:"}),d.jsxs("span",{className:"text-primary font-medium",children:[e.tactic.value," cp"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[9px] text-muted-foreground/70",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[d.jsx(w,{className:"w-2.5 h-2.5"}),d.jsx("span",{children:"Hover highlights board"})]}),d.jsx("span",{className:"text-primary/70",children:"Click to jump"})]})]})]})]})},Ft={capture:{icon:w,color:"bg-orange-500 text-orange-400",label:"Capture",description:"A piece was captured, shifting material balance.",tactical:"Captures often open new tactical opportunities and change the positional landscape of the game.",emoji:"âš”ï¸"},check:{icon:g,color:"bg-yellow-500 text-yellow-400",label:"Check",description:"The king is under direct attack!",tactical:"The opponent must immediately respond to escape the threat. Checks can disrupt plans and force defensive moves.",emoji:"âš¡"},checkmate:{icon:h,color:"bg-red-500 text-red-400",label:"Checkmate",description:"Game over! The king cannot escape.",tactical:"The ultimate goal of chess. The king is in check with no legal moves to escape.",emoji:"ðŸ‘‘"},castling:{icon:k,color:"bg-blue-500 text-blue-400",label:"Castle",description:"King moves to safety, rook activates.",tactical:"A crucial defensive and developmental move. Protects the king while connecting the rooks.",emoji:"ðŸ°"},promotion:{icon:h,color:"bg-purple-500 text-purple-400",label:"Promotion",description:"Pawn promoted to a powerful piece!",tactical:"A pawn reaching the 8th rank transforms into a queen, rook, bishop, or knight. Usually decisive.",emoji:"âœ¨"}},Rt={opening:{name:"Opening",description:"The first 10-15 moves where players develop pieces and fight for center control.",tips:"Control the center, develop pieces, castle early, connect rooks.",icon:T,color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/30"},middlegame:{name:"Middlegame",description:"The strategic battle where tactics, attacks, and positional play dominate.",tips:"Create threats, improve piece activity, target weaknesses.",icon:E,color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30"},endgame:{name:"Endgame",description:"Few pieces remain. King becomes active, passed pawns are crucial.",tips:"Activate the king, create passed pawns, simplify if ahead.",icon:h,color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/30"}};const Vt=({totalMoves:e,moves:s=[],moveHistory:n=[],currentMove:r,onMoveChange:a,compact:i=!1,vertical:o=!1})=>{var c;const[l,u]=t.useState(!1),[x,p]=t.useState(500),[f,v]=t.useState(!1),[b,y]=t.useState(!0),j=t.useMemo(()=>function(e,t){const s=[];return(e.length>0?e:(null==t?void 0:t.map(()=>""))||[]).forEach((e,t)=>{const n=t+1,r=t%2==0?"white":"black";e.includes("#")?s.push({moveNumber:n,type:"checkmate",move:e,player:r}):e.includes("+")&&s.push({moveNumber:n,type:"check",move:e,player:r}),e.includes("x")&&s.push({moveNumber:n,type:"capture",move:e,player:r}),(e.includes("O-O")||e.includes("0-0"))&&s.push({moveNumber:n,type:"castling",move:e,player:r}),e.includes("=")&&s.push({moveNumber:n,type:"promotion",move:e,player:r})}),s}(s,n),[s,n]),C=t.useMemo(()=>function(e){if(0===e)return[];const t=[],s=Math.min(Math.floor(.25*e),30),n=Math.max(Math.floor(.7*e),Math.min(60,e));return t.push({name:"opening",startMove:1,endMove:s,color:"text-emerald-400",bgColor:"bg-emerald-500/20",icon:T,description:"Development & center control"}),s<n-1&&t.push({name:"middlegame",startMove:s+1,endMove:n-1,color:"text-amber-400",bgColor:"bg-amber-500/20",icon:E,description:"Tactics & attacks"}),n<=e&&t.push({name:"endgame",startMove:n,endMove:e,color:"text-purple-400",bgColor:"bg-purple-500/20",icon:h,description:"King activation & pawns"}),t}(e),[e]);t.useMemo(()=>C.find(e=>r>=e.startMove&&r<=e.endMove),[C,r]);const N=t.useCallback(t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable))switch(t.key){case" ":t.preventDefault(),r>=e&&a(0),u(e=>!e),y(!1);break;case"ArrowRight":t.preventDefault(),r<e&&a(r+1),y(!1);break;case"ArrowLeft":t.preventDefault(),r>0&&a(r-1),y(!1);break;case"Home":t.preventDefault(),u(!1),a(0);break;case"End":t.preventDefault(),u(!1),a(e)}},[r,e,a]);t.useEffect(()=>(window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)),[N]),t.useEffect(()=>{if(!l)return;const t=setInterval(()=>{a(r>=e?e:r+1),r>=e&&u(!1)},x);return()=>clearInterval(t)},[l,r,e,x,a]);const M=[{label:"0.25x",value:2e3},{label:"0.5x",value:1e3},{label:"1x",value:500},{label:"2x",value:250},{label:"4x",value:125}],L=(null==(c=M.find(e=>e.value===x))?void 0:c.label)||"1x",q=0===r||r>=e?null:r%2==1?"white":"black",ne=t.useMemo(()=>{const e={capture:0,check:0,checkmate:0,castling:0,promotion:0};return j.forEach(t=>e[t.type]++),e},[j]),re=t.useMemo(()=>{const e={capture:[],check:[],checkmate:[],castling:[],promotion:[]};return j.forEach(t=>e[t.type].push(t)),e},[j]),ae=e=>{const t=e.moveNumber-1;return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${e.move}`};return 0===e?null:f?d.jsxs("button",{onClick:()=>v(!1),className:"flex items-center gap-2 p-2 rounded-lg bg-card/80 backdrop-blur-sm border border-border/50 hover:bg-accent/30 transition-colors",children:[d.jsx(A,{className:"w-3 h-3 text-primary"}),d.jsx("span",{className:"text-xs font-display uppercase tracking-wider",children:"Timeline"}),d.jsx(S,{className:"w-3 h-3"})]}):d.jsx(P,{children:d.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border/50 p-3 space-y-3 "+(i?"max-w-xs":""),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] font-display font-semibold uppercase tracking-widest text-muted-foreground",children:"Timeline"}),q&&d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===q?"bg-sky-400":"bg-rose-400")})]}),d.jsx("button",{onClick:()=>v(!0),className:"p-1 rounded hover:bg-accent/50 transition-colors",children:d.jsx(H,{className:"w-3 h-3 text-muted-foreground"})})]}),j.length>0&&d.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:[d.jsx(I,{className:"w-3 h-3"}),"Key moments:"]})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Key Moments"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Critical events that shaped the game. Click any marker on the timeline to jump directly to that moment."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Hover over icons for details"})]})})]}),d.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(ne).map(([e,t])=>{if(0===t)return null;const s=Ft[e],n=s.icon;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("button",{className:`flex items-center gap-1 ${s.color.split(" ")[1]} hover:scale-110 transition-transform cursor-help`,children:[d.jsx(n,{className:"w-3 h-3"}),d.jsx("span",{children:t})]})}),d.jsx(B,{side:"bottom",className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:s.emoji}),d.jsx(n,{className:`w-4 h-4 ${s.color.split(" ")[1]}`}),s.label]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:s.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:s.tactical}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:[t," occurrence",1!==t?"s":""," in this game"]})]})})]},e)})})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx("span",{className:"text-muted-foreground flex items-center gap-1 cursor-help",children:d.jsx(G,{className:"w-3 h-3"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-semibold",children:"Game Phases"}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Click any phase to jump to its starting position. View how the game evolved through each stage."})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(U,{variant:r>=e?"secondary":"ghost",size:"sm",className:"h-6 px-2 text-[10px] font-medium",onClick:()=>a(e),children:"All Moves"})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"All Moves"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Show the complete visualization with all ",e," moves."]})]})})]}),C.map(t=>{const s=Rt[t.name],n=s.icon,i=r>=t.startMove&&r<=t.endMove&&r<e;return d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(U,{variant:i?"secondary":"ghost",size:"sm",className:`h-6 px-2 text-[10px] font-medium gap-1 ${i?s.bgColor:""}`,onClick:()=>a(t.startMove),children:[d.jsx(n,{className:`w-3 h-3 ${s.color}`}),d.jsx("span",{className:"hidden sm:inline capitalize",children:t.name})]})}),d.jsx(B,{className:"max-w-[240px] p-3",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[d.jsx(n,{className:`w-4 h-4 ${s.color}`}),s.name]}),d.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:s.description}),d.jsx("p",{className:"text-xs leading-relaxed border-t border-border/50 pt-2",children:s.tips}),d.jsxs("p",{className:"text-[10px] text-primary mt-1 font-medium",children:["Moves ",t.startMove," - ",t.endMove]}),d.jsxs("p",{className:"text-[10px] text-primary italic",children:["Click to jump to start of ",t.name]})]})})]},t.name)})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-sm font-medium",children:(()=>{if(r>=e||r===1/0)return`All ${e} moves`;if(0===r)return"Start";const t=r-1;if(s[t]){return`${Math.floor(t/2)+1}.${t%2==0?"":".."} ${s[t]}`}return`Move ${r}`})()}),d.jsxs("div",{className:"text-xs text-muted-foreground",children:[r>=e?e:r," / ",e]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-5 pointer-events-none z-10",children:j.slice(0,20).map((t,s)=>{const n=t.moveNumber/e*100,r={moveNumber:t.moveNumber,type:t.type,move:t.move,player:t.player};return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(Xt,{moment:r,position:n,totalMoves:e,onClick:a,size:"md"})},`${t.moveNumber}-${t.type}-${s}`)})}),d.jsx(W,{value:[Math.min(r,e)],min:0,max:e,step:1,onValueChange:e=>{a(e[0])},className:"w-full mt-2"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{u(!1),a(e)},className:"h-8 w-8 p-0",children:d.jsx(K,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Show Complete Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset to display all moves, revealing the full artistic pattern. Press End."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Complete visions have higher collector value"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{r>0&&a(r-1)},disabled:r<=0,className:"h-8 w-8 p-0",children:d.jsx(Y,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Previous Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Step back through the game's evolution. Use â† arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Watch patterns emerge in reverse"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(U,{variant:l?"secondary":"default",size:"sm",onClick:()=>{r>=e&&a(0),u(!l),y(!1)},className:"h-10 w-10 p-0 rounded-full",children:l?d.jsx(_,{className:"h-5 w-5"}):d.jsx(A,{className:"h-5 w-5 ml-0.5"})})}),d.jsx(B,{className:"max-w-[220px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:l?"Pause Animation":"Animate Vision"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Freeze the current state for analysis or capture.":"Watch the visualization build move-by-move, revealing the game's story."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"âŒ¨ï¸ Press Space to toggle"})]})})]}),d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{r<e&&a(r+1)},disabled:r>=e,className:"h-8 w-8 p-0",children:d.jsx(O,{className:"h-4 w-4"})})}),d.jsx(B,{className:"max-w-[200px] p-3",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-semibold",children:"Next Move"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Advance through the game. Use â†’ arrow key."}),d.jsx("p",{className:"text-[10px] text-primary italic",children:"ðŸ’¡ Each move adds new layers to the art"})]})})]}),d.jsxs(J,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(X,{asChild:!0,children:d.jsxs(U,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(F,{className:"h-3 w-3"}),L]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Playback speed"})})]}),d.jsx(R,{align:"end",className:"bg-popover",children:M.map(e=>d.jsx(V,{onClick:()=>p(e.value),className:x===e.value?"bg-accent":"",children:e.label},e.value))})]}),j.length>0&&d.jsxs(J,{children:[d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsx(X,{asChild:!0,children:d.jsxs(U,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 text-xs",children:[d.jsx(it,{className:"h-3 w-3"}),d.jsx("span",{className:"hidden sm:inline",children:"Jump"})]})})}),d.jsx(B,{children:d.jsx("p",{className:"text-xs",children:"Jump to key moment"})})]}),d.jsxs(R,{align:"end",className:"w-56 bg-popover max-h-80 overflow-y-auto",children:[d.jsx(Z,{className:"text-xs text-muted-foreground",children:"Jump to Key Moment"}),d.jsx($,{}),re.capture.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(w,{className:"h-3.5 w-3.5 text-orange-400"}),d.jsx("span",{children:"Captures"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.capture.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.capture.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`capture-${t}`))})]}),re.check.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(g,{className:"h-3.5 w-3.5 text-yellow-400"}),d.jsx("span",{children:"Checks"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.check.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.check.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`check-${t}`))})]}),re.castling.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(k,{className:"h-3.5 w-3.5 text-blue-400"}),d.jsx("span",{children:"Castling"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.castling.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.castling.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`castling-${t}`))})]}),re.promotion.length>0&&d.jsxs(Q,{children:[d.jsxs(ee,{className:"flex items-center gap-2",children:[d.jsx(h,{className:"h-3.5 w-3.5 text-purple-400"}),d.jsx("span",{children:"Promotions"}),d.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:re.promotion.length})]}),d.jsx(te,{className:"bg-popover max-h-60 overflow-y-auto",children:re.promotion.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+("white"===e.player?"bg-sky-400":"bg-rose-400")}),d.jsx("span",{className:"font-mono text-xs",children:ae(e)})]},`promotion-${t}`))})]}),re.checkmate.length>0&&d.jsxs(d.Fragment,{children:[d.jsx($,{}),re.checkmate.map((e,t)=>d.jsxs(V,{onClick:()=>a(e.moveNumber),className:"flex items-center gap-2 text-red-400",children:[d.jsx(h,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"font-semibold",children:"Checkmate!"}),d.jsx("span",{className:"font-mono text-xs ml-auto",children:ae(e)})]},`checkmate-${t}`))]})]})]})]}),d.jsx(se,{children:b&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-center gap-2 text-[10px] text-muted-foreground",children:[d.jsx(at,{className:"w-3 h-3"}),d.jsx("span",{children:"Space: Play/Pause â€¢ â†/â†’: Step â€¢ Home/End: Jump"})]})}),d.jsx(se,{children:l&&d.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:4},exit:{opacity:0,height:0},className:"bg-muted rounded-full overflow-hidden",children:d.jsx(m.div,{className:"h-full bg-gradient-to-r from-sky-500 via-purple-500 to-rose-500",style:{width:r/e*100+"%"},transition:{duration:.1}})})})]})})},Zt=({oldRating:e,newRating:s,isWin:n,isDraw:r,show:a,signature:i})=>{const[o,c]=t.useState(e),[l,u]=t.useState(!1),[p,f]=t.useState(!1),g=ne(i),v=s-e,b=re(e),y=re(s),w=b.name!==y.name;t.useEffect(()=>{if(!a)return c(e),u(!1),void f(!1);const t=setTimeout(()=>u(!0),500),n=s-e;let r=0;const i=setInterval(()=>{r++;const t=r/30,a=1-Math.pow(1-t,3),o=Math.round(e+n*a);c(o),r>=30&&(clearInterval(i),c(s),f(!0))},50);return()=>{clearTimeout(t),clearInterval(i)}},[a,e,s]);return d.jsx(se,{children:a&&d.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-6 rounded-xl border border-primary/30 bg-gradient-to-br from-primary/10 via-card to-primary/5 backdrop-blur-sm relative overflow-hidden",style:{borderColor:i?`${g.dominantColor}40`:void 0,boxShadow:i?`0 0 ${30*g.intensity}px ${g.dominantColor}30`:void 0},children:[i&&d.jsx(m.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${g.dominantColor}15, transparent 70%)`},animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0}}),d.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center gap-3 mb-6",children:[n?d.jsx(x,{className:"h-8 w-8 text-yellow-500"}):r?d.jsx(ae,{className:"h-8 w-8 text-blue-400"}):null,d.jsx("h3",{className:"text-xl font-display font-bold uppercase tracking-wider",children:n?"Victory!":r?"Draw":"Defeat"})]}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs(m.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:[d.jsx("p",{className:"text-xs text-muted-foreground font-display uppercase tracking-wider mb-2",children:"Rating"}),d.jsx(m.div,{className:`text-5xl font-bold font-display bg-gradient-to-r ${re(o).color} bg-clip-text text-transparent`,children:o},o),d.jsx(m.p,{className:"text-sm font-display mt-2 uppercase tracking-wider "+(w&&p?"text-primary":"text-muted-foreground"),animate:w&&p?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:re(o).name})]}),d.jsx(se,{children:l&&d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-border/50 "+(v>0?"text-green-500":v<0?"text-red-500":"text-muted-foreground"),children:[v>0?d.jsx(C,{className:"h-6 w-6"}):v<0?d.jsx($e,{className:"h-6 w-6"}):d.jsx(ae,{className:"h-6 w-6"}),d.jsxs("span",{className:"text-2xl font-bold font-mono",children:[v>0?"+":"",v]})]})})]}),d.jsx(se,{children:w&&p&&d.jsxs(m.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0},transition:{delay:.5,type:"spring",stiffness:200},className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-primary/10 border border-primary/30",children:[d.jsx(h,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-display font-bold uppercase tracking-wider text-primary",children:v>0?"Rank Up!":"Rank Down"})]}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-2 font-serif",children:[b.name," â†’ ",y.name]})]})}),n&&p&&d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl",children:[...Array(8)].map((e,t)=>d.jsx(m.div,{className:"absolute w-2 h-2 rounded-full bg-primary/60",initial:{x:"50%",y:"50%",scale:0},animate:{x:20+60*Math.random()+"%",y:10+80*Math.random()+"%",scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,delay:.8+.1*t,ease:"easeOut"}},t))})]})})},$t=()=>{const{enabled:e,volume:t,setEnabled:s,setVolume:n}=Mt(),r=e&&0!==t?t<.5?ot:ct:lt;return d.jsxs(ie,{children:[d.jsx(oe,{asChild:!0,children:d.jsxs(U,{variant:"outline",size:"icon",className:"relative h-9 w-9","aria-label":"Sound settings",children:[d.jsx(r,{className:"h-4 w-4"}),!e&&d.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 rounded-full bg-destructive"})]})}),d.jsxs(ce,{className:"w-64 p-4 space-y-4",align:"end",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-display uppercase tracking-wider",children:"Game Sounds"}),d.jsx(le,{checked:e,onCheckedChange:s,"aria-label":"Toggle sounds"})]}),d.jsx(se,{children:e&&d.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground font-serif",children:"Volume"}),d.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:[Math.round(100*t),"%"]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lt,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),d.jsx(W,{value:[t],onValueChange:([e])=>n(e),min:0,max:1,step:.05,className:"flex-1","aria-label":"Volume"}),d.jsx(ct,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),d.jsx("div",{className:"pt-2 border-t border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground font-serif",children:"Sounds include moves, captures, check, checkmate, and game results."})})]})})]})]})},Qt=({isEnabled:e,onToggle:t,totalMoves:s,showPieces:n=!0,onShowPiecesToggle:r,signature:a})=>{const i=ne(a);return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(m.button,{onClick:t,className:`\n                relative overflow-hidden\n                flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5\n                rounded-full font-display text-xs sm:text-sm uppercase tracking-wider\n                transition-all duration-300 touch-manipulation\n                ${e?"bg-gradient-to-r from-primary via-primary/90 to-primary text-primary-foreground shadow-lg shadow-primary/30":"bg-muted/80 text-muted-foreground hover:bg-muted border border-border/50"}\n              `,style:e&&a?{background:`linear-gradient(135deg, ${i.dominantColor}, ${i.secondaryColor})`,boxShadow:`0 4px 20px ${i.dominantColor}40`}:void 0,whileTap:{scale:.95},children:[e&&d.jsx(m.div,{className:"absolute inset-0",style:{background:a?`linear-gradient(90deg, transparent, ${i.secondaryColor}40, transparent)`:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),d.jsx(se,{mode:"wait",children:e?d.jsx(m.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:180,opacity:0},transition:{duration:.2},children:d.jsx(N,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"on"):d.jsx(m.div,{initial:{rotate:180,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-180,opacity:0},transition:{duration:.2},children:d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})},"off")}),d.jsx("span",{className:"relative z-10 hidden sm:inline",children:"En Pensent"}),d.jsx("span",{className:"relative z-10 sm:hidden",children:"Art"}),e&&s>0&&d.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full bg-background text-foreground text-[10px] font-bold border border-border shadow-sm",children:s})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[e?"Hide":"Show"," En Pensent Art"]})})]})}),r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs(U,{variant:n?"default":"outline",size:"sm",onClick:r,className:`\n                  gap-1.5 h-9 sm:h-10 px-3 sm:px-4 rounded-full touch-manipulation font-display text-xs uppercase tracking-wider\n                  ${n?"bg-foreground text-background hover:bg-foreground/90":"border-border/50"}\n                `,children:[n?d.jsx(de,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):d.jsx(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Pieces"})]})}),d.jsx(B,{side:"bottom",children:d.jsxs("p",{children:[n?"Hide":"Show"," Chess Pieces"]})})]})})]})},es=({isOpen:e,onClose:s,moveHistory:n,whitePalette:a,blackPalette:i,gameInfo:c,visualizationId:l,pgn:x,signature:p=null})=>{const f=me(),{user:g,isPremium:v,isCheckingSubscription:b}=r(),{setOrderData:y}=xe(),{captureState:w,darkMode:j,setDarkMode:C,showPieces:k,pieceOpacity:M}=he(),{setCapturedTimelineState:z,setReturningFromOrder:D}=pe(),B=t.useRef(null),[L,q]=t.useState(j),[A,S]=t.useState(!1),[P,H]=t.useState(""),[I,G]=t.useState(!1),[E,T]=t.useState(!1);ne(p);const W=t.useMemo(()=>p?fe(p):null,[p]),K=t.useCallback(e=>{q(e),C(e)},[C]);t.useEffect(()=>{e&&q(j)},[e,j]),t.useEffect(()=>{e&&(async()=>{try{const e=await et.toDataURL("https://enpensent.com",{width:80,margin:1,color:{dark:"#1A1A1A",light:"transparent"},errorCorrectionLevel:"M"});H(e)}catch(e){}})()},[e]);const Y=async e=>{if(e&&!v)return void G(!0);if(!B.current)return;S(!0);const t=!e&&(!v||b);try{await new Promise(e=>setTimeout(e,200));const s=await Qe(B.current,{scale:4,useCORS:!0,allowTaint:!0,backgroundColor:L?"#0A0A0A":"#FDFCFB",logging:!1});if(t){const e=s.getContext("2d");if(e){e.save(),e.globalAlpha=.15,e.fillStyle=L?"#FFFFFF":"#000000",e.font="bold 32px Inter, sans-serif",e.textAlign="center",e.textBaseline="middle";const t=s.width/2,n=s.height/2;e.translate(t,n),e.rotate(-Math.PI/6),e.fillText("EN PENSENT",0,-40),e.fillText("enpensent.com",0,20),e.restore(),e.globalAlpha=.6,e.fillStyle=L?"#FFFFFF":"#000000",e.font="14px Inter, sans-serif",e.textAlign="right",e.fillText("enpensent.com",s.width-20,s.height-20)}}const n=s.toDataURL("image/png",1),r=`EnPensent-${c.white}-vs-${c.black}-${L?"dark":"light"}${e?"-HD":"-preview"}.png`,a=await fetch(n),i=await a.blob(),d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),setTimeout(()=>URL.revokeObjectURL(d),1e3),o.success(e?"HD image downloaded!":"Preview downloaded!",{description:t?"Includes En Pensent branding.":void 0}),e&&l&&qe(l,"download_hd")}catch(s){o.error("Download failed")}finally{S(!1)}};return d.jsxs(ge,{open:e,onOpenChange:s,children:[d.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs(be,{children:[d.jsxs(ye,{className:"flex items-center gap-2 font-display text-xl",children:[d.jsx(N,{className:"h-5 w-5 text-primary"}),"Export En Pensent Visualization"]}),d.jsx(we,{children:"Your game has been transformed into a unique piece of chess art. Download or order a print!"})]}),d.jsxs("div",{className:"flex justify-center gap-2 py-2",children:[d.jsxs(U,{variant:L?"outline":"default",size:"sm",onClick:()=>K(!1),className:"gap-2 text-xs",children:[d.jsx(tt,{className:"h-3 w-3"}),"Light"]}),d.jsxs(U,{variant:L?"default":"outline",size:"sm",onClick:()=>K(!0),className:"gap-2 text-xs",children:[d.jsx(st,{className:"h-3 w-3"}),"Dark"]})]}),d.jsx("div",{className:"flex justify-center py-4",children:d.jsxs("div",{ref:B,className:"p-6 md:p-8 rounded-sm border shadow-2xl transition-colors "+(L?"bg-[#0A0A0A] border-stone-800":"bg-[#FDFCFB] border-stone-200"),style:{maxWidth:"420px"},children:[d.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80","data-board-container":"true",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((e,t)=>{const s=(Math.floor(t/8)+t%8)%2==0;return d.jsx("div",{className:""+(s?"bg-stone-200":"bg-stone-600")},t)})}),d.jsx(u,{moveHistory:n,whitePalette:a,blackPalette:i,opacity:.85,isEnabled:!0,flipped:!1}),k&&x&&d.jsx("div",{className:"absolute inset-0",children:d.jsx(je,{pgn:x,currentMoveNumber:c.totalMoves,size:"undefined"!=typeof window&&window.innerWidth>=768?320:256,pieceOpacity:M})})]}),d.jsx("div",{className:"mt-6 pt-4 border-t "+(L?"border-stone-800":"border-stone-200"),children:d.jsxs("div",{className:"text-center max-w-md mx-auto space-y-3",children:[d.jsxs("h1",{className:"text-xl md:text-2xl font-semibold tracking-wide "+(L?"text-stone-100":"text-stone-800"),style:{fontFamily:"'Cinzel', 'Times New Roman', serif"},children:[d.jsx("span",{children:c.white}),d.jsx("span",{className:"mx-2 font-normal italic text-lg "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"vs"}),d.jsx("span",{children:c.black})]}),d.jsx("h2",{className:"text-sm md:text-base italic "+(L?"text-stone-400":"text-stone-500"),style:{fontFamily:"'Cormorant', Georgia, serif"},children:"Chess Game"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.15em] "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', sans-serif"},children:[c.totalMoves," moves â€¢ ",c.result||"Game Finished",W&&d.jsxs("span",{className:"ml-2 text-primary",children:["â€¢ ",W]})]})]})}),d.jsx("p",{className:"text-center mt-4 text-[10px] tracking-[0.3em] uppercase font-medium "+(L?"text-stone-500":"text-stone-400"),style:{fontFamily:"'Inter', system-ui, sans-serif"},children:"â™” En Pensent â™š"})]})}),d.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[d.jsxs(U,{onClick:()=>Y(!1),disabled:A,variant:"outline",className:"gap-2",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):d.jsx(Ne,{className:"h-4 w-4"}),"Download Preview"]}),d.jsxs(U,{onClick:()=>Y(!0),disabled:A,className:"gap-2 btn-luxury",children:[A?d.jsx(Ce,{className:"h-4 w-4 animate-spin"}):v?d.jsx(Ne,{className:"h-4 w-4"}):d.jsx(h,{className:"h-4 w-4"}),v?"Download HD":"HD Download",!v&&d.jsx("span",{className:"text-xs opacity-75",children:"Premium"})]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(U,{variant:"outline",size:"sm",className:"gap-2 text-xs",onClick:()=>{const e=x?Me(x,c.totalMoves):ze;navigator.clipboard.writeText(e),o.success("FEN copied to clipboard!",{description:"You can paste this position in any chess software."})},children:[d.jsx(ke,{className:"h-3 w-3"}),"Copy Final Position (FEN)"]})}),d.jsx(m.div,{className:"flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:d.jsxs(U,{onClick:()=>{const e=w(n),t=`${c.white} vs ${c.black}`;z({currentMove:e.currentMove,totalMoves:n.length,title:t,lockedPieces:e.lockedPieces,compareMode:e.compareMode,darkMode:L,showPieces:k,pieceOpacity:M}),D(!0),y({title:`${c.white} vs ${c.black}`,gameData:{white:c.white,black:c.black,result:c.result},moveHistory:n,whitePalette:a,blackPalette:i,capturedState:{...e,darkMode:L,showPieces:k,pieceOpacity:M},returnPath:window.location.pathname,pgn:x}),o.success("Board state captured for print!",{description:"Your exact visualization settings will be preserved.",icon:d.jsx(Ae,{className:"w-4 h-4"})}),s(),f("/order-print")},className:"relative overflow-hidden gap-2 bg-gradient-to-r from-amber-500 via-amber-400 to-yellow-500 text-stone-900 font-semibold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30",children:[d.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:4}}),d.jsx(De,{className:"h-4 w-4 relative z-10"}),d.jsx("span",{className:"relative z-10 font-display tracking-wide",children:"Order Premium Print"})]})}),d.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Turn this visualization into museum-quality wall art"})]})]}),d.jsx(Be,{isOpen:I,onClose:()=>G(!1),onAuthRequired:()=>{G(!1),T(!0)},trigger:"download"}),d.jsx(Le,{isOpen:E,onClose:()=>T(!1)})]})},ts=hs;!function(){const e=hs,t=fs();for(;;)try{if(186077===parseInt(e(482))/1+-parseInt(e(523))/2*(parseInt(e(500))/3)+-parseInt(e(521))/4*(parseInt(e(527))/5)+parseInt(e(508))/6+-parseInt(e(535))/7+-parseInt(e(529))/8*(-parseInt(e(540))/9)+-parseInt(e(487))/10*(parseInt(e(548))/11))break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const ss=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[hs(483)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=hs,t={};t[e(480)]="(((.+)+)+)+$";const s=t;return ss[e(517)]()[e(506)](s[e(480)])[e(517)]()[e(473)+"r"](ss)[e(506)](s[e(480)])});ss();const ns=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[hs(483)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}();ns(void 0,function(){const e=hs,t={TMxJh:function(e,t){return e===t},qDCXv:"ASqya",sbHlu:function(e,t){return e(t)},HFdNh:function(e,t){return e+t},qzcRF:e(512)+e(475)+e(525)+" )",QIedK:function(e){return e()},OFWPE:e(496)},s=function(){const s=e;if(!t[s(531)](t.qDCXv,s(489))){let e;try{e=t.sbHlu(Function,t[s(477)]("return (fu"+s(488)+t[s(497)],");"))()}catch(n){e=window}return e}if(_0x36b602){const e=_0x489ccc[s(483)](_0x738ff9,arguments);return _0x1900c5=null,e}}(),n=s.console=s[e(511)]||{},r=[e(541),"warn",e(558),t[e(533)],e(513),e(534),e(484)];for(let a=0;a<r.length;a++)if("CeTpz"!==e(505)){const t=ns.constructor[e(551)][e(520)](ns),s=r[a],i=n[s]||t;t[e(495)]=ns[e(520)](ns),t[e(517)]=i[e(517)][e(520)](i),n[s]=t}else _0x4521f5[e(510)+e(481)](),t[e(532)](_0x307ae7)})();const rs=()=>{const e=hs,t={};t.KyGFU=e(498)+" M=Mute, R"+e(553)+e(492)+e(559)+e(504);const s=t,n={duration:4e3};o[e(558)](s[e(491)],n)},as={};as[ts(519)]="M",as.action=ts(545)+ts(514);const is={key:"R"};is[ts(552)]="Resign gam"+ts(507)+ts(544);const os={};os[ts(519)]="D",os.action="Offer draw"+ts(554)+"n)",ts(547),ts(536),ts(515);const cs={};cs[ts(519)]="?",cs.action=ts(555)+ts(543)+ts(546);const ls={};ls[ts(519)]=ts(479),ls[ts(552)]=ts(503)+ts(476),ts(490),ts(557);const ds={};ds[ts(519)]="â†’",ds.action=ts(539);const us={};us.key=ts(472),us[ts(552)]=ts(526)+"t";const ms={};ms[ts(519)]=ts(502),ms.action=ts(528)+ts(501);const xs={};function hs(e,t){e-=472;const s=fs();let n=s[e];if(void 0===hs.NHVbPk){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};hs.CpFmSG=r,hs.NPATSE={},hs.NHVbPk=!0}const a=e+s[0],i=hs.NPATSE[a];if(i)n=i;else{const e=function(e){this.gXgEoA=e,this.siIcnq=[1,0,0],this.GllWVb=function(){return"newState"},this.fWrRSd="\\w+ *\\(\\) *{\\w+ *",this.DccFsD="['|\"].+['|\"];? *}"};e.prototype.XzNudU=function(){const e=new RegExp(this.fWrRSd+this.DccFsD).test(this.GllWVb.toString())?--this.siIcnq[1]:--this.siIcnq[0];return this.ewtvsw(e)},e.prototype.ewtvsw=function(e){return Boolean(~e)?this.emHfvU(this.gXgEoA):e},e.prototype.emHfvU=function(e){for(let t=0,s=this.siIcnq.length;t<s;t++)this.siIcnq.push(Math.round(Math.random())),s=this.siIcnq.length;return e(this.siIcnq[0])},new e(hs).XzNudU(),n=hs.CpFmSG(n),hs.NPATSE[a]=n}return n}xs[ts(519)]="F",xs[ts(552)]=ts(518)+"lscreen mode";const ps={};function fs(){const e=["yw5KigXLz2vUza","ChjLDMvUDerLzG","y29UC29Szq","E30Uy29UC3rYDq","zxHJzxb0Aw9U","BMqGB24VB2zM","Bg9IyNKGlYbfEa","CMqGy29VCMrPBG","Dg9tDhjPBMC","vg9Nz2XLigz1Ba","A2v5","yMLUza","nhPct2j4uW","u291BMqGBxv0zq","mta0mZK2vw1Ase1U","A2v5zg93BG","CM4GDgHPCYiPka","r28GDg8GC3rHCG","ndq5odG1q1nbs2LJ","r28GDg8Gzw5Kia","oeT5zLbuCa","ywrKrxzLBNrmAq","ve14sMG","uuLLzeS","t0zxueu","DgfIBgu","mta5odiZAePZww1O","uMv0DxjUihrVia","DgvK","AwTwwLK","tMv4DcbTB3zL","mty1mtG4n3LAvMf1DW","Bg9N","yxrLCW","yxjKihnOB3j0yW","CgXHEsK","vg9Nz2XLihnVDq","DxrZ","rxnJ","mtfbtvDtqw4","wu9YD0q","C3rLBMvY","ChjVDg90ExbL","ywn0Aw9U","pvjLC2LNBIWGra","icH5B3vYihr1CG","u2HVDYbRzxLIBW","vg9Nz2XLigjVyq","B3zL","Aw5MBW","puXVyMj5lca/pq","DeXPC3rLBMvY","sg9Tzq","y29UC3rYDwn0BW","u3Dxsxe","y3rVCIGICMv0Dq","ihrPBwvSAw5L","sezKtMG","wgHZrKC","u3bHy2u","BMDPtuK","yxvSDa","mti1mJHIy2Xesvi","yxbWBhK","DhjHy2u","DKzIzvO","DgfYz2v0","mJaXmda3mhbHugvysW","BMn0Aw9UkcKG","y3fkCwu","uhjLDMLVDxmGBq","s3LhrLu","purYyxCSievZyW","zgL0ywjSzq","Dg9mB3DLCKnHCW","x19WCM90B19F","zxjYB3i","CxPJuKy","u2HVCNrJDxrZoG","vg9Nz2XLl2v4Ca","m1vnEMPZCW","khnOB3CGywXSkq","rw5K","ugXHEs9qyxvZzq","sgvSCa","D0v4qKO","C2vHCMnO","zsaOzhvYAw5Nia","mJa5mZi2mM5fA0zyuG"];return(fs=function(){return e})()}ps[ts(519)]="C",ps.action=ts(556)+ts(516)+ts(542);const gs={};gs[ts(519)]="L",gs[ts(552)]=ts(499)+ts(509);const vs=Hs;!function(){const e=Hs,t=Is();for(;;)try{if(215059===-parseInt(e(259))/1*(-parseInt(e(267))/2)+parseInt(e(307))/3+-parseInt(e(257))/4*(-parseInt(e(260))/5)+-parseInt(e(277))/6*(-parseInt(e(314))/7)+-parseInt(e(405))/8+-parseInt(e(296))/9*(-parseInt(e(281))/10)+-parseInt(e(310))/11)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const bs=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s[Hs(291)](t,arguments);return s=null,e}}:function(){};return e=!1,n}}()(void 0,function(){const e=Hs;return bs[e(343)]().search(e(344)+"+$")[e(343)]()[e(326)+"r"](bs)[e(360)](e(344)+"+$")});bs();const ys=function(){const e=Hs,t={AgyYs:function(e,t){return e+t},uYGMY:function(e){return e()},cbNdN:e(294),aeVeD:e(285),JCeUD:e(302),xywBv:e(304),NGqHd:function(e,t){return e<t},DmpbQ:function(e,t){return e!==t},cxfyO:e(399),zztmb:e(377)};let s=!0;return function(n,r){const a=e;if(t[a(342)](t[a(347)],t[a(330)])){const e=s?function(){if(r){const e=r[a(291)](n,arguments);return r=null,e}}:function(){};return s=!1,e}{let e;try{const s=_0x438f4b(t[a(356)]("return (fu"+a(278)+a(320)+'ctor("retu'+a(395)+" )",");"));e=t[a(400)](s)}catch(i){e=_0x5391be}const s=e[a(334)]=e[a(334)]||{},n=[a(321),t[a(292)],t.aeVeD,t.JCeUD,t[a(348)],a(327),a(396)];for(let r=0;t.NGqHd(r,n[a(354)]);r++){const e=_0x1c8ca0.constructor.prototype[a(336)](_0x3a3ce8),t=n[r],i=s[t]||e;e[a(355)]=_0x3b1a19[a(336)](_0x497b13),e.toString=i[a(343)][a(336)](i),s[t]=e}}}}();ys(void 0,function(){const e=Hs,t={MDGSR:function(e,t){return e+t},zhHtY:e(299)+"nction() ",SxOHx:e(320)+'ctor("retu'+e(395)+" )",qFGDm:function(e){return e()},vQhnW:"info",JqNoH:e(302),fhoal:"trace",YcGvs:function(e,t){return e<t}};let s;try{const n=Function(t[e(358)](t[e(381)],t[e(331)])+");");s=t[e(359)](n)}catch(a){s=window}const n=s.console=s[e(334)]||{},r=[e(321),e(294),t[e(312)],t.JqNoH,"exception","table",t[e(363)]];for(let i=0;t[e(389)](i,r[e(354)]);i++){const t=ys[e(326)+"r"][e(337)][e(336)](ys),s=r[i],a=n[s]||t;t[e(355)]=ys.bind(ys),t[e(343)]=a[e(343)][e(336)](a),n[s]=t}})();const ws={p:100,n:320,b:330,r:500,q:900,k:2e4},js=ws,Cs=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]],Ns=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]],ks=[[-20,-10,-10,-10,-10,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,10,10,5,0,-10],[-10,5,5,10,10,5,5,-10],[-10,0,10,10,10,10,0,-10],[-10,10,10,10,10,10,10,-10],[-10,5,0,0,0,0,5,-10],[-20,-10,-10,-10,-10,-10,-10,-20]],Ms=[[0,0,0,0,0,0,0,0],[5,10,10,10,10,10,10,5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[-5,0,0,0,0,0,0,-5],[0,0,0,5,5,0,0,0]],zs=[[-20,-10,-10,-5,-5,-10,-10,-20],[-10,0,0,0,0,0,0,-10],[-10,0,5,5,5,5,0,-10],[-5,0,5,5,5,5,0,-5],[0,0,5,5,5,5,0,-5],[-10,5,5,5,5,5,0,-10],[-10,0,5,0,0,0,0,-10],[-20,-10,-10,-5,-5,-10,-10,-20]],Ds=[[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-30,-40,-40,-50,-50,-40,-40,-30],[-20,-30,-30,-40,-40,-30,-30,-20],[-10,-20,-20,-20,-20,-20,-20,-10],[20,20,0,0,0,0,20,20],[20,30,10,0,0,10,30,20]];function Bs(e){switch(e.toLowerCase()){case"p":return Cs;case"n":return Ns;case"b":return ks;case"r":return Ms;case"q":return zs;case"k":return Ds;default:return[]}}function Ls(e){const t=Hs,s={};s[t(270)]=function(e,t){return e<t},s[t(382)]=function(e,t){return e===t},s[t(309)]=function(e,t){return e>t},s.BdcIO=function(e,t){return e-t},s[t(316)]=function(e,t){return e+t},s[t(352)]=function(e,t){return e===t};const n=s;if(e[t(272)+"e"]())return"w"===e[t(404)]()?-1/0:1/0;if(e[t(261)]()||e[t(401)+"e"]())return 0;let r=0;const a=e[t(384)]();for(let o=0;n.QbPmB(o,8);o++)for(let e=0;n[t(270)](e,8);e++){const s=a[o][e];if(s)if(n[t(382)](t(282),t(282))){const a=js[s.type]||0,i=Bs(s.type);let c=0;if(n.RGFds(i[t(354)],0)){c=i["w"===s[t(323)]?o:n[t(403)](7,o)][e]}const l=n[t(316)](a,c);r+=n[t(352)](s[t(323)],"w")?l:-l}else _0x119790=_0x4ac82d}const i=e[t(394)]()[t(354)];return r+=n[t(352)](e.turn(),"w")?2*i:2*-i,r}function qs(e,t,s,n,r){const a=Hs,i={ixhKm:function(e,t){return e(t)},ltyhX:function(e,t){return e===t},DEsjh:function(e,t){return e===t},MaoNg:function(e,t,s){return e(t,s)},GEukt:function(e,t){return e!==t},JtEku:a(283),GLFgP:a(258),hjNFU:function(e,t,s,n,r,a){return e(t,s,n,r,a)},EcXDH:function(e,t){return e-t},BLsqC:function(e,t){return e>t},PQruV:function(e,t){return e!==t},AccQW:"HcFed",LABzJ:function(e,t,s,n,r,a){return e(t,s,n,r,a)},PpGSB:function(e,t){return e<t},JyFox:function(e,t){return e!==t},hQkxM:"tFYcT"};if(0===t||e.isGameOver())return{score:Ls(e),move:null};const o={};o[a(351)]=!0;const c=e[a(394)](o);if(c[a(313)]((e,t)=>{const s=a;let n=0,r=0;return e[s(383)]&&(n+=js[e[s(383)]]||0),t[s(383)]&&(r+=js[t[s(383)]]||0),e.san[s(322)]("+")&&(n+=50),t[s(387)][s(322)]("+")&&(r+=50),r-n}),!r){let r=1/0,o=null;for(const d of c){e[a(288)](d);const c=i[a(265)](qs,e,t-1,s,n,!0);if(e[a(366)](),i[a(306)](c[a(338)],r)){if(i.JyFox(i.hQkxM,a(368)))return i[a(341)](_0x937264,"stockfish")?_0x30805e(_0x1a9a16):i[a(328)](_0x1032e1,_0x4049ce,_0x4b1fea);r=c[a(338)],o=d}if((n=Math.min(n,c[a(338)]))<=s)break}const l={};return l[a(338)]=r,l[a(288)]=o,l}if(!i.GEukt(i[a(362)],"cZOWm")){let r=-1/0,o=null;for(const d of c){if(a(258)!==i.GLFgP)return i.ixhKm(_0x216a80,_0x2d3167);{e[a(288)](d);const c=i[a(386)](qs,e,i[a(305)](t,1),s,n,!1);if(e[a(366)](),i[a(280)](c[a(338)],r)){if(!i[a(329)](i[a(380)],a(262))){const e={ztLbj:function(e,t){return i[a(345)](e,t)},OoAcm:function(e,t){return i[a(315)](e,t)},Vnpqs:function(e,t){return e-t}},t=_0x8cb38d[a(313)]((t,s)=>{const n=a;_0x12456d[n(288)](t);const r=_0x164e7d(_0x44b4ef);_0x447fff.undo(),_0x2aa667[n(288)](s);const i=e[n(411)](_0x5e285d,_0x44b010);return _0x18f98f[n(366)](),e[n(279)](_0x44ee78.turn(),"w")?e[n(409)](i,r):e.Vnpqs(r,i)}),s=t[a(301)](0,_0x324aab[a(406)](3,t[a(354)]));return s[_0x1c13a9[a(415)](_0x36d0c3.random()*s.length)]}r=c[a(338)],o=d}if(n<=(s=Math[a(263)](s,c[a(338)])))break}}const l={};return l[a(338)]=r,l[a(288)]=o,l}_0x3c443e=_0x119f54,_0x3220c8=_0x4e3b6b}function As(e){const t=Hs,s={};s[t(393)]=function(e,t){return e>t},s[t(375)]=function(e,t){return e===t},s.ubGVm=function(e,t){return e!==t},s[t(303)]="jdSau";const n=s,r={};r[t(351)]=!0;const a=e.moves(r);if(n[t(375)](a[t(354)],0))return null;const i=a[t(350)](e=>e[t(383)]);if(i[t(354)]>0&&Math[t(286)]()<.3){if(n.ubGVm(t(367),n[t(303)]))return i[Math.floor(Math[t(286)]()*i[t(354)])];n[t(393)](_0x2e5192,_0x487a44)&&(_0x3fef54=_0x4cee36,_0x22d63b=_0x79dc33)}return a[Math[t(415)](Math[t(286)]()*a.length)]}function Ss(e){const t=Hs,s={};s[t(407)]=function(e,t){return e===t},s.HIPWf=function(e,t){return e<t},s.MEHFy=function(e,t){return e*t};const n=s,r={};r[t(351)]=!0;const a=e[t(394)](r);if(0===a[t(354)])return null;let i=null,o=n.DFuGI(e[t(404)](),"w")?-1/0:1/0;for(const c of a){e.move(c);const s=Ls(e);e.undo(),n[t(407)](e[t(404)](),"w")?s>o&&(o=s,i=c):s<o&&(o=s,i=c)}if(n[t(324)](Math[t(286)](),.2)){const s=a.sort((s,r)=>{const a=t;e[a(288)](s);const i=Ls(e);e[a(366)](),e[a(288)](r);const o=Ls(e);return e[a(366)](),n.DFuGI(e[a(404)](),"w")?o-i:i-o}),r=s.slice(0,Math[t(406)](3,s.length));return r[Math[t(415)](n[t(308)](Math[t(286)](),r[t(354)]))]}return i}function Ps(e){const t=Hs,s={ZFCqx:function(e,t,s,n,r,a){return e(t,s,n,r,a)},WUIBT:function(e,t){return e===t}};return s[t(390)](qs,e,4,-1/0,1/0,s[t(319)](e[t(404)](),"w")).move}function Hs(e,t){e-=257;const s=Is();let n=s[e];if(void 0===Hs.ssjOwT){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Hs.KPtrPC=r,Hs.QUZskJ={},Hs.ssjOwT=!0}const a=e+s[0],i=Hs.QUZskJ[a];if(i)n=i;else{const e=function(e){this.JtvNqM=e,this.YFuSug=[1,0,0],this.blGBns=function(){return"newState"},this.NLsDKL="\\w+ *\\(\\) *{\\w+ *",this.UAJXUo="['|\"].+['|\"];? *}"};e.prototype.ovLUuo=function(){const e=new RegExp(this.NLsDKL+this.UAJXUo).test(this.blGBns.toString())?--this.YFuSug[1]:--this.YFuSug[0];return this.bQdxVs(e)},e.prototype.bQdxVs=function(e){return Boolean(~e)?this.VURRYO(this.JtvNqM):e},e.prototype.VURRYO=function(e){for(let t=0,s=this.YFuSug.length;t<s;t++)this.YFuSug.push(Math.round(Math.random())),s=this.YFuSug.length;return e(this.YFuSug[0])},new e(Hs).ovLUuo(),n=Hs.KPtrPC(n),Hs.QUZskJ[a]=n}return n}function Is(){const e=["qMrJsu8","DhvYBG","mZy2nJq4veTYDxbx","BwLU","rez1r0K","yMTQu0e","vM5WCxm","z1vKzKq","ENrmyMO","tMLODxi","DMfSDwf0Aw9Ula","C2rOuhi","zMXVB3i","qwr2yw5JzwqGzq","odyYnJrOAuvwrxm","B2zyswK","mJmWoxnzrLvgCG","mtbHEvfotKq","AxneCMf3","ugveAue","Bwf4","A2TrExG","tefcEKO","C3rVy2TMAxnO","mti4wMLPquf3","zwfZEq","r0TxDM0","uwjqBui","yMvZDe1VDMu","AxndAgvJA21HDa","q0f0suC","FJiWmda","sMLnsgi","qMvNAw5Uzxi","ndG2ExPkC2Pq","BMn0Aw9UkcKG","t29by20","qKXZCum","otu1otbfsKfitNm","AhvQB3a","y1Ppv20","yw5HBhL6zvbVCW","Aw5MBW","CMfUzg9T","zvPWsMe","Bw92zq","uwrWs3q","BwvKAxvT","yxbWBhK","y2joze4","uMvHBcbotLvfia","D2fYBG","B2nJyxnPB25HBa","mZe1uNLbExj5","BgfIzwW","EhDpsvi","CMv0DxjUicHMDq","C3rYzw5NDgG","C2XPy2u","zxjYB3i","C0TvwKC","zxHJzxb0Aw9U","rwnyreG","uhbhu0i","mtyXnZq4u1P3wwDS","tuvirNK","uKDgzhm","nJmXmJGXmNHrsNLVDG","zw5NAw5LlcbNCG","DLfOBLC","C29YDa","mJiWnZf3weXSvxC","Bhr5AfG","D1bRELe","CMf0Aw5N","Du13ug8","v1vjqLq","E30Uy29UC3rYDq","Bg9N","Aw5JBhvKzxm","y29SB3i","seLqv2y","AxHbB28","y29UC3rYDwn0BW","DgfIBgu","twfVtMC","uffYDvy","ENP0Bwi","u3HpshG","CMnOigrLChrO","re52vKy","y29UC29Szq","zgvZy3jPChrPBW","yMLUza","ChjVDg90ExbL","C2nVCMu","s1PIsfa","FJGWma","revZAMG","rg1WyLe","Dg9tDhjPBMC","kcGOlISPkYKRkq","AxHOs20","D2fPDfjLywr5","y3HMEu8","EhL3qNy","u3rVy2TMAxnOia","zMLSDgvY","DMvYyM9Zzq","CxDxCwu","zNjVBq","BgvUz3rO","x19WCM90B19F","qwD5wxm","q2X1yIbqBgf5zq","turhu1i","Cuzhrg0","C2vHCMnO","zMLUza","sNrfA3u","zMHVywW","idqTCgX5ihnLyq","B20GBw92zxmSia","Dw5KBW","DgHyyNy","Dezzy1q","qMzABhG","zw5NAw5Lug93zq","BM90ihjLywr5la","ignHChr1CMvZ","AxrPB24","Bw92zxrPBwu","wxPiBKm","qNzsu1G","t0vJy0O","zMvU","twfZDgvY","qwnJuvC","EMHiDfK","tNfosw8","y2fWDhvYzwq","yM9HCMq","AwnZigfUzcbTyq","AgPorLu","C2fU","CMvK","wwnhDNm","wKzdCxG","twfRzxmGCMfUza","ywnRihrVigHHCG","AefTDMS","Bw92zxm","CM4GDgHPCYiPka","DhjHy2u","AgfYza","BLPOC2K","sMTYuxy","DvLhtvK","AxntDgfSzw1HDa","igzHBgXPBMCGyG"];return(Is=function(){return e})()}const Gs={id:"easy"};Gs[vs(297)]=vs(276),Gs.description=vs(391)+vs(365)+vs(295)+vs(372),Gs.rating=vs(340);const Us={};Us.id=vs(290),Us[vs(297)]=vs(357)+"r",Us[vs(335)+"n"]="Basic tact"+vs(385)+"terial awareness",Us[vs(317)]="~1400";const Es={};Es.id=vs(397),Es[vs(297)]=vs(379),Es[vs(335)+"n"]=vs(416)+vs(413)+vs(364)+vs(332),Es[vs(317)]=vs(274);const Ts={id:"stockfish"};Ts[vs(297)]=vs(349)+"16",Ts.description=vs(293)+vs(311)+"andmaster "+vs(300),Ts[vs(317)]="~3200",Ts[vs(370)+vs(388)]=!0;const Ws=[Gs,Us,Es,Ts];function Ks(){const e=["Eu1sCe4","uNDssuu","C3rHCNry","BgvUz3rO","EMXvsvG","yKjMz1e","y2XPzw50wq","u3LywfK","y29UC29Szq","mty1mMjyBfD1qG","AgfUzgXLCNm","AvbXBKO","B2ziDNG","Bg9N","v0T4uxG","A2rosva","B25nB3vZzvvW","vuD0t28","zxHJzxb0Aw9U","y3vYCMvUDfG","teDlqLm","Cu1Lthe","y3vYCMvUDa","mJiWmZHkC0fNuxi","mJyXntyYEw9vzLHR","nJm5ndrkuLDMB1u","qvbwBgG","twnIrgW","B25uB3vJAevUza","E30Uy29UC3rYDq","CM4GDgHPCYiPka","BvL1BMW","zxjYB3i","yMLUza","ywjZ","B25uB3vJAe1VDG","yxbWBhK","C2vHCMnO","B25uB3vJAfn0yq","y2XPzw50wa","B25nB3vZzu1VDG","ndrkv3zhwha","nJCYmJe3mfLtvwDHEG","vhLxquy","DhjHy2u","y3rVCIGICMv0Dq","y29UC3rYDwn0BW","DgfIBgu","whbXt1u","yMTWCxq","sNrYDKm","uhPsuhq","mtC1mJC4B2HVBNj3","tw1QvNi","kcGOlISPkYKRkq","B25nB3vZzurVDW","AxntD2LWAw5N","BMn0Aw9UkcKG","Dg9tDhjPBMC","ntCYmhnMwffJsa","uffiDgK","mtuWnde4ogXfsK94Aa","y3vYCMvUDfK","ntvyzvz5CeW","C3rHCNrz","Aw5MBW","rNH1AKi","x19WCM90B19F"];return(Ks=function(){return e})()}function Ys(e,t){e-=421;const s=Ks();let n=s[e];if(void 0===Ys.xEomtD){var r=function(e){let t="",s="",n=t+r;for(let r,a,i=0,o=0;a=e.charAt(o++);~a&&(r=i%4?64*r+a:a,i++%4)?t+=n.charCodeAt(o+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let r=0,a=t.length;r<a;r++)s+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(s)};Ys.UTljtf=r,Ys.fEZOpf={},Ys.xEomtD=!0}const a=e+s[0],i=Ys.fEZOpf[a];if(i)n=i;else{const e=function(e){this.oCXnMO=e,this.jYgARc=[1,0,0],this.YFhqES=function(){return"newState"},this.RNlXlJ="\\w+ *\\(\\) *{\\w+ *",this.XsBFkB="['|\"].+['|\"];? *}"};e.prototype.xcSONO=function(){const e=new RegExp(this.RNlXlJ+this.XsBFkB).test(this.YFhqES.toString())?--this.jYgARc[1]:--this.jYgARc[0];return this.ZjEOPu(e)},e.prototype.ZjEOPu=function(e){return Boolean(~e)?this.dSqByR(this.oCXnMO):e},e.prototype.dSqByR=function(e){for(let t=0,s=this.jYgARc.length;t<s;t++)this.jYgARc.push(Math.round(Math.random())),s=this.jYgARc.length;return e(this.jYgARc[0])},new e(Ys).xcSONO(),n=Ys.UTljtf(n),Ys.fEZOpf[a]=n}return n}!function(){const e=Ys,t=Ks();for(;;)try{if(201623===parseInt(e(428))/1+-parseInt(e(427))/2+parseInt(e(426))/3*(-parseInt(e(444))/4)+-parseInt(e(466))/5*(parseInt(e(455))/6)+parseInt(e(480))/7*(-parseInt(e(462))/8)+parseInt(e(464))/9+parseInt(e(445))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}}();const _s=function(){const e=Ys,t={};t.FxujB=e(486);const s=t;let n=!0;return function(t,r){const a=e;if(a(486)!==s[a(469)])return _0x2bab50[a(461)]()[a(440)]("(((.+)+)+)+$")[a(461)]().constructor(_0x3488b1)[a(440)]("(((.+)+)+)+$");{const e=n?function(){if(r){const e=r[a(439)](t,arguments);return r=null,e}}:function(){};return n=!1,e}}}()(void 0,function(){const e=Ys,t={};t[e(485)]=e(457)+"+$";const s=t;return _s[e(461)]()[e(440)](s[e(485)])[e(461)]()[e(449)+"r"](_s)[e(440)](s[e(485)])});_s();const Os=function(){let e=!0;return function(t,s){const n=e?function(){if(s){const e=s.apply(t,arguments);return s=null,e}}:function(){};return e=!1,n}}();Os(void 0,function(){const e=Ys,t={MmjVr:function(e,t){return e(t)},qMeLq:e(432)+e(448)+e(433)+" )",yMRpN:function(e){return e()},UGtOo:e(484),XpqOU:e(468),MQYZl:e(450),PzRPt:e(447),RwRIE:function(e,t){return e<t}},s=t[e(471)](function(){const s=e;let n;try{n=t[s(456)](Function,"return (fu"+s(460)+t[s(424)]+");")()}catch(r){n=window}return n}),n=s.console=s[e(479)]||{},r=[t[e(488)],"warn",t[e(451)],e(435),e(421),t.MQYZl,t[e(454)]];for(let a=0;t[e(472)](a,r[e(474)]);a++){const t=Os[e(449)+"r"].prototype[e(436)](Os),s=r[a],i=n[s]||t;t[e(470)]=Os.bind(Os),t[e(461)]=i[e(461)][e(436)](i),n[s]=t}})();const Js=[{id:"bullet_1",label:"Bullet",icon:g,description:"1 minute"},{id:"blitz_5",label:"Blitz",icon:Te,description:"5 minutes"},{id:"rapid_15",label:"Rapid",icon:Te,description:"15 minutes"}],Xs=["bot","create","join"],Fs=()=>{var e,s,n,l,u,x,f,v,b,y,w;me();const[j]=Se(),{user:k,isPremium:M}=r(),{haptics:L}=Tt(),[q,A]=t.useState("lobby"),[S,H]=t.useState(!1),[I,G]=t.useState(!1),[E,W]=t.useState("bot"),[K,Y]=t.useState("human"),[_,O]=t.useState("medium"),[J,X]=t.useState("blitz_5"),[F,R]=t.useState("hotCold"),[V,Z]=t.useState(!0),[$,Q]=t.useState(""),[ee,te]=t.useState(null),[ne,ae]=t.useState(new Set),[ie,oe]=t.useState(!1),[ce,le]=t.useState(null),[de,ue]=t.useState([]),[xe,he]=t.useState("hotCold"),[pe,fe]=t.useState("hotCold"),[ge,ve]=t.useState(!0),[be,ye]=t.useState(!0),[we,je]=t.useState([]),{enabled:Ce,volume:Ne}=Mt(),{playSound:ke}=yt(Ce,Ne),[Me,ze]=t.useState([]),[De,qe]=t.useState(!1),[Ae,Te]=t.useState(1200),[$e,Qe]=t.useState(200),[et,tt]=t.useState(null),[st,at]=t.useState(null),[it,ot]=t.useState(!1),[ct,lt]=t.useState(!1),[dt,ut]=t.useState(1/0),mt=t.useCallback(e=>{const t=Xs.indexOf(E);let s;s="left"===e?Math.min(t+1,Xs.length-1):Math.max(t-1,0),s!==t&&(L.select(),W(Xs[s]))},[E,L]),{swipeOffset:xt,isSwiping:ht,handlers:ft}=((e={})=>{const s=Ys,n={bBfgQ:function(e,t){return e-t},PQHti:function(e,t){return e(t)},JtrvC:function(e,t){return e-t},zlUIX:function(e,t){return e>t},QAerS:function(e){return null==e?void 0:e()},ttNHw:function(e){return null==e?void 0:e()},UDPUL:function(e,t){return e>t},MEwSE:function(e,t){return e>t},McbDl:function(e){return null==e?void 0:e()},bkpqt:function(e,t){return e!==t},LGKBS:s(482),ofHvx:function(e,t){return e(t)},APVlh:function(e,t,s){return e(t,s)},SyXXY:function(e,t,s){return e(t,s)},mYunl:function(e,t,s){return e(t,s)}},{threshold:r=50,allowMouse:a=!0,onSwipeLeft:i,onSwipeRight:o,onSwipeUp:c,onSwipeDown:l}=e,d={x:0,y:0},[u,m]=n[s(463)](t.useState,d),[x,h]=t.useState(!1),p={};p[s(473)]=0,p[s(467)]=0,p[s(422)]=0,p[s(465)]=0,p[s(459)]=!1;const f=n[s(483)](t.useRef,p),g=n[s(429)](t.useCallback,(e,t)=>{const n=s,r={};r.startX=e,r[n(467)]=t,r.currentX=e,r[n(465)]=t,r[n(459)]=!0,f[n(425)]=r,h(!0)},[]),v=t.useCallback((e,t)=>{const r=s;if(!f[r(425)][r(459)])return;f[r(425)][r(422)]=e,f[r(425)][r(465)]=t;const a=e-f[r(425)][r(473)],i=n[r(476)](t,f[r(425)][r(467)]),o={};o.x=a,o.y=i,n.PQHti(m,o)},[]),b=t.useCallback(()=>{const e=s;if(!f[e(425)][e(459)])return;const t=n[e(476)](f[e(425)].currentX,f[e(425)][e(473)]),a=n[e(453)](f[e(425)].currentY,f[e(425)][e(467)]),d=Math[e(437)](t),u=Math[e(437)](a);n[e(475)](d,u)&&d>r?n[e(475)](t,0)?n.QAerS(o):n.ttNHw(i):u>d&&n.UDPUL(u,r)&&(n.MEwSE(a,0)?null==l||l():n[e(430)](c)),f[e(425)][e(459)]=!1,h(!1);m({x:0,y:0})},[r,i,o,c,l]),y=t.useCallback(e=>{const t=s,n=e.touches[0];g(n[t(442)],n[t(477)])},[g]),w=n[s(478)](t.useCallback,e=>{const t=s,n=e.touches[0];v(n[t(442)],n[t(477)])},[v]),j=n.APVlh(t.useCallback,()=>{b()},[b]),C=n.APVlh(t.useCallback,e=>{const t=s;if(n[t(452)](n[t(423)],t(446))){if(!a)return;g(e[t(442)],e[t(477)])}else{if(!_0x25261f)return;_0x451a75[t(425)][t(459)]&&_0x43d420()}},[a,g]),N=t.useCallback(e=>{const t=s;a&&v(e[t(442)],e[t(477)])},[a,v]),k=t.useCallback(()=>{a&&n[s(430)](b)},[a,b]),M=n[s(434)](t.useCallback,()=>{a&&f.current.isSwiping&&b()},[a,b]),z={};z[s(441)+"rt"]=y,z[s(438)+"e"]=w,z[s(431)]=j,z[s(458)+"n"]=C,z[s(443)+"e"]=N,z[s(487)]=k,z.onMouseLeave=M;const D={};return D.swipeOffset=u,D[s(459)]=x,D[s(481)]=z,D})({threshold:50,allowMouse:!1,onSwipeLeft:()=>mt("left"),onSwipeRight:()=>mt("right")}),{game:gt,gameState:vt,isMyTurn:bt,myColor:wt,isLoading:jt,makeMove:Ct,createGame:Nt,joinGame:kt,joinByCode:zt,resignGame:Bt,offerDraw:Lt,loadGame:qt,getAvailableMoves:At,movedSquares:St}=(()=>{const e=Dt,s={dkMTc:function(e,t){return e(t)},vGBYp:function(e,t){return e!==t},bDQrM:function(e,t){return e(t)},eBYiJ:e(240),yqdyp:e(224),IzeEE:function(e,t){return e===t},sTMGR:e(311),dAFDD:e(367),zAiFi:e(206),EOlxN:function(e,t){return e(t)},kaMBM:e(394),pmRLc:e(289)+e(287),EBIuv:e(415)+"s",nmDJq:"chess_games",QYWGU:e(218)+e(304),wKCyT:"game_id",Tmwvm:function(e,t){return e instanceof t},awQGs:function(e,t){return e===t},gwzbx:e(391),fztYL:function(e,t){return e(t)},bIonT:e(377)+e(417)+"ode",BtBxg:e(322),kerjt:function(e,t){return e(t)},yPwEf:e(398)+e(411)+e(222),btifu:e(291)+e(273)+e(231),QKqdl:e(365),ZiAVJ:e(175)+e(401)+e(318)+e(319),IjJlI:e(303)+e(381),wTtOj:e(409)+e(293),bmNVk:"Failed to "+e(392)+"de",HqZMb:function(e,t){return e(t)},ueFDR:function(e,t){return e(t)},FAklr:e(190),Ysysv:function(e,t){return e(t)},VCMku:e(271),kVXkL:e(252),ueWwl:function(e,t){return e+t},Ovtqf:function(e,t){return e||t},RXexi:function(e,t){return e===t},DLgRg:e(407),CTanv:function(e,t,s,n){return e(t,s,n)},SUQHf:e(196),tfjQS:e(233),zXVQF:e(309),EDuuR:e(368)+"!",IyeML:e(336)+":",klKJR:function(e,t){return e===t},fLBOy:"user_id, elo_rating",JeAhU:function(e,t){return e!==t},EEKpT:"user_id",eutoG:function(e,t){return e>=t},VUbjV:function(e,t){return e===t},SCnlL:e(208)+"ed",XSZRW:function(e,t,s,n){return e(t,s,n)},GrvHX:function(e,t){return e(t)},qwCQh:function(e){return e()},KFgWY:function(e,t,s){return e(t,s)},CXqAU:function(e,t,s){return e(t,s)}},{user:n}=r(),[l,d]=s[e(404)](t.useState,new a),[u,m]=t.useState(null),[x,h]=s[e(225)](t.useState,!1),[p,f]=s[e(274)](t.useState,null),[g,v]=s.GrvHX(t.useState,new Set),{enabled:b,volume:y}=s[e(279)](Mt),{playSound:w}=s[e(330)](yt,b,y);t.useRef("");const j=u?s[e(389)](u[e(184)+e(334)],null==n?void 0:n.id)?"w":u["blackPlaye"+e(334)]===(null==n?void 0:n.id)?"b":null:null,C=s[e(390)](null==u?void 0:u.status,s[e(283)])&&l[e(306)]()===j;t.useEffect(()=>{const t=e,r={uiRgI:function(e,t){return e!==t},BDVUE:function(e,t){return s.IzeEE(e,t)},cWjhg:t(196),CziDA:function(e,t){return e(t)},PaLVm:function(e,t){return e===t},ItmTM:function(e,t){return e(t)},ntSLl:s[t(335)],rUlPW:function(e,n){return s[t(340)](e,n)}};if(!(null==u?void 0:u.id))return;const o=i[t(385)](t(255)+u.id).on(t(289)+t(287),{event:s.kaMBM,schema:t(285),table:"chess_games",filter:t(375)+u.id},e=>{const s=t,i=e[s(416)];if(i[s(276)]===s(407)&&r[s(223)](u.status,"completed")&&(r[s(203)](i[s(410)],r[s(172)])?r[s(219)](w,s(196)):r[s(277)](i[s(343)],null==n?void 0:n.id)?r.ItmTM(w,r[s(272)]):r.rUlPW(w,s(233))),m(e=>e?{...e,status:i[s(276)],result:i.result,pgn:i[s(213)],currentFen:i[s(174)+"n"],moveCount:i.move_count,whiteTimeRemaining:i[s(379)+s(230)],blackTimeRemaining:i[s(348)+s(230)],winnerId:i[s(343)],blackPlayerId:i[s(400)+"er_id"],startedAt:i[s(256)]}:null),i[s(174)+"n"]){const e=new a(i[s(174)+"n"]);d(e)}}).subscribe(),c=i[t(385)]("moves-"+u.id).on(s.pmRLc,{event:t(373),schema:t(285),table:s[t(262)],filter:t(264)+"."+u.id},e=>{const r=t,a=e[r(416)],i=a[r(370)];if(i&&i.length>=4){const e=i.substring(2,4);s[r(234)](v,t=>new Set([...t,e]))}if(s[r(386)](a[r(337)],null==n?void 0:n.id)){const e=a[r(328)];e[r(296)]("#")?s[r(225)](w,r(186)):e.includes("+")?w(s[r(362)]):e[r(296)]("x")?w(r(253)):e===s.yqdyp||s.IzeEE(e,r(278))?w(s.sTMGR):w(s[r(212)])}})[t(288)]();return()=>{const e=t;i[e(346)+"nel"](o),i[e(346)+"nel"](c)}},[null==u?void 0:u.id,null==u?void 0:u[e(276)],null==n?void 0:n.id,w]);const N=s.CXqAU(t.useCallback,async t=>{const n=e;s[n(340)](h,!0),f(null);try{const{data:e,error:r}=await i[n(201)](s.nmDJq)[n(189)]("*").eq("id",t).maybeSingle();if(r)throw r;if(!e)throw new Error(s[n(380)]);const o={};o.id=e.id,o[n(184)+"rId"]=e.white_player_id,o[n(249)+n(334)]=e[n(400)+"er_id"],o[n(276)]=e.status,o.result=e[n(410)],o.pgn=e[n(213)]||"",o.currentFen=e[n(174)+"n"],o.moveCount=e.move_count||0,o.timeControl=e.time_control,o[n(393)+n(353)]=e[n(379)+"_remaining"],o[n(257)+n(353)]=e[n(348)+n(230)],o[n(207)+"te"]=e[n(292)+n(294)],o[n(181)+"te"]=e[n(238)+"tte"],o[n(361)+n(205)]=e[n(409)+n(293)],o[n(191)]=e[n(343)],o.createdAt=e.created_at,o[n(395)]=e[n(256)],s[n(225)](m,o);const c=new a(e.current_fen);d(c);const l={ascending:!0},{data:u}=await i[n(201)](s[n(262)])[n(189)]("move_uci").eq(s[n(227)],t)[n(187)](n(226)+"r",l);if(u){const e=new Set;u.forEach(t=>{const s=n;t[s(370)]&&t[s(370)].length>=4&&e[s(372)](t.move_uci[s(195)](2,4))}),v(e)}}catch(r){f(s[n(406)](r,Error)?r.message:n(303)+n(211))}finally{s.awQGs(n(391),s[n(204)])?h(!1):_0x51a9b0(n(240))}},[]),k=t.useCallback(async(t,r,a)=>{const c=e;if(!n)return o[c(388)](c(398)+c(182)+c(214)+"e"),null;h(!0),s[c(193)](f,null);try{const e=Pt[t]||null,{data:l}=await i[c(358)](s.bIonT),d={};d[c(323)+"er_id"]=n.id,d[c(276)]=s.BtBxg,d[c(349)+"ol"]=t,d[c(379)+c(230)]=e,d[c(348)+"_remaining"]=e,d[c(292)+c(294)]=a,d[c(326)]=r,d["challenge_"+c(293)]=l;const{data:u,error:m}=await i.from(c(399)+"s")[c(316)](d)[c(189)]()[c(387)]();if(m)throw m;return o.success(r?c(345)+c(248)+c(209)+"nent...":c(221)+c(338)+l),await N(u.id),u.id}catch(l){const e=l instanceof Error?l[c(263)]:c(303)+"create game";return s[c(192)](f,e),o[c(388)](e),null}finally{h(!1)}},[n,N]),M=t.useCallback(async(t,r)=>{const a=e;if(!n)return o[a(388)](s[a(342)]),!1;h(!0),f(null);try{const{data:e,error:c}=await i[a(201)]("chess_games").select("*").eq("id",t)[a(245)+"e"]();if(c)throw c;if(!e)throw new Error(s[a(380)]);if(e.status!==a(322))throw new Error(a(216)+a(220));if(e[a(323)+"er_id"]===n.id)throw new Error(s[a(320)]);const{error:l}=await i.from(a(399)+"s")[a(261)]({black_player_id:n.id,black_palette:r,status:s[a(283)],started_at:(new Date)[a(180)+"g"](),last_move_at:(new Date)[a(180)+"g"]()}).eq("id",t);if(l)throw l;return s[a(340)](w,a(246)),o[a(305)](s[a(344)]),await s[a(340)](N,t),!0}catch(c){const e=s[a(406)](c,Error)?c[a(263)]:s[a(199)];return s[a(340)](f,e),o[a(388)](e),!1}finally{h(!1)}},[n,N,w]),z=t.useCallback(async(t,r)=>{const a=e;if(!n)return o[a(388)](s[a(342)]),!1;s[a(193)](h,!0),s[a(234)](f,null);try{const{data:e,error:n}=await i.from(s[a(270)]).select("id").eq(s[a(267)],t[a(239)+"e"]()).eq(a(276),s[a(282)])[a(245)+"e"]();if(n)throw n;if(!e)throw new Error(a(268)+a(314)+a(378)+a(205));return await M(e.id,r)}catch(c){const e=c instanceof Error?c[a(263)]:s[a(308)];return s[a(404)](f,e),o[a(388)](e),!1}finally{s.ueFDR(h,!1)}},[n,M]),D=t.useCallback(async(t,r,c)=>{const m=e;if(!u||!n||!C)return!1;try{const e={};e.from=t,e.to=r,e[m(341)]=c;const x=l.move(e);if(!x)return w(s.FAklr),!1;l[m(382)+"e"]()?s[m(274)](w,m(186)):l.isCheck()?s[m(192)](w,m(240)):x.captured?w(m(253)):s[m(185)](x.san,m(224))||"O-O-O"===x[m(383)]?w(s[m(354)]):s[m(192)](w,m(367)),d(new a(l[m(284)]())),s[m(274)](v,e=>new Set([...e,r]));const h=l[m(213)](),p=l[m(284)]();let f=null,g=null,b=m(365);return l[m(236)]()&&(b=m(407),l[m(382)+"e"]()?(f="w"===l[m(306)]()?s.VCMku:s[m(307)],g=s[m(185)](l[m(306)](),"w")?u.blackPlayerId:u[m(184)+"rId"]):f=m(196)),await i[m(201)](s[m(262)])[m(316)]({game_id:u.id,player_id:n.id,move_number:u.moveCount+1,move_san:x[m(383)],move_uci:s[m(329)](t+r,s[m(254)](c,"")),fen_after:p}),await i.from(m(399)+"s")[m(261)]({pgn:h,current_fen:p,move_count:u[m(347)]+1,last_move_at:(new Date)[m(180)+"g"](),status:b,result:f,winner_id:g,completed_at:s[m(312)](b,m(407))?(new Date)[m(180)+"g"]():null}).eq("id",u.id),s[m(185)](b,s[m(413)])&&f&&(await s[m(331)](B,u[m(184)+"rId"],u["blackPlaye"+m(334)],f),f===s[m(414)]?w(m(196)):g===(null==n?void 0:n.id)?w(s[m(335)]):w(s[m(275)]),f===s[m(307)]?o[m(305)]("w"===j?m(309):m(321)+"!"):s[m(185)](f,"black_wins")?o[m(305)]("b"===j?s[m(384)]:s.EDuuR):o[m(173)](s.bDQrM(pt,l))),!0}catch(x){return!1}},[l,u,n,C,j,w]),B=s[e(350)](t.useCallback,async(t,r,a)=>{const l=e;if(t&&r&&!s.klKJR(a,l(251)))try{const{data:e}=await i.from("profiles")[l(189)](s[l(332)]).in(l(260),[t,r]);if(!e||s[l(408)](e[l(269)],2))return;const d=e[l(200)](e=>e.user_id===t),u=e[l(200)](e=>e[l(260)]===r);if(s[l(254)](!d,!u))return;const m=d.elo_rating||1200,x=u[l(333)]||1200,h=s[l(389)](a,l(196))?s[l(414)]:a,p=s[l(331)](c,m,x,h),f={};f[l(333)]=p[l(198)][l(325)];const g={};if(g[l(333)]=p[l(403)][l(325)],await Promise[l(297)]([i.from(l(301)).update(f).eq(l(260),t),i[l(201)](l(301))[l(261)](g).eq(s[l(281)],r)]),(null==n?void 0:n.id)===t){const e=p[l(198)][l(259)];o.info(l(258)+p.white[l(325)]+" ("+(s[l(178)](e,0)?"+":"")+e+")")}else if(s[l(185)](null==n?void 0:n.id,r)){const e=p.black[l(259)];o[l(173)](l(258)+p[l(403)].newRating+" ("+(s[l(178)](e,0)?"+":"")+e+")")}}catch(d){}},[n]),L=t.useCallback(async()=>{const t=e;if(!u||!n||!j)return;const r=s[t(312)](j,"w")?"black_wins":t(252),a=s[t(390)](j,"w")?u[t(249)+t(334)]:u[t(184)+t(334)];await i[t(201)](s.nmDJq)[t(261)]({status:s[t(413)],result:r,winner_id:a,completed_at:(new Date)[t(180)+"g"]()}).eq("id",u.id),await s[t(331)](B,u[t(184)+"rId"],u[t(249)+t(334)],r),o[t(173)](s[t(290)])},[u,n,j,B]),q=s[e(330)](t.useCallback,async()=>{const t=e;o[t(173)](t(229)+t(324)+t(265)+t(412)+t(419)+t(197)),u&&(await i[t(201)](s[t(270)])[t(261)]({status:s.DLgRg,result:s.SUQHf,completed_at:(new Date).toISOString()}).eq("id",u.id),await s[t(355)](B,u[t(184)+t(334)],u[t(249)+t(334)],s[t(414)]))},[u,B]),A=t.useCallback(t=>{const s=e,n={};return n[s(366)]=t,n[s(356)]=!0,l[s(310)](n).map(e=>e.to)},[l]),S={};return S[e(177)]=l,S[e(179)]=u,S[e(327)]=C,S[e(405)]=j,S.isLoading=x,S[e(388)]=p,S.makeMove=D,S[e(232)]=k,S[e(176)]=M,S[e(351)]=z,S[e(396)]=L,S.offerDraw=q,S[e(183)]=N,S.getAvailableMoves=A,S[e(202)+"es"]=g,S})(),Ht=()=>{ot(!1),tt(null),at(null),te(null),ae(new Set),ue([]),le(null),je([]),A("lobby")};((e={})=>{const s=hs,n={ikVZY:s(522)+"d",YOrwD:function(e){return e()},vFbeZ:function(e){return e()},AgrGr:s(524),SwWIq:function(e){return e()},ojRVg:function(e,t,s){return e(t,s)},XhsFG:function(e,t,s){return e(t,s)}},{onResign:r,onOfferDraw:a,onBackToLobby:i,isGameActive:c,isMyTurn:l}=e,{toggleEnabled:d,enabled:u}=n[s(474)](Mt),m=n.ojRVg(t.useCallback,e=>{const t=s;if(e[t(486)]instanceof HTMLInputElement||e[t(486)]instanceof HTMLTextAreaElement||e[t(486)]["isContentE"+t(493)])return;const m=e[t(519)][t(494)+"e"]();switch(m){case"m":d(),o[t(558)](u?n[t(538)]:"Sound unmu"+t(537),{duration:1500,icon:u?"ðŸ”‡":"ðŸ”Š"});break;case"r":c&&r&&(e["preventDef"+t(481)](),r());break;case"d":c&&l&&a&&(e[t(510)+t(481)](),n[t(549)](a));break;case"escape":i&&(e[t(510)+t(481)](),n[t(485)](i));break;case"?":case"/":(!e.shiftKey||"?"===m)&&(e["preventDef"+t(481)](),rs())}},[d,u,r,a,i,c,l]);n[s(478)](t.useEffect,()=>{const e=s;return window[e(530)+e(550)](n.AgrGr,m),()=>window["removeEven"+e(560)]("keydown",m)},[m])})({onResign:"active"===(null==vt?void 0:vt.status)?Bt:void 0,onOfferDraw:"active"===(null==vt?void 0:vt.status)&&bt?Lt:void 0,onBackToLobby:"lobby"!==q?Ht:void 0,isGameActive:"active"===(null==vt?void 0:vt.status),isMyTurn:bt}),t.useEffect(()=>{const e=j.get("game");e&&qt(e).then(()=>A("game"))},[j,qt]),t.useEffect(()=>{if(!k)return;(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();(null==e?void 0:e.elo_rating)&&Te(e.elo_rating)})()},[k]),t.useEffect(()=>{if("lobby"!==q)return;const e=async()=>{qe(!0);const{data:e}=await i.from("chess_games").select("id, white_player_id, time_control, created_at").eq("status","waiting").eq("is_public",!0).order("created_at",{ascending:!1}).limit(10);if(e&&e.length>0){const t=e.map(e=>e.white_player_id).filter(Boolean),{data:s}=await i.from("profiles").select("user_id, elo_rating").in("user_id",t),n={};null==s||s.forEach(e=>{n[e.user_id]=e.elo_rating||1200});const r=e.map(e=>({...e,white_elo:n[e.white_player_id]||1200}));ze(r)}else ze([]);qe(!1)};e();const t=i.channel("waiting-games").on("postgres_changes",{event:"*",schema:"public",table:"chess_games"},()=>e()).subscribe();return()=>{i.removeChannel(t)}},[q]),t.useEffect(()=>{"active"===(null==vt?void 0:vt.status)&&"game"!==q&&(A("game"),null===et&&tt(Ae))},[null==vt?void 0:vt.status,q,Ae,et]),t.useEffect(()=>{if("completed"===(null==vt?void 0:vt.status)&&null!==et&&!it&&k){(async()=>{const{data:e}=await i.from("profiles").select("elo_rating").eq("user_id",k.id).single();void 0!==(null==e?void 0:e.elo_rating)&&(at(e.elo_rating),Te(e.elo_rating),setTimeout(()=>ot(!0),500))})()}},[null==vt?void 0:vt.status,et,it,k]);const It=async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.white)||{};await Nt(J,V,t)&&A("waiting")},Gt=async e=>{if(!k)return void H(!0);if(!M)return void G(!0);const t=Ie.find(e=>e.id===F),s=(null==t?void 0:t.black)||{};await kt(e,s)&&A("game")},Ut=()=>Me.length?Me.filter(e=>{const t=e.white_elo||1200;return Math.abs(t-Ae)<=$e}).sort((e,t)=>Math.abs((e.white_elo||1200)-Ae)-Math.abs((t.white_elo||1200)-Ae)):[],Et=()=>{var e;const t=new a;te(t),ae(new Set),ue([]),le(null),he(F);const s=Ie.filter(e=>e.id!==F),n=s[Math.floor(Math.random()*s.length)];fe(n.id),A("bot-game"),ke("gameStart"),L.gameStart(),o.success(`Starting game vs ${null==(e=Ws.find(e=>e.id===_))?void 0:e.label} bot â€¢ Bot using ${n.name} palette`)},Wt=(e,t,s)=>{const n=e.get(t);return n?{piece:n.type,color:n.color}:null},Kt=t.useCallback(async(e,t,s)=>{if(!ee||ie)return!1;try{const n=Wt(ee,e),r=ee.move({from:e,to:t,promotion:s});if(!r)return ke("illegal"),L.error(),!1;if(n){const e={square:t,piece:n.piece,color:n.color,moveNumber:ee.history().length};ue(t=>[...t,e])}if(ee.isCheckmate()?(ke("checkmate"),L.victory()):ee.isCheck()?(ke("check"),L.check()):r.captured?(ke("capture"),L.capture()):"O-O"===r.san||"O-O-O"===r.san?(ke("castle"),L.castle()):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,t])),ee.isGameOver())return ee.isCheckmate()?(le("win"),ke("victory"),L.victory(),o.success("Checkmate! You won!")):(le("draw"),ke("draw"),o.info(pt(ee))),!0;oe(!0);const i=function(e){const t=Hs,s={sdhPr:function(e,t){return e+t},BfZlx:function(e,t){return e*t}};s[t(318)]=function(e,t){return e+t},s[t(376)]=function(e,t){return e*t},s[t(412)]="hard",s.DNvVF=function(e,t){return e+t},s[t(410)]=function(e,t){return e*t},s[t(287)]=t(266);const n=s;switch(e){case t(268):return n[t(414)](300,n[t(369)](Math[t(286)](),500));case t(290):return n[t(318)](500,n[t(376)](Math[t(286)](),1e3));case n[t(412)]:return n[t(333)](800,n[t(410)](Math[t(286)](),1500));case n[t(287)]:return 100;default:return 500}}(_);await new Promise(e=>setTimeout(e,i));const c=function(e,t){const s=Hs,n={CAtIG:function(e,t){return e(t)},kkQyx:s(397)};switch(t){case"easy":return As(e);case"medium":return n[s(273)](Ss,e);case n[s(264)]:case s(266):return Ps(e);default:return n[s(273)](As,e)}}(ee,_);if(c){const e=Wt(ee,c.from,c.to);if(ee.move(c),e){const t={square:c.to,piece:e.piece,color:e.color,moveNumber:ee.history().length};ue(e=>[...e,t])}ee.isCheckmate()?(ke("checkmate"),L.error()):ee.isCheck()?(ke("check"),L.check()):c.captured?(ke("capture"),L.capture()):"O-O"===c.san||"O-O-O"===c.san?ke("castle"):(ke("move"),L.move()),te(new a(ee.fen())),ae(e=>new Set([...e,c.to])),ee.isGameOver()&&(ee.isCheckmate()?(le("loss"),ke("defeat"),L.error(),o.error("Checkmate! You lost.")):(le("draw"),ke("draw"),o.info(pt(ee))))}return oe(!1),!0}catch(n){return oe(!1),L.error(),!1}},[ee,ie,_,ke,L]),Yt=t.useCallback(e=>{if(!ee)return[];return ee.moves({square:e,verbose:!0}).map(e=>e.to)},[ee]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(Pe,{}),d.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-8 sm:py-16",children:d.jsxs("div",{className:"max-w-5xl mx-auto",children:[d.jsxs("div",{className:"text-center space-y-3 sm:space-y-6 mb-6 sm:mb-12 relative",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsx($t,{})}),d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs sm:text-sm font-display uppercase tracking-widest",children:[d.jsx(p,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Visionary Exclusive"]}),d.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide",children:["Play ",d.jsx("span",{className:"text-gold-gradient",children:"En Pensent"})]}),d.jsxs("p",{className:"text-sm sm:text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto px-2",children:["Experience chess as art. Watch your visualization come alive ",d.jsx("span",{className:"text-primary font-medium",children:"as you play"}),"."]}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground font-display",children:[d.jsx(N,{className:"h-3 w-3 text-primary"}),d.jsx("span",{children:'Toggle "En Pensent" mode during any game to see colors fill the board live'})]})]}),d.jsxs(se,{mode:"wait",children:["lobby"===q&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-8",children:[d.jsxs("div",{className:"sm:hidden",children:[d.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Xs.map(e=>d.jsx("button",{onClick:()=>{L.select(),W(e)},className:"px-4 py-2 rounded-full text-xs font-display uppercase tracking-wider transition-all touch-manipulation "+(E===e?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground"),children:"bot"===e?"Bot":"create"===e?"Create":"Join"},e))}),d.jsx("p",{className:"text-center text-[10px] text-muted-foreground mb-2",children:"Swipe left/right to navigate"})]}),d.jsx("div",{className:"p-4 sm:p-6 rounded-lg border border-green-500/30 bg-gradient-to-r from-green-500/10 via-green-500/5 to-transparent space-y-4",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(nt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Practice vs Bot"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Free for everyone! Watch your vision generate live."})]})]}),d.jsxs(U,{onClick:Et,className:"gap-2 bg-green-600 hover:bg-green-700 active:bg-green-800 h-11 sm:h-10 text-sm touch-manipulation",children:[d.jsx(nt,{className:"h-4 w-4"}),"Play Bot"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(p,{className:"h-3 w-3"}),"Difficulty"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:Ws.map(e=>d.jsxs("button",{onClick:()=>O(e.id),className:"px-2 py-2.5 rounded-lg text-xs font-display transition-all touch-manipulation text-center "+(_===e.id?"bg-green-500 text-white":"bg-card/50 border border-border/50 text-muted-foreground active:bg-green-500/20"),children:[d.jsx("div",{children:e.label}),d.jsx("div",{className:"text-[10px] opacity-70",children:e.rating})]},e.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"text-xs font-display uppercase tracking-wider text-muted-foreground flex items-center gap-2",children:[d.jsx(He,{className:"h-3 w-3"}),"Your Palette (Bot gets random)"]}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-1.5",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-green-500 bg-green-500/10":"border-border/50 active:bg-green-500/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-0.5 justify-center",children:Object.values(e.white).slice(0,3).map((e,t)=>d.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[7px] sm:text-[8px] font-display truncate",children:e.name})]},e.id))})]})]})}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-amber-500/30 bg-gradient-to-r from-amber-500/10 via-amber-500/5 to-transparent",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Ge,{className:"h-5 w-5 text-amber-500"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm",children:"Opening Encyclopedia"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Master famous book openings"})]})]}),d.jsx(Ue,{to:"/openings",children:d.jsxs(U,{variant:"outline",size:"sm",className:"gap-1 text-xs",children:["Browse All",d.jsx(Ee,{className:"h-3 w-3"})]})})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[{name:"Queen's Gambit",icon:"ðŸ‘¸",color:"border-purple-500/40 bg-purple-500/10"},{name:"Sicilian",icon:"ðŸ›¡ï¸",color:"border-red-500/40 bg-red-500/10"},{name:"Italian",icon:"ðŸ›ï¸",color:"border-green-500/40 bg-green-500/10"},{name:"King's Gambit",icon:"âš”ï¸",color:"border-amber-500/40 bg-amber-500/10"},{name:"Ruy Lopez",icon:"ðŸ‡ªðŸ‡¸",color:"border-blue-500/40 bg-blue-500/10"},{name:"London",icon:"ðŸŽ©",color:"border-gray-500/40 bg-gray-500/10"}].map(e=>d.jsxs(Ue,{to:`/marketplace?opening=${encodeURIComponent(e.name.toLowerCase())}`,className:`p-2 rounded-lg border ${e.color} text-center hover:scale-105 transition-transform`,children:[d.jsx("div",{className:"text-lg mb-0.5",children:e.icon}),d.jsx("p",{className:"text-[9px] font-medium truncate",children:e.name})]},e.name))})]}),!M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsx(h,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-display font-bold uppercase tracking-wider text-sm sm:text-base",children:"Visionary Exclusive"}),d.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:"Upgrade to play online with visualization"})]})]}),d.jsxs(U,{onClick:()=>G(!0),className:"gap-2 w-full sm:w-auto h-11 sm:h-10 touch-manipulation",children:[d.jsx(N,{className:"h-4 w-4"}),"Upgrade Now"]})]}),k&&M&&d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-primary/30 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:`inline-block px-3 py-1 rounded-full bg-gradient-to-r ${re(Ae).color} text-white font-display text-base sm:text-lg`,children:Ae}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 font-display uppercase",children:re(Ae).name})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"font-display font-bold uppercase tracking-wider flex items-center gap-2 text-sm sm:text-base",children:[d.jsx(C,{className:"h-4 w-4 text-primary"}),"Your Rating"]}),d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:["Range: Â±",$e," ELO"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d.jsx("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:gap-2",children:[100,200,400].map(e=>d.jsxs("button",{onClick:()=>Qe(e),className:"px-3 py-2.5 sm:py-1 rounded-lg text-xs font-display transition-all touch-manipulation "+($e===e?"bg-primary text-primary-foreground":"bg-card/50 border border-border/50 text-muted-foreground active:bg-primary/20"),children:["Â±",e]},e))}),d.jsxs(U,{onClick:async()=>{if(!k)return void H(!0);if(!M)return void G(!0);const e=Ut().filter(e=>e.white_player_id!==k.id);e.length>0?await Gt(e[0].id):(o.info("No matching opponents found. Creating a new game..."),await It())},className:"gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt,children:[d.jsx(g,{className:"h-4 w-4"}),"Quick Match"]})]})]}),Ut().length>0&&d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-serif",children:[Ut().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length," opponent",1!==Ut().filter(e=>e.white_player_id!==(null==k?void 0:k.id)).length?"s":""," in your skill range"]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-4 sm:space-y-6",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(p,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Create Game"]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Time Control"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:Js.map(e=>d.jsxs("button",{onClick:()=>X(e.id),className:"p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(J===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 text-primary"}),d.jsx("p",{className:"font-display text-xs sm:text-sm",children:e.label}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:e.description})]},e.id))})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("label",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-muted-foreground",children:"Your Palette"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:Ie.slice(0,8).map(e=>d.jsxs("button",{onClick:()=>R(e.id),className:"p-1.5 sm:p-2 rounded-lg border transition-all touch-manipulation "+(F===e.id?"border-primary bg-primary/10":"border-border/50 active:bg-primary/5"),children:[d.jsx("div",{className:"flex gap-0.5 mb-1 justify-center",children:Object.values(e.white).slice(0,4).map((e,t)=>d.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-sm",style:{backgroundColor:e}},t))}),d.jsx("p",{className:"text-[8px] sm:text-[10px] font-display truncate",children:e.name})]},e.id))})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsxs("button",{onClick:()=>Z(!0),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-primary bg-primary/10":"border-border/50"),children:[d.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Quick Match"})]}),d.jsxs("button",{onClick:()=>Z(!1),className:"flex-1 p-2.5 sm:p-3 rounded-lg border text-center transition-all touch-manipulation "+(V?"border-border/50":"border-primary bg-primary/10"),children:[d.jsx(Ke,{className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1"}),d.jsx("p",{className:"text-xs sm:text-sm font-display",children:"Challenge"})]})]}),d.jsxs(U,{onClick:It,className:"w-full gap-2 h-11 sm:h-10 touch-manipulation",disabled:jt||!M,children:[!M&&d.jsx(Ye,{className:"h-4 w-4"}),"Create Game",d.jsx(_e,{className:"h-4 w-4"})]})]}),d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(Ke,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Join by Code"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Oe,{value:$,onChange:e=>Q(e.target.value.toUpperCase()),placeholder:"6-digit code",className:"font-mono text-base sm:text-lg tracking-widest h-11 sm:h-10",maxLength:6,inputMode:"text",autoComplete:"off",autoCorrect:"off"}),d.jsx(U,{onClick:async()=>{if(!$.trim())return void o.error("Please enter a challenge code");if(!k)return void H(!0);if(!M)return void G(!0);const e=Ie.find(e=>e.id===F),t=(null==e?void 0:e.black)||{};await zt($.trim(),t)&&A("game")},disabled:jt||!M,className:"h-11 sm:h-10 px-4 sm:px-6 touch-manipulation",children:"Join"})]})]}),d.jsxs("div",{className:"p-4 sm:p-6 rounded-lg border border-border/50 bg-card/50 space-y-3 sm:space-y-4",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold uppercase tracking-wider flex items-center gap-2",children:[d.jsx(We,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Open Games"]}),De?d.jsx("p",{className:"text-muted-foreground text-sm font-serif",children:"Loading..."}):0===Me.length?d.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm font-serif italic",children:"No games waiting. Create one!"}):d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto -mx-1 px-1",children:Me.map(e=>{var t;const s=e.white_elo||1200,n=k&&Math.abs(s-Ae)<=$e,r=e.white_player_id===(null==k?void 0:k.id),a=k?Je(Ae,s):null;return d.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg border transition-all "+(n&&!r?"bg-primary/10 border-primary/30":"bg-card/50 border-border/30"),children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[d.jsx("p",{className:"font-display text-xs sm:text-sm",children:(null==(t=Js.find(t=>t.id===e.time_control))?void 0:t.label)||"Blitz"}),n&&!r&&d.jsx("span",{className:"text-[8px] sm:text-[10px] px-1 sm:px-1.5 py-0.5 rounded bg-primary/20 text-primary font-display uppercase",children:"Match"})]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full bg-gradient-to-r ${re(s).color} text-white font-display flex-shrink-0`,children:s})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a&&!r&&d.jsx(P,{children:d.jsxs(z,{children:[d.jsx(D,{asChild:!0,children:d.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-[10px] font-mono px-2 py-1 rounded bg-card border border-border/50 cursor-help",children:[d.jsxs("span",{className:"text-green-500",children:["+",a.win]}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:a.draw>=0?"text-blue-400":"text-orange-400",children:a.draw>=0?`+${a.draw}`:a.draw}),d.jsx("span",{className:"text-muted-foreground",children:"/"}),d.jsx("span",{className:"text-red-500",children:a.loss})]})}),d.jsxs(B,{side:"left",className:"space-y-1",children:[d.jsx("p",{className:"font-display text-xs uppercase tracking-wider mb-1",children:"ELO Change Preview"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-green-500 font-bold",children:"Win:"}),d.jsxs("span",{children:["+",a.win," â†’ ",Ae+a.win]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-400 font-bold",children:"Draw:"}),d.jsxs("span",{children:[a.draw>=0?`+${a.draw}`:a.draw," â†’ ",Ae+a.draw]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-red-500 font-bold",children:"Loss:"}),d.jsxs("span",{children:[a.loss," â†’ ",Ae+a.loss]})]})]})]})}),d.jsx(U,{size:"sm",onClick:()=>Gt(e.id),disabled:jt||!M||r,variant:n&&!r?"default":"outline",className:"h-9 sm:h-8 px-3 sm:px-4 text-xs touch-manipulation",children:"Join"})]})]},e.id)})})]})]})]})]},"lobby"),"waiting"===q&&d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center space-y-8",children:d.jsxs("div",{className:"p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:[d.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:d.jsx(p,{className:"w-full h-full text-primary"})}),d.jsx("h2",{className:"text-2xl font-display font-bold uppercase tracking-wider mb-2",children:"Waiting for Opponent"}),(null==vt?void 0:vt.challengeCode)&&!V&&d.jsxs("div",{className:"mt-6 space-y-4",children:[d.jsx("p",{className:"text-muted-foreground font-serif",children:"Share this code with your friend:"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-4xl font-mono tracking-[0.5em] text-primary",children:vt.challengeCode}),d.jsx(U,{variant:"outline",size:"icon",onClick:()=>{(null==vt?void 0:vt.challengeCode)&&(navigator.clipboard.writeText(vt.challengeCode),o.success("Challenge code copied!"))},children:d.jsx(Xe,{className:"h-4 w-4"})})]})]}),d.jsx(U,{variant:"outline",onClick:()=>{A("lobby")},className:"mt-6",children:"Cancel"})]})},"waiting"),"game"===q&&vt&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider "+(bt&&"active"===vt.status?"text-primary":"text-muted-foreground"),children:"active"===vt.status?bt?"Your Turn":"Opponent's Turn":"draw"===vt.result?"Draw":vt.winnerId===(null==k?void 0:k.id)?"You Won!":"You Lost"}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["Playing as ","w"===wt?"White":"Black"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:we.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),"active"===vt.status&&d.jsxs(d.Fragment,{children:[d.jsxs(U,{variant:"outline",size:"sm",onClick:Lt,className:"gap-1.5 h-10 sm:h-9 px-4 touch-manipulation",children:[d.jsx(rt,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Offer "}),"Draw"]}),d.jsxs(U,{variant:"outline",size:"sm",onClick:Bt,className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Ot,{fen:vt.currentFen,onMove:Ct,getAvailableMoves:At,isMyTurn:bt,myColor:wt,whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,movedSquares:St,disabled:"active"!==vt.status,enPensentEnabled:ge,moveHistory:we,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Ze,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Ze,{whitePalette:vt.whitePalette||Ie[0].white,blackPalette:vt.blackPalette||Ie[0].black,moveHistory:we,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",vt.moveCount]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:vt.pgn||"Game started..."})]}),"completed"===vt.status&&null!==et&&null!==st&&d.jsx(Zt,{oldRating:et,newRating:st,isWin:vt.winnerId===(null==k?void 0:k.id),isDraw:"draw"===vt.result,show:it}),"completed"===vt.status&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(U,{onClick:Ht,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(U,{variant:"outline",onClick:()=>{const e=`${window.location.origin}/play?game=${null==vt?void 0:vt.id}`;navigator.clipboard.writeText(e),o.success("Game link copied!")},className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(Ke,{className:"h-4 w-4"}),"Share Game"]}),ge&&we.length>0&&d.jsxs(U,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"game"),"bot-game"===q&&ee&&d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4 sm:space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsxs("p",{className:"text-sm sm:text-base font-display uppercase tracking-wider flex items-center justify-center sm:justify-start gap-2 "+(ie||ce?"text-muted-foreground":"text-primary"),children:[d.jsx(nt,{className:"h-4 w-4"}),ce?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":ie?"Bot thinking...":"Your Turn"]}),d.jsxs("p",{className:"text-xs text-muted-foreground font-serif",children:["vs ",null==(e=Ws.find(e=>e.id===_))?void 0:e.label," Bot (",null==(s=Ws.find(e=>e.id===_))?void 0:s.rating,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end flex-wrap",children:[d.jsx(Qt,{isEnabled:ge,onToggle:()=>ve(!ge),totalMoves:de.length,showPieces:be,onShowPiecesToggle:()=>ye(!be)}),!ce&&d.jsxs(U,{variant:"outline",size:"sm",onClick:()=>{le("loss"),ke("defeat"),L.error(),o.info("You resigned.")},className:"gap-1.5 h-10 sm:h-9 px-4 text-destructive touch-manipulation",children:[d.jsx(T,{className:"h-4 w-4"}),"Resign"]})]})]}),d.jsxs(Fe,{children:[d.jsxs("div",{className:"grid lg:grid-cols-[1fr,280px] gap-4",children:[d.jsx(Ot,{fen:ee.fen(),onMove:Kt,getAvailableMoves:Yt,isMyTurn:!ie&&!ce&&"w"===ee.turn(),myColor:"w",whitePalette:(null==(n=Ie.find(e=>e.id===xe))?void 0:n.white)||Ie[0].white,blackPalette:(null==(l=Ie.find(e=>e.id===pe))?void 0:l.black)||Ie[0].black,movedSquares:ne,disabled:ie||!!ce,enPensentEnabled:ge,moveHistory:de,showPieces:be}),ge&&d.jsx("div",{className:"hidden lg:block",children:d.jsx(Ze,{whitePalette:(null==(u=Ie.find(e=>e.id===xe))?void 0:u.white)||Ie[0].white,blackPalette:(null==(x=Ie.find(e=>e.id===pe))?void 0:x.black)||Ie[0].black,moveHistory:de,title:"Live Legend"})})]}),ge&&d.jsx("div",{className:"lg:hidden",children:d.jsx(Ze,{whitePalette:(null==(f=Ie.find(e=>e.id===xe))?void 0:f.white)||Ie[0].white,blackPalette:(null==(v=Ie.find(e=>e.id===pe))?void 0:v.black)||Ie[0].black,moveHistory:de,compact:!0,title:"Legend"})})]}),d.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border border-border/50 bg-card/30 space-y-3",children:[d.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground font-display uppercase tracking-wider mb-1 sm:mb-2",children:["Moves: ",ee.history().length]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground font-mono break-all line-clamp-2 sm:line-clamp-none",children:ee.pgn()||"Game started..."}),ce&&ge&&de.length>0&&d.jsx(Vt,{totalMoves:de.length,moves:ee.history(),moveHistory:de,currentMove:dt===1/0?de.length:dt,onMoveChange:ut,compact:!0})]}),ce&&d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center flex-wrap",children:[d.jsx(U,{onClick:Ht,className:"h-11 sm:h-10 touch-manipulation",children:"Back to Lobby"}),d.jsxs(U,{variant:"outline",onClick:Et,className:"gap-2 h-11 sm:h-10 touch-manipulation",children:[d.jsx(nt,{className:"h-4 w-4"}),"Play Again"]}),ge&&de.length>0&&d.jsxs(U,{variant:"outline",onClick:()=>lt(!0),className:"gap-2 h-11 sm:h-10 touch-manipulation border-primary/30 bg-primary/5 hover:bg-primary/10",children:[d.jsx(Re,{className:"h-4 w-4"}),"Export Art"]})]})]},"bot-game")]})]})}),d.jsx(Ve,{}),d.jsx(Le,{isOpen:S,onClose:()=>H(!1)}),d.jsx(Be,{isOpen:I,onClose:()=>G(!1),trigger:"general"}),d.jsx(es,{isOpen:ct,onClose:()=>lt(!1),moveHistory:"bot-game"===q?de:we,whitePalette:"bot-game"===q?(null==(b=Ie.find(e=>e.id===xe))?void 0:b.white)||Ie[0].white:(null==vt?void 0:vt.whitePalette)||Ie[0].white,blackPalette:"bot-game"===q?(null==(y=Ie.find(e=>e.id===pe))?void 0:y.black)||Ie[0].black:(null==vt?void 0:vt.blackPalette)||Ie[0].black,gameInfo:{white:"bot-game"===q||"w"===wt?"You":"Opponent",black:"bot-game"===q?`${null==(w=Ws.find(e=>e.id===_))?void 0:w.label} Bot`:"b"===wt?"You":"Opponent",result:"bot-game"===q?"win"===ce?"You Won!":"loss"===ce?"You Lost":"Draw":(null==vt?void 0:vt.result)||"Game Finished",totalMoves:"bot-game"===q?de.length:we.length}})]})};export{Fs as default};
