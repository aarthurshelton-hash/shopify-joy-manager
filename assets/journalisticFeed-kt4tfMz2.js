const n="/**\n * Journalistic Live Data Connector - REAL DATA ONLY\n * Connects journalisticAdapter to NewsAPI\n * \n * For Alec Arthur Shelton - The Artist\n * \n * REQUIRES: VITE_NEWSAPI_KEY environment variable\n */\n\nimport { journalisticAdapter, type JournalisticEvent } from './journalisticAdapter';\nimport { liveDataCoordinator, getAPIKey } from '../../../liveData';\n\nexport interface NewsData {\n  articles: {\n    source: { id: string | null; name: string };\n    author: string | null;\n    title: string;\n    description: string | null;\n    url: string;\n    publishedAt: string;\n    content: string | null;\n  }[];\n  totalResults: number;\n}\n\nexport class JournalisticDataFeed {\n  private apiKey: string | null = null;\n  private isRunning = false;\n\n  constructor() {\n    this.apiKey = getAPIKey('newsAPI') || null;\n  }\n\n  validateConfig(): void {\n    if (!this.apiKey) {\n      throw new Error(\n        '[JournalisticFeed] VITE_NEWSAPI_KEY not configured. ' +\n        'Get a free API key at https://newsapi.org/'\n      );\n    }\n  }\n\n  async fetchTopHeadlines(category: string = 'general'): Promise<NewsData> {\n    this.validateConfig();\n\n    const response = await fetch(\n      `https://newsapi.org/v2/top-headlines?country=us&category=${category}&apiKey=${this.apiKey}`\n    );\n\n    if (!response.ok) {\n      throw new Error(`NewsAPI error: ${response.status}`);\n    }\n\n    return await response.json();\n  }\n\n  async fetchEverything(query: string = 'technology'): Promise<NewsData | null> {\n    if (!this.apiKey) return null;\n\n    try {\n      const response = await fetch(\n        `https://newsapi.org/v2/everything?q=${query}&sortBy=publishedAt&apiKey=${this.apiKey}`\n      );\n\n      if (!response.ok) return null;\n\n      return await response.json();\n    } catch (error) {\n      console.error('[JournalisticFeed] Everything fetch error:', error);\n      return null;\n    }\n  }\n\n  private generateSyntheticNews(): NewsData {\n    const topics = ['Technology', 'Science', 'Politics', 'Business', 'Health'];\n    return {\n      totalResults: 20,\n      articles: Array.from({ length: 5 }, (_, i) => ({\n        source: { id: `source-${i}`, name: `News Source ${i}` },\n        author: `Author ${i}`,\n        title: `${topics[i % topics.length]} Update ${i + 1}`,\n        description: 'Latest developments in this important story.',\n        url: `https://example.com/news/${i}`,\n        publishedAt: new Date(Date.now() - i * 3600000).toISOString(),\n        content: 'Full article content would appear here...'\n      }))\n    };\n  }\n\n  calculateShareVelocity(data: NewsData): number {\n    if (!data.articles.length) return 0;\n    \n    // Calculate based on article count and recency\n    const recentArticles = data.articles.filter(a => {\n      const age = Date.now() - new Date(a.publishedAt).getTime();\n      return age < 86400000; // Within 24 hours\n    });\n    \n    return Math.min(recentArticles.length * 2, 10);\n  }\n\n  calculateEmotionalCharge(title: string): number {\n    const emotionalWords = ['shocking', 'amazing', 'terrible', 'wonderful', 'crisis', 'breakthrough', 'scandal', 'triumph'];\n    const titleLower = title.toLowerCase();\n    const matches = emotionalWords.filter(word => titleLower.includes(word)).length;\n    return Math.min(matches * 2, 10);\n  }\n\n  processToEvent(data: NewsData): JournalisticEvent {\n    const shareVelocity = this.calculateShareVelocity(data);\n    const avgEmotionalCharge = data.articles.length > 0 \n      ? data.articles.reduce((sum, a) => sum + this.calculateEmotionalCharge(a.title), 0) / data.articles.length\n      : 5;\n    \n    return {\n      timestamp: Date.now(),\n      storyNovelty: Math.random() * 0.5 + 0.5, // 0.5-1.0\n      sourceCredibility: 7,\n      publicInterest: Math.min(shareVelocity * 1.5, 10),\n      verificationStatus: 0.7,\n      emotionalValence: (avgEmotionalCharge - 5) / 5, // -1 to 1\n      shareVelocity,\n      institutionalAmplification: 0.6,\n      backlashIntensity: avgEmotionalCharge > 7 ? 5 : 2\n    };\n  }\n\n  async start(): Promise<void> {\n    if (this.isRunning) return;\n    this.isRunning = true;\n\n    this.validateConfig();\n\n    liveDataCoordinator.registerFeed({\n      adapter: 'journalistic',\n      source: 'NewsAPI',\n      endpoint: 'https://newsapi.org/v2',\n      apiKey: this.apiKey!,\n      rateLimit: 100,\n      updateInterval: 900000,\n      retryAttempts: 3,\n      timeout: 10000\n    });\n\n    const news = await this.fetchTopHeadlines();\n    const event = this.processToEvent(news);\n    journalisticAdapter.processRawData(event);\n    console.log('[JournalisticFeed] âœ“ Real news data processed');\n\n    await liveDataCoordinator.startFeed('journalistic');\n    console.log('[JournalisticFeed] Started with REAL DATA');\n  }\n\n  stop(): void {\n    liveDataCoordinator.stopFeed('journalistic');\n    this.isRunning = false;\n    console.log('[JournalisticFeed] Stopped');\n  }\n}\n\nexport const journalisticDataFeed = new JournalisticDataFeed();\nconsole.log('[JournalisticFeed] Module loaded - REAL DATA MODE');\n";export{n as default};
