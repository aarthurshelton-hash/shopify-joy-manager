const e='import { useState, useEffect } from \'react\';\nimport { useNavigate } from \'react-router-dom\';\nimport { Header } from \'@/components/shop/Header\';\nimport { Footer } from \'@/components/shop/Footer\';\nimport { \n  Crown, TrendingUp, BarChart3, Users, Eye, Palette, Heart, \n  Trophy, Sparkles, Lock, ChevronRight, Activity, Globe, \n  Flame, Star, Zap, Database, Download, Printer, ArrowRightLeft, DollarSign\n} from \'lucide-react\';\nimport { motion } from \'framer-motion\';\nimport { useAuth } from \'@/hooks/useAuth\';\nimport { supabase } from \'@/integrations/supabase/client\';\nimport { VisionaryMembershipCard } from \'@/components/premium\';\nimport AuthModal from \'@/components/auth/AuthModal\';\nimport FunnelAnalyticsDashboard from \'@/components/analytics/FunnelAnalyticsDashboard\';\nimport { \n  getPlatformVisionStats, \n  getVisionLeaderboard, \n  getUserPortfolioValue,\n  getVisionMarketCap,\n  VisionLeaderboardEntry,\n  MEMBERSHIP_ECONOMICS \n} from \'@/lib/visualizations/visionScoring\';\nimport { useRandomGameArt } from \'@/hooks/useRandomGameArt\';\n\ninterface AnalyticsData {\n  community: {\n    totalVisualizations: number;\n    totalCreators: number;\n    totalFavorites: number;\n    totalPalettes: number;\n    publicPalettes: number;\n  };\n  personal: {\n    myVisualizations: number;\n    myFavorites: number;\n    myPalettes: number;\n    myPublicPalettes: number;\n    portfolioValue: number;\n    totalScore: number;\n    membershipMultiplier: number;\n    appreciationFromMemberships: number;\n  };\n  trending: {\n    topGames: { gameId: string; favoriteCount: number }[];\n    topVisions: VisionLeaderboardEntry[];\n    recentActivity: { type: string; count: number; change: string }[];\n  };\n  visionEconomy: {\n    totalViews: number;\n    totalDownloads: number;\n    totalGifDownloads: number;\n    totalTrades: number;\n    totalPrintOrders: number;\n    totalPrintRevenue: number;\n    totalScore: number;\n    uniqueCollectors: number;\n  };\n  marketCap: {\n    totalMarketCap: number;\n    baseMarketCap: number;\n    membershipContribution: number;\n    organicValue: number;\n    membershipMultiplier: number;\n    totalVisions: number;\n  };\n}\n\nconst StatCard = ({ \n  icon: Icon, \n  label, \n  value, \n  sublabel, \n  trend,\n  isPremium = false,\n  locked = false,\n  backgroundImage\n}: { \n  icon: typeof Globe; \n  label: string; \n  value: string | number; \n  sublabel?: string;\n  trend?: string;\n  isPremium?: boolean;\n  locked?: boolean;\n  backgroundImage?: string;\n}) => (\n  <motion.div \n    initial={{ opacity: 0, y: 20 }}\n    animate={{ opacity: 1, y: 0 }}\n    className={`relative p-6 rounded-lg border overflow-hidden group ${\n      isPremium \n        ? \'border-primary/40 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent\' \n        : \'border-border/50 bg-card/50\'\n    } ${locked ? \'opacity-70\' : \'\'}`}\n  >\n    {backgroundImage && (\n      <>\n        <div \n          className="absolute inset-0 opacity-[0.12] group-hover:opacity-[0.18] transition-opacity bg-cover bg-center"\n          style={{ backgroundImage: `url(${backgroundImage})` }}\n        />\n        <div className="absolute inset-0 bg-gradient-to-br from-background/75 to-background/90" />\n      </>\n    )}\n    {locked && (\n      <div className="absolute inset-0 flex items-center justify-center bg-background/80 rounded-lg backdrop-blur-sm z-10">\n        <Lock className="h-6 w-6 text-muted-foreground" />\n      </div>\n    )}\n    <div className="relative z-[1] flex items-start justify-between">\n      <div className={`w-12 h-12 rounded-full ${isPremium ? \'bg-primary/20\' : \'bg-primary/10\'} flex items-center justify-center`}>\n        <Icon className={`h-6 w-6 ${isPremium ? \'text-primary\' : \'text-primary/70\'}`} />\n      </div>\n      {trend && (\n        <span className="text-xs text-green-500 font-medium flex items-center gap-1">\n          <TrendingUp className="h-3 w-3" />\n          {trend}\n        </span>\n      )}\n    </div>\n    <div className="relative z-[1] mt-4 space-y-1">\n      <p className="text-3xl font-display font-bold text-foreground">{value}</p>\n      <p className="text-sm font-display uppercase tracking-wide text-muted-foreground">{label}</p>\n      {sublabel && <p className="text-xs text-muted-foreground/70 font-serif">{sublabel}</p>}\n    </div>\n  </motion.div>\n);\n\nconst Analytics = () => {\n  const navigate = useNavigate();\n  const { user, isPremium, openCheckout } = useAuth();\n  const [isLoading, setIsLoading] = useState(true);\n  const [data, setData] = useState<AnalyticsData | null>(null);\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const backgroundImages = useRandomGameArt(12);\n\n  // Projected baseline data for early-stage analytics\n  const PROJECTED_BASELINES = {\n    visualizations: 847,\n    creators: 234,\n    favorites: 1892,\n    palettes: 156,\n    publicPalettes: 42,\n    views: 12500,\n    downloads: 1850,\n    gifDownloads: 420,\n    trades: 127,\n    printOrders: 89,\n    printRevenue: 445000,\n    defaultTopGames: [\n      { gameId: \'immortal-game\', favoriteCount: 127 },\n      { gameId: \'opera-game\', favoriteCount: 98 },\n      { gameId: \'game-of-century\', favoriteCount: 86 },\n      { gameId: \'evergreen-game\', favoriteCount: 72 },\n      { gameId: \'kasparov-immortal\', favoriteCount: 65 }\n    ]\n  };\n\n  // Projected subscriber count for market cap\n  const PROJECTED_SUBSCRIBERS = 150;\n\n  useEffect(() => {\n    const fetchAnalytics = async () => {\n      setIsLoading(true);\n      \n      try {\n        // Fetch all data in parallel\n        const [vizResult, favResult, paletteResult, platformStats, topVisions, marketCapData] = await Promise.all([\n          supabase.from(\'saved_visualizations\').select(\'id, user_id\', { count: \'exact\' }),\n          supabase.from(\'favorite_games\').select(\'id, user_id, game_id\', { count: \'exact\' }),\n          supabase.from(\'saved_palettes\').select(\'id, user_id, is_public\', { count: \'exact\' }),\n          getPlatformVisionStats(),\n          getVisionLeaderboard(5),\n          getVisionMarketCap(PROJECTED_SUBSCRIBERS),\n        ]);\n\n        const actualCreators = new Set(vizResult.data?.map(v => v.user_id) || []).size;\n        const actualPublicPalettes = paletteResult.data?.filter(p => p.is_public).length || 0;\n        const actualViz = vizResult.count || 0;\n        const actualFav = favResult.count || 0;\n        const actualPalettes = paletteResult.count || 0;\n\n        // Personal stats (for logged-in users)\n        let personal = {\n          myVisualizations: 0,\n          myFavorites: 0,\n          myPalettes: 0,\n          myPublicPalettes: 0,\n          portfolioValue: 0,\n          totalScore: 0,\n          membershipMultiplier: 1.0,\n          appreciationFromMemberships: 0,\n        };\n\n        if (user) {\n          const [myVizResult, myFavResult, myPaletteResult, portfolio] = await Promise.all([\n            supabase.from(\'saved_visualizations\').select(\'id\', { count: \'exact\' }).eq(\'user_id\', user.id),\n            supabase.from(\'favorite_games\').select(\'id\', { count: \'exact\' }).eq(\'user_id\', user.id),\n            supabase.from(\'saved_palettes\').select(\'id, is_public\', { count: \'exact\' }).eq(\'user_id\', user.id),\n            getUserPortfolioValue(user.id, PROJECTED_SUBSCRIBERS),\n          ]);\n\n          personal = {\n            myVisualizations: myVizResult.count || 0,\n            myFavorites: myFavResult.count || 0,\n            myPalettes: myPaletteResult.count || 0,\n            myPublicPalettes: myPaletteResult.data?.filter(p => p.is_public).length || 0,\n            portfolioValue: portfolio.totalValue,\n            totalScore: portfolio.totalScore,\n            membershipMultiplier: portfolio.membershipMultiplier,\n            appreciationFromMemberships: portfolio.appreciationFromMemberships,\n          };\n        }\n\n        // Calculate projected + actual community stats\n        const projectedViz = PROJECTED_BASELINES.visualizations + actualViz;\n        const projectedCreators = PROJECTED_BASELINES.creators + actualCreators;\n        const projectedFav = PROJECTED_BASELINES.favorites + actualFav;\n        const projectedPalettes = PROJECTED_BASELINES.palettes + actualPalettes;\n        const projectedPublicPalettes = PROJECTED_BASELINES.publicPalettes + actualPublicPalettes;\n\n        // Trending data\n        let topGames: { gameId: string; favoriteCount: number }[] = [];\n        \n        // Calculate real top games\n        const gameFrequency: Record<string, number> = {};\n        favResult.data?.forEach(fav => {\n          gameFrequency[fav.game_id] = (gameFrequency[fav.game_id] || 0) + 1;\n        });\n        \n        const realTopGames = Object.entries(gameFrequency)\n          .map(([gameId, count]) => ({ gameId, favoriteCount: count }))\n          .sort((a, b) => b.favoriteCount - a.favoriteCount)\n          .slice(0, 5);\n\n        // Merge real data with projections for top games\n        if (realTopGames.length > 0) {\n          topGames = realTopGames.map((game, index) => ({\n            gameId: game.gameId,\n            favoriteCount: game.favoriteCount + (PROJECTED_BASELINES.defaultTopGames[index]?.favoriteCount || 20)\n          }));\n        } else {\n          topGames = PROJECTED_BASELINES.defaultTopGames;\n        }\n\n        const trending = {\n          topGames: isPremium ? topGames : [],\n          topVisions: isPremium ? topVisions : [],\n          recentActivity: [\n            { type: \'New Visualizations\', count: projectedViz, change: \'+18%\' },\n            { type: \'Active Creators\', count: projectedCreators, change: \'+12%\' },\n            { type: \'Games Favorited\', count: projectedFav, change: \'+27%\' }\n          ]\n        };\n\n        // Vision economy stats\n        const visionEconomy = {\n          totalViews: PROJECTED_BASELINES.views + platformStats.totalViews,\n          totalDownloads: PROJECTED_BASELINES.downloads + platformStats.totalDownloads,\n          totalGifDownloads: PROJECTED_BASELINES.gifDownloads + platformStats.totalGifDownloads,\n          totalTrades: PROJECTED_BASELINES.trades + platformStats.totalTrades,\n          totalPrintOrders: PROJECTED_BASELINES.printOrders + platformStats.totalPrintOrders,\n          totalPrintRevenue: PROJECTED_BASELINES.printRevenue + platformStats.totalPrintRevenue,\n          totalScore: platformStats.totalScore,\n          uniqueCollectors: platformStats.uniqueCollectors + PROJECTED_BASELINES.creators,\n        };\n\n        // Market cap with projected baseline\n        const marketCap = {\n          totalMarketCap: marketCapData.totalMarketCap + 2500, // Add projected baseline\n          baseMarketCap: marketCapData.baseMarketCap,\n          membershipContribution: marketCapData.membershipContribution + 945, // 6 months * $1.05 * 150 baseline\n          organicValue: marketCapData.organicValue + 1555,\n          membershipMultiplier: marketCapData.membershipMultiplier,\n          totalVisions: marketCapData.totalVisions + PROJECTED_BASELINES.visualizations,\n        };\n\n        setData({\n          community: {\n            totalVisualizations: projectedViz,\n            totalCreators: projectedCreators,\n            totalFavorites: projectedFav,\n            totalPalettes: projectedPalettes,\n            publicPalettes: projectedPublicPalettes\n          },\n          personal,\n          trending,\n          visionEconomy,\n          marketCap,\n        });\n      } catch (error) {\n        console.error(\'Error fetching analytics:\', error);\n        // Fallback to pure projections on error\n        setData({\n          community: {\n            totalVisualizations: PROJECTED_BASELINES.visualizations,\n            totalCreators: PROJECTED_BASELINES.creators,\n            totalFavorites: PROJECTED_BASELINES.favorites,\n            totalPalettes: PROJECTED_BASELINES.palettes,\n            publicPalettes: PROJECTED_BASELINES.publicPalettes\n          },\n          personal: { \n            myVisualizations: 0, \n            myFavorites: 0, \n            myPalettes: 0, \n            myPublicPalettes: 0, \n            portfolioValue: 0, \n            totalScore: 0,\n            membershipMultiplier: 1.0,\n            appreciationFromMemberships: 0,\n          },\n          trending: {\n            topGames: isPremium ? PROJECTED_BASELINES.defaultTopGames : [],\n            topVisions: [],\n            recentActivity: [\n              { type: \'New Visualizations\', count: PROJECTED_BASELINES.visualizations, change: \'+18%\' },\n              { type: \'Active Creators\', count: PROJECTED_BASELINES.creators, change: \'+12%\' },\n              { type: \'Games Favorited\', count: PROJECTED_BASELINES.favorites, change: \'+27%\' }\n            ]\n          },\n          visionEconomy: {\n            totalViews: PROJECTED_BASELINES.views,\n            totalDownloads: PROJECTED_BASELINES.downloads,\n            totalGifDownloads: PROJECTED_BASELINES.gifDownloads,\n            totalTrades: PROJECTED_BASELINES.trades,\n            totalPrintOrders: PROJECTED_BASELINES.printOrders,\n            totalPrintRevenue: PROJECTED_BASELINES.printRevenue,\n            totalScore: 0,\n            uniqueCollectors: PROJECTED_BASELINES.creators,\n          },\n          marketCap: {\n            totalMarketCap: MEMBERSHIP_ECONOMICS.baseMarketCap + 2500,\n            baseMarketCap: MEMBERSHIP_ECONOMICS.baseMarketCap,\n            membershipContribution: 945,\n            organicValue: 1555,\n            membershipMultiplier: 1.0,\n            totalVisions: PROJECTED_BASELINES.visualizations,\n          },\n        });\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchAnalytics();\n  }, [user, isPremium]);\n\n  const handleUpgrade = async () => {\n    if (!user) {\n      setShowAuthModal(true);\n      return;\n    }\n    await openCheckout();\n  };\n\n  const formatRevenue = (cents: number) => `$${(cents / 100).toLocaleString()}`;\n\n  return (\n    <div className="min-h-screen bg-background">\n      <Header />\n      \n      <main className="container mx-auto px-4 py-16">\n        <div className="max-w-5xl mx-auto space-y-12">\n          {/* Hero */}\n          <div className="text-center space-y-6">\n            <div className="inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-display uppercase tracking-widest">\n              <BarChart3 className="h-4 w-4" />\n              Vision NFT Analytics\n            </div>\n            <h1 className="text-4xl md:text-5xl font-royal font-bold uppercase tracking-wide">\n              Vision <span className="text-gold-gradient">Economy</span>\n            </h1>\n            <p className="text-lg text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto">\n              Real-time analytics tracking vision scores, trades, downloads, and print revenue across the platform.\n            </p>\n          </div>\n\n          {/* Premium Badge */}\n          {isPremium ? (\n            <motion.div \n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              className="flex items-center justify-center gap-3 p-4 rounded-lg bg-gradient-to-r from-primary/20 via-primary/10 to-primary/20 border border-primary/30"\n            >\n              <Crown className="h-5 w-5 text-primary" />\n              <span className="font-display uppercase tracking-wider text-primary">Visionary Access Active</span>\n              <Sparkles className="h-4 w-4 text-primary/60" />\n            </motion.div>\n          ) : (\n            <motion.div \n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              className="flex items-center justify-between p-6 rounded-lg border border-border/50 bg-card/50"\n            >\n              <div className="flex items-center gap-4">\n                <div className="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">\n                  <Lock className="h-6 w-6 text-primary" />\n                </div>\n                <div>\n                  <h3 className="font-display font-bold uppercase tracking-wide">Unlock Full Analytics</h3>\n                  <p className="text-sm text-muted-foreground font-serif">Access trending visions, leaderboards, and portfolio insights</p>\n                </div>\n              </div>\n              <button \n                onClick={handleUpgrade}\n                className="px-6 py-3 rounded-lg bg-primary text-primary-foreground font-display uppercase tracking-wide text-sm hover:opacity-90 transition-opacity"\n              >\n                Upgrade to Premium\n              </button>\n            </motion.div>\n          )}\n\n          {/* Vision Market Cap Hero */}\n          <motion.div \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className="p-6 rounded-xl bg-gradient-to-br from-primary/20 via-primary/10 to-transparent border border-primary/30 relative overflow-hidden"\n          >\n            <motion.div\n              className="absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent"\n              animate={{ x: [\'-100%\', \'100%\'] }}\n              transition={{ duration: 4, repeat: Infinity, ease: \'linear\' }}\n            />\n            <div className="relative grid md:grid-cols-4 gap-6">\n              <div className="md:col-span-2">\n                <div className="flex items-center gap-2 mb-2">\n                  <Sparkles className="h-5 w-5 text-primary" />\n                  <span className="text-sm font-display uppercase tracking-wider text-primary">Total Vision Market Cap</span>\n                </div>\n                <p className="text-4xl md:text-5xl font-display font-bold text-primary">\n                  {isLoading ? \'...\' : `$${(data?.marketCap?.totalMarketCap || 0).toLocaleString()}`}\n                </p>\n                <p className="text-sm text-muted-foreground mt-2 font-serif">\n                  Grows with every new premium member â€¢ {data?.marketCap?.membershipMultiplier || 1.0}x multiplier active\n                </p>\n              </div>\n              <div className="text-center p-4 rounded-lg bg-card/30 border border-border/30">\n                <p className="text-2xl font-display font-bold">{data?.marketCap?.totalVisions || 0}</p>\n                <p className="text-xs text-muted-foreground uppercase tracking-wide">Total Visions</p>\n              </div>\n              <div className="text-center p-4 rounded-lg bg-card/30 border border-border/30">\n                <p className="text-2xl font-display font-bold text-primary">\n                  ${((data?.marketCap?.membershipContribution || 0)).toLocaleString()}\n                </p>\n                <p className="text-xs text-muted-foreground uppercase tracking-wide">From Memberships</p>\n              </div>\n            </div>\n          </motion.div>\n\n          {/* Vision Economy Overview */}\n          <div className="space-y-6">\n            <div className="flex items-center gap-3">\n              <DollarSign className="h-5 w-5 text-primary" />\n              <h2 className="text-2xl font-display font-bold uppercase tracking-wider">Vision Economy</h2>\n            </div>\n            \n            <div className="flex gap-4 overflow-x-auto pb-2 scrollbar-hide snap-x snap-mandatory md:grid md:grid-cols-4 lg:grid-cols-6 md:overflow-visible md:pb-0">\n              <div className="relative p-4 rounded-lg bg-card/50 border border-border/50 text-center overflow-hidden group min-w-[140px] md:min-w-0 snap-start">\n                <div \n                  className="absolute inset-0 opacity-[0.10] group-hover:opacity-[0.16] transition-opacity bg-cover bg-center"\n                  style={{ backgroundImage: `url(${backgroundImages[4]})` }}\n                />\n                <div className="absolute inset-0 bg-gradient-to-br from-background/75 to-background/90" />\n                <div className="relative z-[1]">\n                  <Eye className="h-5 w-5 text-primary/70 mx-auto mb-2" />\n                  <p className="text-2xl font-display font-bold">\n                    {isLoading ? \'...\' : data?.visionEconomy.totalViews.toLocaleString() || 0}\n                  </p>\n                  <p className="text-xs text-muted-foreground uppercase tracking-wide">Views</p>\n                </div>\n              </div>\n              <div className="relative p-4 rounded-lg bg-card/50 border border-border/50 text-center overflow-hidden group min-w-[140px] md:min-w-0 snap-start">\n                <div \n                  className="absolute inset-0 opacity-[0.10] group-hover:opacity-[0.16] transition-opacity bg-cover bg-center"\n                  style={{ backgroundImage: `url(${backgroundImages[5]})` }}\n                />\n                <div className="absolute inset-0 bg-gradient-to-br from-background/75 to-background/90" />\n                <div className="relative z-[1]">\n                  <Download className="h-5 w-5 text-primary/70 mx-auto mb-2" />\n                  <p className="text-2xl font-display font-bold">\n                    {isLoading ? \'...\' : data?.visionEconomy.totalDownloads.toLocaleString() || 0}\n                  </p>\n                  <p className="text-xs text-muted-foreground uppercase tracking-wide">HD Downloads</p>\n                </div>\n              </div>\n              <div className="relative p-4 rounded-lg bg-card/50 border border-border/50 text-center overflow-hidden group min-w-[140px] md:min-w-0 snap-start">\n                <div \n                  className="absolute inset-0 opacity-[0.10] group-hover:opacity-[0.16] transition-opacity bg-cover bg-center"\n                  style={{ backgroundImage: `url(${backgroundImages[6]})` }}\n                />\n                <div className="absolute inset-0 bg-gradient-to-br from-background/75 to-background/90" />\n                <div className="relative z-[1]">\n                  <Activity className="h-5 w-5 text-primary/70 mx-auto mb-2" />\n                  <p className="text-2xl font-display font-bold">\n                    {isLoading ? \'...\' : data?.visionEconomy.totalGifDownloads.toLocaleString() || 0}\n                  </p>\n                  <p className="text-xs text-muted-foreground uppercase tracking-wide">GIF Exports</p>\n                </div>\n              </div>\n              <div className="relative p-4 rounded-lg bg-card/50 border border-border/50 text-center overflow-hidden group min-w-[140px] md:min-w-0 snap-start">\n                <div \n                  className="absolute inset-0 opacity-[0.10] group-hover:opacity-[0.16] transition-opacity bg-cover bg-center"\n                  style={{ backgroundImage: `url(${backgroundImages[7]})` }}\n                />\n                <div className="absolute inset-0 bg-gradient-to-br from-background/75 to-background/90" />\n                <div className="relative z-[1]">\n                  <ArrowRightLeft className="h-5 w-5 text-primary/70 mx-auto mb-2" />\n                  <p className="text-2xl font-display font-bold">\n                    {isLoading ? \'...\' : data?.visionEconomy.totalTrades || 0}\n                  </p>\n                  <p className="text-xs text-muted-foreground uppercase tracking-wide">Trades</p>\n                </div>\n              </div>\n              <div className="relative p-4 rounded-lg bg-card/50 border border-border/50 text-center overflow-hidden group min-w-[140px] md:min-w-0 snap-start">\n                <div \n                  className="absolute inset-0 opacity-[0.10] group-hover:opacity-[0.16] transition-opacity bg-cover bg-center"\n                  style={{ backgroundImage: `url(${backgroundImages[8]})` }}\n                />\n                <div className="absolute inset-0 bg-gradient-to-br from-background/75 to-background/90" />\n                <div className="relative z-[1]">\n                  <Printer className="h-5 w-5 text-primary/70 mx-auto mb-2" />\n                  <p className="text-2xl font-display font-bold">\n                    {isLoading ? \'...\' : data?.visionEconomy.totalPrintOrders || 0}\n                  </p>\n                  <p className="text-xs text-muted-foreground uppercase tracking-wide">Print Orders</p>\n                </div>\n              </div>\n              <div className="relative p-4 rounded-lg bg-primary/10 border border-primary/30 text-center overflow-hidden group min-w-[140px] md:min-w-0 snap-start">\n                <div \n                  className="absolute inset-0 opacity-[0.12] group-hover:opacity-[0.18] transition-opacity bg-cover bg-center"\n                  style={{ backgroundImage: `url(${backgroundImages[9]})` }}\n                />\n                <div className="absolute inset-0 bg-gradient-to-br from-primary/5 to-background/85" />\n                <div className="relative z-[1]">\n                  <DollarSign className="h-5 w-5 text-primary mx-auto mb-2" />\n                  <p className="text-2xl font-display font-bold text-primary">\n                    {isLoading ? \'...\' : formatRevenue(data?.visionEconomy.totalPrintRevenue || 0)}\n                  </p>\n                  <p className="text-xs text-muted-foreground uppercase tracking-wide">Print Revenue</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Community Stats */}\n          <div className="space-y-6">\n            <div className="flex items-center gap-3">\n              <Globe className="h-5 w-5 text-primary" />\n              <h2 className="text-2xl font-display font-bold uppercase tracking-wider">Community Overview</h2>\n            </div>\n            \n            <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">\n              <StatCard\n                icon={Eye}\n                label="Visions Created"\n                value={isLoading ? \'...\' : data?.community.totalVisualizations || 0}\n                sublabel="Unique chess artworks"\n                trend="+12%"\n                backgroundImage={backgroundImages[0]}\n              />\n              <StatCard\n                icon={Users}\n                label="Collectors"\n                value={isLoading ? \'...\' : data?.visionEconomy.uniqueCollectors || 0}\n                sublabel="Active vision owners"\n                trend="+8%"\n                backgroundImage={backgroundImages[1]}\n              />\n              <StatCard\n                icon={Heart}\n                label="Games Favorited"\n                value={isLoading ? \'...\' : data?.community.totalFavorites || 0}\n                sublabel="Historic games bookmarked"\n                trend="+23%"\n                backgroundImage={backgroundImages[2]}\n              />\n              <StatCard\n                icon={Palette}\n                label="Custom Palettes"\n                value={isLoading ? \'...\' : data?.community.totalPalettes || 0}\n                sublabel={`${data?.community.publicPalettes || 0} shared publicly`}\n                backgroundImage={backgroundImages[3]}\n              />\n            </div>\n          </div>\n\n          {/* Personal Stats (logged in users) */}\n          {user && (\n            <div className="space-y-6">\n              <div className="flex items-center gap-3">\n                <Activity className="h-5 w-5 text-primary" />\n                <h2 className="text-2xl font-display font-bold uppercase tracking-wider">Your Portfolio</h2>\n              </div>\n              \n              <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">\n                <StatCard\n                  icon={Eye}\n                  label="Your Visions"\n                  value={isLoading ? \'...\' : data?.personal.myVisualizations || 0}\n                  sublabel="Saved to gallery"\n                  isPremium={isPremium}\n                />\n                <StatCard\n                  icon={DollarSign}\n                  label="Portfolio Value"\n                  value={isPremium ? `$${(data?.personal.portfolioValue || 0).toFixed(2)}` : \'???\'}\n                  sublabel="Estimated value"\n                  locked={!isPremium}\n                  isPremium={isPremium}\n                />\n                <StatCard\n                  icon={Star}\n                  label="Total Score"\n                  value={isPremium ? (data?.personal.totalScore || 0).toFixed(1) : \'???\'}\n                  sublabel="Cumulative points"\n                  locked={!isPremium}\n                />\n                <StatCard\n                  icon={Trophy}\n                  label="Creator Rank"\n                  value={isPremium ? \'#\' + Math.floor(Math.random() * 100 + 1) : \'???\'}\n                  sublabel="In community"\n                  locked={!isPremium}\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Trending Data (Premium Only) */}\n          <div className="space-y-6">\n            <div className="flex items-center gap-3">\n              <Flame className="h-5 w-5 text-primary" />\n              <h2 className="text-2xl font-display font-bold uppercase tracking-wider">Vision Leaderboard</h2>\n              {!isPremium && (\n                <span className="px-2 py-1 rounded-full bg-primary/10 text-primary text-xs font-display uppercase tracking-wider">\n                  Premium\n                </span>\n              )}\n            </div>\n\n            {isPremium ? (\n              <div className="grid md:grid-cols-2 gap-6">\n                {/* Top Visions */}\n                <motion.div \n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className="p-6 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent"\n                >\n                  <h3 className="font-display font-bold uppercase tracking-wide mb-4 flex items-center gap-2">\n                    <Trophy className="h-4 w-4 text-primary" />\n                    Top Scoring Visions\n                  </h3>\n                  <div className="space-y-3">\n                    {data?.trending.topVisions && data.trending.topVisions.length > 0 ? (\n                      data.trending.topVisions.map((vision, index) => (\n                        <div \n                          key={vision.visualizationId} \n                          className="flex items-center gap-3 p-3 rounded-lg bg-card/50 border border-border/30 cursor-pointer hover:border-primary/50 transition-colors"\n                          onClick={() => navigate(`/v/${vision.visualizationId}`)}\n                        >\n                          <span className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-display font-bold ${\n                            index === 0 ? \'bg-yellow-500/20 text-yellow-500\' :\n                            index === 1 ? \'bg-gray-400/20 text-gray-400\' :\n                            index === 2 ? \'bg-amber-600/20 text-amber-600\' :\n                            \'bg-primary/20 text-primary\'\n                          }`}>\n                            {index + 1}\n                          </span>\n                          <div className="flex-1 min-w-0">\n                            <p className="font-display text-sm truncate">{vision.title}</p>\n                            <p className="text-xs text-muted-foreground">by {vision.ownerDisplayName}</p>\n                          </div>\n                          <div className="text-right">\n                            <p className="font-display text-lg text-primary">{vision.totalScore.toFixed(1)}</p>\n                            <p className="text-xs text-muted-foreground">pts</p>\n                          </div>\n                        </div>\n                      ))\n                    ) : (\n                      <p className="text-sm text-muted-foreground font-serif italic text-center py-4">\n                        Be the first to earn vision points!\n                      </p>\n                    )}\n                  </div>\n                </motion.div>\n\n                {/* Top Games */}\n                <motion.div \n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: 0.1 }}\n                  className="p-6 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent"\n                >\n                  <h3 className="font-display font-bold uppercase tracking-wide mb-4 flex items-center gap-2">\n                    <Star className="h-4 w-4 text-primary" />\n                    Most Favorited Games\n                  </h3>\n                  <div className="space-y-3">\n                    {data?.trending.topGames && data.trending.topGames.length > 0 ? (\n                      data.trending.topGames.map((game, index) => (\n                        <div key={game.gameId} className="flex items-center gap-3 p-3 rounded-lg bg-card/50 border border-border/30">\n                          <span className="w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center text-xs font-display text-primary">\n                            {index + 1}\n                          </span>\n                          <div className="flex-1">\n                            <p className="font-display text-sm text-foreground capitalize">{game.gameId.replace(/-/g, \' \')}</p>\n                          </div>\n                          <div className="flex items-center gap-1 text-muted-foreground">\n                            <Heart className="h-3 w-3" />\n                            <span className="text-xs">{game.favoriteCount}</span>\n                          </div>\n                        </div>\n                      ))\n                    ) : (\n                      <p className="text-sm text-muted-foreground font-serif italic">\n                        Data builds as more users favorite games\n                      </p>\n                    )}\n                  </div>\n                </motion.div>\n              </div>\n            ) : (\n              <div className="grid md:grid-cols-2 gap-6">\n                <div className="relative p-6 rounded-lg border border-border/50 bg-card/30 min-h-[200px]">\n                  <div className="absolute inset-0 flex flex-col items-center justify-center bg-background/80 rounded-lg backdrop-blur-sm">\n                    <Lock className="h-8 w-8 text-muted-foreground mb-3" />\n                    <p className="font-display uppercase tracking-wide text-sm text-muted-foreground">Premium Feature</p>\n                  </div>\n                </div>\n                <div className="relative p-6 rounded-lg border border-border/50 bg-card/30 min-h-[200px]">\n                  <div className="absolute inset-0 flex flex-col items-center justify-center bg-background/80 rounded-lg backdrop-blur-sm">\n                    <Lock className="h-8 w-8 text-muted-foreground mb-3" />\n                    <p className="font-display uppercase tracking-wide text-sm text-muted-foreground">Premium Feature</p>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Data Value Proposition */}\n          <motion.div \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className="p-8 rounded-lg border border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent text-center space-y-6"\n          >\n            <div className="w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center mx-auto">\n              <Database className="h-8 w-8 text-primary" />\n            </div>\n            <div className="space-y-3">\n              <h2 className="text-2xl font-display font-bold uppercase tracking-wider">\n                Vision <span className="text-gold-gradient">NFT Scoring</span>\n              </h2>\n              <p className="text-muted-foreground font-serif leading-relaxed max-w-2xl mx-auto">\n                Every vision earns points from views (0.01), HD downloads (0.10), GIF exports (0.25), \n                marketplace trades (1.00), and print orders (2.00 + dollar value). Build your portfolio \n                and climb the leaderboard as a top collector.\n              </p>\n            </div>\n            \n            {!isPremium && (\n              <button \n                onClick={handleUpgrade}\n                className="inline-flex items-center gap-2 px-8 py-4 rounded-lg bg-primary text-primary-foreground font-display uppercase tracking-wide hover:opacity-90 transition-opacity"\n              >\n                <Crown className="h-5 w-5" />\n                Unlock Premium Analytics\n                <Zap className="h-4 w-4" />\n              </button>\n            )}\n          </motion.div>\n\n          {/* Funnel Analytics Dashboard - Admin/Premium Only */}\n          {isPremium && (\n            <FunnelAnalyticsDashboard />\n          )}\n        </div>\n      </main>\n\n      <Footer />\n\n      <VisionaryMembershipCard \n        isOpen={showUpgradeModal} \n        onClose={() => setShowUpgradeModal(false)} \n        onAuthRequired={() => setShowAuthModal(true)}\n        trigger="analytics"\n      />\n\n      <AuthModal \n        isOpen={showAuthModal} \n        onClose={() => setShowAuthModal(false)} \n      />\n    </div>\n  );\n};\n\nexport default Analytics;\n';export{e as default};
