const e='/**\n * Unified System Dashboard\n * \n * Real-time visualization of all En Pensent systems:\n * - Code analysis metrics\n * - Universal adapter signals\n * - Cross-domain resonances\n * - Evolution events\n * - Live issue tracking\n * \n * Shows ACTUAL live data from telemetry hub\n */\n\nimport { useEffect, useState, useMemo } from \'react\';\nimport { motion, AnimatePresence } from \'framer-motion\';\nimport { Card, CardContent, CardHeader, CardTitle } from \'@/components/ui/card\';\nimport { Badge } from \'@/components/ui/badge\';\nimport { Progress } from \'@/components/ui/progress\';\nimport { ScrollArea } from \'@/components/ui/scroll-area\';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \'@/components/ui/tabs\';\nimport {\n  Activity,\n  Zap,\n  GitBranch,\n  Network,\n  AlertTriangle,\n  CheckCircle,\n  Clock,\n  TrendingUp,\n  Brain,\n  Target,\n  Layers,\n  Cpu,\n  Radio\n} from \'lucide-react\';\nimport { useUnifiedTelemetry, useCodeTelemetry, useAdapterTelemetry, useEvolutionTelemetry } from \'@/hooks/useUnifiedTelemetry\';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar, PieChart, Pie, Cell } from \'recharts\';\n\n// Color palette\nconst COLORS = {\n  primary: \'#8b5cf6\',\n  success: \'#22c55e\',\n  warning: \'#f59e0b\',\n  danger: \'#ef4444\',\n  info: \'#3b82f6\',\n  code: \'#10b981\',\n  adapter: \'#8b5cf6\',\n  resonance: \'#f59e0b\',\n  evolution: \'#ec4899\'\n};\n\ninterface UnifiedDashboardProps {\n  className?: string;\n}\n\nexport function UnifiedSystemDashboard({ className }: UnifiedDashboardProps) {\n  const telemetry = useUnifiedTelemetry();\n  const codeTelemetry = useCodeTelemetry();\n  const adapterTelemetry = useAdapterTelemetry();\n  const evolutionTelemetry = useEvolutionTelemetry();\n  const [activeTab, setActiveTab] = useState(\'overview\');\n\n  // Format health for display\n  const healthPercent = Math.round(telemetry.averageHealth);\n  const healthColor = healthPercent > 80 ? COLORS.success : healthPercent > 60 ? COLORS.warning : COLORS.danger;\n\n  // Build live data for charts\n  const adapterChartData = useMemo(() => {\n    return adapterTelemetry.topDomains.map(domain => ({\n      name: domain.domain,\n      value: domain.count,\n      signals: domain.signals\n    }));\n  }, [adapterTelemetry.topDomains]);\n\n  const issueChartData = useMemo(() => {\n    return [\n      { name: \'Critical\', value: codeTelemetry.issues.counts.critical, color: COLORS.danger },\n      { name: \'High\', value: codeTelemetry.issues.counts.high, color: COLORS.warning },\n      { name: \'Medium\', value: codeTelemetry.issues.counts.medium, color: COLORS.info },\n      { name: \'Low\', value: codeTelemetry.issues.counts.low, color: COLORS.success }\n    ];\n  }, [codeTelemetry.issues.counts]);\n\n  const evolutionChartData = useMemo(() => {\n    return Object.entries(evolutionTelemetry.eventsByType).map(([type, count]) => ({\n      name: type.replace(/_/g, \' \'),\n      count\n    }));\n  }, [evolutionTelemetry.eventsByType]);\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {/* Live Status Header */}\n      <div className="flex items-center justify-between">\n        <div className="flex items-center gap-3">\n          <div className="relative">\n            <motion.div\n              animate={{ scale: [1, 1.2, 1], opacity: [1, 0.5, 1] }}\n              transition={{ duration: 2, repeat: Infinity }}\n              className="w-3 h-3 rounded-full bg-green-500"\n            />\n            <motion.div\n              animate={{ scale: [1, 2], opacity: [0.5, 0] }}\n              transition={{ duration: 2, repeat: Infinity }}\n              className="absolute inset-0 rounded-full border-2 border-green-500"\n            />\n          </div>\n          <div>\n            <h2 className="text-lg font-bold flex items-center gap-2">\n              <Network className="w-5 h-5 text-violet-500" />\n              Unified System Dashboard\n            </h2>\n            <p className="text-sm text-muted-foreground">\n              Real-time telemetry from {telemetry.totalAdapters} adapters, {telemetry.code?.fileCount || 0} files\n            </p>\n          </div>\n        </div>\n        <Badge variant="outline" className="bg-green-500/10 text-green-400 border-green-500/30">\n          <Radio className="w-3 h-3 mr-1" />\n          LIVE\n        </Badge>\n      </div>\n\n      {/* Key Metrics Grid */}\n      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">\n        <MetricCard\n          icon={<Cpu className="w-4 h-4" />}\n          label="Active Adapters"\n          value={adapterTelemetry.activeAdapters}\n          total={adapterTelemetry.totalAdapters}\n          color={COLORS.adapter}\n          trend={`${adapterTelemetry.totalSignals} signals`}\n        />\n        <MetricCard\n          icon={<GitBranch className="w-4 h-4" />}\n          label="Code Health"\n          value={`${healthPercent}%`}\n          subvalue={codeTelemetry.analysis?.fileCount}\n          sublabel="files"\n          color={healthColor}\n          trend={healthPercent > 80 ? \'Excellent\' : healthPercent > 60 ? \'Good\' : \'Needs Attention\'}\n        />\n        <MetricCard\n          icon={<Network className="w-4 h-4" />}\n          label="Resonances"\n          value={adapterTelemetry.resonances.length}\n          color={COLORS.resonance}\n          trend="cross-domain pairs"\n        />\n        <MetricCard\n          icon={<AlertTriangle className="w-4 h-4" />}\n          label="Issues"\n          value={codeTelemetry.issues.counts.critical + codeTelemetry.issues.counts.high}\n          subvalue={codeTelemetry.issues.counts.medium + codeTelemetry.issues.counts.low}\n          sublabel="medium/low"\n          color={codeTelemetry.issues.counts.critical > 0 ? COLORS.danger : COLORS.warning}\n          trend={codeTelemetry.issues.counts.critical > 0 ? \'Critical!\' : \'Manageable\'}\n        />\n      </div>\n\n      {/* Main Tabs */}\n      <Tabs value={activeTab} onValueChange={setActiveTab} className="space-y-4">\n        <TabsList className="grid w-full grid-cols-4">\n          <TabsTrigger value="overview" className="gap-2">\n            <Activity className="h-4 w-4" />\n            Overview\n          </TabsTrigger>\n          <TabsTrigger value="adapters" className="gap-2">\n            <Cpu className="h-4 w-4" />\n            Adapters\n          </TabsTrigger>\n          <TabsTrigger value="code" className="gap-2">\n            <GitBranch className="h-4 w-4" />\n            Code\n          </TabsTrigger>\n          <TabsTrigger value="evolution" className="gap-2">\n            <TrendingUp className="h-4 w-4" />\n            Evolution\n          </TabsTrigger>\n        </TabsList>\n\n        {/* Overview Tab */}\n        <TabsContent value="overview" className="space-y-4">\n          <div className="grid md:grid-cols-2 gap-4">\n            {/* System Health Chart */}\n            <Card>\n              <CardHeader className="pb-2">\n                <CardTitle className="text-sm font-medium flex items-center gap-2">\n                  <Target className="w-4 h-4" />\n                  System Health Distribution\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className="h-[200px]">\n                  <ResponsiveContainer width="100%" height="100%">\n                    <PieChart>\n                      <Pie\n                        data={[\n                          { name: \'Code\', value: codeTelemetry.analysis?.health || 0, color: COLORS.code },\n                          { name: \'Adapters\', value: Math.round(telemetry.averageHealth), color: COLORS.adapter },\n                          { name: \'Gap\', value: Math.max(0, 100 - (codeTelemetry.analysis?.health || 0) - Math.round(telemetry.averageHealth)), color: \'#e5e7eb\' }\n                        ]}\n                        cx="50%"\n                        cy="50%"\n                        innerRadius={60}\n                        outerRadius={80}\n                        dataKey="value"\n                      >\n                        {[\n                          { name: \'Code\', value: codeTelemetry.analysis?.health || 0, color: COLORS.code },\n                          { name: \'Adapters\', value: Math.round(telemetry.averageHealth), color: COLORS.adapter },\n                          { name: \'Gap\', value: Math.max(0, 100 - (codeTelemetry.analysis?.health || 0) - Math.round(telemetry.averageHealth)), color: \'#e5e7eb\' }\n                        ].map((entry, index) => (\n                          <Cell key={`cell-${index}`} fill={entry.color} />\n                        ))}\n                      </Pie>\n                      <Tooltip />\n                    </PieChart>\n                  </ResponsiveContainer>\n                </div>\n                <div className="flex justify-center gap-4 text-sm">\n                  <div className="flex items-center gap-1">\n                    <div className="w-3 h-3 rounded-full bg-emerald-500" />\n                    Code {codeTelemetry.analysis?.health || 0}%\n                  </div>\n                  <div className="flex items-center gap-1">\n                    <div className="w-3 h-3 rounded-full bg-violet-500" />\n                    Adapters {Math.round(telemetry.averageHealth)}%\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Domain Distribution */}\n            <Card>\n              <CardHeader className="pb-2">\n                <CardTitle className="text-sm font-medium flex items-center gap-2">\n                  <Layers className="w-4 h-4" />\n                  Adapter Domains\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className="h-[200px]">\n                  <ResponsiveContainer width="100%" height="100%">\n                    <BarChart data={adapterChartData} layout="vertical">\n                      <CartesianGrid strokeDasharray="3 3" horizontal={false} />\n                      <XAxis type="number" hide />\n                      <YAxis dataKey="name" type="category" width={80} tick={{ fontSize: 11 }} />\n                      <Tooltip />\n                      <Bar dataKey="value" fill={COLORS.adapter} radius={[0, 4, 4, 0]} />\n                    </BarChart>\n                  </ResponsiveContainer>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Live Event Stream */}\n          <LiveEventStream events={evolutionTelemetry.recentEvents} />\n        </TabsContent>\n\n        {/* Adapters Tab */}\n        <TabsContent value="adapters" className="space-y-4">\n          <div className="grid md:grid-cols-3 gap-4">\n            <Card className="md:col-span-2">\n              <CardHeader>\n                <CardTitle className="flex items-center gap-2">\n                  <Cpu className="w-5 h-5" />\n                  Active Adapters ({adapterTelemetry.adapters.length})\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ScrollArea className="h-[400px]">\n                  <div className="space-y-2">\n                    {adapterTelemetry.adapters.slice(0, 20).map((adapter) => (\n                      <motion.div\n                        key={adapter.adapterName}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        className="p-3 rounded-lg border bg-card/50 flex items-center justify-between"\n                      >\n                        <div className="flex items-center gap-3">\n                          <div className={`w-2 h-2 rounded-full ${adapter.isActive ? \'bg-green-500\' : \'bg-gray-400\'}`} />\n                          <div>\n                            <p className="font-medium text-sm">{adapter.adapterName}</p>\n                            <p className="text-xs text-muted-foreground">{adapter.domain}</p>\n                          </div>\n                        </div>\n                        <div className="text-right">\n                          <p className="text-sm font-medium">{adapter.signalCount} signals</p>\n                          <p className="text-xs text-muted-foreground">\n                            Learning: {(adapter.learningRate * 100).toFixed(1)}%\n                          </p>\n                        </div>\n                      </motion.div>\n                    ))}\n                  </div>\n                </ScrollArea>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className="text-sm">Resonance Pairs</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ScrollArea className="h-[400px]">\n                  <div className="space-y-3">\n                    {adapterTelemetry.resonances.map((resonance, idx) => (\n                      <div key={idx} className="p-3 rounded-lg bg-violet-500/10 border border-violet-500/20">\n                        <div className="flex items-center justify-between mb-2">\n                          <Badge variant="outline" className="text-xs">\n                            {resonance.adapter1}\n                          </Badge>\n                          <Badge variant="outline" className="text-xs">\n                            {resonance.adapter2}\n                          </Badge>\n                        </div>\n                        <Progress \n                          value={resonance.resonanceScore * 100} \n                          className="h-1"\n                        />\n                        <p className="text-xs text-center mt-1 text-muted-foreground">\n                          {(resonance.resonanceScore * 100).toFixed(0)}% resonance\n                        </p>\n                      </div>\n                    ))}\n                  </div>\n                </ScrollArea>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        {/* Code Tab */}\n        <TabsContent value="code" className="space-y-4">\n          <div className="grid md:grid-cols-2 gap-4">\n            {/* Issue Distribution */}\n            <Card>\n              <CardHeader>\n                <CardTitle className="flex items-center gap-2">\n                  <AlertTriangle className="w-5 h-5" />\n                  Issues by Severity\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className="h-[200px]">\n                  <ResponsiveContainer width="100%" height="100%">\n                    <BarChart data={issueChartData}>\n                      <CartesianGrid strokeDasharray="3 3" />\n                      <XAxis dataKey="name" />\n                      <YAxis />\n                      <Tooltip />\n                      <Bar dataKey="value" radius={[4, 4, 0, 0]}>\n                        {issueChartData.map((entry, index) => (\n                          <Cell key={`cell-${index}`} fill={entry.color} />\n                        ))}\n                      </Bar>\n                    </BarChart>\n                  </ResponsiveContainer>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Code Health */}\n            <Card>\n              <CardHeader>\n                <CardTitle className="flex items-center gap-2">\n                  <CheckCircle className="w-5 h-5" />\n                  Code Health Metrics\n                </CardTitle>\n              </CardHeader>\n              <CardContent className="space-y-4">\n                <div>\n                  <div className="flex justify-between text-sm mb-1">\n                    <span>Pattern Density</span>\n                    <span>{(codeTelemetry.analysis?.patternDensity || 0).toFixed(1)}%</span>\n                  </div>\n                  <Progress \n                    value={codeTelemetry.analysis?.patternDensity || 0} \n                    className="h-2"\n                  />\n                </div>\n                <div>\n                  <div className="flex justify-between text-sm mb-1">\n                    <span>File Count</span>\n                    <span>{codeTelemetry.analysis?.fileCount || 0}</span>\n                  </div>\n                  <div className="text-xs text-muted-foreground">\n                    {codeTelemetry.analysis?.linesOfCode || 0} lines of code\n                  </div>\n                </div>\n                <div>\n                  <div className="flex justify-between text-sm mb-1">\n                    <span>Archetype</span>\n                    <Badge variant="outline">{codeTelemetry.analysis?.archetype || \'Unknown\'}</Badge>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Recent Issues */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Recent Issues</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ScrollArea className="h-[300px]">\n                <div className="space-y-2">\n                  {codeTelemetry.issues.all.slice(0, 20).map((issue) => (\n                    <div \n                      key={issue.id} \n                      className={`p-3 rounded-lg border ${\n                        issue.severity === \'critical\' ? \'bg-red-500/10 border-red-500/30\' :\n                        issue.severity === \'high\' ? \'bg-orange-500/10 border-orange-500/30\' :\n                        \'bg-yellow-500/10 border-yellow-500/30\'\n                      }`}\n                    >\n                      <div className="flex items-center justify-between">\n                        <div className="flex items-center gap-2">\n                          <Badge \n                            variant={issue.severity === \'critical\' ? \'destructive\' : \'outline\'}\n                            className="text-xs"\n                          >\n                            {issue.severity}\n                          </Badge>\n                          <span className="text-sm font-medium">{issue.title}</span>\n                        </div>\n                        <span className="text-xs text-muted-foreground">\n                          {new Date(issue.timestamp).toLocaleTimeString()}\n                        </span>\n                      </div>\n                      <p className="text-xs text-muted-foreground mt-1">{issue.file}</p>\n                    </div>\n                  ))}\n                </div>\n              </ScrollArea>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Evolution Tab */}\n        <TabsContent value="evolution" className="space-y-4">\n          <div className="grid md:grid-cols-2 gap-4">\n            <Card>\n              <CardHeader>\n                <CardTitle className="flex items-center gap-2">\n                  <TrendingUp className="w-5 h-5" />\n                  Event Types\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className="h-[250px]">\n                  <ResponsiveContainer width="100%" height="100%">\n                    <BarChart data={evolutionChartData}>\n                      <CartesianGrid strokeDasharray="3 3" />\n                      <XAxis dataKey="name" tick={{ fontSize: 10 }} interval={0} angle={-45} textAnchor="end" height={80} />\n                      <YAxis />\n                      <Tooltip />\n                      <Bar dataKey="count" fill={COLORS.evolution} radius={[4, 4, 0, 0]} />\n                    </BarChart>\n                  </ResponsiveContainer>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className="flex items-center gap-2">\n                  <Brain className="w-5 h-5" />\n                  Cross-Domain Activity\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className="space-y-3">\n                  <div className="flex items-center justify-between p-3 rounded-lg bg-pink-500/10 border border-pink-500/20">\n                    <div className="flex items-center gap-2">\n                      <Zap className="w-4 h-4 text-pink-500" />\n                      <span className="text-sm font-medium">Total Events</span>\n                    </div>\n                    <span className="text-lg font-bold">{evolutionTelemetry.eventCount}</span>\n                  </div>\n                  <div className="flex items-center justify-between p-3 rounded-lg bg-violet-500/10 border border-violet-500/20">\n                    <div className="flex items-center gap-2">\n                      <Network className="w-4 h-4 text-violet-500" />\n                      <span className="text-sm font-medium">Cross-Domain</span>\n                    </div>\n                    <span className="text-lg font-bold">{evolutionTelemetry.crossDomainEvents.length}</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Evolution Timeline */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Evolution Timeline</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ScrollArea className="h-[300px]">\n                <div className="space-y-2">\n                  {evolutionTelemetry.allEvents.slice(0, 30).map((event, idx) => (\n                    <div key={idx} className="flex items-center gap-3 p-2 rounded-lg bg-muted/50">\n                      <div className="w-2 h-2 rounded-full bg-pink-500" />\n                      <div className="flex-1">\n                        <p className="text-sm font-medium">{event.eventType.replace(/_/g, \' \')}</p>\n                        <p className="text-xs text-muted-foreground">from {event.source}</p>\n                      </div>\n                      <span className="text-xs text-muted-foreground">\n                        {new Date(event.timestamp).toLocaleTimeString()}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </ScrollArea>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\n// Metric Card Component\nfunction MetricCard({\n  icon,\n  label,\n  value,\n  total,\n  subvalue,\n  sublabel,\n  color,\n  trend\n}: {\n  icon: React.ReactNode;\n  label: string;\n  value: string | number;\n  total?: number;\n  subvalue?: number;\n  sublabel?: string;\n  color: string;\n  trend: string;\n}) {\n  return (\n    <Card className="relative overflow-hidden">\n      <div \n        className="absolute top-0 left-0 w-1 h-full bg-[var(--color)]"\n        style={{ \'--color\': color } as React.CSSProperties}\n      />\n      <CardContent className="pt-4">\n        <div className="flex items-center justify-between">\n          <div className="flex items-center gap-2 text-muted-foreground">\n            {icon}\n            <span className="text-sm">{label}</span>\n          </div>\n        </div>\n        <div className="mt-2">\n          <div className="flex items-baseline gap-2">\n            <span className="text-2xl font-bold">{value}</span>\n            {total !== undefined && (\n              <span className="text-sm text-muted-foreground">/ {total}</span>\n            )}\n            {subvalue !== undefined && (\n              <span className="text-xs text-muted-foreground">({subvalue} {sublabel})</span>\n            )}\n          </div>\n          <p className="text-xs mt-1 text-[var(--color)]" style={{ \'--color\': color } as React.CSSProperties}>{trend}</p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n// Live Event Stream Component\nfunction LiveEventStream({ events }: { events: Array<{ eventType: string; source: string; timestamp: number }> }) {\n  return (\n    <Card>\n      <CardHeader className="pb-2">\n        <CardTitle className="text-sm font-medium flex items-center gap-2">\n          <Clock className="w-4 h-4" />\n          Live Event Stream\n          <Badge variant="outline" className="ml-auto text-xs bg-green-500/10 text-green-400">\n            <Activity className="w-3 h-3 mr-1" />\n            Real-time\n          </Badge>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <ScrollArea className="h-[150px]">\n          <div className="space-y-1">\n            <AnimatePresence mode="popLayout">\n              {events.slice(0, 10).map((event, idx) => (\n                <motion.div\n                  key={`${event.timestamp}-${idx}`}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: 20 }}\n                  layout\n                  className="flex items-center gap-2 p-2 rounded bg-muted/30 text-sm"\n                >\n                  <Badge variant="outline" className="text-xs shrink-0">\n                    {event.source}\n                  </Badge>\n                  <span className="flex-1 truncate">{event.eventType.replace(/_/g, \' \')}</span>\n                  <span className="text-xs text-muted-foreground shrink-0">\n                    {new Date(event.timestamp).toLocaleTimeString()}\n                  </span>\n                </motion.div>\n              ))}\n            </AnimatePresence>\n            {events.length === 0 && (\n              <p className="text-center text-muted-foreground text-sm py-4">\n                Waiting for events...\n              </p>\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}\n';export{e as default};
